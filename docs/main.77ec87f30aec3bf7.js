var oS=Object.defineProperty,rS=Object.defineProperties,sS=Object.getOwnPropertyDescriptors,Xb=Object.getOwnPropertySymbols,aS=Object.prototype.hasOwnProperty,lS=Object.prototype.propertyIsEnumerable,Tm=(k,B,f)=>B in k?oS(k,B,{enumerable:!0,configurable:!0,writable:!0,value:f}):k[B]=f,Cm=(k,B)=>{for(var f in B||(B={}))aS.call(B,f)&&Tm(k,f,B[f]);if(Xb)for(var f of Xb(B))lS.call(B,f)&&Tm(k,f,B[f]);return k},Sm=(k,B)=>rS(k,sS(B)),cl=(k,B,f)=>(Tm(k,"symbol"!=typeof B?B+"":B,f),f);(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{33290:(k,B,f)=>{"use strict";f.d(B,{d:()=>tt});var b=f(79307),p=f(38421);const{isArray:e}=Array;var n=f(60515),o=f(25403),s=f(63269);var _=f(39646),w=f(4128),M=f(32076),U=f(91005),V=f(18505),H=f(63900),$=f(70262),pt=f(54004),nt=f(43787),st=f(21086);class Ct{constructor(ot,Lt){this.urL=ot,this.http=Lt,this.WasAlive=!1}download(){window.location.href="https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip"}IsAlive(){this.WasAlive=!1;var ot=this,Lt=(new Date).toISOString();return this.http.get(this.urL+`api/v1/Management/CurrentDate?${Lt}`,{responseType:"text"}).pipe((0,$.K)(at=>(0,_.of)("")),(0,pt.U)(at=>(null==at?void 0:at.length)>0&&(Date.parse(at),ot.WasAlive=!0,!0)))}LoadBlockContent(ot){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocksContent",{id:ot},{responseType:"text"}).pipe((0,pt.U)(at=>null==at?void 0:at.toString()))}LoadBlocks(){return(new Date).toISOString(),this.http.post(this.urL+"api/v1/BASave/GetBlocks",null).pipe((0,pt.U)(Lt=>Lt.map(dt=>{var it=new nt.q(dt);return it.Source="LocalAPI",it})))}SaveBlock(ot,Lt){return this.http.post(this.urL+"api/v1/BASave/SaveNewBlock",{b:ot,content:Lt},{responseType:"text"}).pipe((0,pt.U)(at=>Number.parseInt(null==at?void 0:at.toString(),10)))}}var xt=f(5e3),yt=f(40520),ut=f(16335);let tt=(()=>{class lt{constructor(Lt,at){this.http=Lt,this.loadShowUsageService=at,this.settings=null,this.linksSwagger=[],this.demoBlocks=[],this.swaggersDict=new Map,this.customCategories="",this.LocalAPI=null,this.Init()}CreateLocalApis(Lt,at){return new Ct(at,Lt)}Init(){return function(...lt){const ot=(0,s.jO)(lt),Lt=function(lt){return 1===lt.length&&e(lt[0])?lt[0]:lt}(lt);return Lt.length?new b.y(at=>{let dt=Lt.map(()=>[]),it=Lt.map(()=>!1);at.add(()=>{dt=it=null});for(let rt=0;!at.closed&&rt<Lt.length;rt++)(0,p.Xf)(Lt[rt]).subscribe(new o.Q(at,Gt=>{if(dt[rt].push(Gt),dt.every(bt=>bt.length)){const bt=dt.map(Ht=>Ht.shift());at.next(ot?ot(...bt):bt),dt.some((Ht,ce)=>!Ht.length&&it[ce])&&at.complete()}},()=>{it[rt]=!0,!dt[rt].length&&at.complete()}));return()=>{dt=it=null}}):n.E}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks(),this.loadShowUsageService.getCustomCategories(),this.getLatestVersion()).pipe((0,U.g)(1e3),(0,V.b)(([Lt,at,dt,it,rt])=>{this.settings=Lt,this.settings.latestVersion=rt,this.linksSwagger=at,this.demoBlocks=dt.map(Gt=>{var bt=new nt.q(Gt);return bt.Source="Demos",bt}),this.customCategories=it,this.LocalAPI=this.CreateLocalApis(this.http,this.settings.localAPI),this.LocalAPI.IsAlive().subscribe(Gt=>{console.log("LocalAPI is alive",Gt)})}),(0,H.w)(()=>this.obtainSwaggers(this.linksSwagger)),(0,H.w)(()=>(0,_.of)("")))}obtainSwaggers(Lt){var at=Lt.map(it=>this.LoadSwaggersFromUrl(it));return(0,w.D)(at)}LoadSwaggersFromUrl(Lt){var at=Lt.link,dt=Lt.id||Lt.link,it=new st.parseData(at);return(0,M.D)(it.ParseSwagger()).pipe((0,V.b)(Gt=>{console.log("swagger loaded:"+at,Gt),Gt.name=dt,this.swaggersDict.set(at,Gt)},Gt=>{console.error("swagger error:"+at,Gt)}))}getLatestVersion(){return this.http.get("https://ignatandrei.github.io/BlocklyAutomation/version.txt",{responseType:"text"}).pipe((0,$.K)(Lt=>(console.error("error getting latest version",Lt),(0,_.of)("vcannot get latest version"))),(0,pt.U)(Lt=>Lt.toString().trim().substr(1)))}getSettings(){var Lt=(new Date).toISOString();return this.http.get(`assets/settings.json?${Lt}`,{responseType:"text"}).pipe((0,pt.U)(at=>JSON.parse(at)))}}return lt.\u0275fac=function(Lt){return new(Lt||lt)(xt.LFG(yt.eN),xt.LFG(ut.F))},lt.\u0275prov=xt.Yz7({token:lt,factory:lt.\u0275fac}),lt})()},43787:(k,B,f)=>{"use strict";f.d(B,{q:()=>b});class b{constructor(e={}){this.id="",this.description="",this.categories="",this.blocks="",this.Source="None",Object.assign(this,e)}}},68260:(k,B,f)=>{"use strict";f.d(B,{v:()=>e});var b=f(77579),p=f(5e3);let e=(()=>{class t{constructor(){this.sendData=new b.x}receiveData(){return this.sendData.asObservable()}sendDataToServer(o,s){this.sendData.next([o,s])}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac}),t})()},19378:(k,B,f)=>{"use strict";f.r(B),f.d(B,{DisplayBlocklyComponent:()=>gp});var b=f(15861),p=f(76279),e=f(30069);const t=[p.Events.VIEWPORT_CHANGE,p.Events.BLOCK_MOVE,p.Events.BLOCK_DELETE];class s{constructor(l){this.workspace_=l,this.width_=0,this.height_=0,this.top_=0,this.left_=0,this.lastScale_=1,this.cachedContentMetrics_=void 0}init(l){l=Number(l),this.padding_=isNaN(l)?10:l,this.svgGroup_=p.utils.dom.createSvgElement(p.utils.Svg.G,{class:"contentAreaHighlight"},null);const r=String(Math.random()).substring(2),a=p.utils.dom.createSvgElement(new p.utils.Svg("mask"),{id:"contentAreaHighlightMask"+r},this.svgGroup_);p.utils.dom.createSvgElement(p.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",fill:"white"},a),this.rect_=p.utils.dom.createSvgElement(p.utils.Svg.RECT,{x:0,y:0,rx:p.Bubble.BORDER_WIDTH,ry:p.Bubble.BORDER_WIDTH,fill:"black"},a),this.background_=p.utils.dom.createSvgElement(p.utils.Svg.RECT,{x:0,y:0,width:"100%",height:"100%",mask:"url(#contentAreaHighlightMask"+r+")"},this.svgGroup_),this.applyColor_();const u=this.workspace_.getMetricsManager();this.cachedContentMetrics_=u.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_);const m=u.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,m),this.svgGroup_.style.transition="opacity 0.25s";const E=this.workspace_.getParentSvg();E.firstChild?E.insertBefore(this.svgGroup_,E.firstChild):E.appendChild(this.svgGroup_),this.onChangeWrapper_=this.onChange_.bind(this),this.workspace_.addChangeListener(this.onChangeWrapper_)}dispose(){this.svgGroup_&&p.utils.dom.removeNode(this.svgGroup_),this.onChangeWrapper_&&p.unbindEvent_(this.onChangeWrapper_)}onChange_(l){if(l.type===p.Events.THEME_CHANGE)this.applyColor_();else if(-1!==t.indexOf(l.type)){const r=this.workspace_.getMetricsManager();l.type!==p.Events.VIEWPORT_CHANGE&&(this.cachedContentMetrics_=r.getContentMetrics(!0),this.resize_(this.cachedContentMetrics_));const a=r.getAbsoluteMetrics();this.position_(this.cachedContentMetrics_,a)}else l.type===p.Events.BLOCK_DRAG&&this.handleBlockDrag_(l)}handleBlockDrag_(l){this.svgGroup_.setAttribute("opacity",l.isStart?"0":"1")}applyColor_(){const r=this.workspace_.getTheme().getComponentStyle("workspaceBackgroundColour")||"#ffffff",a=p.utils.colour.blend("#000",r,.1),u=p.utils.colour.blend("#fff",r,.1);this.background_.setAttribute("fill","#ffffff"===r||"#fff"===r?a:u)}resize_(l){const r=l.width?l.width+2*this.padding_:0,a=l.height?l.height+2*this.padding_:0;r!==this.width_&&(this.width_=r,this.rect_.setAttribute("width",r)),a!==this.height_&&(this.height_=a,this.rect_.setAttribute("height",a))}position_(l,r){const m=this.workspace_.scale,E=r.top+l.top*m- -this.workspace_.scrollY-this.padding_*m,S=r.left+l.left*m- -this.workspace_.scrollX-this.padding_*m;(E!==this.top_||S!==this.left_||this.lastScale_!==m)&&(this.top_=E,this.left_=S,this.lastScale_=m,this.rect_.setAttribute("transform","translate("+S+","+E+") scale("+m+")"))}}var c=f(4283),_=f(34346),w=f(43787),M=f(21086),U=f(70697);const H="undefined"==typeof window?function(g){return g()}:window.requestAnimationFrame;function $(g,l,r){const a=r||(E=>Array.prototype.slice.call(E));let u=!1,m=[];return function(...E){m=a(E),u||(u=!0,H.call(window,()=>{u=!1,g.apply(l,m)}))}}const nt=g=>"start"===g?"left":"end"===g?"right":"center",st=(g,l,r)=>"start"===g?l:"end"===g?r:(l+r)/2;function xt(){}const yt=function(){let g=0;return function(){return g++}}();function ut(g){return null==g}function tt(g){if(Array.isArray&&Array.isArray(g))return!0;const l=Object.prototype.toString.call(g);return"[object"===l.substr(0,7)&&"Array]"===l.substr(-6)}function lt(g){return null!==g&&"[object Object]"===Object.prototype.toString.call(g)}const ot=g=>("number"==typeof g||g instanceof Number)&&isFinite(+g);function Lt(g,l){return ot(g)?g:l}function at(g,l){return void 0===g?l:g}const it=(g,l)=>"string"==typeof g&&g.endsWith("%")?parseFloat(g)/100*l:+g;function rt(g,l,r){if(g&&"function"==typeof g.call)return g.apply(r,l)}function Gt(g,l,r,a){let u,m,E;if(tt(g))if(m=g.length,a)for(u=m-1;u>=0;u--)l.call(r,g[u],u);else for(u=0;u<m;u++)l.call(r,g[u],u);else if(lt(g))for(E=Object.keys(g),m=E.length,u=0;u<m;u++)l.call(r,g[E[u]],E[u])}function bt(g,l){let r,a,u,m;if(!g||!l||g.length!==l.length)return!1;for(r=0,a=g.length;r<a;++r)if(u=g[r],m=l[r],u.datasetIndex!==m.datasetIndex||u.index!==m.index)return!1;return!0}function Ht(g){if(tt(g))return g.map(Ht);if(lt(g)){const l=Object.create(null),r=Object.keys(g),a=r.length;let u=0;for(;u<a;++u)l[r[u]]=Ht(g[r[u]]);return l}return g}function ce(g){return-1===["__proto__","prototype","constructor"].indexOf(g)}function Ye(g,l,r,a){if(!ce(g))return;const u=l[g],m=r[g];lt(u)&&lt(m)?de(u,m,a):l[g]=Ht(m)}function de(g,l,r){const a=tt(l)?l:[l],u=a.length;if(!lt(g))return g;const m=(r=r||{}).merger||Ye;for(let E=0;E<u;++E){if(!lt(l=a[E]))continue;const S=Object.keys(l);for(let D=0,N=S.length;D<N;++D)m(S[D],g,l,r)}return g}function Be(g,l){return de(g,l,{merger:He})}function He(g,l,r){if(!ce(g))return;const a=l[g],u=r[g];lt(a)&&lt(u)?Be(a,u):Object.prototype.hasOwnProperty.call(l,g)||(l[g]=Ht(u))}function Ne(g,l){const r=g.indexOf(".",l);return-1===r?g.length:r}function oi(g,l){if(""===l)return g;let r=0,a=Ne(l,r);for(;g&&a>r;)g=g[l.substr(r,a-r)],r=a+1,a=Ne(l,r);return g}function Ft(g){return g.charAt(0).toUpperCase()+g.slice(1)}const _e=g=>void 0!==g,Xt=g=>"function"==typeof g,Jt=(g,l)=>{if(g.size!==l.size)return!1;for(const r of g)if(!l.has(r))return!1;return!0},Rt=Math.PI,Pt=2*Rt,he=Pt+Rt,ze=Number.POSITIVE_INFINITY,le=Rt/180,jt=Rt/2,Yt=Rt/4,ge=2*Rt/3,$t=Math.log10,oe=Math.sign;function re(g){const l=Math.round(g);g=we(g,l,g/1e3)?l:g;const r=Math.pow(10,Math.floor($t(g))),a=g/r;return(a<=1?1:a<=2?2:a<=5?5:10)*r}function kt(g){return!isNaN(parseFloat(g))&&isFinite(g)}function we(g,l,r){return Math.abs(g-l)<r}function ci(g,l,r){let a,u,m;for(a=0,u=g.length;a<u;a++)m=g[a][r],isNaN(m)||(l.min=Math.min(l.min,m),l.max=Math.max(l.max,m))}function Ze(g){return g*(Rt/180)}function li(g){return g*(180/Rt)}function Fi(g){if(!ot(g))return;let l=1,r=0;for(;Math.round(g*l)/l!==g;)l*=10,r++;return r}function Ei(g,l){return Math.sqrt(Math.pow(l.x-g.x,2)+Math.pow(l.y-g.y,2))}function gi(g,l){return(g-l+he)%Pt-Rt}function We(g){return(g%Pt+Pt)%Pt}function ri(g,l,r,a){const u=We(g),m=We(l),E=We(r),S=We(m-u),D=We(E-u),N=We(u-m),K=We(u-E);return u===m||u===E||a&&m===E||S>D&&N<K}function ue(g,l,r){return Math.max(l,Math.min(r,g))}function ti(g,l,r,a=1e-6){return g>=Math.min(l,r)-a&&g<=Math.max(l,r)+a}const Ri=g=>0===g||1===g,Pe=(g,l,r)=>-Math.pow(2,10*(g-=1))*Math.sin((g-l)*Pt/r),ie=(g,l,r)=>Math.pow(2,-10*g)*Math.sin((g-l)*Pt/r)+1,Mt={linear:g=>g,easeInQuad:g=>g*g,easeOutQuad:g=>-g*(g-2),easeInOutQuad:g=>(g/=.5)<1?.5*g*g:-.5*(--g*(g-2)-1),easeInCubic:g=>g*g*g,easeOutCubic:g=>(g-=1)*g*g+1,easeInOutCubic:g=>(g/=.5)<1?.5*g*g*g:.5*((g-=2)*g*g+2),easeInQuart:g=>g*g*g*g,easeOutQuart:g=>-((g-=1)*g*g*g-1),easeInOutQuart:g=>(g/=.5)<1?.5*g*g*g*g:-.5*((g-=2)*g*g*g-2),easeInQuint:g=>g*g*g*g*g,easeOutQuint:g=>(g-=1)*g*g*g*g+1,easeInOutQuint:g=>(g/=.5)<1?.5*g*g*g*g*g:.5*((g-=2)*g*g*g*g+2),easeInSine:g=>1-Math.cos(g*jt),easeOutSine:g=>Math.sin(g*jt),easeInOutSine:g=>-.5*(Math.cos(Rt*g)-1),easeInExpo:g=>0===g?0:Math.pow(2,10*(g-1)),easeOutExpo:g=>1===g?1:1-Math.pow(2,-10*g),easeInOutExpo:g=>Ri(g)?g:g<.5?.5*Math.pow(2,10*(2*g-1)):.5*(2-Math.pow(2,-10*(2*g-1))),easeInCirc:g=>g>=1?g:-(Math.sqrt(1-g*g)-1),easeOutCirc:g=>Math.sqrt(1-(g-=1)*g),easeInOutCirc:g=>(g/=.5)<1?-.5*(Math.sqrt(1-g*g)-1):.5*(Math.sqrt(1-(g-=2)*g)+1),easeInElastic:g=>Ri(g)?g:Pe(g,.075,.3),easeOutElastic:g=>Ri(g)?g:ie(g,.075,.3),easeInOutElastic(g){const l=.1125;return Ri(g)?g:g<.5?.5*Pe(2*g,l,.45):.5+.5*ie(2*g-1,l,.45)},easeInBack(g){const l=1.70158;return g*g*((l+1)*g-l)},easeOutBack(g){const l=1.70158;return(g-=1)*g*((l+1)*g+l)+1},easeInOutBack(g){let l=1.70158;return(g/=.5)<1?g*g*((1+(l*=1.525))*g-l)*.5:.5*((g-=2)*g*((1+(l*=1.525))*g+l)+2)},easeInBounce:g=>1-Mt.easeOutBounce(1-g),easeOutBounce(g){const l=7.5625,r=2.75;return g<1/r?l*g*g:g<2/r?l*(g-=1.5/r)*g+.75:g<2.5/r?l*(g-=2.25/r)*g+.9375:l*(g-=2.625/r)*g+.984375},easeInOutBounce:g=>g<.5?.5*Mt.easeInBounce(2*g):.5*Mt.easeOutBounce(2*g-1)+.5},ct={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},It="0123456789ABCDEF",te=g=>It[15&g],ve=g=>It[(240&g)>>4]+It[15&g],Ti=g=>(240&g)>>4==(15&g);function $e(g){return g+.5|0}const Me=(g,l,r)=>Math.max(Math.min(g,r),l);function Te(g){return Me($e(2.55*g),0,255)}function Xe(g){return Me($e(255*g),0,255)}function pi(g){return Me($e(g/2.55)/100,0,1)}function Ki(g){return Me($e(100*g),0,100)}const cn=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,hr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Jo(g,l,r){const a=l*Math.min(r,1-r),u=(m,E=(m+g/30)%12)=>r-a*Math.max(Math.min(E-3,9-E,1),-1);return[u(0),u(8),u(4)]}function Pr(g,l,r){const a=(u,m=(u+g/60)%6)=>r-r*l*Math.max(Math.min(m,4-m,1),0);return[a(5),a(3),a(1)]}function or(g,l,r){const a=Jo(g,1,.5);let u;for(l+r>1&&(u=1/(l+r),l*=u,r*=u),u=0;u<3;u++)a[u]*=1-l-r,a[u]+=l;return a}function Jn(g){const r=g.r/255,a=g.g/255,u=g.b/255,m=Math.max(r,a,u),E=Math.min(r,a,u),S=(m+E)/2;let D,N,K;return m!==E&&(K=m-E,N=S>.5?K/(2-m-E):K/(m+E),D=m===r?(a-u)/K+(a<u?6:0):m===a?(u-r)/K+2:(r-a)/K+4,D=60*D+.5),[0|D,N||0,S]}function As(g,l,r,a){return(Array.isArray(l)?g(l[0],l[1],l[2]):g(l,r,a)).map(Xe)}function ro(g,l,r){return As(Jo,g,l,r)}function Nn(g){return(g%360+360)%360}const wo={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Kn={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let $o;function jo(g,l,r){if(g){let a=Jn(g);a[l]=Math.max(0,Math.min(a[l]+a[l]*r,0===l?360:1)),a=ro(a),g.r=a[0],g.g=a[1],g.b=a[2]}}function rr(g,l){return g&&Object.assign(l||{},g)}function vr(g){var l={r:0,g:0,b:0,a:255};return Array.isArray(g)?g.length>=3&&(l={r:g[0],g:g[1],b:g[2],a:255},g.length>3&&(l.a=Xe(g[3]))):(l=rr(g,{r:0,g:0,b:0,a:1})).a=Xe(l.a),l}function dr(g){return"r"===g.charAt(0)?function(g){const l=cn.exec(g);let a,u,m,r=255;if(l){if(l[7]!==a){const E=+l[7];r=255&(l[8]?Te(E):255*E)}return a=+l[1],u=+l[3],m=+l[5],a=255&(l[2]?Te(a):a),u=255&(l[4]?Te(u):u),m=255&(l[6]?Te(m):m),{r:a,g:u,b:m,a:r}}}(g):function(g){const l=hr.exec(g);let a,r=255;if(!l)return;l[5]!==a&&(r=l[6]?Te(+l[5]):Xe(+l[5]));const u=Nn(+l[2]),m=+l[3]/100,E=+l[4]/100;return a="hwb"===l[1]?function(g,l,r){return As(or,g,l,r)}(u,m,E):"hsv"===l[1]?function(g,l,r){return As(Pr,g,l,r)}(u,m,E):ro(u,m,E),{r:a[0],g:a[1],b:a[2],a:r}}(g)}class Ro{constructor(l){if(l instanceof Ro)return l;const r=typeof l;let a;"object"===r?a=vr(l):"string"===r&&(a=function(g){var r,l=g.length;return"#"===g[0]&&(4===l||5===l?r={r:255&17*ct[g[1]],g:255&17*ct[g[2]],b:255&17*ct[g[3]],a:5===l?17*ct[g[4]]:255}:(7===l||9===l)&&(r={r:ct[g[1]]<<4|ct[g[2]],g:ct[g[3]]<<4|ct[g[4]],b:ct[g[5]]<<4|ct[g[6]],a:9===l?ct[g[7]]<<4|ct[g[8]]:255})),r}(l)||function(g){$o||($o=function(){const g={},l=Object.keys(Kn),r=Object.keys(wo);let a,u,m,E,S;for(a=0;a<l.length;a++){for(E=S=l[a],u=0;u<r.length;u++)m=r[u],S=S.replace(m,wo[m]);m=parseInt(Kn[E],16),g[S]=[m>>16&255,m>>8&255,255&m]}return g}(),$o.transparent=[0,0,0,0]);const l=$o[g.toLowerCase()];return l&&{r:l[0],g:l[1],b:l[2],a:4===l.length?l[3]:255}}(l)||dr(l)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var l=rr(this._rgb);return l&&(l.a=pi(l.a)),l}set rgb(l){this._rgb=vr(l)}rgbString(){return this._valid?(g=this._rgb)&&(g.a<255?`rgba(${g.r}, ${g.g}, ${g.b}, ${pi(g.a)})`:`rgb(${g.r}, ${g.g}, ${g.b})`):this._rgb;var g}hexString(){return this._valid?(l=function(g){return Ti(g.r)&&Ti(g.g)&&Ti(g.b)&&Ti(g.a)}(g=this._rgb)?te:ve,g&&"#"+l(g.r)+l(g.g)+l(g.b)+(g.a<255?l(g.a):"")):this._rgb;var g,l}hslString(){return this._valid?function(g){if(!g)return;const l=Jn(g),r=l[0],a=Ki(l[1]),u=Ki(l[2]);return g.a<255?`hsla(${r}, ${a}%, ${u}%, ${pi(g.a)})`:`hsl(${r}, ${a}%, ${u}%)`}(this._rgb):this._rgb}mix(l,r){const a=this;if(l){const u=a.rgb,m=l.rgb;let E;const S=r===E?.5:r,D=2*S-1,N=u.a-m.a,K=((D*N==-1?D:(D+N)/(1+D*N))+1)/2;E=1-K,u.r=255&K*u.r+E*m.r+.5,u.g=255&K*u.g+E*m.g+.5,u.b=255&K*u.b+E*m.b+.5,u.a=S*u.a+(1-S)*m.a,a.rgb=u}return a}clone(){return new Ro(this.rgb)}alpha(l){return this._rgb.a=Xe(l),this}clearer(l){return this._rgb.a*=1-l,this}greyscale(){const l=this._rgb,r=$e(.3*l.r+.59*l.g+.11*l.b);return l.r=l.g=l.b=r,this}opaquer(l){return this._rgb.a*=1+l,this}negate(){const l=this._rgb;return l.r=255-l.r,l.g=255-l.g,l.b=255-l.b,this}lighten(l){return jo(this._rgb,2,l),this}darken(l){return jo(this._rgb,2,-l),this}saturate(l){return jo(this._rgb,1,l),this}desaturate(l){return jo(this._rgb,1,-l),this}rotate(l){return function(g,l){var r=Jn(g);r[0]=Nn(r[0]+l),r=ro(r),g.r=r[0],g.g=r[1],g.b=r[2]}(this._rgb,l),this}}function Kr(g){return new Ro(g)}const Zo=g=>g instanceof CanvasGradient||g instanceof CanvasPattern;function Hn(g){return Zo(g)?g:Kr(g)}function vn(g){return Zo(g)?g:Kr(g).saturate(.5).darken(.1).hexString()}const Qo=Object.create(null),xo=Object.create(null);function Eo(g,l){if(!l)return g;const r=l.split(".");for(let a=0,u=r.length;a<u;++a){const m=r[a];g=g[m]||(g[m]=Object.create(null))}return g}function Po(g,l,r){return"string"==typeof l?de(Eo(g,l),r):de(Eo(g,""),l)}var yn=new class{constructor(l){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,a)=>vn(a.backgroundColor),this.hoverBorderColor=(r,a)=>vn(a.borderColor),this.hoverColor=(r,a)=>vn(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(l)}set(l,r){return Po(this,l,r)}get(l){return Eo(this,l)}describe(l,r){return Po(xo,l,r)}override(l,r){return Po(Qo,l,r)}route(l,r,a,u){const m=Eo(this,l),E=Eo(this,a),S="_"+r;Object.defineProperties(m,{[S]:{value:m[r],writable:!0},[r]:{enumerable:!0,get(){const D=this[S],N=E[u];return lt(D)?Object.assign({},N,D):at(D,N)},set(D){this[S]=D}}})}}({_scriptable:g=>!g.startsWith("on"),_indexable:g=>"events"!==g,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function qn(g,l,r,a,u){let m=l[u];return m||(m=l[u]=g.measureText(u).width,r.push(u)),m>a&&(a=m),a}function Sr(g,l,r,a){let u=(a=a||{}).data=a.data||{},m=a.garbageCollect=a.garbageCollect||[];a.font!==l&&(u=a.data={},m=a.garbageCollect=[],a.font=l),g.save(),g.font=l;let E=0;const S=r.length;let D,N,K,ft,Ot;for(D=0;D<S;D++)if(ft=r[D],null!=ft&&!0!==tt(ft))E=qn(g,u,m,E,ft);else if(tt(ft))for(N=0,K=ft.length;N<K;N++)Ot=ft[N],null!=Ot&&!tt(Ot)&&(E=qn(g,u,m,E,Ot));g.restore();const zt=m.length/2;if(zt>r.length){for(D=0;D<zt;D++)delete u[m[D]];m.splice(0,zt)}return E}function as(g,l,r){const a=g.currentDevicePixelRatio,u=0!==r?Math.max(r/2,.5):0;return Math.round((l-u)*a)/a+u}function Fo(g,l){(l=l||g.getContext("2d")).save(),l.resetTransform(),l.clearRect(0,0,g.width,g.height),l.restore()}function Jr(g,l,r,a){let u,m,E,S,D;const N=l.pointStyle,K=l.rotation,ft=l.radius;let Ot=(K||0)*le;if(N&&"object"==typeof N&&(u=N.toString(),"[object HTMLImageElement]"===u||"[object HTMLCanvasElement]"===u))return g.save(),g.translate(r,a),g.rotate(Ot),g.drawImage(N,-N.width/2,-N.height/2,N.width,N.height),void g.restore();if(!(isNaN(ft)||ft<=0)){switch(g.beginPath(),N){default:g.arc(r,a,ft,0,Pt),g.closePath();break;case"triangle":g.moveTo(r+Math.sin(Ot)*ft,a-Math.cos(Ot)*ft),Ot+=ge,g.lineTo(r+Math.sin(Ot)*ft,a-Math.cos(Ot)*ft),Ot+=ge,g.lineTo(r+Math.sin(Ot)*ft,a-Math.cos(Ot)*ft),g.closePath();break;case"rectRounded":D=.516*ft,S=ft-D,m=Math.cos(Ot+Yt)*S,E=Math.sin(Ot+Yt)*S,g.arc(r-m,a-E,D,Ot-Rt,Ot-jt),g.arc(r+E,a-m,D,Ot-jt,Ot),g.arc(r+m,a+E,D,Ot,Ot+jt),g.arc(r-E,a+m,D,Ot+jt,Ot+Rt),g.closePath();break;case"rect":if(!K){S=Math.SQRT1_2*ft,g.rect(r-S,a-S,2*S,2*S);break}Ot+=Yt;case"rectRot":m=Math.cos(Ot)*ft,E=Math.sin(Ot)*ft,g.moveTo(r-m,a-E),g.lineTo(r+E,a-m),g.lineTo(r+m,a+E),g.lineTo(r-E,a+m),g.closePath();break;case"crossRot":Ot+=Yt;case"cross":m=Math.cos(Ot)*ft,E=Math.sin(Ot)*ft,g.moveTo(r-m,a-E),g.lineTo(r+m,a+E),g.moveTo(r+E,a-m),g.lineTo(r-E,a+m);break;case"star":m=Math.cos(Ot)*ft,E=Math.sin(Ot)*ft,g.moveTo(r-m,a-E),g.lineTo(r+m,a+E),g.moveTo(r+E,a-m),g.lineTo(r-E,a+m),Ot+=Yt,m=Math.cos(Ot)*ft,E=Math.sin(Ot)*ft,g.moveTo(r-m,a-E),g.lineTo(r+m,a+E),g.moveTo(r+E,a-m),g.lineTo(r-E,a+m);break;case"line":m=Math.cos(Ot)*ft,E=Math.sin(Ot)*ft,g.moveTo(r-m,a-E),g.lineTo(r+m,a+E);break;case"dash":g.moveTo(r,a),g.lineTo(r+Math.cos(Ot)*ft,a+Math.sin(Ot)*ft)}g.fill(),l.borderWidth>0&&g.stroke()}}function wr(g,l,r){return r=r||.5,!l||g&&g.x>l.left-r&&g.x<l.right+r&&g.y>l.top-r&&g.y<l.bottom+r}function po(g,l){g.save(),g.beginPath(),g.rect(l.left,l.top,l.right-l.left,l.bottom-l.top),g.clip()}function $r(g){g.restore()}function Js(g,l,r,a,u){if(!l)return g.lineTo(r.x,r.y);if("middle"===u){const m=(l.x+r.x)/2;g.lineTo(m,l.y),g.lineTo(m,r.y)}else"after"===u!=!!a?g.lineTo(l.x,r.y):g.lineTo(r.x,l.y);g.lineTo(r.x,r.y)}function aa(g,l,r,a){if(!l)return g.lineTo(r.x,r.y);g.bezierCurveTo(a?l.cp1x:l.cp2x,a?l.cp1y:l.cp2y,a?r.cp2x:r.cp1x,a?r.cp2y:r.cp1y,r.x,r.y)}function Rr(g,l,r,a,u,m={}){const E=tt(l)?l:[l],S=m.strokeWidth>0&&""!==m.strokeColor;let D,N;for(g.save(),g.font=u.string,function(g,l){l.translation&&g.translate(l.translation[0],l.translation[1]),ut(l.rotation)||g.rotate(l.rotation),l.color&&(g.fillStyle=l.color),l.textAlign&&(g.textAlign=l.textAlign),l.textBaseline&&(g.textBaseline=l.textBaseline)}(g,m),D=0;D<E.length;++D)N=E[D],S&&(m.strokeColor&&(g.strokeStyle=m.strokeColor),ut(m.strokeWidth)||(g.lineWidth=m.strokeWidth),g.strokeText(N,r,a,m.maxWidth)),g.fillText(N,r,a,m.maxWidth),Ta(g,r,a,N,m),a+=u.lineHeight;g.restore()}function Ta(g,l,r,a,u){if(u.strikethrough||u.underline){const m=g.measureText(a),E=l-m.actualBoundingBoxLeft,S=l+m.actualBoundingBoxRight,D=r-m.actualBoundingBoxAscent,N=r+m.actualBoundingBoxDescent,K=u.strikethrough?(D+N)/2:N;g.strokeStyle=g.fillStyle,g.beginPath(),g.lineWidth=u.decorationWidth||2,g.moveTo(E,K),g.lineTo(S,K),g.stroke()}}function Dr(g,l){const{x:r,y:a,w:u,h:m,radius:E}=l;g.arc(r+E.topLeft,a+E.topLeft,E.topLeft,-jt,Rt,!0),g.lineTo(r,a+m-E.bottomLeft),g.arc(r+E.bottomLeft,a+m-E.bottomLeft,E.bottomLeft,Rt,jt,!0),g.lineTo(r+u-E.bottomRight,a+m),g.arc(r+u-E.bottomRight,a+m-E.bottomRight,E.bottomRight,jt,0,!0),g.lineTo(r+u,a+E.topRight),g.arc(r+u-E.topRight,a+E.topRight,E.topRight,0,-jt,!0),g.lineTo(r+E.topLeft,a)}const la=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Cs=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function br(g,l){const r=(""+g).match(la);if(!r||"normal"===r[1])return 1.2*l;switch(g=+r[2],r[3]){case"px":return g;case"%":g/=100}return l*g}const xa=g=>+g||0;function $s(g,l){const r={},a=lt(l),u=a?Object.keys(l):l,m=lt(g)?a?E=>at(g[E],g[l[E]]):E=>g[E]:()=>g;for(const E of u)r[E]=xa(m(E));return r}function ls(g){return $s(g,{top:"y",right:"x",bottom:"y",left:"x"})}function zo(g){return $s(g,["topLeft","topRight","bottomLeft","bottomRight"])}function fo(g){const l=ls(g);return l.width=l.left+l.right,l.height=l.top+l.bottom,l}function Do(g,l){let r=at((g=g||{}).size,(l=l||yn.font).size);"string"==typeof r&&(r=parseInt(r,10));let a=at(g.style,l.style);a&&!(""+a).match(Cs)&&(console.warn('Invalid font style specified: "'+a+'"'),a="");const u={family:at(g.family,l.family),lineHeight:br(at(g.lineHeight,l.lineHeight),r),size:r,style:a,weight:at(g.weight,l.weight),string:""};return u.string=function(g){return!g||ut(g.size)||ut(g.family)?null:(g.style?g.style+" ":"")+(g.weight?g.weight+" ":"")+g.size+"px "+g.family}(u),u}function Io(g,l,r,a){let m,E,S,u=!0;for(m=0,E=g.length;m<E;++m)if(S=g[m],void 0!==S&&(void 0!==l&&"function"==typeof S&&(S=S(l),u=!1),void 0!==r&&tt(S)&&(S=S[r%S.length],u=!1),void 0!==S))return a&&!u&&(a.cacheable=!1),S}function Ir(g,l){return Object.assign(Object.create(g),l)}function Mr(g,l,r){r=r||(E=>g[E]<l);let m,a=g.length-1,u=0;for(;a-u>1;)m=u+a>>1,r(m)?u=m:a=m;return{lo:u,hi:a}}const qo=(g,l,r)=>Mr(g,r,a=>g[a][l]<r),us=(g,l,r)=>Mr(g,r,a=>g[a][l]>=r),pr=["push","pop","shift","splice","unshift"];function Br(g,l){const r=g._chartjs;if(!r)return;const a=r.listeners,u=a.indexOf(l);-1!==u&&a.splice(u,1),!(a.length>0)&&(pr.forEach(m=>{delete g[m]}),delete g._chartjs)}function so(g){const l=new Set;let r,a;for(r=0,a=g.length;r<a;++r)l.add(g[r]);return l.size===a?g:Array.from(l)}function hs(g,l=[""],r=g,a,u=(()=>g[0])){_e(a)||(a=Ee("_fallback",g));const m={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:g,_rootScopes:r,_fallback:a,_getTarget:u,override:E=>hs([E,...g],l,r,a)};return new Proxy(m,{deleteProperty:(E,S)=>(delete E[S],delete E._keys,delete g[0][S],!0),get:(E,S)=>Ho(E,S,()=>function(g,l,r,a){let u;for(const m of l)if(u=Ee(Ca(m,g),r),_e(u))return Hr(g,u)?X(r,a,g,u):u}(S,l,g,E)),getOwnPropertyDescriptor:(E,S)=>Reflect.getOwnPropertyDescriptor(E._scopes[0],S),getPrototypeOf:()=>Reflect.getPrototypeOf(g[0]),has:(E,S)=>ei(E).includes(S),ownKeys:E=>ei(E),set(E,S,D){const N=E._storage||(E._storage=u());return E[S]=N[S]=D,delete E._keys,!0}})}function go(g,l,r,a){const u={_cacheable:!1,_proxy:g,_context:l,_subProxy:r,_stack:new Set,_descriptors:Ws(g,a),setContext:m=>go(g,m,r,a),override:m=>go(g.override(m),l,r,a)};return new Proxy(u,{deleteProperty:(m,E)=>(delete m[E],delete g[E],!0),get:(m,E,S)=>Ho(m,E,()=>function(g,l,r){const{_proxy:a,_context:u,_subProxy:m,_descriptors:E}=g;let S=a[l];return Xt(S)&&E.isScriptable(l)&&(S=function(g,l,r,a){const{_proxy:u,_context:m,_subProxy:E,_stack:S}=r;if(S.has(g))throw new Error("Recursion detected: "+Array.from(S).join("->")+"->"+g);return S.add(g),l=l(m,E||a),S.delete(g),Hr(g,l)&&(l=X(u._scopes,u,g,l)),l}(l,S,g,r)),tt(S)&&S.length&&(S=function(g,l,r,a){const{_proxy:u,_context:m,_subProxy:E,_descriptors:S}=r;if(_e(m.index)&&a(g))l=l[m.index%l.length];else if(lt(l[0])){const D=l,N=u._scopes.filter(K=>K!==D);l=[];for(const K of D){const ft=X(N,u,g,K);l.push(go(ft,m,E&&E[g],S))}}return l}(l,S,g,E.isIndexable)),Hr(l,S)&&(S=go(S,u,m&&m[l],E)),S}(m,E,S)),getOwnPropertyDescriptor:(m,E)=>m._descriptors.allKeys?Reflect.has(g,E)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(g,E),getPrototypeOf:()=>Reflect.getPrototypeOf(g),has:(m,E)=>Reflect.has(g,E),ownKeys:()=>Reflect.ownKeys(g),set:(m,E,S)=>(g[E]=S,delete m[E],!0)})}function Ws(g,l={scriptable:!0,indexable:!0}){const{_scriptable:r=l.scriptable,_indexable:a=l.indexable,_allKeys:u=l.allKeys}=g;return{allKeys:u,scriptable:r,indexable:a,isScriptable:Xt(r)?r:()=>r,isIndexable:Xt(a)?a:()=>a}}const Ca=(g,l)=>g?g+Ft(l):l,Hr=(g,l)=>lt(l)&&"adapters"!==g&&(null===Object.getPrototypeOf(l)||l.constructor===Object);function Ho(g,l,r){if(Object.prototype.hasOwnProperty.call(g,l))return g[l];const a=r();return g[l]=a,a}function en(g,l,r){return Xt(g)?g(l,r):g}const Ss=(g,l)=>!0===g?l:"string"==typeof g?oi(l,g):void 0;function Dt(g,l,r,a){for(const u of l){const m=Ss(r,u);if(m){g.add(m);const E=en(m._fallback,r,m);if(_e(E)&&E!==r&&E!==a)return E}else if(!1===m&&_e(a)&&r!==a)return null}return!1}function X(g,l,r,a){const u=l._rootScopes,m=en(l._fallback,r,a),E=[...g,...u],S=new Set;S.add(a);let D=P(S,E,r,m||r);return!(null===D||_e(m)&&m!==r&&(D=P(S,E,m,D),null===D))&&hs(Array.from(S),[""],u,m,()=>function(g,l,r){const a=g._getTarget();l in a||(a[l]={});const u=a[l];return tt(u)&&lt(r)?r:u}(l,r,a))}function P(g,l,r,a){for(;r;)r=Dt(g,l,r,a);return r}function Ee(g,l){for(const r of l){if(!r)continue;const a=r[g];if(_e(a))return a}}function ei(g){let l=g._keys;return l||(l=g._keys=function(g){const l=new Set;for(const r of g)for(const a of Object.keys(r).filter(u=>!u.startsWith("_")))l.add(a);return Array.from(l)}(g._scopes)),l}const mn=Number.EPSILON||1e-14,Rn=(g,l)=>l<g.length&&!g[l].skip&&g[l],Vn=g=>"x"===g?"y":"x";function Pn(g,l,r,a){const u=g.skip?l:g,m=l,E=r.skip?l:r,S=Ei(m,u),D=Ei(E,m);let N=S/(S+D),K=D/(S+D);N=isNaN(N)?0:N,K=isNaN(K)?0:K;const ft=a*N,Ot=a*K;return{previous:{x:m.x-ft*(E.x-u.x),y:m.y-ft*(E.y-u.y)},next:{x:m.x+Ot*(E.x-u.x),y:m.y+Ot*(E.y-u.y)}}}function rn(g,l,r){return Math.max(Math.min(g,r),l)}function Zs(g,l,r,a,u){let m,E,S,D;if(l.spanGaps&&(g=g.filter(N=>!N.skip)),"monotone"===l.cubicInterpolationMode)!function(g,l="x"){const r=Vn(l),a=g.length,u=Array(a).fill(0),m=Array(a);let E,S,D,N=Rn(g,0);for(E=0;E<a;++E)if(S=D,D=N,N=Rn(g,E+1),D){if(N){const K=N[l]-D[l];u[E]=0!==K?(N[r]-D[r])/K:0}m[E]=S?N?oe(u[E-1])!==oe(u[E])?0:(u[E-1]+u[E])/2:u[E-1]:u[E]}(function(g,l,r){const a=g.length;let u,m,E,S,D,N=Rn(g,0);for(let K=0;K<a-1;++K)if(D=N,N=Rn(g,K+1),D&&N){if(we(l[K],0,mn)){r[K]=r[K+1]=0;continue}u=r[K]/l[K],m=r[K+1]/l[K],S=Math.pow(u,2)+Math.pow(m,2),!(S<=9)&&(E=3/Math.sqrt(S),r[K]=u*E*l[K],r[K+1]=m*E*l[K])}})(g,u,m),function(g,l,r="x"){const a=Vn(r),u=g.length;let m,E,S,D=Rn(g,0);for(let N=0;N<u;++N){if(E=S,S=D,D=Rn(g,N+1),!S)continue;const K=S[r],ft=S[a];E&&(m=(K-E[r])/3,S[`cp1${r}`]=K-m,S[`cp1${a}`]=ft-m*l[N]),D&&(m=(D[r]-K)/3,S[`cp2${r}`]=K+m,S[`cp2${a}`]=ft+m*l[N])}}(g,m,l)}(g,u);else{let N=a?g[g.length-1]:g[0];for(m=0,E=g.length;m<E;++m)S=g[m],D=Pn(N,S,g[Math.min(m+1,E-(a?0:1))%E],l.tension),S.cp1x=D.previous.x,S.cp1y=D.previous.y,S.cp2x=D.next.x,S.cp2y=D.next.y,N=S}l.capBezierPoints&&function(g,l){let r,a,u,m,E,S=wr(g[0],l);for(r=0,a=g.length;r<a;++r)E=m,m=S,S=r<a-1&&wr(g[r+1],l),m&&(u=g[r],E&&(u.cp1x=rn(u.cp1x,l.left,l.right),u.cp1y=rn(u.cp1y,l.top,l.bottom)),S&&(u.cp2x=rn(u.cp2x,l.left,l.right),u.cp2y=rn(u.cp2y,l.top,l.bottom)))}(g,r)}function tr(){return"undefined"!=typeof window&&"undefined"!=typeof document}function js(g){let l=g.parentNode;return l&&"[object ShadowRoot]"===l.toString()&&(l=l.host),l}function Vr(g,l,r){let a;return"string"==typeof g?(a=parseInt(g,10),-1!==g.indexOf("%")&&(a=a/100*l.parentNode[r])):a=g,a}const Ur=g=>window.getComputedStyle(g,null),Di=["top","right","bottom","left"];function In(g,l,r){const a={};r=r?"-"+r:"";for(let u=0;u<4;u++){const m=Di[u];a[m]=parseFloat(g[l+"-"+m+r])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}function Y(g,l){const{canvas:r,currentDevicePixelRatio:a}=l,u=Ur(r),m="border-box"===u.boxSizing,E=In(u,"padding"),S=In(u,"border","width"),{x:D,y:N,box:K}=function(g,l){const r=g.native||g,a=r.touches,u=a&&a.length?a[0]:r,{offsetX:m,offsetY:E}=u;let D,N,S=!1;if(((g,l,r)=>(g>0||l>0)&&(!r||!r.shadowRoot))(m,E,r.target))D=m,N=E;else{const K=l.getBoundingClientRect();D=u.clientX-K.left,N=u.clientY-K.top,S=!0}return{x:D,y:N,box:S}}(g,r),ft=E.left+(K&&S.left),Ot=E.top+(K&&S.top);let{width:zt,height:ae}=l;return m&&(zt-=E.width+S.width,ae-=E.height+S.height),{x:Math.round((D-ft)/zt*r.width/a),y:Math.round((N-Ot)/ae*r.height/a)}}const Wt=g=>Math.round(10*g)/10;function Ie(g,l,r){const a=l||1,u=Math.floor(g.height*a),m=Math.floor(g.width*a);g.height=u/a,g.width=m/a;const E=g.canvas;return E.style&&(r||!E.style.height&&!E.style.width)&&(E.style.height=`${g.height}px`,E.style.width=`${g.width}px`),(g.currentDevicePixelRatio!==a||E.height!==u||E.width!==m)&&(g.currentDevicePixelRatio=a,E.height=u,E.width=m,g.ctx.setTransform(a,0,0,a,0,0),!0)}const xe=function(){let g=!1;try{const l={get passive(){return g=!0,!1}};window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch(l){}return g}();function ii(g,l){const r=function(g,l){return Ur(g).getPropertyValue(l)}(g,l),a=r&&r.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function mi(g,l,r,a){return{x:g.x+r*(l.x-g.x),y:g.y+r*(l.y-g.y)}}function Bi(g,l,r,a){return{x:g.x+r*(l.x-g.x),y:"middle"===a?r<.5?g.y:l.y:"after"===a?r<1?g.y:l.y:r>0?l.y:g.y}}function Gi(g,l,r,a){const u={x:g.cp2x,y:g.cp2y},m={x:l.cp1x,y:l.cp1y},E=mi(g,u,r),S=mi(u,m,r),D=mi(m,l,r),N=mi(E,S,r),K=mi(S,D,r);return mi(N,K,r)}const un=new Map;function tn(g,l,r){return function(g,l){l=l||{};const r=g+JSON.stringify(l);let a=un.get(r);return a||(a=new Intl.NumberFormat(g,l),un.set(r,a)),a}(l,r).format(g)}function Wn(g,l,r){return g?function(g,l){return{x:r=>g+g+l-r,setWidth(r){l=r},textAlign:r=>"center"===r?r:"right"===r?"left":"right",xPlus:(r,a)=>r-a,leftForLtr:(r,a)=>r-a}}(l,r):{x:g=>g,setWidth(g){},textAlign:g=>g,xPlus:(g,l)=>g+l,leftForLtr:(g,l)=>g}}function Mo(g,l){let r,a;("ltr"===l||"rtl"===l)&&(r=g.canvas.style,a=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",l,"important"),g.prevTextDirection=a)}function sr(g,l){void 0!==l&&(delete g.prevTextDirection,g.canvas.style.setProperty("direction",l[0],l[1]))}function Vo(g){return"angle"===g?{between:ri,compare:gi,normalize:We}:{between:ti,compare:(l,r)=>l-r,normalize:l=>l}}function Gr({start:g,end:l,count:r,loop:a,style:u}){return{start:g%r,end:l%r,loop:a&&(l-g+1)%r==0,style:u}}function Uo(g,l,r){if(!r)return[g];const{property:a,start:u,end:m}=r,E=l.length,{compare:S,between:D,normalize:N}=Vo(a),{start:K,end:ft,loop:Ot,style:zt}=function(g,l,r){const{property:a,start:u,end:m}=r,{between:E,normalize:S}=Vo(a),D=l.length;let Ot,zt,{start:N,end:K,loop:ft}=g;if(ft){for(N+=D,K+=D,Ot=0,zt=D;Ot<zt&&E(S(l[N%D][a]),u,m);++Ot)N--,K--;N%=D,K%=D}return K<N&&(K+=D),{start:N,end:K,loop:ft,style:g.style}}(g,l,r),ae=[];let Oe,ai,Pi,ye=!1,Re=null;for(let qi=K,an=K;qi<=ft;++qi)ai=l[qi%E],!ai.skip&&(Oe=N(ai[a]),Oe!==Pi&&(ye=D(Oe,u,m),null===Re&&(ye||D(u,Pi,Oe)&&0!==S(u,Pi))&&(Re=0===S(Oe,u)?qi:an),null!==Re&&(!ye||0===S(m,Oe)||D(m,Pi,Oe))&&(ae.push(Gr({start:Re,end:qi,loop:Ot,count:E,style:zt})),Re=null),an=qi,Pi=Oe));return null!==Re&&ae.push(Gr({start:Re,end:ft,loop:Ot,count:E,style:zt})),ae}function Os(g,l){const r=[],a=g.segments;for(let u=0;u<a.length;u++){const m=Uo(a[u],g.points,l);m.length&&r.push(...m)}return r}function wa(g){return{backgroundColor:g.backgroundColor,borderCapStyle:g.borderCapStyle,borderDash:g.borderDash,borderDashOffset:g.borderDashOffset,borderJoinStyle:g.borderJoinStyle,borderWidth:g.borderWidth,borderColor:g.borderColor}}function ua(g,l){return l&&JSON.stringify(g)!==JSON.stringify(l)}var nn=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(l,r,a,u){const E=r.duration;r.listeners[u].forEach(S=>S({chart:l,initial:r.initial,numSteps:E,currentStep:Math.min(a-r.start,E)}))}_refresh(){this._request||(this._running=!0,this._request=H.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(l=Date.now()){let r=0;this._charts.forEach((a,u)=>{if(!a.running||!a.items.length)return;const m=a.items;let D,E=m.length-1,S=!1;for(;E>=0;--E)D=m[E],D._active?(D._total>a.duration&&(a.duration=D._total),D.tick(l),S=!0):(m[E]=m[m.length-1],m.pop());S&&(u.draw(),this._notify(u,a,l,"progress")),m.length||(a.running=!1,this._notify(u,a,l,"complete"),a.initial=!1),r+=m.length}),this._lastDate=l,0===r&&(this._running=!1)}_getAnims(l){const r=this._charts;let a=r.get(l);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(l,a)),a}listen(l,r,a){this._getAnims(l).listeners[r].push(a)}add(l,r){!r||!r.length||this._getAnims(l).items.push(...r)}has(l){return this._getAnims(l).items.length>0}start(l){const r=this._charts.get(l);!r||(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((a,u)=>Math.max(a,u._duration),0),this._refresh())}running(l){if(!this._running)return!1;const r=this._charts.get(l);return!(!r||!r.running||!r.items.length)}stop(l){const r=this._charts.get(l);if(!r||!r.items.length)return;const a=r.items;let u=a.length-1;for(;u>=0;--u)a[u].cancel();r.items=[],this._notify(l,r,Date.now(),"complete")}remove(l){return this._charts.delete(l)}};const on="transparent",An={boolean:(g,l,r)=>r>.5?l:g,color(g,l,r){const a=Hn(g||on),u=a.valid&&Hn(l||on);return u&&u.valid?u.mix(a,r).hexString():l},number:(g,l,r)=>g+(l-g)*r};class On{constructor(l,r,a,u){const m=r[a];u=Io([l.to,u,m,l.from]);const E=Io([l.from,m,u]);this._active=!0,this._fn=l.fn||An[l.type||typeof E],this._easing=Mt[l.easing]||Mt.linear,this._start=Math.floor(Date.now()+(l.delay||0)),this._duration=this._total=Math.floor(l.duration),this._loop=!!l.loop,this._target=r,this._prop=a,this._from=E,this._to=u,this._promises=void 0}active(){return this._active}update(l,r,a){if(this._active){this._notify(!1);const u=this._target[this._prop],m=a-this._start,E=this._duration-m;this._start=a,this._duration=Math.floor(Math.max(E,l.duration)),this._total+=m,this._loop=!!l.loop,this._to=Io([l.to,r,u,l.from]),this._from=Io([l.from,u,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(l){const r=l-this._start,a=this._duration,u=this._prop,m=this._from,E=this._loop,S=this._to;let D;if(this._active=m!==S&&(E||r<a),!this._active)return this._target[u]=S,void this._notify(!0);r<0?this._target[u]=m:(D=r/a%2,D=E&&D>1?2-D:D,D=this._easing(Math.min(1,Math.max(0,D))),this._target[u]=this._fn(m,S,D))}wait(){const l=this._promises||(this._promises=[]);return new Promise((r,a)=>{l.push({res:r,rej:a})})}_notify(l){const r=l?"res":"rej",a=this._promises||[];for(let u=0;u<a.length;u++)a[u][r]()}}yn.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const es=Object.keys(yn.animation);yn.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:g=>"onProgress"!==g&&"onComplete"!==g&&"fn"!==g}),yn.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),yn.describe("animations",{_fallback:"animation"}),yn.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:g=>0|g}}}});class Qn{constructor(l,r){this._chart=l,this._properties=new Map,this.configure(r)}configure(l){if(!lt(l))return;const r=this._properties;Object.getOwnPropertyNames(l).forEach(a=>{const u=l[a];if(!lt(u))return;const m={};for(const E of es)m[E]=u[E];(tt(u.properties)&&u.properties||[a]).forEach(E=>{(E===a||!r.has(E))&&r.set(E,m)})})}_animateOptions(l,r){const a=r.options,u=function(g,l){if(!l)return;let r=g.options;if(r)return r.$shared&&(g.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r;g.options=l}(l,a);if(!u)return[];const m=this._createAnimations(u,a);return a.$shared&&function(g,l){const r=[],a=Object.keys(l);for(let u=0;u<a.length;u++){const m=g[a[u]];m&&m.active()&&r.push(m.wait())}return Promise.all(r)}(l.options.$animations,a).then(()=>{l.options=a},()=>{}),m}_createAnimations(l,r){const a=this._properties,u=[],m=l.$animations||(l.$animations={}),E=Object.keys(r),S=Date.now();let D;for(D=E.length-1;D>=0;--D){const N=E[D];if("$"===N.charAt(0))continue;if("options"===N){u.push(...this._animateOptions(l,r));continue}const K=r[N];let ft=m[N];const Ot=a.get(N);if(ft){if(Ot&&ft.active()){ft.update(Ot,K,S);continue}ft.cancel()}Ot&&Ot.duration?(m[N]=ft=new On(Ot,l,N,K),u.push(ft)):l[N]=K}return u}update(l,r){if(0===this._properties.size)return void Object.assign(l,r);const a=this._createAnimations(l,r);return a.length?(nn.add(this._chart,a),!0):void 0}}function fs(g,l){const r=g&&g.options||{},a=r.reverse,u=void 0===r.min?l:0,m=void 0===r.max?l:0;return{start:a?m:u,end:a?u:m}}function Wr(g,l){const r=[],a=g._getSortedDatasetMetas(l);let u,m;for(u=0,m=a.length;u<m;++u)r.push(a[u].index);return r}function hl(g,l,r,a={}){const u=g.keys,m="single"===a.mode;let E,S,D,N;if(null!==l){for(E=0,S=u.length;E<S;++E){if(D=+u[E],D===r){if(a.all)continue;break}N=g.values[D],ot(N)&&(m||0===l||oe(l)===oe(N))&&(l+=N)}return l}}function xs(g,l){const r=g&&g.options.stacked;return r||void 0===r&&void 0!==l.stack}function Il(g,l,r){const a=g[l]||(g[l]={});return a[r]||(a[r]={})}function ks(g,l,r,a){for(const u of l.getMatchingVisibleMetas(a).reverse()){const m=g[u.index];if(r&&m>0||!r&&m<0)return u.index}return null}function Xa(g,l){const{chart:r,_cachedMeta:a}=g,u=r._stacks||(r._stacks={}),{iScale:m,vScale:E,index:S}=a,D=m.axis,N=E.axis,K=function(g,l,r){return`${g.id}.${l.id}.${r.stack||r.type}`}(m,E,a),ft=l.length;let Ot;for(let zt=0;zt<ft;++zt){const ae=l[zt],{[D]:ye,[N]:Re}=ae;Ot=(ae._stacks||(ae._stacks={}))[N]=Il(u,K,ye),Ot[S]=Re,Ot._top=ks(Ot,E,!0,a.type),Ot._bottom=ks(Ot,E,!1,a.type)}}function Qs(g,l){const r=g.scales;return Object.keys(r).filter(a=>r[a].axis===l).shift()}function qs(g,l){const r=g.controller.index,a=g.vScale&&g.vScale.axis;if(a){l=l||g._parsed;for(const u of l){const m=u._stacks;if(!m||void 0===m[a]||void 0===m[a][r])return;delete m[a][r]}}}const Na=g=>"reset"===g||"none"===g,Ml=(g,l)=>l?g:Object.assign({},g);let Ls=(()=>{class g{constructor(r,a){this.chart=r,this._ctx=r.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const r=this._cachedMeta;this.configure(),this.linkScales(),r._stacked=xs(r.vScale,r),this.addElements()}updateIndex(r){this.index!==r&&qs(this._cachedMeta),this.index=r}linkScales(){const r=this.chart,a=this._cachedMeta,u=this.getDataset(),m=(Ot,zt,ae,ye)=>"x"===Ot?zt:"r"===Ot?ye:ae,E=a.xAxisID=at(u.xAxisID,Qs(r,"x")),S=a.yAxisID=at(u.yAxisID,Qs(r,"y")),D=a.rAxisID=at(u.rAxisID,Qs(r,"r")),N=a.indexAxis,K=a.iAxisID=m(N,E,S,D),ft=a.vAxisID=m(N,S,E,D);a.xScale=this.getScaleForId(E),a.yScale=this.getScaleForId(S),a.rScale=this.getScaleForId(D),a.iScale=this.getScaleForId(K),a.vScale=this.getScaleForId(ft)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(r){return this.chart.scales[r]}_getOtherScale(r){const a=this._cachedMeta;return r===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const r=this._cachedMeta;this._data&&Br(this._data,this),r._stacked&&qs(r)}_dataCheck(){const r=this.getDataset(),a=r.data||(r.data=[]),u=this._data;if(lt(a))this._data=function(g){const l=Object.keys(g),r=new Array(l.length);let a,u,m;for(a=0,u=l.length;a<u;++a)m=l[a],r[a]={x:m,y:g[m]};return r}(a);else if(u!==a){if(u){Br(u,this);const m=this._cachedMeta;qs(m),m._parsed=[]}a&&Object.isExtensible(a)&&function(g,l){g._chartjs?g._chartjs.listeners.push(l):(Object.defineProperty(g,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[l]}}),pr.forEach(r=>{const a="_onData"+Ft(r),u=g[r];Object.defineProperty(g,r,{configurable:!0,enumerable:!1,value(...m){const E=u.apply(this,m);return g._chartjs.listeners.forEach(S=>{"function"==typeof S[a]&&S[a](...m)}),E}})}))}(a,this),this._syncList=[],this._data=a}}addElements(){const r=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(r.dataset=new this.datasetElementType)}buildOrUpdateElements(r){const a=this._cachedMeta,u=this.getDataset();let m=!1;this._dataCheck();const E=a._stacked;a._stacked=xs(a.vScale,a),a.stack!==u.stack&&(m=!0,qs(a),a.stack=u.stack),this._resyncElements(r),(m||E!==a._stacked)&&Xa(this,a._parsed)}configure(){const r=this.chart.config,a=r.datasetScopeKeys(this._type),u=r.getOptionScopes(this.getDataset(),a,!0);this.options=r.createResolver(u,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(r,a){const{_cachedMeta:u,_data:m}=this,{iScale:E,_stacked:S}=u,D=E.axis;let ft,Ot,zt,N=0===r&&a===m.length||u._sorted,K=r>0&&u._parsed[r-1];if(!1===this._parsing)u._parsed=m,u._sorted=!0,zt=m;else{zt=tt(m[r])?this.parseArrayData(u,m,r,a):lt(m[r])?this.parseObjectData(u,m,r,a):this.parsePrimitiveData(u,m,r,a);const ae=()=>null===Ot[D]||K&&Ot[D]<K[D];for(ft=0;ft<a;++ft)u._parsed[ft+r]=Ot=zt[ft],N&&(ae()&&(N=!1),K=Ot);u._sorted=N}S&&Xa(this,zt)}parsePrimitiveData(r,a,u,m){const{iScale:E,vScale:S}=r,D=E.axis,N=S.axis,K=E.getLabels(),ft=E===S,Ot=new Array(m);let zt,ae,ye;for(zt=0,ae=m;zt<ae;++zt)ye=zt+u,Ot[zt]={[D]:ft||E.parse(K[ye],ye),[N]:S.parse(a[ye],ye)};return Ot}parseArrayData(r,a,u,m){const{xScale:E,yScale:S}=r,D=new Array(m);let N,K,ft,Ot;for(N=0,K=m;N<K;++N)ft=N+u,Ot=a[ft],D[N]={x:E.parse(Ot[0],ft),y:S.parse(Ot[1],ft)};return D}parseObjectData(r,a,u,m){const{xScale:E,yScale:S}=r,{xAxisKey:D="x",yAxisKey:N="y"}=this._parsing,K=new Array(m);let ft,Ot,zt,ae;for(ft=0,Ot=m;ft<Ot;++ft)zt=ft+u,ae=a[zt],K[ft]={x:E.parse(oi(ae,D),zt),y:S.parse(oi(ae,N),zt)};return K}getParsed(r){return this._cachedMeta._parsed[r]}getDataElement(r){return this._cachedMeta.data[r]}applyStack(r,a,u){const E=this._cachedMeta,S=a[r.axis];return hl({keys:Wr(this.chart,!0),values:a._stacks[r.axis]},S,E.index,{mode:u})}updateRangeFromParsed(r,a,u,m){const E=u[a.axis];let S=null===E?NaN:E;const D=m&&u._stacks[a.axis];m&&D&&(m.values=D,S=hl(m,E,this._cachedMeta.index)),r.min=Math.min(r.min,S),r.max=Math.max(r.max,S)}getMinMax(r,a){const u=this._cachedMeta,m=u._parsed,E=u._sorted&&r===u.iScale,S=m.length,D=this._getOtherScale(r),N=((g,l,r)=>g&&!l.hidden&&l._stacked&&{keys:Wr(this.chart,!0),values:null})(a,u),K={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:ft,max:Ot}=function(g){const{min:l,max:r,minDefined:a,maxDefined:u}=g.getUserBounds();return{min:a?l:Number.NEGATIVE_INFINITY,max:u?r:Number.POSITIVE_INFINITY}}(D);let zt,ae;function ye(){ae=m[zt];const Re=ae[D.axis];return!ot(ae[r.axis])||ft>Re||Ot<Re}for(zt=0;zt<S&&(ye()||(this.updateRangeFromParsed(K,r,ae,N),!E));++zt);if(E)for(zt=S-1;zt>=0;--zt)if(!ye()){this.updateRangeFromParsed(K,r,ae,N);break}return K}getAllParsedValues(r){const a=this._cachedMeta._parsed,u=[];let m,E,S;for(m=0,E=a.length;m<E;++m)S=a[m][r.axis],ot(S)&&u.push(S);return u}getMaxOverflow(){return!1}getLabelAndValue(r){const a=this._cachedMeta,u=a.iScale,m=a.vScale,E=this.getParsed(r);return{label:u?""+u.getLabelForValue(E[u.axis]):"",value:m?""+m.getLabelForValue(E[m.axis]):""}}_update(r){const a=this._cachedMeta;this.update(r||"default"),a._clip=function(g){let l,r,a,u;return lt(g)?(l=g.top,r=g.right,a=g.bottom,u=g.left):l=r=a=u=g,{top:l,right:r,bottom:a,left:u,disabled:!1===g}}(at(this.options.clip,function(g,l,r){if(!1===r)return!1;const a=fs(g,r),u=fs(l,r);return{top:u.end,right:a.end,bottom:u.start,left:a.start}}(a.xScale,a.yScale,this.getMaxOverflow())))}update(r){}draw(){const r=this._ctx,u=this._cachedMeta,m=u.data||[],E=this.chart.chartArea,S=[],D=this._drawStart||0,N=this._drawCount||m.length-D;let K;for(u.dataset&&u.dataset.draw(r,E,D,N),K=D;K<D+N;++K){const ft=m[K];ft.hidden||(ft.active?S.push(ft):ft.draw(r,E))}for(K=0;K<S.length;++K)S[K].draw(r,E)}getStyle(r,a){const u=a?"active":"default";return void 0===r&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(u):this.resolveDataElementOptions(r||0,u)}getContext(r,a,u){const m=this.getDataset();let E;if(r>=0&&r<this._cachedMeta.data.length){const S=this._cachedMeta.data[r];E=S.$context||(S.$context=function(g,l,r){return Ir(g,{active:!1,dataIndex:l,parsed:void 0,raw:void 0,element:r,index:l,mode:"default",type:"data"})}(this.getContext(),r,S)),E.parsed=this.getParsed(r),E.raw=m.data[r],E.index=E.dataIndex=r}else E=this.$context||(this.$context=function(g,l){return Ir(g,{active:!1,dataset:void 0,datasetIndex:l,index:l,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),E.dataset=m,E.index=E.datasetIndex=this.index;return E.active=!!a,E.mode=u,E}resolveDatasetElementOptions(r){return this._resolveElementOptions(this.datasetElementType.id,r)}resolveDataElementOptions(r,a){return this._resolveElementOptions(this.dataElementType.id,a,r)}_resolveElementOptions(r,a="default",u){const m="active"===a,E=this._cachedDataOpts,S=r+"-"+a,D=E[S],N=this.enableOptionSharing&&_e(u);if(D)return Ml(D,N);const K=this.chart.config,ft=K.datasetElementScopeKeys(this._type,r),Ot=m?[`${r}Hover`,"hover",r,""]:[r,""],zt=K.getOptionScopes(this.getDataset(),ft),ae=Object.keys(yn.elements[r]),Re=K.resolveNamedOptions(zt,ae,()=>this.getContext(u,m),Ot);return Re.$shared&&(Re.$shared=N,E[S]=Object.freeze(Ml(Re,N))),Re}_resolveAnimations(r,a,u){const m=this.chart,E=this._cachedDataOpts,S=`animation-${a}`,D=E[S];if(D)return D;let N;if(!1!==m.options.animation){const ft=this.chart.config,Ot=ft.datasetAnimationScopeKeys(this._type,a),zt=ft.getOptionScopes(this.getDataset(),Ot);N=ft.createResolver(zt,this.getContext(r,u,a))}const K=new Qn(m,N&&N.animations);return N&&N._cacheable&&(E[S]=Object.freeze(K)),K}getSharedOptions(r){if(r.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},r))}includeOptions(r,a){return!a||Na(r)||this.chart._animationsDisabled}updateElement(r,a,u,m){Na(m)?Object.assign(r,u):this._resolveAnimations(a,m).update(r,u)}updateSharedOptions(r,a,u){r&&!Na(a)&&this._resolveAnimations(void 0,a).update(r,u)}_setStyle(r,a,u,m){r.active=m;const E=this.getStyle(a,m);this._resolveAnimations(a,u,m).update(r,{options:!m&&this.getSharedOptions(E)||E})}removeHoverStyle(r,a,u){this._setStyle(r,u,"active",!1)}setHoverStyle(r,a,u){this._setStyle(r,u,"active",!0)}_removeDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!1)}_setDatasetHoverStyle(){const r=this._cachedMeta.dataset;r&&this._setStyle(r,void 0,"active",!0)}_resyncElements(r){const a=this._data,u=this._cachedMeta.data;for(const[D,N,K]of this._syncList)this[D](N,K);this._syncList=[];const m=u.length,E=a.length,S=Math.min(E,m);S&&this.parse(0,S),E>m?this._insertElements(m,E-m,r):E<m&&this._removeElements(E,m-E)}_insertElements(r,a,u=!0){const m=this._cachedMeta,E=m.data,S=r+a;let D;const N=K=>{for(K.length+=a,D=K.length-1;D>=S;D--)K[D]=K[D-a]};for(N(E),D=r;D<S;++D)E[D]=new this.dataElementType;this._parsing&&N(m._parsed),this.parse(r,a),u&&this.updateElements(E,r,a,"reset")}updateElements(r,a,u,m){}_removeElements(r,a){const u=this._cachedMeta;if(this._parsing){const m=u._parsed.splice(r,a);u._stacked&&qs(u,m)}u.data.splice(r,a)}_sync(r){if(this._parsing)this._syncList.push(r);else{const[a,u,m]=r;this[a](u,m)}this.chart._dataChanges.push([this.index,...r])}_onDataPush(){const r=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-r,r])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(r,a){a&&this._sync(["_removeElements",r,a]);const u=arguments.length-2;u&&this._sync(["_insertElements",r,u])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return g.defaults={},g})();function gs(g){const l=g.iScale,r=function(g,l){if(!g._cache.$bar){const r=g.getMatchingVisibleMetas(l);let a=[];for(let u=0,m=r.length;u<m;u++)a=a.concat(r[u].controller.getAllParsedValues(g));g._cache.$bar=so(a.sort((u,m)=>u-m))}return g._cache.$bar}(l,g.type);let u,m,E,S,a=l._length;const D=()=>{32767===E||-32768===E||(_e(S)&&(a=Math.min(a,Math.abs(E-S)||a)),S=E)};for(u=0,m=r.length;u<m;++u)E=l.getPixelForValue(r[u]),D();for(S=void 0,u=0,m=l.ticks.length;u<m;++u)E=l.getPixelForTick(u),D();return a}function Ol(g,l,r,a){return tt(g)?function(g,l,r,a){const u=r.parse(g[0],a),m=r.parse(g[1],a),E=Math.min(u,m),S=Math.max(u,m);let D=E,N=S;Math.abs(E)>Math.abs(S)&&(D=S,N=E),l[r.axis]=N,l._custom={barStart:D,barEnd:N,start:u,end:m,min:E,max:S}}(g,l,r,a):l[r.axis]=r.parse(g,a),l}function dl(g,l,r,a){const u=g.iScale,m=g.vScale,E=u.getLabels(),S=u===m,D=[];let N,K,ft,Ot;for(N=r,K=r+a;N<K;++N)Ot=l[N],ft={},ft[u.axis]=S||u.parse(E[N],N),D.push(Ol(Ot,ft,m,N));return D}function $a(g){return g&&void 0!==g.barStart&&void 0!==g.barEnd}function ht(g,l,r,a){let u=l.borderSkipped;const m={};if(!u)return void(g.borderSkipped=m);const{start:E,end:S,reverse:D,top:N,bottom:K}=function(g){let l,r,a,u,m;return g.horizontal?(l=g.base>g.x,r="left",a="right"):(l=g.base<g.y,r="bottom",a="top"),l?(u="end",m="start"):(u="start",m="end"),{start:r,end:a,reverse:l,top:u,bottom:m}}(g);"middle"===u&&r&&(g.enableBorderRadius=!0,(r._top||0)===a?u=N:(r._bottom||0)===a?u=K:(m[q(K,E,S,D)]=!0,u=N)),m[q(u,E,S,D)]=!0,g.borderSkipped=m}function q(g,l,r,a){return a?(g=function(g,l,r){return g===l?r:g===r?l:g}(g,l,r),g=wt(g,r,l)):g=wt(g,l,r),g}function wt(g,l,r){return"start"===g?l:"end"===g?r:g}function Nt(g,{inflateAmount:l},r){g.inflateAmount="auto"===l?1===r?.33:0:l}Ls.prototype.datasetElementType=null,Ls.prototype.dataElementType=null;let ne=(()=>{class g extends Ls{parsePrimitiveData(r,a,u,m){return dl(r,a,u,m)}parseArrayData(r,a,u,m){return dl(r,a,u,m)}parseObjectData(r,a,u,m){const{iScale:E,vScale:S}=r,{xAxisKey:D="x",yAxisKey:N="y"}=this._parsing,K="x"===E.axis?D:N,ft="x"===S.axis?D:N,Ot=[];let zt,ae,ye,Re;for(zt=u,ae=u+m;zt<ae;++zt)Re=a[zt],ye={},ye[E.axis]=E.parse(oi(Re,K),zt),Ot.push(Ol(oi(Re,ft),ye,S,zt));return Ot}updateRangeFromParsed(r,a,u,m){super.updateRangeFromParsed(r,a,u,m);const E=u._custom;E&&a===this._cachedMeta.vScale&&(r.min=Math.min(r.min,E.min),r.max=Math.max(r.max,E.max))}getMaxOverflow(){return 0}getLabelAndValue(r){const a=this._cachedMeta,{iScale:u,vScale:m}=a,E=this.getParsed(r),S=E._custom,D=$a(S)?"["+S.start+", "+S.end+"]":""+m.getLabelForValue(E[m.axis]);return{label:""+u.getLabelForValue(E[u.axis]),value:D}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(r){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,r)}updateElements(r,a,u,m){const E="reset"===m,{index:S,_cachedMeta:{vScale:D}}=this,N=D.getBasePixel(),K=D.isHorizontal(),ft=this._getRuler(),Ot=this.resolveDataElementOptions(a,m),zt=this.getSharedOptions(Ot),ae=this.includeOptions(m,zt);this.updateSharedOptions(zt,m,Ot);for(let ye=a;ye<a+u;ye++){const Re=this.getParsed(ye),Oe=E||ut(Re[D.axis])?{base:N,head:N}:this._calculateBarValuePixels(ye),ai=this._calculateBarIndexPixels(ye,ft),Pi=(Re._stacks||{})[D.axis],yi={horizontal:K,base:Oe.base,enableBorderRadius:!Pi||$a(Re._custom)||S===Pi._top||S===Pi._bottom,x:K?Oe.head:ai.center,y:K?ai.center:Oe.head,height:K?ai.size:Math.abs(Oe.size),width:K?Math.abs(Oe.size):ai.size};ae&&(yi.options=zt||this.resolveDataElementOptions(ye,r[ye].active?"active":m));const wi=yi.options||r[ye].options;ht(yi,wi,Pi,S),Nt(yi,wi,ft.ratio),this.updateElement(r[ye],ye,yi,m)}}_getStacks(r,a){const m=this._cachedMeta.iScale,E=m.getMatchingVisibleMetas(this._type),S=m.options.stacked,D=E.length,N=[];let K,ft;for(K=0;K<D;++K)if(ft=E[K],ft.controller.options.grouped){if(void 0!==a){const Ot=ft.controller.getParsed(a)[ft.controller._cachedMeta.vScale.axis];if(ut(Ot)||isNaN(Ot))continue}if((!1===S||-1===N.indexOf(ft.stack)||void 0===S&&void 0===ft.stack)&&N.push(ft.stack),ft.index===r)break}return N.length||N.push(void 0),N}_getStackCount(r){return this._getStacks(void 0,r).length}_getStackIndex(r,a,u){const m=this._getStacks(r,u),E=void 0!==a?m.indexOf(a):-1;return-1===E?m.length-1:E}_getRuler(){const r=this.options,a=this._cachedMeta,u=a.iScale,m=[];let E,S;for(E=0,S=a.data.length;E<S;++E)m.push(u.getPixelForValue(this.getParsed(E)[u.axis],E));const D=r.barThickness;return{min:D||gs(a),pixels:m,start:u._startPixel,end:u._endPixel,stackCount:this._getStackCount(),scale:u,grouped:r.grouped,ratio:D?1:r.categoryPercentage*r.barPercentage}}_calculateBarValuePixels(r){const{_cachedMeta:{vScale:a,_stacked:u},options:{base:m,minBarLength:E}}=this,S=m||0,D=this.getParsed(r),N=D._custom,K=$a(N);let ae,ye,ft=D[a.axis],Ot=0,zt=u?this.applyStack(a,D,u):ft;zt!==ft&&(Ot=zt-ft,zt=ft),K&&(ft=N.barStart,zt=N.barEnd-N.barStart,0!==ft&&oe(ft)!==oe(N.barEnd)&&(Ot=0),Ot+=ft);const Re=ut(m)||K?Ot:m;let Oe=a.getPixelForValue(Re);if(ae=this.chart.getDataVisibility(r)?a.getPixelForValue(Ot+zt):Oe,ye=ae-Oe,Math.abs(ye)<E&&(ye=function(g,l,r){return 0!==g?oe(g):(l.isHorizontal()?1:-1)*(l.min>=r?1:-1)}(ye,a,S)*E,ft===S&&(Oe-=ye/2),ae=Oe+ye),Oe===a.getPixelForValue(S)){const ai=oe(ye)*a.getLineWidthForValue(S)/2;Oe+=ai,ye-=ai}return{size:ye,base:Oe,head:ae,center:ae+ye/2}}_calculateBarIndexPixels(r,a){const u=a.scale,m=this.options,E=m.skipNull,S=at(m.maxBarThickness,1/0);let D,N;if(a.grouped){const K=E?this._getStackCount(r):a.stackCount,ft="flex"===m.barThickness?function(g,l,r,a){const u=l.pixels,m=u[g];let E=g>0?u[g-1]:null,S=g<u.length-1?u[g+1]:null;const D=r.categoryPercentage;null===E&&(E=m-(null===S?l.end-l.start:S-m)),null===S&&(S=m+m-E);const N=m-(m-Math.min(E,S))/2*D;return{chunk:Math.abs(S-E)/2*D/a,ratio:r.barPercentage,start:N}}(r,a,m,K):function(g,l,r,a){const u=r.barThickness;let m,E;return ut(u)?(m=l.min*r.categoryPercentage,E=r.barPercentage):(m=u*a,E=1),{chunk:m/a,ratio:E,start:l.pixels[g]-m/2}}(r,a,m,K),Ot=this._getStackIndex(this.index,this._cachedMeta.stack,E?r:void 0);D=ft.start+ft.chunk*Ot+ft.chunk/2,N=Math.min(S,ft.chunk*ft.ratio)}else D=u.getPixelForValue(this.getParsed(r)[u.axis],r),N=Math.min(S,a.min*a.ratio);return{base:D-N/2,head:D+N/2,center:D,size:N}}draw(){const r=this._cachedMeta,a=r.vScale,u=r.data,m=u.length;let E=0;for(;E<m;++E)null!==this.getParsed(E)[a.axis]&&u[E].draw(this._ctx)}}return g.id="bar",g.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},g.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},g})(),Se=(()=>{class g extends Ls{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(r,a,u,m){const E=super.parsePrimitiveData(r,a,u,m);for(let S=0;S<E.length;S++)E[S]._custom=this.resolveDataElementOptions(S+u).radius;return E}parseArrayData(r,a,u,m){const E=super.parseArrayData(r,a,u,m);for(let S=0;S<E.length;S++)E[S]._custom=at(a[u+S][2],this.resolveDataElementOptions(S+u).radius);return E}parseObjectData(r,a,u,m){const E=super.parseObjectData(r,a,u,m);for(let S=0;S<E.length;S++){const D=a[u+S];E[S]._custom=at(D&&D.r&&+D.r,this.resolveDataElementOptions(S+u).radius)}return E}getMaxOverflow(){const r=this._cachedMeta.data;let a=0;for(let u=r.length-1;u>=0;--u)a=Math.max(a,r[u].size(this.resolveDataElementOptions(u))/2);return a>0&&a}getLabelAndValue(r){const a=this._cachedMeta,{xScale:u,yScale:m}=a,E=this.getParsed(r),S=u.getLabelForValue(E.x),D=m.getLabelForValue(E.y),N=E._custom;return{label:a.label,value:"("+S+", "+D+(N?", "+N:"")+")"}}update(r){const a=this._cachedMeta.data;this.updateElements(a,0,a.length,r)}updateElements(r,a,u,m){const E="reset"===m,{iScale:S,vScale:D}=this._cachedMeta,N=this.resolveDataElementOptions(a,m),K=this.getSharedOptions(N),ft=this.includeOptions(m,K),Ot=S.axis,zt=D.axis;for(let ae=a;ae<a+u;ae++){const ye=r[ae],Re=!E&&this.getParsed(ae),Oe={},ai=Oe[Ot]=E?S.getPixelForDecimal(.5):S.getPixelForValue(Re[Ot]),Pi=Oe[zt]=E?D.getBasePixel():D.getPixelForValue(Re[zt]);Oe.skip=isNaN(ai)||isNaN(Pi),ft&&(Oe.options=this.resolveDataElementOptions(ae,ye.active?"active":m),E&&(Oe.options.radius=0)),this.updateElement(ye,ae,Oe,m)}this.updateSharedOptions(K,m,N)}resolveDataElementOptions(r,a){const u=this.getParsed(r);let m=super.resolveDataElementOptions(r,a);m.$shared&&(m=Object.assign({},m,{$shared:!1}));const E=m.radius;return"active"!==a&&(m.radius=0),m.radius+=at(u&&u._custom,E),m}}return g.id="bubble",g.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},g.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},g})(),fi=(()=>{class g extends Ls{constructor(r,a){super(r,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(r,a){const u=this.getDataset().data,m=this._cachedMeta;if(!1===this._parsing)m._parsed=u;else{let S,D,E=N=>+u[N];if(lt(u[r])){const{key:N="value"}=this._parsing;E=K=>+oi(u[K],N)}for(S=r,D=r+a;S<D;++S)m._parsed[S]=E(S)}}_getRotation(){return Ze(this.options.rotation-90)}_getCircumference(){return Ze(this.options.circumference)}_getRotationExtents(){let r=Pt,a=-Pt;for(let u=0;u<this.chart.data.datasets.length;++u)if(this.chart.isDatasetVisible(u)){const m=this.chart.getDatasetMeta(u).controller,E=m._getRotation(),S=m._getCircumference();r=Math.min(r,E),a=Math.max(a,E+S)}return{rotation:r,circumference:a-r}}update(r){const a=this.chart,{chartArea:u}=a,m=this._cachedMeta,E=m.data,S=this.getMaxBorderWidth()+this.getMaxOffset(E)+this.options.spacing,D=Math.max((Math.min(u.width,u.height)-S)/2,0),N=Math.min(((g,l)=>"string"==typeof g&&g.endsWith("%")?parseFloat(g)/100:g/l)(this.options.cutout,D),1),K=this._getRingWeight(this.index),{circumference:ft,rotation:Ot}=this._getRotationExtents(),{ratioX:zt,ratioY:ae,offsetX:ye,offsetY:Re}=function(g,l,r){let a=1,u=1,m=0,E=0;if(l<Pt){const S=g,D=S+l,N=Math.cos(S),K=Math.sin(S),ft=Math.cos(D),Ot=Math.sin(D),zt=(Pi,yi,wi)=>ri(Pi,S,D,!0)?1:Math.max(yi,yi*r,wi,wi*r),ae=(Pi,yi,wi)=>ri(Pi,S,D,!0)?-1:Math.min(yi,yi*r,wi,wi*r),ye=zt(0,N,ft),Re=zt(jt,K,Ot),Oe=ae(Rt,N,ft),ai=ae(Rt+jt,K,Ot);a=(ye-Oe)/2,u=(Re-ai)/2,m=-(ye+Oe)/2,E=-(Re+ai)/2}return{ratioX:a,ratioY:u,offsetX:m,offsetY:E}}(Ot,ft,N),Pi=Math.max(Math.min((u.width-S)/zt,(u.height-S)/ae)/2,0),yi=it(this.options.radius,Pi),Wi=(yi-Math.max(yi*N,0))/this._getVisibleDatasetWeightTotal();this.offsetX=ye*yi,this.offsetY=Re*yi,m.total=this.calculateTotal(),this.outerRadius=yi-Wi*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Wi*K,0),this.updateElements(E,0,E.length,r)}_circumference(r,a){const u=this.options,m=this._cachedMeta,E=this._getCircumference();return a&&u.animation.animateRotate||!this.chart.getDataVisibility(r)||null===m._parsed[r]||m.data[r].hidden?0:this.calculateCircumference(m._parsed[r]*E/Pt)}updateElements(r,a,u,m){const E="reset"===m,S=this.chart,D=S.chartArea,ft=(D.left+D.right)/2,Ot=(D.top+D.bottom)/2,zt=E&&S.options.animation.animateScale,ae=zt?0:this.innerRadius,ye=zt?0:this.outerRadius,Re=this.resolveDataElementOptions(a,m),Oe=this.getSharedOptions(Re),ai=this.includeOptions(m,Oe);let yi,Pi=this._getRotation();for(yi=0;yi<a;++yi)Pi+=this._circumference(yi,E);for(yi=a;yi<a+u;++yi){const wi=this._circumference(yi,E),Wi=r[yi],zi={x:ft+this.offsetX,y:Ot+this.offsetY,startAngle:Pi,endAngle:Pi+wi,circumference:wi,outerRadius:ye,innerRadius:ae};ai&&(zi.options=Oe||this.resolveDataElementOptions(yi,Wi.active?"active":m)),Pi+=wi,this.updateElement(Wi,yi,zi,m)}this.updateSharedOptions(Oe,m,Re)}calculateTotal(){const r=this._cachedMeta,a=r.data;let m,u=0;for(m=0;m<a.length;m++){const E=r._parsed[m];null!==E&&!isNaN(E)&&this.chart.getDataVisibility(m)&&!a[m].hidden&&(u+=Math.abs(E))}return u}calculateCircumference(r){const a=this._cachedMeta.total;return a>0&&!isNaN(r)?Pt*(Math.abs(r)/a):0}getLabelAndValue(r){const u=this.chart,m=u.data.labels||[],E=tn(this._cachedMeta._parsed[r],u.options.locale);return{label:m[r]||"",value:E}}getMaxBorderWidth(r){let a=0;const u=this.chart;let m,E,S,D,N;if(!r)for(m=0,E=u.data.datasets.length;m<E;++m)if(u.isDatasetVisible(m)){S=u.getDatasetMeta(m),r=S.data,D=S.controller;break}if(!r)return 0;for(m=0,E=r.length;m<E;++m)N=D.resolveDataElementOptions(m),"inner"!==N.borderAlign&&(a=Math.max(a,N.borderWidth||0,N.hoverBorderWidth||0));return a}getMaxOffset(r){let a=0;for(let u=0,m=r.length;u<m;++u){const E=this.resolveDataElementOptions(u);a=Math.max(a,E.offset||0,E.hoverOffset||0)}return a}_getRingWeightOffset(r){let a=0;for(let u=0;u<r;++u)this.chart.isDatasetVisible(u)&&(a+=this._getRingWeight(u));return a}_getRingWeight(r){return Math.max(at(this.chart.data.datasets[r].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return g.id="doughnut",g.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},g.descriptors={_scriptable:l=>"spacing"!==l,_indexable:l=>"spacing"!==l},g.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const r=l.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:a}}=l.legend.options;return r.labels.map((u,m)=>{const S=l.getDatasetMeta(0).controller.getStyle(m);return{text:u,fillStyle:S.backgroundColor,strokeStyle:S.borderColor,lineWidth:S.borderWidth,pointStyle:a,hidden:!l.getDataVisibility(m),index:m}})}return[]}},onClick(l,r,a){a.chart.toggleDataVisibility(r.index),a.chart.update()}},tooltip:{callbacks:{title:()=>"",label(l){let r=l.label;const a=": "+l.formattedValue;return tt(r)?(r=r.slice(),r[0]+=a):r+=a,r}}}}},g})(),ji=(()=>{class g extends Ls{initialize(){this.enableOptionSharing=!0,super.initialize()}update(r){const a=this._cachedMeta,{dataset:u,data:m=[],_dataset:E}=a,S=this.chart._animationsDisabled;let{start:D,count:N}=function(g,l,r){const a=l.length;let u=0,m=a;if(g._sorted){const{iScale:E,_parsed:S}=g,D=E.axis,{min:N,max:K,minDefined:ft,maxDefined:Ot}=E.getUserBounds();ft&&(u=ue(Math.min(qo(S,E.axis,N).lo,r?a:qo(l,D,E.getPixelForValue(N)).lo),0,a-1)),m=Ot?ue(Math.max(qo(S,E.axis,K).hi+1,r?0:qo(l,D,E.getPixelForValue(K)).hi+1),u,a)-u:a-u}return{start:u,count:m}}(a,m,S);this._drawStart=D,this._drawCount=N,function(g){const{xScale:l,yScale:r,_scaleRanges:a}=g,u={xmin:l.min,xmax:l.max,ymin:r.min,ymax:r.max};if(!a)return g._scaleRanges=u,!0;const m=a.xmin!==l.min||a.xmax!==l.max||a.ymin!==r.min||a.ymax!==r.max;return Object.assign(a,u),m}(a)&&(D=0,N=m.length),u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!E._decimated,u.points=m;const K=this.resolveDatasetElementOptions(r);this.options.showLine||(K.borderWidth=0),K.segment=this.options.segment,this.updateElement(u,void 0,{animated:!S,options:K},r),this.updateElements(m,D,N,r)}updateElements(r,a,u,m){const E="reset"===m,{iScale:S,vScale:D,_stacked:N,_dataset:K}=this._cachedMeta,ft=this.resolveDataElementOptions(a,m),Ot=this.getSharedOptions(ft),zt=this.includeOptions(m,Ot),ae=S.axis,ye=D.axis,{spanGaps:Re,segment:Oe}=this.options,ai=kt(Re)?Re:Number.POSITIVE_INFINITY,Pi=this.chart._animationsDisabled||E||"none"===m;let yi=a>0&&this.getParsed(a-1);for(let wi=a;wi<a+u;++wi){const Wi=r[wi],zi=this.getParsed(wi),qi=Pi?Wi:{},an=ut(zi[ye]),zn=qi[ae]=S.getPixelForValue(zi[ae],wi),sn=qi[ye]=E||an?D.getBasePixel():D.getPixelForValue(N?this.applyStack(D,zi,N):zi[ye],wi);qi.skip=isNaN(zn)||isNaN(sn)||an,qi.stop=wi>0&&zi[ae]-yi[ae]>ai,Oe&&(qi.parsed=zi,qi.raw=K.data[wi]),zt&&(qi.options=Ot||this.resolveDataElementOptions(wi,Wi.active?"active":m)),Pi||this.updateElement(Wi,wi,qi,m),yi=zi}this.updateSharedOptions(Ot,m,ft)}getMaxOverflow(){const r=this._cachedMeta,a=r.dataset,u=a.options&&a.options.borderWidth||0,m=r.data||[];if(!m.length)return u;const E=m[0].size(this.resolveDataElementOptions(0)),S=m[m.length-1].size(this.resolveDataElementOptions(m.length-1));return Math.max(u,E,S)/2}draw(){const r=this._cachedMeta;r.dataset.updateControlPoints(this.chart.chartArea,r.iScale.axis),super.draw()}}return g.id="line",g.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},g.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},g})();var ms=Object.freeze({__proto__:null,BarController:ne,BubbleController:Se,DoughnutController:fi,LineController:ji,PolarAreaController:(()=>{class g extends Ls{constructor(r,a){super(r,a),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(r){const u=this.chart,m=u.data.labels||[],E=tn(this._cachedMeta._parsed[r].r,u.options.locale);return{label:m[r]||"",value:E}}update(r){const a=this._cachedMeta.data;this._updateRadius(),this.updateElements(a,0,a.length,r)}_updateRadius(){const r=this.chart,a=r.chartArea,u=r.options,m=Math.min(a.right-a.left,a.bottom-a.top),E=Math.max(m/2,0),D=(E-Math.max(u.cutoutPercentage?E/100*u.cutoutPercentage:1,0))/r.getVisibleDatasetCount();this.outerRadius=E-D*this.index,this.innerRadius=this.outerRadius-D}updateElements(r,a,u,m){const E="reset"===m,S=this.chart,D=this.getDataset(),K=S.options.animation,ft=this._cachedMeta.rScale,Ot=ft.xCenter,zt=ft.yCenter,ae=ft.getIndexAngle(0)-.5*Rt;let Re,ye=ae;const Oe=360/this.countVisibleElements();for(Re=0;Re<a;++Re)ye+=this._computeAngle(Re,m,Oe);for(Re=a;Re<a+u;Re++){const ai=r[Re];let Pi=ye,yi=ye+this._computeAngle(Re,m,Oe),wi=S.getDataVisibility(Re)?ft.getDistanceFromCenterForValue(D.data[Re]):0;ye=yi,E&&(K.animateScale&&(wi=0),K.animateRotate&&(Pi=yi=ae));const Wi={x:Ot,y:zt,innerRadius:0,outerRadius:wi,startAngle:Pi,endAngle:yi,options:this.resolveDataElementOptions(Re,ai.active?"active":m)};this.updateElement(ai,Re,Wi,m)}}countVisibleElements(){const r=this.getDataset();let u=0;return this._cachedMeta.data.forEach((m,E)=>{!isNaN(r.data[E])&&this.chart.getDataVisibility(E)&&u++}),u}_computeAngle(r,a,u){return this.chart.getDataVisibility(r)?Ze(this.resolveDataElementOptions(r,a).angle||u):0}}return g.id="polarArea",g.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},g.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const r=l.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:a}}=l.legend.options;return r.labels.map((u,m)=>{const S=l.getDatasetMeta(0).controller.getStyle(m);return{text:u,fillStyle:S.backgroundColor,strokeStyle:S.borderColor,lineWidth:S.borderWidth,pointStyle:a,hidden:!l.getDataVisibility(m),index:m}})}return[]}},onClick(l,r,a){a.chart.toggleDataVisibility(r.index),a.chart.update()}},tooltip:{callbacks:{title:()=>"",label:l=>l.chart.data.labels[l.dataIndex]+": "+l.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},g})(),PieController:(()=>{class g extends fi{}return g.id="pie",g.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},g})(),RadarController:(()=>{class g extends Ls{getLabelAndValue(r){const a=this._cachedMeta.vScale,u=this.getParsed(r);return{label:a.getLabels()[r],value:""+a.getLabelForValue(u[a.axis])}}update(r){const a=this._cachedMeta,u=a.dataset,m=a.data||[],E=a.iScale.getLabels();if(u.points=m,"resize"!==r){const S=this.resolveDatasetElementOptions(r);this.options.showLine||(S.borderWidth=0),this.updateElement(u,void 0,{_loop:!0,_fullLoop:E.length===m.length,options:S},r)}this.updateElements(m,0,m.length,r)}updateElements(r,a,u,m){const E=this.getDataset(),S=this._cachedMeta.rScale,D="reset"===m;for(let N=a;N<a+u;N++){const K=r[N],ft=this.resolveDataElementOptions(N,K.active?"active":m),Ot=S.getPointPositionForValue(N,E.data[N]),zt=D?S.xCenter:Ot.x,ae=D?S.yCenter:Ot.y,ye={x:zt,y:ae,angle:Ot.angle,skip:isNaN(zt)||isNaN(ae),options:ft};this.updateElement(K,N,ye,m)}}}return g.id="radar",g.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},g.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},g})(),ScatterController:(()=>{class g extends ji{}return g.id="scatter",g.defaults={showLine:!1,fill:!1},g.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:l=>"("+l.label+", "+l.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},g})()});function Or(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var jr={_date:(()=>{class g{constructor(r){this.options=r||{}}formats(){return Or()}parse(r,a){return Or()}format(r,a){return Or()}add(r,a,u){return Or()}diff(r,a,u){return Or()}startOf(r,a,u){return Or()}endOf(r,a){return Or()}}return g.override=function(l){Object.assign(g.prototype,l)},g})()};function Ps(g,l){return"native"in g?{x:g.x,y:g.y}:Y(g,l)}function fl(g,l,r,a){const{controller:u,data:m,_sorted:E}=g,S=u._cachedMeta.iScale;if(S&&l===S.axis&&E&&m.length){const D=S._reversePixels?us:qo;if(!a)return D(m,l,r);if(u._sharedOptions){const N=m[0],K="function"==typeof N.getRange&&N.getRange(l);if(K){const ft=D(m,l,r-K),Ot=D(m,l,r+K);return{lo:ft.lo,hi:Ot.hi}}}}return{lo:0,hi:m.length-1}}function ns(g,l,r,a,u){const m=g.getSortedVisibleDatasetMetas(),E=r[l];for(let S=0,D=m.length;S<D;++S){const{index:N,data:K}=m[S],{lo:ft,hi:Ot}=fl(m[S],l,E,u);for(let zt=ft;zt<=Ot;++zt){const ae=K[zt];ae.skip||a(ae,N,zt)}}}function Za(g,l,r,a){const u=[];return wr(l,g.chartArea,g._minPadding)&&ns(g,r,l,function(E,S,D){E.inRange(l.x,l.y,a)&&u.push({element:E,datasetIndex:S,index:D})},!0),u}function da(g,l,r,a,u){const m=function(g){const l=-1!==g.indexOf("x"),r=-1!==g.indexOf("y");return function(a,u){const m=l?Math.abs(a.x-u.x):0,E=r?Math.abs(a.y-u.y):0;return Math.sqrt(Math.pow(m,2)+Math.pow(E,2))}}(r);let E=Number.POSITIVE_INFINITY,S=[];return wr(l,g.chartArea,g._minPadding)&&ns(g,r,l,function(N,K,ft){if(a&&!N.inRange(l.x,l.y,u))return;const Ot=N.getCenterPoint(u);if(!wr(Ot,g.chartArea,g._minPadding)&&!N.inRange(l.x,l.y,u))return;const zt=m(l,Ot);zt<E?(S=[{element:N,datasetIndex:K,index:ft}],E=zt):zt===E&&S.push({element:N,datasetIndex:K,index:ft})}),S}function ws(g,l,r,a){const u=Ps(l,g),m=[],E=r.axis,S="x"===E?"inXRange":"inYRange";let D=!1;return function(g,l){const r=g.getSortedVisibleDatasetMetas();let a,u,m;for(let E=0,S=r.length;E<S;++E){({index:a,data:u}=r[E]);for(let D=0,N=u.length;D<N;++D)m=u[D],m.skip||l(m,a,D)}}(g,(N,K,ft)=>{N[S](u[E],a)&&m.push({element:N,datasetIndex:K,index:ft}),N.inRange(u.x,u.y,a)&&(D=!0)}),r.intersect&&!D?[]:m}var Rs={modes:{index(g,l,r,a){const u=Ps(l,g),m=r.axis||"x",E=r.intersect?Za(g,u,m,a):da(g,u,m,!1,a),S=[];return E.length?(g.getSortedVisibleDatasetMetas().forEach(D=>{const N=E[0].index,K=D.data[N];K&&!K.skip&&S.push({element:K,datasetIndex:D.index,index:N})}),S):[]},dataset(g,l,r,a){const u=Ps(l,g),m=r.axis||"xy";let E=r.intersect?Za(g,u,m,a):da(g,u,m,!1,a);if(E.length>0){const S=E[0].datasetIndex,D=g.getDatasetMeta(S).data;E=[];for(let N=0;N<D.length;++N)E.push({element:D[N],datasetIndex:S,index:N})}return E},point:(g,l,r,a)=>Za(g,Ps(l,g),r.axis||"xy",a),nearest:(g,l,r,a)=>da(g,Ps(l,g),r.axis||"xy",r.intersect,a),x:(g,l,r,a)=>ws(g,l,{axis:"x",intersect:r.intersect},a),y:(g,l,r,a)=>ws(g,l,{axis:"y",intersect:r.intersect},a)}};const zc=["left","top","right","bottom"];function Qa(g,l){return g.filter(r=>r.pos===l)}function er(g,l){return g.filter(r=>-1===zc.indexOf(r.pos)&&r.box.axis===l)}function nc(g,l){return g.sort((r,a)=>{const u=l?a:r,m=l?r:a;return u.weight===m.weight?u.index-m.index:u.weight-m.weight})}function Tu(g,l,r,a){return Math.max(g[r],l[r])+Math.max(g[a],l[a])}function Xc(g,l){g.top=Math.max(g.top,l.top),g.left=Math.max(g.left,l.left),g.bottom=Math.max(g.bottom,l.bottom),g.right=Math.max(g.right,l.right)}function oc(g,l,r,a){const{pos:u,box:m}=r,E=g.maxPadding;if(!lt(u)){r.size&&(g[u]-=r.size);const ft=a[r.stack]||{size:0,count:1};ft.size=Math.max(ft.size,r.horizontal?m.height:m.width),r.size=ft.size/ft.count,g[u]+=r.size}m.getPadding&&Xc(E,m.getPadding());const S=Math.max(0,l.outerWidth-Tu(E,g,"left","right")),D=Math.max(0,l.outerHeight-Tu(E,g,"top","bottom")),N=S!==g.w,K=D!==g.h;return g.w=S,g.h=D,r.horizontal?{same:N,other:K}:{same:K,other:N}}function gr(g,l){const r=l.maxPadding;return function(u){const m={left:0,top:0,right:0,bottom:0};return u.forEach(E=>{m[E]=Math.max(l[E],r[E])}),m}(g?["left","right"]:["top","bottom"])}function Pa(g,l,r,a){const u=[];let m,E,S,D,N,K;for(m=0,E=g.length,N=0;m<E;++m){S=g[m],D=S.box,D.update(S.width||l.w,S.height||l.h,gr(S.horizontal,l));const{same:ft,other:Ot}=oc(l,r,S,a);N|=ft&&u.length,K=K||Ot,D.fullSize||u.push(S)}return N&&Pa(u,l,r,a)||K}function ia(g,l,r,a,u){g.top=r,g.left=l,g.right=l+a,g.bottom=r+u,g.width=a,g.height=u}function Cu(g,l,r,a){const u=r.padding;let{x:m,y:E}=l;for(const S of g){const D=S.box,N=a[S.stack]||{count:1,placed:0,weight:1},K=S.stackWeight/N.weight||1;if(S.horizontal){const ft=l.w*K,Ot=N.size||D.height;_e(N.start)&&(E=N.start),D.fullSize?ia(D,u.left,E,r.outerWidth-u.right-u.left,Ot):ia(D,l.left+N.placed,E,ft,Ot),N.start=E,N.placed+=ft,E=D.bottom}else{const ft=l.h*K,Ot=N.size||D.width;_e(N.start)&&(m=N.start),D.fullSize?ia(D,m,u.top,Ot,r.outerHeight-u.bottom-u.top):ia(D,m,l.top+N.placed,Ot,ft),N.start=m,N.placed+=ft,m=D.right}}l.x=m,l.y=E}yn.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var zr={addBox(g,l){g.boxes||(g.boxes=[]),l.fullSize=l.fullSize||!1,l.position=l.position||"top",l.weight=l.weight||0,l._layers=l._layers||function(){return[{z:0,draw(r){l.draw(r)}}]},g.boxes.push(l)},removeBox(g,l){const r=g.boxes?g.boxes.indexOf(l):-1;-1!==r&&g.boxes.splice(r,1)},configure(g,l,r){l.fullSize=r.fullSize,l.position=r.position,l.weight=r.weight},update(g,l,r,a){if(!g)return;const u=fo(g.options.layout.padding),m=Math.max(l-u.width,0),E=Math.max(r-u.height,0),S=function(g){const l=function(g){const l=[];let r,a,u,m,E,S;for(r=0,a=(g||[]).length;r<a;++r)u=g[r],({position:m,options:{stack:E,stackWeight:S=1}}=u),l.push({index:r,box:u,pos:m,horizontal:u.isHorizontal(),weight:u.weight,stack:E&&m+E,stackWeight:S});return l}(g),r=nc(l.filter(N=>N.box.fullSize),!0),a=nc(Qa(l,"left"),!0),u=nc(Qa(l,"right")),m=nc(Qa(l,"top"),!0),E=nc(Qa(l,"bottom")),S=er(l,"x"),D=er(l,"y");return{fullSize:r,leftAndTop:a.concat(m),rightAndBottom:u.concat(D).concat(E).concat(S),chartArea:Qa(l,"chartArea"),vertical:a.concat(u).concat(D),horizontal:m.concat(E).concat(S)}}(g.boxes),D=S.vertical,N=S.horizontal;Gt(g.boxes,ye=>{"function"==typeof ye.beforeLayout&&ye.beforeLayout()});const K=D.reduce((ye,Re)=>Re.box.options&&!1===Re.box.options.display?ye:ye+1,0)||1,ft=Object.freeze({outerWidth:l,outerHeight:r,padding:u,availableWidth:m,availableHeight:E,vBoxMaxWidth:m/2/K,hBoxMaxHeight:E/2}),Ot=Object.assign({},u);Xc(Ot,fo(a));const zt=Object.assign({maxPadding:Ot,w:m,h:E,x:u.left,y:u.top},u),ae=function(g,l){const r=function(g){const l={};for(const r of g){const{stack:a,pos:u,stackWeight:m}=r;if(!a||!zc.includes(u))continue;const E=l[a]||(l[a]={count:0,placed:0,weight:0,size:0});E.count++,E.weight+=m}return l}(g),{vBoxMaxWidth:a,hBoxMaxHeight:u}=l;let m,E,S;for(m=0,E=g.length;m<E;++m){S=g[m];const{fullSize:D}=S.box,N=r[S.stack],K=N&&S.stackWeight/N.weight;S.horizontal?(S.width=K?K*a:D&&l.availableWidth,S.height=u):(S.width=a,S.height=K?K*u:D&&l.availableHeight)}return r}(D.concat(N),ft);Pa(S.fullSize,zt,ft,ae),Pa(D,zt,ft,ae),Pa(N,zt,ft,ae)&&Pa(D,zt,ft,ae),function(g){const l=g.maxPadding;function r(a){const u=Math.max(l[a]-g[a],0);return g[a]+=u,u}g.y+=r("top"),g.x+=r("left"),r("right"),r("bottom")}(zt),Cu(S.leftAndTop,zt,ft,ae),zt.x+=zt.w,zt.y+=zt.h,Cu(S.rightAndBottom,zt,ft,ae),g.chartArea={left:zt.left,top:zt.top,right:zt.left+zt.w,bottom:zt.top+zt.h,height:zt.h,width:zt.w},Gt(S.chartArea,ye=>{const Re=ye.box;Object.assign(Re,g.chartArea),Re.update(zt.w,zt.h,{left:0,top:0,right:0,bottom:0})})}};class _s{acquireContext(l,r){}releaseContext(l){return!1}addEventListener(l,r,a){}removeEventListener(l,r,a){}getDevicePixelRatio(){return 1}getMaximumSize(l,r,a,u){return r=Math.max(0,r||l.width),a=a||l.height,{width:r,height:Math.max(0,u?Math.floor(r/u):a)}}isAttached(l){return!0}updateConfig(l){}}class pa extends _s{acquireContext(l){return l&&l.getContext&&l.getContext("2d")||null}updateConfig(l){l.options.animation=!1}}const Fa="$chartjs",na={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kl=g=>null===g||""===g,Jc=!!xe&&{passive:!0};function $c(g,l,r){g.canvas.removeEventListener(l,r,Jc)}function sc(g,l){for(const r of g)if(r===l||r.contains(l))return!0}function xr(g,l,r){const a=g.canvas,u=new MutationObserver(m=>{let E=!1;for(const S of m)E=E||sc(S.addedNodes,a),E=E&&!sc(S.removedNodes,a);E&&r()});return u.observe(document,{childList:!0,subtree:!0}),u}function Zc(g,l,r){const a=g.canvas,u=new MutationObserver(m=>{let E=!1;for(const S of m)E=E||sc(S.removedNodes,a),E=E&&!sc(S.addedNodes,a);E&&r()});return u.observe(document,{childList:!0,subtree:!0}),u}const Da=new Map;let Qu=0;function Ba(){const g=window.devicePixelRatio;g!==Qu&&(Qu=g,Da.forEach((l,r)=>{r.currentDevicePixelRatio!==g&&l()}))}function os(g,l,r){const a=g.canvas,u=a&&js(a);if(!u)return;const m=$((S,D)=>{const N=u.clientWidth;r(S,D),N<u.clientWidth&&r()},window),E=new ResizeObserver(S=>{const D=S[0],N=D.contentRect.width,K=D.contentRect.height;0===N&&0===K||m(N,K)});return E.observe(u),function(g,l){Da.size||window.addEventListener("resize",Ba),Da.set(g,l)}(g,m),E}function Ll(g,l,r){r&&r.disconnect(),"resize"===l&&function(g){Da.delete(g),Da.size||window.removeEventListener("resize",Ba)}(g)}function Un(g,l,r){const a=g.canvas,u=$(m=>{null!==g.ctx&&r(function(g,l){const r=na[g.type]||g.type,{x:a,y:u}=Y(g,l);return{type:r,chart:l,native:g,x:void 0!==a?a:null,y:void 0!==u?u:null}}(m,g))},g,m=>{const E=m[0];return[E,E.offsetX,E.offsetY]});return function(g,l,r){g.addEventListener(l,r,Jc)}(a,l,u),u}class bc extends _s{acquireContext(l,r){const a=l&&l.getContext&&l.getContext("2d");return a&&a.canvas===l?(function(g,l){const r=g.style,a=g.getAttribute("height"),u=g.getAttribute("width");if(g[Fa]={initial:{height:a,width:u,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",kl(u)){const m=ii(g,"width");void 0!==m&&(g.width=m)}if(kl(a))if(""===g.style.height)g.height=g.width/(l||2);else{const m=ii(g,"height");void 0!==m&&(g.height=m)}}(l,r),a):null}releaseContext(l){const r=l.canvas;if(!r[Fa])return!1;const a=r[Fa].initial;["height","width"].forEach(m=>{const E=a[m];ut(E)?r.removeAttribute(m):r.setAttribute(m,E)});const u=a.style||{};return Object.keys(u).forEach(m=>{r.style[m]=u[m]}),r.width=r.width,delete r[Fa],!0}addEventListener(l,r,a){this.removeEventListener(l,r),(l.$proxies||(l.$proxies={}))[r]=({attach:xr,detach:Zc,resize:os}[r]||Un)(l,r,a)}removeEventListener(l,r){const a=l.$proxies||(l.$proxies={}),u=a[r];u&&(({attach:Ll,detach:Ll,resize:Ll}[r]||$c)(l,r,u),a[r]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(l,r,a,u){return function(g,l,r,a){const u=Ur(g),m=In(u,"margin"),E=Vr(u.maxWidth,g,"clientWidth")||ze,S=Vr(u.maxHeight,g,"clientHeight")||ze,D=function(g,l,r){let a,u;if(void 0===l||void 0===r){const m=js(g);if(m){const E=m.getBoundingClientRect(),S=Ur(m),D=In(S,"border","width"),N=In(S,"padding");l=E.width-N.width-D.width,r=E.height-N.height-D.height,a=Vr(S.maxWidth,m,"clientWidth"),u=Vr(S.maxHeight,m,"clientHeight")}else l=g.clientWidth,r=g.clientHeight}return{width:l,height:r,maxWidth:a||ze,maxHeight:u||ze}}(g,l,r);let{width:N,height:K}=D;if("content-box"===u.boxSizing){const ft=In(u,"border","width"),Ot=In(u,"padding");N-=Ot.width+ft.width,K-=Ot.height+ft.height}return N=Math.max(0,N-m.width),K=Math.max(0,a?Math.floor(N/a):K-m.height),N=Wt(Math.min(N,E,D.maxWidth)),K=Wt(Math.min(K,S,D.maxHeight)),N&&!K&&(K=Wt(N/2)),{width:N,height:K}}(l,r,a,u)}isAttached(l){const r=js(l);return!(!r||!r.isConnected)}}class Fs{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(l){const{x:r,y:a}=this.getProps(["x","y"],l);return{x:r,y:a}}hasValue(){return kt(this.x)&&kt(this.y)}getProps(l,r){const a=this.$animations;if(!r||!a)return this;const u={};return l.forEach(m=>{u[m]=a[m]&&a[m].active()?a[m]._to:this[m]}),u}}Fs.defaults={},Fs.defaultRoutes=void 0;const yc={values:g=>tt(g)?g:""+g,numeric(g,l,r){if(0===g)return"0";const a=this.chart.options.locale;let u,m=g;if(r.length>1){const N=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(N<1e-4||N>1e15)&&(u="scientific"),m=function(g,l){let r=l.length>3?l[2].value-l[1].value:l[1].value-l[0].value;return Math.abs(r)>=1&&g!==Math.floor(g)&&(r=g-Math.floor(g)),r}(g,r)}const E=$t(Math.abs(m)),S=Math.max(Math.min(-1*Math.floor(E),20),0),D={notation:u,minimumFractionDigits:S,maximumFractionDigits:S};return Object.assign(D,this.options.ticks.format),tn(g,a,D)},logarithmic(g,l,r){if(0===g)return"0";const a=g/Math.pow(10,Math.floor($t(g)));return 1===a||2===a||5===a?yc.numeric.call(this,g,l,r):""}};var ml={formatters:yc};function vs(g,l,r,a,u){const m=at(a,0),E=Math.min(at(u,g.length),g.length);let D,N,K,S=0;for(r=Math.ceil(r),u&&(D=u-a,r=D/Math.floor(D/r)),K=m;K<0;)S++,K=Math.round(m+S*r);for(N=Math.max(m,0);N<E;N++)N===K&&(l.push(g[N]),S++,K=Math.round(m+S*r))}yn.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(g,l)=>l.lineWidth,tickColor:(g,l)=>l.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ml.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),yn.route("scale.ticks","color","","color"),yn.route("scale.grid","color","","borderColor"),yn.route("scale.grid","borderColor","","borderColor"),yn.route("scale.title","color","","color"),yn.describe("scale",{_fallback:!1,_scriptable:g=>!g.startsWith("before")&&!g.startsWith("after")&&"callback"!==g&&"parser"!==g,_indexable:g=>"borderDash"!==g&&"tickBorderDash"!==g}),yn.describe("scales",{_fallback:"scale"}),yn.describe("scale.ticks",{_scriptable:g=>"backdropPadding"!==g&&"callback"!==g,_indexable:g=>"backdropPadding"!==g});const Fl=(g,l,r)=>"top"===l||"left"===l?g[l]+r:g[l]-r;function ar(g,l){const r=[],a=g.length/l,u=g.length;let m=0;for(;m<u;m+=a)r.push(g[Math.floor(m)]);return r}function Bl(g,l,r){const a=g.ticks.length,u=Math.min(l,a-1),m=g._startPixel,E=g._endPixel,S=1e-6;let N,D=g.getPixelForTick(u);if(!(r&&(N=1===a?Math.max(D-m,E-D):0===l?(g.getPixelForTick(1)-D)/2:(D-g.getPixelForTick(u-1))/2,D+=u<l?N:-N,D<m-S||D>E+S)))return D}function Ia(g){return g.drawTicks?g.tickLength:0}function vl(g,l){if(!g.display)return 0;const r=Do(g.font,l),a=fo(g.padding);return(tt(g.text)?g.text.length:1)*r.lineHeight+a.height}function eh(g,l,r){let a=nt(g);return(r&&"right"!==l||!r&&"right"===l)&&(a=(g=>"left"===g?"right":"right"===g?"left":g)(a)),a}class Ys extends Fs{constructor(l){super(),this.id=l.id,this.type=l.type,this.options=void 0,this.ctx=l.ctx,this.chart=l.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(l){this.options=l.setContext(this.getContext()),this.axis=l.axis,this._userMin=this.parse(l.min),this._userMax=this.parse(l.max),this._suggestedMin=this.parse(l.suggestedMin),this._suggestedMax=this.parse(l.suggestedMax)}parse(l,r){return l}getUserBounds(){let{_userMin:l,_userMax:r,_suggestedMin:a,_suggestedMax:u}=this;return l=Lt(l,Number.POSITIVE_INFINITY),r=Lt(r,Number.NEGATIVE_INFINITY),a=Lt(a,Number.POSITIVE_INFINITY),u=Lt(u,Number.NEGATIVE_INFINITY),{min:Lt(l,a),max:Lt(r,u),minDefined:ot(l),maxDefined:ot(r)}}getMinMax(l){let E,{min:r,max:a,minDefined:u,maxDefined:m}=this.getUserBounds();if(u&&m)return{min:r,max:a};const S=this.getMatchingVisibleMetas();for(let D=0,N=S.length;D<N;++D)E=S[D].controller.getMinMax(this,l),u||(r=Math.min(r,E.min)),m||(a=Math.max(a,E.max));return r=m&&r>a?a:r,a=u&&r>a?r:a,{min:Lt(r,Lt(a,r)),max:Lt(a,Lt(r,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const l=this.chart.data;return this.options.labels||(this.isHorizontal()?l.xLabels:l.yLabels)||l.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rt(this.options.beforeUpdate,[this])}update(l,r,a){const{beginAtZero:u,grace:m,ticks:E}=this.options,S=E.sampleSize;this.beforeUpdate(),this.maxWidth=l,this.maxHeight=r,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(g,l,r){const{min:a,max:u}=g,m=it(l,(u-a)/2),E=(S,D)=>r&&0===S?0:S+D;return{min:E(a,-Math.abs(m)),max:E(u,m)}}(this,m,u),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const D=S<this.ticks.length;this._convertTicksToLabels(D?ar(this.ticks,S):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),E.display&&(E.autoSkip||"auto"===E.source)&&(this.ticks=function(g,l){const r=g.options.ticks,a=r.maxTicksLimit||function(g){const l=g.options.offset,r=g._tickSize();return Math.floor(Math.min(g._length/r+(l?0:1),g._maxLength/r))}(g),u=r.major.enabled?function(g){const l=[];let r,a;for(r=0,a=g.length;r<a;r++)g[r].major&&l.push(r);return l}(l):[],m=u.length,E=u[0],S=u[m-1],D=[];if(m>a)return function(g,l,r,a){let E,u=0,m=r[0];for(a=Math.ceil(a),E=0;E<g.length;E++)E===m&&(l.push(g[E]),u++,m=r[u*a])}(l,D,u,m/a),D;const N=function(g,l,r){const a=function(g){const l=g.length;let r,a;if(l<2)return!1;for(a=g[0],r=1;r<l;++r)if(g[r]-g[r-1]!==a)return!1;return a}(g),u=l.length/r;if(!a)return Math.max(u,1);const m=function(g){const l=[],r=Math.sqrt(g);let a;for(a=1;a<r;a++)g%a==0&&(l.push(a),l.push(g/a));return r===(0|r)&&l.push(r),l.sort((u,m)=>u-m).pop(),l}(a);for(let E=0,S=m.length-1;E<S;E++){const D=m[E];if(D>u)return D}return Math.max(u,1)}(u,l,a);if(m>0){let K,ft;const Ot=m>1?Math.round((S-E)/(m-1)):null;for(vs(l,D,N,ut(Ot)?0:E-Ot,E),K=0,ft=m-1;K<ft;K++)vs(l,D,N,u[K],u[K+1]);return vs(l,D,N,S,ut(Ot)?l.length:S+Ot),D}return vs(l,D,N),D}(this,this.ticks),this._labelSizes=null),D&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let r,a,l=this.options.reverse;this.isHorizontal()?(r=this.left,a=this.right):(r=this.top,a=this.bottom,l=!l),this._startPixel=r,this._endPixel=a,this._reversePixels=l,this._length=a-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rt(this.options.afterUpdate,[this])}beforeSetDimensions(){rt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rt(this.options.afterSetDimensions,[this])}_callHooks(l){this.chart.notifyPlugins(l,this.getContext()),rt(this.options[l],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(l){const r=this.options.ticks;let a,u,m;for(a=0,u=l.length;a<u;a++)m=l[a],m.label=rt(r.callback,[m.value,a,l],this)}afterTickToLabelConversion(){rt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const l=this.options,r=l.ticks,a=this.ticks.length,u=r.minRotation||0,m=r.maxRotation;let S,D,N,E=u;if(!this._isVisible()||!r.display||u>=m||a<=1||!this.isHorizontal())return void(this.labelRotation=u);const K=this._getLabelSizes(),ft=K.widest.width,Ot=K.highest.height,zt=ue(this.chart.width-ft,0,this.maxWidth);S=l.offset?this.maxWidth/a:zt/(a-1),ft+6>S&&(S=zt/(a-(l.offset?.5:1)),D=this.maxHeight-Ia(l.grid)-r.padding-vl(l.title,this.chart.options.font),N=Math.sqrt(ft*ft+Ot*Ot),E=li(Math.min(Math.asin(ue((K.highest.height+6)/S,-1,1)),Math.asin(ue(D/N,-1,1))-Math.asin(ue(Ot/N,-1,1)))),E=Math.max(u,Math.min(m,E))),this.labelRotation=E}afterCalculateLabelRotation(){rt(this.options.afterCalculateLabelRotation,[this])}beforeFit(){rt(this.options.beforeFit,[this])}fit(){const l={width:0,height:0},{chart:r,options:{ticks:a,title:u,grid:m}}=this,E=this._isVisible(),S=this.isHorizontal();if(E){const D=vl(u,r.options.font);if(S?(l.width=this.maxWidth,l.height=Ia(m)+D):(l.height=this.maxHeight,l.width=Ia(m)+D),a.display&&this.ticks.length){const{first:N,last:K,widest:ft,highest:Ot}=this._getLabelSizes(),zt=2*a.padding,ae=Ze(this.labelRotation),ye=Math.cos(ae),Re=Math.sin(ae);S?l.height=Math.min(this.maxHeight,l.height+(a.mirror?0:Re*ft.width+ye*Ot.height)+zt):l.width=Math.min(this.maxWidth,l.width+(a.mirror?0:ye*ft.width+Re*Ot.height)+zt),this._calculatePadding(N,K,Re,ye)}}this._handleMargins(),S?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=l.height):(this.width=l.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(l,r,a,u){const{ticks:{align:m,padding:E},position:S}=this.options,D=0!==this.labelRotation,N="top"!==S&&"x"===this.axis;if(this.isHorizontal()){const K=this.getPixelForTick(0)-this.left,ft=this.right-this.getPixelForTick(this.ticks.length-1);let Ot=0,zt=0;D?N?(Ot=u*l.width,zt=a*r.height):(Ot=a*l.height,zt=u*r.width):"start"===m?zt=r.width:"end"===m?Ot=l.width:(Ot=l.width/2,zt=r.width/2),this.paddingLeft=Math.max((Ot-K+E)*this.width/(this.width-K),0),this.paddingRight=Math.max((zt-ft+E)*this.width/(this.width-ft),0)}else{let K=r.height/2,ft=l.height/2;"start"===m?(K=0,ft=l.height):"end"===m&&(K=r.height,ft=0),this.paddingTop=K+E,this.paddingBottom=ft+E}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rt(this.options.afterFit,[this])}isHorizontal(){const{axis:l,position:r}=this.options;return"top"===r||"bottom"===r||"x"===l}isFullSize(){return this.options.fullSize}_convertTicksToLabels(l){let r,a;for(this.beforeTickToLabelConversion(),this.generateTickLabels(l),r=0,a=l.length;r<a;r++)ut(l[r].label)&&(l.splice(r,1),a--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let l=this._labelSizes;if(!l){const r=this.options.ticks.sampleSize;let a=this.ticks;r<a.length&&(a=ar(a,r)),this._labelSizes=l=this._computeLabelSizes(a,a.length)}return l}_computeLabelSizes(l,r){const{ctx:a,_longestTextCache:u}=this,m=[],E=[];let N,K,ft,Ot,zt,ae,ye,Re,Oe,ai,Pi,S=0,D=0;for(N=0;N<r;++N){if(Ot=l[N].label,zt=this._resolveTickFontOptions(N),a.font=ae=zt.string,ye=u[ae]=u[ae]||{data:{},gc:[]},Re=zt.lineHeight,Oe=ai=0,ut(Ot)||tt(Ot)){if(tt(Ot))for(K=0,ft=Ot.length;K<ft;++K)Pi=Ot[K],!ut(Pi)&&!tt(Pi)&&(Oe=qn(a,ye.data,ye.gc,Oe,Pi),ai+=Re)}else Oe=qn(a,ye.data,ye.gc,Oe,Ot),ai=Re;m.push(Oe),E.push(ai),S=Math.max(Oe,S),D=Math.max(ai,D)}!function(g,l){Gt(g,r=>{const a=r.gc,u=a.length/2;let m;if(u>l){for(m=0;m<u;++m)delete r.data[a[m]];a.splice(0,u)}})}(u,r);const yi=m.indexOf(S),wi=E.indexOf(D),Wi=zi=>({width:m[zi]||0,height:E[zi]||0});return{first:Wi(0),last:Wi(r-1),widest:Wi(yi),highest:Wi(wi),widths:m,heights:E}}getLabelForValue(l){return l}getPixelForValue(l,r){return NaN}getValueForPixel(l){}getPixelForTick(l){const r=this.ticks;return l<0||l>r.length-1?null:this.getPixelForValue(r[l].value)}getPixelForDecimal(l){this._reversePixels&&(l=1-l);const r=this._startPixel+l*this._length;return ue(this._alignToPixels?as(this.chart,r,0):r,-32768,32767)}getDecimalForPixel(l){const r=(l-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:l,max:r}=this;return l<0&&r<0?r:l>0&&r>0?l:0}getContext(l){const r=this.ticks||[];if(l>=0&&l<r.length){const a=r[l];return a.$context||(a.$context=function(g,l,r){return Ir(g,{tick:r,index:l,type:"tick"})}(this.getContext(),l,a))}return this.$context||(this.$context=function(g,l){return Ir(g,{scale:l,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const l=this.options.ticks,r=Ze(this.labelRotation),a=Math.abs(Math.cos(r)),u=Math.abs(Math.sin(r)),m=this._getLabelSizes(),E=l.autoSkipPadding||0,S=m?m.widest.width+E:0,D=m?m.highest.height+E:0;return this.isHorizontal()?D*a>S*u?S/a:D/u:D*u<S*a?D/a:S/u}_isVisible(){const l=this.options.display;return"auto"!==l?!!l:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(l){const r=this.axis,a=this.chart,u=this.options,{grid:m,position:E}=u,S=m.offset,D=this.isHorizontal(),K=this.ticks.length+(S?1:0),ft=Ia(m),Ot=[],zt=m.setContext(this.getContext()),ae=zt.drawBorder?zt.borderWidth:0,ye=ae/2,Re=function(Yi){return as(a,Yi,ae)};let Oe,ai,Pi,yi,wi,Wi,zi,qi,an,zn,sn,Yn;if("top"===E)Oe=Re(this.bottom),Wi=this.bottom-ft,qi=Oe-ye,zn=Re(l.top)+ye,Yn=l.bottom;else if("bottom"===E)Oe=Re(this.top),zn=l.top,Yn=Re(l.bottom)-ye,Wi=Oe+ye,qi=this.top+ft;else if("left"===E)Oe=Re(this.right),wi=this.right-ft,zi=Oe-ye,an=Re(l.left)+ye,sn=l.right;else if("right"===E)Oe=Re(this.left),an=l.left,sn=Re(l.right)-ye,wi=Oe+ye,zi=this.left+ft;else if("x"===r){if("center"===E)Oe=Re((l.top+l.bottom)/2+.5);else if(lt(E)){const Yi=Object.keys(E)[0];Oe=Re(this.chart.scales[Yi].getPixelForValue(E[Yi]))}zn=l.top,Yn=l.bottom,Wi=Oe+ye,qi=Wi+ft}else if("y"===r){if("center"===E)Oe=Re((l.left+l.right)/2);else if(lt(E)){const Yi=Object.keys(E)[0];Oe=Re(this.chart.scales[Yi].getPixelForValue(E[Yi]))}wi=Oe-ye,zi=wi-ft,an=l.left,sn=l.right}const ko=at(u.ticks.maxTicksLimit,K),Xi=Math.max(1,Math.ceil(K/ko));for(ai=0;ai<K;ai+=Xi){const Yi=m.setContext(this.getContext(ai)),wn=Yi.lineWidth,Ko=Yi.color,no=m.borderDash||[],Wo=Yi.borderDashOffset,Ih=Yi.tickWidth,Oi=Yi.tickColor,fn=Yi.tickBorderDash||[],Ao=Yi.tickBorderDashOffset;Pi=Bl(this,ai,S),void 0!==Pi&&(yi=as(a,Pi,wn),D?wi=zi=an=sn=yi:Wi=qi=zn=Yn=yi,Ot.push({tx1:wi,ty1:Wi,tx2:zi,ty2:qi,x1:an,y1:zn,x2:sn,y2:Yn,width:wn,color:Ko,borderDash:no,borderDashOffset:Wo,tickWidth:Ih,tickColor:Oi,tickBorderDash:fn,tickBorderDashOffset:Ao}))}return this._ticksLength=K,this._borderValue=Oe,Ot}_computeLabelItems(l){const r=this.axis,a=this.options,{position:u,ticks:m}=a,E=this.isHorizontal(),S=this.ticks,{align:D,crossAlign:N,padding:K,mirror:ft}=m,Ot=Ia(a.grid),zt=Ot+K,ae=ft?-K:zt,ye=-Ze(this.labelRotation),Re=[];let Oe,ai,Pi,yi,wi,Wi,zi,qi,an,zn,sn,Yn,ko="middle";if("top"===u)Wi=this.bottom-ae,zi=this._getXAxisLabelAlignment();else if("bottom"===u)Wi=this.top+ae,zi=this._getXAxisLabelAlignment();else if("left"===u){const Yi=this._getYAxisLabelAlignment(Ot);zi=Yi.textAlign,wi=Yi.x}else if("right"===u){const Yi=this._getYAxisLabelAlignment(Ot);zi=Yi.textAlign,wi=Yi.x}else if("x"===r){if("center"===u)Wi=(l.top+l.bottom)/2+zt;else if(lt(u)){const Yi=Object.keys(u)[0];Wi=this.chart.scales[Yi].getPixelForValue(u[Yi])+zt}zi=this._getXAxisLabelAlignment()}else if("y"===r){if("center"===u)wi=(l.left+l.right)/2-zt;else if(lt(u)){const Yi=Object.keys(u)[0];wi=this.chart.scales[Yi].getPixelForValue(u[Yi])}zi=this._getYAxisLabelAlignment(Ot).textAlign}"y"===r&&("start"===D?ko="top":"end"===D&&(ko="bottom"));const Xi=this._getLabelSizes();for(Oe=0,ai=S.length;Oe<ai;++Oe){Pi=S[Oe],yi=Pi.label;const Yi=m.setContext(this.getContext(Oe));qi=this.getPixelForTick(Oe)+m.labelOffset,an=this._resolveTickFontOptions(Oe),zn=an.lineHeight,sn=tt(yi)?yi.length:1;const wn=sn/2,Ko=Yi.color,no=Yi.textStrokeColor,Wo=Yi.textStrokeWidth;let Ih;if(E?(wi=qi,Yn="top"===u?"near"===N||0!==ye?-sn*zn+zn/2:"center"===N?-Xi.highest.height/2-wn*zn+zn:zn/2-Xi.highest.height:"near"===N||0!==ye?zn/2:"center"===N?Xi.highest.height/2-wn*zn:Xi.highest.height-sn*zn,ft&&(Yn*=-1)):(Wi=qi,Yn=(1-sn)*zn/2),Yi.showLabelBackdrop){const Oi=fo(Yi.backdropPadding),fn=Xi.heights[Oe],Ao=Xi.widths[Oe];let Us=Wi+Yn-Oi.top,Dl=wi-Oi.left;switch(ko){case"middle":Us-=fn/2;break;case"bottom":Us-=fn}switch(zi){case"center":Dl-=Ao/2;break;case"right":Dl-=Ao}Ih={left:Dl,top:Us,width:Ao+Oi.width,height:fn+Oi.height,color:Yi.backdropColor}}Re.push({rotation:ye,label:yi,font:an,color:Ko,strokeColor:no,strokeWidth:Wo,textOffset:Yn,textAlign:zi,textBaseline:ko,translation:[wi,Wi],backdrop:Ih})}return Re}_getXAxisLabelAlignment(){const{position:l,ticks:r}=this.options;if(-Ze(this.labelRotation))return"top"===l?"left":"right";let u="center";return"start"===r.align?u="left":"end"===r.align&&(u="right"),u}_getYAxisLabelAlignment(l){const{position:r,ticks:{crossAlign:a,mirror:u,padding:m}}=this.options,S=l+m,D=this._getLabelSizes().widest.width;let N,K;return"left"===r?u?(K=this.right+m,"near"===a?N="left":"center"===a?(N="center",K+=D/2):(N="right",K+=D)):(K=this.right-S,"near"===a?N="right":"center"===a?(N="center",K-=D/2):(N="left",K=this.left)):"right"===r?u?(K=this.left+m,"near"===a?N="right":"center"===a?(N="center",K-=D/2):(N="left",K-=D)):(K=this.left+S,"near"===a?N="left":"center"===a?(N="center",K+=D/2):(N="right",K=this.right)):N="right",{textAlign:N,x:K}}_computeLabelArea(){if(this.options.ticks.mirror)return;const l=this.chart,r=this.options.position;return"left"===r||"right"===r?{top:0,left:this.left,bottom:l.height,right:this.right}:"top"===r||"bottom"===r?{top:this.top,left:0,bottom:this.bottom,right:l.width}:void 0}drawBackground(){const{ctx:l,options:{backgroundColor:r},left:a,top:u,width:m,height:E}=this;r&&(l.save(),l.fillStyle=r,l.fillRect(a,u,m,E),l.restore())}getLineWidthForValue(l){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const u=this.ticks.findIndex(m=>m.value===l);return u>=0?r.setContext(this.getContext(u)).lineWidth:0}drawGrid(l){const r=this.options.grid,a=this.ctx,u=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(l));let m,E;const S=(D,N,K)=>{!K.width||!K.color||(a.save(),a.lineWidth=K.width,a.strokeStyle=K.color,a.setLineDash(K.borderDash||[]),a.lineDashOffset=K.borderDashOffset,a.beginPath(),a.moveTo(D.x,D.y),a.lineTo(N.x,N.y),a.stroke(),a.restore())};if(r.display)for(m=0,E=u.length;m<E;++m){const D=u[m];r.drawOnChartArea&&S({x:D.x1,y:D.y1},{x:D.x2,y:D.y2},D),r.drawTicks&&S({x:D.tx1,y:D.ty1},{x:D.tx2,y:D.ty2},{color:D.tickColor,width:D.tickWidth,borderDash:D.tickBorderDash,borderDashOffset:D.tickBorderDashOffset})}}drawBorder(){const{chart:l,ctx:r,options:{grid:a}}=this,u=a.setContext(this.getContext()),m=a.drawBorder?u.borderWidth:0;if(!m)return;const E=a.setContext(this.getContext(0)).lineWidth,S=this._borderValue;let D,N,K,ft;this.isHorizontal()?(D=as(l,this.left,m)-m/2,N=as(l,this.right,E)+E/2,K=ft=S):(K=as(l,this.top,m)-m/2,ft=as(l,this.bottom,E)+E/2,D=N=S),r.save(),r.lineWidth=u.borderWidth,r.strokeStyle=u.borderColor,r.beginPath(),r.moveTo(D,K),r.lineTo(N,ft),r.stroke(),r.restore()}drawLabels(l){if(!this.options.ticks.display)return;const a=this.ctx,u=this._computeLabelArea();u&&po(a,u);const m=this._labelItems||(this._labelItems=this._computeLabelItems(l));let E,S;for(E=0,S=m.length;E<S;++E){const D=m[E],N=D.font,K=D.label;D.backdrop&&(a.fillStyle=D.backdrop.color,a.fillRect(D.backdrop.left,D.backdrop.top,D.backdrop.width,D.backdrop.height)),Rr(a,K,0,D.textOffset,N,D)}u&&$r(a)}drawTitle(){const{ctx:l,options:{position:r,title:a,reverse:u}}=this;if(!a.display)return;const m=Do(a.font),E=fo(a.padding),S=a.align;let D=m.lineHeight/2;"bottom"===r||"center"===r||lt(r)?(D+=E.bottom,tt(a.text)&&(D+=m.lineHeight*(a.text.length-1))):D+=E.top;const{titleX:N,titleY:K,maxWidth:ft,rotation:Ot}=function(g,l,r,a){const{top:u,left:m,bottom:E,right:S,chart:D}=g,{chartArea:N,scales:K}=D;let Ot,zt,ae,ft=0;const ye=E-u,Re=S-m;if(g.isHorizontal()){if(zt=st(a,m,S),lt(r)){const Oe=Object.keys(r)[0];ae=K[Oe].getPixelForValue(r[Oe])+ye-l}else ae="center"===r?(N.bottom+N.top)/2+ye-l:Fl(g,r,l);Ot=S-m}else{if(lt(r)){const Oe=Object.keys(r)[0];zt=K[Oe].getPixelForValue(r[Oe])-Re+l}else zt="center"===r?(N.left+N.right)/2-Re+l:Fl(g,r,l);ae=st(a,E,u),ft="left"===r?-jt:jt}return{titleX:zt,titleY:ae,maxWidth:Ot,rotation:ft}}(this,D,r,S);Rr(l,a.text,0,0,m,{color:a.color,maxWidth:ft,rotation:Ot,textAlign:eh(S,r,u),textBaseline:"middle",translation:[N,K]})}draw(l){!this._isVisible()||(this.drawBackground(),this.drawGrid(l),this.drawBorder(),this.drawTitle(),this.drawLabels(l))}_layers(){const l=this.options,r=l.ticks&&l.ticks.z||0,a=at(l.grid&&l.grid.z,-1);return this._isVisible()&&this.draw===Ys.prototype.draw?[{z:a,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:a+1,draw:()=>{this.drawBorder()}},{z:r,draw:u=>{this.drawLabels(u)}}]:[{z:r,draw:u=>{this.draw(u)}}]}getMatchingVisibleMetas(l){const r=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",u=[];let m,E;for(m=0,E=r.length;m<E;++m){const S=r[m];S[a]===this.id&&(!l||S.type===l)&&u.push(S)}return u}_resolveTickFontOptions(l){return Do(this.options.ticks.setContext(this.getContext(l)).font)}_maxDigits(){const l=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/l}}class el{constructor(l,r,a){this.type=l,this.scope=r,this.override=a,this.items=Object.create(null)}isForType(l){return Object.prototype.isPrototypeOf.call(this.type.prototype,l.prototype)}register(l){const r=Object.getPrototypeOf(l);let a;var g;"id"in(g=r)&&"defaults"in g&&(a=this.register(r));const u=this.items,m=l.id,E=this.scope+"."+m;if(!m)throw new Error("class does not have id: "+l);return m in u||(u[m]=l,function(g,l,r){const a=de(Object.create(null),[r?yn.get(r):{},yn.get(l),g.defaults]);yn.set(l,a),g.defaultRoutes&&function(g,l){Object.keys(l).forEach(r=>{const a=r.split("."),u=a.pop(),m=[g].concat(a).join("."),E=l[r].split("."),S=E.pop(),D=E.join(".");yn.route(m,u,D,S)})}(l,g.defaultRoutes),g.descriptors&&yn.describe(l,g.descriptors)}(l,E,a),this.override&&yn.override(l.id,l.overrides)),E}get(l){return this.items[l]}unregister(l){const r=this.items,a=l.id,u=this.scope;a in r&&delete r[a],u&&a in yn[u]&&(delete yn[u][a],this.override&&delete Qo[a])}}var Xs=new class{constructor(){this.controllers=new el(Ls,"datasets",!0),this.elements=new el(Fs,"elements"),this.plugins=new el(Object,"plugins"),this.scales=new el(Ys,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...l){this._each("register",l)}remove(...l){this._each("unregister",l)}addControllers(...l){this._each("register",l,this.controllers)}addElements(...l){this._each("register",l,this.elements)}addPlugins(...l){this._each("register",l,this.plugins)}addScales(...l){this._each("register",l,this.scales)}getController(l){return this._get(l,this.controllers,"controller")}getElement(l){return this._get(l,this.elements,"element")}getPlugin(l){return this._get(l,this.plugins,"plugin")}getScale(l){return this._get(l,this.scales,"scale")}removeControllers(...l){this._each("unregister",l,this.controllers)}removeElements(...l){this._each("unregister",l,this.elements)}removePlugins(...l){this._each("unregister",l,this.plugins)}removeScales(...l){this._each("unregister",l,this.scales)}_each(l,r,a){[...r].forEach(u=>{const m=a||this._getRegistryForType(u);a||m.isForType(u)||m===this.plugins&&u.id?this._exec(l,m,u):Gt(u,E=>{const S=a||this._getRegistryForType(E);this._exec(l,S,E)})})}_exec(l,r,a){const u=Ft(l);rt(a["before"+u],[],a),r[l](a),rt(a["after"+u],[],a)}_getRegistryForType(l){for(let r=0;r<this._typedRegistries.length;r++){const a=this._typedRegistries[r];if(a.isForType(l))return a}return this.plugins}_get(l,r,a){const u=r.get(l);if(void 0===u)throw new Error('"'+l+'" is not a registered '+a+".");return u}};class Sc{constructor(){this._init=[]}notify(l,r,a,u){"beforeInit"===r&&(this._init=this._createDescriptors(l,!0),this._notify(this._init,l,"install"));const m=u?this._descriptors(l).filter(u):this._descriptors(l),E=this._notify(m,l,r,a);return"destroy"===r&&(this._notify(m,l,"stop"),this._notify(this._init,l,"uninstall")),E}_notify(l,r,a,u){u=u||{};for(const m of l){const E=m.plugin;if(!1===rt(E[a],[r,u,m.options],E)&&u.cancelable)return!1}return!0}invalidate(){ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(l){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(l);return this._notifyStateChanges(l),r}_createDescriptors(l,r){const a=l&&l.config,u=at(a.options&&a.options.plugins,{}),m=function(g){const l=[],r=Object.keys(Xs.plugins.items);for(let u=0;u<r.length;u++)l.push(Xs.getPlugin(r[u]));const a=g.plugins||[];for(let u=0;u<a.length;u++){const m=a[u];-1===l.indexOf(m)&&l.push(m)}return l}(a);return!1!==u||r?function(g,l,r,a){const u=[],m=g.getContext();for(let E=0;E<l.length;E++){const S=l[E],N=vo(r[S.id],a);null!==N&&u.push({plugin:S,options:bl(g.config,S,N,m)})}return u}(l,m,u,r):[]}_notifyStateChanges(l){const r=this._oldCache||[],a=this._cache,u=(m,E)=>m.filter(S=>!E.some(D=>S.plugin.id===D.plugin.id));this._notify(u(r,a),l,"stop"),this._notify(u(a,r),l,"start")}}function vo(g,l){return l||!1!==g?!0===g?{}:g:null}function bl(g,l,r,a){const u=g.pluginScopeKeys(l),m=g.getOptionScopes(r,u);return g.createResolver(m,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function lc(g,l){return((l.datasets||{})[g]||{}).indexAxis||l.indexAxis||(yn.datasets[g]||{}).indexAxis||"x"}function Ma(g,l){return"x"===g||"y"===g?g:l.axis||function(g){return"top"===g||"bottom"===g?"x":"left"===g||"right"===g?"y":void 0}(l.position)||g.charAt(0).toLowerCase()}function Du(g){const l=g.options||(g.options={});l.plugins=at(l.plugins,{}),l.scales=function(g,l){const r=Qo[g.type]||{scales:{}},a=l.scales||{},u=lc(g.type,l),m=Object.create(null),E=Object.create(null);return Object.keys(a).forEach(S=>{const D=a[S];if(!lt(D))return console.error(`Invalid scale configuration for scale: ${S}`);if(D._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${S}`);const N=Ma(S,D),K=function(g,l){return g===l?"_index_":"_value_"}(N,u),ft=r.scales||{};m[N]=m[N]||S,E[S]=Be(Object.create(null),[{axis:N},D,ft[N],ft[K]])}),g.data.datasets.forEach(S=>{const D=S.type||g.type,N=S.indexAxis||lc(D,l),ft=(Qo[D]||{}).scales||{};Object.keys(ft).forEach(Ot=>{const zt=function(g,l){let r=g;return"_index_"===g?r=l:"_value_"===g&&(r="x"===l?"y":"x"),r}(Ot,N),ae=S[zt+"AxisID"]||m[zt]||zt;E[ae]=E[ae]||Object.create(null),Be(E[ae],[{axis:zt},a[ae],ft[Ot]])})}),Object.keys(E).forEach(S=>{const D=E[S];Be(D,[yn.scales[D.type],yn.scale])}),E}(g,l)}function Iu(g){return(g=g||{}).datasets=g.datasets||[],g.labels=g.labels||[],g}const il=new Map,fa=new Set;function uc(g,l){let r=il.get(g);return r||(r=l(),il.set(g,r),fa.add(r)),r}const Gl=(g,l,r)=>{const a=oi(l,r);void 0!==a&&g.add(a)};class nh{constructor(l){var g;this._config=((g=(g=l)||{}).data=Iu(g.data),Du(g),g),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(l){this._config.type=l}get data(){return this._config.data}set data(l){this._config.data=Iu(l)}get options(){return this._config.options}set options(l){this._config.options=l}get plugins(){return this._config.plugins}update(){const l=this._config;this.clearCache(),Du(l)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(l){return uc(l,()=>[[`datasets.${l}`,""]])}datasetAnimationScopeKeys(l,r){return uc(`${l}.transition.${r}`,()=>[[`datasets.${l}.transitions.${r}`,`transitions.${r}`],[`datasets.${l}`,""]])}datasetElementScopeKeys(l,r){return uc(`${l}-${r}`,()=>[[`datasets.${l}.elements.${r}`,`datasets.${l}`,`elements.${r}`,""]])}pluginScopeKeys(l){const r=l.id;return uc(`${this.type}-plugin-${r}`,()=>[[`plugins.${r}`,...l.additionalOptionScopes||[]]])}_cachedScopes(l,r){const a=this._scopeCache;let u=a.get(l);return(!u||r)&&(u=new Map,a.set(l,u)),u}getOptionScopes(l,r,a){const{options:u,type:m}=this,E=this._cachedScopes(l,a),S=E.get(r);if(S)return S;const D=new Set;r.forEach(K=>{l&&(D.add(l),K.forEach(ft=>Gl(D,l,ft))),K.forEach(ft=>Gl(D,u,ft)),K.forEach(ft=>Gl(D,Qo[m]||{},ft)),K.forEach(ft=>Gl(D,yn,ft)),K.forEach(ft=>Gl(D,xo,ft))});const N=Array.from(D);return 0===N.length&&N.push(Object.create(null)),fa.has(r)&&E.set(r,N),N}chartOptionScopes(){const{options:l,type:r}=this;return[l,Qo[r]||{},yn.datasets[r]||{},{type:r},yn,xo]}resolveNamedOptions(l,r,a,u=[""]){const m={$shared:!0},{resolver:E,subPrefixes:S}=yl(this._resolverCache,l,u);let D=E;(function(g,l){const{isScriptable:r,isIndexable:a}=Ws(g);for(const u of l){const m=r(u),E=a(u),S=(E||m)&&g[u];if(m&&(Xt(S)||nl(S))||E&&tt(S))return!0}return!1})(E,r)&&(m.$shared=!1,D=go(E,a=Xt(a)?a():a,this.createResolver(l,a,S)));for(const N of r)m[N]=D[N];return m}createResolver(l,r,a=[""],u){const{resolver:m}=yl(this._resolverCache,l,a);return lt(r)?go(m,r,void 0,u):m}}function yl(g,l,r){let a=g.get(l);a||(a=new Map,g.set(l,a));const u=r.join();let m=a.get(u);return m||(m={resolver:hs(l,r),subPrefixes:r.filter(S=>!S.toLowerCase().includes("hover"))},a.set(u,m)),m}const nl=g=>lt(g)&&Object.getOwnPropertyNames(g).reduce((l,r)=>l||Xt(g[r]),!1),tu=["top","bottom","left","right","chartArea"];function Va(g,l){return"top"===g||"bottom"===g||-1===tu.indexOf(g)&&"x"===l}function Mu(g,l){return function(r,a){return r[g]===a[g]?r[l]-a[l]:r[g]-a[g]}}function El(g){const l=g.chart,r=l.options.animation;l.notifyPlugins("afterRender"),rt(r&&r.onComplete,[g],l)}function Rc(g){const l=g.chart,r=l.options.animation;rt(r&&r.onProgress,[g],l)}function gt(g){return tr()&&"string"==typeof g?g=document.getElementById(g):g&&g.length&&(g=g[0]),g&&g.canvas&&(g=g.canvas),g}const Tt={},Kt=g=>{const l=gt(g);return Object.values(Tt).filter(r=>r.canvas===l).pop()};function fe(g,l,r){const a=Object.keys(g);for(const u of a){const m=+u;if(m>=l){const E=g[u];delete g[u],(r>0||m>l)&&(g[m+r]=E)}}}class Ce{constructor(l,r){const a=this.config=new nh(r),u=gt(l),m=Kt(u);if(m)throw new Error("Canvas is already in use. Chart with ID '"+m.id+"' must be destroyed before the canvas can be reused.");const E=a.createResolver(a.chartOptionScopes(),this.getContext());var g;this.platform=new(a.platform||(g=u,!tr()||"undefined"!=typeof OffscreenCanvas&&g instanceof OffscreenCanvas?pa:bc)),this.platform.updateConfig(a);const S=this.platform.acquireContext(u,E.aspectRatio),D=S&&S.canvas,N=D&&D.height,K=D&&D.width;this.id=yt(),this.ctx=S,this.canvas=D,this.width=K,this.height=N,this._options=E,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Sc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(g,l){let r;return function(...a){return l?(clearTimeout(r),r=setTimeout(g,l,a)):g.apply(this,a),l}}(ft=>this.update(ft),E.resizeDelay||0),this._dataChanges=[],Tt[this.id]=this,S&&D?(nn.listen(this,"complete",El),nn.listen(this,"progress",Rc),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:l,maintainAspectRatio:r},width:a,height:u,_aspectRatio:m}=this;return ut(l)?r&&m?m:u?a/u:null:l}get data(){return this.config.data}set data(l){this.config.data=l}get options(){return this._options}set options(l){this.config.options=l}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ie(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Fo(this.canvas,this.ctx),this}stop(){return nn.stop(this),this}resize(l,r){nn.running(this)?this._resizeBeforeDraw={width:l,height:r}:this._resize(l,r)}_resize(l,r){const a=this.options,E=this.platform.getMaximumSize(this.canvas,l,r,a.maintainAspectRatio&&this.aspectRatio),S=a.devicePixelRatio||this.platform.getDevicePixelRatio(),D=this.width?"resize":"attach";this.width=E.width,this.height=E.height,this._aspectRatio=this.aspectRatio,Ie(this,S,!0)&&(this.notifyPlugins("resize",{size:E}),rt(a.onResize,[this,E],this),this.attached&&this._doResize(D)&&this.render())}ensureScalesHaveIDs(){Gt(this.options.scales||{},(a,u)=>{a.id=u})}buildOrUpdateScales(){const l=this.options,r=l.scales,a=this.scales,u=Object.keys(a).reduce((E,S)=>(E[S]=!1,E),{});let m=[];r&&(m=m.concat(Object.keys(r).map(E=>{const S=r[E],D=Ma(E,S),N="r"===D,K="x"===D;return{options:S,dposition:N?"chartArea":K?"bottom":"left",dtype:N?"radialLinear":K?"category":"linear"}}))),Gt(m,E=>{const S=E.options,D=S.id,N=Ma(D,S),K=at(S.type,E.dtype);(void 0===S.position||Va(S.position,N)!==Va(E.dposition))&&(S.position=E.dposition),u[D]=!0;let ft=null;D in a&&a[D].type===K?ft=a[D]:(ft=new(Xs.getScale(K))({id:D,type:K,ctx:this.ctx,chart:this}),a[ft.id]=ft),ft.init(S,l)}),Gt(u,(E,S)=>{E||delete a[S]}),Gt(a,E=>{zr.configure(this,E,E.options),zr.addBox(this,E)})}_updateMetasets(){const l=this._metasets,r=this.data.datasets.length,a=l.length;if(l.sort((u,m)=>u.index-m.index),a>r){for(let u=r;u<a;++u)this._destroyDatasetMeta(u);l.splice(r,a-r)}this._sortedMetasets=l.slice(0).sort(Mu("order","index"))}_removeUnreferencedMetasets(){const{_metasets:l,data:{datasets:r}}=this;l.length>r.length&&delete this._stacks,l.forEach((a,u)=>{0===r.filter(m=>m===a._dataset).length&&this._destroyDatasetMeta(u)})}buildOrUpdateControllers(){const l=[],r=this.data.datasets;let a,u;for(this._removeUnreferencedMetasets(),a=0,u=r.length;a<u;a++){const m=r[a];let E=this.getDatasetMeta(a);const S=m.type||this.config.type;if(E.type&&E.type!==S&&(this._destroyDatasetMeta(a),E=this.getDatasetMeta(a)),E.type=S,E.indexAxis=m.indexAxis||lc(S,this.options),E.order=m.order||0,E.index=a,E.label=""+m.label,E.visible=this.isDatasetVisible(a),E.controller)E.controller.updateIndex(a),E.controller.linkScales();else{const D=Xs.getController(S),{datasetElementType:N,dataElementType:K}=yn.datasets[S];Object.assign(D.prototype,{dataElementType:Xs.getElement(K),datasetElementType:N&&Xs.getElement(N)}),E.controller=new D(this,a),l.push(E.controller)}}return this._updateMetasets(),l}_resetElements(){Gt(this.data.datasets,(l,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(l){const r=this.config;r.update();const a=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),u=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:l,cancelable:!0}))return;const m=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let E=0;for(let S=0,D=this.data.datasets.length;S<D;S++){const{controller:N}=this.getDatasetMeta(S),K=!u&&-1===m.indexOf(N);N.buildOrUpdateElements(K),E=Math.max(+N.getMaxOverflow(),E)}E=this._minPadding=a.layout.autoPadding?E:0,this._updateLayout(E),u||Gt(m,S=>{S.reset()}),this._updateDatasets(l),this.notifyPlugins("afterUpdate",{mode:l}),this._layers.sort(Mu("z","_idx")),this._lastEvent&&this._eventHandler(this._lastEvent,!0),this.render()}_updateScales(){Gt(this.scales,l=>{zr.removeBox(this,l)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const l=this.options,r=new Set(Object.keys(this._listeners)),a=new Set(l.events);(!Jt(r,a)||!!this._responsiveListeners!==l.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:l}=this,r=this._getUniformDataChanges()||[];for(const{method:a,start:u,count:m}of r)fe(l,u,"_removeElements"===a?-m:m)}_getUniformDataChanges(){const l=this._dataChanges;if(!l||!l.length)return;this._dataChanges=[];const r=this.data.datasets.length,a=m=>new Set(l.filter(E=>E[0]===m).map((E,S)=>S+","+E.splice(1).join(","))),u=a(0);for(let m=1;m<r;m++)if(!Jt(u,a(m)))return;return Array.from(u).map(m=>m.split(",")).map(m=>({method:m[1],start:+m[2],count:+m[3]}))}_updateLayout(l){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;zr.update(this,this.width,this.height,l);const r=this.chartArea,a=r.width<=0||r.height<=0;this._layers=[],Gt(this.boxes,u=>{a&&"chartArea"===u.position||(u.configure&&u.configure(),this._layers.push(...u._layers()))},this),this._layers.forEach((u,m)=>{u._idx=m}),this.notifyPlugins("afterLayout")}_updateDatasets(l){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:l,cancelable:!0})){for(let r=0,a=this.data.datasets.length;r<a;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,a=this.data.datasets.length;r<a;++r)this._updateDataset(r,Xt(l)?l({datasetIndex:r}):l);this.notifyPlugins("afterDatasetsUpdate",{mode:l})}}_updateDataset(l,r){const a=this.getDatasetMeta(l),u={meta:a,index:l,mode:r,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",u)&&(a.controller._update(r),u.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",u))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(nn.has(this)?this.attached&&!nn.running(this)&&nn.start(this):(this.draw(),El({chart:this})))}draw(){let l;if(this._resizeBeforeDraw){const{width:a,height:u}=this._resizeBeforeDraw;this._resize(a,u),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const r=this._layers;for(l=0;l<r.length&&r[l].z<=0;++l)r[l].draw(this.chartArea);for(this._drawDatasets();l<r.length;++l)r[l].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(l){const r=this._sortedMetasets,a=[];let u,m;for(u=0,m=r.length;u<m;++u){const E=r[u];(!l||E.visible)&&a.push(E)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const l=this.getSortedVisibleDatasetMetas();for(let r=l.length-1;r>=0;--r)this._drawDataset(l[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(l){const r=this.ctx,a=l._clip,u=!a.disabled,m=this.chartArea,E={meta:l,index:l.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",E)&&(u&&po(r,{left:!1===a.left?0:m.left-a.left,right:!1===a.right?this.width:m.right+a.right,top:!1===a.top?0:m.top-a.top,bottom:!1===a.bottom?this.height:m.bottom+a.bottom}),l.controller.draw(),u&&$r(r),E.cancelable=!1,this.notifyPlugins("afterDatasetDraw",E))}getElementsAtEventForMode(l,r,a,u){const m=Rs.modes[r];return"function"==typeof m?m(this,l,a,u):[]}getDatasetMeta(l){const r=this.data.datasets[l],a=this._metasets;let u=a.filter(m=>m&&m._dataset===r).pop();return u||(u={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:l,_dataset:r,_parsed:[],_sorted:!1},a.push(u)),u}getContext(){return this.$context||(this.$context=Ir(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(l){const r=this.data.datasets[l];if(!r)return!1;const a=this.getDatasetMeta(l);return"boolean"==typeof a.hidden?!a.hidden:!r.hidden}setDatasetVisibility(l,r){this.getDatasetMeta(l).hidden=!r}toggleDataVisibility(l){this._hiddenIndices[l]=!this._hiddenIndices[l]}getDataVisibility(l){return!this._hiddenIndices[l]}_updateVisibility(l,r,a){const u=a?"show":"hide",m=this.getDatasetMeta(l),E=m.controller._resolveAnimations(void 0,u);_e(r)?(m.data[r].hidden=!a,this.update()):(this.setDatasetVisibility(l,a),E.update(m,{visible:a}),this.update(S=>S.datasetIndex===l?u:void 0))}hide(l,r){this._updateVisibility(l,r,!1)}show(l,r){this._updateVisibility(l,r,!0)}_destroyDatasetMeta(l){const r=this._metasets[l];r&&r.controller&&r.controller._destroy(),delete this._metasets[l]}_stop(){let l,r;for(this.stop(),nn.remove(this),l=0,r=this.data.datasets.length;l<r;++l)this._destroyDatasetMeta(l)}destroy(){const{canvas:l,ctx:r}=this;this._stop(),this.config.clearCache(),l&&(this.unbindEvents(),Fo(l,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Tt[this.id]}toBase64Image(...l){return this.canvas.toDataURL(...l)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const l=this._listeners,r=this.platform,a=(m,E)=>{r.addEventListener(this,m,E),l[m]=E},u=(m,E,S)=>{m.offsetX=E,m.offsetY=S,this._eventHandler(m)};Gt(this.options.events,m=>a(m,u))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const l=this._responsiveListeners,r=this.platform,a=(D,N)=>{r.addEventListener(this,D,N),l[D]=N},u=(D,N)=>{l[D]&&(r.removeEventListener(this,D,N),delete l[D])},m=(D,N)=>{this.canvas&&this.resize(D,N)};let E;const S=()=>{u("attach",S),this.attached=!0,this.resize(),a("resize",m),a("detach",E)};E=()=>{this.attached=!1,u("resize",m),this._stop(),this._resize(0,0),a("attach",S)},r.isAttached(this.canvas)?S():E()}unbindEvents(){Gt(this._listeners,(l,r)=>{this.platform.removeEventListener(this,r,l)}),this._listeners={},Gt(this._responsiveListeners,(l,r)=>{this.platform.removeEventListener(this,r,l)}),this._responsiveListeners=void 0}updateHoverStyle(l,r,a){const u=a?"set":"remove";let m,E,S,D;for("dataset"===r&&(m=this.getDatasetMeta(l[0].datasetIndex),m.controller["_"+u+"DatasetHoverStyle"]()),S=0,D=l.length;S<D;++S){E=l[S];const N=E&&this.getDatasetMeta(E.datasetIndex).controller;N&&N[u+"HoverStyle"](E.element,E.datasetIndex,E.index)}}getActiveElements(){return this._active||[]}setActiveElements(l){const r=this._active||[],a=l.map(({datasetIndex:m,index:E})=>{const S=this.getDatasetMeta(m);if(!S)throw new Error("No dataset found at index "+m);return{datasetIndex:m,element:S.data[E],index:E}});!bt(a,r)&&(this._active=a,this._updateHoverStyles(a,r))}notifyPlugins(l,r,a){return this._plugins.notify(this,l,r,a)}_updateHoverStyles(l,r,a){const u=this.options.hover,m=(D,N)=>D.filter(K=>!N.some(ft=>K.datasetIndex===ft.datasetIndex&&K.index===ft.index)),E=m(r,l),S=a?l:m(l,r);E.length&&this.updateHoverStyle(E,u.mode,!1),S.length&&u.mode&&this.updateHoverStyle(S,u.mode,!0)}_eventHandler(l,r){const a={event:l,replay:r,cancelable:!0},u=E=>(E.options.events||this.options.events).includes(l.native.type);if(!1===this.notifyPlugins("beforeEvent",a,u))return;const m=this._handleEvent(l,r);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,u),(m||a.changed)&&this.render(),this}_handleEvent(l,r){const{_active:a=[],options:u}=this,m=u.hover;let S=[],D=!1,N=null;return"mouseout"!==l.type&&(S=this.getElementsAtEventForMode(l,m.mode,m,r),N="click"===l.type?this._lastEvent:l),this._lastEvent=null,wr(l,this.chartArea,this._minPadding)&&(rt(u.onHover,[l,S,this],this),("mouseup"===l.type||"click"===l.type||"contextmenu"===l.type)&&rt(u.onClick,[l,S,this],this)),D=!bt(S,a),(D||r)&&(this._active=S,this._updateHoverStyles(S,a,r)),this._lastEvent=N,D}}const Je=()=>Gt(Ce.instances,g=>g._plugins.invalidate()),De=!0;function Ve(g,l,r){const{startAngle:a,pixelMargin:u,x:m,y:E,outerRadius:S,innerRadius:D}=l;let N=u/S;g.beginPath(),g.arc(m,E,S,a-N,r+N),D>u?(N=u/D,g.arc(m,E,D,r+N,a-N,!0)):g.arc(m,E,u,r+jt,a-jt),g.closePath(),g.clip()}function bi(g,l,r,a){return{x:r+g*Math.cos(l),y:a+g*Math.sin(l)}}function bn(g,l,r,a,u){const{x:m,y:E,startAngle:S,pixelMargin:D,innerRadius:N}=l,K=Math.max(l.outerRadius+a+r-D,0),ft=N>0?N+a+r+D:0;let Ot=0;const zt=u-S;if(a){const no=((N>0?N-a:0)+(K>0?K-a:0))/2;Ot=(zt-(0!==no?zt*no/(no+a):zt))/2}const ye=(zt-Math.max(.001,zt*K-r/Rt)/K)/2,Re=S+ye+Ot,Oe=u-ye-Ot,{outerStart:ai,outerEnd:Pi,innerStart:yi,innerEnd:wi}=function(g,l,r,a){const u=function(g){return $s(g,["outerStart","outerEnd","innerStart","innerEnd"])}(g.options.borderRadius),m=(r-l)/2,E=Math.min(m,a*l/2),S=D=>{const N=(r-Math.min(m,D))*a/2;return ue(D,0,Math.min(m,N))};return{outerStart:S(u.outerStart),outerEnd:S(u.outerEnd),innerStart:ue(u.innerStart,0,E),innerEnd:ue(u.innerEnd,0,E)}}(l,ft,K,Oe-Re),Wi=K-ai,zi=K-Pi,qi=Re+ai/Wi,an=Oe-Pi/zi,zn=ft+yi,sn=ft+wi,Yn=Re+yi/zn,ko=Oe-wi/sn;if(g.beginPath(),g.arc(m,E,K,qi,an),Pi>0){const wn=bi(zi,an,m,E);g.arc(wn.x,wn.y,Pi,an,Oe+jt)}const Xi=bi(sn,Oe,m,E);if(g.lineTo(Xi.x,Xi.y),wi>0){const wn=bi(sn,ko,m,E);g.arc(wn.x,wn.y,wi,Oe+jt,ko+Math.PI)}if(g.arc(m,E,ft,Oe-wi/ft,Re+yi/ft,!0),yi>0){const wn=bi(zn,Yn,m,E);g.arc(wn.x,wn.y,yi,Yn+Math.PI,Re-jt)}const Yi=bi(Wi,Re,m,E);if(g.lineTo(Yi.x,Yi.y),ai>0){const wn=bi(Wi,qi,m,E);g.arc(wn.x,wn.y,ai,Re-jt,qi)}g.closePath()}Object.defineProperties(Ce,{defaults:{enumerable:De,value:yn},instances:{enumerable:De,value:Tt},overrides:{enumerable:De,value:Qo},registry:{enumerable:De,value:Xs},version:{enumerable:De,value:"3.6.2"},getChart:{enumerable:De,value:Kt},register:{enumerable:De,value:(...g)=>{Xs.add(...g),Je()}},unregister:{enumerable:De,value:(...g)=>{Xs.remove(...g),Je()}}});class lo extends Fs{constructor(l){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,l&&Object.assign(this,l)}inRange(l,r,a){const u=this.getProps(["x","y"],a),{angle:m,distance:E}=function(g,l){const r=l.x-g.x,a=l.y-g.y,u=Math.sqrt(r*r+a*a);let m=Math.atan2(a,r);return m<-.5*Rt&&(m+=Pt),{angle:m,distance:u}}(u,{x:l,y:r}),{startAngle:S,endAngle:D,innerRadius:N,outerRadius:K,circumference:ft}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),Ot=this.options.spacing/2,ae=at(ft,D-S)>=Pt||ri(m,S,D),ye=ti(E,N+Ot,K+Ot);return ae&&ye}getCenterPoint(l){const{x:r,y:a,startAngle:u,endAngle:m,innerRadius:E,outerRadius:S}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],l),{offset:D,spacing:N}=this.options,K=(u+m)/2,ft=(E+S+N+D)/2;return{x:r+Math.cos(K)*ft,y:a+Math.sin(K)*ft}}tooltipPosition(l){return this.getCenterPoint(l)}draw(l){const{options:r,circumference:a}=this,u=(r.offset||0)/2,m=(r.spacing||0)/2;if(this.pixelMargin="inner"===r.borderAlign?.33:0,this.fullCircles=a>Pt?Math.floor(a/Pt):0,0===a||this.innerRadius<0||this.outerRadius<0)return;l.save();let E=0;if(u){E=u/2;const D=(this.startAngle+this.endAngle)/2;l.translate(Math.cos(D)*E,Math.sin(D)*E),this.circumference>=Rt&&(E=u)}l.fillStyle=r.backgroundColor,l.strokeStyle=r.borderColor;const S=function(g,l,r,a){const{fullCircles:u,startAngle:m,circumference:E}=l;let S=l.endAngle;if(u){bn(g,l,r,a,m+Pt);for(let D=0;D<u;++D)g.fill();isNaN(E)||(S=m+E%Pt,E%Pt==0&&(S+=Pt))}return bn(g,l,r,a,S),g.fill(),S}(l,this,E,m);(function(g,l,r,a,u){const{options:m}=l,E="inner"===m.borderAlign;!m.borderWidth||(E?(g.lineWidth=2*m.borderWidth,g.lineJoin="round"):(g.lineWidth=m.borderWidth,g.lineJoin="bevel"),l.fullCircles&&function(g,l,r){const{x:a,y:u,startAngle:m,pixelMargin:E,fullCircles:S}=l,D=Math.max(l.outerRadius-E,0),N=l.innerRadius+E;let K;for(r&&Ve(g,l,m+Pt),g.beginPath(),g.arc(a,u,N,m+Pt,m,!0),K=0;K<S;++K)g.stroke();for(g.beginPath(),g.arc(a,u,D,m,m+Pt),K=0;K<S;++K)g.stroke()}(g,l,E),E&&Ve(g,l,u),bn(g,l,r,a,u),g.stroke())})(l,this,E,m,S),l.restore()}}function eo(g,l,r=l){g.lineCap=at(r.borderCapStyle,l.borderCapStyle),g.setLineDash(at(r.borderDash,l.borderDash)),g.lineDashOffset=at(r.borderDashOffset,l.borderDashOffset),g.lineJoin=at(r.borderJoinStyle,l.borderJoinStyle),g.lineWidth=at(r.borderWidth,l.borderWidth),g.strokeStyle=at(r.borderColor,l.borderColor)}function bo(g,l,r){g.lineTo(r.x,r.y)}function co(g,l,r={}){const a=g.length,{start:u=0,end:m=a-1}=r,{start:E,end:S}=l,D=Math.max(u,E),N=Math.min(m,S);return{count:a,start:D,loop:l.loop,ilen:N<D&&!(u<E&&m<E||u>S&&m>S)?a+N-D:N-D}}function ys(g,l,r,a){const{points:u,options:m}=l,{count:E,start:S,loop:D,ilen:N}=co(u,r,a),K=function(g){return g.stepped?Js:g.tension||"monotone"===g.cubicInterpolationMode?aa:bo}(m);let zt,ae,ye,{move:ft=!0,reverse:Ot}=a||{};for(zt=0;zt<=N;++zt)ae=u[(S+(Ot?N-zt:zt))%E],!ae.skip&&(ft?(g.moveTo(ae.x,ae.y),ft=!1):K(g,ye,ae,Ot,m.stepped),ye=ae);return D&&(ae=u[(S+(Ot?N:0))%E],K(g,ye,ae,Ot,m.stepped)),!!D}function rs(g,l,r,a){const u=l.points,{count:m,start:E,ilen:S}=co(u,r,a),{move:D=!0,reverse:N}=a||{};let Ot,zt,ae,ye,Re,Oe,K=0,ft=0;const ai=yi=>(E+(N?S-yi:yi))%m,Pi=()=>{ye!==Re&&(g.lineTo(K,Re),g.lineTo(K,ye),g.lineTo(K,Oe))};for(D&&(zt=u[ai(0)],g.moveTo(zt.x,zt.y)),Ot=0;Ot<=S;++Ot){if(zt=u[ai(Ot)],zt.skip)continue;const yi=zt.x,wi=zt.y,Wi=0|yi;Wi===ae?(wi<ye?ye=wi:wi>Re&&(Re=wi),K=(ft*K+yi)/++ft):(Pi(),g.lineTo(yi,wi),ae=Wi,ft=0,ye=Re=wi),Oe=wi}Pi()}function kr(g){const l=g.options;return g._decimated||g._loop||l.tension||"monotone"===l.cubicInterpolationMode||l.stepped||l.borderDash&&l.borderDash.length?ys:rs}lo.id="arc",lo.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},lo.defaultRoutes={backgroundColor:"backgroundColor"};const dd="function"==typeof Path2D;let hc=(()=>{class g extends Fs{constructor(r){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,r&&Object.assign(this,r)}updateControlPoints(r,a){const u=this.options;!u.tension&&"monotone"!==u.cubicInterpolationMode||u.stepped||this._pointsUpdated||(Zs(this._points,u,r,u.spanGaps?this._loop:this._fullLoop,a),this._pointsUpdated=!0)}set points(r){this._points=r,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(g,l){const r=g.points,a=g.options.spanGaps,u=r.length;if(!u)return[];const m=!!g._loop,{start:E,end:S}=function(g,l,r,a){let u=0,m=l-1;if(r&&!a)for(;u<l&&!g[u].skip;)u++;for(;u<l&&g[u].skip;)u++;for(u%=l,r&&(m+=u);m>u&&g[m%l].skip;)m--;return m%=l,{start:u,end:m}}(r,u,m,a);return function(g,l,r,a){return a&&a.setContext&&r?function(g,l,r,a){const u=g._chart.getContext(),m=wa(g.options),{_datasetIndex:E,options:{spanGaps:S}}=g,D=r.length,N=[];let K=m,ft=l[0].start,Ot=ft;function zt(ae,ye,Re,Oe){const ai=S?-1:1;if(ae!==ye){for(ae+=D;r[ae%D].skip;)ae-=ai;for(;r[ye%D].skip;)ye+=ai;ae%D!=ye%D&&(N.push({start:ae%D,end:ye%D,loop:Re,style:Oe}),K=Oe,ft=ye%D)}}for(const ae of l){ft=S?ft:ae.start;let Re,ye=r[ft%D];for(Ot=ft+1;Ot<=ae.end;Ot++){const Oe=r[Ot%D];Re=wa(a.setContext(Ir(u,{type:"segment",p0:ye,p1:Oe,p0DataIndex:(Ot-1)%D,p1DataIndex:Ot%D,datasetIndex:E}))),ua(Re,K)&&zt(ft,Ot-1,ae.loop,K),ye=Oe,K=Re}ft<Ot-1&&zt(ft,Ot-1,ae.loop,K)}return N}(g,l,r,a):l}(g,!0===a?[{start:E,end:S,loop:m}]:function(g,l,r,a){const u=g.length,m=[];let D,E=l,S=g[l];for(D=l+1;D<=r;++D){const N=g[D%u];N.skip||N.stop?S.skip||(m.push({start:l%u,end:(D-1)%u,loop:a=!1}),l=E=N.stop?D:null):(E=D,S.skip&&(l=D)),S=N}return null!==E&&m.push({start:l%u,end:E%u,loop:a}),m}(r,E,S<E?S+u:S,!!g._fullLoop&&0===E&&S===u-1),r,l)}(this,this.options.segment))}first(){const r=this.segments;return r.length&&this.points[r[0].start]}last(){const r=this.segments,u=r.length;return u&&this.points[r[u-1].end]}interpolate(r,a){const u=this.options,m=r[a],E=this.points,S=Os(this,{property:a,start:m,end:m});if(!S.length)return;const D=[],N=function(g){return g.stepped?Bi:g.tension||"monotone"===g.cubicInterpolationMode?Gi:mi}(u);let K,ft;for(K=0,ft=S.length;K<ft;++K){const{start:Ot,end:zt}=S[K],ae=E[Ot],ye=E[zt];if(ae===ye){D.push(ae);continue}const Oe=N(ae,ye,Math.abs((m-ae[a])/(ye[a]-ae[a])),u.stepped);Oe[a]=r[a],D.push(Oe)}return 1===D.length?D[0]:D}pathSegment(r,a,u){return kr(this)(r,this,a,u)}path(r,a,u){const m=this.segments,E=kr(this);let S=this._loop;a=a||0,u=u||this.points.length-a;for(const D of m)S&=E(r,this,D,{start:a,end:a+u-1});return!!S}draw(r,a,u,m){(this.points||[]).length&&(this.options||{}).borderWidth&&(r.save(),function(g,l,r,a){dd&&!l.options.segment?function(g,l,r,a){let u=l._path;u||(u=l._path=new Path2D,l.path(u,r,a)&&u.closePath()),eo(g,l.options),g.stroke(u)}(g,l,r,a):function(g,l,r,a){const{segments:u,options:m}=l,E=kr(l);for(const S of u)eo(g,m,S.style),g.beginPath(),E(g,l,S,{start:r,end:r+a-1})&&g.closePath(),g.stroke()}(g,l,r,a)}(r,this,u,m),r.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return g.id="line",g.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},g.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},g.descriptors={_scriptable:!0,_indexable:l=>"borderDash"!==l&&"fill"!==l},g})();function Dc(g,l,r,a){const u=g.options,{[r]:m}=g.getProps([r],a);return Math.abs(l-m)<u.radius+u.hitRadius}let oa=(()=>{class g extends Fs{constructor(r){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,a,u){const m=this.options,{x:E,y:S}=this.getProps(["x","y"],u);return Math.pow(r-E,2)+Math.pow(a-S,2)<Math.pow(m.hitRadius+m.radius,2)}inXRange(r,a){return Dc(this,r,"x",a)}inYRange(r,a){return Dc(this,r,"y",a)}getCenterPoint(r){const{x:a,y:u}=this.getProps(["x","y"],r);return{x:a,y:u}}size(r){let a=(r=r||this.options||{}).radius||0;return a=Math.max(a,a&&r.hoverRadius||0),2*(a+(a&&r.borderWidth||0))}draw(r,a){const u=this.options;this.skip||u.radius<.1||!wr(this,a,this.size(u)/2)||(r.strokeStyle=u.borderColor,r.lineWidth=u.borderWidth,r.fillStyle=u.backgroundColor,Jr(r,u,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}return g.id="point",g.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},g.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},g})();function oh(g,l){const{x:r,y:a,base:u,width:m,height:E}=g.getProps(["x","y","base","width","height"],l);let S,D,N,K,ft;return g.horizontal?(ft=E/2,S=Math.min(r,u),D=Math.max(r,u),N=a-ft,K=a+ft):(ft=m/2,S=r-ft,D=r+ft,N=Math.min(a,u),K=Math.max(a,u)),{left:S,top:N,right:D,bottom:K}}function Ga(g,l,r,a){return g?0:ue(l,r,a)}function Ic(g,l,r,a){const u=null===l,m=null===r,S=g&&!(u&&m)&&oh(g,a);return S&&(u||ti(l,S.left,S.right))&&(m||ti(r,S.top,S.bottom))}function Mc(g,l){g.rect(l.x,l.y,l.w,l.h)}function ol(g,l,r={}){const a=g.x!==r.x?-l:0,u=g.y!==r.y?-l:0;return{x:g.x+a,y:g.y+u,w:g.w+((g.x+g.w!==r.x+r.w?l:0)-a),h:g.h+((g.y+g.h!==r.y+r.h?l:0)-u),radius:g.radius}}class Wl extends Fs{constructor(l){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,l&&Object.assign(this,l)}draw(l){const{inflateAmount:r,options:{borderColor:a,backgroundColor:u}}=this,{inner:m,outer:E}=function(g){const l=oh(g),r=l.right-l.left,a=l.bottom-l.top,u=function(g,l,r){const u=g.borderSkipped,m=ls(g.options.borderWidth);return{t:Ga(u.top,m.top,0,r),r:Ga(u.right,m.right,0,l),b:Ga(u.bottom,m.bottom,0,r),l:Ga(u.left,m.left,0,l)}}(g,r/2,a/2),m=function(g,l,r){const{enableBorderRadius:a}=g.getProps(["enableBorderRadius"]),u=g.options.borderRadius,m=zo(u),E=Math.min(l,r),S=g.borderSkipped,D=a||lt(u);return{topLeft:Ga(!D||S.top||S.left,m.topLeft,0,E),topRight:Ga(!D||S.top||S.right,m.topRight,0,E),bottomLeft:Ga(!D||S.bottom||S.left,m.bottomLeft,0,E),bottomRight:Ga(!D||S.bottom||S.right,m.bottomRight,0,E)}}(g,r/2,a/2);return{outer:{x:l.left,y:l.top,w:r,h:a,radius:m},inner:{x:l.left+u.l,y:l.top+u.t,w:r-u.l-u.r,h:a-u.t-u.b,radius:{topLeft:Math.max(0,m.topLeft-Math.max(u.t,u.l)),topRight:Math.max(0,m.topRight-Math.max(u.t,u.r)),bottomLeft:Math.max(0,m.bottomLeft-Math.max(u.b,u.l)),bottomRight:Math.max(0,m.bottomRight-Math.max(u.b,u.r))}}}}(this),S=(g=E.radius).topLeft||g.topRight||g.bottomLeft||g.bottomRight?Dr:Mc;var g;l.save(),(E.w!==m.w||E.h!==m.h)&&(l.beginPath(),S(l,ol(E,r,m)),l.clip(),S(l,ol(m,-r,E)),l.fillStyle=a,l.fill("evenodd")),l.beginPath(),S(l,ol(m,r)),l.fillStyle=u,l.fill(),l.restore()}inRange(l,r,a){return Ic(this,l,r,a)}inXRange(l,r){return Ic(this,l,null,r)}inYRange(l,r){return Ic(this,null,l,r)}getCenterPoint(l){const{x:r,y:a,base:u,horizontal:m}=this.getProps(["x","y","base","horizontal"],l);return{x:m?(r+u)/2:r,y:m?a:(a+u)/2}}getRange(l){return"x"===l?this.width/2:this.height/2}}Wl.id="bar",Wl.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},Wl.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Ou=Object.freeze({__proto__:null,ArcElement:lo,LineElement:hc,PointElement:oa,BarElement:Wl});function ah(g){if(g._decimated){const l=g._data;delete g._decimated,delete g._data,Object.defineProperty(g,"data",{value:l})}}function nu(g){g.data.datasets.forEach(l=>{ah(l)})}var xh={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(g,l,r)=>{if(!r.enabled)return void nu(g);const a=g.width;g.data.datasets.forEach((u,m)=>{const{_data:E,indexAxis:S}=u,D=g.getDatasetMeta(m),N=E||u.data;if("y"===Io([S,g.options.indexAxis])||"line"!==D.type)return;const K=g.scales[D.xAxisID];if("linear"!==K.type&&"time"!==K.type||g.options.parsing)return;let ae,{start:ft,count:Ot}=function(g,l){const r=l.length;let u,a=0;const{iScale:m}=g,{min:E,max:S,minDefined:D,maxDefined:N}=m.getUserBounds();return D&&(a=ue(qo(l,m.axis,E).lo,0,r-1)),u=N?ue(qo(l,m.axis,S).hi+1,a,r)-a:r-a,{start:a,count:u}}(D,N);if(Ot<=(r.threshold||4*a))ah(u);else{switch(ut(E)&&(u._data=N,delete u.data,Object.defineProperty(u,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(ye){this._data=ye}})),r.algorithm){case"lttb":ae=function(g,l,r,a,u){const m=u.samples||a;if(m>=r)return g.slice(l,l+r);const E=[],S=(r-2)/(m-2);let D=0;const N=l+r-1;let ft,Ot,zt,ae,ye,K=l;for(E[D++]=g[K],ft=0;ft<m-2;ft++){let ai,Re=0,Oe=0;const Pi=Math.floor((ft+1)*S)+1+l,yi=Math.min(Math.floor((ft+2)*S)+1,r)+l,wi=yi-Pi;for(ai=Pi;ai<yi;ai++)Re+=g[ai].x,Oe+=g[ai].y;Re/=wi,Oe/=wi;const Wi=Math.floor(ft*S)+1+l,zi=Math.min(Math.floor((ft+1)*S)+1,r)+l,{x:qi,y:an}=g[K];for(zt=ae=-1,ai=Wi;ai<zi;ai++)ae=.5*Math.abs((qi-Re)*(g[ai].y-an)-(qi-g[ai].x)*(Oe-an)),ae>zt&&(zt=ae,Ot=g[ai],ye=ai);E[D++]=Ot,K=ye}return E[D++]=g[N],E}(N,ft,Ot,a,r);break;case"min-max":ae=function(g,l,r,a){let E,S,D,N,K,ft,Ot,zt,ae,ye,u=0,m=0;const Re=[],ai=g[l].x,yi=g[l+r-1].x-ai;for(E=l;E<l+r;++E){S=g[E],D=(S.x-ai)/yi*a,N=S.y;const wi=0|D;if(wi===K)N<ae?(ae=N,ft=E):N>ye&&(ye=N,Ot=E),u=(m*u+S.x)/++m;else{const Wi=E-1;if(!ut(ft)&&!ut(Ot)){const zi=Math.min(ft,Ot),qi=Math.max(ft,Ot);zi!==zt&&zi!==Wi&&Re.push(Sm(Cm({},g[zi]),{x:u})),qi!==zt&&qi!==Wi&&Re.push(Sm(Cm({},g[qi]),{x:u}))}E>0&&Wi!==zt&&Re.push(g[Wi]),Re.push(S),K=wi,m=0,ae=ye=N,ft=Ot=zt=E}}return Re}(N,ft,Ot,a);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}u._decimated=ae}})},destroy(g){nu(g)}};function Nh(g,l,r){const a=function(g){const l=g.options,r=l.fill;let a=at(r&&r.target,r);return void 0===a&&(a=!!l.backgroundColor),!1!==a&&null!==a&&(!0===a?"origin":a)}(g);if(lt(a))return!isNaN(a.value)&&a;let u=parseFloat(a);return ot(u)&&Math.floor(u)===u?(("-"===a[0]||"+"===a[0])&&(u=l+u),!(u===l||u<0||u>=r)&&u):["origin","start","end","stack","shape"].indexOf(a)>=0&&a}class ou{constructor(l){this.x=l.x,this.y=l.y,this.radius=l.radius}pathSegment(l,r,a){const{x:u,y:m,radius:E}=this;return l.arc(u,m,E,(r=r||{start:0,end:Pt}).end,r.start,!0),!a.bounds}interpolate(l){const{x:r,y:a,radius:u}=this,m=l.angle;return{x:r+Math.cos(m)*u,y:a+Math.sin(m)*u,angle:m}}}function Ds(g,l,r){for(;l>g;l--){const a=r[l];if(!isNaN(a.x)&&!isNaN(a.y))break}return l}function Es(g,l,r){const a=[];for(let u=0;u<r.length;u++){const m=r[u],{first:E,last:S,point:D}=Ac(m,l,"x");if(!(!D||E&&S))if(E)a.unshift(D);else if(g.push(D),!S)break}g.push(...a)}function Ac(g,l,r){const a=g.interpolate(l,r);if(!a)return{};const u=a[r],m=g.segments,E=g.points;let S=!1,D=!1;for(let N=0;N<m.length;N++){const K=m[N],ft=E[K.start][r],Ot=E[K.end][r];if(ti(u,ft,Ot)){S=u===ft,D=u===Ot;break}}return{first:S,last:D,point:a}}function Lu(g){const{chart:l,fill:r,line:a}=g;if(ot(r))return function(g,l){const r=g.getDatasetMeta(l);return r&&g.isDatasetVisible(l)?r.dataset:null}(l,r);if("stack"===r)return function(g){const{scale:l,index:r,line:a}=g,u=[],m=a.segments,E=a.points,S=function(g,l){const r=[],a=g.getMatchingVisibleMetas("line");for(let u=0;u<a.length;u++){const m=a[u];if(m.index===l)break;m.hidden||r.unshift(m.dataset)}return r}(l,r);S.push(uh({x:null,y:l.bottom},a));for(let D=0;D<m.length;D++){const N=m[D];for(let K=N.start;K<=N.end;K++)Es(u,E[K],S)}return new hc({points:u,options:{}})}(g);if("shape"===r)return!0;const u=function(g){return(g.scale||{}).getPointPositionForValue?function(g){const{scale:l,fill:r}=g,a=l.options,u=l.getLabels().length,m=[],E=a.reverse?l.max:l.min;let D,N,K;if(K="start"===r?E:"end"===r?a.reverse?l.min:l.max:lt(r)?r.value:l.getBaseValue(),a.grid.circular)return N=l.getPointPositionForValue(0,E),new ou({x:N.x,y:N.y,radius:l.getDistanceFromCenterForValue(K)});for(D=0;D<u;++D)m.push(l.getPointPositionForValue(D,K));return m}(g):function(g){const{scale:l={},fill:r}=g;let u,a=null;return"start"===r?a=l.bottom:"end"===r?a=l.top:lt(r)?a=l.getPixelForValue(r.value):l.getBasePixel&&(a=l.getBasePixel()),ot(a)?(u=l.isHorizontal(),{x:u?a:null,y:u?null:a}):null}(g)}(g);return u instanceof ou?u:uh(u,a)}function uh(g,l){let r=[],a=!1;return tt(g)?(a=!0,r=g):r=function(g,l){const{x:r=null,y:a=null}=g||{},u=l.points,m=[];return l.segments.forEach(({start:E,end:S})=>{S=Ds(E,S,u);const D=u[E],N=u[S];null!==a?(m.push({x:D.x,y:a}),m.push({x:N.x,y:a})):null!==r&&(m.push({x:r,y:D.y}),m.push({x:r,y:N.y}))}),m}(g,l),r.length?new hc({points:r,options:{tension:0},_loop:a,_fullLoop:a}):null}function jl(g,l,r){let u=g[l].fill;const m=[l];let E;if(!r)return u;for(;!1!==u&&-1===m.indexOf(u);){if(!ot(u))return u;if(E=g[u],!E)return!1;if(E.visible)return u;m.push(u),u=E.fill}return!1}function Oc(g,l,r){g.beginPath(),l.path(g),g.lineTo(l.last().x,r),g.lineTo(l.first().x,r),g.closePath(),g.clip()}function hh(g,l,r,a){if(a)return;let u=l[g],m=r[g];return"angle"===g&&(u=We(u),m=We(m)),{property:g,start:u,end:m}}function Nu(g,l,r,a){return g&&l?a(g[r],l[r]):g?g[r]:l?l[r]:0}function Fh(g,l,r){const{top:a,bottom:u}=l.chart.chartArea,{property:m,start:E,end:S}=r||{};"x"===m&&(g.beginPath(),g.rect(E,a,S-E,u-a),g.clip())}function xc(g,l,r,a){const u=l.interpolate(r,a);u&&g.lineTo(u.x,u.y)}function Pu(g,l){const{line:r,target:a,property:u,color:m,scale:E}=l,S=function(g,l,r){const a=g.segments,u=g.points,m=l.points,E=[];for(const S of a){let{start:D,end:N}=S;N=Ds(D,N,u);const K=hh(r,u[D],u[N],S.loop);if(!l.segments){E.push({source:S,target:K,start:u[D],end:u[N]});continue}const ft=Os(l,K);for(const Ot of ft){const zt=hh(r,m[Ot.start],m[Ot.end],Ot.loop),ae=Uo(S,u,zt);for(const ye of ae)E.push({source:ye,target:Ot,start:{[r]:Nu(K,zt,"start",Math.max)},end:{[r]:Nu(K,zt,"end",Math.min)}})}}return E}(r,a,u);for(const{source:D,target:N,start:K,end:ft}of S){const{style:{backgroundColor:Ot=m}={}}=D,zt=!0!==a;g.save(),g.fillStyle=Ot,Fh(g,E,zt&&hh(u,K,ft)),g.beginPath();const ae=!!r.pathSegment(g,D);let ye;if(zt){ae?g.closePath():xc(g,a,ft,u);const Re=!!a.pathSegment(g,N,{move:ae,reverse:!0});ye=ae&&Re,ye||xc(g,a,K,u)}g.closePath(),g.fill(ye?"evenodd":"nonzero"),g.restore()}}function ru(g,l,r){const a=Lu(l),{line:u,scale:m,axis:E}=l,S=u.options,D=S.fill,N=S.backgroundColor,{above:K=N,below:ft=N}=D||{};a&&u.points.length&&(po(g,r),function(g,l){const{line:r,target:a,above:u,below:m,area:E,scale:S}=l,D=r._loop?"angle":l.axis;g.save(),"x"===D&&m!==u&&(Oc(g,a,E.top),Pu(g,{line:r,target:a,color:u,scale:S,property:D}),g.restore(),g.save(),Oc(g,a,E.bottom)),Pu(g,{line:r,target:a,color:m,scale:S,property:D}),g.restore()}(g,{line:u,target:a,above:K,below:ft,area:r,scale:m,axis:E}),$r(g))}var Bh={id:"filler",afterDatasetsUpdate(g,l,r){const a=(g.data.datasets||[]).length,u=[];let m,E,S,D;for(E=0;E<a;++E)m=g.getDatasetMeta(E),S=m.dataset,D=null,S&&S.options&&S instanceof hc&&(D={visible:g.isDatasetVisible(E),index:E,fill:Nh(S,E,a),chart:g,axis:m.controller.options.indexAxis,scale:m.vScale,line:S}),m.$filler=D,u.push(D);for(E=0;E<a;++E)D=u[E],D&&!1!==D.fill&&(D.fill=jl(u,E,r.propagate))},beforeDraw(g,l,r){const a="beforeDraw"===r.drawTime,u=g.getSortedVisibleDatasetMetas(),m=g.chartArea;for(let E=u.length-1;E>=0;--E){const S=u[E].$filler;!S||(S.line.updateControlPoints(m,S.axis),a&&ru(g.ctx,S,m))}},beforeDatasetsDraw(g,l,r){if("beforeDatasetsDraw"!==r.drawTime)return;const a=g.getSortedVisibleDatasetMetas();for(let u=a.length-1;u>=0;--u){const m=a[u].$filler;m&&ru(g.ctx,m,g.chartArea)}},beforeDatasetDraw(g,l,r){const a=l.meta.$filler;!a||!1===a.fill||"beforeDatasetDraw"!==r.drawTime||ru(g.ctx,a,g.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Hh=(g,l)=>{let{boxHeight:r=l,boxWidth:a=l}=g;return g.usePointStyle&&(r=Math.min(r,l),a=Math.min(a,l)),{boxWidth:a,boxHeight:r,itemHeight:Math.max(l,r)}};class Bu extends Fs{constructor(l){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,r,a){this.maxWidth=l,this.maxHeight=r,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const l=this.options.labels||{};let r=rt(l.generateLabels,[this.chart],this)||[];l.filter&&(r=r.filter(a=>l.filter(a,this.chart.data))),l.sort&&(r=r.sort((a,u)=>l.sort(a,u,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:l,ctx:r}=this;if(!l.display)return void(this.width=this.height=0);const a=l.labels,u=Do(a.font),m=u.size,E=this._computeTitleHeight(),{boxWidth:S,itemHeight:D}=Hh(a,m);let N,K;r.font=u.string,this.isHorizontal()?(N=this.maxWidth,K=this._fitRows(E,m,S,D)+10):(K=this.maxHeight,N=this._fitCols(E,m,S,D)+10),this.width=Math.min(N,l.maxWidth||this.maxWidth),this.height=Math.min(K,l.maxHeight||this.maxHeight)}_fitRows(l,r,a,u){const{ctx:m,maxWidth:E,options:{labels:{padding:S}}}=this,D=this.legendHitBoxes=[],N=this.lineWidths=[0],K=u+S;let ft=l;m.textAlign="left",m.textBaseline="middle";let Ot=-1,zt=-K;return this.legendItems.forEach((ae,ye)=>{const Re=a+r/2+m.measureText(ae.text).width;(0===ye||N[N.length-1]+Re+2*S>E)&&(ft+=K,N[N.length-(ye>0?0:1)]=0,zt+=K,Ot++),D[ye]={left:0,top:zt,row:Ot,width:Re,height:u},N[N.length-1]+=Re+S}),ft}_fitCols(l,r,a,u){const{ctx:m,maxHeight:E,options:{labels:{padding:S}}}=this,D=this.legendHitBoxes=[],N=this.columnSizes=[],K=E-l;let ft=S,Ot=0,zt=0,ae=0,ye=0;return this.legendItems.forEach((Re,Oe)=>{const ai=a+r/2+m.measureText(Re.text).width;Oe>0&&zt+u+2*S>K&&(ft+=Ot+S,N.push({width:Ot,height:zt}),ae+=Ot+S,ye++,Ot=zt=0),D[Oe]={left:ae,top:zt,col:ye,width:ai,height:u},Ot=Math.max(Ot,ai),zt+=u+S}),ft+=Ot,N.push({width:Ot,height:zt}),ft}adjustHitBoxes(){if(!this.options.display)return;const l=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:a,labels:{padding:u},rtl:m}}=this,E=Wn(m,this.left,this.width);if(this.isHorizontal()){let S=0,D=st(a,this.left+u,this.right-this.lineWidths[S]);for(const N of r)S!==N.row&&(S=N.row,D=st(a,this.left+u,this.right-this.lineWidths[S])),N.top+=this.top+l+u,N.left=E.leftForLtr(E.x(D),N.width),D+=N.width+u}else{let S=0,D=st(a,this.top+l+u,this.bottom-this.columnSizes[S].height);for(const N of r)N.col!==S&&(S=N.col,D=st(a,this.top+l+u,this.bottom-this.columnSizes[S].height)),N.top=D,N.left+=this.left+u,N.left=E.leftForLtr(E.x(N.left),N.width),D+=N.height+u}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const l=this.ctx;po(l,this),this._draw(),$r(l)}}_draw(){const{options:l,columnSizes:r,lineWidths:a,ctx:u}=this,{align:m,labels:E}=l,S=yn.color,D=Wn(l.rtl,this.left,this.width),N=Do(E.font),{color:K,padding:ft}=E,Ot=N.size,zt=Ot/2;let ae;this.drawTitle(),u.textAlign=D.textAlign("left"),u.textBaseline="middle",u.lineWidth=.5,u.font=N.string;const{boxWidth:ye,boxHeight:Re,itemHeight:Oe}=Hh(E,Ot),yi=this.isHorizontal(),wi=this._computeTitleHeight();ae=yi?{x:st(m,this.left+ft,this.right-a[0]),y:this.top+ft+wi,line:0}:{x:this.left+ft,y:st(m,this.top+wi+ft,this.bottom-r[0].height),line:0},Mo(this.ctx,l.textDirection);const Wi=Oe+ft;this.legendItems.forEach((zi,qi)=>{u.strokeStyle=zi.fontColor||K,u.fillStyle=zi.fontColor||K;const an=u.measureText(zi.text).width,zn=D.textAlign(zi.textAlign||(zi.textAlign=E.textAlign)),sn=ye+zt+an;let Yn=ae.x,ko=ae.y;D.setWidth(this.width),yi?qi>0&&Yn+sn+ft>this.right&&(ko=ae.y+=Wi,ae.line++,Yn=ae.x=st(m,this.left+ft,this.right-a[ae.line])):qi>0&&ko+Wi>this.bottom&&(Yn=ae.x=Yn+r[ae.line].width+ft,ae.line++,ko=ae.y=st(m,this.top+wi+ft,this.bottom-r[ae.line].height)),function(zi,qi,an){if(isNaN(ye)||ye<=0||isNaN(Re)||Re<0)return;u.save();const zn=at(an.lineWidth,1);if(u.fillStyle=at(an.fillStyle,S),u.lineCap=at(an.lineCap,"butt"),u.lineDashOffset=at(an.lineDashOffset,0),u.lineJoin=at(an.lineJoin,"miter"),u.lineWidth=zn,u.strokeStyle=at(an.strokeStyle,S),u.setLineDash(at(an.lineDash,[])),E.usePointStyle){const sn={radius:ye*Math.SQRT2/2,pointStyle:an.pointStyle,rotation:an.rotation,borderWidth:zn},Yn=D.xPlus(zi,ye/2);Jr(u,sn,Yn,qi+zt)}else{const sn=qi+Math.max((Ot-Re)/2,0),Yn=D.leftForLtr(zi,ye),ko=zo(an.borderRadius);u.beginPath(),Object.values(ko).some(Xi=>0!==Xi)?Dr(u,{x:Yn,y:sn,w:ye,h:Re,radius:ko}):u.rect(Yn,sn,ye,Re),u.fill(),0!==zn&&u.stroke()}u.restore()}(D.x(Yn),ko,zi),Yn=((g,l,r,a)=>g===(a?"left":"right")?r:"center"===g?(l+r)/2:l)(zn,Yn+ye+zt,yi?Yn+sn:this.right,l.rtl),function(zi,qi,an){Rr(u,an.text,zi,qi+Oe/2,N,{strikethrough:an.hidden,textAlign:D.textAlign(an.textAlign)})}(D.x(Yn),ko,zi),yi?ae.x+=sn+ft:ae.y+=Wi}),sr(this.ctx,l.textDirection)}drawTitle(){const l=this.options,r=l.title,a=Do(r.font),u=fo(r.padding);if(!r.display)return;const m=Wn(l.rtl,this.left,this.width),E=this.ctx,S=r.position,N=u.top+a.size/2;let K,ft=this.left,Ot=this.width;if(this.isHorizontal())Ot=Math.max(...this.lineWidths),K=this.top+N,ft=st(l.align,ft,this.right-Ot);else{const ae=this.columnSizes.reduce((ye,Re)=>Math.max(ye,Re.height),0);K=N+st(l.align,this.top,this.bottom-ae-l.labels.padding-this._computeTitleHeight())}const zt=st(S,ft,ft+Ot);E.textAlign=m.textAlign(nt(S)),E.textBaseline="middle",E.strokeStyle=r.color,E.fillStyle=r.color,E.font=a.string,Rr(E,r.text,zt,K,a)}_computeTitleHeight(){const l=this.options.title,r=Do(l.font),a=fo(l.padding);return l.display?r.lineHeight+a.height:0}_getLegendItemAt(l,r){let a,u,m;if(ti(l,this.left,this.right)&&ti(r,this.top,this.bottom))for(m=this.legendHitBoxes,a=0;a<m.length;++a)if(u=m[a],ti(l,u.left,u.left+u.width)&&ti(r,u.top,u.top+u.height))return this.legendItems[a];return null}handleEvent(l){const r=this.options;if(!function(g,l){return!!("mousemove"===g&&(l.onHover||l.onLeave)||l.onClick&&("click"===g||"mouseup"===g))}(l.type,r))return;const a=this._getLegendItemAt(l.x,l.y);if("mousemove"===l.type){const u=this._hoveredItem,m=((g,l)=>null!==g&&null!==l&&g.datasetIndex===l.datasetIndex&&g.index===l.index)(u,a);u&&!m&&rt(r.onLeave,[l,u,this],this),this._hoveredItem=a,a&&!m&&rt(r.onHover,[l,a,this],this)}else a&&rt(r.onClick,[l,a,this],this)}}var Vh={id:"legend",_element:Bu,start(g,l,r){const a=g.legend=new Bu({ctx:g.ctx,options:r,chart:g});zr.configure(g,a,r),zr.addBox(g,a)},stop(g){zr.removeBox(g,g.legend),delete g.legend},beforeUpdate(g,l,r){const a=g.legend;zr.configure(g,a,r),a.options=r},afterUpdate(g){const l=g.legend;l.buildLabels(),l.adjustHitBoxes()},afterEvent(g,l){l.replay||g.legend.handleEvent(l.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(g,l,r){const a=l.datasetIndex,u=r.chart;u.isDatasetVisible(a)?(u.hide(a),l.hidden=!0):(u.show(a),l.hidden=!1)},onHover:null,onLeave:null,labels:{color:g=>g.chart.options.color,boxWidth:40,padding:10,generateLabels(g){const l=g.data.datasets,{labels:{usePointStyle:r,pointStyle:a,textAlign:u,color:m}}=g.legend.options;return g._getSortedDatasetMetas().map(E=>{const S=E.controller.getStyle(r?0:void 0),D=fo(S.borderWidth);return{text:l[E.index].label,fillStyle:S.backgroundColor,fontColor:m,hidden:!E.visible,lineCap:S.borderCapStyle,lineDash:S.borderDash,lineDashOffset:S.borderDashOffset,lineJoin:S.borderJoinStyle,lineWidth:(D.width+D.height)/4,strokeStyle:S.borderColor,pointStyle:a||S.pointStyle,rotation:S.rotation,textAlign:u||S.textAlign,borderRadius:0,datasetIndex:E.index}},this)}},title:{color:g=>g.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:g=>!g.startsWith("on"),labels:{_scriptable:g=>!["generateLabels","filter","sort"].includes(g)}}};class zl extends Fs{constructor(l){super(),this.chart=l.chart,this.options=l.options,this.ctx=l.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(l,r){const a=this.options;if(this.left=0,this.top=0,!a.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=l,this.height=this.bottom=r;const u=tt(a.text)?a.text.length:1;this._padding=fo(a.padding);const m=u*Do(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=m:this.width=m}isHorizontal(){const l=this.options.position;return"top"===l||"bottom"===l}_drawArgs(l){const{top:r,left:a,bottom:u,right:m,options:E}=this,S=E.align;let N,K,ft,D=0;return this.isHorizontal()?(K=st(S,a,m),ft=r+l,N=m-a):("left"===E.position?(K=a+l,ft=st(S,u,r),D=-.5*Rt):(K=m-l,ft=st(S,r,u),D=.5*Rt),N=u-r),{titleX:K,titleY:ft,maxWidth:N,rotation:D}}draw(){const l=this.ctx,r=this.options;if(!r.display)return;const a=Do(r.font),m=a.lineHeight/2+this._padding.top,{titleX:E,titleY:S,maxWidth:D,rotation:N}=this._drawArgs(m);Rr(l,r.text,0,0,a,{color:r.color,maxWidth:D,rotation:N,textAlign:nt(r.align),textBaseline:"middle",translation:[E,S]})}}var Uh={id:"title",_element:zl,start(g,l,r){!function(g,l){const r=new zl({ctx:g.ctx,options:l,chart:g});zr.configure(g,r,l),zr.addBox(g,r),g.titleBlock=r}(g,r)},stop(g){zr.removeBox(g,g.titleBlock),delete g.titleBlock},beforeUpdate(g,l,r){const a=g.titleBlock;zr.configure(g,a,r),a.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const su=new WeakMap;var Hu={id:"subtitle",start(g,l,r){const a=new zl({ctx:g.ctx,options:r,chart:g});zr.configure(g,a,r),zr.addBox(g,a),su.set(g,a)},stop(g){zr.removeBox(g,su.get(g)),su.delete(g)},beforeUpdate(g,l,r){const a=su.get(g);zr.configure(g,a,r),a.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Yl={average(g){if(!g.length)return!1;let l,r,a=0,u=0,m=0;for(l=0,r=g.length;l<r;++l){const E=g[l].element;if(E&&E.hasValue()){const S=E.tooltipPosition();a+=S.x,u+=S.y,++m}}return{x:a/m,y:u/m}},nearest(g,l){if(!g.length)return!1;let m,E,S,r=l.x,a=l.y,u=Number.POSITIVE_INFINITY;for(m=0,E=g.length;m<E;++m){const D=g[m].element;if(D&&D.hasValue()){const K=Ei(l,D.getCenterPoint());K<u&&(u=K,S=D)}}if(S){const D=S.tooltipPosition();r=D.x,a=D.y}return{x:r,y:a}}};function ga(g,l){return l&&(tt(l)?Array.prototype.push.apply(g,l):g.push(l)),g}function sl(g){return("string"==typeof g||g instanceof String)&&g.indexOf("\n")>-1?g.split("\n"):g}function Gh(g,l){const{element:r,datasetIndex:a,index:u}=l,m=g.getDatasetMeta(a).controller,{label:E,value:S}=m.getLabelAndValue(u);return{chart:g,label:E,parsed:m.getParsed(u),raw:g.data.datasets[a].data[u],formattedValue:S,dataset:m.getDataset(),dataIndex:u,datasetIndex:a,element:r}}function fh(g,l){const r=g._chart.ctx,{body:a,footer:u,title:m}=g,{boxWidth:E,boxHeight:S}=l,D=Do(l.bodyFont),N=Do(l.titleFont),K=Do(l.footerFont),ft=m.length,Ot=u.length,zt=a.length,ae=fo(l.padding);let ye=ae.height,Re=0,Oe=a.reduce((yi,wi)=>yi+wi.before.length+wi.lines.length+wi.after.length,0);Oe+=g.beforeBody.length+g.afterBody.length,ft&&(ye+=ft*N.lineHeight+(ft-1)*l.titleSpacing+l.titleMarginBottom),Oe&&(ye+=zt*(l.displayColors?Math.max(S,D.lineHeight):D.lineHeight)+(Oe-zt)*D.lineHeight+(Oe-1)*l.bodySpacing),Ot&&(ye+=l.footerMarginTop+Ot*K.lineHeight+(Ot-1)*l.footerSpacing);let ai=0;const Pi=function(yi){Re=Math.max(Re,r.measureText(yi).width+ai)};return r.save(),r.font=N.string,Gt(g.title,Pi),r.font=D.string,Gt(g.beforeBody.concat(g.afterBody),Pi),ai=l.displayColors?E+2+l.boxPadding:0,Gt(a,yi=>{Gt(yi.before,Pi),Gt(yi.lines,Pi),Gt(yi.after,Pi)}),ai=0,r.font=K.string,Gt(g.footer,Pi),r.restore(),Re+=ae.width,{width:Re,height:ye}}function Wh(g,l,r,a){const{x:u,width:m}=r,{width:E,chartArea:{left:S,right:D}}=g;let N="center";return"center"===a?N=u<=(S+D)/2?"left":"right":u<=m/2?N="left":u>=E-m/2&&(N="right"),function(g,l,r,a){const{x:u,width:m}=a,E=r.caretSize+r.caretPadding;if("left"===g&&u+m+E>l.width||"right"===g&&u-m-E<0)return!0}(N,g,l,r)&&(N="center"),N}function Kl(g,l,r){const a=l.yAlign||function(g,l){const{y:r,height:a}=l;return r<a/2?"top":r>g.height-a/2?"bottom":"center"}(g,r);return{xAlign:l.xAlign||Wh(g,l,r,a),yAlign:a}}function Oa(g,l,r,a){const{caretSize:u,caretPadding:m,cornerRadius:E}=g,{xAlign:S,yAlign:D}=r,N=u+m,{topLeft:K,topRight:ft,bottomLeft:Ot,bottomRight:zt}=zo(E);let ae=function(g,l){let{x:r,width:a}=g;return"right"===l?r-=a:"center"===l&&(r-=a/2),r}(l,S);const ye=function(g,l,r){let{y:a,height:u}=g;return"top"===l?a+=r:a-="bottom"===l?u+r:u/2,a}(l,D,N);return"center"===D?"left"===S?ae+=N:"right"===S&&(ae-=N):"left"===S?ae-=Math.max(K,Ot)+u:"right"===S&&(ae+=Math.max(ft,zt)+u),{x:ue(ae,0,a.width-l.width),y:ue(ye,0,a.height-l.height)}}function Vu(g,l,r){const a=fo(r.padding);return"center"===l?g.x+g.width/2:"right"===l?g.x+g.width-a.right:g.x+a.left}function ma(g){return ga([],sl(g))}function Uu(g,l){const r=l&&l.dataset&&l.dataset.tooltip&&l.dataset.tooltip.callbacks;return r?g.override(r):g}let _a=(()=>{class g extends Fs{constructor(r){super(),this.opacity=0,this._active=[],this._chart=r._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=r.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(r){this.options=r,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const r=this._cachedAnimations;if(r)return r;const a=this._chart,u=this.options.setContext(this.getContext()),m=u.enabled&&a.options.animation&&u.animations,E=new Qn(this._chart,m);return m._cacheable&&(this._cachedAnimations=Object.freeze(E)),E}getContext(){return this.$context||(this.$context=function(g,l,r){return Ir(g,{tooltip:l,tooltipItems:r,type:"tooltip"})}(this._chart.getContext(),this,this._tooltipItems))}getTitle(r,a){const{callbacks:u}=a,m=u.beforeTitle.apply(this,[r]),E=u.title.apply(this,[r]),S=u.afterTitle.apply(this,[r]);let D=[];return D=ga(D,sl(m)),D=ga(D,sl(E)),D=ga(D,sl(S)),D}getBeforeBody(r,a){return ma(a.callbacks.beforeBody.apply(this,[r]))}getBody(r,a){const{callbacks:u}=a,m=[];return Gt(r,E=>{const S={before:[],lines:[],after:[]},D=Uu(u,E);ga(S.before,sl(D.beforeLabel.call(this,E))),ga(S.lines,D.label.call(this,E)),ga(S.after,sl(D.afterLabel.call(this,E))),m.push(S)}),m}getAfterBody(r,a){return ma(a.callbacks.afterBody.apply(this,[r]))}getFooter(r,a){const{callbacks:u}=a,m=u.beforeFooter.apply(this,[r]),E=u.footer.apply(this,[r]),S=u.afterFooter.apply(this,[r]);let D=[];return D=ga(D,sl(m)),D=ga(D,sl(E)),D=ga(D,sl(S)),D}_createItems(r){const a=this._active,u=this._chart.data,m=[],E=[],S=[];let N,K,D=[];for(N=0,K=a.length;N<K;++N)D.push(Gh(this._chart,a[N]));return r.filter&&(D=D.filter((ft,Ot,zt)=>r.filter(ft,Ot,zt,u))),r.itemSort&&(D=D.sort((ft,Ot)=>r.itemSort(ft,Ot,u))),Gt(D,ft=>{const Ot=Uu(r.callbacks,ft);m.push(Ot.labelColor.call(this,ft)),E.push(Ot.labelPointStyle.call(this,ft)),S.push(Ot.labelTextColor.call(this,ft))}),this.labelColors=m,this.labelPointStyles=E,this.labelTextColors=S,this.dataPoints=D,D}update(r,a){const u=this.options.setContext(this.getContext()),m=this._active;let E,S=[];if(m.length){const D=Yl[u.position].call(this,m,this._eventPosition);S=this._createItems(u),this.title=this.getTitle(S,u),this.beforeBody=this.getBeforeBody(S,u),this.body=this.getBody(S,u),this.afterBody=this.getAfterBody(S,u),this.footer=this.getFooter(S,u);const N=this._size=fh(this,u),K=Object.assign({},D,N),ft=Kl(this._chart,u,K),Ot=Oa(u,K,ft,this._chart);this.xAlign=ft.xAlign,this.yAlign=ft.yAlign,E={opacity:1,x:Ot.x,y:Ot.y,width:N.width,height:N.height,caretX:D.x,caretY:D.y}}else 0!==this.opacity&&(E={opacity:0});this._tooltipItems=S,this.$context=void 0,E&&this._resolveAnimations().update(this,E),r&&u.external&&u.external.call(this,{chart:this._chart,tooltip:this,replay:a})}drawCaret(r,a,u,m){const E=this.getCaretPosition(r,u,m);a.lineTo(E.x1,E.y1),a.lineTo(E.x2,E.y2),a.lineTo(E.x3,E.y3)}getCaretPosition(r,a,u){const{xAlign:m,yAlign:E}=this,{caretSize:S,cornerRadius:D}=u,{topLeft:N,topRight:K,bottomLeft:ft,bottomRight:Ot}=zo(D),{x:zt,y:ae}=r,{width:ye,height:Re}=a;let Oe,ai,Pi,yi,wi,Wi;return"center"===E?(wi=ae+Re/2,"left"===m?(Oe=zt,ai=Oe-S,yi=wi+S,Wi=wi-S):(Oe=zt+ye,ai=Oe+S,yi=wi-S,Wi=wi+S),Pi=Oe):(ai="left"===m?zt+Math.max(N,ft)+S:"right"===m?zt+ye-Math.max(K,Ot)-S:this.caretX,"top"===E?(yi=ae,wi=yi-S,Oe=ai-S,Pi=ai+S):(yi=ae+Re,wi=yi+S,Oe=ai+S,Pi=ai-S),Wi=yi),{x1:Oe,x2:ai,x3:Pi,y1:yi,y2:wi,y3:Wi}}drawTitle(r,a,u){const m=this.title,E=m.length;let S,D,N;if(E){const K=Wn(u.rtl,this.x,this.width);for(r.x=Vu(this,u.titleAlign,u),a.textAlign=K.textAlign(u.titleAlign),a.textBaseline="middle",S=Do(u.titleFont),D=u.titleSpacing,a.fillStyle=u.titleColor,a.font=S.string,N=0;N<E;++N)a.fillText(m[N],K.x(r.x),r.y+S.lineHeight/2),r.y+=S.lineHeight+D,N+1===E&&(r.y+=u.titleMarginBottom-D)}}_drawColorBox(r,a,u,m,E){const S=this.labelColors[u],D=this.labelPointStyles[u],{boxHeight:N,boxWidth:K,boxPadding:ft}=E,Ot=Do(E.bodyFont),zt=Vu(this,"left",E),ae=m.x(zt),Re=a.y+(N<Ot.lineHeight?(Ot.lineHeight-N)/2:0);if(E.usePointStyle){const Oe={radius:Math.min(K,N)/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:1},ai=m.leftForLtr(ae,K)+K/2,Pi=Re+N/2;r.strokeStyle=E.multiKeyBackground,r.fillStyle=E.multiKeyBackground,Jr(r,Oe,ai,Pi),r.strokeStyle=S.borderColor,r.fillStyle=S.backgroundColor,Jr(r,Oe,ai,Pi)}else{r.lineWidth=S.borderWidth||1,r.strokeStyle=S.borderColor,r.setLineDash(S.borderDash||[]),r.lineDashOffset=S.borderDashOffset||0;const Oe=m.leftForLtr(ae,K-ft),ai=m.leftForLtr(m.xPlus(ae,1),K-ft-2),Pi=zo(S.borderRadius);Object.values(Pi).some(yi=>0!==yi)?(r.beginPath(),r.fillStyle=E.multiKeyBackground,Dr(r,{x:Oe,y:Re,w:K,h:N,radius:Pi}),r.fill(),r.stroke(),r.fillStyle=S.backgroundColor,r.beginPath(),Dr(r,{x:ai,y:Re+1,w:K-2,h:N-2,radius:Pi}),r.fill()):(r.fillStyle=E.multiKeyBackground,r.fillRect(Oe,Re,K,N),r.strokeRect(Oe,Re,K,N),r.fillStyle=S.backgroundColor,r.fillRect(ai,Re+1,K-2,N-2))}r.fillStyle=this.labelTextColors[u]}drawBody(r,a,u){const{body:m}=this,{bodySpacing:E,bodyAlign:S,displayColors:D,boxHeight:N,boxWidth:K,boxPadding:ft}=u,Ot=Do(u.bodyFont);let zt=Ot.lineHeight,ae=0;const ye=Wn(u.rtl,this.x,this.width),Re=function(an){a.fillText(an,ye.x(r.x+ae),r.y+zt/2),r.y+=zt+E},Oe=ye.textAlign(S);let ai,Pi,yi,wi,Wi,zi,qi;for(a.textAlign=S,a.textBaseline="middle",a.font=Ot.string,r.x=Vu(this,Oe,u),a.fillStyle=u.bodyColor,Gt(this.beforeBody,Re),ae=D&&"right"!==Oe?"center"===S?K/2+ft:K+2+ft:0,wi=0,zi=m.length;wi<zi;++wi){for(ai=m[wi],Pi=this.labelTextColors[wi],a.fillStyle=Pi,Gt(ai.before,Re),yi=ai.lines,D&&yi.length&&(this._drawColorBox(a,r,wi,ye,u),zt=Math.max(Ot.lineHeight,N)),Wi=0,qi=yi.length;Wi<qi;++Wi)Re(yi[Wi]),zt=Ot.lineHeight;Gt(ai.after,Re)}ae=0,zt=Ot.lineHeight,Gt(this.afterBody,Re),r.y-=E}drawFooter(r,a,u){const m=this.footer,E=m.length;let S,D;if(E){const N=Wn(u.rtl,this.x,this.width);for(r.x=Vu(this,u.footerAlign,u),r.y+=u.footerMarginTop,a.textAlign=N.textAlign(u.footerAlign),a.textBaseline="middle",S=Do(u.footerFont),a.fillStyle=u.footerColor,a.font=S.string,D=0;D<E;++D)a.fillText(m[D],N.x(r.x),r.y+S.lineHeight/2),r.y+=S.lineHeight+u.footerSpacing}}drawBackground(r,a,u,m){const{xAlign:E,yAlign:S}=this,{x:D,y:N}=r,{width:K,height:ft}=u,{topLeft:Ot,topRight:zt,bottomLeft:ae,bottomRight:ye}=zo(m.cornerRadius);a.fillStyle=m.backgroundColor,a.strokeStyle=m.borderColor,a.lineWidth=m.borderWidth,a.beginPath(),a.moveTo(D+Ot,N),"top"===S&&this.drawCaret(r,a,u,m),a.lineTo(D+K-zt,N),a.quadraticCurveTo(D+K,N,D+K,N+zt),"center"===S&&"right"===E&&this.drawCaret(r,a,u,m),a.lineTo(D+K,N+ft-ye),a.quadraticCurveTo(D+K,N+ft,D+K-ye,N+ft),"bottom"===S&&this.drawCaret(r,a,u,m),a.lineTo(D+ae,N+ft),a.quadraticCurveTo(D,N+ft,D,N+ft-ae),"center"===S&&"left"===E&&this.drawCaret(r,a,u,m),a.lineTo(D,N+Ot),a.quadraticCurveTo(D,N,D+Ot,N),a.closePath(),a.fill(),m.borderWidth>0&&a.stroke()}_updateAnimationTarget(r){const a=this._chart,u=this.$animations,m=u&&u.x,E=u&&u.y;if(m||E){const S=Yl[r.position].call(this,this._active,this._eventPosition);if(!S)return;const D=this._size=fh(this,r),N=Object.assign({},S,this._size),K=Kl(a,r,N),ft=Oa(r,N,K,a);(m._to!==ft.x||E._to!==ft.y)&&(this.xAlign=K.xAlign,this.yAlign=K.yAlign,this.width=D.width,this.height=D.height,this.caretX=S.x,this.caretY=S.y,this._resolveAnimations().update(this,ft))}}draw(r){const a=this.options.setContext(this.getContext());let u=this.opacity;if(!u)return;this._updateAnimationTarget(a);const m={width:this.width,height:this.height},E={x:this.x,y:this.y};u=Math.abs(u)<.001?0:u;const S=fo(a.padding);a.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(r.save(),r.globalAlpha=u,this.drawBackground(E,r,m,a),Mo(r,a.textDirection),E.y+=S.top,this.drawTitle(E,r,a),this.drawBody(E,r,a),this.drawFooter(E,r,a),sr(r,a.textDirection),r.restore())}getActiveElements(){return this._active||[]}setActiveElements(r,a){const u=this._active,m=r.map(({datasetIndex:D,index:N})=>{const K=this._chart.getDatasetMeta(D);if(!K)throw new Error("Cannot find a dataset at index "+D);return{datasetIndex:D,element:K.data[N],index:N}}),E=!bt(u,m),S=this._positionChanged(m,a);(E||S)&&(this._active=m,this._eventPosition=a,this.update(!0))}handleEvent(r,a){const u=this.options,m=this._active||[];let E=!1,S=[];"mouseout"!==r.type&&(S=this._chart.getElementsAtEventForMode(r,u.mode,u,a),u.reverse&&S.reverse());const D=this._positionChanged(S,r);return E=a||!bt(S,m)||D,E&&(this._active=S,(u.enabled||u.external)&&(this._eventPosition={x:r.x,y:r.y},this.update(!0,a))),E}_positionChanged(r,a){const{caretX:u,caretY:m,options:E}=this,S=Yl[E.position].call(this,r,a);return!1!==S&&(u!==S.x||m!==S.y)}}return g.positioners=Yl,g})();var cu=Object.freeze({__proto__:null,Decimation:xh,Filler:Bh,Legend:Vh,SubTitle:Hu,Title:Uh,Tooltip:{id:"tooltip",_element:_a,positioners:Yl,afterInit(g,l,r){r&&(g.tooltip=new _a({_chart:g,options:r}))},beforeUpdate(g,l,r){g.tooltip&&g.tooltip.initialize(r)},reset(g,l,r){g.tooltip&&g.tooltip.initialize(r)},afterDraw(g){const l=g.tooltip,r={tooltip:l};!1!==g.notifyPlugins("beforeTooltipDraw",r)&&(l&&l.draw(g.ctx),g.notifyPlugins("afterTooltipDraw",r))},afterEvent(g,l){g.tooltip&&g.tooltip.handleEvent(l.event,l.replay)&&(l.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(g,l)=>l.bodyFont.size,boxWidth:(g,l)=>l.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:xt,title(g){if(g.length>0){const l=g[0],r=l.chart.data.labels,a=r?r.length:0;if(this&&this.options&&"dataset"===this.options.mode)return l.dataset.label||"";if(l.label)return l.label;if(a>0&&l.dataIndex<a)return r[l.dataIndex]}return""},afterTitle:xt,beforeBody:xt,beforeLabel:xt,label(g){if(this&&this.options&&"dataset"===this.options.mode)return g.label+": "+g.formattedValue||g.formattedValue;let l=g.dataset.label||"";l&&(l+=": ");const r=g.formattedValue;return ut(r)||(l+=r),l},labelColor(g){const r=g.chart.getDatasetMeta(g.datasetIndex).controller.getStyle(g.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(g){const r=g.chart.getDatasetMeta(g.datasetIndex).controller.getStyle(g.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:xt,afterBody:xt,beforeFooter:xt,footer:xt,afterFooter:xt}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:g=>"filter"!==g&&"itemSort"!==g&&"external"!==g,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class Jl extends Ys{constructor(l){super(l),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(l){const r=this._addedLabels;if(r.length){const a=this.getLabels();for(const{index:u,label:m}of r)a[u]===m&&a.splice(u,1);this._addedLabels=[]}super.init(l)}parse(l,r){if(ut(l))return null;const a=this.getLabels();return((g,l)=>null===g?null:ue(Math.round(g),0,l))(r=isFinite(r)&&a[r]===l?r:function(g,l,r,a){const u=g.indexOf(l);return-1===u?((g,l,r,a)=>("string"==typeof l?(r=g.push(l)-1,a.unshift({index:r,label:l})):isNaN(l)&&(r=null),r))(g,l,r,a):u!==g.lastIndexOf(l)?r:u}(a,l,at(r,l),this._addedLabels),a.length-1)}determineDataLimits(){const{minDefined:l,maxDefined:r}=this.getUserBounds();let{min:a,max:u}=this.getMinMax(!0);"ticks"===this.options.bounds&&(l||(a=0),r||(u=this.getLabels().length-1)),this.min=a,this.max=u}buildTicks(){const l=this.min,r=this.max,a=this.options.offset,u=[];let m=this.getLabels();m=0===l&&r===m.length-1?m:m.slice(l,r+1),this._valueRange=Math.max(m.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let E=l;E<=r;E++)u.push({value:E});return u}getLabelForValue(l){const r=this.getLabels();return l>=0&&l<r.length?r[l]:l}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(l){return"number"!=typeof l&&(l=this.parse(l)),null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getPixelForTick(l){const r=this.ticks;return l<0||l>r.length-1?null:this.getPixelForValue(r[l].value)}getValueForPixel(l){return Math.round(this._startValue+this.getDecimalForPixel(l)*this._valueRange)}getBasePixel(){return this.bottom}}function du(g,l,{horizontal:r,minRotation:a}){const u=Ze(a),m=(r?Math.sin(u):Math.cos(u))||.001;return Math.min(l/m,.75*l*(""+g).length)}Jl.id="category",Jl.defaults={ticks:{callback:Jl.prototype.getLabelForValue}};class Wa extends Ys{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(l,r){return ut(l)||("number"==typeof l||l instanceof Number)&&!isFinite(+l)?null:+l}handleTickRangeOptions(){const{beginAtZero:l}=this.options,{minDefined:r,maxDefined:a}=this.getUserBounds();let{min:u,max:m}=this;const E=D=>u=r?u:D,S=D=>m=a?m:D;if(l){const D=oe(u),N=oe(m);D<0&&N<0?S(0):D>0&&N>0&&E(0)}if(u===m){let D=1;(m>=Number.MAX_SAFE_INTEGER||u<=Number.MIN_SAFE_INTEGER)&&(D=Math.abs(.05*m)),S(m+D),l||E(u-D)}this.min=u,this.max=m}getTickLimit(){const l=this.options.ticks;let u,{maxTicksLimit:r,stepSize:a}=l;return a?(u=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,u>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${a} would result generating up to ${u} ticks. Limiting to 1000.`),u=1e3)):(u=this.computeTickLimit(),r=r||11),r&&(u=Math.min(r,u)),u}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const l=this.options,r=l.ticks;let a=this.getTickLimit();a=Math.max(2,a);const E=function(g,l){const r=[],{bounds:u,step:m,min:E,max:S,precision:D,count:N,maxTicks:K,maxDigits:ft,includeBounds:Ot}=g,zt=m||1,ae=K-1,{min:ye,max:Re}=l,Oe=!ut(E),ai=!ut(S),Pi=!ut(N),yi=(Re-ye)/(ft+1);let Wi,zi,qi,an,wi=re((Re-ye)/ae/zt)*zt;if(wi<1e-14&&!Oe&&!ai)return[{value:ye},{value:Re}];an=Math.ceil(Re/wi)-Math.floor(ye/wi),an>ae&&(wi=re(an*wi/ae/zt)*zt),ut(D)||(Wi=Math.pow(10,D),wi=Math.ceil(wi*Wi)/Wi),"ticks"===u?(zi=Math.floor(ye/wi)*wi,qi=Math.ceil(Re/wi)*wi):(zi=ye,qi=Re),Oe&&ai&&m&&function(g,l){const r=Math.round(g);return r-l<=g&&r+l>=g}((S-E)/m,wi/1e3)?(an=Math.round(Math.min((S-E)/wi,K)),wi=(S-E)/an,zi=E,qi=S):Pi?(zi=Oe?E:zi,qi=ai?S:qi,an=N-1,wi=(qi-zi)/an):(an=(qi-zi)/wi,an=we(an,Math.round(an),wi/1e3)?Math.round(an):Math.ceil(an));const zn=Math.max(Fi(wi),Fi(zi));Wi=Math.pow(10,ut(D)?zn:D),zi=Math.round(zi*Wi)/Wi,qi=Math.round(qi*Wi)/Wi;let sn=0;for(Oe&&(Ot&&zi!==E?(r.push({value:E}),zi<E&&sn++,we(Math.round((zi+sn*wi)*Wi)/Wi,E,du(E,yi,g))&&sn++):zi<E&&sn++);sn<an;++sn)r.push({value:Math.round((zi+sn*wi)*Wi)/Wi});return ai&&Ot&&qi!==S?r.length&&we(r[r.length-1].value,S,du(S,yi,g))?r[r.length-1].value=S:r.push({value:S}):(!ai||qi===S)&&r.push({value:qi}),r}({maxTicks:a,bounds:l.bounds,min:l.min,max:l.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:!1!==r.includeBounds},this._range||this);return"ticks"===l.bounds&&ci(E,this,"value"),l.reverse?(E.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),E}configure(){const l=this.ticks;let r=this.min,a=this.max;if(super.configure(),this.options.offset&&l.length){const u=(a-r)/Math.max(l.length-1,1)/2;r-=u,a+=u}this._startValue=r,this._endValue=a,this._valueRange=a-r}getLabelForValue(l){return tn(l,this.chart.options.locale,this.options.ticks.format)}}class Nc extends Wa{determineDataLimits(){const{min:l,max:r}=this.getMinMax(!0);this.min=ot(l)?l:0,this.max=ot(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const l=this.isHorizontal(),r=l?this.width:this.height,a=Ze(this.options.ticks.minRotation),u=(l?Math.sin(a):Math.cos(a))||.001,m=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,m.lineHeight/u))}getPixelForValue(l){return null===l?NaN:this.getPixelForDecimal((l-this._startValue)/this._valueRange)}getValueForPixel(l){return this._startValue+this.getDecimalForPixel(l)*this._valueRange}}function jh(g){return g/Math.pow(10,Math.floor($t(g)))==1}Nc.id="linear",Nc.defaults={ticks:{callback:ml.formatters.numeric}};class Tl extends Ys{constructor(l){super(l),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(l,r){const a=Wa.prototype.parse.apply(this,[l,r]);if(0!==a)return ot(a)&&a>0?a:null;this._zero=!0}determineDataLimits(){const{min:l,max:r}=this.getMinMax(!0);this.min=ot(l)?Math.max(0,l):null,this.max=ot(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:l,maxDefined:r}=this.getUserBounds();let a=this.min,u=this.max;const m=D=>a=l?a:D,E=D=>u=r?u:D,S=(D,N)=>Math.pow(10,Math.floor($t(D))+N);a===u&&(a<=0?(m(1),E(10)):(m(S(a,-1)),E(S(u,1)))),a<=0&&m(S(u,-1)),u<=0&&E(S(a,1)),this._zero&&this.min!==this._suggestedMin&&a===S(this.min,0)&&m(S(a,-1)),this.min=a,this.max=u}buildTicks(){const l=this.options,a=function(g,l){const r=Math.floor($t(l.max)),a=Math.ceil(l.max/Math.pow(10,r)),u=[];let m=Lt(g.min,Math.pow(10,Math.floor($t(l.min)))),E=Math.floor($t(m)),S=Math.floor(m/Math.pow(10,E)),D=E<0?Math.pow(10,Math.abs(E)):1;do{u.push({value:m,major:jh(m)}),++S,10===S&&(S=1,++E,D=E>=0?1:D),m=Math.round(S*Math.pow(10,E)*D)/D}while(E<r||E===r&&S<a);const N=Lt(g.max,m);return u.push({value:N,major:jh(m)}),u}({min:this._userMin,max:this._userMax},this);return"ticks"===l.bounds&&ci(a,this,"value"),l.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}getLabelForValue(l){return void 0===l?"0":tn(l,this.chart.options.locale,this.options.ticks.format)}configure(){const l=this.min;super.configure(),this._startValue=$t(l),this._valueRange=$t(this.max)-$t(l)}getPixelForValue(l){return(void 0===l||0===l)&&(l=this.min),null===l||isNaN(l)?NaN:this.getPixelForDecimal(l===this.min?0:($t(l)-this._startValue)/this._valueRange)}getValueForPixel(l){const r=this.getDecimalForPixel(l);return Math.pow(10,this._startValue+r*this._valueRange)}}function va(g){const l=g.ticks;if(l.display&&g.display){const r=fo(l.backdropPadding);return at(l.font&&l.font.size,yn.font.size)+r.height}return 0}function Wu(g,l,r){return r=tt(r)?r:[r],{w:Sr(g,l.string,r),h:r.length*l.lineHeight}}function $l(g,l,r,a,u){return g===a||g===u?{start:l-r/2,end:l+r/2}:g<a||g>u?{start:l-r,end:l}:{start:l,end:l+r}}function mh(g){return 0===g||180===g?"center":g<180?"left":"right"}function zh(g,l,r){return"right"===r?g-=l:"center"===r&&(g-=l/2),g}function fd(g,l,r){return 90===r||270===r?g-=l/2:(r>270||r<90)&&(g-=l),g}function ur(g,l,r,a){const{ctx:u}=g;if(r)u.arc(g.xCenter,g.yCenter,l,0,Pt);else{let m=g.getPointPosition(0,l);u.moveTo(m.x,m.y);for(let E=1;E<a;E++)m=g.getPointPosition(E,l),u.lineTo(m.x,m.y)}}function pu(g){return kt(g)?g:0}Tl.id="logarithmic",Tl.defaults={ticks:{callback:ml.formatters.logarithmic,major:{enabled:!0}}};class L extends Wa{constructor(l){super(l),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){this.width=this.maxWidth,this.height=this.maxHeight,this.paddingTop=va(this.options)/2,this.xCenter=Math.floor(this.width/2),this.yCenter=Math.floor((this.height-this.paddingTop)/2),this.drawingArea=Math.min(this.height-this.paddingTop,this.width)/2}determineDataLimits(){const{min:l,max:r}=this.getMinMax(!1);this.min=ot(l)&&!isNaN(l)?l:0,this.max=ot(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/va(this.options))}generateTickLabels(l){Wa.prototype.generateTickLabels.call(this,l),this._pointLabels=this.getLabels().map((r,a)=>{const u=rt(this.options.pointLabels.callback,[r,a],this);return u||0===u?u:""})}fit(){const l=this.options;l.display&&l.pointLabels.display?function(g){const l={l:0,r:g.width,t:0,b:g.height-g.paddingTop},r={},a=[],u=[],m=g.getLabels().length;for(let E=0;E<m;E++){const S=g.options.pointLabels.setContext(g.getPointLabelContext(E));u[E]=S.padding;const D=g.getPointPosition(E,g.drawingArea+u[E]),N=Do(S.font),K=Wu(g.ctx,N,g._pointLabels[E]);a[E]=K;const ft=g.getIndexAngle(E),Ot=li(ft),zt=$l(Ot,D.x,K.w,0,180),ae=$l(Ot,D.y,K.h,90,270);zt.start<l.l&&(l.l=zt.start,r.l=ft),zt.end>l.r&&(l.r=zt.end,r.r=ft),ae.start<l.t&&(l.t=ae.start,r.t=ft),ae.end>l.b&&(l.b=ae.end,r.b=ft)}g._setReductions(g.drawingArea,l,r),g._pointLabelItems=function(g,l,r){const a=[],u=g.getLabels().length,m=g.options,E=va(m),S=g.getDistanceFromCenterForValue(m.ticks.reverse?g.min:g.max);for(let D=0;D<u;D++){const K=g.getPointPosition(D,S+(0===D?E/2:0)+r[D]),ft=li(g.getIndexAngle(D)),Ot=l[D],zt=fd(K.y,Ot.h,ft),ae=mh(ft),ye=zh(K.x,Ot.w,ae);a.push({x:K.x,y:zt,textAlign:ae,left:ye,top:zt,right:ye+Ot.w,bottom:zt+Ot.h})}return a}(g,a,u)}(this):this.setCenterPoint(0,0,0,0)}_setReductions(l,r,a){let u=r.l/Math.sin(a.l),m=Math.max(r.r-this.width,0)/Math.sin(a.r),E=-r.t/Math.cos(a.t),S=-Math.max(r.b-(this.height-this.paddingTop),0)/Math.cos(a.b);u=pu(u),m=pu(m),E=pu(E),S=pu(S),this.drawingArea=Math.max(l/2,Math.min(Math.floor(l-(u+m)/2),Math.floor(l-(E+S)/2))),this.setCenterPoint(u,m,E,S)}setCenterPoint(l,r,a,u){const S=a+this.drawingArea,D=this.height-this.paddingTop-u-this.drawingArea;this.xCenter=Math.floor((l+this.drawingArea+(this.width-r-this.drawingArea))/2+this.left),this.yCenter=Math.floor((S+D)/2+this.top+this.paddingTop)}getIndexAngle(l){return We(l*(Pt/this.getLabels().length)+Ze(this.options.startAngle||0))}getDistanceFromCenterForValue(l){if(ut(l))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-l)*r:(l-this.min)*r}getValueForDistanceFromCenter(l){if(ut(l))return NaN;const r=l/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(l){const r=this._pointLabels||[];if(l>=0&&l<r.length){const a=r[l];return function(g,l,r){return Ir(g,{label:r,index:l,type:"pointLabel"})}(this.getContext(),l,a)}}getPointPosition(l,r){const a=this.getIndexAngle(l)-jt;return{x:Math.cos(a)*r+this.xCenter,y:Math.sin(a)*r+this.yCenter,angle:a}}getPointPositionForValue(l,r){return this.getPointPosition(l,this.getDistanceFromCenterForValue(r))}getBasePosition(l){return this.getPointPositionForValue(l||0,this.getBaseValue())}getPointLabelPosition(l){const{left:r,top:a,right:u,bottom:m}=this._pointLabelItems[l];return{left:r,top:a,right:u,bottom:m}}drawBackground(){const{backgroundColor:l,grid:{circular:r}}=this.options;if(l){const a=this.ctx;a.save(),a.beginPath(),ur(this,this.getDistanceFromCenterForValue(this._endValue),r,this.getLabels().length),a.closePath(),a.fillStyle=l,a.fill(),a.restore()}}drawGrid(){const l=this.ctx,r=this.options,{angleLines:a,grid:u}=r,m=this.getLabels().length;let E,S,D;if(r.pointLabels.display&&function(g,l){const{ctx:r,options:{pointLabels:a}}=g;for(let u=l-1;u>=0;u--){const m=a.setContext(g.getPointLabelContext(u)),E=Do(m.font),{x:S,y:D,textAlign:N,left:K,top:ft,right:Ot,bottom:zt}=g._pointLabelItems[u],{backdropColor:ae}=m;if(!ut(ae)){const ye=fo(m.backdropPadding);r.fillStyle=ae,r.fillRect(K-ye.left,ft-ye.top,Ot-K+ye.width,zt-ft+ye.height)}Rr(r,g._pointLabels[u],S,D+E.lineHeight/2,E,{color:m.color,textAlign:N,textBaseline:"middle"})}}(this,m),u.display&&this.ticks.forEach((N,K)=>{0!==K&&(S=this.getDistanceFromCenterForValue(N.value),function(g,l,r,a){const u=g.ctx,m=l.circular,{color:E,lineWidth:S}=l;!m&&!a||!E||!S||r<0||(u.save(),u.strokeStyle=E,u.lineWidth=S,u.setLineDash(l.borderDash),u.lineDashOffset=l.borderDashOffset,u.beginPath(),ur(g,r,m,a),u.closePath(),u.stroke(),u.restore())}(this,u.setContext(this.getContext(K-1)),S,m))}),a.display){for(l.save(),E=this.getLabels().length-1;E>=0;E--){const N=a.setContext(this.getPointLabelContext(E)),{color:K,lineWidth:ft}=N;!ft||!K||(l.lineWidth=ft,l.strokeStyle=K,l.setLineDash(N.borderDash),l.lineDashOffset=N.borderDashOffset,S=this.getDistanceFromCenterForValue(r.ticks.reverse?this.min:this.max),D=this.getPointPosition(E,S),l.beginPath(),l.moveTo(this.xCenter,this.yCenter),l.lineTo(D.x,D.y),l.stroke())}l.restore()}}drawBorder(){}drawLabels(){const l=this.ctx,r=this.options,a=r.ticks;if(!a.display)return;const u=this.getIndexAngle(0);let m,E;l.save(),l.translate(this.xCenter,this.yCenter),l.rotate(u),l.textAlign="center",l.textBaseline="middle",this.ticks.forEach((S,D)=>{if(0===D&&!r.reverse)return;const N=a.setContext(this.getContext(D)),K=Do(N.font);if(m=this.getDistanceFromCenterForValue(this.ticks[D].value),N.showLabelBackdrop){l.font=K.string,E=l.measureText(S.label).width,l.fillStyle=N.backdropColor;const ft=fo(N.backdropPadding);l.fillRect(-E/2-ft.left,-m-K.size/2-ft.top,E+ft.width,K.size+ft.height)}Rr(l,S.label,0,-m,K,{color:N.color})}),l.restore()}drawTitle(){}}L.id="radialLinear",L.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ml.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:g=>g,padding:5}},L.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},L.descriptors={angleLines:{_fallback:"grid"}};const j={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Q=Object.keys(j);function mt(g,l){return g-l}function Vt(g,l){if(ut(l))return null;const r=g._adapter,{parser:a,round:u,isoWeekday:m}=g._parseOpts;let E=l;return"function"==typeof a&&(E=a(E)),ot(E)||(E="string"==typeof a?r.parse(E,a):r.parse(E)),null===E?null:(u&&(E="week"!==u||!kt(m)&&!0!==m?r.startOf(E,u):r.startOf(E,"isoWeek",m)),+E)}function Ut(g,l,r,a){const u=Q.length;for(let m=Q.indexOf(g);m<u-1;++m){const E=j[Q[m]],S=E.steps?E.steps:Number.MAX_SAFE_INTEGER;if(E.common&&Math.ceil((r-l)/(S*E.size))<=a)return Q[m]}return Q[u-1]}function me(g,l,r){if(r){if(r.length){const{lo:a,hi:u}=Mr(r,l);g[r[a]>=l?r[a]:r[u]]=!0}}else g[l]=!0}function Ge(g,l,r){const a=[],u={},m=l.length;let E,S;for(E=0;E<m;++E)S=l[E],u[S]=E,a.push({value:S,major:!1});return 0!==m&&r?function(g,l,r,a){const u=g._adapter,m=+u.startOf(l[0].value,a),E=l[l.length-1].value;let S,D;for(S=m;S<=E;S=+u.add(S,1,a))D=r[S],D>=0&&(l[D].major=!0);return l}(g,a,u,r):a}let Qe=(()=>{class g extends Ys{constructor(r){super(r),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(r,a){const u=r.time||(r.time={}),m=this._adapter=new jr._date(r.adapters.date);Be(u.displayFormats,m.formats()),this._parseOpts={parser:u.parser,round:u.round,isoWeekday:u.isoWeekday},super.init(r),this._normalized=a.normalized}parse(r,a){return void 0===r?null:Vt(this,r)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const r=this.options,a=this._adapter,u=r.time.unit||"day";let{min:m,max:E,minDefined:S,maxDefined:D}=this.getUserBounds();function N(K){!S&&!isNaN(K.min)&&(m=Math.min(m,K.min)),!D&&!isNaN(K.max)&&(E=Math.max(E,K.max))}(!S||!D)&&(N(this._getLabelBounds()),("ticks"!==r.bounds||"labels"!==r.ticks.source)&&N(this.getMinMax(!1))),m=ot(m)&&!isNaN(m)?m:+a.startOf(Date.now(),u),E=ot(E)&&!isNaN(E)?E:+a.endOf(Date.now(),u)+1,this.min=Math.min(m,E-1),this.max=Math.max(m+1,E)}_getLabelBounds(){const r=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;return r.length&&(a=r[0],u=r[r.length-1]),{min:a,max:u}}buildTicks(){const r=this.options,a=r.time,u=r.ticks,m="labels"===u.source?this.getLabelTimestamps():this._generate();"ticks"===r.bounds&&m.length&&(this.min=this._userMin||m[0],this.max=this._userMax||m[m.length-1]);const E=this.min,D=function(g,l,r){let a=0,u=g.length;for(;a<u&&g[a]<l;)a++;for(;u>a&&g[u-1]>r;)u--;return a>0||u<g.length?g.slice(a,u):g}(m,E,this.max);return this._unit=a.unit||(u.autoSkip?Ut(a.minUnit,this.min,this.max,this._getLabelCapacity(E)):function(g,l,r,a,u){for(let m=Q.length-1;m>=Q.indexOf(r);m--){const E=Q[m];if(j[E].common&&g._adapter.diff(u,a,E)>=l-1)return E}return Q[r?Q.indexOf(r):0]}(this,D.length,a.minUnit,this.min,this.max)),this._majorUnit=u.major.enabled&&"year"!==this._unit?function(g){for(let l=Q.indexOf(g)+1,r=Q.length;l<r;++l)if(j[Q[l]].common)return Q[l]}(this._unit):void 0,this.initOffsets(m),r.reverse&&D.reverse(),Ge(this,D,this._majorUnit)}initOffsets(r){let m,E,a=0,u=0;this.options.offset&&r.length&&(m=this.getDecimalForValue(r[0]),a=1===r.length?1-m:(this.getDecimalForValue(r[1])-m)/2,E=this.getDecimalForValue(r[r.length-1]),u=1===r.length?E:(E-this.getDecimalForValue(r[r.length-2]))/2);const S=r.length<3?.5:.25;a=ue(a,0,S),u=ue(u,0,S),this._offsets={start:a,end:u,factor:1/(a+1+u)}}_generate(){const r=this._adapter,a=this.min,u=this.max,m=this.options,E=m.time,S=E.unit||Ut(E.minUnit,a,u,this._getLabelCapacity(a)),D=at(E.stepSize,1),N="week"===S&&E.isoWeekday,K=kt(N)||!0===N,ft={};let zt,ae,Ot=a;if(K&&(Ot=+r.startOf(Ot,"isoWeek",N)),Ot=+r.startOf(Ot,K?"day":S),r.diff(u,a,S)>1e5*D)throw new Error(a+" and "+u+" are too far apart with stepSize of "+D+" "+S);const ye="data"===m.ticks.source&&this.getDataTimestamps();for(zt=Ot,ae=0;zt<u;zt=+r.add(zt,D,S),ae++)me(ft,zt,ye);return(zt===u||"ticks"===m.bounds||1===ae)&&me(ft,zt,ye),Object.keys(ft).sort((Re,Oe)=>Re-Oe).map(Re=>+Re)}getLabelForValue(r){const u=this.options.time;return this._adapter.format(r,u.tooltipFormat?u.tooltipFormat:u.displayFormats.datetime)}_tickFormatFunction(r,a,u,m){const E=this.options,S=E.time.displayFormats,D=this._unit,N=this._majorUnit,ft=N&&S[N],Ot=u[a],ae=this._adapter.format(r,m||(N&&ft&&Ot&&Ot.major?ft:D&&S[D])),ye=E.ticks.callback;return ye?rt(ye,[ae,a,u],this):ae}generateTickLabels(r){let a,u,m;for(a=0,u=r.length;a<u;++a)m=r[a],m.label=this._tickFormatFunction(m.value,a,r)}getDecimalForValue(r){return null===r?NaN:(r-this.min)/(this.max-this.min)}getPixelForValue(r){const a=this._offsets,u=this.getDecimalForValue(r);return this.getPixelForDecimal((a.start+u)*a.factor)}getValueForPixel(r){const a=this._offsets,u=this.getDecimalForPixel(r)/a.factor-a.end;return this.min+u*(this.max-this.min)}_getLabelSize(r){const a=this.options.ticks,u=this.ctx.measureText(r).width,m=Ze(this.isHorizontal()?a.maxRotation:a.minRotation),E=Math.cos(m),S=Math.sin(m),D=this._resolveTickFontOptions(0).size;return{w:u*E+D*S,h:u*S+D*E}}_getLabelCapacity(r){const a=this.options.time,u=a.displayFormats,m=u[a.unit]||u.millisecond,E=this._tickFormatFunction(r,0,Ge(this,[r],this._majorUnit),m),S=this._getLabelSize(E),D=Math.floor(this.isHorizontal()?this.width/S.w:this.height/S.h)-1;return D>0?D:1}getDataTimestamps(){let a,u,r=this._cache.data||[];if(r.length)return r;const m=this.getMatchingVisibleMetas();if(this._normalized&&m.length)return this._cache.data=m[0].controller.getAllParsedValues(this);for(a=0,u=m.length;a<u;++a)r=r.concat(m[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(r)}getLabelTimestamps(){const r=this._cache.labels||[];let a,u;if(r.length)return r;const m=this.getLabels();for(a=0,u=m.length;a<u;++a)r.push(Vt(this,m[a]));return this._cache.labels=this._normalized?r:this.normalize(r)}normalize(r){return so(r.sort(mt))}}return g.id="time",g.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},g})();function si(g,l,r){let m,E,S,D,a=0,u=g.length-1;r?(l>=g[a].pos&&l<=g[u].pos&&({lo:a,hi:u}=qo(g,"pos",l)),({pos:m,time:S}=g[a]),({pos:E,time:D}=g[u])):(l>=g[a].time&&l<=g[u].time&&({lo:a,hi:u}=qo(g,"time",l)),({time:m,pos:S}=g[a]),({time:E,pos:D}=g[u]));const N=E-m;return N?S+(D-S)*(l-m)/N:S}class Ci extends Qe{constructor(l){super(l),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const l=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(l);this._minPos=si(r,this.min),this._tableRange=si(r,this.max)-this._minPos,super.initOffsets(l)}buildLookupTable(l){const{min:r,max:a}=this,u=[],m=[];let E,S,D,N,K;for(E=0,S=l.length;E<S;++E)N=l[E],N>=r&&N<=a&&u.push(N);if(u.length<2)return[{time:r,pos:0},{time:a,pos:1}];for(E=0,S=u.length;E<S;++E)K=u[E+1],D=u[E-1],N=u[E],Math.round((K+D)/2)!==N&&m.push({time:N,pos:E/(S-1)});return m}_getTimestampsForTable(){let l=this._cache.all||[];if(l.length)return l;const r=this.getDataTimestamps(),a=this.getLabelTimestamps();return l=r.length&&a.length?this.normalize(r.concat(a)):r.length?r:a,l=this._cache.all=l,l}getDecimalForValue(l){return(si(this._table,l)-this._minPos)/this._tableRange}getValueForPixel(l){const r=this._offsets,a=this.getDecimalForPixel(l)/r.factor-r.end;return si(this._table,a*this._tableRange+this._minPos,!0)}}Ci.id="timeseries",Ci.defaults=Qe.defaults,Ce.register(ms,Ou,cu,Object.freeze({__proto__:null,CategoryScale:Jl,LinearScale:Nc,LogarithmicScale:Tl,RadialLinearScale:L,TimeScale:Qe,TimeSeriesScale:Ci}));const Ji=Ce;var Ii=f(54968),Xn=f(70262),Tn=f(93075),Oo=f(68675),io=f(54004),So=f(39841),Zt=f(5e3),Is=f(48966),mr=f(33290),Cr=f(53251),jn=f(67322),Lr=f(77531),Yr=f(91079),ba=f(69808),ya=f(47423),Zl=f(63874),ju=f(90508);function vh(g,l){if(1&g&&(Zt.TgZ(0,"mat-option",13),Zt._uU(1),Zt.qZA()),2&g){const r=l.$implicit;Zt.Q6J("value",r),Zt.xp6(1),Zt.hij(" ",r," ")}}function ra(g,l){if(1&g&&(Zt.TgZ(0,"mat-option",13),Zt._uU(1),Zt.qZA()),2&g){const r=l.$implicit;Zt.Q6J("value",r),Zt.xp6(1),Zt.hij(" ",r," ")}}function Yh(g,l){if(1&g){const r=Zt.EpF();Zt.TgZ(0,"tr"),Zt.TgZ(1,"td"),Zt._uU(2),Zt.qZA(),Zt.TgZ(3,"td"),Zt.TgZ(4,"button",14),Zt.NdJ("click",function(){const m=Zt.CHM(r).$implicit;return Zt.oxw().chooseDemo(m)}),Zt._uU(5),Zt.qZA(),Zt.qZA(),Zt.TgZ(6,"td"),Zt.TgZ(7,"b"),Zt._uU(8),Zt.qZA(),Zt._uU(9),Zt.qZA(),Zt.qZA()}if(2&g){const r=l.$implicit,a=l.index;let u,m;Zt.xp6(2),Zt.hij(" ",a+1," "),Zt.xp6(3),Zt.hij(" ",r.description," "),Zt.xp6(3),Zt.Oqu(null==r.categories||null==(u=r.categories.split(";"))?null:u.join(", ")),Zt.xp6(1),Zt.hij(" ",null==r.blocks||null==(m=r.blocks.split(";"))?null:m.join(", ")," ")}}function Xh(g,l){if(1&g){const r=Zt.EpF();Zt.TgZ(0,"button",14),Zt.NdJ("click",function(){return Zt.CHM(r),Zt.oxw().Verify()}),Zt.TgZ(1,"mat-icon"),Zt._uU(2,"save"),Zt.qZA(),Zt._uU(3," Verify LocalAPI "),Zt.qZA()}}function Hs(g,l){if(1&g){const r=Zt.EpF();Zt.TgZ(0,"tr"),Zt.TgZ(1,"td"),Zt._uU(2),Zt.qZA(),Zt.TgZ(3,"td"),Zt.TgZ(4,"button",14),Zt.NdJ("click",function(){const m=Zt.CHM(r).$implicit;return Zt.oxw().chooseDemo(m)}),Zt._uU(5),Zt.qZA(),Zt.qZA(),Zt.TgZ(6,"td"),Zt.TgZ(7,"b"),Zt._uU(8),Zt.qZA(),Zt._uU(9),Zt.qZA(),Zt.qZA()}if(2&g){const r=l.$implicit,a=l.index;let u,m;Zt.xp6(2),Zt.hij(" ",a+1," "),Zt.xp6(3),Zt.hij(" ",r.description||r.id," "),Zt.xp6(3),Zt.Oqu(null==r.categories||null==(u=r.categories.split(";"))?null:u.join(", ")),Zt.xp6(1),Zt.hij(" ",null==r.blocks||null==(m=r.blocks.split(";"))?null:m.join(", ")," ")}}let Ap=(()=>{class g{constructor(r,a){this.dialogRef=r,this.DetailsApp=a,this.BlocksLocal=[],this.demos=[],this.demosCategories=new Map,this.demosBlocks=new Map,this.demosArray=null,this.myBlocks=new Tn.NI,this.optionsBlocks=[],this.filteredOptionsBlocks=null,this.myCategories=new Tn.NI,this.optionsCategories=[],this.filteredOptionsCategories=null,this.InitiateDemos(),this.loadFromLocalAPI()}loadFromLocalAPI(){var r,a;(null===(r=this.DetailsApp.LocalAPI)||void 0===r?void 0:r.WasAlive)&&(null===(a=this.DetailsApp.LocalAPI)||void 0===a||a.LoadBlocks().subscribe(u=>{this.BlocksLocal=u}))}Verify(){var r;null===(r=this.DetailsApp.LocalAPI)||void 0===r||r.IsAlive().subscribe(a=>{a&&this.loadFromLocalAPI()})}InitiateDemos(){var r=this.DetailsApp.demoBlocks;this.demos=r.sort((a,u)=>a.description.localeCompare(u.description)),this.optionsCategories=[...new Set(r.map(a=>a.categories).filter(a=>(null==a?void 0:a.length)>0).flatMap(a=>a.split(";")).filter(a=>(null==a?void 0:a.length)>0).sort((a,u)=>a.toLocaleLowerCase().localeCompare(u.toLocaleLowerCase())))],this.optionsBlocks=[...new Set(r.map(a=>a.blocks).filter(a=>(null==a?void 0:a.length)>0).flatMap(a=>a.split(";")).filter(a=>(null==a?void 0:a.length)>0).sort((a,u)=>a.toLowerCase().localeCompare(u.toLowerCase())))],this.filteredOptionsBlocks=this.myBlocks.valueChanges.pipe((0,Oo.O)(""),(0,io.U)(a=>{var u=(a||"").trim();return this._filter(u,this.optionsBlocks)})),this.filteredOptionsCategories=this.myCategories.valueChanges.pipe((0,Oo.O)(""),(0,io.U)(a=>{var u=(a||"").trim();return this._filter(u,this.optionsCategories)})),this.demosArray=(0,So.a)([this.myBlocks.valueChanges.pipe((0,Oo.O)("")),this.myCategories.valueChanges.pipe((0,Oo.O)(""))]).pipe((0,Oo.O)(this.demos),(0,io.U)(([a,u])=>((Array.isArray(a)||"object"==typeof a)&&(a=""),(Array.isArray(u)||"object"==typeof u)&&(u=""),a=(a||"").trim().toLowerCase(),u=(u||"").trim().toLowerCase(),this.demos.filter(E=>{var S,D;return(0==a.length||(null===(S=E.blocks)||void 0===S?void 0:S.toLowerCase().indexOf(a))>-1)&&(0==u.length||(null===(D=E.categories)||void 0===D?void 0:D.toLowerCase().indexOf(u))>-1)}))))}ngOnInit(){}_filter(r,a){const u=r.toLowerCase();return 0==u.length?a:a.filter(m=>m.toLowerCase().includes(u))}chooseDemo(r){return this.dialogRef.close(r)}Close(){this.dialogRef.close()}}return g.\u0275fac=function(r){return new(r||g)(Zt.Y36(Is.so),Zt.Y36(mr.d))},g.\u0275cmp=Zt.Xpm({type:g,selectors:[["app-find-saved-blocks"]],decls:48,vars:15,consts:[["label","Demos"],[1,"example-form"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","Pick one","aria-label","Categories","matInput","",3,"formControl","matAutocomplete"],["autoCategories","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Pick one","aria-label","Blocks","matInput","",3,"formControl","matAutocomplete"],["autoBlocks","matAutocomplete"],[4,"ngFor","ngForOf"],["label","Saved on local"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["label","CLOUD","disabled","disabled"],["mat-raised-button","","id","blocks","color","accent",3,"click"],[3,"value"],["mat-raised-button","","color","primary",3,"click"]],template:function(r,a){if(1&r&&(Zt.TgZ(0,"mat-tab-group"),Zt.TgZ(1,"mat-tab",0),Zt.TgZ(2,"form",1),Zt.TgZ(3,"mat-form-field",2),Zt.TgZ(4,"mat-label"),Zt._uU(5,"Categories"),Zt.qZA(),Zt._UZ(6,"input",3),Zt.TgZ(7,"mat-autocomplete",null,4),Zt.YNc(9,vh,2,2,"mat-option",5),Zt.ALo(10,"async"),Zt.qZA(),Zt.qZA(),Zt.TgZ(11,"mat-form-field",2),Zt.TgZ(12,"mat-label"),Zt._uU(13,"Blocks"),Zt.qZA(),Zt._UZ(14,"input",6),Zt.TgZ(15,"mat-autocomplete",null,7),Zt.YNc(17,ra,2,2,"mat-option",5),Zt.ALo(18,"async"),Zt.qZA(),Zt.qZA(),Zt.qZA(),Zt.TgZ(19,"table"),Zt.TgZ(20,"thead"),Zt.TgZ(21,"tr"),Zt.TgZ(22,"th"),Zt._uU(23,"Number"),Zt.qZA(),Zt.TgZ(24,"th"),Zt._uU(25,"Name"),Zt.qZA(),Zt.TgZ(26,"th"),Zt._uU(27,"Details"),Zt.qZA(),Zt.qZA(),Zt.qZA(),Zt.YNc(28,Yh,10,4,"tr",8),Zt.ALo(29,"async"),Zt.qZA(),Zt.qZA(),Zt.TgZ(30,"mat-tab",9),Zt.YNc(31,Xh,4,0,"button",10),Zt.TgZ(32,"table"),Zt.TgZ(33,"thead"),Zt.TgZ(34,"tr"),Zt.TgZ(35,"th"),Zt._uU(36,"Number"),Zt.qZA(),Zt.TgZ(37,"th"),Zt._uU(38,"Name"),Zt.qZA(),Zt.TgZ(39,"th"),Zt._uU(40,"Details"),Zt.qZA(),Zt.qZA(),Zt.qZA(),Zt.YNc(41,Hs,10,4,"tr",8),Zt.qZA(),Zt.qZA(),Zt.TgZ(42,"mat-tab",11),Zt._uU(43," Saved on Cloud "),Zt.qZA(),Zt.qZA(),Zt.TgZ(44,"button",12),Zt.NdJ("click",function(){return a.Close()}),Zt.TgZ(45,"mat-icon"),Zt._uU(46,"close"),Zt.qZA(),Zt._uU(47," Close\n"),Zt.qZA()),2&r){const u=Zt.MAs(8),m=Zt.MAs(16);Zt.xp6(6),Zt.Q6J("formControl",a.myCategories)("matAutocomplete",u),Zt.xp6(3),Zt.Q6J("ngForOf",Zt.lcZ(10,9,a.filteredOptionsCategories)),Zt.xp6(5),Zt.Q6J("formControl",a.myBlocks)("matAutocomplete",m),Zt.xp6(3),Zt.Q6J("ngForOf",Zt.lcZ(18,11,a.filteredOptionsBlocks)),Zt.xp6(11),Zt.Q6J("ngForOf",Zt.lcZ(29,13,a.demosArray)),Zt.xp6(3),Zt.Q6J("ngIf",!(null!=a.DetailsApp.LocalAPI&&a.DetailsApp.LocalAPI.WasAlive)),Zt.xp6(10),Zt.Q6J("ngForOf",a.BlocksLocal)}},directives:[Cr.SP,Cr.uX,Tn._Y,Tn.JL,Tn.F,jn.KE,jn.hX,Lr.Nt,Tn.Fj,Yr.ZL,Tn.JJ,Tn.oH,Yr.XC,ba.sg,ba.O5,ya.lW,Zl.Hw,ju.ey],pipes:[ba.Ov],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid}table[_ngcontent-%COMP%]{width:100%;height:480px;margin:0 auto;display:block;overflow-x:auto;border-spacing:0}tbody[_ngcontent-%COMP%]{white-space:nowrap}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:5px 10px;border-top-width:0;border-left-width:0}th[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;vertical-align:bottom}th[_ngcontent-%COMP%]:last-child, td[_ngcontent-%COMP%]:last-child{border-right-width:0}tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom-width:0}"]}),g})();class Cl{constructor(l){this.table=l}reloadData(l,r){return this.table.dataLoader.load(l,void 0,void 0,void 0,r)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(l){return this.table.eventBus.subscribed(l)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(l){return this.table.externalEvents.subscribed(l)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(l,r){return void 0!==r&&(this.table.options[l]=r),this.table.options[l]}setOption(l,r){return void 0!==r&&(this.table.options[l]=r),this.table.options[l]}module(l){return this.table.module(l)}}class uo extends Cl{constructor(l,r){super(l),this._handler=null}initialize(){}registerTableOption(l,r){this.table.optionsList.register(l,r)}registerColumnOption(l,r){this.table.columnManager.optionsList.register(l,r)}registerTableFunction(l,r){void 0===this.table[l]?this.table[l]=r:console.warn("Unable to bind table function, name already in use",l)}registerComponentFunction(l,r,a){return this.table.componentFunctionBinder.bind(l,r,a)}registerDataHandler(l,r){this.table.rowManager.registerDataPipelineHandler(l,r),this._handler=l}registerDisplayHandler(l,r){this.table.rowManager.registerDisplayPipelineHandler(l,r),this._handler=l}refreshData(l,r){r||(r=this._handler),r&&this.table.rowManager.refreshActiveData(r,!1,l)}}class _r{static elVisible(l){return!(l.offsetWidth<=0&&l.offsetHeight<=0)}static elOffset(l){var r=l.getBoundingClientRect();return{top:r.top+window.pageYOffset-document.documentElement.clientTop,left:r.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(l,r,a=[]){var u={}.__proto__,m=[].__proto__;for(var E in r||(r=Object.assign(Array.isArray(l)?[]:{},l)),l){let D,N,S=l[E];null!=S&&"object"==typeof S&&(S.__proto__===u||S.__proto__===m)&&(D=a.findIndex(K=>K.subject===S),D>-1?r[E]=a[D].copy:(N=Object.assign(Array.isArray(S)?[]:{},S),a.unshift({subject:S,copy:N}),r[E]=this.deepClone(S,N,a)))}return r}}var Op={};let bh=(()=>{class g extends uo{constructor(r){super(r),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(r){var a=!1,u={};this.allowedTypes.forEach(m=>{var S,E="accessor"+(m.charAt(0).toUpperCase()+m.slice(1));r.definition[E]&&(S=this.lookupAccessor(r.definition[E]))&&(a=!0,u[E]={accessor:S,params:r.definition[E+"Params"]||{}})}),a&&(r.modules.accessor=u)}lookupAccessor(r){var a=!1;switch(typeof r){case"string":g.accessors[r]?a=g.accessors[r]:console.warn("Accessor Error - No such accessor found, ignoring: ",r);break;case"function":a=r}return a}transformRow(r,a){var u="accessor"+(a.charAt(0).toUpperCase()+a.slice(1)),m=r.getComponent(),E=_r.deepClone(r.data||{});return this.table.columnManager.traverse(function(S){var D,N,K,ft;S.modules.accessor&&(N=S.modules.accessor[u]||S.modules.accessor.accessor||!1)&&"undefined"!=(D=S.getFieldValue(E))&&(ft=S.getComponent(),K="function"==typeof N.params?N.params(D,E,a,ft,m):N.params,S.setFieldValue(E,N.accessor(D,E,a,K,ft,m)))}),E}}return g.moduleName="accessor",g.accessors=Op,g})();var zu={method:"GET"};function Ln(g,l){var r=[];if(l=l||"",Array.isArray(g))g.forEach((u,m)=>{r=r.concat(Ln(u,l?l+"["+m+"]":m))});else if("object"==typeof g)for(var a in g)r=r.concat(Ln(g[a],l?l+"["+a+"]":a));else r.push({key:l,value:g});return r}function Yu(g){var l=Ln(g),r=[];return l.forEach(function(a){r.push(encodeURIComponent(a.key)+"="+encodeURIComponent(a.value))}),r.join("&")}function Xd(g,l,r){return g&&r&&Object.keys(r).length&&(!l.method||"get"==l.method.toLowerCase())&&(l.method="get",g+=(g.includes("?")?"&":"?")+Yu(r)),g}function Kd(g,l,r){var a;return new Promise((u,m)=>{if(g=this.urlGenerator.call(this.table,g,l,r),"GET"!=l.method.toUpperCase())if(a="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var E in a.headers)l.headers||(l.headers={}),void 0===l.headers[E]&&(l.headers[E]=a.headers[E]);l.body=a.body.call(this,g,l,r)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);g?(void 0===l.headers&&(l.headers={}),void 0===l.headers.Accept&&(l.headers.Accept="application/json"),void 0===l.headers["X-Requested-With"]&&(l.headers["X-Requested-With"]="XMLHttpRequest"),void 0===l.mode&&(l.mode="cors"),"cors"==l.mode?(void 0===l.headers.Origin&&(l.headers.Origin=window.location.origin),void 0===l.credentials&&(l.credentials="same-origin")):void 0===l.credentials&&(l.credentials="include"),fetch(g,l).then(S=>{S.ok?S.json().then(D=>{u(D)}).catch(D=>{m(D),console.warn("Ajax Load Error - Invalid JSON returned",D)}):(console.error("Ajax Load Error - Connection Error: "+S.status,S.statusText),m(S))}).catch(S=>{console.error("Ajax Load Error - Connection Error: ",S),m(S)})):(console.warn("Ajax Load Error - No URL Set"),u([]))})}function Xu(g,l){var r=[];if(l=l||"",Array.isArray(g))g.forEach((u,m)=>{r=r.concat(Xu(u,l?l+"["+m+"]":m))});else if("object"==typeof g)for(var a in g)r=r.concat(Xu(g[a],l?l+"["+a+"]":a));else r.push({key:l,value:g});return r}var Sl={json:{headers:{"Content-Type":"application/json"},body:function(g,l,r){return JSON.stringify(r)}},form:{headers:{},body:function(g,l,r){var a=Xu(r),u=new FormData;return a.forEach(function(m){u.append(m.key,m.value)}),u}}};let Jd=(()=>{class g extends uo{constructor(r){super(r),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=g.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||g.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||g.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(r,a,u,m){return!((r||!this.url)&&"string"!=typeof r)}requestData(r,a,u,m,E){return this.requestDataCheck(r)?(r&&this.setUrl(r),a&&this.setParams(a,!0),u&&this.setConfig(u),this.sendRequest()):E}setParams(r,a){if(a){this.params=this.params||{};for(let u in r)this.params[u]=r[u]}else this.params=r}getParams(){return this.params||{}}setConfig(r){if(this._loadDefaultConfig(),"string"==typeof r)this.config.method=r;else for(let a in r)this.config[a]=r[a]}_loadDefaultConfig(r){if(!this.config||r){this.config={};for(let a in g.defaultConfig)this.config[a]=g.defaultConfig[a]}}setUrl(r){this.url=r}getUrl(){return this.url}sendRequest(r){var a=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(a,this.config,this.params).then(u=>(this.table.options.ajaxResponse&&(u=this.table.options.ajaxResponse.call(this.table,this.url,this.params,u)),u)):Promise.reject()}}return g.moduleName="ajax",g.defaultConfig=zu,g.defaultURLGenerator=Xd,g.defaultLoaderPromise=Kd,g.contentTypeFormatters=Sl,g})();var Ql={replace:function(g){return this.table.setData(g)},update:function(g){return this.table.updateOrAddData(g)},insert:function(g){return this.table.addData(g)}},za={table:function(g){var l=[],r=!0,a=this.table.columnManager.columns,u=[],m=[];return(g=g.split("\n")).forEach(function(E){l.push(E.split("\t"))}),!(!l.length||1===l.length&&l[0].length<2)&&(l[0].forEach(function(E){var S=a.find(function(D){return E&&D.definition.title&&E.trim()&&D.definition.title.trim()===E.trim()});S?u.push(S):r=!1}),r||(r=!0,u=[],l[0].forEach(function(E){var S=a.find(function(D){return E&&D.field&&E.trim()&&D.field.trim()===E.trim()});S?u.push(S):r=!1}),r||(u=this.table.columnManager.columnsByIndex)),r&&l.shift(),l.forEach(function(E){var S={};E.forEach(function(D,N){u[N]&&(S[u[N].field]=D)}),m.push(S)}),m)}};let wl=(()=>{class g extends uo{constructor(r){super(r),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",r=>{var a,u;if(!this.blocked){if(r.preventDefault(),this.customSelection)a=this.customSelection,this.table.options.clipboardCopyFormatter&&(a=this.table.options.clipboardCopyFormatter("plain",a));else{var m=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");a=(u=this.table.modules.export.genereateHTMLTable(m))?this.generatePlainContent(m):"",this.table.options.clipboardCopyFormatter&&(a=this.table.options.clipboardCopyFormatter("plain",a),u=this.table.options.clipboardCopyFormatter("html",u))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",a):r.clipboardData&&r.clipboardData.setData?(r.clipboardData.setData("text/plain",a),u&&r.clipboardData.setData("text/html",u)):r.originalEvent&&r.originalEvent.clipboardData.setData&&(r.originalEvent.clipboardData.setData("text/plain",a),u&&r.originalEvent.clipboardData.setData("text/html",u)),this.dispatchExternal("clipboardCopied",a,u),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",r=>{this.paste(r)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(r){var a=[];return r.forEach(u=>{var m=[];u.columns.forEach(E=>{var S="";if(E)if("group"===u.type&&(E.value=E.component.getKey()),null===E.value)S="";else switch(typeof E.value){case"object":S=JSON.stringify(E.value);break;case"undefined":S="";break;default:S=E.value}m.push(S)}),a.push(m.join("\t"))}),a.join("\n")}copy(r,a){var u,m;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=r||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((r=document.createRange()).selectNodeContents(this.table.element),(u=window.getSelection()).toString()&&a&&(this.customSelection=u.toString()),u.removeAllRanges(),u.addRange(r)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((m=document.body.createTextRange()).moveToElementText(this.table.element),m.select()),document.execCommand("copy"),u&&u.removeAllRanges())}setPasteAction(r){switch(typeof r){case"string":this.pasteAction=g.pasteActions[r],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",r);break;case"function":this.pasteAction=r}}setPasteParser(r){switch(typeof r){case"string":this.pasteParser=g.pasteParsers[r],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",r);break;case"function":this.pasteParser=r}}paste(r){var a,u,m;this.checkPaseOrigin(r)&&(a=this.getPasteData(r),(u=this.pasteParser.call(this,a))?(r.preventDefault(),this.table.modExists("mutator")&&(u=this.mutateData(u)),m=this.pasteAction.call(this,u),this.dispatchExternal("clipboardPasted",a,u,m)):this.dispatchExternal("clipboardPasteError",a))}mutateData(r){var a=[];return Array.isArray(r)?r.forEach(u=>{a.push(this.table.modules.mutator.transformRow(u,"clipboard"))}):a=r,a}checkPaseOrigin(r){var a=!0;return("DIV"!=r.target.tagName||this.table.modules.edit.currentCell)&&(a=!1),a}getPasteData(r){var a;return window.clipboardData&&window.clipboardData.getData?a=window.clipboardData.getData("Text"):r.clipboardData&&r.clipboardData.getData?a=r.clipboardData.getData("text/plain"):r.originalEvent&&r.originalEvent.clipboardData.getData&&(a=r.originalEvent.clipboardData.getData("text/plain")),a}}return g.moduleName="clipboard",g.pasteActions=Ql,g.pasteParsers=za,g})();class Kh{constructor(l){return this._row=l,new Proxy(this,{get:function(r,a,u){return void 0!==r[a]?r[a]:r._row.table.componentFunctionBinder.handle("row",r._row,a)}})}getData(l){return this._row.getData(l)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var l=[];return this._row.getCells().forEach(function(r){l.push(r.getComponent())}),l}getCell(l){var r=this._row.getCell(l);return!!r&&r.getComponent()}_getSelf(){return this._row}}class Ku{constructor(l){return this._cell=l,new Proxy(this,{get:function(r,a,u){return void 0!==r[a]?r[a]:r._cell.table.componentFunctionBinder.handle("cell",r._cell,a)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(l,r){void 0===r&&(r=!0),this._cell.setValue(l,r)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class fu extends Cl{constructor(l,r){super(l.table),this.table=l.table,this.column=l,this.row=r,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var l=this.element,r=this.column.getField();l.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(l.style.display="inline-flex",l.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(l.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),r&&l.setAttribute("tabulator-field",r),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(E=>{l.classList.add(E)}),"hover"===this.table.options.tooltipGenerationMode&&l.addEventListener("mouseenter",E=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var l;switch(typeof(l=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(l instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(l)}else this.element.innerHTML="",null!=l&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",l);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=l}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var l=this.column.tooltip;l?(!0===l?l=this.value:"function"==typeof l&&!1===(l=l(this.getComponent()))&&(l=""),void 0===l&&(l=""),this.element.setAttribute("title",l)):this.element.setAttribute("title","")}getElement(l){return this.loaded||(this.loaded=!0,l||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(l,r){this.setValueProcessData(l,r)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(l,r){var a=!1;return this.value!=l&&(a=!0,r&&(l=this.chain("cell-value-changing",[this,l],null,l))),this.setValueActual(l),a&&this.dispatch("cell-value-changed",this),a}setValueActual(l){this.oldValue=this.value,this.value=l,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,l),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Ku(this)),this.component}}class Jh{constructor(l){return this._column=l,this.type="ColumnComponent",new Proxy(this,{get:function(r,a,u){return void 0!==r[a]?r[a]:r._column.table.componentFunctionBinder.handle("column",r._column,a)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var l=[];return this._column.cells.forEach(function(r){l.push(r.getComponent())}),l}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(l){l.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(l){l.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var l=[];return this._column.columns.length&&this._column.columns.forEach(function(r){l.push(r.getComponent())}),l}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(l,r){var a=this._column.table.columnManager.findColumn(l);a?this._column.table.columnManager.moveColumn(this._column,a,r):console.warn("Move Error - No matching column found:",a)}getNextColumn(){var l=this._column.nextColumn();return!!l&&l.getComponent()}getPrevColumn(){var l=this._column.prevColumn();return!!l&&l.getComponent()}updateDefinition(l){return this._column.updateDefinition(l)}getWidth(){return this._column.getWidth()}setWidth(l){var r;return r=!0===l?this._column.reinitializeWidth(!0):this._column.setWidth(l),this._column.table.columnManager.renderer.rerenderColumns(!0),r}}var yh={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let $h=(()=>{class g extends Cl{constructor(r,a){super(a.table),this.definition=r,this.parent=a,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((u,m)=>{var E=new g(u,this);this.attachColumn(E)}),this.checkColumnVisibility()):a.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var r=document.createElement("div");return r.classList.add("tabulator-col"),r.setAttribute("role","columnheader"),r.setAttribute("aria-sort","none"),r}createGroupElement(){var r=document.createElement("div");return r.classList.add("tabulator-col-group-cols"),r}mapDefinitions(){var r=this.table.options.columnDefaults;if(r)for(let a in r)void 0===this.definition[a]&&(this.definition[a]=r[a]);this.definition=this.table.columnManager.optionsList.generate(g.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(r=>{-1===g.defaultOptionList.indexOf(r)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",r)})}setField(r){this.field=r,this.fieldStructure=r?this.table.options.nestedFieldSeparator?r.split(this.table.options.nestedFieldSeparator):[r]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(r){this.parent.registerColumnPosition(r)}registerColumnField(r){this.parent.registerColumnField(r)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(r){r.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var r=this.definition,a=void 0===r.headerTooltip?r.tooltip:r.headerTooltip;a?!0===a?r.field?this.langBind("columns|"+r.field,u=>{this.element.setAttribute("title",u||r.title)}):this.element.setAttribute("title",r.title):("function"==typeof a&&!1===(a=a(this.getComponent()))&&(a=""),this.element.setAttribute("title",a)):this.element.setAttribute("title","")}_initialize(){for(var r=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);r.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===r.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",a=>{this.setTooltip()})}_bindEvents(){var a,u,m,r=this.definition;"function"==typeof r.headerClick&&this.element.addEventListener("click",E=>{r.headerClick(E,this.getComponent())}),"function"==typeof r.headerDblClick&&this.element.addEventListener("dblclick",E=>{r.headerDblClick(E,this.getComponent())}),"function"==typeof r.headerContext&&this.element.addEventListener("contextmenu",E=>{r.headerContext(E,this.getComponent())}),"function"==typeof r.headerTap&&(m=!1,this.element.addEventListener("touchstart",E=>{m=!0},{passive:!0}),this.element.addEventListener("touchend",E=>{m&&r.headerTap(E,this.getComponent()),m=!1})),"function"==typeof r.headerDblTap&&(a=null,this.element.addEventListener("touchend",E=>{a?(clearTimeout(a),a=null,r.headerDblTap(E,this.getComponent())):a=setTimeout(()=>{clearTimeout(a),a=null},300)})),"function"==typeof r.headerTapHold&&(u=null,this.element.addEventListener("touchstart",E=>{clearTimeout(u),u=setTimeout(function(){clearTimeout(u),u=null,m=!1,r.headerTapHold(E,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",E=>{clearTimeout(u),u=null}))}_buildColumnHeader(){var r=this.definition;this.dispatch("column-layout",this),void 0!==r.visible&&(r.visible?this.show(!0):this.hide(!0)),r.cssClass&&r.cssClass.split(" ").forEach(m=>{this.element.classList.add(m)}),r.field&&this.element.setAttribute("tabulator-field",r.field),this.setMinWidth(parseInt(r.minWidth)),r.maxWidth&&this.setMaxWidth(parseInt(r.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var u=document.createElement("div");return u.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),u.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),u}_buildColumnHeaderTitle(){var r=this.definition,a=document.createElement("div");if(a.classList.add("tabulator-col-title"),r.editableTitle){var u=document.createElement("input");u.classList.add("tabulator-title-editor"),u.addEventListener("click",m=>{m.stopPropagation(),u.focus()}),u.addEventListener("change",()=>{r.title=u.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),a.appendChild(u),r.field?this.langBind("columns|"+r.field,m=>{u.value=m||r.title||"&nbsp;"}):u.value=r.title||"&nbsp;"}else r.field?this.langBind("columns|"+r.field,m=>{this._formatColumnHeaderTitle(a,m||r.title||"&nbsp;")}):this._formatColumnHeaderTitle(a,r.title||"&nbsp;");return a}_formatColumnHeaderTitle(r,a){var u=this.chain("column-format",[this,a,r],null,()=>a);switch(typeof u){case"object":u instanceof Node?r.appendChild(u):(r.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",u));break;case"undefined":case"null":r.innerHTML="";break;default:r.innerHTML=u}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(a=>{this.element.classList.add(a)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(r){return r[this.field]}_getNestedData(r){var E,a=r,u=this.fieldStructure,m=u.length;for(let S=0;S<m&&(E=a=a[u[S]],a);S++);return E}_setFlatData(r,a){this.field&&(r[this.field]=a)}_setNestedData(r,a){var u=r,m=this.fieldStructure,E=m.length;for(let S=0;S<E;S++)if(S==E-1)u[m[S]]=a;else{if(!u[m[S]]){if(void 0===a)break;u[m[S]]={}}u=u[m[S]]}}attachColumn(r){this.groupElement?(this.columns.push(r),this.groupElement.appendChild(r.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(r,a){var u=this.parent.isGroup?this.parent.getGroupElement().clientHeight:a||this.parent.getHeadersElement().clientHeight;this.element.style.height=u+"px",this.isGroup&&(this.groupElement.style.minHeight=u-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==r&&(this.element.style.paddingTop="bottom"===r?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(m){m.verticalAlign(r)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(r){r.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(r){var a=[];return this.isGroup&&r&&(this.columns.forEach(function(u){a.push(u.getDefinition(!0))}),this.definition.columns=a),this.definition}checkColumnVisibility(){var r=!1;this.columns.forEach(function(a){a.visible&&(r=!0)}),r?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(r,a){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(u){u.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,a),r||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(r,a){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(u){u.hide()}),this.dispatch("column-hide",this),r||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var r=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(a){a.visible&&(r+=a.getWidth())}),this.contentElement.style.maxWidth=r-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(r){var a=this.columns.indexOf(r);a>-1&&this.columns.splice(a,1),this.columns.length||this.delete()}setWidth(r){this.widthFixed=!0,this.setWidthActual(r)}setWidthActual(r){isNaN(r)&&(r=Math.floor(this.table.element.clientWidth/100*parseInt(r))),r=Math.max(this.minWidth,r),this.maxWidth&&(r=Math.min(this.maxWidth,r)),this.width=r,this.widthStyled=r?r+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(a){a.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var r=[];this.cells.forEach(function(a){a.row.heightInitialized&&(null!==a.row.getElement().offsetParent?(r.push(a.row),a.row.clearCellHeight()):a.row.heightInitialized=!1)}),r.forEach(function(a){a.calcHeight()}),r.forEach(function(a){a.setCellHeight()})}getWidth(){var r=0;return this.isGroup?this.columns.forEach(function(a){a.visible&&(r+=a.getWidth())}):r=this.width,r}getHeight(){return this.element.offsetHeight}setMinWidth(r){this.minWidth=r,this.minWidthStyled=r?r+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(a){a.setMinWidth()})}setMaxWidth(r){this.maxWidth=r,this.maxWidthStyled=r?r+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(a){a.setMaxWidth()})}delete(){return new Promise((r,a)=>{this.isGroup&&this.columns.forEach(function(m){m.delete()}),this.dispatch("column-delete",this);var u=this.cells.length;for(let m=0;m<u;m++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),r()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(r){var a=new fu(this,r);return this.cells.push(a),a}nextColumn(){var r=this.table.columnManager.findColumnIndex(this);return r>-1&&this._nextVisibleColumn(r+1)}_nextVisibleColumn(r){var a=this.table.columnManager.getColumnByIndex(r);return!a||a.visible?a:this._nextVisibleColumn(r+1)}prevColumn(){var r=this.table.columnManager.findColumnIndex(this);return r>-1&&this._prevVisibleColumn(r-1)}_prevVisibleColumn(r){var a=this.table.columnManager.getColumnByIndex(r);return!a||a.visible?a:this._prevVisibleColumn(r-1)}reinitializeWidth(r){this.widthFixed=!1,void 0!==this.definition.width&&!r&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(a=>{a.clearWidth()}));var r=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(a=>{var u=a.getWidth();u>r&&(r=u)}),r&&this.setWidthActual(r+1))}}updateDefinition(r){var a;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(a=Object.assign({},this.getDefinition()),a=Object.assign(a,r),this.table.columnManager.addColumn(a,!1,this).then(u=>(a.field==this.field&&(this.field=!1),this.delete().then(()=>u.getComponent()))))}deleteCell(r){var a=this.cells.indexOf(r);a>-1&&this.cells.splice(a,1)}getComponent(){return this.component||(this.component=new Jh(this)),this.component}}return g.defaultOptionList=yh,g})();class gu{constructor(l){return this._row=l,new Proxy(this,{get:function(r,a,u){return void 0!==r[a]?r[a]:r._row.table.componentFunctionBinder.handle("row",r._row,a)}})}getData(l){return this._row.getData(l)}getElement(){return this._row.getElement()}getCells(){var l=[];return this._row.getCells().forEach(function(r){l.push(r.getComponent())}),l}getCell(l){var r=this._row.getCell(l);return!!r&&r.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(l){return this._row.table.rowManager.getRowPosition(this._row,l)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(l,r){this._row.moveToRow(l,r)}update(l){return this._row.updateData(l)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var l=this._row.nextRow();return l&&l.getComponent()}getPrevRow(){var l=this._row.prevRow();return l&&l.getComponent()}}class Vs extends Cl{constructor(l,r,a="row"){super(r.table),this.parent=r,this.data={},this.type=a,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(l)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var l=document.createElement("div");l.classList.add("tabulator-row"),l.setAttribute("role","row"),this.element=l}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(l){if(this.create(),!this.initialized||l){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),l&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(l){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(l){var r=0,a=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(u){var m=u.getHeight();m>r&&(r=m)}),this.height=l?Math.max(r,a):this.manualHeight?this.height:Math.max(r,a),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(l){l.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(l){l.clearHeight()})}normalizeHeight(l){l&&this.clearCellHeight(),this.calcHeight(l),this.setCellHeight()}setHeight(l,r){(this.height!=l||r)&&(this.manualHeight=!0,this.height=l,this.heightStyled=l?l+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(l){var r=this.cells.indexOf(l);r>-1&&this.cells.splice(r,1)}setData(l){this.data=this.chain("row-data-init-before",[this,l],void 0,l),this.dispatch("row-data-init-after",this)}updateData(l){var u,r=this.element&&_r.elVisible(this.element),a={};return new Promise((m,E)=>{for(var S in"string"==typeof l&&(l=JSON.parse(l)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(a=Object.assign(a,this.data),a=Object.assign(a,l)),u=this.chain("row-data-changing",[this,a,l],null,l))this.data[S]=u[S];for(var S in this.dispatch("row-data-save-after",this),l)this.table.columnManager.getColumnsByFieldRoot(S).forEach(K=>{let ft=this.getCell(K.getField());if(ft){let Ot=K.getFieldValue(u);ft.getValue()!=Ot&&(ft.setValueProcessData(Ot),r&&ft.cellRendered())}});r?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,r,l),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),m()})}getData(l){return l?this.chain("row-data-retrieve",[this,l],null,this.data):this.data}getCell(l){return l=this.table.columnManager.findColumn(l),this.initialized||this.generateCells(),this.cells.find(function(a){return a.column===l})}getCellIndex(l){return this.cells.findIndex(function(r){return r===l})}findCell(l){return this.cells.find(r=>r.element===l)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(l,r){var a=this.table.rowManager.findRow(l);a?(this.table.rowManager.moveRowActual(this,a,!r),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",l)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(l){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,l),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var l=this.cells.length;for(let r=0;r<l;r++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new gu(this)),this.component}}var Zh={avg:function(g,l,r){var a=0,u=void 0!==r.precision?r.precision:2;return g.length&&(a=g.reduce(function(m,E){return Number(m)+Number(E)}),a/=g.length,a=!1!==u?a.toFixed(u):a),parseFloat(a).toString()},max:function(g,l,r){var a=null,u=void 0!==r.precision&&r.precision;return g.forEach(function(m){((m=Number(m))>a||null===a)&&(a=m)}),null!==a?!1!==u?a.toFixed(u):a:""},min:function(g,l,r){var a=null,u=void 0!==r.precision&&r.precision;return g.forEach(function(m){((m=Number(m))<a||null===a)&&(a=m)}),null!==a?!1!==u?a.toFixed(u):a:""},sum:function(g,l,r){var a=0,u=void 0!==r.precision&&r.precision;return g.length&&g.forEach(function(m){m=Number(m),a+=isNaN(m)?0:Number(m)}),!1!==u?a.toFixed(u):a},concat:function(g,l,r){var a=0;return g.length&&(a=g.reduce(function(u,m){return String(u)+String(m)})),a},count:function(g,l,r){var a=0;return g.length&&g.forEach(function(u){u&&a++}),a}};let Qh=(()=>{class g extends uo{constructor(r){super(r),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var r=document.createElement("div");return r.classList.add("tabulator-calcs-holder"),r}initialize(){this.genColumn=new $h({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(r){this.recalc(this.table.rowManager.activeRows),r&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(r){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(r){(r.column.definition.topCalc||r.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(r.row)):this.recalcActiveRows())}initializeColumnCheck(r){(r.definition.topCalc||r.definition.bottomCalc)&&this.initializeColumn(r)}initializeColumn(r){var a=r.definition,u={topCalcParams:a.topCalcParams||{},botCalcParams:a.bottomCalcParams||{}};if(a.topCalc){switch(typeof a.topCalc){case"string":g.calculations[a.topCalc]?u.topCalc=g.calculations[a.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.topCalc);break;case"function":u.topCalc=a.topCalc}u.topCalc&&(r.modules.columnCalcs=u,this.topCalcs.push(r),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(a.bottomCalc){switch(typeof a.bottomCalc){case"string":g.calculations[a.bottomCalc]?u.botCalc=g.calculations[a.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",a.bottomCalc);break;case"function":u.botCalc=a.bottomCalc}u.botCalc&&(r.modules.columnCalcs=u,this.botCalcs.push(r),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var r=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),r=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),r=!0),r&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(r){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-r+"px")}recalc(r){var a;if(this.topInitialized||this.botInitialized){if(this.rowsToData(r),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),a=this.generateRow("top",this.rowsToData(r)),this.topRow=a;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(a.getElement()),a.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),a=this.generateRow("bottom",this.rowsToData(r)),this.botRow=a;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(a.getElement()),a.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(r){this.recalcGroup(this.table.modules.groupRows.getRowGroup(r))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(a=>{this.recalcGroup(a)})}recalcGroup(r){var a,u;r&&r.calcs&&(r.calcs.bottom&&(a=this.rowsToData(r.rows),u=this.generateRowData("bottom",a),r.calcs.bottom.updateData(u),r.calcs.bottom.reinitialize()),r.calcs.top&&(a=this.rowsToData(r.rows),u=this.generateRowData("top",a),r.calcs.top.updateData(u),r.calcs.top.reinitialize()))}generateTopRow(r){return this.generateRow("top",this.rowsToData(r))}generateBottomRow(r){return this.generateRow("bottom",this.rowsToData(r))}rowsToData(r){var a=[];return r.forEach(u=>{if(a.push(u.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&u.modules.dataTree.open){var m=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(u));a=a.concat(m)}}),a}generateRow(r,a){var m,u=this.generateRowData(r,a);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),m=new Vs(u,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),m.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+r),m.component=!1,m.getComponent=()=>(m.component||(m.component=new Kh(this)),m.component),m.generateCells=()=>{var E=[];this.table.columnManager.columnsByIndex.forEach(S=>{this.genColumn.setField(S.getField()),this.genColumn.hozAlign=S.hozAlign,this.genColumn.modules.format=S.definition[r+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(S.definition[r+"CalcFormatter"]),params:S.definition[r+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=S.definition.cssClass;var D=new fu(this.genColumn,m);D.getElement(),D.column=S,D.setWidth(),S.cells.push(D),E.push(D),S.visible||D.hide()}),m.cells=E},m}generateRowData(r,a){var S,D,u={},E="top"==r?"topCalc":"botCalc";return("top"==r?this.topCalcs:this.botCalcs).forEach(function(N){var K=[];N.modules.columnCalcs&&N.modules.columnCalcs[E]&&(a.forEach(function(ft){K.push(N.getFieldValue(ft))}),S="function"==typeof N.modules.columnCalcs[D=E+"Params"]?N.modules.columnCalcs[D](K,a):N.modules.columnCalcs[D],N.setFieldValue(u,N.modules.columnCalcs[E](K,a,S)))}),u}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var r={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(u=>{r[u.getKey()]=this.getGroupResults(u)}):r={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},r}getGroupResults(r){var a=r._getSelf(),u=r.getSubGroups(),m={};return u.forEach(S=>{m[S.getKey()]=this.getGroupResults(S)}),{top:a.calcs.top?a.calcs.top.getData():{},bottom:a.calcs.bottom?a.calcs.bottom.getData():{},groups:m}}}return g.moduleName="columnCalcs",g.calculations=Zh,g})(),qh=(()=>{class g extends uo{constructor(r){super(r),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var r=null,a=this.table.columnManager.getFirstVisibileColumn(),u=this.table.options;switch(this.field=u.dataTreeChildField,this.indent=u.dataTreeChildIndent,this.elementField=u.dataTreeElementColumn||!!a&&a.field,u.dataTreeBranchElement&&(!0===u.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof u.dataTreeBranchElement?((r=document.createElement("div")).innerHTML=u.dataTreeBranchElement,this.branchEl=r.firstChild):this.branchEl=u.dataTreeBranchElement),u.dataTreeCollapseElement?"string"==typeof u.dataTreeCollapseElement?((r=document.createElement("div")).innerHTML=u.dataTreeCollapseElement,this.collapseEl=r.firstChild):this.collapseEl=u.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),u.dataTreeExpandElement?"string"==typeof u.dataTreeExpandElement?((r=document.createElement("div")).innerHTML=u.dataTreeExpandElement,this.expandEl=r.firstChild):this.expandEl=u.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof u.dataTreeStartExpanded){case"boolean":this.startOpen=function(m,E){return u.dataTreeStartExpanded};break;case"function":this.startOpen=u.dataTreeStartExpanded;break;default:this.startOpen=function(m,E){return u.dataTreeStartExpanded[E]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(r){return this.getTreeChildren(r,!0)}columnMoving(){var r=[];return this.table.rowManager.rows.forEach(a=>{r=r.concat(this.getTreeChildren(a,!1,!0))}),r}rowDataChanged(r,a,u){this.redrawNeeded(u)&&(this.initializeRow(r),a&&(this.layoutRow(r),this.refreshData(!0)))}initializeRow(r){var a=r.getData()[this.field],u=Array.isArray(a),m=u||!u&&"object"==typeof a&&null!==a;!m&&r.modules.dataTree&&r.modules.dataTree.branchEl&&r.modules.dataTree.branchEl.parentNode.removeChild(r.modules.dataTree.branchEl),!m&&r.modules.dataTree&&r.modules.dataTree.controlEl&&r.modules.dataTree.controlEl.parentNode.removeChild(r.modules.dataTree.controlEl),r.modules.dataTree={index:r.modules.dataTree?r.modules.dataTree.index:0,open:!!m&&(r.modules.dataTree?r.modules.dataTree.open:this.startOpen(r.getComponent(),0)),controlEl:!(!r.modules.dataTree||!m)&&r.modules.dataTree.controlEl,branchEl:!(!r.modules.dataTree||!m)&&r.modules.dataTree.branchEl,parent:!!r.modules.dataTree&&r.modules.dataTree.parent,children:m}}reinitializeRowChildren(r){this.getTreeChildren(r,!1,!0).forEach(function(u){u.reinitialize(!0)})}layoutRow(r){var u=(this.elementField?r.getCell(this.elementField):r.getCells()[0]).getElement(),m=r.modules.dataTree;m.branchEl&&(m.branchEl.parentNode&&m.branchEl.parentNode.removeChild(m.branchEl),m.branchEl=!1),m.controlEl&&(m.controlEl.parentNode&&m.controlEl.parentNode.removeChild(m.controlEl),m.controlEl=!1),this.generateControlElement(r,u),r.getElement().classList.add("tabulator-tree-level-"+m.index),m.index&&(this.branchEl?(m.branchEl=this.branchEl.cloneNode(!0),u.insertBefore(m.branchEl,u.firstChild),this.table.rtl?m.branchEl.style.marginRight=(m.branchEl.offsetWidth+m.branchEl.style.marginLeft)*(m.index-1)+m.index*this.indent+"px":m.branchEl.style.marginLeft=(m.branchEl.offsetWidth+m.branchEl.style.marginRight)*(m.index-1)+m.index*this.indent+"px"):this.table.rtl?u.style.paddingRight=parseInt(window.getComputedStyle(u,null).getPropertyValue("padding-right"))+m.index*this.indent+"px":u.style.paddingLeft=parseInt(window.getComputedStyle(u,null).getPropertyValue("padding-left"))+m.index*this.indent+"px")}generateControlElement(r,a){var u=r.modules.dataTree,m=(a=a||r.getCells()[0].getElement(),u.controlEl);!1!==u.children&&(u.open?(u.controlEl=this.collapseEl.cloneNode(!0),u.controlEl.addEventListener("click",E=>{E.stopPropagation(),this.collapseRow(r)})):(u.controlEl=this.expandEl.cloneNode(!0),u.controlEl.addEventListener("click",E=>{E.stopPropagation(),this.expandRow(r)})),u.controlEl.addEventListener("mousedown",E=>{E.stopPropagation()}),m&&m.parentNode===a?m.parentNode.replaceChild(u.controlEl,m):a.insertBefore(u.controlEl,a.firstChild))}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}getRows(r){var a=[];return r.forEach((u,m)=>{var E;a.push(u),u instanceof Vs&&(u.create(),!(E=u.modules.dataTree.children).index&&!1!==E.children&&this.getChildren(u).forEach(D=>{D.create(),a.push(D)}))}),a}getChildren(r,a){var u=r.modules.dataTree,m=[],E=[];return!1!==u.children&&(u.open||a)&&(Array.isArray(u.children)||(u.children=this.generateChildren(r)),m=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(u.children):u.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(m),m.forEach(S=>{E.push(S),this.getChildren(S).forEach(N=>{E.push(N)})})),E}generateChildren(r){var a=[],u=r.getData()[this.field];return Array.isArray(u)||(u=[u]),u.forEach(m=>{var E=new Vs(m||{},this.table.rowManager);E.create(),E.modules.dataTree.index=r.modules.dataTree.index+1,E.modules.dataTree.parent=r,E.modules.dataTree.children&&(E.modules.dataTree.open=this.startOpen(E.getComponent(),E.modules.dataTree.index)),a.push(E)}),a}expandRow(r,a){var u=r.modules.dataTree;!1!==u.children&&(u.open=!0,r.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",r.getComponent(),r.modules.dataTree.index))}collapseRow(r){var a=r.modules.dataTree;!1!==a.children&&(a.open=!1,r.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",r.getComponent(),r.modules.dataTree.index))}toggleRow(r){var a=r.modules.dataTree;!1!==a.children&&(a.open?this.collapseRow(r):this.expandRow(r))}getTreeParent(r){return!!r.modules.dataTree.parent&&r.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(r){var a=r.modules.dataTree,u=[];return a.children&&(Array.isArray(a.children)||(a.children=this.generateChildren(r)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(a.children):a.children).forEach(E=>{E instanceof Vs&&u.push(E)})),u}rowDelete(r){var u,a=r.modules.dataTree.parent;a&&(!1!==(u=this.findChildIndex(r,a))&&a.data[this.field].splice(u,1),a.data[this.field].length||delete a.data[this.field],this.initializeRow(a),this.layoutRow(a)),this.refreshData(!0)}addTreeChildRow(r,a,u,m){var E=!1;"string"==typeof a&&(a=JSON.parse(a)),Array.isArray(r.data[this.field])||(r.data[this.field]=[],r.modules.dataTree.open=this.startOpen(r.getComponent(),r.modules.dataTree.index)),void 0!==m&&!1!==(E=this.findChildIndex(m,r))&&r.data[this.field].splice(u?E:E+1,0,a),!1===E&&(u?r.data[this.field].unshift(a):r.data[this.field].push(a)),this.initializeRow(r),this.layoutRow(r),this.refreshData(!0)}findChildIndex(r,a){var u=!1;return"object"==typeof r?r instanceof Vs?u=r.data:r instanceof RowComponent?u=r._getSelf().data:"undefined"!=typeof HTMLElement&&r instanceof HTMLElement&&a.modules.dataTree&&(u=a.modules.dataTree.children.find(m=>m instanceof Vs&&m.element===r))&&(u=u.data):u=null!=r&&a.data[this.field].find(m=>m.data[this.table.options.index]==r),u&&(Array.isArray(a.data[this.field])&&(u=a.data[this.field].indexOf(u)),-1==u&&(u=!1)),u}getTreeChildren(r,a,u){var m=r.modules.dataTree,E=[];return m.children&&(Array.isArray(m.children)||(m.children=this.generateChildren(r)),m.children.forEach(S=>{S instanceof Vs&&(E.push(a?S.getComponent():S),u&&(E=E.concat(this.getTreeChildren(S,a,u))))})),E}checkForRestyle(r){r.row.cells.indexOf(r)||this.layoutRow(r.row)}getChildField(){return this.field}redrawNeeded(r){return!!this.field&&void 0!==r[this.field]||!!this.elementField&&void 0!==r[this.elementField]}}return g.moduleName="dataTree",g})();var md={csv:function(g,l,r){var a=l&&l.delimiter?l.delimiter:",",u=[],m=[];g.forEach(E=>{var S=[];switch(E.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":E.columns.forEach((D,N)=>{D&&1===D.depth&&(m[N]=null==D.value?"":'"'+String(D.value).split('"').join('""')+'"')});break;case"row":E.columns.forEach(D=>{if(D){switch(typeof D.value){case"object":D.value=JSON.stringify(D.value);break;case"undefined":case"null":D.value=""}S.push('"'+String(D.value).split('"').join('""')+'"')}}),u.push(S.join(a))}}),m.length&&u.unshift(m.join(a)),u=u.join("\n"),l.bom&&(u="\ufeff"+u),r(u,"text/csv")},json:function(g,l,r){var a=[];g.forEach(u=>{var m={};switch(u.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":u.columns.forEach(E=>{E&&(m[E.component.getField()]=E.value)}),a.push(m)}}),r(a=JSON.stringify(a,null,"\t"),"application/json")},pdf:function(g,l,r){var a=[],u=[],m={},E=l.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},S=l.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},D=l.jsPDF||{},N=l&&l.title?l.title:"";function K(Ot,zt){var ae=[];return Ot.columns.forEach(ye=>{var Re;if(ye){switch(typeof ye.value){case"object":ye.value=JSON.stringify(ye.value);break;case"undefined":case"null":ye.value=""}Re={content:ye.value,colSpan:ye.width,rowSpan:ye.height},zt&&(Re.styles=zt),ae.push(Re)}else ae.push("")}),ae}D.orientation||(D.orientation=l.orientation||"landscape"),D.unit||(D.unit="pt"),g.forEach(Ot=>{switch(Ot.type){case"header":a.push(K(Ot));break;case"group":u.push(K(Ot,E));break;case"calc":u.push(K(Ot,S));break;case"row":u.push(K(Ot))}});var ft=new jspdf.jsPDF(D);l&&l.autoTable&&(m="function"==typeof l.autoTable?l.autoTable(ft)||{}:l.autoTable),N&&(m.didDrawPage=function(Ot){ft.text(N,40,30)}),m.head=a,m.body=u,ft.autoTable(m),l&&l.documentProcessing&&l.documentProcessing(ft),r(ft.output("arraybuffer"),"application/pdf")},xlsx:function(g,l,r){var u=l.sheetName||"Sheet1",m=XLSX.utils.book_new(),E=new Cl(this);function D(){var ft=[],Ot=[],zt={},ae={s:{c:0,r:0},e:{c:g[0]?g[0].columns.reduce((ye,Re)=>ye+(Re&&Re.width?Re.width:1),0):0,r:g.length}};return g.forEach((ye,Re)=>{var Oe=[];ye.columns.forEach(function(ai,Pi){ai?(Oe.push(ai.value instanceof Date||"object"!=typeof ai.value?ai.value:JSON.stringify(ai.value)),(ai.width>1||ai.height>-1)&&Ot.push({s:{r:Re,c:Pi},e:{r:Re+ai.height-1,c:Pi+ai.width-1}})):Oe.push("")}),ft.push(Oe)}),XLSX.utils.sheet_add_aoa(zt,ft),zt["!ref"]=XLSX.utils.encode_range(ae),Ot.length&&(zt["!merges"]=Ot),zt}if(m.SheetNames=[],m.Sheets={},l.sheetOnly)r(D());else{if(l.sheets)for(var N in l.sheets)!0===l.sheets[N]?(m.SheetNames.push(N),m.Sheets[N]=D()):(m.SheetNames.push(N),E.commsSend(l.sheets[N],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(ft){m.Sheets[N]=ft}}));else m.SheetNames.push(u),m.Sheets[u]=D();l.documentProcessing&&(m=l.documentProcessing(m)),r(function(ft){for(var Ot=new ArrayBuffer(ft.length),zt=new Uint8Array(Ot),ae=0;ae!=ft.length;++ae)zt[ae]=255&ft.charCodeAt(ae);return Ot}(XLSX.write(m,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(g,l,r){this.modExists("export",!0)&&r(this.modules.export.genereateHTMLTable(g),"text/html")}};let Lp=(()=>{class g extends uo{constructor(r){super(r),this.registerTableOption("downloadReady",function(a,u){return u}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(r,a,u,m){this.download(r,a,u,m,!0)}download(r,a,u,m,E){var S=!1;if("function"==typeof r?S=r:g.downloaders[r]?S=g.downloaders[r]:console.warn("Download Error - No such download type found: ",r),S){var N=this.generateExportList(m);S.call(this.table,N,u||{},function(K,ft){E?!0===E?this.triggerDownload(K,ft,r,a,!0):E(K):this.triggerDownload(K,ft,r,a)}.bind(this))}}generateExportList(r){var a=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,r||this.table.options.downloadRowRange,"download"),u=this.table.options.groupHeaderDownload;return u&&!Array.isArray(u)&&(u=[u]),a.forEach(m=>{var E;"group"===m.type&&(E=m.columns[0],u&&u[m.indent]&&(E.value=u[m.indent](E.value,m.component._group.getRowCount(),m.component._group.getData(),m.component)))}),a}triggerDownload(r,a,u,m,E){var S=document.createElement("a"),D=new Blob([r],{type:a});m=m||"Tabulator."+("function"==typeof u?"txt":u),(D=this.table.options.downloadReady(r,D))&&(E?window.open(window.URL.createObjectURL(D)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(D,m):(S.setAttribute("href",window.URL.createObjectURL(D)),S.setAttribute("download",m),S.style.display="none",document.body.appendChild(S),S.click(),document.body.removeChild(S)),this.dispatchExternal("downloadComplete"))}commsReceived(r,a,u){"intercept"===a&&this.download(u.type,"",u.options,u.active,u.intercept)}}return g.moduleName="download",g.downloaders=md,g})();function ed(g,l){var r=l.mask,a=void 0!==l.maskLetterChar?l.maskLetterChar:"A",u=void 0!==l.maskNumberChar?l.maskNumberChar:"9",m=void 0!==l.maskWildcardChar?l.maskWildcardChar:"*";function E(S){var D=r[S];void 0!==D&&D!==m&&D!==a&&D!==u&&(g.value=g.value+""+D,E(S+1))}g.addEventListener("keydown",S=>{var D=g.value.length,N=S.key;if(S.keyCode>46){if(D>=r.length)return S.preventDefault(),S.stopPropagation(),!1;switch(r[D]){case a:if(N.toUpperCase()==N.toLowerCase())return S.preventDefault(),S.stopPropagation(),!1;break;case u:if(isNaN(N))return S.preventDefault(),S.stopPropagation(),!1;break;case m:break;default:if(N!==r[D])return S.preventDefault(),S.stopPropagation(),!1}}}),g.addEventListener("keyup",S=>{S.keyCode>46&&l.maskAutoFill&&E(g.value.length)}),g.placeholder||(g.placeholder=r),l.maskAutoFill&&E(g.value.length)}var Z={input:function(g,l,r,a,u){var m=g.getValue(),E=document.createElement("input");if(E.setAttribute("type",u.search?"search":"text"),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let D in u.elementAttributes)"+"==D.charAt(0)?(D=D.slice(1),E.setAttribute(D,E.getAttribute(D)+u.elementAttributes["+"+D])):E.setAttribute(D,u.elementAttributes[D]);function S(D){null==m&&""!==E.value||E.value!==m?r(E.value)&&(m=E.value):a()}return E.value=void 0!==m?m:"",l(function(){E.focus({preventScroll:!0}),E.style.height="100%"}),E.addEventListener("change",S),E.addEventListener("blur",S),E.addEventListener("keydown",function(D){switch(D.keyCode){case 13:S();break;case 27:a();break;case 35:case 36:D.stopPropagation()}}),u.mask&&ed(E,u),E},textarea:function(g,l,r,a,u){var m=g.getValue(),E=u.verticalNavigation||"hybrid",S=String(null!=m?m:""),N=(S.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),K=0;if(N.style.display="block",N.style.padding="2px",N.style.height="100%",N.style.width="100%",N.style.boxSizing="border-box",N.style.whiteSpace="pre-wrap",N.style.resize="none",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let Ot in u.elementAttributes)"+"==Ot.charAt(0)?(Ot=Ot.slice(1),N.setAttribute(Ot,N.getAttribute(Ot)+u.elementAttributes["+"+Ot])):N.setAttribute(Ot,u.elementAttributes[Ot]);function ft(Ot){null==m&&""!==N.value||N.value!==m?(r(N.value)&&(m=N.value),setTimeout(function(){g.getRow().normalizeHeight()},300)):a()}return N.value=S,l(function(){N.focus({preventScroll:!0}),N.style.height="100%",N.style.height=N.scrollHeight+"px",g.getRow().normalizeHeight()}),N.addEventListener("change",ft),N.addEventListener("blur",ft),N.addEventListener("keyup",function(){N.style.height="";var Ot=N.scrollHeight;N.style.height=Ot+"px",Ot!=K&&(K=Ot,g.getRow().normalizeHeight())}),N.addEventListener("keydown",function(Ot){switch(Ot.keyCode){case 27:a();break;case 38:("editor"==E||"hybrid"==E&&N.selectionStart)&&(Ot.stopImmediatePropagation(),Ot.stopPropagation());break;case 40:("editor"==E||"hybrid"==E&&N.selectionStart!==N.value.length)&&(Ot.stopImmediatePropagation(),Ot.stopPropagation());break;case 35:case 36:Ot.stopPropagation()}}),u.mask&&ed(N,u),N},number:function(g,l,r,a,u){var m=g.getValue(),E=u.verticalNavigation||"editor",S=document.createElement("input");if(S.setAttribute("type","number"),void 0!==u.max&&S.setAttribute("max",u.max),void 0!==u.min&&S.setAttribute("min",u.min),void 0!==u.step&&S.setAttribute("step",u.step),S.style.padding="4px",S.style.width="100%",S.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let K in u.elementAttributes)"+"==K.charAt(0)?(K=K.slice(1),S.setAttribute(K,S.getAttribute(K)+u.elementAttributes["+"+K])):S.setAttribute(K,u.elementAttributes[K]);S.value=m;var D=function(K){N()};function N(){var K=S.value;!isNaN(K)&&""!==K&&(K=Number(K)),K!==m?r(K)&&(m=K):a()}return l(function(){S.removeEventListener("blur",D),S.focus({preventScroll:!0}),S.style.height="100%",S.addEventListener("blur",D)}),S.addEventListener("keydown",function(K){switch(K.keyCode){case 13:N();break;case 27:a();break;case 38:case 40:"editor"==E&&(K.stopImmediatePropagation(),K.stopPropagation());break;case 35:case 36:K.stopPropagation()}}),u.mask&&ed(S,u),S},range:function(g,l,r,a,u){var m=g.getValue(),E=document.createElement("input");if(E.setAttribute("type","range"),void 0!==u.max&&E.setAttribute("max",u.max),void 0!==u.min&&E.setAttribute("min",u.min),void 0!==u.step&&E.setAttribute("step",u.step),E.style.padding="4px",E.style.width="100%",E.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let D in u.elementAttributes)"+"==D.charAt(0)?(D=D.slice(1),E.setAttribute(D,E.getAttribute(D)+u.elementAttributes["+"+D])):E.setAttribute(D,u.elementAttributes[D]);function S(){var D=E.value;!isNaN(D)&&""!==D&&(D=Number(D)),D!=m?r(D)&&(m=D):a()}return E.value=m,l(function(){E.focus({preventScroll:!0}),E.style.height="100%"}),E.addEventListener("blur",function(D){S()}),E.addEventListener("keydown",function(D){switch(D.keyCode){case 13:S();break;case 27:a()}}),E},select:function(g,l,r,a,u){var m=this,E=g.getElement(),S=g.getValue(),D=u.verticalNavigation||"editor",N=void 0!==S||null===S?Array.isArray(S)?S:[S]:void 0!==u.defaultValue?u.defaultValue:[],K=document.createElement("input"),ft=document.createElement("div"),Ot=u.multiselect,zt=[],ae={},ye=[],Re=[],Oe=!0,ai=!1,Pi="",yi=null;function wi(Oi){var Us,fn={},Ao=m.table.getData();return(Us=Oi?m.table.columnManager.getColumnByField(Oi):g.getColumn()._getSelf())?Ao.forEach(function(Dl){var Ju=Us.getFieldValue(Dl);null!=Ju&&""!==Ju&&(fn[Ju]=!0)}):console.warn("unable to find matching column to create select lookup list:",Oi),Object.keys(fn)}function qi(Oi,fn){!Ot&&ae&&ae.element&&ae.element.classList.remove("active"),ae&&ae.element&&ae.element.classList.remove("focused"),ae=Oi,Oi.element&&(Oi.element.classList.add("focused"),fn&&Oi.element.classList.add("active")),Oi&&Oi.element&&Oi.element.scrollIntoView&&Oi.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function an(Oi){-1==Re.indexOf(Oi)&&(Re.push(Oi),qi(Oi,!0)),Xi()}function zn(Oi){var fn=Re[Oi];Oi>-1&&(Re.splice(Oi,1),fn.element&&fn.element.classList.remove("active"))}function sn(Oi){Oi||(Oi=ae);var fn=Re.indexOf(Oi);fn>-1?zn(fn):(!0!==Ot&&Re.length>=Ot&&zn(0),an(Oi)),Xi()}function Yn(Oi){no(),Oi||(Oi=ae),Oi&&(K.value=Oi.label,r(Oi.value)),N=[Oi.value]}function ko(Oi){Oi||no();var fn=[];Re.forEach(Ao=>{fn.push(Ao.value)}),N=fn,r(fn)}function Xi(){var Oi=[];Re.forEach(fn=>{Oi.push(fn.label)}),K.value=Oi.join(", "),!1===m.currentCell&&ko(!0)}function wn(){no(),a()}function no(){ft.parentNode&&ft.parentNode.removeChild(ft),m.table.rowManager.element.removeEventListener("scroll",wn)}if((Array.isArray(u)||!Array.isArray(u)&&"object"==typeof u&&!u.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),u={values:u}),K.setAttribute("type","text"),K.style.padding="4px",K.style.width="100%",K.style.boxSizing="border-box",K.style.cursor="default",K.readOnly=0!=this.currentCell,u.elementAttributes&&"object"==typeof u.elementAttributes)for(let Oi in u.elementAttributes)"+"==Oi.charAt(0)?(Oi=Oi.slice(1),K.setAttribute(Oi,K.getAttribute(Oi)+u.elementAttributes["+"+Oi])):K.setAttribute(Oi,u.elementAttributes[Oi]);return K.value=void 0!==S||null===S?S:"",K.addEventListener("search",function(Oi){K.value||(function(){var Oi=Re.length;for(let fn=0;fn<Oi;fn++)zn(0)}(),ko())}),K.addEventListener("keydown",function(Oi){var fn;switch(Oi.keyCode){case 38:fn=zt.indexOf(ae),("editor"==D||"hybrid"==D&&fn)&&(Oi.stopImmediatePropagation(),Oi.stopPropagation(),Oi.preventDefault(),fn>0&&qi(zt[fn-1],!Ot));break;case 40:fn=zt.indexOf(ae),("editor"==D||"hybrid"==D&&fn<zt.length-1)&&(Oi.stopImmediatePropagation(),Oi.stopPropagation(),Oi.preventDefault(),fn<zt.length-1&&qi(-1==fn?zt[0]:zt[fn+1],!Ot));break;case 37:case 39:Oi.stopImmediatePropagation(),Oi.stopPropagation(),Oi.preventDefault();break;case 13:Ot?sn():Yn();break;case 27:wn();break;case 9:break;default:!1===m.currentCell&&Oi.preventDefault(),Oi.keyCode>=38&&Oi.keyCode<=90&&function(Oi){clearTimeout(yi);var fn=String.fromCharCode(event.keyCode).toLowerCase();Pi+=fn.toLowerCase();var Ao=zt.find(Us=>void 0!==Us.label&&Us.label.toLowerCase().startsWith(Pi));Ao&&qi(Ao,!Ot),yi=setTimeout(()=>{Pi=""},800)}()}}),K.addEventListener("blur",function(Oi){Oe&&(Ot?ko():wn())}),K.addEventListener("focus",function(Oi){ai||function(){if(Re=[],!ft.parentNode){!function(Oi,fn){var Ao=[],Us=[];function Dl(ir){return fn.indexOf((ir={label:ir.label,value:ir.value,itemParams:ir.itemParams,elementAttributes:ir.elementAttributes,element:!1}).value)>-1&&an(ir),Ao.push(ir),Us.push(ir),ir}if("function"==typeof Oi&&(Oi=Oi(g)),Array.isArray(Oi))Oi.forEach(function(ir){var ss;"object"==typeof ir?ir.options?(Us.push(ss={label:ir.label,group:!0,itemParams:ir.itemParams,elementAttributes:ir.elementAttributes,element:!1}),ir.options.forEach(function(sd){Dl(sd)})):Dl(ir):(fn.indexOf((ss={label:ir,value:ir,element:!1}).value)>-1&&an(ss),Ao.push(ss),Us.push(ss))});else for(var Ju in Oi){var Id={label:Oi[Ju],value:Ju,element:!1};fn.indexOf(Id.value)>-1&&an(Id),Ao.push(Id),Us.push(Id)}u.sortValuesList&&(Ao.sort((ir,ss)=>ir.label<ss.label?-1:ir.label>ss.label?1:0),Us.sort((ir,ss)=>ir.label<ss.label?-1:ir.label>ss.label?1:0),"asc"!==u.sortValuesList&&(Ao.reverse(),Us.reverse())),zt=Ao,ye=Us,function(){for(;ft.firstChild;)ft.removeChild(ft.firstChild);ye.forEach(function(Oi){var fn=Oi.element;if(!fn){if(fn=document.createElement("div"),Oi.label=u.listItemFormatter?u.listItemFormatter(Oi.value,Oi.label,g,fn,Oi.itemParams):Oi.label,Oi.group?(fn.classList.add("tabulator-edit-select-list-group"),fn.tabIndex=0,fn.innerHTML=""===Oi.label?"&nbsp;":Oi.label):(fn.classList.add("tabulator-edit-select-list-item"),fn.tabIndex=0,fn.innerHTML=""===Oi.label?"&nbsp;":Oi.label,fn.addEventListener("click",function(){ai=!0,setTimeout(()=>{ai=!1},10),Ot?(sn(Oi),K.focus()):Yn(Oi)}),Re.indexOf(Oi)>-1&&fn.classList.add("active")),Oi.elementAttributes&&"object"==typeof Oi.elementAttributes)for(let Ao in Oi.elementAttributes)"+"==Ao.charAt(0)?(Ao=Ao.slice(1),fn.setAttribute(Ao,K.getAttribute(Ao)+Oi.elementAttributes["+"+Ao])):fn.setAttribute(Ao,Oi.elementAttributes[Ao]);fn.addEventListener("mousedown",function(){Oe=!1,setTimeout(function(){Oe=!0},10)}),Oi.element=fn}ft.appendChild(fn)})}()}(!0===u.values?wi():"string"==typeof u.values?wi(u.values):u.values||[],N);var Oi=_r.elOffset(E);ft.style.minWidth=E.offsetWidth+"px",ft.style.top=Oi.top+E.offsetHeight+"px",ft.style.left=Oi.left+"px",ft.addEventListener("mousedown",function(fn){Oe=!1,setTimeout(function(){Oe=!0},10)}),document.body.appendChild(ft)}}()}),(ft=document.createElement("div")).classList.add("tabulator-edit-select-list"),l(function(){K.style.height="100%",K.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",wn)},10),K},autocomplete:function(g,l,r,a,u){var m=this,E=g.getElement(),S=g.getValue(),D=u.verticalNavigation||"editor",N=void 0!==S||null===S?S:void 0!==u.defaultValue?u.defaultValue:"",K=document.createElement("input"),ft=document.createElement("div"),Ot=[],zt=!1,ae=!0,ye=!1;if(K.setAttribute("type","search"),K.style.padding="4px",K.style.width="100%",K.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let Xi in u.elementAttributes)"+"==Xi.charAt(0)?(Xi=Xi.slice(1),K.setAttribute(Xi,K.getAttribute(Xi)+u.elementAttributes["+"+Xi])):K.setAttribute(Xi,u.elementAttributes[Xi]);function Re(){!0===u.values?ye=Oe():"string"==typeof u.values&&(ye=Oe(u.values))}function Oe(Xi){var Ko,Yi={},wn=m.table.getData();return(Ko=Xi?m.table.columnManager.getColumnByField(Xi):g.getColumn()._getSelf())?(wn.forEach(function(no){var Wo=Ko.getFieldValue(no);null!=Wo&&""!==Wo&&(Yi[Wo]=!0)}),Yi=u.sortValuesList?"asc"==u.sortValuesList?Object.keys(Yi).sort():Object.keys(Yi).sort().reverse():Object.keys(Yi)):console.warn("unable to find matching column to create autocomplete lookup list:",Xi),Yi}function ai(Xi,Yi){var Ko,no,wn=[];Ko=ye||u.values||[],u.searchFunc?(wn=u.searchFunc(Xi,Ko))instanceof Promise?(Pi(void 0!==u.searchingPlaceholder?u.searchingPlaceholder:"Searching..."),wn.then(Wo=>{Wi(yi(Wo),Yi)}).catch(Wo=>{console.err("error in autocomplete search promise:",Wo)})):Wi(yi(wn),Yi):(no=yi(Ko),""===Xi?u.showListOnEmpty&&(wn=no):no.forEach(function(Wo){(null!==Wo.value||void 0!==Wo.value)&&(String(Wo.value).toLowerCase().indexOf(String(Xi).toLowerCase())>-1||String(Wo.title).toLowerCase().indexOf(String(Xi).toLowerCase())>-1)&&wn.push(Wo)}),Wi(wn,Yi))}function Pi(Xi){var Yi=document.createElement("div");wi(),!1!==Xi&&(Yi.classList.add("tabulator-edit-select-list-notice"),Yi.tabIndex=0,Xi instanceof Node?Yi.appendChild(Xi):Yi.innerHTML=Xi,ft.appendChild(Yi))}function yi(Xi){var Yi=[];if(Array.isArray(Xi))Xi.forEach(function(no){var Wo={};"object"==typeof no?(Wo.title=u.listItemFormatter?u.listItemFormatter(no.value,no.label):no.label,Wo.value=no.value):(Wo.title=u.listItemFormatter?u.listItemFormatter(no,no):no,Wo.value=no),Yi.push(Wo)});else for(var wn in Xi){var Ko={title:u.listItemFormatter?u.listItemFormatter(wn,Xi[wn]):Xi[wn],value:wn};Yi.push(Ko)}return Yi}function wi(){for(;ft.firstChild;)ft.removeChild(ft.firstChild)}function Wi(Xi,Yi){Xi.length?function(Xi,Yi){var wn=!1;wi(),(Ot=Xi).forEach(function(Ko){var no=Ko.element;no||((no=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),no.tabIndex=0,no.innerHTML=Ko.title,no.addEventListener("click",function(Wo){zn(Ko),qi()}),no.addEventListener("mousedown",function(Wo){ae=!1,setTimeout(function(){ae=!0},10)}),Ko.element=no,Yi&&Ko.value==S&&(K.value=Ko.title,Ko.element.classList.add("active"),wn=!0),Ko===zt&&(Ko.element.classList.add("active"),wn=!0)),ft.appendChild(no)}),wn||zn(!1)}(Xi,Yi):u.emptyPlaceholder&&Pi(u.emptyPlaceholder)}function qi(){sn(),zt?S!==zt.value?(S=zt.value,K.value=zt.title,r(zt.value)):a():u.freetext||u.allowEmpty&&""===K.value?(S=K.value,r(K.value)):a()}function zn(Xi,Yi){zt&&zt.element&&zt.element.classList.remove("active"),zt=Xi,Xi&&Xi.element&&Xi.element.classList.add("active"),Xi&&Xi.element&&Xi.element.scrollIntoView&&Xi.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function sn(){ft.parentNode&&ft.parentNode.removeChild(ft),m.table.rowManager.element.removeEventListener("scroll",Yn)}function Yn(){sn(),a()}return ft.classList.add("tabulator-edit-select-list"),ft.addEventListener("mousedown",function(Xi){ae=!1,setTimeout(function(){ae=!0},10)}),K.addEventListener("keydown",function(Xi){var Yi;switch(Xi.keyCode){case 38:Yi=Ot.indexOf(zt),("editor"==D||"hybrid"==D&&Yi)&&(Xi.stopImmediatePropagation(),Xi.stopPropagation(),Xi.preventDefault(),zn(Yi>0&&Ot[Yi-1]));break;case 40:Yi=Ot.indexOf(zt),("editor"==D||"hybrid"==D&&Yi<Ot.length-1)&&(Xi.stopImmediatePropagation(),Xi.stopPropagation(),Xi.preventDefault(),Yi<Ot.length-1&&zn(-1==Yi?Ot[0]:Ot[Yi+1]));break;case 37:case 39:Xi.stopImmediatePropagation(),Xi.stopPropagation();break;case 13:qi();break;case 27:Yn();break;case 36:case 35:Xi.stopImmediatePropagation()}}),K.addEventListener("keyup",function(Xi){switch(Xi.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:ai(K.value)}}),K.addEventListener("search",function(Xi){ai(K.value)}),K.addEventListener("blur",function(Xi){ae&&qi()}),K.addEventListener("focus",function(Xi){var Yi=N;Re(),function(){if(!ft.parentNode){for(;ft.firstChild;)ft.removeChild(ft.firstChild);var Xi=_r.elOffset(E);ft.style.minWidth=E.offsetWidth+"px",ft.style.top=Xi.top+E.offsetHeight+"px",ft.style.left=Xi.left+"px",document.body.appendChild(ft)}}(),K.value=Yi,ai(Yi,!0)}),l(function(){K.style.height="100%",K.focus({preventScroll:!0})}),u.mask&&ed(K,u),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Yn)},10),Re(),K.value=N,ai(N,!0),K},star:function(g,l,r,a,u){var m=this,E=g.getElement(),S=g.getValue(),D=E.getElementsByTagName("svg").length||5,N=E.getElementsByTagName("svg")[0]?E.getElementsByTagName("svg")[0].getAttribute("width"):14,K=[],ft=document.createElement("div"),Ot=document.createElementNS("http://www.w3.org/2000/svg","svg");function zt(Oe){K.forEach(function(ai,Pi){Pi<Oe?("ie"==m.table.browser?ai.setAttribute("class","tabulator-star-active"):ai.classList.replace("tabulator-star-inactive","tabulator-star-active"),ai.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==m.table.browser?ai.setAttribute("class","tabulator-star-inactive"):ai.classList.replace("tabulator-star-active","tabulator-star-inactive"),ai.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function ae(Oe){var ai=document.createElement("span"),Pi=Ot.cloneNode(!0);K.push(Pi),ai.addEventListener("mouseenter",function(yi){yi.stopPropagation(),yi.stopImmediatePropagation(),zt(Oe)}),ai.addEventListener("mousemove",function(yi){yi.stopPropagation(),yi.stopImmediatePropagation()}),ai.addEventListener("click",function(yi){yi.stopPropagation(),yi.stopImmediatePropagation(),r(Oe),E.blur()}),ai.appendChild(Pi),ft.appendChild(ai)}function ye(Oe){S=Oe,zt(Oe)}if(E.style.whiteSpace="nowrap",E.style.overflow="hidden",E.style.textOverflow="ellipsis",ft.style.verticalAlign="middle",ft.style.display="inline-block",ft.style.padding="4px",Ot.setAttribute("width",N),Ot.setAttribute("height",N),Ot.setAttribute("viewBox","0 0 512 512"),Ot.setAttribute("xml:space","preserve"),Ot.style.padding="0 1px",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let Oe in u.elementAttributes)"+"==Oe.charAt(0)?(Oe=Oe.slice(1),ft.setAttribute(Oe,ft.getAttribute(Oe)+u.elementAttributes["+"+Oe])):ft.setAttribute(Oe,u.elementAttributes[Oe]);for(var Re=1;Re<=D;Re++)ae(Re);return zt(S=Math.min(parseInt(S),D)),ft.addEventListener("mousemove",function(Oe){zt(0)}),ft.addEventListener("click",function(Oe){r(0)}),E.addEventListener("blur",function(Oe){a()}),E.addEventListener("keydown",function(Oe){switch(Oe.keyCode){case 39:ye(S+1);break;case 37:ye(S-1);break;case 13:r(S);break;case 27:a()}}),ft},progress:function(g,l,r,a,u){var ye,Re,Ot,zt,m=g.getElement(),E=void 0===u.max?(null==(ye=m.getElementsByTagName("div")[0])?void 0:ye.getAttribute("max"))||100:u.max,S=void 0===u.min?(null==(Re=m.getElementsByTagName("div")[0])?void 0:Re.getAttribute("min"))||0:u.min,D=(E-S)/100,N=g.getValue()||0,K=document.createElement("div"),ft=document.createElement("div");function ae(){var Oe=window.getComputedStyle(m,null),ai=D*Math.round(ft.offsetWidth/((m.clientWidth-parseInt(Oe.getPropertyValue("padding-left"))-parseInt(Oe.getPropertyValue("padding-right")))/100))+S;r(ai),m.setAttribute("aria-valuenow",ai),m.setAttribute("aria-label",N)}if(K.style.position="absolute",K.style.right="0",K.style.top="0",K.style.bottom="0",K.style.width="5px",K.classList.add("tabulator-progress-handle"),ft.style.display="inline-block",ft.style.position="relative",ft.style.height="100%",ft.style.backgroundColor="#488CE9",ft.style.maxWidth="100%",ft.style.minWidth="0%",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let Oe in u.elementAttributes)"+"==Oe.charAt(0)?(Oe=Oe.slice(1),ft.setAttribute(Oe,ft.getAttribute(Oe)+u.elementAttributes["+"+Oe])):ft.setAttribute(Oe,u.elementAttributes[Oe]);return m.style.padding="4px 4px",N=Math.min(parseFloat(N),E),N=Math.max(parseFloat(N),S),N=Math.round((N-S)/D),ft.style.width=N+"%",m.setAttribute("aria-valuemin",S),m.setAttribute("aria-valuemax",E),ft.appendChild(K),K.addEventListener("mousedown",function(Oe){Ot=Oe.screenX,zt=ft.offsetWidth}),K.addEventListener("mouseover",function(){K.style.cursor="ew-resize"}),m.addEventListener("mousemove",function(Oe){Ot&&(ft.style.width=zt+Oe.screenX-Ot+"px")}),m.addEventListener("mouseup",function(Oe){Ot&&(Oe.stopPropagation(),Oe.stopImmediatePropagation(),Ot=!1,zt=!1,ae())}),m.addEventListener("keydown",function(Oe){switch(Oe.keyCode){case 39:Oe.preventDefault(),ft.style.width=ft.clientWidth+m.clientWidth/100+"px";break;case 37:Oe.preventDefault(),ft.style.width=ft.clientWidth-m.clientWidth/100+"px";break;case 9:case 13:ae();break;case 27:a()}}),m.addEventListener("blur",function(){a()}),ft},tickCross:function(g,l,r,a,u){var m=g.getValue(),E=document.createElement("input"),S=u.tristate,D=void 0===u.indeterminateValue?null:u.indeterminateValue,N=!1;if(E.setAttribute("type","checkbox"),E.style.marginTop="5px",E.style.boxSizing="border-box",u.elementAttributes&&"object"==typeof u.elementAttributes)for(let ft in u.elementAttributes)"+"==ft.charAt(0)?(ft=ft.slice(1),E.setAttribute(ft,E.getAttribute(ft)+u.elementAttributes["+"+ft])):E.setAttribute(ft,u.elementAttributes[ft]);function K(ft){return S?ft?N?D:E.checked:E.checked&&!N?(E.checked=!1,E.indeterminate=!0,N=!0,D):(N=!1,E.checked):E.checked}return E.value=m,S&&(void 0===m||m===D||""===m)&&(N=!0,E.indeterminate=!0),"firefox"!=this.table.browser&&l(function(){E.focus({preventScroll:!0})}),E.checked=!0===m||"true"===m||"True"===m||1===m,l(function(){E.focus()}),E.addEventListener("change",function(ft){r(K())}),E.addEventListener("blur",function(ft){r(K(!0))}),E.addEventListener("keydown",function(ft){13==ft.keyCode&&r(K()),27==ft.keyCode&&a()}),E}};let At=(()=>{class g extends uo{constructor(r){super(r),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=g.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(r){var a=this.currentCell,u=this.options("tabEndNewRow");a&&(this.navigateNext(r)||u&&(a.getElement().firstChild.blur(),(u=this.table.addRow(!0===u?{}:"function"==typeof u?u(a.row.getComponent()):Object.assign({},u))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(r){return!!r.modules.edit&&r.modules.edit.edited}cellCancelEdit(r){r===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(r){r||(r=this.modules.edit.getEditedCells()),Array.isArray(r)||(r=[r]),r.forEach(a=>{this.modules.edit.clearEdited(a._getSelf())})}navigatePrev(r){var u,m,a=this.currentCell;if(a){if(r&&r.preventDefault(),u=this.navigateLeft())return!0;if((m=this.table.rowManager.prevDisplayRow(a.row,!0))&&(u=this.findNextEditableCell(m,m.cells.length)))return u.getComponent().edit(),!0}return!1}navigateNext(r){var u,m,a=this.currentCell;if(a){if(r&&r.preventDefault(),u=this.navigateRight())return!0;if((m=this.table.rowManager.nextDisplayRow(a.row,!0))&&(u=this.findNextEditableCell(m,-1)))return u.getComponent().edit(),!0}return!1}navigateLeft(r){var u,m,a=this.currentCell;return!(!a||(r&&r.preventDefault(),u=a.getIndex(),m=this.findPrevEditableCell(a.row,u),!m)||(m.getComponent().edit(),0))}navigateRight(r){var u,m,a=this.currentCell;return!(!a||(r&&r.preventDefault(),u=a.getIndex(),m=this.findNextEditableCell(a.row,u),!m)||(m.getComponent().edit(),0))}navigateUp(r){var u,m,a=this.currentCell;return!(!a||(r&&r.preventDefault(),u=a.getIndex(),m=this.table.rowManager.prevDisplayRow(a.row,!0),!m)||(m.cells[u].getComponent().edit(),0))}navigateDown(r){var u,m,a=this.currentCell;return!(!a||(r&&r.preventDefault(),u=a.getIndex(),m=this.table.rowManager.nextDisplayRow(a.row,!0),!m)||(m.cells[u].getComponent().edit(),0))}findNextEditableCell(r,a){var u=!1;if(a<r.cells.length-1)for(var m=a+1;m<r.cells.length;m++){let E=r.cells[m];if(E.column.modules.edit&&_r.elVisible(E.getElement())){let S=!0;if("function"==typeof E.column.modules.edit.check&&(S=E.column.modules.edit.check(E.getComponent())),S){u=E;break}}}return u}findPrevEditableCell(r,a){var u=!1;if(a>0)for(var m=a-1;m>=0;m--){let E=r.cells[m],S=!0;if(E.column.modules.edit&&_r.elVisible(E.getElement())&&("function"==typeof E.column.modules.edit.check&&(S=E.column.modules.edit.check(E.getComponent())),S)){u=E;break}}return u}initializeColumnCheck(r){void 0!==r.definition.editor&&this.initializeColumn(r)}columnDeleteCheck(r){this.currentCell&&this.currentCell.column===r&&this.cancelEdit()}rowDeleteCheck(r){this.currentCell&&this.currentCell.row===r&&this.cancelEdit()}initializeColumn(r){var a={editor:!1,blocked:!1,check:r.definition.editable,params:r.definition.editorParams||{}};switch(typeof r.definition.editor){case"string":this.editors[r.definition.editor]?a.editor=this.editors[r.definition.editor]:console.warn("Editor Error - No such editor found: ",r.definition.editor);break;case"function":a.editor=r.definition.editor;break;case"boolean":!0===r.definition.editor&&("function"!=typeof r.definition.formatter?a.editor=this.editors[r.definition.formatter]?this.editors[r.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",r.definition.formatter))}a.editor&&(r.modules.edit=a)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(r){var u,a=this.currentCell;if(this.invalidEdit=!1,a){for(this.currentCell=!1,u=a.getElement(),r?a.validate&&a.validate():u.classList.remove("tabulator-validation-fail"),u.classList.remove("tabulator-editing");u.firstChild;)u.removeChild(u.firstChild);a.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var r=this.currentCell,a=this.currentCell.getComponent();this.clearEditor(!0),r.setValueActual(r.getValue()),r.cellRendered(),("textarea"==r.column.definition.editor||r.column.definition.variableHeight)&&r.row.normalizeHeight(!0),r.column.definition.cellEditCancelled&&r.column.definition.cellEditCancelled.call(this.table,a),this.dispatchExternal("cellEditCancelled",a)}}bindEditor(r){if(r.column.modules.edit){var a=this,u=r.getElement(!0);u.setAttribute("tabindex",0),u.addEventListener("click",function(m){u.classList.contains("tabulator-editing")||u.focus({preventScroll:!0})}),u.addEventListener("mousedown",function(m){2===m.button?m.preventDefault():a.mouseClick=!0}),u.addEventListener("focus",function(m){a.recursionBlock||a.edit(r,m,!1)})}}focusCellNoEvent(r,a){this.recursionBlock=!0,a&&"ie"===this.table.browser||r.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(r,a){this.focusCellNoEvent(r),this.edit(r,!1,a)}focusScrollAdjust(r){if("virtual"==this.table.rowManager.getRenderMode()){var a=this.table.rowManager.element.scrollTop,u=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,m=r.row.getElement();m.offsetTop<a?this.table.rowManager.element.scrollTop-=a-m.offsetTop:m.offsetTop+m.offsetHeight>u&&(this.table.rowManager.element.scrollTop+=m.offsetTop+m.offsetHeight-u);var S=this.table.rowManager.element.scrollLeft,D=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,N=r.getElement();this.table.modExists("frozenColumns")&&(S+=parseInt(this.table.modules.frozenColumns.leftMargin),D-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(S-=parseInt(this.table.columnManager.renderer.vDomPadLeft),D-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),N.offsetLeft<S?this.table.rowManager.element.scrollLeft-=S-N.offsetLeft:N.offsetLeft+N.offsetWidth>D&&(this.table.rowManager.element.scrollLeft+=N.offsetLeft+N.offsetWidth-D)}}edit(r,a,u){var N,K,ft,m=this,E=!0,S=function(){},D=r.getElement();if(!this.currentCell){if(r.column.modules.edit.blocked)return this.mouseClick=!1,D.blur(),!1;switch(a&&a.stopPropagation(),typeof r.column.modules.edit.check){case"function":E=r.column.modules.edit.check(r.getComponent());break;case"boolean":E=r.column.modules.edit.check}if(E||u){if(m.cancelEdit(),m.currentCell=r,this.focusScrollAdjust(r),K=r.getComponent(),this.mouseClick&&(this.mouseClick=!1,r.column.definition.cellClick&&r.column.definition.cellClick.call(this.table,a,K)),r.column.definition.cellEditing&&r.column.definition.cellEditing.call(this.table,K),this.dispatchExternal("cellEditing",K),ft="function"==typeof r.column.modules.edit.params?r.column.modules.edit.params(K):r.column.modules.edit.params,!1===(N=r.column.modules.edit.editor.call(m,K,function(Oe){S=Oe},function(Oe){if(m.currentCell===r){var ai=!0;return r.column.modules.validate&&m.table.modExists("validate")&&"manual"!=m.table.options.validationMode&&(ai=m.table.modules.validate.validate(r.column.modules.validate,r,Oe)),!0===ai||"highlight"===m.table.options.validationMode?(m.clearEditor(),r.modules.edit||(r.modules.edit={}),r.modules.edit.edited=!0,-1==m.editedCells.indexOf(r)&&m.editedCells.push(r),r.setValue(Oe,!0),m.table.options.dataTree&&m.table.modExists("dataTree")&&m.table.modules.dataTree.checkForRestyle(r),!0===ai||(D.classList.add("tabulator-validation-fail"),m.table.externalEvents.dispatch("validationFailed",r.getComponent(),Oe,ai),!1)):(m.invalidEdit=!0,D.classList.add("tabulator-validation-fail"),m.focusCellNoEvent(r,!0),S(),m.table.externalEvents.dispatch("validationFailed",r.getComponent(),Oe,ai),!1)}},function(){m.currentCell===r&&(m.cancelEdit(),m.table.options.dataTree&&m.table.modExists("dataTree")&&m.table.modules.dataTree.checkForRestyle(r))},ft)))return D.blur(),!1;if(!(N instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",N),D.blur(),!1;for(D.classList.add("tabulator-editing"),r.row.getElement().classList.add("tabulator-row-editing");D.firstChild;)D.removeChild(D.firstChild);D.appendChild(N),S();for(var ye=D.children,Re=0;Re<ye.length;Re++)ye[Re].addEventListener("click",function(Oe){Oe.stopPropagation()});return!0}return this.mouseClick=!1,D.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var r=[];return this.editedCells.forEach(a=>{r.push(a.getComponent())}),r}clearEdited(r){var a;r.modules.edit&&r.modules.edit.edited&&(r.modules.edit.edited=!1,r.modules.validate&&(r.modules.validate.invalid=!1)),(a=this.editedCells.indexOf(r))>-1&&this.editedCells.splice(a,1)}}return g.moduleName="edit",g.editors=Z,g})();class ke{constructor(l,r,a,u){this.type=l,this.columns=r,this.component=a||!1,this.indent=u||0}}class di{constructor(l,r,a,u,m){this.value=l,this.component=r||!1,this.width=a,this.height=u,this.depth=m}}let Li=(()=>{class g extends uo{constructor(r){super(r),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(r,a,u,m){this.cloneTableStyle=a,this.config=r||{},this.colVisProp=m;var E=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],S=this.bodyToExportRows(this.rowLookup(u));return E.concat(S)}genereateTable(r,a,u,m){var E=this.generateExportList(r,a,u,m);return this.genereateTableElement(E)}rowLookup(r){var a=[];if("function"==typeof r)r.call(this.table).forEach(u=>{(u=this.table.rowManager.findRow(u))&&a.push(u)});else switch(r){case!0:case"visible":a=this.table.rowManager.getVisibleRows(!0);break;case"all":a=this.table.rowManager.rows;break;case"selected":a=this.table.modules.selectRow.selectedRows;break;default:a=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],a)}generateColumnGroupHeaders(){var r=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(u=>{var m=this.processColumnGroup(u);m&&r.push(m)}),r}processColumnGroup(r){var a=r.columns,u=0,E={title:r.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||r.definition.title,column:r,depth:1};if(a.length){if(E.subGroups=[],E.width=0,a.forEach(S=>{var D=this.processColumnGroup(S);D&&(E.width+=D.width,E.subGroups.push(D),D.depth>u&&(u=D.depth))}),E.depth+=u,!E.width)return!1}else{if(!this.columnVisCheck(r))return!1;E.width=1}return E}columnVisCheck(r){return!1!==r.definition[this.colVisProp]&&(r.visible||!r.visible&&r.definition[this.colVisProp])}headersToExportRows(r){var a=[],u=0,m=[];function E(S,D){var N=u-D;if(void 0===a[D]&&(a[D]=[]),S.height=S.subGroups?1:N-S.depth+1,a[D].push(S),S.height>1)for(let K=1;K<S.height;K++)void 0===a[D+K]&&(a[D+K]=[]),a[D+K].push(!1);if(S.width>1)for(let K=1;K<S.width;K++)a[D].push(!1);S.subGroups&&S.subGroups.forEach(function(K){E(K,D+1)})}return r.forEach(function(S){S.depth>u&&(u=S.depth)}),r.forEach(function(S){E(S,0)}),a.forEach(S=>{var D=[];S.forEach(N=>{D.push(N?new di(N.title,N.column.getComponent(),N.width,N.height,N.depth):null)}),m.push(new ke("header",D))}),m}bodyToExportRows(r){var a=[],u=[];return this.table.columnManager.columnsByIndex.forEach(m=>{this.columnVisCheck(m)&&a.push(m.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&r.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&r.push(this.table.modules.columnCalcs.botRow)),(r=r.filter(m=>{switch(m.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&m.modules.dataTree.parent)}return!0})).forEach((m,E)=>{var S=m.getData(this.colVisProp),D=[],N=0;switch(m.type){case"group":N=m.level,D.push(new di(m.key,m.getComponent(),a.length,1));break;case"calc":case"row":a.forEach(K=>{D.push(new di(K._column.getFieldValue(S),K,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(N=m.modules.dataTree.index)}u.push(new ke(m.type,D,m.getComponent(),N))}),u}genereateTableElement(r){var a=document.createElement("table"),u=document.createElement("thead"),m=document.createElement("tbody"),E=this.lookupTableStyles(),S=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],D={};return D.rowFormatter=null!==S?S:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(D.treeElementField=this.table.modules.dataTree.elementField),D.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],D.groupHeader&&!Array.isArray(D.groupHeader)&&(D.groupHeader=[D.groupHeader]),a.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),u,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),r.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),r.forEach((N,K)=>{switch(N.type){case"header":u.appendChild(this.genereateHeaderElement(N,D,E));break;case"group":m.appendChild(this.genereateGroupElement(N,D,E));break;case"calc":m.appendChild(this.genereateCalcElement(N,D,E));break;case"row":let ft=this.genereateRowElement(N,D,E);this.mapElementStyles(K%2&&E.evenRow?E.evenRow:E.oddRow,ft,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),m.appendChild(ft)}}),u.innerHTML&&a.appendChild(u),a.appendChild(m),this.mapElementStyles(this.table.element,a,["border-top","border-left","border-right","border-bottom"]),a}lookupTableStyles(){var r={};return this.cloneTableStyle&&window.getComputedStyle&&(r.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),r.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),r.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),r.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),r.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],r.firstRow&&(r.styleCells=r.firstRow.getElementsByClassName("tabulator-cell"),r.firstCell=r.styleCells[0],r.lastCell=r.styleCells[r.styleCells.length-1])),r}genereateHeaderElement(r,a,u){var m=document.createElement("tr");return r.columns.forEach(E=>{if(E){var S=document.createElement("th"),D=E.component._column.definition.cssClass?E.component._column.definition.cssClass.split(" "):[];S.colSpan=E.width,S.rowSpan=E.height,S.innerHTML=E.value,this.cloneTableStyle&&(S.style.boxSizing="border-box"),D.forEach(function(N){S.classList.add(N)}),this.mapElementStyles(E.component.getElement(),S,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(E.component._column.contentElement,S,["padding-top","padding-left","padding-right","padding-bottom"]),E.component._column.visible?this.mapElementStyles(E.component.getElement(),S,["width"]):E.component._column.definition.width&&(S.style.width=E.component._column.definition.width+"px"),E.component._column.parent&&this.mapElementStyles(E.component._column.parent.groupElement,S,["border-top"]),m.appendChild(S)}}),m}genereateGroupElement(r,a,u){var m=document.createElement("tr"),E=document.createElement("td"),S=r.columns[0];return m.classList.add("tabulator-print-table-row"),S.value=a.groupHeader&&a.groupHeader[r.indent]?a.groupHeader[r.indent](S.value,r.component._group.getRowCount(),r.component._group.getData(),r.component):!1===a.groupHeader?S.value:r.component._group.generator(S.value,r.component._group.getRowCount(),r.component._group.getData(),r.component),E.colSpan=S.width,E.innerHTML=S.value,m.classList.add("tabulator-print-table-group"),m.classList.add("tabulator-group-level-"+r.indent),S.component.isVisible()&&m.classList.add("tabulator-group-visible"),this.mapElementStyles(u.firstGroup,m,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(u.firstGroup,E,["padding-top","padding-left","padding-right","padding-bottom"]),m.appendChild(E),m}genereateCalcElement(r,a,u){var m=this.genereateRowElement(r,a,u);return m.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(u.calcRow,m,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),m}genereateRowElement(r,a,u){var m=document.createElement("tr");return m.classList.add("tabulator-print-table-row"),r.columns.forEach(E=>{if(E){var S=document.createElement("td"),D=E.component._column,N=E.value,K={modules:{},getValue:function(){return N},getField:function(){return D.definition.field},getElement:function(){return S},getColumn:function(){return D.getComponent()},getData:function(){return r.component.getData()},getRow:function(){return r.component},getComponent:function(){return K},column:D};if((D.definition.cssClass?D.definition.cssClass.split(" "):[]).forEach(function(Ot){S.classList.add(Ot)}),this.table.modExists("format")&&!1!==this.config.formatCells)N=this.table.modules.format.formatExportValue(K,this.colVisProp);else switch(typeof N){case"object":N=JSON.stringify(N);break;case"undefined":case"null":N="";break;default:N=N}N instanceof Node?S.appendChild(N):S.innerHTML=N,u.firstCell&&(this.mapElementStyles(u.firstCell,S,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),D.definition.align&&(S.style.textAlign=D.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(a.treeElementField&&a.treeElementField==D.field||!a.treeElementField&&0==i)&&(r.component._row.modules.dataTree.controlEl&&S.insertBefore(r.component._row.modules.dataTree.controlEl.cloneNode(!0),S.firstChild),r.component._row.modules.dataTree.branchEl&&S.insertBefore(r.component._row.modules.dataTree.branchEl.cloneNode(!0),S.firstChild)),m.appendChild(S),K.modules.format&&K.modules.format.renderedCallback&&K.modules.format.renderedCallback(),a.rowFormatter&&!1!==this.config.formatCells&&a.rowFormatter(r.component)}}),m}genereateHTMLTable(r){var a=document.createElement("div");return a.appendChild(this.genereateTableElement(r)),a.innerHTML}getHtml(r,a,u,m){var E=this.generateExportList(u||this.table.options.htmlOutputConfig,a,r,m||"htmlOutput");return this.genereateHTMLTable(E)}mapElementStyles(r,a,u){if(this.cloneTableStyle&&r&&a){var m={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var E=window.getComputedStyle(r);u.forEach(function(S){a.style[m[S]]=E.getPropertyValue(S)})}}}}return g.moduleName="export",g})();var Cn={"=":function(g,l,r,a){return l==g},"<":function(g,l,r,a){return l<g},"<=":function(g,l,r,a){return l<=g},">":function(g,l,r,a){return l>g},">=":function(g,l,r,a){return l>=g},"!=":function(g,l,r,a){return l!=g},regex:function(g,l,r,a){return"string"==typeof g&&(g=new RegExp(g)),g.test(l)},like:function(g,l,r,a){return null==g?l===g:null!=l&&String(l).toLowerCase().indexOf(g.toLowerCase())>-1},keywords:function(g,l,r,a){var u=g.toLowerCase().split(void 0===a.separator?" ":a.separator),m=String(null==l?"":l).toLowerCase(),E=[];return u.forEach(S=>{m.includes(S)&&E.push(!0)}),a.matchAll?E.length===u.length:!!E.length},starts:function(g,l,r,a){return null==g?l===g:null!=l&&String(l).toLowerCase().startsWith(g.toLowerCase())},ends:function(g,l,r,a){return null==g?l===g:null!=l&&String(l).toLowerCase().endsWith(g.toLowerCase())},in:function(g,l,r,a){return Array.isArray(g)?!g.length||g.indexOf(l)>-1:(console.warn("Filter Error - filter value is not an array:",g),!1)}};let Ui=(()=>{class g extends uo{constructor(r){super(r),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(r=>{var a=this.table.columnManager.findColumn(r.field);if(!a)return console.warn("Column Filter Error - No matching column found:",r.field),!1;this.setHeaderFilterValue(a,r.value)}),this.tableInitialized=!0}remoteFilterParams(r,a,u,m){return m.filter=this.getFilters(!0,!0),m}userSetFilter(r,a,u,m){this.setFilter(r,a,u,m),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(r,a,u,m){this.addFilter(r,a,u,m),this.refreshFilter()}userSetHeaderFilterFocus(r){var a=this.table.columnManager.findColumn(r);if(!a)return console.warn("Column Filter Focus Error - No matching column found:",r),!1;this.setHeaderFilterFocus(a)}userGetHeaderFilterValue(r){var a=this.table.columnManager.findColumn(r);if(a)return this.getHeaderFilterValue(a);console.warn("Column Filter Error - No matching column found:",r)}userSetHeaderFilterValue(r,a){var u=this.table.columnManager.findColumn(r);if(!u)return console.warn("Column Filter Error - No matching column found:",r),!1;this.setHeaderFilterValue(u,a)}userRemoveFilter(r,a,u){this.removeFilter(r,a,u),this.refreshFilter()}userClearFilter(r){this.clearFilter(r),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(r,a,u){return this.search("rows",r,a,u)}searchData(r,a,u){return this.search("data",r,a,u)}initializeColumnHeaderFilter(r){var a=r.definition;a.headerFilter&&(void 0!==a.headerFilterPlaceholder&&a.field&&this.module("localize").setHeaderFilterColumnPlaceholder(a.field,a.headerFilterPlaceholder),this.initializeColumn(r))}initializeColumn(r,a){var u=this,m=r.getField();r.modules.filter={success:function(S){var ft,D="input"==r.modules.filter.tagType&&"text"==r.modules.filter.attrType||"textarea"==r.modules.filter.tagType?"partial":"match",N="",K="";if(void 0===r.modules.filter.prevSuccess||r.modules.filter.prevSuccess!==S){if(r.modules.filter.prevSuccess=S,r.modules.filter.emptyFunc(S))delete u.headerFilters[m];else{switch(r.modules.filter.value=S,typeof r.definition.headerFilterFunc){case"string":g.filters[r.definition.headerFilterFunc]?(N=r.definition.headerFilterFunc,ft=function(Ot){var zt=r.definition.headerFilterFuncParams||{},ae=r.getFieldValue(Ot);return zt="function"==typeof zt?zt(S,ae,Ot):zt,g.filters[r.definition.headerFilterFunc](S,ae,Ot,zt)}):console.warn("Header Filter Error - Matching filter function not found: ",r.definition.headerFilterFunc);break;case"function":N=ft=function(Ot){var zt=r.definition.headerFilterFuncParams||{},ae=r.getFieldValue(Ot);return zt="function"==typeof zt?zt(S,ae,Ot):zt,r.definition.headerFilterFunc(S,ae,Ot,zt)}}ft||("partial"===D?(ft=function(Ot){var zt=r.getFieldValue(Ot);return null!=zt&&String(zt).toLowerCase().indexOf(String(S).toLowerCase())>-1},N="like"):(ft=function(Ot){return r.getFieldValue(Ot)==S},N="=")),u.headerFilters[m]={value:S,func:ft,type:N,params:{}}}K=JSON.stringify(u.headerFilters),u.prevHeaderFilterChangeCheck!==K&&(u.prevHeaderFilterChangeCheck=K,u.trackChanges(),u.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(r)}generateHeaderFilterElement(r,a,u){var D,N,K,ft,Ot,zt,ae,m=this,E=r.modules.filter.success,S=r.getField();if(r.modules.filter.headerElement&&r.modules.filter.headerElement.parentNode&&r.contentElement.removeChild(r.modules.filter.headerElement.parentNode),S){switch(r.modules.filter.emptyFunc=r.definition.headerFilterEmptyCheck||function(Re){return!Re&&"0"!==Re&&0!==Re},(D=document.createElement("div")).classList.add("tabulator-header-filter"),typeof r.definition.headerFilter){case"string":m.table.modules.edit.editors[r.definition.headerFilter]?(N=m.table.modules.edit.editors[r.definition.headerFilter],("tick"===r.definition.headerFilter||"tickCross"===r.definition.headerFilter)&&!r.definition.headerFilterEmptyCheck&&(r.modules.filter.emptyFunc=function(Re){return!0!==Re&&!1!==Re})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",r.definition.editor);break;case"function":N=r.definition.headerFilter;break;case"boolean":r.modules.edit&&r.modules.edit.editor?N=r.modules.edit.editor:r.definition.formatter&&m.table.modules.edit.editors[r.definition.formatter]?(N=m.table.modules.edit.editors[r.definition.formatter],("tick"===r.definition.formatter||"tickCross"===r.definition.formatter)&&!r.definition.headerFilterEmptyCheck&&(r.modules.filter.emptyFunc=function(Re){return!0!==Re&&!1!==Re})):N=m.table.modules.edit.editors.input}if(N){if(ft={getValue:function(){return void 0!==a?a:""},getField:function(){return r.definition.field},getElement:function(){return D},getColumn:function(){return r.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},ae="function"==typeof(ae=r.definition.headerFilterParams||{})?ae.call(m.table):ae,!(K=N.call(this.table.modules.edit,ft,function(){},E,function(){},ae)))return void console.warn("Filter Error - Cannot add filter to "+S+" column, editor returned a value of false");if(!(K instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+S+" column, editor should return an instance of Node, the editor returned:",K);S?m.langBind("headerFilters|columns|"+r.definition.field,function(Re){K.setAttribute("placeholder",void 0!==Re&&Re?Re:m.langText("headerFilters|default"))}):m.langBind("headerFilters|default",function(Re){K.setAttribute("placeholder",Re)}),K.addEventListener("click",function(Re){Re.stopPropagation(),K.focus()}),K.addEventListener("focus",Re=>{var Oe=this.table.columnManager.element.scrollLeft;Oe!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(Oe),this.table.columnManager.scrollHorizontal(Oe))}),Ot=!1,zt=function(Re){Ot&&clearTimeout(Ot),Ot=setTimeout(function(){E(K.value)},m.table.options.headerFilterLiveFilterDelay)},r.modules.filter.headerElement=K,r.modules.filter.attrType=K.hasAttribute("type")?K.getAttribute("type").toLowerCase():"",r.modules.filter.tagType=K.tagName.toLowerCase(),!1!==r.definition.headerFilterLiveFilter&&("autocomplete"===r.definition.headerFilter||"tickCross"===r.definition.headerFilter||("autocomplete"===r.definition.editor||"tickCross"===r.definition.editor)&&!0===r.definition.headerFilter||(K.addEventListener("keyup",zt),K.addEventListener("search",zt),"number"==r.modules.filter.attrType&&K.addEventListener("change",function(Re){E(K.value)}),"text"==r.modules.filter.attrType&&"ie"!==this.table.browser&&K.setAttribute("type","search")),("input"==r.modules.filter.tagType||"select"==r.modules.filter.tagType||"textarea"==r.modules.filter.tagType)&&K.addEventListener("mousedown",function(Re){Re.stopPropagation()})),D.appendChild(K),r.contentElement.appendChild(D),u||m.headerFilterColumns.push(r)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",r.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(r){r.modules.filter&&r.modules.filter.headerElement&&(r.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(r){r.modules.filter&&r.modules.filter.headerElement&&(r.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(r){r.modules.filter&&r.modules.filter.headerElement?r.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",r.getField())}getHeaderFilterValue(r){if(r.modules.filter&&r.modules.filter.headerElement)return r.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",r.getField())}setHeaderFilterValue(r,a){r&&(r.modules.filter&&r.modules.filter.headerElement?(this.generateHeaderFilterElement(r,a,!0),r.modules.filter.success(a)):console.warn("Column Filter Error - No header filter set on column:",r.getField()))}reloadHeaderFilter(r){r&&(r.modules.filter&&r.modules.filter.headerElement?this.generateHeaderFilterElement(r,r.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",r.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var r=this.changed;return this.changed=!1,r}setFilter(r,a,u,m){this.filterList=[],Array.isArray(r)||(r=[{field:r,type:a,value:u,params:m}]),this.addFilter(r)}addFilter(r,a,u,m){Array.isArray(r)||(r=[{field:r,type:a,value:u,params:m}]),r.forEach(E=>{(E=this.findFilter(E))&&(this.filterList.push(E),this.changed=!0)})}findFilter(r){var a;if(Array.isArray(r))return this.findSubFilters(r);var u=!1;return"function"==typeof r.field?u=function(m){return r.field(m,r.type||{})}:g.filters[r.type]?u=(a=this.table.columnManager.getColumnByField(r.field))?function(m){return g.filters[r.type](r.value,a.getFieldValue(m),m,r.params||{})}:function(m){return g.filters[r.type](r.value,m[r.field],m,r.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",r.type),r.func=u,!!r.func&&r}findSubFilters(r){var a=[];return r.forEach(u=>{(u=this.findFilter(u))&&a.push(u)}),!!a.length&&a}getFilters(r,a){var u=[];return r&&(u=this.getHeaderFilters()),a&&u.forEach(function(m){"function"==typeof m.type&&(m.type="function")}),u.concat(this.filtersToArray(this.filterList,a))}filtersToArray(r,a){var u=[];return r.forEach(m=>{var E;Array.isArray(m)?u.push(this.filtersToArray(m,a)):(E={field:m.field,type:m.type,value:m.value},a&&"function"==typeof E.type&&(E.type="function"),u.push(E))}),u}getHeaderFilters(){var r=[];for(var a in this.headerFilters)r.push({field:a,type:this.headerFilters[a].type,value:this.headerFilters[a].value});return r}removeFilter(r,a,u){Array.isArray(r)||(r=[{field:r,type:a,value:u}]),r.forEach(m=>{var E;(E=this.filterList.findIndex("object"==typeof m.field?S=>m===S:S=>m.field===S.field&&m.type===S.type&&m.value===S.value))>-1?this.filterList.splice(E,1):console.warn("Filter Error - No matching filter type found, ignoring: ",m.type)}),this.trackChanges()}clearFilter(r){this.filterList=[],r&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(r=>{void 0!==r.modules.filter.value&&delete r.modules.filter.value,r.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(r)}),this.trackChanges()}search(r,a,u,m){var E=[],S=[];return Array.isArray(a)||(a=[{field:a,type:u,value:m}]),a.forEach(D=>{(D=this.findFilter(D))&&S.push(D)}),this.table.rowManager.rows.forEach(D=>{var N=!0;S.forEach(K=>{this.filterRecurse(K,D.getData())||(N=!1)}),N&&E.push("data"===r?D.getData("data"):D.getComponent())}),E}filter(r,a){var u=[],m=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?r.forEach(E=>{this.filterRow(E)&&u.push(E)}):u=r.slice(0),this.subscribedExternal("dataFiltered")&&(u.forEach(E=>{m.push(E.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),m)),u}filterRow(r,a){var u=!0,m=r.getData();for(var E in this.filterList.forEach(S=>{this.filterRecurse(S,m)||(u=!1)}),this.headerFilters)this.headerFilters[E].func(m)||(u=!1);return u}filterRecurse(r,a){var u=!1;return Array.isArray(r)?r.forEach(m=>{this.filterRecurse(m,a)&&(u=!0)}):u=r.func(a),u}}return g.moduleName="filter",g.filters=Cn,g})();var Sh={plaintext:function(g,l,r){return this.emptyToSpace(this.sanitizeHTML(g.getValue()))},html:function(g,l,r){return g.getValue()},textarea:function(g,l,r){return g.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(g.getValue()))},money:function(g,l,r){var m,E,S,D,a=parseFloat(g.getValue()),u="",N=l.decimal||".",K=l.thousand||",",ft=l.negativeSign||"-",Ot=l.symbol||"",zt=!!l.symbolAfter,ae=void 0!==l.precision?l.precision:2;if(isNaN(a))return this.emptyToSpace(this.sanitizeHTML(g.getValue()));for(a<0&&(a=Math.abs(a),u=ft),m=!1!==ae?a.toFixed(ae):a,E=(m=String(m).split("."))[0],S=m.length>1?N+m[1]:"",D=/(\d+)(\d{3})/;D.test(E);)E=E.replace(D,"$1"+K+"$2");return zt?u+E+S+Ot:u+Ot+E+S},link:function(g,l,r){var a=g.getValue(),u=l.urlPrefix||"",m=l.download,E=a,S=document.createElement("a");if(l.labelField&&(E=g.getData()[l.labelField]),l.label)switch(typeof l.label){case"string":E=l.label;break;case"function":E=l.label(g)}if(E){if(l.urlField&&(a=g.getData()[l.urlField]),l.url)switch(typeof l.url){case"string":a=l.url;break;case"function":a=l.url(g)}return S.setAttribute("href",u+a),l.target&&S.setAttribute("target",l.target),l.download&&(m="function"==typeof m?m(g):!0===m?"":m,S.setAttribute("download",m)),S.innerHTML=this.emptyToSpace(this.sanitizeHTML(E)),S}return"&nbsp;"},image:function(g,l,r){var a=document.createElement("img"),u=g.getValue();switch(l.urlPrefix&&(u=l.urlPrefix+g.getValue()),l.urlSuffix&&(u+=l.urlSuffix),a.setAttribute("src",u),typeof l.height){case"number":a.style.height=l.height+"px";break;case"string":a.style.height=l.height}switch(typeof l.width){case"number":a.style.width=l.width+"px";break;case"string":a.style.width=l.width}return a.addEventListener("load",function(){g.getRow().normalizeHeight()}),a},tickCross:function(g,l,r){var a=g.getValue(),u=g.getElement(),m=l.allowEmpty,S=void 0!==l.tickElement?l.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',D=void 0!==l.crossElement?l.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return l.allowTruthy&&a||!0===a||"true"===a||"True"===a||1===a||"1"===a?(u.setAttribute("aria-checked",!0),S||""):!m||"null"!==a&&""!==a&&null!=a?(u.setAttribute("aria-checked",!1),D||""):(u.setAttribute("aria-checked","mixed"),"")},datetime:function(g,l,r){var a=window.DateTime||luxon.DateTime,u=l.inputFormat||"yyyy-MM-dd HH:mm:ss",m=l.outputFormat||"dd/MM/yyyy HH:mm:ss",E=void 0!==l.invalidPlaceholder?l.invalidPlaceholder:"",S=g.getValue();if(void 0!==a){var D=(window.DateTime||luxon.DateTime).fromFormat(S,u);return D.isValid?(l.timezone&&(D=D.shiftTimezone(l.timezone)),D.toFormat(m)):!0===E?S:"function"==typeof E?E(S):E}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(g,l,r){var a=window.DateTime||luxon.DateTime,u=l.inputFormat||"yyyy-MM-dd HH:mm:ss",m=void 0!==l.invalidPlaceholder?l.invalidPlaceholder:"",E=void 0!==l.suffix&&l.suffix,S=void 0!==l.unit?l.unit:"days",D=void 0!==l.humanize&&l.humanize,N=void 0!==l.date?l.date:a.now(),K=g.getValue();if(void 0!==a){var ft=a.fromFormat(K,u);if(!ft.isValid)return!0===m?K:"function"==typeof m?m(K):m;if(!D)return parseInt(ft.diff(N,S)[S])+(E?" "+E:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(g,l,r){var a=g.getValue();return void 0===l[a]?(console.warn("Missing display value for "+a),a):l[a]},star:function(g,l,r){var a=g.getValue(),u=g.getElement(),m=l&&l.stars?l.stars:5,E=document.createElement("span"),S=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.verticalAlign="middle",S.setAttribute("width","14"),S.setAttribute("height","14"),S.setAttribute("viewBox","0 0 512 512"),S.setAttribute("xml:space","preserve"),S.style.padding="0 1px",a=a&&!isNaN(a)?parseInt(a):0,a=Math.max(0,Math.min(a,m));for(var K=1;K<=m;K++){var ft=S.cloneNode(!0);ft.innerHTML=K<=a?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',E.appendChild(ft)}return u.style.whiteSpace="nowrap",u.style.overflow="hidden",u.style.textOverflow="ellipsis",u.setAttribute("aria-label",a),E},traffic:function(g,l,r){var K,a=this.sanitizeHTML(g.getValue())||0,u=document.createElement("span"),m=l&&l.max?l.max:100,E=l&&l.min?l.min:0,S=l&&void 0!==l.color?l.color:["red","orange","green"],D="#666666";if(!isNaN(a)&&void 0!==g.getValue()){switch(u.classList.add("tabulator-traffic-light"),K=parseFloat(a)<=m?parseFloat(a):m,K=parseFloat(K)>=E?parseFloat(K):E,K=Math.round((K-E)/((m-E)/100)),typeof S){case"string":D=S;break;case"function":D=S(a);break;case"object":if(Array.isArray(S)){var Ot=Math.floor(K/(100/S.length));Ot=Math.min(Ot,S.length-1),D=S[Ot=Math.max(Ot,0)];break}}return u.style.backgroundColor=D,u}},progress:function(g,l,r){var N,K,ft,Ot,a=this.sanitizeHTML(g.getValue())||0,u=g.getElement(),m=l&&l.max?l.max:100,E=l&&l.min?l.min:0,S=l&&l.legendAlign?l.legendAlign:"center";switch(N=parseFloat(a)<=m?parseFloat(a):m,N=parseFloat(N)>=E?parseFloat(N):E,N=Math.round((N-E)/((m-E)/100)),typeof l.color){case"string":K=l.color;break;case"function":K=l.color(a);break;case"object":if(Array.isArray(l.color)){var zt=100/l.color.length,ae=Math.floor(N/zt);ae=Math.min(ae,l.color.length-1),ae=Math.max(ae,0),K=l.color[ae];break}default:K="#2DC214"}switch(typeof l.legend){case"string":ft=l.legend;break;case"function":ft=l.legend(a);break;case"boolean":ft=a;break;default:ft=!1}switch(typeof l.legendColor){case"string":Ot=l.legendColor;break;case"function":Ot=l.legendColor(a);break;case"object":Array.isArray(l.legendColor)&&(zt=100/l.legendColor.length,ae=Math.floor(N/zt),ae=Math.min(ae,l.legendColor.length-1),ae=Math.max(ae,0),Ot=l.legendColor[ae]);break;default:Ot="#000"}u.style.minWidth="30px",u.style.position="relative",u.setAttribute("aria-label",N);var ye=document.createElement("div");ye.style.display="inline-block",ye.style.position="absolute",ye.style.width=N+"%",ye.style.backgroundColor=K,ye.style.height="100%",ye.setAttribute("data-max",m),ye.setAttribute("data-min",E);var Re=document.createElement("div");if(Re.style.position="relative",Re.style.width="100%",Re.style.height="100%",ft){var Oe=document.createElement("div");Oe.style.position="absolute",Oe.style.top=0,Oe.style.left=0,Oe.style.textAlign=S,Oe.style.width="100%",Oe.style.color=Ot,Oe.innerHTML=ft}return r(function(){if(!(g instanceof Ku)){var ai=document.createElement("div");ai.style.position="absolute",ai.style.top="4px",ai.style.bottom="4px",ai.style.left="4px",ai.style.right="4px",u.appendChild(ai),u=ai}u.appendChild(Re),Re.appendChild(ye),ft&&Re.appendChild(Oe)}),""},color:function(g,l,r){return g.getElement().style.backgroundColor=this.sanitizeHTML(g.getValue()),""},buttonTick:function(g,l,r){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(g,l,r){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(g,l,r){return this.table.rowManager.activeRows.indexOf(g.getRow()._getSelf())+1},handle:function(g,l,r){return g.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(g,l,r){var a=document.createElement("div"),u=g.getRow()._row.modules.responsiveLayout;function m(E){var S=u.element;u.open=E,S&&(u.open?(a.classList.add("open"),S.style.display=""):(a.classList.remove("open"),S.style.display="none"))}return a.classList.add("tabulator-responsive-collapse-toggle"),a.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",g.getElement().classList.add("tabulator-row-handle"),a.addEventListener("click",function(E){E.stopImmediatePropagation(),m(!u.open)}),m(u.open),a},rowSelection:function(g,l,r){var a=document.createElement("input");if(a.type="checkbox",this.table.modExists("selectRow",!0))if(a.addEventListener("click",m=>{m.stopPropagation()}),"function"==typeof g.getRow){var u=g.getRow();u instanceof gu?(a.addEventListener("change",m=>{u.toggleSelect()}),a.checked=u.isSelected&&u.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(u,a)):a=""}else a.addEventListener("change",m=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(l.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(a);return a}};let Pp=(()=>{class g extends uo{constructor(r){super(r),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(r){r.modules.format=this.lookupFormatter(r,""),void 0!==r.definition.formatterPrint&&(r.modules.format.print=this.lookupFormatter(r,"Print")),void 0!==r.definition.formatterClipboard&&(r.modules.format.clipboard=this.lookupFormatter(r,"Clipboard")),void 0!==r.definition.formatterHtmlOutput&&(r.modules.format.htmlOutput=this.lookupFormatter(r,"HtmlOutput"))}lookupFormatter(r,a){var u={params:r.definition["formatter"+a+"Params"]||{}},m=r.definition["formatter"+a];switch(typeof m){case"string":g.formatters[m]?u.formatter=g.formatters[m]:(console.warn("Formatter Error - No such formatter found: ",m),u.formatter=g.formatters.plaintext);break;case"function":u.formatter=m;break;default:u.formatter=g.formatters.plaintext}return u}cellRendered(r){r.modules.format&&r.modules.format.renderedCallback&&!r.modules.format.rendered&&(r.modules.format.renderedCallback(),r.modules.format.rendered=!0)}formatHeader(r,a,u){var m,E,S,D;return r.definition.titleFormatter?(m=this.getFormatter(r.definition.titleFormatter),S=N=>{r.titleFormatterRendered=N},D={getValue:function(){return a},getElement:function(){return u}},E="function"==typeof(E=r.definition.titleFormatterParams||{})?E():E,m.call(this,D,E,S)):a}formatValue(r){var a=r.getComponent(),u="function"==typeof r.column.modules.format.params?r.column.modules.format.params(a):r.column.modules.format.params;return r.column.modules.format.formatter.call(this,a,u,function(E){r.modules.format||(r.modules.format={}),r.modules.format.renderedCallback=E,r.modules.format.rendered=!1})}formatExportValue(r,a){var m,u=r.column.modules.format[a];if(u){let E=function(S){r.modules.format||(r.modules.format={}),r.modules.format.renderedCallback=S,r.modules.format.rendered=!1};return m="function"==typeof u.params?u.params(component):u.params,u.formatter.call(this,r.getComponent(),m,E)}return this.formatValue(r)}sanitizeHTML(r){if(r){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(r).replace(/[&<>"'`=\/]/g,function(u){return a[u]})}return r}emptyToSpace(r){return null==r||""===r?"&nbsp;":r}getFormatter(r){switch(typeof r){case"string":g.formatters[r]?r=g.formatters[r]:(console.warn("Formatter Error - No such formatter found: ",r),r=g.formatters.plaintext);break;case"function":r=r;break;default:r=g.formatters.plaintext}return r}}return g.moduleName="format",g.formatters=Sh,g})(),Fp=(()=>{class g extends uo{constructor(r){super(r),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(r){this.layoutElement(r.element,r.column)}initializeColumn(r){var a={margin:0,edge:!1};r.isGroup||(this.frozenCheck(r)?(a.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(r):this.rightColumns.unshift(r),this.active=!0,r.modules.frozen=a):this.initializationMode="right")}frozenCheck(r){return r.parent.isGroup&&r.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),r.parent.isGroup?this.frozenCheck(r.parent):r.definition.frozen}scrollHorizontal(){var r;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),r=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),r.forEach(a=>{"row"===a.type&&this.layoutRow(a)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(r){r.forEach(a=>{a.calcs.top&&this.layoutRow(a.calcs.top),a.calcs.bottom&&this.layoutRow(a.calcs.bottom),a.groupList&&a.groupList.length&&this.layoutGroupCalcs(a.groupList&&a.groupList)})}layoutColumnPosition(r){var a=[];this.leftColumns.forEach((u,m)=>{if(u.modules.frozen.margin=this._calcSpace(this.leftColumns,m)+this.table.columnManager.scrollLeft+"px",u.modules.frozen.edge=m==this.leftColumns.length-1,u.parent.isGroup){var E=this.getColGroupParentElement(u);a.includes(E)||(this.layoutElement(E,u),a.push(E)),u.modules.frozen.edge&&E.classList.add("tabulator-frozen-"+u.modules.frozen.position)}else this.layoutElement(u.getElement(),u);r&&u.cells.forEach(S=>{this.layoutElement(S.getElement(!0),u)})}),this.rightColumns.forEach((u,m)=>{u.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,m+1)+"px",u.modules.frozen.edge=m==this.rightColumns.length-1,this.layoutElement(u.parent.isGroup?this.getColGroupParentElement(u):u.getElement(),u),r&&u.cells.forEach(E=>{this.layoutElement(E.getElement(!0),u)})})}getColGroupParentElement(r){return r.parent.isGroup?this.getColGroupParentElement(r.parent):r.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(r=>{"row"===r.type&&this.layoutRow(r)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(r){r.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(u=>{var m=r.getCell(u);m&&this.layoutElement(m.getElement(!0),u)}),this.rightColumns.forEach(u=>{var m=r.getCell(u);m&&this.layoutElement(m.getElement(!0),u)})}layoutElement(r,a){a.modules.frozen&&(r.style.position="absolute",r.style.left=a.modules.frozen.margin,r.classList.add("tabulator-frozen"),a.modules.frozen.edge&&r.classList.add("tabulator-frozen-"+a.modules.frozen.position))}_calcSpace(r,a){var u=0;for(let m=0;m<a;m++)r[m].visible&&(u+=r[m].getWidth());return u}}return g.moduleName="frozenColumns",g})(),Bp=(()=>{class g extends uo{constructor(r){super(r),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(r){return this.rows.indexOf(r)>-1}isFrozen(){return!!this.rows.length}getRows(r){var a=r.slice(0);return this.rows.forEach(function(u){var m=a.indexOf(u);m>-1&&a.splice(m,1)}),a}freezeRow(r){r.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(r.modules.frozen=!0,this.topElement.appendChild(r.getElement()),r.initialize(),r.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(r),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(r){this.rows.indexOf(r),r.modules.frozen?(r.modules.frozen=!1,this.detachRow(r),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(r){var a=this.rows.indexOf(r);if(a>-1){var u=r.getElement();u.parentNode&&u.parentNode.removeChild(u),this.rows.splice(a,1)}}styleRows(r){this.rows.forEach((a,u)=>{this.table.rowManager.styleRow(a,u)})}}return g.moduleName="frozenRows",g})();class ip{constructor(l){return this._group=l,this.type="GroupComponent",new Proxy(this,{get:function(r,a,u){return void 0!==r[a]?r[a]:r._group.table.componentFunctionBinder.handle("row",r._group,a)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class mu{constructor(l,r,a,u,m,E,S){this.groupManager=l,this.parent=r,this.key=u,this.level=a,this.field=m,this.hasSubGroups=a<l.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=S,this.rows=[],this.groups=[],this.groupList=[],this.generator=E,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=S?S.visible:void 0!==l.startOpen[a]?l.startOpen[a]:l.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(l){l.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var l=document.createElement("div");l.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(l),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var l=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[l]&&this.groupManager.allowedValues[l].forEach(r=>{this._createGroup(r,l)})}addBindings(){var l,r,a;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(a=!1,this.element.addEventListener("touchstart",m=>{a=!0},{passive:!0}),this.element.addEventListener("touchend",m=>{a&&this.groupManager.table.options.groupTap(m,this.getComponent()),a=!1})),this.groupManager.table.options.groupDblTap&&(l=null,this.element.addEventListener("touchend",m=>{l?(clearTimeout(l),l=null,this.groupManager.table.options.groupDblTap(m,this.getComponent())):l=setTimeout(()=>{clearTimeout(l),l=null},300)})),this.groupManager.table.options.groupTapHold&&(r=null,this.element.addEventListener("touchstart",m=>{clearTimeout(r),r=setTimeout(()=>{clearTimeout(r),r=null,a=!1,this.groupManager.table.options.groupTapHold(m,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",m=>{clearTimeout(r),r=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",m=>{m.stopPropagation(),m.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(l,r){var a=r+"_"+l,u=new mu(this.groupManager,this,r,l,this.groupManager.groupIDLookups[r].field,this.groupManager.headerGenerator[r]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[a]);this.groups[a]=u,this.groupList.push(u)}_addRowToGroup(l){var r=this.level+1;if(this.hasSubGroups){var a=this.groupManager.groupIDLookups[r].func(l.getData()),u=r+"_"+a;this.groupManager.allowedValues&&this.groupManager.allowedValues[r]?this.groups[u]&&this.groups[u].addRow(l):(this.groups[u]||this._createGroup(a,r),this.groups[u].addRow(l))}}_addRow(l){this.rows.push(l),l.modules.group=this}insertRow(l,r,a){var u=this.conformRowData({});l.updateData(u);var m=this.rows.indexOf(r);m>-1?this.rows.splice(a?m+1:m,0,l):a?this.rows.push(l):this.rows.unshift(l),l.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(l){this.arrowElement.style.marginLeft=l,this.groupList.forEach(function(r){r.scrollHeader(l)})}getRowIndex(l){}conformRowData(l){return this.field?l[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(l=this.parent.conformRowData(l)),l}removeRow(l){var r=this.rows.indexOf(l),a=l.getElement();r>-1&&this.rows.splice(r,1),this.groupManager.table.options.groupValues||this.rows.length?(a.parentNode&&a.parentNode.removeChild(a),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(l){var a,r=l.level+"_"+l.key;this.groups[r]&&(delete this.groups[r],(a=this.groupList.indexOf(l))>-1&&this.groupList.splice(a,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(l){var r=[];return r.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(a){r=r.concat(a.getHeadersAndRows(l))}):(!l&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),r.push(this.calcs.top)),r=r.concat(this.rows),!l&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),r.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!l&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),r.push(this.calcs.top))),!l&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),r.push(this.calcs.bottom)))),r}getData(l,r){var a=[];return this._visSet(),(!l||l&&this.visible)&&this.rows.forEach(u=>{a.push(u.getData(r||"data"))}),a}getRowCount(){var l=0;return this.groupList.length?this.groupList.forEach(r=>{l+=r.getRowCount()}):l=this.rows.length,l}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(l=>{l.getHeadersAndRows().forEach(a=>{a.detachElement()})}):this.rows.forEach(l=>{var r=l.getElement();r.parentNode.removeChild(r)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var l=this.getElement();this.groupList.length?this.groupList.forEach(r=>{r.getHeadersAndRows().forEach(u=>{var m=u.getElement();l.parentNode.insertBefore(m,l.nextSibling),u.initialize(),l=m})}):this.rows.forEach(r=>{var a=r.getElement();l.parentNode.insertBefore(a,l.nextSibling),r.initialize(),l=a}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var l=[];"function"==typeof this.visible&&(this.rows.forEach(function(r){l.push(r.getData())}),this.visible=this.visible(this.key,this.getRowCount(),l,this.getComponent()))}getRowGroup(l){var r=!1;return this.groupList.length?this.groupList.forEach(function(a){var u=a.getRowGroup(l);u&&(r=u)}):this.rows.find(function(a){return a===l})&&(r=this),r}getSubGroups(l){var r=[];return this.groupList.forEach(function(a){r.push(l?a.getComponent():a)}),r}getRows(l){var r=[];return this.rows.forEach(function(a){r.push(l?a.getComponent():a)}),r}generateGroupHeaderContents(){var l=[];for(this.rows.forEach(function(r){l.push(r.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),l,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(l=[]){return l.unshift(this.key),this.parent&&this.parent.getPath(l),l}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var l=0;l<this.element.childNodes.length;++l)this.element.childNodes[l].parentNode.removeChild(this.element.childNodes[l]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(l){(!this.initialized||l)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,_r.elVisible(this.element)&&this.initialize(!0)}setHeight(l){this.height!=l&&(this.height=l,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new ip(this)),this.component}}let Hp=(()=>{class g extends uo{constructor(r){super(r),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var r=this.table.options.groupBy,a=this.table.options.groupStartOpen,u=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(r)&&Array.isArray(u)&&r.length>u.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(E,S)=>{this.headerGenerator[0]=(D,N,K)=>(void 0===D?"":D)+"<span>("+N+" "+(1===N?E:S.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(r)||r?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(E=>{E.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),E.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(r)||(r=[r]),r.forEach((E,S)=>{var D,N;D="function"==typeof E?E:(N=this.table.columnManager.getColumnByField(E))?function(K){return N.getFieldValue(K)}:function(K){return K[E]},this.groupIDLookups.push({field:"function"!=typeof E&&E,func:D,values:!!this.allowedValues&&this.allowedValues[S]})}),a&&(Array.isArray(a)||(a=[a]),a.forEach(E=>{}),this.startOpen=a),u&&(this.headerGenerator=Array.isArray(u)?u:[u])}}rowSample(r,a){var u=this.getGroups(!1)[0];return a.push(u.getRows(!1)[0]),a}virtualRenderFill(){var r=this.table.rowManager.tableElement,a=this.table.rowManager.getVisibleRows();a=a.filter(u=>"group"!==u.type),r.style.minWidth=a.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(r,a,u){this.assignRowToGroup(r);var m=r.modules.group.rows;return m.length>1&&(!a||a&&-1==m.indexOf(a)?u?m[0]!==r&&this.table.rowManager.moveRowInArray(r.modules.group.rows,r,a=m[0],!u):m[m.length-1]!==r&&this.table.rowManager.moveRowInArray(r.modules.group.rows,r,a=m[m.length-1],!u):this.table.rowManager.moveRowInArray(r.modules.group.rows,r,a,!u)),a}trackChanges(){this.dispatch("group-changed")}setGroupBy(r){this.table.options.groupBy=r,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(r){this.table.options.groupValues=r,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(r){this.table.options.groupStartOpen=r,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(r){this.table.options.groupHeader=r,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(r){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(r){return!!r.modules.group&&r.modules.group.getComponent()}rowMoving(r,a,u){!u&&a instanceof mu&&(a=this.table.rowManager.prevDisplayRow(r)||a);var m=a instanceof mu?a:a.modules.group,E=r instanceof mu?r:r.modules.group;m===E?this.table.rowManager.moveRowInArray(m.rows,r,a,u):(E&&E.removeRow(r),m.insertRow(r,a,u))}rowDeleting(r){r.modules.group&&r.modules.group.removeRow(r)}rowsUpdated(r){this.updateGroupRows(!0)}cellUpdated(r){this.reassignRowToGroup(r.row)}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}getRows(r){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(r),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):r.slice(0)}getGroups(r){var a=[];return this.groupList.forEach(function(u){a.push(r?u.getComponent():u)}),a}getChildGroups(r){var a=[];return r||(r=this),r.groupList.forEach(u=>{u.groupList.length?a=a.concat(this.getChildGroups(u)):a.push(u)}),a}wipe(){this.groupList.forEach(function(r){r.wipe()})}pullGroupListData(r){var a=[];return r.forEach(u=>{var m={level:0,rowCount:0,headerContent:""},E=[];u.hasSubGroups?(E=this.pullGroupListData(u.groupList),m.level=u.level,m.rowCount=E.length-u.groupList.length,m.headerContent=u.generator(u.key,m.rowCount,u.rows,u),a.push(m),a=a.concat(E)):(m.level=u.level,m.headerContent=u.generator(u.key,u.rows.length,u.rows,u),m.rowCount=u.getRows().length,a.push(m),u.getRows().forEach(S=>{a.push(S.getData("data"))}))}),a}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(r){var a=!1;return this.groupList.forEach(u=>{var m=u.getRowGroup(r);m&&(a=m)}),a}countGroups(){return this.groupList.length}generateGroups(r){var a=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(u=>{this.createGroup(u,0,a)}),r.forEach(u=>{this.assignRowToExistingGroup(u,a)})):r.forEach(u=>{this.assignRowToGroup(u,a)})}createGroup(r,a,u){var E,m=a+"_"+r;E=new mu(this,!1,a,r,this.groupIDLookups[0].field,this.headerGenerator[0],(u=u||[])[m]),this.groups[m]=E,this.groupList.push(E)}assignRowToExistingGroup(r,a){var m="0_"+this.groupIDLookups[0].func(r.getData());this.groups[m]&&this.groups[m].addRow(r)}assignRowToGroup(r,a){var u=this.groupIDLookups[0].func(r.getData()),m=!this.groups["0_"+u];return m&&this.createGroup(u,0,a),this.groups["0_"+u].addRow(r),!m}reassignRowToGroup(r){if("row"===r.type){var a=r.modules.group,u=a.getPath(),m=this.getExpectedPath(r);u.length==m.length&&u.every((S,D)=>S===m[D])||(a.removeRow(r),this.assignRowToGroup(r,this.groups),this.refreshData(!0))}}getExpectedPath(r){var a=[],u=r.getData();return this.groupIDLookups.forEach(m=>{a.push(m.func(u))}),a}updateGroupRows(r){var a=[];return this.groupList.forEach(u=>{a=a.concat(u.getHeadersAndRows())}),r&&this.refreshData(!0,this.displayHandler),a}scrollHeaders(r){"virtual"===this.table.options.renderHorizontal&&(r-=this.table.columnManager.renderer.vDomPadLeft),r+="px",this.groupList.forEach(a=>{a.scrollHeader(r)})}removeGroup(r){var u,a=r.level+"_"+r.key;this.groups[a]&&(delete this.groups[a],(u=this.groupList.indexOf(r))>-1&&this.groupList.splice(u,1))}}return g.moduleName="groupRows",g})();var yd={cellEdit:function(g){g.component.setValueProcessData(g.data.oldValue),g.component.cellRendered()},rowAdd:function(g){g.component.deleteActual()},rowDelete:function(g){var l=this.table.rowManager.addRowActual(g.data.data,g.data.pos,g.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(g.component,l)},rowMove:function(g){this.table.rowManager.moveRowActual(g.component,this.table.rowManager.rows[g.data.posFrom],!g.data.after),this.table.rowManager.redraw()}},Of={cellEdit:function(g){g.component.setValueProcessData(g.data.newValue),g.component.cellRendered()},rowAdd:function(g){var l=this.table.rowManager.addRowActual(g.data.data,g.data.pos,g.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(g.component,l)},rowDelete:function(g){g.component.deleteActual()},rowMove:function(g){this.table.rowManager.moveRowActual(g.component,this.table.rowManager.rows[g.data.posTo],g.data.after),this.table.rowManager.redraw()}};let Vp=(()=>{class g extends uo{constructor(r){super(r),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(r,a,u){this.action("rowMove",r,{posFrom:this.table.rowManager.getRowPosition(r),posTo:this.table.rowManager.getRowPosition(a),to:a,after:u})}rowAdded(r,a,u,m){this.action("rowAdd",r,{data:a,pos:u,index:m})}rowDeleted(r){var a,u;this.table.options.groupBy?(a=(u=r.getComponent().getGroup().rows).indexOf(r))&&(a=u[a-1]):(a=r.table.rowManager.getRowIndex(r))&&(a=r.table.rowManager.rows[a-1]),this.action("rowDelete",r,{data:r.getData(),pos:!a,index:a})}cellUpdated(r){this.action("cellEdit",r,{oldValue:r.oldValue,newValue:r.value})}clear(){this.history=[],this.index=-1}action(r,a,u){this.history=this.history.slice(0,this.index+1),this.history.push({type:r,component:a,data:u}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(r){var a=this.history.findIndex(function(u){return u.component===r});a>-1&&(this.history.splice(a,1),a<=this.index&&this.index--,this.clearComponentHistory(r))}undo(){if(this.index>-1){let r=this.history[this.index];return g.undoers[r.type].call(this,r),this.index--,this.dispatchExternal("historyUndo",r.type,r.component.getComponent(),r.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let r=this.history[this.index];return g.redoers[r.type].call(this,r),this.dispatchExternal("historyRedo",r.type,r.component.getComponent(),r.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(r,a){this.history.forEach(function(u){if(u.component instanceof Vs)u.component===r&&(u.component=a);else if(u.component instanceof fu&&u.component.row===r){var m=u.component.column.getField();m&&(u.component=a.getCell(m))}})}}return g.moduleName="history",g.undoers=yd,g.redoers=Of,g})(),wm=(()=>{class g extends uo{constructor(r){super(r),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var r=this.table.originalElement,a=this.table.options,m=r.getElementsByTagName("th"),E=r.getElementsByTagName("tbody")[0],S=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),E=E?E.getElementsByTagName("tr"):[],this._extractOptions(r,a),m.length?this._extractHeaders(m,E):this._generateBlankHeaders(m,E);for(var D=0;D<E.length;D++){var K=E[D].getElementsByTagName("td"),ft={};this.hasIndex||(ft[a.index]=D);for(var Ot=0;Ot<K.length;Ot++)void 0!==this.fieldIndex[Ot]&&(ft[this.fieldIndex[Ot]]=K[Ot].innerHTML);S.push(ft)}a.data=S,this.dispatchExternal("htmlImported")}_extractOptions(r,a,u){var m=r.attributes,E=u?Object.assign([],u):Object.keys(a),S={};for(var D in E.forEach(ft=>{S[ft.toLowerCase()]=ft}),m){var K,N=m[D];N&&"object"==typeof N&&N.name&&0===N.name.indexOf("tabulator-")&&(K=N.name.replace("tabulator-",""),void 0!==S[K]&&(a[S[K]]=this._attribValue(N.value)))}}_attribValue(r){return"true"===r||"false"!==r&&r}_findCol(r){return this.table.options.columns.find(u=>u.title===r)||!1}_extractHeaders(r,a){for(var u=0;u<r.length;u++){var D,m=r[u],E=!1,S=this._findCol(m.textContent);S?E=!0:S={title:m.textContent.trim()},S.field||(S.field=m.textContent.trim().toLowerCase().replace(" ","_")),(D=m.getAttribute("width"))&&!S.width&&(S.width=D),this._extractOptions(m,S,$h.prototype.defaultOptionList),this.fieldIndex[u]=S.field,S.field==this.table.options.index&&(this.hasIndex=!0),E||this.table.options.columns.push(S)}}_generateBlankHeaders(r,a){for(var u=0;u<r.length;u++){var m=r[u],E={title:"",field:"col"+u};this.fieldIndex[u]=E.field;var S=m.getAttribute("width");S&&(E.width=S),this.table.options.columns.push(E)}}}return g.moduleName="htmlTableImport",g})(),Up=(()=>{class g extends uo{constructor(r){super(r),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(r,a){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){r.preventDefault();try{if(document.selection)(u=document.body.createTextRange()).moveToElementText(this.element),u.select();else if(window.getSelection){var u;(u=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(u)}}catch(m){}}}initializeExternalEvents(){for(let r in this.eventMap)this.subscriptionChangeExternal(r,this.subscriptionChanged.bind(this,r))}subscriptionChanged(r,a){a?this.subscribers[r]||(this.eventMap[r].includes("-")?(this.subscribers[r]=this.handle.bind(this,r),this.subscribe(this.eventMap[r],this.subscribers[r])):this.subscribeTouchEvents(r)):this.eventMap[r].includes("-")?this.subscribers[r]&&!this.columnSubscribers[r]&&!this.subscribedExternal(r)&&(this.unsubscribe(this.eventMap[r],this.subscribers[r]),delete this.subscribers[r]):this.unsubscribeTouchEvents(r)}subscribeTouchEvents(r){var a=this.eventMap[r];this.touchSubscribers[a+"-touchstart"]||(this.touchSubscribers[a+"-touchstart"]=this.handleTouch.bind(this,a,"start"),this.touchSubscribers[a+"-touchend"]=this.handleTouch.bind(this,a,"end"),this.subscribe(a+"-touchstart",this.touchSubscribers[a+"-touchstart"]),this.subscribe(a+"-touchend",this.touchSubscribers[a+"-touchend"])),this.subscribers[r]=!0}unsubscribeTouchEvents(r){var a=!0,u=this.eventMap[r];if(this.subscribers[r]&&!this.subscribedExternal(r)){delete this.subscribers[r];for(let m in this.eventMap)this.eventMap[m]===u&&this.subscribers[m]&&(a=!1);a&&(this.unsubscribe(u+"-touchstart",this.touchSubscribers[u+"-touchstart"]),this.unsubscribe(u+"-touchend",this.touchSubscribers[u+"-touchend"]),delete this.touchSubscribers[u+"-touchstart"],delete this.touchSubscribers[u+"-touchend"])}}initializeColumn(r){var a=r.definition;for(let u in this.eventMap)a[u]&&(this.subscriptionChanged(u,!0),this.columnSubscribers[u]||(this.columnSubscribers[u]=[]),this.columnSubscribers[u].push(r))}handle(r,a,u){this.dispatchEvent(r,a,u)}handleTouch(r,a,u,m){var E=this.touchWatchers[r];switch("column"===r&&(r="header"),a){case"start":E.tap=!0,clearTimeout(E.tapHold),E.tapHold=setTimeout(()=>{clearTimeout(E.tapHold),E.tapHold=null,E.tap=null,clearTimeout(E.tapDbl),E.tapDbl=null,this.dispatchEvent(r+"TapHold",u,m)},1e3);break;case"end":E.tap&&(E.tap=null,this.dispatchEvent(r+"Tap",u,m)),E.tapDbl?(clearTimeout(E.tapDbl),E.tapDbl=null,this.dispatchEvent(r+"DblTap",u,m)):E.tapDbl=setTimeout(()=>{clearTimeout(E.tapDbl),E.tapDbl=null},300),clearTimeout(E.tapHold),E.tapHold=null}}dispatchEvent(r,a,u){var E,m=u.getComponent();this.columnSubscribers[r]&&(u instanceof fu?E=u.column.definition[r]:u instanceof $h&&(E=u.definition[r]),E&&E(a,m)),this.dispatchExternal(r,a,m)}}return g.moduleName="interaction",g})();var Gp={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},xf={keyBlock:function(g){g.stopPropagation(),g.preventDefault()},scrollPageUp:function(g){var l=this.table.rowManager,r=l.scrollTop-l.element.clientHeight;g.preventDefault(),l.displayRowsCount&&(r>=0?l.element.scrollTop=r:l.scrollToRow(l.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(g){var l=this.table.rowManager,r=l.scrollTop+l.element.clientHeight,a=l.element.scrollHeight;g.preventDefault(),l.displayRowsCount&&(r<=a?l.element.scrollTop=r:l.scrollToRow(l.getDisplayRows()[l.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(g){var l=this.table.rowManager;g.preventDefault(),l.displayRowsCount&&l.scrollToRow(l.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(g){var l=this.table.rowManager;g.preventDefault(),l.displayRowsCount&&l.scrollToRow(l.getDisplayRows()[l.displayRowsCount-1]),this.table.element.focus()},navPrev:function(g){this.dispatch("keybinding-nav-prev",g)},navNext:function(g){this.dispatch("keybinding-nav-next",g)},navLeft:function(g){this.dispatch("keybinding-nav-left",g)},navRight:function(g){this.dispatch("keybinding-nav-right",g)},navUp:function(g){this.dispatch("keybinding-nav-up",g)},navDown:function(g){this.dispatch("keybinding-nav-down",g)},undo:function(g){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(g.preventDefault(),this.table.modules.history.undo()))},redo:function(g){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(g.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(g){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let Wp=(()=>{class g extends uo{constructor(r){super(r),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var r=this.table.options.keybindings,a={};if(this.watchKeys={},this.pressedKeys=[],!1!==r){for(let u in g.bindings)a[u]=g.bindings[u];if(Object.keys(r).length)for(let u in r)a[u]=r[u];this.mapBindings(a),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(r){for(let a in r)g.actions[a]?r[a]&&("object"!=typeof r[a]&&(r[a]=[r[a]]),r[a].forEach(u=>{this.mapBinding(a,u)})):console.warn("Key Binding Error - no such action:",a)}mapBinding(r,a){var u={action:g.actions[r],keys:[],ctrl:!1,shift:!1,meta:!1};a.toString().toLowerCase().split(" ").join("").split("+").forEach(E=>{switch(E){case"ctrl":u.ctrl=!0;break;case"shift":u.shift=!0;break;case"meta":u.meta=!0;break;default:E=parseInt(E),u.keys.push(E),this.watchKeys[E]||(this.watchKeys[E]=[]),this.watchKeys[E].push(u)}})}bindEvents(){var r=this;this.keyupBinding=function(a){var u=a.keyCode,m=r.watchKeys[u];m&&(r.pressedKeys.push(u),m.forEach(function(E){r.checkBinding(a,E)}))},this.keydownBinding=function(a){var u=a.keyCode;if(r.watchKeys[u]){var E=r.pressedKeys.indexOf(u);E>-1&&r.pressedKeys.splice(E,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(r,a){var u=!0;return r.ctrlKey==a.ctrl&&r.shiftKey==a.shift&&r.metaKey==a.meta&&(a.keys.forEach(m=>{-1==this.pressedKeys.indexOf(m)&&(u=!1)}),u&&a.action.call(this,r),!0)}}return g.moduleName="keybindings",g.bindings=Gp,g.actions=xf,g})(),kf=(()=>{class g extends uo{constructor(r){super(r),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(r){(r.column.definition.contextMenu||r.column.definition.clickMenu)&&this.initializeCell(r)}initializeColumn(r){var a=r.definition;(a.headerContextMenu||a.headerClickMenu||a.headerMenu)&&this.initializeColumnHeader(r)}initializeColumnHeader(r){var a;r.definition.headerContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,r.definition.headerContextMenu)),this.tapHold(r,r.definition.headerContextMenu)),r.definition.headerMenu&&((a=document.createElement("span")).classList.add("tabulator-header-menu-button"),a.innerHTML="&vellip;",a.addEventListener("click",u=>{u.stopPropagation(),u.preventDefault(),this.LoadMenuEvent(r,r.definition.headerMenu,u)}),r.titleElement.insertBefore(a,r.titleElement.firstChild))}LoadMenuEvent(r,a,u){a="function"==typeof a?a.call(this.table,r.getComponent(),u):a,this.loadMenu(u,r,a)}tapHold(r,a){var u=r.getElement(),m=null,E=!1;u.addEventListener("touchstart",S=>{clearTimeout(m),E=!1,m=setTimeout(()=>{clearTimeout(m),m=null,E=!0,this.LoadMenuEvent(r,a,S)},1e3)},{passive:!0}),u.addEventListener("touchend",S=>{clearTimeout(m),m=null,E&&S.preventDefault()})}initializeCell(r){r.column.definition.contextMenu&&(r.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,r.column.definition.contextMenu)),this.tapHold(r,r.column.definition.contextMenu)),r.column.definition.clickMenu&&r.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,r,r.column.definition.clickMenu))}initializeRow(r){this.table.options.rowContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,this.table.options.rowContextMenu)),this.tapHold(r,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&r.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,r,this.table.options.rowClickMenu))}initializeGroup(r){this.table.options.groupContextMenu&&(r.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,r,this.table.options.groupContextMenu)),this.tapHold(r,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&r.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,r,this.table.options.groupClickMenu))}loadMenu(r,a,u,m){var E=!(r instanceof MouseEvent),S=document.createElement("div");if(S.classList.add("tabulator-menu"),E||r.preventDefault(),u&&u.length){if(!m){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}u.forEach(D=>{var N=document.createElement("div"),K=D.label,ft=D.disabled;D.separator?N.classList.add("tabulator-menu-separator"):(N.classList.add("tabulator-menu-item"),"function"==typeof K&&(K=K.call(this.table,a.getComponent())),K instanceof Node?N.appendChild(K):N.innerHTML=K,"function"==typeof ft&&(ft=ft.call(this.table,a.getComponent())),ft?(N.classList.add("tabulator-menu-item-disabled"),N.addEventListener("click",Ot=>{Ot.stopPropagation()})):D.menu&&D.menu.length?N.addEventListener("click",Ot=>{Ot.stopPropagation(),this.hideOldSubMenus(S),this.loadMenu(Ot,a,D.menu,N)}):D.action&&N.addEventListener("click",Ot=>{D.action(Ot,a.getComponent())}),D.menu&&D.menu.length&&N.classList.add("tabulator-menu-item-submenu")),S.appendChild(N)}),S.addEventListener("click",D=>{this.hideMenu()}),this.menuElements.push(S),this.positionMenu(S,m,E,r)}}hideOldSubMenus(r){var a=this.menuElements.indexOf(r);if(a>-1)for(let m=this.menuElements.length-1;m>a;m--){var u=this.menuElements[m];u.parentNode&&u.parentNode.removeChild(u),this.menuElements.pop()}}positionMenu(r,a,u,m){var S,D,N,E=Math.max(document.body.offsetHeight,window.innerHeight);a?(S=(N=_r.elOffset(a)).left+a.offsetWidth,D=N.top-1):(S=u?m.touches[0].pageX:m.pageX,D=u?m.touches[0].pageY:m.pageY,this.positionReversedX=!1),r.style.top=D+"px",r.style.left=S+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(r),D+r.offsetHeight>=E&&(r.style.top="",r.style.bottom=a?E-N.top-a.offsetHeight-1+"px":E-D+"px"),(S+r.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(r.style.left="",r.style.right=a?document.documentElement.offsetWidth-N.left+"px":document.documentElement.offsetWidth-S+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(r){27==r.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(r=>{r.parentNode&&r.parentNode.removeChild(r)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return g.moduleName="menu",g})(),Lf=(()=>{class g extends uo{constructor(r){super(r),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var r=document.createElement("div");return r.classList.add("tabulator-col"),r.classList.add("tabulator-col-placeholder"),r}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(r){var m,a=this,u={};r.modules.frozen||(m=r.getElement(),u.mousemove=function(E){r.parent===a.moving.parent&&((a.touchMove?E.touches[0].pageX:E.pageX)-_r.elOffset(m).left+a.table.columnManager.element.scrollLeft>r.getWidth()/2?(a.toCol!==r||!a.toColAfter)&&(m.parentNode.insertBefore(a.placeholderElement,m.nextSibling),a.moveColumn(r,!0)):(a.toCol!==r||a.toColAfter)&&(m.parentNode.insertBefore(a.placeholderElement,m),a.moveColumn(r,!1)))}.bind(a),m.addEventListener("mousedown",function(E){a.touchMove=!1,1===E.which&&(a.checkTimeout=setTimeout(function(){a.startMove(E,r)},a.checkPeriod))}),m.addEventListener("mouseup",function(E){1===E.which&&a.checkTimeout&&clearTimeout(a.checkTimeout)}),a.bindTouchEvents(r)),r.modules.moveColumn=u}bindTouchEvents(r){var m,E,S,D,N,K,a=r.getElement(),u=!1;a.addEventListener("touchstart",ft=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,m=r.nextColumn(),S=m?m.getWidth()/2:0,E=r.prevColumn(),D=E?E.getWidth()/2:0,N=0,K=0,u=!1,this.startMove(ft,r)},this.checkPeriod)},{passive:!0}),a.addEventListener("touchmove",ft=>{var Ot,zt;this.moving&&(this.moveHover(ft),u||(u=ft.touches[0].pageX),(Ot=ft.touches[0].pageX-u)>0?m&&Ot-N>S&&(zt=m)!==r&&(u=ft.touches[0].pageX,zt.getElement().parentNode.insertBefore(this.placeholderElement,zt.getElement().nextSibling),this.moveColumn(zt,!0)):E&&-Ot-K>D&&(zt=E)!==r&&(u=ft.touches[0].pageX,zt.getElement().parentNode.insertBefore(this.placeholderElement,zt.getElement()),this.moveColumn(zt,!1)),zt&&(m=zt.nextColumn(),N=S,S=m?m.getWidth()/2:0,E=zt.prevColumn(),K=D,D=E?E.getWidth()/2:0))},{passive:!0}),a.addEventListener("touchend",ft=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(ft)})}startMove(r,a){var u=a.getElement(),m=this.table.columnManager.getElement(),E=this.table.columnManager.getHeadersElement();this.moving=a,this.startX=(this.touchMove?r.touches[0].pageX:r.pageX)-_r.elOffset(u).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=a.getWidth()+"px",this.placeholderElement.style.height=a.getHeight()+"px",u.parentNode.insertBefore(this.placeholderElement,u),u.parentNode.removeChild(u),this.hoverElement=u.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=m.clientHeight-E.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(r)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(r){r.modules.moveColumn.mousemove&&r.getElement().addEventListener("mousemove",r.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(r){r.modules.moveColumn.mousemove&&r.getElement().removeEventListener("mousemove",r.modules.moveColumn.mousemove)})}moveColumn(r,a){var u=this.moving.getCells();this.toCol=r,this.toColAfter=a,a?r.getCells().forEach(function(m,E){var S=m.getElement(!0);S.parentNode&&u[E]&&S.parentNode.insertBefore(u[E].getElement(),S.nextSibling)}):r.getCells().forEach(function(m,E){var S=m.getElement(!0);S.parentNode&&u[E]&&S.parentNode.insertBefore(u[E].getElement(),S)})}endMove(r){(1===r.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(r){var E,a=this.table.columnManager.getElement(),u=a.scrollLeft,m=(this.touchMove?r.touches[0].pageX:r.pageX)-_r.elOffset(a).left+u;this.hoverElement.style.left=m-this.startX+"px",m-u<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{E=Math.max(0,u-5),this.table.rowManager.getElement().scrollLeft=E,this.autoScrollTimeout=!1},1))),u+a.clientWidth-m<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{E=Math.min(a.clientWidth,u+5),this.table.rowManager.getElement().scrollLeft=E,this.autoScrollTimeout=!1},1)))}}return g.moduleName="moveColumn",g})();class Ea extends uo{constructor(l){super(l),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var l=document.createElement("div");return l.classList.add("tabulator-row"),l.classList.add("tabulator-row-placeholder"),l}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(l){var r=this,a={};a.mouseup=function(u){r.tableRowDrop(u,row)}.bind(r),a.mousemove=function(u){if(u.pageY-_r.elOffset(l.element).top+r.table.rowManager.element.scrollTop>l.getHeight()/2)r.toRow===l&&r.toRowAfter||((m=l.getElement()).parentNode.insertBefore(r.placeholderElement,m.nextSibling),r.moveRow(l,!0));else if(r.toRow!==l||r.toRowAfter){var m;(m=l.getElement()).previousSibling&&(m.parentNode.insertBefore(r.placeholderElement,m),r.moveRow(l,!1))}}.bind(r),l.modules.moveRow=a}initializeRow(l){var u,r=this,a={};a.mouseup=function(m){r.tableRowDrop(m,l)}.bind(r),a.mousemove=function(m){var E=l.getElement();m.pageY-_r.elOffset(E).top+r.table.rowManager.element.scrollTop>l.getHeight()/2?(r.toRow!==l||!r.toRowAfter)&&(E.parentNode.insertBefore(r.placeholderElement,E.nextSibling),r.moveRow(l,!0)):(r.toRow!==l||r.toRowAfter)&&(E.parentNode.insertBefore(r.placeholderElement,E),r.moveRow(l,!1))}.bind(r),this.hasHandle||((u=l.getElement()).addEventListener("mousedown",function(m){1===m.which&&(r.checkTimeout=setTimeout(function(){r.startMove(m,l)},r.checkPeriod))}),u.addEventListener("mouseup",function(m){1===m.which&&r.checkTimeout&&clearTimeout(r.checkTimeout)}),this.bindTouchEvents(l,l.getElement())),l.modules.moveRow=a}initializeColumn(l){l.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(l){if(l.column.definition.rowHandle&&!1!==this.table.options.movableRows){var r=this,a=l.getElement(!0);a.addEventListener("mousedown",function(u){1===u.which&&(r.checkTimeout=setTimeout(function(){r.startMove(u,l.row)},r.checkPeriod))}),a.addEventListener("mouseup",function(u){1===u.which&&r.checkTimeout&&clearTimeout(r.checkTimeout)}),this.bindTouchEvents(l.row,a)}}bindTouchEvents(l,r){var u,m,E,S,D,N,a=!1;r.addEventListener("touchstart",K=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,u=l.nextRow(),E=u?u.getHeight()/2:0,m=l.prevRow(),S=m?m.getHeight()/2:0,D=0,N=0,a=!1,this.startMove(K,l)},this.checkPeriod)},{passive:!0}),r.addEventListener("touchmove",K=>{var ft,Ot;this.moving&&(K.preventDefault(),this.moveHover(K),a||(a=K.touches[0].pageY),(ft=K.touches[0].pageY-a)>0?u&&ft-D>E&&(Ot=u)!==l&&(a=K.touches[0].pageY,Ot.getElement().parentNode.insertBefore(this.placeholderElement,Ot.getElement().nextSibling),this.moveRow(Ot,!0)):m&&-ft-N>S&&(Ot=m)!==l&&(a=K.touches[0].pageY,Ot.getElement().parentNode.insertBefore(this.placeholderElement,Ot.getElement()),this.moveRow(Ot,!1)),Ot&&(u=Ot.nextRow(),D=E,E=u?u.getHeight()/2:0,m=Ot.prevRow(),N=S,S=m?m.getHeight()/2:0))}),r.addEventListener("touchend",K=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(K),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(l=>{("row"===l.type||"group"===l.type)&&l.modules.moveRow&&l.modules.moveRow.mousemove&&l.getElement().addEventListener("mousemove",l.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(l=>{("row"===l.type||"group"===l.type)&&l.modules.moveRow&&l.modules.moveRow.mousemove&&l.getElement().removeEventListener("mousemove",l.modules.moveRow.mousemove)})}startMove(l,r){var a=r.getElement();this.setStartPosition(l,r),this.moving=r,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=r.getWidth()+"px",this.placeholderElement.style.height=r.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(r)):(a.parentNode.insertBefore(this.placeholderElement,a),a.parentNode.removeChild(a)),this.hoverElement=a.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(l)}setStartPosition(l,r){var m,E,a=this.touchMove?l.touches[0].pageX:l.pageX,u=this.touchMove?l.touches[0].pageY:l.pageY;m=r.getElement(),this.connection?(E=m.getBoundingClientRect(),this.startX=E.left-a+window.pageXOffset,this.startY=E.top-u+window.pageYOffset):this.startY=u-m.getBoundingClientRect().top}endMove(l){(!l||1===l.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(l,r){this.toRow=l,this.toRowAfter=r}moveHover(l){this.connection?this.moveHoverConnections.call(this,l):this.moveHoverTable.call(this,l)}moveHoverTable(l){var r=this.table.rowManager.getElement(),a=r.scrollTop,u=(this.touchMove?l.touches[0].pageY:l.pageY)-r.getBoundingClientRect().top+a;this.hoverElement.style.top=u-this.startY+"px"}moveHoverConnections(l){this.hoverElement.style.left=this.startX+(this.touchMove?l.touches[0].pageX:l.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?l.touches[0].pageY:l.pageY)+"px"}elementRowDrop(l,r,a){this.dispatchExternal("movableRowsElementDrop",l,r,!!a&&a.getComponent())}connectToTables(l){var r;this.connectionSelectorsTables&&(r=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",r),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:l})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(a=>{"string"==typeof a?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(a))):this.connectionElements.push(a)}),this.connectionElements.forEach(a=>{var u=m=>{this.elementRowDrop(m,a,this.moving)};a.addEventListener("mouseup",u),a.tabulatorElementDropEvent=u,a.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var l;this.connectionSelectorsTables&&(l=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",l),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(r=>{r.classList.remove("tabulator-movingrow-receiving"),r.removeEventListener("mouseup",r.tabulatorElementDropEvent),delete r.tabulatorElementDropEvent})}connect(l,r){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=l,this.connectedRow=r,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(a=>{"row"===a.type&&a.modules.moveRow&&a.modules.moveRow.mouseup&&a.getElement().addEventListener("mouseup",a.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",r,l),!0)}disconnect(l){l===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(r=>{"row"===r.type&&r.modules.moveRow&&r.modules.moveRow.mouseup&&r.getElement().removeEventListener("mouseup",r.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",l)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(l,r,a){var u=!1;if(a){switch(typeof this.table.options.movableRowsSender){case"string":u=this.senders[this.table.options.movableRowsSender];break;case"function":u=this.table.options.movableRowsSender}u?u.call(this,this.moving.getComponent(),r?r.getComponent():void 0,l):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),r?r.getComponent():void 0,l)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),r?r.getComponent():void 0,l);this.endMove()}tableRowDrop(l,r){var a=!1,u=!1;switch(l.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":a=this.receivers[this.table.options.movableRowsReceiver];break;case"function":a=this.table.options.movableRowsReceiver}a?u=a.call(this,this.connectedRow.getComponent(),r?r.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(u?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),r?r.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:r,success:u})}commsReceived(l,r,a){switch(r){case"connect":return this.connect(l,a.row);case"disconnect":return this.disconnect(l);case"dropcomplete":return this.dropComplete(l,a.row,a.success)}}}Ea.prototype.receivers={insert:function(g,l,r){return this.table.addRow(g.getData(),void 0,l),!0},add:function(g,l,r){return this.table.addRow(g.getData()),!0},update:function(g,l,r){return!!l&&(l.update(g.getData()),!0)},replace:function(g,l,r){return!!l&&(this.table.addRow(g.getData(),void 0,l),l.delete(),!0)}},Ea.prototype.senders={delete:function(g,l,r){g.delete()}},Ea.moduleName="moveRow";var Nf={};let Pf=(()=>{class g extends uo{constructor(r){super(r),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(r,a,u){return this.transformRow(a,"data",u)}initializeColumn(r){var a=!1,u={};this.allowedTypes.forEach(m=>{var S,E="mutator"+(m.charAt(0).toUpperCase()+m.slice(1));r.definition[E]&&(S=this.lookupMutator(r.definition[E]))&&(a=!0,u[E]={mutator:S,params:r.definition[E+"Params"]||{}})}),a&&(r.modules.mutate=u)}lookupMutator(r){var a=!1;switch(typeof r){case"string":g.mutators[r]?a=g.mutators[r]:console.warn("Mutator Error - No such mutator found, ignoring: ",r);break;case"function":a=r}return a}transformRow(r,a,u){var E,m="mutator"+(a.charAt(0).toUpperCase()+a.slice(1));return this.enabled&&this.table.columnManager.traverse(S=>{var D,N,K;S.modules.mutate&&(D=S.modules.mutate[m]||S.modules.mutate.mutator||!1)&&(E=S.getFieldValue(void 0!==u?u:r),("data"==a||void 0!==E)&&(K=S.getComponent(),N="function"==typeof D.params?D.params(E,r,a,K):D.params,S.setFieldValue(r,D.mutator(E,r,a,N,K))))}),r}transformCell(r,a){if(r.column.modules.mutate){var u=r.column.modules.mutate.mutatorEdit||r.column.modules.mutate.mutator||!1,m={};if(u)return m=Object.assign(m,r.row.getData()),r.column.setFieldValue(m,a),u.mutator(a,m,"edit",u.params,r.getComponent())}return a}enable(){this.enabled=!0}disable(){this.enabled=!1}}return g.moduleName="mutator",g.mutators=Nf,g})(),Rm=(()=>{class g extends uo{constructor(r){super(r),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(r,a){var E,u=this.table.rowManager,m=u.getDisplayRows();return a?m.length?E=m[0]:u.activeRows.length&&(E=u.activeRows[u.activeRows.length-1],a=!1):m.length&&(E=m[m.length-1],a=!(m.length<this.size)),{index:E,top:a}}calculatePageSizes(){var r,a;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((r=document.createElement("div")).classList.add("tabulator-row"),r.style.visibility="hidden",(a=document.createElement("div")).classList.add("tabulator-cell"),a.innerHTML="Page Row Test",r.appendChild(a),this.table.rowManager.getTableElement().appendChild(r),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/r.offsetHeight),this.table.rowManager.getTableElement().removeChild(r)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(r,a,u,m){return this.initialLoad||(this.progressiveLoad&&!u||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),m.page=this.page,this.size&&(m.size=this.size),m}userSetPageToRow(r){return this.table.options.pagination&&(r=this.rowManager.findRow(r))?this.setPageToRow(r):Promise.reject()}userSetPageSize(r){return!!this.table.options.pagination&&(this.setPageSize(r),this.setPage(1))}scrollVertical(r,a){var u;!a&&!this.table.dataLoader.loading&&(u=this.table.rowManager.getElement()).scrollHeight-u.clientHeight-r<(this.table.options.progressiveLoadScrollMargin||2*u.clientHeight)&&this.nextPage()}restOnRenderBefore(r,a){return a||"local"===this.mode&&this.reset(),r}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var r;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(r=document.createElement("button")).classList.add("tabulator-page"),r.setAttribute("type","button"),r.setAttribute("role","button"),r.setAttribute("aria-label",""),r.setAttribute("title",""),this.firstBut=r.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=r.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=r.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=r.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var r=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=r=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&r.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){r=[];for(let a=1;a<5;a++)r.push(this.size*a);this.pageSizes=r}else r=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);r.forEach(a=>{var u=document.createElement("option");u.value=a,!0===a?this.langBind("pagination|all",function(m){u.innerHTML=m}):u.innerHTML=a,this.pageSizeSelect.appendChild(u)}),this.pageSizeSelect.value=this.size}}initializePaginator(r){var a;r||(this.langBind("pagination|first",u=>{this.firstBut.innerHTML=u}),this.langBind("pagination|first_title",u=>{this.firstBut.setAttribute("aria-label",u),this.firstBut.setAttribute("title",u)}),this.langBind("pagination|prev",u=>{this.prevBut.innerHTML=u}),this.langBind("pagination|prev_title",u=>{this.prevBut.setAttribute("aria-label",u),this.prevBut.setAttribute("title",u)}),this.langBind("pagination|next",u=>{this.nextBut.innerHTML=u}),this.langBind("pagination|next_title",u=>{this.nextBut.setAttribute("aria-label",u),this.nextBut.setAttribute("title",u)}),this.langBind("pagination|last",u=>{this.lastBut.innerHTML=u}),this.langBind("pagination|last_title",u=>{this.lastBut.setAttribute("aria-label",u),this.lastBut.setAttribute("title",u)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(a=document.createElement("label"),this.langBind("pagination|page_size",u=>{this.pageSizeSelect.setAttribute("aria-label",u),this.pageSizeSelect.setAttribute("title",u),a.innerHTML=u}),this.element.appendChild(a),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",u=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!r&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(r){this.initializePaginator(!0),this.mode="progressive_"+r,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(r){this.displayIndex=r}getDisplayIndex(){return this.displayIndex}setMaxRows(r){this.max=r?!0===this.size?1:Math.ceil(r/this.size):1,this.page>this.max&&(this.page=this.max)}reset(r){this.initialLoad||("local"==this.mode||r)&&(this.page=1)}setMaxPage(r){r=parseInt(r),this.max=r||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(r){switch(r){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(r=parseInt(r))>0&&r<=this.max||"local"!==this.mode?(this.page=r,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",r),Promise.reject())}setPageToRow(r){var u=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(r);if(u>-1){var m=!0===this.size?1:Math.ceil((u+1)/this.size);return this.setPage(m)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(r){!0!==r&&(r=parseInt(r)),r>0&&(this.size=r),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let r=Math.floor((this.count-1)/2),a=Math.ceil((this.count-1)/2),u=this.max-this.page+r+1<this.count?this.max-this.count+1:Math.max(this.page-r,1),m=this.page<=a?Math.min(this.count,this.max):Math.min(this.page+a,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let E=u;E<=m;E++)E>0&&E<=this.max&&this.pagesElement.appendChild(this._generatePageButton(E));this.footerRedraw()}_generatePageButton(r){var a=document.createElement("button");return a.classList.add("tabulator-page"),r==this.page&&a.classList.add("active"),a.setAttribute("type","button"),a.setAttribute("role","button"),this.langBind("pagination|page_title",u=>{a.setAttribute("aria-label",u+" "+r),a.setAttribute("title",u+" "+r)}),a.setAttribute("data-page",r),a.textContent=r,a.addEventListener("click",u=>{this.setPage(r)}),a}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(r){return this.size}getMode(){return this.mode}getRows(r){var a,u,m;if("local"==this.mode){a=[],this.setMaxRows(r.length),!0===this.size?(u=0,m=r.length):m=(u=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let E=u;E<m;E++)r[E]&&a.push(r[E]);return a}return this._setPageButtons(),r.slice(0)}trigger(){var r;switch(this.mode){case"local":return r=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(r),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(r){if(void 0===r.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),r.data){if(this.max=parseInt(r.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(r.data,!1,1==this.page):this.table.rowManager.addRows(r.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":r=this.table.rowManager.getData().concat(r.data),this.table.rowManager.setData(r,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return r.data}footerRedraw(){var r=this.table.footerManager.element;Math.ceil(r.clientWidth)-r.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(r.clientWidth)-r.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return g.moduleName="page",g})();var Dm={local:function(g,l){var r=localStorage.getItem(g+"-"+l);return!!r&&JSON.parse(r)},cookie:function(g,l){var m,E,r=document.cookie,a=g+"-"+l,u=r.indexOf(a+"=");return u>-1&&((m=(r=r.substr(u)).indexOf(";"))>-1&&(r=r.substr(0,m)),E=r.replace(a+"=","")),!!E&&JSON.parse(E)}},jp={local:function(g,l,r){localStorage.setItem(g+"-"+l,JSON.stringify(r))},cookie:function(g,l,r){var a=new Date;a.setDate(a.getDate()+1e4),document.cookie=g+"-"+l+"="+JSON.stringify(r)+"; expires="+a.toUTCString()}};let Im=(()=>{class g extends uo{constructor(r){super(r),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var r="_tabulator_test";try{return window.localStorage.setItem(r,r),window.localStorage.removeItem(r),!0}catch(a){return!1}}initialize(){if(this.table.options.persistence){var u,r=this.table.options.persistenceMode,a=this.table.options.persistenceID;this.mode=!0!==r?r:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:g.readers[this.table.options.persistenceReaderFunc]?this.readFunc=g.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):g.readers[this.mode]?this.readFunc=g.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:g.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=g.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):g.writers[this.mode]?this.writeFunc=g.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(a||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(u=this.retreiveData("page"))&&(void 0!==u.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=u.paginationSize),void 0!==u.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=u.paginationInitialPage)),this.config.group&&(u=this.retreiveData("group"))&&(void 0!==u.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=u.groupBy),void 0!==u.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=u.groupStartOpen),void 0!==u.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=u.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(r){this.config[r]&&this.save(r)}tableBuilt(){var a,u;this.config.sort&&(a=this.load("sort"))&&(this.table.initialSort=a),this.config.filter&&(u=this.load("filter"))&&(this.table.initialFilter=u)}tableRedraw(r){r&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(r){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,r)),!0}initializeColumn(r){var a;this.config.columns&&(this.defWatcherBlock=!0,a=r.getDefinition(),(!0===this.config.columns?Object.keys(a):this.config.columns).forEach(m=>{var E=Object.getOwnPropertyDescriptor(a,m),S=a[m];E&&Object.defineProperty(a,m,{set:function(D){S=D,this.defWatcherBlock||this.save("columns"),E.set&&E.set(D)},get:function(){return E.get&&E.get(),S}})}),this.defWatcherBlock=!1)}load(r,a){var u=this.retreiveData(r);return a&&(u=u?this.mergeDefinition(a,u):a),u}retreiveData(r){return!!this.readFunc&&this.readFunc(this.id,r)}mergeDefinition(r,a){var u=[];return(a=a||[]).forEach((m,E)=>{var D,S=this._findColumn(r,m);S&&(!0===this.config.columns||null==this.config.columns?(D=Object.keys(S)).push("width"):D=this.config.columns,D.forEach(N=>{"columns"!==N&&void 0!==m[N]&&(S[N]=m[N])}),S.columns&&(S.columns=this.mergeDefinition(S.columns,m.columns)),u.push(S))}),r.forEach((m,E)=>{this._findColumn(a,m)||(u.length>E?u.splice(E,0,m):u.push(m))}),u}_findColumn(r,a){var u=a.columns?"group":a.field?"field":"object";return r.find(function(m){switch(u){case"group":return m.title===a.title&&m.columns.length===a.columns.length;case"field":return m.field===a.field;case"object":return m===a}})}save(r){var a={};switch(r){case"columns":a=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":a=this.table.modules.filter.getFilters();break;case"sort":a=this.validateSorters(this.table.modules.sort.getSort());break;case"group":a=this.getGroupConfig();break;case"page":a=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,r,a)}validateSorters(r){return r.forEach(function(a){a.column=a.field,delete a.field}),r}getGroupConfig(){var r={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(r.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(r.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(r.groupHeader=this.table.options.groupHeader)),r}getPageConfig(){var r={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(r.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(r.paginationInitialPage=this.table.modules.page.getPage())),r}parseColumns(r){var a=[],u=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return r.forEach(m=>{var D,E={},S=m.getDefinition();m.isGroup?(E.title=S.title,E.columns=this.parseColumns(m.getColumns())):(E.field=m.getField(),!0===this.config.columns||null==this.config.columns?(D=Object.keys(S)).push("width"):D=this.config.columns,D.forEach(N=>{switch(N){case"width":E.width=m.getWidth();break;case"visible":E.visible=m.visible;break;default:"function"!=typeof S[N]&&-1===u.indexOf(N)&&(E[N]=S[N])}})),a.push(E)}),a}}return g.moduleName="persistence",g.readers=Dm,g.writers=jp,g})(),Ff=(()=>{class g extends uo{constructor(r){super(r),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(r,a,u){var K,ft,m=window.scrollX,E=window.scrollY,S=document.createElement("div"),D=document.createElement("div"),N=this.table.modules.export.genereateTable(void 0!==u?u:this.table.options.printConfig,void 0!==a?a:this.table.options.printStyled,r||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(S.classList.add("tabulator-print-header"),"string"==typeof(K="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?S.innerHTML=K:S.appendChild(K),this.element.appendChild(S)),this.element.appendChild(N),this.table.options.printFooter&&(D.classList.add("tabulator-print-footer"),"string"==typeof(ft="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?D.innerHTML=ft:D.appendChild(ft),this.element.appendChild(D)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,N),window.print(),this.cleanup(),window.scrollTo(m,E),this.manualBlock=!1}}return g.moduleName="print",g})(),np=(()=>{class g extends uo{constructor(r){super(r),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(r){var u,a=this;this.currentVersion++,u=this.currentVersion,this.unwatchData(),this.data=r,this.origFuncs.push=r.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var m=Array.from(arguments);return!a.blocked&&u===a.currentVersion&&m.forEach(E=>{a.table.rowManager.addRowActual(E,!1)}),a.origFuncs.push.apply(r,arguments)}}),this.origFuncs.unshift=r.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var m=Array.from(arguments);return!a.blocked&&u===a.currentVersion&&m.forEach(E=>{a.table.rowManager.addRowActual(E,!0)}),a.origFuncs.unshift.apply(r,arguments)}}),this.origFuncs.shift=r.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var m;return!a.blocked&&u===a.currentVersion&&a.data.length&&(m=a.table.rowManager.getRowFromDataObject(a.data[0]))&&m.deleteActual(),a.origFuncs.shift.call(r)}}),this.origFuncs.pop=r.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var m;return!a.blocked&&u===a.currentVersion&&a.data.length&&(m=a.table.rowManager.getRowFromDataObject(a.data[a.data.length-1]))&&m.deleteActual(),a.origFuncs.pop.call(r)}}),this.origFuncs.splice=r.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var N,m=Array.from(arguments),E=m[0]<0?r.length+m[0]:m[0],S=m[1],D=!!m[2]&&m.slice(2);if(!a.blocked&&u===a.currentVersion){if(D&&((N=!!r[E]&&a.table.rowManager.getRowFromDataObject(r[E]))?D.forEach(ft=>{a.table.rowManager.addRowActual(ft,!0,N,!0)}):(D=D.slice().reverse()).forEach(ft=>{a.table.rowManager.addRowActual(ft,!0,!1,!0)})),0!==S){var K=r.slice(E,void 0===m[1]?m[1]:E+S);K.forEach((ft,Ot)=>{var zt=a.table.rowManager.getRowFromDataObject(ft);zt&&zt.deleteActual(Ot!==K.length-1)})}(D||0!==S)&&a.table.rowManager.reRenderInPosition()}return a.origFuncs.splice.apply(r,arguments)}})}unwatchData(){if(!1!==this.data)for(var r in this.origFuncs)Object.defineProperty(this.data,r,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(r){var a=r.getData();for(var u in this.blocked=!0,a)this.watchKey(r,a,u);this.table.options.dataTree&&this.watchTreeChildren(r),this.blocked=!1}watchTreeChildren(r){var a=r.getData()[this.table.options.dataTreeChildField],u={};function m(){this.table.modules.dataTree.initializeRow(r),this.table.modules.dataTree.layoutRow(r),this.table.rowManager.refreshActiveData("tree",!1,!0)}a&&(u.push=a.push,Object.defineProperty(a,"push",{enumerable:!1,configurable:!0,value:()=>{var E=u.push.apply(a,arguments);return m(),E}}),u.unshift=a.unshift,Object.defineProperty(a,"unshift",{enumerable:!1,configurable:!0,value:()=>{var E=u.unshift.apply(a,arguments);return m(),E}}),u.shift=a.shift,Object.defineProperty(a,"shift",{enumerable:!1,configurable:!0,value:()=>{var E=u.shift.call(a);return m(),E}}),u.pop=a.pop,Object.defineProperty(a,"pop",{enumerable:!1,configurable:!0,value:()=>{var E=u.pop.call(a);return m(),E}}),u.splice=a.splice,Object.defineProperty(a,"splice",{enumerable:!1,configurable:!0,value:()=>{var E=u.splice.apply(a,arguments);return m(),E}}))}watchKey(r,a,u){var m=Object.getOwnPropertyDescriptor(a,u),E=a[u],S=this.currentVersion;Object.defineProperty(a,u,{set:D=>{if(E=D,!this.blocked&&S===this.currentVersion){var N={};N[u]=D,r.updateData(N)}m.set&&m.set(D)},get:()=>(m.get&&m.get(),E)})}unwatchRow(r){var a=r.getData();for(var u in a)Object.defineProperty(a,u,{value:a[u]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return g.moduleName="reactiveData",g})(),zp=(()=>{class g extends uo{constructor(r){super(r),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(r){"row"===r.row.type&&this.initializeColumn("cell",r.column,r.element)}layoutColumnHeader(r){this.initializeColumn("header",r,r.element)}initializeColumn(r,a,u){var m=this,S=a.definition.resizable;if("header"===r&&(a.modules.resize={variableHeight:"textarea"==a.definition.formatter||a.definition.variableHeight}),!0===S||S==r){var D=document.createElement("div");D.className="tabulator-col-resize-handle";var N=document.createElement("div");N.className="tabulator-col-resize-handle prev",D.addEventListener("click",function(Ot){Ot.stopPropagation()});var K=function(Ot){var zt=a.getLastColumn();zt&&m._checkResizability(zt)&&(m.startColumn=a,m._mouseDown(Ot,zt,D))};D.addEventListener("mousedown",K),D.addEventListener("touchstart",K,{passive:!0}),D.addEventListener("dblclick",function(Ot){var zt=a.getLastColumn();zt&&m._checkResizability(zt)&&(Ot.stopPropagation(),zt.reinitializeWidth(!0))}),N.addEventListener("click",function(Ot){Ot.stopPropagation()});var ft=function(Ot){var zt,ae,ye;(zt=a.getFirstColumn())&&(ye=(ae=m.table.columnManager.findColumnIndex(zt))>0&&m.table.columnManager.getColumnByIndex(ae-1))&&m._checkResizability(ye)&&(m.startColumn=a,m._mouseDown(Ot,ye,N))};N.addEventListener("mousedown",ft),N.addEventListener("touchstart",ft,{passive:!0}),N.addEventListener("dblclick",function(Ot){var zt,ae,ye;(zt=a.getFirstColumn())&&(ye=(ae=m.table.columnManager.findColumnIndex(zt))>0&&m.table.columnManager.getColumnByIndex(ae-1))&&m._checkResizability(ye)&&(Ot.stopPropagation(),ye.reinitializeWidth(!0))}),u.appendChild(D),u.appendChild(N)}}_checkResizability(r){return r.definition.resizable}_mouseDown(r,a,u){var m=this;function E(D){a.setWidth(m.table.rtl?m.startWidth-((void 0===D.screenX?D.touches[0].screenX:D.screenX)-m.startX):m.startWidth+((void 0===D.screenX?D.touches[0].screenX:D.screenX)-m.startX)),m.table.columnManager.renderer.rerenderColumns(!0),!m.table.browserSlow&&a.modules.resize&&a.modules.resize.variableHeight&&a.checkCellHeights()}function S(D){m.startColumn.modules.edit&&(m.startColumn.modules.edit.blocked=!1),m.table.browserSlow&&a.modules.resize&&a.modules.resize.variableHeight&&a.checkCellHeights(),document.body.removeEventListener("mouseup",S),document.body.removeEventListener("mousemove",E),u.removeEventListener("touchmove",E),u.removeEventListener("touchend",S),m.table.element.classList.remove("tabulator-block-select"),m.dispatch("column-resized",a),m.table.externalEvents.dispatch("columnResized",a.getComponent())}m.table.element.classList.add("tabulator-block-select"),r.stopPropagation(),m.startColumn.modules.edit&&(m.startColumn.modules.edit.blocked=!0),m.startX=void 0===r.screenX?r.touches[0].screenX:r.screenX,m.startWidth=a.getWidth(),document.body.addEventListener("mousemove",E),document.body.addEventListener("mouseup",S),u.addEventListener("touchmove",E,{passive:!0}),u.addEventListener("touchend",S)}}return g.moduleName="resizeColumns",g})(),Bf=(()=>{class g extends uo{constructor(r){super(r),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(r){var a=this,u=r.getElement(),m=document.createElement("div");m.className="tabulator-row-resize-handle";var E=document.createElement("div");E.className="tabulator-row-resize-handle prev",m.addEventListener("click",function(N){N.stopPropagation()});var S=function(N){a.startRow=r,a._mouseDown(N,r,m)};m.addEventListener("mousedown",S),m.addEventListener("touchstart",S,{passive:!0}),E.addEventListener("click",function(N){N.stopPropagation()});var D=function(N){var K=a.table.rowManager.prevDisplayRow(r);K&&(a.startRow=K,a._mouseDown(N,K,E))};E.addEventListener("mousedown",D),E.addEventListener("touchstart",D,{passive:!0}),u.appendChild(m),u.appendChild(E)}_mouseDown(r,a,u){var m=this;function E(D){a.setHeight(m.startHeight+((void 0===D.screenY?D.touches[0].screenY:D.screenY)-m.startY))}function S(D){document.body.removeEventListener("mouseup",E),document.body.removeEventListener("mousemove",E),u.removeEventListener("touchmove",E),u.removeEventListener("touchend",S),m.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",a.getComponent())}m.table.element.classList.add("tabulator-block-select"),r.stopPropagation(),m.startY=void 0===r.screenY?r.touches[0].screenY:r.screenY,m.startHeight=a.getHeight(),document.body.addEventListener("mousemove",E),document.body.addEventListener("mouseup",S),u.addEventListener("touchmove",E,{passive:!0}),u.addEventListener("touchend",S)}}return g.moduleName="resizeRows",g})(),Hf=(()=>{class g extends uo{constructor(r){super(r),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var a,r=this.table;this.tableHeight=r.element.clientHeight,this.tableWidth=r.element.clientWidth,r.element.parentNode&&(this.containerHeight=r.element.parentNode.clientHeight,this.containerWidth=r.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===r.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(u=>{if(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell){var m=Math.floor(u[0].contentRect.height),E=Math.floor(u[0].contentRect.width);(this.tableHeight!=m||this.tableWidth!=E)&&(this.tableHeight=m,this.tableWidth=E,r.element.parentNode&&(this.containerHeight=r.element.parentNode.clientHeight,this.containerWidth=r.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),r.redraw())}}),this.observer.observe(r.element),a=window.getComputedStyle(r.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(a.getPropertyValue("max-height")||a.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(u=>{if(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell){var m=Math.floor(u[0].contentRect.height),E=Math.floor(u[0].contentRect.width);(this.containerHeight!=m||this.containerWidth!=E)&&(this.containerHeight=m,this.containerWidth=E,this.tableHeight=r.element.clientHeight,this.tableWidth=r.element.clientWidth),r.columnManager.renderer.rerenderColumns(!0),r.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!r.browserMobile||r.browserMobile&&!r.modules.edit.currentCell)&&(r.columnManager.renderer.rerenderColumns(!0),r.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return g.moduleName="resizeTable",g})(),Vf=(()=>{class g extends uo{constructor(r){super(r),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(r){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(r||this.update())}initializeResponsivity(){var r=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(a,u){a.modules.responsive&&a.modules.responsive.order&&a.modules.responsive.visible&&(a.modules.responsive.index=u,r.push(a),!a.visible&&"collapse"===self.mode&&self.hiddenColumns.push(a))}),r=(r=r.reverse()).sort(function(a,u){return u.modules.responsive.order-a.modules.responsive.order||u.modules.responsive.index-a.modules.responsive.index}),this.columns=r,"collapse"===this.mode&&this.generateCollapsedContent();for(let a of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==a.definition.formatter){this.collapseHandleColumn=a;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(r){var a=r.getDefinition();r.modules.responsive={order:void 0===a.responsive?1:a.responsive,visible:!1!==a.visible}}initializeRow(r){var a;"calc"!==r.type&&((a=document.createElement("div")).classList.add("tabulator-responsive-collapse"),r.modules.responsiveLayout={element:a,open:this.collapseStartOpen},this.collapseStartOpen||(a.style.display="none"))}layoutRow(r){var a=r.getElement();r.modules.responsiveLayout&&(a.appendChild(r.modules.responsiveLayout.element),this.generateCollapsedRowContent(r))}updateColumnVisibility(r,a){!a&&r.modules.responsive&&(r.modules.responsive.visible=r.visible,this.initialize())}hideColumn(r){var a=this.hiddenColumns.length;r.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(r),this.generateCollapsedContent(),this.collapseHandleColumn&&!a&&this.collapseHandleColumn.show())}showColumn(r){var a;r.show(!1,!0),r.setWidth(r.getWidth()),"collapse"===this.mode&&((a=this.hiddenColumns.indexOf(r))>-1&&this.hiddenColumns.splice(a,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var r=this,a=!0;a;){let u="fitColumns"==r.table.modules.layout.getMode()?r.table.columnManager.getFlexBaseWidth():r.table.columnManager.getWidth(),m=(r.table.options.headerVisible?r.table.columnManager.element.clientWidth:r.table.element.clientWidth)-u;if(m<0){let E=r.columns[r.index];E?(r.hideColumn(E),r.index++):a=!1}else{let E=r.columns[r.index-1];E&&m>0&&m>=E.getWidth()?(r.showColumn(E),r.index--):a=!1}r.table.rowManager.activeRowsCount||r.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var r=this;this.table.rowManager.getDisplayRows().forEach(function(u){r.generateCollapsedRowContent(u)})}generateCollapsedRowContent(r){var a,u;if(r.modules.responsiveLayout){for(a=r.modules.responsiveLayout.element;a.firstChild;)a.removeChild(a.firstChild);(u=this.collapseFormatter(this.generateCollapsedRowData(r)))&&a.appendChild(u)}}generateCollapsedRowData(r){var E,a=this,u=r.getData(),m=[];return this.hiddenColumns.forEach(function(S){var D=S.getFieldValue(u);S.definition.title&&S.field&&(S.modules.format&&a.table.options.responsiveLayoutCollapseUseFormatters?(E={value:!1,data:{},getValue:function(){return D},getData:function(){return u},getElement:function(){return document.createElement("div")},getRow:function(){return r.getComponent()},getColumn:function(){return S.getComponent()}},m.push({field:S.field,title:S.definition.title,value:S.modules.format.formatter.call(a.table.modules.format,E,S.modules.format.params,function(K){K()})})):m.push({field:S.field,title:S.definition.title,value:D}))}),m}formatCollapsedData(r){var a=document.createElement("table");return r.forEach(function(u){var D,m=document.createElement("tr"),E=document.createElement("td"),S=document.createElement("td"),N=document.createElement("strong");E.appendChild(N),this.langBind("columns|"+u.field,function(K){N.innerText=K||u.title}),u.value instanceof Node?((D=document.createElement("div")).appendChild(u.value),S.appendChild(D)):S.innerHTML=u.value,m.appendChild(E),m.appendChild(S),a.appendChild(m)},this),Object.keys(r).length?a:""}}return g.moduleName="responsiveLayout",g})(),op=(()=>{class g extends uo{constructor(r){super(r),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(a,u){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(r,a){return"selected"===r?this.selectedRows:a}rowDeleted(r){this._deselectRow(r,!0)}clearSelectionData(r){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==r&&this._rowSelectionChanged()}initializeRow(r){var a=this,u=r.getElement(),m=function(){setTimeout(function(){a.selecting=!1},50),document.body.removeEventListener("mouseup",m)};r.modules.select={selected:!1},a.table.options.selectableCheck.call(this.table,r.getComponent())?(u.classList.add("tabulator-selectable"),u.classList.remove("tabulator-unselectable"),a.table.options.selectable&&"highlight"!=a.table.options.selectable&&("click"===a.table.options.selectableRangeMode?u.addEventListener("click",function(E){if(E.shiftKey){a.table._clearSelection(),a.lastClickedRow=a.lastClickedRow||r;var S=a.table.rowManager.getDisplayRowIndex(a.lastClickedRow),D=a.table.rowManager.getDisplayRowIndex(r),N=S<=D?S:D,K=S>=D?S:D,Ot=a.table.rowManager.getDisplayRows().slice(0).splice(N,K-N+1);E.ctrlKey||E.metaKey?(Ot.forEach(function(zt){zt!==a.lastClickedRow&&(!0===a.table.options.selectable||a.isRowSelected(r)||a.selectedRows.length<a.table.options.selectable)&&a.toggleRow(zt)}),a.lastClickedRow=r):(a.deselectRows(void 0,!0),!0!==a.table.options.selectable&&Ot.length>a.table.options.selectable&&(Ot=Ot.slice(0,a.table.options.selectable)),a.selectRows(Ot)),a.table._clearSelection()}else E.ctrlKey||E.metaKey?(a.toggleRow(r),a.lastClickedRow=r):(a.deselectRows(void 0,!0),a.selectRows(r),a.lastClickedRow=r)}):(u.addEventListener("click",function(E){(!a.table.modExists("edit")||!a.table.modules.edit.getCurrentCell())&&a.table._clearSelection(),a.selecting||a.toggleRow(r)}),u.addEventListener("mousedown",function(E){if(E.shiftKey)return a.table._clearSelection(),a.selecting=!0,a.selectPrev=[],document.body.addEventListener("mouseup",m),document.body.addEventListener("keyup",m),a.toggleRow(r),!1}),u.addEventListener("mouseenter",function(E){a.selecting&&(a.table._clearSelection(),a.toggleRow(r),a.selectPrev[1]==r&&a.toggleRow(a.selectPrev[0]))}),u.addEventListener("mouseout",function(E){a.selecting&&(a.table._clearSelection(),a.selectPrev.unshift(r))})))):(u.classList.add("tabulator-unselectable"),u.classList.remove("tabulator-selectable"))}toggleRow(r){this.table.options.selectableCheck.call(this.table,r.getComponent())&&(r.modules.select&&r.modules.select.selected?this._deselectRow(r):this._selectRow(r))}selectRows(r){var a;switch(typeof r){case"undefined":this.table.rowManager.rows.forEach(u=>{this._selectRow(u,!0,!0)}),this._rowSelectionChanged();break;case"string":(a=this.table.rowManager.findRow(r))?this._selectRow(a,!0,!0):this.table.rowManager.getRows(r).forEach(u=>{this._selectRow(u,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(r)?(r.forEach(u=>{this._selectRow(u,!0,!0)}),this._rowSelectionChanged()):this._selectRow(r,!1,!0)}}_selectRow(r,a,u){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!u&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var m=this.table.rowManager.findRow(r);m?-1==this.selectedRows.indexOf(m)&&(m.getElement().classList.add("tabulator-selected"),m.modules.select||(m.modules.select={}),m.modules.select.selected=!0,m.modules.select.checkboxEl&&(m.modules.select.checkboxEl.checked=!0),this.selectedRows.push(m),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(m,!0),a||this.dispatchExternal("rowSelected",m.getComponent()),this._rowSelectionChanged(a)):a||console.warn("Selection Error - No such row found, ignoring selection:"+r)}isRowSelected(r){return-1!==this.selectedRows.indexOf(r)}deselectRows(r,a){var m,u=this;if(void 0===r){m=u.selectedRows.length;for(let E=0;E<m;E++)u._deselectRow(u.selectedRows[0],!0);u._rowSelectionChanged(a)}else Array.isArray(r)?(r.forEach(function(E){u._deselectRow(E,!0)}),u._rowSelectionChanged(a)):u._deselectRow(r,a)}_deselectRow(r,a){var E,u=this,m=u.table.rowManager.findRow(r);m?(E=u.selectedRows.findIndex(function(S){return S==m}))>-1&&(m.getElement().classList.remove("tabulator-selected"),m.modules.select||(m.modules.select={}),m.modules.select.selected=!1,m.modules.select.checkboxEl&&(m.modules.select.checkboxEl.checked=!1),u.selectedRows.splice(E,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(m,!1),a||this.dispatchExternal("rowDeselected",m.getComponent()),u._rowSelectionChanged(a)):a||console.warn("Deselection Error - No such row found, ignoring selection:"+r)}getSelectedData(){var r=[];return this.selectedRows.forEach(function(a){r.push(a.getData())}),r}getSelectedRows(){var r=[];return this.selectedRows.forEach(function(a){r.push(a.getComponent())}),r}_rowSelectionChanged(r){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),r||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(r,a){r._row.modules.select||(r._row.modules.select={}),r._row.modules.select.checkboxEl=a}registerHeaderSelectCheckbox(r){this.headerCheckboxElement=r}childRowSelection(r,a){var u=this.table.modules.dataTree.getChildren(r,!0);if(a)for(let m of u)this._selectRow(m,!0);else for(let m of u)this._deselectRow(m,!0)}}return g.moduleName="selectRow",g})();function rp(g,l,r,a,u,m,E){var S=window.DateTime||luxon.DateTime,D=E.format||"dd/MM/yyyy HH:mm:ss",N=E.alignEmptyValues,K=0;if(void 0!==S){if(g=S.fromFormat(g,D),l=S.fromFormat(l,D),g.isValid){if(l.isValid)return g-l;K=1}else K=l.isValid?-1:0;return("top"===N&&"desc"===m||"bottom"===N&&"asc"===m)&&(K*=-1),K}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var jf={number:function(g,l,r,a,u,m,E){var S=E.alignEmptyValues,D=E.decimalSeparator,N=E.thousandSeparator,K=0;if(g=String(g),l=String(l),N&&(g=g.split(N).join(""),l=l.split(N).join("")),D&&(g=g.split(D).join("."),l=l.split(D).join(".")),g=parseFloat(g),l=parseFloat(l),isNaN(g))K=isNaN(l)?0:-1;else{if(!isNaN(l))return g-l;K=1}return("top"===S&&"desc"===m||"bottom"===S&&"asc"===m)&&(K*=-1),K},string:function(g,l,r,a,u,m,E){var N,S=E.alignEmptyValues,D=0;if(g){if(l){switch(typeof E.locale){case"boolean":E.locale&&(N=this.langLocale());break;case"string":N=E.locale}return String(g).toLowerCase().localeCompare(String(l).toLowerCase(),N)}D=1}else D=l?-1:0;return("top"===S&&"desc"===m||"bottom"===S&&"asc"===m)&&(D*=-1),D},date:function(g,l,r,a,u,m,E){return E.format||(E.format="dd/MM/yyyy"),rp.call(this,g,l,r,a,u,m,E)},time:function(g,l,r,a,u,m,E){return E.format||(E.format="HH:mm"),rp.call(this,g,l,r,a,u,m,E)},datetime:rp,boolean:function(g,l,r,a,u,m,E){return(!0===g||"true"===g||"True"===g||1===g?1:0)-(!0===l||"true"===l||"True"===l||1===l?1:0)},array:function(g,l,r,a,u,m,E){var N=E.type||"length",K=E.alignEmptyValues,ft=0;function Ot(zt){switch(N){case"length":return zt.length;case"sum":return zt.reduce(function(ae,ye){return ae+ye});case"max":return Math.max.apply(null,zt);case"min":return Math.min.apply(null,zt);case"avg":return zt.reduce(function(ae,ye){return ae+ye})/zt.length}}if(Array.isArray(g)){if(Array.isArray(l))return(g?Ot(g):0)-(l?Ot(l):0);K=1}else K=Array.isArray(l)?-1:0;return("top"===K&&"desc"===m||"bottom"===K&&"asc"===m)&&(ft*=-1),ft},exists:function(g,l,r,a,u,m,E){return(void 0===g?0:1)-(void 0===l?0:1)},alphanum:function(g,l,r,a,u,m,E){var S,D,N,K,Ot,ft=0,zt=/(\d+)|(\D+)/g,ae=/\d/,ye=E.alignEmptyValues,Re=0;if(g||0===g){if(l||0===l){if(isFinite(g)&&isFinite(l))return g-l;if((S=String(g).toLowerCase())===(D=String(l).toLowerCase()))return 0;if(!ae.test(S)||!ae.test(D))return S>D?1:-1;for(S=S.match(zt),D=D.match(zt),Ot=S.length>D.length?D.length:S.length;ft<Ot;)if((N=S[ft])!==(K=D[ft++]))return isFinite(N)&&isFinite(K)?("0"===N.charAt(0)&&(N="."+N),"0"===K.charAt(0)&&(K="."+K),N-K):N>K?1:-1;return S.length>D.length}Re=1}else Re=l||0===l?-1:0;return("top"===ye&&"desc"===m||"bottom"===ye&&"asc"===m)&&(Re*=-1),Re}},Mm={integer:function(g,l,r){return""===l||null==l||"number"==typeof(l=Number(l))&&isFinite(l)&&Math.floor(l)===l},float:function(g,l,r){return""===l||null==l||"number"==typeof(l=Number(l))&&isFinite(l)&&l%1!=0},numeric:function(g,l,r){return""===l||null==l||!isNaN(l)},string:function(g,l,r){return""===l||null==l||isNaN(l)},max:function(g,l,r){return""===l||null==l||parseFloat(l)<=r},min:function(g,l,r){return""===l||null==l||parseFloat(l)>=r},starts:function(g,l,r){return""===l||null==l||String(l).toLowerCase().startsWith(String(r).toLowerCase())},ends:function(g,l,r){return""===l||null==l||String(l).toLowerCase().endsWith(String(r).toLowerCase())},minLength:function(g,l,r){return""===l||null==l||String(l).length>=r},maxLength:function(g,l,r){return""===l||null==l||String(l).length<=r},in:function(g,l,r){return""===l||null==l||("string"==typeof r&&(r=r.split("|")),""===l||r.indexOf(l)>-1)},regex:function(g,l,r){return""===l||null==l||new RegExp(r).test(l)},unique:function(g,l,r){if(""===l||null==l)return!0;var a=!0,u=g.getData(),m=g.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(E){var S=E.getData();S!==u&&l==m.getFieldValue(S)&&(a=!1)}),a},required:function(g,l,r){return""!==l&&null!=l}},Xf=Object.freeze({__proto__:null,AccessorModule:bh,AjaxModule:Jd,ClipboardModule:wl,ColumnCalcsModule:Qh,DataTreeModule:qh,DownloadModule:Lp,EditModule:At,ExportModule:Li,FilterModule:Ui,FormatModule:Pp,FrozenColumnsModule:Fp,FrozenRowsModule:Bp,GroupRowsModule:Hp,HistoryModule:Vp,HtmlTableImportModule:wm,InteractionModule:Up,KeybindingsModule:Wp,MenuModule:kf,MoveColumnsModule:Lf,MoveRowsModule:Ea,MutatorModule:Pf,PageModule:Rm,PersistenceModule:Im,PrintModule:Ff,ReactiveDataModule:np,ResizeColumnsModule:zp,ResizeRowsModule:Bf,ResizeTableModule:Hf,ResponsiveLayoutModule:Vf,SelectRowModule:op,SortModule:(()=>{class g extends uo{constructor(r){super(r),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(r,a,u,m){var E=this.getSort();return E.forEach(S=>{delete S.column}),m.sort=E,m}userSetSort(r,a){this.setSort(r,a),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(r){var u,m,a=!1;switch(typeof r.definition.sorter){case"string":g.sorters[r.definition.sorter]?a=g.sorters[r.definition.sorter]:console.warn("Sort Error - No such sorter found: ",r.definition.sorter);break;case"function":a=r.definition.sorter}r.modules.sort={sorter:a,dir:"none",params:r.definition.sorterParams||{},startingDir:r.definition.headerSortStartingDir||"asc",tristate:r.definition.headerSortTristate},!1!==r.definition.headerSort&&((u=r.getElement()).classList.add("tabulator-sortable"),(m=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?m.appendChild(this.table.options.headerSortElement):m.innerHTML=this.table.options.headerSortElement,r.titleHolderElement.appendChild(m),r.modules.sort.element=m,u.addEventListener("click",E=>{var S="",D=[],N=!1;if(r.modules.sort){if(r.modules.sort.tristate)S="none"==r.modules.sort.dir?r.modules.sort.startingDir:r.modules.sort.dir==r.modules.sort.startingDir?"asc"==r.modules.sort.dir?"desc":"asc":"none";else switch(r.modules.sort.dir){case"asc":S="desc";break;case"desc":S="asc";break;default:S=r.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(E.shiftKey||E.ctrlKey)?((N=(D=this.getSort()).findIndex(K=>K.field===r.getField()))>-1?(D[N].dir=S,N!=D.length-1&&(N=D.splice(N,1)[0],"none"!=S&&D.push(N))):"none"!=S&&D.push({column:r,dir:S}),this.setSort(D)):"none"==S?this.clear():this.setSort(r,S),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var r=this.changed;return this.changed=!1,r}getSort(){var a=[];return this.sortList.forEach(function(u){u.column&&a.push({column:u.column.getComponent(),field:u.column.getField(),dir:u.dir})}),a}setSort(r,a){var u=this,m=[];Array.isArray(r)||(r=[{column:r,dir:a}]),r.forEach(function(E){var S;(S=u.table.columnManager.findColumn(E.column))?(E.column=S,m.push(E),u.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",E.column)}),u.sortList=m,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(r){var E,a=this.table.rowManager.activeRows[0],u="string";if(a&&(a=a.getData(),r.getField()))switch(E=r.getFieldValue(a),typeof E){case"undefined":u="string";break;case"boolean":u="boolean";break;default:isNaN(E)||""===E?E.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(u="alphanum"):u="number"}return g.sorters[u]}sort(r){var a=this,u=this.table.options.sortOrderReverse?a.sortList.slice().reverse():a.sortList,m=[],E=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",a.getSort()),a.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(u.forEach(function(S,D){var N=S.column.modules.sort;S.column&&N&&(N.sorter||(N.sorter=a.findSorter(S.column)),S.params="function"==typeof N.params?N.params(S.column.getComponent(),S.dir):N.params,m.push(S)),a.setColumnHeader(S.column,S.dir)}),m.length&&a._sortItems(r,m)):u.forEach(function(S,D){a.setColumnHeader(S.column,S.dir)}),this.subscribedExternal("dataSorted")&&(r.forEach(S=>{E.push(S.getComponent())}),this.dispatchExternal("dataSorted",a.getSort(),E)),r}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(r){r.modules.sort&&(r.modules.sort.dir="none",r.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(r,a){r.modules.sort.dir=a,r.getElement().setAttribute("aria-sort",a)}_sortItems(r,a){var u=a.length-1;r.sort((m,E)=>{for(var S,D=u;D>=0;D--){let N=a[D];if(0!==(S=this._sortRow(m,E,N.column,N.dir,N.params)))break}return S})}_sortRow(r,a,u,m,E){var S,D,N="asc"==m?r:a,K="asc"==m?a:r;return r=void 0!==(r=u.getFieldValue(N.getData()))?r:"",a=void 0!==(a=u.getFieldValue(K.getData()))?a:"",S=N.getComponent(),D=K.getComponent(),u.modules.sort.sorter.call(this,r,a,S,D,u.getComponent(),m,E)}}return g.moduleName="sort",g.sorters=jf,g})(),ValidateModule:(()=>{class g extends uo{constructor(r){super(r),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(r){return!r.modules.validate||!r.modules.validate.invalid}cellValidate(r){return this.validate(r.column.modules.validate,r,r.getValue())}columnValidate(r){var a=[];return r.cells.forEach(function(u){this.cellValidate(u)||a.push(u.getComponent())}),!a.length||a}rowValidate(r){var a=[];return r.cells.forEach(function(u){this.cellValidate(u)||a.push(u.getComponent())}),!a.length||a}userClearCellValidation(r){r||(r=this.getInvalidCells()),Array.isArray(r)||(r=[r]),r.forEach(a=>{this.clearValidation(a._getSelf())})}userValidate(r){var a=[];return this.table.rowManager.rows.forEach(function(u){var m=u.validate();!0!==m&&(a=a.concat(m))}),!a.length||a}initializeColumnCheck(r){void 0!==r.definition.validator&&this.initializeColumn(r)}initializeColumn(r){var m,a=this,u=[];r.definition.validator&&(Array.isArray(r.definition.validator)?r.definition.validator.forEach(function(E){(m=a._extractValidator(E))&&u.push(m)}):(m=this._extractValidator(r.definition.validator))&&u.push(m),r.modules.validate=!!u.length&&u)}_extractValidator(r){var a,u,m;switch(typeof r){case"string":return(m=r.indexOf(":"))>-1?(a=r.substring(0,m),u=r.substring(m+1)):a=r,this._buildValidator(a,u);case"function":return this._buildValidator(r);case"object":return this._buildValidator(r.type,r.parameters)}}_buildValidator(r,a){var u="function"==typeof r?r:g.validators[r];return u?{type:"function"==typeof r?"function":r,func:u,params:a}:(console.warn("Validator Setup Error - No matching validator found:",r),!1)}validate(r,a,u){var m=this,E=[],S=this.invalidCells.indexOf(a);return r&&r.forEach(function(D){D.func.call(m,a.getComponent(),u,D.params)||E.push({type:D.type,parameters:D.params})}),E=!E.length||E,a.modules.validate||(a.modules.validate={}),!0===E?(a.modules.validate.invalid=!1,a.getElement().classList.remove("tabulator-validation-fail"),S>-1&&this.invalidCells.splice(S,1)):(a.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&a.getElement().classList.add("tabulator-validation-fail"),-1==S&&this.invalidCells.push(a)),E}getInvalidCells(){var r=[];return this.invalidCells.forEach(a=>{r.push(a.getComponent())}),r}clearValidation(r){var a;r.modules.validate&&r.modules.validate.invalid&&(r.getElement().classList.remove("tabulator-validation-fail"),r.modules.validate.invalid=!1,(a=this.invalidCells.indexOf(r))>-1&&this.invalidCells.splice(a,1))}}return g.moduleName="validate",g.validators=Mm,g})()}),Kf={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class Jp{constructor(l,r){this.table=l,this.msgType=r,this.registeredDefaults={}}register(l,r){this.registeredDefaults[l]=r}generate(l,r={}){var a=Object.assign({},this.registeredDefaults);if(Object.assign(a,l),!1!==r.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var u in r)a.hasOwnProperty(u)||console.warn("Invalid "+this.msgType+" option:",u);for(var u in a)u in r?a[u]=r[u]:Array.isArray(a[u])?a[u]=Object.assign([],a[u]):"object"==typeof a[u]&&null!==a[u]?a[u]=Object.assign({},a[u]):void 0===a[u]&&delete a[u];return a}}class wh extends Cl{constructor(l){super(l),this.elementVertical=l.rowManager.element,this.elementHorizontal=l.columnManager.element,this.tableElement=l.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(l){}renderRows(){}renderColumns(){}rerenderRows(l){l&&l()}rerenderColumns(l,r){}renderRowCells(l){}rerenderRowCells(l,r){}scrollColumns(l,r){}scrollRows(l,r){}resize(){}scrollToRow(l){}scrollToRowNearestTop(l){}visibleRows(l){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(l,r){var a=l.getElement();r%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(l){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(l,r,a){var u=this.rows().indexOf(l),m=l.getElement(),E=0;return new Promise((S,D)=>{if(u>-1){if(void 0===a&&(a=this.table.options.scrollToRowIfVisible),!a&&_r.elVisible(m)&&(E=_r.elOffset(m).top-_r.elOffset(this.elementVertical).top)>0&&E<this.elementVertical.clientHeight-m.offsetHeight)return!1;switch(void 0===r&&(r=this.table.options.scrollToRowPosition),"nearest"===r&&(r=this.scrollToRowNearestTop(l)?"top":"bottom"),this.scrollToRow(l),r){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(m.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-m.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-m.offsetTop)+m.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+m.offsetHeight}S()}else console.warn("Scroll Error - Row not visible"),D("Scroll Error - Row not visible")})}}class Jf extends wh{constructor(l){super(l)}renderRowCells(l){l.cells.forEach(r=>{l.element.appendChild(r.getElement()),r.cellRendered()})}reinitializeColumnWidths(l){l.forEach(function(r){r.reinitializeWidth()})}}class $f extends wh{constructor(l){super(l),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var l=this.options("columns"),a=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),a=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),a=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),a=!1),l&&l.find(u=>u.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),a=!1),a}renderColumns(l,r){this.dataChange()}scrollColumns(l,r){this.scrollLeft!=l&&(this.scrollLeft=l,this.scroll(l-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(l,r){var a={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!l||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var u=0;this.table.columnManager.columnsByIndex.forEach(m=>{var E={};if(m.visible){var S=m.getWidth();E.leftPos=u,E.rightPos=u+S,E.width=S,"fitData"===this.options("layout")&&(E.fitDataCheck=!0),u+S>this.vDomScrollPosLeft&&u<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=u),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=S),this.columns.push(m),m.modules.vdomHoz=E,u+=S}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,r||(!l||this.reinitChanged(a))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(l){this.initialized?this.initializeRow(l):l.cells.forEach(r=>{l.element.appendChild(r.getElement()),r.cellRendered()})}rerenderRowCells(l,r){this.reinitializeRow(l,r)}reinitializeColumnWidths(l){for(let r=this.leftCol;r<=this.rightCol;r++)this.columns[r].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var m,u,l=!1,r=0,a=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(E=>{!E.definition.width&&E.visible&&(l=!0)}),l&&l&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,u=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(m=u.getElement(),u.generateCells(),this.tableElement.appendChild(m),a=0;a<u.cells.length;a++){let D=u.cells[a];if(m.appendChild(D.getElement()),D.column.reinitializeWidth(),(r+=D.column.getWidth())>this.vDomScrollPosRight)break}for(m.parentNode.removeChild(m),this.fitDataColAvg=Math.floor(r/(a+1));a<this.table.columnManager.columnsByIndex.length;a++)this.table.columnManager.columnsByIndex[a].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(l){var r=!0;return l.cols.length!==this.columns.length||l.leftCol!==this.leftCol||l.rightCol!==this.rightCol||(l.cols.forEach((a,u)=>{a!==this.columns[u]&&(r=!1)}),!r)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(r=>{this.reinitializeRow(r,!0)})}scroll(l){this.vDomScrollPosLeft+=l,this.vDomScrollPosRight+=l,l>.8*this.elementVertical.clientWidth?this.rerenderColumns():l>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(l,r,a){for(let u=l;u<r;u++){let m=this.columns[u];m.modules.vdomHoz.leftPos+=a,m.modules.vdomHoz.rightPos+=a}}addColRight(){var l=this.columns[this.rightCol+1];l&&l.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var u=a.getCell(l);a.getElement().appendChild(u.getElement()),u.cellRendered()}}),this.fitDataColActualWidthCheck(l),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=l.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var l=this.columns[this.leftCol-1];l&&l.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(u=>{if("group"!==u.type){var m=u.getCell(l);u.getElement().prepend(m.getElement()),m.cellRendered()}}),this.fitDataColActualWidthCheck(l),this.leftCol?this.vDomPadLeft-=l.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(l){var r;(l=this.columns[this.rightCol])&&l.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(r=this.table.rowManager.getVisibleRows(),l.modules.vdomHoz.visible=!1,r.forEach(a=>{if("group"!==a.type){var u=a.getCell(l);a.getElement().removeChild(u.getElement())}}),this.vDomPadRight+=l.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var l=this.columns[this.leftCol];l&&l.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var u=a.getCell(l);u.parentNode&&a.getElement().removeChild(u.getElement())}}),this.vDomPadLeft+=l.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(l){var r,a;l.modules.vdomHoz.fitDataCheck&&(l.reinitializeWidth(),(a=(r=l.getWidth())-l.modules.vdomHoz.width)&&(l.modules.vdomHoz.rightPos+=a,l.modules.vdomHoz.width=r,this.colPositionAdjust(this.rightCol+2,this.columns.length,a)),l.modules.vdomHoz.fitDataCheck=!1)}initializeRow(l){if("group"!==l.type){l.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let r=this.leftCol;r<=this.rightCol;r++){let a=this.columns[r];if(a&&a.visible){let u=l.getCell(a);l.getElement().appendChild(u.getElement()),u.cellRendered()}}}}reinitializeRow(l,r){if("group"!==l.type&&(r||!l.modules.vdomHoz||l.modules.vdomHoz.leftCol!==this.leftCol||l.modules.vdomHoz.rightCol!==this.rightCol)){for(var a=l.getElement();a.firstChild;)a.removeChild(a.firstChild);this.initializeRow(l)}}}class Ed extends Cl{constructor(l){super(l),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new Jp(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var l;(l="string"==typeof this.table.options.renderHorizontal?{virtual:$f,basic:Jf}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new l(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var l=document.createElement("div");return l.classList.add("tabulator-headers"),l.setAttribute("role","row"),l}createHeaderElement(){var l=document.createElement("div");return l.classList.add("tabulator-header"),l.setAttribute("role","rowgroup"),this.table.options.headerVisible||l.classList.add("tabulator-header-hidden"),l}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(l){var a=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=l,this.element.style.marginLeft=l>a?-(l-a)+"px":0,this.scrollLeft=l,this.renderer.scrollColumns(l)}generateColumnsFromRowData(l){var u,m,r=[],a=this.table.options.autoColumnsDefinitions;if(l&&l.length){for(var E in u=l[0]){let S={field:E,title:E},D=u[E];switch(typeof D){case"undefined":m="string";break;case"boolean":m="boolean";break;case"object":m=Array.isArray(D)?"array":"string";break;default:m=isNaN(D)||""===D?D.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}S.sorter=m,r.push(S)}if(a)switch(typeof a){case"function":this.table.options.columns=a.call(this.table,r);break;case"object":Array.isArray(a)?r.forEach(S=>{var D=a.find(N=>N.field===S.field);D&&Object.assign(S,D)}):r.forEach(S=>{a[S.field]&&Object.assign(S,a[S.field])}),this.table.options.columns=r}else this.table.options.columns=r;this.setColumns(this.table.options.columns)}}setColumns(l,r){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),l.forEach((a,u)=>{this._addColumn(a)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(l,r,a){var u=new $h(l,this),m=u.getElement(),E=a&&this.findColumnIndex(a);if(a&&E>-1){var S=a.getTopColumn(),D=this.columns.indexOf(S),N=S.getElement();r?(this.columns.splice(D,0,u),N.parentNode.insertBefore(m,N)):(this.columns.splice(D+1,0,u),N.parentNode.insertBefore(m,N.nextSibling))}else r?(this.columns.unshift(u),this.headersElement.insertBefore(u.getElement(),this.headersElement.firstChild)):(this.columns.push(u),this.headersElement.appendChild(u.getElement()));return u.columnRendered(),u}registerColumnField(l){l.definition.field&&(this.columnsByField[l.definition.field]=l)}registerColumnPosition(l){this.columnsByIndex.push(l)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(l){l.reRegisterPosition()})}verticalAlignHeaders(){var l=0;this.columns.forEach(r=>{var a;r.clearVerticalAlign(),(a=r.getHeight())>l&&(l=a)}),this.columns.forEach(r=>{r.verticalAlign(this.table.options.columnHeaderVertAlign,l)}),this.table.rowManager.adjustTableSize()}findColumn(l){return"object"!=typeof l?this.columnsByField[l]||!1:l instanceof $h?l:l instanceof Jh?l._getSelf()||!1:"undefined"!=typeof HTMLElement&&l instanceof HTMLElement&&this.columns.find(a=>a.element===l)||!1}getColumnByField(l){return this.columnsByField[l]}getColumnsByFieldRoot(l){var r=[];return Object.keys(this.columnsByField).forEach(a=>{a.split(".")[0]===l&&r.push(this.columnsByField[a])}),r}getColumnByIndex(l){return this.columnsByIndex[l]}getFirstVisibileColumn(l){return(l=this.columnsByIndex.findIndex(r=>r.visible))>-1&&this.columnsByIndex[l]}getColumns(){return this.columns}findColumnIndex(l){return this.columnsByIndex.findIndex(r=>l===r)}getRealColumns(){return this.columnsByIndex}traverse(l){this.columnsByIndex.forEach((r,a)=>{l(r,a)})}getDefinitions(l){var r=[];return this.columnsByIndex.forEach(a=>{(!l||l&&a.visible)&&r.push(a.getDefinition())}),r}getDefinitionTree(){var l=[];return this.columns.forEach(r=>{l.push(r.getDefinition(!0))}),l}getComponents(l){var r=[];return(l?this.columns:this.columnsByIndex).forEach(u=>{r.push(u.getComponent())}),r}getWidth(){var l=0;return this.columnsByIndex.forEach(r=>{r.visible&&(l+=r.getWidth())}),l}moveColumn(l,r,a){this.moveColumnActual(l,r,a),r.element.parentNode.insertBefore(l.element,r.element),a&&r.element.parentNode.insertBefore(r.element,l.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(l,r,a){this._moveColumnInArray(l.parent.isGroup?l.parent.columns:this.columns,l,r,a),this._moveColumnInArray(this.columnsByIndex,l,r,a,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",l,r,a),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",l.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(l,r,a,u,m){var S,E=l.indexOf(r);E>-1&&(l.splice(E,1),(S=l.indexOf(a))>-1?u&&(S+=1):S=E,l.splice(S,0,r),m&&(this.chain("column-moving-rows",[r,a,u],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(N){if(N.cells.length){var K=N.cells.splice(E,1)[0];N.cells.splice(S,0,K)}}))}scrollToColumn(l,r,a){var u=0,m=0,E=0,S=l.getElement();return new Promise((D,N)=>{if(void 0===r&&(r=this.table.options.scrollToColumnPosition),void 0===a&&(a=this.table.options.scrollToColumnIfVisible),l.visible){switch(r){case"middle":case"center":E=-this.element.clientWidth/2;break;case"right":E=S.clientWidth-this.headersElement.clientWidth}if(!a&&(m=S.offsetLeft)>0&&m+S.offsetWidth<this.element.clientWidth)return!1;u=S.offsetLeft+E,u=Math.max(Math.min(u,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(u),this.scrollHorizontal(u),D()}else console.warn("Scroll Error - Column not visible"),N("Scroll Error - Column not visible")})}generateCells(l){var r=[];return this.columnsByIndex.forEach(a=>{r.push(a.generateCell(l))}),r}getFlexBaseWidth(){var l=this.table.element.clientWidth,r=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(l-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(a){var u,m,E;a.visible&&(u=a.definition.width||0,m=parseInt(a.minWidth),E="string"==typeof u?u.indexOf("%")>-1?l/100*parseInt(u):parseInt(u):u,r+=E>m?E:m)}),r}addColumn(l,r,a){return new Promise((u,m)=>{var E=this._addColumn(l,r,a);this._reIndexColumns(),this.dispatch("column-add",l,r,a),"fitColumns"!=this.layoutMode()&&E.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),u(E)})}deregisterColumn(l){var a,r=l.getField();r&&delete this.columnsByField[r],(a=this.columnsByIndex.indexOf(l))>-1&&this.columnsByIndex.splice(a,1),(a=this.columns.indexOf(l))>-1&&this.columns.splice(a,1),this.verticalAlignHeaders(),this.redraw()}redraw(l){_r.elVisible(this.element)&&this.verticalAlignHeaders(),l&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",l)||this.layoutRefresh(),this.dispatch("table-redraw",l),this.table.footerManager.redraw()}}class ap extends wh{constructor(l){super(l),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var l=this.tableElement;l.firstChild;)l.removeChild(l.firstChild);l.scrollTop=0,l.scrollLeft=0,l.style.minWidth="",l.style.minHeight="",l.style.display="",l.style.visibility=""}renderRows(){var l=this.tableElement,r=!0;this.rows().forEach((a,u)=>{this.styleRow(a,u),l.appendChild(a.getElement()),a.initialize(!0),"group"!==a.type&&(r=!1)}),l.style.minWidth=r?this.table.columnManager.getWidth()+"px":""}rerenderRows(l){this.render(),l&&l()}scrollToRowNearestTop(l){var r=_r.elOffset(l.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-r)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-r))}scrollToRow(l){var r=l.getElement();this.elementVertical.scrollTop=_r.elOffset(r).top-_r.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(l){return this.rows()}}class Zf extends wh{constructor(l){super(l),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var l=this.tableElement;l.firstChild;)l.removeChild(l.firstChild);l.style.paddingTop="",l.style.paddingBottom="",l.style.minWidth="",l.style.minHeight="",l.style.display="",l.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(l){for(var r=this.elementVertical.scrollTop,a=!1,u=!1,m=this.table.rowManager.scrollLeft,E=this.rows(),S=this.vDomTop;S<=this.vDomBottom;S++)if(E[S]){var D=r-E[S].getElement().offsetTop;if(!(!1===u||Math.abs(D)<u))break;u=D,a=S}E.forEach(N=>{N.deinitializeHeight()}),l&&l(),this._virtualRenderFill(!1===a?this.rows.length-1:a,!0,u||0),this.scrollColumns(m)}scrollColumns(l){this.table.rowManager.scrollHorizontal(l)}scrollRows(l,r){var a=l-this.vDomScrollPosTop,u=l-this.vDomScrollPosBottom,m=2*this.vDomWindowBuffer,E=this.rows();if(this.scrollTop=l,-a>m||u>m){var S=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*E.length)),this.scrollColumns(S)}else r?(a<0&&this._addTopRow(E,-a),u<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(E,-u):this.vDomScrollPosBottom=this.scrollTop)):(u>=0&&this._addBottomRow(E,u),a>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(E,a):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(l){var r=this.rows().indexOf(l);return!(Math.abs(this.vDomTop-r)>Math.abs(this.vDomBottom-r))}scrollToRow(l){var r=this.rows().indexOf(l);r>-1&&this._virtualRenderFill(r,!0)}visibleRows(l){var r=this.elementVertical.scrollTop,a=this.elementVertical.clientHeight+r,u=!1,m=0,E=0,S=this.rows();if(l)m=this.vDomTop,E=this.vDomBottom;else for(var D=this.vDomTop;D<=this.vDomBottom;D++)if(S[D])if(u){if(!(a-S[D].getElement().offsetTop>=0))break;E=D}else if(r-S[D].getElement().offsetTop>=0)m=D;else{if(u=!0,!(a-S[D].getElement().offsetTop>=0))break;E=D}return S.slice(m,E+1)}_virtualRenderFill(l,r,a){var u=this.tableElement,m=this.elementVertical,E=0,S=0,D=0,N=0,K=0,ft=this.rows(),Ot=ft.length,zt=this.elementVertical.clientHeight;if(a=a||0,l=l||0){for(;u.firstChild;)u.removeChild(u.firstChild);(D=(Ot-l+1)*this.vDomRowHeight)<zt&&(l-=Math.ceil((zt-D)/this.vDomRowHeight))<0&&(l=0),l-=E=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),l)}else this.clear();if(Ot&&_r.elVisible(this.elementVertical)){for(this.vDomTop=l,this.vDomBottom=l-1;(S<=zt+this.vDomWindowBuffer||K<this.vDomWindowMinTotalRows)&&this.vDomBottom<Ot-1;){var Re,ae=this.vDomBottom+1,ye=ft[ae];this.styleRow(ye,ae),u.appendChild(ye.getElement()),ye.initialize(),ye.heightInitialized||ye.normalizeHeight(!0),Re=ye.getHeight(),K<E?N+=Re:S+=Re,Re>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*Re),this.vDomBottom++,K++}l?(this.vDomTopPad=r?this.vDomRowHeight*this.vDomTop+a:this.scrollTop-N,this.vDomBottomPad=this.vDomBottom==Ot-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-S-N,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((S+N)/K),this.vDomBottomPad=this.vDomRowHeight*(Ot-this.vDomBottom-1),this.vDomScrollHeight=N+S+this.vDomBottomPad-zt),u.style.paddingTop=this.vDomTopPad+"px",u.style.paddingBottom=this.vDomBottomPad+"px",r&&(this.scrollTop=this.vDomTopPad+N+a-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-zt:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-zt),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&r&&(this.scrollTop+=this.elementVertical.offsetHeight-zt),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,m.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(l,r){for(var a=this.tableElement,u=[],m=0,E=this.vDomTop-1,S=0;this.vDomTop;){let N,K,D=l[E];if(!(D&&S<this.vDomMaxRenderChain))break;if(N=D.getHeight()||this.vDomRowHeight,K=D.initialized,!(r>=N))break;this.styleRow(D,E),a.insertBefore(D.getElement(),a.firstChild),(!D.initialized||!D.heightInitialized)&&u.push(D),D.initialize(),K||(N=D.getElement().offsetHeight,N>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*N)),r-=N,m+=N,this.vDomTop--,E--,S++}for(let D of u)D.clearCellHeight();this._quickNormalizeRowHeight(u),m&&(this.vDomTopPad-=m,this.vDomTopPad<0&&(this.vDomTopPad=E*this.vDomRowHeight),E<1&&(this.vDomTopPad=0),a.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=m)}_removeTopRow(l,r){for(var a=[],u=0,m=0;;){let S,E=l[this.vDomTop];if(!(E&&m<this.vDomMaxRenderChain))break;if(S=E.getHeight()||this.vDomRowHeight,!(r>=S))break;this.vDomTop++,r-=S,u+=S,a.push(E),m++}for(let E of a){let S=E.getElement();S.parentNode&&S.parentNode.removeChild(S)}u&&(this.vDomTopPad+=u,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?u:u+this.vDomWindowBuffer)}_addBottomRow(l,r){for(var a=this.tableElement,u=[],m=0,E=this.vDomBottom+1,S=0;;){let N,K,D=l[E];if(!(D&&S<this.vDomMaxRenderChain))break;if(N=D.getHeight()||this.vDomRowHeight,K=D.initialized,!(r>=N))break;this.styleRow(D,E),a.appendChild(D.getElement()),(!D.initialized||!D.heightInitialized)&&u.push(D),D.initialize(),K||(N=D.getElement().offsetHeight,N>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*N)),r-=N,m+=N,this.vDomBottom++,E++,S++}for(let D of u)D.clearCellHeight();this._quickNormalizeRowHeight(u),m&&(this.vDomBottomPad-=m,(this.vDomBottomPad<0||E==l.length-1)&&(this.vDomBottomPad=0),a.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=m)}_removeBottomRow(l,r){for(var a=[],u=0,m=0;;){let S,E=l[this.vDomBottom];if(!(E&&m<this.vDomMaxRenderChain))break;if(S=E.getHeight()||this.vDomRowHeight,!(r>=S))break;this.vDomBottom--,r-=S,u+=S,a.push(E),m++}for(let E of a){let S=E.getElement();S.parentNode&&S.parentNode.removeChild(S)}u&&(this.vDomBottomPad+=u,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=u)}_quickNormalizeRowHeight(l){for(let r of l)r.calcHeight();for(let r of l)r.setCellHeight()}}class lp extends Cl{constructor(l){super(l),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var l=document.createElement("div");return l.classList.add("tabulator-tableholder"),l.setAttribute("tabindex",0),l.setAttribute("role","rowgroup"),l}createTableElement(){var l=document.createElement("div");return l.classList.add("tabulator-table"),l.setAttribute("role","rowgroup"),l}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(l,r){return r?this.activeRows.indexOf(l):this.rows.indexOf(l)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var l=this.element.scrollLeft,r=this.scrollLeft>l,a=this.element.scrollTop,u=this.scrollTop>a;this.scrollLeft!=l&&(this.scrollLeft=l,this.dispatch("scroll-horizontal",l,r),this.dispatchExternal("scrollHorizontal",l,r)),this.scrollTop!=a&&(this.scrollTop=a,this.renderer.scrollRows(a,u),this.dispatch("scroll-vertical",a,u),this.dispatchExternal("scrollVertical",a,u))})}findRow(l){return"object"!=typeof l?null!=l&&(this.rows.find(a=>a.data[this.table.options.index]==l)||!1):l instanceof Vs?l:l instanceof gu?l._getSelf()||!1:"undefined"!=typeof HTMLElement&&l instanceof HTMLElement&&this.rows.find(a=>a.getElement()===l)||!1}getRowFromDataObject(l){return this.rows.find(a=>a.data===l)||!1}getRowFromPosition(l,r){return r?this.activeRows[l]:this.rows[l]}scrollToRow(l,r,a){return this.renderer.scrollToRowPosition(l,r,a)}setData(l,r,a){return new Promise((u,m)=>{r&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(l,!0):this.reRenderInPosition(()=>{this._setDataActual(l)}):(this.table.options.autoColumns&&a&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(l),this.resetScroll(),this._setDataActual(l)),u()})}_setDataActual(l,r){this.dispatchExternal("dataProcessing",l),this._wipeElements(),Array.isArray(l)?(this.dispatch("data-processing",l),l.forEach((a,u)=>{if(a&&"object"==typeof a){var m=new Vs(a,this);this.rows.push(m)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",a)}),this.refreshActiveData(!1,!1,r),this.dispatch("data-processed",l),this.dispatchExternal("dataProcessed",l)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof l,"\nData:     ",l)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(l=>{l.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(l,r){var a=this.rows.indexOf(l),u=this.activeRows.indexOf(l);u>-1&&this.activeRows.splice(u,1),a>-1&&this.rows.splice(a,1),this.setActiveRows(this.activeRows),this.displayRowIterator(m=>{var E=m.indexOf(l);E>-1&&m.splice(E,1)}),r||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",l.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(l,r,a,u){var m=this.addRowActual(l,r,a,u);return this.dispatch("row-added",m,l,r,a),m}addRows(l,r,a){var u=[];return new Promise((m,E)=>{r=this.findAddRowPos(r),Array.isArray(l)||(l=[l]),(void 0===a&&r||void 0!==a&&!r)&&l.reverse(),l.forEach((S,D)=>{var N=this.addRow(S,r,a,!0);u.push(N),this.dispatch("row-added",N,l,r,a)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),u.length&&this._clearPlaceholder(),m(u)})}findAddRowPos(l){return void 0===l&&(l=this.table.options.addRowPos),"pos"===l&&(l=!0),"bottom"===l&&(l=!1),l}addRowActual(l,r,a,u){var D,N,m=l instanceof Vs?l:new Vs(l||{},this),E=this.findAddRowPos(r),S=-1;return a||(N=this.chain("row-adding-position",[m,E],null,{index:a,top:E}),a=N.index,E=N.top),void 0!==a&&(a=this.findRow(a)),(a=this.chain("row-adding-index",[m,a,E],null,a))&&(S=this.rows.indexOf(a)),a&&S>-1?(D=this.activeRows.indexOf(a),this.displayRowIterator(function(K){var ft=K.indexOf(a);ft>-1&&K.splice(E?ft:ft+1,0,m)}),D>-1&&this.activeRows.splice(E?D:D+1,0,m),this.rows.splice(E?S:S+1,0,m)):E?(this.displayRowIterator(function(K){K.unshift(m)}),this.activeRows.unshift(m),this.rows.unshift(m)):(this.displayRowIterator(function(K){K.push(m)}),this.activeRows.push(m),this.rows.push(m)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",m.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),u||this.reRenderInPosition(),m}moveRow(l,r,a){this.dispatch("row-move",l,r,a),this.moveRowActual(l,r,a),this.regenerateRowNumbers(),this.dispatch("row-moved",l,r,a),this.dispatchExternal("rowMoved",l.getComponent())}moveRowActual(l,r,a){this.moveRowInArray(this.rows,l,r,a),this.moveRowInArray(this.activeRows,l,r,a),this.displayRowIterator(u=>{this.moveRowInArray(u,l,r,a)}),this.dispatch("row-moving",l,r,a)}moveRowInArray(l,r,a,u){var m,E,D;if(r!==a&&((m=l.indexOf(r))>-1&&(l.splice(m,1),E=l.indexOf(a),l.splice(E>-1?u?E+1:E:m,0,r)),l===this.getDisplayRows())){D=E>m?E:m+1;for(let N=m<E?m:E;N<=D;N++)l[N]&&this.styleRow(l[N],N)}}clearData(){this.setData([])}getRowIndex(l){return this.findRowIndex(l,this.rows)}getDisplayRowIndex(l){var r=this.getDisplayRows().indexOf(l);return r>-1&&r}nextDisplayRow(l,r){var a=this.getDisplayRowIndex(l),u=!1;return!1!==a&&a<this.displayRowsCount-1&&(u=this.getDisplayRows()[a+1]),!u||u instanceof Vs&&"row"==u.type?u:this.nextDisplayRow(u,r)}prevDisplayRow(l,r){var a=this.getDisplayRowIndex(l),u=!1;return a&&(u=this.getDisplayRows()[a-1]),!r||!u||u instanceof Vs&&"row"==u.type?u:this.prevDisplayRow(u,r)}findRowIndex(l,r){var a;return!!((l=this.findRow(l))&&(a=r.indexOf(l),a>-1))&&a}getData(l,r){var a=[];return this.getRows(l).forEach(function(m){"row"==m.type&&a.push(m.getData(r||"data"))}),a}getComponents(l){var r=[];return this.getRows(l).forEach(function(u){r.push(u.getComponent())}),r}getDataCount(l){return this.getRows(l).length}scrollHorizontal(l){this.scrollLeft=l,this.element.scrollLeft=l,this.dispatch("scroll-horizontal",l)}registerDataPipelineHandler(l,r){void 0!==r?(this.dataPipeline.push({handler:l,priority:r}),this.dataPipeline.sort((a,u)=>a.priority-u.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(l,r){void 0!==r?(this.displayPipeline.push({handler:l,priority:r}),this.displayPipeline.sort((a,u)=>a.priority-u.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(l,r,a){var u=this.table,m="",E=0,S=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof l)if((E=this.dataPipeline.findIndex(D=>D.handler===l))>-1)m="dataPipeline",r&&(E==this.dataPipeline.length-1?m="display":E++);else{if(!((E=this.displayPipeline.findIndex(D=>D.handler===l))>-1))return void console.error("Unable to refresh data, invalid handler provided",l);m="displayPipeline",r&&(E==this.displayPipeline.length-1?m="end":E++)}else m=l||"all",E=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===m&&E<this.redrawBlockRestoreConfig.index||S.indexOf(m)<S.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:l,skipStage:r,renderInPosition:a,stage:m,index:E});else{switch(this.dispatch("data-refeshing"),l||(this.activeRowsPipeline[0]=this.rows.slice(0)),m){case"all":case"dataPipeline":for(let D=E;D<this.dataPipeline.length;D++){let N=this.dataPipeline[D].handler(this.activeRowsPipeline[D].slice(0));this.activeRowsPipeline[D+1]=N||this.activeRowsPipeline[D].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":E=0,this.resetDisplayRows();case"displayPipeline":for(let D=E;D<this.displayPipeline.length;D++){let N=this.displayPipeline[D].handler((D?this.getDisplayRows(D-1):this.activeRows).slice(0),a);this.setDisplayRows(N||this.getDisplayRows(D-1).slice(0),D)}}_r.elVisible(this.element)&&(a?this.reRenderInPosition():(l||this.table.columnManager.renderer.renderColumns(),this.renderTable(),u.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(l=>{var r=l.getCell(this.rowNumColumn);r&&r._generateContents()})}setActiveRows(l){this.activeRows=l,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(l,r){var a=!0;return r&&void 0!==this.displayRows[r]?(this.displayRows[r]=l,a=!0):(this.displayRows.push(l),a=r=this.displayRows.length-1),r==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),a}getDisplayRows(l){return void 0===l?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[l]||[]}getVisibleRows(l){return this.renderer.visibleRows(!l)}displayRowIterator(l){this.activeRowsPipeline.forEach(l),this.displayRows.forEach(l),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(l){var r;switch(l){case"active":r=this.activeRows;break;case"display":r=this.table.rowManager.getDisplayRows();break;case"visible":r=this.getVisibleRows(!0);break;default:r=this.chain("rows-retrieve",l,null,this.rows)||this.rows}return r}reRenderInPosition(l){this.redrawBlock?l?l():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(l)}initializeRenderer(){var l;(l="string"==typeof this.table.options.renderVertical?{virtual:Zf,basic:ap}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new l(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(l,r){var a=l.getElement();r%2?(a.classList.add("tabulator-row-even"),a.classList.remove("tabulator-row-odd")):(a.classList.add("tabulator-row-odd"),a.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(l){l.normalizeHeight()})}adjustTableSize(){var l=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let r=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+r+"px)",this.element.style.height="calc(100% - "+r+"px)",this.element.style.maxHeight="calc(100% - "+r+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-r+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&l!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(l){l.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(l){var r=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,l?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(r),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var l=document.createEvent("Event");l.initEvent("scroll",!1,!0),this.element.dispatchEvent(l)}else this.element.dispatchEvent(new Event("scroll"))}}class cp extends Cl{constructor(l){super(l),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var l=document.createElement("div");return l.classList.add("tabulator-footer"),l}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(l,r){this.activate(r),this.element.appendChild(l),this.table.rowManager.adjustTableSize()}prepend(l,r){this.activate(r),this.element.insertBefore(l,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(l){l.parentNode.removeChild(l),this.deactivate()}deactivate(l){(!this.element.firstChild||l)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(l){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),l&&this.links.push(l)}redraw(){this.links.forEach(function(l){l.footerRedraw()})}}class $p extends Cl{constructor(l){super(l),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var l={};this.listeners.forEach(r=>{l[r]={handler:null,components:[]}}),this.listeners=l}bindSubscriptionWatchers(){var l=Object.keys(this.listeners),r=Object.values(this.componentMap);for(let a of r)for(let u of l)this.subscriptionChange(a+"-"+u,this.subscriptionChanged.bind(this,a,u))}subscriptionChanged(l,r,a){var u=this.listeners[r].components,m=u.indexOf(l),E=!1;a?-1===m&&(u.push(l),E=!0):this.subscribed(l+"-"+r)||m>-1&&(u.splice(m,1),E=!0),E&&this.updateEventListeners()}updateEventListeners(){for(let l in this.listeners){let r=this.listeners[l];r.components.length?r.handler||(r.handler=this.track.bind(this,l),this.el.addEventListener(l,r.handler)):r.handler&&(this.el.removeEventListener(l,r.handler),r.handler=null)}}track(l,r){var a=r.composedPath&&r.composedPath()||r.path,u=this.findTargets(a);u=this.bindComponents(l,u),this.triggerEvents(l,r,u)}findTargets(l){var r={};let a=Object.keys(this.componentMap);for(let u of l){let m=u.classList?[...u.classList]:[];if(m.filter(D=>this.abortClasses.includes(D)).length)break;let S=m.filter(D=>a.includes(D));for(let D of S)r[this.componentMap[D]]=u}return r.group&&r.group===r.row&&delete r.row,r}bindComponents(l,r){var a=Object.keys(r).reverse(),u=this.listeners[l],m={};for(let E of a){let S,D=r[E],N=this.previousTargets[E];if(N&&N.target===D)S=N.component;else switch(E){case"row":case"group":(u.components.includes("row")||u.components.includes("cell"))&&(S=this.table.rowManager.getVisibleRows().find(ft=>ft.getElement()===D));break;case"column":u.components.includes("column")&&(S=this.table.columnManager.findColumn(D));break;case"cell":u.components.includes("cell")&&(S=r.row.findCell(D))}S&&(r[E]=S,m[E]={target:D,component:S})}return this.previousTargets=m,r}triggerEvents(l,r,a){var u=this.listeners[l];for(let m in a)a[m]&&u.components.includes(m)&&this.dispatch(m+"-"+l,r,a[m])}}class Qf{constructor(l){this.table=l,this.bindings={}}bind(l,r,a){this.bindings[l]||(this.bindings[l]={}),this.bindings[l][r]?console.warn("Unable to bind component handler, a matching function name is already bound",l,r,hanlder):this.bindings[l][r]=a}handle(l,r,a){if(this.bindings[l]&&this.bindings[l][a])return this.bindings[l][a].bind(null,r);"then"!==a&&"string"==typeof a&&!a.startsWith("_")&&console.error("The "+l+" component does not have a "+a+" function, have you checked that you have the correct Tabulator module installed?")}}class qf extends Cl{constructor(l){super(l),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var l;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((l=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=l.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((l=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=l.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var l=document.createElement("div");return l.classList.add("tabulator-loader"),l}createMsgElement(){var l=document.createElement("div");return l.classList.add("tabulator-loader-msg"),l.setAttribute("role","alert"),l}load(l,r,a,u,m){var E=++this.requestOrder;return this.dispatchExternal("dataLoading",l),l&&(0==l.indexOf("{")||0==l.indexOf("["))&&(l=JSON.parse(l)),this.confirm("data-loading",l,r,a,m)?(this.loading=!0,m||this.showLoader(),r=this.chain("data-params",[l,a,m],r||{},{}),r=this.mapParams(r,this.table.options.dataSendParams),this.chain("data-load",[l,r,a,m],Promise.resolve([])).then(N=>{!Array.isArray(N)&&"object"==typeof N&&(N=this.mapParams(N,this.objectInvert(this.table.options.dataReceiveParams)));var K=this.chain("data-loaded",N,null,N);E==this.requestOrder?(this.hideLoader(),!1!==K&&(this.dispatchExternal("dataLoaded",K),this.table.rowManager.setData(K,u,!u))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(N=>{console.error("Data Load Error: ",N),this.dispatchExternal("dataLoadError",N),m||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",l),l||(l=[]),this.table.rowManager.setData(l,u,!u),Promise.resolve())}mapParams(l,r){var a={};for(let u in l)a[r.hasOwnProperty(u)?r[u]:u]=l[u];return a}objectInvert(l){var r={};for(let a in l)r[l[a]]=a;return r}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class up{constructor(l,r,a){this.table=l,this.events={},this.optionsList=r||{},this.subscriptionNotifiers={},this.dispatch=a?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=a}subscriptionChange(l,r){this.subscriptionNotifiers[l]||(this.subscriptionNotifiers[l]=[]),this.subscriptionNotifiers[l].push(r),this.subscribed(l)&&this._notifiySubscriptionChange(l,!0)}subscribe(l,r){this.events[l]||(this.events[l]=[]),this.events[l].push(r),this._notifiySubscriptionChange(l,!0)}unsubscribe(l,r){var a;if(this.events[l]){if(r){if(!((a=this.events[l].findIndex(u=>u===r))>-1))return void console.warn("Cannot remove event, no matching event found:",l,r);this.events[l].splice(a,1)}else delete this.events[l];this._notifiySubscriptionChange(l,!1)}else console.warn("Cannot remove event, no events set on:",l)}subscribed(l){return this.events[l]&&this.events[l].length}_notifiySubscriptionChange(l,r){var a=this.subscriptionNotifiers[l];a&&a.forEach(u=>{u(r)})}_dispatch(){var a,l=Array.from(arguments),r=l.shift();return this.events[r]&&this.events[r].forEach((u,m)=>{let E=u.apply(this.table,l);m||(a=E)}),a}_debugDispatch(){var l=Array.from(arguments),r=l[0];return l[0]="ExternalEvent:"+l[0],(!0===this.debug||this.debug.includes(r))&&console.log(...l),this._dispatch(...arguments)}}class Am{constructor(l){this.events={},this.subscriptionNotifiers={},this.dispatch=l?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=l?this._debugChain.bind(this):this._chain.bind(this),this.confirm=l?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=l}subscriptionChange(l,r){this.subscriptionNotifiers[l]||(this.subscriptionNotifiers[l]=[]),this.subscriptionNotifiers[l].push(r),this.subscribed(l)&&this._notifiySubscriptionChange(l,!0)}subscribe(l,r,a=1e4){this.events[l]||(this.events[l]=[]),this.events[l].push({callback:r,priority:a}),this.events[l].sort((u,m)=>u.priority-m.priority),this._notifiySubscriptionChange(l,!0)}unsubscribe(l,r){var a;if(this.events[l]){if(r){if(!((a=this.events[l].findIndex(u=>u.callback===r))>-1))return void console.warn("Cannot remove event, no matching event found:",l,r);this.events[l].splice(a,1)}this._notifiySubscriptionChange(l,!1)}else console.warn("Cannot remove event, no events set on:",l)}subscribed(l){return this.events[l]&&this.events[l].length}_chain(l,r,a,u){var m=a;return Array.isArray(r)||(r=[r]),this.subscribed(l)?(this.events[l].forEach((E,S)=>{m=E.callback.apply(this,r.concat([m]))}),m):"function"==typeof u?u():u}_confirm(l,r){var a=!1;return Array.isArray(r)||(r=[r]),this.subscribed(l)&&this.events[l].forEach((u,m)=>{u.callback.apply(this,r)&&(a=!0)}),a}_notifiySubscriptionChange(l,r){var a=this.subscriptionNotifiers[l];a&&a.forEach(u=>{u(r)})}_dispatch(){var l=Array.from(arguments),r=l.shift();this.events[r]&&this.events[r].forEach(a=>{a.callback.apply(this,l)})}_debugDispatch(){var l=Array.from(arguments),r=l[0];return l[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...l),this._dispatch(...arguments)}_debugChain(){var l=Array.from(arguments),r=l[0];return l[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...l),this._chain(...arguments)}_debugConfirm(){var l=Array.from(arguments),r=l[0];return l[0]="InternalEvent:"+r,(!0===this.debug||this.debug.includes(r))&&console.log(...l),this._confirm(...arguments)}}let Td=(()=>{class g{static register(r){g.tables.push(r)}static deregister(r){var a=g.tables.indexOf(r);a>-1&&g.tables.splice(a,1)}static lookupTable(r,a){var m,E,u=[];if("string"==typeof r){if((m=document.querySelectorAll(r)).length)for(var S=0;S<m.length;S++)(E=g.matchElement(m[S]))&&u.push(E)}else"undefined"!=typeof HTMLElement&&r instanceof HTMLElement||r instanceof _u?(E=g.matchElement(r))&&u.push(E):Array.isArray(r)?r.forEach(function(D){u=u.concat(g.lookupTable(D))}):a||console.warn("Table Connection Error - Invalid Selector",r);return u}static matchElement(r){return g.tables.find(function(a){return r instanceof _u?a===r:a.element===r})}}return g.tables=[],g})();function hp(g){g.forEach(function(l){l.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var tf={fitData:function(g){this.table.columnManager.renderer.reinitializeColumnWidths(g),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:hp,fitDataTable:hp,fitDataStretch:function(g){var l=0,r=this.table.rowManager.element.clientWidth,a=0,u=!1;g.forEach((m,E)=>{m.widthFixed||m.reinitializeWidth(),(this.table.options.responsiveLayout?m.modules.responsive.visible:m.visible)&&(u=m),m.visible&&(l+=m.getWidth())}),u?(a=r-l+u.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(u.setWidth(0),this.table.modules.responsiveLayout.update()),a>0?u.setWidth(a):u.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(g){var m,N,l=this.table.element.clientWidth,r=0,a=0,u=0,E=[],S=[],D=0,K=0;function ft(zt){return"string"==typeof zt?zt.indexOf("%")>-1?l/100*parseInt(zt):parseInt(zt):zt}function Ot(zt,ae,ye,Re){var Oe=[],ai=0,Pi=0,yi=0,wi=u,Wi=0,zi=0,qi=[];function an(sn){return ye*(sn.column.definition.widthGrow||1)}function zn(sn){return ft(sn.width)-ye*(sn.column.definition.widthShrink||0)}return zt.forEach(function(sn,Yn){var ko=Re?zn(sn):an(sn);sn.column.minWidth>=ko?Oe.push(sn):sn.column.maxWidth&&sn.column.maxWidth<ko?(sn.width=sn.column.maxWidth,ae-=sn.column.maxWidth,(wi-=Re?sn.column.definition.widthShrink||1:sn.column.definition.widthGrow||1)&&(ye=Math.floor(ae/wi))):(qi.push(sn),zi+=Re?sn.column.definition.widthShrink||1:sn.column.definition.widthGrow||1)}),Oe.length?(Oe.forEach(function(sn){ai+=Re?sn.width-sn.column.minWidth:sn.column.minWidth,sn.width=sn.column.minWidth}),Wi=(Pi=ae-ai)-(yi=zi?Math.floor(Pi/zi):Pi)*zi,Wi+=Ot(qi,Pi,yi,Re)):(Wi=zi?ae-Math.floor(ae/zi)*zi:ae,qi.forEach(function(sn){sn.width=Re?zn(sn):an(sn)})),Wi}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(l-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),g.forEach(function(zt){var ae,ye,Re;zt.visible&&(ae=zt.definition.width,ye=parseInt(zt.minWidth),ae?(Re=ft(ae),r+=Re>ye?Re:ye,zt.definition.widthShrink&&(S.push({column:zt,width:Re>ye?Re:ye}),D+=zt.definition.widthShrink)):(E.push({column:zt,width:0}),u+=zt.definition.widthGrow||1))}),a=l-r,m=Math.floor(a/u),K=Ot(E,a,m,!1),E.length&&K>0&&(E[E.length-1].width+=+K),E.forEach(function(zt){a-=zt.width}),(N=Math.abs(K)+a)>0&&D&&(K=Ot(S,N,Math.floor(N/D),!0)),S.length&&(S[S.length-1].width-=K),E.forEach(function(zt){zt.column.setWidth(zt.width)}),S.forEach(function(zt){zt.column.setWidth(zt.width)})}},Cd={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},km=Object.freeze({__proto__:null,LayoutModule:(()=>{class g extends uo{constructor(r){super(r,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var r=this.table.options.layout;g.modes[r]?this.mode=r:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+r),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){g.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return g.moduleName="layout",g.modes=tf,g})(),LocalizeModule:(()=>{class g extends uo{constructor(r){super(r),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=_r.deepClone(g.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let r in this.table.options.langs)this.installLang(r,this.table.options.langs[r]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(r){this.langList.default.headerFilters.default=r}setHeaderFilterColumnPlaceholder(r,a){this.langList.default.headerFilters.columns[r]=a,this.lang&&!this.lang.headerFilters.columns[r]&&(this.lang.headerFilters.columns[r]=a)}installLang(r,a){this.langList[r]?this._setLangProp(this.langList[r],a):this.langList[r]=a}_setLangProp(r,a){for(let u in a)r[u]&&"object"==typeof r[u]?this._setLangProp(r[u],a[u]):r[u]=a[u]}setLocale(r){if(!0===(r=r||"default")&&navigator.language&&(r=navigator.language.toLowerCase()),r&&!this.langList[r]){let u=r.split("-")[0];this.langList[u]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",r,u),r=u):(console.warn("Localization Error - Matching locale not found, using default: ",r),r="default")}this.locale=r,this.lang=_r.deepClone(this.langList.default||{}),"default"!=r&&function a(u,m){for(var E in u)"object"==typeof u[E]?(m[E]||(m[E]={}),a(u[E],m[E])):m[E]=u[E]}(this.langList[r],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(r){return this.locale}getLang(r){return r?this.langList[r]:this.lang}getText(r,a){var u=(r=a?r+"|"+a:r).split("|");return this._getLangElement(u,this.locale)||""}_getLangElement(r,a){var u=this.lang;return r.forEach(function(m){var E;u&&(u=void 0!==(E=u[m])&&E)}),u}bind(r,a){this.bindings[r]||(this.bindings[r]=[]),this.bindings[r].push(a),a(this.getText(r),this.lang)}_executeBindings(){for(let r in this.bindings)this.bindings[r].forEach(a=>{a(this.getText(r),this.lang)})}}return g.moduleName="localize",g.langs=Cd,g})(),CommsModule:(()=>{class g extends uo{constructor(r){super(r)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(r){var a=[];return Td.lookupTable(r).forEach(m=>{this.table!==m&&a.push(m)}),a}send(r,a,u,m){var E=this.getConnections(r);E.forEach(S=>{S.tableComms(this.table.element,a,u,m)}),!E.length&&r&&console.warn("Table Connection Error - No tables matching selector found",r)}receive(r,a,u,m){if(this.table.modExists(a))return this.table.modules[a].commsReceived(r,u,m);console.warn("Inter-table Comms Error - no such module:",a)}}return g.moduleName="comms",g})()});class Sd{constructor(l,r){this.bindStaticFuctionality(l),this.bindModules(l,km,!0),r&&this.bindModules(l,r)}bindStaticFuctionality(l){l.moduleBindings={},l.extendModule=function(r,a,u){if(l.moduleBindings[r]){var m=l.moduleBindings[r][a];if(m)if("object"==typeof u)for(let E in u)m[E]=u[E];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",a)}else console.warn("Module Error - module does not exist:",r)},l.registerModule=function(r){Array.isArray(r)||(r=[r]),r.forEach(a=>{l.registerModuleBinding(a)})},l.registerModuleBinding=function(r){l.moduleBindings[r.moduleName]=r},l.findTable=function(r){var a=Td.lookupTable(r,!0);return!(Array.isArray(a)&&!a.length)&&a},l.prototype.bindModules=function(){for(var r in this.modules={},l.moduleBindings){let a=l.moduleBindings[r];this.modules[r]=new a(this),a.prototype.moduleCore?this.modulesCore[r]=this.modules[r]:this.modulesRegular[r]=this.modules[r]}}}bindModules(l,r,a){var u=Object.values(r);a&&u.forEach(m=>{m.prototype.moduleCore=!0}),l.registerModule(u)}}let _u=(()=>{class g{constructor(r,a){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new Qf(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new Jp(this,"table constructor"),this.initialized=!1,this.initializeElement(r)&&(this.initialzeCoreSystems(a),setTimeout(()=>{this._create()})),Td.register(this)}initializeElement(r){return"undefined"!=typeof HTMLElement&&r instanceof HTMLElement?(this.element=r,!0):"string"==typeof r?(this.element=document.querySelector(r),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",r),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",r),!1)}initialzeCoreSystems(r){this.columnManager=new Ed(this),this.rowManager=new lp(this),this.footerManager=new cp(this),this.dataLoader=new qf(this),this.bindModules(),this.options=this.optionsList.generate(g.defaultOptions,r),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new up(this,this.options,this.options.debugEventsExternal),this.eventBus=new Am(this.options.debugEventsInternal),this.interactionMonitor=new $p(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var r=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==r.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var u,r=this.element,a=this.options;if("TABLE"===r.tagName){this.originalElement=this.element,u=document.createElement("div");var m=r.attributes;for(var E in m)"object"==typeof m[E]&&u.setAttribute(m[E].name,m[E].value);r.parentNode.replaceChild(u,r),this.element=r=u}for(r.classList.add("tabulator"),r.setAttribute("role","grid");r.firstChild;)r.removeChild(r.firstChild);a.height&&(a.height=isNaN(a.height)?a.height:a.height+"px",r.style.height=a.height),!1!==a.minHeight&&(a.minHeight=isNaN(a.minHeight)?a.minHeight:a.minHeight+"px",r.style.minHeight=a.minHeight),!1!==a.maxHeight&&(a.maxHeight=isNaN(a.maxHeight)?a.maxHeight:a.maxHeight+"px",r.style.maxHeight=a.maxHeight)}_initializeTable(){var r=this.element,a=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let E in this.modulesCore)this.modulesCore[E].initialize();if("string"==typeof a.placeholder){var u=document.createElement("div");u.classList.add("tabulator-placeholder");var m=document.createElement("span");m.innerHTML=a.placeholder,u.appendChild(m),a.placeholder=u}r.appendChild(this.columnManager.getElement()),r.appendChild(this.rowManager.getElement()),a.footerElement&&this.footerManager.activate(),a.autoColumns&&a.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let E in this.modulesRegular)this.modulesRegular[E].initialize();this.columnManager.setColumns(a.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var r=this.element;for(Td.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(a){a.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];r.firstChild;)r.removeChild(r.firstChild);r.classList.remove("tabulator")}_detectBrowser(){var r=navigator.userAgent||navigator.vendor||window.opera;r.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):r.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):r.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(r){return new Promise((a,u)=>{var m=document.createElement("input");m.type="file",m.accept=r||".json,application/json",m.addEventListener("change",E=>{var N,S=m.files[0],D=new FileReader;D.readAsText(S),D.onload=K=>{try{N=JSON.parse(D.result)}catch(ft){return console.warn("File Load Error - File contents is invalid JSON",ft),void u(ft)}this.setData(N).then(ft=>{a(ft)}).catch(ft=>{a(ft)})},D.onerror=K=>{console.warn("File Load Error - Unable to read file"),u()}}),m.click()})}setData(r,a,u){if(this.initialized)return this.dataLoader.load(r,a,u,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(r){return this.rowManager.getData(r)}getDataCount(r){return this.rowManager.getDataCount(r)}replaceData(r,a,u){if(this.initialized)return this.dataLoader.load(r,a,u,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(r){var a=0;if(this.initialized)return new Promise((u,m)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?r.forEach(E=>{var S=this.rowManager.findRow(E[this.options.index]);S&&(a++,S.updateData(E).then(()=>{--a||u()}))}):(console.warn("Update Error - No data provided"),m("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(r,a,u){if(this.initialized)return new Promise((m,E)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?this.rowManager.addRows(r,a,u).then(S=>{var D=[];S.forEach(function(N){D.push(N.getComponent())}),m(D)}):(console.warn("Update Error - No data provided"),E("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(r){var a=[],u=0;if(this.initialized)return new Promise((m,E)=>{this.dataLoader.blockActiveLoad(),"string"==typeof r&&(r=JSON.parse(r)),r?r.forEach(S=>{var D=this.rowManager.findRow(S[this.options.index]);u++,D?D.updateData(S).then(()=>{u--,a.push(D.getComponent()),u||m(a)}):this.rowManager.addRows(S).then(N=>{u--,a.push(N[0].getComponent()),u||m(a)})}):(console.warn("Update Error - No data provided"),E("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(r){var a=this.rowManager.findRow(r);return a?a.getComponent():(console.warn("Find Error - No matching row found:",r),!1)}getRowFromPosition(r,a){var u=this.rowManager.getRowFromPosition(r,a);return u?u.getComponent():(console.warn("Find Error - No matching row found:",r),!1)}deleteRow(r){var a=[];Array.isArray(r)||(r=[r]);for(let u of r){let m=this.rowManager.findRow(u,!0);if(!m)return console.error("Delete Error - No matching row found:",u),Promise.reject("Delete Error - No matching row found");a.push(m)}return a.sort((u,m)=>this.rowManager.rows.indexOf(u)>this.rowManager.rows.indexOf(m)?1:-1),a.forEach(u=>{u.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(r,a,u){if(this.initialized)return"string"==typeof r&&(r=JSON.parse(r)),this.rowManager.addRows(r,a,u).then(m=>m[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(r,a){var u=this.rowManager.findRow(r);return"string"==typeof a&&(a=JSON.parse(a)),u?u.updateData(a).then(()=>u.getComponent()):this.rowManager.addRows(a).then(m=>m[0].getComponent())}updateRow(r,a){var u=this.rowManager.findRow(r);return"string"==typeof a&&(a=JSON.parse(a)),u?u.updateData(a).then(()=>{resolve(u.getComponent())}):(console.warn("Update Error - No matching row found:",r),Promise.reject("Update Error - No matching row found"))}scrollToRow(r,a,u){var m=this.rowManager.findRow(r);return m?this.rowManager.scrollToRow(m,a,u):(console.warn("Scroll Error - No matching row found:",r),Promise.reject("Scroll Error - No matching row found"))}moveRow(r,a,u){var m=this.rowManager.findRow(r);m?m.moveToRow(a,u):console.warn("Move Error - No matching row found:",r)}getRows(r){if(this.initialized)return this.rowManager.getComponents(r);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(r,a){var u=this.rowManager.findRow(r);return u?this.rowManager.getRowPosition(u,a):(console.warn("Position Error - No matching row found:",r),!1)}setColumns(r){this.initialized?this.columnManager.setColumns(r):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(r){return this.columnManager.getComponents(r)}getColumn(r){var a=this.columnManager.findColumn(r);return a?a.getComponent():(console.warn("Find Error - No matching column found:",r),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(r){var a=this.columnManager.findColumn(r);if(!a)return console.warn("Column Show Error - No matching column found:",r),!1;a.show()}hideColumn(r){var a=this.columnManager.findColumn(r);if(!a)return console.warn("Column Hide Error - No matching column found:",r),!1;a.hide()}toggleColumn(r){var a=this.columnManager.findColumn(r);if(!a)return console.warn("Column Visibility Toggle Error - No matching column found:",r),!1;a.visible?a.hide():a.show()}addColumn(r,a,u){var m=this.columnManager.findColumn(u);return this.columnManager.addColumn(r,a,m).then(E=>E.getComponent())}deleteColumn(r){var a=this.columnManager.findColumn(r);return a?a.delete():(console.warn("Column Delete Error - No matching column found:",r),Promise.reject())}updateColumnDefinition(r,a){var u=this.columnManager.findColumn(r);return u?u.updateDefinition(a):(console.warn("Column Update Error - No matching column found:",r),Promise.reject())}moveColumn(r,a,u){var m=this.columnManager.findColumn(r),E=this.columnManager.findColumn(a);m?E?this.columnManager.moveColumn(m,E,u):console.warn("Move Error - No matching column found:",E):console.warn("Move Error - No matching column found:",r)}scrollToColumn(r,a,u){return new Promise((m,E)=>{var S=this.columnManager.findColumn(r);return S?this.columnManager.scrollToColumn(S,a,u):(console.warn("Scroll Error - No matching column found:",r),Promise.reject("Scroll Error - No matching column found"))})}redraw(r){this.initialized?(this.columnManager.redraw(r),this.rowManager.redraw(r)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(r){this.options.height=isNaN(r)?r:r+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(r,a){this.externalEvents.subscribe(r,a)}off(r,a){this.externalEvents.unsubscribe(r,a)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(r,a){return!!this.modules[r]||(a&&console.error("Tabulator Module Not Installed: "+r),!1)}module(r){var a=this.modules[r];return a||console.error("Tabulator module not installed: "+r),a}}return g.defaultOptions=Kf,g})();new Sd(_u),new Sd(class extends _u{},Xf);let tg=(()=>{class g{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(r){_u.registerModule([Pp,wl,Lp,op]),this.hotInstance=new _u(r,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",clipboard:"copy",footerElement:"<div>\n        \x3c!-- <a href=\"javascript:{var event = new Event('TabCopy'); window.dispatchEvent(event);}\">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href=\"javascript:{var event = new Event('TabDownload'); window.dispatchEvent(event);}\">CSV</a>\n        --\x3e\n        \n    </div>",placeholder:"please press execute button",tooltips:function(a){return a.getColumn().getField()+" - "+a.getValue()}}),this.hot.replaceData([]),this.hot.redraw(!0)}AddStringToGrid(r){if(r.startsWith("{")&&r.endsWith("}"))try{var a=JSON.parse(r);return void this.objectsForGrid.push(a)}catch(E){}if(r.startsWith("[")&&r.endsWith("]"))try{for(var u=JSON.parse(r),m=0;m<u.length;m++)this.objectsForGrid.push(u[m]);return}catch(E){}this.stringsForGrid.push(r)}AddDataToGrid(r){return"string"==typeof r?(this.AddStringToGrid(null==r?void 0:r.toString()),void this.dataObject.push([null==r?void 0:r.toString()])):"object"==typeof r?(console.log("adding object to grid"),this.AddStringToGrid(JSON.stringify(r)),void this.dataObject.push([r])):(this.dataObject.push([r.ToString()]),void this.AddStringToGrid(r.toString()))}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(r,a){return null!=r&&r.hasOwnProperty(a)}AddObjectToFinishGrid(){for(var r=[],a=this.objectsForGrid,u=0;u<a.length;u++)"string"==typeof(m=a[u])?r.push("_"):r.push(...Object.keys(m));var E=new Set(r);r=Array.from(E);var S=[...r],D=[];for(u=0;u<a.length;u++){for(var m=a[u],N={Nr:u+1},K=0;K<r.length;K++){var ft=r[K],Ot=this.goodNameForKey(ft);if(m&&this.hasOwnProperty(m,ft)){var zt=m[ft];N[Ot]="object"==typeof zt?JSON.stringify(zt):zt}else N[Ot]="string"==typeof m&&0===K?m:""}D.push(N)}r.splice(0,0,"Nr"),S.splice(0,0,"Nr");var ae=this.Headers(S);this.hot.setColumns(ae),this.hot.replaceData(D)}Headers(r){return r.map(a=>({title:a,field:this.goodNameForKey(a),formatter:function(u,m,E){try{var S=u.getValue().toString();if(S.length<2)return S;if(S.startsWith("[")&&S.endsWith("]"))try{var D=JSON.parse(S),N=u.getRow().getData().Nr,ft=u.getColumn().getField()+"_"+N;return E(function(){new _u("#"+ft,{data:D,autoColumns:!0,layout:"fitDataFill"})}),"<div id='"+ft+"'>"+S+"</div>"}catch(Ot){return S}}catch(Ot){return S}return u.getValue()}}))}AddStringToFinishGrid(){for(var r=[],a=0;a<this.stringsForGrid.length;a++)r.push({Nr:a+1,Text:this.stringsForGrid[a]});var m=this.Headers(["Nr","Text"]);this.hot.setColumns(m),this.hot.replaceData(r)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(r){var a=r;return a.replace(".","_")}copyClip(){this.hot.copyToClipboard()}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return g.\u0275fac=function(r){return new(r||g)},g.\u0275prov=Zt.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();var pp=f(16335),fp=f(91083),ef=f(68260),nf=f(57261),Rd=f(43954),Dd=f(92181),eg=f(4834),rd=f(81125),rf=f(20773),Rh=f(8704);function sf(g,l){1&g&&Zt._UZ(0,"mat-spinner")}const ig=function(g){return["/","automation","loadexample",g]};function ng(g,l){if(1&g&&(Zt.TgZ(0,"a",17),Zt._uU(1),Zt.qZA()),2&g){const r=Zt.oxw();Zt.Q6J("routerLink",Zt.VKq(2,ig,r.mustLoadDemoBlock)),Zt.xp6(1),Zt.hij("Direct link ",r.mustLoadDemoBlock,"")}}function Dh(g,l){if(1&g){const r=Zt.EpF();Zt.TgZ(0,"ngx-monaco-editor",19),Zt.NdJ("ngModelChange",function(u){return Zt.CHM(r),Zt.oxw(2).showInner=u}),Zt.qZA()}if(2&g){const r=Zt.oxw(2);Zt.Q6J("options",r.editorPlain)("ngModel",r.showInner)}}function og(g,l){if(1&g){const r=Zt.EpF();Zt.TgZ(0,"ngx-monaco-editor",19),Zt.NdJ("ngModelChange",function(u){return Zt.CHM(r),Zt.oxw(2).showJSCode=u}),Zt.qZA()}if(2&g){const r=Zt.oxw(2);Zt.Q6J("options",r.editorJSOptions)("ngModel",r.showJSCode)}}function rg(g,l){if(1&g){const r=Zt.EpF();Zt.TgZ(0,"ngx-monaco-editor",19),Zt.NdJ("ngModelChange",function(u){return Zt.CHM(r),Zt.oxw(2).showXMLCode=u}),Zt.qZA()}if(2&g){const r=Zt.oxw(2);Zt.Q6J("options",r.editorXMLOptions)("ngModel",r.showXMLCode)}}function sg(g,l){if(1&g){const r=Zt.EpF();Zt.TgZ(0,"ngx-monaco-editor",19),Zt.NdJ("ngModelChange",function(u){return Zt.CHM(r),Zt.oxw(2).showBlocksDefinition=u}),Zt.qZA()}if(2&g){const r=Zt.oxw(2);Zt.Q6J("options",r.editorJSOptions)("ngModel",r.showBlocksDefinition)}}function ag(g,l){if(1&g&&(Zt.TgZ(0,"mat-grid-tile"),Zt.YNc(1,Dh,1,2,"ngx-monaco-editor",18),Zt.YNc(2,og,1,2,"ngx-monaco-editor",18),Zt.YNc(3,rg,1,2,"ngx-monaco-editor",18),Zt.YNc(4,sg,1,2,"ngx-monaco-editor",18),Zt.qZA()),2&g){const r=Zt.oxw();Zt.xp6(1),Zt.Q6J("ngIf",r.ShowOutput()),Zt.xp6(1),Zt.Q6J("ngIf",r.ShowCode()),Zt.xp6(1),Zt.Q6J("ngIf",r.ShowXML()),Zt.xp6(1),Zt.Q6J("ngIf",r.ShowBlocksDefinition())}}var Nr=(()=>{return(g=Nr||(Nr={}))[g.ShowNone=0]="ShowNone",g[g.ShowBlocksDefinition=1]="ShowBlocksDefinition",g[g.ShowXML=2]="ShowXML",g[g.ShowOutput=3]="ShowOutput",g[g.ShowCode=4]="ShowCode",g[g.Stop=100]="Stop",Nr;var g})();let gp=(()=>{class g{constructor(r,a,u,m,E,S,D){var N;this.tabulator=r,this.DetailsApp=a,this.loadDemo=u,this.ar=m,this.ta=E,this.snackBar=S,this.dialog=D,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=Nr.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.mustLoadDemoBlock="",this.intro=U(),this.myId=0,this.fullTextData="",this.fullHtmlData="",this.myChart=null,this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.loadedCompletely=!1,this.myId=++g.id,this.ar.paramMap.subscribe(K=>{this.mustLoadDemoBlock=K.get("demoblock")}),this.ta.receiveData().subscribe(K=>{"DisplayBlocklyComponent"==K[0]&&this[K[1]]()}),null===(N=this.DetailsApp.LocalAPI)||void 0===N||N.IsAlive().subscribe()}createIntro(){var r,a=null===(r=this.DetailsApp.settings)||void 0===r?void 0:r.tourSteps.map(u=>{var m;return{title:(null===(m=this.DetailsApp.settings)||void 0===m?void 0:m.title)||"Blockly Automation",intro:u.text,element:document.querySelector(u.query)||void 0}});this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:a}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid(),null!=this.myChart&&this.myChart.destroy();var r=this.theHtmlOutput();r.innerHTML="",this.fullHtmlData="",(r=this.theTextOutput()).innerText="",this.fullTextData=""}ShowText(r){if(null!=r){var a=r.toString();this.fullTextData+=a,this.theTextOutput().innerText=this.fullTextData}}finishHTMLOutput(){this.theHtmlOutput().innerHTML=this.fullHtmlData}ShowHTML(r){if(null!=r){var a=r.toString();this.fullHtmlData+=a,this.theHtmlOutput().innerHTML+=a}}theHtmlOutput(){return document.getElementById("htmlOutput"+this.myId)}theTextOutput(){return document.getElementById("htmlText"+this.myId)}ShowChart(r){var a,u=null===(a=document.getElementById("barchart"+this.myId))||void 0===a?void 0:a.getContext("2d");if(null!=u)try{var m=null==r?void 0:r.toString(),E=JSON.parse(m);E&&E.type&&(this.myChart=new Ji(u,E),console.log("make chart",r))}catch(S){this.myChart=null}else console.log("not canvas available for chart!")}RunCode(){this.snackBar.open("Program start","Executing...");var r=this,a=this.run.latestCode,u=this.showJSCode;r.CalculateXMLAndCode(),this.run=_.interpreterHelper.createInterpreter(this.demoWorkspace,e),this.clearOutput(),this.showCodeAndXML=Nr.ShowOutput,this.showInner='{ "step_start": "start program",',a!=u&&(window.confirm("Do you want to run the code modified by you ?")&&(a=u),this.showJSCode=u),this.run.runCode((E,S)=>{try{return new Interpreter(E,S)}catch(D){r.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(D)),this.showCodeAndXML=Nr.ShowCode}},E=>{r.step++,r.showInner+=`\n           \n"step_${r.step}" : "${E}",`,r.tabulator.AddDataToGrid(E),r.ShowChart(E),r.ShowHTML(E),r.ShowText(E)},()=>{this.snackBar.open("Program end","Done!",{duration:3e3}),r.showInner+='\n "step_end" : "program executed; see results below"\n}',this.tabulator.FinishGrid(),this.finishHTMLOutput()},a)}ShowLocalAPI(r){var a;null===(a=this.DetailsApp.LocalAPI)||void 0===a||a.LoadBlockContent(r).subscribe(u=>{var m=p.Xml.textToDom(u);null!=this.demoWorkspace&&(p.Xml.clearWorkspaceAndLoadFromXml(m,this.demoWorkspace),window.alert("please press execute button"))})}ShowDemo(r){this.mustLoadDemoBlock=r,this.loadDemo.getDemoBlock(r).subscribe(a=>{var u=p.Xml.textToDom(a);null!=this.demoWorkspace&&(p.Xml.clearWorkspaceAndLoadFromXml(u,this.demoWorkspace),window.alert("please press execute button"))})}registerSwaggerBlocksObjects(r,a){return a.fieldXMLObjects.map(m=>p.Xml.textToDom(m))}registerSwaggerBlocksAPIControllers(r,a,u){return a.findfieldXMLFunctions(u).map(E=>p.Xml.textToDom(E.gui))}registerSwaggerBlocksAPIAll(r,a){return a.fieldXMLFunctions.map(m=>p.Xml.textToDom(m.gui))}ngOnInit(){}ngAfterViewInit(){this.StartRegister(),(0,Ii.R)(window,"TabDownload").subscribe(r=>this.tabulator.copyCSV()),(0,Ii.R)(window,"TabCopy").subscribe(r=>this.tabulator.copyClip())}ShowBlocks(){this.dialog.open(Ap,{}).afterClosed().subscribe(a=>{if(console.log("The dialog was closed",a),a){var u=a;switch(u.Source){case"Demos":this.ShowDemo(a.id);break;case"LocalAPI":this.ShowLocalAPI(a.id);break;default:window.alert(u.Source)}}})}LoadSwagger(){var r=this;new M.parseData("").showWindowToLoad("",u=>{if(u){if(u.endsWith(".html")||u.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");r.LoadSwaggerFromUrl(u).then(m=>{m.hasError?window.alert("error loading local api"):(r.addToToolboxSwagger(m,this),window.alert("loaded successfully"))})}})}LoadSwaggerFromUrl(r,a){var u=this;return(0,b.Z)(function*(){var m=new M.parseData(r),E=yield m.ParseSwagger();return E.name=a||r,E.hasError?E:u.LoadSwaggerFromAPI(E)})()}LoadSwaggerFromAPI(r){if(r.hasError)return console.error("error in swagger",r),r;this.swaggerData.push(r);for(var a=0;a<r.GenerateBlocks.length;a++)(0,r.GenerateBlocks[a])(p.Blocks,e);for(a=0;a<r.GenerateFunctions.length;a++)(0,r.GenerateFunctions[a])(p.Blocks,e);return r.metaBlocks()(p.Blocks,e),r}StartRegister(){var r=this;return(0,b.Z)(function*(){var a=r.DetailsApp.swaggersDict,u=new Map;a.forEach((N,K)=>{N.hasError||u.set(K,r.LoadSwaggerFromAPI(N))});var m=[...Array(50).keys()].map(N=>r.CategorySwaggerHidden(N)).join("");const E=document.getElementById("steps"+r.myId);if(null!=E){r.tabulator.initGrid(E),c.filterBlocks.definitionBlocks(p.Blocks,e),c.waitBlocks.definitionBlocks(p.defineBlocksWithJsonArray,e),c.xhrBlocks.definitionBlocks(p.Blocks,e),c.propBlocks.definitionBlocks(p.Blocks,e),c.guiBlocks.definitionBlocks(p.Blocks,e),c.convertersBlocks.definitionBlocks(p.Blocks,e),c.exportFileBlock.definitionBlocks(p.Blocks,e),c.createObjectBlocks.definitionBlocks(p.Blocks,e,p.Extensions,p.Mutator),c.currentDateBlock.definitionBlocks(p.Blocks,e),c.dateFromTextBlock.definitionBlocks(p.Blocks,e),c.waitBlocks.definitionBlocks(p.Blocks,e),c.commentBlock.definitionBlocks(p.Blocks,e),c.trycatchFinBlock.definitionBlocks(p.Blocks,e),c.auth0Blocks.definitionBlocks(p.Blocks,e),c.windowsCreds.definitionBlocks(p.Blocks,e),c.chartBlock.definitionBlocks(p.Blocks,e),c.emailBlocks.definitionBlocks(p.Blocks,e),c.htmlblocks.definitionBlocks(p.Blocks,e),c.ttsBlock.definitionBlocks(p.Blocks,e),c.pianoBlock.definitionBlocks(p.Blocks,e);var S=r.DetailsApp.customCategories,D=[c.defaultBlocks.generalBlocks(),` \n        <category name='Blockly Advanced'>\n        <category id="Audio" name="Audio">\n        ${c.ttsBlock.fieldXML()}\n        ${c.pianoBlock.fieldXML()}\n        </category>  \n            ${c.filterBlocks.fieldXML()}\n                \n                ${c.auth0Blocks.fieldXML()}\n                <category id="catConverters"  name="Converters">\n                ${c.convertersBlocks.fieldXML()}\n              </category>    \n              <category id="catDates"  name="Dates">\n          ${c.currentDateBlock.fieldXML()}\n          ${c.dateFromTextBlock.fieldXML()}\n          ${c.waitBlocks.fieldXML()}\n        </category>\n        <category id="catEmail"  name="Email">\n        ${c.emailBlocks.fieldXML()}\n      </category>\n\n        <category id="catExporter"  name="Exporter">\n        ${c.exportFileBlock.fieldXML()}\n      </category>\n              <category id="catGUI" name="GUI">\n              ${c.guiBlocks.fieldXML()}\n              ${c.chartBlock.fieldXML()}\n              </category>\n              <category id="catHTML" name="HTML">\n              ${c.htmlblocks.fieldXML()}\n              </category>\n              <category name="Objects" id="objects">\n              ${c.propBlocks.fieldXML()}\n              ${c.createObjectBlocks.fieldXML()}\n              </category>\n              <category id="XHR" name="Request">\n            ${c.xhrBlocks.fieldXML()}\n            ${c.windowsCreds.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${c.waitBlocks.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${c.trycatchFinBlock.fieldXML()}\n        ${c.commentBlock.fieldXML()}\n          </category>\n        \n      `,`</category>\n      ${S}\n      \n      <category name="Swagger" id="catSwagger" expanded='false' >          \n          ${m}\n        </category> \n       \n        `];r.initialize(D)}else window.alert("gridElement is null")})()}SaveBlocks(){_.saveBlocksUrl.saveState(p.Xml,this.demoWorkspace,this.myId)}ShowBlocksDefinition(){return this.showCodeAndXML===Nr.ShowBlocksDefinition}ShowSelection(){return Nr[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==Nr.ShowNone}ShowOutput(){return this.showCodeAndXML===Nr.ShowOutput}ShowCode(){return this.showCodeAndXML===Nr.ShowCode}ShowXML(){return this.showCodeAndXML===Nr.ShowXML}CalculateXMLAndCode(){var r=p.Xml.workspaceToDom(this.demoWorkspace,!0),a=p.Xml.domToPrettyText(r);this.showJSCode=this.run.latestCode,this.showXMLCode=a;var u=this.parseTextForBlocks(a);this.showBlocksDefinition=u.map(m=>{try{return`Blockly.Blocks['${m}']={ init: \n`+p.Blocks[m].init.toString()+`};\n};\nBlockly.JavaScript['${m}']=`+e[m].toString()+";"}catch(D){return console.error("parse definition : "+m,D),"//Error for "+m}}).join("\n")}parseTextForBlocks(r){var a=[];if(r.indexOf('<block type="')>=0)for(var u=r.split('<block type="'),m=1;m<u.length;m++){var E=u[m].split('"')[0];a.push(E)}return a}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=Nr.ShowNone,setTimeout(a=>{p.svgResize(a)},1e3,this.demoWorkspace)),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var r=window.prompt("Name?","blocks.txt");null!=r&&_.saveLoad.DownloadBlocks(p.Xml,this.demoWorkspace,r)}changeListener(r){this.readThis(r.target)}readThis(r){var a=r.files[0],u=new FileReader,m=this;u.onloadend=function(E){_.saveLoad.LoadFile(p.Xml,m.demoWorkspace,u.result),m.run.resetInterpreter()},u.readAsText(a)}CategorySwaggerHidden(r){return`<category name='swagger_hidden_${r}' hidden='true' >${r}</category>`}SaveToLocalAPI(){var r,a,u;if(0==((null===(a=null===(r=this.DetailsApp)||void 0===r?void 0:r.LocalAPI)||void 0===a?void 0:a.WasAlive)||!1))return this.LoadLocalAPI(),void window.alert("local api it is not yet loaded - please try again after loading");var m=p.Xml.workspaceToDom(this.demoWorkspace,!0),E=p.Xml.domToPrettyText(m),S=new w.q,D=window.prompt("name of the blocks?");null!=D&&(S.id=D,S.blocks="",S.categories="",S.description="",null===(u=this.DetailsApp.LocalAPI)||void 0===u||u.SaveBlock(S,E).subscribe(N=>{console.log("number blocks",N),window.alert("saved !")}))}LoadLocalAPI(){var r,a,u=this;return null===(a=null===(r=u.DetailsApp.LocalAPI)||void 0===r?void 0:r.IsAlive())||void 0===a?void 0:a.pipe((0,Xn.K)(m=>{var E;throw window.alert(`cannot load ${null===(E=u.DetailsApp.LocalAPI)||void 0===E?void 0:E.urL}`),m})).subscribe(m=>{var E;if(!m){if(!window.confirm("LocalAPI is not alive.\n Do you want to downlod and run ?"))return;u.DetailsApp.LocalAPI.download()}var S=(null===(E=u.DetailsApp.LocalAPI)||void 0===E?void 0:E.urL)||"";u.LoadSwaggerFromUrl(S+="swagger/v1/swagger.json").then(D=>{D.hasError?window.alert("error loading local api"):(D.name="LocalAPI",u.addToToolboxSwagger(D,this),window.alert("loaded successfully"))})})}initialize(r){var a,u,m,E;const S=document.getElementById("blocklyDiv"+this.myId);if(null!=S){var D=r.map(zt=>`<sep></sep>${zt}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">    \n    ${D}\n    </xml>`,this.demoWorkspace=p.inject(S,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML}),new s(this.demoWorkspace).init();var K=this;if(((null===(u=null===(a=this.DetailsApp.settings)||void 0===a?void 0:a.startBlocks)||void 0===u?void 0:u.length)||0)>0)try{var ft=((null===(m=this.DetailsApp.settings)||void 0===m?void 0:m.startBlocks)||[]).join("\n"),Ot=p.Xml.textToDom(ft);p.Xml.clearWorkspaceAndLoadFromXml(Ot,this.demoWorkspace)}catch(zt){console.error("error when load default blocks",zt)}(null===(E=this.DetailsApp.LocalAPI)||void 0===E?void 0:E.WasAlive)&&this.LoadSwaggerFromUrl(this.DetailsApp.LocalAPI.urL+"swagger/v1/swagger.json","LocalAutomation"),window.setTimeout(K.afterTimeout,2e3,this),this.run=_.interpreterHelper.createInterpreter(this.demoWorkspace,e),K=this,this.demoWorkspace.addChangeListener(function(zt){zt.isUiEvent||(K.run.resetInterpreter(),K.run.generateCodeAndLoadIntoInterpreter(),K.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){_.saveBlocksUrl.restoreState(p.Xml,this.demoWorkspace,this.myId)}addToToolboxSwagger(r,a){var u,m=r.findCategSwaggerFromPaths().sort().map(zt=>`<category name='${zt}' custom='func_${r.name}_${zt}'></category>`).join("\n"),E=(null==a?void 0:a.CategorySwaggerHidden(null==a?void 0:a.swaggerLoaded))||"",S=a.toolboxXML,D=`<category name='${r.name}'>\n<category name='API' id='func_${r.name}'>\n${m}\n</category>\n${r.categSwagger()}\n\n<category name='meta' id='meta_${r.name}'>\n<block type='meta_swagger_controllers_${r.name}'></block>\n<block type='meta_swagger_controllers_actions_${r.name}'></block>\n</category>\n\n</category>\n`;if(S=S.replace(E,D),a.swaggerLoaded++,a.toolboxXML=S,null===(u=null==a?void 0:a.demoWorkspace)||void 0===u||u.updateToolbox(S),null!=(null==a?void 0:a.demoWorkspace)){var K="objects_"+r.nameCategSwagger(),ft="AllApi_"+r.nameCategSwagger(),Ot=r;a.demoWorkspace.registerToolboxCategoryCallback(K,zt=>a.registerSwaggerBlocksObjects(zt,Ot)),a.demoWorkspace.registerToolboxCategoryCallback(ft,zt=>a.registerSwaggerBlocksAPIAll(zt,Ot)),r.findCategSwaggerFromPaths().forEach(zt=>{var ae;null===(ae=null==a?void 0:a.demoWorkspace)||void 0===ae||ae.registerToolboxCategoryCallback(`func_${r.name}_${zt}`,ye=>a.registerSwaggerBlocksAPIControllers(ye,r,zt))})}}afterTimeout(r){var a,u,m;if(r.loadedCompletely=!0,null!=(null==r?void 0:r.swaggerData))if(r.toolboxXML=r.toolboxXML.replace("Swagger",`Swagger(${r.swaggerData.length})`),r.swaggerData.forEach(N=>{r.addToToolboxSwagger(N,r)}),null!=(null==r?void 0:r.mustLoadDemoBlock))r.ShowDemo(null==r?void 0:r.mustLoadDemoBlock);else{if(((null===(u=null===(a=r.DetailsApp.settings)||void 0===a?void 0:a.startBlocks)||void 0===u?void 0:u.length)||0)>0)try{var S=((null===(m=r.DetailsApp.settings)||void 0===m?void 0:m.startBlocks)||[]).join("\n");if((null==S?void 0:S.length)>62){var D=p.Xml.textToDom(S);p.Xml.clearWorkspaceAndLoadFromXml(D,r.demoWorkspace)}}catch(N){console.log("error when load default blocks",N)}r.restoreBlocks()}}}return g.id=0,g.\u0275fac=function(r){return new(r||g)(Zt.Y36(tg),Zt.Y36(mr.d),Zt.Y36(pp.F),Zt.Y36(fp.gz),Zt.Y36(ef.v),Zt.Y36(nf.ux),Zt.Y36(Is.uw))},g.\u0275cmp=Zt.Xpm({type:g,selectors:[["app-display-blockly"]],decls:79,vars:14,consts:[[4,"ngIf"],["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","id","downloadBlocks","color","primary",3,"matMenuTriggerFor"],["menuSave","matMenu"],[3,"inset"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"color","click"],["mat-raised-button","","color","warn","id","runButton",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","accent",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"id"],[3,"id"],["width","800","height","450",3,"id"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"]],template:function(r,a){if(1&r&&(Zt.YNc(0,sf,1,0,"mat-spinner",0),Zt.TgZ(1,"mat-grid-list",1),Zt.TgZ(2,"mat-grid-tile-header"),Zt.TgZ(3,"div",2),Zt.TgZ(4,"div",3),Zt.TgZ(5,"button",4),Zt.NdJ("click",function(){return a.LoadSwagger()}),Zt.TgZ(6,"mat-icon"),Zt._uU(7,"file_upload"),Zt.qZA(),Zt._uU(8," Load Swagger/OpenAPI "),Zt.qZA(),Zt._uU(9," \xa0 "),Zt.TgZ(10,"button",5),Zt.TgZ(11,"mat-icon"),Zt._uU(12,"save"),Zt.qZA(),Zt._uU(13," Save => "),Zt.qZA(),Zt.TgZ(14,"mat-menu",null,6),Zt.TgZ(16,"button",4),Zt.NdJ("click",function(){return a.SaveBlocks()}),Zt.TgZ(17,"mat-icon"),Zt._uU(18,"web"),Zt.qZA(),Zt._uU(19," Persist in browser "),Zt.qZA(),Zt._UZ(20,"mat-divider",7),Zt.TgZ(21,"button",8),Zt.NdJ("click",function(){return a.Download()}),Zt.TgZ(22,"mat-icon"),Zt._uU(23,"download"),Zt.qZA(),Zt._uU(24," Download blocks "),Zt.qZA(),Zt._UZ(25,"mat-divider",7),Zt.TgZ(26,"button",9),Zt.NdJ("click",function(){return a.SaveToLocalAPI()}),Zt.TgZ(27,"mat-icon"),Zt._uU(28,"save"),Zt.qZA(),Zt._uU(29," Save Local "),Zt.qZA(),Zt.qZA(),Zt._uU(30," \xa0 "),Zt.TgZ(31,"button",10),Zt.NdJ("click",function(){return a.RunCode()}),Zt.TgZ(32,"mat-icon"),Zt._uU(33,"play_arrow"),Zt.qZA(),Zt._uU(34," Execute "),Zt.qZA(),Zt._uU(35," \xa0 \xa0 "),Zt.TgZ(36,"input",11),Zt.NdJ("change",function(m){return a.changeListener(m)}),Zt.qZA(),Zt.TgZ(37,"button",4),Zt.NdJ("click",function(){return a.ShowInnerWorkings()}),Zt.TgZ(38,"mat-icon"),Zt._uU(39,"code"),Zt.qZA(),Zt._uU(40),Zt.qZA(),Zt.TgZ(41,"button",12),Zt.NdJ("click",function(){return a.ShowBlocks()}),Zt.TgZ(42,"mat-icon"),Zt._uU(43,"list"),Zt.qZA(),Zt._uU(44," Load Saved Blocks "),Zt.qZA(),Zt.YNc(45,ng,2,4,"a",13),Zt.qZA(),Zt.qZA(),Zt.qZA(),Zt.TgZ(46,"mat-grid-tile"),Zt._UZ(47,"div",14),Zt.qZA(),Zt.YNc(48,ag,5,4,"mat-grid-tile",0),Zt.qZA(),Zt.TgZ(49,"mat-accordion"),Zt.TgZ(50,"mat-expansion-panel"),Zt.TgZ(51,"mat-expansion-panel-header"),Zt.TgZ(52,"mat-panel-title"),Zt._uU(53," Output Grid "),Zt.qZA(),Zt.TgZ(54,"mat-panel-description"),Zt._uU(55," Click to see grid of output values "),Zt.qZA(),Zt.qZA(),Zt._UZ(56,"div",15),Zt.qZA(),Zt.TgZ(57,"mat-expansion-panel"),Zt.TgZ(58,"mat-expansion-panel-header"),Zt.TgZ(59,"mat-panel-title"),Zt._uU(60," Chart "),Zt.qZA(),Zt.TgZ(61,"mat-panel-description"),Zt._uU(62," Click to see chart of output values "),Zt.qZA(),Zt.qZA(),Zt.TgZ(63,"p"),Zt._UZ(64,"canvas",16),Zt.qZA(),Zt.qZA(),Zt.TgZ(65,"mat-expansion-panel"),Zt.TgZ(66,"mat-expansion-panel-header"),Zt.TgZ(67,"mat-panel-title"),Zt._uU(68," HTML "),Zt.qZA(),Zt.TgZ(69,"mat-panel-description"),Zt._uU(70," Click to see output as HTML "),Zt.qZA(),Zt.qZA(),Zt._UZ(71,"div",15),Zt.qZA(),Zt.TgZ(72,"mat-expansion-panel"),Zt.TgZ(73,"mat-expansion-panel-header"),Zt.TgZ(74,"mat-panel-title"),Zt._uU(75," Text "),Zt.qZA(),Zt.TgZ(76,"mat-panel-description"),Zt._uU(77," Click to see output as Text "),Zt.qZA(),Zt.qZA(),Zt._UZ(78,"div",15),Zt.qZA(),Zt.qZA()),2&r){const u=Zt.MAs(15);Zt.Q6J("ngIf",!a.loadedCompletely),Zt.xp6(1),Zt.Q6J("cols",a.ShowSomething()?2:1),Zt.xp6(9),Zt.Q6J("matMenuTriggerFor",u),Zt.xp6(10),Zt.Q6J("inset",!0),Zt.xp6(5),Zt.Q6J("inset",!0),Zt.xp6(1),Zt.Q6J("color",null!=a.DetailsApp.LocalAPI&&a.DetailsApp.LocalAPI.WasAlive?"primary":"warn"),Zt.xp6(14),Zt.hij(" ",a.ShowSelection()," "),Zt.xp6(5),Zt.Q6J("ngIf",null==a.mustLoadDemoBlock?null:a.mustLoadDemoBlock.length),Zt.xp6(2),Zt.Q6J("id","blocklyDiv"+a.myId),Zt.xp6(1),Zt.Q6J("ngIf",a.ShowSomething()),Zt.xp6(8),Zt.Q6J("id","steps"+a.myId),Zt.xp6(8),Zt.Q6J("id","barchart"+a.myId),Zt.xp6(7),Zt.Q6J("id","htmlOutput"+a.myId),Zt.xp6(7),Zt.Q6J("id","htmlText"+a.myId)}},directives:[ba.O5,Rd.Il,Rd.$H,Rd.jo,ya.lW,Zl.Hw,Dd.p6,Dd.VK,eg.d,Rd.DX,rd.pp,rd.ib,rd.yz,rd.yK,rd.u4,rf.$g,ya.zs,fp.yS,Rh.PG,Tn.JJ,Tn.On],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:400;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),g})()},16335:(k,B,f)=>{"use strict";f.d(B,{F:()=>o}),f(39646);var p=f(54004),e=f(18505),t=f(5e3),n=f(40520);let o=(()=>{class s{constructor(_){this.http=_}getDemoBlocks(){var _=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${_}`,{responseType:"text"}).pipe((0,p.U)(w=>JSON.parse(w)))}getCustomCategories(){var _=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/customCategories.txt?${_}`,{responseType:"text"}).pipe((0,p.U)(w=>w.toString()))}getSwaggerLinks(){var _=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${_}`,{responseType:"text"}).pipe((0,p.U)(w=>JSON.parse(w)))}getDemoBlock(_){var w=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${_}.txt?${w}`,{responseType:"text"}).pipe((0,e.b)(U=>{}),(0,p.U)(U=>U.toString()))}}return s.\u0275fac=function(_){return new(_||s)(t.LFG(n.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},13155:(k,B,f)=>{"use strict";var b=f(22313),p=f(5e3),e=f(93075),t=f(91083),n=f(15861),o=f(47423),s=f(63874),c=f(53251),_=f(69808);const w=["vcr"];function M(O,W){if(1&O&&(p.TgZ(0,"mat-icon",9),p._uU(1),p.qZA()),2&O){const y=p.oxw(2).$implicit;p.xp6(1),p.hij(" filter_",y+1,"")}}function U(O,W){1&O&&(p.TgZ(0,"span"),p._uU(1,"W:{{number+1}"),p.qZA())}function V(O,W){if(1&O&&(p.YNc(0,M,2,1,"mat-icon",7),p.YNc(1,U,2,0,"span",8)),2&O){const y=p.oxw().$implicit;p.Q6J("ngIf",y<10),p.xp6(1),p.Q6J("ngIf",y>9)}}function H(O,W){}function $(O,W){1&O&&(p.TgZ(0,"mat-tab",4),p.YNc(1,V,2,2,"ng-template",5),p.YNc(2,H,0,0,"ng-template",null,6,p.W1O),p.qZA()),2&O&&p.Q6J("label","W:"+(W.$implicit+1))}let pt=(()=>{class O{constructor(y,I){this.fooInjector=y,this.resolver=I,this.data=[],this.selectedTabIndex=0,this.numbers=[0]}addTab(){this.numbers.push(this.numbers.length),this.selectedTabIndex=this.numbers.length-1}changeSelected(y){this.data.filter(I=>I==y).length>0||(this.data.push(y),this.loadBar(y).then(I=>{}))}ngAfterViewInit(){this.data.push(0),this.loadBar(0).then(y=>{})}loadBar(y){var I=this;return(0,n.Z)(function*(){var Z;try{const ke=yield Promise.resolve().then(f.bind(f,19378)),di=I.resolver.resolveComponentFactory(ke.DisplayBlocklyComponent);var At=null===(Z=I.components)||void 0===Z?void 0:Z.get(y);null!=At&&At.createComponent(di)}catch(ke){console.error("loading"+y,ke)}return y})()}ngOnInit(){}}return O.\u0275fac=function(y){return new(y||O)(p.Y36(p.zs3),p.Y36(p._Vd))},O.\u0275cmp=p.Xpm({type:O,selectors:[["app-blockly-studio"]],viewQuery:function(y,I){if(1&y&&p.Gf(w,5,p.s_b),2&y){let Z;p.iGM(Z=p.CRH())&&(I.components=Z)}},decls:7,vars:2,consts:[["mat-icon-button","","color","primary",3,"click"],[3,"selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[3,"label"],["mat-tab-label",""],["vcr",""],["aria-hidden","false",4,"ngIf"],[4,"ngIf"],["aria-hidden","false"]],template:function(y,I){1&y&&(p.TgZ(0,"button",0),p.NdJ("click",function(){return I.addTab()}),p.TgZ(1,"mat-icon"),p._uU(2,"add_circle"),p.qZA(),p.qZA(),p.TgZ(3,"mat-tab-group",1),p.NdJ("selectedIndexChange",function(At){return I.changeSelected(At)}),p.YNc(4,$,4,1,"mat-tab",2),p.qZA(),p.TgZ(5,"button",3),p.NdJ("click",function(){return I.addTab()}),p._uU(6,"Add"),p.qZA()),2&y&&(p.xp6(3),p.Q6J("selectedIndex",I.selectedTabIndex),p.xp6(1),p.Q6J("ngForOf",I.numbers))},directives:[o.lW,s.Hw,c.SP,_.sg,c.uX,c.uD,_.O5],styles:[""]}),O})();var nt=f(19378);const st=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:nt.DisplayBlocklyComponent},{path:"automation/studio",component:pt},{path:"automation/loadexample/:demoblock",component:nt.DisplayBlocklyComponent}];let Ct=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[t.Bz.forRoot(st)],t.Bz]}),O})();var xt=f(33290),yt=f(95113),ut=f(54004),tt=f(77579),lt=f(26063);class ot extends tt.x{constructor(W=1/0,y=1/0,I=lt.l){super(),this._bufferSize=W,this._windowTime=y,this._timestampProvider=I,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=y===1/0,this._bufferSize=Math.max(1,W),this._windowTime=Math.max(1,y)}next(W){const{isStopped:y,_buffer:I,_infiniteTimeWindow:Z,_timestampProvider:At,_windowTime:ke}=this;y||(I.push(W),!Z&&I.push(At.now()+ke)),this._trimBuffer(),super.next(W)}_subscribe(W){this._throwIfClosed(),this._trimBuffer();const y=this._innerSubscribe(W),{_infiniteTimeWindow:I,_buffer:Z}=this,At=Z.slice();for(let ke=0;ke<At.length&&!W.closed;ke+=I?1:2)W.next(At[ke]);return this._checkFinalizedStatuses(W),y}_trimBuffer(){const{_bufferSize:W,_timestampProvider:y,_buffer:I,_infiniteTimeWindow:Z}=this,At=(Z?1:2)*W;if(W<1/0&&At<I.length&&I.splice(0,I.length-At),!Z){const ke=y.now();let di=0;for(let Li=1;Li<I.length&&I[Li]<=ke;Li+=2)di=Li;di&&I.splice(0,di+1)}}}var Lt=f(13099);let dt=(()=>{class O{constructor(){this.title="",this.footer="",this.startBlocks=[],this.tourSteps=[],this.latestVersion="",this.localAPI=""}}return O.version="2021.12.20.1000",O})();var it=f(68260),rt=f(70925),Gt=f(30495),bt=f(90508),Ht=f(63191),ce=f(91159),Ye=f(54968),de=f(56451),Be=f(39300),He=f(69718),Ke=f(82722),vi=f(71884),qe=f(95698),Ne=f(68675),oi=f(78372),Ft=f(41777),_e=f(76360),Xt=f(15664),Jt=f(50226);const Rt=["*"];function Pt(O,W){if(1&O){const y=p.EpF();p.TgZ(0,"div",2),p.NdJ("click",function(){return p.CHM(y),p.oxw()._onBackdropClicked()}),p.qZA()}if(2&O){const y=p.oxw();p.ekj("mat-drawer-shown",y._isShowingBackdrop())}}function he(O,W){1&O&&(p.TgZ(0,"mat-drawer-content"),p.Hsn(1,2),p.qZA())}const ze=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],le=["mat-drawer","mat-drawer-content","*"];function jt(O,W){if(1&O){const y=p.EpF();p.TgZ(0,"div",2),p.NdJ("click",function(){return p.CHM(y),p.oxw()._onBackdropClicked()}),p.qZA()}if(2&O){const y=p.oxw();p.ekj("mat-drawer-shown",y._isShowingBackdrop())}}function Yt(O,W){1&O&&(p.TgZ(0,"mat-sidenav-content",3),p.Hsn(1,2),p.qZA())}const ge=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],$t=["mat-sidenav","mat-sidenav-content","*"],re={transformDrawer:(0,Ft.X$)("transform",[(0,Ft.SB)("open, open-instant",(0,Ft.oB)({transform:"none",visibility:"visible"})),(0,Ft.SB)("void",(0,Ft.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Ft.eR)("void => open-instant",(0,Ft.jt)("0ms")),(0,Ft.eR)("void <=> open, open-instant => void",(0,Ft.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},kt=new p.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),we=new p.OlP("MAT_DRAWER_CONTAINER");let ci=(()=>{class O extends Gt.PQ{constructor(y,I,Z,At,ke){super(Z,At,ke),this._changeDetectorRef=y,this._container=I}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return O.\u0275fac=function(y){return new(y||O)(p.Y36(p.sBO),p.Y36((0,p.Gpc)(()=>li)),p.Y36(p.SBq),p.Y36(Gt.mF),p.Y36(p.R0b))},O.\u0275cmp=p.Xpm({type:O,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(y,I){2&y&&p.Udp("margin-left",I._container._contentMargins.left,"px")("margin-right",I._container._contentMargins.right,"px")},features:[p.qOj],ngContentSelectors:Rt,decls:1,vars:0,template:function(y,I){1&y&&(p.F$t(),p.Hsn(0))},encapsulation:2,changeDetection:0}),O})(),Ze=(()=>{class O{constructor(y,I,Z,At,ke,di,Li,Cn){this._elementRef=y,this._focusTrapFactory=I,this._focusMonitor=Z,this._platform=At,this._ngZone=ke,this._interactivityChecker=di,this._doc=Li,this._container=Cn,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new tt.x,this._animationEnd=new tt.x,this._animationState="void",this.openedChange=new p.vpe(!0),this._openedStream=this.openedChange.pipe((0,Be.h)(Ui=>Ui),(0,ut.U)(()=>{})),this.openedStart=this._animationStarted.pipe((0,Be.h)(Ui=>Ui.fromState!==Ui.toState&&0===Ui.toState.indexOf("open")),(0,He.h)(void 0)),this._closedStream=this.openedChange.pipe((0,Be.h)(Ui=>!Ui),(0,ut.U)(()=>{})),this.closedStart=this._animationStarted.pipe((0,Be.h)(Ui=>Ui.fromState!==Ui.toState&&"void"===Ui.toState),(0,He.h)(void 0)),this._destroyed=new tt.x,this.onPositionChanged=new p.vpe,this._modeChanged=new tt.x,this.openedChange.subscribe(Ui=>{Ui?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{(0,Ye.R)(this._elementRef.nativeElement,"keydown").pipe((0,Be.h)(Ui=>Ui.keyCode===ce.hY&&!this.disableClose&&!(0,ce.Vb)(Ui)),(0,Ke.R)(this._destroyed)).subscribe(Ui=>this._ngZone.run(()=>{this.close(),Ui.stopPropagation(),Ui.preventDefault()}))}),this._animationEnd.pipe((0,vi.x)((Ui,$n)=>Ui.fromState===$n.fromState&&Ui.toState===$n.toState)).subscribe(Ui=>{const{fromState:$n,toState:Zn}=Ui;(0===Zn.indexOf("open")&&"void"===$n||"void"===Zn&&0===$n.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(y){(y="end"===y?"end":"start")!=this._position&&(this._position=y,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(y){this._mode=y,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(y){this._disableClose=(0,Ht.Ig)(y)}get autoFocus(){const y=this._autoFocus;return null==y?"side"===this.mode?"dialog":"first-tabbable":y}set autoFocus(y){("true"===y||"false"===y)&&(y=(0,Ht.Ig)(y)),this._autoFocus=y}get opened(){return this._opened}set opened(y){this.toggle((0,Ht.Ig)(y))}_forceFocus(y,I){this._interactivityChecker.isFocusable(y)||(y.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{y.addEventListener("blur",()=>y.removeAttribute("tabindex")),y.addEventListener("mousedown",()=>y.removeAttribute("tabindex"))})),y.focus(I)}_focusByCssSelector(y,I){let Z=this._elementRef.nativeElement.querySelector(y);Z&&this._forceFocus(Z,I)}_takeFocus(){if(!this._focusTrap)return;const y=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(I=>{!I&&"function"==typeof this._elementRef.nativeElement.focus&&y.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(y){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,y):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){var y;const I=null===(y=this._doc)||void 0===y?void 0:y.activeElement;return!!I&&this._elementRef.nativeElement.contains(I)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(y){return this.toggle(!0,y)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(y=!this.opened,I){y&&I&&(this._openedVia=I);const Z=this._setOpen(y,!y&&this._isFocusWithinDrawer(),this._openedVia||"program");return y||(this._openedVia=null),Z}_setOpen(y,I,Z){return this._opened=y,y?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",I&&this._restoreFocus(Z)),this._updateFocusTrapState(),new Promise(At=>{this.openedChange.pipe((0,qe.q)(1)).subscribe(ke=>At(ke?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}}return O.\u0275fac=function(y){return new(y||O)(p.Y36(p.SBq),p.Y36(Xt.qV),p.Y36(Xt.tE),p.Y36(rt.t4),p.Y36(p.R0b),p.Y36(Xt.ic),p.Y36(_.K0,8),p.Y36(we,8))},O.\u0275cmp=p.Xpm({type:O,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(y,I){1&y&&p.WFA("@transform.start",function(At){return I._animationStarted.next(At)})("@transform.done",function(At){return I._animationEnd.next(At)}),2&y&&(p.uIk("align",null),p.d8E("@transform",I._animationState),p.ekj("mat-drawer-end","end"===I.position)("mat-drawer-over","over"===I.mode)("mat-drawer-push","push"===I.mode)("mat-drawer-side","side"===I.mode)("mat-drawer-opened",I.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Rt,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(y,I){1&y&&(p.F$t(),p.TgZ(0,"div",0),p.Hsn(1),p.qZA())},directives:[Gt.PQ],encapsulation:2,data:{animation:[re.transformDrawer]},changeDetection:0}),O})(),li=(()=>{class O{constructor(y,I,Z,At,ke,di=!1,Li){this._dir=y,this._element=I,this._ngZone=Z,this._changeDetectorRef=At,this._animationMode=Li,this._drawers=new p.n_E,this.backdropClick=new p.vpe,this._destroyed=new tt.x,this._doCheckSubject=new tt.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new tt.x,y&&y.change.pipe((0,Ke.R)(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),ke.change().pipe((0,Ke.R)(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=di}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(y){this._autosize=(0,Ht.Ig)(y)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(y){this._backdropOverride=null==y?null:(0,Ht.Ig)(y)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe((0,Ne.O)(this._allDrawers),(0,Ke.R)(this._destroyed)).subscribe(y=>{this._drawers.reset(y.filter(I=>!I._container||I._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Ne.O)(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(y=>{this._watchDrawerToggle(y),this._watchDrawerPosition(y),this._watchDrawerMode(y)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe((0,oi.b)(10),(0,Ke.R)(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(y=>y.open())}close(){this._drawers.forEach(y=>y.close())}updateContentMargins(){let y=0,I=0;if(this._left&&this._left.opened)if("side"==this._left.mode)y+=this._left._getWidth();else if("push"==this._left.mode){const Z=this._left._getWidth();y+=Z,I-=Z}if(this._right&&this._right.opened)if("side"==this._right.mode)I+=this._right._getWidth();else if("push"==this._right.mode){const Z=this._right._getWidth();I+=Z,y-=Z}y=y||null,I=I||null,(y!==this._contentMargins.left||I!==this._contentMargins.right)&&(this._contentMargins={left:y,right:I},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(y){y._animationStarted.pipe((0,Be.h)(I=>I.fromState!==I.toState),(0,Ke.R)(this._drawers.changes)).subscribe(I=>{"open-instant"!==I.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==y.mode&&y.openedChange.pipe((0,Ke.R)(this._drawers.changes)).subscribe(()=>this._setContainerClass(y.opened))}_watchDrawerPosition(y){!y||y.onPositionChanged.pipe((0,Ke.R)(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,qe.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(y){y&&y._modeChanged.pipe((0,Ke.R)((0,de.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(y){const I=this._element.nativeElement.classList,Z="mat-drawer-container-has-open";y?I.add(Z):I.remove(Z)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(y=>{"end"==y.position?this._end=y:this._start=y}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(y=>y&&!y.disableClose&&this._canHaveBackdrop(y)).forEach(y=>y._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(y){return"side"!==y.mode||!!this._backdropOverride}_isDrawerOpen(y){return null!=y&&y.opened}}return O.\u0275fac=function(y){return new(y||O)(p.Y36(Jt.Is,8),p.Y36(p.SBq),p.Y36(p.R0b),p.Y36(p.sBO),p.Y36(Gt.rL),p.Y36(kt),p.Y36(_e.Qb,8))},O.\u0275cmp=p.Xpm({type:O,selectors:[["mat-drawer-container"]],contentQueries:function(y,I,Z){if(1&y&&(p.Suo(Z,ci,5),p.Suo(Z,Ze,5)),2&y){let At;p.iGM(At=p.CRH())&&(I._content=At.first),p.iGM(At=p.CRH())&&(I._allDrawers=At)}},viewQuery:function(y,I){if(1&y&&p.Gf(ci,5),2&y){let Z;p.iGM(Z=p.CRH())&&(I._userContent=Z.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(y,I){2&y&&p.ekj("mat-drawer-container-explicit-backdrop",I._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[p._Bn([{provide:we,useExisting:O}])],ngContentSelectors:le,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(y,I){1&y&&(p.F$t(ze),p.YNc(0,Pt,1,2,"div",0),p.Hsn(1),p.Hsn(2,1),p.YNc(3,he,2,0,"mat-drawer-content",1)),2&y&&(p.Q6J("ngIf",I.hasBackdrop),p.xp6(3),p.Q6J("ngIf",!I._content))},directives:[_.O5,ci],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),O})(),Fi=(()=>{class O extends ci{constructor(y,I,Z,At,ke){super(y,I,Z,At,ke)}}return O.\u0275fac=function(y){return new(y||O)(p.Y36(p.sBO),p.Y36((0,p.Gpc)(()=>Ei)),p.Y36(p.SBq),p.Y36(Gt.mF),p.Y36(p.R0b))},O.\u0275cmp=p.Xpm({type:O,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(y,I){2&y&&p.Udp("margin-left",I._container._contentMargins.left,"px")("margin-right",I._container._contentMargins.right,"px")},features:[p.qOj],ngContentSelectors:Rt,decls:1,vars:0,template:function(y,I){1&y&&(p.F$t(),p.Hsn(0))},encapsulation:2,changeDetection:0}),O})(),ui=(()=>{class O extends Ze{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(y){this._fixedInViewport=(0,Ht.Ig)(y)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(y){this._fixedTopGap=(0,Ht.su)(y)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(y){this._fixedBottomGap=(0,Ht.su)(y)}}return O.\u0275fac=function(){let W;return function(I){return(W||(W=p.n5z(O)))(I||O)}}(),O.\u0275cmp=p.Xpm({type:O,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(y,I){2&y&&(p.uIk("align",null),p.Udp("top",I.fixedInViewport?I.fixedTopGap:null,"px")("bottom",I.fixedInViewport?I.fixedBottomGap:null,"px"),p.ekj("mat-drawer-end","end"===I.position)("mat-drawer-over","over"===I.mode)("mat-drawer-push","push"===I.mode)("mat-drawer-side","side"===I.mode)("mat-drawer-opened",I.opened)("mat-sidenav-fixed",I.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[p.qOj],ngContentSelectors:Rt,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(y,I){1&y&&(p.F$t(),p.TgZ(0,"div",0),p.Hsn(1),p.qZA())},directives:[Gt.PQ],encapsulation:2,data:{animation:[re.transformDrawer]},changeDetection:0}),O})(),Ei=(()=>{class O extends li{}return O.\u0275fac=function(){let W;return function(I){return(W||(W=p.n5z(O)))(I||O)}}(),O.\u0275cmp=p.Xpm({type:O,selectors:[["mat-sidenav-container"]],contentQueries:function(y,I,Z){if(1&y&&(p.Suo(Z,Fi,5),p.Suo(Z,ui,5)),2&y){let At;p.iGM(At=p.CRH())&&(I._content=At.first),p.iGM(At=p.CRH())&&(I._allDrawers=At)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(y,I){2&y&&p.ekj("mat-drawer-container-explicit-backdrop",I._backdropOverride)},exportAs:["matSidenavContainer"],features:[p._Bn([{provide:we,useExisting:O}]),p.qOj],ngContentSelectors:$t,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(y,I){1&y&&(p.F$t(ge),p.YNc(0,jt,1,2,"div",0),p.Hsn(1),p.Hsn(2,1),p.YNc(3,Yt,2,0,"mat-sidenav-content",1)),2&y&&(p.Q6J("ngIf",I.hasBackdrop),p.xp6(3),p.Q6J("ngIf",!I._content))},directives:[_.O5,Fi,Gt.PQ],styles:[".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n"],encapsulation:2,changeDetection:0}),O})(),gi=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[_.ez,bt.BQ,rt.ud,Gt.ZD],Gt.ZD,bt.BQ]}),O})();const We=["*",[["mat-toolbar-row"]]],ri=["*","mat-toolbar-row"],ue=(0,bt.pj)(class{constructor(O){this._elementRef=O}});let je=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275dir=p.lG2({type:O,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),O})(),ti=(()=>{class O extends ue{constructor(y,I,Z){super(y),this._platform=I,this._document=Z}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return O.\u0275fac=function(y){return new(y||O)(p.Y36(p.SBq),p.Y36(rt.t4),p.Y36(_.K0))},O.\u0275cmp=p.Xpm({type:O,selectors:[["mat-toolbar"]],contentQueries:function(y,I,Z){if(1&y&&p.Suo(Z,je,5),2&y){let At;p.iGM(At=p.CRH())&&(I._toolbarRows=At)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(y,I){2&y&&p.ekj("mat-toolbar-multiple-rows",I._toolbarRows.length>0)("mat-toolbar-single-row",0===I._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[p.qOj],ngContentSelectors:ri,decls:2,vars:0,template:function(y,I){1&y&&(p.F$t(We),p.Hsn(0),p.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),O})(),Pe=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[bt.BQ],bt.BQ]}),O})();f(20449);var Mt=f(4834);const ct=["*"],te=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],ve=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],$e=(0,bt.Id)((0,bt.Kr)(class{})),Me=(0,bt.Kr)(class{}),Te=new p.OlP("MatList"),Xe=new p.OlP("MatNavList");let pi=(()=>{class O extends $e{constructor(){super(...arguments),this._stateChanges=new tt.x}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return O.\u0275fac=function(){let W;return function(I){return(W||(W=p.n5z(O)))(I||O)}}(),O.\u0275cmp=p.Xpm({type:O,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[p._Bn([{provide:Xe,useExisting:O}]),p.qOj,p.TTD],ngContentSelectors:ct,decls:1,vars:0,template:function(y,I){1&y&&(p.F$t(),p.Hsn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),O})(),cn=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275dir=p.lG2({type:O,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),O})(),xn=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275dir=p.lG2({type:O,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),O})(),hr=(()=>{class O extends Me{constructor(y,I,Z,At){super(),this._element=y,this._isInteractiveList=!1,this._destroyed=new tt.x,this._disabled=!1,this._isInteractiveList=!!(Z||At&&"action-list"===At._getListType()),this._list=Z||At;const ke=this._getHostElement();"button"===ke.nodeName.toLowerCase()&&!ke.hasAttribute("type")&&ke.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe((0,Ke.R)(this._destroyed)).subscribe(()=>{I.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(y){this._disabled=(0,Ht.Ig)(y)}ngAfterContentInit(){(0,bt.E0)(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return O.\u0275fac=function(y){return new(y||O)(p.Y36(p.SBq),p.Y36(p.sBO),p.Y36(Xe,8),p.Y36(Te,8))},O.\u0275cmp=p.Xpm({type:O,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(y,I,Z){if(1&y&&(p.Suo(Z,cn,5),p.Suo(Z,xn,5),p.Suo(Z,bt.X2,5)),2&y){let At;p.iGM(At=p.CRH())&&(I._avatar=At.first),p.iGM(At=p.CRH())&&(I._icon=At.first),p.iGM(At=p.CRH())&&(I._lines=At)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(y,I){2&y&&p.ekj("mat-list-item-disabled",I.disabled)("mat-list-item-avatar",I._avatar||I._icon)("mat-list-item-with-avatar",I._avatar||I._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[p.qOj],ngContentSelectors:ve,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(y,I){1&y&&(p.F$t(te),p.TgZ(0,"div",0),p._UZ(1,"div",1),p.Hsn(2),p.TgZ(3,"div",2),p.Hsn(4,1),p.qZA(),p.Hsn(5,2),p.qZA()),2&y&&(p.xp6(1),p.Q6J("matRippleTrigger",I._getHostElement())("matRippleDisabled",I._isRippleDisabled()))},directives:[bt.wG],encapsulation:2,changeDetection:0}),O})(),Hi=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[bt.uc,bt.si,bt.BQ,bt.us,_.ez],bt.uc,bt.BQ,bt.us,Mt.t]}),O})();var dn=f(81125),Nn=f(92181);const Lo=function(O){return["/","automation","loadexample",O]};function Xr(O,W){if(1&O&&(p.TgZ(0,"a",22),p.TgZ(1,"mat-icon"),p._uU(2," https "),p.qZA(),p._uU(3),p.qZA()),2&O){const y=W.index,I=W.$implicit;p.Q6J("routerLink",p.VKq(3,Lo,I.id)),p.xp6(3),p.AsE(" ",y+1," ",I.description,"")}}function ho(O,W){if(1&O){const y=p.EpF();p.TgZ(0,"button",24),p.NdJ("click",function(){return p.CHM(y),p.oxw(),p.MAs(2).toggle()}),p.TgZ(1,"mat-icon",25),p._uU(2,"menu"),p.qZA(),p.qZA()}}function wo(O,W){if(1&O&&(p.TgZ(0,"span",26),p._uU(1),p.qZA()),2&O){const y=p.oxw();p.xp6(1),p.AsE(" ",y.version," => ",y.latestVersion," ")}}const Kn=function(){return["/","automation","studio"]},No=function(){return["/","automation","main"]};let $o=(()=>{class O{constructor(y,I,Z){this.breakpointObserver=y,this.details=I,this.ta=Z,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe(yt.u3.Handset).pipe((0,ut.U)(At=>At.matches||!0),function(O,W,y){let At,ke=!1;return At=1/0,(0,Lt.B)({connector:()=>new ot(At,W,y),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:ke})}()),this.version=dt.version,this.latestVersion="",this.title="Blockly Automation",this.footer="",this.standalone=!1}ngOnInit(){var y,I,Z,At,ke;this.latestVersion=null===(y=this.details.settings)||void 0===y?void 0:y.latestVersion,this.demoBlocks=this.details.demoBlocks.sort((di,Li)=>di.description.localeCompare(Li.description)),this.title=(null===(Z=null===(I=this.details)||void 0===I?void 0:I.settings)||void 0===Z?void 0:Z.title)||"Blockly Automation",this.footer=(null===(ke=null===(At=this.details)||void 0===At?void 0:At.settings)||void 0===ke?void 0:ke.footer)||"",(navigator.standalone||window.matchMedia("(display-mode: standalone)").matches)&&(this.standalone=!0)}executeOnDisplayBlockly(y){this.ta.sendDataToServer("DisplayBlocklyComponent",y)}}return O.\u0275fac=function(y){return new(y||O)(p.Y36(yt.Yg),p.Y36(xt.d),p.Y36(it.v))},O.\u0275cmp=p.Xpm({type:O,selectors:[["app-primary-navig"]],decls:80,vars:27,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["mat-mini-fab","","color","primary",3,"click"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","",4,"ngIf"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLocalAPI.zip/","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],["mat-list-item","","target","_blank",3,"routerLink"],[1,"main-content"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-list-item",""]],template:function(y,I){if(1&y&&(p.TgZ(0,"mat-sidenav-container",0),p.TgZ(1,"mat-sidenav",1,2),p.ALo(3,"async"),p.ALo(4,"async"),p.ALo(5,"async"),p.TgZ(6,"mat-toolbar"),p.TgZ(7,"a",3),p._uU(8,"Menu"),p.qZA(),p.qZA(),p.TgZ(9,"mat-nav-list"),p.TgZ(10,"a",4),p.TgZ(11,"mat-icon"),p._uU(12," source "),p.qZA(),p._uU(13," Github"),p.qZA(),p._UZ(14,"mat-divider"),p.TgZ(15,"a",5),p.TgZ(16,"mat-icon"),p._uU(17," https "),p.qZA(),p._uU(18," Demo online"),p.qZA(),p._UZ(19,"mat-divider"),p.TgZ(20,"mat-expansion-panel"),p.TgZ(21,"mat-expansion-panel-header"),p.TgZ(22,"mat-panel-title"),p._uU(23),p.qZA(),p.qZA(),p.YNc(24,Xr,4,5,"a",6),p.qZA(),p.qZA(),p.qZA(),p.TgZ(25,"mat-sidenav-content"),p.TgZ(26,"mat-toolbar",7),p.YNc(27,ho,3,0,"button",8),p.ALo(28,"async"),p.TgZ(29,"span",9),p._uU(30),p.qZA(),p._UZ(31,"span",10),p.TgZ(32,"button",11),p.NdJ("click",function(){return I.executeOnDisplayBlockly("createIntro")}),p.TgZ(33,"mat-icon"),p._uU(34," help_outline "),p.qZA(),p.qZA(),p.TgZ(35,"button",12),p.TgZ(36,"mat-icon"),p._uU(37," file_download "),p.qZA(),p.qZA(),p.TgZ(38,"mat-menu",null,13),p.YNc(40,wo,2,2,"span",14),p.TgZ(41,"a",15),p._uU(42," Download HTML"),p.qZA(),p.TgZ(43,"a",16),p._uU(44," Download Linux"),p.qZA(),p.TgZ(45,"a",17),p._uU(46," Download Windows"),p.qZA(),p.TgZ(47,"a",18),p._uU(48," Download IIS"),p.qZA(),p.TgZ(49,"a",19),p._uU(50," Download LocalAPI"),p.qZA(),p.qZA(),p.TgZ(51,"button",20),p.TgZ(52,"mat-icon"),p._uU(53," source "),p.qZA(),p.qZA(),p.TgZ(54,"mat-menu",null,21),p.TgZ(56,"a",22),p.TgZ(57,"mat-icon"),p._uU(58," star "),p.qZA(),p._uU(59,"Studio "),p.qZA(),p.TgZ(60,"a",22),p.TgZ(61,"mat-icon"),p._uU(62," star_half "),p.qZA(),p._uU(63,"Single "),p.qZA(),p.TgZ(64,"a",4),p.TgZ(65,"mat-icon"),p._uU(66," source "),p.qZA(),p._uU(67," Github"),p.qZA(),p._UZ(68,"mat-divider"),p.TgZ(69,"a",5),p.TgZ(70,"mat-icon"),p._uU(71," https "),p.qZA(),p._uU(72," Demo online"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(73,"div",23),p._UZ(74,"router-outlet"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(75,"footer"),p.TgZ(76,"small"),p._uU(77),p.qZA(),p.TgZ(78,"small"),p._uU(79),p.qZA(),p.qZA()),2&y){const Z=p.MAs(39),At=p.MAs(55);p.xp6(1),p.Q6J("mode",p.lcZ(4,19,I.isHandset$)?"over":"side")("opened",!1===p.lcZ(5,21,I.isHandset$)),p.uIk("role",p.lcZ(3,17,I.isHandset$)?"dialog":"navigation"),p.xp6(22),p.hij(" Demos ",I.demoBlocks.length," "),p.xp6(1),p.Q6J("ngForOf",I.demoBlocks),p.xp6(3),p.Q6J("ngIf",p.lcZ(28,23,I.isHandset$)),p.xp6(2),p.s9C("title",I.version),p.xp6(1),p.Oqu(I.title),p.xp6(5),p.Q6J("matMenuTriggerFor",Z),p.xp6(5),p.Q6J("ngIf",I.version!=I.latestVersion),p.xp6(11),p.Q6J("matMenuTriggerFor",At),p.xp6(5),p.Q6J("routerLink",p.DdM(25,Kn)),p.xp6(4),p.Q6J("routerLink",p.DdM(26,No)),p.xp6(17),p.Oqu(I.footer),p.xp6(2),p.lnq("",I.standalone?"standalone":"browser"," ",I.version," -> ",I.latestVersion,"")}},directives:[Ei,ui,ti,hr,t.yS,pi,s.Hw,Mt.d,dn.ib,dn.yz,dn.yK,_.sg,Fi,_.O5,o.lW,Nn.p6,Nn.VK,t.lC],pipes:[_.Ov],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),O})(),pn=(()=>{class O{constructor(y,I){var Z,At;this.titleService=y,this.title="AutoBlocklyApp",console.log(null===(Z=I.settings)||void 0===Z?void 0:Z.title),this.titleService.setTitle((null===(At=I.settings)||void 0===At?void 0:At.title)||"")}}return O.\u0275fac=function(y){return new(y||O)(p.Y36(b.Dx),p.Y36(xt.d))},O.\u0275cmp=p.Xpm({type:O,selectors:[["app-root"]],decls:1,vars:0,template:function(y,I){1&y&&p._UZ(0,"app-primary-navig")},directives:[$o],styles:[""]}),O})();var jo=f(40520),rr=f(91079);let Zo=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[Xt.rt,bt.BQ],bt.BQ]}),O})();var Hn=f(91314),vn=f(99129);let yn=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[Hn.U8,bt.BQ,vn.eL],bt.BQ]}),O})(),Dr=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[bt.BQ,bt.si],bt.BQ]}),O})(),hs=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[bt.BQ],bt.BQ]}),O})();var go=f(17144);let St=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({}),O})(),Ee=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[bt.si,bt.BQ,go.Q8,St],bt.BQ,St]}),O})();var ei=f(67322);const tr=new p.OlP("mat-chips-default-options");let F=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({providers:[bt.rD,{provide:tr,useValue:{separatorKeyCodes:[ce.K5]}}],imports:[[bt.BQ]]}),O})(),tn=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[Jt.vT]]}),O})(),Er=(()=>{class O{constructor(){this.changes=new tt.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return O.\u0275fac=function(y){return new(y||O)},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const es={provide:Er,deps:[[new p.FiY,new p.tp0,Er]],useFactory:function(O){return O||new Er}};let Il=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({providers:[es,bt.rD],imports:[[bt.BQ,_.ez,vn.eL,o.ot,tn,s.Ps,bt.si],bt.BQ]}),O})();f(50727);var Xa=f(77531);let Qa=(()=>{class O{constructor(){this.changes=new tt.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(y,I){return`${y} \u2013 ${I}`}}return O.\u0275fac=function(y){return new(y||O)},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const Xc={provide:new p.OlP("mat-datepicker-scroll-strategy"),deps:[Hn.aV],useFactory:function(O){return()=>O.scrollStrategies.reposition()}};let ac=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({providers:[Qa,Xc],imports:[[_.ez,o.ot,Hn.U8,Xt.rt,vn.eL,bt.BQ],Gt.ZD]}),O})();var vc=f(48966),os=f(43954);const Qc={provide:new p.OlP("mat-select-scroll-strategy"),deps:[Hn.aV],useFactory:function(O){return()=>O.scrollStrategies.reposition()}};let Cc=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({providers:[Qc],imports:[[_.ez,Hn.U8,bt.Ng,bt.BQ],Gt.ZD,ei.lN,bt.Ng,bt.BQ]}),O})();const wc={provide:new p.OlP("mat-tooltip-scroll-strategy"),deps:[Hn.aV],useFactory:function(O){return()=>O.scrollStrategies.reposition({scrollThrottle:20})}};let il=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({providers:[wc],imports:[[Xt.rt,_.ez,Hn.U8,bt.BQ],bt.BQ,Gt.ZD]}),O})(),Aa=(()=>{class O{constructor(){this.changes=new tt.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(y,I,Z)=>{if(0==Z||0==I)return`0 of ${Z}`;const At=y*I;return`${At+1} \u2013 ${At<(Z=Math.max(Z,0))?Math.min(At+I,Z):At+I} of ${Z}`}}}return O.\u0275fac=function(y){return new(y||O)},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const tu={provide:Aa,deps:[[new p.FiY,new p.tp0,Aa]],useFactory:function(O){return O||new Aa}};let Kt=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({providers:[tu],imports:[[_.ez,o.ot,Cc,il,bt.BQ]]}),O})(),bn=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[_.ez,bt.BQ],bt.BQ]}),O})();var ln=f(20773);let hc=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[bt.si,bt.BQ],bt.BQ]}),O})(),sh=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[_.ez,bt.BQ],bt.BQ]}),O})(),rl=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({}),O})(),ch=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[rl,bt.si,bt.BQ,go.Q8],rl,bt.BQ]}),O})();var Es=f(57261);let xc=(()=>{class O{constructor(){this.changes=new tt.x}}return O.\u0275fac=function(y){return new(y||O)},O.\u0275prov=p.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();const dh={provide:xc,deps:[[new p.FiY,new p.tp0,xc]],useFactory:function(O){return O||new xc}};let Vh=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({providers:[dh],imports:[[_.ez,bt.BQ]]}),O})();f(32076),f(61135),f(79307),f(30576),f(39646);let Ai=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[Gt.Cl]]}),O})(),Xh=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[Ai,bt.BQ],bt.BQ]}),O})(),gu=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({}),O})(),md=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O}),O.\u0275inj=p.cJS({imports:[[gu,bt.BQ],bt.BQ]}),O})();var _d=f(8704);let vd=(()=>{class O{}return O.\u0275fac=function(y){return new(y||O)},O.\u0275mod=p.oAB({type:O,bootstrap:[pn]}),O.\u0275inj=p.cJS({providers:[xt.d,it.v,{provide:p.ip1,useFactory:Qd,deps:[xt.d],multi:!0}],imports:[[b.b2,Ct,e.u5,e.UX,_e.PW,sh,o.ot,jo.JF,rr.Bb,Zo,yn,o.ot,Dr,hs,Ee,F,Il,ac,vc.Is,Mt.t,dn.To,os.N6,s.Ps,Xa.c,Hi,Nn.Tx,bt.XK,Kt,bn,ln.Cq,hc,bt.si,Cc,gi,sh,ch,Es.ZX,Vh,Xh,c.Nh,Pe,il,md,Pe,o.ot,gi,s.Ps,Hi,_d.nm.forRoot()]]}),O})();function Qd(O){return()=>O.Init()}(0,p.G48)(),b.q6().bootstrapModule(vd).catch(O=>console.error(O))},86931:function(k,B,f){var p,e;p=[f(81069)],void 0!==(e=function(t){"use strict";return t}.apply(B,p))&&(k.exports=e)},81069:function(k,B){var p;void 0!==(p=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(t=Number(o[1]),n=Number(o[2]),o=Number(o[3]),0<=t&&256>t&&0<=n&&256>n&&0<=o&&256>o)?e.utils.colour.rgbToHex(t,n,o):null},e.utils.colour.rgbToHex=function(t,n,o){return n=t<<16|n<<8|o,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,o){var s=0,c=0,_=0;if(0==n)_=c=s=o;else{var w=Math.floor(t/60),M=t/60-w;t=o*(1-n);var U=o*(1-n*M);switch(n=o*(1-n*(1-M)),w){case 1:s=U,c=o,_=t;break;case 2:s=t,c=o,_=n;break;case 3:s=t,c=U,_=o;break;case 4:s=n,c=t,_=o;break;case 5:s=o,c=t,_=U;break;case 6:case 0:s=o,c=n,_=t}}return e.utils.colour.rgbToHex(Math.floor(s),Math.floor(c),Math.floor(_))},e.utils.colour.blend=function(t,n,o){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+o*(t[0]-n[0])),Math.round(n[1]+o*(t[1]-n[1])),Math.round(n[2]+o*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var o=t.x-n.x;return t=t.y-n.y,Math.sqrt(o*o+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,o,s){this.top=t,this.bottom=n,this.left=o,this.right=s},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,o){return n.length<o.length?n:o}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0][s],_=1;_<t.length;_++)if(c!=t[_][s])return o;" "==c&&(o=s+1)}for(_=1;_<t.length;_++)if((c=t[_][s])&&" "!=c)return o;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0].substr(-s-1,1),_=1;_<t.length;_++)if(c!=t[_].substr(-s-1,1))return o;" "==c&&(o=s+1)}for(_=1;_<t.length;_++)if((c=t[_].charAt(t[_].length-s-1))&&" "!=c)return o;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var o=0;o<t.length;o++)t[o]=e.utils.string.wrapLine_(t[o],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var o=t.trim().split(/\s+/),s=0;s<o.length;s++)o[s].length>n&&(n=o[s].length);s=-1/0;var c=1;do{var _=s,w=t;t=[];var M=o.length/c,U=1;for(s=0;s<o.length-1;s++)U<(s+1.5)/M?(U++,t[s]=!0):t[s]=!1;t=e.utils.string.wrapMutate_(o,t,n),s=e.utils.string.wrapScore_(o,t,n),t=e.utils.string.wrapToText_(o,t),c++}while(s>_);return w},e.utils.string.wrapScore_=function(t,n,o){for(var s=[0],c=[],_=0;_<t.length;_++)s[s.length-1]+=t[_].length,!0===n[_]?(s.push(0),c.push(t[_].charAt(t[_].length-1))):!1===n[_]&&s[s.length-1]++;for(t=Math.max.apply(Math,s),_=n=0;_<s.length;_++)n-=2*Math.pow(Math.abs(o-s[_]),1.5),n-=Math.pow(t-s[_],1.5),-1!=".?!".indexOf(c[_])?n+=o/3:-1!=",;)]}".indexOf(c[_])&&(n+=o/4);return 1<s.length&&s[s.length-1]<=s[s.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,o){for(var c,s=e.utils.string.wrapScore_(t,n,o),_=0;_<n.length-1;_++)if(n[_]!=n[_+1]){var w=[].concat(n);w[_]=!w[_],w[_+1]=!w[_+1];var M=e.utils.string.wrapScore_(t,w,o);M>s&&(s=M,c=w)}return c?e.utils.string.wrapMutate_(t,c,o):n},e.utils.string.wrapToText_=function(t,n){for(var o=[],s=0;s<t.length;s++)o.push(t[s]),void 0!==n[s]&&o.push(n[s]?"\n":" ");return o.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,o=n.display,s=n.visibility,c=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var _=t.offsetWidth;return t=t.offsetHeight,n.display=o,n.position=c,n.visibility=s,new e.utils.Size(_,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var o=document.documentElement;return o=new e.utils.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=t.left+o.x,n.y=t.top+o.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),o=e.utils.style.getComputedStyle(t,"borderRightWidth"),s=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(s),right:parseFloat(o),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,o){t=e.utils.style.getContainerOffsetToScrollInto(t,n,o),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,o){var s=e.utils.style.getPageOffset(t),c=e.utils.style.getPageOffset(n),_=e.utils.style.getBorderBox(n),w=s.x-c.x-_.left;return s=s.y-c.y-_.top,c=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-c.width,c=n.clientHeight-c.height,_=n.scrollLeft,n=n.scrollTop,o?(_+=w-t/2,n+=s-c/2):(_+=Math.min(w,Math.max(w-t,0)),n+=Math.min(s,Math.max(s-c,0))),new e.utils.Coordinate(_,n)},e.utils.userAgent={},function(t){function n(s){return-1!=o.indexOf(s.toUpperCase())}e.utils.userAgent.raw=t;var o=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),o=t.getAttribute("x");return o&&(n.x=parseInt(o,10)),(o=t.getAttribute("y"))&&(n.y=parseInt(o,10)),(o=(o=t.getAttribute("transform"))&&o.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,o=0;t;){var s=e.utils.getRelativeXY(t);if(n+=s.x,o+=s.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,o)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,o){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,o||(o=n.getScreenCTM().inverse()),s.matrixTransform(o)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,o=e.Msg,s=t.match(/%{BKY_[A-Z]\w*}/gi),c=0;c<s.length;c++)null==o[s[c].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+s[c]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var o=[],s=t.split("");s.push("");var c=0;t=[];for(var _=null,w=0;w<s.length;w++){var M=s[w];0==c?"%"==M?((M=t.join(""))&&o.push(M),t.length=0,c=1):t.push(M):1==c?"%"==M?(t.push(M),c=0):n&&"0"<=M&&"9">=M?(c=2,_=M,(M=t.join(""))&&o.push(M),t.length=0):"{"==M?c=3:(t.push("%",M),c=0):2==c?"0"<=M&&"9">=M?_+=M:(o.push(parseInt(_,10)),w--,c=0):3==c&&(""==M?(t.splice(0,0,"%{"),w--,c=0):"}"!=M?t.push(M):(c=t.join(""),/[A-Z]\w*/i.test(c)?(M=c.toUpperCase(),(M=e.utils.string.startsWith(M,"BKY_")?M.substring(4):null)&&M in e.Msg?"string"==typeof(c=e.Msg[M])?Array.prototype.push.apply(o,e.utils.tokenizeInterpolation_(c,n)):o.push(n?String(c):c):o.push("%{"+c+"}")):o.push("%{"+c+"}"),c=t.length=0))}for((M=t.join(""))&&o.push(M),n=[],w=t.length=0;w<o.length;++w)"string"==typeof o[w]?t.push(o[w]):((M=t.join(""))&&n.push(M),t.length=0,n.push(o[w]));return(M=t.join(""))&&n.push(M),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],o=0;20>o;o++)n[o]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(t,null),o)if(void 0!==t.style[s]){if(t.style[s]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(o[s])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var o=Object.create(null),s=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=s.indexOf(t),s.splice(t,s.length-t)),t=0;n=s[t];t++)o[n.type]?o[n.type]++:o[n.type]=1;return o},e.utils.screenToWsCoordinates=function(t,n){var o=n.x;n=n.y;var s=t.getInjectionDiv().getBoundingClientRect();return o=new e.utils.Coordinate(o-s.left,n-s.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(o,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,o=Number(n);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:e.utils.colour.hsvToHex(o,e.HSV_SATURATION,255*e.HSV_VALUE)};if(o=e.utils.colour.parse(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',t!=n&&(o+=' (from "'+t+'")'),Error(o)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var o=0;o<t.changedTouches.length;o++)n[o]={type:t.type,changedTouches:[t.changedTouches[o]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,o,s,c,_){var w=!1,M=function(pt){var nt=!c;pt=e.Touch.splitEventByTouches(pt);for(var Ct,st=0;Ct=pt[st];st++)(!nt||e.Touch.shouldHandleEvent(Ct))&&(e.Touch.setClientFromTouch(Ct),o?s.call(o,Ct):s(Ct),w=!0)},U=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var H,V=0;H=e.Touch.TOUCH_MAP[n][V];V++)t.addEventListener(H,M,!1),U.push([t,H,M]);else if(t.addEventListener(n,M,!1),U.push([t,n,M]),n in e.Touch.TOUCH_MAP){var $=function(pt){M(pt),w&&!_&&pt.preventDefault()};for(V=0;H=e.Touch.TOUCH_MAP[n][V];V++)t.addEventListener(H,$,!1),U.push([t,H,$])}return U},e.browserEvents.bind=function(t,n,o,s){var c=function(V){o?s.call(o,V):s(V)},_=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var M,w=0;M=e.Touch.TOUCH_MAP[n][w];w++)t.addEventListener(M,c,!1),_.push([t,M,c]);else if(t.addEventListener(n,c,!1),_.push([t,n,c]),n in e.Touch.TOUCH_MAP){var U=function(V){if(V.changedTouches&&1==V.changedTouches.length){var H=V.changedTouches[0];V.clientX=H.clientX,V.clientY=H.clientY}c(V),V.preventDefault()};for(w=0;M=e.Touch.TOUCH_MAP[n][w];w++)t.addEventListener(M,U,!1),_.push([t,M,U])}return _},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),o=n[2];n[0].removeEventListener(n[1],o,!1)}return o},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var o=t.component.id;if(!n&&this.componentData_[o])throw Error('Plugin "'+o+'" with capabilities "'+this.componentData_[o].capabilities+'" already added.');this.componentData_[o]=t,n=[];for(var s=0;s<t.capabilities.length;s++){var c=String(t.capabilities[s]).toLowerCase();n.push(c),void 0===this.capabilityToComponentIds_[c]?this.capabilityToComponentIds_[c]=[o]:this.capabilityToComponentIds_[c].push(o)}this.componentData_[o].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var o=0;o<n.capabilities.length;o++){var s=String(n.capabilities[o]).toLowerCase();this.capabilityToComponentIds_[s].splice(this.capabilityToComponentIds_[s].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var o=[];if(n){var s=[],c=this.componentData_;t.forEach(function(_){s.push(c[_])}),s.sort(function(_,w){return _.weight-w.weight}),s.forEach(function(_){o.push(_.component)})}else c=this.componentData_,t.forEach(function(_){o.push(c[_].component)});return o},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,o){for(var s in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(s,n[s]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),o&&o.appendChild(t),t},e.utils.dom.addClass=function(t,n){var o=t.getAttribute("class")||"";return-1==(" "+o+" ").indexOf(" "+n+" ")&&(o&&(o+=" "),t.setAttribute("class",o+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var o=0;o<n.length;o++)e.utils.dom.removeClass(t,n[o])},e.utils.dom.removeClass=function(t,n){var o=t.getAttribute("class");if(-1==(" "+o+" ").indexOf(" "+n+" "))return!1;o=o.split(/\s+/);for(var s=0;s<o.length;s++)o[s]&&o[s]!=n||(o.splice(s,1),s--);return o.length?t.setAttribute("class",o.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var o=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");o?n.insertBefore(t,o):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var o,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(o=e.utils.dom.cacheWidths_[n]))return o;try{o=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(s){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=o),o},e.utils.dom.getFastTextWidth=function(t,n,o,s){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",o,s)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,o,s){var _,c=t.textContent;return t=c+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(_=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((_=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(_),e.utils.dom.canvasContext_=_.getContext("2d")),e.utils.dom.canvasContext_.font=o+" "+n+" "+s,_=e.utils.dom.canvasContext_.measureText(c).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=_)),_},e.utils.dom.measureFontMetrics=function(t,n,o,s){var c=document.createElement("span");c.style.font=o+" "+n+" "+s,c.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(c),n.appendChild(t),document.body.appendChild(n);try{o={},n.style.alignItems="baseline",o.baseline=t.offsetTop-c.offsetTop,n.style.alignItems="flex-end",o.height=t.offsetTop-c.offsetTop}finally{document.body.removeChild(n)}return o},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,o){if(o<t){var s=o;o=t,t=s}return Math.max(t,Math.min(n,o))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,o,s){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,o,s)},e.DropDownDiv.showPositionedByField=function(t,n,o){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,o)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),o=n.getBBox(),s=t.workspace.scale;return t=o.height*s,o=o.width*s,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+o)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,o,s){var c=t.left+(t.right-t.left)/2,_=t.bottom;t=t.top,s&&(t+=s);for(var w=(s=n.getSourceBlock()).workspace;w.options.parentWorkspace;)w=w.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(w.getParentSvg().parentNode),e.DropDownDiv.show(n,s.RTL,c,_,c,t,o)},e.DropDownDiv.show=function(t,n,o,s,c,_,w){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=w||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(o,s,c,_)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,o,s){var c=e.DropDownDiv.getBoundsInfo_(),_=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+_.height<c.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,_):s-_.height>c.top?e.DropDownDiv.getPositionAboveMetrics_(o,s,c,_):n+_.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,_):s-_.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(o,s,c,_):e.DropDownDiv.getPositionTopOfPageMetrics_(t,c,_)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,o,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,s.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,o,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,s.width)).divX,initialY:n-s.height,finalX:t.divX,finalY:n-s.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:s.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,o){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,o.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,o,s){var c=t;return t=e.utils.math.clamp(n,t-s/2,o-s),{arrowX:s=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(c-=e.DropDownDiv.ARROW_SIZE/2)-t,s-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,o,s){(t=e.DropDownDiv.getPositionMetrics_(t,n,o,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),o=Math.floor(t.initialY),s=Math.floor(t.finalX);var c=Math.floor(t.finalY),_=e.DropDownDiv.DIV_;return _.style.left=n+"px",_.style.top=o+"px",_.style.display="block",_.style.opacity=1,_.style.transform="translate("+(s-n)+"px,"+(c-o)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,o,s){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!o)throw Error("Can not register a null value");var c=e.registry.typeMap_[t];if(c||(c=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,o),!s&&c[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');c[n]=o},e.registry.validate_=function(t,n){if(t===String(e.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var o=e.registry.typeMap_[t];o&&o[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,o){t=String(t).toLowerCase(),n=n.toLowerCase();var s=e.registry.typeMap_[t];if(!s||!s[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",o)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return s[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getObject=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getClassFromOptions=function(t,n,o){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,o)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var o,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;o=t[n];n++)if(o.workspaceId){var s=e.Workspace.getById(o.workspaceId);s&&s.fireChangeListener(o)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var _,o=[],s=Object.create(null),c=0;_=t[c];c++)if(!_.isNull()){var w=[_.isUiEvent?e.Events.UI:_.type,_.blockId,_.workspaceId].join(" "),M=s[w],U=M?M.event:null;M?_.type==e.Events.MOVE&&M.index==c-1?(U.newParentId=_.newParentId,U.newInputName=_.newInputName,U.newCoordinate=_.newCoordinate,M.index=c):_.type==e.Events.CHANGE&&_.element==U.element&&_.name==U.name?U.newValue=_.newValue:_.type==e.Events.VIEWPORT_CHANGE?(U.viewTop=_.viewTop,U.viewLeft=_.viewLeft,U.scale=_.scale,U.oldScale=_.oldScale):(_.type!=e.Events.CLICK||U.type!=e.Events.BUBBLE_OPEN)&&(s[w]={event:_,index:c},o.push(_)):(s[w]={event:_,index:c},o.push(_))}for(t=o.filter(function(V){return!V.isNull()}),n||t.reverse(),c=1;_=t[c];c++)_.type==e.Events.CHANGE&&"mutation"==_.element&&t.unshift(t.splice(c,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var s,o=0;s=t[o];o++)n[o]=s.id;return n},e.Events.fromJson=function(t,n){var o=e.Events.get(t.type);if(!o)throw Error("Unknown event type.");return(o=new o).fromJson(t),o.workspaceId=n.id,o},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),o=n.getBlockById(t.blockId);if(o){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var s=o.getParent();if(s&&s.isEnabled()){var _,c=o.getDescendants(!1);for(n=0;_=c[n];n++)_.setEnabled(!0)}else if((o.outputConnection||o.previousConnection)&&!n.isDragging())do{o.setEnabled(!1),o=o.getNextBlock()}while(o)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var o in n)t[o]=n[o]},e.utils.object.deepMerge=function(t,n){for(var o in n)t[o]=null!=n[o]&&"object"==typeof n[o]?e.utils.object.deepMerge(t[o]||Object.create(null),n[o]):n[o];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var o=e.utils.xml.createElement("xml"),s=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));s.hasChildNodes()&&o.appendChild(s);var _,c=t.getTopComments(!0);for(s=0;_=c[s];s++)o.appendChild(_.toXmlWithXY(n));for(t=t.getTopBlocks(!0),s=0;c=t[s];s++)o.appendChild(e.Xml.blockToDomWithXY(c,n));return o},e.Xml.variablesToDom=function(t){for(var s,n=e.utils.xml.createElement("variables"),o=0;s=t[o];o++){var c=e.utils.xml.createElement("variable");c.appendChild(e.utils.xml.createTextNode(s.name)),s.type&&c.setAttribute("type",s.type),c.id=s.getId(),n.appendChild(c)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var o;t.workspace.RTL&&(o=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var s=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?o-s.x:s.x)),n.setAttribute("y",Math.round(s.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var s,o=0;s=t.inputList[o];o++)for(var _,c=0;_=s.fieldRow[c];c++)(_=e.Xml.fieldToDom_(_))&&n.appendChild(_)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var o=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(o.setAttribute("type",t.type),n||o.setAttribute("id",t.id),t.mutationToDom){var s=t.mutationToDom();s&&(s.hasChildNodes()||s.hasAttributes())&&o.appendChild(s)}if(e.Xml.allFieldsToDom_(t,o),s=t.getCommentText()){var c=t.commentModel.size,_=t.commentModel.pinned,w=e.utils.xml.createElement("comment");w.appendChild(e.utils.xml.createTextNode(s)),w.setAttribute("pinned",_),w.setAttribute("h",c.height),w.setAttribute("w",c.width),o.appendChild(w)}for(t.data&&((s=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),o.appendChild(s)),s=0;c=t.inputList[s];s++){var M;if(_=!0,c.type!=e.inputTypes.DUMMY){var U=c.connection.targetBlock();c.type==e.inputTypes.VALUE?M=e.utils.xml.createElement("value"):c.type==e.inputTypes.STATEMENT&&(M=e.utils.xml.createElement("statement")),!(w=c.connection.getShadowDom())||U&&U.isShadow()||M.appendChild(e.Xml.cloneShadow_(w,n)),U&&(w=e.Xml.blockToDom(U,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(M.appendChild(w),_=!1),M.setAttribute("name",c.name),_||o.appendChild(M)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&o.setAttribute("inline",t.inputsInline),t.isCollapsed()&&o.setAttribute("collapsed",!0),t.isEnabled()||o.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||o.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||o.setAttribute("movable",!1),t.isEditable()||o.setAttribute("editable",!1),(s=t.getNextBlock())&&(w=e.Xml.blockToDom(s,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((M=e.utils.xml.createElement("next")).appendChild(w),o.appendChild(M)),!(w=t.nextConnection&&t.nextConnection.getShadowDom())||s&&s.isShadow()||M.appendChild(e.Xml.cloneShadow_(w,n)),o},e.Xml.cloneShadow_=function(t,n){for(var s,o=t=t.cloneNode(!0);o;)if(n&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)s=o,o=o.parentNode,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&o.firstChild!=s&&e.utils.dom.removeNode(s);o&&(s=o,o=o.nextSibling,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&e.utils.dom.removeNode(s))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",o=1;o<t.length;o++){var s=t[o];"/"==s[0]&&(n=n.substring(2)),t[o]=n+"<"+s,"/"!=s[0]&&"/>"!=s.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var s;n.RTL&&(s=n.getWidth()),o=[],e.utils.dom.startTextWidthCache();var c=e.Events.getGroup();c||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var _=!0;try{for(var M,w=0;M=t.childNodes[w];w++){var U=M.nodeName.toLowerCase(),V=M;if("block"==U||"shadow"==U&&!e.Events.recordUndo){var H=e.Xml.domToBlock(V,n);o.push(H.id);var $=V.hasAttribute("x")?parseInt(V.getAttribute("x"),10):10,pt=V.hasAttribute("y")?parseInt(V.getAttribute("y"),10):10;isNaN($)||isNaN(pt)||H.moveBy(n.RTL?s-$:$,pt),_=!1}else{if("shadow"==U)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==U)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(V,n,s):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(V,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==U){if(!_)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(V,n),_=!1}}}}finally{c||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),o},e.Xml.appendDomToWorkspace=function(t,n){var o;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(o=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),o&&o.top!=o.bottom){var s=o.bottom,c=n.RTL?o.right:o.left,_=1/0,w=-1/0,M=1/0;for(o=0;o<t.length;o++){var U=n.getBlockById(t[o]).getRelativeToSurfaceXY();U.y<M&&(M=U.y),U.x<_&&(_=U.x),U.x>w&&(w=U.x)}for(s=s-M+10,c=n.RTL?c-w:c-_,o=0;o<t.length;o++)n.getBlockById(t[o]).moveBy(c,s)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),o=n.getAllVariables();try{var s=e.Xml.domToBlockHeadless_(t,n),c=s.getDescendants(!1);if(n.rendered){s.setConnectionTracking(!1);for(var _=c.length-1;0<=_;_--)c[_].initSvg();for(_=c.length-1;0<=_;_--)c[_].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),n.resizeContents()}else for(_=c.length-1;0<=_;_--)c[_].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,o),_=0;_<t.length;_++)n=t[_],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(s))}return s},e.Xml.domToVariables=function(t,n){for(var s,o=0;s=t.childNodes[o];o++)if(s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var c=s.getAttribute("type"),_=s.getAttribute("id");n.createVariable(s.textContent,c,_)}},e.Xml.mapSupportedXmlTags_=function(t){for(var s,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},o=0;s=t.childNodes[o];o++)if(s.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(s.nodeName.toLowerCase()){case"mutation":n.mutation.push(s);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(s);break;case"data":n.data.push(s);break;case"title":case"field":n.field.push(s);break;case"value":case"statement":n.input.push(s);break;case"next":n.next.push(s);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var c,o=!1,s=0;c=t[s];s++)n.domToMutation&&(n.domToMutation(c),n.initSvg&&(o=!0));return o},e.Xml.applyCommentTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++){var c=s.textContent,_="true"==s.getAttribute("pinned"),w=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),n.setCommentText(c),n.commentModel.pinned=_,isNaN(w)||isNaN(s)||(n.commentModel.size=new e.utils.Size(w,s)),_&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++)n.data=s.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++){var c=s.getAttribute("name");e.Xml.domToField_(n,c,s)}},e.Xml.findChildBlocks_=function(t){for(var s,n={childBlockElement:null,childShadowElement:null},o=0;s=t.childNodes[o];o++)s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==s.nodeName.toLowerCase()?n.childBlockElement=s:"shadow"==s.nodeName.toLowerCase()&&(n.childShadowElement=s));return n},e.Xml.applyInputTagNodes_=function(t,n,o,s){for(var _,c=0;_=t[c];c++){var w=_.getAttribute("name"),M=o.getInput(w);if(!M){console.warn("Ignoring non-existent input "+w+" in block "+s);break}if((_=e.Xml.findChildBlocks_(_)).childBlockElement){if(!M.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(_.childBlockElement,n,M.connection,!1)}_.childShadowElement&&M.connection.setShadowDom(_.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,o){for(var c,s=0;c=t[s];s++){if((c=e.Xml.findChildBlocks_(c)).childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(c.childBlockElement,n,o.nextConnection,!0)}c.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(c.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,o,s){var c=t.getAttribute("type");if(!c)throw TypeError("Block type unspecified: "+t.outerHTML);var _=t.getAttribute("id");_=n.newBlock(c,_);var w=e.Xml.mapSupportedXmlTags_(t),M=e.Xml.applyMutationTagNodes_(w.mutation,_);if(e.Xml.applyCommentTagNodes_(w.comment,_),e.Xml.applyDataTagNodes_(w.data,_),o)if(s){if(!_.previousConnection)throw TypeError("Next block does not have previous statement.");o.connect(_.previousConnection)}else if(_.outputConnection)o.connect(_.outputConnection);else{if(!_.previousConnection)throw TypeError("Child block does not have output or previous statement.");o.connect(_.previousConnection)}if(e.Xml.applyFieldTagNodes_(w.field,_),e.Xml.applyInputTagNodes_(w.input,n,_,c),e.Xml.applyNextTagNodes_(w.next,n,_),M&&_.initSvg(),(n=t.getAttribute("inline"))&&_.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&_.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&_.setDeletable("true"==n),(n=t.getAttribute("movable"))&&_.setMovable("true"==n),(n=t.getAttribute("editable"))&&_.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&_.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=_.getChildren(!1),n=0;o=t[n];n++)if(!o.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(_.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");_.setShadow(!0)}return _},e.Xml.domToField_=function(t,n,o){var s=t.getField(n);s?s.fromXml(o):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var o,n=0;o=t.childNodes[n];n++)if("next"==o.nodeName.toLowerCase()){t.removeChild(o);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,o,s,c){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===o?"":o,this.oldValue=void 0===s?"":s,this.newValue=void 0===c?"":c)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var o="";if(n.mutationToDom&&(o=(o=n.mutationToDom())&&e.Xml.domToText(o)),n.domToMutation){var s=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(s)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,o,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var o;o=this.ids[t];t++){var s=n.getBlockById(o);s?s.dispose(!1):o==this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var o;o=this.ids[t];t++){var s=n.getBlockById(o);s?s.dispose(!1):o==this.blockId&&console.warn("Can't delete non-existent block: "+o)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},o=t.getParent();return o?(n.parentId=o.id,(t=o.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),o=n.getBlockById(this.blockId);if(o){var s=t?this.newParentId:this.oldParentId,c=t?this.newInputName:this.oldInputName,_=t?this.newCoordinate:this.oldCoordinate;if(t=null,s&&!(t=n.getBlockById(s)))return void console.warn("Can't connect to non-existent block: "+s);if(o.getParent()&&o.unplug(),_)c=o.getRelativeToSurfaceXY(),o.moveBy(_.x-c.x,_.y-c.y);else{if(n=(o=o.outputConnection||o.previousConnection).type,c){if(t=t.getInput(c))var w=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(w=t.nextConnection);w?o.connect(w):console.warn("Can't connect to non-existent input: "+c)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,o,s){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===o?"":o,this.newValue=void 0===s?"":s},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,o){this.scale_=o,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+o+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var o=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),o=o.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",o=document.createTextNode(o),t.appendChild(o),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var o=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,s=n+this.length_/2;this.setLineAttributes_(this.line1_,t,o*=t,s*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,o,s)},e.Grid.prototype.setLineAttributes_=function(t,n,o,s,c,_){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",o),t.setAttribute("y1",c),t.setAttribute("x2",s),t.setAttribute("y2",_))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,o){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},o),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,o,s){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=s||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var o=new e.Theme(t),s=n.base;return s&&("string"==typeof s&&(s=e.registry.getObject(e.registry.Type.THEME,s)),s instanceof e.Theme&&(e.utils.object.deepMerge(o,s),o.name=t)),e.utils.object.deepMerge(o.blockStyles,n.blockStyles),e.utils.object.deepMerge(o.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(o.componentStyles,n.componentStyles),e.utils.object.deepMerge(o.fontStyle,n.fontStyle),null!=n.startHats&&(o.startHats=n.startHats),o},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(o){return"CATEGORY"==o.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var s,n=[],o=t.childNodes;for(o||(o=t),t=0;s=o[t];t++)if(s.tagName){var c={},_=s.tagName.toUpperCase();c.kind=_,"BLOCK"==_?c.blockxml=s:s.childNodes&&0<s.childNodes.length&&(c.contents=e.utils.toolbox.xmlToJsonArray_(s)),e.utils.toolbox.addAttributes_(s,c),n.push(c)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var o=0;o<t.attributes.length;o++){var s=t.attributes[o];-1<s.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[s.nodeName.replace("css-","")]=s.value):n[s.nodeName]=s.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var o=null,s=!1,c=!1,_=!1,w=!1,M=!1,U=!1;else{o=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),s=e.utils.toolbox.hasCategories(o),void 0===(c=t.trashcan)&&(c=s);var V=t.maxTrashcanContents;c?void 0===V&&(V=32):V=0,void 0===(_=t.collapse)&&(_=s),void 0===(w=t.comments)&&(w=s),void 0===(M=t.disable)&&(M=s),void 0===(U=t.sounds)&&(U=!0)}var H=!!t.rtl,$=t.horizontalLayout;void 0===$&&($=!1);var pt=t.toolboxPosition;pt="end"!==pt,pt=$?pt?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:pt==H?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var nt=t.css;void 0===nt&&(nt=!0);var st="https://blockly-demo.appspot.com/static/media/";t.media?st=t.media:t.path&&(st=t.path+"media/");var Ct=void 0===t.oneBasedIndex||!!t.oneBasedIndex,xt=t.renderer||"geras",yt=t.plugins||{};this.RTL=H,this.oneBasedIndex=Ct,this.collapse=_,this.comments=w,this.disable=M,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=st,this.hasCategories=s,this.moveOptions=e.Options.parseMoveOptions_(t,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=c,this.maxTrashcanContents=V,this.hasSounds=U,this.hasCss=nt,this.horizontalLayout=$,this.languageTree=o,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=pt,this.theme=e.Options.parseThemeOptions_(t),this.renderer=xt,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=yt},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var o=t.move||{},s={};return void 0===o.scrollbars&&void 0===t.scrollbars?s.scrollbars=n:"object"==typeof o.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!o.scrollbars.horizontal,s.scrollbars.vertical=!!o.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!o.scrollbars||!!t.scrollbars,s.wheel=s.scrollbars&&void 0!==o.wheel?!!o.wheel:"object"==typeof s.scrollbars,s.drag=!(!s.scrollbars||void 0!==o.drag&&!o.drag),s},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,o,s,c){this.workspace_=t,o=void 0===o||o;var _=(n=void 0===n||n)&&o;n&&(this.hScroll=new e.Scrollbar(t,!0,_,s,c)),o&&(this.vScroll=new e.Scrollbar(t,!1,_,s,c)),_&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(o=!0)):o=n=!0,n||o){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&o&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,o){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(o||void 0===o)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,o,s,c){this.workspace_=t,this.pair_=o||!1,this.horizontal_=n,this.margin_=void 0!==c?c:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(s),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var o=e.utils.getInjectionDivXY_(this.svgHandle_),s=this.handlePosition_,c=.95*this.handleLength_;n<=(o=this.horizontal_?o.x:o.y)?s-=c:n>=o+this.handleLength_&&(s+=c),this.setHandlePosition(this.constrainHandlePosition_(s)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var o=document.createElement("div");o.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(o)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var s=e.Tooltip.lastX_;s=t?s-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):s+e.Tooltip.OFFSET_X;var c=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;c+e.Tooltip.DIV.offsetHeight>o+window.scrollY&&(c-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?s=Math.max(e.Tooltip.MARGINS-window.scrollX,s):s+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(s=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=c+"px",e.Tooltip.DIV.style.left=s+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,o){Array.isArray(o)&&(o=o.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,o)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,o,s){t=t+" was deprecated on "+n+" and will be deleted on "+o+".",s&&(t+="\nUse "+s+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var M,n=e.connectionTypes.INPUT_VALUE,o=this.getSourceBlock(),s=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var c=this.getShadowDom(!0);this.shadowDom_=null;var _=this.targetBlock();if(_.isShadow())_.dispose(!1);else{this.disconnect();var w=_}this.shadowDom_=c}e.Events.isEnabled()&&(M=new(e.Events.get(e.Events.BLOCK_MOVE))(s)),e.Connection.connectReciprocally_(this,t),s.setParent(o),M&&(M.recordNew(),e.Events.fire(M)),w&&((s=e.Connection.getConnectionForOrphanedConnection(s,t=this.type===n?w.outputConnection:w.previousConnection))?t.connect(s):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),o=n.canConnectWithReason(this,t,!1);if(o!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(o,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var _,o=null,s=(n=n.outputConnection).getConnectionChecker(),c=0;_=t.inputList[c];c++)if((_=_.connection)&&s.canConnect(n,_,!1)){if(o)return null;o=_}return o},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var o;o=e.Connection.getSingleConnection_(t,n);)if(!(t=o.targetBlock())||t.isShadow())return o;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var o=n.getConnectionChecker();return t&&o.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,o=t.getSourceBlock();t=this}else n=t.getSourceBlock(),o=this.sourceBlock_;var s=e.Events.getGroup();s||e.Events.setGroup(!0),this.disconnectInternal_(n,o),o.isShadow()||t.respawnShadow_(),s||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var o;e.Events.isEnabled()&&(o=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),o&&(o.recordNew(),e.Events.fire(o))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,o=0;o<n.length;o++)if(n[o].connection===this){t=n[o];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var s,o=0;s=t.inputList[o];o++)if(s.connection==this){n=s;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,o,s){return this.canConnectWithReason(t,n,o,s)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,o,s){var c=this.doSafetyChecks(t,n);return c!=e.Connection.CAN_CONNECT?c:this.doTypeChecks(t,n)?o&&!this.doDragChecks(t,n,s||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,o){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+o.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var o=t.getSourceBlock(),s=n.getSourceBlock();else s=t.getSourceBlock(),o=n.getSourceBlock();return o==s?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:o.workspace!==s.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!s.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var o=0;o<t.length;o++)if(-1!=n.indexOf(t[o]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,o){if(t.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var o=this.getVariable(n,t.type),s=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{o&&o.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,o,s):this.renameVariableAndUses_(t,n,s)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var o=this.getVariableById(t);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(o,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,o){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<o.length;n++)o[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,o,s){var c=t.type;for(n!=o.name&&this.renameVariableAndUses_(o,n,s),n=0;n<s.length;n++)s[n].renameVarById(t.getId(),o.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(c).indexOf(t),this.variableMap_[c].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,o){var s=this.getVariable(t,n);if(s){if(o&&s.getId()!=o)throw Error('Variable "'+t+'" is already in use and its id is "'+s.getId()+'" which conflicts with the passed in id, "'+o+'".');return s}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return s=o||e.utils.genUid(),s=new e.VariableModel(this.workspace,t,n=n||"",s),(t=this.variableMap_[n]||[]).push(s),delete this.variableMap_[n],this.variableMap_[n]=t,s},e.VariableMap.prototype.deleteVariable=function(t){for(var s,n=this.variableMap_[t.type],o=0;s=n[o];o++)if(s.getId()==t.getId()){n.splice(o,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var c,o=n.name,s=this.getVariableUsesById(t);for(t=0;c=s[t];t++)if("procedures_defnoreturn"==c.type||"procedures_defreturn"==c.type)return t=c.getFieldValue("NAME"),o=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",t),void e.alert(o);var _=this;1<s.length?(o=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(s.length)).replace("%2",o),e.confirm(o,function(w){w&&n&&_.deleteVariableInternal(n,s)})):_.deleteVariableInternal(n,s)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var o=e.Events.getGroup();o||e.Events.setGroup(!0);try{for(var s=0;s<n.length;s++)n[s].dispose(!0);this.deleteVariable(t)}finally{o||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var s,o=0;s=n[o];o++)if(e.Names.equals(s.name,t))return s;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),o=0;o<n.length;o++)for(var _,s=n[o],c=0;_=this.variableMap_[s][c];c++)if(_.getId()==t)return _;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var o=0;o<t.length;o++)""==t[o]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var c,o=this.variableMap_[n],s=0;c=o[s];s++)t.push(c.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],o=this.workspace.getAllBlocks(!1),s=0;s<o.length;s++){var c=o[s].getVarModels();if(c)for(var _=0;_<c.length;_++)c[_].getId()==t&&n.push(o[s])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],o=0;o<t.length;o++)n.push.apply(n,t[o].getDescendants(!0))}else for(n=this.getTopBlocks(!1),o=0;o<n.length;o++)n.push.apply(n,n[o].getChildren(!1));return n.filter(function(s){return!s.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,o){return this.variableMap_.createVariable(t,n,o)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var o,n=0;for(o in t){if(t[o]>this.remainingCapacityOfType(o))return!1;n+=t[o]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,o=t?this.undoStack_:this.redoStack_,s=n.pop();if(s){for(var c=[s];n.length&&s.group&&s.group==n[n.length-1].group;)c.push(n.pop());for(n=0;s=c[n];n++)o.push(s);c=e.Events.filter(c,t),e.Events.recordUndo=!1;try{for(n=0;s=c[n];n++)s.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var o,n=0;o=this.listeners_[n];n++)o(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var s,n=this.getTopBlocks(!1),o=0;s=n[o];o++)if(!s.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(n&&o&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(o,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,o,s,c,_){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=o,t.setAttribute("transform","translate(0, 0) scale("+_+")"),n.setAttribute("transform","translate(0, 0) scale("+_+")"),this.SVG_.setAttribute("width",s),this.SVG_.setAttribute("height",c),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,o){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,o),t},e.ASTNode=function(t,n,o){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(o||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var o,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;o=n.inputList[t];t++){for(var _,s=o.fieldRow,c=0;_=s[c];c++)if(_.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(_);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),s=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=o.inputList[s];s++){for(var c=n.fieldRow;t<c.length;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var s,t=this.location_.getParentInput(),n=t.getSourceBlock(),o=n.inputList.indexOf(t);s=n.inputList[o];o--){if(s.connection&&s!==t)return e.ASTNode.createInputNode(s);for(var _,c=(s=s.fieldRow).length-1;_=s[c];c--)if(_.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(_)}return null},e.ASTNode.prototype.findPrevForField_=function(){var c,t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),s=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;c=o.inputList[s];s--){if(c.connection&&c!==n)return e.ASTNode.createInputNode(c);for(c=c.fieldRow;-1<t;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t--}0<=s-1&&(t=o.inputList[s-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var o=n.getRootBlock();n=o.workspace.getTopBlocks(!0);for(var c,s=0;c=n[s];s++)if(o.id==c.id)return-1==(t=s+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var o,n=0;o=t[n];n++){for(var _,s=o.fieldRow,c=0;_=s[c];c++)if(_.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(_);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,o,s){var c='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(c,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(c,n.mutationToDom,"mutationToDom");var _=e.Extensions.checkMutatorDialog_(n,c);if(o&&"function"!=typeof o)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(_){if(!e.Mutator)throw Error(c+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(s||[]))}this.mixin(n),o&&o.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,o){var s=e.Extensions.ALL_[t];if("function"!=typeof s)throw Error('Error: Extension "'+t+'" not found.');if(o)e.Extensions.checkNoMutatorProperties_(t,n);else var c=e.Extensions.getMutatorProperties_(n);if(s.apply(n),o)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(c,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,o){if(!n)throw Error(t+'missing required property "'+o+'"');if("function"!=typeof n)throw Error(t+'" required property "'+o+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var o=void 0!==t.compose,s=void 0!==t.decompose;if(o&&s){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!o&&!s)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var o=0;o<n.length;o++)if(t[o]!=n[o])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var o=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var s in n)e.utils.checkMessageReferences(n[s])}),function(){this.type&&-1==o.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),o.push(this.type)),this.setTooltip(function(){var s=String(this.getFieldValue(t)),c=n[s];return null==c?-1==o.indexOf(this.type)&&(s="No tooltip mapping for value "+s+" of field "+t,null!=this.type&&(s+=" of block type "+this.type),console.warn(s+".")):c=e.utils.replaceMessageReferences(c),c}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,o){var s=t.getField(n);if(!s.isOptionListDynamic()){s=s.getOptions();for(var c=0;c<s.length;++c){var _=s[c][1];null==o[_]&&console.warn("No tooltip mapping for value "+_+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var o=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",o?o.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,o=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(o),(o=o.cloneNode(!0)).translateX_=t.x,o.translateY_=t.y,o.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),e.blockAnimations.disposeUiStep_(o,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,o,s){var c=(new Date-o)/150;1<c?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*s/2*c)+","+(t.translateY_+t.bBox_.height*s*c)+") scale("+(1-c)*s+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,o,s))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,o=n.scale;if(n.getAudioManager().play("click"),!(1>o)){var s=n.getSvgXY(t.getSvgRoot());t.outputConnection?(s.x+=(t.RTL?3:-3)*o,s.y+=13*o):t.previousConnection&&(s.x+=(t.RTL?-23:23)*o,s.y+=3*o),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:s.x,cy:s.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,o)}},e.blockAnimations.connectionUiStep_=function(t,n,o){var s=(new Date-n)/150;1<s?e.utils.dom.removeNode(t):(t.setAttribute("r",25*s*o),t.style.opacity=1-s,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,o))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,o){var s=(new Date-o)/200;1<s?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(s*Math.PI*3)*(1-s)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,o)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,o){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=o},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var o=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(o,n))||this.shouldUpdatePreviews_(o,t))&&(e.Events.disable(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var o=this.workspace_.newBlock(n);if(o.setInsertionMarker(!0),t.mutationToDom){var s=t.mutationToDom();s&&o.domToMutation(s)}for(n=0;n<t.inputList.length;n++){var c=t.inputList[n];if(c.name!=e.constants.COLLAPSED_INPUT_NAME){var _=o.inputList[n];if(!_)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(s=0;s<c.fieldRow.length;s++){var w=c.fieldRow[s],M=_.fieldRow[s];if(!M)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));M.setValue(w.getValue())}}}o.setCollapsed(t.isCollapsed()),o.setInputsInline(t.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return o},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var o=t.local,s=t.closest;return t=t.radius,o&&s?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==s&&this.localConnection_==o||(o=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(o*o+n*n),s&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),o=null,s=null,c=0;c<this.availableConnections_.length;c++){var _=this.availableConnections_[c],w=_.closest(n,t);w.connection&&(o=w.connection,s=_,n=w.radius)}return{closest:o,local:s,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,o=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=o.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.render(),o.rendered=!0,o.getSvgRoot().setAttribute("visibility","visible"),t&&n&&o.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),o=n.nextConnection,s=n.previousConnection,c=n.outputConnection;if(c=t.type==e.connectionTypes.INPUT_VALUE&&!(c&&c.targetConnection),!(t!=o||s&&s.targetConnection)||c?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=o?((o=t.targetConnection).getSourceBlock().unplug(!1),s=s?s.targetConnection:null,n.unplug(!0),s&&s.connect(o)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var s,o=0;s=t[o];o++){s=s.getIcons();for(var c=0;c<s.length;c++){var _={location:s[c].getIconLocation(),icon:s[c]};n.push(_)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var o=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(n),o=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==o&&(o&&o.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var o=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),o?this.updateBlockAfterMove_(o):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(o):t||"function"!=typeof n.addStyle||n.addStyle(o)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var o=this.dragIconData_[n];o.icon.setIconLocation(e.utils.Coordinate.sum(o.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,o,s,c,_){this.workspace_=t,this.content_=n,this.shape_=o,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=e.utils.math.toRadians(o),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!c||!_))),this.setAnchorLocation(s),c&&_||(c=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,_=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(c,_),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(o={}),o=e.utils.dom.createSvgElement(e.utils.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},o),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},o),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),o=this.getOptimalRelativeTop_(t),s=this.shape_.getBBox(),c={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},_={x:-this.width_-30,y:o};o={x:s.width,y:o};var w={x:n,y:s.height};n=s.width<s.height?o:w,s=s.width<s.height?w:o,o=this.getOverlap_(c,t),w=this.getOverlap_(_,t);var M=this.getOverlap_(n,t);t=this.getOverlap_(s,t),o==(t=Math.max(o,w,M,t))?(this.relativeLeft_=c.x,this.relativeTop_=c.y):w==t?(this.relativeLeft_=_.x,this.relativeTop_=_.y):M==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=s.x,this.relativeTop_=s.y)},e.Bubble.prototype.getOverlap_=function(t,n){var o=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(o+this.width_,n.left+n.width)-Math.max(o,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var o=this.anchorXY_.x-n,s=o-this.width_,c=t.left+t.width,_=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else o=(s=n+this.anchorXY_.x)+this.width_,_=t.left,c=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?s<_?n=-(_-this.anchorXY_.x+this.width_):o>c&&(n=-(c-this.anchorXY_.x)):s<_?n=_-this.anchorXY_.x:o>c&&(n=c-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var o=this.anchorXY_.y+n,c=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var _=this.anchorXY_.y;return o<c?n=c-_:o+this.height_>t&&(n=t-_-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var o=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,o+45),n=Math.max(n,o+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-o)+") scale(-1 1)":"translate("+(t-o)+","+(n-o)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,o=this.height_/2,s=-this.relativeLeft_,c=-this.relativeTop_;if(n==s&&o==c)t.push("M "+n+","+o);else{c-=o,s-=n,this.workspace_.RTL&&(s*=-1);var _=Math.sqrt(c*c+s*s),w=Math.acos(s/_);0>c&&(w=2*Math.PI-w);var M=w+Math.PI/2;M>2*Math.PI&&(M-=2*Math.PI);var U=Math.sin(M),V=Math.cos(M),H=this.getBubbleSize();M=(H.width+H.height)/e.Bubble.ARROW_THICKNESS,M=Math.min(M,H.width,H.height)/4,s=n+(H=1-e.Bubble.ANCHOR_RADIUS/_)*s,c=o+H*c,H=n+M*V;var $=o+M*U;n-=M*V,o-=M*U,(U=w+this.arrow_radians_)>2*Math.PI&&(U-=2*Math.PI),w=Math.sin(U)*_/e.Bubble.ARROW_BEND,_=Math.cos(U)*_/e.Bubble.ARROW_BEND,t.push("M"+H+","+$),t.push("C"+(H+_)+","+($+w)+" "+s+","+c+" "+s+","+c),t.push("C"+s+","+c+" "+(n+_)+","+(o+w)+" "+n+","+o)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var o=0;o<t.length;o++){var s=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),c=document.createTextNode(t[o]);s.appendChild(c)}return n},e.Bubble.createNonEditableBubble=function(t,n,o){if((o=new e.Bubble(n.workspace,t,n.pathObject.svgPath,o,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var c,s=0;c=t.childNodes[s];s++)c.setAttribute("text-anchor","end"),c.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return o},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,o){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===o?"":o)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var o=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,o)):(o=o.getCommentById(t.commentId))?o.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var o=n.getXY();n.moveBy(t.x-o.x,t.y-o.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,o){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=o},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)if(o.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var o,t=Object.keys(this.markers_),n=0;o=t[n];n++)this.unregisterMarker(o);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,o){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=o,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,o){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=o+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,o,s){var c=e.WidgetDiv.calculateY_(t,n,o);t=e.WidgetDiv.calculateX_(t,n,o,s),0>c?e.WidgetDiv.positionInternal_(t,0,o.height+c):e.WidgetDiv.positionInternal_(t,c,o.height)},e.WidgetDiv.calculateX_=function(t,n,o,s){return s?(n=Math.max(n.right-o.width,t.left),Math.min(n,t.right-o.width)):(n=Math.min(n.left,t.right-o.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,o){return n.bottom+o.height>=t.bottom?n.top-o.height:n.bottom},e.Field=function(t,n,o){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,o&&this.configure_(o),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),o=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),s=n.FIELD_TEXT_HEIGHT,c=0;this.textElement_&&(o+=c=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(s=Math.max(s,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=s,this.size_.width=o,this.positionTextElement_(t,c),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var o=this.getConstants(),s=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",o.FIELD_TEXT_BASELINE_CENTER?s:s-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),o=e.utils.style.getPageOffset(this.borderRect_),s=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,o=this.getAbsoluteXY_(),s=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(o.x+=1.5*n,o.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(o.x-=.5*n,o.y-=.5*n),s+=1*n,t+=1*n}return new e.utils.Rect(o.y,o.y+t,o.x,o.x+s)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var o=this.getValue();o===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,o,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,o=n.inputList,s=0;s<n.inputList.length;s++)for(var c=o[s],_=c.fieldRow,w=0;w<_.length;w++)if(_[w]===this){t=c;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,o){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,o),o||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,o,s){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=o,this.connection=s,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,o){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&o)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=o,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var s,o=0;s=this.fieldRow[o];o++)if(s.name===t)return s.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var s,o=0;s=this.fieldRow[o];o++)s.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,o){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=o&&!t.getBlockById(o)?o:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(o=e.Blocks[n])||"object"!=typeof o)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,o)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var o;o=this.inputList[n];n++)o.dispose();this.inputList.length=0;var c,s=this.getConnections_(!0);for(n=0;c=s[n];n++)c.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.initModel&&s.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;if(o&&o.type==e.connectionTypes.INPUT_VALUE&&o.targetConnection){if(t)return null;t=o}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var o=this.getNextBlock();t&&o&&!o.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var o,n=0;o=this.inputList[n];n++)o.connection&&t.push(o.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var o=n.targetBlock();if(!o||t&&o.isShadow())return n;n=o.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&o.connection.targetBlock()==t)return o;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var o,n=0;o=this.inputList[n];n++)o.connection&&(o=o.connection.targetBlock())&&t.push(o);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var s,n=[this],o=this.getChildren(t),c=0;s=o[c];c++)n.push.apply(n,s.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var o=this.getConnections_(!0);if(t=t.getConnections_(!0),o.length!=t.length)throw Error("Connection lists did not match in length.");for(var s=0;s<t.length;s++)if(t[s]==n)return o[s];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var o,n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)if(c.name===t)return c;return null},e.Block.prototype.getVars=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&t.push(c.getValue());return t},e.Block.prototype.getVarModels=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&(c=this.workspace.getVariableById(c.getValue()))&&t.push(c);return t},e.Block.prototype.updateVarName=function(t){for(var o,n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&t.getId()==c.getValue()&&c.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var s,o=0;s=this.inputList[o];o++)for(var _,c=0;_=s.fieldRow[c];c++)_.referencesVariables()&&t==_.getValue()&&_.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var o=this.getField(n);if(!o)throw Error('Field "'+n+'" not found.');o.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function o(V){var H=V.getCheck();return!H&&V.targetConnection&&(H=V.targetConnection.getCheck()),!!H&&(-1!=H.indexOf("Boolean")||-1!=H.indexOf("Number"))}function s(){w&&w.getType()==M.getType()&&w.getLocation()==M.getLocation()&&(w=null)}var c=[];n=n||"?";var _=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var w=e.ASTNode.createBlockNode(this),M=w;w;){switch(w.getType()){case e.ASTNode.types.INPUT:var U=w.getLocation();w.in()?o(U)&&c.push("("):c.push(n);break;case e.ASTNode.types.FIELD:(U=w.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&c.push(U.getText())}if(!(w=(U=w).in()||U.next())){for(w=U.out(),s();w&&!w.next();)w=w.out(),s(),w&&w.getType()==e.ASTNode.types.INPUT&&o(w.getLocation())&&c.push(")");w&&(w=w.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=_,n=2;n<c.length;n++)"("==c[n-2]&&")"==c[n]&&(c[n-2]=c[n-1],c.splice(n-1,2));return c=(c=c.reduce(function(V,H){return V+("("==V.substr(-1)||")"==H?"":" ")+H},"")).trim()||"???",t&&c.length>t&&(c=c.substring(0,t-3)+"..."),c},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var o=0;void 0!==t["message"+o];)this.interpolate_(t["message"+o],t["args"+o]||[],t["lastDummyAlign"+o],n),o++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(o=e.utils.replaceMessageReferences(o=t.tooltip),this.setTooltip(o)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(o=t.enableContextMenu)),void 0!==t.helpUrl&&(o=e.utils.replaceMessageReferences(o=t.helpUrl),this.setHelpUrl(o)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(o){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(o){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var o in n=[],t)void 0!==this[o]&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,o,s){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,o),o=[],t=0;for(var c;c=n[t];t++)if(this.isInputKeyword_(c.type)){if(c=this.inputFromJson_(c,s)){for(var w,_=0;w=o[_];_++)c.appendField(w[0],w[1]);o.length=0}}else(_=this.fieldFromJson_(c))&&o.push([_,c.name])},e.Block.prototype.validateTokens_=function(t,n){for(var o=[],s=0,c=0;c<t.length;c++){var _=t[c];if("number"==typeof _){if(1>_||_>n)throw Error('Block "'+this.type+'": Message index %'+_+" out of range.");if(o[_])throw Error('Block "'+this.type+'": Message index %'+_+" duplicated.");o[_]=!0,s++}}if(s!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,o){for(var s=[],c=0;c<t.length;c++){var _=t[c];"number"==typeof _&&(_=n[_-1]),("string"!=typeof _||(_=this.stringToFieldJson_(_)))&&s.push(_)}return(t=s.length)&&!this.isInputKeyword_(s[t-1].type)&&(t={type:"input_dummy"},o&&(t.align=o),s.push(t)),s},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var o={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},s=null;switch(t.type){case"input_value":s=this.appendValueInput(t.name);break;case"input_statement":s=this.appendStatementInput(t.name);break;case"input_dummy":s=this.appendDummyInput(t.name)}return s?(t.check&&s.setCheck(t.check),t.align&&(void 0===(o=o[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):s.setAlign(o)),s):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var o=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(o=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,o),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var _,o=-1,s=n?-1:this.inputList.length,c=0;_=this.inputList[c];c++)if(_.name==t){if(o=c,-1!=s)break}else if(n&&_.name==n&&(s=c,-1!=o))break;if(-1==o)throw Error('Named input "'+t+'" not found.');if(-1==s)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(o,s)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var o=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,o)},e.Block.prototype.removeInput=function(t,n){for(var s,o=0;s=this.inputList[o];o++)if(s.name==t)return s.type==e.inputTypes.STATEMENT&&this.statementInputCount--,s.dispose(),this.inputList.splice(o,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.name==t)return o;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),o.recordNew(),e.Events.fire(o)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&(!(o=o.connection.targetBlock())||!o.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var s,o=0;s=this.menuItems_[o];o++)n.appendChild(s.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var s,o=0;s=this.menuItems_[o];o++)if(s.getElement()==t)return s;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var o;o=this.menuItems_[t];){if(o.isEnabled()){this.setHighlighted(o);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var o=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,o))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(o)}return o=this.content_,"string"==typeof this.content_&&(o=document.createTextNode(this.content_)),n.appendChild(o),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,o){if(e.WidgetDiv.show(e.ContextMenu,o,e.ContextMenu.dispose),n.length){var s=e.ContextMenu.populate_(n,o);e.ContextMenu.menu_=s,e.ContextMenu.position_(s,t,o),setTimeout(function(){s.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var o=new e.Menu;o.setRole(e.utils.aria.Role.MENU);for(var c,s=0;c=t[s];s++){var _=new e.MenuItem(c.text);_.setRightToLeft(n),_.setRole(e.utils.aria.Role.MENUITEM),o.addChild(_),_.setEnabled(c.enabled),c.enabled&&_.onAction(function(w){e.ContextMenu.hide(),this.callback(this.scope)},c)}return o},e.ContextMenu.position_=function(t,n,o){var s=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+s.top,n.clientY+s.top,n.clientX+s.left,n.clientX+s.left),e.ContextMenu.createWidget_(t);var c=t.getSize();o&&(n.left+=c.width,n.right+=c.width,s.left+=c.width,s.right+=c.width),e.WidgetDiv.positionWithAnchor(s,n,c,o),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var o=e.Xml.domToBlock(n,t.workspace),s=t.getRelativeToSurfaceXY();s.x=t.RTL?s.x-e.SNAP_RADIUS:s.x+e.SNAP_RADIUS,s.y+=2*e.SNAP_RADIUS,o.moveBy(s.x,s.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!o.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(o)),o.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var o={enabled:!e.utils.userAgent.IE};return o.text=e.Msg.ADD_COMMENT,o.callback=function(){var s=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),c=t.getInjectionDiv().getBoundingClientRect();c=new e.utils.Coordinate(n.clientX-c.left,n.clientY-c.top);var _=t.getOriginOffsetInPixels();(c=e.utils.Coordinate.difference(c,_)).scale(1/t.scale),s.moveBy(c.x,c.y),t.rendered&&(s.initSvg(),s.render(),s.select())},o},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var o=[],s=this.registry_;return Object.keys(s).forEach(function(c){if(t==(c=s[c]).scopeType){var _=c.preconditionFn(n);"hidden"!=_&&(c={text:"function"==typeof c.displayText?c.displayText(n):c.displayText,enabled:"enabled"==_,callback:c.callback,scope:n,weight:c.weight},o.push(c))}}),o.sort(function(c,_){return c.weight-_.weight}),o},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,o){e.Events.Selected.superClass_.constructor.call(this,o),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var o=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,o=!0}var s=e.selected==n;s||n.addSelect();var c=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,_=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;o&&(_=-_),n.RTL&&(c=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(c,_),s||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var o=this.targetBlock(),s=o.getSvgRoot();if(!s)throw Error("block is not rendered.");s=e.utils.getRelativeXY(s),o.getSvgRoot().setAttribute("transform","translate("+(s.x-t)+","+(s.y-n)+")"),o.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var o=t[n],s=o.getConnections_(!0),c=0;c<s.length;c++)s[c].setTracking(!1);for(o=o.getIcons(),c=0;c<o.length;c++)o[c].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var o=[];n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)}else o=n.getConnections_(!0);for(var s=0;s<o.length;s++)t.push.apply(t,o[s].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var o=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(o),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var o=n.rendered,s=t.rendered;o&&n.updateDisabled(),s&&t.updateDisabled(),o&&s&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var o=t.in()||t.next();return n(o)?o:o?this.getNextNode_(o,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var o=t.prev();return n(o=o?this.getRightMostChild_(o):t.out())?o:o?this.getPreviousNode_(o,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,o=t&&t.getType();return t&&(t=t.getLocation(),o==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,o){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var s=this.pathObject.svgPath;s.tooltip=this,e.Tooltip.bindMouseEvents(s),e.BlockSvg.superClass_.constructor.call(this,t,n,o),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var s=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(o),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-s.x,t.y-s.y)):n&&(this.workspace.getCanvas().appendChild(o),this.translate(s.x,s.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,s=this.getSvgRoot();if(s)do{var c=e.utils.getRelativeXY(s);t+=c.x,n+=c.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==s&&(t+=(c=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=c.y),s=s.parentNode}while(s&&s!=this.workspace.getCanvas()&&s!=o);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=e.Events.isEnabled();if(o)var s=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var c=this.getRelativeToSurfaceXY();this.translate(c.x+t,c.y+n),this.moveConnections(t,n),o&&(s.recordNew(),e.Events.fire(s)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),o=n/2,s=this.getRelativeToSurfaceXY();t=Math.round((s.x-o)/n)*n+o-s.x,n=Math.round((s.y-o)/n)*n+o-s.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var o=t.x-n.width,s=t.x;else o=t.x,s=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,o,s)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var c,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,o=e.constants.COLLAPSED_FIELD_NAME,s=0;c=this.inputList[s];s++)c.name!=n&&c.setVisible(!t);if(t){for(c=this.getIcons(),s=0;t=c[s];s++)t.setVisible(!1);s=this.toString(e.COLLAPSE_CHARS),(c=this.getField(o))?c.setValue(s):(c=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(s),o)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var o=new e.TabNavigateCursor;o.setCurNode(e.ASTNode.createFieldNode(t)),t=o.getCurNode(),n?o.next():o.prev(),(n=o.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var o=this.getConnections_(!1),s=0;s<o.length;s++)o[s].moveBy(t,n);for(o=this.getIcons(),s=0;s<o.length;s++)o[s].computeIconLocation();for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var o=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]);this.warningTextDb_=null}for(n=this.getIcons(),s=0;s<n.length;s++)n[s].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var o,n=0;o=t[n];n++)o.rendered&&o.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var o=n||"";if(o)this.warningTextDb_[o]&&(clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o]);else for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s];if(this.workspace.isDragging()){var c=this;this.warningTextDb_[o]=setTimeout(function(){c.workspace&&(delete c.warningTextDb_[o],c.setWarningText(t,o))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){s=this.getSurroundParent();for(var _=null;s;)s.isCollapsed()&&(_=s),s=s.getSurroundParent();_&&_.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,o)}else this.warning&&!o?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",o),(s=this.warning.getText())||this.warning.dispose(),n=n!=s);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),o=n.parentNode,s=o.childNodes;s[s.length-1]!==n&&o.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.setTracking(t),(o=o.targetBlock())&&o.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var o;o=this.inputList[t];t++)o.connection&&n.push(o.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var s,n=this.getConnections_(!1),o=0;s=n[o];o++){s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours();for(var w,c=s.neighbours(e.SNAP_RADIUS),_=0;w=c[_];_++)s.isConnected()&&w.isConnected()||w.getSourceBlock().getRootBlock()!=t&&(s.isSuperior()?w.bumpAwayFrom(s):s.bumpAwayFrom(w))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.moveToOffset(t),o.isConnected()&&o.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,o=this.getNextBlock();if(o){o=o.getHeightWidth();var s=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=o.height-s,n=Math.max(n,o.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var o=this.calculateIndexForYPos_(n);if(o>=this.connections_.length)return-1;n=t.y;for(var s=o;0<=s&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s--}for(s=o;s<this.connections_.length&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,o=this.connections_.length;n<o;){var s=Math.floor((n+o)/2);if(this.connections_[s].y<t)n=s+1;else{if(!(this.connections_[s].y>t)){n=s;break}o=s}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function o(V){var H=c-s[V].x,$=_-s[V].y;return Math.sqrt(H*H+$*$)<=n&&U.push(s[V]),$<n}var s=this.connections_,c=t.x,_=t.y;t=0;for(var w=s.length-2,M=w;t<M;)s[M].y<_?t=M:w=M,M=Math.floor((t+w)/2);var U=[];if(w=t=M,s.length){for(;0<=t&&o(t);)t--;do{w++}while(w<s.length&&o(w))}return U},e.ConnectionDB.prototype.isInYRange_=function(t,n,o){return Math.abs(this.connections_[t].y-n)<=o},e.ConnectionDB.prototype.searchForClosest=function(t,n,o){if(!this.connections_.length)return{connection:null,radius:n};var s=t.y,c=t.x;t.x=c+o.x,t.y=s+o.y;var _=this.calculateIndexForYPos_(t.y);o=null;for(var M,w=n,U=_-1;0<=U&&this.isInYRange_(U,t.y,n);)this.connectionChecker_.canConnect(t,M=this.connections_[U],!0,w)&&(o=M,w=M.distanceFrom(t)),U--;for(;_<this.connections_.length&&this.isInYRange_(_,t.y,n);)this.connectionChecker_.canConnect(t,M=this.connections_[_],!0,w)&&(o=M,w=M.distanceFrom(t)),_++;return t.x=c,t.y=s,{connection:o,radius:w}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,o,s,c){e.Events.ViewportChange.superClass_.constructor.call(this,s),this.viewTop=t,this.viewLeft=n,this.scale=o,this.oldScale=c},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,o=0;return t&&(n=t.getWidth(),o=t.getHeight()),new e.utils.Size(n,o)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),s=!!this.workspace_.getToolbox(),c=!!this.workspace_.getFlyout(!0),_=s?n.position:o.position,w=_==e.utils.toolbox.Position.LEFT;return _=_==e.utils.toolbox.Position.TOP,s&&w?t=n.width:c&&w&&(t=o.width),w=0,s&&_?w=n.height:c&&_&&(w=o.height),{top:w,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),o=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),c=this.workspace_.getToolbox()?o.position:s.position;return this.workspace_.getToolbox()?c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=o.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=o.width):this.workspace_.getFlyout(!0)&&(c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=s.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=s.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var s={};return o||(s.top=t.top,s.bottom=t.top+t.height),n||(s.left=t.left,s.right=t.left+t.width),s},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var o=n.top+n.height,s=n.left+n.width,c=t.width,_=c/2,w=(t=t.height)/2;return{top:Math.min(n.top-w,o-t),bottom:Math.max(o+w,n.top+t),left:Math.min(n.left-_,s-c),right:Math.max(s+_,n.left+c)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,o){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var s=o||this.getContentMetrics();o=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,s);var c=void 0!==o.left?o.left:n.left;return{top:(s=void 0!==o.top?o.top:n.top)/t,left:c/t,width:((void 0!==o.right?o.right:n.right)-c)/t,height:((void 0!==o.bottom?o.bottom:n.bottom)-s)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),s=this.getAbsoluteMetrics(),c=this.getViewMetrics(),_=this.getContentMetrics(),w=this.getScrollMetrics(!1,c,_);return{contentHeight:_.height,contentWidth:_.width,contentTop:_.top,contentLeft:_.left,scrollHeight:w.height,scrollWidth:w.width,scrollTop:w.top,scrollLeft:w.left,viewHeight:c.height,viewWidth:c.width,viewTop:c.top,viewLeft:c.left,absoluteTop:s.top,absoluteLeft:s.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,o){return{height:((n=o||this.getContentMetrics()).height+2*(o=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+o)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var o,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);o=t[n];n++)for(var c,s=0;c=this.componentDB_[o][s];s++){var _=c.element;c=c.propertyName;var w=this.theme_&&this.theme_.getComponentStyle(o);_.style[c]=w||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,o){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:o}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[o]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var s,n=Object.keys(this.componentDB_),o=0;s=n[o];o++){for(var c=this.componentDB_[s],_=c.length-1;0<=_;_--)c[_].element===t&&c.splice(_,1);this.componentDB_[s].length||delete this.componentDB_[s]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=n-this.previousScale_;o=0<o?o*e.TouchGesture.ZOOM_IN_MULTIPLIER:o*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var s=this.startWorkspace_,c=e.utils.mouseToSvg(t,s.getParentSvg(),s.getInverseScreenCTM());s.zoom(c.x,c.y,o)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var o=new e.utils.global.Audio}catch(M){return}for(var s,c=0;c<t.length;c++){var _=t[c],w=_.match(/\.(\w+)$/);if(w&&o.canPlayType("audio/"+w[1])){s=new e.utils.global.Audio(_);break}}s&&s.play&&(this.SOUNDS_[n]=s)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var o=n.play();if(void 0!==o?o.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var o=this.SOUNDS_[t];o?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(o=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?o:o.cloneNode()).volume=void 0===n?1:n,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,o){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var o,n=0;o=t[n];n++){var s=o.getStyleName();s&&(o.setStyle(s),o.mutator&&o.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,o=0,s=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(s=this.scale);do{var c=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(s=1),n+=c.x*s,o+=c.y*s,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,o)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var c,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),o=[],s=0;c=t[s];s++)c.position(n,o),(c=c.getBoundingRectangle())&&o.push(c);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var o=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,o.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,o.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,o=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(o-this.oldLeft_))){var s=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,o,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=o,e.Events.fire(s)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var o="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),s=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,o,this.scale),this.workspaceDragSurface_.translateSurface(s.x,s.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var s,o=0;s=this.highlightedBlocks_[o];o++)s.setHighlighted(!1);this.highlightedBlocks_.length=0}(s=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(s)&&this.highlightedBlocks_.push(s):e.utils.arrayRemove(this.highlightedBlocks_,s),s.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),o=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(o)&&!isNaN(s)){this.RTL&&(o=-o);do{t=!1;for(var w,c=this.getAllBlocks(!1),_=0;w=c[_];_++){var M=w.getRelativeToSurfaceXY();if(1>=Math.abs(o-M.x)&&1>=Math.abs(s-M.y)){t=!0;break}}if(!t){var V,U=n.getConnections_(!1);for(_=0;V=U[_];_++)if(V.closest(e.SNAP_RADIUS,new e.utils.Coordinate(o,s)).connection){t=!0;break}}t&&(o=this.RTL?o-e.SNAP_RADIUS:o+e.SNAP_RADIUS,s+=2*e.SNAP_RADIUS)}while(t);n.moveBy(o,s)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),o=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);isNaN(o)||isNaN(s)||(this.RTL&&(o=-o),n.moveBy(o+50,s+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,o){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,o),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var o,n=0;o=t[n];n++){var s=o.getClientRect();s&&this.dragTargetAreas_.push({component:o,clientRect:s})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var o,n=0;o=this.dragTargetAreas_[n];n++)if(o.clientRect.contains(t.clientX,t.clientY))return o.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var s=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&o?(n=this.scrollX-s.x,o=this.scrollY-s.y,t.shiftKey&&!s.x&&(n=this.scrollX-s.y,o=this.scrollY),this.scroll(n,o)):(s=-s.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,s)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),o=1;o<t.length;o++){var s=t[o];s.isInsertionMarker&&s.isInsertionMarker()||((s=s.getBoundingRectangle()).top<n.top&&(n.top=s.top),s.bottom>n.bottom&&(n.bottom=s.bottom),s.left<n.left&&(n.left=s.left),s.right>n.right&&(n.right=s.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var s,t=this.getTopBlocks(!0),n=0,o=0;s=t[o];o++)if(s.isMovable()){var c=s.getRelativeToSurfaceXY();s.moveBy(-c.x,n-c.y),s.snapToGrid(),n=s.getRelativeToSurfaceXY().y+s.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);var s=this.scale*o;if(this.scale!=s){s>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:s<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var c=this.getCanvas().getCTM(),_=this.getParentSvg().createSVGPoint();_.x=t,_.y=n,_=_.matrixTransform(c.inverse()),c=c.translate((t=_.x)*(1-o),(n=_.y)*(1-o)).scale(o),this.scrollX=c.e,this.scrollY=c.f,this.setScale(s)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var o=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else o=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(o,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var o=this.getBlocksBoundingBox(),s=o.right-o.left;if(o=o.bottom-o.top,s){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),s+=this.flyout_.getWidth()/this.scale)),n/=s,t/=o,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,o=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,o=-o-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),o=t.getHeightWidth(),s=this.scale;t=(n.x+(this.RTL?-1:1)*o.width/2)*s,n=(n.y+o.height/2)*s,o=this.getMetrics(),this.scroll(-(t-o.viewWidth/2),-(n-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var o=this.getMetrics();t=Math.min(t,-o.scrollLeft),n=Math.min(n,-o.scrollTop);var s=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);t=Math.max(t,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),n=Math.max(n,-s),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+o.scrollLeft),-(n+o.scrollTop),!1),this.translate(t+=o.absoluteLeft,n+=o.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,o=this.currentGesture_;return o?n&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,e.utils.aria.setState(o,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(o),t=e.createDom_(o,n);var s=new e.BlockDragSurfaceSvg(o),c=new e.WorkspaceDragSurfaceSvg(o),_=e.createMainWorkspace_(t,n,s,c);return e.init_(_),e.mainWorkspace=_,e.svgResize(_),o.addEventListener("focusin",function(){e.mainWorkspace=_}),_},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var o=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),s=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(s,n.gridOptions,o),t},e.createMainWorkspace_=function(t,n,o,s){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,o,s)).scale=(o=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!o.hasCategories&&o.languageTree&&(s=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(s,t)),o.hasTrashcan&&n.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var o=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(o=t.getBlockById(n.blockId))&&(o=o.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:o=t.getCommentById(n.commentId)}return o},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var c,o=t.getTopBoundedElements(),s=0;c=o[s];s++)e.bumpObjectIntoBounds_(t,n,c)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var o=t.getMetricsManager();if(o.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){o=o.getScrollMetrics(!0);var s=e.extractObjectFromEvent_(t,n);if(s){var c=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,o,s)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==c&&e.Events.setGroup(c)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,o){var s=o.getBoundingRectangle(),c=s.right-s.left,_=e.utils.math.clamp(n.top,s.top,n.top+n.height-(s.bottom-s.top))-s.top,w=n.left;return n=n.left+n.width-c,t.RTL?w=Math.min(n,w):n=Math.max(w,n),!(!(t=e.utils.math.clamp(w,s.left,n)-s.left)&&!_||(o.moveBy(t,_),0))},e.init_=function(t){var n=t.options,o=t.getParentSvg();if(e.browserEvents.conditionalBind(o.parentNode,"contextmenu",null,function(c){e.utils.isTargetInput(c)||c.preventDefault()}),o=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(o),e.inject.bindDocumentEvents_(),n.languageTree){o=t.getToolbox();var s=t.getFlyout(!0);o?o.init():s&&(s.init(t),s.show(n.languageTree),"function"==typeof s.scrollToStart&&s.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)o.updateInverseScreenCTM&&o.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var o=n.getAudioManager();o.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),o.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),o.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var s=[];t=function(){for(;s.length;)e.browserEvents.unbind(s.pop());o.preload()},s.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),s.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var o=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(o=t),t=o.toLowerCase();var s=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var c=this.db_[n];return t in c?s+c[t]:(n=this.getDistinctName(o,n),c[t]=n.substr(s.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var o="";this.dbReverse_[t+o]||t+o in this.reservedDict_;)o=o?o+1:2;return this.dbReverse_[t+=o]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(o){return o.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(o){return o.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var o=t.match(/^(.*?)(\d+)$/);t=o?o[1]+(parseInt(o[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,o){return!e.Procedures.isNameUsed(t,n,o)},e.Procedures.isNameUsed=function(t,n,o){n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s]!=o&&n[s].getProcedureDef){var c=n[s].getProcedureDef();if(e.Names.equals(c[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),o=this.getValue();if(o!=t&&o!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var s=0;s<t.length;s++)t[s].renameProcedure&&t[s].renameProcedure(o,n)}return n},e.Procedures.flyoutCategory=function(t){function n(_,w){for(var M=0;M<_.length;M++){var U=_[M][0],V=_[M][1],H=e.utils.xml.createElement("block");H.setAttribute("type",w),H.setAttribute("gap",16);var $=e.utils.xml.createElement("mutation");for($.setAttribute("name",U),H.appendChild($),U=0;U<V.length;U++){var pt=e.utils.xml.createElement("arg");pt.setAttribute("name",V[U]),$.appendChild(pt)}o.push(H)}}var o=[];if(e.Blocks.procedures_defnoreturn){var s=e.utils.xml.createElement("block");s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("gap",16);var c=e.utils.xml.createElement("field");c.setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),s.appendChild(c),o.push(s)}return e.Blocks.procedures_defreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),s.setAttribute("gap",16),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),s.appendChild(c),o.push(s)),e.Blocks.procedures_ifreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),s.setAttribute("gap",16),o.push(s)),o.length&&o[o.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),o},e.Procedures.updateMutatorFlyout_=function(t){for(var c,n=[],o=t.getBlocksByType("procedures_mutatorarg",!1),s=0;c=o[s];s++)n.push(c.getFieldValue("NAME"));o=e.utils.xml.createElement("xml"),(s=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),c.appendChild(n),s.appendChild(c),o.appendChild(s),t.updateToolbox(o)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var o=[];n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s].getProcedureCall){var c=n[s].getProcedureCall();c&&e.Names.equals(c,t)&&o.push(n[s])}return o},e.Procedures.mutateCallers=function(t){var c,n=e.Events.recordUndo,o=t.getProcedureDef()[0],s=t.mutationToDom(!0);for(t=e.Procedures.getCallers(o,t.workspace),o=0;c=t[o];o++){var _=c.mutationToDom();_=_&&e.Xml.domToText(_),c.domToMutation(s);var w=c.mutationToDom();_!=(w=w&&e.Xml.domToText(w))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(c,"mutation",null,_,w)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var o=0;o<n.length;o++)if(n[o].getProcedureDef){var s=n[o].getProcedureDef();if(s&&e.Names.equals(s[0],t))return n[o]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,o){t=String(t);var s=this.keyMap_[t];if(s&&!o)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+s.toString());s&&o?s.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,o){var s=this.keyMap_[t];if(!s&&!o)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var c=s.indexOf(n);return-1<c?(s.splice(c,1),0==s.length&&delete this.keyMap_[t],!0):(o||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var o=this.serializeKeyEvent_(n);if(!(o=this.getShortcutNamesByKeyCode(o)))return!1;for(var c,s=0;c=o[s];s++)if((!(c=this.registry_[c]).preconditionFn||c.preconditionFn(t))&&c.callback&&c.callback(t,n,c))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var o,n=[];for(o in this.keyMap_)-1<this.keyMap_[o].indexOf(t)&&n.push(o);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var o,n="";for(o in e.ShortcutRegistry.modifierKeys)t.getModifierState(o)&&(""!=n&&(n+="+"),n+=o);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var s,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),o=0;s=t[o];o++)if(0>n.indexOf(s))throw Error(s+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var o="";if(n)for(var s in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[s])&&(""!=o&&(o+="+"),o+=s);return""!=o&&t?o=o+"+"+t:t&&(o=t.toString()),o},new e.ShortcutRegistry,e.VariableModel=function(t,n,o,s){this.workspace=t,this.name=n,this.type=o||"",this.id_=s||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var o=0;o<n.length;o++){var s=n[o].getVarModels();if(s)for(var c=0;c<s.length;c++){var _=s[c],w=_.getId();w&&(t[w]=_)}}for(w in n=[],t)n.push(t[w]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var s,n=Object.create(null),o=0;s=t[o];o++){var c=s.getDeveloperVariables;if(!c&&s.getDeveloperVars&&(c=s.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+s.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]=!0)),c)for(s=c(),c=0;c<s.length;c++)n[s[c]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(s){e.Variables.createVariableButtonHandler(s.getTargetWorkspace())}),n.push(o),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var o=t[t.length-1];if(e.Blocks.variables_set){var s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set"),s.setAttribute("gap",e.Blocks.math_change?8:24),s.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(s)}if(e.Blocks.math_change&&((s=e.utils.xml.createElement("block")).setAttribute("type","math_change"),s.setAttribute("gap",e.Blocks.variables_get?20:8),s.appendChild(e.Variables.generateVariableFieldDom(o)),o=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),s.appendChild(o),n.push(s)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),o=0;for(var c;c=t[o];o++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var o=e.Variables.VAR_LETTER_OPTIONS,s="",c=o.indexOf(t);;){for(var _=!1,w=0;w<n.length;w++)if(n[w].toLowerCase()==t){_=!0;break}if(!_)return t;++c==o.length&&(c=0,s=Number(s)+1),t=o.charAt(c)+s}},e.Variables.createVariableButtonHandler=function(t,n,o){var s=o||"",c=function(_){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,_,function(w){if(w){var M=e.Variables.nameUsedWithAnyType(w,t);if(M){if(M.type==s)var U=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",M.name);else U=(U=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",M.name).replace("%2",M.type);e.alert(U,function(){c(w)})}else t.createVariable(w,s),n&&n(w)}else n&&n(null)})};c("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,o){var s=function(c){var _=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(_,c,function(w){if(w){var M=e.Variables.nameUsedWithOtherType_(w,n.type,t);M?(M=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",M.name).replace("%2",M.type),e.alert(M,function(){s(w)})):(t.renameVariableById(n.getId(),w),o&&o(w))}else o&&o(null)})};s("")},e.Variables.promptName=function(t,n,o){e.prompt(t,n,function(s){s&&((s=s.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||s==e.Msg.NEW_VARIABLE)&&(s=null),o(s)})},e.Variables.nameUsedWithOtherType_=function(t,n,o){o=o.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var c,s=0;c=o[s];s++)if(c.name.toLowerCase()==t&&c.type!=n)return c;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var s,o=0;s=n[o];o++)if(s.name.toLowerCase()==t)return s;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,o,s){var c=e.Variables.getVariable(t,n,o,s);return c||(c=e.Variables.createVariable_(t,n,o,s)),c},e.Variables.getVariable=function(t,n,o,s){var c=t.getPotentialVariableMap(),_=null;if(n&&(!(_=t.getVariableById(n))&&c&&(_=c.getVariableById(n)),_))return _;if(o){if(null==s)throw Error("Tried to look up a variable by name without a type");!(_=t.getVariable(o,s))&&c&&(_=c.getVariable(o,s))}return _},e.Variables.createVariable_=function(t,n,o,s){var c=t.getPotentialVariableMap();return o||(o=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),c?c.createVariable(o,s,n):t.createVariable(o,s,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var o=[];if(n.length!=t.length)for(var s=0;s<t.length;s++){var c=t[s];-1==n.indexOf(c)&&o.push(c)}return o},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),o=t.getCachedParentSvgSize(),s=n.parentNode;if(s){var c=s.offsetWidth;s=s.offsetHeight,o.width!=c&&(n.setAttribute("width",c+"px"),t.setCachedParentSvgSize(c,null)),o.height!=s&&(n.setAttribute("height",s+"px"),t.setCachedParentSvgSize(null,s)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,o=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=o},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(o){o.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,o){o(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var o=t[n];if(o){var s=o.type;null==s||""===s?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[s]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+s+'".'),e.Blocks[s]={init:e.jsonInitFactory_(o)})}else console.warn("Block definition #"+n+" in JSON array is "+o+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,o){for(var s="Blockly",c=e,_=0;_<n.length;++_)s+="."+n[_],c&&(c=c[n[_]]);c&&c!==o&&(t=(void 0===o?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",s).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,o){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=o},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(o){o.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(o){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(o){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,o=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,o,s){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+o+"px,"+s+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+s+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(o,s),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var s,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++)s.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],o=[];this.permanentlyDisabled_.length=0;for(var _,s=this.horizontalLayout?this.GAP_X:this.GAP_Y,c=0;_=t[c];c++)switch(_.custom&&(_=this.getDynamicCategoryContents_(_.custom),_=e.utils.toolbox.convertFlyoutDefToJsonArray(_),t.splice.apply(t,[c,1].concat(_)),_=t[c]),_.kind.toUpperCase()){case"BLOCK":var w=_,M=this.getBlockXml_(w);_=this.createBlock_(M),w=parseInt(w.gap||M.getAttribute("gap"),10),o.push(isNaN(w)?s:w),n.push({type:"block",block:_});break;case"SEP":this.addSeparatorGap_(_,o,s);break;case"LABEL":_=this.createButton_(_,!0),n.push({type:"button",button:_}),o.push(s);break;case"BUTTON":_=this.createButton_(_,!1),n.push({type:"button",button:_}),o.push(s)}return{contents:n,gaps:o}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,o=t.blockxml;if(o&&"string"!=typeof o?n=o:o&&"string"==typeof o?(n=e.Xml.textToDom(o),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,o){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(o)},e.Flyout.prototype.clearOldBlocks_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)o.workspace==this.workspace_&&o.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,o){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(o,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(o){var s=n.targetWorkspace.getGesture(o);s&&(s.setStartBlock(t),s.handleFlyoutStart(o,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,o),e.Events.isEnabled()){for(e.Events.setGroup(!0),o=0;o<t.length;o++){var s=t[o];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(s))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,o){var s=t.createDom();t.moveTo(n,o),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(s,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,o,s,c){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:o,height:s.height,width:s.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[c]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var o=n.getHeightWidth();t.setAttribute("width",o.width),t.setAttribute("height",o.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-o.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(o))for(var s=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(o));o;)o.setEnabled(s),o=o.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var o=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(o=e.Xml.domToBlock(o,n)).getSvgRoot())throw Error("block is not rendered.");var s=n.getOriginOffsetInPixels(),c=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(c,t),(s=e.utils.Coordinate.difference(t,s)).scale(1/n.scale),o.moveBy(s.x,s.y),o},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(o.left+(o.width-s.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();t=t.getToolboxMetrics();var s=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?s?t.height:o.height-this.height_:s?0:o.height:s?0:o.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.TOP,s=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(s.push("h",t+2*this.CORNER_RADIUS),s.push("v",n),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",-t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),s.push("h",t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",n),s.push("h",-t-2*this.CORNER_RADIUS)),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var o=this.workspace_.getMetricsManager(),s=o.getScrollMetrics();n=o.getViewMetrics().left-s.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN,s=o+this.tabWidth_;this.RTL&&(t=t.reverse());for(var _,c=0;_=t[c];c++)if("block"==_.type){for(var U,w=(_=_.block).getDescendants(!1),M=0;U=w[M];M++)U.isInFlyout=!0;_.render(),w=_.getSvgRoot(),M=_.getHeightWidth(),U=_.outputConnection?this.tabWidth_:0,_.moveBy(U=this.RTL?s+M.width:s-U,o),U=this.createRect_(_,U,o,M,c),s+=M.width+n[c],this.addBlockListeners_(w,_,U)}else"button"==_.type&&(this.initFlyoutButton_(_.button,s,o),s+=_.button.width+n[c])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++)t=Math.max(t,s.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;s=n[o];o++)s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(o.top+(o.height-s.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:o.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,s=t+this.CORNER_RADIUS;(s=["M "+(o?s:0)+",0"]).push("h",o?-t:t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",Math.max(0,n)),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",o?t:-t),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var o=this.workspace_.getMetricsManager(),s=o.getScrollMetrics();n=o.getViewMetrics().top-s.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var _,o=this.MARGIN,s=this.RTL?o:o+this.tabWidth_,c=0;_=t[c];c++)if("block"==_.type){for(var U,w=(_=_.block).getDescendants(!1),M=0;U=w[M];M++)U.isInFlyout=!0;_.render(),w=_.getSvgRoot(),M=_.getHeightWidth(),_.moveBy(U=_.outputConnection?s-this.tabWidth_:s,o),U=this.createRect_(_,this.RTL?U-M.width:U,o,M,c),this.addBlockListeners_(w,_,U),o+=M.height+n[c]}else"button"==_.type&&(this.initFlyoutButton_(_.button,s,o),o+=_.button.height+n[c])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++){var c=s.getHeightWidth().width;s.outputConnection&&(c-=this.tabWidth_),t=Math.max(t,c)}for(o=0;s=this.buttons_[o];o++)t=Math.max(t,s.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;s=n[o];o++){if(this.RTL){c=s.getRelativeToSurfaceXY().x;var _=t/this.workspace_.scale-this.MARGIN;s.outputConnection||(_-=this.tabWidth_),s.moveBy(_-c,0)}s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s)}if(this.RTL)for(o=0;s=this.buttons_[o];o++)n=s.getPosition().y,s.moveTo(t/this.workspace_.scale-s.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,o,s){this.workspace_=t,this.targetWorkspace_=n,this.text_=o.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=s,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.onMouseUpWrapper_=null,this.info=o},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),s=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(s+="\u200f"),o.textContent=s,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var c=e.utils.style.getComputedStyle(o,"fontSize"),_=e.utils.style.getComputedStyle(o,"fontWeight"),w=e.utils.style.getComputedStyle(o,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(o,c,_,w),s=e.utils.dom.measureFontMetrics(s,c,_,w),this.height=s.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-s.height/2+s.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var s,o=0;s=t[o];o++){var c=this.blockToCode(s);Array.isArray(c)&&(c=c[0]),c&&(s.outputConnection&&(c=this.scrubNakedValue(c),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,s)+c),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,s))),n.push(c))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var o=0;o<t.length;o++){var s=t[o].getCommentText();s&&n.push(s)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var o=this[t.type];if("function"!=typeof o)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(o=o.call(t,t),Array.isArray(o)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,o[0],n),o[1]]}if("string"==typeof o)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,t)+o),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,o,n);if(null===o)return"";throw SyntaxError("Invalid code generated: "+o)},e.Generator.prototype.valueToCode=function(t,n,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+t.type);var s=t.getInputTargetBlock(n);if(!s||""===(n=this.blockToCode(s)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+s.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+s.type);if(!t)return"";s=!1;var c=Math.floor(o),_=Math.floor(n);if(c<=_&&(c!=_||0!=c&&99!=c))for(s=!0,c=0;c<this.ORDER_OVERRIDES.length;c++)if(this.ORDER_OVERRIDES[c][0]==o&&this.ORDER_OVERRIDES[c][1]==n){s=!1;break}return s&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var s,o=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=o,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);s!=n;)s=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,o){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,o){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,o){e.ToolboxCategory.superClass_.constructor.call(this,t,n,o),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var o;o=n[t];t++)this.flyoutItems_.push(o)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,o){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,o=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var s;s=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,s.kind)||s.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(s),o=!0):(this.createToolboxItem_(s),o=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var o=0;o<t.length;o++){var s=t[o];s.init();var c=s.getDiv();n.appendChild(c),s.getClickTarget&&s.getClickTarget().setAttribute("id",s.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var o,n=0;o=this.getChildToolboxItems()[n];n++)o.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,o){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,o),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var o=this.contents_[n];o&&o.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var s,n=document.createDocumentFragment(),o=0;s=t[o];o++)this.createToolboxItem_(s,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var o=t.kind;"CATEGORY"==o.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(o=e.CollapsibleToolboxCategory.registrationName),(o=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(t=new o(t,this),this.addToolboxItem_(t),t.init(),(o=t.getDiv())&&n.appendChild(o),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var o,n=0;o=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(o)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,o=n+t.height,s=t.left;return t=s+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,s,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var o=t&&t.getName(),s=n&&n.getName();t==n&&(s=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(o,s,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,o,s,c,_){var w=_.scrollbar&&_.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(o=c.absoluteMetrics.left+o,w&&_.RTL&&(o+=e.Scrollbar.scrollbarThickness)):(o=c.absoluteMetrics.left+c.viewMetrics.width-n.width-o,w&&!_.RTL&&(o-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=c.absoluteMetrics.top+s:(t=c.absoluteMetrics.top+c.viewMetrics.height-n.height-s,_.scrollbar&&_.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,o,o+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,o,s){for(var U,c=t.left,_=t.right-t.left,w=t.bottom-t.top,M=0;U=s[M];M++)t.intersects(U)&&(t=new e.utils.Rect(t=o===e.uiPosition.bumpDirection.UP?U.top-w-n:U.bottom+n,t+w,c,c+_),M=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var o=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return o.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(o,"mouseover",this,this.mouseOver_),e.browserEvents.bind(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,o.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var o=n.firstChild||n.nextSibling;if(!o)for(o=n.parentNode;o;){if(o.nextSibling){o=o.nextSibling;break}o=o.parentNode}n=o}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var o=t[t.length-1],s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set_dynamic"),s.setAttribute("gap",24),s.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(s)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),o=0;for(var c;c=t[o];o++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),s=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(s+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,s),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(o=o.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),o===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(o+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(o+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,o){return o.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(o,s){return s.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(o){return e.hideChaff(),o.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(o){return!e.Gesture.inProgress()&&!o.options.readOnly},callback:function(o){return e.hideChaff(),o.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var o=0,s=0;s<n.length;s++)for(var c=n[s];c;)setTimeout(c.setCollapsed.bind(c,t),o),c=c.getNextBlock(),o+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var o=t.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),o=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,o):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(s){s&&e.ContextMenuItems.deleteNext_(n,o)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var o,t=e.utils.xml.createElement("xml"),n=0;o=this.quarkNames_[n];n++){var s=e.utils.xml.createElement("block");s.setAttribute("type",o),t.appendChild(s)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(o=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=o?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),o=n.width+n.x,s=n.height+3*t,c=this.workspace_.getFlyout();if(c){var _=c.getWorkspace().getMetricsManager().getScrollMetrics();s=Math.max(s,_.height+20),o+=c.getWidth()}this.block_.RTL&&(o=-n.x),o+=3*t,(Math.abs(this.workspaceWidth_-o)>t||Math.abs(this.workspaceHeight_-s)>t)&&(this.workspaceWidth_=o,this.workspaceHeight_=s,this.bubble_.setBubbleSize(o+t,s+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var s,o=0;s=n[o];o++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var c=this,_=this.block_;_.saveConnections(this.rootBlock_),this.sourceListener_=function(){_.saveConnections(c.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var o,n=0;o=t[n];n++){var s=o.getRelativeToSurfaceXY();if(20>s.y&&o.moveBy(0,20-s.y),o.RTL){var c=-20,_=this.workspace_.getFlyout();_&&(c-=_.getWidth()),s.x>c&&o.moveBy(c-s.x,0)}else 20>s.x&&o.moveBy(20-s.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(o=this.block_).mutationToDom())&&e.Xml.domToText(t),n=o.rendered,o.rendered=!1,o.compose(this.rootBlock_),o.rendered=n,o.initSvg(),o.rendered&&o.render(),t!=(n=(n=o.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(o,"mutation",null,t,n));var w=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(w),o.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var s,n=t.getAllBlocks(!1),o=0;s=n[o];o++)s.setStyle(s.getStyleName());if(o=t.getFlyout())for(t=o.workspace_.getAllBlocks(!1),o=0;s=t[o];o++)s.setStyle(s.getStyleName())}},e.Mutator.reconnect=function(t,n,o){if(!t||!t.getSourceBlock().workspace)return!1;o=n.getInput(o).connection;var s=t.targetBlock();return!(s&&s!=n||o.targetConnection==t||(o.isConnected()&&o.disconnect(),o.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var o=t.options.parentWorkspace;t.isFlyout?o&&o.options&&(n=o.options.parentWorkspace):o&&(n=o)}return n},e.FieldTextInput=function(t,n,o){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var s,t=0,n=0,o=0;s=this.sourceBlock_.inputList[o];o++){for(var c=0;s.fieldRow[c];c++)t++;s.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),s=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(t.style.fontSize=s,n.style.fontSize=s,s=e.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){s=((s=this.getScaledBBox()).bottom-s.top)/2+"px";var c=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*o+"px solid "+c,t.style.borderRadius=s,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*o+"px")}return n.style.borderRadius=s,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,o){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,o),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var o=0;360>o;o+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(o%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/o),isNaN(n)||(n=e.utils.math.toDegrees(n),0>o?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var o=e.FieldAngle.HALF,s=e.FieldAngle.HALF;if(!isNaN(n)){var c=Number(this.clockwise_),_=e.utils.math.toRadians(this.offset_),w=Math.cos(_)*e.FieldAngle.RADIUS,M=Math.sin(_)*-e.FieldAngle.RADIUS;c&&(n=2*_-n),o+=Math.cos(n)*e.FieldAngle.RADIUS,s-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-_)/Math.PI)%2),c&&(n=1-n),t.push(" l ",w,",",M," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",c," ",o,",",s," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",s)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,o){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,o){e.FieldColour.superClass_.constructor.call(this,t,n,o),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var o=this.colours_||e.FieldColour.COLOURS,s=this.columns_||e.FieldColour.COLUMNS,c=this.highlightedIndex_%s,_=Math.floor(this.highlightedIndex_/s);c+=t,_+=n,0>t?0>c&&0<_?(c=s-1,_--):0>c&&(c=0):0<t?c>s-1&&_<Math.floor(o.length/s)-1?(c=0,_++):c>s-1&&c--:0>n?0>_&&(_=0):0<n&&_>Math.floor(o.length/s)-1&&(_=Math.floor(o.length/s)-1),this.setHighlightedCell_(this.picker_.childNodes[_].childNodes[c],_*s+c)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var o=this.getHighlighted_();o&&e.utils.dom.removeClass(o,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,o=this.titles_||e.FieldColour.TITLES,s=this.getValue(),c=document.createElement("table");c.className="blocklyColourTable",c.tabIndex=0,c.dir="ltr",e.utils.aria.setRole(c,e.utils.aria.Role.GRID),e.utils.aria.setState(c,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(c,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(c,e.utils.aria.State.COLCOUNT,t);for(var _,w=0;w<n.length;w++){w%t==0&&(_=document.createElement("tr"),e.utils.aria.setRole(_,e.utils.aria.Role.ROW),c.appendChild(_));var M=document.createElement("td");_.appendChild(M),M.label=n[w],M.title=o[w]||n[w],M.id=e.utils.IdGenerator.getNextUniqueId(),M.setAttribute("data-index",w),e.utils.aria.setRole(M,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(M,e.utils.aria.State.LABEL,n[w]),e.utils.aria.setState(M,e.utils.aria.State.SELECTED,n[w]==s),M.style.backgroundColor=n[w],n[w]==s&&(M.className="blocklyColourSelected",this.highlightedIndex_=w)}this.onClickWrapper_=e.browserEvents.conditionalBind(c,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(c,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(c,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(c,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(c,"keydown",this,this.onKeyDown_),this.picker_=c},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,o){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,o),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<n.length;o++){var s=n[o][0],c=n[o][1];if("object"==typeof s){var _=new Image(s.width,s.height);_.src=s.src,_.alt=s.alt||"",s=_}(s=new e.MenuItem(s,c)).setRole(e.utils.aria.Role.OPTION),s.setRightToLeft(this.sourceBlock_.RTL),s.setCheckable(!0),t.addChild(s),s.setChecked(c==this.value_),c==this.value_&&(this.selectedMenuItem_=s),s.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,o=0;o<t.length;o++){var s=t[o][0];"string"==typeof s?t[o][0]=e.utils.replaceMessageReferences(s):(null!=s.alt&&(t[o][0].alt=e.utils.replaceMessageReferences(s.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],o=0;o<t.length;o++)n.push(t[o][0]);o=e.utils.string.shortestStringLength(n),s=e.utils.string.commonWordPrefix(n,o);var c=e.utils.string.commonWordSuffix(n,o);!s&&!c||o<=s+c||(s&&(this.prefixField=n[0].substring(0,s-1)),c&&(this.suffixField=n[0].substr(1-c)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,s,c))}}},e.FieldDropdown.applyTrim_=function(t,n,o){for(var s=[],c=0;c<t.length;c++){var _=t[c][0],w=t[c][1];_=_.substring(n,_.length-o),s[c]=[_,w]}return s},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var c,n=!1,o=this.getOptions(!0),s=0;c=o[s];s++)if(c[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var o,n=0;o=t[n];n++)o[1]==this.value_&&(this.selectedOption_=o)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var o=!!this.borderRect_,s=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var c=this.svgArrow_?this.positionSVGArrow_(t+o,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+c+2*o,this.size_.height=s;var _=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+c):(_=t+c,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",s/2-n/2),this.positionTextElement_(_+o,t+c)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=0;this.svgArrow_&&(s=this.positionSVGArrow_(o+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+s+2*t,this.size_.height=n,this.positionTextElement_(t,o)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,c=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?o:t+s)+","+n+")"),c+s},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,o=0;o<t.length;++o){var s=t[o];Array.isArray(s)?"string"!=typeof s[1]?(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option id must be a string. Found "+s[1]+" in: ",s)):s[0]&&"string"!=typeof s[0]&&"string"!=typeof s[0].src&&(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must have a string label or image description. Found"+s[0]+" in: ",s)):(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must be an array. Found: ",s))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,o){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,o,s,c,_,w){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),o=Number(e.utils.replaceMessageReferences(o)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,w),w||(this.flipRtl_=!!_,this.altText_=e.utils.replaceMessageReferences(s)||""),this.size_=new e.utils.Size(n,o+e.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,"function"==typeof c&&(this.clickHandler_=c),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,o){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,o),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var o=this.isOverflowedY_?this.maxLines_:n.length,s=0;s<o;s++){var c=n[s];c.length>this.maxDisplayLength?c=c.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&s===o-1&&(c=c.substring(0,c.length-3)+"..."),t+=c=c.replace(/\s/g,e.Field.NBSP),s!==o-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,o=0;o<t.length;o++){var s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[o])),n+=s}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,o=0,s=0;s<t.length;s++){var c=e.utils.dom.getTextWidth(t[s]);c>n&&(n=c),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),c=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var _=this.getConstants().FIELD_TEXT_FONTSIZE,w=this.getConstants().FIELD_TEXT_FONTWEIGHT,M=this.getConstants().FIELD_TEXT_FONTFAMILY;for(s=0;s<t.length;s++){t[s].length>this.maxDisplayLength&&(t[s]=t[s].substring(0,this.maxDisplayLength)),c.textContent=t[s];var U=e.utils.dom.getFastTextWidth(c,_,w,M);U>n&&(n=U)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",o)),this.size_.width=n,this.size_.height=o,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var s=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=s,o.style.fontSize=s,o.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",s=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var c=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return o.style.padding=c+"px "+s+"px "+c+"px "+s+"px",s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=s*n+"px",t.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,o,s,c,_){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,c,_),_||this.setConstraints(n,o,s)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,o){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(o),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var o=n.indexOf(".");this.decimalPlaces_=-1==o?t?0:null:n.length-o-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,o,s,c){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),c&&this.configure_(c),n&&this.setValidator(n),c||this.setTypes_(o,s)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),o=t.textContent,s=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,o,s),null!=s&&s!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var o=0;o<n.length;o++)if(t==n[o])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var o=!1,s=0;s<t.length;s++)t[s]==n&&(o=!0);if(!o)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),s=0;s<o.length;s++){var c=this.sourceBlock_.workspace.getVariablesOfType(o[s]);n=n.concat(c)}for(n.sort(e.VariableModel.compareByName),o=[],s=0;s<n.length;s++)o[s]=[n[s].name,n[s].getId()];return o.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&o.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),o},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,o,s){return t+" "+o+" "+o+" "+n+s},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var o,n=t.blockStyles;for(o in n)this.blockStyles[o]=this.validatedBlockStyle_(n[o]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(_){var w=-(_=_?-1:1),M=o/2,U=M+2.5,V=M+.5,H=e.utils.svgPaths.point(-n,_*M);return M=e.utils.svgPaths.point(n,_*M),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,_*U),e.utils.svgPaths.point(-n,w*V),H])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*w),M])}var n=this.TAB_WIDTH,o=this.TAB_HEIGHT,s=t(!0),c=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:c,pathUp:s}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(w){return e.utils.svgPaths.line([e.utils.svgPaths.point(w*s,o),e.utils.svgPaths.point(3*w,0),e.utils.svgPaths.point(w*s,-o)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,s=(n-3)/2,c=t(1),_=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:c,pathRight:_}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),s=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:o,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:s,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,o){this.injectCSS_(n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},o),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var o=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=o:((n=document.createElement("style")).id=t,t=document.createTextNode(o),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,o){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=o},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,o=t.getPreviousBlock();return!!t.outputConnection||n||!!o&&o.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var c,t=0,n=0,o=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isHat(c)?o=Math.max(o,c.ascenderHeight):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var c,t=0,n=0,o=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isNextConnection(c)?o=Math.max(o,c.height):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,o){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,o)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var o,t=0,n=0;o=this.elements[n];n++)this.width+=o.width,e.blockRendering.Types.isInput(o)&&(e.blockRendering.Types.isStatementInput(o)?t+=o.connectedBlockWidth:e.blockRendering.Types.isExternalInput(o)&&0!=o.connectedBlockWidth&&(t+=o.connectedBlockWidth-o.connectionWidth)),e.blockRendering.Types.isSpacer(o)||(this.height=Math.max(this.height,o.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var s,n=this.block_.getIcons(),o=0;s=n[o];o++){var c=new e.blockRendering.Icon(this.constants_,s);this.isCollapsed&&s.collapseHidden?this.hiddenIcons.push(c):t.elements.push(c)}for(s=null,o=0;n=this.block_.inputList[o];o++)if(n.isVisible()){for(this.shouldStartNewRow_(n,s)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),s=0;c=n.fieldRow[s];s++)t.elements.push(new e.blockRendering.Field(this.constants_,c,n));this.addInput_(n,t),s=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,o=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new o(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new o(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var o=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var s=0;s<o.length-1;s++){n.elements.push(o[s]);var c=this.getInRowSpacing_(o[s],o[s+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,c))}n.elements.push(o[o.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var c,t=0,n=0,o=0,s=0;c=this.rows[s];s++){if(c.measure(),n=Math.max(n,c.width),c.hasStatement){var _=c.getLastInput();t=Math.max(t,c.width-_.width)}o=Math.max(o,c.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,s=0;c=this.rows[s];s++)c.hasStatement&&(c.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var o=n.width;0<(o=this.getDesiredRowWidth_(n)-o)&&this.addAlignmentPadding_(n,o),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var o=t.getFirstSpacer(),s=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?s.width+=n:t.align==e.constants.ALIGN.CENTRE?(o.width+=n/2,s.width+=n/2):t.align==e.constants.ALIGN.RIGHT?o.width+=n:s.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),o=t.width-n.width,s=this.statementEdge;0<(o=s-o)&&this.addAlignmentPadding_(t,o),o=t.width,s=this.getDesiredRowWidth_(t),n.width+=s-o,n.height=Math.max(n.height,t.height),t.width+=s-o,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var o=this.getSpacerRowHeight_(t,n),s=this.getSpacerRowWidth_(t,n);return o=new e.blockRendering.SpacerRow(this.constants_,o,s),t.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var s,n=t.xPos,o=0;s=t.elements[o];o++)e.blockRendering.Types.isSpacer(s)&&(s.height=t.height),s.xPos=n,s.centerline=this.getElemCenterline_(t,s),n+=s.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++)s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks),this.recordElemPositions_(s);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,o){if(e.blockRendering.Debug.config.rowSpacers){var s=Math.abs(t.height),c=0>t.height;c&&(n-=s),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:s,stroke:c?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,o){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var s=0>t.width,c=s?t.xPos-n:t.xPos;o&&(c=-(c+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:c,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:s?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var o=t.xPos;n&&(o=-(o+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,o="magenta",s="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,s=o="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,o="goldenrod",s="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,s=o="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:s,stroke:o},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,o){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,o){for(var s=0,c=t.elements.length;s<c;s++){var _=t.elements[s];_?e.blockRendering.Types.isSpacer(_)?this.drawSpacerElem(_,t.height,o):this.drawRenderedElem(_,o):console.warn("A row has an undefined or null element.",t,_)}this.drawRenderedRow(t,n,o)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var c,o=0,s=0;c=n.rows[s];s++)e.blockRendering.Types.isBetweenRowSpacer(c)?this.drawSpacerRow(c,o,n.RTL):this.drawRowWithElements(c,o,n.RTL),o+=c.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var s,o=0;s=n[o];o++)e.blockRendering.Types.isLeftRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(s)?this.outlinePath_+=s.shape.pathLeft:e.blockRendering.Types.isHat(s)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(s)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",s.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var o="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+o+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var s=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+n+e.utils.svgPaths.lineOnAxis("v",s)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var _,o=0,s="",c=n.length-1;_=n[c];c--)e.blockRendering.Types.isNextConnection(_)?s+=_.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(_)?s+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(_)?s+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(_)?(s+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(_)&&(s+=e.utils.svgPaths.lineOnAxis("h",-1*_.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-o),this.outlinePath_+=s},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var s,o=0;s=n.elements[o];o++)e.blockRendering.Types.isInlineInput(s)?this.drawInlineInput_(s):(e.blockRendering.Types.isIcon(s)||e.blockRendering.Types.isField(s))&&this.layoutField_(s)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var o=t.centerline-t.height/2,s=t.xPos,c="";this.info_.RTL&&(s=-(s+t.width),t.flipRtl&&(s+=t.width,c="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+s+","+o+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+s+","+o+")"+c),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,o=t.height,s=t.connectionOffsetY,c=t.connectionHeight+s;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-o/2)+e.utils.svgPaths.lineOnAxis("v",s)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",o-c)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-o)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,o,s){var c=t?t.workspace.id:void 0;s&&s.getType()==e.ASTNode.types.WORKSPACE&&(c=s.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,c),this.blockId=t?t.id:null,this.oldNode=o,this.newNode=s,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,o){this.workspace_=t,this.marker_=o,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=o.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||o,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,o=t.height,s=o*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,c=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var _=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,c,s,_)}else t.outputConnection?(_=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,o,_)):this.positionBlock_(n,c,s);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,o=t.getSize().height;this.positionRect_(0,0,n,o),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var o=0;n=n.getOffsetInBlock().y;var s=t.getHeightWidth().width;this.workspace_.RTL&&(o=-s),this.positionLine_(o,n,s),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),o=n.width+this.constants_.CURSOR_STACK_PADDING,s=-this.constants_.CURSOR_STACK_PADDING/2,_=s;this.workspace_.RTL&&(_=-(o+s)),this.positionRect_(_,-this.constants_.CURSOR_STACK_PADDING/2,o,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,o){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,o=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,o){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",o),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,o){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-o.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,o,s){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+s.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,o,s){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",o),this.markerSvgRect_.setAttribute("height",s),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var o=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(o,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,o){return!!e.Connection.getConnectionForOrphanedConnection(t,o===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(o,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var o,n=0;o=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(o)&&0!=o.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",o.xPos+o.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,o=t.xPos+t.connectionWidth,s=t.centerline-t.height/2,c=t.width-t.connectionWidth,_=s+n;this.RTL_?(s=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(o-n,_)+e.utils.svgPaths.lineOnAxis("v",s)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",c)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,_)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-c)+e.utils.svgPaths.moveTo(o,s+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var s=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(var c=0;c<s.length-1;c++){o.elements.push(s[c]);var _=this.getInRowSpacing_(s[c],s[c+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,_))}o.elements.push(s[s.length-1]),o.endsWithElemSpacer()&&(_=this.getInRowSpacing_(s[s.length-1],null),t&&o.hasDummyInput&&(_+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,_)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(o+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=e.blockRendering.Types.isInlineInput(n)?o+n.height/2:o+t.height/2,o},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var s,t=0,n=null,o=this.rows.length-1;s=this.rows[o];o--)s.nextRightEdge=t,e.blockRendering.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),n&&n.hasStatement&&s.width<n.width?s.nextRightEdge=n.width:t=s.width,n=s);for(o=t=0;s=this.rows[o];o++)s.hasStatement?t=this.getDesiredRowWidth_(s):e.blockRendering.Types.isSpacer(s)?s.width=Math.max(t,s.nextRightEdge):(0<(t=Math.max(t,s.nextRightEdge)-s.width)&&this.addAlignmentPadding_(s,t),t=s.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(o=this.info_.RTL?-1*o:o+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t+n)-n,s=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-o-n,t-o)),c=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),_=e.utils.svgPaths.moveBy(o,-o)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-o,o+n));return{width:t+n,height:t,pathTop:function(w){return w?s:""},pathBottom:function(w){return w?c:_}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t-n)+n,s=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-o,-o+n)),c=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),_=-o,w=e.utils.svgPaths.moveBy(o,_)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-o+n,-_-t));return{height:t,topLeft:function(M){return M?s:c},bottomLeft:function(){return w}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),s=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),c=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),_=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(w){return w?o:c},pathDown:function(w){return w?s:_}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),o=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(s){return s?n:o}}},e.geras.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var s=o.elements;o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0])));for(var c=0;c<s.length-1;c++){o.elements.push(s[c]);var _=this.getInRowSpacing_(s[c],s[c+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,_))}o.elements.push(s[s.length-1]),o.endsWithElemSpacer()&&(_=this.getInRowSpacing_(s[s.length-1],null),t&&o.hasDummyInput&&(_+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,_)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(o,s,c){var _=o/2;return e.utils.svgPaths.lineTo(-(c=c?-1:1)*(_=_>n?n:_),o=(s?-1:1)*o/2)+e.utils.svgPaths.lineTo(c*_,o)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(o){return(o/=2)>n?n:o},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(s,c,_){var w=s>o?s-o:0;return e.utils.svgPaths.arc("a","0 0,1",s=(s>o?o:s)/2,e.utils.svgPaths.point((c?-1:1)*s,(c?-1:1)*s))+e.utils.svgPaths.lineOnAxis("v",(_?1:-1)*w)+e.utils.svgPaths.arc("a","0 0,1",s,e.utils.svgPaths.point((c?1:-1)*s,(c?-1:1)*s))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(s){return(s/=2)>n?n:s},height:function(s){return s},connectionOffsetY:function(s){return s/2},connectionOffsetX:function(s){return-s},pathDown:function(s){return t(s,!1,!1)},pathUp:function(s){return t(s,!0,!1)},pathRightDown:function(s){return t(s,!1,!0)},pathRightUp:function(s){return t(s,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(o,s,c){return o-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?-1:1)*n,(s?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(c?1:-1)*o)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?1:-1)*n,(s?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(o){return n},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(V){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/2,0),e.utils.svgPaths.point(V*c*3/4,w/2),e.utils.svgPaths.point(V*c,w)])+e.utils.svgPaths.line([e.utils.svgPaths.point(V*c,_)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/4,w/2),e.utils.svgPaths.point(V*c/2,w),e.utils.svgPaths.point(V*c,w)])+e.utils.svgPaths.lineOnAxis("h",V*s)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/2,0),e.utils.svgPaths.point(V*c*3/4,-w/2),e.utils.svgPaths.point(V*c,-w)])+e.utils.svgPaths.line([e.utils.svgPaths.point(V*c,-_)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/4,-w/2),e.utils.svgPaths.point(V*c/2,-w),e.utils.svgPaths.point(V*c,-w)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,s=n/3,c=s/3,_=o/2,w=_/2,M=t(1),U=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:M,pathRight:U}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:o,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,o){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,s=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return s||o?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),s&&o?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var o=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return t.yPos+o.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var o,c,s=0;(c=t.elements[s])&&(e.blockRendering.Types.isSpacer(c)&&(o=c),!e.blockRendering.Types.isField(c)||c.parentInput!=t.rightAlignedDummyInput);s++);if(o)return o.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,o=2;o<this.rows.length-1;o+=2){var s=this.rows[o-1],c=this.rows[o],_=this.rows[o+1];if(s=2==o?!!this.topRow.hasPreviousConnection:!!s.followsStatement,_=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!_.precedesStatement,e.blockRendering.Types.isInputRow(c)&&c.hasStatement)c.measure(),n=c.width-c.getLastInput().width+t;else if(s&&(2==o||_)&&e.blockRendering.Types.isInputRow(c)&&!c.hasStatement){_=c.xPos,s=null;for(var M,w=0;M=c.elements[w];w++)e.blockRendering.Types.isSpacer(M)&&(s=M),!(s&&(e.blockRendering.Types.isField(M)||e.blockRendering.Types.isInput(M))&&_<n)||e.blockRendering.Types.isField(M)&&(M.field instanceof e.FieldLabel||M.field instanceof e.FieldImage)||(s.width+=n-_),_+=M.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var o,t=0,n=0;o=this.rows[n];n++)o.yPos=t,t+=o.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),o=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(o=n,this.rightSide.height=t,this.rightSide.width=o,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+o),this.startX=n,this.width+=n+o,this.widthWithChildren+=n+o}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var o,t=0,n=0;o=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(o)){t=o.elements[o.elements.length-2];var s=this.getNegativeSpacing_(o.elements[1]),c=this.getNegativeSpacing_(t),_=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=s+c)<_&&(s=(t=this.width-_)/2,c=t/2),o.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-s)),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-c))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;o=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(o)&&(o.elements[1].width-=t,o.elements[1].widthWithConnectedBlocks-=t),o.width-=t,o.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,o=this.outputConnection.shape.type,s=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return o===s.SHAPES.ROUND?n-(o=this.height/2>(o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?o:this.height/2)*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o))):0;if(e.blockRendering.Types.isInlineInput(t)){var c=t.connectedBlock;return t=c?c.pathObject.outputShapeType:t.shape.type,c&&c.outputConnection&&(c.statementInputCount||c.nextConnection)||o==s.SHAPES.HEXAGONAL&&o!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][t]}return e.blockRendering.Types.isField(t)?o==s.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*s.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],o=this.rows[t],s=this.rows[t+1],c=2==t,_=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(c?this.topRow.hasPreviousConnection:n.followsStatement){var w=3==o.elements.length&&(o.elements[1].field instanceof e.FieldLabel||o.elements[1].field instanceof e.FieldImage);if(!c&&w)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(c||_){if(_){for(c=!1,_=0;w=o.elements[_];_++)if(e.blockRendering.Types.isInlineInput(w)&&w.connectedBlock&&!w.connectedBlock.isShadow()&&40<=w.connectedBlock.getHeightWidth().height){c=!0;break}c&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var o=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",o)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-o)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width,s=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,c=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+s+e.utils.svgPaths.lineOnAxis("v",c)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,o){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,o){e.zelos.PathObject.superClass_.constructor.call(this,t,n,o),this.constants=o,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,o)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e}.apply(B,[]))&&(k.exports=p)},18783:function(k,B,f){var p,e;p=[f(55484)],void 0!==(e=function(t){"use strict";return t.Blocks={},t.Blocks}.apply(B,p))&&(k.exports=e)},55484:function(k,B,f){var p,e;p=[f(81069)],void 0!==(e=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("lists_create_with_container");o.initSvg();for(var s=o.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var _=n.newBlock("lists_create_with_item");_.initSvg(),s.connect(_.previousConnection),s=_.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var s=this.getInput("ADD"+o).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var s=this.getInput("ADD"+o);n.valueConnection_=s&&s.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(s){s="REMOVE"==s,this.getSourceBlock().updateStatement_(s)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var o=this;this.setTooltip(function(){var s=o.getFieldValue("MODE"),c=o.getFieldValue("WHERE"),_="";switch(s+" "+c){case"GET FROM_START":case"GET FROM_END":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(_+="  "+("FROM_START"==c?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),_})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){var o="true"==n.getAttribute("statement");this.updateStatement_(o),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var _=this.getSourceBlock();return _.updateAt_(c),_.setFieldValue(s,"WHERE"),null}});this.getInput("AT").appendField(o,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var o=this;this.setTooltip(function(){var s=o.getFieldValue("MODE"),c=o.getFieldValue("WHERE"),_="";switch(s+" "+c){case"SET FROM_START":case"SET FROM_END":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(_+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),_})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var _=this.getSourceBlock();return _.updateAt_(c),_.setFieldValue(s,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(o,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var _="FROM_START"==c||"FROM_END"==c;if(_!=o){var w=this.getSourceBlock();return w.updateAt_(n,_),w.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,o=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(s){n.updateType_(s)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(o,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var s=n.getFieldValue("MODE");if("SPLIT"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+s)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var o=this.getInput("INPUT").connection;o.setShadowDom(null);var s=o.targetBlock();s&&(o.disconnect(),s.isShadow()?s.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var o=n.newBlock("controls_if_if");o.initSvg();for(var s=o.nextConnection,c=1;c<=this.elseifCount_;c++){var _=n.newBlock("controls_if_elseif");_.initSvg(),s.connect(_.previousConnection),s=_.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),s.connect(n.previousConnection)),o},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var o=[null],s=[null],c=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,o.push(n.valueConnection_),s.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,c=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(o,s,c)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var o=1;n;){switch(n.type){case"controls_if_elseif":var s=this.getInput("IF"+o),c=this.getInput("DO"+o);n.valueConnection_=s&&s.connection.targetConnection,n.statementConnection_=c&&c.connection.targetConnection,o++;break;case"controls_if_else":c=this.getInput("ELSE"),n.statementConnection_=c&&c.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],o=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(var c=1;this.getInput("IF"+c);){var _=this.getInput("IF"+c),w=this.getInput("DO"+c);n.push(_.connection.targetConnection),o.push(w.connection.targetConnection),c++}this.updateShape_(),this.reconnectChildBlocks_(n,o,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,o,s){for(var c=1;c<=this.elseifCount_;c++)t.Mutator.reconnect(n[c],this,"IF"+c),t.Mutator.reconnect(o[c],this,"DO"+c);t.Mutator.reconnect(s,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var o=this.getInputTargetBlock("A"),s=this.getInputTargetBlock("B");o&&s&&!this.workspace.connectionChecker.doTypeChecks(o.outputConnection,s.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==o&&(o.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(o=this.prevBlocks_[1])!==s&&(s.unplug(),!o||o.isDisposed()||o.isShadow()||this.getInput("B").connection.connect(o.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var o=this.getInputTargetBlock("THEN"),s=this.getInputTargetBlock("ELSE"),c=this.outputConnection.targetConnection;if((o||s)&&c)for(var _=0;2>_;_++){var w=1==_?o:s;w&&!w.workspace.connectionChecker.doTypeChecks(w.outputConnection,c)&&(t.Events.setGroup(n.group),c===this.prevParentConnection_?(this.unplug(),c.getSourceBlock().bumpNeighbours()):(w.unplug(),w.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=c}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var o=this.getField("VAR").getVariable(),s=o.name;if(!this.isCollapsed()&&null!=s){var c={enabled:!0};c.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",s),o=t.Variables.generateVariableFieldDom(o),(s=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.appendChild(o),c.callback=t.ContextMenu.callbackFactory(this,s),n.push(c)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var o=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(o?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var s=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(o),t.Events.setGroup(s)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",o),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var o=this.getInput("DIVISOR");n?o||this.appendValueInput("DIVISOR").setCheck("Number"):o&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var o=t.utils.xml.createElement("mutation");n&&o.setAttribute("name",this.getFieldValue("NAME"));for(var s=0;s<this.argumentVarModels_.length;s++){var c=t.utils.xml.createElement("arg"),_=this.argumentVarModels_[s];c.setAttribute("name",_.name),c.setAttribute("varid",_.getId()),n&&this.paramIds_&&c.setAttribute("paramId",this.paramIds_[s]),o.appendChild(c)}return this.hasStatements_||o.setAttribute("statements","false"),o},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var s,o=0;s=n.childNodes[o];o++)if("arg"==s.nodeName.toLowerCase()){var c=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(c),null!=(s=t.Variables.getOrCreateVariablePackage(this.workspace,s,c,""))?this.argumentVarModels_.push(s):console.log("Failed to create a variable with name "+c+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var o=t.utils.xml.createElement("block");o.setAttribute("type","procedures_mutatorcontainer");var s=t.utils.xml.createElement("statement");s.setAttribute("name","STACK"),o.appendChild(s);for(var c=0;c<this.arguments_.length;c++){var _=t.utils.xml.createElement("block");_.setAttribute("type","procedures_mutatorarg");var w=t.utils.xml.createElement("field");w.setAttribute("name","NAME");var M=t.utils.xml.createTextNode(this.arguments_[c]);w.appendChild(M),_.appendChild(w),w=t.utils.xml.createElement("next"),_.appendChild(w),s.appendChild(_),s=w}return n=t.Xml.domToBlock(o,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var o=n.getInputTargetBlock("STACK");o&&!o.isInsertionMarker();){var s=o.getFieldValue("NAME");this.arguments_.push(s),s=this.workspace.getVariable(s,""),this.argumentVarModels_.push(s),this.paramIds_.push(o.id),o=o.nextConnection&&o.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,o){var s=this.workspace.getVariableById(n);if(""==s.type){s=s.name,o=this.workspace.getVariableById(o);for(var c=!1,_=0;_<this.argumentVarModels_.length;_++)this.argumentVarModels_[_].getId()==n&&(this.arguments_[_]=o.name,this.argumentVarModels_[_]=o,c=!0);c&&(this.displayRenamedVar_(s,o.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var o=n.name,s=!1,c=0;c<this.argumentVarModels_.length;c++)if(this.argumentVarModels_[c].getId()==n.getId()){var _=this.arguments_[c];this.arguments_[c]=o,s=!0}s&&(this.displayRenamedVar_(_,o),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,o){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var _,s=this.mutator.workspace_.getAllBlocks(!1),c=0;_=s[c];c++)"procedures_mutatorarg"==_.type&&t.Names.equals(n,_.getFieldValue("NAME"))&&_.setFieldValue(o,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var o={enabled:!0},s=this.getFieldValue("NAME");o.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",s);var c=t.utils.xml.createElement("mutation");for(c.setAttribute("name",s),s=0;s<this.arguments_.length;s++){var _=t.utils.xml.createElement("arg");_.setAttribute("name",this.arguments_[s]),c.appendChild(_)}if((s=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),s.appendChild(c),o.callback=t.ContextMenu.callbackFactory(this,s),n.push(o),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)(o={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(c=this.argumentVarModels_[s]).name),c=t.Variables.generateVariableFieldDom(c),(_=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),_.appendChild(c),o.callback=t.ContextMenu.callbackFactory(this,_),n.push(o)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var o=this.getSourceBlock(),s=t.Mutator.findParentWs(o.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var c=(o.workspace.targetWorkspace||o.workspace).getAllBlocks(!1),_=n.toLowerCase(),w=0;w<c.length;w++)if(c[w].id!=this.getSourceBlock().id){var M=c[w].getFieldValue("NAME");if(M&&M.toLowerCase()==_)return null}return o.isInFlyout||((o=s.getVariable(n,""))&&o.name!=n&&s.renameVariableById(o.getId(),n),o||(o=s.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(o)),n},deleteIntermediateVars_:function(n){var o=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(o)for(var s=0;s<this.createdVariables_.length;s++){var c=this.createdVariables_[s];c.name!=n&&o.deleteVariableById(c.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,o){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(o,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",o)))},setProcedureParameters_:function(n,o){var s=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),c=s&&s.mutator&&s.mutator.isVisible();if(c||(this.quarkConnections_={},this.quarkIds_=null),o)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=o;else{if(o.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),s=this.rendered,this.rendered=!1;for(var _=0;_<this.arguments_.length;_++){var w=this.getInput("ARG"+_);w&&(this.quarkConnections_[this.quarkIds_[_]]=w=w.connection.targetConnection,c&&w&&-1==o.indexOf(this.quarkIds_[_])&&(w.disconnect(),w.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],_=0;_<this.arguments_.length;_++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[_],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=o)for(_=0;_<this.arguments_.length;_++)(o=this.quarkIds_[_])in this.quarkConnections_&&(t.Mutator.reconnect(w=this.quarkConnections_[o],this,"ARG"+_)||delete this.quarkConnections_[o]);(this.rendered=s)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var o=this.getField("ARGNAME"+n);if(o){t.Events.disable();try{o.setValue(this.arguments_[n])}finally{t.Events.enable()}}else o=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(o,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var o=0;o<this.arguments_.length;o++){var s=t.utils.xml.createElement("arg");s.setAttribute("name",this.arguments_[o]),n.appendChild(s)}return n},domToMutation:function(n){var o=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),o),o=[];for(var _,s=[],c=0;_=n.childNodes[c];c++)"arg"==_.nodeName.toLowerCase()&&(o.push(_.getAttribute("name")),s.push(_.getAttribute("paramId")));this.setProcedureParameters_(o,s)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var o=this.getProcedureCall();if(!(o=t.Procedures.getDefinition(o,this.workspace))||o.type==this.defType_&&JSON.stringify(o.getVars())==JSON.stringify(this.arguments_)||(o=null),!o){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(o=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var s=this.getRelativeToSurfaceXY(),c=s.y+2*t.SNAP_RADIUS;o.setAttribute("x",s.x+t.SNAP_RADIUS*(this.RTL?-1:1)),o.setAttribute("y",c),s=this.mutationToDom(),o.appendChild(s),(s=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(c=this.getProcedureCall())||(c=t.Procedures.findLegalName("",this),this.renameProcedure("",c)),s.appendChild(t.utils.xml.createTextNode(c)),o.appendChild(s),n.appendChild(o),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))&&o.id==n.blockId&&((o=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(o)))},customContextMenu:function(n){if(this.workspace.isMovable()){var o={enabled:!0};o.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var s=this.getProcedureCall(),c=this.workspace;o.callback=function(){var _=t.Procedures.getDefinition(s,c);_&&(c.centerOnBlock(_.id),_.select())},n.push(o)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var o=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(o.type)){n=!0;break}o=o.getSurroundParent()}while(o);n?("procedures_defnoreturn"==o.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=o.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var _="FROM_START"==c||"FROM_END"==c;if(_!=o){var w=this.getSourceBlock();return w.updateAt_(n,_),w.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var o=this;n=new t.FieldDropdown(n,function(s){o.updateType_(s)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],o=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(s){o.updateType_(s)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var s,o=0;s=this.inputList[o];o++)for(var _,c=0;_=s.fieldRow[c];c++)if(n==_.name)return s.insertFieldAt(c,this.newQuote_(!0)),void s.insertFieldAt(c+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("text_create_join_container");o.initSvg();for(var s=o.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var _=n.newBlock("text_create_join_item");_.initSvg(),s.connect(_.previousConnection),s=_.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var s=this.getInput("ADD"+o).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var s=this.getInput("ADD"+o);n.valueConnection_=s&&s.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(o){(o="FROM_START"==o||"FROM_END"==o)!=this.isAt_&&this.getSourceBlock().updateAt_(o)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var o=n.getFieldValue("WHERE"),s=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==o||"FROM_END"==o)&&(o="FROM_START"==o?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+o.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),s})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},_=this.getField("VAR").getText(),c={text:t.Msg.DELETE_VARIABLE.replace("%1",_),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(c));else{if("variables_get"==this.type)var o="variables_set",s=t.Msg.VARIABLES_GET_CREATE_SET;else o="variables_get",s=t.Msg.VARIABLES_SET_CREATE_GET;var c={enabled:0<this.workspace.remainingCapacity()},_=this.getField("VAR").getText();c.text=s.replace("%1",_),(s=t.utils.xml.createElement("field")).setAttribute("name","VAR"),s.appendChild(t.utils.xml.createTextNode(_)),(_=t.utils.xml.createElement("block")).setAttribute("type",o),_.appendChild(s),c.callback=t.ContextMenu.callbackFactory(this,_),n.push(c)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(o,s)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();o.deleteVariableById(s.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},w=this.getField("VAR").getText(),_={text:t.Msg.DELETE_VARIABLE.replace("%1",w),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(_));else{var o=this.getFieldValue("VAR"),s=this.workspace.getVariableById(o).type;if("variables_get_dynamic"==this.type){o="variables_set_dynamic";var c=t.Msg.VARIABLES_GET_CREATE_SET}else o="variables_get_dynamic",c=t.Msg.VARIABLES_SET_CREATE_GET;var _={enabled:0<this.workspace.remainingCapacity()},w=this.getField("VAR").getText();_.text=c.replace("%1",w),(c=t.utils.xml.createElement("field")).setAttribute("name","VAR"),c.setAttribute("variabletype",s),c.appendChild(t.utils.xml.createTextNode(w)),(w=t.utils.xml.createElement("block")).setAttribute("type",o),w.appendChild(c),_.callback=t.ContextMenu.callbackFactory(this,w),n.push(_)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(o,s)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();o.deleteVariableById(s.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}.apply(B,p))&&(k.exports=e)},25552:function(k,B,f){var p,e;p=[f(68210),f(63266),f(18783),f(30069)],void 0!==(e=function(t,n,o,s){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(o).forEach(function(c){t.Blocks[c]=o[c]}),t.JavaScript=s,t}.apply(B,p))&&(k.exports=e)},68210:function(k,B,f){var p,e;p=[f(86931)],void 0!==(e=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(o){t.Msg[o]=n[o]})},t}.apply(B,p))&&(k.exports=e)},76279:function(k,B,f){var p,e;p=[f(25552)],void 0!==(e=function(t){"use strict";return t}.apply(B,p))&&(k.exports=e)},30069:function(k,B,f){var p,e;p=[f(68210),f(69957)],void 0!==(e=function(t,n){"use strict";return t.JavaScript=n,n}.apply(B,p))&&(k.exports=e)},69957:function(k,B,f){var p,e;p=[f(81069)],void 0!==(e=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var o=[],s=t.Variables.allDeveloperVariables(n),c=0;c<s.length;c++)o.push(this.nameDB_.getName(s[c],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),c=0;c<n.length;c++)o.push(this.nameDB_.getName(n[c].getId(),t.VARIABLE_CATEGORY_NAME));o.length&&(this.definitions_.variables="var "+o.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var o=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),o.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,o,s){var c="";if(!n.outputConnection||!n.outputConnection.targetConnection){var _=n.getCommentText();_&&(_=t.utils.string.wrap(_,this.COMMENT_WRAP-3),c+=this.prefixLines(_+"\n","// "));for(var w=0;w<n.inputList.length;w++)n.inputList[w].type==t.inputTypes.VALUE&&(_=n.inputList[w].connection.targetBlock())&&(_=this.allNestedComments(_))&&(c+=this.prefixLines(_,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),c+o+(s?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,o,s,c,_){s=s||0,_=_||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&s--;var w=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<s?this.valueToCode(n,o,this.ORDER_ADDITION)||w:0>s?this.valueToCode(n,o,this.ORDER_SUBTRACTION)||w:c?this.valueToCode(n,o,this.ORDER_UNARY_NEGATION)||w:this.valueToCode(n,o,_)||w,t.isNumber(n))n=Number(n)+s,c&&(n=-n);else{if(0<s){n=n+" + "+s;var M=this.ORDER_ADDITION}else 0>s&&(n=n+" - "+-s,M=this.ORDER_SUBTRACTION);c&&(n=s?"-("+n+")":"-"+n,M=this.ORDER_UNARY_NEGATION),M=Math.floor(M),_=Math.floor(_),M&&_>=M&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var o=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,s=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var o=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",s=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var o=Array(n.itemCount_),s=0;s<n.itemCount_;s++)o[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"null";return["["+o.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+o+"("+s+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var o=n.getFieldValue("MODE")||"GET",s=n.getFieldValue("WHERE")||"FROM_START",c=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==s?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(s){case"FIRST":if("GET"==o)return[c+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return c+".shift();\n";break;case"LAST":if("GET"==o)return[c+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return c+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==o)return[c+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==o)return[c+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==o)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+".splice("+n+", 1);";break;case"RANDOM":if(c=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+c+", "+("GET"!=o)+")","GET"==o||"GET_REMOVE"==o)return[c,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function o(){if(s.match(/^\w+$/))return"";var M=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),U="var "+M+" = "+s+";\n";return s=M,U}var s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",c=n.getFieldValue("MODE")||"GET",_=n.getFieldValue("WHERE")||"FROM_START",w=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(_){case"FIRST":if("SET"==c)return s+"[0] = "+w+";\n";if("INSERT"==c)return s+".unshift("+w+");\n";break;case"LAST":if("SET"==c)return(n=o())+(s+"[")+s+".length - 1] = "+w+";\n";if("INSERT"==c)return s+".push("+w+");\n";break;case"FROM_START":if(_=t.JavaScript.getAdjusted(n,"AT"),"SET"==c)return s+"["+_+"] = "+w+";\n";if("INSERT"==c)return s+".splice("+_+", 0, "+w+");\n";break;case"FROM_END":if(_=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=o(),"SET"==c)return n+(s+"[")+s+".length - "+_+"] = "+w+";\n";if("INSERT"==c)return n+(s+".splice(")+s+".length - "+_+", 0, "+w+");\n";break;case"RANDOM":if(n=o(),n+="var "+(_=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+s+".length);\n","SET"==c)return n+(s+"[")+_+"] = "+w+";\n";if("INSERT"==c)return n+(s+".splice(")+_+", 0, "+w+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,o,s){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+s:"LAST"==o?n+".length - 1":s},t.JavaScript.lists_getSublist=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",s=n.getFieldValue("WHERE1"),c=n.getFieldValue("WHERE2");if("FIRST"==s&&"LAST"==c)o+=".slice(0)";else if(o.match(/^\w+$/)||"FROM_END"!=s&&"FROM_START"==c){switch(s){case"FROM_START":var _=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":_=o+".length - "+(_=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":_="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(c){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=o+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=o+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}o=o+".slice("+_+", "+n+")"}else{_=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var w=t.JavaScript.lists.getIndex_,M={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+M[s]+M[c],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==s||"FROM_START"==s?", at1":"")+("FROM_END"==c||"FROM_START"==c?", at2":"")+") {","  var start = "+w("sequence",s,"at1")+";","  var end = "+w("sequence",c,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+o+("FROM_END"==s||"FROM_START"==s?", "+_:"")+("FROM_END"==c||"FROM_START"==c?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",s="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[o+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+s+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var o=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),s=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))o||(o="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);o||(o="[]"),n="join"}return[o+"."+n+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var o=0,s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var c=t.JavaScript.valueToCode(n,"IF"+o,t.JavaScript.ORDER_NONE)||"false",_=t.JavaScript.statementToCode(n,"DO"+o);t.JavaScript.STATEMENT_SUFFIX&&(_=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+_),s+=(0<o?" else ":"")+"if ("+c+") {\n"+_+"}",++o}while(n.getInput("IF"+o));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(_=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(_=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+_),s+=" else {\n"+_+"}"),s+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],s="=="==o||"!="==o?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",s)||"0")+" "+o+" "+(n=t.JavaScript.valueToCode(n,"B",s)||"0"),s]},t.JavaScript.logic_operation=function(n){var o="AND"==n.getFieldValue("OP")?"&&":"||",s="&&"==o?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,c=t.JavaScript.valueToCode(n,"A",s);if(n=t.JavaScript.valueToCode(n,"B",s),c||n){var _="&&"==o?"true":"false";c||(c=_),n||(n=_)}else n=c="false";return[c+" "+o+" "+n,s]},t.JavaScript.logic_negate=function(n){var o=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",o)||"true"),o]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var o=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",s=t.JavaScript.statementToCode(n,"DO");s=t.JavaScript.addLoopTrap(s,n),n="";var c=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),_=o;return o.match(/^\w+$/)||t.isNumber(o)||(n+="var "+(_=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),n+"for (var "+c+" = 0; "+c+" < "+_+"; "+c+"++) {\n"+s+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var o="UNTIL"==n.getFieldValue("MODE"),s=t.JavaScript.valueToCode(n,"BOOL",o?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",c=t.JavaScript.statementToCode(n,"DO");return o&&(s="!"+s),"while ("+s+") {\n"+(c=t.JavaScript.addLoopTrap(c,n))+"}\n"},t.JavaScript.controls_for=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",c=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",_=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",w=t.JavaScript.statementToCode(n,"DO");if(w=t.JavaScript.addLoopTrap(w,n),t.isNumber(s)&&t.isNumber(c)&&t.isNumber(_)){var M=Number(s)<=Number(c);n="for ("+o+" = "+s+"; "+o+(M?" <= ":" >= ")+c+"; "+o,n=(1==(o=Math.abs(Number(_)))?n+(M?"++":"--"):n+(M?" += ":" -= ")+o)+") {\n"+w+"}\n"}else n="",M=s,s.match(/^\w+$/)||t.isNumber(s)||(n+="var "+(M=t.JavaScript.nameDB_.getDistinctName(o+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),s=c,c.match(/^\w+$/)||t.isNumber(c)||(n+="var "+(s=t.JavaScript.nameDB_.getDistinctName(o+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+c+";\n"),n+="var "+(c=t.JavaScript.nameDB_.getDistinctName(o+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(_)?n+(Math.abs(_)+";\n"):n+"Math.abs("+_+");\n")+"if ("+M+" > "+s+") {\n"+(t.JavaScript.INDENT+c)+" = -"+c+";\n",n+="}\n",n+="for ("+o+" = "+M+"; "+c+" >= 0 ? "+o+" <= "+s+" : "+o+" >= "+s+"; "+o+" += "+c+") {\n"+w+"}\n";return n},t.JavaScript.controls_forEach=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",c=t.JavaScript.statementToCode(n,"DO");c=t.JavaScript.addLoopTrap(c,n),n="";var _=s;return s.match(/^\w+$/)||(n+="var "+(_=t.JavaScript.nameDB_.getDistinctName(o+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),n+"for (var "+(s=t.JavaScript.nameDB_.getDistinctName(o+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+_+") {\n"+(c=t.JavaScript.INDENT+o+" = "+_+"["+s+"];\n"+c)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var o="";if(t.JavaScript.STATEMENT_PREFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var s=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);s&&!s.suppressPrefixSuffix&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,s))}switch(n.getFieldValue("FLOW")){case"BREAK":return o+"break;\n";case"CONTINUE":return o+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var o={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],s=o[0],c=t.JavaScript.valueToCode(n,"A",o=o[1])||"0";return n=t.JavaScript.valueToCode(n,"B",o)||"0",s?[c+s+n,o]:["Math.pow("+c+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var o=n.getFieldValue("OP");if("NEG"==o)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==o||"COS"==o||"TAN"==o?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",o){case"ABS":var s="Math.abs("+n+")";break;case"ROOT":s="Math.sqrt("+n+")";break;case"LN":s="Math.log("+n+")";break;case"EXP":s="Math.exp("+n+")";break;case"POW10":s="Math.pow(10,"+n+")";break;case"ROUND":s="Math.round("+n+")";break;case"ROUNDUP":s="Math.ceil("+n+")";break;case"ROUNDDOWN":s="Math.floor("+n+")";break;case"SIN":s="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+n+" / 180 * Math.PI)"}if(s)return[s,t.JavaScript.ORDER_FUNCTION_CALL];switch(o){case"LOG10":s="Math.log("+n+") / Math.log(10)";break;case"ASIN":s="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+o)}return[s,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var o=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",s=n.getFieldValue("PROPERTY");if("PRIME"==s)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+o+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(s){case"EVEN":var c=o+" % 2 == 0";break;case"ODD":c=o+" % 2 == 1";break;case"WHOLE":c=o+" % 1 == 0";break;case"POSITIVE":c=o+" > 0";break;case"NEGATIVE":c=o+" < 0";break;case"DIVISIBLE_BY":c=o+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[c,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var o=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+o+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var o=n.getFieldValue("OP");switch(o){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(o=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(o=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(o=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(o=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(o=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+o)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var o=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var o=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+o+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),s&&(s=t.JavaScript.prefixLines(s,t.JavaScript.INDENT));var c="";t.JavaScript.INFINITE_LOOP_TRAP&&(c=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var _=t.JavaScript.statementToCode(n,"STACK"),w=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",M="";_&&w&&(M=s),w&&(w=t.JavaScript.INDENT+"return "+w+";\n");for(var U=[],V=n.getVars(),H=0;H<V.length;H++)U[H]=t.JavaScript.nameDB_.getName(V[H],t.VARIABLE_CATEGORY_NAME);return s="function "+o+"("+U.join(", ")+") {\n"+s+c+_+M+w+"}",s=t.JavaScript.scrub_(n,s),t.JavaScript.definitions_["%"+o]=s,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s=[],c=n.getVars(),_=0;_<c.length;_++)s[_]=t.JavaScript.valueToCode(n,"ARG"+_,t.JavaScript.ORDER_NONE)||"null";return[o+"("+s.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var o="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",o+=t.JavaScript.INDENT+"return "+n+";\n"):o+=t.JavaScript.INDENT+"return;\n",o+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var o=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,o]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var o=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(o)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:o=Array(n.itemCount_);for(var s=0;s<n.itemCount_;s++)o[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"''";return[n="["+o.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",o+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+o+"("+s+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var o=n.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==o?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(o){case"FIRST":return[s+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[s+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[s+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[s+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,o,s){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+s:"LAST"==o?n+".length - 1":s},t.JavaScript.text_getSubstring=function(n){var o=n.getFieldValue("WHERE1"),s=n.getFieldValue("WHERE2"),c="FROM_END"!=o&&"LAST"!=o&&"FROM_END"!=s&&"LAST"!=s,_=t.JavaScript.valueToCode(n,"STRING",c?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==o&&"LAST"==s)return[_,t.JavaScript.ORDER_NONE];if(_.match(/^'?\w+'?$/)||c){switch(o){case"FROM_START":c=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":c=_+".length - "+(c=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":c="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(s){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=_+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=_+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}o=_+".slice("+c+", "+n+")"}else{c=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var w=t.JavaScript.text.getIndex_,M={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+M[o]+M[s],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==o||"FROM_START"==o?", at1":"")+("FROM_END"==s||"FROM_START"==s?", at2":"")+") {","  var start = "+w("sequence",o,"at1")+";","  var end = "+w("sequence",s,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+_+("FROM_END"==o||"FROM_START"==o?", "+c:"")+("FROM_END"==s||"FROM_START"==s?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var o={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",o?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[o?n+o:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var o={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var o="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(o="Number("+o+")"),[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var o=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+o+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript}.apply(B,p))&&(k.exports=e)},63266:function(k,B,f){var p,e;p=[f(68210)],void 0!==(e=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg}.apply(B,p))&&(k.exports=e)},70697:function(k){k.exports=function(){"use strict";function B(gt){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Tt){return typeof Tt}:function(Tt){return Tt&&"function"==typeof Symbol&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt})(gt)}var gt,b=(gt={},function(Kt){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return gt[fe]=gt[fe]||0,void 0===Kt[fe]&&(Kt[fe]=gt[fe]++),Kt[fe]});function p(gt,Tt,Kt){if(gt)for(var fe=0,Ce=gt.length;fe<Ce;fe++)Tt(gt[fe],fe);"function"==typeof Kt&&Kt()}var e=new function(){var Tt="introjs_event";this._id=function(Kt,fe,Ce,Je){return fe+b(Ce)+(Je?"_".concat(b(Je)):"")},this.on=function(Kt,fe,Ce,Je,De){var Ve=this._id.apply(this,arguments),hi=function(bi){return Ce.call(Je||Kt,bi||window.event)};"addEventListener"in Kt?Kt.addEventListener(fe,hi,De):"attachEvent"in Kt&&Kt.attachEvent("on".concat(fe),hi),Kt[Tt]=Kt[Tt]||{},Kt[Tt][Ve]=hi},this.off=function(Kt,fe,Ce,Je,De){var Ve=this._id.apply(this,arguments),hi=Kt[Tt]&&Kt[Tt][Ve];!hi||("removeEventListener"in Kt?Kt.removeEventListener(fe,hi,De):"detachEvent"in Kt&&Kt.detachEvent("on".concat(fe),hi),Kt[Tt][Ve]=null)}},t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(gt,Tt){return gt(Tt={exports:{}},Tt.exports),Tt.exports}var Ne,oi,o=function(gt){return gt&&gt.Math==Math&&gt},s=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||function(){return this}()||Function("return this")(),c=function(gt){try{return!!gt()}catch(Tt){return!0}},_=!c(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),w=Function.prototype.call,M=w.bind?w.bind(w):function(){return w.apply(w,arguments)},U={}.propertyIsEnumerable,V=Object.getOwnPropertyDescriptor,pt={f:V&&!U.call({1:2},1)?function(Tt){var Kt=V(this,Tt);return!!Kt&&Kt.enumerable}:U},nt=function(gt,Tt){return{enumerable:!(1&gt),configurable:!(2&gt),writable:!(4&gt),value:Tt}},st=Function.prototype,Ct=st.bind,xt=st.call,yt=Ct&&Ct.bind(xt),ut=Ct?function(gt){return gt&&yt(xt,gt)}:function(gt){return gt&&function(){return xt.apply(gt,arguments)}},tt=ut({}.toString),lt=ut("".slice),ot=function(gt){return lt(tt(gt),8,-1)},Lt=s.Object,at=ut("".split),dt=c(function(){return!Lt("z").propertyIsEnumerable(0)})?function(gt){return"String"==ot(gt)?at(gt,""):Lt(gt)}:Lt,it=s.TypeError,rt=function(gt){if(null==gt)throw it("Can't call method on "+gt);return gt},Gt=function(gt){return dt(rt(gt))},bt=function(gt){return"function"==typeof gt},Ht=function(gt){return"object"==typeof gt?null!==gt:bt(gt)},ce=function(gt){return bt(gt)?gt:void 0},Ye=function(gt,Tt){return arguments.length<2?ce(s[gt]):s[gt]&&s[gt][Tt]},de=ut({}.isPrototypeOf),Be=Ye("navigator","userAgent")||"",He=s.process,Ke=s.Deno,vi=He&&He.versions||Ke&&Ke.version,qe=vi&&vi.v8;qe&&(oi=(Ne=qe.split("."))[0]>0&&Ne[0]<4?1:+(Ne[0]+Ne[1])),!oi&&Be&&(!(Ne=Be.match(/Edge\/(\d+)/))||Ne[1]>=74)&&(Ne=Be.match(/Chrome\/(\d+)/))&&(oi=+Ne[1]);var Ft=oi,_e=!!Object.getOwnPropertySymbols&&!c(function(){var gt=Symbol();return!String(gt)||!(Object(gt)instanceof Symbol)||!Symbol.sham&&Ft&&Ft<41}),Xt=_e&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Jt=s.Object,Rt=Xt?function(gt){return"symbol"==typeof gt}:function(gt){var Tt=Ye("Symbol");return bt(Tt)&&de(Tt.prototype,Jt(gt))},Pt=s.String,he=function(gt){try{return Pt(gt)}catch(Tt){return"Object"}},ze=s.TypeError,le=function(gt){if(bt(gt))return gt;throw ze(he(gt)+" is not a function")},jt=function(gt,Tt){var Kt=gt[Tt];return null==Kt?void 0:le(Kt)},Yt=s.TypeError,$t=Object.defineProperty,oe=function(gt,Tt){try{$t(s,gt,{value:Tt,configurable:!0,writable:!0})}catch(Kt){s[gt]=Tt}return Tt},re="__core-js_shared__",kt=s[re]||oe(re,{}),we=n(function(gt){(gt.exports=function(Tt,Kt){return kt[Tt]||(kt[Tt]=void 0!==Kt?Kt:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),Ae=s.Object,ci=function(gt){return Ae(rt(gt))},Ze=ut({}.hasOwnProperty),li=Object.hasOwn||function(Tt,Kt){return Ze(ci(Tt),Kt)},Fi=0,ui=Math.random(),Ei=ut(1..toString),gi=function(gt){return"Symbol("+(void 0===gt?"":gt)+")_"+Ei(++Fi+ui,36)},We=we("wks"),ri=s.Symbol,ue=ri&&ri.for,je=Xt?ri:ri&&ri.withoutSetter||gi,ti=function(gt){if(!li(We,gt)||!_e&&"string"!=typeof We[gt]){var Tt="Symbol."+gt;We[gt]=_e&&li(ri,gt)?ri[gt]:Xt&&ue?ue(Tt):je(Tt)}return We[gt]},Ri=s.TypeError,Pe=ti("toPrimitive"),ie=function(gt,Tt){if(!Ht(gt)||Rt(gt))return gt;var fe,Kt=jt(gt,Pe);if(Kt){if(void 0===Tt&&(Tt="default"),fe=M(Kt,gt,Tt),!Ht(fe)||Rt(fe))return fe;throw Ri("Can't convert object to primitive value")}return void 0===Tt&&(Tt="number"),function(gt,Tt){var Kt,fe;if("string"===Tt&&bt(Kt=gt.toString)&&!Ht(fe=M(Kt,gt))||bt(Kt=gt.valueOf)&&!Ht(fe=M(Kt,gt))||"string"!==Tt&&bt(Kt=gt.toString)&&!Ht(fe=M(Kt,gt)))return fe;throw Yt("Can't convert object to primitive value")}(gt,Tt)},Mt=function(gt){var Tt=ie(gt,"string");return Rt(Tt)?Tt:Tt+""},ct=s.document,It=Ht(ct)&&Ht(ct.createElement),te=function(gt){return It?ct.createElement(gt):{}},ve=!_&&!c(function(){return 7!=Object.defineProperty(te("div"),"a",{get:function(){return 7}}).a}),Ti=Object.getOwnPropertyDescriptor,Zi={f:_?Ti:function(Tt,Kt){if(Tt=Gt(Tt),Kt=Mt(Kt),ve)try{return Ti(Tt,Kt)}catch(fe){}if(li(Tt,Kt))return nt(!M(pt.f,Tt,Kt),Tt[Kt])}},Sn=s.String,$e=s.TypeError,Me=function(gt){if(Ht(gt))return gt;throw $e(Sn(gt)+" is not an object")},Te=s.TypeError,Xe=Object.defineProperty,Ki={f:_?Xe:function(Tt,Kt,fe){if(Me(Tt),Kt=Mt(Kt),Me(fe),ve)try{return Xe(Tt,Kt,fe)}catch(Ce){}if("get"in fe||"set"in fe)throw Te("Accessors not supported");return"value"in fe&&(Tt[Kt]=fe.value),Tt}},cn=_?function(gt,Tt,Kt){return Ki.f(gt,Tt,nt(1,Kt))}:function(gt,Tt,Kt){return gt[Tt]=Kt,gt},xn=ut(Function.toString);bt(kt.inspectSource)||(kt.inspectSource=function(gt){return xn(gt)});var dn,Nn,Lo,oo=kt.inspectSource,hr=s.WeakMap,Jo=bt(hr)&&/native code/.test(oo(hr)),Pr=we("keys"),or=function(gt){return Pr[gt]||(Pr[gt]=gi(gt))},Jn={},As="Object already initialized",ro=s.TypeError;if(Jo||kt.state){var wo=kt.state||(kt.state=new(0,s.WeakMap)),Kn=ut(wo.get),No=ut(wo.has),$o=ut(wo.set);dn=function(gt,Tt){if(No(wo,gt))throw new ro(As);return Tt.facade=gt,$o(wo,gt,Tt),Tt},Nn=function(gt){return Kn(wo,gt)||{}},Lo=function(gt){return No(wo,gt)}}else{var pn=or("state");Jn[pn]=!0,dn=function(gt,Tt){if(li(gt,pn))throw new ro(As);return Tt.facade=gt,cn(gt,pn,Tt),Tt},Nn=function(gt){return li(gt,pn)?gt[pn]:{}},Lo=function(gt){return li(gt,pn)}}var jo={set:dn,get:Nn,has:Lo,enforce:function(gt){return Lo(gt)?Nn(gt):dn(gt,{})},getterFor:function(gt){return function(Tt){var Kt;if(!Ht(Tt)||(Kt=Nn(Tt)).type!==gt)throw ro("Incompatible receiver, "+gt+" required");return Kt}}},rr=Function.prototype,vr=_&&Object.getOwnPropertyDescriptor,dr=li(rr,"name"),Zo={EXISTS:dr,PROPER:dr&&"something"===function(){}.name,CONFIGURABLE:dr&&(!_||_&&vr(rr,"name").configurable)},Hn=n(function(gt){var Tt=Zo.CONFIGURABLE,Kt=jo.get,fe=jo.enforce,Ce=String(String).split("String");(gt.exports=function(Je,De,Ve,hi){var kn,_i=!!hi&&!!hi.unsafe,bi=!!hi&&!!hi.enumerable,bn=!!hi&&!!hi.noTargetGet,ln=hi&&void 0!==hi.name?hi.name:De;bt(Ve)&&("Symbol("===String(ln).slice(0,7)&&(ln="["+String(ln).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!li(Ve,"name")||Tt&&Ve.name!==ln)&&cn(Ve,"name",ln),(kn=fe(Ve)).source||(kn.source=Ce.join("string"==typeof ln?ln:""))),Je!==s?(_i?!bn&&Je[De]&&(bi=!0):delete Je[De],bi?Je[De]=Ve:cn(Je,De,Ve)):bi?Je[De]=Ve:oe(De,Ve)})(Function.prototype,"toString",function(){return bt(this)&&Kt(this).source||oo(this)})}),vn=Math.ceil,Qo=Math.floor,xo=function(gt){var Tt=+gt;return Tt!=Tt||0===Tt?0:(Tt>0?Qo:vn)(Tt)},Eo=Math.max,Po=Math.min,Ts=function(gt,Tt){var Kt=xo(gt);return Kt<0?Eo(Kt+Tt,0):Po(Kt,Tt)},yn=Math.min,Fr=function(gt){return gt>0?yn(xo(gt),9007199254740991):0},qn=function(gt){return Fr(gt.length)},Sr=function(gt){return function(Tt,Kt,fe){var Ve,Ce=Gt(Tt),Je=qn(Ce),De=Ts(fe,Je);if(gt&&Kt!=Kt){for(;Je>De;)if((Ve=Ce[De++])!=Ve)return!0}else for(;Je>De;De++)if((gt||De in Ce)&&Ce[De]===Kt)return gt||De||0;return!gt&&-1}},as={includes:Sr(!0),indexOf:Sr(!1)},Fo=as.indexOf,Jr=ut([].push),wr=function(gt,Tt){var Je,Kt=Gt(gt),fe=0,Ce=[];for(Je in Kt)!li(Jn,Je)&&li(Kt,Je)&&Jr(Ce,Je);for(;Tt.length>fe;)li(Kt,Je=Tt[fe++])&&(~Fo(Ce,Je)||Jr(Ce,Je));return Ce},po=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],$r=po.concat("length","prototype"),aa={f:Object.getOwnPropertyNames||function(Tt){return wr(Tt,$r)}},Gs={f:Object.getOwnPropertySymbols},Ta=ut([].concat),Dr=Ye("Reflect","ownKeys")||function(Tt){var Kt=aa.f(Me(Tt)),fe=Gs.f;return fe?Ta(Kt,fe(Tt)):Kt},la=function(gt,Tt){for(var Kt=Dr(Tt),fe=Ki.f,Ce=Zi.f,Je=0;Je<Kt.length;Je++){var De=Kt[Je];li(gt,De)||fe(gt,De,Ce(Tt,De))}},Cs=/#|\.prototype\./,br=function(gt,Tt){var Kt=$s[xa(gt)];return Kt==zo||Kt!=ls&&(bt(Tt)?c(Tt):!!Tt)},xa=br.normalize=function(gt){return String(gt).replace(Cs,".").toLowerCase()},$s=br.data={},ls=br.NATIVE="N",zo=br.POLYFILL="P",fo=br,Do=Zi.f,Io=function(gt,Tt){var De,Ve,hi,_i,bi,Kt=gt.target,fe=gt.global,Ce=gt.stat;if(De=fe?s:Ce?s[Kt]||oe(Kt,{}):(s[Kt]||{}).prototype)for(Ve in Tt){if(_i=Tt[Ve],hi=gt.noTargetGet?(bi=Do(De,Ve))&&bi.value:De[Ve],!fo(fe?Ve:Kt+(Ce?".":"#")+Ve,gt.forced)&&void 0!==hi){if(typeof _i==typeof hi)continue;la(_i,hi)}(gt.sham||hi&&hi.sham)&&cn(_i,"sham",!0),Hn(De,Ve,_i,gt)}},Ir={};Ir[ti("toStringTag")]="z";var ei,Mr="[object z]"===String(Ir),qo=ti("toStringTag"),us=s.Object,Bo="Arguments"==ot(function(){return arguments}()),To=Mr?ot:function(gt){var Tt,Kt,fe;return void 0===gt?"Undefined":null===gt?"Null":"string"==typeof(Kt=function(gt,Tt){try{return gt[Tt]}catch(Kt){}}(Tt=us(gt),qo))?Kt:Bo?ot(Tt):"Object"==(fe=ot(Tt))&&bt(Tt.callee)?"Arguments":fe},Br=s.String,so=function(gt){if("Symbol"===To(gt))throw TypeError("Cannot convert a Symbol value to a string");return Br(gt)},hs=function(){var gt=Me(this),Tt="";return gt.global&&(Tt+="g"),gt.ignoreCase&&(Tt+="i"),gt.multiline&&(Tt+="m"),gt.dotAll&&(Tt+="s"),gt.unicode&&(Tt+="u"),gt.sticky&&(Tt+="y"),Tt},go=s.RegExp,Ws=c(function(){var gt=go("a","y");return gt.lastIndex=2,null!=gt.exec("abcd")}),Ca=c(function(){var gt=go("^r","gy");return gt.lastIndex=2,null!=gt.exec("str")}),Hr={UNSUPPORTED_Y:Ws,BROKEN_CARET:Ca},Ho=Object.keys||function(Tt){return wr(Tt,po)},yr=_?Object.defineProperties:function(Tt,Kt){Me(Tt);for(var Ve,fe=Gt(Kt),Ce=Ho(Kt),Je=Ce.length,De=0;Je>De;)Ki.f(Tt,Ve=Ce[De++],fe[Ve]);return Tt},ca=Ye("document","documentElement"),Ss="prototype",Dt="script",X=or("IE_PROTO"),P=function(){},G=function(gt){return"<script>"+gt+"</"+Dt+">"},St=function(gt){gt.write(G("")),gt.close();var Tt=gt.parentWindow.Object;return gt=null,Tt},Ni=function(){try{ei=new ActiveXObject("htmlfile")}catch(Tt){}Ni="undefined"!=typeof document?document.domain&&ei?St(ei):function(){var Kt,gt=te("iframe");return gt.style.display="none",ca.appendChild(gt),gt.src=String("javascript:"),(Kt=gt.contentWindow.document).open(),Kt.write(G("document.F=Object")),Kt.close(),Kt.F}():St(ei);for(var gt=po.length;gt--;)delete Ni[Ss][po[gt]];return Ni()};Jn[X]=!0;var mn=Object.create||function(Tt,Kt){var fe;return null!==Tt?(P[Ss]=Me(Tt),fe=new P,P[Ss]=null,fe[X]=Tt):fe=Ni(),void 0===Kt?fe:yr(fe,Kt)},Rn=s.RegExp,Vn=c(function(){var gt=Rn(".","s");return!(gt.dotAll&&gt.exec("\n")&&"s"===gt.flags)}),Pn=s.RegExp,mo=c(function(){var gt=Pn("(?<a>b)","g");return"b"!==gt.exec("b").groups.a||"bc"!=="b".replace(gt,"$<a>c")}),to=jo.get,Yo=we("native-string-replace",String.prototype.replace),rn=RegExp.prototype.exec,Zr=rn,Zs=ut("".charAt),tr=ut("".indexOf),js=ut("".replace),Vr=ut("".slice),Ur=function(){var gt=/a/,Tt=/b*/g;return M(rn,gt,"a"),M(rn,Tt,"a"),0!==gt.lastIndex||0!==Tt.lastIndex}(),ul=Hr.UNSUPPORTED_Y||Hr.BROKEN_CARET,Di=void 0!==/()??/.exec("")[1];(Ur||Di||ul||Vn||mo)&&(Zr=function(Tt){var De,Ve,hi,_i,bi,bn,ln,Kt=this,fe=to(Kt),Ce=so(Tt),Je=fe.raw;if(Je)return Je.lastIndex=Kt.lastIndex,De=M(Zr,Je,Ce),Kt.lastIndex=Je.lastIndex,De;var kn=fe.groups,lr=ul&&Kt.sticky,lo=M(hs,Kt),eo=Kt.source,bo=0,Xo=Ce;if(lr&&(lo=js(lo,"y",""),-1===tr(lo,"g")&&(lo+="g"),Xo=Vr(Ce,Kt.lastIndex),Kt.lastIndex>0&&(!Kt.multiline||Kt.multiline&&"\n"!==Zs(Ce,Kt.lastIndex-1))&&(eo="(?: "+eo+")",Xo=" "+Xo,bo++),Ve=new RegExp("^(?:"+eo+")",lo)),Di&&(Ve=new RegExp("^"+eo+"$(?!\\s)",lo)),Ur&&(hi=Kt.lastIndex),_i=M(rn,lr?Ve:Kt,Xo),lr?_i?(_i.input=Vr(_i.input,bo),_i[0]=Vr(_i[0],bo),_i.index=Kt.lastIndex,Kt.lastIndex+=_i[0].length):Kt.lastIndex=0:Ur&&_i&&(Kt.lastIndex=Kt.global?_i.index+_i[0].length:hi),Di&&_i&&_i.length>1&&M(Yo,_i[0],Ve,function(){for(bi=1;bi<arguments.length-2;bi++)void 0===arguments[bi]&&(_i[bi]=void 0)}),_i&&kn)for(_i.groups=bn=mn(null),bi=0;bi<kn.length;bi++)bn[(ln=kn[bi])[0]]=_i[ln[1]];return _i});var Qt=Zr;Io({target:"RegExp",proto:!0,forced:/./.exec!==Qt},{exec:Qt});var F=ti("species"),Y=RegExp.prototype,_t=function(gt,Tt,Kt,fe){var Ce=ti(gt),Je=!c(function(){var _i={};return _i[Ce]=function(){return 7},7!=""[gt](_i)}),De=Je&&!c(function(){var _i=!1,bi=/a/;return"split"===gt&&((bi={}).constructor={},bi.constructor[F]=function(){return bi},bi.flags="",bi[Ce]=/./[Ce]),bi.exec=function(){return _i=!0,null},bi[Ce](""),!_i});if(!Je||!De||Kt){var Ve=ut(/./[Ce]),hi=Tt(Ce,""[gt],function(_i,bi,bn,ln,kn){var lr=ut(_i),lo=bi.exec;return lo===Qt||lo===Y.exec?Je&&!kn?{done:!0,value:Ve(bi,bn,ln)}:{done:!0,value:lr(bn,bi,ln)}:{done:!1}});Hn(String.prototype,gt,hi[0]),Hn(Y,Ce,hi[1])}fe&&cn(Y[Ce],"sham",!0)},Wt=ut("".charAt),se=ut("".charCodeAt),Ie=ut("".slice),xe=function(gt){return function(Tt,Kt){var De,Ve,fe=so(rt(Tt)),Ce=xo(Kt),Je=fe.length;return Ce<0||Ce>=Je?gt?"":void 0:(De=se(fe,Ce))<55296||De>56319||Ce+1===Je||(Ve=se(fe,Ce+1))<56320||Ve>57343?gt?Wt(fe,Ce):De:gt?Ie(fe,Ce,Ce+2):Ve-56320+(De-55296<<10)+65536}},mi=(xe(!1),xe(!0)),Bi=function(gt,Tt,Kt){return Tt+(Kt?mi(gt,Tt).length:1)},Gi=s.TypeError,un=function(gt,Tt){var Kt=gt.exec;if(bt(Kt)){var fe=M(Kt,gt,Tt);return null!==fe&&Me(fe),fe}if("RegExp"===ot(gt))return M(Qt,gt,Tt);throw Gi("RegExp#exec called on incompatible receiver")};_t("match",function(gt,Tt,Kt){return[function(Ce){var Je=rt(this),De=null==Ce?void 0:jt(Ce,gt);return De?M(De,Ce,Je):new RegExp(Ce)[gt](so(Je))},function(fe){var Ce=Me(this),Je=so(fe),De=Kt(Tt,Ce,Je);if(De.done)return De.value;if(!Ce.global)return un(Ce,Je);var Ve=Ce.unicode;Ce.lastIndex=0;for(var bi,hi=[],_i=0;null!==(bi=un(Ce,Je));){var bn=so(bi[0]);hi[_i]=bn,""===bn&&(Ce.lastIndex=Bi(Je,Fr(Ce.lastIndex),Ve)),_i++}return 0===_i?null:hi}]});var Mn=Array.isArray||function(Tt){return"Array"==ot(Tt)},tn=function(gt,Tt,Kt){var fe=Mt(Tt);fe in gt?Ki.f(gt,fe,nt(0,Kt)):gt[fe]=Kt},_n=function(){},Bn=[],Wn=Ye("Reflect","construct"),Mo=/^\s*(?:class|function)\b/,sr=ut(Mo.exec),Vo=!Mo.exec(_n),Gr=function(gt){if(!bt(gt))return!1;try{return Wn(_n,Bn,gt),!0}catch(Tt){return!1}},Uo=!Wn||c(function(){var gt;return Gr(Gr.call)||!Gr(Object)||!Gr(function(){gt=!0})||gt})?function(gt){if(!bt(gt))return!1;switch(To(gt)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Vo||!!sr(Mo,oo(gt))}:Gr,Os=ti("species"),qr=s.Array,Sa=function(gt,Tt){return new(function(gt){var Tt;return Mn(gt)&&(Uo(Tt=gt.constructor)&&(Tt===qr||Mn(Tt.prototype))||Ht(Tt)&&null===(Tt=Tt[Os]))&&(Tt=void 0),void 0===Tt?qr:Tt}(gt))(0===Tt?0:Tt)},Co=ti("species"),ts=function(gt){return Ft>=51||!c(function(){var Tt=[];return(Tt.constructor={})[Co]=function(){return{foo:1}},1!==Tt[gt](Boolean).foo})},wa=ti("isConcatSpreadable"),ua=9007199254740991,Qi="Maximum allowed index exceeded",nn=s.TypeError,on=Ft>=51||!c(function(){var gt=[];return gt[wa]=!1,gt.concat()[0]!==gt}),An=ts("concat"),On=function(gt){if(!Ht(gt))return!1;var Tt=gt[wa];return void 0!==Tt?!!Tt:Mn(gt)};Io({target:"Array",proto:!0,forced:!on||!An},{concat:function(Tt){var Je,De,Ve,hi,_i,Kt=ci(this),fe=Sa(Kt,0),Ce=0;for(Je=-1,Ve=arguments.length;Je<Ve;Je++)if(On(_i=-1===Je?Kt:arguments[Je])){if(Ce+(hi=qn(_i))>ua)throw nn(Qi);for(De=0;De<hi;De++,Ce++)De in _i&&tn(fe,Ce,_i[De])}else{if(Ce>=ua)throw nn(Qi);tn(fe,Ce++,_i)}return fe.length=Ce,fe}}),Mr||Hn(Object.prototype,"toString",Mr?{}.toString:function(){return"[object "+To(this)+"]"},{unsafe:!0});var es=Zo.PROPER,Qn="toString",Tr=RegExp.prototype,ps=Tr[Qn],fs=ut(hs);(c(function(){return"/a/b"!=ps.call({source:"a",flags:"b"})})||es&&ps.name!=Qn)&&Hn(RegExp.prototype,Qn,function(){var Tt=Me(this),Kt=so(Tt.source),fe=Tt.flags;return"/"+Kt+"/"+so(void 0===fe&&de(Tr,Tt)&&!("flags"in Tr)?fs(Tt):fe)},{unsafe:!0});var Wr=Function.prototype,hl=Wr.apply,xs=Wr.call,ka="object"==typeof Reflect&&Reflect.apply||(Wr.bind?xs.bind(hl):function(){return xs.apply(hl,arguments)}),La=ti("match"),Il=function(gt){var Tt;return Ht(gt)&&(void 0!==(Tt=gt[La])?!!Tt:"RegExp"==ot(gt))},ks=s.TypeError,Qs=ti("species"),mc=function(gt,Tt){var fe,Kt=Me(gt).constructor;return void 0===Kt||null==(fe=Me(Kt)[Qs])?Tt:function(gt){if(Uo(gt))return gt;throw ks(he(gt)+" is not a constructor")}(fe)},Ka=ut([].slice),qs=Hr.UNSUPPORTED_Y,Na=4294967295,Ml=Math.min,Al=[].push,Ls=ut(/./.exec),ha=ut(Al),gs=ut("".slice),Ja=!c(function(){var gt=/(?:)/,Tt=gt.exec;gt.exec=function(){return Tt.apply(this,arguments)};var Kt="ab".split(gt);return 2!==Kt.length||"a"!==Kt[0]||"b"!==Kt[1]});function Ns(gt,Tt){if(gt instanceof SVGElement){var Kt=gt.getAttribute("class")||"";Kt.match(Tt)||gt.setAttribute("class","".concat(Kt," ").concat(Tt))}else void 0!==gt.classList?p(Tt.split(" "),function(Ce){gt.classList.add(Ce)}):gt.className.match(Tt)||(gt.className+=" ".concat(Tt))}function ta(gt,Tt){var Kt="";return gt.currentStyle?Kt=gt.currentStyle[Tt]:document.defaultView&&document.defaultView.getComputedStyle&&(Kt=document.defaultView.getComputedStyle(gt,null).getPropertyValue(Tt)),Kt&&Kt.toLowerCase?Kt.toLowerCase():Kt}function $a(gt){var Tt=gt.element;if(this._options.scrollToElement){var Kt=function(gt){var Tt=window.getComputedStyle(gt),Kt="absolute"===Tt.position,fe=/(auto|scroll)/;if("fixed"===Tt.position)return document.body;for(var Ce=gt;Ce=Ce.parentElement;)if(Tt=window.getComputedStyle(Ce),(!Kt||"static"!==Tt.position)&&fe.test(Tt.overflow+Tt.overflowY+Tt.overflowX))return Ce;return document.body}(Tt);Kt!==document.body&&(Kt.scrollTop=Tt.offsetTop-Kt.offsetTop)}}function xl(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var gt=document.documentElement;return{width:gt.clientWidth,height:gt.clientHeight}}function ht(gt,Tt,Kt){var Ce,fe=Tt.element;if("off"!==gt&&this._options.scrollToElement&&(Ce="tooltip"===gt?Kt.getBoundingClientRect():fe.getBoundingClientRect(),!function(gt){var Tt=gt.getBoundingClientRect();return Tt.top>=0&&Tt.left>=0&&Tt.bottom+80<=window.innerHeight&&Tt.right<=window.innerWidth}(fe))){var Je=xl().height;Ce.bottom-(Ce.bottom-Ce.top)<0||fe.clientHeight>Je?window.scrollBy(0,Ce.top-(Je/2-Ce.height/2)-this._options.scrollPadding):window.scrollBy(0,Ce.top-(Je/2-Ce.height/2)+this._options.scrollPadding)}}function q(gt){gt.setAttribute("role","button"),gt.tabIndex=0}_t("split",function(gt,Tt,Kt){var fe;return fe="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(Ce,Je){var De=so(rt(this)),Ve=void 0===Je?Na:Je>>>0;if(0===Ve)return[];if(void 0===Ce)return[De];if(!Il(Ce))return M(Tt,De,Ce,Ve);for(var ln,kn,lr,hi=[],bi=0,bn=new RegExp(Ce.source,(Ce.ignoreCase?"i":"")+(Ce.multiline?"m":"")+(Ce.unicode?"u":"")+(Ce.sticky?"y":"")+"g");(ln=M(Qt,bn,De))&&!((kn=bn.lastIndex)>bi&&(ha(hi,gs(De,bi,ln.index)),ln.length>1&&ln.index<De.length&&ka(Al,hi,Ka(ln,1)),lr=ln[0].length,bi=kn,hi.length>=Ve));)bn.lastIndex===ln.index&&bn.lastIndex++;return bi===De.length?(lr||!Ls(bn,""))&&ha(hi,""):ha(hi,gs(De,bi)),hi.length>Ve?Ka(hi,0,Ve):hi}:"0".split(void 0,0).length?function(Ce,Je){return void 0===Ce&&0===Je?[]:M(Tt,this,Ce,Je)}:Tt,[function(Je,De){var Ve=rt(this),hi=null==Je?void 0:jt(Je,gt);return hi?M(hi,Je,Ve,De):M(fe,so(Ve),Je,De)},function(Ce,Je){var De=Me(this),Ve=so(Ce),hi=Kt(fe,De,Ve,Je,fe!==Tt);if(hi.done)return hi.value;var _i=mc(De,RegExp),bi=De.unicode,ln=new _i(qs?"^(?:"+De.source+")":De,(De.ignoreCase?"i":"")+(De.multiline?"m":"")+(De.unicode?"u":"")+(qs?"g":"y")),kn=void 0===Je?Na:Je>>>0;if(0===kn)return[];if(0===Ve.length)return null===un(ln,Ve)?[Ve]:[];for(var lr=0,lo=0,eo=[];lo<Ve.length;){ln.lastIndex=qs?0:lo;var Xo,bo=un(ln,qs?gs(Ve,lo):Ve);if(null===bo||(Xo=Ml(Fr(ln.lastIndex+(qs?lo:0)),Ve.length))===lr)lo=Bi(Ve,lo,bi);else{if(ha(eo,gs(Ve,lr,lo)),eo.length===kn)return eo;for(var co=1;co<=bo.length-1;co++)if(ha(eo,bo[co]),eo.length===kn)return eo;lo=lr=Xo}}return ha(eo,gs(Ve,lr)),eo}]},!Ja,qs);var J=Object.assign,wt=Object.defineProperty,Nt=ut([].concat),ne=!J||c(function(){if(_&&1!==J({b:1},J(wt({},"a",{enumerable:!0,get:function(){wt(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var gt={},Tt={},Kt=Symbol(),fe="abcdefghijklmnopqrst";return gt[Kt]=7,fe.split("").forEach(function(Ce){Tt[Ce]=Ce}),7!=J({},gt)[Kt]||Ho(J({},Tt)).join("")!=fe})?function(Tt,Kt){for(var fe=ci(Tt),Ce=arguments.length,Je=1,De=Gs.f,Ve=pt.f;Ce>Je;)for(var ln,hi=dt(arguments[Je++]),_i=De?Nt(Ho(hi),De(hi)):Ho(hi),bi=_i.length,bn=0;bi>bn;)ln=_i[bn++],(!_||M(Ve,hi,ln))&&(fe[ln]=hi[ln]);return fe}:J;function Se(gt){var Tt=gt.parentNode;return!(!Tt||"HTML"===Tt.nodeName)&&("fixed"===ta(gt,"position")||Se(Tt))}function Le(gt,Tt){var Kt=document.body,fe=document.documentElement,Ce=window.pageYOffset||fe.scrollTop||Kt.scrollTop,Je=window.pageXOffset||fe.scrollLeft||Kt.scrollLeft;Tt=Tt||Kt;var De=gt.getBoundingClientRect(),Ve=Tt.getBoundingClientRect(),hi=ta(Tt,"position"),_i={width:De.width,height:De.height};return"body"!==Tt.tagName.toLowerCase()&&"relative"===hi||"sticky"===hi?Object.assign(_i,{top:De.top-Ve.top,left:De.left-Ve.left}):Se(gt)?Object.assign(_i,{top:De.top,left:De.left}):Object.assign(_i,{top:De.top+Ce,left:De.left+Je})}Io({target:"Object",stat:!0,forced:Object.assign!==ne},{assign:ne});var fi=Math.floor,ji=ut("".charAt),Fn=ut("".replace),hn=ut("".slice),ao=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,_o=/\$([$&'`]|\d{1,2})/g,Ra=function(gt,Tt,Kt,fe,Ce,Je){var De=Kt+gt.length,Ve=fe.length,hi=_o;return void 0!==Ce&&(Ce=ci(Ce),hi=ao),Fn(Je,hi,function(_i,bi){var bn;switch(ji(bi,0)){case"$":return"$";case"&":return gt;case"`":return hn(Tt,0,Kt);case"'":return hn(Tt,De);case"<":bn=Ce[hn(bi,1,-1)];break;default:var ln=+bi;if(0===ln)return _i;if(ln>Ve){var kn=fi(ln/10);return 0===kn?_i:kn<=Ve?void 0===fe[kn-1]?ji(bi,1):fe[kn-1]+ji(bi,1):_i}bn=fe[ln-1]}return void 0===bn?"":bn})},is=ti("replace"),ms=Math.max,Or=Math.min,pl=ut([].concat),jr=ut([].push),Ps=ut("".indexOf),ea=ut("".slice),fl=function(gt){return void 0===gt?gt:String(gt)},ns="$0"==="a".replace(/./,"$0"),gl=!!/./[is]&&""===/./[is]("a","$0"),Za=!c(function(){var gt=/./;return gt.exec=function(){var Tt=[];return Tt.groups={a:"7"},Tt},"7"!=="".replace(gt,"$<a>")});function da(gt,Tt){if(gt instanceof SVGElement){var Kt=gt.getAttribute("class")||"";gt.setAttribute("class",Kt.replace(Tt,"").replace(/^\s+|\s+$/g,""))}else gt.className=gt.className.replace(Tt,"").replace(/^\s+|\s+$/g,"")}function ws(gt,Tt){var Kt="";if(gt.style.cssText&&(Kt+=gt.style.cssText),"string"==typeof Tt)Kt+=Tt;else for(var fe in Tt)Kt+="".concat(fe,":").concat(Tt[fe],";");gt.style.cssText=Kt}function Rs(gt){if(gt){if(!this._introItems[this._currentStep])return;var Tt=this._introItems[this._currentStep],Kt=Le(Tt.element,this._targetElement),fe=this._options.helperElementPadding;Se(Tt.element)?Ns(gt,"introjs-fixedTooltip"):da(gt,"introjs-fixedTooltip"),"floating"===Tt.position&&(fe=0),ws(gt,{width:"".concat(Kt.width+fe,"px"),height:"".concat(Kt.height+fe,"px"),top:"".concat(Kt.top-fe/2,"px"),left:"".concat(Kt.left-fe/2,"px")})}}_t("replace",function(gt,Tt,Kt){var fe=gl?"$":"$0";return[function(Je,De){var Ve=rt(this),hi=null==Je?void 0:jt(Je,is);return hi?M(hi,Je,Ve,De):M(Tt,so(Ve),Je,De)},function(Ce,Je){var De=Me(this),Ve=so(Ce);if("string"==typeof Je&&-1===Ps(Je,fe)&&-1===Ps(Je,"$<")){var hi=Kt(Tt,De,Ve,Je);if(hi.done)return hi.value}var _i=bt(Je);_i||(Je=so(Je));var bi=De.global;if(bi){var bn=De.unicode;De.lastIndex=0}for(var ln=[];;){var kn=un(De,Ve);if(null===kn||(jr(ln,kn),!bi))break;""===so(kn[0])&&(De.lastIndex=Bi(Ve,Fr(De.lastIndex),bn))}for(var lo="",eo=0,bo=0;bo<ln.length;bo++){for(var Xo=so((kn=ln[bo])[0]),co=ms(Or(xo(kn.index),Ve.length),0),ys=[],rs=1;rs<kn.length;rs++)jr(ys,fl(kn[rs]));var kr=kn.groups;if(_i){var Ua=pl([Xo],ys,co,Ve);void 0!==kr&&jr(Ua,kr);var Au=so(ka(Je,void 0,Ua))}else Au=Ra(Xo,Ve,co,ys,kr,Je);co>=eo&&(lo+=ea(Ve,eo,co)+Au,eo=co+Xo.length)}return lo+ea(Ve,eo)}]},!Za||!ns||gl);var zc=ti("unscopables"),Qa=Array.prototype;null==Qa[zc]&&Ki.f(Qa,zc,{configurable:!0,value:mn(null)});var nc=as.includes;Io({target:"Array",proto:!0},{includes:function(Tt){return nc(this,Tt,arguments.length>1?arguments[1]:void 0)}}),function(gt){Qa[zc][gt]=!0}("includes");var Eu=ts("slice"),Yc=ti("species"),_c=s.Array,$u=Math.max;Io({target:"Array",proto:!0,forced:!Eu},{slice:function(Tt,Kt){var Ve,hi,_i,fe=Gt(this),Ce=qn(fe),Je=Ts(Tt,Ce),De=Ts(void 0===Kt?Ce:Kt,Ce);if(Mn(fe)&&((Uo(Ve=fe.constructor)&&(Ve===_c||Mn(Ve.prototype))||Ht(Ve)&&null===(Ve=Ve[Yc]))&&(Ve=void 0),Ve===_c||void 0===Ve))return Ka(fe,Je,De);for(hi=new(void 0===Ve?_c:Ve)($u(De-Je,0)),_i=0;Je<De;Je++,_i++)Je in fe&&tn(hi,_i,fe[Je]);return hi.length=_i,hi}});var Tu=s.TypeError,Xc=function(gt){if(Il(gt))throw Tu("The method doesn't accept regular expressions");return gt},oc=ti("match"),gr=ut("".indexOf);Io({target:"String",proto:!0,forced:!function(gt){var Tt=/./;try{"/./"[gt](Tt)}catch(Kt){try{return Tt[oc]=!1,"/./"[gt](Tt)}catch(fe){}}return!1}("includes")},{includes:function(Tt){return!!~gr(so(rt(this)),so(Xc(Tt)),arguments.length>1?arguments[1]:void 0)}});var Pa=function(gt,Tt){var Kt=[][gt];return!!Kt&&c(function(){Kt.call(null,Tt||function(){throw 1},1)})},ia=ut([].join),Cu=dt!=Object,zr=Pa("join",",");Io({target:"Array",proto:!0,forced:Cu||!zr},{join:function(Tt){return ia(Gt(this),void 0===Tt?",":Tt)}});var _s=ut(ut.bind),Fa=ut([].push),na=function(gt){var Tt=1==gt,Kt=2==gt,fe=3==gt,Ce=4==gt,Je=6==gt,De=7==gt,Ve=5==gt||Je;return function(hi,_i,bi,bn){for(var co,ys,ln=ci(hi),kn=dt(ln),lr=function(gt,Tt){return le(gt),void 0===Tt?gt:_s?_s(gt,Tt):function(){return gt.apply(Tt,arguments)}}(_i,bi),lo=qn(kn),eo=0,bo=bn||Sa,Xo=Tt?bo(hi,lo):Kt||De?bo(hi,0):void 0;lo>eo;eo++)if((Ve||eo in kn)&&(ys=lr(co=kn[eo],eo,ln),gt))if(Tt)Xo[eo]=ys;else if(ys)switch(gt){case 3:return!0;case 5:return co;case 6:return eo;case 2:Fa(Xo,co)}else switch(gt){case 4:return!1;case 7:Fa(Xo,co)}return Je?-1:fe||Ce?Ce:Xo}},Kc=[na(0),na(1),na(2),na(3),na(4),na(5),na(6),na(7)][2];function rc(gt,Tt,Kt,fe,Ce){return gt.left+Tt+Kt.width>fe.width?(Ce.style.left="".concat(fe.width-Kt.width-gt.left,"px"),!1):(Ce.style.left="".concat(Tt,"px"),!0)}function $c(gt,Tt,Kt,fe){return gt.left+gt.width-Tt-Kt.width<0?(fe.style.left="".concat(-gt.left,"px"),!1):(fe.style.right="".concat(Tt,"px"),!0)}Io({target:"Array",proto:!0,forced:!ts("filter")},{filter:function(Tt){return Kc(this,Tt,arguments.length>1?arguments[1]:void 0)}});var Mh=ts("splice"),sc=s.TypeError,xr=Math.max,Zc=Math.min,Da=9007199254740991,Qu="Maximum allowed length exceeded";function Ba(gt,Tt){gt.includes(Tt)&&gt.splice(gt.indexOf(Tt),1)}function vc(gt,Tt,Kt){var fe=this._options.positionPrecedence.slice(),Ce=xl(),Je=Le(Tt).height+10,De=Le(Tt).width+20,Ve=gt.getBoundingClientRect(),hi="floating";Ve.bottom+Je>Ce.height&&Ba(fe,"bottom"),Ve.top-Je<0&&Ba(fe,"top"),Ve.right+De>Ce.width&&Ba(fe,"right"),Ve.left-De<0&&Ba(fe,"left");var bi,bn,_i=-1!==(bn=(bi=Kt||"").indexOf("-"))?bi.substr(bn):"";return Kt&&(Kt=Kt.split("-")[0]),fe.length&&(hi=fe.includes(Kt)?Kt:fe[0]),["top","bottom"].includes(hi)&&(hi+=function(gt,Tt,Kt,fe){var Je=Tt/2,De=Math.min(Kt.width,window.screen.width),Ve=["-left-aligned","-middle-aligned","-right-aligned"];return De-gt<Tt&&Ba(Ve,"-left-aligned"),(gt<Je||De-gt<Je)&&Ba(Ve,"-middle-aligned"),gt<Tt&&Ba(Ve,"-right-aligned"),Ve.length?Ve.includes(fe)?fe:Ve[0]:"-middle-aligned"}(Ve.left,De,Ce,_i)),hi}function os(gt,Tt,Kt,fe){var Je,De,Ve,hi,_i;if(fe=fe||!1,Tt.style.top=null,Tt.style.right=null,Tt.style.bottom=null,Tt.style.left=null,Tt.style.marginLeft=null,Tt.style.marginTop=null,Kt.style.display="inherit",this._introItems[this._currentStep])switch(Tt.className=["introjs-tooltip","string"==typeof(Je=this._introItems[this._currentStep]).tooltipClass?Je.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),Tt.setAttribute("role","dialog"),"floating"!==(_i=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(_i=vc.call(this,gt,Tt,_i)),Ve=Le(gt),De=Le(Tt),hi=xl(),Ns(Tt,"introjs-".concat(_i)),_i){case"top-right-aligned":Kt.className="introjs-arrow bottom-right";var bn=0;$c(Ve,bn,De,Tt),Tt.style.bottom="".concat(Ve.height+20,"px");break;case"top-middle-aligned":Kt.className="introjs-arrow bottom-middle";var ln=Ve.width/2-De.width/2;fe&&(ln+=5),$c(Ve,ln,De,Tt)&&(Tt.style.right=null,rc(Ve,ln,De,hi,Tt)),Tt.style.bottom="".concat(Ve.height+20,"px");break;case"top-left-aligned":case"top":Kt.className="introjs-arrow bottom",rc(Ve,fe?0:15,De,hi,Tt),Tt.style.bottom="".concat(Ve.height+20,"px");break;case"right":Tt.style.left="".concat(Ve.width+20,"px"),Ve.top+De.height>hi.height?(Kt.className="introjs-arrow left-bottom",Tt.style.top="-".concat(De.height-Ve.height-20,"px")):Kt.className="introjs-arrow left";break;case"left":!fe&&!0===this._options.showStepNumbers&&(Tt.style.top="15px"),Ve.top+De.height>hi.height?(Tt.style.top="-".concat(De.height-Ve.height-20,"px"),Kt.className="introjs-arrow right-bottom"):Kt.className="introjs-arrow right",Tt.style.right="".concat(Ve.width+20,"px");break;case"floating":Kt.style.display="none",Tt.style.left="50%",Tt.style.top="50%",Tt.style.marginLeft="-".concat(De.width/2,"px"),Tt.style.marginTop="-".concat(De.height/2,"px");break;case"bottom-right-aligned":Kt.className="introjs-arrow top-right",$c(Ve,bn=0,De,Tt),Tt.style.top="".concat(Ve.height+20,"px");break;case"bottom-middle-aligned":Kt.className="introjs-arrow top-middle",ln=Ve.width/2-De.width/2,fe&&(ln+=5),$c(Ve,ln,De,Tt)&&(Tt.style.right=null,rc(Ve,ln,De,hi,Tt)),Tt.style.top="".concat(Ve.height+20,"px");break;default:Kt.className="introjs-arrow top",rc(Ve,0,De,hi,Tt),Tt.style.top="".concat(Ve.height+20,"px")}}function Ll(){p(document.querySelectorAll(".introjs-showElement"),function(Tt){da(Tt,/introjs-[a-zA-Z]+/g)})}function Un(gt,Tt){var Kt=document.createElement(gt);Tt=Tt||{};var fe=/^(?:role|data-|aria-)/;for(var Ce in Tt){var Je=Tt[Ce];"style"===Ce?ws(Kt,Je):Ce.match(fe)?Kt.setAttribute(Ce,Je):Kt[Ce]=Je}return Kt}function bc(gt,Tt,Kt){if(Kt){var fe=Tt.style.opacity||"1";ws(Tt,{opacity:"0"}),window.setTimeout(function(){ws(Tt,{opacity:fe})},10)}gt.appendChild(Tt)}function qa(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function Fs(){var gt=document.querySelector(".introjs-disableInteraction");null===gt&&(gt=Un("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(gt)),Rs.call(this,gt)}function yc(gt){var Tt=this,Kt=Un("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(Kt.style.display="none");var fe=Un("ul");fe.setAttribute("role","tablist");var Ce=function(){Tt.goToStep(this.getAttribute("data-stepnumber"))};return p(this._introItems,function(Je,De){var Ve=Je.step,hi=Un("li"),_i=Un("a");hi.setAttribute("role","presentation"),_i.setAttribute("role","tab"),_i.onclick=Ce,De===gt.step-1&&(_i.className="active"),q(_i),_i.innerHTML="&nbsp;",_i.setAttribute("data-stepnumber",Ve),hi.appendChild(_i),fe.appendChild(hi)}),Kt.appendChild(fe),Kt}function Nl(gt,Tt){if(this._options.showBullets){var Kt=document.querySelector(".introjs-bullets");Kt.parentNode.replaceChild(yc.call(this,Tt),Kt)}}function ml(gt,Tt){this._options.showBullets&&(gt.querySelector(".introjs-bullets li > a.active").className="",gt.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(Tt.step,'"]')).className="active")}function Go(){var gt=Un("div");gt.className="introjs-progress",!1===this._options.showProgress&&(gt.style.display="none");var Tt=Un("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(Tt.className+=" "+this._options.progressBarAdditionalClass),Tt.setAttribute("role","progress"),Tt.setAttribute("aria-valuemin",0),Tt.setAttribute("aria-valuemax",100),Tt.setAttribute("aria-valuenow",qa.call(this)),Tt.style.cssText="width:".concat(qa.call(this),"%;"),gt.appendChild(Tt),gt}function Su(gt){gt.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(qa.call(this),"%;"),gt.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",qa.call(this))}function _l(gt){var Tt=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,gt.element);var De,Ve,hi,Kt=this,fe=document.querySelector(".introjs-helperLayer"),Ce=document.querySelector(".introjs-tooltipReferenceLayer"),Je="introjs-helperLayer";if("string"==typeof gt.highlightClass&&(Je+=" ".concat(gt.highlightClass)),"string"==typeof this._options.highlightClass&&(Je+=" ".concat(this._options.highlightClass)),null!==fe&&null!==Ce){var _i=Ce.querySelector(".introjs-helperNumberLayer"),bi=Ce.querySelector(".introjs-tooltiptext"),bn=Ce.querySelector(".introjs-tooltip-title"),ln=Ce.querySelector(".introjs-arrow"),kn=Ce.querySelector(".introjs-tooltip");hi=Ce.querySelector(".introjs-skipbutton"),Ve=Ce.querySelector(".introjs-prevbutton"),De=Ce.querySelector(".introjs-nextbutton"),fe.className=Je,kn.style.opacity=0,kn.style.display="none",$a.call(Kt,gt),Rs.call(Kt,fe),Rs.call(Kt,Ce),Ll(),Kt._lastShowElementTimer&&window.clearTimeout(Kt._lastShowElementTimer),Kt._lastShowElementTimer=window.setTimeout(function(){null!==_i&&(_i.innerHTML="".concat(gt.step," of ").concat(Tt._introItems.length)),bi.innerHTML=gt.intro,bn.innerHTML=gt.title,kn.style.display="block",os.call(Kt,gt.element,kn,ln),ml.call(Kt,Ce,gt),Su.call(Kt,Ce),kn.style.opacity=1,(null!=De&&/introjs-donebutton/gi.test(De.className)||null!=De)&&De.focus(),ht.call(Kt,gt.scrollTo,gt,bi)},350)}else{var lr=Un("div",{className:Je}),lo=Un("div",{className:"introjs-tooltipReferenceLayer"}),eo=Un("div",{className:"introjs-arrow"}),bo=Un("div",{className:"introjs-tooltip"}),Xo=Un("div",{className:"introjs-tooltiptext"}),co=Un("div",{className:"introjs-tooltip-header"}),ys=Un("h1",{className:"introjs-tooltip-title"}),rs=Un("div");ws(lr,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(Kt._options.overlayOpacity.toString(),") 0 0 0 5000px")}),$a.call(Kt,gt),Rs.call(Kt,lr),Rs.call(Kt,lo),bc(this._targetElement,lr,!0),bc(this._targetElement,lo),Xo.innerHTML=gt.intro,ys.innerHTML=gt.title,rs.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(rs.style.display="none"),co.appendChild(ys),bo.appendChild(co),bo.appendChild(Xo),bo.appendChild(yc.call(this,gt)),bo.appendChild(Go.call(this));var kr=Un("div");!0===this._options.showStepNumbers&&(kr.className="introjs-helperNumberLayer",kr.innerHTML="".concat(gt.step," of ").concat(this._introItems.length),bo.appendChild(kr)),bo.appendChild(eo),lo.appendChild(bo),(De=Un("a")).onclick=function(){Kt._introItems.length-1!==Kt._currentStep?vs.call(Kt):/introjs-donebutton/gi.test(De.className)&&("function"==typeof Kt._introCompleteCallback&&Kt._introCompleteCallback.call(Kt,Kt._currentStep,"done"),bs.call(Kt,Kt._targetElement))},q(De),De.innerHTML=this._options.nextLabel,(Ve=Un("a")).onclick=function(){0!==Kt._currentStep&&Bs.call(Kt)},q(Ve),Ve.innerHTML=this._options.prevLabel,q(hi=Un("a",{className:"introjs-skipbutton"})),hi.innerHTML=this._options.skipLabel,hi.onclick=function(){Kt._introItems.length-1===Kt._currentStep&&"function"==typeof Kt._introCompleteCallback&&Kt._introCompleteCallback.call(Kt,Kt._currentStep,"skip"),"function"==typeof Kt._introSkipCallback&&Kt._introSkipCallback.call(Kt),bs.call(Kt,Kt._targetElement)},co.appendChild(hi),this._introItems.length>1&&rs.appendChild(Ve),rs.appendChild(De),bo.appendChild(rs),os.call(Kt,gt.element,bo,eo),ht.call(this,gt.scrollTo,gt,bo)}var Ua=Kt._targetElement.querySelector(".introjs-disableInteraction");Ua&&Ua.parentNode.removeChild(Ua),gt.disableInteraction&&Fs.call(Kt),0===this._currentStep&&this._introItems.length>1?(null!=De&&(De.className="".concat(this._options.buttonClass," introjs-nextbutton"),De.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=Ve&&(Ve.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=De&&Ns(De,"introjs-fullbutton")):null!=Ve&&(Ve.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=Ve&&(Ve.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=De&&(De.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=Ve&&Ns(Ve,"introjs-fullbutton")):null!=De&&(!0===this._options.nextToDone?(De.innerHTML=this._options.doneLabel,Ns(De,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):De.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=Ve&&(Ve.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=De&&(De.className="".concat(this._options.buttonClass," introjs-nextbutton"),De.innerHTML=this._options.nextLabel)),null!=Ve&&Ve.setAttribute("role","button"),null!=De&&De.setAttribute("role","button"),null!=hi&&hi.setAttribute("role","button"),null!=De&&De.focus(),function(gt){var Tt=gt.element;Ns(Tt,"introjs-showElement");var Kt=ta(Tt,"position");"absolute"!==Kt&&"relative"!==Kt&&"sticky"!==Kt&&"fixed"!==Kt&&Ns(Tt,"introjs-relativePosition")}(gt),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,gt.element)}function qu(gt){this._currentStep=gt-2,void 0!==this._introItems&&vs.call(this)}function Pl(gt){this._currentStepNumber=gt,void 0!==this._introItems&&vs.call(this)}function vs(){var gt=this;this._direction="forward",void 0!==this._currentStepNumber&&p(this._introItems,function(fe,Ce){fe.step===gt._currentStepNumber&&(gt._currentStep=Ce-1,gt._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var Tt=this._introItems[this._currentStep],Kt=!0;return void 0!==this._introBeforeChangeCallback&&(Kt=this._introBeforeChangeCallback.call(this,Tt&&Tt.element)),!1===Kt?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void bs.call(this,this._targetElement)):void _l.call(this,Tt)}function Bs(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var gt=this._introItems[this._currentStep],Tt=!0;if(void 0!==this._introBeforeChangeCallback&&(Tt=this._introBeforeChangeCallback.call(this,gt&&gt.element)),!1===Tt)return++this._currentStep,!1;_l.call(this,gt)}function Ec(){return this._currentStep}function Fl(gt){var Tt=void 0===gt.code?gt.which:gt.code;if(null===Tt&&(Tt=null===gt.charCode?gt.keyCode:gt.charCode),"Escape"!==Tt&&27!==Tt||!0!==this._options.exitOnEsc){if("ArrowLeft"===Tt||37===Tt)Bs.call(this);else if("ArrowRight"===Tt||39===Tt)vs.call(this);else if("Enter"===Tt||"NumpadEnter"===Tt||13===Tt){var Kt=gt.target||gt.srcElement;Kt&&Kt.className.match("introjs-prevbutton")?Bs.call(this):Kt&&Kt.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),bs.call(this,this._targetElement)):Kt&&Kt.getAttribute("data-stepnumber")?Kt.click():vs.call(this),gt.preventDefault?gt.preventDefault():gt.returnValue=!1}}else bs.call(this,this._targetElement)}function ar(gt){if(null===gt||"object"!==B(gt)||void 0!==gt.nodeType)return gt;var Tt={};for(var Kt in gt)Tt[Kt]=void 0!==window.jQuery&&gt[Kt]instanceof window.jQuery?gt[Kt]:ar(gt[Kt]);return Tt}function tl(gt){var Tt=document.querySelector(".introjs-hints");return Tt?Tt.querySelectorAll(gt):[]}function Ia(gt){var Tt=tl('.introjs-hint[data-step="'.concat(gt,'"]'))[0];Tc.call(this),Tt&&Ns(Tt,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,gt)}function vl(){var gt=this;p(tl(".introjs-hint"),function(Kt){Ia.call(gt,Kt.getAttribute("data-step"))})}function th(){var gt=this,Tt=tl(".introjs-hint");Tt&&Tt.length?p(Tt,function(Kt){Qc.call(gt,Kt.getAttribute("data-step"))}):Cc.call(this,this._targetElement)}function Qc(gt){var Tt=tl('.introjs-hint[data-step="'.concat(gt,'"]'))[0];Tt&&da(Tt,/introjs-hidehint/g)}function eh(){var gt=this;p(tl(".introjs-hint"),function(Kt){Hl.call(gt,Kt.getAttribute("data-step"))}),e.off(document,"click",Tc,this,!1),e.off(window,"resize",Vl,this,!0),this._hintsAutoRefreshFunction&&e.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function Hl(gt){var Tt=tl('.introjs-hint[data-step="'.concat(gt,'"]'))[0];Tt&&Tt.parentNode.removeChild(Tt)}function Ys(){var gt=this,Tt=this,Kt=document.querySelector(".introjs-hints");null===Kt&&(Kt=Un("div",{className:"introjs-hints"}));p(this._introItems,function(Ce,Je){if(!document.querySelector('.introjs-hint[data-step="'.concat(Je,'"]'))){var De=Un("a",{className:"introjs-hint"});q(De),De.onclick=function(Je){return function(De){var Ve=De||window.event;Ve.stopPropagation&&Ve.stopPropagation(),null!==Ve.cancelBubble&&(Ve.cancelBubble=!0),Ha.call(Tt,Je)}}(Je),Ce.hintAnimation||Ns(De,"introjs-hint-no-anim"),Se(Ce.element)&&Ns(De,"introjs-fixedhint");var Ve=Un("div",{className:"introjs-hint-dot"}),hi=Un("div",{className:"introjs-hint-pulse"});De.appendChild(Ve),De.appendChild(hi),De.setAttribute("data-step",Je),Ce.targetElement=Ce.element,Ce.element=De,el.call(gt,Ce.hintPosition,De,Ce.targetElement),Kt.appendChild(De)}}),document.body.appendChild(Kt),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(gt,Tt){var fe,Kt=this;return function(){for(var Ce=arguments.length,Je=new Array(Ce),De=0;De<Ce;De++)Je[De]=arguments[De];clearTimeout(fe),fe=setTimeout(function(){gt.apply(Kt,Je)},Tt)}}(function(){return Vl.call(gt)},this._options.hintAutoRefreshInterval),e.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function el(gt,Tt,Kt){var fe=Tt.style,Ce=Le.call(this,Kt);switch(gt){default:case"top-left":fe.left="".concat(Ce.left,"px"),fe.top="".concat(Ce.top,"px");break;case"top-right":fe.left="".concat(Ce.left+Ce.width-20,"px"),fe.top="".concat(Ce.top,"px");break;case"bottom-left":fe.left="".concat(Ce.left,"px"),fe.top="".concat(Ce.top+Ce.height-20,"px");break;case"bottom-right":fe.left="".concat(Ce.left+Ce.width-20,"px"),fe.top="".concat(Ce.top+Ce.height-20,"px");break;case"middle-left":fe.left="".concat(Ce.left,"px"),fe.top="".concat(Ce.top+(Ce.height-20)/2,"px");break;case"middle-right":fe.left="".concat(Ce.left+Ce.width-20,"px"),fe.top="".concat(Ce.top+(Ce.height-20)/2,"px");break;case"middle-middle":fe.left="".concat(Ce.left+(Ce.width-20)/2,"px"),fe.top="".concat(Ce.top+(Ce.height-20)/2,"px");break;case"bottom-middle":fe.left="".concat(Ce.left+(Ce.width-20)/2,"px"),fe.top="".concat(Ce.top+Ce.height-20,"px");break;case"top-middle":fe.left="".concat(Ce.left+(Ce.width-20)/2,"px"),fe.top="".concat(Ce.top,"px")}}function Ha(gt){var Tt=document.querySelector('.introjs-hint[data-step="'.concat(gt,'"]')),Kt=this._introItems[gt];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,Tt,Kt,gt);var fe=Tc.call(this);if(parseInt(fe,10)!==gt){var Ce=Un("div",{className:"introjs-tooltip"}),Je=Un("div"),De=Un("div"),Ve=Un("div");Ce.onclick=function(bi){bi.stopPropagation?bi.stopPropagation():bi.cancelBubble=!0},Je.className="introjs-tooltiptext";var hi=Un("p");if(hi.innerHTML=Kt.hint,Je.appendChild(hi),this._options.hintShowButton){var _i=Un("a");_i.className=this._options.buttonClass,_i.setAttribute("role","button"),_i.innerHTML=this._options.hintButtonLabel,_i.onclick=Ia.bind(this,gt),Je.appendChild(_i)}De.className="introjs-arrow",Ce.appendChild(De),Ce.appendChild(Je),this._currentStep=Tt.getAttribute("data-step"),Ve.className="introjs-tooltipReferenceLayer introjs-hintReference",Ve.setAttribute("data-step",Tt.getAttribute("data-step")),Rs.call(this,Ve),Ve.appendChild(Ce),document.body.appendChild(Ve),os.call(this,Tt,Ce,De,!0)}}function Tc(){var gt=document.querySelector(".introjs-hintReference");if(gt){var Tt=gt.getAttribute("data-step");return gt.parentNode.removeChild(gt),Tt}}function Cc(gt){var Tt=this;if(this._introItems=[],this._options.hints)p(this._options.hints,function(fe){var Ce=ar(fe);"string"==typeof Ce.element&&(Ce.element=document.querySelector(Ce.element)),Ce.hintPosition=Ce.hintPosition||Tt._options.hintPosition,Ce.hintAnimation=Ce.hintAnimation||Tt._options.hintAnimation,null!==Ce.element&&Tt._introItems.push(Ce)});else{var Kt=gt.querySelectorAll("*[data-hint]");if(!Kt||!Kt.length)return!1;p(Kt,function(fe){var Ce=fe.getAttribute("data-hintanimation");Ce=Ce?"true"===Ce:Tt._options.hintAnimation,Tt._introItems.push({element:fe,hint:fe.getAttribute("data-hint"),hintPosition:fe.getAttribute("data-hintposition")||Tt._options.hintPosition,hintAnimation:Ce,tooltipClass:fe.getAttribute("data-tooltipclass"),position:fe.getAttribute("data-position")||Tt._options.tooltipPosition})})}Ys.call(this),e.on(document,"click",Tc,this,!1),e.on(window,"resize",Vl,this,!0)}function Vl(){var gt=this;p(this._introItems,function(Tt){var Kt=Tt.targetElement;void 0!==Kt&&el.call(gt,Tt.hintPosition,Tt.element,Kt)})}Io({target:"Array",proto:!0,forced:!Mh},{splice:function(Tt,Kt){var Ve,hi,_i,bi,bn,ln,fe=ci(this),Ce=qn(fe),Je=Ts(Tt,Ce),De=arguments.length;if(0===De?Ve=hi=0:1===De?(Ve=0,hi=Ce-Je):(Ve=De-2,hi=Zc(xr(xo(Kt),0),Ce-Je)),Ce+Ve-hi>Da)throw sc(Qu);for(_i=Sa(fe,hi),bi=0;bi<hi;bi++)(bn=Je+bi)in fe&&tn(_i,bi,fe[bn]);if(_i.length=hi,Ve<hi){for(bi=Je;bi<Ce-hi;bi++)ln=bi+Ve,(bn=bi+hi)in fe?fe[ln]=fe[bn]:delete fe[ln];for(bi=Ce;bi>Ce-hi+Ve;bi--)delete fe[bi-1]}else if(Ve>hi)for(bi=Ce-hi;bi>Je;bi--)ln=bi+Ve-1,(bn=bi+hi-1)in fe?fe[ln]=fe[bn]:delete fe[ln];for(bi=0;bi<Ve;bi++)fe[bi+Je]=arguments[bi+2];return fe.length=Ce-hi+Ve,_i}});var Xs=Math.floor,Sc=function(gt,Tt){var Kt=gt.length,fe=Xs(Kt/2);return Kt<8?ih(gt,Tt):vo(gt,Sc(Ka(gt,0,fe),Tt),Sc(Ka(gt,fe),Tt),Tt)},ih=function(gt,Tt){for(var Ce,Je,Kt=gt.length,fe=1;fe<Kt;){for(Je=fe,Ce=gt[fe];Je&&Tt(gt[Je-1],Ce)>0;)gt[Je]=gt[--Je];Je!==fe++&&(gt[Je]=Ce)}return gt},vo=function(gt,Tt,Kt,fe){for(var Ce=Tt.length,Je=Kt.length,De=0,Ve=0;De<Ce||Ve<Je;)gt[De+Ve]=De<Ce&&Ve<Je?fe(Tt[De],Kt[Ve])<=0?Tt[De++]:Kt[Ve++]:De<Ce?Tt[De++]:Kt[Ve++];return gt},Ul=Sc,bl=Be.match(/firefox\/(\d+)/i),lc=!!bl&&+bl[1],qc=/MSIE|Trident/.test(Be),wc=Be.match(/AppleWebKit\/(\d+)\./),wu=!!wc&&+wc[1],Ma=[],Ru=ut(Ma.sort),Du=ut(Ma.push),Iu=c(function(){Ma.sort(void 0)}),cc=c(function(){Ma.sort(null)}),il=Pa("sort"),fa=!c(function(){if(Ft)return Ft<70;if(!(lc&&lc>3)){if(qc)return!0;if(wu)return wu<603;var Tt,Kt,fe,Ce,gt="";for(Tt=65;Tt<76;Tt++){switch(Kt=String.fromCharCode(Tt),Tt){case 66:case 69:case 70:case 72:fe=3;break;case 68:case 71:fe=4;break;default:fe=2}for(Ce=0;Ce<47;Ce++)Ma.push({k:Kt+Ce,v:fe})}for(Ma.sort(function(Je,De){return De.v-Je.v}),Ce=0;Ce<Ma.length;Ce++)Kt=Ma[Ce].k.charAt(0),gt.charAt(gt.length-1)!==Kt&&(gt+=Kt);return"DGBEFHACIJK"!==gt}});function nh(gt){var Tt=this,Kt=gt.querySelectorAll("*[data-intro]"),fe=[];if(this._options.steps)p(this._options.steps,function(_i){var bi=ar(_i);if(bi.step=fe.length+1,bi.title=bi.title||"","string"==typeof bi.element&&(bi.element=document.querySelector(bi.element)),null==bi.element){var bn=document.querySelector(".introjsFloatingElement");null===bn&&(bn=Un("div",{className:"introjsFloatingElement"}),document.body.appendChild(bn)),bi.element=bn,bi.position="floating"}bi.position=bi.position||Tt._options.tooltipPosition,bi.scrollTo=bi.scrollTo||Tt._options.scrollTo,void 0===bi.disableInteraction&&(bi.disableInteraction=Tt._options.disableInteraction),null!==bi.element&&fe.push(bi)});else{var Je;if(Kt.length<1)return[];p(Kt,function(_i){if((!Tt._options.group||_i.getAttribute("data-intro-group")===Tt._options.group)&&"none"!==_i.style.display){var bi=parseInt(_i.getAttribute("data-step"),10);Je=_i.hasAttribute("data-disable-interaction")?!!_i.getAttribute("data-disable-interaction"):Tt._options.disableInteraction,bi>0&&(fe[bi-1]={element:_i,title:_i.getAttribute("data-title")||"",intro:_i.getAttribute("data-intro"),step:parseInt(_i.getAttribute("data-step"),10),tooltipClass:_i.getAttribute("data-tooltipclass"),highlightClass:_i.getAttribute("data-highlightclass"),position:_i.getAttribute("data-position")||Tt._options.tooltipPosition,scrollTo:_i.getAttribute("data-scrollto")||Tt._options.scrollTo,disableInteraction:Je})}});var De=0;p(Kt,function(_i){if((!Tt._options.group||_i.getAttribute("data-intro-group")===Tt._options.group)&&null===_i.getAttribute("data-step")){for(;void 0!==fe[De];)De++;Je=_i.hasAttribute("data-disable-interaction")?!!_i.getAttribute("data-disable-interaction"):Tt._options.disableInteraction,fe[De]={element:_i,title:_i.getAttribute("data-title")||"",intro:_i.getAttribute("data-intro"),step:De+1,tooltipClass:_i.getAttribute("data-tooltipclass"),highlightClass:_i.getAttribute("data-highlightclass"),position:_i.getAttribute("data-position")||Tt._options.tooltipPosition,scrollTo:_i.getAttribute("data-scrollto")||Tt._options.scrollTo,disableInteraction:Je}}})}for(var Ve=[],hi=0;hi<fe.length;hi++)fe[hi]&&Ve.push(fe[hi]);return(fe=Ve).sort(function(_i,bi){return _i.step-bi.step}),fe}function yl(gt){var Tt=document.querySelector(".introjs-tooltipReferenceLayer"),Kt=document.querySelector(".introjs-helperLayer"),fe=document.querySelector(".introjs-disableInteraction");if(Rs.call(this,Kt),Rs.call(this,Tt),Rs.call(this,fe),gt&&(this._introItems=nh.call(this,this._targetElement),Nl.call(this,Tt,this._introItems[this._currentStep]),Su.call(this,Tt)),null!=this._currentStep){var Ce=document.querySelector(".introjs-arrow"),Je=document.querySelector(".introjs-tooltip");Je&&Ce&&os.call(this,this._introItems[this._currentStep].element,Je,Ce)}return Vl.call(this),this}function nl(){yl.call(this)}function Aa(gt,Tt){if(gt&&gt.parentElement){var Kt=gt.parentElement;Tt?(ws(gt,{opacity:"0"}),window.setTimeout(function(){try{Kt.removeChild(gt)}catch(fe){}},500)):Kt.removeChild(gt)}}function bs(gt,Tt){var Kt=!0;if(void 0!==this._introBeforeExitCallback&&(Kt=this._introBeforeExitCallback.call(this)),Tt||!1!==Kt){var fe=gt.querySelectorAll(".introjs-overlay");fe&&fe.length&&p(fe,function(hi){return Aa(hi)}),Aa(gt.querySelector(".introjs-helperLayer"),!0),Aa(gt.querySelector(".introjs-tooltipReferenceLayer")),Aa(gt.querySelector(".introjs-disableInteraction")),Aa(document.querySelector(".introjsFloatingElement")),Ll(),e.off(window,"keydown",Fl,this,!0),e.off(window,"resize",nl,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function tu(gt){var Tt=this,Kt=Un("div",{className:"introjs-overlay"});return ws(Kt,{top:0,bottom:0,left:0,right:0,position:"fixed"}),gt.appendChild(Kt),!0===this._options.exitOnOverlayClick&&(ws(Kt,{cursor:"pointer"}),Kt.onclick=function(){bs.call(Tt,gt)}),!0}function Va(gt){void 0!==this._introStartCallback&&this._introStartCallback.call(this,gt);var Tt=nh.call(this,gt);return 0===Tt.length||(this._introItems=Tt,tu.call(this,gt)&&(vs.call(this),this._options.keyboardNavigation&&e.on(window,"keydown",Fl,this,!0),e.on(window,"resize",nl,this,!0))),!1}function El(gt){this._targetElement=gt,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}Io({target:"Array",proto:!0,forced:Iu||!cc||!il||!fa},{sort:function(Tt){void 0!==Tt&&le(Tt);var Kt=ci(this);if(fa)return void 0===Tt?Ru(Kt):Ru(Kt,Tt);var Je,De,fe=[],Ce=qn(Kt);for(De=0;De<Ce;De++)De in Kt&&Du(fe,Kt[De]);for(Ul(fe,function(gt){return function(Tt,Kt){return void 0===Kt?-1:void 0===Tt?1:void 0!==gt?+gt(Tt,Kt)||0:so(Tt)>so(Kt)?1:-1}}(Tt)),Je=fe.length,De=0;De<Je;)Kt[De]=fe[De++];for(;De<Ce;)delete Kt[De++];return Kt}});var Rc=function gt(Tt){var Kt;if("object"===B(Tt))Kt=new El(Tt);else if("string"==typeof Tt){var fe=document.querySelector(Tt);if(!fe)throw new Error("There is no element with given selector.");Kt=new El(fe)}else Kt=new El(document.body);return gt.instances[b(Kt,"introjs-instance")]=Kt,Kt};return Rc.version="4.3.0",Rc.instances={},Rc.fn=El.prototype={clone:function(){return new El(this)},setOption:function(Tt,Kt){return this._options[Tt]=Kt,this},setOptions:function(Tt){return this._options=function(gt,Tt){var fe,Kt={};for(fe in gt)Kt[fe]=gt[fe];for(fe in Tt)Kt[fe]=Tt[fe];return Kt}(this._options,Tt),this},start:function(){return Va.call(this,this._targetElement),this},goToStep:function(Tt){return qu.call(this,Tt),this},addStep:function(Tt){return this._options.steps||(this._options.steps=[]),this._options.steps.push(Tt),this},addSteps:function(Tt){if(Tt.length){for(var Kt=0;Kt<Tt.length;Kt++)this.addStep(Tt[Kt]);return this}},goToStepNumber:function(Tt){return Pl.call(this,Tt),this},nextStep:function(){return vs.call(this),this},previousStep:function(){return Bs.call(this),this},currentStep:function(){return Ec.call(this)},exit:function(Tt){return bs.call(this,this._targetElement,Tt),this},refresh:function(Tt){return yl.call(this,Tt),this},onbeforechange:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=Tt,this},onchange:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=Tt,this},onafterchange:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=Tt,this},oncomplete:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=Tt,this},onhintsadded:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=Tt,this},onhintclick:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=Tt,this},onhintclose:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=Tt,this},onstart:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=Tt,this},onexit:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=Tt,this},onskip:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=Tt,this},onbeforeexit:function(Tt){if("function"!=typeof Tt)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=Tt,this},addHints:function(){return Cc.call(this,this._targetElement),this},hideHint:function(Tt){return Ia.call(this,Tt),this},hideHints:function(){return vl.call(this),this},showHint:function(Tt){return Qc.call(this,Tt),this},showHints:function(){return th.call(this),this},removeHints:function(){return eh.call(this),this},removeHint:function(Tt){return Hl().call(this,Tt),this},showHintDialog:function(Tt){return Ha.call(this,Tt),this}},Rc}()},8704:(k,B,f)=>{"use strict";f.d(B,{PG:()=>w,nm:()=>U});var b=f(5e3),p=f(93075),e=f(54968),t=f(69808);const n=["editorContainer"],o=new b.OlP("NGX_MONACO_EDITOR_CONFIG");let c,s=!1,_=(()=>{class V{constructor($){this.config=$,this.onInit=new b.vpe}ngAfterViewInit(){s?c.then(()=>{this.initMonaco(this._options)}):(s=!0,c=new Promise($=>{const pt=(this.config.baseUrl||"./assets")+"/monaco-editor/min/vs";if("object"==typeof window.monaco)return void $();const nt=()=>{window.require.config({paths:{vs:`${pt}`}}),window.require(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options),$()})};if(window.require)nt();else{const st=document.createElement("script");st.type="text/javascript",st.src=`${pt}/loader.js`,st.addEventListener("load",nt),document.body.appendChild(st)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return V.\u0275fac=function($){return new($||V)(b.Y36(o))},V.\u0275cmp=b.Xpm({type:V,selectors:[["ng-component"]],viewQuery:function($,pt){if(1&$&&b.Gf(n,7),2&$){let nt;b.iGM(nt=b.CRH())&&(pt._editorContainer=nt.first)}},outputs:{onInit:"onInit"},decls:0,vars:0,template:function($,pt){},encapsulation:2}),V})(),w=(()=>{class V extends _{constructor($,pt){super(pt),this.zone=$,this.editorConfig=pt,this._value="",this.propagateChange=nt=>{},this.onTouched=()=>{}}set options($){this._options=Object.assign({},this.config.defaultOptions,$),this._editor&&(this._editor.dispose(),this.initMonaco($))}get options(){return this._options}set model($){this.options.model=$,this._editor&&(this._editor.dispose(),this.initMonaco(this.options))}writeValue($){this._value=$||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange($){this.propagateChange=$}registerOnTouched($){this.onTouched=$}initMonaco($){const pt=!!$.model;if(pt){const nt=monaco.editor.getModel($.model.uri||"");nt?($.model=nt,$.model.setValue(this._value)):$.model=monaco.editor.createModel($.model.value,$.model.language,$.model.uri)}this._editor=monaco.editor.create(this._editorContainer.nativeElement,$),pt||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(nt=>{const st=this._editor.getValue();this.zone.run(()=>{this.propagateChange(st),this._value=st})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,e.R)(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}}return V.\u0275fac=function($){return new($||V)(b.Y36(b.R0b),b.Y36(o))},V.\u0275cmp=b.Xpm({type:V,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[b._Bn([{provide:p.JU,useExisting:(0,b.Gpc)(()=>V),multi:!0}]),b.qOj],decls:2,vars:0,consts:[[1,"editor-container"],["editorContainer",""]],template:function($,pt){1&$&&b._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%] {\n          display: block;\n          height: 200px;\n      }\n\n      .editor-container[_ngcontent-%COMP%] {\n          width: 100%;\n          height: 98%;\n      }"]}),V})(),U=(()=>{class V{static forRoot($={}){return{ngModule:V,providers:[{provide:o,useValue:$}]}}}return V.\u0275fac=function($){return new($||V)},V.\u0275mod=b.oAB({type:V}),V.\u0275inj=b.cJS({imports:[[t.ez]]}),V})()},61135:(k,B,f)=>{"use strict";f.d(B,{X:()=>p});var b=f(77579);class p extends b.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:o}=this;if(t)throw n;return this._throwIfClosed(),o}next(t){super.next(this._value=t)}}},79307:(k,B,f)=>{"use strict";f.d(B,{y:()=>w});var b=f(70930),p=f(50727),e=f(48822),t=f(44671);var s=f(42416),c=f(30576),_=f(72806);let w=(()=>{class H{constructor(pt){pt&&(this._subscribe=pt)}lift(pt){const nt=new H;return nt.source=this,nt.operator=pt,nt}subscribe(pt,nt,st){const Ct=function(H){return H&&H instanceof b.Lv||function(H){return H&&(0,c.m)(H.next)&&(0,c.m)(H.error)&&(0,c.m)(H.complete)}(H)&&(0,p.Nn)(H)}(pt)?pt:new b.Hp(pt,nt,st);return(0,_.x)(()=>{const{operator:xt,source:yt}=this;Ct.add(xt?xt.call(Ct,yt):yt?this._subscribe(Ct):this._trySubscribe(Ct))}),Ct}_trySubscribe(pt){try{return this._subscribe(pt)}catch(nt){pt.error(nt)}}forEach(pt,nt){return new(nt=M(nt))((st,Ct)=>{let xt;xt=this.subscribe(yt=>{try{pt(yt)}catch(ut){Ct(ut),null==xt||xt.unsubscribe()}},Ct,st)})}_subscribe(pt){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(pt)}[e.L](){return this}pipe(...pt){return function(H){return 0===H.length?t.y:1===H.length?H[0]:function(pt){return H.reduce((nt,st)=>st(nt),pt)}}(pt)(this)}toPromise(pt){return new(pt=M(pt))((nt,st)=>{let Ct;this.subscribe(xt=>Ct=xt,xt=>st(xt),()=>nt(Ct))})}}return H.create=$=>new H($),H})();function M(H){var $;return null!==($=null!=H?H:s.v.Promise)&&void 0!==$?$:Promise}},77579:(k,B,f)=>{"use strict";f.d(B,{x:()=>s});var b=f(79307),p=f(50727);const t=(0,f(83888).d)(_=>function(){_(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var n=f(38737),o=f(72806);let s=(()=>{class _ extends b.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(M){const U=new c(this,this);return U.operator=M,U}_throwIfClosed(){if(this.closed)throw new t}next(M){(0,o.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const U=this.observers.slice();for(const V of U)V.next(M)}})}error(M){(0,o.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=M;const{observers:U}=this;for(;U.length;)U.shift().error(M)}})}complete(){(0,o.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:M}=this;for(;M.length;)M.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var M;return(null===(M=this.observers)||void 0===M?void 0:M.length)>0}_trySubscribe(M){return this._throwIfClosed(),super._trySubscribe(M)}_subscribe(M){return this._throwIfClosed(),this._checkFinalizedStatuses(M),this._innerSubscribe(M)}_innerSubscribe(M){const{hasError:U,isStopped:V,observers:H}=this;return U||V?p.Lc:(H.push(M),new p.w0(()=>(0,n.P)(H,M)))}_checkFinalizedStatuses(M){const{hasError:U,thrownError:V,isStopped:H}=this;U?M.error(V):H&&M.complete()}asObservable(){const M=new b.y;return M.source=this,M}}return _.create=(w,M)=>new c(w,M),_})();class c extends s{constructor(w,M){super(),this.destination=w,this.source=M}next(w){var M,U;null===(U=null===(M=this.destination)||void 0===M?void 0:M.next)||void 0===U||U.call(M,w)}error(w){var M,U;null===(U=null===(M=this.destination)||void 0===M?void 0:M.error)||void 0===U||U.call(M,w)}complete(){var w,M;null===(M=null===(w=this.destination)||void 0===w?void 0:w.complete)||void 0===M||M.call(w)}_subscribe(w){var M,U;return null!==(U=null===(M=this.source)||void 0===M?void 0:M.subscribe(w))&&void 0!==U?U:p.Lc}}},70930:(k,B,f)=>{"use strict";f.d(B,{Hp:()=>V,Lv:()=>U});var b=f(30576),p=f(50727),e=f(42416),t=f(87849),n=f(25032);const o=_("C",void 0,void 0);function _(st,Ct,xt){return{kind:st,value:Ct,error:xt}}var w=f(43410),M=f(72806);class U extends p.w0{constructor(Ct){super(),this.isStopped=!1,Ct?(this.destination=Ct,(0,p.Nn)(Ct)&&Ct.add(this)):this.destination=nt}static create(Ct,xt,yt){return new V(Ct,xt,yt)}next(Ct){this.isStopped?pt(_("N",Ct,void 0),this):this._next(Ct)}error(Ct){this.isStopped?pt(_("E",void 0,Ct),this):(this.isStopped=!0,this._error(Ct))}complete(){this.isStopped?pt(o,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ct){this.destination.next(Ct)}_error(Ct){try{this.destination.error(Ct)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class V extends U{constructor(Ct,xt,yt){let ut;if(super(),(0,b.m)(Ct))ut=Ct;else if(Ct){let tt;({next:ut,error:xt,complete:yt}=Ct),this&&e.v.useDeprecatedNextContext?(tt=Object.create(Ct),tt.unsubscribe=()=>this.unsubscribe()):tt=Ct,ut=null==ut?void 0:ut.bind(tt),xt=null==xt?void 0:xt.bind(tt),yt=null==yt?void 0:yt.bind(tt)}this.destination={next:ut?H(ut):n.Z,error:H(null!=xt?xt:$),complete:yt?H(yt):n.Z}}}function H(st,Ct){return(...xt)=>{try{st(...xt)}catch(yt){e.v.useDeprecatedSynchronousErrorHandling?(0,M.O)(yt):(0,t.h)(yt)}}}function $(st){throw st}function pt(st,Ct){const{onStoppedNotification:xt}=e.v;xt&&w.z.setTimeout(()=>xt(st,Ct))}const nt={closed:!0,next:n.Z,error:$,complete:n.Z}},50727:(k,B,f)=>{"use strict";f.d(B,{Lc:()=>o,w0:()=>n,Nn:()=>s});var b=f(30576);const e=(0,f(83888).d)(_=>function(M){_(this),this.message=M?`${M.length} errors occurred during unsubscription:\n${M.map((U,V)=>`${V+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=M});var t=f(38737);class n{constructor(w){this.initialTeardown=w,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let w;if(!this.closed){this.closed=!0;const{_parentage:M}=this;if(M)if(this._parentage=null,Array.isArray(M))for(const H of M)H.remove(this);else M.remove(this);const{initialTeardown:U}=this;if((0,b.m)(U))try{U()}catch(H){w=H instanceof e?H.errors:[H]}const{_teardowns:V}=this;if(V){this._teardowns=null;for(const H of V)try{c(H)}catch($){w=null!=w?w:[],$ instanceof e?w=[...w,...$.errors]:w.push($)}}if(w)throw new e(w)}}add(w){var M;if(w&&w!==this)if(this.closed)c(w);else{if(w instanceof n){if(w.closed||w._hasParent(this))return;w._addParent(this)}(this._teardowns=null!==(M=this._teardowns)&&void 0!==M?M:[]).push(w)}}_hasParent(w){const{_parentage:M}=this;return M===w||Array.isArray(M)&&M.includes(w)}_addParent(w){const{_parentage:M}=this;this._parentage=Array.isArray(M)?(M.push(w),M):M?[M,w]:w}_removeParent(w){const{_parentage:M}=this;M===w?this._parentage=null:Array.isArray(M)&&(0,t.P)(M,w)}remove(w){const{_teardowns:M}=this;M&&(0,t.P)(M,w),w instanceof n&&w._removeParent(this)}}n.EMPTY=(()=>{const _=new n;return _.closed=!0,_})();const o=n.EMPTY;function s(_){return _ instanceof n||_&&"closed"in _&&(0,b.m)(_.remove)&&(0,b.m)(_.add)&&(0,b.m)(_.unsubscribe)}function c(_){(0,b.m)(_)?_():_.unsubscribe()}},42416:(k,B,f)=>{"use strict";f.d(B,{v:()=>b});const b={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},39841:(k,B,f)=>{"use strict";f.d(B,{a:()=>w});var b=f(79307),p=f(54742),e=f(32076),t=f(44671),n=f(83268),o=f(63269),s=f(31810),c=f(25403),_=f(39672);function w(...V){const H=(0,o.yG)(V),$=(0,o.jO)(V),{args:pt,keys:nt}=(0,p.D)(V);if(0===pt.length)return(0,e.D)([],H);const st=new b.y(function(V,H,$=t.y){return pt=>{U(H,()=>{const{length:nt}=V,st=new Array(nt);let Ct=nt,xt=nt;for(let yt=0;yt<nt;yt++)U(H,()=>{const ut=(0,e.D)(V[yt],H);let tt=!1;ut.subscribe(new c.Q(pt,lt=>{st[yt]=lt,tt||(tt=!0,xt--),xt||pt.next($(st.slice()))},()=>{--Ct||pt.complete()}))},pt)},pt)}}(pt,H,nt?Ct=>(0,s.n)(nt,Ct):t.y));return $?st.pipe((0,n.Z)($)):st}function U(V,H,$){V?(0,_.f)($,V,H):H()}},97272:(k,B,f)=>{"use strict";f.d(B,{z:()=>n});var b=f(8189),e=f(63269),t=f(32076);function n(...o){return(0,b.J)(1)((0,t.D)(o,(0,e.yG)(o)))}},49770:(k,B,f)=>{"use strict";f.d(B,{P:()=>e});var b=f(79307),p=f(38421);function e(t){return new b.y(n=>{(0,p.Xf)(t()).subscribe(n)})}},60515:(k,B,f)=>{"use strict";f.d(B,{E:()=>p});const p=new(f(79307).y)(n=>n.complete())},4128:(k,B,f)=>{"use strict";f.d(B,{D:()=>c});var b=f(79307),p=f(54742),e=f(38421),t=f(63269),n=f(25403),o=f(83268),s=f(31810);function c(..._){const w=(0,t.jO)(_),{args:M,keys:U}=(0,p.D)(_),V=new b.y(H=>{const{length:$}=M;if(!$)return void H.complete();const pt=new Array($);let nt=$,st=$;for(let Ct=0;Ct<$;Ct++){let xt=!1;(0,e.Xf)(M[Ct]).subscribe(new n.Q(H,yt=>{xt||(xt=!0,st--),pt[Ct]=yt},()=>nt--,void 0,()=>{(!nt||!xt)&&(st||H.next(U?(0,s.n)(U,pt):pt),H.complete())}))}});return w?V.pipe((0,o.Z)(w)):V}},32076:(k,B,f)=>{"use strict";f.d(B,{D:()=>lt});var b=f(38421),p=f(39672),e=f(54482),t=f(25403);function n(ot,Lt=0){return(0,e.e)((at,dt)=>{at.subscribe(new t.Q(dt,it=>(0,p.f)(dt,ot,()=>dt.next(it),Lt),()=>(0,p.f)(dt,ot,()=>dt.complete(),Lt),it=>(0,p.f)(dt,ot,()=>dt.error(it),Lt)))})}function o(ot,Lt=0){return(0,e.e)((at,dt)=>{dt.add(ot.schedule(()=>at.subscribe(dt),Lt))})}var _=f(79307),M=f(2202),U=f(30576);function H(ot,Lt){if(!ot)throw new Error("Iterable cannot be null");return new _.y(at=>{(0,p.f)(at,Lt,()=>{const dt=ot[Symbol.asyncIterator]();(0,p.f)(at,Lt,()=>{dt.next().then(it=>{it.done?at.complete():at.next(it.value)})},0,!0)})})}var $=f(93670),pt=f(28239),nt=f(81144),st=f(26495),Ct=f(12206),xt=f(44532),yt=f(53260);function lt(ot,Lt){return Lt?function(ot,Lt){if(null!=ot){if((0,$.c)(ot))return function(ot,Lt){return(0,b.Xf)(ot).pipe(o(Lt),n(Lt))}(ot,Lt);if((0,nt.z)(ot))return function(ot,Lt){return new _.y(at=>{let dt=0;return Lt.schedule(function(){dt===ot.length?at.complete():(at.next(ot[dt++]),at.closed||this.schedule())})})}(ot,Lt);if((0,pt.t)(ot))return function(ot,Lt){return(0,b.Xf)(ot).pipe(o(Lt),n(Lt))}(ot,Lt);if((0,Ct.D)(ot))return H(ot,Lt);if((0,st.T)(ot))return function(ot,Lt){return new _.y(at=>{let dt;return(0,p.f)(at,Lt,()=>{dt=ot[M.h](),(0,p.f)(at,Lt,()=>{let it,rt;try{({value:it,done:rt}=dt.next())}catch(Gt){return void at.error(Gt)}rt?at.complete():at.next(it)},0,!0)}),()=>(0,U.m)(null==dt?void 0:dt.return)&&dt.return()})}(ot,Lt);if((0,yt.L)(ot))return function(ot,Lt){return H((0,yt.Q)(ot),Lt)}(ot,Lt)}throw(0,xt.z)(ot)}(ot,Lt):(0,b.Xf)(ot)}},54968:(k,B,f)=>{"use strict";f.d(B,{R:()=>w});var b=f(38421),p=f(79307),e=f(95577),t=f(81144),n=f(30576),o=f(83268);const s=["addListener","removeListener"],c=["addEventListener","removeEventListener"],_=["on","off"];function w($,pt,nt,st){if((0,n.m)(nt)&&(st=nt,nt=void 0),st)return w($,pt,nt).pipe((0,o.Z)(st));const[Ct,xt]=function($){return(0,n.m)($.addEventListener)&&(0,n.m)($.removeEventListener)}($)?c.map(yt=>ut=>$[yt](pt,ut,nt)):function($){return(0,n.m)($.addListener)&&(0,n.m)($.removeListener)}($)?s.map(M($,pt)):function($){return(0,n.m)($.on)&&(0,n.m)($.off)}($)?_.map(M($,pt)):[];if(!Ct&&(0,t.z)($))return(0,e.z)(yt=>w(yt,pt,nt))((0,b.Xf)($));if(!Ct)throw new TypeError("Invalid event target");return new p.y(yt=>{const ut=(...tt)=>yt.next(1<tt.length?tt:tt[0]);return Ct(ut),()=>xt(ut)})}function M($,pt){return nt=>st=>$[nt](pt,st)}},38421:(k,B,f)=>{"use strict";f.d(B,{Xf:()=>V});var b=f(35987),p=f(81144),e=f(28239),t=f(79307),n=f(93670),o=f(12206),s=f(44532),c=f(26495),_=f(53260),w=f(30576),M=f(87849),U=f(48822);function V(yt){if(yt instanceof t.y)return yt;if(null!=yt){if((0,n.c)(yt))return function(yt){return new t.y(ut=>{const tt=yt[U.L]();if((0,w.m)(tt.subscribe))return tt.subscribe(ut);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(yt);if((0,p.z)(yt))return function(yt){return new t.y(ut=>{for(let tt=0;tt<yt.length&&!ut.closed;tt++)ut.next(yt[tt]);ut.complete()})}(yt);if((0,e.t)(yt))return function(yt){return new t.y(ut=>{yt.then(tt=>{ut.closed||(ut.next(tt),ut.complete())},tt=>ut.error(tt)).then(null,M.h)})}(yt);if((0,o.D)(yt))return st(yt);if((0,c.T)(yt))return function(yt){return new t.y(ut=>{for(const tt of yt)if(ut.next(tt),ut.closed)return;ut.complete()})}(yt);if((0,_.L)(yt))return function(yt){return st((0,_.Q)(yt))}(yt)}throw(0,s.z)(yt)}function st(yt){return new t.y(ut=>{(function(yt,ut){var tt,lt,ot,Lt;return(0,b.mG)(this,void 0,void 0,function*(){try{for(tt=(0,b.KL)(yt);!(lt=yield tt.next()).done;)if(ut.next(lt.value),ut.closed)return}catch(at){ot={error:at}}finally{try{lt&&!lt.done&&(Lt=tt.return)&&(yield Lt.call(tt))}finally{if(ot)throw ot.error}}ut.complete()})})(yt,ut).catch(tt=>ut.error(tt))})}},56451:(k,B,f)=>{"use strict";f.d(B,{T:()=>o});var b=f(8189),p=f(38421),e=f(60515),t=f(63269),n=f(32076);function o(...s){const c=(0,t.yG)(s),_=(0,t._6)(s,1/0),w=s;return w.length?1===w.length?(0,p.Xf)(w[0]):(0,b.J)(_)((0,n.D)(w,c)):e.E}},39646:(k,B,f)=>{"use strict";f.d(B,{of:()=>e});var b=f(63269),p=f(32076);function e(...t){const n=(0,b.yG)(t);return(0,p.D)(t,n)}},5963:(k,B,f)=>{"use strict";f.d(B,{H:()=>n});var b=f(79307),p=f(34986),e=f(93532);function n(o=0,s,c=p.P){let _=-1;return null!=s&&((0,e.K)(s)?c=s:_=s),new b.y(w=>{let M=function(o){return o instanceof Date&&!isNaN(o)}(o)?+o-c.now():o;M<0&&(M=0);let U=0;return c.schedule(function(){w.closed||(w.next(U++),0<=_?this.schedule(void 0,_):w.complete())},M)})}},25403:(k,B,f)=>{"use strict";f.d(B,{Q:()=>p});var b=f(70930);class p extends b.Lv{constructor(t,n,o,s,c){super(t),this.onFinalize=c,this._next=n?function(_){try{n(_)}catch(w){t.error(w)}}:super._next,this._error=s?function(_){try{s(_)}catch(w){t.error(w)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(_){t.error(_)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}},70262:(k,B,f)=>{"use strict";f.d(B,{K:()=>t});var b=f(38421),p=f(25403),e=f(54482);function t(n){return(0,e.e)((o,s)=>{let w,c=null,_=!1;c=o.subscribe(new p.Q(s,void 0,void 0,M=>{w=(0,b.Xf)(n(M,t(n)(o))),c?(c.unsubscribe(),c=null,w.subscribe(s)):_=!0})),_&&(c.unsubscribe(),c=null,w.subscribe(s))})}},24351:(k,B,f)=>{"use strict";f.d(B,{b:()=>e});var b=f(95577),p=f(30576);function e(t,n){return(0,p.m)(n)?(0,b.z)(t,n,1):(0,b.z)(t,1)}},78372:(k,B,f)=>{"use strict";f.d(B,{b:()=>t});var b=f(34986),p=f(54482),e=f(25403);function t(n,o=b.z){return(0,p.e)((s,c)=>{let _=null,w=null,M=null;const U=()=>{if(_){_.unsubscribe(),_=null;const H=w;w=null,c.next(H)}};function V(){const H=M+n,$=o.now();if($<H)return _=this.schedule(void 0,H-$),void c.add(_);U()}s.subscribe(new e.Q(c,H=>{w=H,M=o.now(),_||(_=o.schedule(V,n),c.add(_))},()=>{U(),c.complete()},void 0,()=>{w=_=null}))})}},91005:(k,B,f)=>{"use strict";f.d(B,{g:()=>U});var b=f(34986),p=f(97272),e=f(95698),t=f(54482),n=f(25403),o=f(25032),c=f(69718),_=f(95577);function w(V,H){return H?$=>(0,p.z)(H.pipe((0,e.q)(1),(0,t.e)((V,H)=>{V.subscribe(new n.Q(H,o.Z))})),$.pipe(w(V))):(0,_.z)(($,pt)=>V($,pt).pipe((0,e.q)(1),(0,c.h)($)))}var M=f(5963);function U(V,H=b.z){const $=(0,M.H)(V,H);return w(()=>$)}},71884:(k,B,f)=>{"use strict";f.d(B,{x:()=>t});var b=f(44671),p=f(54482),e=f(25403);function t(o,s=b.y){return o=null!=o?o:n,(0,p.e)((c,_)=>{let w,M=!0;c.subscribe(new e.Q(_,U=>{const V=s(U);(M||!o(w,V))&&(M=!1,w=V,_.next(U))}))})}function n(o,s){return o===s}},39300:(k,B,f)=>{"use strict";f.d(B,{h:()=>e});var b=f(54482),p=f(25403);function e(t,n){return(0,b.e)((o,s)=>{let c=0;o.subscribe(new p.Q(s,_=>t.call(n,_,c++)&&s.next(_)))})}},28746:(k,B,f)=>{"use strict";f.d(B,{x:()=>p});var b=f(54482);function p(e){return(0,b.e)((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}},54004:(k,B,f)=>{"use strict";f.d(B,{U:()=>e});var b=f(54482),p=f(25403);function e(t,n){return(0,b.e)((o,s)=>{let c=0;o.subscribe(new p.Q(s,_=>{s.next(t.call(n,_,c++))}))})}},69718:(k,B,f)=>{"use strict";f.d(B,{h:()=>p});var b=f(54004);function p(e){return(0,b.U)(()=>e)}},8189:(k,B,f)=>{"use strict";f.d(B,{J:()=>e});var b=f(95577),p=f(44671);function e(t=1/0){return(0,b.z)(p.y,t)}},95577:(k,B,f)=>{"use strict";f.d(B,{z:()=>c});var b=f(54004),p=f(38421),e=f(54482),n=(f(39672),f(25403)),s=f(30576);function c(_,w,M=1/0){return(0,s.m)(w)?c((U,V)=>(0,b.U)((H,$)=>w(U,H,V,$))((0,p.Xf)(_(U,V))),M):("number"==typeof w&&(M=w),(0,e.e)((U,V)=>function(_,w,M,U,V,H,$,pt){const nt=[];let st=0,Ct=0,xt=!1;const yt=()=>{xt&&!nt.length&&!st&&w.complete()},ut=lt=>st<U?tt(lt):nt.push(lt),tt=lt=>{st++;let ot=!1;(0,p.Xf)(M(lt,Ct++)).subscribe(new n.Q(w,Lt=>{w.next(Lt)},()=>{ot=!0},void 0,()=>{if(ot)try{for(st--;nt.length&&st<U;){const Lt=nt.shift();tt(Lt)}yt()}catch(Lt){w.error(Lt)}}))};return _.subscribe(new n.Q(w,ut,()=>{xt=!0,yt()})),()=>{}}(U,V,_,M)))}},13099:(k,B,f)=>{"use strict";f.d(B,{B:()=>o});var b=f(32076),p=f(95698),e=f(77579),t=f(70930),n=f(54482);function o(c={}){const{connector:_=(()=>new e.x),resetOnError:w=!0,resetOnComplete:M=!0,resetOnRefCountZero:U=!0}=c;return V=>{let H=null,$=null,pt=null,nt=0,st=!1,Ct=!1;const xt=()=>{null==$||$.unsubscribe(),$=null},yt=()=>{xt(),H=pt=null,st=Ct=!1},ut=()=>{const tt=H;yt(),null==tt||tt.unsubscribe()};return(0,n.e)((tt,lt)=>{nt++,!Ct&&!st&&xt();const ot=pt=null!=pt?pt:_();lt.add(()=>{nt--,0===nt&&!Ct&&!st&&($=s(ut,U))}),ot.subscribe(lt),H||(H=new t.Hp({next:Lt=>ot.next(Lt),error:Lt=>{Ct=!0,xt(),$=s(yt,w,Lt),ot.error(Lt)},complete:()=>{st=!0,xt(),$=s(yt,M),ot.complete()}}),(0,b.D)(tt).subscribe(H))})(V)}}function s(c,_,...w){return!0===_?(c(),null):!1===_?null:_(...w).pipe((0,p.q)(1)).subscribe(()=>c())}},35684:(k,B,f)=>{"use strict";f.d(B,{T:()=>p});var b=f(39300);function p(e){return(0,b.h)((t,n)=>e<=n)}},68675:(k,B,f)=>{"use strict";f.d(B,{O:()=>t});var b=f(97272),p=f(63269),e=f(54482);function t(...n){const o=(0,p.yG)(n);return(0,e.e)((s,c)=>{(o?(0,b.z)(n,s,o):(0,b.z)(n,s)).subscribe(c)})}},63900:(k,B,f)=>{"use strict";f.d(B,{w:()=>t});var b=f(38421),p=f(54482),e=f(25403);function t(n,o){return(0,p.e)((s,c)=>{let _=null,w=0,M=!1;const U=()=>M&&!_&&c.complete();s.subscribe(new e.Q(c,V=>{null==_||_.unsubscribe();let H=0;const $=w++;(0,b.Xf)(n(V,$)).subscribe(_=new e.Q(c,pt=>c.next(o?o(V,pt,$,H++):pt),()=>{_=null,U()}))},()=>{M=!0,U()}))})}},95698:(k,B,f)=>{"use strict";f.d(B,{q:()=>t});var b=f(60515),p=f(54482),e=f(25403);function t(n){return n<=0?()=>b.E:(0,p.e)((o,s)=>{let c=0;o.subscribe(new e.Q(s,_=>{++c<=n&&(s.next(_),n<=c&&s.complete())}))})}},82722:(k,B,f)=>{"use strict";f.d(B,{R:()=>n});var b=f(54482),p=f(25403),e=f(38421),t=f(25032);function n(o){return(0,b.e)((s,c)=>{(0,e.Xf)(o).subscribe(new p.Q(c,()=>c.complete(),t.Z)),!c.closed&&s.subscribe(c)})}},18505:(k,B,f)=>{"use strict";f.d(B,{b:()=>n});var b=f(30576),p=f(54482),e=f(25403),t=f(44671);function n(o,s,c){const _=(0,b.m)(o)||s||c?{next:o,error:s,complete:c}:o;return _?(0,p.e)((w,M)=>{var U;null===(U=_.subscribe)||void 0===U||U.call(_);let V=!0;w.subscribe(new e.Q(M,H=>{var $;null===($=_.next)||void 0===$||$.call(_,H),M.next(H)},()=>{var H;V=!1,null===(H=_.complete)||void 0===H||H.call(_),M.complete()},H=>{var $;V=!1,null===($=_.error)||void 0===$||$.call(_,H),M.error(H)},()=>{var H,$;V&&(null===(H=_.unsubscribe)||void 0===H||H.call(_)),null===($=_.finalize)||void 0===$||$.call(_)}))}):t.y}},84408:(k,B,f)=>{"use strict";f.d(B,{o:()=>n});var b=f(50727);class p extends b.w0{constructor(s,c){super()}schedule(s,c=0){return this}}const e={setInterval(...o){const{delegate:s}=e;return((null==s?void 0:s.setInterval)||setInterval)(...o)},clearInterval(o){const{delegate:s}=e;return((null==s?void 0:s.clearInterval)||clearInterval)(o)},delegate:void 0};var t=f(38737);class n extends p{constructor(s,c){super(s,c),this.scheduler=s,this.work=c,this.pending=!1}schedule(s,c=0){if(this.closed)return this;this.state=s;const _=this.id,w=this.scheduler;return null!=_&&(this.id=this.recycleAsyncId(w,_,c)),this.pending=!0,this.delay=c,this.id=this.id||this.requestAsyncId(w,this.id,c),this}requestAsyncId(s,c,_=0){return e.setInterval(s.flush.bind(s,this),_)}recycleAsyncId(s,c,_=0){if(null!=_&&this.delay===_&&!1===this.pending)return c;e.clearInterval(c)}execute(s,c){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _=this._execute(s,c);if(_)return _;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,c){let w,_=!1;try{this.work(s)}catch(M){_=!0,w=M||new Error("Scheduled action threw falsy error")}if(_)return this.unsubscribe(),w}unsubscribe(){if(!this.closed){const{id:s,scheduler:c}=this,{actions:_}=c;this.work=this.state=this.scheduler=null,this.pending=!1,(0,t.P)(_,this),null!=s&&(this.id=this.recycleAsyncId(c,s,null)),this.delay=null,super.unsubscribe()}}}},97565:(k,B,f)=>{"use strict";f.d(B,{v:()=>e});var b=f(26063);class p{constructor(n,o=p.now){this.schedulerActionCtor=n,this.now=o}schedule(n,o=0,s){return new this.schedulerActionCtor(this,n).schedule(s,o)}}p.now=b.l.now;class e extends p{constructor(n,o=p.now){super(n,o),this.actions=[],this._active=!1,this._scheduled=void 0}flush(n){const{actions:o}=this;if(this._active)return void o.push(n);let s;this._active=!0;do{if(s=n.execute(n.state,n.delay))break}while(n=o.shift());if(this._active=!1,s){for(;n=o.shift();)n.unsubscribe();throw s}}}},53101:(k,B,f)=>{"use strict";f.d(B,{E:()=>H});var b=f(84408);let e,p=1;const t={};function n(pt){return pt in t&&(delete t[pt],!0)}const o={setImmediate(pt){const nt=p++;return t[nt]=!0,e||(e=Promise.resolve()),e.then(()=>n(nt)&&pt()),nt},clearImmediate(pt){n(pt)}},{setImmediate:c,clearImmediate:_}=o,w={setImmediate(...pt){const{delegate:nt}=w;return((null==nt?void 0:nt.setImmediate)||c)(...pt)},clearImmediate(pt){const{delegate:nt}=w;return((null==nt?void 0:nt.clearImmediate)||_)(pt)},delegate:void 0};var U=f(97565);const H=new class extends U.v{flush(nt){this._active=!0,this._scheduled=void 0;const{actions:st}=this;let Ct,xt=-1;nt=nt||st.shift();const yt=st.length;do{if(Ct=nt.execute(nt.state,nt.delay))break}while(++xt<yt&&(nt=st.shift()));if(this._active=!1,Ct){for(;++xt<yt&&(nt=st.shift());)nt.unsubscribe();throw Ct}}}(class extends b.o{constructor(nt,st){super(nt,st),this.scheduler=nt,this.work=st}requestAsyncId(nt,st,Ct=0){return null!==Ct&&Ct>0?super.requestAsyncId(nt,st,Ct):(nt.actions.push(this),nt._scheduled||(nt._scheduled=w.setImmediate(nt.flush.bind(nt,void 0))))}recycleAsyncId(nt,st,Ct=0){if(null!=Ct&&Ct>0||null==Ct&&this.delay>0)return super.recycleAsyncId(nt,st,Ct);0===nt.actions.length&&(w.clearImmediate(st),nt._scheduled=void 0)}})},34986:(k,B,f)=>{"use strict";f.d(B,{z:()=>e,P:()=>t});var b=f(84408);const e=new(f(97565).v)(b.o),t=e},26063:(k,B,f)=>{"use strict";f.d(B,{l:()=>b});const b={now:()=>(b.delegate||Date).now(),delegate:void 0}},43410:(k,B,f)=>{"use strict";f.d(B,{z:()=>b});const b={setTimeout(...p){const{delegate:e}=b;return((null==e?void 0:e.setTimeout)||setTimeout)(...p)},clearTimeout(p){const{delegate:e}=b;return((null==e?void 0:e.clearTimeout)||clearTimeout)(p)},delegate:void 0}},2202:(k,B,f)=>{"use strict";f.d(B,{h:()=>p});const p="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},48822:(k,B,f)=>{"use strict";f.d(B,{L:()=>b});const b="function"==typeof Symbol&&Symbol.observable||"@@observable"},63269:(k,B,f)=>{"use strict";f.d(B,{jO:()=>t,yG:()=>n,_6:()=>o});var b=f(30576),p=f(93532);function e(s){return s[s.length-1]}function t(s){return(0,b.m)(e(s))?s.pop():void 0}function n(s){return(0,p.K)(e(s))?s.pop():void 0}function o(s,c){return"number"==typeof e(s)?s.pop():c}},54742:(k,B,f)=>{"use strict";f.d(B,{D:()=>n});const{isArray:b}=Array,{getPrototypeOf:p,prototype:e,keys:t}=Object;function n(s){if(1===s.length){const c=s[0];if(b(c))return{args:c,keys:null};if(function(s){return s&&"object"==typeof s&&p(s)===e}(c)){const _=t(c);return{args:_.map(w=>c[w]),keys:_}}}return{args:s,keys:null}}},38737:(k,B,f)=>{"use strict";function b(p,e){if(p){const t=p.indexOf(e);0<=t&&p.splice(t,1)}}f.d(B,{P:()=>b})},83888:(k,B,f)=>{"use strict";function b(p){const t=p(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}f.d(B,{d:()=>b})},31810:(k,B,f)=>{"use strict";function b(p,e){return p.reduce((t,n,o)=>(t[n]=e[o],t),{})}f.d(B,{n:()=>b})},72806:(k,B,f)=>{"use strict";f.d(B,{x:()=>e,O:()=>t});var b=f(42416);let p=null;function e(n){if(b.v.useDeprecatedSynchronousErrorHandling){const o=!p;if(o&&(p={errorThrown:!1,error:null}),n(),o){const{errorThrown:s,error:c}=p;if(p=null,s)throw c}}else n()}function t(n){b.v.useDeprecatedSynchronousErrorHandling&&p&&(p.errorThrown=!0,p.error=n)}},39672:(k,B,f)=>{"use strict";function b(p,e,t,n=0,o=!1){const s=e.schedule(function(){t(),o?p.add(this.schedule(null,n)):this.unsubscribe()},n);if(p.add(s),!o)return s}f.d(B,{f:()=>b})},44671:(k,B,f)=>{"use strict";function b(p){return p}f.d(B,{y:()=>b})},81144:(k,B,f)=>{"use strict";f.d(B,{z:()=>b});const b=p=>p&&"number"==typeof p.length&&"function"!=typeof p},12206:(k,B,f)=>{"use strict";f.d(B,{D:()=>p});var b=f(30576);function p(e){return Symbol.asyncIterator&&(0,b.m)(null==e?void 0:e[Symbol.asyncIterator])}},30576:(k,B,f)=>{"use strict";function b(p){return"function"==typeof p}f.d(B,{m:()=>b})},93670:(k,B,f)=>{"use strict";f.d(B,{c:()=>e});var b=f(48822),p=f(30576);function e(t){return(0,p.m)(t[b.L])}},26495:(k,B,f)=>{"use strict";f.d(B,{T:()=>e});var b=f(2202),p=f(30576);function e(t){return(0,p.m)(null==t?void 0:t[b.h])}},28239:(k,B,f)=>{"use strict";f.d(B,{t:()=>p});var b=f(30576);function p(e){return(0,b.m)(null==e?void 0:e.then)}},53260:(k,B,f)=>{"use strict";f.d(B,{Q:()=>e,L:()=>t});var b=f(35987),p=f(30576);function e(n){return(0,b.FC)(this,arguments,function*(){const s=n.getReader();try{for(;;){const{value:c,done:_}=yield(0,b.qq)(s.read());if(_)return yield(0,b.qq)(void 0);yield yield(0,b.qq)(c)}}finally{s.releaseLock()}})}function t(n){return(0,p.m)(null==n?void 0:n.getReader)}},93532:(k,B,f)=>{"use strict";f.d(B,{K:()=>p});var b=f(30576);function p(e){return e&&(0,b.m)(e.schedule)}},54482:(k,B,f)=>{"use strict";f.d(B,{A:()=>p,e:()=>e});var b=f(30576);function p(t){return(0,b.m)(null==t?void 0:t.lift)}function e(t){return n=>{if(p(n))return n.lift(function(o){try{return t(o,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}},83268:(k,B,f)=>{"use strict";f.d(B,{Z:()=>t});var b=f(54004);const{isArray:p}=Array;function t(n){return(0,b.U)(o=>function(n,o){return p(o)?n(...o):n(o)}(n,o))}},25032:(k,B,f)=>{"use strict";function b(){}f.d(B,{Z:()=>b})},87849:(k,B,f)=>{"use strict";f.d(B,{h:()=>e});var b=f(42416),p=f(43410);function e(t){p.z.setTimeout(()=>{const{onUnhandledError:n}=b.v;if(!n)throw t;n(t)})}},44532:(k,B,f)=>{"use strict";function b(p){return new TypeError(`You provided ${null!==p&&"object"==typeof p?"an invalid object":`'${p}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}f.d(B,{z:()=>b})},34346:(k,B,f)=>{k.exports={interpreterHelper:f(44489),saveBlocksUrl:f(18449),saveLoad:f(79628)}},44489:(k,B,f)=>{const b=f(55841),p=f(61058);p.registerPlugin(f(17131)),B.createInterpreter=function(e,t){return{latestCode:"",workspace:e,BlocklyJavaScript:t,step:0,highlightPause:!1,myInterpreter:null,runner:null,generateCodeAndLoadIntoInterpreter:function(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(e),this.resetStepUi(!0)},resetStepUi:function(n){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1},resetInterpreter:function(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)},highlightBlock:function(n){this.workspace.highlightBlock(n),highlightPause=!0},nextStep:function(n,o){console.log("next step"),n.myInterpreter.step()?setTimeout((s,c)=>{s.nextStep(s,c)},10,n,o):(o?o():console.log("\n\n<< Program complete >>"),n.resetInterpreter(),n.resetStepUi(!1))},runCode:function(n,o,s,c){""==c&&(c=this.latestCode),this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var _=this;_.myInterpreter=n(c,(w,M)=>_.initApiJS(w,M,_,o,s)),1!=window.runOneByOne?setTimeout(function(){this.highlightPause=!1,_.runner=function(){_.myInterpreter&&(_.myInterpreter.run()?setTimeout(_.runner,10):(s?s():console.log("\n\n<< Program complete >>"),_.resetInterpreter(),_.resetStepUi(!1)))},_.runner&&_.runner()},100):this.nextStep(_,s)},initInterpreterWaitForSeconds:function(n,o){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var s=n.createAsyncFunction(function(c,_){setTimeout(_,1e3*c)});n.setProperty(o,"waitForSeconds",s)},getCreds:function(n,o,s){var c=n.pseudoToNative(o),_="(localSite)";(s.startsWith("http://")||s.startsWith("https://"))&&(_=new URL(s).hostname);var w=!1;return _ in c?w=c[_]:"*"in c&&(w=c["*"]),w},getHeaders:function(n,o,s){var c=n.pseudoToNative(o),_="(localSite)";(s.startsWith("http://")||s.startsWith("https://"))&&(_=new URL(s).hostname);var w=[];return _ in c?w=c[_]:"*"in c&&(w=c["*"]),w},doGet:function(n,o,s,c){let _=new XMLHttpRequest;_.open("GET",n,!0),this.generateDataAndCreds(_,s,c,!1),_.onreadystatechange=function(){if(4==_.readyState){if(_.status>=200&&_.status<300){var w=JSON.stringify({origHref:n,objectToSend:"",status:_.status,statusOK:!0,text:_.responseText});return o(w)}return w=JSON.stringify({origHref:n,objectToSend:"",status:_.status,statusOK:!1,text:_.responseText,headers:_.getAllResponseHeaders()}),o(w)}},_.send(null)},exportToFile:function(n,o,s){var _,c=f(18642);return _=s?this.b64toBlob(o):new Blob([o],{type:"text/plain;charset=utf-8"}),c.saveAs(_,n),n},b64toBlob:function(n,o="",s=512){const c=atob(n),_=[];for(let M=0;M<c.length;M+=s){const U=c.slice(M,M+s),V=new Array(U.length);for(let $=0;$<U.length;$++)V[$]=U.charCodeAt($);const H=new Uint8Array(V);_.push(H)}return new Blob(_,{type:o})},displayDateCurrentAsHuman:function(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},displayDateCurrentAsIso:function(){return(new Date).toISOString()},displayDateCurrentAsUnix:function(){return Date.now()},displayDateFormatted:function(n){switch(n){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:console.log("Date time format not suported")}},generateDataAndCreds(n,o,s,c){if(s)n.withCredentials=s;else{var _=!1;if(o&&o.length>0)for(var w=0;w<o.length;w++){var M=o[w];"Content-Type"==M.name&&(_=!0),n.setRequestHeader(M.name,M.value)}c&&!_&&n.setRequestHeader("Content-Type","application/json;charset=UTF-8")}},doPut:(n,o,s,c,_)=>{let w=o,M=new XMLHttpRequest;M.open("PUT",n,!0),this.generateDataAndCreds(M,c,_,!!o),M.onreadystatechange=function(){if(4==M.readyState){if(M.status>=200&&M.status<300){var U=JSON.stringify({origHref:n,objectToSend:o,status:M.status,statusOK:!0,text:M.responseText});return s(U)}return U=JSON.stringify({origHref:n,objectToSend:o,status:M.status,statusOK:!1,text:M.responseText,objectToSend:o,headers:M.getAllResponseHeaders()}),s(U)}},M.send(w)},doDelete:function(n,o,s,c,_){let w=o;var M=new XMLHttpRequest;M.open("DELETE",n,!0),this.generateDataAndCreds(M,c,_,!!o),M.onreadystatechange=function(){if(4==M.readyState){if(M.status>=200&&M.status<300){var U=JSON.stringify({origHref:n,objectToSend:"",status:M.status,statusOK:!0,text:M.responseText});return s(U)}return U=JSON.stringify({origHref:n,objectToSend:"",status:M.status,statusOK:!1,text:M.responseText,objectToSend:o,headers:M.getAllResponseHeaders()}),s(U)}},M.send(w)},doPost:function(n,o,s,c,_){let w=o,M=new XMLHttpRequest;M.open("POST",n,!0),this.generateDataAndCreds(M,c,_,!!o),M.onreadystatechange=function(){if(4==M.readyState){if(M.status>=200&&M.status<300){var U=JSON.stringify({origHref:n,objectToSend:o,status:M.status,statusOK:!0,text:M.responseText});return s(U)}return U=JSON.stringify({origHref:n,objectToSend:o,status:M.status,statusOK:!1,text:M.responseText,objectToSend:o,headers:M.getAllResponseHeaders()}),s(U)}},M.send(w)},initApiJS:function(n,o,s,c,_){n.setProperty(o,"errHandler",n.createNativeFunction(w=V=>{c?c("\n error --\n"+V+"\n error --"):console.log(V)}));var M=n.nativeToPseudo({"(localSite)":!1});n.setProperty(o,"withCredsForDomain",M);var U=n.nativeToPseudo({"(localSite)":[]});n.setProperty(o,"headersForDomain",U),n.setProperty(o,"alert1",n.createNativeFunction(w=function(V){V=V?V.toString():"",window.alert(V)})),n.setProperty(o,"playPiano",n.createNativeFunction(w=function(V,H,$){b.Synth.createInstrument("piano").play(V,H,$)})),n.setProperty(o,"startDebugger",n.createNativeFunction(w=function(V,H,$){s.highlightBlock(H),console.log(V,H,$)})),n.setProperty(o,"alert",n.createNativeFunction(w=function(V){V=V?V.toString():"",c?c(V):console.log(V)})),n.setProperty(o,"waitTime",n.createAsyncFunction(w=(V,H)=>{console.log(`waiting seconds ${V}`),setTimeout(H,1e3*V)})),n.setProperty(o,"displayDateFormatted",n.createNativeFunction(w=V=>s.displayDateFormatted(V))),n.setProperty(o,"exportToFile",n.createNativeFunction(w=(V,H,$)=>s.exportToFile(V,H,$))),n.setProperty(o,"convertToCSV",n.createNativeFunction(w=V=>{let H="object"!=typeof V?JSON.parse(V):{};return H=[Object.keys(H[0])].concat(H),H.map(pt=>Object.values(pt).toString()).join("\n")})),n.setProperty(o,"open",n.createNativeFunction(w=function(V){window.open(V,"_blank")})),n.setProperty(o,"changeHost",n.createNativeFunction(w=function(V,H){if(0==(H=(H=H?H.toString():"").trim()).length)return V;if(0==(V=(V=V||"").trim()).length&&!(V=H).startsWith("http"))throw`please put in front of ${H} http:// or https://`;(V=new URL(V)).hostname=H.replace("https://","").replace("http://","");var $=V.href;return $.endsWith("/")&&($=$.substring(0,$.length-1)),$})),n.setProperty(o,"changePort",n.createNativeFunction(w=function(V,H){V=new URL(V),console.log(`url ${V.href}`),V.port=H,console.log(`url ${V.href}`);var $=V.href;return $.endsWith("/")&&($=$.substring(0,$.length-1)),$})),n.setProperty(o,"speakDefault",n.createNativeFunction(w=function(V,H,$,pt,nt){var st=new SpeechSynthesisUtterance(V);window.speechSynthesis.speak(st)}));var w=n.createAsyncFunction(function(V,H){return p.defaultOptions.className="vex-theme-os",V=V?V.toString():"",p.dialog.prompt({message:V,callback:H})});n.setProperty(o,"prompt",w),s.BlocklyJavaScript.addReservedWords("waitForSeconds"),w=n.createAsyncFunction(function(V,H){setTimeout(H,1e3*V)}),n.setProperty(o,"waitForSeconds",w),n.setProperty(o,"getXhr",n.createAsyncFunction(w=(V,H)=>{var $=s.getHeaders(n,U,V),pt=s.getCreds(n,M,V);return s.doGet(V,H,$,pt)})),n.setProperty(o,"postXhr",n.createAsyncFunction(w=(V,H,$)=>{try{var pt=s.getHeaders(n,U,V),nt=s.getCreds(n,M,V);s.doPost(V,H,$,pt,nt)}catch(st){alert("is an error"+st)}})),n.setProperty(o,"deleteXhr",n.createAsyncFunction(w=(V,H,$)=>{try{var pt=s.getHeaders(n,U,V),nt=s.getCreds(n,M,V);s.doDelete(V,H,$,pt,nt)}catch(st){alert("is an error"+st)}})),w=(V,H,$)=>{try{var pt=n.pseudoToNative(U),nt="(localSite)";(V.startsWith("http://")||V.startsWith("https://"))&&(nt=new URL(V).hostname);var st=[];nt in pt&&(st=pt[nt]),s.doPut(V,H,$,st,!1)}catch(xt){alert("is an error"+xt)}},n.setProperty(o,"putXhr",n.createAsyncFunction(w)),w=function(V){return V=V?V.toString():"",n.createPrimitive(s.highlightBlock(V))},n.setProperty(o,"highlightBlock",n.createNativeFunction(w))}}}},55841:(k,B,f)=>{"use strict";var b,p,e;f.r(B),f.d(B,{Synth:()=>b}),function(){var t=window.URL||window.webkitURL,n=window.Blob;if(!t||!n)throw new Error("This browser does not support AudioSynth");var o=!1,s=null,c=function(V,H){return[new Uint8Array([H,H>>8]),new Uint8Array([H,H>>8,H>>16,H>>24])][V]},_=function(V,H,$,pt){Object.defineProperty(this,V,{value:H,writable:!!$,enumerable:!!pt})},w=function(V,H,$){_.call(this,V,H,$,!0)};e=function(){this.__init__.apply(this,arguments)};var M=_.bind(e.prototype),U=w.bind(e.prototype);M("__init__",function(V,H,$){if(!o)throw new Error("AudioSynthInstrument can only be instantiated from the createInstrument method of the AudioSynth object.");_.call(this,"_parent",V),w.call(this,"name",H),_.call(this,"_soundID",$)}),U("play",function(V,H,$){return this._parent.play(this._soundID,V,H,$)}),U("generate",function(V,H,$){return this._parent.generate(this._soundID,V,H,$)}),M=_.bind((p=function V(){return s instanceof V?s:(this.__init__(),this)}).prototype),U=w.bind(p.prototype),M("_debug",!1,!0),M("_bitsPerSample",16),M("_channels",1),M("_sampleRate",44100,!0),U("setSampleRate",function(V){return this._sampleRate=Math.max(Math.min(0|V,44100),4e3),this._clearCache(),this._sampleRate}),U("getSampleRate",function(){return this._sampleRate}),M("_volume",32768,!0),U("setVolume",function(V){return V=parseFloat(V),isNaN(V)&&(V=0),V=Math.round(32768*V),this._volume=Math.max(Math.min(0|V,32768),0),this._clearCache(),this._volume}),U("getVolume",function(){return Math.round(this._volume/32768*1e4)/1e4}),M("_notes",{C:261.63,"C#":277.18,D:293.66,"D#":311.13,E:329.63,F:349.23,"F#":369.99,G:392,"G#":415.3,A:440,"A#":466.16,B:493.88}),M("_fileCache",[],!0),M("_temp",{},!0),M("_sounds",[],!0),M("_mod",[function(V,H,$,pt){return Math.sin(2*Math.PI*(V/H)*$+pt)}]),M("_resizeCache",function(){for(var V=this._fileCache,H=this._sounds.length;V.length<H;){for(var $=[],pt=0;pt<8;pt++){var nt={};for(var st in this._notes)nt[st]={};$.push(nt)}V.push($)}}),M("_clearCache",function(){this._fileCache=[],this._resizeCache()}),U("generate",function(V,H,$,pt){var nt=this._sounds[V];if(!nt)for(var st=0;st<this._sounds.length;st++)if(this._sounds[st].name==V){nt=this._sounds[st],V=st;break}if(!nt)throw new Error("Invalid sound or sound ID: "+V);var Ct=(new Date).valueOf();this._temp={},$|=0,$=Math.min(8,Math.max(1,$));var xt=pt?parseFloat(pt):2;if(void 0===this._notes[H])throw new Error(H+" is not a valid note.");if(void 0!==this._fileCache[V][$-1][H][xt])return this._debug&&console.log((new Date).valueOf()-Ct,"ms to retrieve (cached)"),this._fileCache[V][$-1][H][xt];var yt=this._notes[H]*Math.pow(2,$-4),ut=this._sampleRate,tt=this._volume,lt=this._channels,ot=this._bitsPerSample,Lt=nt.attack(ut,yt,tt),at=nt.dampen(ut,yt,tt),dt=nt.wave,it={modulate:this._mod,vars:this._temp},rt=0,bt=new Uint8Array(new ArrayBuffer(Math.ceil(ut*xt*2))),Ht=ut*Lt|0,ce=ut*xt|0;for(st=0;st!==Ht;st++)rt=tt*(st/(ut*Lt))*dt.call(it,st,ut,yt,tt),bt[st<<1]=rt,bt[1+(st<<1)]=rt>>8;for(;st!==ce;st++)rt=tt*Math.pow(1-(st-ut*Lt)/(ut*(xt-Lt)),at)*dt.call(it,st,ut,yt,tt),bt[st<<1]=rt,bt[1+(st<<1)]=rt>>8;var Ye=["RIFF",c(1,52),"WAVE","fmt ",c(1,16),c(0,1),c(0,lt),c(1,ut),c(1,ut*lt*ot/8),c(0,lt*ot/8),c(0,ot),"data",c(1,bt.length*lt*ot/8),bt],de=new n(Ye,{type:"audio/wav"}),Be=t.createObjectURL(de);return this._fileCache[V][$-1][H][xt]=Be,this._debug&&console.log((new Date).valueOf()-Ct,"ms to generate"),Be}),U("play",function(V,H,$,pt){var nt=this.generate(V,H,$,pt);return new Audio(nt).play(),!0}),U("debug",function(){this._debug=!0}),U("createInstrument",function(V){var H=0,$=!1;if("string"==typeof V){for(var pt=0;pt<this._sounds.length;pt++)if(this._sounds[pt].name==V){$=!0,H=pt;break}}else this._sounds[V]&&(V=this._sounds[H=V].name,$=!0);if(!$)throw new Error("Invalid sound or sound ID: "+V);o=!0;var nt=new e(this,V,H);return o=!1,nt}),U("listSounds",function(){for(var V=[],H=0;H<this._sounds.length;H++)V.push(this._sounds[H].name);return V}),M("__init__",function(){this._resizeCache()}),U("loadSoundProfile",function(){for(var V=0,H=arguments.length;V<H;V++){var $=arguments[V];if(!($ instanceof Object))throw new Error("Invalid sound profile.");this._sounds.push($)}return this._resizeCache(),!0}),U("loadModulationFunction",function(){for(var V=0,H=arguments.length;V<H;V++){var $=arguments[V];if("function"!=typeof $)throw new Error("Invalid modulation function.");this._mod.push($)}return!0}),s=new p,b=s}(),b.loadModulationFunction(function(t,n,o,s){return 1*Math.sin(2*Math.PI*(t/n*o)+s)},function(t,n,o,s){return 1*Math.sin(4*Math.PI*(t/n*o)+s)},function(t,n,o,s){return 1*Math.sin(8*Math.PI*(t/n*o)+s)},function(t,n,o,s){return 1*Math.sin(.5*Math.PI*(t/n*o)+s)},function(t,n,o,s){return 1*Math.sin(.25*Math.PI*(t/n*o)+s)},function(t,n,o,s){return.5*Math.sin(2*Math.PI*(t/n*o)+s)},function(t,n,o,s){return.5*Math.sin(4*Math.PI*(t/n*o)+s)},function(t,n,o,s){return.5*Math.sin(8*Math.PI*(t/n*o)+s)},function(t,n,o,s){return.5*Math.sin(.5*Math.PI*(t/n*o)+s)},function(t,n,o,s){return.5*Math.sin(.25*Math.PI*(t/n*o)+s)}),b.loadSoundProfile({name:"piano",attack:function(){return.002},dampen:function(t,n,o){return Math.pow(.5*Math.log(n*o/t),2)},wave:function(t,n,o,s){var c=this.modulate[0];return this.modulate[1](t,n,o,Math.pow(c(t,n,o,0),2)+.75*c(t,n,o,.25)+.1*c(t,n,o,.5))}},{name:"organ",attack:function(){return.3},dampen:function(t,n){return 1+.01*n},wave:function(t,n,o){var s=this.modulate[0];return this.modulate[1](t,n,o,s(t,n,o,0)+.5*s(t,n,o,.25)+.25*s(t,n,o,.5))}},{name:"acoustic",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,o){var s=this.vars;s.valueTable=s.valueTable?s.valueTable:[],void 0===s.playVal&&(s.playVal=0),void 0===s.periodCount&&(s.periodCount=0);var c=s.valueTable,_=s.playVal,w=s.periodCount,M=n/o,U=Math.floor(100*(M-Math.floor(M))),V=!1;if(c.length<=Math.ceil(M))return c.push(2*Math.round(Math.random())-1),c[c.length-1];c[_]=.5*(c[_>=c.length-1?0:_+1]+c[_]),_>=Math.floor(M)&&(_<Math.ceil(M)?w%100>=U&&(V=!0,c[_+1]=.5*(c[0]+c[_+1]),s.periodCount++):V=!0);var H=c[_];return V?s.playVal=0:s.playVal++,H}},{name:"edm",attack:function(){return.002},dampen:function(){return 1},wave:function(t,n,o){var s=this.modulate[0],c=this.modulate.slice(1);return c[0](t,n,o,c[9](t,n,o,c[2](t,n,o,Math.pow(s(t,n,o,0),3)+Math.pow(s(t,n,o,.5),5)+Math.pow(s(t,n,o,1),7)))+c[8](t,n,o,s(t,n,o,1.75)))}})},18449:(k,B)=>{B.saveState=function(p,e,t){var n="BlocklyState"+(t||""),o=p.workspaceToDom(e,!0),s=p.domToPrettyText(o);window.localStorage.setItem(n,s)},B.restoreState=function(p,e,t){var o=window.localStorage.getItem("BlocklyState"+(t||""));if((null==o?void 0:o.length)>62){var s=p.textToDom(o);p.clearWorkspaceAndLoadFromXml(s,e)}return""}},79628:(k,B,f)=>{var b=f(18642);B.DownloadBlocks=function(p,e,t){var n=p.workspaceToDom(e,!0),o=p.domToPrettyText(n),s=new Blob([o],{type:"text/plain;charset=utf-16"});b.saveAs(s,t)},B.LoadFile=function(p,e,t){e.clear();var n=p.textToDom(t);p.domToWorkspace(n,e)}},19842:(k,B,f)=>{const b=f(45797);B.definitionBlocks=function(p,e){p.HTMLheaders={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Header").appendField(new b.FieldDropdown([["H1","H1"],["H2","H2"],["H3","H3"]]),"NAME"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to Header "),this.setHelpUrl("")}},e.HTMLheaders=function(t){var n=t.getFieldValue("NAME");return[`'<${n}>'+ ${e.valueToCode(t,"NAME",e.ORDER_ATOMIC)} + '</${n}>'`,e.ORDER_NONE]},p.HTMLlist={init:function(){this.appendDummyInput().appendField("List ").appendField(new b.FieldDropdown([["OL","ol"],["UL","ul"]]),"listType"),this.appendStatementInput("Content").setCheck(null),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(240),this.setTooltip("list - please add li block "),this.setHelpUrl("")}},e.HTMLlist=function(t){var n=t.getFieldValue("listType");return e.valueToCode(t,"ListType",e.ORDER_ATOMIC),`window.alert('<${n}>');\n;${e.statementToCode(t,"Content")};\n;window.alert('</${n}>');\n`},p.HTMLli={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("LI"),this.setOutput(!0,null),this.setColour(240),this.setTooltip("string to LI"),this.setHelpUrl("")}},e.HTMLli=function(t){return[`'<li>'+ ${e.valueToCode(t,"NAME",e.ORDER_ATOMIC)} + '</li>'`,e.ORDER_NONE]},p.HTMLliStart={init:function(){this.appendDummyInput().appendField("List").appendField(new b.FieldDropdown([["OL","OL"],["LI","LI"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI start"),this.setHelpUrl("")}},e.HTMLliStart=function(t){return[`'<${t.getFieldValue("NAME")}>'`,e.ORDER_NONE]},p.HTMLliStop={init:function(){this.appendDummyInput().appendField("/List").appendField(new b.FieldDropdown([["OL","OL"],["LI","LI"]]),"NAME"),this.setColour(240),this.setOutput(!0,null),this.setTooltip("LI stop"),this.setHelpUrl("")}},e.HTMLliStop=function(t){return[`'</${t.getFieldValue("NAME")}>'`,e.ORDER_NONE]},p.HTMLlink={init:function(){this.appendDummyInput().appendField("A").appendField("target").appendField(new b.FieldDropdown([["_blank","_blank"],["_self","_self"],["_parent","_parent"],["_top","_top"]]),"targetDrop"),this.appendValueInput("HREF").setCheck(null).appendField("href"),this.appendValueInput("text").setCheck(null).appendField("text"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.HTMLlink=function(t){var n=t.getFieldValue("targetDrop"),o=e.valueToCode(t,"HREF",e.ORDER_ATOMIC),s=e.valueToCode(t,"text",e.ORDER_ATOMIC),c="'<a href=\"'+"+o;return c+=`+ '" target="${n}"'`,[c+="+ '>'+"+(s=s||o)+"+ '</a> '",e.ORDER_NONE]}},B.fieldXML=function(){return'\n    <block type=\'text_print\'>" \n               <value name=\'TEXT\'>" \n                 \n    <block type="HTMLheaders">\n        <value name="NAME">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n    </block>    \n      </value>\n\n\n      </block>\n        \n<block type="HTMLlist"></block>\n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n  \n<block type="HTMLli">\n<value name="NAME">\n<shadow type="text">\n <field name="TEXT"></field>\n</shadow>\n</value>\n</block>    \n</value>\n</block>\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStart"></block>\n</value>\n</block>    \n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLliStop"></block>\n\n</value>\n</block>    \n\n<block type=\'text_print\'>" \n<value name=\'TEXT\'>" \n\n<block type="HTMLlink"></block>\n\n</value>\n</block>    \n\n\n'}},87804:(k,B,f)=>{f(45797),B.definitionBlocks=function(p,e){p.ttsBlock={init:function(){this.appendValueInput("NAME").setCheck(null).appendField("Voice"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.ttsBlock=function(t){return"speakDefault("+e.valueToCode(t,"NAME",e.ORDER_ATOMIC)+");\n"}},B.fieldXML=function(){return'<block type="ttsBlock">\n        <value name="NAME">\n            <shadow type="text">\n            <field name="TEXT">Hello</field></shadow>\n        </value>       \n        </block>\n'}},40054:(k,B)=>{B.definitionBlocks=function(f,b){f.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},b.credsforhttp=function(t){return"withCredsForDomain["+(b.valueToCode(t,"HttpDomain",0)||"(localSite)")+"]="+b.valueToCode(t,"WithCreds",0)+";\n"}},B.fieldXML=function(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},29130:(k,B)=>{B.definitionBlocks=function(f,b){f.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},b.auth0webapidata=function(t){var _='{"client_id":'+b.valueToCode(t,"client_id",0);return _+=',"client_secret":'+b.valueToCode(t,"client_secret",0),_+=',"audience":'+b.valueToCode(t,"audience",0),_+=',"grant_type":'+b.valueToCode(t,"grant_type",0),[_+="}",99]}},B.fieldXML=function(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}},34122:(k,B,f)=>{const b=f(45797);B.definitionBlocks=function(p,e){p.chart_js={init:function(){this.appendDummyInput().appendField("ChartType").appendField(new b.FieldDropdown([["HBar","HBar"],["VBar","VBar"]]),"ChartTypeValue"),this.appendValueInput("ChartTitleValue").setCheck(null).appendField(new b.FieldLabelSerializable("Title"),"ChartTitle"),this.appendValueInput("LabelsValue").setCheck("Array").appendField(new b.FieldLabelSerializable("Labels"),"ChartLabels"),this.appendValueInput("DataSet1Label").setCheck("String").appendField(new b.FieldLabelSerializable("DataSet1 Label"),"DataSetLabel1"),this.appendValueInput("DataSet1Data").setCheck("Array").appendField(new b.FieldLabelSerializable("DataSet1 Data"),"DataSetData1"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.chart_js=function(t){var n=t.getFieldValue("ChartTypeValue"),s=(e.valueToCode(t,"ChartTitleValue",e.ORDER_ATOMIC),e.valueToCode(t,"LabelsValue",e.ORDER_ATOMIC)),c=e.valueToCode(t,"DataSet1Label",e.ORDER_ATOMIC),_=e.valueToCode(t,"DataSet1Data",e.ORDER_ATOMIC),w="",M="x";switch(n){case"HBar":w="bar",M="y";break;case"VBar":w="bar";break;default:throw"Unknown chart type:"+n}return[`JSON.stringify({ 'type': '${w}', 'options':{ 'indexAxis':'${M}'},  'data': {  'labels': ${s}, 'datasets': [{ 'backgroundColor': ['green','blue'],'label': ${c}, 'data': ${_} }] } })`,e.ORDER_NONE]}},B.fieldXML=function(){return'<block type="chart_js"></block>'}},11124:(k,B,f)=>{const b=f(45797);B.definitionBlocks=function(p,e){p.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(new b.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.comment=function(n){return"/*\n"+(e.valueToCode(n,"TEXT",0)||"''")+"\n*/;\n"},p.debugger={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("debugger").appendField(new b.FieldLabelSerializable(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.debugger=function(n){return"startDebugger("+(e.valueToCode(n,"TEXT",0)||"''")+",'"+n.id+"',this);\n"}},B.fieldXML=function(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n<block type="debugger">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">my message for debug</field>\n        </shadow>\n    </value>\n</block>\n'}},54256:(k,B)=>{B.definitionBlocks=function(f,b){f.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},b.converttojson=function(n){return["JSON.parse("+b.valueToCode(n,"ValueToConvert",0)+")",99]},f.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},b.converttostring=function(n){return["JSON.stringify("+b.valueToCode(n,"ValueToConvert",0)+")",99]},f.convertcsv={init:function(){this.appendDummyInput().appendField("Convert CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},b.convertcsv=function(n){return["convertToCSV("+b.valueToCode(n,"ArrayToConvert",b.ORDER_ATOMIC)+")",99]}},B.fieldXML=function(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}},97404:(k,B,f)=>{const b=f(45797);B.definitionBlocks=function(p,e,t,n){e.object_from_json=function(at){return[`JSON.parse(${e.valueToCode(at,"JSON",0)})`,99]},e.object_to_json=function(at){return[`JSON.stringify(${e.valueToCode(at,"object",0)})`,99]},e.object_get=function(at){const dt=at.getFieldValue("field_name");return[`${e.valueToCode(at,"object",0)}['${dt}']`,99]},e.object_set=function(at){const dt=at.getFieldValue("field_name");return`${e.valueToCode(at,"object_field",0)}['${dt}'] = ${e.valueToCode(at,"value_field",0)};\n`},e.object_create=function(at){if(!at.numFields)return["{}",99];let dt="";for(let rt=1;rt<=at.numFields;rt++)dt+=`"${at.getFieldValue("field"+rt)}": ${e.valueToCode(at,"field_input"+rt,0)}, `;return[`{ ${dt} }`,99]};const $="object_field",pt="object_create_mutator_top",nt="#F99EA3",st=(at,...dt)=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[at]),Ct={type:"object_from_json",message0:st("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:nt,tooltip:st("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};p.object_from_json={init:function(){this.jsonInit(Ct)}};const xt={type:"object_to_json",message0:st("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:nt,tooltip:st("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};p.object_to_json={init:function(){this.jsonInit(xt)}};const yt={type:"object_get",message0:st("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:nt,tooltip:st("object_get_json_tooltip"),helpUrl:""};p.object_get={init:function(){this.jsonInit(yt)}};const ut={type:"object_set",message0:st("object_set_json"),args0:[{type:"field_input",name:"field_name",text:st("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:nt,tooltip:st("object_set_json_tooltip"),helpUrl:""};p.object_set={init:function(){this.jsonInit(ut)}};const tt={type:"object_create",message0:st("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:st("object_create_tooltip"),helpUrl:""};p.object_create={init:function(){this.jsonInit(tt)}};const lt={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:st("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};p[$]={init:function(){this.jsonInit(lt)}};const ot={type:"object_create_mutator",message0:st("object_create"),nextStatement:null,colour:15,tooltip:st("object_create_tooltip"),helpUrl:""};p[pt]={init:function(){this.jsonInit(ot)}};const Lt={numFields:0,fields:[],domToMutation:function(at){this.fields=[];for(let it,dt=0;it=at.childNodes[dt];dt++)"field"==it.nodeName.toLowerCase()&&this.fields.push(it.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const at=document.createElement("mutation");at.setAttribute("num_fields",""+this.numFields);for(let dt=0;dt<this.fields.length;dt++){const it=document.createElement("field");it.setAttribute("name",this.fields[dt]),at.appendChild(it)}return at},compose:function(at){let dt=at.nextConnection&&at.nextConnection.targetBlock();this.numFields=0,this.fields=[];let it=[null];for(;dt;)this.fields.push(dt.getFieldValue("field_name")),this.numFields++,it.push(dt.savedConnection),dt=dt.nextConnection&&dt.nextConnection.targetBlock();this.updateShape();for(let rt=1;rt<=this.numFields;rt++)n.reconnect(it[rt],this,"field_input"+rt)},decompose:function(at){const dt=at.newBlock(pt);dt.initSvg();let it=dt.nextConnection;for(let rt=0;rt<this.fields.length;rt++){const Gt=at.newBlock($);Gt.initSvg(),Gt.setFieldValue(this.fields[rt],"field_name"),it.connect(Gt.previousConnection),it=Gt.nextConnection}return dt},saveConnections:function(at){let dt=at.nextConnection&&at.nextConnection.targetBlock(),it=1;for(;dt;){const rt=this.getInput("field_input"+it);dt.savedConnection=rt&&rt.connection.targetConnection,dt.setFieldValue(this.getFieldValue("field"+it),"field_name"),it++,dt=dt.nextConnection&&dt.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let at=1;for(;this.getInput("field_input"+at);)this.removeInput("field_input"+at),at++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let dt=1;dt<=this.numFields;dt++){const it=this.fields[dt-1];this.appendValueInput("field_input"+dt).setCheck(null).setAlign(1).appendField(new b.FieldTextInput(it),"field"+dt)}}};try{t.registerMutator("controls_create_mutator",Lt,null,["object_field"])}catch(at){}},B.fieldXML=function(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}},50188:(k,B,f)=>{const b=f(45797);B.definitionBlocks=function(p,e){p.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new b.FieldDropdown([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};e.displayCurrentDate=o=>{let c="";switch(o.getFieldValue("dateFormat").toString()){case"human":c="displayDateFormatted('human')";break;case"iso":c="displayDateFormatted('iso')";break;case"unix":c="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[c,99]}},B.fieldXML=function(){return'<block type="displayCurrentDate"></block>'}},71320:(k,B)=>{B.definitionBlocks=function(f,b){f.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},b.DateFromText=e=>["Date.parse("+(b.valueToCode(e,"VALUE",b.ORDER_ATOMIC)||"")+")",99]},B.fieldXML=function(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}},18638:(k,B)=>{B.generalBlocks=function(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}},15889:(k,B,f)=>{const b=f(45797);B.definitionBlocks=function(p,e){p.blockemail={init:function(){this.appendValueInput("from").setCheck(null).appendField("From:"),this.appendValueInput("to").setCheck(null).appendField("To:"),this.appendValueInput("cc").setCheck(null).appendField("CC:"),this.appendValueInput("bcc").setCheck(null).appendField("BCC:"),this.appendValueInput("subject").setCheck(null).appendField("Subject:"),this.appendValueInput("body").setCheck(null).appendField("Body:").appendField(new b.FieldDropdown([["HTML","Html"],["TEXT","Text"]]),"NAME"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},p.sendinblue={init:function(){this.appendDummyInput().appendField("SendInBlue"),this.appendValueInput("APIKey").setCheck(null).appendField("ApiKey"),this.appendValueInput("email").setCheck("blockemail").appendField("Email"),this.setColour(230),this.setTooltip("Please see https://account.sendinblue.com/advanced/api"),this.setHelpUrl("https://account.sendinblue.com/advanced/api"),this.setOutput(!0,null)}},e.sendinblue=function(n){var c='window.alert("SendInBlue");\n',_="api.sendinblue.com";return c=`(function(apiKey,email){if(!('${_}' in headersForDomain)){ headersForDomain['${_}']=[]; };\n`,c+=`headersForDomain['${_}'].push({"name":"api-key","value":apiKey});\n`,c+=`headersForDomain['${_}'].push({"name":"Content-Type","value":"application/json"});\n`,c+=`headersForDomain['${_}'].push({"name":"Accept","value":"application/json"});\n`,c+='var sendinblueData={"sender":{"email": email.from }, "to":[{"email":email.to }],"subject":email.subject,"htmlContent": email.body} ;\n',c+="\nwindow.alert(JSON.stringify(sendinblueData));\n",c+=`var res=JSON.parse(postXhr("https://${_}/v3/smtp/email",JSON.stringify(sendinblueData)));if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;\n`,[c+="})("+e.valueToCode(n,"APIKey",e.ORDER_ATOMIC)+","+e.valueToCode(n,"email",e.ORDER_ATOMIC)+")",e.ORDER_NONE]},e.blockemail=function(n){var o=e.valueToCode(n,"from",e.ORDER_ATOMIC),s=e.valueToCode(n,"to",e.ORDER_ATOMIC),c=e.valueToCode(n,"cc",e.ORDER_ATOMIC),_=e.valueToCode(n,"bcc",e.ORDER_ATOMIC),w=e.valueToCode(n,"subject",e.ORDER_ATOMIC),M=n.getFieldValue("NAME"),V="{";return V+='"from":'+o+",",V+='"to":'+s+",",V+='"cc":'+c+",",V+='"bcc":'+_+",",V+='"subject":'+w+",",V+='"body":'+e.valueToCode(n,"body",e.ORDER_ATOMIC)+",",V+='"typeEmail":"'+M+'"',[""+(V+="}"),e.ORDER_NONE]}},B.fieldXML=function(){return'<block type="blockemail">\n        <value name="from">\n            <shadow type="text">\n                <field name="TEXT">test@test.com</field>\n            </shadow>\n        </value>\n        <value name="to">\n            <shadow type="text">\n                <field name="TEXT">ignatandrei@yahoo.com</field>\n            </shadow>\n        </value>\n        <value name="cc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="bcc">\n            <shadow type="text">\n                <field name="TEXT"></field>\n            </shadow>\n        </value>\n        <value name="subject">\n            <shadow type="text">\n                <field name="TEXT">My test email</field>\n            </shadow>\n        </value>\n        <value name="body">\n            <shadow type="text">\n                <field name="TEXT">This is the body</field>\n            </shadow>\n        </value>\n            </block>\n        <block type="sendinblue">\n        <value name="APIKey">\n            <shadow type="text">\n                <field name="TEXT">Please put here the API Key from SendInBlue</field>\n            </shadow>\n            \n        </value>\n        <value name="email">\n            <shadow type="blockemail">\n            </shadow>\n            \n        </value>\n        \n        </block>\n'}},19544:(k,B)=>{B.definitionBlocks=function(f,b){f.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},b.exportfile=function(t){return"exportToFile("+b.valueToCode(t,"fileName",0)+","+b.valueToCode(t,"contentFile",0)+","+b.valueToCode(t,"convertToByte",0)+");\n"}},B.fieldXML=function(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},30721:(k,B)=>{B.definitionBlocks=function(f,b){f.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},b.filterList=function(p){var e=b.valueToCode(p,"LIST",b.ORDER_MEMBER)||"[]",t=b.valueToCode(p,"Logic",b.ORDER_ATOMIC);"string"==typeof t&&(t=t.substr(1,t.length-2));var n="";return n+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).filter(function (item){ return "+t+";})",[n+="",b.ORDER_FUNCTION_CALL]},f.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},b.mapList=function(p){var e=b.valueToCode(p,"LIST",b.ORDER_MEMBER)||"[]",t=b.valueToCode(p,"Logic",b.ORDER_ATOMIC);"string"==typeof t&&(t=t.substr(1,t.length-2));var n="";return n+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).map(function (item){ return "+t+";})",[n+="",b.ORDER_FUNCTION_CALL]},f.reduceList={init:function(){this.appendDummyInput().appendField("reduceList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("initValue").setCheck(null).appendField("initialValue"),this.appendValueInput("Logic").setCheck("String").appendField("callback(acc,curVal,index, array)=>"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},b.reduceList=function(p){var e=b.valueToCode(p,"LIST",b.ORDER_MEMBER)||"[]",t="";try{t=b.valueToCode(p,"initValue",b.ORDER_ATOMIC)}catch(s){window.alert(s)}var n=b.valueToCode(p,"Logic",b.ORDER_ATOMIC);"string"==typeof n&&(n=n.substr(1,n.length-2));var o="";return o+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e+")).reduce(function (acc,curVal,index,array){ "+n+";}",t&&t.toString().length>0&&(o+=","+t),o+=")",[o+="",b.ORDER_FUNCTION_CALL]}},B.fieldXML=function(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="initValue">\n                    <shadow type="text">\n                        <field name="TEXT"> </field>\n                    </shadow>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="reduceList">\n        <value name="LIST">\n        <block type="variables_get">\n                <field name="VAR">list</field>\n            </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">...</field>\n                </shadow>\n            </value>\n        </block>\n        </category>\n\n'}},79118:(k,B,f)=>{const b=f(45797);B.definitionBlocks=function(p,e){p.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},e.window_open=function(o){var s=e.valueToCode(o,"TEXT",99)||"''";return"if((typeof "+s+' == "object") && ("to" in '+s+')){open("mailto:'+s.to+'")}else{ open('+s+")};\n"},p.text_message={init:function(){this.jsonInit({message0:"alert %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},e.text_message=function(o){return"alert1("+(e.valueToCode(o,"TEXT",99)||"''")+");\n"},p.text_print_return={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("print return").appendField(new b.FieldLabelSerializable(""),"NAME"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.text_print_return=function(o){var s=e.valueToCode(o,"TEXT",0)||"''";return["(function(){window.alert("+s+");\n;return ("+s+");}())\n",99]},p.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.valuefromtext=function(o){return["getIDProp("+e.valueToCode(o,"IdOfText",0)+","+(e.valueToCode(o,"ValueToObtain",0)||'"value"')+")",99]}},B.fieldXML=function(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_print_return"></block>  \n    <block type="text_prompt_ext"></block>\n    <block type="text_message"></block>\n    \n    '}},4283:(k,B,f)=>{k.exports={defaultBlocks:f(18638),filterBlocks:f(30721),waitBlocks:f(63889),xhrBlocks:f(23087),propBlocks:f(83033),guiBlocks:f(79118),convertersBlocks:f(54256),exportFileBlock:f(19544),createObjectBlocks:f(97404),currentDateBlock:f(50188),dateFromTextBlock:f(71320),waitBlocks:f(3322),commentBlock:f(11124),auth0Blocks:f(29130),windowsCreds:f(40054),trycatchFinBlock:f(88073),chartBlock:f(34122),emailBlocks:f(15889),htmlblocks:f(19842),ttsBlock:f(87804),pianoBlock:f(62303)}},62303:(k,B,f)=>{f(45797),B.definitionBlocks=function(p,e){p.pianoBlock={init:function(){this.appendValueInput("Note").setCheck("String").appendField("Note(A-G)"),this.appendValueInput("Sharp").setCheck("Boolean").appendField("#"),this.appendValueInput("Octave").setCheck("Number").appendField("Octave"),this.appendValueInput("Duration").setCheck("Number").appendField("Duration"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("https://github.com/keithwhor/audiosynth")}},e.pianoBlock=function(t){var n=e.valueToCode(t,"Note",e.ORDER_ATOMIC),_="";return"true"==(e.valueToCode(t,"Sharp",e.ORDER_ATOMIC)||!1)&&(_="#"),"playPiano("+n+_+","+e.valueToCode(t,"Octave",e.ORDER_ATOMIC)+","+(e.valueToCode(t,"Duration",e.ORDER_ATOMIC)||2)+");\n"},p.cmajor={init:function(){this.appendDummyInput().appendField("CMajor "),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},e.cmajor=function(t){return['["C","D","E","F","G","A","B"]',e.ORDER_NONE]}},B.fieldXML=function(){return'<block type="pianoBlock">\n        <value name="Note">\n            <shadow type="text">\n            <field name="TEXT">C</field></shadow>\n        </value>       \n        <value name="Octave">\n            <shadow type="math_number">\n            <field name="NUM">4</field></shadow>\n        </value>       \n        <value name="Sharp">\n            <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field></shadow>\n        </value>       \n        \n        <value name="Duration">\n            <shadow type="math_number">\n            <field name="NUM">2</field></shadow>\n        </value>       \n        </block>\n        <block type="cmajor"></block>\n\n'}},83033:(k,B,f)=>{const b=f(45797);B.definitionBlocks=function(p,e){p.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new b.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new b.FieldLabelSerializable(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(new b.FieldLabelSerializable("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},e.modifyproperty=function(c){return e.valueToCode(c,"ObjectToChange",0)+"["+e.valueToCode(c,"PropertyName",0)+"]="+e.valueToCode(c,"NewValue",0)+";"},p.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(new b.FieldLabelSerializable("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(new b.FieldLabelSerializable("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},e.getproperty=function(c){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+e.valueToCode(c,"ObjectToChange",0)+"))["+e.valueToCode(c,"PropertyName",0)+"]",99]}},B.fieldXML=function(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}},88073:(k,B)=>{B.definitionBlocks=function(f,b){f.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},b.trycatchfinally=function(t){var c="try {\n"+b.statementToCode(t,"TRY")+"}\n";return(c+="catch(err){\n errHandler(JSON.stringify(err));\n"+b.statementToCode(t,"CATCH")+"\n}")+"finally{\n "+b.statementToCode(t,"FINALLY")+"\n}\n"}},B.fieldXML=function(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}},3322:(k,B)=>{B.definitionBlocks=function(f,b){f.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},b.wait=function(e){return"waitTime("+(b.valueToCode(e,"VALUE",b.ORDER_ATOMIC)||"")+");"},f.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},b.wait_until=function(e){return"waitTime(("+(b.valueToCode(e,"VALUE",0)||"")+"-new Date())/1000);"}},B.fieldXML=function(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}},63889:(k,B)=>{B.definitionBlocks=function(f,b){f([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),b.wait_seconds=function(p){return"waitForSeconds("+Number(p.getFieldValue("SECONDS"))+");\n"}},B.fieldXML=function(){return'\n  <block type="wait_seconds"></block>\n'}},23087:(k,B,f)=>{const b=f(45797);B.definitionBlocks=function(p,e){p.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip("at domain put (localSite) or *")}},e.headersbeforehttp=function(o){var s=e.valueToCode(o,"HttpDomain",0)||"(localSite)",w="\n";return w+="{\n",w+="if(!("+s+" in headersForDomain))\n",w+="{\n",w+="headersForDomain["+s+"]=[];\n",w+="};\n",w+="var arr = headersForDomain["+s+"];\n",w+="arr.push({name:"+e.valueToCode(o,"HeaderName",0)+", value:"+e.valueToCode(o,"HeaderValue",0)+"});\n",w+='//alert("a" + JSON.stringify(arr)+"a");\n',(w+='//alert("a" + JSON.stringify(headersForDomain['+s+'])+"a");\n')+"};\n"},p.httprequest={init:function(){this.appendDummyInput().appendField(new b.FieldDropdown([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(new b.FieldDropdown([["GET","GET"],["POST","POST"],["PUT","PUT"],["DELETE","DELETE"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},e.httprequest=function(o){var s=o.getFieldValue("TypeOutput"),c=o.getFieldValue("TypeRequest"),_=e.valueToCode(o,"TheUrl",0),w=e.valueToCode(o,"Data",0),M="";switch(c.toString()){case"GET":M="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_+") )";break;case"POST":M="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_,w&&(M+=","+w),M+=") )";break;case"DELETE":M="(function(url,data){ var res=JSON.parse(deleteXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_,w&&(M+=","+w),M+=") )";break;case"PUT":M="(function(url,data){ var res=JSON.parse(putXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_,w&&(M+=","+w),M+=") )";break;default:alert("Do not understand : "+c.toString())}var U=M;return"JSON"===s&&(U="JSON.parse("+U+")"),[U,99]}},B.fieldXML=function(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>    \n\n'}},20070:(k,B,f)=>{var b=f(48926).default;const p=f(45797),e=f(61058);k.exports=class{constructor(s){cl(this,"GenerateBlocks",[]),cl(this,"GenerateFunctions",[]),cl(this,"fieldXMLObjects",[]),cl(this,"fieldXMLFunctions",[]),cl(this,"hasError",!0),cl(this,"paths",[]),cl(this,"name",""),cl(this,"operations",[]),cl(this,"tagsSwagger",[]),cl(this,"cacheCategSwaggerFromPaths",[]),cl(this,"openApiDocument",null),cl(this,"basePath",""),this.swaggerUrl=s}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}metaBlocks(){var s=this;return function(c,_){var w;c[w=`meta_swagger_controllers_${s.name}`]={init:function(){this.appendDummyInput().appendField("categories_"+s.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(s.swaggerUrl)}},_[w]=function(M){var V=s.findCategSwaggerFromPaths().map($=>({name:$}));return V={name:s.name,categories:V},[JSON.stringify(V),_.ORDER_NONE]},c[w=`meta_swagger_controllers_actions_${s.name}`]={init:function(){this.appendDummyInput().appendField("categories_actions"+s.name),this.setOutput(!0,null),this.setColour(30),this.setTooltip(""),this.setHelpUrl(s.swaggerUrl)}},_[w]=function(M){var V=s.findCategSwaggerFromPaths().map($=>({name:$,ops:s.findfieldXMLFunctions($).map(pt=>pt.id).filter(pt=>pt.length>0)}));return V={name:s.name,categories:V},[JSON.stringify(V),_.ORDER_NONE]}}}findfieldXMLFunctions(s){Object.keys(this.openApiDocument.paths);var w=this.operations.filter(U=>U.controller==s);return this.fieldXMLFunctions.filter(U=>{if(""==U.id)return!0;var V=U.id+"/",H=!1;return w.forEach($=>{V.startsWith($.id)&&(H=!0)}),!!H||(w.forEach($=>{var pt=$.id.substring(0,$.id.lastIndexOf("/"))+"{";V.startsWith(pt)&&(H=!0)}),H)})}findCategsFromTags(){var s=this.openApiDocument.paths,c=Object.keys(s),_=this;c.forEach(function(w){var M=s[w];M&&Object.keys(M).forEach(function(V){var H=M[V].tags;H&&H.length>0&&H.forEach(function($){_.cacheCategSwaggerFromPaths.includes($)||_.cacheCategSwaggerFromPaths.push($),_.operations.push({controller:$,id:w})})})})}findCategSwaggerFromPaths(){if(this.findCategsFromTags(),this.cacheCategSwaggerFromPaths.length>0)return this.cacheCategSwaggerFromPaths;var s=this.paths.filter(_=>_&&_.id&&_.id.length>0).map(_=>{for(var w=_.id.length,M=_.id.indexOf("{");M>0;){var U=_.id.indexOf("}",M);if(w-U<2){_.id=_.id.substring(0,M);break}M=_.id.indexOf("{",U)}return _}).map(_=>(_.id.lastIndexOf("/")!=_.id.length-1&&(_.id+="/"),_));this.operations=s.filter(_=>_.nrOps>1).map(_=>({arr:_.id.split("/").filter(M=>M.length>0),id:_.id})).map(_=>({controller:_.arr[_.arr.length-1],id:_.id}));var c=s.filter(_=>1==_.nrOps).map(_=>({arr:_.id.split("/").filter(w=>w.length>0),id:_.id})).map(_=>1==_.arr.length?{controller:_.arr[0],id:_.id}:{controller:_.arr[_.arr.length-2],id:_.id});return this.operations.push(...c),this.cacheCategSwaggerFromPaths=[...new Set(this.operations.map(_=>_.controller))],this.cacheCategSwaggerFromPaths}categSwagger(){var s=this.findHostNameRegular();(s=s.replaceAll(".","")).length>5&&s.substring(0,5);var w=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+w+'"></category><category name="AllApi" custom="AllApi_'+w+'"></category>'}findRootSite(){var s=this.swaggerUrl,c="";if(s.startsWith("http://")||s.startsWith("https://")){var _=new URL(s);c=_.protocol+"//"+_.hostname,_.port.length>0&&(c+=":"+_.port)}return c}findHostNameRegular(){var M,s=this.swaggerUrl,c="(localSite)";if(s.startsWith("http://")||s.startsWith("https://")){var _=new URL(s),w=null!=(M=_.port)?M:80;c=_.hostname+w}return c.replaceAll(".","")}showWindowToLoad(s,c){try{e.registerPlugin(f(17131))}catch(w){}e.defaultOptions.className="vex-theme-os",e.dialog.prompt({message:"Swagger url?",placeholder:s,callback:c})}ParseSwagger(){var s=this;return b(function*(){var V,c=s;c.fieldXMLObjects.push(`<label text="${c.swaggerUrl}"></label>`),c.fieldXMLFunctions.push({id:"",gui:`<label text="${c.swaggerUrl}"></label>`});var _=null;try{_=(yield f(47511).default(s.swaggerUrl)).spec}catch(H){return console.error(`parseSwagger ${s.swaggerUrl}`,H),c.fieldXMLObjects.push("<label text='Error parsing!'></label>"),s}s.hasError=!1,s.basePath=_.basePath||"";var M=null==(V=_.components)?void 0:V.schemas;return(null==M||null==M)&&(M=_.definitions),M?Object.keys(M).sort().forEach(function(H){var $=M[H],pt=c.findProperties($),nt=`<block type="${H}">`;pt.forEach(function(st){if(st.value&&st.value.type){var Ct=c.GenerateShadowField(st.value.type,st.key);Ct.length>0&&(nt+=`<value name="val_${st.key}">${Ct}</value>`)}}),c.fieldXMLObjects.push(nt+="</block>"),c.GenerateBlocks.push(c.GenerateBlock($,H))}):console.log("_A",_),_.paths&&Object.keys(_.paths).forEach(function(H){var $=_.paths[H];c.paths.push({id:H,nrOps:Object.keys($).length}),Object.keys($).forEach(function(pt){c.GenerateFunctions.push(c.GenerateFunction($,H,$[pt],pt))})}),c.openApiDocument=_,c})()}findProperties(s){var c=[];return s.properties&&Object.keys(s.properties).forEach(_=>{c.push({key:_,value:s.properties[_]})}),c}GenerateNameFunction(s,c,_,w){return w+"_"+c.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateShadowField(s,c,_){switch(s){case"integer":return`<block type='math_number'><field name='NUM'>${_||0}</field></block>`;case"string":return`<block type='text'><field name='TEXT'>${_||`please enter ${c}`}</field></block>`;case"boolean":return`<block type='logic_boolean'><field name='BOOL'>${_||"FALSE"}</field></block>`;case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateFunction(s,c,_,w){var M=this,U=M.GenerateNameFunction(s,c,_,w),H=_,$=`<block type="text_print"> <value name="TEXT"><block type="${U}">`;H.parameters&&H.parameters.forEach(xt=>{if(xt.type)(yt=M.GenerateShadowField(xt.type,xt.name)).length>0&&($+=`<value name="val_${xt.name}">${yt}</value>`);else if(xt.schema&&xt.schema.type){var yt;(yt=M.GenerateShadowField(xt.schema.type,xt.name)).length>0&&($+=`<value name="val_${xt.name}">${yt}</value>`)}});var pt="",nt="";try{var st=new URL(M.findRootSite());pt=st.hostname,nt=st.port}catch(xt){}var Ct=M.GenerateShadowField("string","override_host",pt=pt||" ");return $+=`<value name="override_Host">${Ct}</value>`,Ct=M.GenerateShadowField("integer","override_port",nt=nt||"0"),$+=`<value name="override_Port">${Ct}</value>`,$+="</block></value>",M.fieldXMLFunctions.push({id:c,gui:$+="</block>"}),function(xt,yt){xt[U]={init:function(){var ut=w;switch(w.toString().toLowerCase()){case"get":ut="",this.setColour(210);break;case"post":ut="",this.setColour(165);break;case"put":ut="",this.setColour(40);break;case"delete":ut="",this.setColour(10);break;default:console.log(`not found ${w}`),this.setColour(10)}for(var tt=c,lt=M.findCategSwaggerFromPaths(),ot=0;ot<lt.length;ot++){var Lt="/"+lt[ot]+"/",at=c.indexOf(Lt);if(at>-1){var dt=c.substring(at+Lt.length);dt.length<tt.length&&(tt=dt)}}tt.length>25&&(tt=tt.substring(0,25)+"..."),this.appendDummyInput().appendField(new p.FieldImage(`assets/httpImages/${w}.png`,90,20,w)).appendField(`${ut} ${tt}`);var it=M.findRootSite();if(H.parameters&&H.parameters.forEach(Ht=>{var ce=Ht.name;if(Ht.required&&(ce+="*"),Ht.type)ce+=":"+Ht.type;else if(Ht.schema)if(Ht.schema.enum&&"$$ref"in Ht.schema){var Ye=Ht.schema.$$ref.split("/");ce+="=>"+Ye[Ye.length-1]}else if(Ht.schema.type)if("object"==Ht.schema.type){var de=Ht.schema.$$ref||"";de.length>0&&(ce+=":"+(de=de.substring(de.lastIndexOf("/")+1)))}else ce+=":"+Ht.schema.type;this.appendValueInput(`val_${Ht.name}`).appendField(ce)}),H.requestBody){var rt="";if(H.requestBody.content){var Gt=H.requestBody.content["application/json"];if(Gt&&Gt.schema){var bt=Gt.schema.$$ref;bt&&(rt="=>"+bt.substring(bt.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+rt).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.appendValueInput("override_Port").appendField("override Port"),this.setTooltip(`${w} ${it}${c}`),this.setOutput(!0,"")}},yt[U]=function(ut){var Lt=M.openApiDocument.paths[c][w],at=[];"parameters"in Lt&&(at=Lt.parameters);var dt=!1,it=at.filter(Ne=>"body"==Ne.in).length>0;(it||"requestBody"in Lt)&&(dt=!0);var rt={},Gt={};dt&&(rt.val_values=yt.valueToCode(ut,"val_values",0),Gt.val_values=rt.val_values),at.forEach(Ne=>{rt[`val_${Ne.name}`]=yt.valueToCode(ut,`val_${Ne.name}`,0)});var bt=at.map(Ne=>Ne.name);dt&!it&&bt.push("values"),bt.push("extraData"),at.map(Ne=>`\${obj['val_${Ne.name}']},`);var ce="function(";ce+=bt.join(","),ce+="){\n",ce+='var rootSite="'+M.findRootSite()+'";\n',ce+="if(extraData){\n",ce+="if(extraData.url && extraData.url.host && extraData.url.host.length>0 ){\n",ce+="rootSite =  changeHost(rootSite, extraData.url.host);\n",ce+="};\n",ce+="if(extraData.url && extraData.url.port && extraData.url.port.toString().length>0 ){\n",ce+="rootSite  =changePort(rootSite , extraData.url.port);\n",ce+="};\n",ce+="};\n",ce+='var strUrl =rootSite +"'+M.basePath+c+'";\n';var Ye=at.filter(Ne=>"query"==Ne.in);if(Ye.length>0){ce+='strUrl+="?";\n;';var de=Ye.map(Ne=>`${Ne.name}={`+Ne.name+"}").join("&");ce+='strUrl += "'+de+'";\n;'}var Be=at.filter(Ne=>"path"==Ne.in||"query"==Ne.in).map(Ne=>`\n          //this gives error cannot read property 'call' of undefined in acorn\n          //strUrl = strUrl.replace("{${Ne.name}}",${Ne.name});\n          {\n            var replaceFInd = "{${Ne.name}}";\n            var index= strUrl.indexOf(replaceFInd);\n            if(index>=0){\n              var strUrlReplace = strUrl.substring(0,index)+ ${Ne.name} + strUrl.substring(index+replaceFInd.length);\n              strUrl = strUrlReplace;\n            }\n\n          };`);if(ce+=Be.join("\n"),ce+=`\n{var res= ${w}Xhr(strUrl`,dt){var He="values";it&&(He=at.filter(Ne=>"body"==Ne.in)[0].name),ce+=`,JSON.stringify(${He})`}ce+=");\n",ce+="var resJS=JSON.parse(res);\n",ce+="if(resJS.statusOK) return resJS.text;\n",ce+="errHandler(res);\n}\n",ce+="}",ce+="(",at.forEach(Ne=>{ce+=rt[`val_${Ne.name}`]+","}),dt&!it&&(ce+=Gt.val_values+",");var Ke="url:{notImportant:1",vi=yt.valueToCode(ut,"override_Host",0);(vi=vi||"").length>0&&(Ke+=`,host:${vi}`);var qe=yt.valueToCode(ut,"override_Port",0);return(qe=qe||"").length>0&&(Ke+=`,port:${qe}`),ce+=`{${Ke+="}"}}\n`,[ce+=")",99]}}}GenerateBlock(s,c){var _=this,w=c,U=_.findProperties(s);return function(V,H){V[w]={init:function(){var $=!1,pt=[];s.enum&&($=!0,pt=Object.keys(s.enum).map(s["x-enumNames"]?Ct=>[s["x-enumNames"][Ct],Ct]:Ct=>[s.enum[Ct],Ct]));var st=this.appendDummyInput().appendField(c);$?(pt=pt.map(Ct=>[Ct[0].toString(),Ct[1].toString()]),st.appendField(new p.FieldDropdown(pt),`val_${c}`)):U.forEach(Ct=>{var lt,xt=Ct.key;if(Ct.value.nullable&&0==Ct.value.nullable&&(xt+="*"),null==(lt=Ct.value)?void 0:lt.type){var yt=Ct.value.type||"";if("object"==yt){var ut=Ct.value.$$ref||"";ut.length>0&&(yt=ut.substring(ut.lastIndexOf("/")+1))}xt+=":"+yt}Ct.value.$ref&&(xt+="->"+Ct.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${Ct.key}`).appendField(`${xt}`)}),this.setOutput(!0,w)}},H[w]=function($){{var pt=!1;s.enum&&(pt=!0);var nt=_.findProperties(s);const yt=99,ut=0;var st="",Ct=[];return nt.forEach(tt=>{let lt=H.valueToCode($,`val_${tt.key}`,ut);""===lt&&(lt="null"),null==lt&&(lt="null"),Ct.push(`"${tt.key}":${lt}`)}),st="{ "+Ct.join(",")+" }",pt&&(st=$.getFieldValue(`val_${c}`)),[st,yt]}}}}TranslateToBlocklyType(s){return"integer"==s?"Number":"string"==s?"String":"bool"==s?"Boolean":"array"==s?"Array":(console.error("not found TranslateToBlocklyType item"+s),"not found type"+s)}}},21086:(k,B,f)=>{k.exports={parseSwagger:f(18706),parseData:f(20070)}},18706:(k,B,f)=>{var b=f(48926).default;B.parseSwagger=function(){var t=b(function*(n){var U;new(f(20070))(n);var c=[],M=(yield f(53096).default(n)).response;return(null==(U=M.components)?void 0:U.schemas)&&Object.keys(M.components.schemas).forEach(function(V){c.push(function(t,n){var o=n;return t.properties&&Object.keys(t.properties).forEach(s=>{}),function(s,c){s[o]={init:function(){this.appendDummyInput().appendField(n),this.setOutput(!0,o)}}}}(M.components.schemas[V],V))}),c});return function(n){return t.apply(this,arguments)}}(),B.parseSwagger1=function(t){return f(53096).default(t)}},96609:(k,B,f)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),B.Api=void 0;var b=f(35414);B.Api=function(t,n){void 0===n&&(n={}),this.entrypoint=t,b.assignSealed(this,n)}},66639:(k,B,f)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),B.Field=void 0;var b=f(35414);B.Field=function(t,n){void 0===n&&(n={}),this.name=t,b.assignSealed(this,n)}},57175:(k,B,f)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),B.Resource=void 0;var b=f(35414);B.Resource=function(t,n,o){void 0===o&&(o={}),this.name=t,this.url=n,b.assignSealed(this,o)}},2586:(k,B,f)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),B.removeTrailingSlash=void 0;var p=f(59312).__importDefault(f(37901)),e=f(66639),t=f(57175),n=f(61817);B.removeTrailingSlash=function(c){return c.endsWith("/")&&(c=c.slice(0,-1)),c},B.default=function(c,_){return n.getResources(c.paths).map(function(U){var V=U.replace("/",""),H=B.removeTrailingSlash(_)+U,$=Object.keys(c.paths[U])[0],pt=c.paths[U][$];if(!pt.tags)throw new Error;var nt=pt.tags[0];if(!c.components)throw new Error;if(!c.components.schemas)throw new Error;var Ct=c.components.schemas[nt].properties;if(!Ct)throw new Error;var xt=Object.keys(Ct),yt=p.default(c,["components","schemas",nt,"required"],[]),ut=xt.map(function(tt){return new e.Field(tt,{id:null,range:null,reference:null,required:!!yt.find(function(lt){return lt===tt}),description:p.default(Ct[tt],"description","")})});return new t.Resource(V,H,{id:null,title:nt,fields:ut,readableFields:ut,writableFields:ut})})}},53096:(k,B,f)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});var b=f(59312),p=f(96609),e=b.__importStar(f(2586));B.default=function(n){return n=e.removeTrailingSlash(n),fetch(n).then(function(o){return Promise.all([o,o.json()])}).then(function(o){var s=o[0],c=o[1],_=c.info.title,w=e.default(c,n);return Promise.resolve({api:new p.Api(n,{title:_,resources:w}),response:c,status:s.status})},function(o){var s=o[0],c=o[1];return Promise.reject({api:new p.Api(n,{resources:[]}),response:c,status:s.status})})}},35414:(k,B)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),B.assignSealed=void 0,B.assignSealed=function(b,p){Object.keys(p).forEach(function(e){Object.defineProperty(b,e,{writable:!0,enumerable:!0,configurable:!1,value:p[e]})})}},61817:(k,B)=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),B.getResources=void 0,B.getResources=function(b){var p=[];return Object.keys(b).forEach(function(e){e.includes("/{id}")||p.find(function(t){return t.startsWith("/"+e.split("/")[1])})||p.push(e)}),p}},54678:function(k,B,f){var p,e;p=[f(33164)],void 0!==(e=function(t){"use strict";return t}.apply(B,p))&&(k.exports=e)},33164:function(k,B){var p;void 0!==(p=function(){"use strict";var e={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return e.CONNECTING_SNAP_RADIUS=e.SNAP_RADIUS,e.CURRENT_CONNECTION_PREFERENCE=8,e.BUMP_DELAY=250,e.BUMP_RANDOMNESS=10,e.COLLAPSE_CHARS=30,e.LONGPRESS=750,e.SOUND_LIMIT=100,e.DRAG_STACK=!0,e.HSV_SATURATION=.45,e.HSV_VALUE=.65,e.SPRITE={width:96,height:124,url:"sprites.png"},e.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},e.DRAG_NONE=0,e.DRAG_STICKY=1,e.DRAG_BEGIN=1,e.DRAG_FREE=2,e.OPPOSITE_TYPE=[],e.OPPOSITE_TYPE[e.connectionTypes.INPUT_VALUE]=e.connectionTypes.OUTPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.OUTPUT_VALUE]=e.connectionTypes.INPUT_VALUE,e.OPPOSITE_TYPE[e.connectionTypes.NEXT_STATEMENT]=e.connectionTypes.PREVIOUS_STATEMENT,e.OPPOSITE_TYPE[e.connectionTypes.PREVIOUS_STATEMENT]=e.connectionTypes.NEXT_STATEMENT,e.VARIABLE_CATEGORY_NAME="VARIABLE",e.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",e.PROCEDURE_CATEGORY_NAME="PROCEDURE",e.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",e.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",e.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",e.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",e.utils={},e.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),e.Msg={},e.utils.global.Blockly||(e.utils.global.Blockly={}),e.utils.global.Blockly.Msg||(e.utils.global.Blockly.Msg=e.Msg),e.utils.colour={},e.utils.colour.parse=function(t){t=String(t).toLowerCase().trim();var n=e.utils.colour.names[t];if(n||(n="0x"==t.substring(0,2)?"#"+t.substring(2):t,/^#[0-9a-f]{6}$/.test(n="#"==n[0]?n:"#"+n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(t=Number(o[1]),n=Number(o[2]),o=Number(o[3]),0<=t&&256>t&&0<=n&&256>n&&0<=o&&256>o)?e.utils.colour.rgbToHex(t,n,o):null},e.utils.colour.rgbToHex=function(t,n,o){return n=t<<16|n<<8|o,16>t?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},e.utils.colour.hexToRgb=function(t){return(t=e.utils.colour.parse(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},e.utils.colour.hsvToHex=function(t,n,o){var s=0,c=0,_=0;if(0==n)_=c=s=o;else{var w=Math.floor(t/60),M=t/60-w;t=o*(1-n);var U=o*(1-n*M);switch(n=o*(1-n*(1-M)),w){case 1:s=U,c=o,_=t;break;case 2:s=t,c=o,_=n;break;case 3:s=t,c=U,_=o;break;case 4:s=n,c=t,_=o;break;case 5:s=o,c=t,_=U;break;case 6:case 0:s=o,c=n,_=t}}return e.utils.colour.rgbToHex(Math.floor(s),Math.floor(c),Math.floor(_))},e.utils.colour.blend=function(t,n,o){return(t=e.utils.colour.parse(t))&&(n=e.utils.colour.parse(n))?(t=e.utils.colour.hexToRgb(t),n=e.utils.colour.hexToRgb(n),e.utils.colour.rgbToHex(Math.round(n[0]+o*(t[0]-n[0])),Math.round(n[1]+o*(t[1]-n[1])),Math.round(n[2]+o*(t[2]-n[2])))):null},e.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},e.utils.Coordinate=function(t,n){this.x=t,this.y=n},e.utils.Coordinate.equals=function(t,n){return t==n||!(!t||!n)&&t.x==n.x&&t.y==n.y},e.utils.Coordinate.distance=function(t,n){var o=t.x-n.x;return t=t.y-n.y,Math.sqrt(o*o+t*t)},e.utils.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.utils.Coordinate.difference=function(t,n){return new e.utils.Coordinate(t.x-n.x,t.y-n.y)},e.utils.Coordinate.sum=function(t,n){return new e.utils.Coordinate(t.x+n.x,t.y+n.y)},e.utils.Coordinate.prototype.clone=function(){return new e.utils.Coordinate(this.x,this.y)},e.utils.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},e.utils.Coordinate.prototype.translate=function(t,n){return this.x+=t,this.y+=n,this},e.utils.Rect=function(t,n,o,s){this.top=t,this.bottom=n,this.left=o,this.right=s},e.utils.Rect.prototype.contains=function(t,n){return t>=this.left&&t<=this.right&&n>=this.top&&n<=this.bottom},e.utils.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)},e.utils.string={},e.utils.string.startsWith=function(t,n){return 0==t.lastIndexOf(n,0)},e.utils.string.shortestStringLength=function(t){return t.length?t.reduce(function(n,o){return n.length<o.length?n:o}).length:0},e.utils.string.commonWordPrefix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0][s],_=1;_<t.length;_++)if(c!=t[_][s])return o;" "==c&&(o=s+1)}for(_=1;_<t.length;_++)if((c=t[_][s])&&" "!=c)return o;return n},e.utils.string.commonWordSuffix=function(t,n){if(!t.length)return 0;if(1==t.length)return t[0].length;var o=0;n=n||e.utils.string.shortestStringLength(t);for(var s=0;s<n;s++){for(var c=t[0].substr(-s-1,1),_=1;_<t.length;_++)if(c!=t[_].substr(-s-1,1))return o;" "==c&&(o=s+1)}for(_=1;_<t.length;_++)if((c=t[_].charAt(t[_].length-s-1))&&" "!=c)return o;return n},e.utils.string.wrap=function(t,n){t=t.split("\n");for(var o=0;o<t.length;o++)t[o]=e.utils.string.wrapLine_(t[o],n);return t.join("\n")},e.utils.string.wrapLine_=function(t,n){if(t.length<=n)return t;for(var o=t.trim().split(/\s+/),s=0;s<o.length;s++)o[s].length>n&&(n=o[s].length);s=-1/0;var c=1;do{var _=s,w=t;t=[];var M=o.length/c,U=1;for(s=0;s<o.length-1;s++)U<(s+1.5)/M?(U++,t[s]=!0):t[s]=!1;t=e.utils.string.wrapMutate_(o,t,n),s=e.utils.string.wrapScore_(o,t,n),t=e.utils.string.wrapToText_(o,t),c++}while(s>_);return w},e.utils.string.wrapScore_=function(t,n,o){for(var s=[0],c=[],_=0;_<t.length;_++)s[s.length-1]+=t[_].length,!0===n[_]?(s.push(0),c.push(t[_].charAt(t[_].length-1))):!1===n[_]&&s[s.length-1]++;for(t=Math.max.apply(Math,s),_=n=0;_<s.length;_++)n-=2*Math.pow(Math.abs(o-s[_]),1.5),n-=Math.pow(t-s[_],1.5),-1!=".?!".indexOf(c[_])?n+=o/3:-1!=",;)]}".indexOf(c[_])&&(n+=o/4);return 1<s.length&&s[s.length-1]<=s[s.length-2]&&(n+=.5),n},e.utils.string.wrapMutate_=function(t,n,o){for(var c,s=e.utils.string.wrapScore_(t,n,o),_=0;_<n.length-1;_++)if(n[_]!=n[_+1]){var w=[].concat(n);w[_]=!w[_],w[_+1]=!w[_+1];var M=e.utils.string.wrapScore_(t,w,o);M>s&&(s=M,c=w)}return c?e.utils.string.wrapMutate_(t,c,o):n},e.utils.string.wrapToText_=function(t,n){for(var o=[],s=0;s<t.length;s++)o.push(t[s]),void 0!==n[s]&&o.push(n[s]?"\n":" ");return o.join("")},e.utils.Size=function(t,n){this.width=t,this.height=n},e.utils.Size.equals=function(t,n){return t==n||!(!t||!n)&&t.width==n.width&&t.height==n.height},e.utils.style={},e.utils.style.getSize=function(t){if("none"!=e.utils.style.getStyle_(t,"display"))return e.utils.style.getSizeWithDisplay_(t);var n=t.style,o=n.display,s=n.visibility,c=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var _=t.offsetWidth;return t=t.offsetHeight,n.display=o,n.position=c,n.visibility=s,new e.utils.Size(_,t)},e.utils.style.getSizeWithDisplay_=function(t){return new e.utils.Size(t.offsetWidth,t.offsetHeight)},e.utils.style.getStyle_=function(t,n){return e.utils.style.getComputedStyle(t,n)||e.utils.style.getCascadedStyle(t,n)||t.style&&t.style[n]},e.utils.style.getComputedStyle=function(t,n){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[n]||t.getPropertyValue(n))||""},e.utils.style.getCascadedStyle=function(t,n){return t.currentStyle?t.currentStyle[n]:null},e.utils.style.getPageOffset=function(t){var n=new e.utils.Coordinate(0,0);t=t.getBoundingClientRect();var o=document.documentElement;return o=new e.utils.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=t.left+o.x,n.y=t.top+o.y,n},e.utils.style.getViewportPageOffset=function(){var t=document.body,n=document.documentElement;return new e.utils.Coordinate(t.scrollLeft||n.scrollLeft,t.scrollTop||n.scrollTop)},e.utils.style.setElementShown=function(t,n){t.style.display=n?"":"none"},e.utils.style.isRightToLeft=function(t){return"rtl"==e.utils.style.getStyle_(t,"direction")},e.utils.style.getBorderBox=function(t){var n=e.utils.style.getComputedStyle(t,"borderLeftWidth"),o=e.utils.style.getComputedStyle(t,"borderRightWidth"),s=e.utils.style.getComputedStyle(t,"borderTopWidth");return t=e.utils.style.getComputedStyle(t,"borderBottomWidth"),{top:parseFloat(s),right:parseFloat(o),bottom:parseFloat(t),left:parseFloat(n)}},e.utils.style.scrollIntoContainerView=function(t,n,o){t=e.utils.style.getContainerOffsetToScrollInto(t,n,o),n.scrollLeft=t.x,n.scrollTop=t.y},e.utils.style.getContainerOffsetToScrollInto=function(t,n,o){var s=e.utils.style.getPageOffset(t),c=e.utils.style.getPageOffset(n),_=e.utils.style.getBorderBox(n),w=s.x-c.x-_.left;return s=s.y-c.y-_.top,c=e.utils.style.getSizeWithDisplay_(t),t=n.clientWidth-c.width,c=n.clientHeight-c.height,_=n.scrollLeft,n=n.scrollTop,o?(_+=w-t/2,n+=s-c/2):(_+=Math.min(w,Math.max(w-t,0)),n+=Math.min(s,Math.max(s-c,0))),new e.utils.Coordinate(_,n)},e.utils.userAgent={},function(t){function n(s){return-1!=o.indexOf(s.toUpperCase())}e.utils.userAgent.raw=t;var o=e.utils.userAgent.raw.toUpperCase();e.utils.userAgent.IE=n("Trident")||n("MSIE"),e.utils.userAgent.EDGE=n("Edge"),e.utils.userAgent.JAVA_FX=n("JavaFX"),e.utils.userAgent.CHROME=(n("Chrome")||n("CriOS"))&&!e.utils.userAgent.EDGE,e.utils.userAgent.WEBKIT=n("WebKit")&&!e.utils.userAgent.EDGE,e.utils.userAgent.GECKO=n("Gecko")&&!e.utils.userAgent.WEBKIT&&!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,e.utils.userAgent.ANDROID=n("Android"),t=e.utils.global.navigator&&e.utils.global.navigator.maxTouchPoints,e.utils.userAgent.IPAD=n("iPad")||n("Macintosh")&&0<t,e.utils.userAgent.IPOD=n("iPod"),e.utils.userAgent.IPHONE=n("iPhone")&&!e.utils.userAgent.IPAD&&!e.utils.userAgent.IPOD,e.utils.userAgent.MAC=n("Macintosh"),e.utils.userAgent.TABLET=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID&&!n("Mobile")||n("Silk"),e.utils.userAgent.MOBILE=!e.utils.userAgent.TABLET&&(e.utils.userAgent.IPOD||e.utils.userAgent.IPHONE||e.utils.userAgent.ANDROID||n("IEMobile"))}(e.utils.global.navigator&&e.utils.global.navigator.userAgent||""),e.utils.noEvent=function(t){t.preventDefault(),t.stopPropagation()},e.utils.isTargetInput=function(t){return"textarea"==t.target.type||"text"==t.target.type||"number"==t.target.type||"email"==t.target.type||"password"==t.target.type||"search"==t.target.type||"tel"==t.target.type||"url"==t.target.type||t.target.isContentEditable||t.target.dataset&&"true"==t.target.dataset.isTextInput},e.utils.getRelativeXY=function(t){var n=new e.utils.Coordinate(0,0),o=t.getAttribute("x");return o&&(n.x=parseInt(o,10)),(o=t.getAttribute("y"))&&(n.y=parseInt(o,10)),(o=(o=t.getAttribute("transform"))&&o.match(e.utils.getRelativeXY.XY_REGEX_))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(e.utils.getRelativeXY.XY_STYLE_REGEX_))&&(n.x+=Number(t[1]),t[3]&&(n.y+=Number(t[3]))),n},e.utils.getInjectionDivXY_=function(t){for(var n=0,o=0;t;){var s=e.utils.getRelativeXY(t);if(n+=s.x,o+=s.y,-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;t=t.parentNode}return new e.utils.Coordinate(n,o)},e.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,e.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,e.utils.isRightButton=function(t){return!(!t.ctrlKey||!e.utils.userAgent.MAC)||2==t.button},e.utils.mouseToSvg=function(t,n,o){var s=n.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,o||(o=n.getScreenCTM().inverse()),s.matrixTransform(o)},e.utils.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*e.LINE_MODE_MULTIPLIER,y:t.deltaY*e.LINE_MODE_MULTIPLIER};case 2:return{x:t.deltaX*e.PAGE_MODE_MULTIPLIER,y:t.deltaY*e.PAGE_MODE_MULTIPLIER}}},e.utils.tokenizeInterpolation=function(t){return e.utils.tokenizeInterpolation_(t,!0)},e.utils.replaceMessageReferences=function(t){return"string"!=typeof t?t:(t=e.utils.tokenizeInterpolation_(t,!1)).length?String(t[0]):""},e.utils.checkMessageReferences=function(t){for(var n=!0,o=e.Msg,s=t.match(/%{BKY_[A-Z]\w*}/gi),c=0;c<s.length;c++)null==o[s[c].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+s[c]+" in "+t),n=!1);return n},e.utils.tokenizeInterpolation_=function(t,n){var o=[],s=t.split("");s.push("");var c=0;t=[];for(var _=null,w=0;w<s.length;w++){var M=s[w];0==c?"%"==M?((M=t.join(""))&&o.push(M),t.length=0,c=1):t.push(M):1==c?"%"==M?(t.push(M),c=0):n&&"0"<=M&&"9">=M?(c=2,_=M,(M=t.join(""))&&o.push(M),t.length=0):"{"==M?c=3:(t.push("%",M),c=0):2==c?"0"<=M&&"9">=M?_+=M:(o.push(parseInt(_,10)),w--,c=0):3==c&&(""==M?(t.splice(0,0,"%{"),w--,c=0):"}"!=M?t.push(M):(c=t.join(""),/[A-Z]\w*/i.test(c)?(M=c.toUpperCase(),(M=e.utils.string.startsWith(M,"BKY_")?M.substring(4):null)&&M in e.Msg?"string"==typeof(c=e.Msg[M])?Array.prototype.push.apply(o,e.utils.tokenizeInterpolation_(c,n)):o.push(n?String(c):c):o.push("%{"+c+"}")):o.push("%{"+c+"}"),c=t.length=0))}for((M=t.join(""))&&o.push(M),n=[],w=t.length=0;w<o.length;++w)"string"==typeof o[w]?t.push(o[w]):((M=t.join(""))&&n.push(M),t.length=0,n.push(o[w]));return(M=t.join(""))&&n.push(M),t.length=0,n},e.utils.genUid=function(){for(var t=e.utils.genUid.soup_.length,n=[],o=0;20>o;o++)n[o]=e.utils.genUid.soup_.charAt(Math.random()*t);return n.join("")},e.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e.utils.is3dSupported=function(){if(void 0!==e.utils.is3dSupported.cached_)return e.utils.is3dSupported.cached_;if(!e.utils.global.getComputedStyle)return!1;var t=document.createElement("p"),n="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(t,null),o)if(void 0!==t.style[s]){if(t.style[s]="translate3d(1px,1px,1px)",!(n=e.utils.global.getComputedStyle(t)))return document.body.removeChild(t),!1;n=n.getPropertyValue(o[s])}return document.body.removeChild(t),e.utils.is3dSupported.cached_="none"!==n,e.utils.is3dSupported.cached_},e.utils.runAfterPageLoad=function(t){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)t();else var n=setInterval(function(){"complete"==document.readyState&&(clearInterval(n),t())},10)},e.utils.getViewportBBox=function(){var t=e.utils.style.getViewportPageOffset();return new e.utils.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},e.utils.arrayRemove=function(t,n){return-1!=(n=t.indexOf(n))&&(t.splice(n,1),!0)},e.utils.getDocumentScroll=function(){var t=document.documentElement,n=window;return e.utils.userAgent.IE&&n.pageYOffset!=t.scrollTop?new e.utils.Coordinate(t.scrollLeft,t.scrollTop):new e.utils.Coordinate(n.pageXOffset||t.scrollLeft,n.pageYOffset||t.scrollTop)},e.utils.getBlockTypeCounts=function(t,n){var o=Object.create(null),s=t.getDescendants(!0);for(n&&(t=t.getNextBlock())&&(t=s.indexOf(t),s.splice(t,s.length-t)),t=0;n=s[t];t++)o[n.type]?o[n.type]++:o[n.type]=1;return o},e.utils.screenToWsCoordinates=function(t,n){var o=n.x;n=n.y;var s=t.getInjectionDiv().getBoundingClientRect();return o=new e.utils.Coordinate(o-s.left,n-s.top),n=t.getOriginOffsetInPixels(),e.utils.Coordinate.difference(o,n).scale(1/t.scale)},e.utils.parseBlockColour=function(t){var n="string"==typeof t?e.utils.replaceMessageReferences(t):t,o=Number(n);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:e.utils.colour.hsvToHex(o,e.HSV_SATURATION,255*e.HSV_VALUE)};if(o=e.utils.colour.parse(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',t!=n&&(o+=' (from "'+t+'")'),Error(o)},e.Touch={},e.Touch.TOUCH_ENABLED="ontouchstart"in e.utils.global||!!(e.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!e.utils.global.navigator||!e.utils.global.navigator.maxTouchPoints&&!e.utils.global.navigator.msMaxTouchPoints),e.Touch.touchIdentifier_=null,e.Touch.TOUCH_MAP={},e.utils.global.PointerEvent?e.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:e.Touch.TOUCH_ENABLED&&(e.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),e.longPid_=0,e.longStart=function(t,n){e.longStop_(),t.changedTouches&&1!=t.changedTouches.length||(e.longPid_=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),n&&n.handleRightClick(t)},e.LONGPRESS))},e.longStop_=function(){e.longPid_&&(clearTimeout(e.longPid_),e.longPid_=0)},e.Touch.clearTouchIdentifier=function(){e.Touch.touchIdentifier_=null},e.Touch.shouldHandleEvent=function(t){return!e.Touch.isMouseOrTouchEvent(t)||e.Touch.checkTouchIdentifier(t)},e.Touch.getTouchIdentifierFromEvent=function(t){return null!=t.pointerId?t.pointerId:t.changedTouches&&t.changedTouches[0]&&null!=t.changedTouches[0].identifier?t.changedTouches[0].identifier:"mouse"},e.Touch.checkTouchIdentifier=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);return null!=e.Touch.touchIdentifier_?e.Touch.touchIdentifier_==n:("mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type)&&(e.Touch.touchIdentifier_=n,!0)},e.Touch.setClientFromTouch=function(t){if(e.utils.string.startsWith(t.type,"touch")){var n=t.changedTouches[0];t.clientX=n.clientX,t.clientY=n.clientY}},e.Touch.isMouseOrTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"mouse")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.isTouchEvent=function(t){return e.utils.string.startsWith(t.type,"touch")||e.utils.string.startsWith(t.type,"pointer")},e.Touch.splitEventByTouches=function(t){var n=[];if(t.changedTouches)for(var o=0;o<t.changedTouches.length;o++)n[o]={type:t.type,changedTouches:[t.changedTouches[o]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else n.push(t);return n},e.browserEvents={},e.browserEvents.conditionalBind=function(t,n,o,s,c,_){var w=!1,M=function(pt){var nt=!c;pt=e.Touch.splitEventByTouches(pt);for(var Ct,st=0;Ct=pt[st];st++)(!nt||e.Touch.shouldHandleEvent(Ct))&&(e.Touch.setClientFromTouch(Ct),o?s.call(o,Ct):s(Ct),w=!0)},U=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var H,V=0;H=e.Touch.TOUCH_MAP[n][V];V++)t.addEventListener(H,M,!1),U.push([t,H,M]);else if(t.addEventListener(n,M,!1),U.push([t,n,M]),n in e.Touch.TOUCH_MAP){var $=function(pt){M(pt),w&&!_&&pt.preventDefault()};for(V=0;H=e.Touch.TOUCH_MAP[n][V];V++)t.addEventListener(H,$,!1),U.push([t,H,$])}return U},e.browserEvents.bind=function(t,n,o,s){var c=function(V){o?s.call(o,V):s(V)},_=[];if(e.utils.global.PointerEvent&&n in e.Touch.TOUCH_MAP)for(var M,w=0;M=e.Touch.TOUCH_MAP[n][w];w++)t.addEventListener(M,c,!1),_.push([t,M,c]);else if(t.addEventListener(n,c,!1),_.push([t,n,c]),n in e.Touch.TOUCH_MAP){var U=function(V){if(V.changedTouches&&1==V.changedTouches.length){var H=V.changedTouches[0];V.clientX=H.clientX,V.clientY=H.clientY}c(V),V.preventDefault()};for(w=0;M=e.Touch.TOUCH_MAP[n][w];w++)t.addEventListener(M,U,!1),_.push([t,M,U])}return _},e.browserEvents.unbind=function(t){for(;t.length;){var n=t.pop(),o=n[2];n[0].removeEventListener(n[1],o,!1)}return o},e.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},e.ComponentManager.prototype.addComponent=function(t,n){var o=t.component.id;if(!n&&this.componentData_[o])throw Error('Plugin "'+o+'" with capabilities "'+this.componentData_[o].capabilities+'" already added.');this.componentData_[o]=t,n=[];for(var s=0;s<t.capabilities.length;s++){var c=String(t.capabilities[s]).toLowerCase();n.push(c),void 0===this.capabilityToComponentIds_[c]?this.capabilityToComponentIds_[c]=[o]:this.capabilityToComponentIds_[c].push(o)}this.componentData_[o].capabilities=n},e.ComponentManager.prototype.removeComponent=function(t){var n=this.componentData_[t];if(n){for(var o=0;o<n.capabilities.length;o++){var s=String(n.capabilities[o]).toLowerCase();this.capabilityToComponentIds_[s].splice(this.capabilityToComponentIds_[s].indexOf(t),1)}delete this.componentData_[t]}},e.ComponentManager.prototype.addCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot add capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?console.warn('Plugin "'+t+'already has capability "'+n+'"'):(n=String(n).toLowerCase(),this.componentData_[t].capabilities.push(n),this.capabilityToComponentIds_[n].push(t))},e.ComponentManager.prototype.removeCapability=function(t,n){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+n+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,n)?(n=String(n).toLowerCase(),this.componentData_[t].capabilities.splice(this.componentData_[t].capabilities.indexOf(n),1),this.capabilityToComponentIds_[n].splice(this.capabilityToComponentIds_[n].indexOf(t),1)):console.warn('Plugin "'+t+"doesn't have capability \""+n+'" to remove')},e.ComponentManager.prototype.hasCapability=function(t,n){return n=String(n).toLowerCase(),-1!==this.componentData_[t].capabilities.indexOf(n)},e.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},e.ComponentManager.prototype.getComponents=function(t,n){if(t=String(t).toLowerCase(),!(t=this.capabilityToComponentIds_[t]))return[];var o=[];if(n){var s=[],c=this.componentData_;t.forEach(function(_){s.push(c[_])}),s.sort(function(_,w){return _.weight-w.weight}),s.forEach(function(_){o.push(_.component)})}else c=this.componentData_,t.forEach(function(_){o.push(c[_].component)});return o},e.ComponentManager.Capability=function(t){this.name_=t},e.ComponentManager.Capability.prototype.toString=function(){return this.name_},e.ComponentManager.Capability.POSITIONABLE=new e.ComponentManager.Capability("positionable"),e.ComponentManager.Capability.DRAG_TARGET=new e.ComponentManager.Capability("drag_target"),e.ComponentManager.Capability.DELETE_AREA=new e.ComponentManager.Capability("delete_area"),e.ComponentManager.Capability.AUTOHIDEABLE=new e.ComponentManager.Capability("autohideable"),e.utils.Svg=function(t){this.tagName_=t},e.utils.Svg.prototype.toString=function(){return this.tagName_},e.utils.Svg.ANIMATE=new e.utils.Svg("animate"),e.utils.Svg.CIRCLE=new e.utils.Svg("circle"),e.utils.Svg.CLIPPATH=new e.utils.Svg("clipPath"),e.utils.Svg.DEFS=new e.utils.Svg("defs"),e.utils.Svg.FECOMPOSITE=new e.utils.Svg("feComposite"),e.utils.Svg.FECOMPONENTTRANSFER=new e.utils.Svg("feComponentTransfer"),e.utils.Svg.FEFLOOD=new e.utils.Svg("feFlood"),e.utils.Svg.FEFUNCA=new e.utils.Svg("feFuncA"),e.utils.Svg.FEGAUSSIANBLUR=new e.utils.Svg("feGaussianBlur"),e.utils.Svg.FEPOINTLIGHT=new e.utils.Svg("fePointLight"),e.utils.Svg.FESPECULARLIGHTING=new e.utils.Svg("feSpecularLighting"),e.utils.Svg.FILTER=new e.utils.Svg("filter"),e.utils.Svg.FOREIGNOBJECT=new e.utils.Svg("foreignObject"),e.utils.Svg.G=new e.utils.Svg("g"),e.utils.Svg.IMAGE=new e.utils.Svg("image"),e.utils.Svg.LINE=new e.utils.Svg("line"),e.utils.Svg.PATH=new e.utils.Svg("path"),e.utils.Svg.PATTERN=new e.utils.Svg("pattern"),e.utils.Svg.POLYGON=new e.utils.Svg("polygon"),e.utils.Svg.RECT=new e.utils.Svg("rect"),e.utils.Svg.SVG=new e.utils.Svg("svg"),e.utils.Svg.TEXT=new e.utils.Svg("text"),e.utils.Svg.TSPAN=new e.utils.Svg("tspan"),e.utils.dom={},e.utils.dom.SVG_NS="http://www.w3.org/2000/svg",e.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",e.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",e.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},e.utils.dom.cacheWidths_=null,e.utils.dom.cacheReference_=0,e.utils.dom.canvasContext_=null,e.utils.dom.createSvgElement=function(t,n,o){for(var s in t=document.createElementNS(e.utils.dom.SVG_NS,String(t)),n)t.setAttribute(s,n[s]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),o&&o.appendChild(t),t},e.utils.dom.addClass=function(t,n){var o=t.getAttribute("class")||"";return-1==(" "+o+" ").indexOf(" "+n+" ")&&(o&&(o+=" "),t.setAttribute("class",o+n),!0)},e.utils.dom.removeClasses=function(t,n){n=n.split(" ");for(var o=0;o<n.length;o++)e.utils.dom.removeClass(t,n[o])},e.utils.dom.removeClass=function(t,n){var o=t.getAttribute("class");if(-1==(" "+o+" ").indexOf(" "+n+" "))return!1;o=o.split(/\s+/);for(var s=0;s<o.length;s++)o[s]&&o[s]!=n||(o.splice(s,1),s--);return o.length?t.setAttribute("class",o.join(" ")):t.removeAttribute("class"),!0},e.utils.dom.hasClass=function(t,n){return-1!=(" "+t.getAttribute("class")+" ").indexOf(" "+n+" ")},e.utils.dom.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},e.utils.dom.insertAfter=function(t,n){var o=n.nextSibling;if(!(n=n.parentNode))throw Error("Reference node has no parent.");o?n.insertBefore(t,o):n.appendChild(t)},e.utils.dom.containsNode=function(t,n){return!!(t.compareDocumentPosition(n)&e.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},e.utils.dom.setCssTransform=function(t,n){t.style.transform=n,t.style["-webkit-transform"]=n},e.utils.dom.startTextWidthCache=function(){e.utils.dom.cacheReference_++,e.utils.dom.cacheWidths_||(e.utils.dom.cacheWidths_=Object.create(null))},e.utils.dom.stopTextWidthCache=function(){e.utils.dom.cacheReference_--,e.utils.dom.cacheReference_||(e.utils.dom.cacheWidths_=null)},e.utils.dom.getTextWidth=function(t){var o,n=t.textContent+"\n"+t.className.baseVal;if(e.utils.dom.cacheWidths_&&(o=e.utils.dom.cacheWidths_[n]))return o;try{o=e.utils.userAgent.IE||e.utils.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(s){return 8*t.textContent.length}return e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[n]=o),o},e.utils.dom.getFastTextWidth=function(t,n,o,s){return e.utils.dom.getFastTextWidthWithSizeString(t,n+"pt",o,s)},e.utils.dom.getFastTextWidthWithSizeString=function(t,n,o,s){var _,c=t.textContent;return t=c+"\n"+t.className.baseVal,e.utils.dom.cacheWidths_&&(_=e.utils.dom.cacheWidths_[t])||(e.utils.dom.canvasContext_||((_=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(_),e.utils.dom.canvasContext_=_.getContext("2d")),e.utils.dom.canvasContext_.font=o+" "+n+" "+s,_=e.utils.dom.canvasContext_.measureText(c).width,e.utils.dom.cacheWidths_&&(e.utils.dom.cacheWidths_[t]=_)),_},e.utils.dom.measureFontMetrics=function(t,n,o,s){var c=document.createElement("span");c.style.font=o+" "+n+" "+s,c.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0px",(n=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),n.appendChild(c),n.appendChild(t),document.body.appendChild(n);try{o={},n.style.alignItems="baseline",o.baseline=t.offsetTop-c.offsetTop,n.style.alignItems="flex-end",o.height=t.offsetTop-c.offsetTop}finally{document.body.removeChild(n)}return o},e.utils.math={},e.utils.math.toRadians=function(t){return t*Math.PI/180},e.utils.math.toDegrees=function(t){return 180*t/Math.PI},e.utils.math.clamp=function(t,n,o){if(o<t){var s=o;o=t,t=s}return Math.max(t,Math.min(n,o))},e.DropDownDiv=function(){},e.DropDownDiv.boundsElement_=null,e.DropDownDiv.owner_=null,e.DropDownDiv.positionToField_=null,e.DropDownDiv.ARROW_SIZE=16,e.DropDownDiv.BORDER_SIZE=1,e.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,e.DropDownDiv.PADDING_Y=16,e.DropDownDiv.ANIMATION_TIME=.25,e.DropDownDiv.animateOutTimer_=null,e.DropDownDiv.onHide_=null,e.DropDownDiv.rendererClassName_="",e.DropDownDiv.themeClassName_="",e.DropDownDiv.createDom=function(){if(!e.DropDownDiv.DIV_){var t=document.createElement("div");t.className="blocklyDropDownDiv",(e.parentContainer||document.body).appendChild(t),e.DropDownDiv.DIV_=t;var n=document.createElement("div");n.className="blocklyDropDownContent",t.appendChild(n),e.DropDownDiv.content_=n,(n=document.createElement("div")).className="blocklyDropDownArrow",t.appendChild(n),e.DropDownDiv.arrow_=n,e.DropDownDiv.DIV_.style.opacity=0,e.DropDownDiv.DIV_.style.transition="transform "+e.DropDownDiv.ANIMATION_TIME+"s, opacity "+e.DropDownDiv.ANIMATION_TIME+"s",t.addEventListener("focusin",function(){e.utils.dom.addClass(t,"blocklyFocused")}),t.addEventListener("focusout",function(){e.utils.dom.removeClass(t,"blocklyFocused")})}},e.DropDownDiv.setBoundsElement=function(t){e.DropDownDiv.boundsElement_=t},e.DropDownDiv.getContentDiv=function(){return e.DropDownDiv.content_},e.DropDownDiv.clearContent=function(){e.DropDownDiv.content_.textContent="",e.DropDownDiv.content_.style.width=""},e.DropDownDiv.setColour=function(t,n){e.DropDownDiv.DIV_.style.backgroundColor=t,e.DropDownDiv.DIV_.style.borderColor=n},e.DropDownDiv.showPositionedByBlock=function(t,n,o,s){return e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfBlock_(n),t,o,s)},e.DropDownDiv.showPositionedByField=function(t,n,o){return e.DropDownDiv.positionToField_=!0,e.DropDownDiv.showPositionedByRect_(e.DropDownDiv.getScaledBboxOfField_(t),t,n,o)},e.DropDownDiv.getScaledBboxOfBlock_=function(t){var n=t.getSvgRoot(),o=n.getBBox(),s=t.workspace.scale;return t=o.height*s,o=o.width*s,n=e.utils.style.getPageOffset(n),new e.utils.Rect(n.y,n.y+t,n.x,n.x+o)},e.DropDownDiv.getScaledBboxOfField_=function(t){return t=t.getScaledBBox(),new e.utils.Rect(t.top,t.bottom,t.left,t.right)},e.DropDownDiv.showPositionedByRect_=function(t,n,o,s){var c=t.left+(t.right-t.left)/2,_=t.bottom;t=t.top,s&&(t+=s);for(var w=(s=n.getSourceBlock()).workspace;w.options.parentWorkspace;)w=w.options.parentWorkspace;return e.DropDownDiv.setBoundsElement(w.getParentSvg().parentNode),e.DropDownDiv.show(n,s.RTL,c,_,c,t,o)},e.DropDownDiv.show=function(t,n,o,s,c,_,w){return e.DropDownDiv.owner_=t,e.DropDownDiv.onHide_=w||null,(t=e.DropDownDiv.DIV_).style.direction=n?"rtl":"ltr",n=e.getMainWorkspace(),e.DropDownDiv.rendererClassName_=n.getRenderer().getClassName(),e.DropDownDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.DropDownDiv.rendererClassName_),e.utils.dom.addClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.positionInternal_(o,s,c,_)},e.DropDownDiv.getBoundsInfo_=function(){var t=e.utils.style.getPageOffset(e.DropDownDiv.boundsElement_),n=e.utils.style.getSize(e.DropDownDiv.boundsElement_);return{left:t.x,right:t.x+n.width,top:t.y,bottom:t.y+n.height,width:n.width,height:n.height}},e.DropDownDiv.getPositionMetrics_=function(t,n,o,s){var c=e.DropDownDiv.getBoundsInfo_(),_=e.utils.style.getSize(e.DropDownDiv.DIV_);return n+_.height<c.bottom?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,_):s-_.height>c.top?e.DropDownDiv.getPositionAboveMetrics_(o,s,c,_):n+_.height<document.documentElement.clientHeight?e.DropDownDiv.getPositionBelowMetrics_(t,n,c,_):s-_.height>document.documentElement.clientTop?e.DropDownDiv.getPositionAboveMetrics_(o,s,c,_):e.DropDownDiv.getPositionTopOfPageMetrics_(t,c,_)},e.DropDownDiv.getPositionBelowMetrics_=function(t,n,o,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,s.width)).divX,initialY:n,finalX:t.divX,finalY:n+e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:-(e.DropDownDiv.ARROW_SIZE/2+e.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},e.DropDownDiv.getPositionAboveMetrics_=function(t,n,o,s){return{initialX:(t=e.DropDownDiv.getPositionX(t,o.left,o.right,s.width)).divX,initialY:n-s.height,finalX:t.divX,finalY:n-s.height-e.DropDownDiv.PADDING_Y,arrowX:t.arrowX,arrowY:s.height-2*e.DropDownDiv.BORDER_SIZE-e.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},e.DropDownDiv.getPositionTopOfPageMetrics_=function(t,n,o){return{initialX:(t=e.DropDownDiv.getPositionX(t,n.left,n.right,o.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},e.DropDownDiv.getPositionX=function(t,n,o,s){var c=t;return t=e.utils.math.clamp(n,t-s/2,o-s),{arrowX:s=e.utils.math.clamp(n=e.DropDownDiv.ARROW_HORIZONTAL_PADDING,(c-=e.DropDownDiv.ARROW_SIZE/2)-t,s-n-e.DropDownDiv.ARROW_SIZE),divX:t}},e.DropDownDiv.isVisible=function(){return!!e.DropDownDiv.owner_},e.DropDownDiv.hideIfOwner=function(t,n){return e.DropDownDiv.owner_===t&&(n?e.DropDownDiv.hideWithoutAnimation():e.DropDownDiv.hide(),!0)},e.DropDownDiv.hide=function(){var t=e.DropDownDiv.DIV_;t.style.transform="translate(0, 0)",t.style.opacity=0,e.DropDownDiv.animateOutTimer_=setTimeout(function(){e.DropDownDiv.hideWithoutAnimation()},1e3*e.DropDownDiv.ANIMATION_TIME),e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null)},e.DropDownDiv.hideWithoutAnimation=function(){if(e.DropDownDiv.isVisible()){e.DropDownDiv.animateOutTimer_&&clearTimeout(e.DropDownDiv.animateOutTimer_);var t=e.DropDownDiv.DIV_;t.style.transform="",t.style.left="",t.style.top="",t.style.opacity=0,t.style.display="none",t.style.backgroundColor="",t.style.borderColor="",e.DropDownDiv.onHide_&&(e.DropDownDiv.onHide_(),e.DropDownDiv.onHide_=null),e.DropDownDiv.clearContent(),e.DropDownDiv.owner_=null,e.DropDownDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.rendererClassName_),e.DropDownDiv.rendererClassName_=""),e.DropDownDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.DropDownDiv.themeClassName_),e.DropDownDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.DropDownDiv.positionInternal_=function(t,n,o,s){(t=e.DropDownDiv.getPositionMetrics_(t,n,o,s)).arrowVisible?(e.DropDownDiv.arrow_.style.display="",e.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",e.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):e.DropDownDiv.arrow_.style.display="none",n=Math.floor(t.initialX),o=Math.floor(t.initialY),s=Math.floor(t.finalX);var c=Math.floor(t.finalY),_=e.DropDownDiv.DIV_;return _.style.left=n+"px",_.style.top=o+"px",_.style.display="block",_.style.opacity=1,_.style.transform="translate("+(s-n)+"px,"+(c-o)+"px)",!!t.arrowAtTop},e.DropDownDiv.repositionForWindowResize=function(){if(e.DropDownDiv.owner_){var t=e.DropDownDiv.owner_,n=t.getSourceBlock();t=e.DropDownDiv.positionToField_?e.DropDownDiv.getScaledBboxOfField_(t):e.DropDownDiv.getScaledBboxOfBlock_(n),e.DropDownDiv.positionInternal_(n=t.left+(t.right-t.left)/2,t.bottom,n,t.top)}else e.DropDownDiv.hide()},e.registry={},e.registry.typeMap_=Object.create(null),e.registry.DEFAULT="default",e.registry.Type=function(t){this.name_=t},e.registry.Type.prototype.toString=function(){return this.name_},e.registry.Type.CONNECTION_CHECKER=new e.registry.Type("connectionChecker"),e.registry.Type.CURSOR=new e.registry.Type("cursor"),e.registry.Type.EVENT=new e.registry.Type("event"),e.registry.Type.FIELD=new e.registry.Type("field"),e.registry.Type.RENDERER=new e.registry.Type("renderer"),e.registry.Type.TOOLBOX=new e.registry.Type("toolbox"),e.registry.Type.THEME=new e.registry.Type("theme"),e.registry.Type.TOOLBOX_ITEM=new e.registry.Type("toolboxItem"),e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new e.registry.Type("flyoutsVerticalToolbox"),e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new e.registry.Type("flyoutsHorizontalToolbox"),e.registry.Type.METRICS_MANAGER=new e.registry.Type("metricsManager"),e.registry.Type.BLOCK_DRAGGER=new e.registry.Type("blockDragger"),e.registry.register=function(t,n,o,s){if(!(t instanceof e.registry.Type)&&"string"!=typeof t||""==String(t).trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),"string"!=typeof n||""==n.trim())throw Error('Invalid name "'+n+'". The name must be a non-empty string.');if(n=n.toLowerCase(),!o)throw Error("Can not register a null value");var c=e.registry.typeMap_[t];if(c||(c=e.registry.typeMap_[t]=Object.create(null)),e.registry.validate_(t,o),!s&&c[n])throw Error('Name "'+n+'" with type "'+t+'" already registered.');c[n]=o},e.registry.validate_=function(t,n){if(t===String(e.registry.Type.FIELD)&&"function"!=typeof n.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},e.registry.unregister=function(t,n){t=String(t).toLowerCase(),n=n.toLowerCase();var o=e.registry.typeMap_[t];o&&o[n]?delete e.registry.typeMap_[t][n]:console.warn("Unable to unregister ["+n+"]["+t+"] from the registry.")},e.registry.getItem_=function(t,n,o){t=String(t).toLowerCase(),n=n.toLowerCase();var s=e.registry.typeMap_[t];if(!s||!s[n]){if(n="Unable to find ["+n+"]["+t+"] in the registry.",o)throw Error(n+" You must require or register a "+t+" plugin.");return console.warn(n),null}return s[n]},e.registry.hasItem=function(t,n){return t=String(t).toLowerCase(),n=n.toLowerCase(),!!(t=e.registry.typeMap_[t])&&!!t[n]},e.registry.getClass=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getObject=function(t,n,o){return e.registry.getItem_(t,n,o)},e.registry.getClassFromOptions=function(t,n,o){return"function"==typeof(n=n.plugins[t.toString()]||e.registry.DEFAULT)?n:e.registry.getClass(t,n,o)},e.Events={},e.Events.group_="",e.Events.recordUndo=!0,e.Events.disabled_=0,e.Events.CREATE="create",e.Events.BLOCK_CREATE=e.Events.CREATE,e.Events.DELETE="delete",e.Events.BLOCK_DELETE=e.Events.DELETE,e.Events.CHANGE="change",e.Events.BLOCK_CHANGE=e.Events.CHANGE,e.Events.MOVE="move",e.Events.BLOCK_MOVE=e.Events.MOVE,e.Events.VAR_CREATE="var_create",e.Events.VAR_DELETE="var_delete",e.Events.VAR_RENAME="var_rename",e.Events.UI="ui",e.Events.BLOCK_DRAG="drag",e.Events.SELECTED="selected",e.Events.CLICK="click",e.Events.MARKER_MOVE="marker_move",e.Events.BUBBLE_OPEN="bubble_open",e.Events.TRASHCAN_OPEN="trashcan_open",e.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.Events.THEME_CHANGE="theme_change",e.Events.VIEWPORT_CHANGE="viewport_change",e.Events.COMMENT_CREATE="comment_create",e.Events.COMMENT_DELETE="comment_delete",e.Events.COMMENT_CHANGE="comment_change",e.Events.COMMENT_MOVE="comment_move",e.Events.FINISHED_LOADING="finished_loading",e.Events.BUMP_EVENTS=[e.Events.BLOCK_CREATE,e.Events.BLOCK_MOVE,e.Events.COMMENT_CREATE,e.Events.COMMENT_MOVE],e.Events.FIRE_QUEUE_=[],e.Events.fire=function(t){e.Events.isEnabled()&&(e.Events.FIRE_QUEUE_.length||setTimeout(e.Events.fireNow_,0),e.Events.FIRE_QUEUE_.push(t))},e.Events.fireNow_=function(){for(var o,t=e.Events.filter(e.Events.FIRE_QUEUE_,!0),n=e.Events.FIRE_QUEUE_.length=0;o=t[n];n++)if(o.workspaceId){var s=e.Workspace.getById(o.workspaceId);s&&s.fireChangeListener(o)}},e.Events.filter=function(t,n){t=t.slice(),n||t.reverse();for(var _,o=[],s=Object.create(null),c=0;_=t[c];c++)if(!_.isNull()){var w=[_.isUiEvent?e.Events.UI:_.type,_.blockId,_.workspaceId].join(" "),M=s[w],U=M?M.event:null;M?_.type==e.Events.MOVE&&M.index==c-1?(U.newParentId=_.newParentId,U.newInputName=_.newInputName,U.newCoordinate=_.newCoordinate,M.index=c):_.type==e.Events.CHANGE&&_.element==U.element&&_.name==U.name?U.newValue=_.newValue:_.type==e.Events.VIEWPORT_CHANGE?(U.viewTop=_.viewTop,U.viewLeft=_.viewLeft,U.scale=_.scale,U.oldScale=_.oldScale):(_.type!=e.Events.CLICK||U.type!=e.Events.BUBBLE_OPEN)&&(s[w]={event:_,index:c},o.push(_)):(s[w]={event:_,index:c},o.push(_))}for(t=o.filter(function(V){return!V.isNull()}),n||t.reverse(),c=1;_=t[c];c++)_.type==e.Events.CHANGE&&"mutation"==_.element&&t.unshift(t.splice(c,1)[0]);return t},e.Events.clearPendingUndo=function(){for(var n,t=0;n=e.Events.FIRE_QUEUE_[t];t++)n.recordUndo=!1},e.Events.disable=function(){e.Events.disabled_++},e.Events.enable=function(){e.Events.disabled_--},e.Events.isEnabled=function(){return 0==e.Events.disabled_},e.Events.getGroup=function(){return e.Events.group_},e.Events.setGroup=function(t){e.Events.group_="boolean"==typeof t?t?e.utils.genUid():"":t},e.Events.getDescendantIds=function(t){var n=[];t=t.getDescendants(!1);for(var s,o=0;s=t[o];o++)n[o]=s.id;return n},e.Events.fromJson=function(t,n){var o=e.Events.get(t.type);if(!o)throw Error("Unknown event type.");return(o=new o).fromJson(t),o.workspaceId=n.id,o},e.Events.get=function(t){return e.registry.getClass(e.registry.Type.EVENT,t)},e.Events.disableOrphans=function(t){if((t.type==e.Events.MOVE||t.type==e.Events.CREATE)&&t.workspaceId){var n=e.Workspace.getById(t.workspaceId),o=n.getBlockById(t.blockId);if(o){t=e.Events.recordUndo;try{e.Events.recordUndo=!1;var s=o.getParent();if(s&&s.isEnabled()){var _,c=o.getDescendants(!1);for(n=0;_=c[n];n++)_.setEnabled(!0)}else if((o.outputConnection||o.previousConnection)&&!n.isDragging())do{o.setEnabled(!1),o=o.getNextBlock()}while(o)}finally{e.Events.recordUndo=t}}}},e.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.Events.Abstract.prototype.isUiEvent=!1,e.Events.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},e.Events.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},e.Events.Abstract.prototype.isNull=function(){return!1},e.Events.Abstract.prototype.run=function(t){},e.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var t=e.Workspace.getById(this.workspaceId);if(!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t},e.utils.object={},e.utils.object.inherits=function(t,n){t.superClass_=n.prototype,t.prototype=Object.create(n.prototype),t.prototype.constructor=t},e.utils.object.mixin=function(t,n){for(var o in n)t[o]=n[o]},e.utils.object.deepMerge=function(t,n){for(var o in n)t[o]=null!=n[o]&&"object"==typeof n[o]?e.utils.object.deepMerge(t[o]||Object.create(null),n[o]):n[o];return t},e.utils.object.values=function(t){return Object.values?Object.values(t):Object.keys(t).map(function(n){return t[n]})},e.utils.xml={},e.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",e.utils.xml.document=function(){return document},e.utils.xml.createElement=function(t){return e.utils.xml.document().createElementNS(e.utils.xml.NAME_SPACE,t)},e.utils.xml.createTextNode=function(t){return e.utils.xml.document().createTextNode(t)},e.utils.xml.textToDomDocument=function(t){return(new DOMParser).parseFromString(t,"text/xml")},e.utils.xml.domToText=function(t){return(new XMLSerializer).serializeToString(t)},e.inputTypes={VALUE:e.connectionTypes.INPUT_VALUE,STATEMENT:e.connectionTypes.NEXT_STATEMENT,DUMMY:5},e.Xml={},e.Xml.workspaceToDom=function(t,n){var o=e.utils.xml.createElement("xml"),s=e.Xml.variablesToDom(e.Variables.allUsedVarModels(t));s.hasChildNodes()&&o.appendChild(s);var _,c=t.getTopComments(!0);for(s=0;_=c[s];s++)o.appendChild(_.toXmlWithXY(n));for(t=t.getTopBlocks(!0),s=0;c=t[s];s++)o.appendChild(e.Xml.blockToDomWithXY(c,n));return o},e.Xml.variablesToDom=function(t){for(var s,n=e.utils.xml.createElement("variables"),o=0;s=t[o];o++){var c=e.utils.xml.createElement("variable");c.appendChild(e.utils.xml.createTextNode(s.name)),s.type&&c.setAttribute("type",s.type),c.id=s.getId(),n.appendChild(c)}return n},e.Xml.blockToDomWithXY=function(t,n){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;var o;t.workspace.RTL&&(o=t.workspace.getWidth()),n=e.Xml.blockToDom(t,n);var s=t.getRelativeToSurfaceXY();return n.setAttribute("x",Math.round(t.workspace.RTL?o-s.x:s.x)),n.setAttribute("y",Math.round(s.y)),n},e.Xml.fieldToDom_=function(t){if(t.isSerializable()){var n=e.utils.xml.createElement("field");return n.setAttribute("name",t.name||""),t.toXml(n)}return null},e.Xml.allFieldsToDom_=function(t,n){for(var s,o=0;s=t.inputList[o];o++)for(var _,c=0;_=s.fieldRow[c];c++)(_=e.Xml.fieldToDom_(_))&&n.appendChild(_)},e.Xml.blockToDom=function(t,n){if(t.isInsertionMarker())return(t=t.getChildren(!1)[0])?e.Xml.blockToDom(t):new DocumentFragment;var o=e.utils.xml.createElement(t.isShadow()?"shadow":"block");if(o.setAttribute("type",t.type),n||o.setAttribute("id",t.id),t.mutationToDom){var s=t.mutationToDom();s&&(s.hasChildNodes()||s.hasAttributes())&&o.appendChild(s)}if(e.Xml.allFieldsToDom_(t,o),s=t.getCommentText()){var c=t.commentModel.size,_=t.commentModel.pinned,w=e.utils.xml.createElement("comment");w.appendChild(e.utils.xml.createTextNode(s)),w.setAttribute("pinned",_),w.setAttribute("h",c.height),w.setAttribute("w",c.width),o.appendChild(w)}for(t.data&&((s=e.utils.xml.createElement("data")).appendChild(e.utils.xml.createTextNode(t.data)),o.appendChild(s)),s=0;c=t.inputList[s];s++){var M;if(_=!0,c.type!=e.inputTypes.DUMMY){var U=c.connection.targetBlock();c.type==e.inputTypes.VALUE?M=e.utils.xml.createElement("value"):c.type==e.inputTypes.STATEMENT&&(M=e.utils.xml.createElement("statement")),!(w=c.connection.getShadowDom())||U&&U.isShadow()||M.appendChild(e.Xml.cloneShadow_(w,n)),U&&(w=e.Xml.blockToDom(U,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&(M.appendChild(w),_=!1),M.setAttribute("name",c.name),_||o.appendChild(M)}}return null!=t.inputsInline&&t.inputsInline!=t.inputsInlineDefault&&o.setAttribute("inline",t.inputsInline),t.isCollapsed()&&o.setAttribute("collapsed",!0),t.isEnabled()||o.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||o.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||o.setAttribute("movable",!1),t.isEditable()||o.setAttribute("editable",!1),(s=t.getNextBlock())&&(w=e.Xml.blockToDom(s,n)).nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&((M=e.utils.xml.createElement("next")).appendChild(w),o.appendChild(M)),!(w=t.nextConnection&&t.nextConnection.getShadowDom())||s&&s.isShadow()||M.appendChild(e.Xml.cloneShadow_(w,n)),o},e.Xml.cloneShadow_=function(t,n){for(var s,o=t=t.cloneNode(!0);o;)if(n&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)s=o,o=o.parentNode,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&o.firstChild!=s&&e.utils.dom.removeNode(s);o&&(s=o,o=o.nextSibling,s.nodeType==e.utils.dom.NodeType.TEXT_NODE&&""==s.data.trim()&&e.utils.dom.removeNode(s))}return t},e.Xml.domToText=function(t){return e.utils.xml.domToText(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},e.Xml.domToPrettyText=function(t){t=e.Xml.domToText(t).split("<");for(var n="",o=1;o<t.length;o++){var s=t[o];"/"==s[0]&&(n=n.substring(2)),t[o]=n+"<"+s,"/"!=s[0]&&"/>"!=s.slice(-2)&&(n+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},e.Xml.textToDom=function(t){var n=e.utils.xml.textToDomDocument(t);if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return n.documentElement},e.Xml.clearWorkspaceAndLoadFromXml=function(t,n){return n.setResizesEnabled(!1),n.clear(),t=e.Xml.domToWorkspace(t,n),n.setResizesEnabled(!0),t},e.Xml.domToWorkspace=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var s;n.RTL&&(s=n.getWidth()),o=[],e.utils.dom.startTextWidthCache();var c=e.Events.getGroup();c||e.Events.setGroup(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);var _=!0;try{for(var M,w=0;M=t.childNodes[w];w++){var U=M.nodeName.toLowerCase(),V=M;if("block"==U||"shadow"==U&&!e.Events.recordUndo){var H=e.Xml.domToBlock(V,n);o.push(H.id);var $=V.hasAttribute("x")?parseInt(V.getAttribute("x"),10):10,pt=V.hasAttribute("y")?parseInt(V.getAttribute("y"),10):10;isNaN($)||isNaN(pt)||H.moveBy(n.RTL?s-$:$,pt),_=!1}else{if("shadow"==U)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==U)n.rendered?e.WorkspaceCommentSvg?e.WorkspaceCommentSvg.fromXml(V,n,s):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):e.WorkspaceComment?e.WorkspaceComment.fromXml(V,n):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==U){if(!_)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");e.Xml.domToVariables(V,n),_=!1}}}}finally{c||e.Events.setGroup(!1),e.utils.dom.stopTextWidthCache()}return n.setResizesEnabled&&n.setResizesEnabled(!0),e.Events.fire(new(e.Events.get(e.Events.FINISHED_LOADING))(n)),o},e.Xml.appendDomToWorkspace=function(t,n){var o;if(Object.prototype.hasOwnProperty.call(n,"scale")&&(o=n.getBlocksBoundingBox()),t=e.Xml.domToWorkspace(t,n),o&&o.top!=o.bottom){var s=o.bottom,c=n.RTL?o.right:o.left,_=1/0,w=-1/0,M=1/0;for(o=0;o<t.length;o++){var U=n.getBlockById(t[o]).getRelativeToSurfaceXY();U.y<M&&(M=U.y),U.x<_&&(_=U.x),U.x>w&&(w=U.x)}for(s=s-M+10,c=n.RTL?c-w:c-_,o=0;o<t.length;o++)n.getBlockById(t[o]).moveBy(c,s)}return t},e.Xml.domToBlock=function(t,n){if(t instanceof e.Workspace){var o=t;t=n,n=o,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}e.Events.disable(),o=n.getAllVariables();try{var s=e.Xml.domToBlockHeadless_(t,n),c=s.getDescendants(!1);if(n.rendered){s.setConnectionTracking(!1);for(var _=c.length-1;0<=_;_--)c[_].initSvg();for(_=c.length-1;0<=_;_--)c[_].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),n.resizeContents()}else for(_=c.length-1;0<=_;_--)c[_].initModel()}finally{e.Events.enable()}if(e.Events.isEnabled()){for(t=e.Variables.getAddedVariables(n,o),_=0;_<t.length;_++)n=t[_],e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(n));e.Events.fire(new(e.Events.get(e.Events.CREATE))(s))}return s},e.Xml.domToVariables=function(t,n){for(var s,o=0;s=t.childNodes[o];o++)if(s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE){var c=s.getAttribute("type"),_=s.getAttribute("id");n.createVariable(s.textContent,c,_)}},e.Xml.mapSupportedXmlTags_=function(t){for(var s,n={mutation:[],comment:[],data:[],field:[],input:[],next:[]},o=0;s=t.childNodes[o];o++)if(s.nodeType!=e.utils.dom.NodeType.TEXT_NODE)switch(s.nodeName.toLowerCase()){case"mutation":n.mutation.push(s);break;case"comment":if(!e.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(s);break;case"data":n.data.push(s);break;case"title":case"field":n.field.push(s);break;case"value":case"statement":n.input.push(s);break;case"next":n.next.push(s);break;default:console.warn("Ignoring unknown tag: "+s.nodeName)}return n},e.Xml.applyMutationTagNodes_=function(t,n){for(var c,o=!1,s=0;c=t[s];s++)n.domToMutation&&(n.domToMutation(c),n.initSvg&&(o=!0));return o},e.Xml.applyCommentTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++){var c=s.textContent,_="true"==s.getAttribute("pinned"),w=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),n.setCommentText(c),n.commentModel.pinned=_,isNaN(w)||isNaN(s)||(n.commentModel.size=new e.utils.Size(w,s)),_&&n.getCommentIcon&&!n.isInFlyout&&setTimeout(function(){n.getCommentIcon().setVisible(!0)},1)}},e.Xml.applyDataTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++)n.data=s.textContent},e.Xml.applyFieldTagNodes_=function(t,n){for(var s,o=0;s=t[o];o++){var c=s.getAttribute("name");e.Xml.domToField_(n,c,s)}},e.Xml.findChildBlocks_=function(t){for(var s,n={childBlockElement:null,childShadowElement:null},o=0;s=t.childNodes[o];o++)s.nodeType==e.utils.dom.NodeType.ELEMENT_NODE&&("block"==s.nodeName.toLowerCase()?n.childBlockElement=s:"shadow"==s.nodeName.toLowerCase()&&(n.childShadowElement=s));return n},e.Xml.applyInputTagNodes_=function(t,n,o,s){for(var _,c=0;_=t[c];c++){var w=_.getAttribute("name"),M=o.getInput(w);if(!M){console.warn("Ignoring non-existent input "+w+" in block "+s);break}if((_=e.Xml.findChildBlocks_(_)).childBlockElement){if(!M.connection)throw TypeError("Input connection does not exist.");e.Xml.domToBlockHeadless_(_.childBlockElement,n,M.connection,!1)}_.childShadowElement&&M.connection.setShadowDom(_.childShadowElement)}},e.Xml.applyNextTagNodes_=function(t,n,o){for(var c,s=0;c=t[s];s++){if((c=e.Xml.findChildBlocks_(c)).childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");e.Xml.domToBlockHeadless_(c.childBlockElement,n,o.nextConnection,!0)}c.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(c.childShadowElement)}},e.Xml.domToBlockHeadless_=function(t,n,o,s){var c=t.getAttribute("type");if(!c)throw TypeError("Block type unspecified: "+t.outerHTML);var _=t.getAttribute("id");_=n.newBlock(c,_);var w=e.Xml.mapSupportedXmlTags_(t),M=e.Xml.applyMutationTagNodes_(w.mutation,_);if(e.Xml.applyCommentTagNodes_(w.comment,_),e.Xml.applyDataTagNodes_(w.data,_),o)if(s){if(!_.previousConnection)throw TypeError("Next block does not have previous statement.");o.connect(_.previousConnection)}else if(_.outputConnection)o.connect(_.outputConnection);else{if(!_.previousConnection)throw TypeError("Child block does not have output or previous statement.");o.connect(_.previousConnection)}if(e.Xml.applyFieldTagNodes_(w.field,_),e.Xml.applyInputTagNodes_(w.input,n,_,c),e.Xml.applyNextTagNodes_(w.next,n,_),M&&_.initSvg(),(n=t.getAttribute("inline"))&&_.setInputsInline("true"==n),(n=t.getAttribute("disabled"))&&_.setEnabled("true"!=n&&"disabled"!=n),(n=t.getAttribute("deletable"))&&_.setDeletable("true"==n),(n=t.getAttribute("movable"))&&_.setMovable("true"==n),(n=t.getAttribute("editable"))&&_.setEditable("true"==n),(n=t.getAttribute("collapsed"))&&_.setCollapsed("true"==n),"shadow"==t.nodeName.toLowerCase()){for(t=_.getChildren(!1),n=0;o=t[n];n++)if(!o.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(_.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");_.setShadow(!0)}return _},e.Xml.domToField_=function(t,n,o){var s=t.getField(n);s?s.fromXml(o):console.warn("Ignoring non-existent field "+n+" in block "+t.type)},e.Xml.deleteNext=function(t){for(var o,n=0;o=t.childNodes[n];n++)if("next"==o.nodeName.toLowerCase()){t.removeChild(o);break}},e.Events.BlockBase=function(t){e.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.BlockBase,e.Events.Abstract),e.Events.BlockBase.prototype.toJson=function(){var t=e.Events.BlockBase.superClass_.toJson.call(this);return t.blockId=this.blockId,t},e.Events.BlockBase.prototype.fromJson=function(t){e.Events.BlockBase.superClass_.fromJson.call(this,t),this.blockId=t.blockId},e.Events.BlockChange=function(t,n,o,s,c){e.Events.Change.superClass_.constructor.call(this,t),t&&(this.element=void 0===n?"":n,this.name=void 0===o?"":o,this.oldValue=void 0===s?"":s,this.newValue=void 0===c?"":c)},e.utils.object.inherits(e.Events.BlockChange,e.Events.BlockBase),e.Events.Change=e.Events.BlockChange,e.Events.BlockChange.prototype.type=e.Events.CHANGE,e.Events.BlockChange.prototype.toJson=function(){var t=e.Events.BlockChange.superClass_.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},e.Events.BlockChange.prototype.fromJson=function(t){e.Events.BlockChange.superClass_.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},e.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},e.Events.BlockChange.prototype.run=function(t){var n=this.getEventWorkspace_().getBlockById(this.blockId);if(n)switch(n.mutator&&n.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(t||null);break;case"collapsed":n.setCollapsed(!!t);break;case"disabled":n.setEnabled(!t);break;case"inline":n.setInputsInline(!!t);break;case"mutation":var o="";if(n.mutationToDom&&(o=(o=n.mutationToDom())&&e.Xml.domToText(o)),n.domToMutation){var s=e.Xml.textToDom(t||"<mutation/>");n.domToMutation(s)}e.Events.fire(new e.Events.BlockChange(n,"mutation",null,o,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},e.Events.Create=function(t){e.Events.Create.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t))},e.utils.object.inherits(e.Events.Create,e.Events.BlockBase),e.Events.BlockCreate=e.Events.Create,e.Events.Create.prototype.type=e.Events.CREATE,e.Events.Create.prototype.toJson=function(){var t=e.Events.Create.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Create.prototype.fromJson=function(t){e.Events.Create.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Create.prototype.run=function(t){var n=this.getEventWorkspace_();if(t)(t=e.utils.xml.createElement("xml")).appendChild(this.xml),e.Xml.domToWorkspace(t,n);else{t=0;for(var o;o=this.ids[t];t++){var s=n.getBlockById(o);s?s.dispose(!1):o==this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},e.Events.Delete=function(t){if(e.Events.Delete.superClass_.constructor.call(this,t),t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=t.workspace.rendered?e.Xml.blockToDomWithXY(t):e.Xml.blockToDom(t),this.ids=e.Events.getDescendantIds(t)}},e.utils.object.inherits(e.Events.Delete,e.Events.BlockBase),e.Events.BlockDelete=e.Events.Delete,e.Events.Delete.prototype.type=e.Events.DELETE,e.Events.Delete.prototype.toJson=function(){var t=e.Events.Delete.superClass_.toJson.call(this);return t.oldXml=e.Xml.domToText(this.oldXml),t.ids=this.ids,this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Delete.prototype.fromJson=function(t){e.Events.Delete.superClass_.fromJson.call(this,t),this.oldXml=e.Xml.textToDom(t.oldXml),this.ids=t.ids,void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Delete.prototype.run=function(t){var n=this.getEventWorkspace_();if(t){t=0;for(var o;o=this.ids[t];t++){var s=n.getBlockById(o);s?s.dispose(!1):o==this.blockId&&console.warn("Can't delete non-existent block: "+o)}}else(t=e.utils.xml.createElement("xml")).appendChild(this.oldXml),e.Xml.domToWorkspace(t,n)},e.Events.Move=function(t){e.Events.Move.superClass_.constructor.call(this,t),t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)},e.utils.object.inherits(e.Events.Move,e.Events.BlockBase),e.Events.BlockMove=e.Events.Move,e.Events.Move.prototype.type=e.Events.MOVE,e.Events.Move.prototype.toJson=function(){var t=e.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},e.Events.Move.prototype.fromJson=function(t){if(e.Events.Move.superClass_.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var n=t.newCoordinate.split(",");this.newCoordinate=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}void 0!==t.recordUndo&&(this.recordUndo=t.recordUndo)},e.Events.Move.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},e.Events.Move.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),n={},o=t.getParent();return o?(n.parentId=o.id,(t=o.getInputWithBlock(t))&&(n.inputName=t.name)):n.coordinate=t.getRelativeToSurfaceXY(),n},e.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&e.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},e.Events.Move.prototype.run=function(t){var n=this.getEventWorkspace_(),o=n.getBlockById(this.blockId);if(o){var s=t?this.newParentId:this.oldParentId,c=t?this.newInputName:this.oldInputName,_=t?this.newCoordinate:this.oldCoordinate;if(t=null,s&&!(t=n.getBlockById(s)))return void console.warn("Can't connect to non-existent block: "+s);if(o.getParent()&&o.unplug(),_)c=o.getRelativeToSurfaceXY(),o.moveBy(_.x-c.x,_.y-c.y);else{if(n=(o=o.outputConnection||o.previousConnection).type,c){if(t=t.getInput(c))var w=t.connection}else n==e.connectionTypes.PREVIOUS_STATEMENT&&(w=t.nextConnection);w?o.connect(w):console.warn("Can't connect to non-existent input: "+c)}}else console.warn("Can't move non-existent block: "+this.blockId)},e.registry.register(e.registry.Type.EVENT,e.Events.CREATE,e.Events.Create),e.registry.register(e.registry.Type.EVENT,e.Events.DELETE,e.Events.Delete),e.registry.register(e.registry.Type.EVENT,e.Events.CHANGE,e.Events.BlockChange),e.registry.register(e.registry.Type.EVENT,e.Events.MOVE,e.Events.Move),e.Events.FinishedLoading=function(t){this.isBlank=void 0===t,this.workspaceId=t?t.id:"",this.group=e.Events.getGroup(),this.recordUndo=!1},e.utils.object.inherits(e.Events.FinishedLoading,e.Events.Abstract),e.Events.FinishedLoading.prototype.type=e.Events.FINISHED_LOADING,e.Events.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},e.Events.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},e.registry.register(e.registry.Type.EVENT,e.Events.FINISHED_LOADING,e.Events.FinishedLoading),e.Events.UiBase=function(t){e.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===t,this.workspaceId=t||"",this.recordUndo=!1},e.utils.object.inherits(e.Events.UiBase,e.Events.Abstract),e.Events.UiBase.prototype.isUiEvent=!0,e.Events.Ui=function(t,n,o,s){e.Events.Ui.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=void 0===n?"":n,this.oldValue=void 0===o?"":o,this.newValue=void 0===s?"":s},e.utils.object.inherits(e.Events.Ui,e.Events.UiBase),e.Events.Ui.prototype.type=e.Events.UI,e.Events.Ui.prototype.toJson=function(){var t=e.Events.Ui.superClass_.toJson.call(this);return t.element=this.element,void 0!==this.newValue&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},e.Events.Ui.prototype.fromJson=function(t){e.Events.Ui.superClass_.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.UI,e.Events.Ui),e.Events.VarBase=function(t){e.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===t)?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id},e.utils.object.inherits(e.Events.VarBase,e.Events.Abstract),e.Events.VarBase.prototype.toJson=function(){var t=e.Events.VarBase.superClass_.toJson.call(this);return t.varId=this.varId,t},e.Events.VarBase.prototype.fromJson=function(t){e.Events.VarBase.superClass_.toJson.call(this),this.varId=t.varId},e.Events.VarCreate=function(t){e.Events.VarCreate.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarCreate,e.Events.VarBase),e.Events.VarCreate.prototype.type=e.Events.VAR_CREATE,e.Events.VarCreate.prototype.toJson=function(){var t=e.Events.VarCreate.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarCreate.prototype.fromJson=function(t){e.Events.VarCreate.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarCreate.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.createVariable(this.varName,this.varType,this.varId):n.deleteVariableById(this.varId)},e.Events.VarDelete=function(t){e.Events.VarDelete.superClass_.constructor.call(this,t),t&&(this.varType=t.type,this.varName=t.name)},e.utils.object.inherits(e.Events.VarDelete,e.Events.VarBase),e.Events.VarDelete.prototype.type=e.Events.VAR_DELETE,e.Events.VarDelete.prototype.toJson=function(){var t=e.Events.VarDelete.superClass_.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},e.Events.VarDelete.prototype.fromJson=function(t){e.Events.VarDelete.superClass_.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},e.Events.VarDelete.prototype.run=function(t){var n=this.getEventWorkspace_();t?n.deleteVariableById(this.varId):n.createVariable(this.varName,this.varType,this.varId)},e.Events.VarRename=function(t,n){e.Events.VarRename.superClass_.constructor.call(this,t),t&&(this.oldName=t.name,this.newName=void 0===n?"":n)},e.utils.object.inherits(e.Events.VarRename,e.Events.VarBase),e.Events.VarRename.prototype.type=e.Events.VAR_RENAME,e.Events.VarRename.prototype.toJson=function(){var t=e.Events.VarRename.superClass_.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},e.Events.VarRename.prototype.fromJson=function(t){e.Events.VarRename.superClass_.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},e.Events.VarRename.prototype.run=function(t){this.getEventWorkspace_().renameVariableById(this.varId,t?this.newName:this.oldName)},e.registry.register(e.registry.Type.EVENT,e.Events.VAR_CREATE,e.Events.VarCreate),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_DELETE,e.Events.VarDelete),e.registry.register(e.registry.Type.EVENT,e.Events.VAR_RENAME,e.Events.VarRename),e.BlockDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.BlockDragSurfaceSvg.prototype.SVG_=null,e.BlockDragSurfaceSvg.prototype.dragGroup_=null,e.BlockDragSurfaceSvg.prototype.container_=null,e.BlockDragSurfaceSvg.prototype.scale_=1,e.BlockDragSurfaceSvg.prototype.surfaceXY_=null,e.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new e.utils.Coordinate(0,0),e.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.SVG_))},e.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new e.utils.Coordinate(0,0)},e.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,n,o){this.scale_=o,t=t.toFixed(0),n=n.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(n,10),this.dragGroup_.setAttribute("transform","translate("+t+","+n+") scale("+o+")")},e.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,n=this.surfaceXY_.y;t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.BlockDragSurfaceSvg.prototype.translateBy=function(t,n){this.surfaceXY_=new e.utils.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+n),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.translateSurface=function(t,n){this.surfaceXY_=new e.utils.Coordinate(t*this.scale_,n*this.scale_),this.translateSurfaceInternal_()},e.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=e.utils.getRelativeXY(this.SVG_);return new e.utils.Coordinate(t.x/this.scale_,t.y/this.scale_)},e.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},e.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},e.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},e.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},e.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){if(t?t.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},e.Css={},e.Css.injected_=!1,e.Css.register=function(t){if(e.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(e.Css.CONTENT,t),t.length=0},e.Css.inject=function(t,n){if(!e.Css.injected_){e.Css.injected_=!0;var o=e.Css.CONTENT.join("\n");e.Css.CONTENT.length=0,t&&(t=n.replace(/[\\/]$/,""),o=o.replace(/<<<PATH>>>/g,t),(t=document.createElement("style")).id="blockly-common-style",o=document.createTextNode(o),t.appendChild(o),document.head.insertBefore(t,document.head.firstChild))}},e.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],e.Grid=function(t,n){this.gridPattern_=t,this.spacing_=n.spacing,this.length_=n.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=n.snap},e.Grid.prototype.scale_=1,e.Grid.prototype.dispose=function(){this.gridPattern_=null},e.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},e.Grid.prototype.getSpacing=function(){return this.spacing_},e.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},e.Grid.prototype.update=function(t){this.scale_=t;var n=this.spacing_*t||100;this.gridPattern_.setAttribute("width",n),this.gridPattern_.setAttribute("height",n);var o=(n=Math.floor(this.spacing_/2)+.5)-this.length_/2,s=n+this.length_/2;this.setLineAttributes_(this.line1_,t,o*=t,s*=t,n*=t,n),this.setLineAttributes_(this.line2_,t,n,n,o,s)},e.Grid.prototype.setLineAttributes_=function(t,n,o,s,c,_){t&&(t.setAttribute("stroke-width",n),t.setAttribute("x1",o),t.setAttribute("y1",c),t.setAttribute("x2",s),t.setAttribute("y2",_))},e.Grid.prototype.moveTo=function(t,n){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",n),(e.utils.userAgent.IE||e.utils.userAgent.EDGE)&&this.update(this.scale_)},e.Grid.createDom=function(t,n,o){return t=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},o),0<n.length&&0<n.spacing?(e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t),1<n.length&&e.utils.dom.createSvgElement(e.utils.Svg.LINE,{stroke:n.colour},t)):e.utils.dom.createSvgElement(e.utils.Svg.LINE,{},t),t},e.Theme=function(t,n,o,s){this.name=t,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=s||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,e.registry.register(e.registry.Type.THEME,t,this)},e.Theme.prototype.getClassName=function(){return this.name+"-theme"},e.Theme.prototype.setBlockStyle=function(t,n){this.blockStyles[t]=n},e.Theme.prototype.setCategoryStyle=function(t,n){this.categoryStyles[t]=n},e.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&"string"==typeof t&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},e.Theme.prototype.setComponentStyle=function(t,n){this.componentStyles[t]=n},e.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},e.Theme.prototype.setStartHats=function(t){this.startHats=t},e.Theme.defineTheme=function(t,n){var o=new e.Theme(t),s=n.base;return s&&("string"==typeof s&&(s=e.registry.getObject(e.registry.Type.THEME,s)),s instanceof e.Theme&&(e.utils.object.deepMerge(o,s),o.name=t)),e.utils.object.deepMerge(o.blockStyles,n.blockStyles),e.utils.object.deepMerge(o.categoryStyles,n.categoryStyles),e.utils.object.deepMerge(o.componentStyles,n.componentStyles),e.utils.object.deepMerge(o.fontStyle,n.fontStyle),null!=n.startHats&&(o.startHats=n.startHats),o},e.Themes={},e.Themes.Classic={},e.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},e.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},e.Themes.Classic=new e.Theme("classic",e.Themes.Classic.defaultBlockStyles,e.Themes.Classic.categoryStyles),e.utils.IdGenerator={},e.utils.IdGenerator.nextId_=0,e.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(e.utils.IdGenerator.nextId_++).toString(36)},e.utils.Metrics=function(){},e.utils.toolbox={},e.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",e.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",e.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},e.utils.toolbox.convertToolboxDefToJson=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=e.utils.toolbox.parseToolboxTree(t),t=e.utils.toolbox.convertToToolboxJson_(t)),e.utils.toolbox.validateToolbox_(t),t):null},e.utils.toolbox.validateToolbox_=function(t){var n=t.kind;if(t=t.contents,n&&n!=e.utils.toolbox.FLYOUT_TOOLBOX_KIND&&n!=e.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+n+". Please supply either "+e.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+e.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!t)throw Error("Toolbox must have a contents attribute.")},e.utils.toolbox.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:e.utils.toolbox.xmlToJsonArray_(t):[]},e.utils.toolbox.hasCategories=function(t){if(!t)return!1;var n=t.kind;return n?n==e.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!t.contents.filter(function(o){return"CATEGORY"==o.kind.toUpperCase()}).length},e.utils.toolbox.isCategoryCollapsible=function(t){return!(!t||!t.contents||!t.contents.filter(function(n){return"CATEGORY"==n.kind.toUpperCase()}).length)},e.utils.toolbox.convertToToolboxJson_=function(t){var n={contents:e.utils.toolbox.xmlToJsonArray_(t)};return t instanceof Node&&e.utils.toolbox.addAttributes_(t,n),n},e.utils.toolbox.xmlToJsonArray_=function(t){var s,n=[],o=t.childNodes;for(o||(o=t),t=0;s=o[t];t++)if(s.tagName){var c={},_=s.tagName.toUpperCase();c.kind=_,"BLOCK"==_?c.blockxml=s:s.childNodes&&0<s.childNodes.length&&(c.contents=e.utils.toolbox.xmlToJsonArray_(s)),e.utils.toolbox.addAttributes_(s,c),n.push(c)}return n},e.utils.toolbox.addAttributes_=function(t,n){for(var o=0;o<t.attributes.length;o++){var s=t.attributes[o];-1<s.nodeName.indexOf("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[s.nodeName.replace("css-","")]=s.value):n[s.nodeName]=s.value}},e.utils.toolbox.parseToolboxTree=function(t){if(t){if("string"!=typeof t&&(e.utils.userAgent.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),"string"==typeof t&&"xml"!=(t=e.Xml.textToDom(t)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},e.Options=function(t){var n=!!t.readOnly;if(n)var o=null,s=!1,c=!1,_=!1,w=!1,M=!1,U=!1;else{o=e.utils.toolbox.convertToolboxDefToJson(t.toolbox),s=e.utils.toolbox.hasCategories(o),void 0===(c=t.trashcan)&&(c=s);var V=t.maxTrashcanContents;c?void 0===V&&(V=32):V=0,void 0===(_=t.collapse)&&(_=s),void 0===(w=t.comments)&&(w=s),void 0===(M=t.disable)&&(M=s),void 0===(U=t.sounds)&&(U=!0)}var H=!!t.rtl,$=t.horizontalLayout;void 0===$&&($=!1);var pt=t.toolboxPosition;pt="end"!==pt,pt=$?pt?e.utils.toolbox.Position.TOP:e.utils.toolbox.Position.BOTTOM:pt==H?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT;var nt=t.css;void 0===nt&&(nt=!0);var st="https://blockly-demo.appspot.com/static/media/";t.media?st=t.media:t.path&&(st=t.path+"media/");var Ct=void 0===t.oneBasedIndex||!!t.oneBasedIndex,xt=t.renderer||"geras",yt=t.plugins||{};this.RTL=H,this.oneBasedIndex=Ct,this.collapse=_,this.comments=w,this.disable=M,this.readOnly=n,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=st,this.hasCategories=s,this.moveOptions=e.Options.parseMoveOptions_(t,s),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=c,this.maxTrashcanContents=V,this.hasSounds=U,this.hasCss=nt,this.horizontalLayout=$,this.languageTree=o,this.gridOptions=e.Options.parseGridOptions_(t),this.zoomOptions=e.Options.parseZoomOptions_(t),this.toolboxPosition=pt,this.theme=e.Options.parseThemeOptions_(t),this.renderer=xt,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=yt},e.BlocklyOptions=function(){},e.Options.parseMoveOptions_=function(t,n){var o=t.move||{},s={};return void 0===o.scrollbars&&void 0===t.scrollbars?s.scrollbars=n:"object"==typeof o.scrollbars?(s.scrollbars={},s.scrollbars.horizontal=!!o.scrollbars.horizontal,s.scrollbars.vertical=!!o.scrollbars.vertical,s.scrollbars.horizontal&&s.scrollbars.vertical?s.scrollbars=!0:s.scrollbars.horizontal||s.scrollbars.vertical||(s.scrollbars=!1)):s.scrollbars=!!o.scrollbars||!!t.scrollbars,s.wheel=s.scrollbars&&void 0!==o.wheel?!!o.wheel:"object"==typeof s.scrollbars,s.drag=!(!s.scrollbars||void 0!==o.drag&&!o.drag),s},e.Options.parseZoomOptions_=function(t){var n={};return n.controls=void 0!==(t=t.zoom||{}).controls&&!!t.controls,n.wheel=void 0!==t.wheel&&!!t.wheel,n.startScale=void 0===t.startScale?1:Number(t.startScale),n.maxScale=void 0===t.maxScale?3:Number(t.maxScale),n.minScale=void 0===t.minScale?.3:Number(t.minScale),n.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),n.pinch=void 0===t.pinch?n.wheel||n.controls:!!t.pinch,n},e.Options.parseGridOptions_=function(t){t=t.grid||{};var n={};return n.spacing=Number(t.spacing)||0,n.colour=t.colour||"#888",n.length=void 0===t.length?1:Number(t.length),n.snap=0<n.spacing&&!!t.snap,n},e.Options.parseThemeOptions_=function(t){return"string"==typeof(t=t.theme||e.Themes.Classic)?e.registry.getObject(e.registry.Type.THEME,t):t instanceof e.Theme?t:e.Theme.defineTheme(t.name||"builtin"+e.utils.IdGenerator.getNextUniqueId(),t)},e.Options.parseToolboxTree=function(t){return e.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),e.utils.toolbox.parseToolboxTree(t)},e.ScrollbarPair=function(t,n,o,s,c){this.workspace_=t,o=void 0===o||o;var _=(n=void 0===n||n)&&o;n&&(this.hScroll=new e.Scrollbar(t,!0,_,s,c)),o&&(this.vScroll=new e.Scrollbar(t,!1,_,s,c)),_&&(this.corner_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:e.Scrollbar.scrollbarThickness,width:e.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),e.utils.dom.insertAfter(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null},e.ScrollbarPair.prototype.dispose=function(){e.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},e.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var n=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==t.scrollWidth&&this.oldHostMetrics_.viewLeft==t.viewLeft&&this.oldHostMetrics_.scrollLeft==t.scrollLeft||(n=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==t.scrollHeight&&this.oldHostMetrics_.viewTop==t.viewTop&&this.oldHostMetrics_.scrollTop==t.scrollTop||(o=!0)):o=n=!0,n||o){try{e.Events.disable(),this.hScroll&&n&&this.hScroll.resize(t),this.vScroll&&o&&this.vScroll.resize(t)}finally{e.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==t.viewWidth&&this.oldHostMetrics_.absoluteLeft==t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==t.viewHeight&&this.oldHostMetrics_.absoluteTop==t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},e.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},e.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},e.ScrollbarPair.prototype.setOrigin=function(t,n){this.hScroll&&this.hScroll.setOrigin(t,n),this.vScroll&&this.vScroll.setOrigin(t,n)},e.ScrollbarPair.prototype.set=function(t,n,o){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(n,!1),(o||void 0===o)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},e.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},e.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},e.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},e.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},e.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},e.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)},e.Scrollbar=function(t,n,o,s,c){this.workspace_=t,this.pair_=o||!1,this.horizontal_=n,this.margin_=void 0!==c?c:e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(s),this.position=new e.utils.Coordinate(0,0),t=e.Scrollbar.scrollbarThickness,n?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=e.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},e.Scrollbar.prototype.origin_=new e.utils.Coordinate(0,0),e.Scrollbar.prototype.startDragMouse_=0,e.Scrollbar.prototype.scrollbarLength_=0,e.Scrollbar.prototype.handleLength_=0,e.Scrollbar.prototype.handlePosition_=0,e.Scrollbar.prototype.isVisible_=!0,e.Scrollbar.prototype.containerVisible_=!0,e.Scrollbar.scrollbarThickness=15,e.Touch.TOUCH_ENABLED&&(e.Scrollbar.scrollbarThickness=25),e.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,e.Scrollbar.metricsAreEquivalent_=function(t,n){return t.viewWidth==n.viewWidth&&t.viewHeight==n.viewHeight&&t.viewLeft==n.viewLeft&&t.viewTop==n.viewTop&&t.absoluteTop==n.absoluteTop&&t.absoluteLeft==n.absoluteLeft&&t.scrollWidth==n.scrollWidth&&t.scrollHeight==n.scrollHeight&&t.scrollLeft==n.scrollLeft&&t.scrollTop==n.scrollTop},e.Scrollbar.prototype.dispose=function(){this.cleanUp_(),e.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,e.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,e.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},e.Scrollbar.prototype.constrainHandleLength_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},e.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},e.Scrollbar.prototype.constrainHandlePosition_=function(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},e.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},e.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},e.Scrollbar.prototype.setPosition=function(t,n){this.position.x=t,this.position.y=n,e.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},e.Scrollbar.prototype.resize=function(t){!t&&!(t=this.workspace_.getMetrics())||this.oldHostMetrics_&&e.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},e.Scrollbar.prototype.requiresViewResize_=function(t){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop},e.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeViewHorizontal=function(t){var n=t.viewWidth-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),n=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(n+=e.Scrollbar.scrollbarThickness),this.setPosition(n,t.absoluteTop+t.viewHeight-e.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},e.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewWidth/t.scrollWidth;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewLeft-t.scrollLeft)/(n=t.scrollWidth-t.viewWidth)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeViewVertical=function(t){var n=t.viewHeight-2*this.margin_;this.pair_&&(n-=e.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,n)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-e.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},e.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var n=this.scrollbarLength_*t.viewHeight/t.scrollHeight;n=this.constrainHandleLength_(n),this.setHandleLength_(n);var o=this.scrollbarLength_-this.handleLength_;t=this.constrainHandlePosition_(t=(t.viewTop-t.scrollTop)/(n=t.scrollHeight-t.viewHeight)*o),this.setHandlePosition(t),this.ratio=o/n}},e.Scrollbar.prototype.createDom_=function(t){var n="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(n+=" "+t),this.outerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{class:n},null),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((e.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),e.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},e.Scrollbar.prototype.isVisible=function(){return this.isVisible_},e.Scrollbar.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.setVisible=function(t){var n=t!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,n&&this.updateDisplay_()},e.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},e.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),e.Touch.clearTouchIdentifier(),this.cleanUp_(),e.utils.isRightButton(t))t.stopPropagation();else{var n=e.utils.mouseToSvg(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());n=this.horizontal_?n.x:n.y;var o=e.utils.getInjectionDivXY_(this.svgHandle_),s=this.handlePosition_,c=.95*this.handleLength_;n<=(o=this.horizontal_?o.x:o.y)?s-=c:n>=o+this.handleLength_&&(s+=c),this.setHandlePosition(this.constrainHandlePosition_(s)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},e.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),e.utils.isRightButton(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,e.Scrollbar.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),e.Scrollbar.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},e.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},e.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),e.Touch.clearTouchIdentifier(),this.cleanUp_()},e.Scrollbar.prototype.cleanUp_=function(){e.hideChaff(!0),e.Scrollbar.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseUpWrapper_),e.Scrollbar.onMouseUpWrapper_=null),e.Scrollbar.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Scrollbar.onMouseMoveWrapper_),e.Scrollbar.onMouseMoveWrapper_=null)},e.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},e.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),n={};this.horizontal_?n.x=t:n.y=t,this.workspace_.setMetrics(n)},e.Scrollbar.prototype.set=function(t,n){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(n||void 0===n)&&this.updateMetrics_()},e.Scrollbar.prototype.setOrigin=function(t,n){this.origin_=new e.utils.Coordinate(t,n)},e.Tooltip={},e.Tooltip.visible=!1,e.Tooltip.blocked_=!1,e.Tooltip.LIMIT=50,e.Tooltip.mouseOutPid_=0,e.Tooltip.showPid_=0,e.Tooltip.lastX_=0,e.Tooltip.lastY_=0,e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.OFFSET_X=0,e.Tooltip.OFFSET_Y=10,e.Tooltip.RADIUS_OK=10,e.Tooltip.HOVER_MS=750,e.Tooltip.MARGINS=5,e.Tooltip.DIV=null,e.Tooltip.getTooltipOfObject=function(t){if(t=e.Tooltip.getTargetObject_(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},e.Tooltip.getTargetObject_=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},e.Tooltip.createDom=function(){e.Tooltip.DIV||(e.Tooltip.DIV=document.createElement("div"),e.Tooltip.DIV.className="blocklyTooltipDiv",(e.parentContainer||document.body).appendChild(e.Tooltip.DIV))},e.Tooltip.bindMouseEvents=function(t){t.mouseOverWrapper_=e.browserEvents.bind(t,"mouseover",null,e.Tooltip.onMouseOver_),t.mouseOutWrapper_=e.browserEvents.bind(t,"mouseout",null,e.Tooltip.onMouseOut_),t.addEventListener("mousemove",e.Tooltip.onMouseMove_,!1)},e.Tooltip.unbindMouseEvents=function(t){t&&(e.browserEvents.unbind(t.mouseOverWrapper_),e.browserEvents.unbind(t.mouseOutWrapper_),t.removeEventListener("mousemove",e.Tooltip.onMouseMove_))},e.Tooltip.onMouseOver_=function(t){e.Tooltip.blocked_||(t=e.Tooltip.getTargetObject_(t.currentTarget),e.Tooltip.element_!=t&&(e.Tooltip.hide(),e.Tooltip.poisonedElement_=null,e.Tooltip.element_=t),clearTimeout(e.Tooltip.mouseOutPid_))},e.Tooltip.onMouseOut_=function(t){e.Tooltip.blocked_||(e.Tooltip.mouseOutPid_=setTimeout(function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},1),clearTimeout(e.Tooltip.showPid_))},e.Tooltip.onMouseMove_=function(t){if(e.Tooltip.element_&&e.Tooltip.element_.tooltip&&!e.Tooltip.blocked_)if(e.Tooltip.visible){var n=e.Tooltip.lastX_-t.pageX;t=e.Tooltip.lastY_-t.pageY,Math.sqrt(n*n+t*t)>e.Tooltip.RADIUS_OK&&e.Tooltip.hide()}else e.Tooltip.poisonedElement_!=e.Tooltip.element_&&(clearTimeout(e.Tooltip.showPid_),e.Tooltip.lastX_=t.pageX,e.Tooltip.lastY_=t.pageY,e.Tooltip.showPid_=setTimeout(e.Tooltip.show_,e.Tooltip.HOVER_MS))},e.Tooltip.dispose=function(){e.Tooltip.element_=null,e.Tooltip.poisonedElement_=null,e.Tooltip.hide()},e.Tooltip.hide=function(){e.Tooltip.visible&&(e.Tooltip.visible=!1,e.Tooltip.DIV&&(e.Tooltip.DIV.style.display="none")),e.Tooltip.showPid_&&clearTimeout(e.Tooltip.showPid_)},e.Tooltip.block=function(){e.Tooltip.hide(),e.Tooltip.blocked_=!0},e.Tooltip.unblock=function(){e.Tooltip.blocked_=!1},e.Tooltip.show_=function(){if(!e.Tooltip.blocked_&&(e.Tooltip.poisonedElement_=e.Tooltip.element_,e.Tooltip.DIV)){e.Tooltip.DIV.textContent="";var t=e.Tooltip.getTooltipOfObject(e.Tooltip.element_);t=(t=e.utils.string.wrap(t,e.Tooltip.LIMIT)).split("\n");for(var n=0;n<t.length;n++){var o=document.createElement("div");o.appendChild(document.createTextNode(t[n])),e.Tooltip.DIV.appendChild(o)}t=e.Tooltip.element_.RTL,n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,e.Tooltip.DIV.style.direction=t?"rtl":"ltr",e.Tooltip.DIV.style.display="block",e.Tooltip.visible=!0;var s=e.Tooltip.lastX_;s=t?s-(e.Tooltip.OFFSET_X+e.Tooltip.DIV.offsetWidth):s+e.Tooltip.OFFSET_X;var c=e.Tooltip.lastY_+e.Tooltip.OFFSET_Y;c+e.Tooltip.DIV.offsetHeight>o+window.scrollY&&(c-=e.Tooltip.DIV.offsetHeight+2*e.Tooltip.OFFSET_Y),t?s=Math.max(e.Tooltip.MARGINS-window.scrollX,s):s+e.Tooltip.DIV.offsetWidth>n+window.scrollX-2*e.Tooltip.MARGINS&&(s=n-e.Tooltip.DIV.offsetWidth-2*e.Tooltip.MARGINS),e.Tooltip.DIV.style.top=c+"px",e.Tooltip.DIV.style.left=s+"px"}},e.utils.aria={},e.utils.aria.ARIA_PREFIX_="aria-",e.utils.aria.ROLE_ATTRIBUTE_="role",e.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},e.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},e.utils.aria.setRole=function(t,n){t.setAttribute(e.utils.aria.ROLE_ATTRIBUTE_,n)},e.utils.aria.setState=function(t,n,o){Array.isArray(o)&&(o=o.join(" ")),t.setAttribute(e.utils.aria.ARIA_PREFIX_+n,o)},e.IASTNodeLocation=function(){},e.IASTNodeLocationSvg=function(){},e.IASTNodeLocationWithBlock=function(){},e.IKeyboardAccessible=function(){},e.utils.deprecation={},e.utils.deprecation.warn=function(t,n,o,s){t=t+" was deprecated on "+n+" and will be deleted on "+o+".",s&&(t+="\nUse "+s+" instead."),console.warn(t)},e.Connection=function(t,n){this.sourceBlock_=t,this.type=n},e.Connection.CAN_CONNECT=0,e.Connection.REASON_SELF_CONNECTION=1,e.Connection.REASON_WRONG_TYPE=2,e.Connection.REASON_TARGET_NULL=3,e.Connection.REASON_CHECKS_FAILED=4,e.Connection.REASON_DIFFERENT_WORKSPACES=5,e.Connection.REASON_SHADOW_PARENT=6,e.Connection.REASON_DRAG_CHECKS_FAILED=7,e.Connection.prototype.targetConnection=null,e.Connection.prototype.disposed=!1,e.Connection.prototype.check_=null,e.Connection.prototype.shadowDom_=null,e.Connection.prototype.x=0,e.Connection.prototype.y=0,e.Connection.prototype.connect_=function(t){var M,n=e.connectionTypes.INPUT_VALUE,o=this.getSourceBlock(),s=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var c=this.getShadowDom(!0);this.shadowDom_=null;var _=this.targetBlock();if(_.isShadow())_.dispose(!1);else{this.disconnect();var w=_}this.shadowDom_=c}e.Events.isEnabled()&&(M=new(e.Events.get(e.Events.BLOCK_MOVE))(s)),e.Connection.connectReciprocally_(this,t),s.setParent(o),M&&(M.recordNew(),e.Events.fire(M)),w&&((s=e.Connection.getConnectionForOrphanedConnection(s,t=this.type===n?w.outputConnection:w.previousConnection))?t.connect(s):t.onFailedConnect(this))},e.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},e.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Connection.prototype.isSuperior=function(){return this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.NEXT_STATEMENT},e.Connection.prototype.isConnected=function(){return!!this.targetConnection},e.Connection.prototype.canConnectWithReason=function(t){return e.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,t,!1)},e.Connection.prototype.checkConnection=function(t){e.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var n=this.getConnectionChecker(),o=n.canConnectWithReason(this,t,!1);if(o!=e.Connection.CAN_CONNECT)throw Error(n.getErrorMessage(o,this,t))},e.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},e.Connection.prototype.isConnectionAllowed=function(t){return e.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!0)},e.Connection.prototype.onFailedConnect=function(t){},e.Connection.prototype.connect=function(t){if(this.targetConnection!=t&&this.getConnectionChecker().canConnect(this,t,!1)){var n=e.Events.getGroup();n||e.Events.setGroup(!0),this.isSuperior()?this.connect_(t):t.connect_(this),n||e.Events.setGroup(!1)}},e.Connection.connectReciprocally_=function(t,n){if(!t||!n)throw Error("Cannot connect null connections.");t.targetConnection=n,n.targetConnection=t},e.Connection.getSingleConnection_=function(t,n){for(var _,o=null,s=(n=n.outputConnection).getConnectionChecker(),c=0;_=t.inputList[c];c++)if((_=_.connection)&&s.canConnect(n,_,!1)){if(o)return null;o=_}return o},e.Connection.getConnectionForOrphanedOutput_=function(t,n){for(var o;o=e.Connection.getSingleConnection_(t,n);)if(!(t=o.targetBlock())||t.isShadow())return o;return null},e.Connection.getConnectionForOrphanedConnection=function(t,n){if(n.type===e.connectionTypes.OUTPUT_VALUE)return e.Connection.getConnectionForOrphanedOutput_(t,n.getSourceBlock());t=t.lastConnectionInStack(!0);var o=n.getConnectionChecker();return t&&o.canConnect(n,t,!1)?t:null},e.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var n=this.sourceBlock_,o=t.getSourceBlock();t=this}else n=t.getSourceBlock(),o=this.sourceBlock_;var s=e.Events.getGroup();s||e.Events.setGroup(!0),this.disconnectInternal_(n,o),o.isShadow()||t.respawnShadow_(),s||e.Events.setGroup(!1)},e.Connection.prototype.disconnectInternal_=function(t,n){var o;e.Events.isEnabled()&&(o=new(e.Events.get(e.Events.BLOCK_MOVE))(n)),this.targetConnection=this.targetConnection.targetConnection=null,n.setParent(null),o&&(o.recordNew(),e.Events.fire(o))},e.Connection.prototype.respawnShadow_=function(){var t=this.getSourceBlock(),n=this.getShadowDom();if(t.workspace&&n)if((t=e.Xml.domToBlock(n,t.workspace)).outputConnection)this.connect(t.outputConnection);else{if(!t.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(t.previousConnection)}},e.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},e.Connection.prototype.checkType=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,t,!1)},e.Connection.prototype.checkType_=function(t){return e.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(t)},e.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},e.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},e.Connection.prototype.getCheck=function(){return this.check_},e.Connection.prototype.setShadowDom=function(t){this.shadowDom_=t,(t=this.targetBlock())?t.isShadow()&&(t.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},e.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?e.Xml.blockToDom(this.targetBlock()):this.shadowDom_},e.Connection.prototype.neighbours=function(t){return[]},e.Connection.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_.inputList,o=0;o<n.length;o++)if(n[o].connection===this){t=n[o];break}return t},e.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection==this)var n="Output Connection of ";else if(t.previousConnection==this)n="Previous Connection of ";else if(t.nextConnection==this)n="Next Connection of ";else{n=null;for(var s,o=0;s=t.inputList[o];o++)if(s.connection==this){n=s;break}if(!n)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";n='Input "'+n.name+'" connection on '}return n+t.toDevString()},e.IConnectionChecker=function(){},e.ConnectionChecker=function(){},e.ConnectionChecker.prototype.canConnect=function(t,n,o,s){return this.canConnectWithReason(t,n,o,s)==e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.canConnectWithReason=function(t,n,o,s){var c=this.doSafetyChecks(t,n);return c!=e.Connection.CAN_CONNECT?c:this.doTypeChecks(t,n)?o&&!this.doDragChecks(t,n,s||0)?e.Connection.REASON_DRAG_CHECKS_FAILED:e.Connection.CAN_CONNECT:e.Connection.REASON_CHECKS_FAILED},e.ConnectionChecker.prototype.getErrorMessage=function(t,n,o){switch(t){case e.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case e.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case e.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case e.Connection.REASON_TARGET_NULL:return"Target connection is null.";case e.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+n+" expected "+n.getCheck()+", found "+o.getCheck();case e.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case e.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},e.ConnectionChecker.prototype.doSafetyChecks=function(t,n){if(!t||!n)return e.Connection.REASON_TARGET_NULL;if(t.isSuperior())var o=t.getSourceBlock(),s=n.getSourceBlock();else s=t.getSourceBlock(),o=n.getSourceBlock();return o==s?e.Connection.REASON_SELF_CONNECTION:n.type!=e.OPPOSITE_TYPE[t.type]?e.Connection.REASON_WRONG_TYPE:o.workspace!==s.workspace?e.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!s.isShadow()?e.Connection.REASON_SHADOW_PARENT:e.Connection.CAN_CONNECT},e.ConnectionChecker.prototype.doTypeChecks=function(t,n){if(t=t.getCheck(),n=n.getCheck(),!t||!n)return!0;for(var o=0;o<t.length;o++)if(-1!=n.indexOf(t[o]))return!0;return!1},e.ConnectionChecker.prototype.doDragChecks=function(t,n,o){if(t.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case e.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,n);case e.connectionTypes.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case e.connectionTypes.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case e.connectionTypes.NEXT_STATEMENT:if(n.isConnected()&&!t.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection)return!1;break;default:return!1}return-1==e.draggingConnections.indexOf(n)},e.ConnectionChecker.prototype.canConnectToPrevious_=function(t,n){return!(t.targetConnection||-1!=e.draggingConnections.indexOf(n)||n.targetConnection&&(!(t=n.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))},e.registry.register(e.registry.Type.CONNECTION_CHECKER,e.registry.DEFAULT,e.ConnectionChecker),e.VariableMap=function(t){this.variableMap_=Object.create(null),this.workspace=t},e.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},e.VariableMap.prototype.renameVariable=function(t,n){var o=this.getVariable(n,t.type),s=this.workspace.getAllBlocks(!1);e.Events.setGroup(!0);try{o&&o.getId()!=t.getId()?this.renameVariableWithConflict_(t,n,o,s):this.renameVariableAndUses_(t,n,s)}finally{e.Events.setGroup(!1)}},e.VariableMap.prototype.renameVariableById=function(t,n){var o=this.getVariableById(t);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(o,n)},e.VariableMap.prototype.renameVariableAndUses_=function(t,n,o){for(e.Events.fire(new(e.Events.get(e.Events.VAR_RENAME))(t,n)),t.name=n,n=0;n<o.length;n++)o[n].updateVarName(t)},e.VariableMap.prototype.renameVariableWithConflict_=function(t,n,o,s){var c=t.type;for(n!=o.name&&this.renameVariableAndUses_(o,n,s),n=0;n<s.length;n++)s[n].renameVarById(t.getId(),o.getId());e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t)),t=this.getVariablesOfType(c).indexOf(t),this.variableMap_[c].splice(t,1)},e.VariableMap.prototype.createVariable=function(t,n,o){var s=this.getVariable(t,n);if(s){if(o&&s.getId()!=o)throw Error('Variable "'+t+'" is already in use and its id is "'+s.getId()+'" which conflicts with the passed in id, "'+o+'".');return s}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return s=o||e.utils.genUid(),s=new e.VariableModel(this.workspace,t,n=n||"",s),(t=this.variableMap_[n]||[]).push(s),delete this.variableMap_[n],this.variableMap_[n]=t,s},e.VariableMap.prototype.deleteVariable=function(t){for(var s,n=this.variableMap_[t.type],o=0;s=n[o];o++)if(s.getId()==t.getId()){n.splice(o,1),e.Events.fire(new(e.Events.get(e.Events.VAR_DELETE))(t));break}},e.VariableMap.prototype.deleteVariableById=function(t){var n=this.getVariableById(t);if(n){var c,o=n.name,s=this.getVariableUsesById(t);for(t=0;c=s[t];t++)if("procedures_defnoreturn"==c.type||"procedures_defreturn"==c.type)return t=c.getFieldValue("NAME"),o=e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",t),void e.alert(o);var _=this;1<s.length?(o=e.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(s.length)).replace("%2",o),e.confirm(o,function(w){w&&n&&_.deleteVariableInternal(n,s)})):_.deleteVariableInternal(n,s)}else console.warn("Can't delete non-existent variable: "+t)},e.VariableMap.prototype.deleteVariableInternal=function(t,n){var o=e.Events.getGroup();o||e.Events.setGroup(!0);try{for(var s=0;s<n.length;s++)n[s].dispose(!0);this.deleteVariable(t)}finally{o||e.Events.setGroup(!1)}},e.VariableMap.prototype.getVariable=function(t,n){if(n=this.variableMap_[n||""])for(var s,o=0;s=n[o];o++)if(e.Names.equals(s.name,t))return s;return null},e.VariableMap.prototype.getVariableById=function(t){for(var n=Object.keys(this.variableMap_),o=0;o<n.length;o++)for(var _,s=n[o],c=0;_=this.variableMap_[s][c];c++)if(_.getId()==t)return _;return null},e.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},e.VariableMap.prototype.getVariableTypes=function(t){var n={};e.utils.object.mixin(n,this.variableMap_),t&&t.getPotentialVariableMap()&&e.utils.object.mixin(n,t.getPotentialVariableMap().variableMap_),t=Object.keys(n),n=!1;for(var o=0;o<t.length;o++)""==t[o]&&(n=!0);return n||t.push(""),t},e.VariableMap.prototype.getAllVariables=function(){var n,t=[];for(n in this.variableMap_)t=t.concat(this.variableMap_[n]);return t},e.VariableMap.prototype.getAllVariableNames=function(){var n,t=[];for(n in this.variableMap_)for(var c,o=this.variableMap_[n],s=0;c=o[s];s++)t.push(c.name);return t},e.VariableMap.prototype.getVariableUsesById=function(t){for(var n=[],o=this.workspace.getAllBlocks(!1),s=0;s<o.length;s++){var c=o[s].getVarModels();if(c)for(var _=0;_<c.length;_++)c[_].getId()==t&&n.push(o[s])}return n},e.Workspace=function(t){this.id=e.utils.genUid(),e.Workspace.WorkspaceDB_[this.id]=this,this.options=t||new e.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(e.registry.getClassFromOptions(e.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new e.VariableMap(this),this.potentialVariableMap_=null},e.Workspace.prototype.rendered=!1,e.Workspace.prototype.isClearing=!1,e.Workspace.prototype.MAX_UNDO=1024,e.Workspace.prototype.connectionDBList=null,e.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete e.Workspace.WorkspaceDB_[this.id]},e.Workspace.SCAN_ANGLE=3,e.Workspace.prototype.sortObjects_=function(t,n){return t=t.getRelativeToSurfaceXY(),n=n.getRelativeToSurfaceXY(),t.y+e.Workspace.prototype.sortObjects_.offset*t.x-(n.y+e.Workspace.prototype.sortObjects_.offset*n.x)},e.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},e.Workspace.prototype.removeTopBlock=function(t){if(!e.utils.arrayRemove(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},e.Workspace.prototype.getTopBlocks=function(t){var n=[].concat(this.topBlocks_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},e.Workspace.prototype.removeTypedBlock=function(t){this.typedBlocksDB_[t.type].splice(this.typedBlocksDB_[t.type].indexOf(t),1),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},e.Workspace.prototype.getBlocksByType=function(t,n){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),n&&1<t.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t):[]},e.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},e.Workspace.prototype.removeTopComment=function(t){if(!e.utils.arrayRemove(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},e.Workspace.prototype.getTopComments=function(t){var n=[].concat(this.topComments_);return t&&1<n.length&&(this.sortObjects_.offset=Math.sin(e.utils.math.toRadians(e.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n},e.Workspace.prototype.getAllBlocks=function(t){if(t){t=this.getTopBlocks(!0);for(var n=[],o=0;o<t.length;o++)n.push.apply(n,t[o].getDescendants(!0))}else for(n=this.getTopBlocks(!1),o=0;o<n.length;o++)n.push.apply(n,n[o].getChildren(!1));return n.filter(function(s){return!s.isInsertionMarker()})},e.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=e.Events.getGroup();for(t||e.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);t||e.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},e.Workspace.prototype.renameVariableById=function(t,n){this.variableMap_.renameVariableById(t,n)},e.Workspace.prototype.createVariable=function(t,n,o){return this.variableMap_.createVariable(t,n,o)},e.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},e.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},e.Workspace.prototype.getVariable=function(t,n){return this.variableMap_.getVariable(t,n)},e.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},e.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},e.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},e.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},e.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},e.Workspace.prototype.getWidth=function(){return 0},e.Workspace.prototype.newBlock=function(t,n){return new e.Block(this,t,n)},e.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},e.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},e.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var o,n=0;for(o in t){if(t[o]>this.remainingCapacityOfType(o))return!1;n+=t[o]}return!(n>this.remainingCapacity())},e.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},e.Workspace.prototype.getUndoStack=function(){return this.undoStack_},e.Workspace.prototype.getRedoStack=function(){return this.redoStack_},e.Workspace.prototype.undo=function(t){var n=t?this.redoStack_:this.undoStack_,o=t?this.undoStack_:this.redoStack_,s=n.pop();if(s){for(var c=[s];n.length&&s.group&&s.group==n[n.length-1].group;)c.push(n.pop());for(n=0;s=c[n];n++)o.push(s);c=e.Events.filter(c,t),e.Events.recordUndo=!1;try{for(n=0;s=c[n];n++)s.run(t)}finally{e.Events.recordUndo=!0}}},e.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,e.Events.clearPendingUndo()},e.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},e.Workspace.prototype.removeChangeListener=function(t){e.utils.arrayRemove(this.listeners_,t)},e.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var o,n=0;o=this.listeners_[n];n++)o(t)},e.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},e.Workspace.prototype.setBlockById=function(t,n){this.blockDB_[t]=n},e.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},e.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},e.Workspace.prototype.allInputsFilled=function(t){for(var s,n=this.getTopBlocks(!1),o=0;s=n[o];o++)if(!s.allInputsFilled(t))return!1;return!0},e.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},e.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new e.VariableMap(this)},e.Workspace.prototype.getVariableMap=function(){return this.variableMap_},e.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},e.Workspace.WorkspaceDB_=Object.create(null),e.Workspace.getById=function(t){return e.Workspace.WorkspaceDB_[t]||null},e.Workspace.getAll=function(){var n,t=[];for(n in e.Workspace.WorkspaceDB_)t.push(e.Workspace.WorkspaceDB_[n]);return t},e.WorkspaceDragSurfaceSvg=function(t){this.container_=t,this.createDom()},e.WorkspaceDragSurfaceSvg.prototype.SVG_=null,e.WorkspaceDragSurfaceSvg.prototype.container_=null,e.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},e.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,n){t=t.toFixed(0),n=n.toFixed(0),this.SVG_.style.display="block",e.utils.dom.setCssTransform(this.SVG_,"translate3d("+t+"px, "+n+"px, 0px)")},e.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return e.utils.getRelativeXY(this.SVG_)},e.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var n=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(n&&o&&e.utils.dom.hasClass(n,"blocklyBlockCanvas")&&e.utils.dom.hasClass(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?e.utils.dom.insertAfter(n,this.previousSibling_):t.insertBefore(n,t.firstChild),e.utils.dom.insertAfter(o,n),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");e.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},e.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,n,o,s,c,_){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=o,t.setAttribute("transform","translate(0, 0) scale("+_+")"),n.setAttribute("transform","translate(0, 0) scale("+_+")"),this.SVG_.setAttribute("width",s),this.SVG_.setAttribute("height",c),this.SVG_.appendChild(t),this.SVG_.appendChild(n),this.SVG_.style.display="block"},e.blockRendering={},e.blockRendering.useDebugger=!1,e.blockRendering.register=function(t,n){e.registry.register(e.registry.Type.RENDERER,t,n)},e.blockRendering.unregister=function(t){e.registry.unregister(e.registry.Type.RENDERER,t)},e.blockRendering.startDebugger=function(){e.blockRendering.useDebugger=!0},e.blockRendering.stopDebugger=function(){e.blockRendering.useDebugger=!1},e.blockRendering.init=function(t,n,o){return(t=new(e.registry.getClass(e.registry.Type.RENDERER,t))(t)).init(n,o),t},e.ASTNode=function(t,n,o){if(!n)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=e.ASTNode.isConnectionType_(t),this.location_=n,this.wsCoordinate_=null,this.processParams_(o||null)},e.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},e.ASTNode.NAVIGATE_ALL_FIELDS=!1,e.ASTNode.DEFAULT_OFFSET_Y=-20,e.ASTNode.isConnectionType_=function(t){switch(t){case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:case e.ASTNode.types.INPUT:case e.ASTNode.types.OUTPUT:return!0}return!1},e.ASTNode.createFieldNode=function(t){return t?new e.ASTNode(e.ASTNode.types.FIELD,t):null},e.ASTNode.createConnectionNode=function(t){if(!t)return null;var n=t.type;return n==e.connectionTypes.INPUT_VALUE||n==e.connectionTypes.NEXT_STATEMENT&&t.getParentInput()?e.ASTNode.createInputNode(t.getParentInput()):n==e.connectionTypes.NEXT_STATEMENT?new e.ASTNode(e.ASTNode.types.NEXT,t):n==e.connectionTypes.OUTPUT_VALUE?new e.ASTNode(e.ASTNode.types.OUTPUT,t):n==e.connectionTypes.PREVIOUS_STATEMENT?new e.ASTNode(e.ASTNode.types.PREVIOUS,t):null},e.ASTNode.createInputNode=function(t){return t&&t.connection?new e.ASTNode(e.ASTNode.types.INPUT,t.connection):null},e.ASTNode.createBlockNode=function(t){return t?new e.ASTNode(e.ASTNode.types.BLOCK,t):null},e.ASTNode.createStackNode=function(t){return t?new e.ASTNode(e.ASTNode.types.STACK,t):null},e.ASTNode.createWorkspaceNode=function(t,n){return n&&t?new e.ASTNode(e.ASTNode.types.WORKSPACE,t,{wsCoordinate:n}):null},e.ASTNode.createTopNode=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},e.ASTNode.prototype.getLocation=function(){return this.location_},e.ASTNode.prototype.getType=function(){return this.type_},e.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},e.ASTNode.prototype.isConnection=function(){return this.isConnection_},e.ASTNode.prototype.findNextForInput_=function(){var o,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;o=n.inputList[t];t++){for(var _,s=o.fieldRow,c=0;_=s[c];c++)if(_.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(_);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.findNextForField_=function(){var t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),s=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)+1;n=o.inputList[s];s++){for(var c=n.fieldRow;t<c.length;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t++}if(t=0,n.connection)return e.ASTNode.createInputNode(n)}return null},e.ASTNode.prototype.findPrevForInput_=function(){for(var s,t=this.location_.getParentInput(),n=t.getSourceBlock(),o=n.inputList.indexOf(t);s=n.inputList[o];o--){if(s.connection&&s!==t)return e.ASTNode.createInputNode(s);for(var _,c=(s=s.fieldRow).length-1;_=s[c];c--)if(_.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(_)}return null},e.ASTNode.prototype.findPrevForField_=function(){var c,t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),s=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;c=o.inputList[s];s--){if(c.connection&&c!==n)return e.ASTNode.createInputNode(c);for(c=c.fieldRow;-1<t;){if(c[t].isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(c[t]);t--}0<=s-1&&(t=o.inputList[s-1].fieldRow.length-1)}return null},e.ASTNode.prototype.navigateBetweenStacks_=function(t){var n=this.getLocation();if(n instanceof e.Block||(n=n.getSourceBlock()),!n||!n.workspace)return null;var o=n.getRootBlock();n=o.workspace.getTopBlocks(!0);for(var c,s=0;c=n[s];s++)if(o.id==c.id)return-1==(t=s+(t?1:-1))||t==n.length?null:e.ASTNode.createStackNode(n[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},e.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var n=t.previousConnection||t.outputConnection;return n?e.ASTNode.createConnectionNode(n):e.ASTNode.createBlockNode(t)},e.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;var n=(t=t.getTopStackBlock()).previousConnection||t.outputConnection;return n&&n.targetConnection&&n.targetConnection.getParentInput()?e.ASTNode.createInputNode(n.targetConnection.getParentInput()):e.ASTNode.createStackNode(t)},e.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var o,n=0;o=t[n];n++){for(var _,s=o.fieldRow,c=0;_=s[c];c++)if(_.isClickable()||e.ASTNode.NAVIGATE_ALL_FIELDS)return e.ASTNode.createFieldNode(_);if(o.connection)return e.ASTNode.createInputNode(o)}return null},e.ASTNode.prototype.getSourceBlock=function(){return this.getType()===e.ASTNode.types.BLOCK||this.getType()===e.ASTNode.types.STACK?this.getLocation():this.getType()===e.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},e.ASTNode.prototype.next=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case e.ASTNode.types.OUTPUT:var t=this.location_;return e.ASTNode.createBlockNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return this.findNextForField_();case e.ASTNode.types.INPUT:return this.findNextForInput_();case e.ASTNode.types.BLOCK:return e.ASTNode.createConnectionNode(this.location_.nextConnection);case e.ASTNode.types.PREVIOUS:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.NEXT:return e.ASTNode.createConnectionNode((t=this.location_).targetConnection)}return null},e.ASTNode.prototype.in=function(){switch(this.type_){case e.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return e.ASTNode.createStackNode(t[0]);break;case e.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(t=this.location_);case e.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(t=this.location_);case e.ASTNode.types.INPUT:return e.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},e.ASTNode.prototype.prev=function(){switch(this.type_){case e.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case e.ASTNode.types.FIELD:return this.findPrevForField_();case e.ASTNode.types.INPUT:return this.findPrevForInput_();case e.ASTNode.types.BLOCK:var t=this.location_;return e.ASTNode.createConnectionNode(t.previousConnection||t.outputConnection);case e.ASTNode.types.PREVIOUS:if((t=(t=this.location_).targetConnection)&&!t.getParentInput())return e.ASTNode.createConnectionNode(t);break;case e.ASTNode.types.NEXT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock())}return null},e.ASTNode.prototype.out=function(){switch(this.type_){case e.ASTNode.types.STACK:var t=this.location_,n=t.getRelativeToSurfaceXY();return n=new e.utils.Coordinate(n.x,n.y+e.ASTNode.DEFAULT_OFFSET_Y),e.ASTNode.createWorkspaceNode(t.workspace,n);case e.ASTNode.types.OUTPUT:return(n=(t=this.location_).targetConnection)?e.ASTNode.createConnectionNode(n):e.ASTNode.createStackNode(t.getSourceBlock());case e.ASTNode.types.FIELD:return e.ASTNode.createBlockNode(this.location_.getSourceBlock());case e.ASTNode.types.INPUT:return e.ASTNode.createBlockNode((t=this.location_).getSourceBlock());case e.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(t=this.location_);case e.ASTNode.types.PREVIOUS:case e.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((t=this.location_).getSourceBlock())}return null},e.Blocks=Object.create(null),e.Extensions={},e.Extensions.ALL_=Object.create(null),e.Extensions.register=function(t,n){if("string"!=typeof t||""==t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(e.Extensions.ALL_[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof n)throw Error('Error: Extension "'+t+'" must be a function');e.Extensions.ALL_[t]=n},e.Extensions.registerMixin=function(t,n){if(!n||"object"!=typeof n)throw Error('Error: Mixin "'+t+'" must be a object');e.Extensions.register(t,function(){this.mixin(n)})},e.Extensions.registerMutator=function(t,n,o,s){var c='Error when registering mutator "'+t+'": ';e.Extensions.checkHasFunction_(c,n.domToMutation,"domToMutation"),e.Extensions.checkHasFunction_(c,n.mutationToDom,"mutationToDom");var _=e.Extensions.checkMutatorDialog_(n,c);if(o&&"function"!=typeof o)throw Error('Extension "'+t+'" is not a function');e.Extensions.register(t,function(){if(_){if(!e.Mutator)throw Error(c+"Missing require for Blockly.Mutator");this.setMutator(new e.Mutator(s||[]))}this.mixin(n),o&&o.apply(this)})},e.Extensions.unregister=function(t){e.Extensions.ALL_[t]?delete e.Extensions.ALL_[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},e.Extensions.apply=function(t,n,o){var s=e.Extensions.ALL_[t];if("function"!=typeof s)throw Error('Error: Extension "'+t+'" not found.');if(o)e.Extensions.checkNoMutatorProperties_(t,n);else var c=e.Extensions.getMutatorProperties_(n);if(s.apply(n),o)e.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+t+'": ',n);else if(!e.Extensions.mutatorPropertiesMatch_(c,n))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},e.Extensions.checkHasFunction_=function(t,n,o){if(!n)throw Error(t+'missing required property "'+o+'"');if("function"!=typeof n)throw Error(t+'" required property "'+o+'" must be a function')},e.Extensions.checkNoMutatorProperties_=function(t,n){if(e.Extensions.getMutatorProperties_(n).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+n.id)},e.Extensions.checkMutatorDialog_=function(t,n){var o=void 0!==t.compose,s=void 0!==t.decompose;if(o&&s){if("function"!=typeof t.compose)throw Error(n+"compose must be a function.");if("function"!=typeof t.decompose)throw Error(n+"decompose must be a function.");return!0}if(!o&&!s)return!1;throw Error(n+'Must have both or neither of "compose" and "decompose"')},e.Extensions.checkBlockHasMutatorProperties_=function(t,n){if("function"!=typeof n.domToMutation)throw Error(t+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof n.mutationToDom)throw Error(t+'Applying a mutator didn\'t add "mutationToDom"');e.Extensions.checkMutatorDialog_(n,t)},e.Extensions.getMutatorProperties_=function(t){var n=[];return void 0!==t.domToMutation&&n.push(t.domToMutation),void 0!==t.mutationToDom&&n.push(t.mutationToDom),void 0!==t.compose&&n.push(t.compose),void 0!==t.decompose&&n.push(t.decompose),n},e.Extensions.mutatorPropertiesMatch_=function(t,n){if((n=e.Extensions.getMutatorProperties_(n)).length!=t.length)return!1;for(var o=0;o<n.length;o++)if(t[o]!=n[o])return!1;return!0},e.Extensions.buildTooltipForDropdown=function(t,n){var o=[];return"object"==typeof document&&e.utils.runAfterPageLoad(function(){for(var s in n)e.utils.checkMessageReferences(n[s])}),function(){this.type&&-1==o.indexOf(this.type)&&(e.Extensions.checkDropdownOptionsInTable_(this,t,n),o.push(this.type)),this.setTooltip(function(){var s=String(this.getFieldValue(t)),c=n[s];return null==c?-1==o.indexOf(this.type)&&(s="No tooltip mapping for value "+s+" of field "+t,null!=this.type&&(s+=" of block type "+this.type),console.warn(s+".")):c=e.utils.replaceMessageReferences(c),c}.bind(this))}},e.Extensions.checkDropdownOptionsInTable_=function(t,n,o){var s=t.getField(n);if(!s.isOptionListDynamic()){s=s.getOptions();for(var c=0;c<s.length;++c){var _=s[c][1];null==o[_]&&console.warn("No tooltip mapping for value "+_+" of field "+n+" of block type "+t.type)}}},e.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&e.utils.runAfterPageLoad(function(){e.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var o=this.getField(n);return e.utils.replaceMessageReferences(t).replace("%1",o?o.getText():"")}.bind(this))}},e.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var t=this.getParent();return t&&t.getInputsInline()&&t.tooltip||this.tooltipWhenNotConnected_}.bind(this))},e.Extensions.register("parent_tooltip_when_inline",e.Extensions.extensionParentTooltip_),e.fieldRegistry={},e.fieldRegistry.register=function(t,n){e.registry.register(e.registry.Type.FIELD,t,n)},e.fieldRegistry.unregister=function(t){e.registry.unregister(e.registry.Type.FIELD,t)},e.fieldRegistry.fromJson=function(t){var n=e.registry.getObject(e.registry.Type.FIELD,t.type);return n?n.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},e.IDeletable=function(){},e.blockAnimations={},e.blockAnimations.disconnectPid_=0,e.blockAnimations.disconnectGroup_=null,e.blockAnimations.disposeUiEffect=function(t){var n=t.workspace,o=t.getSvgRoot();n.getAudioManager().play("delete"),t=n.getSvgXY(o),(o=o.cloneNode(!0)).translateX_=t.x,o.translateY_=t.y,o.setAttribute("transform","translate("+t.x+","+t.y+")"),n.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),e.blockAnimations.disposeUiStep_(o,n.RTL,new Date,n.scale)},e.blockAnimations.disposeUiStep_=function(t,n,o,s){var c=(new Date-o)/150;1<c?e.utils.dom.removeNode(t):(t.setAttribute("transform","translate("+(t.translateX_+(n?-1:1)*t.bBox_.width*s/2*c)+","+(t.translateY_+t.bBox_.height*s*c)+") scale("+(1-c)*s+")"),setTimeout(e.blockAnimations.disposeUiStep_,10,t,n,o,s))},e.blockAnimations.connectionUiEffect=function(t){var n=t.workspace,o=n.scale;if(n.getAudioManager().play("click"),!(1>o)){var s=n.getSvgXY(t.getSvgRoot());t.outputConnection?(s.x+=(t.RTL?3:-3)*o,s.y+=13*o):t.previousConnection&&(s.x+=(t.RTL?-23:23)*o,s.y+=3*o),t=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:s.x,cy:s.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg()),e.blockAnimations.connectionUiStep_(t,new Date,o)}},e.blockAnimations.connectionUiStep_=function(t,n,o){var s=(new Date-n)/150;1<s?e.utils.dom.removeNode(t):(t.setAttribute("r",25*s*o),t.style.opacity=1-s,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.connectionUiStep_,10,t,n,o))},e.blockAnimations.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var n=t.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,t.RTL||(n*=-1),e.blockAnimations.disconnectUiStep_(t.getSvgRoot(),n,new Date)}},e.blockAnimations.disconnectUiStep_=function(t,n,o){var s=(new Date-o)/200;1<s?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(s*Math.PI*3)*(1-s)*n)+")",e.blockAnimations.disconnectGroup_=t,e.blockAnimations.disconnectPid_=setTimeout(e.blockAnimations.disconnectUiStep_,10,t,n,o)),t.setAttribute("transform",t.translate_+t.skew_)},e.blockAnimations.disconnectUiStop=function(){if(e.blockAnimations.disconnectGroup_){clearTimeout(e.blockAnimations.disconnectPid_);var t=e.blockAnimations.disconnectGroup_;t.skew_="",t.setAttribute("transform",t.translate_),e.blockAnimations.disconnectGroup_=null}},e.Events.BlockDrag=function(t,n,o){e.Events.BlockDrag.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=n,this.blocks=o},e.utils.object.inherits(e.Events.BlockDrag,e.Events.UiBase),e.Events.BlockDrag.prototype.type=e.Events.BLOCK_DRAG,e.Events.BlockDrag.prototype.toJson=function(){var t=e.Events.BlockDrag.superClass_.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},e.Events.BlockDrag.prototype.fromJson=function(t){e.Events.BlockDrag.superClass_.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},e.registry.register(e.registry.Type.EVENT,e.Events.BLOCK_DRAG,e.Events.BlockDrag),e.IBlockDragger=function(){},e.InsertionMarkerManager=function(t){this.topBlock_=e.selected=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",e.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,e.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{e.Events.enable()}},e.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},e.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},e.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},e.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(e.Events.disable(),this.hidePreview_(),e.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;e.blockAnimations.connectionUiEffect(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},e.InsertionMarkerManager.prototype.update=function(t,n){var o=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(o,n))||this.shouldUpdatePreviews_(o,t))&&(e.Events.disable(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),e.Events.enable())},e.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var n=t.type;e.Events.disable();try{var o=this.workspace_.newBlock(n);if(o.setInsertionMarker(!0),t.mutationToDom){var s=t.mutationToDom();s&&o.domToMutation(s)}for(n=0;n<t.inputList.length;n++){var c=t.inputList[n];if(c.name!=e.constants.COLLAPSED_INPUT_NAME){var _=o.inputList[n];if(!_)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(s=0;s<c.fieldRow.length;s++){var w=c.fieldRow[s],M=_.fieldRow[s];if(!M)throw Error(e.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));M.setValue(w.getValue())}}}o.setCollapsed(t.isCollapsed()),o.setInputsInline(t.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{e.Events.enable()}return o},e.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),n=this.topBlock_.lastConnectionInStack(!0);if(n&&n!=this.topBlock_.nextConnection){if(t.push(n),this.lastOnStack_=n,this.lastMarker_){e.Events.disable();try{this.lastMarker_.dispose()}finally{e.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(n.getSourceBlock())}return t},e.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,n){var o=t.local,s=t.closest;return t=t.radius,o&&s?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==s&&this.localConnection_==o||(o=this.localConnection_.x+n.x-this.closestConnection_.x,n=this.localConnection_.y+n.y-this.closestConnection_.y,n=Math.sqrt(o*o+n*n),s&&t>n-e.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},e.InsertionMarkerManager.prototype.getCandidate_=function(t){for(var n=this.getStartRadius_(),o=null,s=null,c=0;c<this.availableConnections_.length;c++){var _=this.availableConnections_[c],w=_.closest(n,t);w.connection&&(o=w.connection,s=_,n=w.radius)}return{closest:o,local:s,radius:n}},e.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?e.CONNECTING_SNAP_RADIUS:e.SNAP_RADIUS},e.InsertionMarkerManager.prototype.shouldDelete_=function(t,n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,e.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.topBlock_,t&&!!t.closest)},e.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var n=t.closest;t=t.local,n&&(n==this.closestConnection_||n.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=n,this.localConnection_=t,this.showPreview_()))}},e.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,n=this.workspace_.getRenderer();switch(n.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&n.shouldHighlightConnection(t)&&t.highlight()},e.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var n=this.closestConnection_!=t.closest;t=this.localConnection_!=t.local,this.closestConnection_&&this.localConnection_&&(n||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},e.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},e.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,n=this.closestConnection_,o=this.lastOnStack_&&t==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((t=o.getMatchingConnection(t.getSourceBlock(),t))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");o.render(),o.rendered=!0,o.getSvgRoot().setAttribute("visibility","visible"),t&&n&&o.positionNearConnection(t,n),n&&t.connect(n),this.markerConnection_=t},e.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,n=t.getSourceBlock(),o=n.nextConnection,s=n.previousConnection,c=n.outputConnection;if(c=t.type==e.connectionTypes.INPUT_VALUE&&!(c&&c.targetConnection),!(t!=o||s&&s.targetConnection)||c?t.targetBlock().unplug(!1):t.type==e.connectionTypes.NEXT_STATEMENT&&t!=o?((o=t.targetConnection).getSourceBlock().unplug(!1),s=s?s.targetConnection:null,n.unplug(!0),s&&s.connect(o)):n.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=n.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},e.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},e.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},e.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},e.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},e.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},e.BlockDragger=function(t,n){this.draggingBlock_=t,this.workspace_=n,this.draggedConnectionManager_=new e.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=e.BlockDragger.initIconData_(t)},e.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},e.BlockDragger.initIconData_=function(t){var n=[];t=t.getDescendants(!1);for(var s,o=0;s=t[o];o++){s=s.getIcons();for(var c=0;c<s.length;c++){var _={location:s[c].getIconLocation(),icon:s[c]};n.push(_)}}return n},e.BlockDragger.prototype.startDrag=function(t,n){e.Events.getGroup()||e.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),e.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),e.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(n)&&this.disconnectBlock_(n,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},e.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},e.BlockDragger.prototype.disconnectBlock_=function(t,n){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),e.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},e.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.drag=function(t,n){n=this.pixelsToWorkspaceUnits_(n);var o=e.utils.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(n),o=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(n,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==o&&(o&&o.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},e.BlockDragger.prototype.endDrag=function(t,n){if(this.drag(t,n),this.dragIconData_=[],this.fireDragEndEvent_(),e.utils.dom.stopTextWidthCache(),e.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{var o=(t=this.getNewLocationAfterDrag_(n)).delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),o?this.updateBlockAfterMove_(o):e.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var n={};return n.delta=this.pixelsToWorkspaceUnits_(t),n.newLocation=e.utils.Coordinate.sum(this.startXY_,n.delta),n},e.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),e.draggingConnections=[],!0)},e.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},e.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));e.Events.fire(t)},e.BlockDragger.prototype.updateToolboxStyle_=function(t){var n=this.workspace_.getToolbox();if(n){var o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&"function"==typeof n.removeStyle?n.removeStyle(o):t||"function"!=typeof n.addStyle||n.addStyle(o)}},e.BlockDragger.prototype.fireMoveEvent_=function(){var t=new(e.Events.get(e.Events.BLOCK_MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),e.Events.fire(t)},e.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},e.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BlockDragger.prototype.dragIcons_=function(t){for(var n=0;n<this.dragIconData_.length;n++){var o=this.dragIconData_[n];o.icon.setIconLocation(e.utils.Coordinate.sum(o.location,t))}},e.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},e.registry.register(e.registry.Type.BLOCK_DRAGGER,e.registry.DEFAULT,e.BlockDragger),e.IContextMenu=function(){},e.IDraggable=function(){},e.IBubble=function(){},e.Bubble=function(t,n,o,s,c,_){this.workspace_=t,this.content_=n,this.shape_=o,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=e.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=e.utils.math.toRadians(o),t.getBubbleCanvas().appendChild(this.createDom_(n,!(!c||!_))),this.setAnchorLocation(s),c&&_||(c=(t=this.content_.getBBox()).width+2*e.Bubble.BORDER_WIDTH,_=t.height+2*e.Bubble.BORDER_WIDTH),this.setBubbleSize(c,_),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},e.Bubble.BORDER_WIDTH=6,e.Bubble.ARROW_THICKNESS=5,e.Bubble.ARROW_ANGLE=20,e.Bubble.ARROW_BEND=4,e.Bubble.ANCHOR_RADIUS=8,e.Bubble.onMouseUpWrapper_=null,e.Bubble.onMouseMoveWrapper_=null,e.Bubble.unbindDragEvents_=function(){e.Bubble.onMouseUpWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseUpWrapper_),e.Bubble.onMouseUpWrapper_=null),e.Bubble.onMouseMoveWrapper_&&(e.browserEvents.unbind(e.Bubble.onMouseMoveWrapper_),e.Bubble.onMouseMoveWrapper_=null)},e.Bubble.bubbleMouseUp_=function(t){e.Touch.clearTouchIdentifier(),e.Bubble.unbindDragEvents_()},e.Bubble.prototype.rendered_=!1,e.Bubble.prototype.anchorXY_=null,e.Bubble.prototype.relativeLeft_=0,e.Bubble.prototype.relativeTop_=0,e.Bubble.prototype.width_=0,e.Bubble.prototype.height_=0,e.Bubble.prototype.autoLayout_=!0,e.Bubble.prototype.createDom_=function(t,n){this.bubbleGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return e.utils.userAgent.JAVA_FX&&(o={}),o=e.utils.dom.createSvgElement(e.utils.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{},o),this.bubbleBack_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:e.Bubble.BORDER_WIDTH,ry:e.Bubble.BORDER_WIDTH},o),n?(this.resizeGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e.utils.dom.createSvgElement(e.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(n=2*e.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),e.utils.dom.createSvgElement(e.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=e.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=e.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},e.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},e.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},e.Bubble.prototype.bubbleMouseDown_=function(t){var n=this.workspace_.getGesture(t);n&&n.handleBubbleStart(t,this)},e.Bubble.prototype.showContextMenu=function(t){},e.Bubble.prototype.isDeletable=function(){return!1},e.Bubble.prototype.setDeleteStyle=function(t){},e.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),e.Bubble.unbindDragEvents_(),e.utils.isRightButton(t)||(this.workspace_.startDrag(t,new e.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),e.Bubble.onMouseUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",this,e.Bubble.bubbleMouseUp_),e.Bubble.onMouseMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),e.hideChaff()),t.stopPropagation()},e.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},e.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},e.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},e.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_&&(t.appendChild(this.bubbleGroup_),!0)},e.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},e.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),n=this.getOptimalRelativeLeft_(t),o=this.getOptimalRelativeTop_(t),s=this.shape_.getBBox(),c={x:n,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},_={x:-this.width_-30,y:o};o={x:s.width,y:o};var w={x:n,y:s.height};n=s.width<s.height?o:w,s=s.width<s.height?w:o,o=this.getOverlap_(c,t),w=this.getOverlap_(_,t);var M=this.getOverlap_(n,t);t=this.getOverlap_(s,t),o==(t=Math.max(o,w,M,t))?(this.relativeLeft_=c.x,this.relativeTop_=c.y):w==t?(this.relativeLeft_=_.x,this.relativeTop_=_.y):M==t?(this.relativeLeft_=n.x,this.relativeTop_=n.y):(this.relativeLeft_=s.x,this.relativeTop_=s.y)},e.Bubble.prototype.getOverlap_=function(t,n){var o=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(o+this.width_,n.left+n.width)-Math.max(o,n.left))*(Math.min(t+this.height_,n.top+n.height)-Math.max(t,n.top))/(this.width_*this.height_)))},e.Bubble.prototype.getOptimalRelativeLeft_=function(t){var n=-this.width_/4;if(this.width_>t.width)return n;if(this.workspace_.RTL)var o=this.anchorXY_.x-n,s=o-this.width_,c=t.left+t.width,_=t.left+e.Scrollbar.scrollbarThickness/this.workspace_.scale;else o=(s=n+this.anchorXY_.x)+this.width_,_=t.left,c=t.left+t.width-e.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?s<_?n=-(_-this.anchorXY_.x+this.width_):o>c&&(n=-(c-this.anchorXY_.x)):s<_?n=_-this.anchorXY_.x:o>c&&(n=c-this.anchorXY_.x-this.width_),n},e.Bubble.prototype.getOptimalRelativeTop_=function(t){var n=-this.height_/4;if(this.height_>t.height)return n;var o=this.anchorXY_.y+n,c=t.top;t=t.top+t.height-e.Scrollbar.scrollbarThickness/this.workspace_.scale;var _=this.anchorXY_.y;return o<c?n=c-_:o+this.height_>t&&(n=t-_-this.height_),n},e.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;this.moveTo(t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},e.Bubble.prototype.moveTo=function(t,n){this.bubbleGroup_.setAttribute("transform","translate("+t+","+n+")")},e.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},e.Bubble.prototype.getBubbleSize=function(){return new e.utils.Size(this.width_,this.height_)},e.Bubble.prototype.setBubbleSize=function(t,n){var o=2*e.Bubble.BORDER_WIDTH;t=Math.max(t,o+45),n=Math.max(n,o+20),this.width_=t,this.height_=n,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",n),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*e.Bubble.BORDER_WIDTH+","+(n-o)+") scale(-1 1)":"translate("+(t-o)+","+(n-o)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},e.Bubble.prototype.renderArrow_=function(){var t=[],n=this.width_/2,o=this.height_/2,s=-this.relativeLeft_,c=-this.relativeTop_;if(n==s&&o==c)t.push("M "+n+","+o);else{c-=o,s-=n,this.workspace_.RTL&&(s*=-1);var _=Math.sqrt(c*c+s*s),w=Math.acos(s/_);0>c&&(w=2*Math.PI-w);var M=w+Math.PI/2;M>2*Math.PI&&(M-=2*Math.PI);var U=Math.sin(M),V=Math.cos(M),H=this.getBubbleSize();M=(H.width+H.height)/e.Bubble.ARROW_THICKNESS,M=Math.min(M,H.width,H.height)/4,s=n+(H=1-e.Bubble.ANCHOR_RADIUS/_)*s,c=o+H*c,H=n+M*V;var $=o+M*U;n-=M*V,o-=M*U,(U=w+this.arrow_radians_)>2*Math.PI&&(U-=2*Math.PI),w=Math.sin(U)*_/e.Bubble.ARROW_BEND,_=Math.cos(U)*_/e.Bubble.ARROW_BEND,t.push("M"+H+","+$),t.push("C"+(H+_)+","+($+w)+" "+s+","+c+" "+s+","+c),t.push("C"+s+","+c+" "+(n+_)+","+(o+w)+" "+n+","+o)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},e.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},e.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&e.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&e.browserEvents.unbind(this.onMouseDownResizeWrapper_),e.Bubble.unbindDragEvents_(),e.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},e.Bubble.prototype.moveDuringDrag=function(t,n){t?t.translateSurface(n.x,n.y):this.moveTo(n.x,n.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x-this.anchorXY_.x,this.relativeTop_=n.y-this.anchorXY_.y,this.renderArrow_()},e.Bubble.prototype.getRelativeToSurfaceXY=function(){return new e.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},e.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},e.Bubble.textToDom=function(t){var n=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:e.Bubble.BORDER_WIDTH},null);t=t.split("\n");for(var o=0;o<t.length;o++){var s=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{dy:"1em",x:e.Bubble.BORDER_WIDTH},n),c=document.createTextNode(t[o]);s.appendChild(c)}return n},e.Bubble.createNonEditableBubble=function(t,n,o){if((o=new e.Bubble(n.workspace,t,n.pathObject.svgPath,o,null,null)).setSvgId(n.id),n.RTL){n=t.getBBox().width;for(var c,s=0;c=t.childNodes[s];s++)c.setAttribute("text-anchor","end"),c.setAttribute("x",n+e.Bubble.BORDER_WIDTH)}return o},e.Events.CommentBase=function(t){this.commentId=(this.isBlank=void 0===t)?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=e.Events.getGroup(),this.recordUndo=e.Events.recordUndo},e.utils.object.inherits(e.Events.CommentBase,e.Events.Abstract),e.Events.CommentBase.prototype.toJson=function(){var t=e.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},e.Events.CommentBase.prototype.fromJson=function(t){e.Events.CommentBase.superClass_.fromJson.call(this,t),this.commentId=t.commentId},e.Events.CommentChange=function(t,n,o){e.Events.CommentChange.superClass_.constructor.call(this,t),t&&(this.oldContents_=void 0===n?"":n,this.newContents_=void 0===o?"":o)},e.utils.object.inherits(e.Events.CommentChange,e.Events.CommentBase),e.Events.CommentChange.prototype.type=e.Events.COMMENT_CHANGE,e.Events.CommentChange.prototype.toJson=function(){var t=e.Events.CommentChange.superClass_.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},e.Events.CommentChange.prototype.fromJson=function(t){e.Events.CommentChange.superClass_.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},e.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},e.Events.CommentChange.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);n?n.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},e.Events.CommentCreate=function(t){e.Events.CommentCreate.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentCreate,e.Events.CommentBase),e.Events.CommentCreate.prototype.type=e.Events.COMMENT_CREATE,e.Events.CommentCreate.prototype.toJson=function(){var t=e.Events.CommentCreate.superClass_.toJson.call(this);return t.xml=e.Xml.domToText(this.xml),t},e.Events.CommentCreate.prototype.fromJson=function(t){e.Events.CommentCreate.superClass_.fromJson.call(this,t),this.xml=e.Xml.textToDom(t.xml)},e.Events.CommentCreate.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,t)},e.Events.CommentCreateDeleteHelper=function(t,n){var o=t.getEventWorkspace_();n?((n=e.utils.xml.createElement("xml")).appendChild(t.xml),e.Xml.domToWorkspace(n,o)):(o=o.getCommentById(t.commentId))?o.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+t.commentId)},e.Events.CommentDelete=function(t){e.Events.CommentDelete.superClass_.constructor.call(this,t),t&&(this.xml=t.toXmlWithXY())},e.utils.object.inherits(e.Events.CommentDelete,e.Events.CommentBase),e.Events.CommentDelete.prototype.type=e.Events.COMMENT_DELETE,e.Events.CommentDelete.prototype.toJson=function(){return e.Events.CommentDelete.superClass_.toJson.call(this)},e.Events.CommentDelete.prototype.fromJson=function(t){e.Events.CommentDelete.superClass_.fromJson.call(this,t)},e.Events.CommentDelete.prototype.run=function(t){e.Events.CommentCreateDeleteHelper(this,!t)},e.Events.CommentMove=function(t){e.Events.CommentMove.superClass_.constructor.call(this,t),t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)},e.utils.object.inherits(e.Events.CommentMove,e.Events.CommentBase),e.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},e.Events.CommentMove.prototype.type=e.Events.COMMENT_MOVE,e.Events.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},e.Events.CommentMove.prototype.toJson=function(){var t=e.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},e.Events.CommentMove.prototype.fromJson=function(t){if(e.Events.CommentMove.superClass_.fromJson.call(this,t),t.oldCoordinate){var n=t.oldCoordinate.split(",");this.oldCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1]))}t.newCoordinate&&(n=t.newCoordinate.split(","),this.newCoordinate_=new e.utils.Coordinate(Number(n[0]),Number(n[1])))},e.Events.CommentMove.prototype.isNull=function(){return e.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},e.Events.CommentMove.prototype.run=function(t){var n=this.getEventWorkspace_().getCommentById(this.commentId);if(n){t=t?this.newCoordinate_:this.oldCoordinate_;var o=n.getXY();n.moveBy(t.x-o.x,t.y-o.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CREATE,e.Events.CommentCreate),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_CHANGE,e.Events.CommentChange),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_MOVE,e.Events.CommentMove),e.registry.register(e.registry.Type.EVENT,e.Events.COMMENT_DELETE,e.Events.CommentDelete),e.BubbleDragger=function(t,n){this.draggingBubble_=t,this.workspace_=n,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=e.utils.is3dSupported()&&n.getBlockDragSurface()?n.getBlockDragSurface():null},e.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},e.BubbleDragger.prototype.startBubbleDrag=function(){e.Events.getGroup()||e.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},e.BubbleDragger.prototype.dragBubble=function(t,n){n=this.pixelsToWorkspaceUnits_(n),n=e.utils.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},e.BubbleDragger.prototype.shouldDelete_=function(t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,e.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.draggingBubble_,!1)},e.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},e.BubbleDragger.prototype.endBubbleDrag=function(t,n){this.dragBubble(t,n),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(n),t=e.utils.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),e.Events.setGroup(!1)},e.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new(e.Events.get(e.Events.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),e.Events.fire(t)}},e.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new e.utils.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},e.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},e.Events.Click=function(t,n,o){e.Events.Click.superClass_.constructor.call(this,t?t.workspace.id:n),this.blockId=t?t.id:null,this.targetType=o},e.utils.object.inherits(e.Events.Click,e.Events.UiBase),e.Events.Click.prototype.type=e.Events.CLICK,e.Events.Click.prototype.toJson=function(){var t=e.Events.Click.superClass_.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},e.Events.Click.prototype.fromJson=function(t){e.Events.Click.superClass_.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.CLICK,e.Events.Click),e.WorkspaceDragger=function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new e.utils.Coordinate(t.scrollX,t.scrollY)},e.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},e.WorkspaceDragger.prototype.startDrag=function(){e.selected&&e.selected.unselect(),this.workspace_.setupDragSurface()},e.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},e.WorkspaceDragger.prototype.drag=function(t){if(t=e.utils.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,t.y)}},e.Gesture=function(t,n){this.mouseDownXY_=null,this.currentDragDeltaXY_=new e.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=n,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!e.DRAG_STACK},e.Gesture.prototype.dispose=function(){e.Touch.clearTouchIdentifier(),e.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&e.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&e.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},e.Gesture.prototype.updateFromEvent_=function(t){var n=new e.utils.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(n)&&(this.updateIsDragging_(),e.longStop_()),this.mostRecentEvent_=t},e.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=e.utils.Coordinate.difference(t,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=e.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?e.FLYOUT_DRAG_RADIUS:e.DRAG_RADIUS))},e.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),e.Events.getGroup()||e.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},e.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},e.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},e.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new e.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},e.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},e.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(e.registry.getClassFromOptions(e.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new e.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},e.Gesture.prototype.doStart=function(t){e.utils.isTargetInput(t)?this.cancel():(this.hasStarted_=!0,e.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),e.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,e.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),e.utils.isRightButton(t)?this.handleRightClick(t):("touchstart"!=t.type.toLowerCase()&&"pointerdown"!=t.type.toLowerCase()||"mouse"==t.pointerType||e.longStart(t,this),this.mouseDownXY_=new e.utils.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},e.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},e.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),e.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},e.Gesture.prototype.cancel=function(){this.isEnding_||(e.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},e.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),e.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(e.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},e.Gesture.prototype.handleWsStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(n),this.mostRecentEvent_=t,this.doStart(t)},e.Gesture.prototype.fireWorkspaceClick_=function(t){e.Events.fire(new(e.Events.get(e.Events.CLICK))(null,t.id,"workspace"))},e.Gesture.prototype.handleFlyoutStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(n),this.handleWsStart(t,n.getWorkspace())},e.Gesture.prototype.handleBlockStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent_=t},e.Gesture.prototype.handleBubbleStart=function(t,n){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent_=t},e.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},e.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},e.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(e.Events.getGroup()||e.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new(e.Events.get(e.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");e.Events.fire(t)}this.bringBlockToFront_(),e.Events.setGroup(!1)},e.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,e.selected&&e.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},e.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},e.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},e.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},e.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!=t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},e.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},e.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},e.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},e.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},e.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},e.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},e.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},e.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},e.Gesture.prototype.hasStarted=function(){return this.hasStarted_},e.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},e.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},e.Gesture.inProgress=function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)if(o.currentGesture_)return!0;return!1},e.IRegistrable=function(){},e.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},e.Marker.prototype.setDrawer=function(t){this.drawer_=t},e.Marker.prototype.getDrawer=function(){return this.drawer_},e.Marker.prototype.getCurNode=function(){return this.curNode_},e.Marker.prototype.setCurNode=function(t){var n=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(n,this.curNode_)},e.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},e.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},e.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},e.Cursor=function(){e.Cursor.superClass_.constructor.call(this),this.type="cursor"},e.utils.object.inherits(e.Cursor,e.Marker),e.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},e.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()==e.ASTNode.types.PREVIOUS||t.getType()==e.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},e.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()==e.ASTNode.types.NEXT||t.getType()==e.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},e.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()==e.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},e.registry.register(e.registry.Type.CURSOR,e.registry.DEFAULT,e.Cursor),e.MarkerManager=function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t},e.MarkerManager.LOCAL_MARKER="local_marker_1",e.MarkerManager.prototype.registerMarker=function(t,n){this.markers_[t]&&this.unregisterMarker(t),n.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,n)),this.setMarkerSvg(n.getDrawer().createDom()),this.markers_[t]=n},e.MarkerManager.prototype.unregisterMarker=function(t){var n=this.markers_[t];if(!n)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");n.dispose(),delete this.markers_[t]},e.MarkerManager.prototype.getCursor=function(){return this.cursor_},e.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},e.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},e.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},e.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},e.MarkerManager.prototype.dispose=function(){for(var o,t=Object.keys(this.markers_),n=0;o=t[n];n++)this.unregisterMarker(o);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},e.WidgetDiv={},e.WidgetDiv.owner_=null,e.WidgetDiv.dispose_=null,e.WidgetDiv.rendererClassName_="",e.WidgetDiv.themeClassName_="",e.WidgetDiv.createDom=function(){e.WidgetDiv.DIV||(e.WidgetDiv.DIV=document.createElement("div"),e.WidgetDiv.DIV.className="blocklyWidgetDiv",(e.parentContainer||document.body).appendChild(e.WidgetDiv.DIV))},e.WidgetDiv.show=function(t,n,o){e.WidgetDiv.hide(),e.WidgetDiv.owner_=t,e.WidgetDiv.dispose_=o,(t=e.WidgetDiv.DIV).style.direction=n?"rtl":"ltr",t.style.display="block",n=e.getMainWorkspace(),e.WidgetDiv.rendererClassName_=n.getRenderer().getClassName(),e.WidgetDiv.themeClassName_=n.getTheme().getClassName(),e.utils.dom.addClass(t,e.WidgetDiv.rendererClassName_),e.utils.dom.addClass(t,e.WidgetDiv.themeClassName_)},e.WidgetDiv.hide=function(){if(e.WidgetDiv.isVisible()){e.WidgetDiv.owner_=null;var t=e.WidgetDiv.DIV;t.style.display="none",t.style.left="",t.style.top="",e.WidgetDiv.dispose_&&e.WidgetDiv.dispose_(),e.WidgetDiv.dispose_=null,t.textContent="",e.WidgetDiv.rendererClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.rendererClassName_),e.WidgetDiv.rendererClassName_=""),e.WidgetDiv.themeClassName_&&(e.utils.dom.removeClass(t,e.WidgetDiv.themeClassName_),e.WidgetDiv.themeClassName_=""),e.getMainWorkspace().markFocused()}},e.WidgetDiv.isVisible=function(){return!!e.WidgetDiv.owner_},e.WidgetDiv.hideIfOwner=function(t){e.WidgetDiv.owner_==t&&e.WidgetDiv.hide()},e.WidgetDiv.positionInternal_=function(t,n,o){e.WidgetDiv.DIV.style.left=t+"px",e.WidgetDiv.DIV.style.top=n+"px",e.WidgetDiv.DIV.style.height=o+"px"},e.WidgetDiv.positionWithAnchor=function(t,n,o,s){var c=e.WidgetDiv.calculateY_(t,n,o);t=e.WidgetDiv.calculateX_(t,n,o,s),0>c?e.WidgetDiv.positionInternal_(t,0,o.height+c):e.WidgetDiv.positionInternal_(t,c,o.height)},e.WidgetDiv.calculateX_=function(t,n,o,s){return s?(n=Math.max(n.right-o.width,t.left),Math.min(n,t.right-o.width)):(n=Math.min(n.left,t.right-o.width),Math.max(n,t.left))},e.WidgetDiv.calculateY_=function(t,n,o){return n.bottom+o.height>=t.bottom?n.top-o.height:n.bottom},e.Field=function(t,n,o){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new e.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,o&&this.configure_(o),this.setValue(t),n&&this.setValidator(n)},e.Field.prototype.DEFAULT_VALUE=null,e.Field.prototype.name=void 0,e.Field.prototype.disposed=!1,e.Field.prototype.maxDisplayLength=50,e.Field.prototype.sourceBlock_=null,e.Field.prototype.isDirty_=!0,e.Field.prototype.visible_=!0,e.Field.prototype.clickTarget_=null,e.Field.NBSP="\xa0",e.Field.prototype.EDITABLE=!0,e.Field.prototype.SERIALIZABLE=!1,e.Field.prototype.configure_=function(t){var n=t.tooltip;"string"==typeof n&&(n=e.utils.replaceMessageReferences(t.tooltip)),n&&this.setTooltip(n)},e.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=t},e.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},e.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},e.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},e.Field.prototype.initModel=function(){},e.Field.prototype.createBorderRect_=function(){this.borderRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},e.Field.prototype.createTextElement_=function(){this.textElement_=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},e.Field.prototype.bindEvents_=function(){e.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=e.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},e.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},e.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},e.Field.prototype.dispose=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hideIfOwner(this),e.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&e.browserEvents.unbind(this.mouseDownWrapper_),e.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},e.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.sourceBlock_.isEditable()?(e.utils.dom.addClass(t,"blocklyEditableText"),e.utils.dom.removeClass(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(e.utils.dom.addClass(t,"blocklyNonEditableText"),e.utils.dom.removeClass(t,"blocklyEditableText"),t.style.cursor=""))},e.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},e.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},e.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},e.Field.prototype.isVisible=function(){return this.visible_},e.Field.prototype.setVisible=function(t){if(this.visible_!=t){this.visible_=t;var n=this.getSvgRoot();n&&(n.style.display=t?"block":"none")}},e.Field.prototype.setValidator=function(t){this.validator_=t},e.Field.prototype.getValidator=function(){return this.validator_},e.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},e.Field.prototype.applyColour=function(){},e.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},e.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},e.Field.prototype.updateSize_=function(t){var n=this.getConstants(),o=2*(t=null!=t?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),s=n.FIELD_TEXT_HEIGHT,c=0;this.textElement_&&(o+=c=e.utils.dom.getFastTextWidth(this.textElement_,n.FIELD_TEXT_FONTSIZE,n.FIELD_TEXT_FONTWEIGHT,n.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(s=Math.max(s,n.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=s,this.size_.width=o,this.positionTextElement_(t,c),this.positionBorderRect_()},e.Field.prototype.positionTextElement_=function(t,n){if(this.textElement_){var o=this.getConstants(),s=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-n-t:t),this.textElement_.setAttribute("y",o.FIELD_TEXT_BASELINE_CENTER?s:s-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE)}},e.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},e.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new e.utils.Size(0,0)},e.Field.prototype.getScaledBBox=function(){if(this.borderRect_)t=this.borderRect_.getBoundingClientRect(),o=e.utils.style.getPageOffset(this.borderRect_),s=t.width,t=t.height;else{var t=this.sourceBlock_.getHeightWidth(),n=this.sourceBlock_.workspace.scale,o=this.getAbsoluteXY_(),s=t.width*n;t=t.height*n,e.utils.userAgent.GECKO?(o.x+=1.5*n,o.y+=1.5*n):e.utils.userAgent.EDGE||e.utils.userAgent.IE||(o.x-=.5*n,o.y-=.5*n),s+=1*n,t+=1*n}return new e.utils.Rect(o.y,o.y+t,o.x,o.x+s)},e.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,e.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200f"),t):e.Field.NBSP},e.Field.prototype.getText=function(){if(this.getText_){var t=this.getText_.call(this);if(null!==t)return String(t)}return String(this.getValue())},e.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},e.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},e.Field.prototype.setValue=function(t){if(null!==t){var n=this.doClassValidation_(t);if(!((t=this.processValidation_(t,n))instanceof Error)){if((n=this.getValidator())&&(n=n.call(this,t),(t=this.processValidation_(t,n))instanceof Error))return;if(!(n=this.sourceBlock_)||!n.disposed){var o=this.getValue();o===t?this.doValueUpdate_(t):(n&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(n,"field",this.name||null,o,t)),this.doValueUpdate_(t),this.isDirty_&&this.forceRerender())}}}},e.Field.prototype.processValidation_=function(t,n){return null===n?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(void 0!==n&&(t=n),t)},e.Field.prototype.getValue=function(){return this.value_},e.Field.prototype.doClassValidation_=function(t){return null==t?null:t},e.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},e.Field.prototype.doValueInvalid_=function(t){},e.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},e.Field.prototype.setTooltip=function(t){t||""===t||(t=this.sourceBlock_);var n=this.getClickTarget_();n?n.tooltip=t:this.tooltip_=t},e.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return e.Tooltip.getTooltipOfObject(t||{tooltip:this.tooltip_})},e.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},e.Field.prototype.getAbsoluteXY_=function(){return e.utils.style.getPageOffset(this.getClickTarget_())},e.Field.prototype.referencesVariables=function(){return!1},e.Field.prototype.getParentInput=function(){for(var t=null,n=this.sourceBlock_,o=n.inputList,s=0;s<n.inputList.length;s++)for(var c=o[s],_=c.fieldRow,w=0;w<_.length;w++)if(_[w]===this){t=c;break}return t},e.Field.prototype.getFlipRtl=function(){return!1},e.Field.prototype.isTabNavigable=function(){return!1},e.Field.prototype.onShortcut=function(t){return!1},e.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},e.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},e.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.FieldLabel=function(t,n,o){this.class_=null,e.FieldLabel.superClass_.constructor.call(this,t,null,o),o||(this.class_=n||null)},e.utils.object.inherits(e.FieldLabel,e.Field),e.FieldLabel.prototype.DEFAULT_VALUE="",e.FieldLabel.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabel(n,void 0,t)},e.FieldLabel.prototype.EDITABLE=!1,e.FieldLabel.prototype.configure_=function(t){e.FieldLabel.superClass_.configure_.call(this,t),this.class_=t.class},e.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&e.utils.dom.addClass(this.textElement_,this.class_)},e.FieldLabel.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&e.utils.dom.removeClass(this.textElement_,this.class_),t&&e.utils.dom.addClass(this.textElement_,t)),this.class_=t},e.fieldRegistry.register("field_label",e.FieldLabel),e.Input=function(t,n,o,s){if(t!=e.inputTypes.DUMMY&&!n)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=n,this.sourceBlock_=o,this.connection=s,this.fieldRow=[]},e.Input.prototype.align=e.constants.ALIGN.LEFT,e.Input.prototype.visible_=!0,e.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},e.Input.prototype.appendField=function(t,n){return this.insertFieldAt(this.fieldRow.length,t,n),this},e.Input.prototype.insertFieldAt=function(t,n,o){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(n||""==n&&o)&&("string"==typeof n&&(n=e.fieldRegistry.fromJson({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(n.init(),n.applyColour()),n.name=o,n.setVisible(this.isVisible()),n.prefixField&&(t=this.insertFieldAt(t,n.prefixField)),this.fieldRow.splice(t,0,n),++t,n.suffixField&&(t=this.insertFieldAt(t,n.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},e.Input.prototype.removeField=function(t,n){for(var s,o=0;s=this.fieldRow[o];o++)if(s.name===t)return s.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(n)return!1;throw Error('Field "'+t+'" not found.')},e.Input.prototype.isVisible=function(){return this.visible_},e.Input.prototype.setVisible=function(t){var n=[];if(this.visible_==t)return n;this.visible_=t;for(var s,o=0;s=this.fieldRow[o];o++)s.setVisible(t);return this.connection&&(this.connection=this.connection,t?n=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),n},e.Input.prototype.markDirty=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.markDirty()},e.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},e.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},e.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},e.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},e.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},e.Input.prototype.dispose=function(){for(var n,t=0;n=this.fieldRow[t];t++)n.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},e.Block=function(t,n,o){if(e.Generator&&void 0!==e.Generator.prototype[n])throw Error('Block prototypeName "'+n+'" conflicts with Blockly.Generator members.');if(this.id=o&&!t.getBlockById(o)?o:e.utils.genUid(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new e.utils.Size(160,80)},this.xy_=new e.utils.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,n){if(this.type=n,!(o=e.Blocks[n])||"object"!=typeof o)throw TypeError("Unknown block type: "+n);e.utils.object.mixin(this,o)}t.addTopBlock(this),t.addTypedBlock(this),(t=e.Events.getGroup())||e.Events.setGroup(!0),n=e.Events.recordUndo;try{"function"==typeof this.init&&(e.Events.recordUndo=!1,this.init(),e.Events.recordUndo=n),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(this))}finally{t||e.Events.setGroup(!1),e.Events.recordUndo=n}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},e.Block.COLLAPSED_INPUT_NAME=e.constants.COLLAPSED_INPUT_NAME,e.Block.COLLAPSED_FIELD_NAME=e.constants.COLLAPSED_FIELD_NAME,e.Block.prototype.data=null,e.Block.prototype.disposed=!1,e.Block.prototype.hue_=null,e.Block.prototype.colour_="#000000",e.Block.prototype.styleName_="",e.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_DELETE))(this)),e.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),e.selected==this&&(e.selected=null);for(var n=this.childBlocks_.length-1;0<=n;n--)this.childBlocks_[n].dispose(!1);n=0;for(var o;o=this.inputList[n];n++)o.dispose();this.inputList.length=0;var c,s=this.getConnections_(!0);for(n=0;c=s[n];n++)c.dispose()}finally{e.Events.enable(),this.disposed=!0}}},e.Block.prototype.initModel=function(){for(var n,t=0;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.initModel&&s.initModel()},e.Block.prototype.unplug=function(t){this.outputConnection?this.unplugFromRow_(t):this.previousConnection&&this.unplugFromStack_(t)},e.Block.prototype.unplugFromRow_=function(t){var n=null;this.outputConnection.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&((t=t.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(t,n,!1)?n.connect(t):t.onFailedConnect(n))},e.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;if(o&&o.type==e.connectionTypes.INPUT_VALUE&&o.targetConnection){if(t)return null;t=o}}return t},e.Block.prototype.unplugFromStack_=function(t){var n=null;this.previousConnection.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect());var o=this.getNextBlock();t&&o&&!o.isShadow()&&((t=this.nextConnection.targetConnection).disconnect(),n&&this.workspace.connectionChecker.canConnect(n,t,!1)&&n.connect(t))},e.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var o,n=0;o=this.inputList[n];n++)o.connection&&t.push(o.connection);return t},e.Block.prototype.lastConnectionInStack=function(t){for(var n=this.nextConnection;n;){var o=n.targetBlock();if(!o||t&&o.isShadow())return n;n=o.nextConnection}return null},e.Block.prototype.bumpNeighbours=function(){},e.Block.prototype.getParent=function(){return this.parentBlock_},e.Block.prototype.getInputWithBlock=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&o.connection.targetBlock()==t)return o;return null},e.Block.prototype.getSurroundParent=function(){var t=this;do{var n=t;if(!(t=t.getParent()))return null}while(t.getNextBlock()==n);return t},e.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},e.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},e.Block.prototype.getFirstStatementConnection=function(){for(var n,t=0;n=this.inputList[t];t++)if(n.connection&&n.connection.type==e.connectionTypes.NEXT_STATEMENT)return n.connection;return null},e.Block.prototype.getRootBlock=function(){var t=this;do{var n=t;t=n.parentBlock_}while(t);return n},e.Block.prototype.getTopStackBlock=function(){var t=this;do{var n=t.getPreviousBlock()}while(n&&n.getNextBlock()==t&&(t=n));return t},e.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var o,n=0;o=this.inputList[n];n++)o.connection&&(o=o.connection.targetBlock())&&t.push(o);return(n=this.getNextBlock())&&t.push(n),t},e.Block.prototype.setParent=function(t){if(t!=this.parentBlock_){if(this.parentBlock_){if(e.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},e.Block.prototype.getDescendants=function(t){for(var s,n=[this],o=this.getChildren(t),c=0;s=o[c];c++)n.push.apply(n,s.getDescendants(t));return n},e.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setDeletable=function(t){this.deletable_=t},e.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setMovable=function(t){this.movable_=t},e.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(e.utils.getBlockTypeCounts(this,!0))},e.Block.prototype.isShadow=function(){return this.isShadow_},e.Block.prototype.setShadow=function(t){this.isShadow_=t},e.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},e.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},e.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},e.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var n;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.updateEditable()},e.Block.prototype.isDisposed=function(){return this.disposed},e.Block.prototype.getMatchingConnection=function(t,n){var o=this.getConnections_(!0);if(t=t.getConnections_(!0),o.length!=t.length)throw Error("Connection lists did not match in length.");for(var s=0;s<t.length;s++)if(t[s]==n)return o[s];return null},e.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},e.Block.prototype.setTooltip=function(t){this.tooltip=t},e.Block.prototype.getTooltip=function(){return e.Tooltip.getTooltipOfObject(this)},e.Block.prototype.getColour=function(){return this.colour_},e.Block.prototype.getStyleName=function(){return this.styleName_},e.Block.prototype.getHue=function(){return this.hue_},e.Block.prototype.setColour=function(t){t=e.utils.parseBlockColour(t),this.hue_=t.hue,this.colour_=t.hex},e.Block.prototype.setStyle=function(t){this.styleName_=t},e.Block.prototype.setOnChange=function(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},e.Block.prototype.getField=function(t){if("string"!=typeof t)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(var o,n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)if(c.name===t)return c;return null},e.Block.prototype.getVars=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&t.push(c.getValue());return t},e.Block.prototype.getVarModels=function(){for(var o,t=[],n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&(c=this.workspace.getVariableById(c.getValue()))&&t.push(c);return t},e.Block.prototype.updateVarName=function(t){for(var o,n=0;o=this.inputList[n];n++)for(var c,s=0;c=o.fieldRow[s];s++)c.referencesVariables()&&t.getId()==c.getValue()&&c.refreshVariableName()},e.Block.prototype.renameVarById=function(t,n){for(var s,o=0;s=this.inputList[o];o++)for(var _,c=0;_=s.fieldRow[c];c++)_.referencesVariables()&&t==_.getValue()&&_.setValue(n)},e.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},e.Block.prototype.setFieldValue=function(t,n){var o=this.getField(n);if(!o)throw Error('Field "'+n+'" not found.');o.setValue(t)},e.Block.prototype.setPreviousStatement=function(t,n){if(t){if(void 0===n&&(n=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(e.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(n)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},e.Block.prototype.setNextStatement=function(t,n){if(t)void 0===n&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(e.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},e.Block.prototype.setOutput=function(t,n){if(t){if(void 0===n&&(n=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(e.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(n)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},e.Block.prototype.setInputsInline=function(t){this.inputsInline!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},e.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.DUMMY&&this.inputList[t].type==e.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type==e.inputTypes.VALUE&&this.inputList[t].type==e.inputTypes.DUMMY)return!0;return!1},e.Block.prototype.setOutputShape=function(t){this.outputShape_=t},e.Block.prototype.getOutputShape=function(){return this.outputShape_},e.Block.prototype.isEnabled=function(){return!this.disabled},e.Block.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!t)),this.disabled=!t)},e.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},e.Block.prototype.isCollapsed=function(){return this.collapsed_},e.Block.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},e.Block.prototype.toString=function(t,n){function o(V){var H=V.getCheck();return!H&&V.targetConnection&&(H=V.targetConnection.getCheck()),!!H&&(-1!=H.indexOf("Boolean")||-1!=H.indexOf("Number"))}function s(){w&&w.getType()==M.getType()&&w.getLocation()==M.getLocation()&&(w=null)}var c=[];n=n||"?";var _=e.ASTNode.NAVIGATE_ALL_FIELDS;e.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var w=e.ASTNode.createBlockNode(this),M=w;w;){switch(w.getType()){case e.ASTNode.types.INPUT:var U=w.getLocation();w.in()?o(U)&&c.push("("):c.push(n);break;case e.ASTNode.types.FIELD:(U=w.getLocation()).name!=e.constants.COLLAPSED_FIELD_NAME&&c.push(U.getText())}if(!(w=(U=w).in()||U.next())){for(w=U.out(),s();w&&!w.next();)w=w.out(),s(),w&&w.getType()==e.ASTNode.types.INPUT&&o(w.getLocation())&&c.push(")");w&&(w=w.next())}}for(e.ASTNode.NAVIGATE_ALL_FIELDS=_,n=2;n<c.length;n++)"("==c[n-2]&&")"==c[n]&&(c[n-2]=c[n-1],c.splice(n-1,2));return c=(c=c.reduce(function(V,H){return V+("("==V.substr(-1)||")"==H?"":" ")+H},"")).trim()||"???",t&&c.length>t&&(c=c.substring(0,t-3)+"..."),c},e.Block.prototype.appendValueInput=function(t){return this.appendInput_(e.inputTypes.VALUE,t)},e.Block.prototype.appendStatementInput=function(t){return this.appendInput_(e.inputTypes.STATEMENT,t)},e.Block.prototype.appendDummyInput=function(t){return this.appendInput_(e.inputTypes.DUMMY,t||"")},e.Block.prototype.jsonInit=function(t){var n=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(n+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,n):this.jsonInitColour_(t,n);for(var o=0;void 0!==t["message"+o];)this.interpolate_(t["message"+o],t["args"+o]||[],t["lastDummyAlign"+o],n),o++;if(void 0!==t.inputsInline&&this.setInputsInline(t.inputsInline),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(o=e.utils.replaceMessageReferences(o=t.tooltip),this.setTooltip(o)),void 0!==t.enableContextMenu&&(this.contextMenu=!!(o=t.enableContextMenu)),void 0!==t.helpUrl&&(o=e.utils.replaceMessageReferences(o=t.helpUrl),this.setHelpUrl(o)),"string"==typeof t.extensions&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&e.Extensions.apply(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(n=0;n<t.length;++n)e.Extensions.apply(t[n],this,!1)},e.Block.prototype.jsonInitColour_=function(t,n){if("colour"in t)if(void 0===t.colour)console.warn(n+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(o){console.warn(n+"Illegal colour value: ",t)}}},e.Block.prototype.jsonInitStyle_=function(t,n){t=t.style;try{this.setStyle(t)}catch(o){console.warn(n+"Style does not exist: ",t)}},e.Block.prototype.mixin=function(t,n){if(void 0!==n&&"boolean"!=typeof n)throw Error("opt_disableCheck must be a boolean if provided");if(!n){for(var o in n=[],t)void 0!==this[o]&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}e.utils.object.mixin(this,t)},e.Block.prototype.interpolate_=function(t,n,o,s){t=e.utils.tokenizeInterpolation(t),this.validateTokens_(t,n.length),n=this.interpolateArguments_(t,n,o),o=[],t=0;for(var c;c=n[t];t++)if(this.isInputKeyword_(c.type)){if(c=this.inputFromJson_(c,s)){for(var w,_=0;w=o[_];_++)c.appendField(w[0],w[1]);o.length=0}}else(_=this.fieldFromJson_(c))&&o.push([_,c.name])},e.Block.prototype.validateTokens_=function(t,n){for(var o=[],s=0,c=0;c<t.length;c++){var _=t[c];if("number"==typeof _){if(1>_||_>n)throw Error('Block "'+this.type+'": Message index %'+_+" out of range.");if(o[_])throw Error('Block "'+this.type+'": Message index %'+_+" duplicated.");o[_]=!0,s++}}if(s!=n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")},e.Block.prototype.interpolateArguments_=function(t,n,o){for(var s=[],c=0;c<t.length;c++){var _=t[c];"number"==typeof _&&(_=n[_-1]),("string"!=typeof _||(_=this.stringToFieldJson_(_)))&&s.push(_)}return(t=s.length)&&!this.isInputKeyword_(s[t-1].type)&&(t={type:"input_dummy"},o&&(t.align=o),s.push(t)),s},e.Block.prototype.fieldFromJson_=function(t){var n=e.fieldRegistry.fromJson(t);return!n&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):n},e.Block.prototype.inputFromJson_=function(t,n){var o={LEFT:e.constants.ALIGN.LEFT,RIGHT:e.constants.ALIGN.RIGHT,CENTRE:e.constants.ALIGN.CENTRE,CENTER:e.constants.ALIGN.CENTRE},s=null;switch(t.type){case"input_value":s=this.appendValueInput(t.name);break;case"input_statement":s=this.appendStatementInput(t.name);break;case"input_dummy":s=this.appendDummyInput(t.name)}return s?(t.check&&s.setCheck(t.check),t.align&&(void 0===(o=o[t.align.toUpperCase()])?console.warn(n+"Illegal align value: ",t.align):s.setAlign(o)),s):null},e.Block.prototype.isInputKeyword_=function(t){return"input_value"==t||"input_statement"==t||"input_dummy"==t},e.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},e.Block.prototype.appendInput_=function(t,n){var o=null;return(t==e.inputTypes.VALUE||t==e.inputTypes.STATEMENT)&&(o=this.makeConnection_(t)),t==e.inputTypes.STATEMENT&&this.statementInputCount++,t=new e.Input(t,n,this,o),this.inputList.push(t),t},e.Block.prototype.moveInputBefore=function(t,n){if(t!=n){for(var _,o=-1,s=n?-1:this.inputList.length,c=0;_=this.inputList[c];c++)if(_.name==t){if(o=c,-1!=s)break}else if(n&&_.name==n&&(s=c,-1!=o))break;if(-1==o)throw Error('Named input "'+t+'" not found.');if(-1==s)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(o,s)}},e.Block.prototype.moveNumberedInputBefore=function(t,n){if(t==n)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");var o=this.inputList[t];this.inputList.splice(t,1),t<n&&n--,this.inputList.splice(n,0,o)},e.Block.prototype.removeInput=function(t,n){for(var s,o=0;s=this.inputList[o];o++)if(s.name==t)return s.type==e.inputTypes.STATEMENT&&this.statementInputCount--,s.dispose(),this.inputList.splice(o,1),!0;if(n)return!1;throw Error("Input not found: "+t)},e.Block.prototype.getInput=function(t){for(var o,n=0;o=this.inputList[n];n++)if(o.name==t)return o;return null},e.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},e.Block.prototype.getCommentText=function(){return this.commentModel.text},e.Block.prototype.setCommentText=function(t){this.commentModel.text!=t&&(e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},e.Block.prototype.setWarningText=function(t,n){},e.Block.prototype.setMutator=function(t){},e.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},e.Block.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=new(e.Events.get(e.Events.BLOCK_MOVE))(this);this.xy_.translate(t,n),o.recordNew(),e.Events.fire(o)},e.Block.prototype.makeConnection_=function(t){return new e.Connection(this,t)},e.Block.prototype.allInputsFilled=function(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(var o,n=0;o=this.inputList[n];n++)if(o.connection&&(!(o=o.connection.targetBlock())||!o.allInputsFilled(t)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(t)},e.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},e.blockRendering.IPathObject=function(t,n){},e.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},e.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},e.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},e.Menu.prototype.render=function(t){var n=document.createElement("div");n.className="blocklyMenu goog-menu blocklyNonSelectable",n.tabIndex=0,this.roleName_&&e.utils.aria.setRole(n,this.roleName_),this.element_=n;for(var s,o=0;s=this.menuItems_[o];o++)n.appendChild(s.createDom());this.mouseOverHandler_=e.browserEvents.conditionalBind(n,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=e.browserEvents.conditionalBind(n,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=e.browserEvents.conditionalBind(n,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=e.browserEvents.conditionalBind(n,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=e.browserEvents.conditionalBind(n,"keydown",this,this.handleKeyEvent_),t.appendChild(n)},e.Menu.prototype.getElement=function(){return this.element_},e.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),e.utils.dom.addClass(t,"blocklyFocused"))},e.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),e.utils.dom.removeClass(t,"blocklyFocused"))},e.Menu.prototype.setRole=function(t){this.roleName_=t},e.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(e.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(e.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(e.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(e.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(e.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var n,t=0;n=this.menuItems_[t];t++)n.dispose();this.element_=null},e.Menu.prototype.getMenuItem_=function(t){for(var n=this.getElement();t&&t!=n;){if(e.utils.dom.hasClass(t,"blocklyMenuItem"))for(var s,o=0;s=this.menuItems_[o];o++)if(s.getElement()==t)return s;t=t.parentElement}return null},e.Menu.prototype.setHighlighted=function(t){var n=this.highlightedItem_;n&&(n.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,n=this.getElement(),e.utils.style.scrollIntoContainerView(t.getElement(),n),e.utils.aria.setState(n,e.utils.aria.State.ACTIVEDESCENDANT,t.getId()))},e.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},e.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},e.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},e.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},e.Menu.prototype.highlightHelper_=function(t,n){t+=n;for(var o;o=this.menuItems_[t];){if(o.isEnabled()){this.setHighlighted(o);break}t+=n}},e.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!=t&&this.setHighlighted(t):this.setHighlighted(null))},e.Menu.prototype.handleClick_=function(t){var n=this.openingCoords;if(this.openingCoords=null,n&&"number"==typeof t.clientX){var o=new e.utils.Coordinate(t.clientX,t.clientY);if(1>e.utils.Coordinate.distance(n,o))return}(t=this.getMenuItem_(t.target))&&t.performAction()},e.Menu.prototype.handleMouseEnter_=function(t){this.focus()},e.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},e.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var n=this.highlightedItem_;switch(t.keyCode){case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:n&&n.performAction();break;case e.utils.KeyCodes.UP:this.highlightPrevious();break;case e.utils.KeyCodes.DOWN:this.highlightNext();break;case e.utils.KeyCodes.PAGE_UP:case e.utils.KeyCodes.HOME:this.highlightFirst_();break;case e.utils.KeyCodes.PAGE_DOWN:case e.utils.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},e.Menu.prototype.getSize=function(){var t=this.getElement(),n=e.utils.style.getSize(t);return n.height=t.scrollHeight,n},e.MenuItem=function(t,n){this.content_=t,this.value_=n,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},e.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=e.utils.IdGenerator.getNextUniqueId(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var n=document.createElement("div");if(n.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",n.appendChild(o)}return o=this.content_,"string"==typeof this.content_&&(o=document.createTextNode(this.content_)),n.appendChild(o),t.appendChild(n),this.roleName_&&e.utils.aria.setRole(t,this.roleName_),e.utils.aria.setState(t,e.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),e.utils.aria.setState(t,e.utils.aria.State.DISABLED,!this.enabled_),t},e.MenuItem.prototype.dispose=function(){this.element_=null},e.MenuItem.prototype.getElement=function(){return this.element_},e.MenuItem.prototype.getId=function(){return this.element_.id},e.MenuItem.prototype.getValue=function(){return this.value_},e.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},e.MenuItem.prototype.setRole=function(t){this.roleName_=t},e.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},e.MenuItem.prototype.setChecked=function(t){this.checked_=t},e.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var n=this.getElement();n&&this.isEnabled()&&(t?(e.utils.dom.addClass(n,"blocklyMenuItemHighlight"),e.utils.dom.addClass(n,"goog-menuitem-highlight")):(e.utils.dom.removeClass(n,"blocklyMenuItemHighlight"),e.utils.dom.removeClass(n,"goog-menuitem-highlight")))},e.MenuItem.prototype.isEnabled=function(){return this.enabled_},e.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},e.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},e.MenuItem.prototype.onAction=function(t,n){this.actionHandler_=t.bind(n)},e.ContextMenu={},e.ContextMenu.currentBlock=null,e.ContextMenu.menu_=null,e.ContextMenu.show=function(t,n,o){if(e.WidgetDiv.show(e.ContextMenu,o,e.ContextMenu.dispose),n.length){var s=e.ContextMenu.populate_(n,o);e.ContextMenu.menu_=s,e.ContextMenu.position_(s,t,o),setTimeout(function(){s.focus()},1),e.ContextMenu.currentBlock=null}else e.ContextMenu.hide()},e.ContextMenu.populate_=function(t,n){var o=new e.Menu;o.setRole(e.utils.aria.Role.MENU);for(var c,s=0;c=t[s];s++){var _=new e.MenuItem(c.text);_.setRightToLeft(n),_.setRole(e.utils.aria.Role.MENUITEM),o.addChild(_),_.setEnabled(c.enabled),c.enabled&&_.onAction(function(w){e.ContextMenu.hide(),this.callback(this.scope)},c)}return o},e.ContextMenu.position_=function(t,n,o){var s=e.utils.getViewportBBox();n=new e.utils.Rect(n.clientY+s.top,n.clientY+s.top,n.clientX+s.left,n.clientX+s.left),e.ContextMenu.createWidget_(t);var c=t.getSize();o&&(n.left+=c.width,n.right+=c.width,s.left+=c.width,s.right+=c.width),e.WidgetDiv.positionWithAnchor(s,n,c,o),t.focus()},e.ContextMenu.createWidget_=function(t){t.render(e.WidgetDiv.DIV);var n=t.getElement();e.utils.dom.addClass(n,"blocklyContextMenu"),e.browserEvents.conditionalBind(n,"contextmenu",null,e.utils.noEvent),t.focus()},e.ContextMenu.hide=function(){e.WidgetDiv.hideIfOwner(e.ContextMenu),e.ContextMenu.currentBlock=null},e.ContextMenu.dispose=function(){e.ContextMenu.menu_&&(e.ContextMenu.menu_.dispose(),e.ContextMenu.menu_=null)},e.ContextMenu.callbackFactory=function(t,n){return function(){e.Events.disable();try{var o=e.Xml.domToBlock(n,t.workspace),s=t.getRelativeToSurfaceXY();s.x=t.RTL?s.x-e.SNAP_RADIUS:s.x+e.SNAP_RADIUS,s.y+=2*e.SNAP_RADIUS,o.moveBy(s.x,s.y)}finally{e.Events.enable()}e.Events.isEnabled()&&!o.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(o)),o.select()}},e.ContextMenu.commentDeleteOption=function(t){return{text:e.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){e.Events.setGroup(!0),t.dispose(!0,!0),e.Events.setGroup(!1)}}},e.ContextMenu.commentDuplicateOption=function(t){return{text:e.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){e.duplicate(t)}}},e.ContextMenu.workspaceCommentOption=function(t,n){if(!e.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var o={enabled:!e.utils.userAgent.IE};return o.text=e.Msg.ADD_COMMENT,o.callback=function(){var s=new e.WorkspaceCommentSvg(t,e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,e.WorkspaceCommentSvg.DEFAULT_SIZE,e.WorkspaceCommentSvg.DEFAULT_SIZE),c=t.getInjectionDiv().getBoundingClientRect();c=new e.utils.Coordinate(n.clientX-c.left,n.clientY-c.top);var _=t.getOriginOffsetInPixels();(c=e.utils.Coordinate.difference(c,_)).scale(1/t.scale),s.moveBy(c.x,c.y),t.rendered&&(s.initSvg(),s.render(),s.select())},o},e.ContextMenuRegistry=function(){e.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},e.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},e.ContextMenuRegistry.registry=null,e.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},e.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},e.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},e.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,n){var o=[],s=this.registry_;return Object.keys(s).forEach(function(c){if(t==(c=s[c]).scopeType){var _=c.preconditionFn(n);"hidden"!=_&&(c={text:"function"==typeof c.displayText?c.displayText(n):c.displayText,enabled:"enabled"==_,callback:c.callback,scope:n,weight:c.weight},o.push(c))}}),o.sort(function(c,_){return c.weight-_.weight}),o},new e.ContextMenuRegistry,e.Events.Selected=function(t,n,o){e.Events.Selected.superClass_.constructor.call(this,o),this.oldElementId=t,this.newElementId=n},e.utils.object.inherits(e.Events.Selected,e.Events.UiBase),e.Events.Selected.prototype.type=e.Events.SELECTED,e.Events.Selected.prototype.toJson=function(){var t=e.Events.Selected.superClass_.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},e.Events.Selected.prototype.fromJson=function(t){e.Events.Selected.superClass_.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},e.registry.register(e.registry.Type.EVENT,e.Events.SELECTED,e.Events.Selected),e.IBoundedElement=function(){},e.ICopyable=function(){},e.RenderedConnection=function(t,n){e.RenderedConnection.superClass_.constructor.call(this,t,n),this.db_=t.workspace.connectionDBList[n],this.dbOpposite_=t.workspace.connectionDBList[e.OPPOSITE_TYPE[n]],this.offsetInBlock_=new e.utils.Coordinate(0,0),this.trackedState_=e.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},e.utils.object.inherits(e.RenderedConnection,e.Connection),e.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},e.RenderedConnection.prototype.dispose=function(){e.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},e.RenderedConnection.prototype.getSourceBlock=function(){return e.RenderedConnection.superClass_.getSourceBlock.call(this)},e.RenderedConnection.prototype.targetBlock=function(){return e.RenderedConnection.superClass_.targetBlock.call(this)},e.RenderedConnection.prototype.distanceFrom=function(t){var n=this.x-t.x;return t=this.y-t.y,Math.sqrt(n*n+t*t)},e.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var n=this.sourceBlock_.getRootBlock();if(!n.isInFlyout){var o=!1;if(!n.isMovable()){if(!(n=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,o=!0}var s=e.selected==n;s||n.addSelect();var c=t.x+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x,_=t.y+e.SNAP_RADIUS+Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.y;o&&(_=-_),n.RTL&&(c=t.x-e.SNAP_RADIUS-Math.floor(Math.random()*e.BUMP_RANDOMNESS)-this.x),n.moveBy(c,_),s||n.removeSelect()}}},e.RenderedConnection.prototype.moveTo=function(t,n){this.trackedState_==e.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,n),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,n)),this.x=t,this.y=n},e.RenderedConnection.prototype.moveBy=function(t,n){this.moveTo(this.x+t,this.y+n)},e.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},e.RenderedConnection.prototype.setOffsetInBlock=function(t,n){this.offsetInBlock_.x=t,this.offsetInBlock_.y=n},e.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},e.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,n=this.targetConnection.y-this.y;if(0!=t||0!=n){var o=this.targetBlock(),s=o.getSvgRoot();if(!s)throw Error("block is not rendered.");s=e.utils.getRelativeXY(s),o.getSvgRoot().setAttribute("transform","translate("+(s.x-t)+","+(s.y-n)+")"),o.moveConnections(-t,-n)}},e.RenderedConnection.prototype.closest=function(t,n){return this.dbOpposite_.searchForClosest(this,t,n)},e.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),n=t.shapeFor(this);n=this.type==e.connectionTypes.INPUT_VALUE||this.type==e.connectionTypes.OUTPUT_VALUE?e.utils.svgPaths.moveBy(0,-(t=t.TAB_OFFSET_FROM_TOP))+e.utils.svgPaths.lineOnAxis("v",t)+n.pathDown+e.utils.svgPaths.lineOnAxis("v",t):e.utils.svgPaths.moveBy(-(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS),0)+e.utils.svgPaths.lineOnAxis("h",t)+n.pathLeft+e.utils.svgPaths.lineOnAxis("h",t),t=this.sourceBlock_.getRelativeToSurfaceXY(),e.Connection.highlightedPath_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:n,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},e.RenderedConnection.prototype.unhighlight=function(){e.utils.dom.removeNode(e.Connection.highlightedPath_),delete e.Connection.highlightedPath_},e.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_==e.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_==e.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==e.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=e.RenderedConnection.TrackedState.UNTRACKED))},e.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),n=0;n<t.length;n++){for(var o=t[n],s=o.getConnections_(!0),c=0;c<s.length;c++)s[c].setTracking(!1);for(o=o.getIcons(),c=0;c<o.length;c++)o[c].setVisible(!1)}},e.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!=e.connectionTypes.INPUT_VALUE&&this.type!=e.connectionTypes.NEXT_STATEMENT)return t;var n=this.targetBlock();if(n){if(n.isCollapsed()){var o=[];n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)}else o=n.getConnections_(!0);for(var s=0;s<o.length;s++)t.push.apply(t,o[s].startTrackingAll());t.length||(t[0]=n)}return t},e.RenderedConnection.prototype.isConnectionAllowed=function(t,n){return e.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(t)>n)&&e.RenderedConnection.superClass_.isConnectionAllowed.call(this,t)},e.RenderedConnection.prototype.onFailedConnect=function(t){var n=this.getSourceBlock();if(e.Events.recordUndo){var o=e.Events.getGroup();setTimeout(function(){n.isDisposed()||n.getParent()||(e.Events.setGroup(o),this.bumpAwayFrom(t),e.Events.setGroup(!1))}.bind(this),e.BUMP_DELAY)}},e.RenderedConnection.prototype.disconnectInternal_=function(t,n){e.RenderedConnection.superClass_.disconnectInternal_.call(this,t,n),t.rendered&&t.render(),n.rendered&&(n.updateDisabled(),n.render(),n.getSvgRoot().style.display="block")},e.RenderedConnection.prototype.respawnShadow_=function(){e.RenderedConnection.superClass_.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),(t=this.getSourceBlock()).rendered&&t.render())},e.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},e.RenderedConnection.prototype.connect_=function(t){e.RenderedConnection.superClass_.connect_.call(this,t);var n=this.getSourceBlock();t=t.getSourceBlock();var o=n.rendered,s=t.rendered;o&&n.updateDisabled(),s&&t.updateDisabled(),o&&s&&(this.type==e.connectionTypes.NEXT_STATEMENT||this.type==e.connectionTypes.PREVIOUS_STATEMENT?t.render():n.render()),(n=n.getInputWithBlock(t))&&(n=n.isVisible(),t.getSvgRoot().style.display=n?"block":"none")},e.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},e.BasicCursor=function(){e.BasicCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.BasicCursor,e.Cursor),e.BasicCursor.registrationName="basicCursor",e.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.in=function(){return this.next()},e.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},e.BasicCursor.prototype.out=function(){return this.prev()},e.BasicCursor.prototype.getNextNode_=function(t,n){if(!t)return null;var o=t.in()||t.next();return n(o)?o:o?this.getNextNode_(o,n):n(t=this.findSiblingOrParent_(t.out()))?t:t?this.getNextNode_(t,n):null},e.BasicCursor.prototype.getPreviousNode_=function(t,n){if(!t)return null;var o=t.prev();return n(o=o?this.getRightMostChild_(o):t.out())?o:o?this.getPreviousNode_(o,n):null},e.BasicCursor.prototype.validNode_=function(t){var n=!1;return((t=t&&t.getType())==e.ASTNode.types.OUTPUT||t==e.ASTNode.types.INPUT||t==e.ASTNode.types.FIELD||t==e.ASTNode.types.NEXT||t==e.ASTNode.types.PREVIOUS||t==e.ASTNode.types.WORKSPACE)&&(n=!0),n},e.BasicCursor.prototype.findSiblingOrParent_=function(t){return t?t.next()||this.findSiblingOrParent_(t.out()):null},e.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},e.registry.register(e.registry.Type.CURSOR,e.BasicCursor.registrationName,e.BasicCursor),e.TabNavigateCursor=function(){e.TabNavigateCursor.superClass_.constructor.call(this)},e.utils.object.inherits(e.TabNavigateCursor,e.BasicCursor),e.TabNavigateCursor.prototype.validNode_=function(t){var n=!1,o=t&&t.getType();return t&&(t=t.getLocation(),o==e.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(n=!0)),n},e.BlockSvg=function(t,n,o){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=t,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=e.utils.is3dSupported()&&!!t.getBlockDragSurface();var s=this.pathObject.svgPath;s.tooltip=this,e.Tooltip.bindMouseEvents(s),e.BlockSvg.superClass_.constructor.call(this,t,n,o),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:e.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},e.utils.object.inherits(e.BlockSvg,e.Block),e.BlockSvg.prototype.height=0,e.BlockSvg.prototype.width=0,e.BlockSvg.prototype.warningTextDb_=null,e.BlockSvg.INLINE=-1,e.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",e.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var n,t=0;n=this.inputList[t];t++)n.init();for(n=this.getIcons(),t=0;t<n.length;t++)n[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||e.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},e.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},e.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},e.BlockSvg.prototype.getColourShadow=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},e.BlockSvg.prototype.getColourBorder=function(){return e.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},e.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(e.selected!=this){var t=null;if(e.selected){t=e.selected.id,e.Events.disable();try{e.selected.unselect()}finally{e.Events.enable()}}t=new(e.Events.get(e.Events.SELECTED))(t,this.id,this.workspace.id),e.Events.fire(t),e.selected=this,this.addSelect()}},e.BlockSvg.prototype.unselect=function(){if(e.selected==this){var t=new(e.Events.get(e.Events.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,e.Events.fire(t),e.selected=null,this.removeSelect()}},e.BlockSvg.prototype.mutator=null,e.BlockSvg.prototype.comment=null,e.BlockSvg.prototype.commentIcon_=null,e.BlockSvg.prototype.warning=null,e.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},e.BlockSvg.prototype.setParent=function(t){var n=this.parentBlock_;if(t!=n){e.utils.dom.startTextWidthCache(),e.BlockSvg.superClass_.setParent.call(this,t),e.utils.dom.stopTextWidthCache();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var s=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(o),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-s.x,t.y-s.y)):n&&(this.workspace.getCanvas().appendChild(o),this.translate(s.x,s.y)),this.applyColour()}}},e.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,n=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,s=this.getSvgRoot();if(s)do{var c=e.utils.getRelativeXY(s);t+=c.x,n+=c.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==s&&(t+=(c=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,n+=c.y),s=s.parentNode}while(s&&s!=this.workspace.getCanvas()&&s!=o);return new e.utils.Coordinate(t,n)},e.BlockSvg.prototype.moveBy=function(t,n){if(this.parentBlock_)throw Error("Block has parent.");var o=e.Events.isEnabled();if(o)var s=new(e.Events.get(e.Events.BLOCK_MOVE))(this);var c=this.getRelativeToSurfaceXY();this.translate(c.x+t,c.y+n),this.moveConnections(t,n),o&&(s.recordNew(),e.Events.fire(s)),this.workspace.resizeContents()},e.BlockSvg.prototype.translate=function(t,n){this.getSvgRoot().setAttribute("transform","translate("+t+","+n+")")},e.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},e.BlockSvg.prototype.moveTo=function(t){var n=this.getRelativeToSurfaceXY();this.moveBy(t.x-n.x,t.y-n.y)},e.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},e.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},e.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},e.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var n=t.getSpacing(),o=n/2,s=this.getRelativeToSurfaceXY();t=Math.round((s.x-o)/n)*n+o-s.x,n=Math.round((s.y-o)/n)*n+o-s.y,t=Math.round(t),n=Math.round(n),0==t&&0==n||this.moveBy(t,n)}}},e.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),n=this.getHeightWidth();if(this.RTL)var o=t.x-n.width,s=t.x;else o=t.x,s=t.x+n.width;return new e.utils.Rect(t.y,t.y+n.height,o,s)},e.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var n,t=0;n=this.inputList[t];t++)n.markDirty()},e.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!=t&&(e.BlockSvg.superClass_.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},e.BlockSvg.prototype.updateCollapsed_=function(){for(var c,t=this.isCollapsed(),n=e.constants.COLLAPSED_INPUT_NAME,o=e.constants.COLLAPSED_FIELD_NAME,s=0;c=this.inputList[s];s++)c.name!=n&&c.setVisible(!t);if(t){for(c=this.getIcons(),s=0;t=c[s];s++)t.setVisible(!1);s=this.toString(e.COLLAPSE_CHARS),(c=this.getField(o))?c.setValue(s):(c=this.getInput(n)||this.appendDummyInput(n)).appendField(new e.FieldLabel(s),o)}else this.updateDisabled(),this.removeInput(n)},e.BlockSvg.prototype.tab=function(t,n){var o=new e.TabNavigateCursor;o.setCurNode(e.ASTNode.createFieldNode(t)),t=o.getCurNode(),n?o.next():o.prev(),(n=o.getCurNode())&&n!==t&&(n.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(n))},e.BlockSvg.prototype.onMouseDown_=function(t){var n=this.workspace&&this.workspace.getGesture(t);n&&n.handleBlockStart(t,this)},e.BlockSvg.prototype.showHelp=function(){var t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)},e.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},e.BlockSvg.prototype.showContextMenu=function(t){var n=this.generateContextMenu();n&&n.length&&(e.ContextMenu.show(t,n,this.RTL),e.ContextMenu.currentBlock=this)},e.BlockSvg.prototype.moveConnections=function(t,n){if(this.rendered){for(var o=this.getConnections_(!1),s=0;s<o.length;s++)o[s].moveBy(t,n);for(o=this.getIcons(),s=0;s<o.length;s++)o[s].computeIconLocation();for(s=0;s<this.childBlocks_.length;s++)this.childBlocks_[s].moveConnections(t,n)}},e.BlockSvg.prototype.setDragging=function(t){if(t){var n=this.getSvgRoot();n.translate_="",n.skew_="",e.draggingConnections=e.draggingConnections.concat(this.getConnections_(!0)),e.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else e.draggingConnections=[],e.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(t)},e.BlockSvg.prototype.setMovable=function(t){e.BlockSvg.superClass_.setMovable.call(this,t),this.pathObject.updateMovable(t)},e.BlockSvg.prototype.setEditable=function(t){e.BlockSvg.superClass_.setEditable.call(this,t),t=this.getIcons();for(var n=0;n<t.length;n++)t[n].updateEditable()},e.BlockSvg.prototype.setShadow=function(t){e.BlockSvg.superClass_.setShadow.call(this,t),this.applyColour()},e.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!=t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},e.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.BlockSvg.prototype.dispose=function(t,n){if(this.workspace){e.Tooltip.dispose(),e.Tooltip.unbindMouseEvents(this.pathObject.svgPath),e.utils.dom.startTextWidthCache();var o=this.workspace;if(e.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),e.ContextMenu.currentBlock==this&&e.ContextMenu.hide(),n&&this.rendered&&(this.unplug(t),e.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]);this.warningTextDb_=null}for(n=this.getIcons(),s=0;s<n.length;s++)n[s].dispose();e.BlockSvg.superClass_.dispose.call(this,!!t),e.utils.dom.removeNode(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,e.utils.dom.stopTextWidthCache()}},e.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var t=e.Xml.blockToDom(this,!0);e.Xml.deleteNext(t);var n=this.getRelativeToSurfaceXY();return t.setAttribute("x",this.RTL?-n.x:n.x),t.setAttribute("y",n.y),{xml:t,source:this.workspace,typeCounts:e.utils.getBlockTypeCounts(this,!0)}},e.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),n=0;n<t.length;n++)t[n].applyColour();for(t=0;n=this.inputList[t];t++)for(var s,o=0;s=n.fieldRow[o];o++)s.applyColour()},e.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var o,n=0;o=t[n];n++)o.rendered&&o.updateDisabled()},e.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},e.BlockSvg.prototype.setCommentText=function(t){if(!e.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=t&&(e.BlockSvg.superClass_.setCommentText.call(this,t),!!this.commentIcon_==(t=null!=t)?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},e.BlockSvg.prototype.setWarningText=function(t,n){if(!e.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var o=n||"";if(o)this.warningTextDb_[o]&&(clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o]);else for(var s in this.warningTextDb_)clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s];if(this.workspace.isDragging()){var c=this;this.warningTextDb_[o]=setTimeout(function(){c.workspace&&(delete c.warningTextDb_[o],c.setWarningText(t,o))},100)}else{if(this.isInFlyout&&(t=null),n=!1,"string"==typeof t){s=this.getSurroundParent();for(var _=null;s;)s.isCollapsed()&&(_=s),s=s.getSurroundParent();_&&_.setWarningText(e.Msg.COLLAPSED_WARNINGS_WARNING,e.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new e.Warning(this),n=!0),this.warning.setText(t,o)}else this.warning&&!o?(this.warning.dispose(),n=!0):this.warning&&(n=this.warning.getText(),this.warning.setText("",o),(s=this.warning.getText())||this.warning.dispose(),n=n!=s);n&&this.rendered&&(this.render(),this.bumpNeighbours())}},e.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!=t&&(e.BlockSvg.superClass_.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},e.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},e.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},e.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},e.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},e.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},e.BlockSvg.prototype.setColour=function(t){e.BlockSvg.superClass_.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},e.BlockSvg.prototype.setStyle=function(t){var n=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!n)throw Error("Invalid style name: "+t);this.hat=n.hat,this.pathObject.setStyle(n),this.colour_=n.colourPrimary,this.style=n,this.applyColour()},e.BlockSvg.prototype.bringToFront=function(){var t=this;do{var n=t.getSvgRoot(),o=n.parentNode,s=o.childNodes;s[s.length-1]!==n&&o.appendChild(n),t=t.getParent()}while(t)},e.BlockSvg.prototype.setPreviousStatement=function(t,n){e.BlockSvg.superClass_.setPreviousStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setNextStatement=function(t,n){e.BlockSvg.superClass_.setNextStatement.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setOutput=function(t,n){e.BlockSvg.superClass_.setOutput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.setInputsInline=function(t){e.BlockSvg.superClass_.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.removeInput=function(t,n){return t=e.BlockSvg.superClass_.removeInput.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.moveNumberedInputBefore=function(t,n){e.BlockSvg.superClass_.moveNumberedInputBefore.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours())},e.BlockSvg.prototype.appendInput_=function(t,n){return t=e.BlockSvg.superClass_.appendInput_.call(this,t,n),this.rendered&&(this.render(),this.bumpNeighbours()),t},e.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(t)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.setTracking(t),(o=o.targetBlock())&&o.setConnectionTracking(t))}},e.BlockSvg.prototype.getConnections_=function(t){var n=[];if((t||this.rendered)&&(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var o;o=this.inputList[t];t++)o.connection&&n.push(o.connection)}return n},e.BlockSvg.prototype.lastConnectionInStack=function(t){return e.BlockSvg.superClass_.lastConnectionInStack.call(this,t)},e.BlockSvg.prototype.getMatchingConnection=function(t,n){return e.BlockSvg.superClass_.getMatchingConnection.call(this,t,n)},e.BlockSvg.prototype.makeConnection_=function(t){return new e.RenderedConnection(this,t)},e.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var s,n=this.getConnections_(!1),o=0;s=n[o];o++){s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours();for(var w,c=s.neighbours(e.SNAP_RADIUS),_=0;w=c[_];_++)s.isConnected()&&w.isConnected()||w.getSourceBlock().getRootBlock()!=t&&(s.isSuperior()?w.bumpAwayFrom(s):s.bumpAwayFrom(w))}}},e.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,n=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(n),t.snapToGrid(),e.Events.setGroup(!1)},e.BUMP_DELAY/2),setTimeout(function(){e.Events.setGroup(n),t.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)},e.BlockSvg.prototype.positionNearConnection=function(t,n){t.type!=e.connectionTypes.NEXT_STATEMENT&&t.type!=e.connectionTypes.INPUT_VALUE||this.moveBy(n.x-t.x,n.y-t.y)},e.BlockSvg.prototype.getParent=function(){return e.BlockSvg.superClass_.getParent.call(this)},e.BlockSvg.prototype.getRootBlock=function(){return e.BlockSvg.superClass_.getRootBlock.call(this)},e.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,e.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==t){var n=this.getParent();n?n.render(!0):this.workspace.resizeContents()}e.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},e.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(e.MarkerManager.LOCAL_MARKER).draw()},e.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.moveToOffset(t),o.isConnected()&&o.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},e.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},e.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},e.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,n=this.width,o=this.getNextBlock();if(o){o=o.getHeightWidth();var s=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=o.height-s,n=Math.max(n,o.width)}return{height:t,width:n}},e.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},e.BlockSvg.prototype.highlightShapeForInput=function(t,n){this.pathObject.updateShapeForInputHighlight(t,n)},e.ConnectionDB=function(t){this.connections_=[],this.connectionChecker_=t},e.ConnectionDB.prototype.addConnection=function(t,n){n=this.calculateIndexForYPos_(n),this.connections_.splice(n,0,t)},e.ConnectionDB.prototype.findIndexOfConnection_=function(t,n){if(!this.connections_.length)return-1;var o=this.calculateIndexForYPos_(n);if(o>=this.connections_.length)return-1;n=t.y;for(var s=o;0<=s&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s--}for(s=o;s<this.connections_.length&&this.connections_[s].y==n;){if(this.connections_[s]==t)return s;s++}return-1},e.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var n=0,o=this.connections_.length;n<o;){var s=Math.floor((n+o)/2);if(this.connections_[s].y<t)n=s+1;else{if(!(this.connections_[s].y>t)){n=s;break}o=s}}return n},e.ConnectionDB.prototype.removeConnection=function(t,n){if(-1==(t=this.findIndexOfConnection_(t,n)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},e.ConnectionDB.prototype.getNeighbours=function(t,n){function o(V){var H=c-s[V].x,$=_-s[V].y;return Math.sqrt(H*H+$*$)<=n&&U.push(s[V]),$<n}var s=this.connections_,c=t.x,_=t.y;t=0;for(var w=s.length-2,M=w;t<M;)s[M].y<_?t=M:w=M,M=Math.floor((t+w)/2);var U=[];if(w=t=M,s.length){for(;0<=t&&o(t);)t--;do{w++}while(w<s.length&&o(w))}return U},e.ConnectionDB.prototype.isInYRange_=function(t,n,o){return Math.abs(this.connections_[t].y-n)<=o},e.ConnectionDB.prototype.searchForClosest=function(t,n,o){if(!this.connections_.length)return{connection:null,radius:n};var s=t.y,c=t.x;t.x=c+o.x,t.y=s+o.y;var _=this.calculateIndexForYPos_(t.y);o=null;for(var M,w=n,U=_-1;0<=U&&this.isInYRange_(U,t.y,n);)this.connectionChecker_.canConnect(t,M=this.connections_[U],!0,w)&&(o=M,w=M.distanceFrom(t)),U--;for(;_<this.connections_.length&&this.isInYRange_(_,t.y,n);)this.connectionChecker_.canConnect(t,M=this.connections_[_],!0,w)&&(o=M,w=M.distanceFrom(t)),_++;return t.x=c,t.y=s,{connection:o,radius:w}},e.ConnectionDB.init=function(t){var n=[];return n[e.connectionTypes.INPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.OUTPUT_VALUE]=new e.ConnectionDB(t),n[e.connectionTypes.NEXT_STATEMENT]=new e.ConnectionDB(t),n[e.connectionTypes.PREVIOUS_STATEMENT]=new e.ConnectionDB(t),n},e.Events.ThemeChange=function(t,n){e.Events.ThemeChange.superClass_.constructor.call(this,n),this.themeName=t},e.utils.object.inherits(e.Events.ThemeChange,e.Events.UiBase),e.Events.ThemeChange.prototype.type=e.Events.THEME_CHANGE,e.Events.ThemeChange.prototype.toJson=function(){var t=e.Events.ThemeChange.superClass_.toJson.call(this);return t.themeName=this.themeName,t},e.Events.ThemeChange.prototype.fromJson=function(t){e.Events.ThemeChange.superClass_.fromJson.call(this,t),this.themeName=t.themeName},e.registry.register(e.registry.Type.EVENT,e.Events.THEME_CHANGE,e.Events.ThemeChange),e.Events.ViewportChange=function(t,n,o,s,c){e.Events.ViewportChange.superClass_.constructor.call(this,s),this.viewTop=t,this.viewLeft=n,this.scale=o,this.oldScale=c},e.utils.object.inherits(e.Events.ViewportChange,e.Events.UiBase),e.Events.ViewportChange.prototype.type=e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange.prototype.toJson=function(){var t=e.Events.ViewportChange.superClass_.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},e.Events.ViewportChange.prototype.fromJson=function(t){e.Events.ViewportChange.superClass_.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},e.registry.register(e.registry.Type.EVENT,e.Events.VIEWPORT_CHANGE,e.Events.ViewportChange),e.IMetricsManager=function(){},e.MetricsManager=function(t){this.workspace_=t},e.MetricsManager.prototype.getDimensionsPx_=function(t){var n=0,o=0;return t&&(n=t.getWidth(),o=t.getHeight()),new e.utils.Size(n,o)},e.MetricsManager.prototype.getFlyoutMetrics=function(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},e.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},e.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),s=!!this.workspace_.getToolbox(),c=!!this.workspace_.getFlyout(!0),_=s?n.position:o.position,w=_==e.utils.toolbox.Position.LEFT;return _=_==e.utils.toolbox.Position.TOP,s&&w?t=n.width:c&&w&&(t=o.width),w=0,s&&_?w=n.height:c&&_&&(w=o.height),{top:w,left:t}},e.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var n=this.getSvgMetrics(),o=this.getToolboxMetrics(),s=this.getFlyoutMetrics(!0),c=this.workspace_.getToolbox()?o.position:s.position;return this.workspace_.getToolbox()?c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=o.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=o.width):this.workspace_.getFlyout(!0)&&(c==e.utils.toolbox.Position.TOP||c==e.utils.toolbox.Position.BOTTOM?n.height-=s.height:(c==e.utils.toolbox.Position.LEFT||c==e.utils.toolbox.Position.RIGHT)&&(n.width-=s.width)),{height:n.height/t,width:n.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},e.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*t,width:(n.right-n.left)*t,top:n.top*t,left:n.left*t}},e.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},e.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var n=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var s={};return o||(s.top=t.top,s.bottom=t.top+t.height),n||(s.left=t.left,s.right=t.left+t.width),s},e.MetricsManager.prototype.getPaddedContent_=function(t,n){var o=n.top+n.height,s=n.left+n.width,c=t.width,_=c/2,w=(t=t.height)/2;return{top:Math.min(n.top-w,o-t),bottom:Math.max(o+w,n.top+t),left:Math.min(n.left-_,s-c),right:Math.max(s+_,n.left+c)}},e.MetricsManager.prototype.getScrollMetrics=function(t,n,o){t=t?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var s=o||this.getContentMetrics();o=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,s);var c=void 0!==o.left?o.left:n.left;return{top:(s=void 0!==o.top?o.top:n.top)/t,left:c/t,width:((void 0!==o.right?o.right:n.right)-c)/t,height:((void 0!==o.bottom?o.bottom:n.bottom)-s)/t}},e.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},e.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),s=this.getAbsoluteMetrics(),c=this.getViewMetrics(),_=this.getContentMetrics(),w=this.getScrollMetrics(!1,c,_);return{contentHeight:_.height,contentWidth:_.width,contentTop:_.top,contentLeft:_.left,scrollHeight:w.height,scrollWidth:w.width,scrollTop:w.top,scrollLeft:w.left,viewHeight:c.height,viewWidth:c.width,viewTop:c.top,viewLeft:c.left,absoluteTop:s.top,absoluteLeft:s.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:n.width,flyoutHeight:n.height}},e.registry.register(e.registry.Type.METRICS_MANAGER,e.registry.DEFAULT,e.MetricsManager),e.FlyoutMetricsManager=function(t,n){this.flyout_=n,e.FlyoutMetricsManager.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.FlyoutMetricsManager,e.MetricsManager),e.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch(n){t={height:0,y:0,width:0,x:0}}return t},e.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var n=this.getBoundingBox_();return{height:n.height*(t=t?1:this.workspace_.scale),width:n.width*t,top:n.y*t,left:n.x*t}},e.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,n,o){return{height:((n=o||this.getContentMetrics()).height+2*(o=this.flyout_.MARGIN*this.workspace_.scale))/(t=t?this.workspace_.scale:1),width:(n.width+n.left+o)/t,top:0,left:0}},e.ThemeManager=function(t,n){this.workspace_=t,this.theme_=n,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},e.ThemeManager.prototype.getTheme=function(){return this.theme_},e.ThemeManager.prototype.setTheme=function(t){var o,n=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(n&&e.utils.dom.removeClass(t,n.getClassName()),e.utils.dom.addClass(t,this.theme_.getClassName())),n=0;t=this.subscribedWorkspaces_[n];n++)t.refreshTheme();for(n=0,t=Object.keys(this.componentDB_);o=t[n];n++)for(var c,s=0;c=this.componentDB_[o][s];s++){var _=c.element;c=c.propertyName;var w=this.theme_&&this.theme_.getComponentStyle(o);_.style[c]=w||""}e.hideChaff()},e.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},e.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(0>(t=this.subscribedWorkspaces_.indexOf(t)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(t,1)},e.ThemeManager.prototype.subscribe=function(t,n,o){this.componentDB_[n]||(this.componentDB_[n]=[]),this.componentDB_[n].push({element:t,propertyName:o}),n=this.theme_&&this.theme_.getComponentStyle(n),t.style[o]=n||""},e.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var s,n=Object.keys(this.componentDB_),o=0;s=n[o];o++){for(var c=this.componentDB_[s],_=c.length-1;0<=_;_--)c[_].element===t&&c.splice(_,1);this.componentDB_[s].length||delete this.componentDB_[s]}},e.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},e.TouchGesture=function(t,n){e.TouchGesture.superClass_.constructor.call(this,t,n),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},e.utils.object.inherits(e.TouchGesture,e.Gesture),e.TouchGesture.ZOOM_IN_MULTIPLIER=5,e.TouchGesture.ZOOM_OUT_MULTIPLIER=6,e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,e.TouchGesture.superClass_.doStart.call(this,t),!this.isEnding_&&e.Touch.isTouchEvent(t)&&this.handleTouchStart(t)},e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=e.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=e.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=e.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&e.Touch.isTouchEvent(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&e.longStop_())},e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleMove.call(this,t):this.isMultiTouch()?(e.Touch.isTouchEvent(t)&&this.handleTouchMove(t),e.longStop_()):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handleUp=function(t){e.Touch.isTouchEvent(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?e.Touch.shouldHandleEvent(t)&&e.TouchGesture.superClass_.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},e.TouchGesture.prototype.dispose=function(){e.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&e.browserEvents.unbind(this.onStartWrapper_)},e.TouchGesture.prototype.handleTouchStart=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),2==(n=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]]),this.isMultiTouch_=!0,t.preventDefault())},e.TouchGesture.prototype.handleTouchMove=function(t){var n=e.Touch.getTouchIdentifierFromEvent(t);this.cachedPoints_[n]=this.getTouchPoint(t),n=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===n.length?this.handlePinch_(t):e.TouchGesture.superClass_.handleMove.call(this,t)},e.TouchGesture.prototype.handlePinch_=function(t){var n=Object.keys(this.cachedPoints_);if(n=e.utils.Coordinate.distance(this.cachedPoints_[n[0]],this.cachedPoints_[n[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=n-this.previousScale_;o=0<o?o*e.TouchGesture.ZOOM_IN_MULTIPLIER:o*e.TouchGesture.ZOOM_OUT_MULTIPLIER;var s=this.startWorkspace_,c=e.utils.mouseToSvg(t,s.getParentSvg(),s.getInverseScreenCTM());s.zoom(c.x,c.y,o)}this.previousScale_=n,t.preventDefault()},e.TouchGesture.prototype.handleTouchEnd=function(t){t=e.Touch.getTouchIdentifierFromEvent(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new e.utils.Coordinate(t.pageX?t.pageX:t.changedTouches[0].pageX,t.pageY?t.pageY:t.changedTouches[0].pageY):null},e.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null)},e.WorkspaceAudio.prototype.lastSound_=null,e.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},e.WorkspaceAudio.prototype.load=function(t,n){if(t.length){try{var o=new e.utils.global.Audio}catch(M){return}for(var s,c=0;c<t.length;c++){var _=t[c],w=_.match(/\.(\w+)$/);if(w&&o.canPlayType("audio/"+w[1])){s=new e.utils.global.Audio(_);break}}s&&s.play&&(this.SOUNDS_[n]=s)}},e.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var n=this.SOUNDS_[t];n.volume=.01;var o=n.play();if(void 0!==o?o.then(n.pause).catch(function(){}):n.pause(),e.utils.userAgent.IPAD||e.utils.userAgent.IPHONE)break}},e.WorkspaceAudio.prototype.play=function(t,n){var o=this.SOUNDS_[t];o?(t=new Date,null!=this.lastSound_&&t-this.lastSound_<e.SOUND_LIMIT||(this.lastSound_=t,(o=e.utils.userAgent.IPAD||e.utils.userAgent.ANDROID?o:o.cloneNode()).volume=void 0===n?1:n,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,n)},e.WorkspaceSvg=function(t,n,o){e.WorkspaceSvg.superClass_.constructor.call(this,t),this.metricsManager_=new(e.registry.getClassFromOptions(e.registry.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||e.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new e.ComponentManager,this.connectionDBList=e.ConnectionDB.init(this.connectionChecker),n&&(this.blockDragSurface_=n),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&e.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new e.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new e.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new e.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),e.Variables&&e.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_CATEGORY_NAME,e.Variables.flyoutCategory),e.VariablesDynamic&&e.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(e.VARIABLE_DYNAMIC_CATEGORY_NAME,e.VariablesDynamic.flyoutCategory),e.Procedures&&e.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(e.PROCEDURE_CATEGORY_NAME,e.Procedures.flyoutCategory),this.addChangeListener(e.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new e.ThemeManager(this,this.options.theme||e.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=e.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new e.utils.Size(0,0)},e.utils.object.inherits(e.WorkspaceSvg,e.Workspace),e.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,e.WorkspaceSvg.prototype.rendered=!0,e.WorkspaceSvg.prototype.isVisible_=!0,e.WorkspaceSvg.prototype.isFlyout=!1,e.WorkspaceSvg.prototype.isMutator=!1,e.WorkspaceSvg.prototype.resizesEnabled_=!0,e.WorkspaceSvg.prototype.scrollX=0,e.WorkspaceSvg.prototype.scrollY=0,e.WorkspaceSvg.prototype.startScrollX=0,e.WorkspaceSvg.prototype.startScrollY=0,e.WorkspaceSvg.prototype.dragDeltaXY_=null,e.WorkspaceSvg.prototype.scale=1,e.WorkspaceSvg.prototype.oldScale_=1,e.WorkspaceSvg.prototype.oldTop_=0,e.WorkspaceSvg.prototype.oldLeft_=0,e.WorkspaceSvg.prototype.trashcan=null,e.WorkspaceSvg.prototype.scrollbar=null,e.WorkspaceSvg.prototype.flyout_=null,e.WorkspaceSvg.prototype.toolbox_=null,e.WorkspaceSvg.prototype.currentGesture_=null,e.WorkspaceSvg.prototype.blockDragSurface_=null,e.WorkspaceSvg.prototype.workspaceDragSurface_=null,e.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,e.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,e.WorkspaceSvg.prototype.injectionDiv_=null,e.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,e.WorkspaceSvg.prototype.targetWorkspace=null,e.WorkspaceSvg.prototype.inverseScreenCTM_=null,e.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,e.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},e.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},e.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},e.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},e.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},e.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},e.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},e.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},e.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},e.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},e.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},e.WorkspaceSvg.prototype.setTheme=function(t){t||(t=e.Themes.Classic),this.themeManager_.setTheme(t)},e.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(n){return!!n.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new(e.Events.get(e.Events.THEME_CHANGE))(this.getTheme().name,this.id);e.Events.fire(t)},e.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var o,n=0;o=t[n];n++){var s=o.getStyleName();s&&(o.setStyle(s),o.mutator&&o.mutator.updateBlockStyle())}},e.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},e.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},e.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},e.WorkspaceSvg.prototype.getSvgXY=function(t){var n=0,o=0,s=1;(e.utils.dom.containsNode(this.getCanvas(),t)||e.utils.dom.containsNode(this.getBubbleCanvas(),t))&&(s=this.scale);do{var c=e.utils.getRelativeXY(t);(t==this.getCanvas()||t==this.getBubbleCanvas())&&(s=1),n+=c.x*s,o+=c.y*s,t=t.parentNode}while(t&&t!=this.getParentSvg());return new e.utils.Coordinate(n,o)},e.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new e.utils.Size(t.width,t.height)},e.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return e.utils.getInjectionDivXY_(this.getCanvas())},e.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if(-1!=(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},e.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},e.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"==t&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(e.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(e.registry.getClassFromOptions(e.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=e.registry.getClassFromOptions(e.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},e.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),e.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&e.utils.dom.removeNode(t.parentNode)}this.resizeHandlerWrapper_&&(e.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},e.WorkspaceSvg.prototype.newBlock=function(t,n){return new e.BlockSvg(this,t,n)},e.WorkspaceSvg.prototype.addTrashcan=function(){if(!e.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new e.Trashcan(this);var t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},e.WorkspaceSvg.prototype.addZoomControls=function(){if(!e.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new e.ZoomControls(this);var t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)},e.WorkspaceSvg.prototype.addFlyout=function(t){var n=new e.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},e.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},e.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},e.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},e.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},e.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var c,t=this.componentManager_.getComponents(e.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),o=[],s=0;c=t[s];s++)c.position(n,o),(c=c.getBoundingRectangle())&&o.push(c);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},e.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=e.utils.getDocumentScroll();e.utils.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},e.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},e.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,n){var o=this.getParentSvg();t&&(this.cachedParentSvgSize_.width=t,o.cachedWidth_=t),n&&(this.cachedParentSvgSize_.height=n,o.cachedHeight_=n)},e.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},e.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if("svg"==t.tagName){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},e.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(e.Events.isEnabled()){var t=this.scale,n=-this.scrollY,o=-this.scrollX;if(!(t==this.oldScale_&&1>Math.abs(n-this.oldTop_)&&1>Math.abs(o-this.oldLeft_))){var s=new(e.Events.get(e.Events.VIEWPORT_CHANGE))(n,o,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=n,this.oldLeft_=o,e.Events.fire(s)}}},e.WorkspaceSvg.prototype.translate=function(t,n){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,n);else{var o="translate("+t+","+n+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,n,this.scale),this.grid_&&this.grid_.moveTo(t,n),this.maybeFireViewportChangeEvent()},e.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",t="translate("+t.x+","+t.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",t)}},e.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,n=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),s=e.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,n,o,this.scale),this.workspaceDragSurface_.translateSurface(s.x,s.y)}},e.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},e.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},e.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){for(var n=(t=this.getAllBlocks(!1)).length-1;0<=n;n--)t[n].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else e.hideChaff(!0)},e.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),n=t.length-1;0<=n;n--)t[n].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),n=0;n<t.length;n++)t[n].render(!1);this.markerManager_.updateMarkers()},e.WorkspaceSvg.prototype.highlightBlock=function(t,n){if(void 0===n){for(var s,o=0;s=this.highlightedBlocks_[o];o++)s.setHighlighted(!1);this.highlightedBlocks_.length=0}(s=t?this.getBlockById(t):null)&&((t=void 0===n||n)?-1==this.highlightedBlocks_.indexOf(s)&&this.highlightedBlocks_.push(s):e.utils.arrayRemove(this.highlightedBlocks_,s),s.setHighlighted(t))},e.WorkspaceSvg.prototype.paste=function(t){!this.rendered||!t.tagName||t.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==t.tagName.toLowerCase()?this.pasteWorkspaceComment_(t):this.pasteBlock_(t))},e.WorkspaceSvg.prototype.pasteBlock_=function(t){e.Events.disable();try{var n=e.Xml.domToBlock(t,this),o=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);if(!isNaN(o)&&!isNaN(s)){this.RTL&&(o=-o);do{t=!1;for(var w,c=this.getAllBlocks(!1),_=0;w=c[_];_++){var M=w.getRelativeToSurfaceXY();if(1>=Math.abs(o-M.x)&&1>=Math.abs(s-M.y)){t=!0;break}}if(!t){var V,U=n.getConnections_(!1);for(_=0;V=U[_];_++)if(V.closest(e.SNAP_RADIUS,new e.utils.Coordinate(o,s)).connection){t=!0;break}}t&&(o=this.RTL?o-e.SNAP_RADIUS:o+e.SNAP_RADIUS,s+=2*e.SNAP_RADIUS)}while(t);n.moveBy(o,s)}}finally{e.Events.enable()}e.Events.isEnabled()&&!n.isShadow()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n)),n.select()},e.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){e.Events.disable();try{var n=e.WorkspaceCommentSvg.fromXml(t,this),o=parseInt(t.getAttribute("x"),10),s=parseInt(t.getAttribute("y"),10);isNaN(o)||isNaN(s)||(this.RTL&&(o=-o),n.moveBy(o+50,s+50))}finally{e.Events.enable()}e.Events.isEnabled()&&e.WorkspaceComment.fireCreateEvent(n),n.select()},e.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},e.WorkspaceSvg.prototype.renameVariableById=function(t,n){e.WorkspaceSvg.superClass_.renameVariableById.call(this,t,n),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.deleteVariableById=function(t){e.WorkspaceSvg.superClass_.deleteVariableById.call(this,t),this.refreshToolboxSelection()},e.WorkspaceSvg.prototype.createVariable=function(t,n,o){return t=e.WorkspaceSvg.superClass_.createVariable.call(this,t,n,o),this.refreshToolboxSelection(),t},e.WorkspaceSvg.prototype.recordDeleteAreas=function(){e.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},e.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(e.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var o,n=0;o=t[n];n++){var s=o.getClientRect();s&&this.dragTargetAreas_.push({component:o,clientRect:s})}},e.WorkspaceSvg.prototype.getDragTarget=function(t){for(var o,n=0;o=this.dragTargetAreas_[n];n++)if(o.clientRect.contains(t.clientX,t.clientY))return o.component;return null},e.WorkspaceSvg.prototype.onMouseDown_=function(t){var n=this.getGesture(t);n&&n.handleWsStart(t,this)},e.WorkspaceSvg.prototype.startDrag=function(t,n){(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=e.utils.Coordinate.difference(n,t)},e.WorkspaceSvg.prototype.moveDrag=function(t){return(t=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,e.utils.Coordinate.sum(this.dragDeltaXY_,t)},e.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},e.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},e.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},e.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},e.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},e.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(e.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var s=e.utils.getScrollDeltaPixels(t);!n||!t.ctrlKey&&o?(n=this.scrollX-s.x,o=this.scrollY-s.y,t.shiftKey&&!s.x&&(n=this.scrollX-s.y,o=this.scrollY),this.scroll(n,o)):(s=-s.y/50,n=e.utils.mouseToSvg(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,s)),t.preventDefault()}}},e.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new e.utils.Rect(0,0,0,0);for(var n=t[0].getBoundingRectangle(),o=1;o<t.length;o++){var s=t[o];s.isInsertionMarker&&s.isInsertionMarker()||((s=s.getBoundingRectangle()).top<n.top&&(n.top=s.top),s.bottom>n.bottom&&(n.bottom=s.bottom),s.left<n.left&&(n.left=s.left),s.right>n.right&&(n.right=s.right))}return n},e.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),e.Events.setGroup(!0);for(var s,t=this.getTopBlocks(!0),n=0,o=0;s=t[o];o++)if(s.isMovable()){var c=s.getRelativeToSurfaceXY();s.moveBy(-c.x,n-c.y),s.snapToGrid(),n=s.getRelativeToSurfaceXY().y+s.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}e.Events.setGroup(!1),this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var n=e.ContextMenuRegistry.registry.getContextMenuOptions(e.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(n,t),e.ContextMenu.show(t,n,this.RTL)}},e.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=e.utils.toolbox.convertToolboxDefToJson(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(e.utils.toolbox.hasCategories(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},e.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(e.mainWorkspace=this,this.setBrowserFocus())},e.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(t){try{this.getParentSvg().parentNode.setActive()}catch(n){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},e.WorkspaceSvg.prototype.zoom=function(t,n,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);var s=this.scale*o;if(this.scale!=s){s>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:s<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var c=this.getCanvas().getCTM(),_=this.getParentSvg().createSVGPoint();_.x=t,_.y=n,_=_.matrixTransform(c.inverse()),c=c.translate((t=_.x)*(1-o),(n=_.y)*(1-o)).scale(o),this.scrollX=c.e,this.scrollY=c.f,this.setScale(s)}},e.WorkspaceSvg.prototype.zoomCenter=function(t){var n=this.getMetrics();if(this.flyout_){var o=n.svgWidth?n.svgWidth/2:0;n=n.svgHeight?n.svgHeight/2:0}else o=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop;this.zoom(o,n,t)},e.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),n=t.viewWidth;t=t.viewHeight;var o=this.getBlocksBoundingBox(),s=o.right-o.left;if(o=o.bottom-o.top,s){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(n+=this.flyout_.getWidth(),s+=this.flyout_.getWidth()/this.scale)),n/=s,t/=o,e.Events.disable();try{this.setScale(Math.min(n,t)),this.scrollCenter()}finally{e.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.beginCanvasTransition=function(){e.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.endCanvasTransition=function(){e.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),e.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},e.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),n=(t.scrollWidth-t.viewWidth)/2,o=(t.scrollHeight-t.viewHeight)/2;this.scroll(n=-n-t.scrollLeft,o=-o-t.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var n=t.getRelativeToSurfaceXY(),o=t.getHeightWidth(),s=this.scale;t=(n.x+(this.RTL?-1:1)*o.width/2)*s,n=(n.y+o.height/2)*s,o=this.getMetrics(),this.scroll(-(t-o.viewWidth/2),-(n-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},e.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,e.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},e.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},e.WorkspaceSvg.prototype.scroll=function(t,n){e.hideChaff(!0);var o=this.getMetrics();t=Math.min(t,-o.scrollLeft),n=Math.min(n,-o.scrollTop);var s=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);t=Math.max(t,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),n=Math.max(n,-s),this.scrollX=t,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(t+o.scrollLeft),-(n+o.scrollTop),!1),this.translate(t+=o.absoluteLeft,n+=o.absoluteTop)},e.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var n=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*t.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)},e.WorkspaceSvg.prototype.getBlockById=function(t){return e.WorkspaceSvg.superClass_.getBlockById.call(this,t)},e.WorkspaceSvg.prototype.getTopBlocks=function(t){return e.WorkspaceSvg.superClass_.getTopBlocks.call(this,t)},e.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopBlock.call(this,t)},e.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopBlock.call(this,t)},e.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),e.WorkspaceSvg.superClass_.addTopComment.call(this,t)},e.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),e.WorkspaceSvg.superClass_.removeTopComment.call(this,t)},e.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},e.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){e.utils.arrayRemove(this.topBoundedElements_,t)},e.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},e.WorkspaceSvg.prototype.setResizesEnabled=function(t){var n=!this.resizesEnabled_&&t;this.resizesEnabled_=t,n&&this.resizeContents()},e.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),e.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},e.WorkspaceSvg.prototype.registerButtonCallback=function(t,n){if("function"!=typeof n)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=n},e.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},e.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},e.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,n){if("function"!=typeof n)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=n},e.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},e.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},e.WorkspaceSvg.prototype.getGesture=function(t){var n="mousedown"==t.type||"touchstart"==t.type||"pointerdown"==t.type,o=this.currentGesture_;return o?n&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:n?this.currentGesture_=new e.TouchGesture(t,this):null},e.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},e.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},e.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},e.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},e.inject=function(t,n){if(e.checkBlockColourConstants(),"string"==typeof t&&(t=document.getElementById(t)||document.querySelector(t)),!t||!e.utils.dom.containsNode(document,t))throw Error("Error: container is not in current document.");n=new e.Options(n||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,e.utils.aria.setState(o,e.utils.aria.State.LABEL,e.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(o),t=e.createDom_(o,n);var s=new e.BlockDragSurfaceSvg(o),c=new e.WorkspaceDragSurfaceSvg(o),_=e.createMainWorkspace_(t,n,s,c);return e.init_(_),e.mainWorkspace=_,e.svgResize(_),o.addEventListener("focusin",function(){e.mainWorkspace=_}),_},e.createDom_=function(t,n){t.setAttribute("dir","LTR"),e.Css.inject(n.hasCss,n.pathToMedia),t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var o=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),s=String(Math.random()).substring(2);return n.gridPattern=e.Grid.createDom(s,n.gridOptions,o),t},e.createMainWorkspace_=function(t,n,o,s){return n.parentWorkspace=null,(n=new e.WorkspaceSvg(n,o,s)).scale=(o=n.options).zoomOptions.startScale,t.appendChild(n.createDom("blocklyMainBackground")),e.utils.dom.addClass(n.getInjectionDiv(),n.getRenderer().getClassName()),e.utils.dom.addClass(n.getInjectionDiv(),n.getTheme().getClassName()),!o.hasCategories&&o.languageTree&&(s=n.addFlyout(e.utils.Svg.SVG),e.utils.dom.insertAfter(s,t)),o.hasTrashcan&&n.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&n.addZoomControls(),n.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),n.translate(0,0),n.addChangeListener(e.bumpIntoBoundsHandler_(n)),e.svgResize(n),e.WidgetDiv.createDom(),e.DropDownDiv.createDom(),e.Tooltip.createDom(),n},e.extractObjectFromEvent_=function(t,n){var o=null;switch(n.type){case e.Events.BLOCK_CREATE:case e.Events.BLOCK_MOVE:(o=t.getBlockById(n.blockId))&&(o=o.getRootBlock());break;case e.Events.COMMENT_CREATE:case e.Events.COMMENT_MOVE:o=t.getCommentById(n.commentId)}return o},e.bumpTopObjectsIntoBounds_=function(t){var n=t.getMetricsManager();if(n.hasFixedEdges()&&!t.isDragging()){n=n.getScrollMetrics(!0);for(var c,o=t.getTopBoundedElements(),s=0;c=o[s];s++)e.bumpObjectIntoBounds_(t,n,c)}},e.bumpIntoBoundsHandler_=function(t){return function(n){var o=t.getMetricsManager();if(o.hasFixedEdges()&&!t.isDragging())if(-1!==e.Events.BUMP_EVENTS.indexOf(n.type)){o=o.getScrollMetrics(!0);var s=e.extractObjectFromEvent_(t,n);if(s){var c=e.Events.getGroup();e.Events.setGroup(n.group),e.bumpObjectIntoBounds_(t,o,s)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==c&&e.Events.setGroup(c)}}else n.type===e.Events.VIEWPORT_CHANGE&&n.scale>n.oldScale&&e.bumpTopObjectsIntoBounds_(t)}},e.bumpObjectIntoBounds_=function(t,n,o){var s=o.getBoundingRectangle(),c=s.right-s.left,_=e.utils.math.clamp(n.top,s.top,n.top+n.height-(s.bottom-s.top))-s.top,w=n.left;return n=n.left+n.width-c,t.RTL?w=Math.min(n,w):n=Math.max(w,n),!(!(t=e.utils.math.clamp(w,s.left,n)-s.left)&&!_||(o.moveBy(t,_),0))},e.init_=function(t){var n=t.options,o=t.getParentSvg();if(e.browserEvents.conditionalBind(o.parentNode,"contextmenu",null,function(c){e.utils.isTargetInput(c)||c.preventDefault()}),o=e.browserEvents.conditionalBind(window,"resize",null,function(){e.hideChaff(!0),e.svgResize(t),e.bumpTopObjectsIntoBounds_(t)}),t.setResizeHandlerWrapper(o),e.inject.bindDocumentEvents_(),n.languageTree){o=t.getToolbox();var s=t.getFlyout(!0);o?o.init():s&&(s.init(t),s.show(n.languageTree),"function"==typeof s.scrollToStart&&s.scrollToStart())}n.hasTrashcan&&t.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&t.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(t.scrollbar=new e.ScrollbarPair(t,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.horizontal,!0===n.moveOptions.scrollbars||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),n.hasSounds&&e.inject.loadSounds_(n.pathToMedia,t)},e.inject.bindDocumentEvents_=function(){e.documentEventsBound_||(e.browserEvents.conditionalBind(document,"scroll",null,function(){for(var o,t=e.Workspace.getAll(),n=0;o=t[n];n++)o.updateInverseScreenCTM&&o.updateInverseScreenCTM()}),e.browserEvents.conditionalBind(document,"keydown",null,e.onKeyDown),e.browserEvents.bind(document,"touchend",null,e.longStop_),e.browserEvents.bind(document,"touchcancel",null,e.longStop_),e.utils.userAgent.IPAD&&e.browserEvents.conditionalBind(window,"orientationchange",document,function(){e.svgResize(e.getMainWorkspace())})),e.documentEventsBound_=!0},e.inject.loadSounds_=function(t,n){var o=n.getAudioManager();o.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),o.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),o.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var s=[];t=function(){for(;s.length;)e.browserEvents.unbind(s.pop());o.preload()},s.push(e.browserEvents.conditionalBind(document,"mousemove",null,t,!0)),s.push(e.browserEvents.conditionalBind(document,"touchstart",null,t,!0))},e.Names=function(t,n){if(this.variablePrefix_=n||"",this.reservedDict_=Object.create(null),t)for(t=t.split(","),n=0;n<t.length;n++)this.reservedDict_[t[n]]=!0;this.reset()},e.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",e.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},e.Names.prototype.setVariableMap=function(t){this.variableMap_=t},e.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},e.Names.prototype.populateVariables=function(t){t=e.Variables.allUsedVarModels(t);for(var n=0;n<t.length;n++)this.getName(t[n].getId(),e.VARIABLE_CATEGORY_NAME)},e.Names.prototype.populateProcedures=function(t){t=(t=e.Procedures.allProcedures(t))[0].concat(t[1]);for(var n=0;n<t.length;n++)this.getName(t[n][0],e.PROCEDURE_CATEGORY_NAME)},e.Names.prototype.getName=function(t,n){var o=t;n==e.VARIABLE_CATEGORY_NAME&&(t=this.getNameForUserVariable_(t))&&(o=t),t=o.toLowerCase();var s=n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";n in this.db_||(this.db_[n]=Object.create(null));var c=this.db_[n];return t in c?s+c[t]:(n=this.getDistinctName(o,n),c[t]=n.substr(s.length),n)},e.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},e.Names.prototype.getDistinctName=function(t,n){t=this.safeName_(t);for(var o="";this.dbReverse_[t+o]||t+o in this.reservedDict_;)o=o?o+1:2;return this.dbReverse_[t+=o]=!0,(n==e.VARIABLE_CATEGORY_NAME||n==e.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+t},e.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(t[0])&&(t="my_"+t)):t=e.Msg.UNNAMED_KEY||"unnamed",t},e.Names.equals=function(t,n){return t.toLowerCase()==n.toLowerCase()},e.Procedures={},e.Procedures.NAME_TYPE=e.PROCEDURE_CATEGORY_NAME,e.Procedures.DEFAULT_ARG="x",e.Procedures.allProcedures=function(t){var n=t.getBlocksByType("procedures_defnoreturn",!1).map(function(o){return o.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(o){return o.getProcedureDef()}),n.sort(e.Procedures.procTupleComparator_),t.sort(e.Procedures.procTupleComparator_),[n,t]},e.Procedures.procTupleComparator_=function(t,n){return t[0].localeCompare(n[0],void 0,{sensitivity:"base"})},e.Procedures.findLegalName=function(t,n){if(n.isInFlyout)return t;for(t=t||e.Msg.UNNAMED_KEY||"unnamed";!e.Procedures.isLegalName_(t,n.workspace,n);){var o=t.match(/^(.*?)(\d+)$/);t=o?o[1]+(parseInt(o[2],10)+1):t+"2"}return t},e.Procedures.isLegalName_=function(t,n,o){return!e.Procedures.isNameUsed(t,n,o)},e.Procedures.isNameUsed=function(t,n,o){n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s]!=o&&n[s].getProcedureDef){var c=n[s].getProcedureDef();if(e.Names.equals(c[0],t))return!0}return!1},e.Procedures.rename=function(t){t=t.trim();var n=e.Procedures.findLegalName(t,this.getSourceBlock()),o=this.getValue();if(o!=t&&o!=n){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var s=0;s<t.length;s++)t[s].renameProcedure&&t[s].renameProcedure(o,n)}return n},e.Procedures.flyoutCategory=function(t){function n(_,w){for(var M=0;M<_.length;M++){var U=_[M][0],V=_[M][1],H=e.utils.xml.createElement("block");H.setAttribute("type",w),H.setAttribute("gap",16);var $=e.utils.xml.createElement("mutation");for($.setAttribute("name",U),H.appendChild($),U=0;U<V.length;U++){var pt=e.utils.xml.createElement("arg");pt.setAttribute("name",V[U]),$.appendChild(pt)}o.push(H)}}var o=[];if(e.Blocks.procedures_defnoreturn){var s=e.utils.xml.createElement("block");s.setAttribute("type","procedures_defnoreturn"),s.setAttribute("gap",16);var c=e.utils.xml.createElement("field");c.setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),s.appendChild(c),o.push(s)}return e.Blocks.procedures_defreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),s.setAttribute("gap",16),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),c.appendChild(e.utils.xml.createTextNode(e.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),s.appendChild(c),o.push(s)),e.Blocks.procedures_ifreturn&&((s=e.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),s.setAttribute("gap",16),o.push(s)),o.length&&o[o.length-1].setAttribute("gap",24),n((t=e.Procedures.allProcedures(t))[0],"procedures_callnoreturn"),n(t[1],"procedures_callreturn"),o},e.Procedures.updateMutatorFlyout_=function(t){for(var c,n=[],o=t.getBlocksByType("procedures_mutatorarg",!1),s=0;c=o[s];s++)n.push(c.getFieldValue("NAME"));o=e.utils.xml.createElement("xml"),(s=e.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(c=e.utils.xml.createElement("field")).setAttribute("name","NAME"),n=e.Variables.generateUniqueNameFromOptions(e.Procedures.DEFAULT_ARG,n),n=e.utils.xml.createTextNode(n),c.appendChild(n),s.appendChild(c),o.appendChild(s),t.updateToolbox(o)},e.Procedures.mutatorOpenListener=function(t){if(t.type==e.Events.BUBBLE_OPEN&&"mutator"===t.bubbleType&&t.isOpen){var n=(t=e.Workspace.getById(t.workspaceId).getBlockById(t.blockId)).type;("procedures_defnoreturn"==n||"procedures_defreturn"==n)&&(t=t.mutator.getWorkspace(),e.Procedures.updateMutatorFlyout_(t),t.addChangeListener(e.Procedures.mutatorChangeListener_))}},e.Procedures.mutatorChangeListener_=function(t){(t.type==e.Events.BLOCK_CREATE||t.type==e.Events.BLOCK_DELETE||t.type==e.Events.BLOCK_CHANGE)&&(t=e.Workspace.getById(t.workspaceId),e.Procedures.updateMutatorFlyout_(t))},e.Procedures.getCallers=function(t,n){var o=[];n=n.getAllBlocks(!1);for(var s=0;s<n.length;s++)if(n[s].getProcedureCall){var c=n[s].getProcedureCall();c&&e.Names.equals(c,t)&&o.push(n[s])}return o},e.Procedures.mutateCallers=function(t){var c,n=e.Events.recordUndo,o=t.getProcedureDef()[0],s=t.mutationToDom(!0);for(t=e.Procedures.getCallers(o,t.workspace),o=0;c=t[o];o++){var _=c.mutationToDom();_=_&&e.Xml.domToText(_),c.domToMutation(s);var w=c.mutationToDom();_!=(w=w&&e.Xml.domToText(w))&&(e.Events.recordUndo=!1,e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(c,"mutation",null,_,w)),e.Events.recordUndo=n)}},e.Procedures.getDefinition=function(t,n){n=n.getAllBlocks(!1);for(var o=0;o<n.length;o++)if(n[o].getProcedureDef){var s=n[o].getProcedureDef();if(s&&e.Names.equals(s[0],t))return n[o]}return null},e.ShortcutRegistry=function(){e.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},e.ShortcutRegistry.modifierKeys={Shift:e.utils.KeyCodes.SHIFT,Control:e.utils.KeyCodes.CTRL,Alt:e.utils.KeyCodes.ALT,Meta:e.utils.KeyCodes.META},e.ShortcutRegistry.prototype.register=function(t,n){if(this.registry_[t.name]&&!n)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},e.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},e.ShortcutRegistry.prototype.addKeyMapping=function(t,n,o){t=String(t);var s=this.keyMap_[t];if(s&&!o)throw Error('Shortcut with name "'+n+'" collides with shortcuts '+s.toString());s&&o?s.unshift(n):this.keyMap_[t]=[n]},e.ShortcutRegistry.prototype.removeKeyMapping=function(t,n,o){var s=this.keyMap_[t];if(!s&&!o)return console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1;var c=s.indexOf(n);return-1<c?(s.splice(c,1),0==s.length&&delete this.keyMap_[t],!0):(o||console.warn('No keyboard shortcut with name "'+n+'" registered with key code "'+t+'"'),!1)},e.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var n in this.keyMap_)this.removeKeyMapping(n,t,!0)},e.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},e.ShortcutRegistry.prototype.getKeyMap=function(){return e.utils.object.deepMerge(Object.create(null),this.keyMap_)},e.ShortcutRegistry.prototype.getRegistry=function(){return e.utils.object.deepMerge(Object.create(null),this.registry_)},e.ShortcutRegistry.prototype.onKeyDown=function(t,n){var o=this.serializeKeyEvent_(n);if(!(o=this.getShortcutNamesByKeyCode(o)))return!1;for(var c,s=0;c=o[s];s++)if((!(c=this.registry_[c]).preconditionFn||c.preconditionFn(t))&&c.callback&&c.callback(t,n,c))return!0;return!1},e.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},e.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var o,n=[];for(o in this.keyMap_)-1<this.keyMap_[o].indexOf(t)&&n.push(o);return n},e.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var o,n="";for(o in e.ShortcutRegistry.modifierKeys)t.getModifierState(o)&&(""!=n&&(n+="+"),n+=o);return""!=n&&t.keyCode?n=n+"+"+t.keyCode:t.keyCode&&(n=t.keyCode.toString()),n},e.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var s,n=e.utils.object.values(e.ShortcutRegistry.modifierKeys),o=0;s=t[o];o++)if(0>n.indexOf(s))throw Error(s+" is not a valid modifier key.")},e.ShortcutRegistry.prototype.createSerializedKey=function(t,n){var o="";if(n)for(var s in this.checkModifiers_(n),e.ShortcutRegistry.modifierKeys)-1<n.indexOf(e.ShortcutRegistry.modifierKeys[s])&&(""!=o&&(o+="+"),o+=s);return""!=o&&t?o=o+"+"+t:t&&(o=t.toString()),o},new e.ShortcutRegistry,e.VariableModel=function(t,n,o,s){this.workspace=t,this.name=n,this.type=o||"",this.id_=s||e.utils.genUid(),e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(this))},e.VariableModel.prototype.getId=function(){return this.id_},e.VariableModel.compareByName=function(t,n){return t.name.localeCompare(n.name,void 0,{sensitivity:"base"})},e.Variables={},e.Variables.NAME_TYPE=e.VARIABLE_CATEGORY_NAME,e.Variables.allUsedVarModels=function(t){var n=t.getAllBlocks(!1);t=Object.create(null);for(var o=0;o<n.length;o++){var s=n[o].getVarModels();if(s)for(var c=0;c<s.length;c++){var _=s[c],w=_.getId();w&&(t[w]=_)}}for(w in n=[],t)n.push(t[w]);return n},e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},e.Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var s,n=Object.create(null),o=0;s=t[o];o++){var c=s.getDeveloperVariables;if(!c&&s.getDeveloperVars&&(c=s.getDeveloperVars,e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+s.type+"')"),e.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[s.type]=!0)),c)for(s=c(),c=0;c<s.length;c++)n[s[c]]=!0}return Object.keys(n)},e.Variables.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(s){e.Variables.createVariableButtonHandler(s.getTargetWorkspace())}),n.push(o),t=e.Variables.flyoutCategoryBlocks(t),n.concat(t)},e.Variables.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getVariablesOfType("")).length){var o=t[t.length-1];if(e.Blocks.variables_set){var s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set"),s.setAttribute("gap",e.Blocks.math_change?8:24),s.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(s)}if(e.Blocks.math_change&&((s=e.utils.xml.createElement("block")).setAttribute("type","math_change"),s.setAttribute("gap",e.Blocks.variables_get?20:8),s.appendChild(e.Variables.generateVariableFieldDom(o)),o=e.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),s.appendChild(o),n.push(s)),e.Blocks.variables_get){t.sort(e.VariableModel.compareByName),o=0;for(var c;c=t[o];o++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",e.Variables.generateUniqueName=function(t){return e.Variables.generateUniqueNameFromOptions(e.Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},e.Variables.generateUniqueNameFromOptions=function(t,n){if(!n.length)return t;for(var o=e.Variables.VAR_LETTER_OPTIONS,s="",c=o.indexOf(t);;){for(var _=!1,w=0;w<n.length;w++)if(n[w].toLowerCase()==t){_=!0;break}if(!_)return t;++c==o.length&&(c=0,s=Number(s)+1),t=o.charAt(c)+s}},e.Variables.createVariableButtonHandler=function(t,n,o){var s=o||"",c=function(_){e.Variables.promptName(e.Msg.NEW_VARIABLE_TITLE,_,function(w){if(w){var M=e.Variables.nameUsedWithAnyType(w,t);if(M){if(M.type==s)var U=e.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",M.name);else U=(U=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",M.name).replace("%2",M.type);e.alert(U,function(){c(w)})}else t.createVariable(w,s),n&&n(w)}else n&&n(null)})};c("")},e.Variables.createVariable=e.Variables.createVariableButtonHandler,e.Variables.renameVariable=function(t,n,o){var s=function(c){var _=e.Msg.RENAME_VARIABLE_TITLE.replace("%1",n.name);e.Variables.promptName(_,c,function(w){if(w){var M=e.Variables.nameUsedWithOtherType_(w,n.type,t);M?(M=e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",M.name).replace("%2",M.type),e.alert(M,function(){s(w)})):(t.renameVariableById(n.getId(),w),o&&o(w))}else o&&o(null)})};s("")},e.Variables.promptName=function(t,n,o){e.prompt(t,n,function(s){s&&((s=s.replace(/[\s\xa0]+/g," ").trim())==e.Msg.RENAME_VARIABLE||s==e.Msg.NEW_VARIABLE)&&(s=null),o(s)})},e.Variables.nameUsedWithOtherType_=function(t,n,o){o=o.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var c,s=0;c=o[s];s++)if(c.name.toLowerCase()==t&&c.type!=n)return c;return null},e.Variables.nameUsedWithAnyType=function(t,n){n=n.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var s,o=0;s=n[o];o++)if(s.name.toLowerCase()==t)return s;return null},e.Variables.generateVariableFieldDom=function(t){var n=e.utils.xml.createElement("field");return n.setAttribute("name","VAR"),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),t=e.utils.xml.createTextNode(t.name),n.appendChild(t),n},e.Variables.getOrCreateVariablePackage=function(t,n,o,s){var c=e.Variables.getVariable(t,n,o,s);return c||(c=e.Variables.createVariable_(t,n,o,s)),c},e.Variables.getVariable=function(t,n,o,s){var c=t.getPotentialVariableMap(),_=null;if(n&&(!(_=t.getVariableById(n))&&c&&(_=c.getVariableById(n)),_))return _;if(o){if(null==s)throw Error("Tried to look up a variable by name without a type");!(_=t.getVariable(o,s))&&c&&(_=c.getVariable(o,s))}return _},e.Variables.createVariable_=function(t,n,o,s){var c=t.getPotentialVariableMap();return o||(o=e.Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),c?c.createVariable(o,s,n):t.createVariable(o,s,n)},e.Variables.getAddedVariables=function(t,n){t=t.getAllVariables();var o=[];if(n.length!=t.length)for(var s=0;s<t.length;s++){var c=t[s];-1==n.indexOf(c)&&o.push(c)}return o},e.VERSION="6.20210701.0",e.mainWorkspace=null,e.selected=null,e.draggingConnections=[],e.clipboardXml_=null,e.clipboardSource_=null,e.clipboardTypeCounts_=null,e.cache3dSupported_=null,e.parentContainer=null,e.svgSize=function(t){return e.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new e.utils.Size(t.cachedWidth_,t.cachedHeight_)},e.resizeSvgContents=function(t){t.resizeContents()},e.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var n=t.getParentSvg(),o=t.getCachedParentSvgSize(),s=n.parentNode;if(s){var c=s.offsetWidth;s=s.offsetHeight,o.width!=c&&(n.setAttribute("width",c+"px"),t.setCachedParentSvgSize(c,null)),o.height!=s&&(n.setAttribute("height",s+"px"),t.setCachedParentSvgSize(null,s)),t.resize()}},e.onKeyDown=function(t){var n=e.mainWorkspace;n&&!(e.utils.isTargetInput(t)||n.rendered&&!n.isVisible())&&e.ShortcutRegistry.registry.onKeyDown(n,t)},e.deleteBlock=function(t){t.workspace.isFlyout||(e.Events.setGroup(!0),e.hideChaff(),t.dispose(!t.outputConnection,!0),e.Events.setGroup(!1))},e.copy=function(t){(t=t.toCopyData())&&(e.clipboardXml_=t.xml,e.clipboardSource_=t.source,e.clipboardTypeCounts_=t.typeCounts)},e.paste=function(){if(!e.clipboardXml_)return!1;var t=e.clipboardSource_;return t.isFlyout&&(t=t.targetWorkspace),!(!e.clipboardTypeCounts_||!t.isCapacityAvailable(e.clipboardTypeCounts_)||(e.Events.setGroup(!0),t.paste(e.clipboardXml_),e.Events.setGroup(!1),0))},e.duplicate=function(t){var n=e.clipboardXml_,o=e.clipboardSource_;e.copy(t),t.workspace.paste(e.clipboardXml_),e.clipboardXml_=n,e.clipboardSource_=o},e.onContextMenu_=function(t){e.utils.isTargetInput(t)||t.preventDefault()},e.hideChaff=function(t){e.Tooltip.hide(),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation();var n=!!t;e.getMainWorkspace().getComponentManager().getComponents(e.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(o){o.autoHide(n)})},e.getMainWorkspace=function(){return e.mainWorkspace},e.alert=function(t,n){alert(t),n&&n()},e.confirm=function(t,n){n(confirm(t))},e.prompt=function(t,n,o){o(prompt(t,n))},e.jsonInitFactory_=function(t){return function(){this.jsonInit(t)}},e.defineBlocksWithJsonArray=function(t){for(var n=0;n<t.length;n++){var o=t[n];if(o){var s=o.type;null==s||""===s?console.warn("Block definition #"+n+" in JSON array is missing a type attribute. Skipping."):(e.Blocks[s]&&console.warn("Block definition #"+n+' in JSON array overwrites prior definition of "'+s+'".'),e.Blocks[s]={init:e.jsonInitFactory_(o)})}else console.warn("Block definition #"+n+" in JSON array is "+o+". Skipping.")}},e.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},e.hueToHex=function(t){return e.utils.colour.hsvToHex(t,e.HSV_SATURATION,255*e.HSV_VALUE)},e.checkBlockColourConstants=function(){e.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),e.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),e.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),e.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),e.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),e.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),e.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),e.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),e.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),e.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),e.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),e.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),e.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),e.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),e.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),e.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},e.checkBlockColourConstant_=function(t,n,o){for(var s="Blockly",c=e,_=0;_<n.length;++_)s+="."+n[_],c&&(c=c[n[_]]);c&&c!==o&&(t=(void 0===o?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",s).replace("%2",t),console.warn(t))},e.setParentContainer=function(t){e.parentContainer=t},e.bindEvent_=e.browserEvents.bind,e.unbindEvent_=e.browserEvents.unbind,e.bindEventWithChecks_=e.browserEvents.conditionalBind,e.ALIGN_LEFT=e.constants.ALIGN.LEFT,e.ALIGN_CENTRE=e.constants.ALIGN.CENTRE,e.ALIGN_RIGHT=e.constants.ALIGN.RIGHT,e.INPUT_VALUE=e.connectionTypes.INPUT_VALUE,e.OUTPUT_VALUE=e.connectionTypes.OUTPUT_VALUE,e.NEXT_STATEMENT=e.connectionTypes.NEXT_STATEMENT,e.PREVIOUS_STATEMENT=e.connectionTypes.PREVIOUS_STATEMENT,e.DUMMY_INPUT=e.inputTypes.DUMMY,e.TOOLBOX_AT_TOP=e.utils.toolbox.Position.TOP,e.TOOLBOX_AT_BOTTOM=e.utils.toolbox.Position.BOTTOM,e.TOOLBOX_AT_LEFT=e.utils.toolbox.Position.LEFT,e.TOOLBOX_AT_RIGHT=e.utils.toolbox.Position.RIGHT,e.Events.BubbleOpen=function(t,n,o){e.Events.BubbleOpen.superClass_.constructor.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=n,this.bubbleType=o},e.utils.object.inherits(e.Events.BubbleOpen,e.Events.UiBase),e.Events.BubbleOpen.prototype.type=e.Events.BUBBLE_OPEN,e.Events.BubbleOpen.prototype.toJson=function(){var t=e.Events.BubbleOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},e.Events.BubbleOpen.prototype.fromJson=function(t){e.Events.BubbleOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},e.registry.register(e.registry.Type.EVENT,e.Events.BUBBLE_OPEN,e.Events.BubbleOpen),e.Icon=function(t){this.block_=t,this.iconGroup_=null},e.Icon.prototype.collapseHidden=!0,e.Icon.prototype.SIZE=17,e.Icon.prototype.bubble_=null,e.Icon.prototype.iconXY_=null,e.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),e.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},e.Icon.prototype.dispose=function(){e.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},e.Icon.prototype.updateEditable=function(){},e.Icon.prototype.isVisible=function(){return!!this.bubble_},e.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||e.utils.isRightButton(t)||this.setVisible(!this.isVisible())},e.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},e.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},e.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),n=e.utils.getRelativeXY(this.iconGroup_);t=new e.utils.Coordinate(t.x+n.x+this.SIZE/2,t.y+n.y+this.SIZE/2),e.utils.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},e.Icon.prototype.getIconLocation=function(){return this.iconXY_},e.Icon.prototype.getCorrectedSize=function(){return new e.utils.Size(e.Icon.prototype.SIZE,e.Icon.prototype.SIZE-2)},e.Warning=function(t){e.Warning.superClass_.constructor.call(this,t),this.createIcon(),this.text_=Object.create(null)},e.utils.object.inherits(e.Warning,e.Icon),e.Warning.prototype.collapseHidden=!1,e.Warning.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},e.Warning.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},e.Warning.prototype.createBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.getText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},e.Warning.prototype.setText=function(t,n){this.text_[n]!=t&&(t?this.text_[n]=t:delete this.text_[n],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},e.Warning.prototype.getText=function(){var n,t=[];for(n in this.text_)t.push(this.text_[n]);return t.join("\n")},e.Warning.prototype.dispose=function(){this.block_.warning=null,e.Icon.prototype.dispose.call(this)},e.Comment=function(t){e.Comment.superClass_.constructor.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},e.utils.object.inherits(e.Comment,e.Icon),e.Comment.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},e.Comment.prototype.createEditor_=function(){this.foreignObject_=e.utils.dom.createSvgElement(e.utils.Svg.FOREIGNOBJECT,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(e.utils.dom.HTML_NS,"body");t.setAttribute("xmlns",e.utils.dom.HTML_NS),t.className="blocklyMinimalBody";var n=this.textarea_=document.createElementNS(e.utils.dom.HTML_NS,"textarea");return n.className="blocklyCommentTextarea",n.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),n.value=this.model_.text,this.resizeTextarea_(),t.appendChild(n),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(n,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=e.browserEvents.conditionalBind(n,"wheel",this,function(o){o.stopPropagation()}),this.onChangeWrapper_=e.browserEvents.conditionalBind(n,"change",this,function(o){this.cachedText_!=this.model_.text&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=e.browserEvents.conditionalBind(n,"input",this,function(o){this.model_.text=n.value}),setTimeout(n.focus.bind(n),0),this.foreignObject_},e.Comment.prototype.updateEditable=function(){e.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},e.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},e.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,n=2*e.Bubble.BORDER_WIDTH,o=t.width-n;t=t.height-n,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=t-4+"px"},e.Comment.prototype.setVisible=function(t){t!=this.isVisible()&&(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},e.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||e.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},e.Comment.prototype.createEditableBubble_=function(){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},e.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=e.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=e.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},e.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(e.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(e.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(e.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(e.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},e.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},e.Comment.prototype.getBubbleSize=function(){return this.model_.size},e.Comment.prototype.setBubbleSize=function(t,n){this.bubble_?this.bubble_.setBubbleSize(t,n):(this.model_.size.width=t,this.model_.size.height=n)},e.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},e.Comment.prototype.dispose=function(){this.block_.comment=null,e.Icon.prototype.dispose.call(this)},e.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),e.IComponent=function(){},e.IDragTarget=function(){},e.DragTarget=function(){},e.DragTarget.prototype.onDragEnter=function(t){},e.DragTarget.prototype.onDragOver=function(t){},e.DragTarget.prototype.onDragExit=function(t){},e.DragTarget.prototype.onDrop=function(t){},e.DragTarget.prototype.shouldPreventMove=function(t){return!1},e.IDeleteArea=function(){},e.DeleteArea=function(){e.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},e.utils.object.inherits(e.DeleteArea,e.DragTarget),e.DeleteArea.prototype.wouldDelete=function(t,n){return t instanceof e.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!n)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},e.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t},e.IFlyout=function(){},e.Flyout=function(t){e.Flyout.superClass_.constructor.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new e.WorkspaceSvg(t),this.workspace_.setMetricsManager(new e.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=e.utils.genUid(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},e.utils.object.inherits(e.Flyout,e.DeleteArea),e.Flyout.prototype.autoClose=!0,e.Flyout.prototype.isVisible_=!1,e.Flyout.prototype.containerVisible_=!0,e.Flyout.prototype.CORNER_RADIUS=8,e.Flyout.prototype.MARGIN=e.Flyout.prototype.CORNER_RADIUS,e.Flyout.prototype.GAP_X=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.GAP_Y=3*e.Flyout.prototype.MARGIN,e.Flyout.prototype.SCROLLBAR_MARGIN=2.5,e.Flyout.prototype.width_=0,e.Flyout.prototype.height_=0,e.Flyout.prototype.dragAngleRange_=70,e.Flyout.prototype.createDom=function(t){return this.svgGroup_=e.utils.dom.createSvgElement(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},e.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new e.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,e.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),e.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},e.Flyout.prototype.getWidth=function(){return this.width_},e.Flyout.prototype.getHeight=function(){return this.height_},e.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},e.Flyout.prototype.getWorkspace=function(){return this.workspace_},e.Flyout.prototype.isVisible=function(){return this.isVisible_},e.Flyout.prototype.setVisible=function(t){var n=t!=this.isVisible();this.isVisible_=t,n&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},e.Flyout.prototype.setContainerVisible=function(t){var n=t!=this.containerVisible_;this.containerVisible_=t,n&&this.updateDisplay_()},e.Flyout.prototype.updateDisplay_=function(){var t=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},e.Flyout.prototype.positionAt_=function(t,n,o,s){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",n),this.workspace_.setCachedParentSvgSize(t,n),"svg"==this.svgGroup_.tagName?e.utils.dom.setCssTransform(this.svgGroup_,"translate("+o+"px,"+s+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+s+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(o,s),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},e.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var n,t=0;n=this.listeners_[t];t++)e.browserEvents.unbind(n);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},e.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof t&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=e.utils.toolbox.convertFlyoutDefToJsonArray(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push(e.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var s,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++)s.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.createFlyoutInfo_=function(t){var n=[],o=[];this.permanentlyDisabled_.length=0;for(var _,s=this.horizontalLayout?this.GAP_X:this.GAP_Y,c=0;_=t[c];c++)switch(_.custom&&(_=this.getDynamicCategoryContents_(_.custom),_=e.utils.toolbox.convertFlyoutDefToJsonArray(_),t.splice.apply(t,[c,1].concat(_)),_=t[c]),_.kind.toUpperCase()){case"BLOCK":var w=_,M=this.getBlockXml_(w);_=this.createBlock_(M),w=parseInt(w.gap||M.getAttribute("gap"),10),o.push(isNaN(w)?s:w),n.push({type:"block",block:_});break;case"SEP":this.addSeparatorGap_(_,o,s);break;case"LABEL":_=this.createButton_(_,!0),n.push({type:"button",button:_}),o.push(s);break;case"BUTTON":_=this.createButton_(_,!1),n.push({type:"button",button:_}),o.push(s)}return{contents:n,gaps:o}},e.Flyout.prototype.getDynamicCategoryContents_=function(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(t=t(this.workspace_.targetWorkspace),!Array.isArray(t))throw new TypeError("Result of toolbox category callback must be an array.");return t},e.Flyout.prototype.createButton_=function(t,n){if(!e.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new e.FlyoutButton(this.workspace_,this.targetWorkspace,t,n)},e.Flyout.prototype.createBlock_=function(t){return(t=e.Xml.domToBlock(t,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(t),t},e.Flyout.prototype.getBlockXml_=function(t){var n=null,o=t.blockxml;if(o&&"string"!=typeof o?n=o:o&&"string"==typeof o?(n=e.Xml.textToDom(o),t.blockxml=n):t.type&&((n=e.utils.xml.createElement("xml")).setAttribute("type",t.type),n.setAttribute("disabled",t.disabled),t.blockxml=n),!n)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return n},e.Flyout.prototype.addSeparatorGap_=function(t,n,o){t=parseInt(t.gap,10),!isNaN(t)&&0<n.length?n[n.length-1]=t:n.push(o)},e.Flyout.prototype.clearOldBlocks_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)o.workspace==this.workspace_&&o.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(e.Tooltip.unbindMouseEvents(t),e.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},e.Flyout.prototype.addBlockListeners_=function(t,n,o){this.listeners_.push(e.browserEvents.conditionalBind(t,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.conditionalBind(o,"mousedown",null,this.blockMouseDown_(n))),this.listeners_.push(e.browserEvents.bind(t,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(t,"mouseleave",n,n.removeSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseenter",n,n.addSelect)),this.listeners_.push(e.browserEvents.bind(o,"mouseleave",n,n.removeSelect))},e.Flyout.prototype.blockMouseDown_=function(t){var n=this;return function(o){var s=n.targetWorkspace.getGesture(o);s&&(s.setStartBlock(t),s.handleFlyoutStart(o,n))}},e.Flyout.prototype.onMouseDown_=function(t){var n=this.targetWorkspace.getGesture(t);n&&n.handleFlyoutStart(t,this)},e.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},e.Flyout.prototype.createBlock=function(t){var n=null;e.Events.disable();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock_(t)}finally{e.Events.enable()}if(e.hideChaff(),t=e.Variables.getAddedVariables(this.targetWorkspace,o),e.Events.isEnabled()){for(e.Events.setGroup(!0),o=0;o<t.length;o++){var s=t[o];e.Events.fire(new(e.Events.get(e.Events.VAR_CREATE))(s))}e.Events.fire(new(e.Events.get(e.Events.BLOCK_CREATE))(n))}return this.autoClose?this.hide():this.filterForCapacity_(),n},e.Flyout.prototype.initFlyoutButton_=function(t,n,o){var s=t.createDom();t.moveTo(n,o),t.show(),this.listeners_.push(e.browserEvents.conditionalBind(s,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},e.Flyout.prototype.createRect_=function(t,n,o,s,c){return(n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{"fill-opacity":0,x:n,y:o,height:s.height,width:s.width},null)).tooltip=t,e.Tooltip.bindMouseEvents(n),this.workspace_.getCanvas().insertBefore(n,t.getSvgRoot()),t.flyoutRect_=n,this.mats_[c]=n},e.Flyout.prototype.moveRectToBlock_=function(t,n){var o=n.getHeightWidth();t.setAttribute("width",o.width),t.setAttribute("height",o.height),n=n.getRelativeToSurfaceXY(),t.setAttribute("y",n.y),t.setAttribute("x",this.RTL?n.x-o.width:n.x)},e.Flyout.prototype.filterForCapacity_=function(){for(var o,t=this.workspace_.getTopBlocks(!1),n=0;o=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(o))for(var s=this.targetWorkspace.isCapacityAvailable(e.utils.getBlockTypeCounts(o));o;)o.setEnabled(s),o=o.getNextBlock()},e.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},e.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},e.Flyout.prototype.placeNewBlock_=function(t){var n=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var o=e.Xml.blockToDom(t,!0);if(n.setResizesEnabled(!1),!(o=e.Xml.domToBlock(o,n)).getSvgRoot())throw Error("block is not rendered.");var s=n.getOriginOffsetInPixels(),c=this.workspace_.getOriginOffsetInPixels();return(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),t=e.utils.Coordinate.sum(c,t),(s=e.utils.Coordinate.difference(t,s)).scale(1/n.scale),o.moveBy(s.x,s.y),o},e.HorizontalFlyout=function(t){e.HorizontalFlyout.superClass_.constructor.call(this,t),this.horizontalLayout=!0},e.utils.object.inherits(e.HorizontalFlyout,e.Flyout),e.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(o.left+(o.width-s.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.HorizontalFlyout.prototype.getX=function(){return 0},e.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();t=t.getToolboxMetrics();var s=this.toolboxPosition_==e.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?s?t.height:o.height-this.height_:s?0:o.height:s?0:o.height+n.top-this.height_},e.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.HorizontalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.TOP,s=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(s.push("h",t+2*this.CORNER_RADIUS),s.push("v",n),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",-t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),s.push("h",t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",n),s.push("h",-t-2*this.CORNER_RADIUS)),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},e.HorizontalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n=n.x||n.y){var o=this.workspace_.getMetricsManager(),s=o.getScrollMetrics();n=o.getViewMetrics().left-s.left+n,this.workspace_.scrollbar.setX(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.HorizontalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN,s=o+this.tabWidth_;this.RTL&&(t=t.reverse());for(var _,c=0;_=t[c];c++)if("block"==_.type){for(var U,w=(_=_.block).getDescendants(!1),M=0;U=w[M];M++)U.isInFlyout=!0;_.render(),w=_.getSvgRoot(),M=_.getHeightWidth(),U=_.outputConnection?this.tabWidth_:0,_.moveBy(U=this.RTL?s+M.width:s-U,o),U=this.createRect_(_,U,o,M,c),s+=M.width+n[c],this.addBlockListeners_(w,_,U)}else"button"==_.type&&(this.initFlyoutButton_(_.button,s,o),s+=_.button.width+n[c])},e.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<90+n&&t>90-n||t>-90-n&&t<-90+n},e.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top;return this.toolboxPosition_==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e9,n+t.height,-1e9,1e9):new e.utils.Rect(n,1e9,-1e9,1e9)},e.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++)t=Math.max(t,s.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,this.height_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;s=n[o];o++)s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.registry.DEFAULT,e.HorizontalFlyout),e.VerticalFlyout=function(t){e.VerticalFlyout.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.VerticalFlyout,e.Flyout),e.VerticalFlyout.registryName="verticalFlyout",e.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),s=n.getViewMetrics();n=n.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(o.top+(o.height-s.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}},e.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),n=t.getAbsoluteMetrics(),o=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==e.utils.toolbox.Position.LEFT?t.width:o.width-this.width_:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width:this.toolboxPosition_==e.utils.toolbox.Position.LEFT?0:o.width+n.left-this.width_},e.VerticalFlyout.prototype.getY=function(){return 0},e.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var n=this.getY();this.positionAt_(this.width_,this.height_,t,n)}},e.VerticalFlyout.prototype.setBackgroundPath_=function(t,n){var o=this.toolboxPosition_==e.utils.toolbox.Position.RIGHT,s=t+this.CORNER_RADIUS;(s=["M "+(o?s:0)+",0"]).push("h",o?-t:t),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("v",Math.max(0,n)),s.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),s.push("h",o?t:-t),s.push("z"),this.svgBackground_.setAttribute("d",s.join(" "))},e.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},e.VerticalFlyout.prototype.wheel_=function(t){var n=e.utils.getScrollDeltaPixels(t);if(n.y){var o=this.workspace_.getMetricsManager(),s=o.getScrollMetrics();n=o.getViewMetrics().top-s.top+n.y,this.workspace_.scrollbar.setY(n),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()}t.preventDefault(),t.stopPropagation()},e.VerticalFlyout.prototype.layout_=function(t,n){this.workspace_.scale=this.targetWorkspace.scale;for(var _,o=this.MARGIN,s=this.RTL?o:o+this.tabWidth_,c=0;_=t[c];c++)if("block"==_.type){for(var U,w=(_=_.block).getDescendants(!1),M=0;U=w[M];M++)U.isInFlyout=!0;_.render(),w=_.getSvgRoot(),M=_.getHeightWidth(),_.moveBy(U=_.outputConnection?s-this.tabWidth_:s,o),U=this.createRect_(_,this.RTL?U-M.width:U,o,M,c),this.addBlockListeners_(w,_,U),o+=M.height+n[c]}else"button"==_.type&&(this.initFlyoutButton_(_.button,s,o),o+=_.button.height+n[c])},e.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var n=this.dragAngleRange_;return t<n&&t>-n||t<-180+n||t>180-n},e.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.left;return this.toolboxPosition_==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e9,1e9,-1e9,n+t.width):new e.utils.Rect(-1e9,1e9,n,1e9)},e.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var s,t=0,n=this.workspace_.getTopBlocks(!1),o=0;s=n[o];o++){var c=s.getHeightWidth().width;s.outputConnection&&(c-=this.tabWidth_),t=Math.max(t,c)}for(o=0;s=this.buttons_[o];o++)t=Math.max(t,s.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,this.width_!=(t+=e.Scrollbar.scrollbarThickness)){for(o=0;s=n[o];o++){if(this.RTL){c=s.getRelativeToSurfaceXY().x;var _=t/this.workspace_.scale-this.MARGIN;s.outputConnection||(_-=this.tabWidth_),s.moveBy(_-c,0)}s.flyoutRect_&&this.moveRectToBlock_(s.flyoutRect_,s)}if(this.RTL)for(o=0;s=this.buttons_[o];o++)n=s.getPosition().y,s.moveTo(t/this.workspace_.scale-s.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=e.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},e.registry.register(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.registry.DEFAULT,e.VerticalFlyout),e.FlyoutButton=function(t,n,o,s){this.workspace_=t,this.targetWorkspace_=n,this.text_=o.text,this.position_=new e.utils.Coordinate(0,0),this.isLabel_=s,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.onMouseUpWrapper_=null,this.info=o},e.FlyoutButton.MARGIN_X=5,e.FlyoutButton.MARGIN_Y=2,e.FlyoutButton.prototype.width=0,e.FlyoutButton.prototype.height=0,e.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},this.workspace_.getCanvas()),!this.isLabel_)var n=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);t=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),s=e.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(s+="\u200f"),o.textContent=s,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var c=e.utils.style.getComputedStyle(o,"fontSize"),_=e.utils.style.getComputedStyle(o,"fontWeight"),w=e.utils.style.getComputedStyle(o,"fontFamily");return this.width=e.utils.dom.getFastTextWidthWithSizeString(o,c,_,w),s=e.utils.dom.measureFontMetrics(s,c,_,w),this.height=s.height,this.isLabel_||(this.width+=2*e.FlyoutButton.MARGIN_X,this.height+=2*e.FlyoutButton.MARGIN_Y,n.setAttribute("width",this.width),n.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-s.height/2+s.baseline),this.updateTransform_(),this.onMouseUpWrapper_=e.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},e.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},e.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},e.FlyoutButton.prototype.moveTo=function(t,n){this.position_.x=t,this.position_.y=n,this.updateTransform_()},e.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},e.FlyoutButton.prototype.getPosition=function(){return this.position_},e.FlyoutButton.prototype.getButtonText=function(){return this.text_},e.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},e.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&e.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},e.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},e.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),e.Generator=function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},e.Generator.prototype.INFINITE_LOOP_TRAP=null,e.Generator.prototype.STATEMENT_PREFIX=null,e.Generator.prototype.STATEMENT_SUFFIX=null,e.Generator.prototype.INDENT="  ",e.Generator.prototype.COMMENT_WRAP=60,e.Generator.prototype.ORDER_OVERRIDES=[],e.Generator.prototype.isInitialized=null,e.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=e.getMainWorkspace());var n=[];this.init(t),t=t.getTopBlocks(!0);for(var s,o=0;s=t[o];o++){var c=this.blockToCode(s);Array.isArray(c)&&(c=c[0]),c&&(s.outputConnection&&(c=this.scrubNakedValue(c),this.STATEMENT_PREFIX&&!s.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,s)+c),this.STATEMENT_SUFFIX&&!s.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,s))),n.push(c))}return n=n.join("\n"),(n=(n=(n=this.finish(n)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},e.Generator.prototype.prefixLines=function(t,n){return n+t.replace(/(?!\n$)\n/g,"\n"+n)},e.Generator.prototype.allNestedComments=function(t){var n=[];t=t.getDescendants(!0);for(var o=0;o<t.length;o++){var s=t[o].getCommentText();s&&n.push(s)}return n.length&&n.push(""),n.join("\n")},e.Generator.prototype.blockToCode=function(t,n){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return n?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return n?"":this.blockToCode(t.getChildren(!1)[0]);var o=this[t.type];if("function"!=typeof o)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(o=o.call(t,t),Array.isArray(o)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,o[0],n),o[1]]}if("string"==typeof o)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,t)+o),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,o,n);if(null===o)return"";throw SyntaxError("Invalid code generated: "+o)},e.Generator.prototype.valueToCode=function(t,n,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+t.type);var s=t.getInputTargetBlock(n);if(!s||""===(n=this.blockToCode(s)))return"";if(!Array.isArray(n))throw TypeError("Expecting tuple from value block: "+s.type);if(t=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+s.type);if(!t)return"";s=!1;var c=Math.floor(o),_=Math.floor(n);if(c<=_&&(c!=_||0!=c&&99!=c))for(s=!0,c=0;c<this.ORDER_OVERRIDES.length;c++)if(this.ORDER_OVERRIDES[c][0]==o&&this.ORDER_OVERRIDES[c][1]==n){s=!1;break}return s&&(t="("+t+")"),t},e.Generator.prototype.statementToCode=function(t,n){if(t=t.getInputTargetBlock(n),"string"!=typeof(n=this.blockToCode(t)))throw TypeError("Expecting code from statement block: "+(t&&t.type));return n&&(n=this.prefixLines(n,this.INDENT)),n},e.Generator.prototype.addLoopTrap=function(t,n){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+t),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+t),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),t},e.Generator.prototype.injectId=function(t,n){return n=n.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+n+"'")},e.Generator.prototype.RESERVED_WORDS_="",e.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},e.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(e.Generator.prototype,"variableDB_",{get:function(){return e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){e.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}),e.Generator.prototype.provideFunction_=function(t,n){if(!this.definitions_[t]){var s,o=this.nameDB_.getDistinctName(t,e.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[t]=o,n=n.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);s!=n;)s=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[t]=n}return this.functionNames_[t]},e.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},e.Generator.prototype.scrub_=function(t,n,o){return n},e.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},e.Generator.prototype.scrubNakedValue=function(t){return t},e.IToolboxItem=function(){},e.ISelectableToolboxItem=function(){},e.ICollapsibleToolboxItem=function(){},e.ToolboxItem=function(t,n,o){this.id_=t.toolboxitemid||e.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()},e.ToolboxItem.prototype.init=function(){},e.ToolboxItem.prototype.getDiv=function(){return null},e.ToolboxItem.prototype.getId=function(){return this.id_},e.ToolboxItem.prototype.getParent=function(){return null},e.ToolboxItem.prototype.getLevel=function(){return this.level_},e.ToolboxItem.prototype.isSelectable=function(){return!1},e.ToolboxItem.prototype.isCollapsible=function(){return!1},e.ToolboxItem.prototype.dispose=function(){},e.ToolboxCategory=function(t,n,o){e.ToolboxCategory.superClass_.constructor.call(this,t,n,o),this.name_=e.utils.replaceMessageReferences(t.name),this.colour_=this.getColour_(t),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(t)},e.utils.object.inherits(e.ToolboxCategory,e.ToolboxItem),e.ToolboxCategory.registrationName="category",e.ToolboxCategory.nestedPadding=19,e.ToolboxCategory.borderWidth=8,e.ToolboxCategory.defaultBackgroundColour="#57e",e.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},e.ToolboxCategory.prototype.parseContents_=function(t){var n=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var o;o=n[t];t++)this.flyoutItems_.push(o)}},e.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},e.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),e.utils.aria.setRole(this.htmlDiv_,e.utils.aria.Role.TREEITEM),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,!1),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),e.utils.aria.setRole(this.iconDom_,e.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},e.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),t},e.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");e.utils.dom.addClass(t,this.cssConfig_.row);var n=e.ToolboxCategory.nestedPadding*this.getLevel();return n=n.toString()+"px",this.workspace_.RTL?t.style.paddingRight=n:t.style.paddingLeft=n,t},e.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.rowcontentcontainer),t},e.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.display="inline-block",t},e.ToolboxCategory.prototype.createLabelDom_=function(t){var n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=t,e.utils.dom.addClass(n,this.cssConfig_.label),n},e.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},e.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=e.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},e.ToolboxCategory.prototype.getColour_=function(t){var n=t.categorystyle||t.categoryStyle;return(t=t.colour)&&n?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):n?this.getColourfromStyle_(n):this.parseColour_(t)},e.ToolboxCategory.prototype.getColourfromStyle_=function(t){var n=this.workspace_.getTheme();if(t&&n){if((n=n.categoryStyles[t])&&n.colour)return this.parseColour_(n.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},e.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},e.ToolboxCategory.prototype.parseColour_=function(t){if(null==(t=e.utils.replaceMessageReferences(t))||""===t)return"";var n=Number(t);return isNaN(n)?(n=e.utils.colour.parse(t))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):e.hueToHex(n)},e.ToolboxCategory.prototype.openIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.closedicon),e.utils.dom.addClass(t,this.cssConfig_.openicon))},e.ToolboxCategory.prototype.closeIcon_=function(t){t&&(e.utils.dom.removeClasses(t,this.cssConfig_.openicon),e.utils.dom.addClass(t,this.cssConfig_.closedicon))},e.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},e.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},e.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},e.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(!(t=t.getParent()).isExpanded())return!1;return!0},e.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},e.ToolboxCategory.prototype.onClick=function(t){},e.ToolboxCategory.prototype.setSelected=function(t){if(t){var n=this.parseColour_(e.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||n,e.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",e.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.SELECTED,t)},e.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},e.ToolboxCategory.prototype.getName=function(){return this.name_},e.ToolboxCategory.prototype.getParent=function(){return this.parent_},e.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},e.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],"string"==typeof t?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=e.utils.toolbox.convertFlyoutDefToJsonArray(t)),this.parseContents_(this.toolboxItemDef_)},e.ToolboxCategory.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxCategory.registrationName,e.ToolboxCategory),e.ToolboxSeparator=function(t,n){e.ToolboxSeparator.superClass_.constructor.call(this,t,n),this.cssConfig_={container:"blocklyTreeSeparator"},e.utils.object.mixin(this.cssConfig_,t.cssconfig||t.cssConfig)},e.utils.object.inherits(e.ToolboxSeparator,e.ToolboxItem),e.ToolboxSeparator.registrationName="sep",e.ToolboxSeparator.prototype.init=function(){this.createDom_()},e.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,this.cssConfig_.container),this.htmlDiv_=t},e.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},e.ToolboxSeparator.prototype.dispose=function(){e.utils.dom.removeNode(this.htmlDiv_)},e.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.ToolboxSeparator.registrationName,e.ToolboxSeparator),e.CollapsibleToolboxCategory=function(t,n,o){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],e.CollapsibleToolboxCategory.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.CollapsibleToolboxCategory,e.ToolboxCategory),e.CollapsibleToolboxCategory.registrationName="collapsibleCategory",e.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=e.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},e.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var n=t.contents,o=!0;if(t.custom)this.flyoutItems_=t.custom;else if(n){t=0;for(var s;s=n[t];t++)!e.registry.hasItem(e.registry.Type.TOOLBOX_ITEM,s.kind)||s.kind.toLowerCase()==e.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(s),o=!0):(this.createToolboxItem_(s),o=!1)}},e.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var n=t.kind;"CATEGORY"==n.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(n=e.CollapsibleToolboxCategory.registrationName),t=new(e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,n))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},e.CollapsibleToolboxCategory.prototype.init=function(){e.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},e.CollapsibleToolboxCategory.prototype.createDom_=function(){e.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),e.utils.aria.setRole(this.subcategoriesDiv_,e.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(e.utils.dom.addClass(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},e.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var n=document.createElement("div");e.utils.dom.addClass(n,this.cssConfig_.contents);for(var o=0;o<t.length;o++){var s=t[o];s.init();var c=s.getDiv();n.appendChild(c),s.getClickTarget&&s.getClickTarget().setAttribute("id",s.getId())}return n},e.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!=t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),e.utils.aria.setState(this.htmlDiv_,e.utils.aria.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},e.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var o,n=0;o=this.getChildToolboxItems()[n];n++)o.setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},e.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},e.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},e.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},e.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},e.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},e.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},e.registry.register(e.registry.Type.TOOLBOX_ITEM,e.CollapsibleToolboxCategory.registrationName,e.CollapsibleToolboxCategory),e.Events.ToolboxItemSelect=function(t,n,o){e.Events.ToolboxItemSelect.superClass_.constructor.call(this,o),this.oldItem=t,this.newItem=n},e.utils.object.inherits(e.Events.ToolboxItemSelect,e.Events.UiBase),e.Events.ToolboxItemSelect.prototype.type=e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect.prototype.toJson=function(){var t=e.Events.ToolboxItemSelect.superClass_.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},e.Events.ToolboxItemSelect.prototype.fromJson=function(t){e.Events.ToolboxItemSelect.superClass_.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},e.registry.register(e.registry.Type.EVENT,e.Events.TOOLBOX_ITEM_SELECT,e.Events.ToolboxItemSelect),e.IAutoHideable=function(){},e.IStyleable=function(){},e.IToolbox=function(){},e.Toolbox=function(t){e.Toolbox.superClass_.constructor.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},e.utils.object.inherits(e.Toolbox,e.DeleteArea),e.Toolbox.prototype.onShortcut=function(t){return!1},e.Toolbox.prototype.init=function(){var t=this.workspace_,n=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),e.utils.dom.insertAfter(this.flyout_.createDom("svg"),n),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET]})},e.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var n=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,e.utils.aria.setRole(this.contentsDiv_,e.utils.aria.Role.TREE),n.appendChild(this.contentsDiv_),t.parentNode.insertBefore(n,t),this.attachEvents_(n,this.contentsDiv_),n},e.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),e.utils.dom.addClass(t,"blocklyToolboxDiv"),e.utils.dom.addClass(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},e.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return e.utils.dom.addClass(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},e.Toolbox.prototype.attachEvents_=function(t,n){t=e.browserEvents.conditionalBind(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),n=e.browserEvents.conditionalBind(n,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(n)},e.Toolbox.prototype.onClick_=function(t){if(e.utils.isRightButton(t)||t.target==this.HtmlDiv)e.hideChaff(!1);else{var n=t.target.getAttribute("id");n&&(n=this.getToolboxItemById(n)).isSelectable()&&(this.setSelectedItem(n),n.onClick(t)),e.hideChaff(!0)}e.Touch.clearTouchIdentifier()},e.Toolbox.prototype.onKeyDown_=function(t){var n=!1;switch(t.keyCode){case e.utils.KeyCodes.DOWN:n=this.selectNext_();break;case e.utils.KeyCodes.UP:n=this.selectPrevious_();break;case e.utils.KeyCodes.LEFT:n=this.selectParent_();break;case e.utils.KeyCodes.RIGHT:n=this.selectChild_();break;case e.utils.KeyCodes.ENTER:case e.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(t)),n&&t.preventDefault()},e.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,n=new e.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return n.toolboxPosition=t.options.toolboxPosition,new(e.registry.getClassFromOptions(t.horizontalLayout?e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(n)},e.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var n=0;n<this.contents_.length;n++){var o=this.contents_[n];o&&o.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},e.Toolbox.prototype.renderContents_=function(t){for(var s,n=document.createDocumentFragment(),o=0;s=t[o];o++)this.createToolboxItem_(s,n);this.contentsDiv_.appendChild(n)},e.Toolbox.prototype.createToolboxItem_=function(t,n){var o=t.kind;"CATEGORY"==o.toUpperCase()&&e.utils.toolbox.isCategoryCollapsible(t)&&(o=e.CollapsibleToolboxCategory.registrationName),(o=e.registry.getClass(e.registry.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(t=new o(t,this),this.addToolboxItem_(t),t.init(),(o=t.getDiv())&&n.appendChild(o),t.getClickTarget&&t.getClickTarget().setAttribute("id",t.getId()))},e.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible())for(var o,n=0;o=t.getChildToolboxItems()[n];n++)this.addToolboxItem_(o)},e.Toolbox.prototype.getToolboxItems=function(){return this.contents_},e.Toolbox.prototype.addStyle=function(t){e.utils.dom.addClass(this.HtmlDiv,t)},e.Toolbox.prototype.removeStyle=function(t){e.utils.dom.removeClass(this.HtmlDiv,t)},e.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),n=t.top,o=n+t.height,s=t.left;return t=s+t.width,this.toolboxPosition==e.utils.toolbox.Position.TOP?new e.utils.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.BOTTOM?new e.utils.Rect(n,1e7,-1e7,1e7):this.toolboxPosition==e.utils.toolbox.Position.LEFT?new e.utils.Rect(-1e7,1e7,-1e7,t):new e.utils.Rect(-1e7,1e7,s,1e7)},e.Toolbox.prototype.wouldDelete=function(t,n){return this.updateWouldDelete_(t instanceof e.BlockSvg?!t.getParent()&&t.isDeletable():t.isDeletable()),this.wouldDelete_},e.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},e.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},e.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},e.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(n):this.removeStyle(n)},e.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},e.Toolbox.prototype.getWidth=function(){return this.width_},e.Toolbox.prototype.getHeight=function(){return this.height_},e.Toolbox.prototype.getFlyout=function(){return this.flyout_},e.Toolbox.prototype.getWorkspace=function(){return this.workspace_},e.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},e.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},e.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},e.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout_?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition==e.utils.toolbox.Position.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition==e.utils.toolbox.Position.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},e.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,n=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition==e.utils.toolbox.Position.LEFT?t.scrollX+n.width:t.scrollX,this.toolboxPosition==e.utils.toolbox.Position.TOP?t.scrollY+n.height:t.scrollY),e.svgResize(t)},e.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},e.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n.refreshTheme&&n.refreshTheme()}},e.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},e.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},e.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},e.Toolbox.prototype.setSelectedItem=function(t){var n=this.selectedItem_;!t&&!n||t&&!t.isSelectable()||(this.shouldDeselectItem_(n,t)&&null!=n&&this.deselectItem_(n),this.shouldSelectItem_(n,t)&&null!=t&&this.selectItem_(n,t),this.updateFlyout_(n,t),this.fireSelectEvent_(n,t))},e.Toolbox.prototype.shouldDeselectItem_=function(t,n){return null!=t&&(!t.isCollapsible()||t!=n)},e.Toolbox.prototype.shouldSelectItem_=function(t,n){return null!=n&&n!=t},e.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,"")},e.Toolbox.prototype.selectItem_=function(t,n){this.selectedItem_=n,this.previouslySelectedItem_=t,n.setSelected(!0),e.utils.aria.setState(this.contentsDiv_,e.utils.aria.State.ACTIVEDESCENDANT,n.getId())},e.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)},e.Toolbox.prototype.updateFlyout_=function(t,n){(t!=n||n.isCollapsible())&&n&&n.getContents().length?(this.flyout_.show(n.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},e.Toolbox.prototype.fireSelectEvent_=function(t,n){var o=t&&t.getName(),s=n&&n.getName();t==n&&(s=null),t=new(e.Events.get(e.Events.TOOLBOX_ITEM_SELECT))(o,s,this.workspace_.id),e.Events.fire(t)},e.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},e.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},e.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[++t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var n=this.contents_[t];n&&!n.isSelectable();)n=this.contents_[--t];if(n&&n.isSelectable())return this.setSelectedItem(n),!0}return!1},e.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)e.browserEvents.unbind(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),e.utils.dom.removeNode(this.HtmlDiv)},e.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),e.registry.register(e.registry.Type.TOOLBOX,e.registry.DEFAULT,e.Toolbox),e.Events.TrashcanOpen=function(t,n){e.Events.TrashcanOpen.superClass_.constructor.call(this,n),this.isOpen=t},e.utils.object.inherits(e.Events.TrashcanOpen,e.Events.UiBase),e.Events.TrashcanOpen.prototype.type=e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen.prototype.toJson=function(){var t=e.Events.TrashcanOpen.superClass_.toJson.call(this);return t.isOpen=this.isOpen,t},e.Events.TrashcanOpen.prototype.fromJson=function(t){e.Events.TrashcanOpen.superClass_.fromJson.call(this,t),this.isOpen=t.isOpen},e.registry.register(e.registry.Type.EVENT,e.Events.TRASHCAN_OPEN,e.Events.TrashcanOpen),e.IPositionable=function(){},e.uiPosition={},e.uiPosition.verticalPosition={TOP:0,BOTTOM:1},e.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},e.uiPosition.bumpDirection={UP:0,DOWN:1},e.uiPosition.getStartPositionRect=function(t,n,o,s,c,_){var w=_.scrollbar&&_.scrollbar.canScrollVertically();return t.horizontal===e.uiPosition.horizontalPosition.LEFT?(o=c.absoluteMetrics.left+o,w&&_.RTL&&(o+=e.Scrollbar.scrollbarThickness)):(o=c.absoluteMetrics.left+c.viewMetrics.width-n.width-o,w&&!_.RTL&&(o-=e.Scrollbar.scrollbarThickness)),t.vertical===e.uiPosition.verticalPosition.TOP?t=c.absoluteMetrics.top+s:(t=c.absoluteMetrics.top+c.viewMetrics.height-n.height-s,_.scrollbar&&_.scrollbar.canScrollHorizontally()&&(t-=e.Scrollbar.scrollbarThickness)),new e.utils.Rect(t,t+n.height,o,o+n.width)},e.uiPosition.getCornerOppositeToolbox=function(t,n){return{horizontal:n.toolboxMetrics.position===e.utils.toolbox.Position.LEFT||t.horizontalLayout&&!t.RTL?e.uiPosition.horizontalPosition.RIGHT:e.uiPosition.horizontalPosition.LEFT,vertical:n.toolboxMetrics.position===e.utils.toolbox.Position.BOTTOM?e.uiPosition.verticalPosition.TOP:e.uiPosition.verticalPosition.BOTTOM}},e.uiPosition.bumpPositionRect=function(t,n,o,s){for(var U,c=t.left,_=t.right-t.left,w=t.bottom-t.top,M=0;U=s[M];M++)t.intersects(U)&&(t=new e.utils.Rect(t=o===e.uiPosition.bumpDirection.UP?U.top-w-n:U.bottom+n,t+w,c,c+_),M=-1);return t},e.Trashcan=function(t){e.Trashcan.superClass_.constructor.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(t=new e.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.TOP?e.utils.toolbox.Position.BOTTOM:e.utils.toolbox.Position.TOP,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT?e.utils.toolbox.Position.LEFT:e.utils.toolbox.Position.RIGHT,this.flyout=new(e.registry.getClassFromOptions(e.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},e.utils.object.inherits(e.Trashcan,e.DeleteArea),e.Trashcan.prototype.WIDTH_=47,e.Trashcan.prototype.BODY_HEIGHT_=44,e.Trashcan.prototype.LID_HEIGHT_=16,e.Trashcan.prototype.MARGIN_VERTICAL_=20,e.Trashcan.prototype.MARGIN_HORIZONTAL_=20,e.Trashcan.prototype.MARGIN_HOTSPOT_=10,e.Trashcan.prototype.SPRITE_LEFT_=0,e.Trashcan.prototype.SPRITE_TOP_=32,e.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,e.Trashcan.ANIMATION_LENGTH_=80,e.Trashcan.ANIMATION_FRAMES_=4,e.Trashcan.OPACITY_MIN_=.4,e.Trashcan.OPACITY_MAX_=.8,e.Trashcan.MAX_LID_ANGLE_=45,e.Trashcan.prototype.isLidOpen=!1,e.Trashcan.prototype.minOpenness_=0,e.Trashcan.prototype.svgGroup_=null,e.Trashcan.prototype.svgLid_=null,e.Trashcan.prototype.lidTask_=0,e.Trashcan.prototype.lidOpen_=0,e.Trashcan.prototype.left_=0,e.Trashcan.prototype.top_=0,e.Trashcan.prototype.initialized_=!1,e.Trashcan.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},n);var o=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return o.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},n),this.svgLid_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,x:-this.SPRITE_LEFT_,height:e.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),e.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),e.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),e.browserEvents.bind(o,"mouseover",this,this.mouseOver_),e.browserEvents.bind(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},e.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(e.utils.dom.insertAfter(this.flyout.createDom(e.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[e.ComponentManager.Capability.AUTOHIDEABLE,e.ComponentManager.Capability.DELETE_AREA,e.ComponentManager.Capability.DRAG_TARGET,e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},e.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(e.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},e.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},e.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},e.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(e.Xml.textToDom);this.flyout.show(t),this.fireUiEvent_(!0)}},e.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},e.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},e.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},e.Trashcan.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t);t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,o.vertical===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.Trashcan.prototype.getBoundingRectangle=function(){return new e.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},e.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),n=t.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new e.utils.Rect(n,n+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,t=t.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,t+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},e.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},e.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},e.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},e.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!=t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},e.Trashcan.prototype.animateLid_=function(){var t=e.Trashcan.ANIMATION_FRAMES_,n=1/(t+1);this.lidOpen_+=this.isLidOpen?n:-n,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*e.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(n=e.Trashcan.OPACITY_MIN_)+this.lidOpen_*(e.Trashcan.OPACITY_MAX_-n),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),e.Trashcan.ANIMATION_LENGTH_/t))},e.Trashcan.prototype.setLidAngle_=function(t){var n=this.workspace_.toolboxPosition==e.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(n?-t:t)+","+(n?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},e.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*e.Trashcan.MAX_LID_ANGLE_)},e.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},e.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},e.Trashcan.prototype.fireUiEvent_=function(t){t=new(e.Events.get(e.Events.TRASHCAN_OPEN))(t,this.workspace_.id),e.Events.fire(t)},e.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},e.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},e.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},e.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents)&&t.type==e.Events.BLOCK_DELETE&&t.oldXml.tagName&&"shadow"!=t.oldXml.tagName.toLowerCase()&&(t=this.cleanBlockXML_(t.oldXml),-1==this.contents_.indexOf(t))){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},e.Trashcan.prototype.cleanBlockXML_=function(t){for(var n=t=t.cloneNode(!0);n;){n.removeAttribute&&(n.removeAttribute("x"),n.removeAttribute("y"),n.removeAttribute("id"),n.removeAttribute("disabled"),"comment"==n.nodeName&&(n.removeAttribute("h"),n.removeAttribute("w"),n.removeAttribute("pinned")));var o=n.firstChild||n.nextSibling;if(!o)for(o=n.parentNode;o;){if(o.nextSibling){o=o.nextSibling;break}o=o.parentNode}n=o}return e.Xml.domToText(t)},e.VariablesDynamic={},e.VariablesDynamic.onCreateVariableButtonClick_String=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"String")},e.VariablesDynamic.onCreateVariableButtonClick_Number=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Number")},e.VariablesDynamic.onCreateVariableButtonClick_Colour=function(t){e.Variables.createVariableButtonHandler(t.getTargetWorkspace(),void 0,"Colour")},e.VariablesDynamic.flyoutCategory=function(t){var n=[],o=document.createElement("button");return o.setAttribute("text",e.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),(o=document.createElement("button")).setAttribute("text",e.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),t.registerButtonCallback("CREATE_VARIABLE_STRING",e.VariablesDynamic.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",e.VariablesDynamic.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",e.VariablesDynamic.onCreateVariableButtonClick_Colour),t=e.VariablesDynamic.flyoutCategoryBlocks(t),n.concat(t)},e.VariablesDynamic.flyoutCategoryBlocks=function(t){var n=[];if(0<(t=t.getAllVariables()).length){if(e.Blocks.variables_set_dynamic){var o=t[t.length-1],s=e.utils.xml.createElement("block");s.setAttribute("type","variables_set_dynamic"),s.setAttribute("gap",24),s.appendChild(e.Variables.generateVariableFieldDom(o)),n.push(s)}if(e.Blocks.variables_get_dynamic){t.sort(e.VariableModel.compareByName),o=0;for(var c;c=t[o];o++)(s=e.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild(e.Variables.generateVariableFieldDom(c)),n.push(s)}}return n},e.ZoomControls=function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},e.ZoomControls.prototype.WIDTH_=32,e.ZoomControls.prototype.HEIGHT_=32,e.ZoomControls.prototype.SMALL_SPACING_=2,e.ZoomControls.prototype.LARGE_SPACING_=11,e.ZoomControls.prototype.MARGIN_VERTICAL_=20,e.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,e.ZoomControls.prototype.svgGroup_=null,e.ZoomControls.prototype.left_=0,e.ZoomControls.prototype.top_=0,e.ZoomControls.prototype.initialized_=!1,e.ZoomControls.prototype.createDom=function(){this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},e.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[e.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},e.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&e.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&e.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&e.browserEvents.unbind(this.onZoomOutWrapper_)},e.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new e.utils.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},e.ZoomControls.prototype.position=function(t,n){if(this.initialized_){var o=e.uiPosition.getCornerOppositeToolbox(this.workspace_,t),s=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(s+=this.LARGE_SPACING_+this.HEIGHT_),t=e.uiPosition.getStartPositionRect(o,new e.utils.Size(this.WIDTH_,s),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),n=e.uiPosition.bumpPositionRect(t,this.MARGIN_VERTICAL_,(o=o.vertical)===e.uiPosition.verticalPosition.TOP?e.uiPosition.bumpDirection.DOWN:e.uiPosition.bumpDirection.UP,n),o===e.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(o+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(o=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(o+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=n.top,this.left_=n.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},e.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomOutWrapper_=e.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},e.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomInWrapper_=e.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},e.ZoomControls.prototype.zoom_=function(t,n){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},e.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var n=e.utils.dom.createSvgElement(e.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:32,height:32},n),e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{width:e.SPRITE.width,height:e.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+e.SPRITE.url),this.onZoomResetWrapper_=e.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},e.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var n=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(n),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),e.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},e.ZoomControls.prototype.fireZoomEvent_=function(){var t=new(e.Events.get(e.Events.CLICK))(null,this.workspace_.id,"zoom_controls");e.Events.fire(t)},e.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),e.ShortcutItems={},e.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},e.ShortcutItems.registerEscape=function(){var t={name:e.ShortcutItems.names.ESCAPE,preconditionFn:function(n){return!n.options.readOnly},callback:function(){return e.hideChaff(),!0}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.ESC,t.name)},e.ShortcutItems.registerDelete=function(){var t={name:e.ShortcutItems.names.DELETE,preconditionFn:function(n){return!n.options.readOnly&&e.selected&&e.selected.isDeletable()},callback:function(n,o){return o.preventDefault(),!e.Gesture.inProgress()&&(e.deleteBlock(e.selected),!0)}};e.ShortcutRegistry.registry.register(t),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.DELETE,t.name),e.ShortcutRegistry.registry.addKeyMapping(e.utils.KeyCodes.BACKSPACE,t.name)},e.ShortcutItems.registerCopy=function(){var t={name:e.ShortcutItems.names.COPY,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()},callback:function(o,s){return s.preventDefault(),e.hideChaff(),e.copy(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.C,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerCut=function(){var t={name:e.ShortcutItems.names.CUT,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()&&e.selected&&e.selected.isDeletable()&&e.selected.isMovable()&&!e.selected.workspace.isFlyout},callback:function(){return e.copy(e.selected),e.deleteBlock(e.selected),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.X,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerPaste=function(){var t={name:e.ShortcutItems.names.PASTE,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(){return e.paste()}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.V,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerUndo=function(){var t={name:e.ShortcutItems.names.UNDO,preconditionFn:function(o){return!o.options.readOnly&&!e.Gesture.inProgress()},callback:function(o){return e.hideChaff(),o.undo(!1),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerRedo=function(){var t={name:e.ShortcutItems.names.REDO,preconditionFn:function(o){return!e.Gesture.inProgress()&&!o.options.readOnly},callback:function(o){return e.hideChaff(),o.undo(!0),!0}};e.ShortcutRegistry.registry.register(t);var n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.CTRL]);e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.ALT]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Z,[e.utils.KeyCodes.SHIFT,e.utils.KeyCodes.META]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name),n=e.ShortcutRegistry.registry.createSerializedKey(e.utils.KeyCodes.Y,[e.utils.KeyCodes.CTRL]),e.ShortcutRegistry.registry.addKeyMapping(n,t.name)},e.ShortcutItems.registerDefaultShortcuts=function(){e.ShortcutItems.registerEscape(),e.ShortcutItems.registerDelete(),e.ShortcutItems.registerCopy(),e.ShortcutItems.registerCut(),e.ShortcutItems.registerPaste(),e.ShortcutItems.registerUndo(),e.ShortcutItems.registerRedo()},e.ShortcutItems.registerDefaultShortcuts(),e.ContextMenuItems={},e.ContextMenuItems.registerUndo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},e.ContextMenuItems.registerRedo=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},e.ContextMenuItems.registerCleanup=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},e.ContextMenuItems.toggleOption_=function(t,n){for(var o=0,s=0;s<n.length;s++)for(var c=n[s];c;)setTimeout(c.setCollapsed.bind(c,t),o),c=c.getNextBlock(),o+=10},e.ContextMenuItems.registerCollapse=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!0,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},e.ContextMenuItems.registerExpand=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var n=0;n<t.length;n++)for(var o=t[n];o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){e.ContextMenuItems.toggleOption_(!1,t.workspace.getTopBlocks(!0))},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},e.ContextMenuItems.addDeletableBlocks_=function(t,n){if(t.isDeletable())Array.prototype.push.apply(n,t.getDescendants(!1));else{t=t.getChildren(!1);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n)}},e.ContextMenuItems.getDeletableBlocks_=function(t){var n=[];t=t.getTopBlocks(!0);for(var o=0;o<t.length;o++)e.ContextMenuItems.addDeletableBlocks_(t[o],n);return n},e.ContextMenuItems.deleteNext_=function(t,n){e.Events.setGroup(n);var o=t.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(e.ContextMenuItems.deleteNext_,10,t,n)):e.ContextMenuItems.deleteNext_(t,n)),e.Events.setGroup(!1)},e.ContextMenuItems.registerDeleteAll=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return 1==(t=e.ContextMenuItems.getDeletableBlocks_(t.workspace).length)?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<e.ContextMenuItems.getDeletableBlocks_(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var n=e.ContextMenuItems.getDeletableBlocks_(t.workspace),o=e.utils.genUid();2>n.length?e.ContextMenuItems.deleteNext_(n,o):e.confirm(e.Msg.DELETE_ALL_BLOCKS.replace("%1",n.length),function(s){s&&e.ContextMenuItems.deleteNext_(n,o)})}},scopeType:e.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},e.ContextMenuItems.registerWorkspaceOptions_=function(){e.ContextMenuItems.registerUndo(),e.ContextMenuItems.registerRedo(),e.ContextMenuItems.registerCleanup(),e.ContextMenuItems.registerCollapse(),e.ContextMenuItems.registerExpand(),e.ContextMenuItems.registerDeleteAll()},e.ContextMenuItems.registerDuplicate=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&e.duplicate(t.block)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},e.ContextMenuItems.registerComment=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?e.Msg.REMOVE_COMMENT:e.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,e.utils.userAgent.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){(t=t.block).getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},e.ContextMenuItems.registerInline=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?e.Msg.EXTERNAL_INPUTS:e.Msg.INLINE_INPUTS},preconditionFn:function(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(var n=1;n<t.inputList.length;n++)if(t.inputList[n-1].type!=e.inputTypes.STATEMENT&&t.inputList[n].type!=e.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},e.ContextMenuItems.registerCollapseExpandBlock=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?e.Msg.EXPAND_BLOCK:e.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},e.ContextMenuItems.registerDisable=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?e.Msg.DISABLE_BLOCK:e.Msg.ENABLE_BLOCK},preconditionFn:function(t){return!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var n=e.Events.getGroup();n||e.Events.setGroup(!0),t.setEnabled(!t.isEnabled()),n||e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},e.ContextMenuItems.registerDelete=function(){e.ContextMenuRegistry.registry.register({displayText:function(t){var n=t.block;return t=n.getDescendants(!1).length,(n=n.getNextBlock())&&(t-=n.getDescendants(!1).length),1==t?e.Msg.DELETE_BLOCK:e.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){e.Events.setGroup(!0),t.block&&e.deleteBlock(t.block),e.Events.setGroup(!1)},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},e.ContextMenuItems.registerHelp=function(){e.ContextMenuRegistry.registry.register({displayText:function(){return e.Msg.HELP},preconditionFn:function(t){return("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:e.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},e.ContextMenuItems.registerBlockOptions_=function(){e.ContextMenuItems.registerDuplicate(),e.ContextMenuItems.registerComment(),e.ContextMenuItems.registerInline(),e.ContextMenuItems.registerCollapseExpandBlock(),e.ContextMenuItems.registerDisable(),e.ContextMenuItems.registerDelete(),e.ContextMenuItems.registerHelp()},e.ContextMenuItems.registerDefaultOptions=function(){e.ContextMenuItems.registerWorkspaceOptions_(),e.ContextMenuItems.registerBlockOptions_()},e.ContextMenuItems.registerDefaultOptions(),e.Mutator=function(t){e.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=t},e.utils.object.inherits(e.Mutator,e.Icon),e.Mutator.prototype.workspace_=null,e.Mutator.prototype.workspaceWidth_=0,e.Mutator.prototype.workspaceHeight_=0,e.Mutator.prototype.setBlock=function(t){this.block_=t},e.Mutator.prototype.getWorkspace=function(){return this.workspace_},e.Mutator.prototype.drawIcon_=function(t){e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},e.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&e.Icon.prototype.iconClick_.call(this,t)},e.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{x:e.Bubble.BORDER_WIDTH,y:e.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var o,t=e.utils.xml.createElement("xml"),n=0;o=this.quarkNames_[n];n++){var s=e.utils.xml.createElement("block");s.setAttribute("type",o),t.appendChild(s)}else t=null;return(n=new e.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?e.utils.toolbox.Position.RIGHT:e.utils.toolbox.Position.LEFT,(o=!!t)&&(n.languageTree=e.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new e.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(e.Events.disableOrphans),t=o?this.workspace_.addFlyout(e.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},e.Mutator.prototype.updateEditable=function(){e.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&e.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&e.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},e.Mutator.prototype.resizeBubble_=function(){var t=2*e.Bubble.BORDER_WIDTH,n=this.workspace_.getCanvas().getBBox(),o=n.width+n.x,s=n.height+3*t,c=this.workspace_.getFlyout();if(c){var _=c.getWorkspace().getMetricsManager().getScrollMetrics();s=Math.max(s,_.height+20),o+=c.getWidth()}this.block_.RTL&&(o=-n.x),o+=3*t,(Math.abs(this.workspaceWidth_-o)>t||Math.abs(this.workspaceHeight_-s)>t)&&(this.workspaceWidth_=o,this.workspaceHeight_=s,this.bubble_.setBubbleSize(o+t,s+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},e.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},e.Mutator.prototype.setVisible=function(t){if(t!=this.isVisible())if(e.Events.fire(new(e.Events.get(e.Events.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new e.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var n=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),n&&(t.init(this.workspace_),t.show(n)),this.rootBlock_=this.block_.decompose(this.workspace_),n=this.rootBlock_.getDescendants(!1);for(var s,o=0;s=n[o];o++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(n=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+n:n):t=n=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,n),this.block_.saveConnections){var c=this,_=this.block_;_.saveConnections(this.rootBlock_),this.sourceListener_=function(){_.saveConnections(c.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},e.Mutator.prototype.workspaceChanged_=function(t){if(!(t.isUiEvent||t.type==e.Events.CHANGE&&"disabled"==t.element)){if(!this.workspace_.isDragging()){t=this.workspace_.getTopBlocks(!1);for(var o,n=0;o=t[n];n++){var s=o.getRelativeToSurfaceXY();if(20>s.y&&o.moveBy(0,20-s.y),o.RTL){var c=-20,_=this.workspace_.getFlyout();_&&(c-=_.getWidth()),s.x>c&&o.moveBy(c-s.x,0)}else 20>s.x&&o.moveBy(20-s.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(e.Events.setGroup(!0),t=(t=(o=this.block_).mutationToDom())&&e.Xml.domToText(t),n=o.rendered,o.rendered=!1,o.compose(this.rootBlock_),o.rendered=n,o.initSvg(),o.rendered&&o.render(),t!=(n=(n=o.mutationToDom())&&e.Xml.domToText(n))){e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(o,"mutation",null,t,n));var w=e.Events.getGroup();setTimeout(function(){e.Events.setGroup(w),o.bumpNeighbours(),e.Events.setGroup(!1)},e.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),e.Events.setGroup(!1)}}},e.Mutator.prototype.dispose=function(){this.block_.mutator=null,e.Icon.prototype.dispose.call(this)},e.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var s,n=t.getAllBlocks(!1),o=0;s=n[o];o++)s.setStyle(s.getStyleName());if(o=t.getFlyout())for(t=o.workspace_.getAllBlocks(!1),o=0;s=t[o];o++)s.setStyle(s.getStyleName())}},e.Mutator.reconnect=function(t,n,o){if(!t||!t.getSourceBlock().workspace)return!1;o=n.getInput(o).connection;var s=t.targetBlock();return!(s&&s!=n||o.targetConnection==t||(o.isConnected()&&o.disconnect(),o.connect(t),0))},e.Mutator.findParentWs=function(t){var n=null;if(t&&t.options){var o=t.options.parentWorkspace;t.isFlyout?o&&o.options&&(n=o.options.parentWorkspace):o&&(n=o)}return n},e.FieldTextInput=function(t,n,o){this.spellcheck_=!0,e.FieldTextInput.superClass_.constructor.call(this,t,n,o),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},e.utils.object.inherits(e.FieldTextInput,e.Field),e.FieldTextInput.prototype.DEFAULT_VALUE="",e.FieldTextInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldTextInput(n,void 0,t)},e.FieldTextInput.prototype.SERIALIZABLE=!0,e.FieldTextInput.BORDERRADIUS=4,e.FieldTextInput.prototype.CURSOR="text",e.FieldTextInput.prototype.configure_=function(t){e.FieldTextInput.superClass_.configure_.call(this,t),"boolean"==typeof t.spellcheck&&(this.spellcheck_=t.spellcheck)},e.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var s,t=0,n=0,o=0;s=this.sourceBlock_.inputList[o];o++){for(var c=0;s.fieldRow[c];c++)t++;s.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},e.FieldTextInput.prototype.doClassValidation_=function(t){return null==t?null:String(t)},e.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&e.Events.isEnabled()&&e.Events.fire(new(e.Events.get(e.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},e.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},e.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},e.FieldTextInput.prototype.render_=function(){if(e.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0))}},e.FieldTextInput.prototype.setSpellcheck=function(t){t!=this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},e.FieldTextInput.prototype.showEditor_=function(t,n){this.workspace_=this.sourceBlock_.workspace,!(t=n||!1)&&(e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},e.FieldTextInput.prototype.showPromptEditor_=function(){e.prompt(e.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){this.setValue(this.getValueFromEditorText_(t))}.bind(this))},e.FieldTextInput.prototype.showInlineEditor_=function(t){e.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},e.FieldTextInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV;e.utils.dom.addClass(this.getClickTarget_(),"editing");var n=document.createElement("input");n.className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),s=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(t.style.fontSize=s,n.style.fontSize=s,s=e.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){s=((s=this.getScaledBBox()).bottom-s.top)/2+"px";var c=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*o+"px solid "+c,t.style.borderRadius=s,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*o+"px")}return n.style.borderRadius=s,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},e.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var t=e.WidgetDiv.DIV.style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,e.utils.dom.removeClass(this.getClickTarget_(),"editing")},e.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=e.browserEvents.conditionalBind(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=e.browserEvents.conditionalBind(t,"input",this,this.onHtmlInputChange_)},e.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(e.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},e.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode==e.utils.KeyCodes.ENTER?(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation()):t.keyCode==e.utils.KeyCodes.TAB&&(e.WidgetDiv.hide(),e.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},e.FieldTextInput.prototype.onHtmlInputChange_=function(t){(t=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,e.Events.setGroup(!0),t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_(),e.Events.setGroup(!1))},e.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},e.FieldTextInput.prototype.resizeEditor_=function(){var t=e.WidgetDiv.DIV,n=this.getScaledBBox();t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",n=new e.utils.Coordinate(this.sourceBlock_.RTL?n.right-t.offsetWidth:n.left,n.top),t.style.left=n.x+"px",t.style.top=n.y+"px"},e.FieldTextInput.prototype.isTabNavigable=function(){return!0},e.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},e.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},e.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},e.fieldRegistry.register("field_input",e.FieldTextInput),e.FieldAngle=function(t,n,o){this.clockwise_=e.FieldAngle.CLOCKWISE,this.offset_=e.FieldAngle.OFFSET,this.wrap_=e.FieldAngle.WRAP,this.round_=e.FieldAngle.ROUND,e.FieldAngle.superClass_.constructor.call(this,t,n,o),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},e.utils.object.inherits(e.FieldAngle,e.FieldTextInput),e.FieldAngle.prototype.DEFAULT_VALUE=0,e.FieldAngle.fromJson=function(t){return new e.FieldAngle(t.angle,void 0,t)},e.FieldAngle.prototype.SERIALIZABLE=!0,e.FieldAngle.ROUND=15,e.FieldAngle.HALF=50,e.FieldAngle.CLOCKWISE=!1,e.FieldAngle.OFFSET=0,e.FieldAngle.WRAP=360,e.FieldAngle.RADIUS=e.FieldAngle.HALF-1,e.FieldAngle.prototype.configure_=function(t){switch(e.FieldAngle.superClass_.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var n=t.clockwise;"boolean"==typeof n&&(this.clockwise_=n),null!=(n=t.offset)&&(n=Number(n),isNaN(n)||(this.offset_=n)),null!=(n=t.wrap)&&(n=Number(n),isNaN(n)||(this.wrap_=n)),null!=(t=t.round)&&(t=Number(t),isNaN(t)||(this.round_=t))},e.FieldAngle.prototype.initView=function(){e.FieldAngle.superClass_.initView.call(this),this.symbol_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},e.FieldAngle.prototype.render_=function(){e.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},e.FieldAngle.prototype.showEditor_=function(t){e.FieldAngle.superClass_.showEditor_.call(this,t,e.utils.userAgent.MOBILE||e.utils.userAgent.ANDROID||e.utils.userAgent.IPAD),this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.editor_),e.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},e.FieldAngle.prototype.dropdownCreate_=function(){var t=e.utils.dom.createSvgElement(e.utils.Svg.SVG,{xmlns:e.utils.dom.SVG_NS,"xmlns:html":e.utils.dom.HTML_NS,"xmlns:xlink":e.utils.dom.XLINK_NS,version:"1.1",height:2*e.FieldAngle.HALF+"px",width:2*e.FieldAngle.HALF+"px",style:"touch-action: none"},null),n=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{cx:e.FieldAngle.HALF,cy:e.FieldAngle.HALF,r:e.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF,y1:e.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var o=0;360>o;o+=15)e.utils.dom.createSvgElement(e.utils.Svg.LINE,{x1:e.FieldAngle.HALF+e.FieldAngle.RADIUS,y1:e.FieldAngle.HALF,x2:e.FieldAngle.HALF+e.FieldAngle.RADIUS-(o%45==0?10:5),y2:e.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+e.FieldAngle.HALF+","+e.FieldAngle.HALF+")"},t);this.clickWrapper_=e.browserEvents.conditionalBind(t,"click",this,this.hide_),this.clickSurfaceWrapper_=e.browserEvents.conditionalBind(n,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=e.browserEvents.conditionalBind(n,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},e.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(e.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(e.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(e.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},e.FieldAngle.prototype.hide_=function(){e.DropDownDiv.hideIfOwner(this),e.WidgetDiv.hide()},e.FieldAngle.prototype.onMouseMove_=function(t){var n=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=t.clientX-n.left-e.FieldAngle.HALF;t=t.clientY-n.top-e.FieldAngle.HALF,n=Math.atan(-t/o),isNaN(n)||(n=e.utils.math.toDegrees(n),0>o?n+=180:0<t&&(n+=360),this.displayMouseOrKeyboardValue_(n=this.clockwise_?this.offset_+360-n:360-(this.offset_-n)))},e.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),(t=this.wrapValue_(t))!=this.value_&&this.setEditorValue_(t)},e.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,n=e.utils.math.toRadians(t%360);t=["M ",e.FieldAngle.HALF,",",e.FieldAngle.HALF];var o=e.FieldAngle.HALF,s=e.FieldAngle.HALF;if(!isNaN(n)){var c=Number(this.clockwise_),_=e.utils.math.toRadians(this.offset_),w=Math.cos(_)*e.FieldAngle.RADIUS,M=Math.sin(_)*-e.FieldAngle.RADIUS;c&&(n=2*_-n),o+=Math.cos(n)*e.FieldAngle.RADIUS,s-=Math.sin(n)*e.FieldAngle.RADIUS,n=Math.abs(Math.floor((n-_)/Math.PI)%2),c&&(n=1-n),t.push(" l ",w,",",M," A ",e.FieldAngle.RADIUS,",",e.FieldAngle.RADIUS," 0 ",n," ",c," ",o,",",s," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",s)}},e.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){var n;if(e.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,t),t.keyCode===e.utils.KeyCodes.LEFT?n=this.sourceBlock_.RTL?1:-1:t.keyCode===e.utils.KeyCodes.RIGHT?n=this.sourceBlock_.RTL?-1:1:t.keyCode===e.utils.KeyCodes.DOWN?n=-1:t.keyCode===e.utils.KeyCodes.UP&&(n=1),n){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+n*this.round_),t.preventDefault(),t.stopPropagation()}},e.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},e.FieldAngle.prototype.wrapValue_=function(t){return 0>(t%=360)&&(t+=360),t>this.wrap_&&(t-=360),t},e.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),e.fieldRegistry.register("field_angle",e.FieldAngle),e.FieldCheckbox=function(t,n,o){this.checkChar_=null,e.FieldCheckbox.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldCheckbox,e.Field),e.FieldCheckbox.prototype.DEFAULT_VALUE=!1,e.FieldCheckbox.fromJson=function(t){return new e.FieldCheckbox(t.checked,void 0,t)},e.FieldCheckbox.CHECK_CHAR="\u2713",e.FieldCheckbox.prototype.SERIALIZABLE=!0,e.FieldCheckbox.prototype.CURSOR="default",e.FieldCheckbox.prototype.configure_=function(t){e.FieldCheckbox.superClass_.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},e.FieldCheckbox.prototype.initView=function(){e.FieldCheckbox.superClass_.initView.call(this),e.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},e.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},e.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||e.FieldCheckbox.CHECK_CHAR},e.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t,this.forceRerender()},e.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},e.FieldCheckbox.prototype.doClassValidation_=function(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null},e.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},e.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},e.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},e.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},e.FieldCheckbox.prototype.convertValueToBool_=function(t){return"string"==typeof t?"TRUE"==t:!!t},e.fieldRegistry.register("field_checkbox",e.FieldCheckbox),e.FieldColour=function(t,n,o){e.FieldColour.superClass_.constructor.call(this,t,n,o),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},e.utils.object.inherits(e.FieldColour,e.Field),e.FieldColour.fromJson=function(t){return new e.FieldColour(t.colour,void 0,t)},e.FieldColour.prototype.SERIALIZABLE=!0,e.FieldColour.prototype.CURSOR="default",e.FieldColour.prototype.isDirty_=!1,e.FieldColour.prototype.colours_=null,e.FieldColour.prototype.titles_=null,e.FieldColour.prototype.columns_=0,e.FieldColour.prototype.configure_=function(t){e.FieldColour.superClass_.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},e.FieldColour.prototype.initView=function(){this.size_=new e.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},e.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},e.FieldColour.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:e.utils.colour.parse(t)},e.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},e.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},e.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),e.FieldColour.prototype.DEFAULT_VALUE=e.FieldColour.COLOURS[0],e.FieldColour.TITLES=[],e.FieldColour.COLUMNS=7,e.FieldColour.prototype.setColours=function(t,n){return this.colours_=t,n&&(this.titles_=n),this},e.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},e.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),e.DropDownDiv.getContentDiv().appendChild(this.picker_),e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onClick_=function(t){null!==(t=(t=t.target)&&t.label)&&(this.setValue(t),e.DropDownDiv.hideIfOwner(this))},e.FieldColour.prototype.onKeyDown_=function(t){var n=!1;t.keyCode===e.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),n=!0):t.keyCode===e.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),n=!0):t.keyCode===e.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),n=!0):t.keyCode===e.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),n=!0):t.keyCode===e.utils.KeyCodes.ENTER&&((n=this.getHighlighted_())&&null!==(n=n&&n.label)&&this.setValue(n),e.DropDownDiv.hideWithoutAnimation(),n=!0),n&&t.stopPropagation()},e.FieldColour.prototype.moveHighlightBy_=function(t,n){var o=this.colours_||e.FieldColour.COLOURS,s=this.columns_||e.FieldColour.COLUMNS,c=this.highlightedIndex_%s,_=Math.floor(this.highlightedIndex_/s);c+=t,_+=n,0>t?0>c&&0<_?(c=s-1,_--):0>c&&(c=0):0<t?c>s-1&&_<Math.floor(o.length/s)-1?(c=0,_++):c>s-1&&c--:0>n?0>_&&(_=0):0<n&&_>Math.floor(o.length/s)-1&&(_=Math.floor(o.length/s)-1),this.setHighlightedCell_(this.picker_.childNodes[_].childNodes[c],_*s+c)},e.FieldColour.prototype.onMouseMove_=function(t){var n=(t=t.target)&&Number(t.getAttribute("data-index"));null!==n&&n!==this.highlightedIndex_&&this.setHighlightedCell_(t,n)},e.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},e.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&e.utils.dom.removeClass(t,"blocklyColourHighlighted")},e.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return n?n.childNodes[this.highlightedIndex_%t]:null},e.FieldColour.prototype.setHighlightedCell_=function(t,n){var o=this.getHighlighted_();o&&e.utils.dom.removeClass(o,"blocklyColourHighlighted"),e.utils.dom.addClass(t,"blocklyColourHighlighted"),this.highlightedIndex_=n,e.utils.aria.setState(this.picker_,e.utils.aria.State.ACTIVEDESCENDANT,t.getAttribute("id"))},e.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||e.FieldColour.COLUMNS,n=this.colours_||e.FieldColour.COLOURS,o=this.titles_||e.FieldColour.TITLES,s=this.getValue(),c=document.createElement("table");c.className="blocklyColourTable",c.tabIndex=0,c.dir="ltr",e.utils.aria.setRole(c,e.utils.aria.Role.GRID),e.utils.aria.setState(c,e.utils.aria.State.EXPANDED,!0),e.utils.aria.setState(c,e.utils.aria.State.ROWCOUNT,Math.floor(n.length/t)),e.utils.aria.setState(c,e.utils.aria.State.COLCOUNT,t);for(var _,w=0;w<n.length;w++){w%t==0&&(_=document.createElement("tr"),e.utils.aria.setRole(_,e.utils.aria.Role.ROW),c.appendChild(_));var M=document.createElement("td");_.appendChild(M),M.label=n[w],M.title=o[w]||n[w],M.id=e.utils.IdGenerator.getNextUniqueId(),M.setAttribute("data-index",w),e.utils.aria.setRole(M,e.utils.aria.Role.GRIDCELL),e.utils.aria.setState(M,e.utils.aria.State.LABEL,n[w]),e.utils.aria.setState(M,e.utils.aria.State.SELECTED,n[w]==s),M.style.backgroundColor=n[w],n[w]==s&&(M.className="blocklyColourSelected",this.highlightedIndex_=w)}this.onClickWrapper_=e.browserEvents.conditionalBind(c,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=e.browserEvents.conditionalBind(c,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=e.browserEvents.conditionalBind(c,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=e.browserEvents.conditionalBind(c,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=e.browserEvents.conditionalBind(c,"keydown",this,this.onKeyDown_),this.picker_=c},e.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(e.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(e.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(e.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(e.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(e.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},e.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),e.fieldRegistry.register("field_colour",e.FieldColour),e.FieldDropdown=function(t,n,o){"function"!=typeof t&&e.FieldDropdown.validateOptions_(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],e.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],n,o),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},e.utils.object.inherits(e.FieldDropdown,e.Field),e.FieldDropdown.fromJson=function(t){return new e.FieldDropdown(t.options,void 0,t)},e.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},e.FieldDropdown.prototype.SERIALIZABLE=!0,e.FieldDropdown.CHECKMARK_OVERHANG=25,e.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,e.FieldDropdown.IMAGE_Y_OFFSET=5,e.FieldDropdown.IMAGE_Y_PADDING=2*e.FieldDropdown.IMAGE_Y_OFFSET,e.FieldDropdown.ARROW_CHAR=e.utils.userAgent.ANDROID?"\u25bc":"\u25be",e.FieldDropdown.prototype.CURSOR="default",e.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&e.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},e.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},e.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=e.utils.dom.createSvgElement(e.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?e.FieldDropdown.ARROW_CHAR+" ":" "+e.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},e.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},e.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new e.utils.Coordinate(t.clientX,t.clientY):null,this.menu_.render(e.DropDownDiv.getContentDiv()),t=this.menu_.getElement(),e.utils.dom.addClass(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.DropDownDiv.setColour(t,n)}e.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},e.FieldDropdown.prototype.dropdownCreate_=function(){var t=new e.Menu;t.setRole(e.utils.aria.Role.LISTBOX),this.menu_=t;var n=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<n.length;o++){var s=n[o][0],c=n[o][1];if("object"==typeof s){var _=new Image(s.width,s.height);_.src=s.src,_.alt=s.alt||"",s=_}(s=new e.MenuItem(s,c)).setRole(e.utils.aria.Role.OPTION),s.setRightToLeft(this.sourceBlock_.RTL),s.setCheckable(!0),t.addChild(s),s.setChecked(c==this.value_),c==this.value_&&(this.selectedMenuItem_=s),s.onAction(this.handleMenuActionEvent_,this)}},e.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},e.FieldDropdown.prototype.handleMenuActionEvent_=function(t){e.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,t)},e.FieldDropdown.prototype.onItemSelected_=function(t,n){this.setValue(n.getValue())},e.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var n=!1,o=0;o<t.length;o++){var s=t[o][0];"string"==typeof s?t[o][0]=e.utils.replaceMessageReferences(s):(null!=s.alt&&(t[o][0].alt=e.utils.replaceMessageReferences(s.alt)),n=!0)}if(!(n||2>t.length)){for(n=[],o=0;o<t.length;o++)n.push(t[o][0]);o=e.utils.string.shortestStringLength(n),s=e.utils.string.commonWordPrefix(n,o);var c=e.utils.string.commonWordSuffix(n,o);!s&&!c||o<=s+c||(s&&(this.prefixField=n[0].substring(0,s-1)),c&&(this.suffixField=n[0].substr(1-c)),this.menuGenerator_=e.FieldDropdown.applyTrim_(t,s,c))}}},e.FieldDropdown.applyTrim_=function(t,n,o){for(var s=[],c=0;c<t.length;c++){var _=t[c][0],w=t[c][1];_=_.substring(n,_.length-o),s[c]=[_,w]}return s},e.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},e.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),e.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},e.FieldDropdown.prototype.doClassValidation_=function(t){for(var c,n=!1,o=this.getOptions(!0),s=0;c=o[s];s++)if(c[1]==t){n=!0;break}return n?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},e.FieldDropdown.prototype.doValueUpdate_=function(t){e.FieldDropdown.superClass_.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var o,n=0;o=t[n];n++)o[1]==this.value_&&(this.selectedOption_=o)},e.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},e.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&"object"==typeof t?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},e.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var n=Number(t.height);t=Number(t.width);var o=!!this.borderRect_,s=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,n+e.FieldDropdown.IMAGE_Y_PADDING);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var c=this.svgArrow_?this.positionSVGArrow_(t+o,s/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):e.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+c+2*o,this.size_.height=s;var _=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+c):(_=t+c,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",s/2-n/2),this.positionTextElement_(_+o,t+c)},e.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),e.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,n=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=e.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=0;this.svgArrow_&&(s=this.positionSVGArrow_(o+t,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+s+2*t,this.size_.height=n,this.positionTextElement_(t,o)},e.FieldDropdown.prototype.positionSVGArrow_=function(t,n){if(!this.svgArrow_)return 0;var o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,c=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?o:t+s)+","+n+")"),c+s},e.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return"object"==typeof t?t.alt:t},e.FieldDropdown.validateOptions_=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var n=!1,o=0;o<t.length;++o){var s=t[o];Array.isArray(s)?"string"!=typeof s[1]?(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option id must be a string. Found "+s[1]+" in: ",s)):s[0]&&"string"!=typeof s[0]&&"string"!=typeof s[0].src&&(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must have a string label or image description. Found"+s[0]+" in: ",s)):(n=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must be an array. Found: ",s))}if(n)throw TypeError("Found invalid FieldDropdown options.")},e.fieldRegistry.register("field_dropdown",e.FieldDropdown),e.FieldLabelSerializable=function(t,n,o){e.FieldLabelSerializable.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.FieldLabelSerializable,e.FieldLabel),e.FieldLabelSerializable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldLabelSerializable(n,void 0,t)},e.FieldLabelSerializable.prototype.EDITABLE=!1,e.FieldLabelSerializable.prototype.SERIALIZABLE=!0,e.fieldRegistry.register("field_label_serializable",e.FieldLabelSerializable),e.FieldImage=function(t,n,o,s,c,_,w){if(!t)throw Error("Src value of an image field is required");if(t=e.utils.replaceMessageReferences(t),o=Number(e.utils.replaceMessageReferences(o)),n=Number(e.utils.replaceMessageReferences(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=n)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",e.FieldImage.superClass_.constructor.call(this,t,null,w),w||(this.flipRtl_=!!_,this.altText_=e.utils.replaceMessageReferences(s)||""),this.size_=new e.utils.Size(n,o+e.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,"function"==typeof c&&(this.clickHandler_=c),this.imageElement_=null},e.utils.object.inherits(e.FieldImage,e.Field),e.FieldImage.prototype.DEFAULT_VALUE="",e.FieldImage.fromJson=function(t){return new e.FieldImage(t.src,t.width,t.height,void 0,void 0,void 0,t)},e.FieldImage.Y_PADDING=1,e.FieldImage.prototype.EDITABLE=!1,e.FieldImage.prototype.isDirty_=!1,e.FieldImage.prototype.configure_=function(t){e.FieldImage.superClass_.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=e.utils.replaceMessageReferences(t.alt)||""},e.FieldImage.prototype.initView=function(){this.imageElement_=e.utils.dom.createSvgElement(e.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},e.FieldImage.prototype.updateSize_=function(){},e.FieldImage.prototype.doClassValidation_=function(t){return"string"!=typeof t?null:t},e.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(e.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},e.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},e.FieldImage.prototype.setAlt=function(t){t!=this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},e.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},e.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},e.FieldImage.prototype.getText_=function(){return this.altText_},e.fieldRegistry.register("field_image",e.FieldImage),e.FieldMultilineInput=function(t,n,o){e.FieldMultilineInput.superClass_.constructor.call(this,t,n,o),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},e.utils.object.inherits(e.FieldMultilineInput,e.FieldTextInput),e.FieldMultilineInput.prototype.configure_=function(t){e.FieldMultilineInput.superClass_.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},e.FieldMultilineInput.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.text);return new e.FieldMultilineInput(n,void 0,t)},e.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},e.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,"\n"))},e.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},e.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return e.Field.NBSP;var n=t.split("\n");t="";for(var o=this.isOverflowedY_?this.maxLines_:n.length,s=0;s<o;s++){var c=n[s];c.length>this.maxDisplayLength?c=c.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&s===o-1&&(c=c.substring(0,c.length-3)+"..."),t+=c=c.replace(/\s/g,e.Field.NBSP),s!==o-1&&(t+="\n")}return this.sourceBlock_.RTL&&(t+="\u200f"),t},e.FieldMultilineInput.prototype.doValueUpdate_=function(t){e.FieldMultilineInput.superClass_.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},e.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split("\n");for(var n=0,o=0;o<t.length;o++){var s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:n+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[o])),n+=s}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?e.utils.dom.addClass(t,"blocklyHtmlTextAreaInputOverflowedY"):e.utils.dom.removeClass(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?(e.utils.dom.removeClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!1)):(e.utils.dom.addClass(t,"blocklyInvalidInput"),e.utils.aria.setState(t,e.utils.aria.State.INVALID,!0)))},e.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,n=0,o=0,s=0;s<t.length;s++){var c=e.utils.dom.getTextWidth(t[s]);c>n&&(n=c),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<s?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split("\n"),c=e.utils.dom.createSvgElement(e.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var _=this.getConstants().FIELD_TEXT_FONTSIZE,w=this.getConstants().FIELD_TEXT_FONTWEIGHT,M=this.getConstants().FIELD_TEXT_FONTFAMILY;for(s=0;s<t.length;s++){t[s].length>this.maxDisplayLength&&(t[s]=t[s].substring(0,this.maxDisplayLength)),c.textContent=t[s];var U=e.utils.dom.getFastTextWidth(c,_,w,M);U>n&&(n=U)}n+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",n),this.borderRect_.setAttribute("height",o)),this.size_.width=n,this.size_.height=o,this.positionBorderRect_()},e.FieldMultilineInput.prototype.showEditor_=function(t,n){e.FieldMultilineInput.superClass_.showEditor_.call(this,t,n),this.forceRerender()},e.FieldMultilineInput.prototype.widgetCreate_=function(){var t=e.WidgetDiv.DIV,n=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var s=this.getConstants().FIELD_TEXT_FONTSIZE*n+"pt";t.style.fontSize=s,o.style.fontSize=s,o.style.borderRadius=e.FieldTextInput.BORDERRADIUS*n+"px",s=this.getConstants().FIELD_BORDER_RECT_X_PADDING*n;var c=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*n/2;return o.style.padding=c+"px "+s+"px "+c+"px "+s+"px",s=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=s*n+"px",t.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,e.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},e.FieldMultilineInput.prototype.setMaxLines=function(t){"number"==typeof t&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},e.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},e.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==e.utils.KeyCodes.ENTER&&e.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,t)},e.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),e.fieldRegistry.register("field_multilinetext",e.FieldMultilineInput),e.FieldNumber=function(t,n,o,s,c,_){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,e.FieldNumber.superClass_.constructor.call(this,t,c,_),_||this.setConstraints(n,o,s)},e.utils.object.inherits(e.FieldNumber,e.FieldTextInput),e.FieldNumber.prototype.DEFAULT_VALUE=0,e.FieldNumber.fromJson=function(t){return new e.FieldNumber(t.value,void 0,void 0,void 0,void 0,t)},e.FieldNumber.prototype.SERIALIZABLE=!0,e.FieldNumber.prototype.configure_=function(t){e.FieldNumber.superClass_.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},e.FieldNumber.prototype.setConstraints=function(t,n,o){this.setMinInternal_(t),this.setMaxInternal_(n),this.setPrecisionInternal_(o),this.setValue(this.getValue())},e.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMinInternal_=function(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},e.FieldNumber.prototype.getMin=function(){return this.min_},e.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setMaxInternal_=function(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},e.FieldNumber.prototype.getMax=function(){return this.max_},e.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},e.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var n=String(this.precision_);-1!=n.indexOf("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var o=n.indexOf(".");this.decimalPlaces_=-1==o?t?0:null:n.length-o-1},e.FieldNumber.prototype.getPrecision=function(){return this.precision_},e.FieldNumber.prototype.doClassValidation_=function(t){return null===t||(t=(t=(t=(t=String(t)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},e.FieldNumber.prototype.widgetCreate_=function(){var t=e.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&e.utils.aria.setState(t,e.utils.aria.State.VALUEMAX,this.max_),t},e.fieldRegistry.register("field_number",e.FieldNumber),e.FieldVariable=function(t,n,o,s,c){this.menuGenerator_=e.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new e.utils.Size(0,0),c&&this.configure_(c),n&&this.setValidator(n),c||this.setTypes_(o,s)},e.utils.object.inherits(e.FieldVariable,e.FieldDropdown),e.FieldVariable.fromJson=function(t){var n=e.utils.replaceMessageReferences(t.variable);return new e.FieldVariable(n,void 0,void 0,void 0,t)},e.FieldVariable.prototype.SERIALIZABLE=!0,e.FieldVariable.prototype.configure_=function(t){e.FieldVariable.superClass_.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},e.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},e.FieldVariable.prototype.shouldAddBorderRect_=function(){return e.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},e.FieldVariable.prototype.fromXml=function(t){var n=t.getAttribute("id"),o=t.textContent,s=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(n=e.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,n,o,s),null!=s&&s!==n.type)throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.type+", and does not match variable field that references it: "+e.Xml.domToText(t)+".");this.setValue(n.getId())},e.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},e.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");e.FieldVariable.superClass_.setSourceBlock.call(this,t)},e.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},e.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},e.FieldVariable.prototype.getVariable=function(){return this.variable_},e.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},e.FieldVariable.prototype.doClassValidation_=function(t){if(null===t)return null;var n=e.Variables.getVariable(this.sourceBlock_.workspace,t);return n?this.typeIsAllowed_(n=n.type)?t:(console.warn("Variable type doesn't match this field!  Type was "+n),null):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},e.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=e.Variables.getVariable(this.sourceBlock_.workspace,t),e.FieldVariable.superClass_.doValueUpdate_.call(this,t)},e.FieldVariable.prototype.typeIsAllowed_=function(t){var n=this.getVariableTypes_();if(!n)return!0;for(var o=0;o<n.length;o++)if(t==n[o])return!0;return!1},e.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},e.FieldVariable.prototype.setTypes_=function(t,n){if(n=n||"",null==t||null==t)t=null;else{if(!Array.isArray(t))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var o=!1,s=0;s<t.length;s++)t[s]==n&&(o=!0);if(!o)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=t},e.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},e.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),n=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),s=0;s<o.length;s++){var c=this.sourceBlock_.workspace.getVariablesOfType(o[s]);n=n.concat(c)}for(n.sort(e.VariableModel.compareByName),o=[],s=0;s<n.length;s++)o[s]=[n[s].name,n[s].getId()];return o.push([e.Msg.RENAME_VARIABLE,e.RENAME_VARIABLE_ID]),e.Msg.DELETE_VARIABLE&&o.push([e.Msg.DELETE_VARIABLE.replace("%1",t),e.DELETE_VARIABLE_ID]),o},e.FieldVariable.prototype.onItemSelected_=function(t,n){if(t=n.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t==e.RENAME_VARIABLE_ID)return void e.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(t==e.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(t)},e.FieldVariable.prototype.referencesVariables=function(){return!0},e.fieldRegistry.register("field_variable",e.FieldVariable),e.utils.svgPaths={},e.utils.svgPaths.point=function(t,n){return" "+t+","+n+" "},e.utils.svgPaths.curve=function(t,n){return" "+t+n.join("")},e.utils.svgPaths.moveTo=function(t,n){return" M "+t+","+n+" "},e.utils.svgPaths.moveBy=function(t,n){return" m "+t+","+n+" "},e.utils.svgPaths.lineTo=function(t,n){return" l "+t+","+n+" "},e.utils.svgPaths.line=function(t){return" l"+t.join("")},e.utils.svgPaths.lineOnAxis=function(t,n){return" "+t+" "+n+" "},e.utils.svgPaths.arc=function(t,n,o,s){return t+" "+o+" "+o+" "+n+s},e.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=e.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!e.utils.userAgent.IE&&!e.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},e.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},e.blockRendering.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var o,n=t.blockStyles;for(o in n)this.blockStyles[o]=this.validatedBlockStyle_(n[o]);this.setDynamicProperties_(t)},e.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=null!=t.startHats?t.startHats:this.ADD_START_HATS},e.blockRendering.ConstantProvider.prototype.setFontConstants_=function(t){this.FIELD_TEXT_FONTFAMILY=t.fontStyle&&null!=t.fontStyle.family?t.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=t.fontStyle&&null!=t.fontStyle.weight?t.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=t.fontStyle&&null!=t.fontStyle.size?t.fontStyle.size:this.FIELD_TEXT_FONTSIZE,t=e.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},e.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},e.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(t){var n="auto_"+t;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(t)),{style:this.blockStyles[n],name:n}},e.blockRendering.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&0==t.indexOf("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},e.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},e.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(t){var n={};return t&&e.utils.object.mixin(n,t),t=e.utils.parseBlockColour(n.colourPrimary||"#000"),n.colourPrimary=t.hex,n.colourSecondary=n.colourSecondary?e.utils.parseBlockColour(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?e.utils.parseBlockColour(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n},e.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#fff",t,.6)||t},e.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#fff",t,.3)||t},e.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&e.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&e.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&e.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},e.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.line([e.utils.svgPaths.point(n,t/4),e.utils.svgPaths.point(2*-n,t/2),e.utils.svgPaths.point(n,t/4)])}},e.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(30,-t),e.utils.svgPaths.point(70,-t),e.utils.svgPaths.point(n,0)])}},e.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function t(_){var w=-(_=_?-1:1),M=o/2,U=M+2.5,V=M+.5,H=e.utils.svgPaths.point(-n,_*M);return M=e.utils.svgPaths.point(n,_*M),e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(0,_*U),e.utils.svgPaths.point(-n,w*V),H])+e.utils.svgPaths.curve("s",[e.utils.svgPaths.point(n,2.5*w),M])}var n=this.TAB_WIDTH,o=this.TAB_HEIGHT,s=t(!0),c=t(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:c,pathUp:s}},e.blockRendering.ConstantProvider.prototype.makeNotch=function(){function t(w){return e.utils.svgPaths.line([e.utils.svgPaths.point(w*s,o),e.utils.svgPaths.point(3*w,0),e.utils.svgPaths.point(w*s,-o)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,s=(n-3)/2,c=t(1),_=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:c,pathRight:_}},e.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t))}},e.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.moveBy(0,t)+e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,-t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t)),s=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,-t));return{topLeft:n,topRight:o,bottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t)),bottomLeft:s,rightHeight:t}},e.blockRendering.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},e.blockRendering.ConstantProvider.prototype.createDom=function(t,n,o){this.injectCSS_(n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},o),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},n),this.embossFilterId=n.id,this.embossFilter_=n,n=e.utils.dom.createSvgElement(e.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},t),e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},n),e.utils.dom.createSvgElement(e.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},n),this.disabledPatternId=n.id,this.disabledPattern_=n,e.blockRendering.Debug&&(t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t)},e.blockRendering.ConstantProvider.prototype.injectCSS_=function(t,n){n=this.getCSS_(n),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var o=n.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=o:((n=document.createElement("style")).id=t,t=document.createTextNode(o),n.appendChild(t),document.head.insertBefore(n,document.head.firstChild),this.cssNode_=n)},e.blockRendering.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},e.blockRendering.Types.LEFT_CORNER=e.blockRendering.Types.LEFT_SQUARE_CORNER|e.blockRendering.Types.LEFT_ROUND_CORNER,e.blockRendering.Types.RIGHT_CORNER=e.blockRendering.Types.RIGHT_SQUARE_CORNER|e.blockRendering.Types.RIGHT_ROUND_CORNER,e.blockRendering.Types.nextTypeValue_=16777216,e.blockRendering.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(e.blockRendering.Types,t)||(e.blockRendering.Types[t]=e.blockRendering.Types.nextTypeValue_,e.blockRendering.Types.nextTypeValue_<<=1),e.blockRendering.Types[t]},e.blockRendering.Types.isField=function(t){return t.type&e.blockRendering.Types.FIELD},e.blockRendering.Types.isHat=function(t){return t.type&e.blockRendering.Types.HAT},e.blockRendering.Types.isIcon=function(t){return t.type&e.blockRendering.Types.ICON},e.blockRendering.Types.isSpacer=function(t){return t.type&e.blockRendering.Types.SPACER},e.blockRendering.Types.isInRowSpacer=function(t){return t.type&e.blockRendering.Types.IN_ROW_SPACER},e.blockRendering.Types.isInput=function(t){return t.type&e.blockRendering.Types.INPUT},e.blockRendering.Types.isExternalInput=function(t){return t.type&e.blockRendering.Types.EXTERNAL_VALUE_INPUT},e.blockRendering.Types.isInlineInput=function(t){return t.type&e.blockRendering.Types.INLINE_INPUT},e.blockRendering.Types.isStatementInput=function(t){return t.type&e.blockRendering.Types.STATEMENT_INPUT},e.blockRendering.Types.isPreviousConnection=function(t){return t.type&e.blockRendering.Types.PREVIOUS_CONNECTION},e.blockRendering.Types.isNextConnection=function(t){return t.type&e.blockRendering.Types.NEXT_CONNECTION},e.blockRendering.Types.isPreviousOrNextConnection=function(t){return t.type&(e.blockRendering.Types.PREVIOUS_CONNECTION|e.blockRendering.Types.NEXT_CONNECTION)},e.blockRendering.Types.isLeftRoundedCorner=function(t){return t.type&e.blockRendering.Types.LEFT_ROUND_CORNER},e.blockRendering.Types.isRightRoundedCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_ROUND_CORNER},e.blockRendering.Types.isLeftSquareCorner=function(t){return t.type&e.blockRendering.Types.LEFT_SQUARE_CORNER},e.blockRendering.Types.isRightSquareCorner=function(t){return t.type&e.blockRendering.Types.RIGHT_SQUARE_CORNER},e.blockRendering.Types.isCorner=function(t){return t.type&e.blockRendering.Types.CORNER},e.blockRendering.Types.isJaggedEdge=function(t){return t.type&e.blockRendering.Types.JAGGED_EDGE},e.blockRendering.Types.isRow=function(t){return t.type&e.blockRendering.Types.ROW},e.blockRendering.Types.isBetweenRowSpacer=function(t){return t.type&e.blockRendering.Types.BETWEEN_ROW_SPACER},e.blockRendering.Types.isTopRow=function(t){return t.type&e.blockRendering.Types.TOP_ROW},e.blockRendering.Types.isBottomRow=function(t){return t.type&e.blockRendering.Types.BOTTOM_ROW},e.blockRendering.Types.isTopOrBottomRow=function(t){return t.type&(e.blockRendering.Types.TOP_ROW|e.blockRendering.Types.BOTTOM_ROW)},e.blockRendering.Types.isInputRow=function(t){return t.type&e.blockRendering.Types.INPUT_ROW},e.blockRendering.Measurable=function(t){this.height=this.width=0,this.type=e.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},e.blockRendering.Connection=function(t,n){e.blockRendering.Connection.superClass_.constructor.call(this,t),this.connectionModel=n,this.shape=this.constants_.shapeFor(n),this.isDynamicShape=!!this.shape.isDynamic,this.type|=e.blockRendering.Types.CONNECTION},e.utils.object.inherits(e.blockRendering.Connection,e.blockRendering.Measurable),e.blockRendering.OutputConnection=function(t,n){e.blockRendering.OutputConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.OutputConnection,e.blockRendering.Connection),e.blockRendering.PreviousConnection=function(t,n){e.blockRendering.PreviousConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.PreviousConnection,e.blockRendering.Connection),e.blockRendering.NextConnection=function(t,n){e.blockRendering.NextConnection.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},e.utils.object.inherits(e.blockRendering.NextConnection,e.blockRendering.Connection),e.blockRendering.InputConnection=function(t,n){e.blockRendering.InputConnection.superClass_.constructor.call(this,t,n.connection),this.type|=e.blockRendering.Types.INPUT,this.input=n,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},e.utils.object.inherits(e.blockRendering.InputConnection,e.blockRendering.Connection),e.blockRendering.InlineInput=function(t,n){e.blockRendering.InlineInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},e.utils.object.inherits(e.blockRendering.InlineInput,e.blockRendering.InputConnection),e.blockRendering.StatementInput=function(t,n){e.blockRendering.StatementInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},e.utils.object.inherits(e.blockRendering.StatementInput,e.blockRendering.InputConnection),e.blockRendering.ExternalValueInput=function(t,n){e.blockRendering.ExternalValueInput.superClass_.constructor.call(this,t,n),this.type|=e.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},e.utils.object.inherits(e.blockRendering.ExternalValueInput,e.blockRendering.InputConnection),e.blockRendering.Icon=function(t,n){e.blockRendering.Icon.superClass_.constructor.call(this,t),this.icon=n,this.isVisible=n.isVisible(),this.type|=e.blockRendering.Types.ICON,t=n.getCorrectedSize(),this.height=t.height,this.width=t.width},e.utils.object.inherits(e.blockRendering.Icon,e.blockRendering.Measurable),e.blockRendering.JaggedEdge=function(t){e.blockRendering.JaggedEdge.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},e.utils.object.inherits(e.blockRendering.JaggedEdge,e.blockRendering.Measurable),e.blockRendering.Field=function(t,n,o){e.blockRendering.Field.superClass_.constructor.call(this,t),this.field=n,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=e.blockRendering.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=o},e.utils.object.inherits(e.blockRendering.Field,e.blockRendering.Measurable),e.blockRendering.Hat=function(t){e.blockRendering.Hat.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},e.utils.object.inherits(e.blockRendering.Hat,e.blockRendering.Measurable),e.blockRendering.SquareCorner=function(t,n){e.blockRendering.SquareCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_SQUARE_CORNER:e.blockRendering.Types.LEFT_SQUARE_CORNER)|e.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},e.utils.object.inherits(e.blockRendering.SquareCorner,e.blockRendering.Measurable),e.blockRendering.RoundCorner=function(t,n){e.blockRendering.RoundCorner.superClass_.constructor.call(this,t),this.type=(n&&"left"!=n?e.blockRendering.Types.RIGHT_ROUND_CORNER:e.blockRendering.Types.LEFT_ROUND_CORNER)|e.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},e.utils.object.inherits(e.blockRendering.RoundCorner,e.blockRendering.Measurable),e.blockRendering.InRowSpacer=function(t,n){e.blockRendering.InRowSpacer.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},e.utils.object.inherits(e.blockRendering.InRowSpacer,e.blockRendering.Measurable),e.blockRendering.Row=function(t){this.type=e.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},e.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},e.blockRendering.Row.prototype.getLastInput=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isInput(n))return n;return null},e.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},e.blockRendering.Row.prototype.getFirstSpacer=function(){for(var n,t=0;n=this.elements[t];t++)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.Row.prototype.getLastSpacer=function(){for(var n,t=this.elements.length-1;n=this.elements[t];t--)if(e.blockRendering.Types.isSpacer(n))return n;return null},e.blockRendering.TopRow=function(t){e.blockRendering.TopRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},e.utils.object.inherits(e.blockRendering.TopRow,e.blockRendering.Row),e.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(t){var n=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,o=t.getPreviousBlock();return!!t.outputConnection||n||!!o&&o.getNextBlock()==t},e.blockRendering.TopRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.TopRow.prototype.measure=function(){for(var c,t=0,n=0,o=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isHat(c)?o=Math.max(o,c.ascenderHeight):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow=function(t){e.blockRendering.BottomRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},e.utils.object.inherits(e.blockRendering.BottomRow,e.blockRendering.Row),e.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},e.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},e.blockRendering.BottomRow.prototype.measure=function(){for(var c,t=0,n=0,o=0,s=0;c=this.elements[s];s++)n+=c.width,e.blockRendering.Types.isSpacer(c)||(e.blockRendering.Types.isNextConnection(c)?o=Math.max(o,c.height):t=Math.max(t,c.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},e.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},e.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.blockRendering.SpacerRow=function(t,n,o){e.blockRendering.SpacerRow.superClass_.constructor.call(this,t),this.type=this.type|e.blockRendering.Types.SPACER|e.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=n,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new e.blockRendering.InRowSpacer(this.constants_,o)]},e.utils.object.inherits(e.blockRendering.SpacerRow,e.blockRendering.Row),e.blockRendering.SpacerRow.prototype.measure=function(){},e.blockRendering.InputRow=function(t){e.blockRendering.InputRow.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},e.utils.object.inherits(e.blockRendering.InputRow,e.blockRendering.Row),e.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var o,t=0,n=0;o=this.elements[n];n++)this.width+=o.width,e.blockRendering.Types.isInput(o)&&(e.blockRendering.Types.isStatementInput(o)?t+=o.connectedBlockWidth:e.blockRendering.Types.isExternalInput(o)&&0!=o.connectedBlockWidth&&(t+=o.connectedBlockWidth-o.connectionWidth)),e.blockRendering.Types.isSpacer(o)||(this.height=Math.max(this.height,o.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},e.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},e.blockRendering.RenderInfo=function(t,n){this.block_=n,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new e.blockRendering.OutputConnection(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new e.blockRendering.TopRow(this.constants_),this.bottomRow=new e.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},e.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new e.blockRendering.InputRow(this.constants_);this.inputRows.push(t);for(var s,n=this.block_.getIcons(),o=0;s=n[o];o++){var c=new e.blockRendering.Icon(this.constants_,s);this.isCollapsed&&s.collapseHidden?this.hiddenIcons.push(c):t.elements.push(c)}for(s=null,o=0;n=this.block_.inputList[o];o++)if(n.isVisible()){for(this.shouldStartNewRow_(n,s)&&(this.rows.push(t),t=new e.blockRendering.InputRow(this.constants_),this.inputRows.push(t)),s=0;c=n.fieldRow[s];s++)t.elements.push(new e.blockRendering.Field(this.constants_,c,n));this.addInput_(n,t),s=n}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new e.blockRendering.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},e.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,n=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,o=this.topRow.hasLeftSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner;this.topRow.elements.push(new o(this.constants_)),n?(t=new e.blockRendering.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new e.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==e.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?e.blockRendering.SquareCorner:e.blockRendering.RoundCorner,this.topRow.elements.push(new o(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new e.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new e.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new e.blockRendering.RoundCorner(this.constants_,"right"))},e.blockRendering.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.blockRendering.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),null==n.align&&(n.align=t.align)},e.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!(!n||t.type!=e.inputTypes.STATEMENT&&n.type!=e.inputTypes.STATEMENT&&(t.type!=e.inputTypes.VALUE&&t.type!=e.inputTypes.DUMMY||this.isInline))},e.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var n,t=0;n=this.rows[t];t++){var o=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var s=0;s<o.length-1;s++){n.elements.push(o[s]);var c=this.getInRowSpacing_(o[s],o[s+1]);n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,c))}n.elements.push(o[o.length-1]),n.endsWithElemSpacer()&&n.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},e.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t&&n&&e.blockRendering.Types.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var c,t=0,n=0,o=0,s=0;c=this.rows[s];s++){if(c.measure(),n=Math.max(n,c.width),c.hasStatement){var _=c.getLastInput();t=Math.max(t,c.width-_.width)}o=Math.max(o,c.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,s=0;c=this.rows[s];s++)c.hasStatement&&(c.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},e.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var n,t=0;n=this.rows[t];t++)if(n.hasStatement)this.alignStatementRow_(n);else{var o=n.width;0<(o=this.getDesiredRowWidth_(n)-o)&&this.addAlignmentPadding_(n,o),e.blockRendering.Types.isTopOrBottomRow(n)&&(n.widthWithConnectedBlocks=n.width)}},e.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(t,n){var o=t.getFirstSpacer(),s=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=n),t.align==e.constants.ALIGN.LEFT?s.width+=n:t.align==e.constants.ALIGN.CENTRE?(o.width+=n/2,s.width+=n/2):t.align==e.constants.ALIGN.RIGHT?o.width+=n:s.width+=n,t.width+=n},e.blockRendering.RenderInfo.prototype.alignStatementRow_=function(t){var n=t.getLastInput(),o=t.width-n.width,s=this.statementEdge;0<(o=s-o)&&this.addAlignmentPadding_(t,o),o=t.width,s=this.getDesiredRowWidth_(t),n.width+=s-o,n.height=Math.max(n.height,t.height),t.width+=s-o,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},e.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var n=0;n<t.length;n++)this.rows.push(t[n]),n!=t.length-1&&this.rows.push(this.makeSpacerRow_(t[n],t[n+1]))},e.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(t,n){var o=this.getSpacerRowHeight_(t,n),s=this.getSpacerRowWidth_(t,n);return o=new e.blockRendering.SpacerRow(this.constants_,o,s),t.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o},e.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){return this.width-this.startX},e.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return this.constants_.MEDIUM_PADDING},e.blockRendering.RenderInfo.prototype.getElemCenterline_=function(t,n){return e.blockRendering.Types.isSpacer(n)?t.yPos+n.height/2:e.blockRendering.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2):e.blockRendering.Types.isTopRow(t)?e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2:t.yPos+t.height/2},e.blockRendering.RenderInfo.prototype.recordElemPositions_=function(t){for(var s,n=t.xPos,o=0;s=t.elements[o];o++)e.blockRendering.Types.isSpacer(s)&&(s.height=t.height),s.xPos=n,s.centerline=this.getElemCenterline_(t,s),n+=s.width},e.blockRendering.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++)s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks),this.recordElemPositions_(s);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},e.blockRendering.Debug=function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t},e.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},e.blockRendering.Debug.prototype.clearElems=function(){for(var n,t=0;n=this.debugElements_[t];t++)e.utils.dom.removeNode(n);this.debugElements_=[]},e.blockRendering.Debug.prototype.drawSpacerRow=function(t,n,o){if(e.blockRendering.Debug.config.rowSpacers){var s=Math.abs(t.height),c=0>t.height;c&&(n-=s),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:n,width:t.width,height:s,stroke:c?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawSpacerElem=function(t,n,o){if(e.blockRendering.Debug.config.elemSpacers){n=Math.abs(t.width);var s=0>t.width,c=s?t.xPos-n:t.xPos;o&&(c=-(c+n)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:c,y:t.centerline-t.height/2,width:n,height:t.height,stroke:"pink",fill:s?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedElem=function(t,n){if(e.blockRendering.Debug.config.elems){var o=t.xPos;n&&(o=-(o+t.width)),this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n=t.centerline-t.height/2,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isField(t)&&t.field instanceof e.FieldLabel&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:n+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}e.blockRendering.Types.isInput(t)&&e.blockRendering.Debug.config.connections&&this.drawConnection(t.connectionModel)},e.blockRendering.Debug.prototype.drawConnection=function(t){if(e.blockRendering.Debug.config.connections){if(t.type==e.connectionTypes.INPUT_VALUE)var n=4,o="magenta",s="none";else t.type==e.connectionTypes.OUTPUT_VALUE?(n=2,s=o="magenta"):t.type==e.connectionTypes.NEXT_STATEMENT?(n=4,o="goldenrod",s="none"):t.type==e.connectionTypes.PREVIOUS_STATEMENT&&(n=2,s=o="goldenrod");this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:n,fill:s,stroke:o},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawRenderedRow=function(t,n,o){e.blockRendering.Debug.config.rows&&(this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),e.blockRendering.Types.isTopOrBottomRow(t)||e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},e.blockRendering.Debug.prototype.drawRowWithElements=function(t,n,o){for(var s=0,c=t.elements.length;s<c;s++){var _=t.elements[s];_?e.blockRendering.Types.isSpacer(_)?this.drawSpacerElem(_,t.height,o):this.drawRenderedElem(_,o):console.warn("A row has an undefined or null element.",t,_)}this.drawRenderedRow(t,n,o)},e.blockRendering.Debug.prototype.drawBoundingBox=function(t){if(e.blockRendering.Debug.config.blockBounds){var n=t.RTL?-t.width:0;this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:n,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),e.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blockRenderDebug",x:n=t.RTL?-t.widthWithChildren:0,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},e.blockRendering.Debug.prototype.drawDebug=function(t,n){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var c,o=0,s=0;c=n.rows[s];s++)e.blockRendering.Types.isBetweenRowSpacer(c)?this.drawSpacerRow(c,o,n.RTL):this.drawRowWithElements(c,o,n.RTL),o+=c.height;t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),n.rightSide&&this.drawRenderedElem(n.rightSide,n.RTL),this.drawBoundingBox(n),this.drawRender(t.pathObject.svgPath)},e.blockRendering.Debug.prototype.drawRender=function(t){e.blockRendering.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},e.blockRendering.Drawer=function(t,n){this.block_=t,this.info_=n,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=n.getRenderer().getConstants()},e.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},e.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var n,t=0;n=this.info_.hiddenIcons[t];t++)n.icon.iconGroup_.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var n=this.info_.rows[t];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()},e.blockRendering.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,n=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var s,o=0;s=n[o];o++)e.blockRendering.Types.isLeftRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:e.blockRendering.Types.isRightRoundedCorner(s)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:e.blockRendering.Types.isPreviousConnection(s)?this.outlinePath_+=s.shape.pathLeft:e.blockRendering.Types.isHat(s)?this.outlinePath_+=this.constants_.START_HAT.path:e.blockRendering.Types.isSpacer(s)&&(this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",s.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("v",t.height)},e.blockRendering.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+e.utils.svgPaths.lineOnAxis("v",t.height-this.constants_.JAGGED_TEETH.height)},e.blockRendering.Drawer.prototype.drawValueInput_=function(t){var n=t.getLastInput();this.positionExternalValueConnection_(t);var o="function"==typeof n.shape.pathDown?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+o+e.utils.svgPaths.lineOnAxis("v",t.height-n.connectionHeight)},e.blockRendering.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var s=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+n+e.utils.svgPaths.lineOnAxis("v",s)+this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.blockRendering.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.blockRendering.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,n=t.elements;this.positionNextConnection_();for(var _,o=0,s="",c=n.length-1;_=n[c];c--)e.blockRendering.Types.isNextConnection(_)?s+=_.shape.pathRight:e.blockRendering.Types.isLeftSquareCorner(_)?s+=e.utils.svgPaths.lineOnAxis("H",t.xPos):e.blockRendering.Types.isLeftRoundedCorner(_)?s+=this.constants_.OUTSIDE_CORNERS.bottomLeft:e.blockRendering.Types.isRightRoundedCorner(_)?(s+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):e.blockRendering.Types.isSpacer(_)&&(s+=e.utils.svgPaths.lineOnAxis("h",-1*_.width));this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-o),this.outlinePath_+=s},e.blockRendering.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var n=t.connectionOffsetY+t.height;t="function"==typeof t.shape.pathUp?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",n)+t}this.outlinePath_+="z"},e.blockRendering.Drawer.prototype.drawInternals_=function(){for(var n,t=0;n=this.info_.rows[t];t++)for(var s,o=0;s=n.elements[o];o++)e.blockRendering.Types.isInlineInput(s)?this.drawInlineInput_(s):(e.blockRendering.Types.isIcon(s)||e.blockRendering.Types.isField(s))&&this.layoutField_(s)},e.blockRendering.Drawer.prototype.layoutField_=function(t){if(e.blockRendering.Types.isField(t))var n=t.field.getSvgRoot();else e.blockRendering.Types.isIcon(t)&&(n=t.icon.iconGroup_);var o=t.centerline-t.height/2,s=t.xPos,c="";this.info_.RTL&&(s=-(s+t.width),t.flipRtl&&(s+=t.width,c="scale(-1 1)")),e.blockRendering.Types.isIcon(t)?(n.setAttribute("display","block"),n.setAttribute("transform","translate("+s+","+o+")"),t.icon.computeIconLocation()):n.setAttribute("transform","translate("+s+","+o+")"+c),this.info_.isInsertionMarker&&n.setAttribute("display","none")},e.blockRendering.Drawer.prototype.drawInlineInput_=function(t){var n=t.width,o=t.height,s=t.connectionOffsetY,c=t.connectionHeight+s;this.inlinePath_+=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-o/2)+e.utils.svgPaths.lineOnAxis("v",s)+t.shape.pathDown+e.utils.svgPaths.lineOnAxis("v",o-c)+e.utils.svgPaths.lineOnAxis("h",n-t.connectionWidth)+e.utils.svgPaths.lineOnAxis("v",-o)+"z",this.positionInlineInputConnection_(t)},e.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY)}},e.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var n=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}},e.blockRendering.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,t.baseline)}},e.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}},e.Events.MarkerMove=function(t,n,o,s){var c=t?t.workspace.id:void 0;s&&s.getType()==e.ASTNode.types.WORKSPACE&&(c=s.getLocation().id),e.Events.MarkerMove.superClass_.constructor.call(this,c),this.blockId=t?t.id:null,this.oldNode=o,this.newNode=s,this.isCursor=n},e.utils.object.inherits(e.Events.MarkerMove,e.Events.UiBase),e.Events.MarkerMove.prototype.type=e.Events.MARKER_MOVE,e.Events.MarkerMove.prototype.toJson=function(){var t=e.Events.MarkerMove.superClass_.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},e.Events.MarkerMove.prototype.fromJson=function(t){e.Events.MarkerMove.superClass_.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},e.registry.register(e.registry.Type.EVENT,e.Events.MARKER_MOVE,e.Events.MarkerMove),e.blockRendering.MarkerSvg=function(t,n,o){this.workspace_=t,this.marker_=o,this.parent_=null,this.constants_=n,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=o.colour||t},e.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",e.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,e.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},e.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},e.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},e.blockRendering.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?e.blockRendering.MarkerSvg.CURSOR_CLASS:e.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=e.utils.dom.createSvgElement(e.utils.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},e.blockRendering.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},e.blockRendering.MarkerSvg.prototype.draw=function(t,n){if(n){this.constants_=this.workspace_.getRenderer().getConstants();var o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||o,this.applyColour_(n),this.showAtLocation_(n),this.fireMarkerEvent_(t,n),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()},e.blockRendering.MarkerSvg.prototype.showAtLocation_=function(t){var n=t.getLocation().type;t.getType()==e.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()==e.ASTNode.types.OUTPUT?this.showWithOutput_(t):n==e.connectionTypes.INPUT_VALUE?this.showWithInput_(t):n==e.connectionTypes.NEXT_STATEMENT?this.showWithNext_(t):t.getType()==e.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()==e.ASTNode.types.FIELD?this.showWithField_(t):t.getType()==e.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()==e.ASTNode.types.STACK&&this.showWithStack_(t)},e.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){var n=(t=t.getSourceBlock()).width,o=t.height,s=o*e.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,c=this.constants_.CURSOR_BLOCK_PADDING;if(t.previousConnection){var _=this.constants_.shapeFor(t.previousConnection);this.positionPrevious_(n,c,s,_)}else t.outputConnection?(_=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(n,o,_)):this.positionBlock_(n,c,s);this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},e.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(t){var n=t.getWsCoordinate();t=n.x,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,n=n.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithField_=function(t){var n=(t=t.getLocation()).getSize().width,o=t.getSize().height;this.positionRect_(0,0,n,o),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithInput_=function(t){var n=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(n),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithNext_=function(t){var n=t.getLocation();t=n.getSourceBlock();var o=0;n=n.getOffsetInBlock().y;var s=t.getHeightWidth().width;this.workspace_.RTL&&(o=-s),this.positionLine_(o,n,s),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showWithStack_=function(t){var n=(t=t.getLocation()).getHeightWidth(),o=n.width+this.constants_.CURSOR_STACK_PADDING,s=-this.constants_.CURSOR_STACK_PADDING/2,_=s;this.workspace_.RTL&&(_=-(o+s)),this.positionRect_(_,-this.constants_.CURSOR_STACK_PADDING/2,o,n=n.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(t),this.showCurrent_()},e.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},e.blockRendering.MarkerSvg.prototype.positionBlock_=function(t,n,o){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionInput_=function(t){var n=t.getOffsetInBlock().x,o=t.getOffsetInBlock().y;t=e.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+n+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},e.blockRendering.MarkerSvg.prototype.positionLine_=function(t,n,o){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",n),this.markerSvgLine_.setAttribute("width",o),this.currentMarkerSvg=this.markerSvgLine_},e.blockRendering.MarkerSvg.prototype.positionOutput_=function(t,n,o){t=e.utils.svgPaths.moveBy(t,0)+e.utils.svgPaths.lineOnAxis("h",-(t-o.width))+e.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+e.utils.svgPaths.lineOnAxis("V",n)+e.utils.svgPaths.lineOnAxis("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionPrevious_=function(t,n,o,s){t=e.utils.svgPaths.moveBy(-n,o)+e.utils.svgPaths.lineOnAxis("V",-n)+e.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+s.pathLeft+e.utils.svgPaths.lineOnAxis("H",t+2*n)+e.utils.svgPaths.lineOnAxis("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},e.blockRendering.MarkerSvg.prototype.positionRect_=function(t,n,o,s){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",n),this.markerSvgRect_.setAttribute("width",o),this.markerSvgRect_.setAttribute("height",s),this.currentMarkerSvg=this.markerSvgRect_},e.blockRendering.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},e.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},e.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(t,n){var o=n.getSourceBlock();t=new(e.Events.get(e.Events.MARKER_MOVE))(o,this.isCursor(),t,n),e.Events.fire(t)},e.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},e.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=e.utils.dom.createSvgElement(e.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=e.utils.dom.createSvgElement(e.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerSvgLine_),e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},e.blockRendering.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",t=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},e.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&e.utils.dom.removeNode(this.svgGroup_)},e.blockRendering.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=n,this.markerSvg=this.cursorSvg=null},e.blockRendering.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},e.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},e.blockRendering.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},e.blockRendering.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},e.blockRendering.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},e.blockRendering.PathObject.prototype.setStyle=function(t){this.style=t},e.blockRendering.PathObject.prototype.setClass_=function(t,n){n?e.utils.dom.addClass(this.svgRoot,t):e.utils.dom.removeClass(this.svgRoot,t)},e.blockRendering.PathObject.prototype.updateHighlighted=function(t){this.svgPath.setAttribute("filter",t?"url(#"+this.constants.embossFilterId+")":"none")},e.blockRendering.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.blockRendering.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},e.blockRendering.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},e.blockRendering.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},e.blockRendering.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},e.blockRendering.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},e.blockRendering.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},e.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(t,n){},e.blockRendering.Renderer=function(t){this.name=t,this.overrides=this.constants_=null},e.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},e.blockRendering.Renderer.prototype.init=function(t,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,e.utils.object.mixin(this.constants_,n)),this.constants_.setTheme(t),this.constants_.init()},e.blockRendering.Renderer.prototype.createDom=function(t,n){this.constants_.createDom(t,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName())},e.blockRendering.Renderer.prototype.refreshDom=function(t,n){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&e.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(t,n)},e.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},e.blockRendering.Renderer.prototype.makeConstants_=function(){return new e.blockRendering.ConstantProvider},e.blockRendering.Renderer.prototype.makeRenderInfo_=function(t){return new e.blockRendering.RenderInfo(this,t)},e.blockRendering.Renderer.prototype.makeDrawer_=function(t,n){return new e.blockRendering.Drawer(t,n)},e.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!e.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new e.blockRendering.Debug(this.getConstants())},e.blockRendering.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.blockRendering.MarkerSvg(t,this.getConstants(),n)},e.blockRendering.Renderer.prototype.makePathObject=function(t,n){return new e.blockRendering.PathObject(t,n,this.constants_)},e.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},e.blockRendering.Renderer.prototype.shouldHighlightConnection=function(t){return!0},e.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(t,n,o){return!!e.Connection.getConnectionForOrphanedConnection(t,o===e.connectionTypes.OUTPUT_VALUE?n.outputConnection:n.previousConnection)},e.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE||n.type==e.connectionTypes.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(o,t.targetBlock(),n.type)?e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},e.blockRendering.Renderer.prototype.render=function(t){e.blockRendering.useDebugger&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var n=this.makeRenderInfo_(t);n.measure(),this.makeDrawer_(t,n).draw()},e.geras={},e.geras.ConstantProvider=function(){e.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},e.utils.object.inherits(e.geras.ConstantProvider,e.blockRendering.ConstantProvider),e.geras.ConstantProvider.prototype.getCSS_=function(t){return e.geras.ConstantProvider.superClass_.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},e.geras.Highlighter=function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},e.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},e.geras.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY);for(var o,n=0;o=t.elements[n];n++)e.blockRendering.Types.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:e.blockRendering.Types.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):e.blockRendering.Types.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:e.blockRendering.Types.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):e.blockRendering.Types.isSpacer(o)&&0!=o.width&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",o.xPos+o.width-this.highlightOffset_));this.steps_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_)},e.geras.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+e.utils.svgPaths.lineOnAxis("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},e.geras.Highlighter.prototype.drawValueInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-n.connectionHeight;this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos+n.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.Highlighter.prototype.drawStatementInput=function(t){var n=t.getLastInput();if(this.RTL_){var o=t.height-2*this.insideCornerPaths_.height;this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=e.utils.svgPaths.moveTo(n.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+e.utils.svgPaths.lineTo(t.width-n.xPos-this.insideCornerPaths_.width,0)},e.geras.Highlighter.prototype.drawRightSideRow=function(t){var n=t.xPos+t.width-this.highlightOffset_;t.followsStatement&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n)),this.RTL_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("H",n),t.height>this.highlightOffset_&&(this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height-this.highlightOffset_)))},e.geras.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.baseline-this.highlightOffset_);else{var n=this.info_.bottomRow.elements[0];e.blockRendering.Types.isLeftSquareCorner(n)?this.steps_+=e.utils.svgPaths.moveTo(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):e.blockRendering.Types.isLeftRoundedCorner(n)&&(this.steps_+=e.utils.svgPaths.moveTo(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},e.geras.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX,t):(this.steps_+=e.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=e.utils.svgPaths.lineOnAxis("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e.blockRendering.Types.isLeftRoundedCorner((t=this.info_.topRow).elements[0])?this.steps_+=e.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=e.utils.svgPaths.lineOnAxis("V",t.capline+this.highlightOffset_))},e.geras.Highlighter.prototype.drawInlineInput=function(t){var n=this.highlightOffset_,o=t.xPos+t.connectionWidth,s=t.centerline-t.height/2,c=t.width-t.connectionWidth,_=s+n;this.RTL_?(s=t.connectionOffsetY-n,t=t.height-(t.connectionOffsetY+t.connectionHeight)+n,this.inlineSteps_+=e.utils.svgPaths.moveTo(o-n,_)+e.utils.svgPaths.lineOnAxis("v",s)+this.puzzleTabPaths_.pathDown(this.RTL_)+e.utils.svgPaths.lineOnAxis("v",t)+e.utils.svgPaths.lineOnAxis("h",c)):this.inlineSteps_+=e.utils.svgPaths.moveTo(t.xPos+t.width+n,_)+e.utils.svgPaths.lineOnAxis("v",t.height)+e.utils.svgPaths.lineOnAxis("h",-c)+e.utils.svgPaths.moveTo(o,s+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},e.geras.InlineInput=function(t,n){e.geras.InlineInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.InlineInput,e.blockRendering.InlineInput),e.geras.StatementInput=function(t,n){e.geras.StatementInput.superClass_.constructor.call(this,t,n),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},e.utils.object.inherits(e.geras.StatementInput,e.blockRendering.StatementInput),e.geras.RenderInfo=function(t,n){e.geras.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.geras.RenderInfo,e.blockRendering.RenderInfo),e.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.geras.RenderInfo.prototype.populateBottomRow_=function(){e.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==e.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},e.geras.RenderInfo.prototype.addInput_=function(t,n){this.isInline&&t.type==e.inputTypes.VALUE?(n.elements.push(new e.geras.InlineInput(this.constants_,t)),n.hasInlineInput=!0):t.type==e.inputTypes.STATEMENT?(n.elements.push(new e.geras.StatementInput(this.constants_,t)),n.hasStatement=!0):t.type==e.inputTypes.VALUE?(n.elements.push(new e.blockRendering.ExternalValueInput(this.constants_,t)),n.hasExternalInput=!0):t.type==e.inputTypes.DUMMY&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||null!=n.align||(n.align=t.align)},e.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var s=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0]))),s.length){for(var c=0;c<s.length-1;c++){o.elements.push(s[c]);var _=this.getInRowSpacing_(s[c],s[c+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,_))}o.elements.push(s[s.length-1]),o.endsWithElemSpacer()&&(_=this.getInRowSpacing_(s[s.length-1],null),t&&o.hasDummyInput&&(_+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,_)))}}},e.geras.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&(!n||e.blockRendering.Types.isStatementInput(n)))return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(e.blockRendering.Types.isLeftRoundedCorner(t)&&n){if(e.blockRendering.Types.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(e.blockRendering.Types.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||!t.hasStatement&&n.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.geras.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)||e.blockRendering.Types.isIcon(n)?(o+=n.height/2,(t.hasInlineInput||t.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=e.blockRendering.Types.isInlineInput(n)?o+n.height/2:o+t.height/2,o},e.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var s,t=0,n=null,o=this.rows.length-1;s=this.rows[o];o--)s.nextRightEdge=t,e.blockRendering.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),n&&n.hasStatement&&s.width<n.width?s.nextRightEdge=n.width:t=s.width,n=s);for(o=t=0;s=this.rows[o];o++)s.hasStatement?t=this.getDesiredRowWidth_(s):e.blockRendering.Types.isSpacer(s)?s.width=Math.max(t,s.nextRightEdge):(0<(t=Math.max(t,s.nextRightEdge)-s.width)&&this.addAlignmentPadding_(s,t),t=s.width)}else e.geras.RenderInfo.superClass_.alignRowElements_.call(this)},e.geras.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:e.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.geras.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},e.geras.Drawer=function(t,n){e.geras.Drawer.superClass_.constructor.call(this,t,n),this.highlighter_=new e.geras.Highlighter(n)},e.utils.object.inherits(e.geras.Drawer,e.blockRendering.Drawer),e.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},e.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),e.geras.Drawer.superClass_.drawTop_.call(this)},e.geras.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),e.geras.Drawer.superClass_.drawJaggedEdge_.call(this,t)},e.geras.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),e.geras.Drawer.superClass_.drawValueInput_.call(this,t)},e.geras.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),e.geras.Drawer.superClass_.drawStatementInput_.call(this,t)},e.geras.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),e.geras.Drawer.superClass_.drawBottom_.call(this)},e.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),e.geras.Drawer.superClass_.drawLeft_.call(this)},e.geras.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),e.geras.Drawer.superClass_.drawInlineInput_.call(this,t)},e.geras.Drawer.prototype.positionInlineInputConnection_=function(t){if(t.connectionModel){var o=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,t.centerline-t.height/2+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionStatementInputConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.statementEdge+n.notchOffset;n.connectionModel.setOffsetInBlock(o=this.info_.RTL?-1*o:o+this.constants_.DARK_PATH_OFFSET,t.yPos+this.constants_.DARK_PATH_OFFSET)}},e.geras.Drawer.prototype.positionExternalValueConnection_=function(t){var n=t.getLastInput();if(n.connectionModel){var o=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,t.yPos)}},e.geras.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var n=t.connection,o=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}},e.geras.HighlightConstantProvider=function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=e.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},e.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},e.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t+n)-n,s=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-o-n,t-o)),c=e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t+n,t+n)),_=e.utils.svgPaths.moveBy(o,-o)+e.utils.svgPaths.arc("a","0 0,0",t+n,e.utils.svgPaths.point(t-o,o+n));return{width:t+n,height:t,pathTop:function(w){return w?s:""},pathBottom:function(w){return w?c:_}}},e.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(t-n)+n,s=e.utils.svgPaths.moveBy(o,o)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t-o,-o+n)),c=e.utils.svgPaths.moveBy(n,t)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(t,-t+n)),_=-o,w=e.utils.svgPaths.moveBy(o,_)+e.utils.svgPaths.arc("a","0 0,1",t-n,e.utils.svgPaths.point(-o+n,-_-t));return{height:t,topLeft:function(M){return M?s:c},bottomLeft:function(){return w}}},e.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=e.utils.svgPaths.moveBy(-2,3.4-n)+e.utils.svgPaths.lineTo(-.45*t,-2.1),s=e.utils.svgPaths.lineOnAxis("v",2.5)+e.utils.svgPaths.moveBy(.97*-t,2.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(.05*-t,10),e.utils.svgPaths.point(.3*t,9.5)])+e.utils.svgPaths.moveBy(.67*t,-1.9)+e.utils.svgPaths.lineOnAxis("v",2.5),c=e.utils.svgPaths.lineOnAxis("v",-1.5)+e.utils.svgPaths.moveBy(-.92*t,-.5)+e.utils.svgPaths.curve("q",[e.utils.svgPaths.point(-.19*t,-5.5),e.utils.svgPaths.point(0,-11)])+e.utils.svgPaths.moveBy(.92*t,1),_=e.utils.svgPaths.moveBy(-5,n-.7)+e.utils.svgPaths.lineTo(.46*t,-2.1);return{width:t,height:n,pathUp:function(w){return w?o:c},pathDown:function(w){return w?s:_}}},e.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:e.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},e.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:e.utils.svgPaths.lineTo(5.1,2.6)+e.utils.svgPaths.moveBy(-10.2,6.8)+e.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},e.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,n=e.utils.svgPaths.moveBy(25,-8.7)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(29.7,-6.2),e.utils.svgPaths.point(57.2,-.5),e.utils.svgPaths.point(75,8.7)]),o=e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(17.8,-9.2),e.utils.svgPaths.point(45.3,-14.9),e.utils.svgPaths.point(75,-8.7)])+e.utils.svgPaths.moveTo(100.5,t+.5);return{path:function(s){return s?n:o}}},e.geras.PathObject=function(t,n,o){this.constants=o,this.svgRoot=t,this.svgPathDark=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=n},e.utils.object.inherits(e.geras.PathObject,e.blockRendering.PathObject),e.geras.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},e.geras.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},e.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},e.geras.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),e.geras.PathObject.superClass_.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},e.geras.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=e.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},e.geras.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},e.geras.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},e.geras.PathObject.prototype.updateDisabled_=function(t){e.geras.PathObject.superClass_.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")},e.geras.Renderer=function(t){e.geras.Renderer.superClass_.constructor.call(this,t),this.highlightConstants_=null},e.utils.object.inherits(e.geras.Renderer,e.blockRendering.Renderer),e.geras.Renderer.prototype.init=function(t,n){e.geras.Renderer.superClass_.init.call(this,t,n),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},e.geras.Renderer.prototype.refreshDom=function(t,n){e.geras.Renderer.superClass_.refreshDom.call(this,t,n),this.getHighlightConstants().init()},e.geras.Renderer.prototype.makeConstants_=function(){return new e.geras.ConstantProvider},e.geras.Renderer.prototype.makeRenderInfo_=function(t){return new e.geras.RenderInfo(this,t)},e.geras.Renderer.prototype.makeDrawer_=function(t,n){return new e.geras.Drawer(t,n)},e.geras.Renderer.prototype.makePathObject=function(t,n){return new e.geras.PathObject(t,n,this.getConstants())},e.geras.Renderer.prototype.makeHighlightConstants_=function(){return new e.geras.HighlightConstantProvider(this.getConstants())},e.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},e.blockRendering.register("geras",e.geras.Renderer),e.thrasos={},e.thrasos.RenderInfo=function(t,n){e.thrasos.RenderInfo.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.thrasos.RenderInfo,e.blockRendering.RenderInfo),e.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var o,t=!1,n=0;o=this.rows[n];n++)o.hasExternalInput&&(t=!0);for(n=0;o=this.rows[n];n++){var s=o.elements;o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,s[0])));for(var c=0;c<s.length-1;c++){o.elements.push(s[c]);var _=this.getInRowSpacing_(s[c],s[c+1]);o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,_))}o.elements.push(s[s.length-1]),o.endsWithElemSpacer()&&(_=this.getInRowSpacing_(s[s.length-1],null),t&&o.hasDummyInput&&(_+=this.constants_.TAB_WIDTH),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,_)))}},e.thrasos.RenderInfo.prototype.getInRowSpacing_=function(t,n){if(!t)return n&&e.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&e.blockRendering.Types.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!e.blockRendering.Types.isInput(t)&&!n)return e.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:e.blockRendering.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:e.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:e.blockRendering.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:e.blockRendering.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:e.blockRendering.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInput(t)&&!n){if(e.blockRendering.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!e.blockRendering.Types.isInput(t)&&n&&e.blockRendering.Types.isInput(n)){if(e.blockRendering.Types.isField(t)&&t.isEditable){if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(e.blockRendering.Types.isInlineInput(n)||e.blockRendering.Types.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(e.blockRendering.Types.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(e.blockRendering.Types.isIcon(t)&&n&&!e.blockRendering.Types.isInput(n))return this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isInlineInput(t)&&n&&e.blockRendering.Types.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(e.blockRendering.Types.isLeftSquareCorner(t)&&n){if(e.blockRendering.Types.isHat(n))return this.constants_.NO_PADDING;if(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))return n.notchOffset}return e.blockRendering.Types.isLeftRoundedCorner(t)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:e.blockRendering.Types.isField(t)&&n&&e.blockRendering.Types.isField(n)&&t.isEditable==n.isEditable||n&&e.blockRendering.Types.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){return e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:e.blockRendering.Types.isTopRow(t)||e.blockRendering.Types.isBottomRow(n)?this.constants_.NO_PADDING:t.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&n.hasStatement||t.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},e.thrasos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(e.blockRendering.Types.isSpacer(n))return t.yPos+n.height/2;if(e.blockRendering.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,e.blockRendering.Types.isNextConnection(n)?t+n.height/2:t-n.height/2;if(e.blockRendering.Types.isTopRow(t))return e.blockRendering.Types.isHat(n)?t.capline-n.height/2:t.capline+n.height/2;var o=t.yPos;return e.blockRendering.Types.isField(n)&&t.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+t.height/2},e.thrasos.RenderInfo.prototype.finalize_=function(){for(var s,t=0,n=0,o=0;s=this.rows[o];o++){s.yPos=n,s.xPos=this.startX,n+=s.height,t=Math.max(t,s.widthWithConnectedBlocks);var c=n-this.topRow.ascenderHeight;s==this.bottomRow&&c<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=c=this.constants_.MIN_BLOCK_HEIGHT-c,n+=c),this.recordElemPositions_(s)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline},e.thrasos.Renderer=function(t){e.thrasos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.thrasos.Renderer,e.blockRendering.Renderer),e.thrasos.Renderer.prototype.makeRenderInfo_=function(t){return new e.thrasos.RenderInfo(this,t)},e.blockRendering.register("thrasos",e.thrasos.Renderer),e.zelos={},e.zelos.ConstantProvider=function(){e.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},e.utils.object.inherits(e.zelos.ConstantProvider,e.blockRendering.ConstantProvider),e.zelos.ConstantProvider.prototype.setFontConstants_=function(t){e.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},e.zelos.ConstantProvider.prototype.init=function(){e.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},e.zelos.ConstantProvider.prototype.setDynamicProperties_=function(t){e.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var n=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},e.zelos.ConstantProvider.prototype.dispose=function(){e.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&e.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&e.utils.dom.removeNode(this.replacementGlowFilter_)},e.zelos.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH;return{height:t,width:n,path:e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(25,-t),e.utils.svgPaths.point(71,-t),e.utils.svgPaths.point(n,0)])}},e.zelos.ConstantProvider.prototype.makeHexagonal=function(){function t(o,s,c){var _=o/2;return e.utils.svgPaths.lineTo(-(c=c?-1:1)*(_=_>n?n:_),o=(s?-1:1)*o/2)+e.utils.svgPaths.lineTo(c*_,o)}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(o){return(o/=2)>n?n:o},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeRounded=function(){function t(s,c,_){var w=s>o?s-o:0;return e.utils.svgPaths.arc("a","0 0,1",s=(s>o?o:s)/2,e.utils.svgPaths.point((c?-1:1)*s,(c?-1:1)*s))+e.utils.svgPaths.lineOnAxis("v",(_?1:-1)*w)+e.utils.svgPaths.arc("a","0 0,1",s,e.utils.svgPaths.point((c?1:-1)*s,(c?-1:1)*s))}var n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*n;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(s){return(s/=2)>n?n:s},height:function(s){return s},connectionOffsetY:function(s){return s/2},connectionOffsetX:function(s){return-s},pathDown:function(s){return t(s,!1,!1)},pathUp:function(s){return t(s,!0,!1)},pathRightDown:function(s){return t(s,!1,!0)},pathRightUp:function(s){return t(s,!1,!0)}}},e.zelos.ConstantProvider.prototype.makeSquared=function(){function t(o,s,c){return o-=2*n,e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?-1:1)*n,(s?-1:1)*n))+e.utils.svgPaths.lineOnAxis("v",(c?1:-1)*o)+e.utils.svgPaths.arc("a","0 0,1",n,e.utils.svgPaths.point((s?1:-1)*n,(s?-1:1)*n))}var n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(o){return n},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},e.zelos.ConstantProvider.prototype.shapeFor=function(t){var n=t.getCheck();switch(!n&&t.targetConnection&&(n=t.targetConnection.getCheck()),t.type){case e.connectionTypes.INPUT_VALUE:case e.connectionTypes.OUTPUT_VALUE:if(null!=(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&-1!=n.indexOf("Boolean")?this.HEXAGONAL:(n&&-1!=n.indexOf("Number")||n&&n.indexOf("String"),this.ROUNDED);case e.connectionTypes.PREVIOUS_STATEMENT:case e.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},e.zelos.ConstantProvider.prototype.makeNotch=function(){function t(V){return e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/2,0),e.utils.svgPaths.point(V*c*3/4,w/2),e.utils.svgPaths.point(V*c,w)])+e.utils.svgPaths.line([e.utils.svgPaths.point(V*c,_)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/4,w/2),e.utils.svgPaths.point(V*c/2,w),e.utils.svgPaths.point(V*c,w)])+e.utils.svgPaths.lineOnAxis("h",V*s)+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/2,0),e.utils.svgPaths.point(V*c*3/4,-w/2),e.utils.svgPaths.point(V*c,-w)])+e.utils.svgPaths.line([e.utils.svgPaths.point(V*c,-_)])+e.utils.svgPaths.curve("c",[e.utils.svgPaths.point(V*c/4,-w/2),e.utils.svgPaths.point(V*c/2,-w),e.utils.svgPaths.point(V*c,-w)])}var n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,s=n/3,c=s/3,_=o/2,w=_/2,M=t(1),U=t(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:M,pathRight:U}},e.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,n=e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(-t,t)),o=e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(-t,t));return{width:t,height:t,pathTop:n,pathBottom:e.utils.svgPaths.arc("a","0 0,0",t,e.utils.svgPaths.point(t,t)),rightWidth:t,rightHeight:t,pathTopRight:o,pathBottomRight:e.utils.svgPaths.arc("a","0 0,1",t,e.utils.svgPaths.point(t,t))}},e.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(t){return e.utils.colour.blend("#000",t,.15)||t},e.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(t){return e.utils.colour.blend("#000",t,.25)||t},e.zelos.ConstantProvider.prototype.createDom=function(t,n,o){e.zelos.ConstantProvider.superClass_.createDom.call(this,t,n,o),t=e.utils.dom.createSvgElement(e.utils.Svg.DEFS,{},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter_=n,t=e.utils.dom.createSvgElement(e.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),n=e.utils.dom.createSvgElement(e.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),e.utils.dom.createSvgElement(e.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),e.utils.dom.createSvgElement(e.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),e.utils.dom.createSvgElement(e.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},e.zelos.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},e.zelos.TopRow=function(t){e.zelos.TopRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.TopRow,e.blockRendering.TopRow),e.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.TopRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection},e.zelos.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.BottomRow=function(t){e.zelos.BottomRow.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.BottomRow,e.blockRendering.BottomRow),e.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},e.zelos.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},e.zelos.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection},e.zelos.RightConnectionShape=function(t){e.zelos.RightConnectionShape.superClass_.constructor.call(this,t),this.type|=e.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},e.utils.object.inherits(e.zelos.RightConnectionShape,e.blockRendering.Measurable),e.zelos.RenderInfo=function(t,n){e.zelos.RenderInfo.superClass_.constructor.call(this,t,n),this.topRow=new e.zelos.TopRow(this.constants_),this.bottomRow=new e.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=0<n.statementInputCount,this.rightSide=this.outputConnection?new e.zelos.RightConnectionShape(this.constants_):null},e.utils.object.inherits(e.zelos.RenderInfo,e.blockRendering.RenderInfo),e.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},e.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},e.zelos.RenderInfo.prototype.shouldStartNewRow_=function(t,n){return!!n&&(t.type==e.inputTypes.STATEMENT||n.type==e.inputTypes.STATEMENT||(t.type==e.inputTypes.VALUE||t.type==e.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},e.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):e.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,t)},e.zelos.RenderInfo.prototype.getInRowSpacing_=function(t,n){return t&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&n&&e.blockRendering.Types.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&e.blockRendering.Types.isLeftRoundedCorner(t)&&n&&(e.blockRendering.Types.isPreviousConnection(n)||e.blockRendering.Types.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:t&&e.blockRendering.Types.isLeftSquareCorner(t)&&n&&e.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(t,n){if(e.blockRendering.Types.isTopRow(t)&&e.blockRendering.Types.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=e.blockRendering.Types.isInputRow(t)&&t.hasStatement,s=e.blockRendering.Types.isInputRow(n)&&n.hasStatement;return s||o?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),s&&o?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):e.blockRendering.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):e.blockRendering.Types.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},e.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(t,n){var o=this.width-this.startX;return e.blockRendering.Types.isInputRow(t)&&t.hasStatement||e.blockRendering.Types.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},e.zelos.RenderInfo.prototype.getElemCenterline_=function(t,n){if(t.hasStatement&&!e.blockRendering.Types.isSpacer(n)&&!e.blockRendering.Types.isStatementInput(n))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(e.blockRendering.Types.isInlineInput(n)){var o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return t.yPos+o.height/2}return e.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,t,n)},e.zelos.RenderInfo.prototype.addInput_=function(t,n){t.type==e.inputTypes.DUMMY&&n.hasDummyInput&&n.align==e.constants.ALIGN.LEFT&&t.align==e.constants.ALIGN.RIGHT&&(n.rightAlignedDummyInput=t),e.zelos.RenderInfo.superClass_.addInput_.call(this,t,n)},e.zelos.RenderInfo.prototype.addAlignmentPadding_=function(t,n){if(t.rightAlignedDummyInput){for(var o,c,s=0;(c=t.elements[s])&&(e.blockRendering.Types.isSpacer(c)&&(o=c),!e.blockRendering.Types.isField(c)||c.parentInput!=t.rightAlignedDummyInput);s++);if(o)return o.width+=n,void(t.width+=n)}e.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,t,n)},e.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,n=t,o=2;o<this.rows.length-1;o+=2){var s=this.rows[o-1],c=this.rows[o],_=this.rows[o+1];if(s=2==o?!!this.topRow.hasPreviousConnection:!!s.followsStatement,_=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!_.precedesStatement,e.blockRendering.Types.isInputRow(c)&&c.hasStatement)c.measure(),n=c.width-c.getLastInput().width+t;else if(s&&(2==o||_)&&e.blockRendering.Types.isInputRow(c)&&!c.hasStatement){_=c.xPos,s=null;for(var M,w=0;M=c.elements[w];w++)e.blockRendering.Types.isSpacer(M)&&(s=M),!(s&&(e.blockRendering.Types.isField(M)||e.blockRendering.Types.isInput(M))&&_<n)||e.blockRendering.Types.isField(M)&&(M.field instanceof e.FieldLabel||M.field instanceof e.FieldImage)||(s.width+=n-_),_+=M.width}}},e.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var o,t=0,n=0;o=this.rows[n];n++)o.yPos=t,t+=o.height;this.height=t,t=this.outputConnection.shape.height(n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),o=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(o=n,this.rightSide.height=t,this.rightSide.width=o,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+o),this.startX=n,this.width+=n+o,this.widthWithChildren+=n+o}},e.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var o,t=0,n=0;o=this.rows[n];n++)if(e.blockRendering.Types.isInputRow(o)){t=o.elements[o.elements.length-2];var s=this.getNegativeSpacing_(o.elements[1]),c=this.getNegativeSpacing_(t),_=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(t=s+c)<_&&(s=(t=this.width-_)/2,c=t/2),o.elements.unshift(new e.blockRendering.InRowSpacer(this.constants_,-s)),o.elements.push(new e.blockRendering.InRowSpacer(this.constants_,-c))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;o=this.rows[n];n++)e.blockRendering.Types.isTopOrBottomRow(o)&&(o.elements[1].width-=t,o.elements[1].widthWithConnectedBlocks-=t),o.width-=t,o.widthWithConnectedBlocks-=t}},e.zelos.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var n=this.outputConnection.width,o=this.outputConnection.shape.type,s=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return o===s.SHAPES.ROUND?n-(o=this.height/2>(o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?o:this.height/2)*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o))):0;if(e.blockRendering.Types.isInlineInput(t)){var c=t.connectedBlock;return t=c?c.pathObject.outputShapeType:t.shape.type,c&&c.outputConnection&&(c.statementInputCount||c.nextConnection)||o==s.SHAPES.HEXAGONAL&&o!=t?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][t]}return e.blockRendering.Types.isField(t)?o==s.SHAPES.ROUND&&t.field instanceof e.FieldTextInput?n-2.75*s.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:e.blockRendering.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},e.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var n=this.rows[t-1],o=this.rows[t],s=this.rows[t+1],c=2==t,_=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(c?this.topRow.hasPreviousConnection:n.followsStatement){var w=3==o.elements.length&&(o.elements[1].field instanceof e.FieldLabel||o.elements[1].field instanceof e.FieldImage);if(!c&&w)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(c||_){if(_){for(c=!1,_=0;w=o.elements[_];_++)if(e.blockRendering.Types.isInlineInput(w)&&w.connectedBlock&&!w.connectedBlock.isShadow()&&40<=w.connectedBlock.getHeightWidth().height){c=!0;break}c&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}},e.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),e.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},e.zelos.Drawer=function(t,n){e.zelos.Drawer.superClass_.constructor.call(this,t,n)},e.utils.object.inherits(e.zelos.Drawer,e.blockRendering.Drawer),e.zelos.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),e.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},e.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):e.zelos.Drawer.superClass_.drawOutline_.call(this)},e.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():e.zelos.Drawer.superClass_.drawLeft_.call(this)},e.zelos.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(t.precedesStatement||t.followsStatement){var n=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(n=t.height-(t.precedesStatement?n:0))?e.utils.svgPaths.lineOnAxis("V",t.yPos+n):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.yPos+t.height)},e.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},e.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},e.zelos.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=e.utils.svgPaths.moveBy(t.xPos,this.info_.startY),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",t.width)},e.zelos.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("V",t.baseline),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("h",-t.width)},e.zelos.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var n=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var o=t.width-2*t.connectionWidth;t=e.utils.svgPaths.moveTo(t.xPos+t.connectionWidth,t.centerline-t.height/2)+e.utils.svgPaths.lineOnAxis("h",o)+t.shape.pathRightDown(t.height)+e.utils.svgPaths.lineOnAxis("h",-o)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(n,t)}},e.zelos.Drawer.prototype.drawStatementInput_=function(t){var n=t.getLastInput(),o=n.xPos+n.notchOffset+n.shape.width,s=n.shape.pathRight+e.utils.svgPaths.lineOnAxis("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,c=t.height-2*this.constants_.INSIDE_CORNERS.height;n=this.constants_.INSIDE_CORNERS.pathBottom+e.utils.svgPaths.lineOnAxis("h",n.notchOffset-this.constants_.INSIDE_CORNERS.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=e.utils.svgPaths.lineOnAxis("H",o)+s+e.utils.svgPaths.lineOnAxis("v",c)+n+e.utils.svgPaths.lineOnAxis("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},e.zelos.MarkerSvg=function(t,n,o){e.zelos.MarkerSvg.superClass_.constructor.call(this,t,n,o)},e.utils.object.inherits(e.zelos.MarkerSvg,e.blockRendering.MarkerSvg),e.zelos.MarkerSvg.prototype.showWithInputOutput_=function(t){var n=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(n),this.showCurrent_()},e.zelos.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},e.zelos.MarkerSvg.prototype.showWithBlock_=function(t){var n=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,n.width,n.height),this.setParent_(t),this.showCurrent_()},e.zelos.MarkerSvg.prototype.positionCircle_=function(t,n){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",n),this.currentMarkerSvg=this.markerCircle_},e.zelos.MarkerSvg.prototype.hide=function(){e.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},e.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(e.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=e.utils.dom.createSvgElement(e.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();e.utils.dom.createSvgElement(e.utils.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},e.zelos.MarkerSvg.prototype.applyColour_=function(t){e.zelos.MarkerSvg.superClass_.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},e.zelos.PathObject=function(t,n,o){e.zelos.PathObject.superClass_.constructor.call(this,t,n,o),this.constants=o,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},e.utils.object.inherits(e.zelos.PathObject,e.blockRendering.PathObject),e.zelos.PathObject.prototype.setPath=function(t){e.zelos.PathObject.superClass_.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},e.zelos.PathObject.prototype.applyColour=function(t){for(var n in e.zelos.PathObject.superClass_.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary),this.outlines_)this.outlines_[n].setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.flipRTL=function(){for(var t in e.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},e.zelos.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},e.zelos.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},e.zelos.PathObject.prototype.updateShapeForInputHighlight=function(t,n){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(n?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},e.zelos.PathObject.prototype.beginDrawing=function(){for(var t in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[t]=1},e.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},e.zelos.PathObject.prototype.setOutlinePath=function(t,n){(t=this.getOutlinePath_(t)).setAttribute("d",n),t.setAttribute("fill",this.style.colourTertiary)},e.zelos.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=e.utils.dom.createSvgElement(e.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},e.zelos.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},e.zelos.Renderer=function(t){e.zelos.Renderer.superClass_.constructor.call(this,t)},e.utils.object.inherits(e.zelos.Renderer,e.blockRendering.Renderer),e.zelos.Renderer.prototype.makeConstants_=function(){return new e.zelos.ConstantProvider},e.zelos.Renderer.prototype.makeRenderInfo_=function(t){return new e.zelos.RenderInfo(this,t)},e.zelos.Renderer.prototype.makeDrawer_=function(t,n){return new e.zelos.Drawer(t,n)},e.zelos.Renderer.prototype.makeMarkerDrawer=function(t,n){return new e.zelos.MarkerSvg(t,this.getConstants(),n)},e.zelos.Renderer.prototype.makePathObject=function(t,n){return new e.zelos.PathObject(t,n,this.getConstants())},e.zelos.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!=e.connectionTypes.INPUT_VALUE&&t.type!==e.connectionTypes.OUTPUT_VALUE},e.zelos.Renderer.prototype.getConnectionPreviewMethod=function(t,n,o){return n.type==e.connectionTypes.OUTPUT_VALUE?t.isConnected()?e.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:e.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:e.zelos.Renderer.superClass_.getConnectionPreviewMethod(t,n,o)},e.blockRendering.register("zelos",e.zelos.Renderer),e.Themes.Dark=e.Theme.defineTheme("dark",{base:e.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),e.Themes.Deuteranopia={},e.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},e.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},e.Themes.Deuteranopia=new e.Theme("deuteranopia",e.Themes.Deuteranopia.defaultBlockStyles,e.Themes.Deuteranopia.categoryStyles),e.Themes.HighContrast={},e.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},e.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},e.Themes.HighContrast=new e.Theme("highcontrast",e.Themes.HighContrast.defaultBlockStyles,e.Themes.HighContrast.categoryStyles),e.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),e.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),e.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),e.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),e.Themes.Tritanopia={},e.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},e.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},e.Themes.Tritanopia=new e.Theme("tritanopia",e.Themes.Tritanopia.defaultBlockStyles,e.Themes.Tritanopia.categoryStyles),e.requires={},e}.apply(B,[]))&&(k.exports=p)},96116:function(k,B,f){var p,e;p=[f(83801)],void 0!==(e=function(t){"use strict";return t.Blocks={},t.Blocks}.apply(B,p))&&(k.exports=e)},83801:function(k,B,f){var p,e;p=[f(33164)],void 0!==(e=function(t){"use strict";return t.Blocks.colour={},t.Constants={},t.Constants.Colour={},t.Constants.Colour.HUE=20,t.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),t.Constants.Lists={},t.Constants.Lists.HUE=260,t.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),t.Blocks.lists_create_with={init:function(){this.setHelpUrl(t.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.Mutator(["lists_create_with_item"])),this.setTooltip(t.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("lists_create_with_container");o.initSvg();for(var s=o.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var _=n.newBlock("lists_create_with_item");_.initSvg(),s.connect(_.previousConnection),s=_.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var s=this.getInput("ADD"+o).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var s=this.getInput("ADD"+o);n.valueConnection_=s&&s.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg.LISTS_CREATE_EMPTY_TITLE);for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},t.Blocks.lists_indexOf={init:function(){var n=[[t.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(t.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new t.FieldDropdown(n),"END"),this.setInputsInline(!0);var o=this;this.setTooltip(function(){return t.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"0":"-1")})}},t.Blocks.lists_getIndex={init:function(){var n=[[t.Msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),n=new t.FieldDropdown(n,function(s){s="REMOVE"==s,this.getSourceBlock().updateStatement_(s)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(n,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var o=this;this.setTooltip(function(){var s=o.getFieldValue("MODE"),c=o.getFieldValue("WHERE"),_="";switch(s+" "+c){case"GET FROM_START":case"GET FROM_END":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":_=t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(_+="  "+("FROM_START"==c?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),_})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("statement",!this.outputConnection);var o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){var o="true"==n.getAttribute("statement");this.updateStatement_(o),n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateStatement_:function(n){n!=!this.outputConnection&&(this.unplug(!0,!0),n?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var _=this.getSourceBlock();return _.updateAt_(c),_.setFieldValue(s,"WHERE"),null}});this.getInput("AT").appendField(o,"WHERE"),t.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_setIndex={init:function(){var n=[[t.Msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new t.FieldDropdown(n),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var o=this;this.setTooltip(function(){var s=o.getFieldValue("MODE"),c=o.getFieldValue("WHERE"),_="";switch(s+" "+c){case"SET FROM_START":case"SET FROM_END":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":_=t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==c||"FROM_END"==c)&&(_+="  "+t.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),_})},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT").type==t.INPUT_VALUE;return n.setAttribute("at",o),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT"),this.removeInput("ORDINAL",!0),n?(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var o=new t.FieldDropdown(this.WHERE_OPTIONS,function(s){var c="FROM_START"==s||"FROM_END"==s;if(c!=n){var _=this.getSourceBlock();return _.updateAt_(c),_.setFieldValue(s,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(o,"WHERE")}},t.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n);var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var _="FROM_START"==c||"FROM_END"==c;if(_!=o){var w=this.getSourceBlock();return w.updateAt_(n,_),w.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},t.Blocks.lists_sort={init:function(){this.jsonInit({message0:t.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[t.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[t.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[t.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[t.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[t.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:t.Msg.LISTS_SORT_TOOLTIP,helpUrl:t.Msg.LISTS_SORT_HELPURL})}},t.Blocks.lists_split={init:function(){var n=this,o=new t.FieldDropdown([[t.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(s){n.updateType_(s)});this.setHelpUrl(t.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(o,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var s=n.getFieldValue("MODE");if("SPLIT"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==s)return t.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+s)})},updateType_:function(n){if(this.getFieldValue("MODE")!=n){var o=this.getInput("INPUT").connection;o.setShadowDom(null);var s=o.targetBlock();s&&(o.disconnect(),s.isShadow()?s.dispose():this.bumpNeighbours())}"SPLIT"==n?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("mode",this.getFieldValue("MODE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("mode"))}},t.Blocks.logic={},t.Constants.Logic={},t.Constants.Logic.HUE=210,t.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),t.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),t.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},t.Extensions.register("logic_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Logic.TOOLTIPS_BY_OP)),t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var n=t.utils.xml.createElement("mutation");return this.elseifCount_&&n.setAttribute("elseif",this.elseifCount_),this.elseCount_&&n.setAttribute("else",1),n},domToMutation:function(n){this.elseifCount_=parseInt(n.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(n.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(n){var o=n.newBlock("controls_if_if");o.initSvg();for(var s=o.nextConnection,c=1;c<=this.elseifCount_;c++){var _=n.newBlock("controls_if_elseif");_.initSvg(),s.connect(_.previousConnection),s=_.nextConnection}return this.elseCount_&&((n=n.newBlock("controls_if_else")).initSvg(),s.connect(n.previousConnection)),o},compose:function(n){n=n.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var o=[null],s=[null],c=null;n&&!n.isInsertionMarker();){switch(n.type){case"controls_if_elseif":this.elseifCount_++,o.push(n.valueConnection_),s.push(n.statementConnection_);break;case"controls_if_else":this.elseCount_++,c=n.statementConnection_;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(o,s,c)},saveConnections:function(n){n=n.nextConnection.targetBlock();for(var o=1;n;){switch(n.type){case"controls_if_elseif":var s=this.getInput("IF"+o),c=this.getInput("DO"+o);n.valueConnection_=s&&s.connection.targetConnection,n.statementConnection_=c&&c.connection.targetConnection,o++;break;case"controls_if_else":c=this.getInput("ELSE"),n.statementConnection_=c&&c.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+n.type)}n=n.nextConnection&&n.nextConnection.targetBlock()}},rebuildShape_:function(){var n=[null],o=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(var c=1;this.getInput("IF"+c);){var _=this.getInput("IF"+c),w=this.getInput("DO"+c);n.push(_.connection.targetConnection),o.push(w.connection.targetConnection),c++}this.updateShape_(),this.reconnectChildBlocks_(n,o,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++)this.appendValueInput("IF"+n).setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+n).appendField(t.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(n,o,s){for(var c=1;c<=this.elseifCount_;c++)t.Mutator.reconnect(n[c],this,"IF"+c),t.Mutator.reconnect(o[c],this,"DO"+c);t.Mutator.reconnect(s,this,"ELSE")}},t.Extensions.registerMutator("controls_if_mutator",t.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},t.Extensions.register("controls_if_tooltip",t.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(n){this.prevBlocks_||(this.prevBlocks_=[null,null]);var o=this.getInputTargetBlock("A"),s=this.getInputTargetBlock("B");o&&s&&!this.workspace.connectionChecker.doTypeChecks(o.outputConnection,s.outputConnection)&&(t.Events.setGroup(n.group),(n=this.prevBlocks_[0])!==o&&(o.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("A").connection.connect(n.outputConnection)),(o=this.prevBlocks_[1])!==s&&(s.unplug(),!o||o.isDisposed()||o.isShadow()||this.getInput("B").connection.connect(o.outputConnection)),this.bumpNeighbours(),t.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},t.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(t.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},t.Extensions.register("logic_compare",t.Constants.Logic.LOGIC_COMPARE_EXTENSION),t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(n){var o=this.getInputTargetBlock("THEN"),s=this.getInputTargetBlock("ELSE"),c=this.outputConnection.targetConnection;if((o||s)&&c)for(var _=0;2>_;_++){var w=1==_?o:s;w&&!w.workspace.connectionChecker.doTypeChecks(w.outputConnection,c)&&(t.Events.setGroup(n.group),c===this.prevParentConnection_?(this.unplug(),c.getSourceBlock().bumpNeighbours()):(w.unplug(),w.bumpNeighbours()),t.Events.setGroup(!1))}this.prevParentConnection_=c}},t.Extensions.registerMixin("logic_ternary",t.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),t.Blocks.loops={},t.Constants.Loops={},t.Constants.Loops.HUE=120,t.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),t.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},t.Extensions.register("controls_whileUntil_tooltip",t.Extensions.buildTooltipForDropdown("MODE",t.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},t.Extensions.register("controls_flow_tooltip",t.Extensions.buildTooltipForDropdown("FLOW",t.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(n){if(!this.isInFlyout){var o=this.getField("VAR").getVariable(),s=o.name;if(!this.isCollapsed()&&null!=s){var c={enabled:!0};c.text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",s),o=t.Variables.generateVariableFieldDom(o),(s=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),s.appendChild(o),c.callback=t.ContextMenu.callbackFactory(this,s),n.push(c)}}}},t.Extensions.registerMixin("contextMenu_newGetVariableBlock",t.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),t.Extensions.register("controls_for_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.Extensions.register("controls_forEach_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(n){do{if(-1!=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(n.type))return n;n=n.getSurroundParent()}while(n);return null},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()&&n.type==t.Events.BLOCK_MOVE){var o=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(o?null:t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var s=t.Events.getGroup();t.Events.setGroup(n.group),this.setEnabled(o),t.Events.setGroup(s)}}}},t.Extensions.registerMixin("controls_flow_in_loop_check",t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),t.Blocks.math={},t.Constants.Math={},t.Constants.Math.HUE=230,t.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),t.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},t.Extensions.register("math_op_tooltip",t.Extensions.buildTooltipForDropdown("OP",t.Constants.Math.TOOLTIPS_BY_OP)),t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return n.setAttribute("divisor_input",o),n},domToMutation:function(n){n="true"==n.getAttribute("divisor_input"),this.updateShape_(n)},updateShape_:function(n){var o=this.getInput("DIVISOR");n?o||this.appendValueInput("DIVISOR").setCheck("Number"):o&&this.removeInput("DIVISOR")}},t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(n){n="DIVISIBLE_BY"==n,this.getSourceBlock().updateShape_(n)})},t.Extensions.registerMutator("math_is_divisibleby_mutator",t.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,t.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),t.Extensions.register("math_change_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(n){this.outputConnection.setCheck("MODE"==n?"Array":"Number")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("op",this.getFieldValue("OP")),n},domToMutation:function(n){this.updateType_(n.getAttribute("op"))}},t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(n){this.updateType_(n)}.bind(this))},t.Extensions.registerMutator("math_modes_of_list_mutator",t.Constants.Math.LIST_MODES_MUTATOR_MIXIN,t.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),t.Blocks.procedures={},t.Blocks.procedures_defnoreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(n){this.hasStatements_!==n&&(n?(this.appendStatementInput("STACK").appendField(t.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=n)},updateParams_:function(){var n="";this.arguments_.length&&(n=t.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.Events.disable();try{this.setFieldValue(n,"PARAMS")}finally{t.Events.enable()}},mutationToDom:function(n){var o=t.utils.xml.createElement("mutation");n&&o.setAttribute("name",this.getFieldValue("NAME"));for(var s=0;s<this.argumentVarModels_.length;s++){var c=t.utils.xml.createElement("arg"),_=this.argumentVarModels_[s];c.setAttribute("name",_.name),c.setAttribute("varid",_.getId()),n&&this.paramIds_&&c.setAttribute("paramId",this.paramIds_[s]),o.appendChild(c)}return this.hasStatements_||o.setAttribute("statements","false"),o},domToMutation:function(n){this.arguments_=[],this.argumentVarModels_=[];for(var s,o=0;s=n.childNodes[o];o++)if("arg"==s.nodeName.toLowerCase()){var c=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(c),null!=(s=t.Variables.getOrCreateVariablePackage(this.workspace,s,c,""))?this.argumentVarModels_.push(s):console.log("Failed to create a variable with name "+c+", ignoring.")}this.updateParams_(),t.Procedures.mutateCallers(this),this.setStatements_("false"!==n.getAttribute("statements"))},decompose:function(n){var o=t.utils.xml.createElement("block");o.setAttribute("type","procedures_mutatorcontainer");var s=t.utils.xml.createElement("statement");s.setAttribute("name","STACK"),o.appendChild(s);for(var c=0;c<this.arguments_.length;c++){var _=t.utils.xml.createElement("block");_.setAttribute("type","procedures_mutatorarg");var w=t.utils.xml.createElement("field");w.setAttribute("name","NAME");var M=t.utils.xml.createTextNode(this.arguments_[c]);w.appendChild(M),_.appendChild(w),w=t.utils.xml.createElement("next"),_.appendChild(w),s.appendChild(_),s=w}return n=t.Xml.domToBlock(o,n),"procedures_defreturn"==this.type?n.setFieldValue(this.hasStatements_,"STATEMENTS"):n.removeInput("STATEMENT_INPUT"),t.Procedures.mutateCallers(this),n},compose:function(n){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var o=n.getInputTargetBlock("STACK");o&&!o.isInsertionMarker();){var s=o.getFieldValue("NAME");this.arguments_.push(s),s=this.workspace.getVariable(s,""),this.argumentVarModels_.push(s),this.paramIds_.push(o.id),o=o.nextConnection&&o.nextConnection.targetBlock()}this.updateParams_(),t.Procedures.mutateCallers(this),null!==(n=n.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(n="TRUE"==n)&&(n?(this.setStatements_(!0),t.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(n,o){var s=this.workspace.getVariableById(n);if(""==s.type){s=s.name,o=this.workspace.getVariableById(o);for(var c=!1,_=0;_<this.argumentVarModels_.length;_++)this.argumentVarModels_[_].getId()==n&&(this.arguments_[_]=o.name,this.argumentVarModels_[_]=o,c=!0);c&&(this.displayRenamedVar_(s,o.name),t.Procedures.mutateCallers(this))}},updateVarName:function(n){for(var o=n.name,s=!1,c=0;c<this.argumentVarModels_.length;c++)if(this.argumentVarModels_[c].getId()==n.getId()){var _=this.arguments_[c];this.arguments_[c]=o,s=!0}s&&(this.displayRenamedVar_(_,o),t.Procedures.mutateCallers(this))},displayRenamedVar_:function(n,o){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var _,s=this.mutator.workspace_.getAllBlocks(!1),c=0;_=s[c];c++)"procedures_mutatorarg"==_.type&&t.Names.equals(n,_.getFieldValue("NAME"))&&_.setFieldValue(o,"NAME")},customContextMenu:function(n){if(!this.isInFlyout){var o={enabled:!0},s=this.getFieldValue("NAME");o.text=t.Msg.PROCEDURES_CREATE_DO.replace("%1",s);var c=t.utils.xml.createElement("mutation");for(c.setAttribute("name",s),s=0;s<this.arguments_.length;s++){var _=t.utils.xml.createElement("arg");_.setAttribute("name",this.arguments_[s]),c.appendChild(_)}if((s=t.utils.xml.createElement("block")).setAttribute("type",this.callType_),s.appendChild(c),o.callback=t.ContextMenu.callbackFactory(this,s),n.push(o),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)(o={enabled:!0}).text=t.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(c=this.argumentVarModels_[s]).name),c=t.Variables.generateVariableFieldDom(c),(_=t.utils.xml.createElement("block")).setAttribute("type","variables_get"),_.appendChild(c),o.callback=t.ContextMenu.callbackFactory(this,_),n.push(o)}},callType_:"procedures_callnoreturn"},t.Blocks.procedures_defreturn={init:function(){var n=t.Procedures.findLegalName("",this);(n=new t.FieldTextInput(n,t.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(n,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.ALIGN_RIGHT).appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:t.Blocks.procedures_defnoreturn.setStatements_,updateParams_:t.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:t.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_defnoreturn.domToMutation,decompose:t.Blocks.procedures_defnoreturn.decompose,compose:t.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:t.Blocks.procedures_defnoreturn.getVars,getVarModels:t.Blocks.procedures_defnoreturn.getVarModels,renameVarById:t.Blocks.procedures_defnoreturn.renameVarById,updateVarName:t.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:t.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:t.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},t.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new t.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},t.Blocks.procedures_mutatorarg={init:function(){var n=new t.FieldTextInput(t.Procedures.DEFAULT_ARG,this.validator_);n.oldShowEditorFn_=n.showEditor_,n.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(n,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,n.onFinishEditing_=this.deleteIntermediateVars_,n.createdVariables_=[],n.onFinishEditing_("x")},validator_:function(n){var o=this.getSourceBlock(),s=t.Mutator.findParentWs(o.workspace);if(!(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var c=(o.workspace.targetWorkspace||o.workspace).getAllBlocks(!1),_=n.toLowerCase(),w=0;w<c.length;w++)if(c[w].id!=this.getSourceBlock().id){var M=c[w].getFieldValue("NAME");if(M&&M.toLowerCase()==_)return null}return o.isInFlyout||((o=s.getVariable(n,""))&&o.name!=n&&s.renameVariableById(o.getId(),n),o||(o=s.createVariable(n,""))&&this.createdVariables_&&this.createdVariables_.push(o)),n},deleteIntermediateVars_:function(n){var o=t.Mutator.findParentWs(this.getSourceBlock().workspace);if(o)for(var s=0;s<this.createdVariables_.length;s++){var c=this.createdVariables_[s];c.name!=n&&o.deleteVariableById(c.getId())}}},t.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(n,o){t.Names.equals(n,this.getProcedureCall())&&(this.setFieldValue(o,"NAME"),this.setTooltip((this.outputConnection?t.Msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",o)))},setProcedureParameters_:function(n,o){var s=t.Procedures.getDefinition(this.getProcedureCall(),this.workspace),c=s&&s.mutator&&s.mutator.isVisible();if(c||(this.quarkConnections_={},this.quarkIds_=null),o)if(n.join("\n")==this.arguments_.join("\n"))this.quarkIds_=o;else{if(o.length!=n.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),s=this.rendered,this.rendered=!1;for(var _=0;_<this.arguments_.length;_++){var w=this.getInput("ARG"+_);w&&(this.quarkConnections_[this.quarkIds_[_]]=w=w.connection.targetConnection,c&&w&&-1==o.indexOf(this.quarkIds_[_])&&(w.disconnect(),w.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(n),this.argumentVarModels_=[],_=0;_<this.arguments_.length;_++)n=t.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[_],""),this.argumentVarModels_.push(n);if(this.updateShape_(),this.quarkIds_=o)for(_=0;_<this.arguments_.length;_++)(o=this.quarkIds_[_])in this.quarkConnections_&&(t.Mutator.reconnect(w=this.quarkConnections_[o],this,"ARG"+_)||delete this.quarkConnections_[o]);(this.rendered=s)&&this.render()}},updateShape_:function(){for(var n=0;n<this.arguments_.length;n++){var o=this.getField("ARGNAME"+n);if(o){t.Events.disable();try{o.setValue(this.arguments_[n])}finally{t.Events.enable()}}else o=new t.FieldLabel(this.arguments_[n]),this.appendValueInput("ARG"+n).setAlign(t.ALIGN_RIGHT).appendField(o,"ARGNAME"+n).init()}for(;this.getInput("ARG"+n);)this.removeInput("ARG"+n),n++;(n=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(n.appendField(t.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");n.setAttribute("name",this.getProcedureCall());for(var o=0;o<this.arguments_.length;o++){var s=t.utils.xml.createElement("arg");s.setAttribute("name",this.arguments_[o]),n.appendChild(s)}return n},domToMutation:function(n){var o=n.getAttribute("name");this.renameProcedure(this.getProcedureCall(),o),o=[];for(var _,s=[],c=0;_=n.childNodes[c];c++)"arg"==_.nodeName.toLowerCase()&&(o.push(_.getAttribute("name")),s.push(_.getAttribute("paramId")));this.setProcedureParameters_(o,s)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(n){if(this.workspace&&!this.workspace.isFlyout&&n.recordUndo)if(n.type==t.Events.BLOCK_CREATE&&-1!=n.ids.indexOf(this.id)){var o=this.getProcedureCall();if(!(o=t.Procedures.getDefinition(o,this.workspace))||o.type==this.defType_&&JSON.stringify(o.getVars())==JSON.stringify(this.arguments_)||(o=null),!o){t.Events.setGroup(n.group),n=t.utils.xml.createElement("xml"),(o=t.utils.xml.createElement("block")).setAttribute("type",this.defType_);var s=this.getRelativeToSurfaceXY(),c=s.y+2*t.SNAP_RADIUS;o.setAttribute("x",s.x+t.SNAP_RADIUS*(this.RTL?-1:1)),o.setAttribute("y",c),s=this.mutationToDom(),o.appendChild(s),(s=t.utils.xml.createElement("field")).setAttribute("name","NAME"),(c=this.getProcedureCall())||(c=t.Procedures.findLegalName("",this),this.renameProcedure("",c)),s.appendChild(t.utils.xml.createTextNode(c)),o.appendChild(s),n.appendChild(o),t.Xml.domToWorkspace(n,this.workspace),t.Events.setGroup(!1)}}else n.type==t.Events.BLOCK_DELETE?(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))||(t.Events.setGroup(n.group),this.dispose(!0),t.Events.setGroup(!1))):n.type==t.Events.CHANGE&&"disabled"==n.element&&(o=this.getProcedureCall(),(o=t.Procedures.getDefinition(o,this.workspace))&&o.id==n.blockId&&((o=t.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),t.Events.setGroup(n.group),n.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.Events.setGroup(o)))},customContextMenu:function(n){if(this.workspace.isMovable()){var o={enabled:!0};o.text=t.Msg.PROCEDURES_HIGHLIGHT_DEF;var s=this.getProcedureCall(),c=this.workspace;o.callback=function(){var _=t.Procedures.getDefinition(s,c);_&&(c.centerOnBlock(_.id),_.select())},n.push(o)}},defType_:"procedures_defnoreturn"},t.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:t.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:t.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:t.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:t.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:t.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:t.Blocks.procedures_callnoreturn.domToMutation,getVars:t.Blocks.procedures_callnoreturn.getVars,getVarModels:t.Blocks.procedures_callnoreturn.getVarModels,onchange:t.Blocks.procedures_callnoreturn.onchange,customContextMenu:t.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},t.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("value",Number(this.hasReturnValue_)),n},domToMutation:function(n){this.hasReturnValue_=1==n.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(n){if(this.workspace.isDragging&&!this.workspace.isDragging()){n=!1;var o=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(o.type)){n=!0;break}o=o.getSurroundParent()}while(o);n?("procedures_defnoreturn"==o.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=o.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(t.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.Blocks.texts={},t.Constants.Text={},t.Constants.Text.HUE=160,t.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),t.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var n=t.utils.xml.createElement("mutation"),o=this.getInput("AT1").type==t.INPUT_VALUE;return n.setAttribute("at1",o),o=this.getInput("AT2").type==t.INPUT_VALUE,n.setAttribute("at2",o),n},domToMutation:function(n){var o="true"==n.getAttribute("at1");n="true"==n.getAttribute("at2"),this.updateAt_(1,o),this.updateAt_(2,n)},updateAt_:function(n,o){this.removeInput("AT"+n),this.removeInput("ORDINAL"+n,!0),o?(this.appendValueInput("AT"+n).setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+n).appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+n),2==n&&t.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_GET_SUBSTRING_TAIL));var s=new t.FieldDropdown(this["WHERE_OPTIONS_"+n],function(c){var _="FROM_START"==c||"FROM_END"==c;if(_!=o){var w=this.getSourceBlock();return w.updateAt_(n,_),w.setFieldValue(c,"WHERE"+n),null}});this.getInput("AT"+n).appendField(s,"WHERE"+n),1==n&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},t.Blocks.text_changeCase={init:function(){var n=[[t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_CHANGECASE_TOOLTIP)}},t.Blocks.text_trim={init:function(){var n=[[t.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new t.FieldDropdown(n),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg.TEXT_TRIM_TOOLTIP)}},t.Blocks.text_print={init:function(){this.jsonInit({message0:t.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg.TEXT_PRINT_HELPURL})}},t.Blocks.text_prompt_ext={init:function(){var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var o=this;n=new t.FieldDropdown(n,function(s){o.updateType_(s)}),this.appendValueInput("TEXT").appendField(n,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(n){this.outputConnection.setCheck("NUMBER"==n?"Number":"String")},mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("type",this.getFieldValue("TYPE")),n},domToMutation:function(n){this.updateType_(n.getAttribute("type"))}},t.Blocks.text_prompt={init:function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN);var n=[[t.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],o=this;this.setHelpUrl(t.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),n=new t.FieldDropdown(n,function(s){o.updateType_(s)}),this.appendDummyInput().appendField(n,"TYPE").appendField(this.newQuote_(!0)).appendField(new t.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==o.getFieldValue("TYPE")?t.Msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:t.Blocks.text_prompt_ext.updateType_,mutationToDom:t.Blocks.text_prompt_ext.mutationToDom,domToMutation:t.Blocks.text_prompt_ext.domToMutation},t.Blocks.text_count={init:function(){this.jsonInit({message0:t.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg.TEXT_COUNT_HELPURL})}},t.Blocks.text_replace={init:function(){this.jsonInit({message0:t.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg.TEXT_REPLACE_HELPURL})}},t.Blocks.text_reverse={init:function(){this.jsonInit({message0:t.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg.TEXT_REVERSE_HELPURL})}},t.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(n){for(var s,o=0;s=this.inputList[o];o++)for(var _,c=0;_=s.fieldRow[c];c++)if(n==_.name)return s.insertFieldAt(c,this.newQuote_(!0)),void s.insertFieldAt(c+2,this.newQuote_(!1));console.warn('field named "'+n+'" not found in '+this.toDevString())},newQuote_:function(n){return new t.FieldImage((n=this.RTL?!n:n)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,n?"\u201c":"\u201d")}},t.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("items",this.itemCount_),n},domToMutation:function(n){this.itemCount_=parseInt(n.getAttribute("items"),10),this.updateShape_()},decompose:function(n){var o=n.newBlock("text_create_join_container");o.initSvg();for(var s=o.getInput("STACK").connection,c=0;c<this.itemCount_;c++){var _=n.newBlock("text_create_join_item");_.initSvg(),s.connect(_.previousConnection),s=_.nextConnection}return o},compose:function(n){var o=n.getInputTargetBlock("STACK");for(n=[];o&&!o.isInsertionMarker();)n.push(o.valueConnection_),o=o.nextConnection&&o.nextConnection.targetBlock();for(o=0;o<this.itemCount_;o++){var s=this.getInput("ADD"+o).connection.targetConnection;s&&-1==n.indexOf(s)&&s.disconnect()}for(this.itemCount_=n.length,this.updateShape_(),o=0;o<this.itemCount_;o++)t.Mutator.reconnect(n[o],this,"ADD"+o)},saveConnections:function(n){n=n.getInputTargetBlock("STACK");for(var o=0;n;){var s=this.getInput("ADD"+o);n.valueConnection_=s&&s.connection.targetConnection,o++,n=n.nextConnection&&n.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var n=0;n<this.itemCount_;n++)if(!this.getInput("ADD"+n)){var o=this.appendValueInput("ADD"+n).setAlign(t.ALIGN_RIGHT);0==n&&o.appendField(t.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++}},t.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(t.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.Mutator(["text_create_join_item"]))},t.Extensions.register("text_append_tooltip",t.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var n=this;this.setTooltip(function(){return t.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")})},t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var n=t.utils.xml.createElement("mutation");return n.setAttribute("at",!!this.isAt_),n},domToMutation:function(n){n="false"!=n.getAttribute("at"),this.updateAt_(n)},updateAt_:function(n){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),n&&(this.appendValueInput("AT").setCheck("Number"),t.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg.ORDINAL_NUMBER_SUFFIX)),t.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg.TEXT_CHARAT_TAIL)),this.isAt_=n}},t.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(o){(o="FROM_START"==o||"FROM_END"==o)!=this.isAt_&&this.getSourceBlock().updateAt_(o)}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var o=n.getFieldValue("WHERE"),s=t.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==o||"FROM_END"==o)&&(o="FROM_START"==o?t.Msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+o.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),s})},t.Extensions.register("text_indexOf_tooltip",t.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),t.Extensions.register("text_quotes",t.Constants.Text.TEXT_QUOTES_EXTENSION),t.Extensions.registerMutator("text_join_mutator",t.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,t.Constants.Text.TEXT_JOIN_EXTENSION),t.Extensions.registerMutator("text_charAt_mutator",t.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,t.Constants.Text.TEXT_CHARAT_EXTENSION),t.Blocks.variables={},t.Constants.Variables={},t.Constants.Variables.HUE=330,t.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},_=this.getField("VAR").getText(),c={text:t.Msg.DELETE_VARIABLE.replace("%1",_),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(c));else{if("variables_get"==this.type)var o="variables_set",s=t.Msg.VARIABLES_GET_CREATE_SET;else o="variables_get",s=t.Msg.VARIABLES_SET_CREATE_GET;var c={enabled:0<this.workspace.remainingCapacity()},_=this.getField("VAR").getText();c.text=s.replace("%1",_),(s=t.utils.xml.createElement("field")).setAttribute("name","VAR"),s.appendChild(t.utils.xml.createTextNode(_)),(_=t.utils.xml.createElement("block")).setAttribute("type",o),_.appendChild(s),c.callback=t.ContextMenu.callbackFactory(this,_),n.push(c)}}},t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(o,s)}},t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();o.deleteVariableById(s.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableSetterGetter",t.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Constants.VariablesDynamic={},t.Constants.VariablesDynamic.HUE=310,t.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(n){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(o={text:t.Msg.RENAME_VARIABLE,enabled:!0,callback:t.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},w=this.getField("VAR").getText(),_={text:t.Msg.DELETE_VARIABLE.replace("%1",w),enabled:!0,callback:t.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},n.unshift(o),n.unshift(_));else{var o=this.getFieldValue("VAR"),s=this.workspace.getVariableById(o).type;if("variables_get_dynamic"==this.type){o="variables_set_dynamic";var c=t.Msg.VARIABLES_GET_CREATE_SET}else o="variables_get_dynamic",c=t.Msg.VARIABLES_SET_CREATE_GET;var _={enabled:0<this.workspace.remainingCapacity()},w=this.getField("VAR").getText();_.text=c.replace("%1",w),(c=t.utils.xml.createElement("field")).setAttribute("name","VAR"),c.setAttribute("variabletype",s),c.appendChild(t.utils.xml.createTextNode(w)),(w=t.utils.xml.createElement("block")).setAttribute("type",o),w.appendChild(c),_.callback=t.ContextMenu.callbackFactory(this,w),n.push(_)}},onchange:function(n){n=this.getFieldValue("VAR"),n=t.Variables.getVariable(this.workspace,n),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(n.type):this.getInput("VALUE").connection.setCheck(n.type)}},t.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();t.Variables.renameVariable(o,s)}},t.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(n){return function(){var o=n.workspace,s=n.getField("VAR").getVariable();o.deleteVariableById(s.getId()),o.refreshToolboxSelection()}},t.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",t.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),t.Blocks}.apply(B,p))&&(k.exports=e)},38136:function(k,B,f){var p,e;p=[f(3731),f(32998),f(96116),f(59506)],void 0!==(e=function(t,n,o,s){"use strict";return t.setLocale(n),t.Blocks=t.Blocks||{},Object.keys(o).forEach(function(c){t.Blocks[c]=o[c]}),t.JavaScript=s,t}.apply(B,p))&&(k.exports=e)},3731:function(k,B,f){var p,e;p=[f(54678)],void 0!==(e=function(t){"use strict";return t.setLocale=function(n){t.Msg=t.Msg||{},Object.keys(n).forEach(function(o){t.Msg[o]=n[o]})},t}.apply(B,p))&&(k.exports=e)},45797:function(k,B,f){var p,e;p=[f(38136)],void 0!==(e=function(t){"use strict";return t}.apply(B,p))&&(k.exports=e)},59506:function(k,B,f){var p,e;p=[f(3731),f(29920)],void 0!==(e=function(t,n){"use strict";return t.JavaScript=n,n}.apply(B,p))&&(k.exports=e)},29920:function(k,B,f){var p,e;p=[f(33164)],void 0!==(e=function(t){"use strict";return t.JavaScript=new t.Generator("JavaScript"),t.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(t.utils.global).join(",")),t.JavaScript.ORDER_ATOMIC=0,t.JavaScript.ORDER_NEW=1.1,t.JavaScript.ORDER_MEMBER=1.2,t.JavaScript.ORDER_FUNCTION_CALL=2,t.JavaScript.ORDER_INCREMENT=3,t.JavaScript.ORDER_DECREMENT=3,t.JavaScript.ORDER_BITWISE_NOT=4.1,t.JavaScript.ORDER_UNARY_PLUS=4.2,t.JavaScript.ORDER_UNARY_NEGATION=4.3,t.JavaScript.ORDER_LOGICAL_NOT=4.4,t.JavaScript.ORDER_TYPEOF=4.5,t.JavaScript.ORDER_VOID=4.6,t.JavaScript.ORDER_DELETE=4.7,t.JavaScript.ORDER_AWAIT=4.8,t.JavaScript.ORDER_EXPONENTIATION=5,t.JavaScript.ORDER_MULTIPLICATION=5.1,t.JavaScript.ORDER_DIVISION=5.2,t.JavaScript.ORDER_MODULUS=5.3,t.JavaScript.ORDER_SUBTRACTION=6.1,t.JavaScript.ORDER_ADDITION=6.2,t.JavaScript.ORDER_BITWISE_SHIFT=7,t.JavaScript.ORDER_RELATIONAL=8,t.JavaScript.ORDER_IN=8,t.JavaScript.ORDER_INSTANCEOF=8,t.JavaScript.ORDER_EQUALITY=9,t.JavaScript.ORDER_BITWISE_AND=10,t.JavaScript.ORDER_BITWISE_XOR=11,t.JavaScript.ORDER_BITWISE_OR=12,t.JavaScript.ORDER_LOGICAL_AND=13,t.JavaScript.ORDER_LOGICAL_OR=14,t.JavaScript.ORDER_CONDITIONAL=15,t.JavaScript.ORDER_ASSIGNMENT=16,t.JavaScript.ORDER_YIELD=17,t.JavaScript.ORDER_COMMA=18,t.JavaScript.ORDER_NONE=99,t.JavaScript.ORDER_OVERRIDES=[[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_FUNCTION_CALL,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_MEMBER],[t.JavaScript.ORDER_MEMBER,t.JavaScript.ORDER_FUNCTION_CALL],[t.JavaScript.ORDER_LOGICAL_NOT,t.JavaScript.ORDER_LOGICAL_NOT],[t.JavaScript.ORDER_MULTIPLICATION,t.JavaScript.ORDER_MULTIPLICATION],[t.JavaScript.ORDER_ADDITION,t.JavaScript.ORDER_ADDITION],[t.JavaScript.ORDER_LOGICAL_AND,t.JavaScript.ORDER_LOGICAL_AND],[t.JavaScript.ORDER_LOGICAL_OR,t.JavaScript.ORDER_LOGICAL_OR]],t.JavaScript.isInitialized=!1,t.JavaScript.init=function(n){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(n.getVariableMap()),this.nameDB_.populateVariables(n),this.nameDB_.populateProcedures(n);for(var o=[],s=t.Variables.allDeveloperVariables(n),c=0;c<s.length;c++)o.push(this.nameDB_.getName(s[c],t.Names.DEVELOPER_VARIABLE_TYPE));for(n=t.Variables.allUsedVarModels(n),c=0;c<n.length;c++)o.push(this.nameDB_.getName(n[c].getId(),t.VARIABLE_CATEGORY_NAME));o.length&&(this.definitions_.variables="var "+o.join(", ")+";"),this.isInitialized=!0},t.JavaScript.finish=function(n){var o=t.utils.object.values(this.definitions_);return n=Object.getPrototypeOf(this).finish.call(this,n),this.isInitialized=!1,this.nameDB_.reset(),o.join("\n\n")+"\n\n\n"+n},t.JavaScript.scrubNakedValue=function(n){return n+";\n"},t.JavaScript.quote_=function(n){return"'"+(n=n.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},t.JavaScript.multiline_quote_=function(n){return n.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},t.JavaScript.scrub_=function(n,o,s){var c="";if(!n.outputConnection||!n.outputConnection.targetConnection){var _=n.getCommentText();_&&(_=t.utils.string.wrap(_,this.COMMENT_WRAP-3),c+=this.prefixLines(_+"\n","// "));for(var w=0;w<n.inputList.length;w++)n.inputList[w].type==t.inputTypes.VALUE&&(_=n.inputList[w].connection.targetBlock())&&(_=this.allNestedComments(_))&&(c+=this.prefixLines(_,"// "))}return n=n.nextConnection&&n.nextConnection.targetBlock(),c+o+(s?"":this.blockToCode(n))},t.JavaScript.getAdjusted=function(n,o,s,c,_){s=s||0,_=_||this.ORDER_NONE,n.workspace.options.oneBasedIndex&&s--;var w=n.workspace.options.oneBasedIndex?"1":"0";if(n=0<s?this.valueToCode(n,o,this.ORDER_ADDITION)||w:0>s?this.valueToCode(n,o,this.ORDER_SUBTRACTION)||w:c?this.valueToCode(n,o,this.ORDER_UNARY_NEGATION)||w:this.valueToCode(n,o,_)||w,t.isNumber(n))n=Number(n)+s,c&&(n=-n);else{if(0<s){n=n+" + "+s;var M=this.ORDER_ADDITION}else 0>s&&(n=n+" - "+-s,M=this.ORDER_SUBTRACTION);c&&(n=s?"-("+n+")":"-"+n,M=this.ORDER_UNARY_NEGATION),M=Math.floor(M),_=Math.floor(_),M&&_>=M&&(n="("+n+")")}return n},t.JavaScript.colour={},t.JavaScript.colour_picker=function(n){return[t.JavaScript.quote_(n.getFieldValue("COLOUR")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.colour_random=function(n){return[t.JavaScript.provideFunction_("colourRandom",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_rgb=function(n){var o=t.JavaScript.valueToCode(n,"RED",t.JavaScript.ORDER_NONE)||0,s=t.JavaScript.valueToCode(n,"GREEN",t.JavaScript.ORDER_NONE)||0;return n=t.JavaScript.valueToCode(n,"BLUE",t.JavaScript.ORDER_NONE)||0,[t.JavaScript.provideFunction_("colourRgb",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.colour_blend=function(n){var o=t.JavaScript.valueToCode(n,"COLOUR1",t.JavaScript.ORDER_NONE)||"'#000000'",s=t.JavaScript.valueToCode(n,"COLOUR2",t.JavaScript.ORDER_NONE)||"'#000000'";return n=t.JavaScript.valueToCode(n,"RATIO",t.JavaScript.ORDER_NONE)||.5,[t.JavaScript.provideFunction_("colourBlend",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists={},t.JavaScript.lists_create_empty=function(n){return["[]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_create_with=function(n){for(var o=Array(n.itemCount_),s=0;s<n.itemCount_;s++)o[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"null";return["["+o.join(", ")+"]",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.lists_repeat=function(n){return[t.JavaScript.provideFunction_("listsRepeat",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(t.JavaScript.valueToCode(n,"ITEM",t.JavaScript.ORDER_NONE)||"null")+", "+(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.lists_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.lists_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"[]")+"."+o+"("+s+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_getIndex=function(n){var o=n.getFieldValue("MODE")||"GET",s=n.getFieldValue("WHERE")||"FROM_START",c=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==s?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"[]";switch(s){case"FIRST":if("GET"==o)return[c+"[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".shift()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return c+".shift();\n";break;case"LAST":if("GET"==o)return[c+".slice(-1)[0]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".pop()",t.JavaScript.ORDER_MEMBER];if("REMOVE"==o)return c+".pop();\n";break;case"FROM_START":if(n=t.JavaScript.getAdjusted(n,"AT"),"GET"==o)return[c+"["+n+"]",t.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==o)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+".splice("+n+", 1);\n";break;case"FROM_END":if(n=t.JavaScript.getAdjusted(n,"AT",1,!0),"GET"==o)return[c+".slice("+n+")[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==o)return[c+".splice("+n+", 1)[0]",t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+".splice("+n+", 1);";break;case"RANDOM":if(c=t.JavaScript.provideFunction_("listsGetRandomItem",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+c+", "+("GET"!=o)+")","GET"==o||"GET_REMOVE"==o)return[c,t.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==o)return c+";\n"}throw Error("Unhandled combination (lists_getIndex).")},t.JavaScript.lists_setIndex=function(n){function o(){if(s.match(/^\w+$/))return"";var M=t.JavaScript.nameDB_.getDistinctName("tmpList",t.VARIABLE_CATEGORY_NAME),U="var "+M+" = "+s+";\n";return s=M,U}var s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",c=n.getFieldValue("MODE")||"GET",_=n.getFieldValue("WHERE")||"FROM_START",w=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"null";switch(_){case"FIRST":if("SET"==c)return s+"[0] = "+w+";\n";if("INSERT"==c)return s+".unshift("+w+");\n";break;case"LAST":if("SET"==c)return(n=o())+(s+"[")+s+".length - 1] = "+w+";\n";if("INSERT"==c)return s+".push("+w+");\n";break;case"FROM_START":if(_=t.JavaScript.getAdjusted(n,"AT"),"SET"==c)return s+"["+_+"] = "+w+";\n";if("INSERT"==c)return s+".splice("+_+", 0, "+w+");\n";break;case"FROM_END":if(_=t.JavaScript.getAdjusted(n,"AT",1,!1,t.JavaScript.ORDER_SUBTRACTION),n=o(),"SET"==c)return n+(s+"[")+s+".length - "+_+"] = "+w+";\n";if("INSERT"==c)return n+(s+".splice(")+s+".length - "+_+", 0, "+w+");\n";break;case"RANDOM":if(n=o(),n+="var "+(_=t.JavaScript.nameDB_.getDistinctName("tmpX",t.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+s+".length);\n","SET"==c)return n+(s+"[")+_+"] = "+w+";\n";if("INSERT"==c)return n+(s+".splice(")+_+", 0, "+w+");\n"}throw Error("Unhandled combination (lists_setIndex).")},t.JavaScript.lists.getIndex_=function(n,o,s){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+s:"LAST"==o?n+".length - 1":s},t.JavaScript.lists_getSublist=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",s=n.getFieldValue("WHERE1"),c=n.getFieldValue("WHERE2");if("FIRST"==s&&"LAST"==c)o+=".slice(0)";else if(o.match(/^\w+$/)||"FROM_END"!=s&&"FROM_START"==c){switch(s){case"FROM_START":var _=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":_=o+".length - "+(_=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":_="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(c){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=o+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=o+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}o=o+".slice("+_+", "+n+")"}else{_=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var w=t.JavaScript.lists.getIndex_,M={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+M[s]+M[c],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==s||"FROM_START"==s?", at1":"")+("FROM_END"==c||"FROM_START"==c?", at2":"")+") {","  var start = "+w("sequence",s,"at1")+";","  var end = "+w("sequence",c,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+o+("FROM_END"==s||"FROM_START"==s?", "+_:"")+("FROM_END"==c||"FROM_START"==c?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_sort=function(n){var o=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]",s="1"===n.getFieldValue("DIRECTION")?1:-1;return n=n.getFieldValue("TYPE"),[o+".slice().sort("+t.JavaScript.provideFunction_("listsGetSortCompare",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+n+'", '+s+"))",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_split=function(n){var o=t.JavaScript.valueToCode(n,"INPUT",t.JavaScript.ORDER_MEMBER),s=t.JavaScript.valueToCode(n,"DELIM",t.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(n=n.getFieldValue("MODE")))o||(o="''"),n="split";else{if("JOIN"!=n)throw Error("Unknown mode: "+n);o||(o="[]"),n="join"}return[o+"."+n+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.lists_reverse=function(n){return[(t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.logic={},t.JavaScript.controls_if=function(n){var o=0,s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n));do{var c=t.JavaScript.valueToCode(n,"IF"+o,t.JavaScript.ORDER_NONE)||"false",_=t.JavaScript.statementToCode(n,"DO"+o);t.JavaScript.STATEMENT_SUFFIX&&(_=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+_),s+=(0<o?" else ":"")+"if ("+c+") {\n"+_+"}",++o}while(n.getInput("IF"+o));return(n.getInput("ELSE")||t.JavaScript.STATEMENT_SUFFIX)&&(_=t.JavaScript.statementToCode(n,"ELSE"),t.JavaScript.STATEMENT_SUFFIX&&(_=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)+_),s+=" else {\n"+_+"}"),s+"\n"},t.JavaScript.controls_ifelse=t.JavaScript.controls_if,t.JavaScript.logic_compare=function(n){var o={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[n.getFieldValue("OP")],s="=="==o||"!="==o?t.JavaScript.ORDER_EQUALITY:t.JavaScript.ORDER_RELATIONAL;return[(t.JavaScript.valueToCode(n,"A",s)||"0")+" "+o+" "+(n=t.JavaScript.valueToCode(n,"B",s)||"0"),s]},t.JavaScript.logic_operation=function(n){var o="AND"==n.getFieldValue("OP")?"&&":"||",s="&&"==o?t.JavaScript.ORDER_LOGICAL_AND:t.JavaScript.ORDER_LOGICAL_OR,c=t.JavaScript.valueToCode(n,"A",s);if(n=t.JavaScript.valueToCode(n,"B",s),c||n){var _="&&"==o?"true":"false";c||(c=_),n||(n=_)}else n=c="false";return[c+" "+o+" "+n,s]},t.JavaScript.logic_negate=function(n){var o=t.JavaScript.ORDER_LOGICAL_NOT;return["!"+(t.JavaScript.valueToCode(n,"BOOL",o)||"true"),o]},t.JavaScript.logic_boolean=function(n){return["TRUE"==n.getFieldValue("BOOL")?"true":"false",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_null=function(n){return["null",t.JavaScript.ORDER_ATOMIC]},t.JavaScript.logic_ternary=function(n){return[(t.JavaScript.valueToCode(n,"IF",t.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(t.JavaScript.valueToCode(n,"THEN",t.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(n=t.JavaScript.valueToCode(n,"ELSE",t.JavaScript.ORDER_CONDITIONAL)||"null"),t.JavaScript.ORDER_CONDITIONAL]},t.JavaScript.loops={},t.JavaScript.controls_repeat_ext=function(n){var o=n.getField("TIMES")?String(Number(n.getFieldValue("TIMES"))):t.JavaScript.valueToCode(n,"TIMES",t.JavaScript.ORDER_ASSIGNMENT)||"0",s=t.JavaScript.statementToCode(n,"DO");s=t.JavaScript.addLoopTrap(s,n),n="";var c=t.JavaScript.nameDB_.getDistinctName("count",t.VARIABLE_CATEGORY_NAME),_=o;return o.match(/^\w+$/)||t.isNumber(o)||(n+="var "+(_=t.JavaScript.nameDB_.getDistinctName("repeat_end",t.VARIABLE_CATEGORY_NAME))+" = "+o+";\n"),n+"for (var "+c+" = 0; "+c+" < "+_+"; "+c+"++) {\n"+s+"}\n"},t.JavaScript.controls_repeat=t.JavaScript.controls_repeat_ext,t.JavaScript.controls_whileUntil=function(n){var o="UNTIL"==n.getFieldValue("MODE"),s=t.JavaScript.valueToCode(n,"BOOL",o?t.JavaScript.ORDER_LOGICAL_NOT:t.JavaScript.ORDER_NONE)||"false",c=t.JavaScript.statementToCode(n,"DO");return o&&(s="!"+s),"while ("+s+") {\n"+(c=t.JavaScript.addLoopTrap(c,n))+"}\n"},t.JavaScript.controls_for=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_ASSIGNMENT)||"0",c=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_ASSIGNMENT)||"0",_=t.JavaScript.valueToCode(n,"BY",t.JavaScript.ORDER_ASSIGNMENT)||"1",w=t.JavaScript.statementToCode(n,"DO");if(w=t.JavaScript.addLoopTrap(w,n),t.isNumber(s)&&t.isNumber(c)&&t.isNumber(_)){var M=Number(s)<=Number(c);n="for ("+o+" = "+s+"; "+o+(M?" <= ":" >= ")+c+"; "+o,n=(1==(o=Math.abs(Number(_)))?n+(M?"++":"--"):n+(M?" += ":" -= ")+o)+") {\n"+w+"}\n"}else n="",M=s,s.match(/^\w+$/)||t.isNumber(s)||(n+="var "+(M=t.JavaScript.nameDB_.getDistinctName(o+"_start",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),s=c,c.match(/^\w+$/)||t.isNumber(c)||(n+="var "+(s=t.JavaScript.nameDB_.getDistinctName(o+"_end",t.VARIABLE_CATEGORY_NAME))+" = "+c+";\n"),n+="var "+(c=t.JavaScript.nameDB_.getDistinctName(o+"_inc",t.VARIABLE_CATEGORY_NAME))+" = ",n=(n=t.isNumber(_)?n+(Math.abs(_)+";\n"):n+"Math.abs("+_+");\n")+"if ("+M+" > "+s+") {\n"+(t.JavaScript.INDENT+c)+" = -"+c+";\n",n+="}\n",n+="for ("+o+" = "+M+"; "+c+" >= 0 ? "+o+" <= "+s+" : "+o+" >= "+s+"; "+o+" += "+c+") {\n"+w+"}\n";return n},t.JavaScript.controls_forEach=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),s=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_ASSIGNMENT)||"[]",c=t.JavaScript.statementToCode(n,"DO");c=t.JavaScript.addLoopTrap(c,n),n="";var _=s;return s.match(/^\w+$/)||(n+="var "+(_=t.JavaScript.nameDB_.getDistinctName(o+"_list",t.VARIABLE_CATEGORY_NAME))+" = "+s+";\n"),n+"for (var "+(s=t.JavaScript.nameDB_.getDistinctName(o+"_index",t.VARIABLE_CATEGORY_NAME))+" in "+_+") {\n"+(c=t.JavaScript.INDENT+o+" = "+_+"["+s+"];\n"+c)+"}\n"},t.JavaScript.controls_flow_statements=function(n){var o="";if(t.JavaScript.STATEMENT_PREFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),t.JavaScript.STATEMENT_PREFIX){var s=t.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(n);s&&!s.suppressPrefixSuffix&&(o+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,s))}switch(n.getFieldValue("FLOW")){case"BREAK":return o+"break;\n";case"CONTINUE":return o+"continue;\n"}throw Error("Unknown flow statement.")},t.JavaScript.math={},t.JavaScript.math_number=function(n){return[n=Number(n.getFieldValue("NUM")),0<=n?t.JavaScript.ORDER_ATOMIC:t.JavaScript.ORDER_UNARY_NEGATION]},t.JavaScript.math_arithmetic=function(n){var o={ADD:[" + ",t.JavaScript.ORDER_ADDITION],MINUS:[" - ",t.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",t.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",t.JavaScript.ORDER_DIVISION],POWER:[null,t.JavaScript.ORDER_NONE]}[n.getFieldValue("OP")],s=o[0],c=t.JavaScript.valueToCode(n,"A",o=o[1])||"0";return n=t.JavaScript.valueToCode(n,"B",o)||"0",s?[c+s+n,o]:["Math.pow("+c+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_single=function(n){var o=n.getFieldValue("OP");if("NEG"==o)return"-"==(n=t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),["-"+n,t.JavaScript.ORDER_UNARY_NEGATION];switch(n="SIN"==o||"COS"==o||"TAN"==o?t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_DIVISION)||"0":t.JavaScript.valueToCode(n,"NUM",t.JavaScript.ORDER_NONE)||"0",o){case"ABS":var s="Math.abs("+n+")";break;case"ROOT":s="Math.sqrt("+n+")";break;case"LN":s="Math.log("+n+")";break;case"EXP":s="Math.exp("+n+")";break;case"POW10":s="Math.pow(10,"+n+")";break;case"ROUND":s="Math.round("+n+")";break;case"ROUNDUP":s="Math.ceil("+n+")";break;case"ROUNDDOWN":s="Math.floor("+n+")";break;case"SIN":s="Math.sin("+n+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+n+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+n+" / 180 * Math.PI)"}if(s)return[s,t.JavaScript.ORDER_FUNCTION_CALL];switch(o){case"LOG10":s="Math.log("+n+") / Math.log(10)";break;case"ASIN":s="Math.asin("+n+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+n+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+n+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+o)}return[s,t.JavaScript.ORDER_DIVISION]},t.JavaScript.math_constant=function(n){return{PI:["Math.PI",t.JavaScript.ORDER_MEMBER],E:["Math.E",t.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",t.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",t.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",t.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",t.JavaScript.ORDER_ATOMIC]}[n.getFieldValue("CONSTANT")]},t.JavaScript.math_number_property=function(n){var o=t.JavaScript.valueToCode(n,"NUMBER_TO_CHECK",t.JavaScript.ORDER_MODULUS)||"0",s=n.getFieldValue("PROPERTY");if("PRIME"==s)return[t.JavaScript.provideFunction_("mathIsPrime",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+o+")",t.JavaScript.ORDER_FUNCTION_CALL];switch(s){case"EVEN":var c=o+" % 2 == 0";break;case"ODD":c=o+" % 2 == 1";break;case"WHOLE":c=o+" % 1 == 0";break;case"POSITIVE":c=o+" > 0";break;case"NEGATIVE":c=o+" < 0";break;case"DIVISIBLE_BY":c=o+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[c,t.JavaScript.ORDER_EQUALITY]},t.JavaScript.math_change=function(n){var o=t.JavaScript.valueToCode(n,"DELTA",t.JavaScript.ORDER_ADDITION)||"0";return(n=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME))+" = (typeof "+n+" == 'number' ? "+n+" : 0) + "+o+";\n"},t.JavaScript.math_round=t.JavaScript.math_single,t.JavaScript.math_trig=t.JavaScript.math_single,t.JavaScript.math_on_list=function(n){var o=n.getFieldValue("OP");switch(o){case"SUM":n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_MEMBER)||"[]",n+=".reduce(function(x, y) {return x + y;})";break;case"MIN":n="Math.min.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":n="Math.max.apply(null, "+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":n=(o=t.JavaScript.provideFunction_("mathMean",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":n=(o=t.JavaScript.provideFunction_("mathMedian",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":n=(o=t.JavaScript.provideFunction_("mathModes",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":n=(o=t.JavaScript.provideFunction_("mathStandardDeviation",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":n=(o=t.JavaScript.provideFunction_("mathRandomList",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(n=t.JavaScript.valueToCode(n,"LIST",t.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+o)}return[n,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_modulo=function(n){return[(t.JavaScript.valueToCode(n,"DIVIDEND",t.JavaScript.ORDER_MODULUS)||"0")+" % "+(n=t.JavaScript.valueToCode(n,"DIVISOR",t.JavaScript.ORDER_MODULUS)||"0"),t.JavaScript.ORDER_MODULUS]},t.JavaScript.math_constrain=function(n){return["Math.min(Math.max("+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"0")+", "+(t.JavaScript.valueToCode(n,"LOW",t.JavaScript.ORDER_NONE)||"0")+"), "+(n=t.JavaScript.valueToCode(n,"HIGH",t.JavaScript.ORDER_NONE)||"Infinity")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_int=function(n){var o=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"0";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"0",[t.JavaScript.provideFunction_("mathRandomInt",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_random_float=function(n){return["Math.random()",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.math_atan2=function(n){var o=t.JavaScript.valueToCode(n,"X",t.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(t.JavaScript.valueToCode(n,"Y",t.JavaScript.ORDER_NONE)||"0")+", "+o+") / Math.PI * 180",t.JavaScript.ORDER_DIVISION]},t.JavaScript.procedures={},t.JavaScript.procedures_defreturn=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s="";t.JavaScript.STATEMENT_PREFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_PREFIX,n)),t.JavaScript.STATEMENT_SUFFIX&&(s+=t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n)),s&&(s=t.JavaScript.prefixLines(s,t.JavaScript.INDENT));var c="";t.JavaScript.INFINITE_LOOP_TRAP&&(c=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.INFINITE_LOOP_TRAP,n),t.JavaScript.INDENT));var _=t.JavaScript.statementToCode(n,"STACK"),w=t.JavaScript.valueToCode(n,"RETURN",t.JavaScript.ORDER_NONE)||"",M="";_&&w&&(M=s),w&&(w=t.JavaScript.INDENT+"return "+w+";\n");for(var U=[],V=n.getVars(),H=0;H<V.length;H++)U[H]=t.JavaScript.nameDB_.getName(V[H],t.VARIABLE_CATEGORY_NAME);return s="function "+o+"("+U.join(", ")+") {\n"+s+c+_+M+w+"}",s=t.JavaScript.scrub_(n,s),t.JavaScript.definitions_["%"+o]=s,null},t.JavaScript.procedures_defnoreturn=t.JavaScript.procedures_defreturn,t.JavaScript.procedures_callreturn=function(n){for(var o=t.JavaScript.nameDB_.getName(n.getFieldValue("NAME"),t.PROCEDURE_CATEGORY_NAME),s=[],c=n.getVars(),_=0;_<c.length;_++)s[_]=t.JavaScript.valueToCode(n,"ARG"+_,t.JavaScript.ORDER_NONE)||"null";return[o+"("+s.join(", ")+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.procedures_callnoreturn=function(n){return t.JavaScript.procedures_callreturn(n)[0]+";\n"},t.JavaScript.procedures_ifreturn=function(n){var o="if ("+(t.JavaScript.valueToCode(n,"CONDITION",t.JavaScript.ORDER_NONE)||"false")+") {\n";return t.JavaScript.STATEMENT_SUFFIX&&(o+=t.JavaScript.prefixLines(t.JavaScript.injectId(t.JavaScript.STATEMENT_SUFFIX,n),t.JavaScript.INDENT)),n.hasReturnValue_?(n=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_NONE)||"null",o+=t.JavaScript.INDENT+"return "+n+";\n"):o+=t.JavaScript.INDENT+"return;\n",o+"}\n"},t.JavaScript.texts={},t.JavaScript.text=function(n){return[t.JavaScript.quote_(n.getFieldValue("TEXT")),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.text_multiline=function(n){var o=-1!=(n=t.JavaScript.multiline_quote_(n.getFieldValue("TEXT"))).indexOf("+")?t.JavaScript.ORDER_ADDITION:t.JavaScript.ORDER_ATOMIC;return[n,o]},t.JavaScript.text.forceString_=function(n){return t.JavaScript.text.forceString_.strRegExp.test(n)?[n,t.JavaScript.ORDER_ATOMIC]:["String("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,t.JavaScript.text_join=function(n){switch(n.itemCount_){case 0:return["''",t.JavaScript.ORDER_ATOMIC];case 1:return n=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''",t.JavaScript.text.forceString_(n);case 2:var o=t.JavaScript.valueToCode(n,"ADD0",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"ADD1",t.JavaScript.ORDER_NONE)||"''",[n=t.JavaScript.text.forceString_(o)[0]+" + "+t.JavaScript.text.forceString_(n)[0],t.JavaScript.ORDER_ADDITION];default:o=Array(n.itemCount_);for(var s=0;s<n.itemCount_;s++)o[s]=t.JavaScript.valueToCode(n,"ADD"+s,t.JavaScript.ORDER_NONE)||"''";return[n="["+o.join(",")+"].join('')",t.JavaScript.ORDER_FUNCTION_CALL]}},t.JavaScript.text_append=function(n){var o=t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME);return n=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",o+" += "+t.JavaScript.text.forceString_(n)[0]+";\n"},t.JavaScript.text_length=function(n){return[(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_MEMBER]},t.JavaScript.text_isEmpty=function(n){return["!"+(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+".length",t.JavaScript.ORDER_LOGICAL_NOT]},t.JavaScript.text_indexOf=function(n){var o="FIRST"==n.getFieldValue("END")?"indexOf":"lastIndexOf",s=t.JavaScript.valueToCode(n,"FIND",t.JavaScript.ORDER_NONE)||"''";return o=(t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_MEMBER)||"''")+"."+o+"("+s+")",n.workspace.options.oneBasedIndex?[o+" + 1",t.JavaScript.ORDER_ADDITION]:[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_charAt=function(n){var o=n.getFieldValue("WHERE")||"FROM_START",s=t.JavaScript.valueToCode(n,"VALUE","RANDOM"==o?t.JavaScript.ORDER_NONE:t.JavaScript.ORDER_MEMBER)||"''";switch(o){case"FIRST":return[s+".charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[s+".slice(-1)",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[s+".charAt("+(n=t.JavaScript.getAdjusted(n,"AT"))+")",t.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[s+".slice("+(n=t.JavaScript.getAdjusted(n,"AT",1,!0))+").charAt(0)",t.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[t.JavaScript.provideFunction_("textRandomLetter",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+s+")",t.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},t.JavaScript.text.getIndex_=function(n,o,s){return"FIRST"==o?"0":"FROM_END"==o?n+".length - 1 - "+s:"LAST"==o?n+".length - 1":s},t.JavaScript.text_getSubstring=function(n){var o=n.getFieldValue("WHERE1"),s=n.getFieldValue("WHERE2"),c="FROM_END"!=o&&"LAST"!=o&&"FROM_END"!=s&&"LAST"!=s,_=t.JavaScript.valueToCode(n,"STRING",c?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''";if("FIRST"==o&&"LAST"==s)return[_,t.JavaScript.ORDER_NONE];if(_.match(/^'?\w+'?$/)||c){switch(o){case"FROM_START":c=t.JavaScript.getAdjusted(n,"AT1");break;case"FROM_END":c=_+".length - "+(c=t.JavaScript.getAdjusted(n,"AT1",1,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":c="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(s){case"FROM_START":n=t.JavaScript.getAdjusted(n,"AT2",1);break;case"FROM_END":n=_+".length - "+(n=t.JavaScript.getAdjusted(n,"AT2",0,!1,t.JavaScript.ORDER_SUBTRACTION));break;case"LAST":n=_+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}o=_+".slice("+c+", "+n+")"}else{c=t.JavaScript.getAdjusted(n,"AT1"),n=t.JavaScript.getAdjusted(n,"AT2");var w=t.JavaScript.text.getIndex_,M={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};o=t.JavaScript.provideFunction_("subsequence"+M[o]+M[s],["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==o||"FROM_START"==o?", at1":"")+("FROM_END"==s||"FROM_START"==s?", at2":"")+") {","  var start = "+w("sequence",o,"at1")+";","  var end = "+w("sequence",s,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+_+("FROM_END"==o||"FROM_START"==o?", "+c:"")+("FROM_END"==s||"FROM_START"==s?", "+n:"")+")"}return[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_changeCase=function(n){var o={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[n.getFieldValue("CASE")];return n=t.JavaScript.valueToCode(n,"TEXT",o?t.JavaScript.ORDER_MEMBER:t.JavaScript.ORDER_NONE)||"''",[o?n+o:t.JavaScript.provideFunction_("textToTitleCase",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_trim=function(n){var o={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[n.getFieldValue("MODE")];return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_print=function(n){return"window.alert("+(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+");\n"},t.JavaScript.text_prompt_ext=function(n){var o="window.prompt("+(n.getField("TEXT")?t.JavaScript.quote_(n.getFieldValue("TEXT")):t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==n.getFieldValue("TYPE")&&(o="Number("+o+")"),[o,t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_prompt=t.JavaScript.text_prompt_ext,t.JavaScript.text_count=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"SUB",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textCount",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+o+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_replace=function(n){var o=t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_NONE)||"''",s=t.JavaScript.valueToCode(n,"FROM",t.JavaScript.ORDER_NONE)||"''";return n=t.JavaScript.valueToCode(n,"TO",t.JavaScript.ORDER_NONE)||"''",[t.JavaScript.provideFunction_("textReplace",["function "+t.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+o+", "+s+", "+n+")",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.text_reverse=function(n){return[(t.JavaScript.valueToCode(n,"TEXT",t.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",t.JavaScript.ORDER_FUNCTION_CALL]},t.JavaScript.variables={},t.JavaScript.variables_get=function(n){return[t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME),t.JavaScript.ORDER_ATOMIC]},t.JavaScript.variables_set=function(n){var o=t.JavaScript.valueToCode(n,"VALUE",t.JavaScript.ORDER_ASSIGNMENT)||"0";return t.JavaScript.nameDB_.getName(n.getFieldValue("VAR"),t.VARIABLE_CATEGORY_NAME)+" = "+o+";\n"},t.JavaScript.variablesDynamic={},t.JavaScript.variables_get_dynamic=t.JavaScript.variables_get,t.JavaScript.variables_set_dynamic=t.JavaScript.variables_set,t.JavaScript}.apply(B,p))&&(k.exports=e)},32998:function(k,B,f){var p,e;p=[f(3731)],void 0!==(e=function(t){return(t={Msg:{}}).Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.IOS_CANCEL="Cancel",t.Msg.IOS_ERROR="Error",t.Msg.IOS_OK="OK",t.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",t.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",t.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",t.Msg.IOS_PROCEDURES_INPUTS="INPUTS",t.Msg.IOS_VARIABLES_ADD_BUTTON="Add",t.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",t.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",t.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",t.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",t.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="\xf7",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_HELPURL=t.Msg.LISTS_INDEX_OF_HELPURL,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.MATH_HUE="230",t.Msg.LOOPS_HUE="120",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.VARIABLES_HUE="330",t.Msg.TEXTS_HUE="160",t.Msg.PROCEDURES_HUE="290",t.Msg.COLOUR_HUE="20",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg}.apply(B,p))&&(k.exports=e)},26692:k=>{!function(){"use strict";k.exports=function(f){return(f instanceof Buffer?f:Buffer.from(f.toString(),"binary")).toString("base64")}}()},4640:(k,B,f)=>{"use strict";var b=f(4320),p=f(23330),e=p(b("String.prototype.indexOf"));k.exports=function(n,o){var s=b(n,!!o);return"function"==typeof s&&e(n,".prototype.")>-1?p(s):s}},23330:(k,B,f)=>{"use strict";var b=f(21113),p=f(4320),e=p("%Function.prototype.apply%"),t=p("%Function.prototype.call%"),n=p("%Reflect.apply%",!0)||b.call(t,e),o=p("%Object.getOwnPropertyDescriptor%",!0),s=p("%Object.defineProperty%",!0),c=p("%Math.max%");if(s)try{s({},"a",{value:1})}catch(w){s=null}k.exports=function(M){var U=n(b,t,arguments);if(o&&s){var V=o(U,"length");V.configurable&&s(U,"length",{value:1+c(0,M.length-(arguments.length-1))})}return U};var _=function(){return n(b,e,arguments)};s?s(k.exports,"apply",{value:_}):k.exports.apply=_},76216:(k,B)=>{"use strict";B.parse=function(s,c){if("string"!=typeof s)throw new TypeError("argument str must be a string");for(var _={},w=c||{},M=s.split(p),U=w.decode||f,V=0;V<M.length;V++){var H=M[V],$=H.indexOf("=");if(!($<0)){var pt=H.substr(0,$).trim(),nt=H.substr(++$,H.length).trim();'"'==nt[0]&&(nt=nt.slice(1,-1)),null==_[pt]&&(_[pt]=o(nt,U))}}return _},B.serialize=function(s,c,_){var w=_||{},M=w.encode||b;if("function"!=typeof M)throw new TypeError("option encode is invalid");if(!e.test(s))throw new TypeError("argument name is invalid");var U=M(c);if(U&&!e.test(U))throw new TypeError("argument val is invalid");var V=s+"="+U;if(null!=w.maxAge){var H=w.maxAge-0;if(isNaN(H)||!isFinite(H))throw new TypeError("option maxAge is invalid");V+="; Max-Age="+Math.floor(H)}if(w.domain){if(!e.test(w.domain))throw new TypeError("option domain is invalid");V+="; Domain="+w.domain}if(w.path){if(!e.test(w.path))throw new TypeError("option path is invalid");V+="; Path="+w.path}if(w.expires){if("function"!=typeof w.expires.toUTCString)throw new TypeError("option expires is invalid");V+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(V+="; HttpOnly"),w.secure&&(V+="; Secure"),w.sameSite)switch("string"==typeof w.sameSite?w.sameSite.toLowerCase():w.sameSite){case!0:V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"strict":V+="; SameSite=Strict";break;case"none":V+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return V};var f=decodeURIComponent,b=encodeURIComponent,p=/; */,e=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(s,c){try{return c(s)}catch(_){return s}}},82344:(k,B,f)=>{f(21514),f(72190);var b=f(52457);k.exports=b.Array.from},12557:(k,B,f)=>{f(99025);var b=f(52457);k.exports=b.Array.isArray},87119:(k,B,f)=>{f(30933);var b=f(6747);k.exports=b("Array").concat},87183:(k,B,f)=>{f(23483),f(79445);var b=f(6747);k.exports=b("Array").entries},94154:(k,B,f)=>{f(24572);var b=f(6747);k.exports=b("Array").filter},5599:(k,B,f)=>{f(40655);var b=f(6747);k.exports=b("Array").find},65009:(k,B,f)=>{f(91762);var b=f(6747);k.exports=b("Array").forEach},40844:(k,B,f)=>{f(38582);var b=f(6747);k.exports=b("Array").includes},86470:(k,B,f)=>{f(13950);var b=f(6747);k.exports=b("Array").indexOf},57818:(k,B,f)=>{f(78713);var b=f(6747);k.exports=b("Array").map},96918:(k,B,f)=>{f(94775);var b=f(6747);k.exports=b("Array").slice},74727:(k,B,f)=>{f(8195);var b=f(6747);k.exports=b("Array").splice},98088:(k,B,f)=>{f(23483),f(21514);var b=f(50806);k.exports=b},48023:(k,B,f)=>{var b=f(61517),p=f(87119),e=Array.prototype;k.exports=function(t){var n=t.concat;return t===e||b(e,t)&&n===e.concat?p:n}},8425:(k,B,f)=>{var b=f(61517),p=f(94154),e=Array.prototype;k.exports=function(t){var n=t.filter;return t===e||b(e,t)&&n===e.filter?p:n}},61008:(k,B,f)=>{var b=f(61517),p=f(5599),e=Array.prototype;k.exports=function(t){var n=t.find;return t===e||b(e,t)&&n===e.find?p:n}},18583:(k,B,f)=>{var b=f(61517),p=f(40844),e=f(96040),t=Array.prototype,n=String.prototype;k.exports=function(o){var s=o.includes;return o===t||b(t,o)&&s===t.includes?p:"string"==typeof o||o===n||b(n,o)&&s===n.includes?e:s}},84676:(k,B,f)=>{var b=f(61517),p=f(86470),e=Array.prototype;k.exports=function(t){var n=t.indexOf;return t===e||b(e,t)&&n===e.indexOf?p:n}},59032:(k,B,f)=>{var b=f(61517),p=f(57818),e=Array.prototype;k.exports=function(t){var n=t.map;return t===e||b(e,t)&&n===e.map?p:n}},70660:(k,B,f)=>{var b=f(61517),p=f(96918),e=Array.prototype;k.exports=function(t){var n=t.slice;return t===e||b(e,t)&&n===e.slice?p:n}},12256:(k,B,f)=>{var b=f(61517),p=f(74727),e=Array.prototype;k.exports=function(t){var n=t.splice;return t===e||b(e,t)&&n===e.splice?p:n}},14475:(k,B,f)=>{var b=f(61517),p=f(91293),e=String.prototype;k.exports=function(t){var n=t.startsWith;return"string"==typeof t||t===e||b(e,t)&&n===e.startsWith?p:n}},98711:(k,B,f)=>{f(35249);var b=f(52457),p=f(66864);b.JSON||(b.JSON={stringify:JSON.stringify}),k.exports=function(t,n,o){return p(b.JSON.stringify,null,arguments)}},98169:(k,B,f)=>{f(41423);var b=f(52457);k.exports=b.Object.assign},31916:(k,B,f)=>{f(81892);var p=f(52457).Object,e=k.exports=function(n,o){return p.defineProperties(n,o)};p.defineProperties.sham&&(e.sham=!0)},47429:(k,B,f)=>{f(80247);var p=f(52457).Object,e=k.exports=function(n,o,s){return p.defineProperty(n,o,s)};p.defineProperty.sham&&(e.sham=!0)},2487:(k,B,f)=>{f(22700);var b=f(52457);k.exports=b.Object.entries},77626:(k,B,f)=>{f(36342);var p=f(52457).Object,e=k.exports=function(n,o){return p.getOwnPropertyDescriptor(n,o)};p.getOwnPropertyDescriptor.sham&&(e.sham=!0)},81043:(k,B,f)=>{f(4878);var b=f(52457);k.exports=b.Object.getOwnPropertyDescriptors},98838:(k,B,f)=>{f(57479);var b=f(52457);k.exports=b.Object.getOwnPropertySymbols},63977:(k,B,f)=>{f(21165);var b=f(52457);k.exports=b.Object.keys},14099:(k,B,f)=>{f(10153),f(23483),f(79445),f(56143),f(35503),f(54677),f(13013),f(21514);var b=f(52457);k.exports=b.Promise},96040:(k,B,f)=>{f(53030);var b=f(6747);k.exports=b("String").includes},91293:(k,B,f)=>{f(35828);var b=f(6747);k.exports=b("String").startsWith},1816:(k,B,f)=>{f(30933),f(79445),f(57479),f(39334),f(27014),f(57071),f(58666),f(15816),f(14740),f(20950),f(76499),f(94696),f(72105),f(5247),f(53825),f(22529),f(90591),f(2757),f(58956),f(32257);var b=f(52457);k.exports=b.Symbol},64776:(k,B,f)=>{f(23483),f(79445),f(21514),f(15816);var b=f(79182);k.exports=b.f("iterator")},65988:(k,B,f)=>{f(23483),f(79445),f(26054);var b=f(52457);k.exports=b.WeakMap},13770:(k,B,f)=>{var b=f(82422);k.exports=b},66715:(k,B,f)=>{var b=f(30260);k.exports=b},46481:(k,B,f)=>{var b=f(31216);k.exports=b},81788:(k,B,f)=>{var b=f(30376);k.exports=b},38637:(k,B,f)=>{var b=f(88334);k.exports=b},48414:(k,B,f)=>{var b=f(68379);k.exports=b},30595:(k,B,f)=>{var b=f(42905);k.exports=b},83930:(k,B,f)=>{var b=f(31545);k.exports=b},41076:(k,B,f)=>{var b=f(39565);k.exports=b},27109:(k,B,f)=>{var b=f(63122);k.exports=b},35841:(k,B,f)=>{var b=f(76650);k.exports=b},5643:(k,B,f)=>{var b=f(51266);k.exports=b},50606:(k,B,f)=>{var b=f(69265);k.exports=b},98222:(k,B,f)=>{var b=f(64781);f(22977),f(17724),f(79178),f(50162),k.exports=b},16487:(k,B,f)=>{var b=f(56219);f(83066),f(40338),f(23560),f(61546),f(70214),f(96506),f(82356),k.exports=b},9735:(k,B,f)=>{var b=f(78921);k.exports=b},6567:(k,B,f)=>{var b=f(74258),p=f(14563),e=f(98217),t=b.TypeError;k.exports=function(n){if(p(n))return n;throw t(e(n)+" is not a function")}},6767:(k,B,f)=>{var b=f(74258),p=f(2817),e=f(98217),t=b.TypeError;k.exports=function(n){if(p(n))return n;throw t(e(n)+" is not a constructor")}},67553:(k,B,f)=>{var b=f(74258),p=f(14563),e=b.String,t=b.TypeError;k.exports=function(n){if("object"==typeof n||p(n))return n;throw t("Can't set "+e(n)+" as a prototype")}},74159:k=>{k.exports=function(){}},7561:(k,B,f)=>{var b=f(74258),p=f(61517),e=b.TypeError;k.exports=function(t,n){if(p(n,t))return t;throw e("Incorrect invocation")}},49403:(k,B,f)=>{var b=f(74258),p=f(9616),e=b.String,t=b.TypeError;k.exports=function(n){if(p(n))return n;throw t(e(n)+" is not an object")}},39749:(k,B,f)=>{var b=f(77054);k.exports=b(function(){if("function"==typeof ArrayBuffer){var p=new ArrayBuffer(8);Object.isExtensible(p)&&Object.defineProperty(p,"a",{value:8})}})},45900:(k,B,f)=>{"use strict";var b=f(93949).forEach,e=f(95750)("forEach");k.exports=e?[].forEach:function(n){return b(this,n,arguments.length>1?arguments[1]:void 0)}},75058:(k,B,f)=>{"use strict";var b=f(74258),p=f(94640),e=f(45439),t=f(34972),n=f(99985),o=f(44821),s=f(2817),c=f(25979),_=f(13493),w=f(72442),M=f(50806),U=b.Array;k.exports=function(H){var $=t(H),pt=s(this),nt=arguments.length,st=nt>1?arguments[1]:void 0,Ct=void 0!==st;Ct&&(st=p(st,nt>2?arguments[2]:void 0));var ut,tt,lt,ot,Lt,at,xt=M($),yt=0;if(!xt||this==U&&o(xt))for(ut=c($),tt=pt?new this(ut):U(ut);ut>yt;yt++)at=Ct?st($[yt],yt):$[yt],_(tt,yt,at);else for(Lt=(ot=w($,xt)).next,tt=pt?new this:[];!(lt=e(Lt,ot)).done;yt++)at=Ct?n(ot,st,[lt.value,yt],!0):lt.value,_(tt,yt,at);return tt.length=yt,tt}},8440:(k,B,f)=>{var b=f(73684),p=f(69723),e=f(25979),t=function(n){return function(o,s,c){var U,_=b(o),w=e(_),M=p(c,w);if(n&&s!=s){for(;w>M;)if((U=_[M++])!=U)return!0}else for(;w>M;M++)if((n||M in _)&&_[M]===s)return n||M||0;return!n&&-1}};k.exports={includes:t(!0),indexOf:t(!1)}},93949:(k,B,f)=>{var b=f(94640),p=f(94800),e=f(8317),t=f(34972),n=f(25979),o=f(47137),s=p([].push),c=function(_){var w=1==_,M=2==_,U=3==_,V=4==_,H=6==_,$=7==_,pt=5==_||H;return function(nt,st,Ct,xt){for(var dt,it,yt=t(nt),ut=e(yt),tt=b(st,Ct),lt=n(ut),ot=0,Lt=xt||o,at=w?Lt(nt,lt):M||$?Lt(nt,0):void 0;lt>ot;ot++)if((pt||ot in ut)&&(it=tt(dt=ut[ot],ot,yt),_))if(w)at[ot]=it;else if(it)switch(_){case 3:return!0;case 5:return dt;case 6:return ot;case 2:s(at,dt)}else switch(_){case 4:return!1;case 7:s(at,dt)}return H?-1:U||V?V:at}};k.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},54647:(k,B,f)=>{var b=f(77054),p=f(35009),e=f(97502),t=p("species");k.exports=function(n){return e>=51||!b(function(){var o=[];return(o.constructor={})[t]=function(){return{foo:1}},1!==o[n](Boolean).foo})}},95750:(k,B,f)=>{"use strict";var b=f(77054);k.exports=function(p,e){var t=[][p];return!!t&&b(function(){t.call(null,e||function(){throw 1},1)})}},58467:(k,B,f)=>{var b=f(74258),p=f(69723),e=f(25979),t=f(13493),n=b.Array,o=Math.max;k.exports=function(s,c,_){for(var w=e(s),M=p(c,w),U=p(void 0===_?w:_,w),V=n(o(U-M,0)),H=0;M<U;M++,H++)t(V,H,s[M]);return V.length=H,V}},64716:(k,B,f)=>{var b=f(94800);k.exports=b([].slice)},53904:(k,B,f)=>{var b=f(58467),p=Math.floor,e=function(o,s){var c=o.length,_=p(c/2);return c<8?t(o,s):n(o,e(b(o,0,_),s),e(b(o,_),s),s)},t=function(o,s){for(var w,M,c=o.length,_=1;_<c;){for(M=_,w=o[_];M&&s(o[M-1],w)>0;)o[M]=o[--M];M!==_++&&(o[M]=w)}return o},n=function(o,s,c,_){for(var w=s.length,M=c.length,U=0,V=0;U<w||V<M;)o[U+V]=U<w&&V<M?_(s[U],c[V])<=0?s[U++]:c[V++]:U<w?s[U++]:c[V++];return o};k.exports=e},83758:(k,B,f)=>{var b=f(74258),p=f(62845),e=f(2817),t=f(9616),o=f(35009)("species"),s=b.Array;k.exports=function(c){var _;return p(c)&&(e(_=c.constructor)&&(_===s||p(_.prototype))||t(_)&&null===(_=_[o]))&&(_=void 0),void 0===_?s:_}},47137:(k,B,f)=>{var b=f(83758);k.exports=function(p,e){return new(b(p))(0===e?0:e)}},99985:(k,B,f)=>{var b=f(49403),p=f(26151);k.exports=function(e,t,n,o){try{return o?t(b(n)[0],n[1]):t(n)}catch(s){p(e,"throw",s)}}},85306:(k,B,f)=>{var p=f(35009)("iterator"),e=!1;try{var t=0,n={next:function(){return{done:!!t++}},return:function(){e=!0}};n[p]=function(){return this},Array.from(n,function(){throw 2})}catch(o){}k.exports=function(o,s){if(!s&&!e)return!1;var c=!1;try{var _={};_[p]=function(){return{next:function(){return{done:c=!0}}}},o(_)}catch(w){}return c}},14592:(k,B,f)=>{var b=f(94800),p=b({}.toString),e=b("".slice);k.exports=function(t){return e(p(t),8,-1)}},27870:(k,B,f)=>{var b=f(74258),p=f(68118),e=f(14563),t=f(14592),o=f(35009)("toStringTag"),s=b.Object,c="Arguments"==t(function(){return arguments}());k.exports=p?t:function(w){var M,U,V;return void 0===w?"Undefined":null===w?"Null":"string"==typeof(U=function(w,M){try{return w[M]}catch(U){}}(M=s(w),o))?U:c?t(M):"Object"==(V=t(M))&&e(M.callee)?"Arguments":V}},56510:(k,B,f)=>{var b=f(94800),p=f(58467),e=b("".replace),t=b("".split),n=b([].join),o=String(Error("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(o),_=/@[^\n]*\n/.test(o)&&!/zxcasd/.test(o);k.exports=function(w,M){if("string"!=typeof w)return w;if(c)for(;M--;)w=e(w,s,"");else if(_)return n(p(t(w,"\n"),M),"\n");return w}},82639:(k,B,f)=>{"use strict";var b=f(94800),p=f(32914),e=f(10344).getWeakData,t=f(49403),n=f(9616),o=f(7561),s=f(74266),c=f(93949),_=f(68739),w=f(46053),M=w.set,U=w.getterFor,V=c.find,H=c.findIndex,$=b([].splice),pt=0,nt=function(xt){return xt.frozen||(xt.frozen=new st)},st=function(){this.entries=[]},Ct=function(xt,yt){return V(xt.entries,function(ut){return ut[0]===yt})};st.prototype={get:function(xt){var yt=Ct(this,xt);if(yt)return yt[1]},has:function(xt){return!!Ct(this,xt)},set:function(xt,yt){var ut=Ct(this,xt);ut?ut[1]=yt:this.entries.push([xt,yt])},delete:function(xt){var yt=H(this.entries,function(ut){return ut[0]===xt});return~yt&&$(this.entries,yt,1),!!~yt}},k.exports={getConstructor:function(xt,yt,ut,tt){var lt=xt(function(dt,it){o(dt,ot),M(dt,{type:yt,id:pt++,frozen:void 0}),null!=it&&s(it,dt[tt],{that:dt,AS_ENTRIES:ut})}),ot=lt.prototype,Lt=U(yt),at=function(dt,it,rt){var Gt=Lt(dt),bt=e(t(it),!0);return!0===bt?nt(Gt).set(it,rt):bt[Gt.id]=rt,dt};return p(ot,{delete:function(dt){var it=Lt(this);if(!n(dt))return!1;var rt=e(dt);return!0===rt?nt(it).delete(dt):rt&&_(rt,it.id)&&delete rt[it.id]},has:function(it){var rt=Lt(this);if(!n(it))return!1;var Gt=e(it);return!0===Gt?nt(rt).has(it):Gt&&_(Gt,rt.id)}}),p(ot,ut?{get:function(it){var rt=Lt(this);if(n(it)){var Gt=e(it);return!0===Gt?nt(rt).get(it):Gt?Gt[rt.id]:void 0}},set:function(it,rt){return at(this,it,rt)}}:{add:function(it){return at(this,it,!0)}}),lt}}},53303:(k,B,f)=>{"use strict";var b=f(5327),p=f(74258),e=f(10344),t=f(77054),n=f(94119),o=f(74266),s=f(7561),c=f(14563),_=f(9616),w=f(8144),M=f(35270).f,U=f(93949).forEach,V=f(46876),H=f(46053),$=H.set,pt=H.getterFor;k.exports=function(nt,st,Ct){var Lt,xt=-1!==nt.indexOf("Map"),yt=-1!==nt.indexOf("Weak"),ut=xt?"set":"add",tt=p[nt],lt=tt&&tt.prototype,ot={};if(V&&c(tt)&&(yt||lt.forEach&&!t(function(){(new tt).entries().next()}))){var at=(Lt=st(function(it,rt){$(s(it,at),{type:nt,collection:new tt}),null!=rt&&o(rt,it[ut],{that:it,AS_ENTRIES:xt})})).prototype,dt=pt(nt);U(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(it){var rt="add"==it||"set"==it;it in lt&&(!yt||"clear"!=it)&&n(at,it,function(Gt,bt){var Ht=dt(this).collection;if(!rt&&yt&&!_(Gt))return"get"==it&&void 0;var ce=Ht[it](0===Gt?0:Gt,bt);return rt?this:ce})}),yt||M(at,"size",{configurable:!0,get:function(){return dt(this).collection.size}})}else Lt=Ct.getConstructor(st,nt,xt,ut),e.enable();return w(Lt,nt,!1,!0),ot[nt]=Lt,b({global:!0,forced:!0},ot),yt||Ct.setStrong(Lt,nt,xt),Lt}},53663:(k,B,f)=>{var b=f(68739),p=f(51566),e=f(11841),t=f(35270);k.exports=function(n,o){for(var s=p(o),c=t.f,_=e.f,w=0;w<s.length;w++){var M=s[w];b(n,M)||c(n,M,_(o,M))}}},56850:(k,B,f)=>{var p=f(35009)("match");k.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[p]=!1,"/./"[e](t)}catch(o){}}return!1}},63413:(k,B,f)=>{var b=f(77054);k.exports=!b(function(){function p(){}return p.prototype.constructor=null,Object.getPrototypeOf(new p)!==p.prototype})},94577:(k,B,f)=>{"use strict";var b=f(93489).IteratorPrototype,p=f(66112),e=f(25677),t=f(8144),n=f(76539),o=function(){return this};k.exports=function(s,c,_,w){var M=c+" Iterator";return s.prototype=p(b,{next:e(+!w,_)}),t(s,M,!1,!0),n[M]=o,s}},94119:(k,B,f)=>{var b=f(46876),p=f(35270),e=f(25677);k.exports=b?function(t,n,o){return p.f(t,n,e(1,o))}:function(t,n,o){return t[n]=o,t}},25677:k=>{k.exports=function(B,f){return{enumerable:!(1&B),configurable:!(2&B),writable:!(4&B),value:f}}},13493:(k,B,f)=>{"use strict";var b=f(84061),p=f(35270),e=f(25677);k.exports=function(t,n,o){var s=b(n);s in t?p.f(t,s,e(0,o)):t[s]=o}},63957:(k,B,f)=>{"use strict";var b=f(5327),p=f(45439),e=f(31818),t=f(42515),n=f(14563),o=f(94577),s=f(58826),c=f(3358),_=f(8144),w=f(94119),M=f(73294),U=f(35009),V=f(76539),H=f(93489),$=t.PROPER,pt=t.CONFIGURABLE,nt=H.IteratorPrototype,st=H.BUGGY_SAFARI_ITERATORS,Ct=U("iterator"),yt="values",ut="entries",tt=function(){return this};k.exports=function(lt,ot,Lt,at,dt,it,rt){o(Lt,ot,at);var He,Ke,vi,Gt=function(qe){if(qe===dt&&de)return de;if(!st&&qe in ce)return ce[qe];switch(qe){case"keys":case yt:case ut:return function(){return new Lt(this,qe)}}return function(){return new Lt(this)}},bt=ot+" Iterator",Ht=!1,ce=lt.prototype,Ye=ce[Ct]||ce["@@iterator"]||dt&&ce[dt],de=!st&&Ye||Gt(dt),Be="Array"==ot&&ce.entries||Ye;if(Be&&(He=s(Be.call(new lt)))!==Object.prototype&&He.next&&(!e&&s(He)!==nt&&(c?c(He,nt):n(He[Ct])||M(He,Ct,tt)),_(He,bt,!0,!0),e&&(V[bt]=tt)),$&&dt==yt&&Ye&&Ye.name!==yt&&(!e&&pt?w(ce,"name",yt):(Ht=!0,de=function(){return p(Ye,this)})),dt)if(Ke={values:Gt(yt),keys:it?de:Gt("keys"),entries:Gt(ut)},rt)for(vi in Ke)(st||Ht||!(vi in ce))&&M(ce,vi,Ke[vi]);else b({target:ot,proto:!0,forced:st||Ht},Ke);return(!e||rt)&&ce[Ct]!==de&&M(ce,Ct,de,{name:dt}),V[ot]=de,Ke}},90898:(k,B,f)=>{var b=f(52457),p=f(68739),e=f(79182),t=f(35270).f;k.exports=function(n){var o=b.Symbol||(b.Symbol={});p(o,n)||t(o,n,{value:e.f(n)})}},46876:(k,B,f)=>{var b=f(77054);k.exports=!b(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},2152:(k,B,f)=>{var b=f(74258),p=f(9616),e=b.document,t=p(e)&&p(e.createElement);k.exports=function(n){return t?e.createElement(n):{}}},6379:k=>{k.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},15418:k=>{k.exports="object"==typeof window},4489:(k,B,f)=>{var b=f(80537),p=f(74258);k.exports=/ipad|iphone|ipod/i.test(b)&&void 0!==p.Pebble},78561:(k,B,f)=>{var b=f(80537);k.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(b)},1593:(k,B,f)=>{var b=f(14592),p=f(74258);k.exports="process"==b(p.process)},43522:(k,B,f)=>{var b=f(80537);k.exports=/web0s(?!.*chrome)/i.test(b)},80537:(k,B,f)=>{var b=f(26444);k.exports=b("navigator","userAgent")||""},97502:(k,B,f)=>{var s,c,b=f(74258),p=f(80537),e=b.process,t=b.Deno,n=e&&e.versions||t&&t.version,o=n&&n.v8;o&&(c=(s=o.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&p&&(!(s=p.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=p.match(/Chrome\/(\d+)/))&&(c=+s[1]),k.exports=c},6747:(k,B,f)=>{var b=f(52457);k.exports=function(p){return b[p+"Prototype"]}},59595:k=>{k.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},39581:(k,B,f)=>{var b=f(77054),p=f(25677);k.exports=!b(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",p(1,7)),7!==e.stack)})},5327:(k,B,f)=>{"use strict";var b=f(74258),p=f(66864),e=f(94800),t=f(14563),n=f(11841).f,o=f(74088),s=f(52457),c=f(94640),_=f(94119),w=f(68739),M=function(U){var V=function(H,$,pt){if(this instanceof V){switch(arguments.length){case 0:return new U;case 1:return new U(H);case 2:return new U(H,$)}return new U(H,$,pt)}return p(U,this,arguments)};return V.prototype=U.prototype,V};k.exports=function(U,V){var ut,tt,lt,ot,Lt,at,dt,it,H=U.target,$=U.global,pt=U.stat,nt=U.proto,st=$?b:pt?b[H]:(b[H]||{}).prototype,Ct=$?s:s[H]||_(s,H,{})[H],xt=Ct.prototype;for(lt in V)ut=!o($?lt:H+(pt?".":"#")+lt,U.forced)&&st&&w(st,lt),Lt=Ct[lt],ut&&(at=U.noTargetGet?(it=n(st,lt))&&it.value:st[lt]),ot=ut&&at?at:V[lt],(!ut||typeof Lt!=typeof ot)&&(dt=U.bind&&ut?c(ot,b):U.wrap&&ut?M(ot):nt&&t(ot)?e(ot):ot,(U.sham||ot&&ot.sham||Lt&&Lt.sham)&&_(dt,"sham",!0),_(Ct,lt,dt),nt&&(w(s,tt=H+"Prototype")||_(s,tt,{}),_(s[tt],lt,ot),U.real&&xt&&!xt[lt]&&_(xt,lt,ot)))}},77054:k=>{k.exports=function(B){try{return!!B()}catch(f){return!0}}},7545:(k,B,f)=>{var b=f(77054);k.exports=!b(function(){return Object.isExtensible(Object.preventExtensions({}))})},66864:k=>{var B=Function.prototype,f=B.apply,p=B.call;k.exports="object"==typeof Reflect&&Reflect.apply||(B.bind?p.bind(f):function(){return p.apply(f,arguments)})},94640:(k,B,f)=>{var b=f(94800),p=f(6567),e=b(b.bind);k.exports=function(t,n){return p(t),void 0===n?t:e?e(t,n):function(){return t.apply(n,arguments)}}},45439:k=>{var B=Function.prototype.call;k.exports=B.bind?B.bind(B):function(){return B.apply(B,arguments)}},42515:(k,B,f)=>{var b=f(46876),p=f(68739),e=Function.prototype,t=b&&Object.getOwnPropertyDescriptor,n=p(e,"name"),o=n&&"something"===function(){}.name,s=n&&(!b||b&&t(e,"name").configurable);k.exports={EXISTS:n,PROPER:o,CONFIGURABLE:s}},94800:k=>{var B=Function.prototype,f=B.bind,b=B.call,p=f&&f.bind(b);k.exports=f?function(e){return e&&p(b,e)}:function(e){return e&&function(){return b.apply(e,arguments)}}},26444:(k,B,f)=>{var b=f(52457),p=f(74258),e=f(14563),t=function(n){return e(n)?n:void 0};k.exports=function(n,o){return arguments.length<2?t(b[n])||t(p[n]):b[n]&&b[n][o]||p[n]&&p[n][o]}},50806:(k,B,f)=>{var b=f(27870),p=f(78504),e=f(76539),n=f(35009)("iterator");k.exports=function(o){if(null!=o)return p(o,n)||p(o,"@@iterator")||e[b(o)]}},72442:(k,B,f)=>{var b=f(74258),p=f(45439),e=f(6567),t=f(49403),n=f(98217),o=f(50806),s=b.TypeError;k.exports=function(c,_){var w=arguments.length<2?o(c):_;if(e(w))return t(p(w,c));throw s(n(c)+" is not iterable")}},78504:(k,B,f)=>{var b=f(6567);k.exports=function(p,e){var t=p[e];return null==t?void 0:b(t)}},74258:k=>{var B=function(f){return f&&f.Math==Math&&f};k.exports=B("object"==typeof globalThis&&globalThis)||B("object"==typeof window&&window)||B("object"==typeof self&&self)||B("object"==typeof global&&global)||function(){return this}()||Function("return this")()},68739:(k,B,f)=>{var b=f(94800),p=f(34972),e=b({}.hasOwnProperty);k.exports=Object.hasOwn||function(n,o){return e(p(n),o)}},41933:k=>{k.exports={}},47157:(k,B,f)=>{var b=f(74258);k.exports=function(p,e){var t=b.console;t&&t.error&&(1==arguments.length?t.error(p):t.error(p,e))}},70364:(k,B,f)=>{var b=f(26444);k.exports=b("document","documentElement")},58310:(k,B,f)=>{var b=f(46876),p=f(77054),e=f(2152);k.exports=!b&&!p(function(){return 7!=Object.defineProperty(e("div"),"a",{get:function(){return 7}}).a})},8317:(k,B,f)=>{var b=f(74258),p=f(94800),e=f(77054),t=f(14592),n=b.Object,o=p("".split);k.exports=e(function(){return!n("z").propertyIsEnumerable(0)})?function(s){return"String"==t(s)?o(s,""):n(s)}:n},19656:(k,B,f)=>{var b=f(94800),p=f(14563),e=f(6671),t=b(Function.toString);p(e.inspectSource)||(e.inspectSource=function(n){return t(n)}),k.exports=e.inspectSource},44187:(k,B,f)=>{var b=f(9616),p=f(94119);k.exports=function(e,t){b(t)&&"cause"in t&&p(e,"cause",t.cause)}},10344:(k,B,f)=>{var b=f(5327),p=f(94800),e=f(41933),t=f(9616),n=f(68739),o=f(35270).f,s=f(36336),c=f(25278),_=f(15774),w=f(48110),M=f(7545),U=!1,V=w("meta"),H=0,$=function(yt){o(yt,V,{value:{objectID:"O"+H++,weakData:{}}})},xt=k.exports={enable:function(){xt.enable=function(){},U=!0;var yt=s.f,ut=p([].splice),tt={};tt[V]=1,yt(tt).length&&(s.f=function(lt){for(var ot=yt(lt),Lt=0,at=ot.length;Lt<at;Lt++)if(ot[Lt]===V){ut(ot,Lt,1);break}return ot},b({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},fastKey:function(yt,ut){if(!t(yt))return"symbol"==typeof yt?yt:("string"==typeof yt?"S":"P")+yt;if(!n(yt,V)){if(!_(yt))return"F";if(!ut)return"E";$(yt)}return yt[V].objectID},getWeakData:function(yt,ut){if(!n(yt,V)){if(!_(yt))return!0;if(!ut)return!1;$(yt)}return yt[V].weakData},onFreeze:function(yt){return M&&U&&_(yt)&&!n(yt,V)&&$(yt),yt}};e[V]=!0},46053:(k,B,f)=>{var V,H,$,b=f(66654),p=f(74258),e=f(94800),t=f(9616),n=f(94119),o=f(68739),s=f(6671),c=f(82062),_=f(41933),w="Object already initialized",M=p.TypeError;if(b||s.state){var st=s.state||(s.state=new(0,p.WeakMap)),Ct=e(st.get),xt=e(st.has),yt=e(st.set);V=function(tt,lt){if(xt(st,tt))throw new M(w);return lt.facade=tt,yt(st,tt,lt),lt},H=function(tt){return Ct(st,tt)||{}},$=function(tt){return xt(st,tt)}}else{var ut=c("state");_[ut]=!0,V=function(tt,lt){if(o(tt,ut))throw new M(w);return lt.facade=tt,n(tt,ut,lt),lt},H=function(tt){return o(tt,ut)?tt[ut]:{}},$=function(tt){return o(tt,ut)}}k.exports={set:V,get:H,has:$,enforce:function(tt){return $(tt)?H(tt):V(tt,{})},getterFor:function(tt){return function(lt){var ot;if(!t(lt)||(ot=H(lt)).type!==tt)throw M("Incompatible receiver, "+tt+" required");return ot}}}},44821:(k,B,f)=>{var b=f(35009),p=f(76539),e=b("iterator"),t=Array.prototype;k.exports=function(n){return void 0!==n&&(p.Array===n||t[e]===n)}},62845:(k,B,f)=>{var b=f(14592);k.exports=Array.isArray||function(e){return"Array"==b(e)}},14563:k=>{k.exports=function(B){return"function"==typeof B}},2817:(k,B,f)=>{var b=f(94800),p=f(77054),e=f(14563),t=f(27870),n=f(26444),o=f(19656),s=function(){},c=[],_=n("Reflect","construct"),w=/^\s*(?:class|function)\b/,M=b(w.exec),U=!w.exec(s),V=function($){if(!e($))return!1;try{return _(s,c,$),!0}catch(pt){return!1}};k.exports=!_||p(function(){var $;return V(V.call)||!V(Object)||!V(function(){$=!0})||$})?function($){if(!e($))return!1;switch(t($)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return U||!!M(w,o($))}:V},74088:(k,B,f)=>{var b=f(77054),p=f(14563),e=/#|\.prototype\./,t=function(_,w){var M=o[n(_)];return M==c||M!=s&&(p(w)?b(w):!!w)},n=t.normalize=function(_){return String(_).replace(e,".").toLowerCase()},o=t.data={},s=t.NATIVE="N",c=t.POLYFILL="P";k.exports=t},9616:(k,B,f)=>{var b=f(14563);k.exports=function(p){return"object"==typeof p?null!==p:b(p)}},31818:k=>{k.exports=!0},7191:(k,B,f)=>{var b=f(9616),p=f(14592),t=f(35009)("match");k.exports=function(n){var o;return b(n)&&(void 0!==(o=n[t])?!!o:"RegExp"==p(n))}},7683:(k,B,f)=>{var b=f(74258),p=f(26444),e=f(14563),t=f(61517),n=f(8696),o=b.Object;k.exports=n?function(s){return"symbol"==typeof s}:function(s){var c=p("Symbol");return e(c)&&t(c.prototype,o(s))}},74266:(k,B,f)=>{var b=f(74258),p=f(94640),e=f(45439),t=f(49403),n=f(98217),o=f(44821),s=f(25979),c=f(61517),_=f(72442),w=f(50806),M=f(26151),U=b.TypeError,V=function($,pt){this.stopped=$,this.result=pt},H=V.prototype;k.exports=function($,pt,nt){var tt,lt,ot,Lt,at,dt,it,Ct=!(!nt||!nt.AS_ENTRIES),xt=!(!nt||!nt.IS_ITERATOR),yt=!(!nt||!nt.INTERRUPTED),ut=p(pt,nt&&nt.that),rt=function(bt){return tt&&M(tt,"normal",bt),new V(!0,bt)},Gt=function(bt){return Ct?(t(bt),yt?ut(bt[0],bt[1],rt):ut(bt[0],bt[1])):yt?ut(bt,rt):ut(bt)};if(xt)tt=$;else{if(!(lt=w($)))throw U(n($)+" is not iterable");if(o(lt)){for(ot=0,Lt=s($);Lt>ot;ot++)if((at=Gt($[ot]))&&c(H,at))return at;return new V(!1)}tt=_($,lt)}for(dt=tt.next;!(it=e(dt,tt)).done;){try{at=Gt(it.value)}catch(bt){M(tt,"throw",bt)}if("object"==typeof at&&at&&c(H,at))return at}return new V(!1)}},26151:(k,B,f)=>{var b=f(45439),p=f(49403),e=f(78504);k.exports=function(t,n,o){var s,c;p(t);try{if(!(s=e(t,"return"))){if("throw"===n)throw o;return o}s=b(s,t)}catch(_){c=!0,s=_}if("throw"===n)throw o;if(c)throw s;return p(s),o}},93489:(k,B,f)=>{"use strict";var w,M,U,b=f(77054),p=f(14563),e=f(66112),t=f(58826),n=f(73294),o=f(35009),s=f(31818),c=o("iterator"),_=!1;[].keys&&("next"in(U=[].keys())?(M=t(t(U)))!==Object.prototype&&(w=M):_=!0),null==w||b(function(){var H={};return w[c].call(H)!==H})?w={}:s&&(w=e(w)),p(w[c])||n(w,c,function(){return this}),k.exports={IteratorPrototype:w,BUGGY_SAFARI_ITERATORS:_}},76539:k=>{k.exports={}},25979:(k,B,f)=>{var b=f(26965);k.exports=function(p){return b(p.length)}},17547:(k,B,f)=>{var $,pt,nt,st,Ct,xt,yt,ut,b=f(74258),p=f(94640),e=f(11841).f,t=f(88530).set,n=f(78561),o=f(4489),s=f(43522),c=f(1593),_=b.MutationObserver||b.WebKitMutationObserver,w=b.document,M=b.process,U=b.Promise,V=e(b,"queueMicrotask"),H=V&&V.value;H||($=function(){var tt,lt;for(c&&(tt=M.domain)&&tt.exit();pt;){lt=pt.fn,pt=pt.next;try{lt()}catch(ot){throw pt?st():nt=void 0,ot}}nt=void 0,tt&&tt.enter()},n||c||s||!_||!w?!o&&U&&U.resolve?((yt=U.resolve(void 0)).constructor=U,ut=p(yt.then,yt),st=function(){ut($)}):c?st=function(){M.nextTick($)}:(t=p(t,b),st=function(){t($)}):(Ct=!0,xt=w.createTextNode(""),new _($).observe(xt,{characterData:!0}),st=function(){xt.data=Ct=!Ct})),k.exports=H||function(tt){var lt={fn:tt,next:void 0};nt&&(nt.next=lt),pt||(pt=lt,st()),nt=lt}},64505:(k,B,f)=>{var b=f(74258);k.exports=b.Promise},98615:(k,B,f)=>{var b=f(97502),p=f(77054);k.exports=!!Object.getOwnPropertySymbols&&!p(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&b&&b<41})},30251:(k,B,f)=>{var b=f(77054),p=f(35009),e=f(31818),t=p("iterator");k.exports=!b(function(){var n=new URL("b?a=1&b=2&c=3","http://a"),o=n.searchParams,s="";return n.pathname="c%20d",o.forEach(function(c,_){o.delete("b"),s+=_+c}),e&&!n.toJSON||!o.sort||"http://a/c%20d?a=1&c=3"!==n.href||"3"!==o.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!o[t]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==s||"x"!==new URL("http://x",void 0).host})},66654:(k,B,f)=>{var b=f(74258),p=f(14563),e=f(19656),t=b.WeakMap;k.exports=p(t)&&/native code/.test(e(t))},51189:(k,B,f)=>{"use strict";var b=f(6567),p=function(e){var t,n;this.promise=new e(function(o,s){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=o,n=s}),this.resolve=b(t),this.reject=b(n)};k.exports.f=function(e){return new p(e)}},83330:(k,B,f)=>{var b=f(16096);k.exports=function(p,e){return void 0===p?arguments.length<2?"":e:b(p)}},38743:(k,B,f)=>{var b=f(74258),p=f(7191),e=b.TypeError;k.exports=function(t){if(p(t))throw e("The method doesn't accept regular expressions");return t}},67271:(k,B,f)=>{"use strict";var b=f(46876),p=f(94800),e=f(45439),t=f(77054),n=f(39698),o=f(72584),s=f(32018),c=f(34972),_=f(8317),w=Object.assign,M=Object.defineProperty,U=p([].concat);k.exports=!w||t(function(){if(b&&1!==w({b:1},w(M({},"a",{enumerable:!0,get:function(){M(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var V={},H={},$=Symbol(),pt="abcdefghijklmnopqrst";return V[$]=7,pt.split("").forEach(function(nt){H[nt]=nt}),7!=w({},V)[$]||n(w({},H)).join("")!=pt})?function(H,$){for(var pt=c(H),nt=arguments.length,st=1,Ct=o.f,xt=s.f;nt>st;)for(var ot,yt=_(arguments[st++]),ut=Ct?U(n(yt),Ct(yt)):n(yt),tt=ut.length,lt=0;tt>lt;)ot=ut[lt++],(!b||e(xt,yt,ot))&&(pt[ot]=yt[ot]);return pt}:w},66112:(k,B,f)=>{var nt,b=f(49403),p=f(47398),e=f(59595),t=f(41933),n=f(70364),o=f(2152),s=f(82062),w="prototype",M="script",U=s("IE_PROTO"),V=function(){},H=function(Ct){return"<"+M+">"+Ct+"</"+M+">"},$=function(Ct){Ct.write(H("")),Ct.close();var xt=Ct.parentWindow.Object;return Ct=null,xt},st=function(){try{nt=new ActiveXObject("htmlfile")}catch(xt){}st="undefined"!=typeof document?document.domain&&nt?$(nt):function(){var yt,Ct=o("iframe");return Ct.style.display="none",n.appendChild(Ct),Ct.src=String("javascript:"),(yt=Ct.contentWindow.document).open(),yt.write(H("document.F=Object")),yt.close(),yt.F}():$(nt);for(var Ct=e.length;Ct--;)delete st[w][e[Ct]];return st()};t[U]=!0,k.exports=Object.create||function(xt,yt){var ut;return null!==xt?(V[w]=b(xt),ut=new V,V[w]=null,ut[U]=xt):ut=st(),void 0===yt?ut:p(ut,yt)}},47398:(k,B,f)=>{var b=f(46876),p=f(35270),e=f(49403),t=f(73684),n=f(39698);k.exports=b?Object.defineProperties:function(s,c){e(s);for(var V,_=t(c),w=n(c),M=w.length,U=0;M>U;)p.f(s,V=w[U++],_[V]);return s}},35270:(k,B,f)=>{var b=f(74258),p=f(46876),e=f(58310),t=f(49403),n=f(84061),o=b.TypeError,s=Object.defineProperty;B.f=p?s:function(_,w,M){if(t(_),w=n(w),t(M),e)try{return s(_,w,M)}catch(U){}if("get"in M||"set"in M)throw o("Accessors not supported");return"value"in M&&(_[w]=M.value),_}},11841:(k,B,f)=>{var b=f(46876),p=f(45439),e=f(32018),t=f(25677),n=f(73684),o=f(84061),s=f(68739),c=f(58310),_=Object.getOwnPropertyDescriptor;B.f=b?_:function(M,U){if(M=n(M),U=o(U),c)try{return _(M,U)}catch(V){}if(s(M,U))return t(!p(e.f,M,U),M[U])}},25278:(k,B,f)=>{var b=f(14592),p=f(73684),e=f(36336).f,t=f(58467),n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];k.exports.f=function(c){return n&&"Window"==b(c)?function(s){try{return e(s)}catch(c){return t(n)}}(c):e(p(c))}},36336:(k,B,f)=>{var b=f(27603),e=f(59595).concat("length","prototype");B.f=Object.getOwnPropertyNames||function(n){return b(n,e)}},72584:(k,B)=>{B.f=Object.getOwnPropertySymbols},58826:(k,B,f)=>{var b=f(74258),p=f(68739),e=f(14563),t=f(34972),n=f(82062),o=f(63413),s=n("IE_PROTO"),c=b.Object,_=c.prototype;k.exports=o?c.getPrototypeOf:function(w){var M=t(w);if(p(M,s))return M[s];var U=M.constructor;return e(U)&&M instanceof U?U.prototype:M instanceof c?_:null}},15774:(k,B,f)=>{var b=f(77054),p=f(9616),e=f(14592),t=f(39749),n=Object.isExtensible,o=b(function(){n(1)});k.exports=o||t?function(c){return!(!p(c)||t&&"ArrayBuffer"==e(c))&&(!n||n(c))}:n},61517:(k,B,f)=>{var b=f(94800);k.exports=b({}.isPrototypeOf)},27603:(k,B,f)=>{var b=f(94800),p=f(68739),e=f(73684),t=f(8440).indexOf,n=f(41933),o=b([].push);k.exports=function(s,c){var U,_=e(s),w=0,M=[];for(U in _)!p(n,U)&&p(_,U)&&o(M,U);for(;c.length>w;)p(_,U=c[w++])&&(~t(M,U)||o(M,U));return M}},39698:(k,B,f)=>{var b=f(27603),p=f(59595);k.exports=Object.keys||function(t){return b(t,p)}},32018:(k,B)=>{"use strict";var f={}.propertyIsEnumerable,b=Object.getOwnPropertyDescriptor,p=b&&!f.call({1:2},1);B.f=p?function(t){var n=b(this,t);return!!n&&n.enumerable}:f},3358:(k,B,f)=>{var b=f(94800),p=f(49403),e=f(67553);k.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o,t=!1,n={};try{(o=b(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(s){}return function(c,_){return p(c),e(_),t?o(c,_):c.__proto__=_,c}}():void 0)},22014:(k,B,f)=>{var b=f(46876),p=f(94800),e=f(39698),t=f(73684),o=p(f(32018).f),s=p([].push),c=function(_){return function(w){for(var pt,M=t(w),U=e(M),V=U.length,H=0,$=[];V>H;)pt=U[H++],(!b||o(M,pt))&&s($,_?[pt,M[pt]]:M[pt]);return $}};k.exports={entries:c(!0),values:c(!1)}},42691:(k,B,f)=>{"use strict";var b=f(68118),p=f(27870);k.exports=b?{}.toString:function(){return"[object "+p(this)+"]"}},27704:(k,B,f)=>{var b=f(74258),p=f(45439),e=f(14563),t=f(9616),n=b.TypeError;k.exports=function(o,s){var c,_;if("string"===s&&e(c=o.toString)&&!t(_=p(c,o))||e(c=o.valueOf)&&!t(_=p(c,o))||"string"!==s&&e(c=o.toString)&&!t(_=p(c,o)))return _;throw n("Can't convert object to primitive value")}},51566:(k,B,f)=>{var b=f(26444),p=f(94800),e=f(36336),t=f(72584),n=f(49403),o=p([].concat);k.exports=b("Reflect","ownKeys")||function(c){var _=e.f(n(c)),w=t.f;return w?o(_,w(c)):_}},52457:k=>{k.exports={}},7286:k=>{k.exports=function(B){try{return{error:!1,value:B()}}catch(f){return{error:!0,value:f}}}},47249:(k,B,f)=>{var b=f(49403),p=f(9616),e=f(51189);k.exports=function(t,n){if(b(t),p(n)&&n.constructor===t)return n;var o=e.f(t);return(0,o.resolve)(n),o.promise}},32914:(k,B,f)=>{var b=f(73294);k.exports=function(p,e,t){for(var n in e)t&&t.unsafe&&p[n]?p[n]=e[n]:b(p,n,e[n],t);return p}},73294:(k,B,f)=>{var b=f(94119);k.exports=function(p,e,t,n){n&&n.enumerable?p[e]=t:b(p,e,t)}},45696:(k,B,f)=>{var p=f(74258).TypeError;k.exports=function(e){if(null==e)throw p("Can't call method on "+e);return e}},84360:(k,B,f)=>{var b=f(74258),p=Object.defineProperty;k.exports=function(e,t){try{p(b,e,{value:t,configurable:!0,writable:!0})}catch(n){b[e]=t}return t}},73012:(k,B,f)=>{"use strict";var b=f(26444),p=f(35270),e=f(35009),t=f(46876),n=e("species");k.exports=function(o){var s=b(o);t&&s&&!s[n]&&(0,p.f)(s,n,{configurable:!0,get:function(){return this}})}},8144:(k,B,f)=>{var b=f(68118),p=f(35270).f,e=f(94119),t=f(68739),n=f(42691),s=f(35009)("toStringTag");k.exports=function(c,_,w,M){if(c){var U=w?c:c.prototype;t(U,s)||p(U,s,{configurable:!0,value:_}),M&&!b&&e(U,"toString",n)}}},82062:(k,B,f)=>{var b=f(39302),p=f(48110),e=b("keys");k.exports=function(t){return e[t]||(e[t]=p(t))}},6671:(k,B,f)=>{var b=f(74258),p=f(84360),e="__core-js_shared__",t=b[e]||p(e,{});k.exports=t},39302:(k,B,f)=>{var b=f(31818),p=f(6671);(k.exports=function(e,t){return p[e]||(p[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.3",mode:b?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},7806:(k,B,f)=>{var b=f(49403),p=f(6767),t=f(35009)("species");k.exports=function(n,o){var c,s=b(n).constructor;return void 0===s||null==(c=b(s)[t])?o:p(c)}},4343:(k,B,f)=>{var b=f(94800),p=f(32938),e=f(16096),t=f(45696),n=b("".charAt),o=b("".charCodeAt),s=b("".slice),c=function(_){return function(w,M){var $,pt,U=e(t(w)),V=p(M),H=U.length;return V<0||V>=H?_?"":void 0:($=o(U,V))<55296||$>56319||V+1===H||(pt=o(U,V+1))<56320||pt>57343?_?n(U,V):$:_?s(U,V,V+2):pt-56320+($-55296<<10)+65536}};k.exports={codeAt:c(!1),charAt:c(!0)}},88530:(k,B,f)=>{var ut,tt,lt,ot,b=f(74258),p=f(66864),e=f(94640),t=f(14563),n=f(68739),o=f(77054),s=f(70364),c=f(64716),_=f(2152),w=f(78561),M=f(1593),U=b.setImmediate,V=b.clearImmediate,H=b.process,$=b.Dispatch,pt=b.Function,nt=b.MessageChannel,st=b.String,Ct=0,xt={},yt="onreadystatechange";try{ut=b.location}catch(rt){}var Lt=function(rt){if(n(xt,rt)){var Gt=xt[rt];delete xt[rt],Gt()}},at=function(rt){return function(){Lt(rt)}},dt=function(rt){Lt(rt.data)},it=function(rt){b.postMessage(st(rt),ut.protocol+"//"+ut.host)};(!U||!V)&&(U=function(Gt){var bt=c(arguments,1);return xt[++Ct]=function(){p(t(Gt)?Gt:pt(Gt),void 0,bt)},tt(Ct),Ct},V=function(Gt){delete xt[Gt]},M?tt=function(rt){H.nextTick(at(rt))}:$&&$.now?tt=function(rt){$.now(at(rt))}:nt&&!w?(ot=(lt=new nt).port2,lt.port1.onmessage=dt,tt=e(ot.postMessage,ot)):b.addEventListener&&t(b.postMessage)&&!b.importScripts&&ut&&"file:"!==ut.protocol&&!o(it)?(tt=it,b.addEventListener("message",dt,!1)):tt=yt in _("script")?function(rt){s.appendChild(_("script"))[yt]=function(){s.removeChild(this),Lt(rt)}}:function(rt){setTimeout(at(rt),0)}),k.exports={set:U,clear:V}},69723:(k,B,f)=>{var b=f(32938),p=Math.max,e=Math.min;k.exports=function(t,n){var o=b(t);return o<0?p(o+n,0):e(o,n)}},73684:(k,B,f)=>{var b=f(8317),p=f(45696);k.exports=function(e){return b(p(e))}},32938:k=>{var B=Math.ceil,f=Math.floor;k.exports=function(b){var p=+b;return p!=p||0===p?0:(p>0?f:B)(p)}},26965:(k,B,f)=>{var b=f(32938),p=Math.min;k.exports=function(e){return e>0?p(b(e),9007199254740991):0}},34972:(k,B,f)=>{var b=f(74258),p=f(45696),e=b.Object;k.exports=function(t){return e(p(t))}},57350:(k,B,f)=>{var b=f(74258),p=f(45439),e=f(9616),t=f(7683),n=f(78504),o=f(27704),s=f(35009),c=b.TypeError,_=s("toPrimitive");k.exports=function(w,M){if(!e(w)||t(w))return w;var V,U=n(w,_);if(U){if(void 0===M&&(M="default"),V=p(U,w,M),!e(V)||t(V))return V;throw c("Can't convert object to primitive value")}return void 0===M&&(M="number"),o(w,M)}},84061:(k,B,f)=>{var b=f(57350),p=f(7683);k.exports=function(e){var t=b(e,"string");return p(t)?t:t+""}},68118:(k,B,f)=>{var e={};e[f(35009)("toStringTag")]="z",k.exports="[object z]"===String(e)},16096:(k,B,f)=>{var b=f(74258),p=f(27870),e=b.String;k.exports=function(t){if("Symbol"===p(t))throw TypeError("Cannot convert a Symbol value to a string");return e(t)}},98217:(k,B,f)=>{var p=f(74258).String;k.exports=function(e){try{return p(e)}catch(t){return"Object"}}},48110:(k,B,f)=>{var b=f(94800),p=0,e=Math.random(),t=b(1..toString);k.exports=function(n){return"Symbol("+(void 0===n?"":n)+")_"+t(++p+e,36)}},8696:(k,B,f)=>{var b=f(98615);k.exports=b&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},79182:(k,B,f)=>{var b=f(35009);B.f=b},35009:(k,B,f)=>{var b=f(74258),p=f(39302),e=f(68739),t=f(48110),n=f(98615),o=f(8696),s=p("wks"),c=b.Symbol,_=c&&c.for,w=o?c:c&&c.withoutSetter||t;k.exports=function(M){if(!e(s,M)||!n&&"string"!=typeof s[M]){var U="Symbol."+M;s[M]=n&&e(c,M)?c[M]:o&&_?_(U):w(U)}return s[M]}},10153:(k,B,f)=>{"use strict";var b=f(5327),p=f(74258),e=f(61517),t=f(58826),n=f(3358),o=f(53663),s=f(66112),c=f(94119),_=f(25677),w=f(56510),M=f(44187),U=f(74266),V=f(83330),H=f(35009),$=f(39581),pt=H("toStringTag"),nt=p.Error,st=[].push,Ct=function(ut,tt){var Lt,lt=arguments.length>2?arguments[2]:void 0,ot=e(xt,this);n?Lt=n(new nt(void 0),ot?t(this):xt):(Lt=ot?this:s(xt),c(Lt,pt,"Error")),c(Lt,"message",V(tt,"")),$&&c(Lt,"stack",w(Lt.stack,1)),M(Lt,lt);var at=[];return U(ut,st,{that:at}),c(Lt,"errors",at),Lt};n?n(Ct,nt):o(Ct,nt);var xt=Ct.prototype=s(nt.prototype,{constructor:_(1,Ct),message:_(1,""),name:_(1,"AggregateError")});b({global:!0},{AggregateError:Ct})},30933:(k,B,f)=>{"use strict";var b=f(5327),p=f(74258),e=f(77054),t=f(62845),n=f(9616),o=f(34972),s=f(25979),c=f(13493),_=f(47137),w=f(54647),M=f(35009),U=f(97502),V=M("isConcatSpreadable"),H=9007199254740991,$="Maximum allowed index exceeded",pt=p.TypeError,nt=U>=51||!e(function(){var yt=[];return yt[V]=!1,yt.concat()[0]!==yt}),st=w("concat"),Ct=function(yt){if(!n(yt))return!1;var ut=yt[V];return void 0!==ut?!!ut:t(yt)};b({target:"Array",proto:!0,forced:!nt||!st},{concat:function(ut){var Lt,at,dt,it,rt,tt=o(this),lt=_(tt,0),ot=0;for(Lt=-1,dt=arguments.length;Lt<dt;Lt++)if(Ct(rt=-1===Lt?tt:arguments[Lt])){if(ot+(it=s(rt))>H)throw pt($);for(at=0;at<it;at++,ot++)at in rt&&c(lt,ot,rt[at])}else{if(ot>=H)throw pt($);c(lt,ot++,rt)}return lt.length=ot,lt}})},24572:(k,B,f)=>{"use strict";var b=f(5327),p=f(93949).filter;b({target:"Array",proto:!0,forced:!f(54647)("filter")},{filter:function(o){return p(this,o,arguments.length>1?arguments[1]:void 0)}})},40655:(k,B,f)=>{"use strict";var b=f(5327),p=f(93949).find,e=f(74159),t="find",n=!0;t in[]&&Array(1)[t](function(){n=!1}),b({target:"Array",proto:!0,forced:n},{find:function(s){return p(this,s,arguments.length>1?arguments[1]:void 0)}}),e(t)},91762:(k,B,f)=>{"use strict";var b=f(5327),p=f(45900);b({target:"Array",proto:!0,forced:[].forEach!=p},{forEach:p})},72190:(k,B,f)=>{var b=f(5327),p=f(75058);b({target:"Array",stat:!0,forced:!f(85306)(function(n){Array.from(n)})},{from:p})},38582:(k,B,f)=>{"use strict";var b=f(5327),p=f(8440).includes,e=f(74159);b({target:"Array",proto:!0},{includes:function(n){return p(this,n,arguments.length>1?arguments[1]:void 0)}}),e("includes")},13950:(k,B,f)=>{"use strict";var b=f(5327),p=f(94800),e=f(8440).indexOf,t=f(95750),n=p([].indexOf),o=!!n&&1/n([1],1,-0)<0,s=t("indexOf");b({target:"Array",proto:!0,forced:o||!s},{indexOf:function(_){var w=arguments.length>1?arguments[1]:void 0;return o?n(this,_,w)||0:e(this,_,w)}})},99025:(k,B,f)=>{f(5327)({target:"Array",stat:!0},{isArray:f(62845)})},23483:(k,B,f)=>{"use strict";var b=f(73684),p=f(74159),e=f(76539),t=f(46053),n=f(63957),o="Array Iterator",s=t.set,c=t.getterFor(o);k.exports=n(Array,"Array",function(_,w){s(this,{type:o,target:b(_),index:0,kind:w})},function(){var _=c(this),w=_.target,M=_.kind,U=_.index++;return!w||U>=w.length?(_.target=void 0,{value:void 0,done:!0}):"keys"==M?{value:U,done:!1}:"values"==M?{value:w[U],done:!1}:{value:[U,w[U]],done:!1}},"values"),e.Arguments=e.Array,p("keys"),p("values"),p("entries")},78713:(k,B,f)=>{"use strict";var b=f(5327),p=f(93949).map;b({target:"Array",proto:!0,forced:!f(54647)("map")},{map:function(o){return p(this,o,arguments.length>1?arguments[1]:void 0)}})},94775:(k,B,f)=>{"use strict";var b=f(5327),p=f(74258),e=f(62845),t=f(2817),n=f(9616),o=f(69723),s=f(25979),c=f(73684),_=f(13493),w=f(35009),M=f(54647),U=f(64716),V=M("slice"),H=w("species"),$=p.Array,pt=Math.max;b({target:"Array",proto:!0,forced:!V},{slice:function(st,Ct){var lt,ot,Lt,xt=c(this),yt=s(xt),ut=o(st,yt),tt=o(void 0===Ct?yt:Ct,yt);if(e(xt)&&((t(lt=xt.constructor)&&(lt===$||e(lt.prototype))||n(lt)&&null===(lt=lt[H]))&&(lt=void 0),lt===$||void 0===lt))return U(xt,ut,tt);for(ot=new(void 0===lt?$:lt)(pt(tt-ut,0)),Lt=0;ut<tt;ut++,Lt++)ut in xt&&_(ot,Lt,xt[ut]);return ot.length=Lt,ot}})},8195:(k,B,f)=>{"use strict";var b=f(5327),p=f(74258),e=f(69723),t=f(32938),n=f(25979),o=f(34972),s=f(47137),c=f(13493),w=f(54647)("splice"),M=p.TypeError,U=Math.max,V=Math.min,H=9007199254740991,$="Maximum allowed length exceeded";b({target:"Array",proto:!0,forced:!w},{splice:function(nt,st){var tt,lt,ot,Lt,at,dt,Ct=o(this),xt=n(Ct),yt=e(nt,xt),ut=arguments.length;if(0===ut?tt=lt=0:1===ut?(tt=0,lt=xt-yt):(tt=ut-2,lt=V(U(t(st),0),xt-yt)),xt+tt-lt>H)throw M($);for(ot=s(Ct,lt),Lt=0;Lt<lt;Lt++)(at=yt+Lt)in Ct&&c(ot,Lt,Ct[at]);if(ot.length=lt,tt<lt){for(Lt=yt;Lt<xt-lt;Lt++)dt=Lt+tt,(at=Lt+lt)in Ct?Ct[dt]=Ct[at]:delete Ct[dt];for(Lt=xt;Lt>xt-lt+tt;Lt--)delete Ct[Lt-1]}else if(tt>lt)for(Lt=xt-lt;Lt>yt;Lt--)dt=Lt+tt-1,(at=Lt+lt-1)in Ct?Ct[dt]=Ct[at]:delete Ct[dt];for(Lt=0;Lt<tt;Lt++)Ct[Lt+yt]=arguments[Lt+2];return Ct.length=xt-lt+tt,ot}})},35249:(k,B,f)=>{var b=f(5327),p=f(74258),e=f(26444),t=f(66864),n=f(94800),o=f(77054),s=p.Array,c=e("JSON","stringify"),_=n(/./.exec),w=n("".charAt),M=n("".charCodeAt),U=n("".replace),V=n(1..toString),H=/[\uD800-\uDFFF]/g,$=/^[\uD800-\uDBFF]$/,pt=/^[\uDC00-\uDFFF]$/,nt=function(Ct,xt,yt){var ut=w(yt,xt-1),tt=w(yt,xt+1);return _($,Ct)&&!_(pt,tt)||_(pt,Ct)&&!_($,ut)?"\\u"+V(M(Ct,0),16):Ct},st=o(function(){return'"\\udf06\\ud834"'!==c("\udf06\ud834")||'"\\udead"'!==c("\udead")});c&&b({target:"JSON",stat:!0,forced:st},{stringify:function(xt,yt,ut){for(var tt=0,lt=arguments.length,ot=s(lt);tt<lt;tt++)ot[tt]=arguments[tt];var Lt=t(c,null,ot);return"string"==typeof Lt?U(Lt,H,nt):Lt}})},2757:(k,B,f)=>{var b=f(74258);f(8144)(b.JSON,"JSON",!0)},58956:()=>{},41423:(k,B,f)=>{var b=f(5327),p=f(67271);b({target:"Object",stat:!0,forced:Object.assign!==p},{assign:p})},81892:(k,B,f)=>{var b=f(5327),p=f(46876);b({target:"Object",stat:!0,forced:!p,sham:!p},{defineProperties:f(47398)})},80247:(k,B,f)=>{var b=f(5327),p=f(46876);b({target:"Object",stat:!0,forced:!p,sham:!p},{defineProperty:f(35270).f})},22700:(k,B,f)=>{var b=f(5327),p=f(22014).entries;b({target:"Object",stat:!0},{entries:function(t){return p(t)}})},36342:(k,B,f)=>{var b=f(5327),p=f(77054),e=f(73684),t=f(11841).f,n=f(46876),o=p(function(){t(1)});b({target:"Object",stat:!0,forced:!n||o,sham:!n},{getOwnPropertyDescriptor:function(_,w){return t(e(_),w)}})},4878:(k,B,f)=>{var b=f(5327),p=f(46876),e=f(51566),t=f(73684),n=f(11841),o=f(13493);b({target:"Object",stat:!0,sham:!p},{getOwnPropertyDescriptors:function(c){for(var H,$,_=t(c),w=n.f,M=e(_),U={},V=0;M.length>V;)void 0!==($=w(_,H=M[V++]))&&o(U,H,$);return U}})},21165:(k,B,f)=>{var b=f(5327),p=f(34972),e=f(39698);b({target:"Object",stat:!0,forced:f(77054)(function(){e(1)})},{keys:function(s){return e(p(s))}})},79445:()=>{},35503:(k,B,f)=>{"use strict";var b=f(5327),p=f(45439),e=f(6567),t=f(51189),n=f(7286),o=f(74266);b({target:"Promise",stat:!0},{allSettled:function(c){var _=this,w=t.f(_),M=w.resolve,U=w.reject,V=n(function(){var H=e(_.resolve),$=[],pt=0,nt=1;o(c,function(st){var Ct=pt++,xt=!1;nt++,p(H,_,st).then(function(yt){xt||(xt=!0,$[Ct]={status:"fulfilled",value:yt},--nt||M($))},function(yt){xt||(xt=!0,$[Ct]={status:"rejected",reason:yt},--nt||M($))})}),--nt||M($)});return V.error&&U(V.value),w.promise}})},54677:(k,B,f)=>{"use strict";var b=f(5327),p=f(6567),e=f(26444),t=f(45439),n=f(51189),o=f(7286),s=f(74266),c="No one promise resolved";b({target:"Promise",stat:!0},{any:function(w){var M=this,U=e("AggregateError"),V=n.f(M),H=V.resolve,$=V.reject,pt=o(function(){var nt=p(M.resolve),st=[],Ct=0,xt=1,yt=!1;s(w,function(ut){var tt=Ct++,lt=!1;xt++,t(nt,M,ut).then(function(ot){lt||yt||(yt=!0,H(ot))},function(ot){lt||yt||(lt=!0,st[tt]=ot,--xt||$(new U(st,c)))})}),--xt||$(new U(st,c))});return pt.error&&$(pt.value),V.promise}})},13013:(k,B,f)=>{"use strict";var b=f(5327),p=f(31818),e=f(64505),t=f(77054),n=f(26444),o=f(14563),s=f(7806),c=f(47249),_=f(73294);if(b({target:"Promise",proto:!0,real:!0,forced:!!e&&t(function(){e.prototype.finally.call({then:function(){}},function(){})})},{finally:function(U){var V=s(this,n("Promise")),H=o(U);return this.then(H?function($){return c(V,U()).then(function(){return $})}:U,H?function($){return c(V,U()).then(function(){throw $})}:U)}}),!p&&o(e)){var M=n("Promise").prototype.finally;e.prototype.finally!==M&&_(e.prototype,"finally",M,{unsafe:!0})}},56143:(k,B,f)=>{"use strict";var ge,$t,oe,re,b=f(5327),p=f(31818),e=f(74258),t=f(26444),n=f(45439),o=f(64505),s=f(73294),c=f(32914),_=f(3358),w=f(8144),M=f(73012),U=f(6567),V=f(14563),H=f(9616),$=f(7561),pt=f(19656),nt=f(74266),st=f(85306),Ct=f(7806),xt=f(88530).set,yt=f(17547),ut=f(47249),tt=f(47157),lt=f(51189),ot=f(7286),Lt=f(46053),at=f(74088),dt=f(35009),it=f(15418),rt=f(1593),Gt=f(97502),bt=dt("species"),Ht="Promise",ce=Lt.getterFor(Ht),Ye=Lt.set,de=Lt.getterFor(Ht),Be=o&&o.prototype,He=o,Ke=Be,vi=e.TypeError,qe=e.document,Ne=e.process,oi=lt.f,Ft=oi,_e=!!(qe&&qe.createEvent&&e.dispatchEvent),Xt=V(e.PromiseRejectionEvent),Jt="unhandledrejection",Yt=!1,Et=at(Ht,function(){var We=pt(He),ri=We!==String(He);if(!ri&&66===Gt||p&&!Ke.finally)return!0;if(Gt>=51&&/native code/.test(We))return!1;var ue=new He(function(Ri){Ri(1)}),je=function(Ri){Ri(function(){},function(){})};return(ue.constructor={})[bt]=je,!(Yt=ue.then(function(){})instanceof je)||!ri&&it&&!Xt}),kt=Et||!st(function(We){He.all(We).catch(function(){})}),we=function(We){var ri;return!(!H(We)||!V(ri=We.then))&&ri},Ae=function(We,ri){if(!We.notified){We.notified=!0;var ue=We.reactions;yt(function(){for(var je=We.value,ti=1==We.state,Ri=0;ue.length>Ri;){var te,ve,Ti,Pe=ue[Ri++],ie=ti?Pe.ok:Pe.fail,Mt=Pe.resolve,ct=Pe.reject,It=Pe.domain;try{ie?(ti||(2===We.rejection&&Fi(We),We.rejection=1),!0===ie?te=je:(It&&It.enter(),te=ie(je),It&&(It.exit(),Ti=!0)),te===Pe.promise?ct(vi("Promise-chain cycle")):(ve=we(te))?n(ve,te,Mt,ct):Mt(te)):ct(je)}catch(ki){It&&!Ti&&It.exit(),ct(ki)}}We.reactions=[],We.notified=!1,ri&&!We.rejection&&Ze(We)})}},ci=function(We,ri,ue){var je,ti;_e?((je=qe.createEvent("Event")).promise=ri,je.reason=ue,je.initEvent(We,!1,!0),e.dispatchEvent(je)):je={promise:ri,reason:ue},!Xt&&(ti=e["on"+We])?ti(je):We===Jt&&tt("Unhandled promise rejection",ue)},Ze=function(We){n(xt,e,function(){var ti,ri=We.facade,ue=We.value;if(li(We)&&(ti=ot(function(){rt?Ne.emit("unhandledRejection",ue,ri):ci(Jt,ri,ue)}),We.rejection=rt||li(We)?2:1,ti.error))throw ti.value})},li=function(We){return 1!==We.rejection&&!We.parent},Fi=function(We){n(xt,e,function(){var ri=We.facade;rt?Ne.emit("rejectionHandled",ri):ci("rejectionhandled",ri,We.value)})},ui=function(We,ri,ue){return function(je){We(ri,je,ue)}},Ei=function(We,ri,ue){We.done||(We.done=!0,ue&&(We=ue),We.value=ri,We.state=2,Ae(We,!0))},gi=function(We,ri,ue){if(!We.done){We.done=!0,ue&&(We=ue);try{if(We.facade===ri)throw vi("Promise can't be resolved itself");var je=we(ri);je?yt(function(){var ti={done:!1};try{n(je,ri,ui(gi,ti,We),ui(Ei,ti,We))}catch(Ri){Ei(ti,Ri,We)}}):(We.value=ri,We.state=1,Ae(We,!1))}catch(ti){Ei({done:!1},ti,We)}}};if(Et&&(He=function(ri){$(this,Ke),U(ri),n(ge,this);var ue=ce(this);try{ri(ui(gi,ue),ui(Ei,ue))}catch(je){Ei(ue,je)}},(ge=function(ri){Ye(this,{type:Ht,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=c(Ke=He.prototype,{then:function(ri,ue){var je=de(this),ti=je.reactions,Ri=oi(Ct(this,He));return Ri.ok=!V(ri)||ri,Ri.fail=V(ue)&&ue,Ri.domain=rt?Ne.domain:void 0,je.parent=!0,ti[ti.length]=Ri,0!=je.state&&Ae(je,!1),Ri.promise},catch:function(We){return this.then(void 0,We)}}),$t=function(){var We=new ge,ri=ce(We);this.promise=We,this.resolve=ui(gi,ri),this.reject=ui(Ei,ri)},lt.f=oi=function(We){return We===He||We===oe?new $t(We):Ft(We)},!p&&V(o)&&Be!==Object.prototype)){re=Be.then,Yt||(s(Be,"then",function(ri,ue){var je=this;return new He(function(ti,Ri){n(re,je,ti,Ri)}).then(ri,ue)},{unsafe:!0}),s(Be,"catch",Ke.catch,{unsafe:!0}));try{delete Be.constructor}catch(We){}_&&_(Be,Ke)}b({global:!0,wrap:!0,forced:Et},{Promise:He}),w(He,Ht,!1,!0),M(Ht),oe=t(Ht),b({target:Ht,stat:!0,forced:Et},{reject:function(ri){var ue=oi(this);return n(ue.reject,void 0,ri),ue.promise}}),b({target:Ht,stat:!0,forced:p||Et},{resolve:function(ri){return ut(p&&this===oe?He:this,ri)}}),b({target:Ht,stat:!0,forced:kt},{all:function(ri){var ue=this,je=oi(ue),ti=je.resolve,Ri=je.reject,Pe=ot(function(){var ie=U(ue.resolve),Mt=[],ct=0,It=1;nt(ri,function(te){var ve=ct++,Ti=!1;It++,n(ie,ue,te).then(function(ki){Ti||(Ti=!0,Mt[ve]=ki,--It||ti(Mt))},Ri)}),--It||ti(Mt)});return Pe.error&&Ri(Pe.value),je.promise},race:function(ri){var ue=this,je=oi(ue),ti=je.reject,Ri=ot(function(){var Pe=U(ue.resolve);nt(ri,function(ie){n(Pe,ue,ie).then(je.resolve,ti)})});return Ri.error&&ti(Ri.value),je.promise}})},32257:()=>{},53030:(k,B,f)=>{"use strict";var b=f(5327),p=f(94800),e=f(38743),t=f(45696),n=f(16096),o=f(56850),s=p("".indexOf);b({target:"String",proto:!0,forced:!o("includes")},{includes:function(_){return!!~s(n(t(this)),n(e(_)),arguments.length>1?arguments[1]:void 0)}})},21514:(k,B,f)=>{"use strict";var b=f(4343).charAt,p=f(16096),e=f(46053),t=f(63957),n="String Iterator",o=e.set,s=e.getterFor(n);t(String,"String",function(c){o(this,{type:n,string:p(c),index:0})},function(){var U,_=s(this),w=_.string,M=_.index;return M>=w.length?{value:void 0,done:!0}:(U=b(w,M),_.index+=U.length,{value:U,done:!1})})},35828:(k,B,f)=>{"use strict";var $,b=f(5327),p=f(94800),e=f(11841).f,t=f(26965),n=f(16096),o=f(38743),s=f(45696),c=f(56850),_=f(31818),w=p("".startsWith),M=p("".slice),U=Math.min,V=c("startsWith");b({target:"String",proto:!0,forced:!(!_&&!V&&($=e(String.prototype,"startsWith"),$&&!$.writable)||V)},{startsWith:function(pt){var nt=n(s(this));o(pt);var st=t(U(arguments.length>1?arguments[1]:void 0,nt.length)),Ct=n(pt);return w?w(nt,Ct,st):M(nt,st,st+Ct.length)===Ct}})},39334:(k,B,f)=>{f(90898)("asyncIterator")},27014:()=>{},57071:(k,B,f)=>{f(90898)("hasInstance")},58666:(k,B,f)=>{f(90898)("isConcatSpreadable")},15816:(k,B,f)=>{f(90898)("iterator")},57479:(k,B,f)=>{"use strict";var b=f(5327),p=f(74258),e=f(26444),t=f(66864),n=f(45439),o=f(94800),s=f(31818),c=f(46876),_=f(98615),w=f(77054),M=f(68739),U=f(62845),V=f(14563),H=f(9616),$=f(61517),pt=f(7683),nt=f(49403),st=f(34972),Ct=f(73684),xt=f(84061),yt=f(16096),ut=f(25677),tt=f(66112),lt=f(39698),ot=f(36336),Lt=f(25278),at=f(72584),dt=f(11841),it=f(35270),rt=f(32018),Gt=f(64716),bt=f(73294),Ht=f(39302),ce=f(82062),Ye=f(41933),de=f(48110),Be=f(35009),He=f(79182),Ke=f(90898),vi=f(8144),qe=f(46053),Ne=f(93949).forEach,oi=ce("hidden"),Ft="Symbol",_e="prototype",Xt=Be("toPrimitive"),Jt=qe.set,Rt=qe.getterFor(Ft),Pt=Object[_e],he=p.Symbol,ze=he&&he[_e],le=p.TypeError,jt=p.QObject,Yt=e("JSON","stringify"),ge=dt.f,$t=it.f,oe=Lt.f,re=rt.f,Et=o([].push),kt=Ht("symbols"),we=Ht("op-symbols"),Ae=Ht("string-to-symbol-registry"),ci=Ht("symbol-to-string-registry"),Ze=Ht("wks"),li=!jt||!jt[_e]||!jt[_e].findChild,Fi=c&&w(function(){return 7!=tt($t({},"a",{get:function(){return $t(this,"a",{value:7}).a}})).a})?function(ie,Mt,ct){var It=ge(Pt,Mt);It&&delete Pt[Mt],$t(ie,Mt,ct),It&&ie!==Pt&&$t(Pt,Mt,It)}:$t,ui=function(ie,Mt){var ct=kt[ie]=tt(ze);return Jt(ct,{type:Ft,tag:ie,description:Mt}),c||(ct.description=Mt),ct},Ei=function(Mt,ct,It){Mt===Pt&&Ei(we,ct,It),nt(Mt);var te=xt(ct);return nt(It),M(kt,te)?(It.enumerable?(M(Mt,oi)&&Mt[oi][te]&&(Mt[oi][te]=!1),It=tt(It,{enumerable:ut(0,!1)})):(M(Mt,oi)||$t(Mt,oi,ut(1,{})),Mt[oi][te]=!0),Fi(Mt,te,It)):$t(Mt,te,It)},gi=function(Mt,ct){nt(Mt);var It=Ct(ct),te=lt(It).concat(ti(It));return Ne(te,function(ve){(!c||n(ri,It,ve))&&Ei(Mt,ve,It[ve])}),Mt},ri=function(Mt){var ct=xt(Mt),It=n(re,this,ct);return!(this===Pt&&M(kt,ct)&&!M(we,ct))&&(!(It||!M(this,ct)||!M(kt,ct)||M(this,oi)&&this[oi][ct])||It)},ue=function(Mt,ct){var It=Ct(Mt),te=xt(ct);if(It!==Pt||!M(kt,te)||M(we,te)){var ve=ge(It,te);return ve&&M(kt,te)&&!(M(It,oi)&&It[oi][te])&&(ve.enumerable=!0),ve}},je=function(Mt){var ct=oe(Ct(Mt)),It=[];return Ne(ct,function(te){!M(kt,te)&&!M(Ye,te)&&Et(It,te)}),It},ti=function(Mt){var ct=Mt===Pt,It=oe(ct?we:Ct(Mt)),te=[];return Ne(It,function(ve){M(kt,ve)&&(!ct||M(Pt,ve))&&Et(te,kt[ve])}),te};if(_||(bt(ze=(he=function(){if($(ze,this))throw le("Symbol is not a constructor");var Mt=arguments.length&&void 0!==arguments[0]?yt(arguments[0]):void 0,ct=de(Mt),It=function(te){this===Pt&&n(It,we,te),M(this,oi)&&M(this[oi],ct)&&(this[oi][ct]=!1),Fi(this,ct,ut(1,te))};return c&&li&&Fi(Pt,ct,{configurable:!0,set:It}),ui(ct,Mt)})[_e],"toString",function(){return Rt(this).tag}),bt(he,"withoutSetter",function(ie){return ui(de(ie),ie)}),rt.f=ri,it.f=Ei,dt.f=ue,ot.f=Lt.f=je,at.f=ti,He.f=function(ie){return ui(Be(ie),ie)},c&&($t(ze,"description",{configurable:!0,get:function(){return Rt(this).description}}),s||bt(Pt,"propertyIsEnumerable",ri,{unsafe:!0}))),b({global:!0,wrap:!0,forced:!_,sham:!_},{Symbol:he}),Ne(lt(Ze),function(ie){Ke(ie)}),b({target:Ft,stat:!0,forced:!_},{for:function(ie){var Mt=yt(ie);if(M(Ae,Mt))return Ae[Mt];var ct=he(Mt);return Ae[Mt]=ct,ci[ct]=Mt,ct},keyFor:function(Mt){if(!pt(Mt))throw le(Mt+" is not a symbol");if(M(ci,Mt))return ci[Mt]},useSetter:function(){li=!0},useSimple:function(){li=!1}}),b({target:"Object",stat:!0,forced:!_,sham:!c},{create:function(Mt,ct){return void 0===ct?tt(Mt):gi(tt(Mt),ct)},defineProperty:Ei,defineProperties:gi,getOwnPropertyDescriptor:ue}),b({target:"Object",stat:!0,forced:!_},{getOwnPropertyNames:je,getOwnPropertySymbols:ti}),b({target:"Object",stat:!0,forced:w(function(){at.f(1)})},{getOwnPropertySymbols:function(Mt){return at.f(st(Mt))}}),Yt&&b({target:"JSON",stat:!0,forced:!_||w(function(){var ie=he();return"[null]"!=Yt([ie])||"{}"!=Yt({a:ie})||"{}"!=Yt(Object(ie))})},{stringify:function(Mt,ct,It){var te=Gt(arguments),ve=ct;if((H(ct)||void 0!==Mt)&&!pt(Mt))return U(ct)||(ct=function(Ti,ki){if(V(ve)&&(ki=n(ve,this,Ti,ki)),!pt(ki))return ki}),te[1]=ct,t(Yt,null,te)}}),!ze[Xt]){var Pe=ze.valueOf;bt(ze,Xt,function(ie){return n(Pe,this)})}vi(he,Ft),Ye[oi]=!0},20950:(k,B,f)=>{f(90898)("matchAll")},14740:(k,B,f)=>{f(90898)("match")},76499:(k,B,f)=>{f(90898)("replace")},94696:(k,B,f)=>{f(90898)("search")},72105:(k,B,f)=>{f(90898)("species")},5247:(k,B,f)=>{f(90898)("split")},53825:(k,B,f)=>{f(90898)("toPrimitive")},22529:(k,B,f)=>{f(90898)("toStringTag")},90591:(k,B,f)=>{f(90898)("unscopables")},26054:(k,B,f)=>{"use strict";var U,b=f(74258),p=f(94800),e=f(32914),t=f(10344),n=f(53303),o=f(82639),s=f(9616),c=f(15774),_=f(46053).enforce,w=f(66654),M=!b.ActiveXObject&&"ActiveXObject"in b,V=function(xt){return function(){return xt(this,arguments.length?arguments[0]:void 0)}},H=n("WeakMap",V,o);if(w&&M){U=o.getConstructor(V,"WeakMap",!0),t.enable();var $=H.prototype,pt=p($.delete),nt=p($.has),st=p($.get),Ct=p($.set);e($,{delete:function(xt){if(s(xt)&&!c(xt)){var yt=_(this);return yt.frozen||(yt.frozen=new U),pt(this,xt)||yt.frozen.delete(xt)}return pt(this,xt)},has:function(yt){if(s(yt)&&!c(yt)){var ut=_(this);return ut.frozen||(ut.frozen=new U),nt(this,yt)||ut.frozen.has(yt)}return nt(this,yt)},get:function(yt){if(s(yt)&&!c(yt)){var ut=_(this);return ut.frozen||(ut.frozen=new U),nt(this,yt)?st(this,yt):ut.frozen.get(yt)}return st(this,yt)},set:function(yt,ut){if(s(yt)&&!c(yt)){var tt=_(this);tt.frozen||(tt.frozen=new U),nt(this,yt)?Ct(this,yt,ut):tt.frozen.set(yt,ut)}else Ct(this,yt,ut);return this}})}},22977:(k,B,f)=>{f(10153)},17724:(k,B,f)=>{f(35503)},50162:(k,B,f)=>{f(54677)},79178:(k,B,f)=>{"use strict";var b=f(5327),p=f(51189),e=f(7286);b({target:"Promise",stat:!0},{try:function(t){var n=p.f(this),o=e(t);return(o.error?n.reject:n.resolve)(o.value),n.promise}})},83066:(k,B,f)=>{f(90898)("asyncDispose")},40338:(k,B,f)=>{f(90898)("dispose")},23560:(k,B,f)=>{f(90898)("matcher")},61546:(k,B,f)=>{f(90898)("metadata")},70214:(k,B,f)=>{f(90898)("observable")},96506:(k,B,f)=>{f(90898)("patternMatch")},82356:(k,B,f)=>{f(90898)("replaceAll")},81006:(k,B,f)=>{f(23483);var b=f(6379),p=f(74258),e=f(27870),t=f(94119),n=f(76539),s=f(35009)("toStringTag");for(var c in b){var _=p[c],w=_&&_.prototype;w&&e(w)!==s&&t(w,s,c),n[c]=n.Array}},28478:(k,B,f)=>{"use strict";f(23483);var b=f(5327),p=f(74258),e=f(26444),t=f(45439),n=f(94800),o=f(30251),s=f(73294),c=f(32914),_=f(8144),w=f(94577),M=f(46053),U=f(7561),V=f(14563),H=f(68739),$=f(94640),pt=f(27870),nt=f(49403),st=f(9616),Ct=f(16096),xt=f(66112),yt=f(25677),ut=f(72442),tt=f(50806),lt=f(35009),ot=f(53904),Lt=lt("iterator"),at="URLSearchParams",dt=at+"Iterator",it=M.set,rt=M.getterFor(at),Gt=M.getterFor(dt),bt=e("fetch"),Ht=e("Request"),ce=e("Headers"),Ye=Ht&&Ht.prototype,de=ce&&ce.prototype,Be=p.RegExp,He=p.TypeError,Ke=p.decodeURIComponent,vi=p.encodeURIComponent,qe=n("".charAt),Ne=n([].join),oi=n([].push),Ft=n("".replace),_e=n([].shift),Xt=n([].splice),Jt=n("".split),Rt=n("".slice),Pt=/\+/g,he=Array(4),ze=function(ui){return he[ui-1]||(he[ui-1]=Be("((?:%[\\da-f]{2}){"+ui+"})","gi"))},le=function(ui){try{return Ke(ui)}catch(Ei){return ui}},jt=function(ui){var Ei=Ft(ui,Pt," "),gi=4;try{return Ke(Ei)}catch(We){for(;gi;)Ei=Ft(Ei,ze(gi--),le);return Ei}},Yt=/[!'()~]|%20/g,ge={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},$t=function(ui){return ge[ui]},oe=function(ui){return Ft(vi(ui),Yt,$t)},re=function(ui,Ei){if(ui<Ei)throw He("Not enough arguments")},Et=w(function(Ei,gi){it(this,{type:dt,iterator:ut(rt(Ei).entries),kind:gi})},"Iterator",function(){var Ei=Gt(this),gi=Ei.kind,We=Ei.iterator.next(),ri=We.value;return We.done||(We.value="keys"===gi?ri.key:"values"===gi?ri.value:[ri.key,ri.value]),We},!0),kt=function(ui){this.entries=[],this.url=null,void 0!==ui&&(st(ui)?this.parseObject(ui):this.parseQuery("string"==typeof ui?"?"===qe(ui,0)?Rt(ui,1):ui:Ct(ui)))};kt.prototype={type:at,bindURL:function(ui){this.url=ui,this.update()},parseObject:function(ui){var gi,We,ri,ue,je,ti,Ri,Ei=tt(ui);if(Ei)for(We=(gi=ut(ui,Ei)).next;!(ri=t(We,gi)).done;){if(ue=ut(nt(ri.value)),(ti=t(je=ue.next,ue)).done||(Ri=t(je,ue)).done||!t(je,ue).done)throw He("Expected sequence with length 2");oi(this.entries,{key:Ct(ti.value),value:Ct(Ri.value)})}else for(var Pe in ui)H(ui,Pe)&&oi(this.entries,{key:Pe,value:Ct(ui[Pe])})},parseQuery:function(ui){if(ui)for(var We,ri,Ei=Jt(ui,"&"),gi=0;gi<Ei.length;)(We=Ei[gi++]).length&&(ri=Jt(We,"="),oi(this.entries,{key:jt(_e(ri)),value:jt(Ne(ri,"="))}))},serialize:function(){for(var We,ui=this.entries,Ei=[],gi=0;gi<ui.length;)We=ui[gi++],oi(Ei,oe(We.key)+"="+oe(We.value));return Ne(Ei,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var we=function(){U(this,Ae);var Ei=arguments.length>0?arguments[0]:void 0;it(this,new kt(Ei))},Ae=we.prototype;if(c(Ae,{append:function(Ei,gi){re(arguments.length,2);var We=rt(this);oi(We.entries,{key:Ct(Ei),value:Ct(gi)}),We.updateURL()},delete:function(ui){re(arguments.length,1);for(var Ei=rt(this),gi=Ei.entries,We=Ct(ui),ri=0;ri<gi.length;)gi[ri].key===We?Xt(gi,ri,1):ri++;Ei.updateURL()},get:function(Ei){re(arguments.length,1);for(var gi=rt(this).entries,We=Ct(Ei),ri=0;ri<gi.length;ri++)if(gi[ri].key===We)return gi[ri].value;return null},getAll:function(Ei){re(arguments.length,1);for(var gi=rt(this).entries,We=Ct(Ei),ri=[],ue=0;ue<gi.length;ue++)gi[ue].key===We&&oi(ri,gi[ue].value);return ri},has:function(Ei){re(arguments.length,1);for(var gi=rt(this).entries,We=Ct(Ei),ri=0;ri<gi.length;)if(gi[ri++].key===We)return!0;return!1},set:function(Ei,gi){re(arguments.length,1);for(var Pe,We=rt(this),ri=We.entries,ue=!1,je=Ct(Ei),ti=Ct(gi),Ri=0;Ri<ri.length;Ri++)(Pe=ri[Ri]).key===je&&(ue?Xt(ri,Ri--,1):(ue=!0,Pe.value=ti));ue||oi(ri,{key:je,value:ti}),We.updateURL()},sort:function(){var Ei=rt(this);ot(Ei.entries,function(gi,We){return gi.key>We.key?1:-1}),Ei.updateURL()},forEach:function(Ei){for(var ue,gi=rt(this).entries,We=$(Ei,arguments.length>1?arguments[1]:void 0),ri=0;ri<gi.length;)We((ue=gi[ri++]).value,ue.key,this)},keys:function(){return new Et(this,"keys")},values:function(){return new Et(this,"values")},entries:function(){return new Et(this,"entries")}},{enumerable:!0}),s(Ae,Lt,Ae.entries,{name:"entries"}),s(Ae,"toString",function(){return rt(this).serialize()},{enumerable:!0}),_(we,at),b({global:!0,forced:!o},{URLSearchParams:we}),!o&&V(ce)){var ci=n(de.has),Ze=n(de.set),li=function(ui){if(st(ui)){var gi,Ei=ui.body;if(pt(Ei)===at)return gi=ui.headers?new ce(ui.headers):new ce,ci(gi,"content-type")||Ze(gi,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),xt(ui,{body:yt(0,Ct(Ei)),headers:yt(0,gi)})}return ui};if(V(bt)&&b({global:!0,enumerable:!0,forced:!0},{fetch:function(Ei){return bt(Ei,arguments.length>1?li(arguments[1]):{})}}),V(Ht)){var Fi=function(Ei){return U(this,Ye),new Ht(Ei,arguments.length>1?li(arguments[1]):{})};Ye.constructor=Fi,Fi.prototype=Ye,b({global:!0,forced:!0},{Request:Fi})}}k.exports={URLSearchParams:we,getState:rt}},82422:(k,B,f)=>{var b=f(82344);k.exports=b},30260:(k,B,f)=>{var b=f(12557);k.exports=b},36575:(k,B,f)=>{var b=f(87183);k.exports=b},41215:(k,B,f)=>{var b=f(65009);k.exports=b},31216:(k,B,f)=>{var b=f(98088);f(81006),k.exports=b},8535:(k,B,f)=>{var b=f(48023);k.exports=b},29114:(k,B,f)=>{f(81006);var b=f(27870),p=f(68739),e=f(61517),t=f(36575),n=Array.prototype,o={DOMTokenList:!0,NodeList:!0};k.exports=function(s){var c=s.entries;return s===n||e(n,s)&&c===n.entries||p(o,b(s))?t:c}},30376:(k,B,f)=>{var b=f(8425);k.exports=b},9102:(k,B,f)=>{var b=f(61008);k.exports=b},88334:(k,B,f)=>{f(81006);var b=f(27870),p=f(68739),e=f(61517),t=f(41215),n=Array.prototype,o={DOMTokenList:!0,NodeList:!0};k.exports=function(s){var c=s.forEach;return s===n||e(n,s)&&c===n.forEach||p(o,b(s))?t:c}},40809:(k,B,f)=>{var b=f(18583);k.exports=b},68379:(k,B,f)=>{var b=f(84676);k.exports=b},40051:(k,B,f)=>{var b=f(59032);k.exports=b},42905:(k,B,f)=>{var b=f(70660);k.exports=b},77120:(k,B,f)=>{var b=f(12256);k.exports=b},47940:(k,B,f)=>{var b=f(14475);k.exports=b},15783:(k,B,f)=>{var b=f(98711);k.exports=b},68397:(k,B,f)=>{var b=f(98169);k.exports=b},31545:(k,B,f)=>{var b=f(31916);k.exports=b},39565:(k,B,f)=>{var b=f(47429);k.exports=b},64043:(k,B,f)=>{var b=f(2487);k.exports=b},63122:(k,B,f)=>{var b=f(77626);k.exports=b},76650:(k,B,f)=>{var b=f(81043);k.exports=b},51266:(k,B,f)=>{var b=f(98838);k.exports=b},69265:(k,B,f)=>{var b=f(63977);k.exports=b},64781:(k,B,f)=>{var b=f(14099);f(81006),k.exports=b},56219:(k,B,f)=>{var b=f(1816);f(81006),k.exports=b},78921:(k,B,f)=>{var b=f(64776);f(81006),k.exports=b},99671:(k,B,f)=>{var b=f(64667);f(81006),k.exports=b},80297:(k,B,f)=>{var b=f(65988);f(81006),k.exports=b},64667:(k,B,f)=>{f(28478);var b=f(52457);k.exports=b.URLSearchParams},11966:function(){var k;k="undefined"!=typeof self?self:this,function(f){var b_searchParams="URLSearchParams"in k,b_iterable="Symbol"in k&&"iterator"in Symbol,b_blob="FileReader"in k&&"Blob"in k&&function(){try{return new Blob,!0}catch(lt){return!1}}(),b_formData="FormData"in k,b_arrayBuffer="ArrayBuffer"in k;if(b_arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],t=ArrayBuffer.isView||function(lt){return lt&&e.indexOf(Object.prototype.toString.call(lt))>-1};function n(lt){if("string"!=typeof lt&&(lt=String(lt)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(lt))throw new TypeError("Invalid character in header field name");return lt.toLowerCase()}function o(lt){return"string"!=typeof lt&&(lt=String(lt)),lt}function s(lt){var ot={next:function(){var Lt=lt.shift();return{done:void 0===Lt,value:Lt}}};return b_iterable&&(ot[Symbol.iterator]=function(){return ot}),ot}function c(lt){this.map={},lt instanceof c?lt.forEach(function(ot,Lt){this.append(Lt,ot)},this):Array.isArray(lt)?lt.forEach(function(ot){this.append(ot[0],ot[1])},this):lt&&Object.getOwnPropertyNames(lt).forEach(function(ot){this.append(ot,lt[ot])},this)}function _(lt){if(lt.bodyUsed)return Promise.reject(new TypeError("Already read"));lt.bodyUsed=!0}function w(lt){return new Promise(function(ot,Lt){lt.onload=function(){ot(lt.result)},lt.onerror=function(){Lt(lt.error)}})}function M(lt){var ot=new FileReader,Lt=w(ot);return ot.readAsArrayBuffer(lt),Lt}function H(lt){if(lt.slice)return lt.slice(0);var ot=new Uint8Array(lt.byteLength);return ot.set(new Uint8Array(lt)),ot.buffer}function $(){return this.bodyUsed=!1,this._initBody=function(lt){this._bodyInit=lt,lt?"string"==typeof lt?this._bodyText=lt:b_blob&&Blob.prototype.isPrototypeOf(lt)?this._bodyBlob=lt:b_formData&&FormData.prototype.isPrototypeOf(lt)?this._bodyFormData=lt:b_searchParams&&URLSearchParams.prototype.isPrototypeOf(lt)?this._bodyText=lt.toString():b_arrayBuffer&&b_blob&&function(lt){return lt&&DataView.prototype.isPrototypeOf(lt)}(lt)?(this._bodyArrayBuffer=H(lt.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):b_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(lt)||t(lt))?this._bodyArrayBuffer=H(lt):this._bodyText=lt=Object.prototype.toString.call(lt):this._bodyText="",this.headers.get("content-type")||("string"==typeof lt?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b_searchParams&&URLSearchParams.prototype.isPrototypeOf(lt)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b_blob&&(this.blob=function(){var lt=_(this);if(lt)return lt;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(M)}),this.text=function(){var lt=_(this);if(lt)return lt;if(this._bodyBlob)return function(lt){var ot=new FileReader,Lt=w(ot);return ot.readAsText(lt),Lt}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(lt){for(var ot=new Uint8Array(lt),Lt=new Array(ot.length),at=0;at<ot.length;at++)Lt[at]=String.fromCharCode(ot[at]);return Lt.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b_formData&&(this.formData=function(){return this.text().then(Ct)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(lt,ot){lt=n(lt),ot=o(ot);var Lt=this.map[lt];this.map[lt]=Lt?Lt+", "+ot:ot},c.prototype.delete=function(lt){delete this.map[n(lt)]},c.prototype.get=function(lt){return lt=n(lt),this.has(lt)?this.map[lt]:null},c.prototype.has=function(lt){return this.map.hasOwnProperty(n(lt))},c.prototype.set=function(lt,ot){this.map[n(lt)]=o(ot)},c.prototype.forEach=function(lt,ot){for(var Lt in this.map)this.map.hasOwnProperty(Lt)&&lt.call(ot,this.map[Lt],Lt,this)},c.prototype.keys=function(){var lt=[];return this.forEach(function(ot,Lt){lt.push(Lt)}),s(lt)},c.prototype.values=function(){var lt=[];return this.forEach(function(ot){lt.push(ot)}),s(lt)},c.prototype.entries=function(){var lt=[];return this.forEach(function(ot,Lt){lt.push([Lt,ot])}),s(lt)},b_iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var pt=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function st(lt,ot){var Lt=(ot=ot||{}).body;if(lt instanceof st){if(lt.bodyUsed)throw new TypeError("Already read");this.url=lt.url,this.credentials=lt.credentials,ot.headers||(this.headers=new c(lt.headers)),this.method=lt.method,this.mode=lt.mode,this.signal=lt.signal,!Lt&&null!=lt._bodyInit&&(Lt=lt._bodyInit,lt.bodyUsed=!0)}else this.url=String(lt);if(this.credentials=ot.credentials||this.credentials||"same-origin",(ot.headers||!this.headers)&&(this.headers=new c(ot.headers)),this.method=function(lt){var ot=lt.toUpperCase();return pt.indexOf(ot)>-1?ot:lt}(ot.method||this.method||"GET"),this.mode=ot.mode||this.mode||null,this.signal=ot.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&Lt)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Lt)}function Ct(lt){var ot=new FormData;return lt.trim().split("&").forEach(function(Lt){if(Lt){var at=Lt.split("="),dt=at.shift().replace(/\+/g," "),it=at.join("=").replace(/\+/g," ");ot.append(decodeURIComponent(dt),decodeURIComponent(it))}}),ot}function xt(lt){var ot=new c;return lt.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(at){var dt=at.split(":"),it=dt.shift().trim();if(it){var rt=dt.join(":").trim();ot.append(it,rt)}}),ot}function yt(lt,ot){ot||(ot={}),this.type="default",this.status=void 0===ot.status?200:ot.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in ot?ot.statusText:"OK",this.headers=new c(ot.headers),this.url=ot.url||"",this._initBody(lt)}st.prototype.clone=function(){return new st(this,{body:this._bodyInit})},$.call(st.prototype),$.call(yt.prototype),yt.prototype.clone=function(){return new yt(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},yt.error=function(){var lt=new yt(null,{status:0,statusText:""});return lt.type="error",lt};var ut=[301,302,303,307,308];yt.redirect=function(lt,ot){if(-1===ut.indexOf(ot))throw new RangeError("Invalid status code");return new yt(null,{status:ot,headers:{location:lt}})},f.DOMException=k.DOMException;try{new f.DOMException}catch(lt){f.DOMException=function(ot,Lt){this.message=ot,this.name=Lt;var at=Error(ot);this.stack=at.stack},f.DOMException.prototype=Object.create(Error.prototype),f.DOMException.prototype.constructor=f.DOMException}function tt(lt,ot){return new Promise(function(Lt,at){var dt=new st(lt,ot);if(dt.signal&&dt.signal.aborted)return at(new f.DOMException("Aborted","AbortError"));var it=new XMLHttpRequest;function rt(){it.abort()}it.onload=function(){var Gt={status:it.status,statusText:it.statusText,headers:xt(it.getAllResponseHeaders()||"")};Gt.url="responseURL"in it?it.responseURL:Gt.headers.get("X-Request-URL"),Lt(new yt("response"in it?it.response:it.responseText,Gt))},it.onerror=function(){at(new TypeError("Network request failed"))},it.ontimeout=function(){at(new TypeError("Network request failed"))},it.onabort=function(){at(new f.DOMException("Aborted","AbortError"))},it.open(dt.method,dt.url,!0),"include"===dt.credentials?it.withCredentials=!0:"omit"===dt.credentials&&(it.withCredentials=!1),"responseType"in it&&b_blob&&(it.responseType="blob"),dt.headers.forEach(function(Gt,bt){it.setRequestHeader(bt,Gt)}),dt.signal&&(dt.signal.addEventListener("abort",rt),it.onreadystatechange=function(){4===it.readyState&&dt.signal.removeEventListener("abort",rt)}),it.send(void 0===dt._bodyInit?null:dt._bodyInit)})}tt.polyfill=!0,k.fetch||(k.fetch=tt,k.Headers=c,k.Request=st,k.Response=yt),f.Headers=c,f.Request=st,f.Response=yt,f.fetch=tt,Object.defineProperty(f,"__esModule",{value:!0})}({})},25320:k=>{"use strict";function B(t){return t instanceof Buffer||t instanceof Date||t instanceof RegExp}function f(t){if(t instanceof Buffer){var n=Buffer.alloc?Buffer.alloc(t.length):new Buffer(t.length);return t.copy(n),n}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);throw new Error("Unexpected situation")}function b(t){var n=[];return t.forEach(function(o,s){n[s]="object"==typeof o&&null!==o?Array.isArray(o)?b(o):B(o)?f(o):e({},o):o}),n}function p(t,n){return"__proto__"===n?void 0:t[n]}var e=k.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var o,s,t=arguments[0],n=Array.prototype.slice.call(arguments,1);return n.forEach(function(_){"object"!=typeof _||null===_||Array.isArray(_)||Object.keys(_).forEach(function(w){if(s=p(t,w),(o=p(_,w))!==t)return"object"!=typeof o||null===o?void(t[w]=o):Array.isArray(o)?void(t[w]=b(o)):B(o)?void(t[w]=f(o)):"object"!=typeof s||null===s||Array.isArray(s)?void(t[w]=e({},o)):void(t[w]=e(s,o))})}),t}},18642:function(k,B){var p;void 0!==(p=function(){"use strict";function t(w,M,U){var V=new XMLHttpRequest;V.open("GET",w),V.responseType="blob",V.onload=function(){_(V.response,M,U)},V.onerror=function(){console.error("could not download file")},V.send()}function n(w){var M=new XMLHttpRequest;M.open("HEAD",w,!1);try{M.send()}catch(U){}return 200<=M.status&&299>=M.status}function o(w){try{w.dispatchEvent(new MouseEvent("click"))}catch(U){var M=document.createEvent("MouseEvents");M.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),w.dispatchEvent(M)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(w,M,U){var V=s.URL||s.webkitURL,H=document.createElement("a");H.download=M=M||w.name||"download",H.rel="noopener","string"==typeof w?(H.href=w,H.origin===location.origin?o(H):n(H.href)?t(w,M,U):o(H,H.target="_blank")):(H.href=V.createObjectURL(w),setTimeout(function(){V.revokeObjectURL(H.href)},4e4),setTimeout(function(){o(H)},0))}:"msSaveOrOpenBlob"in navigator?function(w,M,U){if(M=M||w.name||"download","string"!=typeof w)navigator.msSaveOrOpenBlob(function(w,M){return void 0===M?M={autoBom:!1}:"object"!=typeof M&&(console.warn("Deprecated: Expected third argument to be a object"),M={autoBom:!M}),M.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(w.type)?new Blob(["\ufeff",w],{type:w.type}):w}(w,U),M);else if(n(w))t(w,M,U);else{var V=document.createElement("a");V.href=w,V.target="_blank",setTimeout(function(){o(V)})}}:function(w,M,U,V){if((V=V||open("","_blank"))&&(V.document.title=V.document.body.innerText="downloading..."),"string"==typeof w)return t(w,M,U);var H="application/octet-stream"===w.type,$=/constructor/i.test(s.HTMLElement)||s.safari,pt=/CriOS\/[\d]+/.test(navigator.userAgent);if((pt||H&&$||c)&&"undefined"!=typeof FileReader){var nt=new FileReader;nt.onloadend=function(){var xt=nt.result;xt=pt?xt:xt.replace(/^data:[^;]*;/,"data:attachment/file;"),V?V.location.href=xt:location=xt,V=null},nt.readAsDataURL(w)}else{var st=s.URL||s.webkitURL,Ct=st.createObjectURL(w);V?V.location=Ct:location.href=Ct,V=null,setTimeout(function(){st.revokeObjectURL(Ct)},4e4)}});s.saveAs=_.saveAs=_,k.exports=_}.apply(B,[]))&&(k.exports=p)},5051:k=>{"use strict";var B="Function.prototype.bind called on incompatible ",f=Array.prototype.slice,b=Object.prototype.toString,p="[object Function]";k.exports=function(t){var n=this;if("function"!=typeof n||b.call(n)!==p)throw new TypeError(B+n);for(var s,o=f.call(arguments,1),c=function(){if(this instanceof s){var V=n.apply(this,o.concat(f.call(arguments)));return Object(V)===V?V:this}return n.apply(t,o.concat(f.call(arguments)))},_=Math.max(0,n.length-o.length),w=[],M=0;M<_;M++)w.push("$"+M);if(s=Function("binder","return function ("+w.join(",")+"){ return binder.apply(this,arguments); }")(c),n.prototype){var U=function(){};U.prototype=n.prototype,s.prototype=new U,U.prototype=null}return s}},21113:(k,B,f)=>{"use strict";var b=f(5051);k.exports=Function.prototype.bind||b},4320:(k,B,f)=>{"use strict";var b,p=SyntaxError,e=Function,t=TypeError,n=function(Lt){try{return e('"use strict"; return ('+Lt+").constructor;")()}catch(at){}},o=Object.getOwnPropertyDescriptor;if(o)try{o({},"")}catch(Lt){o=null}var s=function(){throw new t},c=o?function(){try{return s}catch(Lt){try{return o(arguments,"callee").get}catch(at){return s}}}():s,_=f(62832)(),w=Object.getPrototypeOf||function(Lt){return Lt.__proto__},M={},U="undefined"==typeof Uint8Array?b:w(Uint8Array),V={"%AggregateError%":"undefined"==typeof AggregateError?b:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?b:ArrayBuffer,"%ArrayIteratorPrototype%":_?w([][Symbol.iterator]()):b,"%AsyncFromSyncIteratorPrototype%":b,"%AsyncFunction%":M,"%AsyncGenerator%":M,"%AsyncGeneratorFunction%":M,"%AsyncIteratorPrototype%":M,"%Atomics%":"undefined"==typeof Atomics?b:Atomics,"%BigInt%":"undefined"==typeof BigInt?b:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?b:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?b:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?b:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?b:FinalizationRegistry,"%Function%":e,"%GeneratorFunction%":M,"%Int8Array%":"undefined"==typeof Int8Array?b:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?b:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?b:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":_?w(w([][Symbol.iterator]())):b,"%JSON%":"object"==typeof JSON?JSON:b,"%Map%":"undefined"==typeof Map?b:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&_?w((new Map)[Symbol.iterator]()):b,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?b:Promise,"%Proxy%":"undefined"==typeof Proxy?b:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?b:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?b:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&_?w((new Set)[Symbol.iterator]()):b,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?b:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":_?w(""[Symbol.iterator]()):b,"%Symbol%":_?Symbol:b,"%SyntaxError%":p,"%ThrowTypeError%":c,"%TypedArray%":U,"%TypeError%":t,"%Uint8Array%":"undefined"==typeof Uint8Array?b:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?b:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?b:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?b:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?b:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?b:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?b:WeakSet},H=function Lt(at){var dt;if("%AsyncFunction%"===at)dt=n("async function () {}");else if("%GeneratorFunction%"===at)dt=n("function* () {}");else if("%AsyncGeneratorFunction%"===at)dt=n("async function* () {}");else if("%AsyncGenerator%"===at){var it=Lt("%AsyncGeneratorFunction%");it&&(dt=it.prototype)}else if("%AsyncIteratorPrototype%"===at){var rt=Lt("%AsyncGenerator%");rt&&(dt=w(rt.prototype))}return V[at]=dt,dt},$={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pt=f(21113),nt=f(60508),st=pt.call(Function.call,Array.prototype.concat),Ct=pt.call(Function.apply,Array.prototype.splice),xt=pt.call(Function.call,String.prototype.replace),yt=pt.call(Function.call,String.prototype.slice),ut=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,tt=/\\(\\)?/g,lt=function(at){var dt=yt(at,0,1),it=yt(at,-1);if("%"===dt&&"%"!==it)throw new p("invalid intrinsic syntax, expected closing `%`");if("%"===it&&"%"!==dt)throw new p("invalid intrinsic syntax, expected opening `%`");var rt=[];return xt(at,ut,function(Gt,bt,Ht,ce){rt[rt.length]=Ht?xt(ce,tt,"$1"):bt||Gt}),rt},ot=function(at,dt){var rt,it=at;if(nt($,it)&&(it="%"+(rt=$[it])[0]+"%"),nt(V,it)){var Gt=V[it];if(Gt===M&&(Gt=H(it)),void 0===Gt&&!dt)throw new t("intrinsic "+at+" exists, but is not available. Please file an issue!");return{alias:rt,name:it,value:Gt}}throw new p("intrinsic "+at+" does not exist!")};k.exports=function(at,dt){if("string"!=typeof at||0===at.length)throw new t("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof dt)throw new t('"allowMissing" argument must be a boolean');var it=lt(at),rt=it.length>0?it[0]:"",Gt=ot("%"+rt+"%",dt),bt=Gt.name,Ht=Gt.value,ce=!1,Ye=Gt.alias;Ye&&(rt=Ye[0],Ct(it,st([0,1],Ye)));for(var de=1,Be=!0;de<it.length;de+=1){var He=it[de],Ke=yt(He,0,1),vi=yt(He,-1);if(('"'===Ke||"'"===Ke||"`"===Ke||'"'===vi||"'"===vi||"`"===vi)&&Ke!==vi)throw new p("property names with quotes must have matching quotes");if(("constructor"===He||!Be)&&(ce=!0),nt(V,bt="%"+(rt+="."+He)+"%"))Ht=V[bt];else if(null!=Ht){if(!(He in Ht)){if(!dt)throw new t("base intrinsic for "+at+" exists, but the property is not available.");return}if(o&&de+1>=it.length){var qe=o(Ht,He);Ht=(Be=!!qe)&&"get"in qe&&!("originalValue"in qe.get)?qe.get:Ht[He]}else Be=nt(Ht,He),Ht=Ht[He];Be&&!ce&&(V[bt]=Ht)}}return Ht}},62832:(k,B,f)=>{"use strict";var b="undefined"!=typeof Symbol&&Symbol,p=f(22718);k.exports=function(){return"function"==typeof b&&"function"==typeof Symbol&&"symbol"==typeof b("foo")&&"symbol"==typeof Symbol("bar")&&p()}},22718:k=>{"use strict";k.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var f={},b=Symbol("test"),p=Object(b);if("string"==typeof b||"[object Symbol]"!==Object.prototype.toString.call(b)||"[object Symbol]"!==Object.prototype.toString.call(p))return!1;for(b in f[b]=42,f)return!1;if("function"==typeof Object.keys&&0!==Object.keys(f).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(f).length)return!1;var t=Object.getOwnPropertySymbols(f);if(1!==t.length||t[0]!==b||!Object.prototype.propertyIsEnumerable.call(f,b))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(f,b);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},60508:(k,B,f)=>{"use strict";var b=f(21113);k.exports=b.call(Function.call,Object.prototype.hasOwnProperty)},37901:k=>{var ue,f="__lodash_hash_undefined__",b=1/0,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,s=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,w=/\\(\\)?/g,M=/^\[object .+?Constructor\]$/,U="object"==typeof global&&global&&global.Object===Object&&global,V="object"==typeof self&&self&&self.Object===Object&&self,H=U||V||Function("return this")(),nt=Array.prototype,st=Function.prototype,Ct=Object.prototype,xt=H["__core-js_shared__"],yt=(ue=/[^.]+$/.exec(xt&&xt.keys&&xt.keys.IE_PROTO||""))?"Symbol(src)_1."+ue:"",ut=st.toString,tt=Ct.hasOwnProperty,lt=Ct.toString,ot=RegExp("^"+ut.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lt=H.Symbol,at=nt.splice,dt=$t(H,"Map"),it=$t(Object,"create"),rt=Lt?Lt.prototype:void 0,Gt=rt?rt.toString:void 0;function bt(ue){var je=-1,ti=ue?ue.length:0;for(this.clear();++je<ti;){var Ri=ue[je];this.set(Ri[0],Ri[1])}}function He(ue){var je=-1,ti=ue?ue.length:0;for(this.clear();++je<ti;){var Ri=ue[je];this.set(Ri[0],Ri[1])}}function Ft(ue){var je=-1,ti=ue?ue.length:0;for(this.clear();++je<ti;){var Ri=ue[je];this.set(Ri[0],Ri[1])}}function he(ue,je){for(var ti=ue.length;ti--;)if(Ze(ue[ti][0],je))return ti;return-1}function ge(ue,je){var ti=ue.__data__;return function(ue){var je=typeof ue;return"string"==je||"number"==je||"symbol"==je||"boolean"==je?"__proto__"!==ue:null===ue}(je)?ti["string"==typeof je?"string":"hash"]:ti.map}function $t(ue,je){var ti=function(ue,je){return null==ue?void 0:ue[je]}(ue,je);return function(ue){if(!ui(ue)||function(ue){return!!yt&&yt in ue}(ue))return!1;var je=function(ue){var je=ui(ue)?lt.call(ue):"";return"[object Function]"==je||"[object GeneratorFunction]"==je}(ue)||function(ue){var je=!1;if(null!=ue&&"function"!=typeof ue.toString)try{je=!!(ue+"")}catch(ti){}return je}(ue)?ot:M;return je.test(function(ue){if(null!=ue){try{return ut.call(ue)}catch(je){}try{return ue+""}catch(je){}}return""}(ue))}(ti)?ti:void 0}bt.prototype.clear=function(){this.__data__=it?it(null):{}},bt.prototype.delete=function(ue){return this.has(ue)&&delete this.__data__[ue]},bt.prototype.get=function(ue){var je=this.__data__;if(it){var ti=je[ue];return ti===f?void 0:ti}return tt.call(je,ue)?je[ue]:void 0},bt.prototype.has=function(ue){var je=this.__data__;return it?void 0!==je[ue]:tt.call(je,ue)},bt.prototype.set=function(ue,je){return this.__data__[ue]=it&&void 0===je?f:je,this},He.prototype.clear=function(){this.__data__=[]},He.prototype.delete=function(ue){var je=this.__data__,ti=he(je,ue);return!(ti<0||(ti==je.length-1?je.pop():at.call(je,ti,1),0))},He.prototype.get=function(ue){var je=this.__data__,ti=he(je,ue);return ti<0?void 0:je[ti][1]},He.prototype.has=function(ue){return he(this.__data__,ue)>-1},He.prototype.set=function(ue,je){var ti=this.__data__,Ri=he(ti,ue);return Ri<0?ti.push([ue,je]):ti[Ri][1]=je,this},Ft.prototype.clear=function(){this.__data__={hash:new bt,map:new(dt||He),string:new bt}},Ft.prototype.delete=function(ue){return ge(this,ue).delete(ue)},Ft.prototype.get=function(ue){return ge(this,ue).get(ue)},Ft.prototype.has=function(ue){return ge(this,ue).has(ue)},Ft.prototype.set=function(ue,je){return ge(this,ue).set(ue,je),this};var kt=ci(function(ue){ue=function(ue){return null==ue?"":function(ue){if("string"==typeof ue)return ue;if(gi(ue))return Gt?Gt.call(ue):"";var je=ue+"";return"0"==je&&1/ue==-b?"-0":je}(ue)}(ue);var je=[];return s.test(ue)&&je.push(""),ue.replace(c,function(ti,Ri,Pe,ie){je.push(Pe?ie.replace(w,"$1"):Ri||ti)}),je});function we(ue){if("string"==typeof ue||gi(ue))return ue;var je=ue+"";return"0"==je&&1/ue==-b?"-0":je}function ci(ue,je){if("function"!=typeof ue||je&&"function"!=typeof je)throw new TypeError("Expected a function");var ti=function(){var Ri=arguments,Pe=je?je.apply(this,Ri):Ri[0],ie=ti.cache;if(ie.has(Pe))return ie.get(Pe);var Mt=ue.apply(this,Ri);return ti.cache=ie.set(Pe,Mt),Mt};return ti.cache=new(ci.Cache||Ft),ti}function Ze(ue,je){return ue===je||ue!=ue&&je!=je}ci.Cache=Ft;var li=Array.isArray;function ui(ue){var je=typeof ue;return!!ue&&("object"==je||"function"==je)}function gi(ue){return"symbol"==typeof ue||function(ue){return!!ue&&"object"==typeof ue}(ue)&&"[object Symbol]"==lt.call(ue)}k.exports=function(ue,je,ti){var Ri=null==ue?void 0:function(ue,je){je=function(ue,je){if(li(ue))return!1;var ti=typeof ue;return!("number"!=ti&&"symbol"!=ti&&"boolean"!=ti&&null!=ue&&!gi(ue))||o.test(ue)||!n.test(ue)||null!=je&&ue in Object(je)}(je,ue)?[je]:function(ue){return li(ue)?ue:kt(ue)}(je);for(var ti=0,Ri=je.length;null!=ue&&ti<Ri;)ue=ue[we(je[ti++])];return ti&&ti==Ri?ue:void 0}(ue,je);return void 0===Ri?ti:Ri}},20696:(k,B,f)=>{var e=f(18324)(f(56807),"DataView");k.exports=e},54141:(k,B,f)=>{var b=f(39338),p=f(81439),e=f(15136),t=f(48899),n=f(49077);function o(s){var c=-1,_=null==s?0:s.length;for(this.clear();++c<_;){var w=s[c];this.set(w[0],w[1])}}o.prototype.clear=b,o.prototype.delete=p,o.prototype.get=e,o.prototype.has=t,o.prototype.set=n,k.exports=o},943:(k,B,f)=>{var b=f(20900),p=f(84044),e=f(66981),t=f(84629),n=f(62720);function o(s){var c=-1,_=null==s?0:s.length;for(this.clear();++c<_;){var w=s[c];this.set(w[0],w[1])}}o.prototype.clear=b,o.prototype.delete=p,o.prototype.get=e,o.prototype.has=t,o.prototype.set=n,k.exports=o},43664:(k,B,f)=>{var e=f(18324)(f(56807),"Map");k.exports=e},17324:(k,B,f)=>{var b=f(99166),p=f(61222),e=f(22470),t=f(1048),n=f(34186);function o(s){var c=-1,_=null==s?0:s.length;for(this.clear();++c<_;){var w=s[c];this.set(w[0],w[1])}}o.prototype.clear=b,o.prototype.delete=p,o.prototype.get=e,o.prototype.has=t,o.prototype.set=n,k.exports=o},87209:(k,B,f)=>{var e=f(18324)(f(56807),"Promise");k.exports=e},39434:(k,B,f)=>{var e=f(18324)(f(56807),"Set");k.exports=e},71096:(k,B,f)=>{var b=f(943),p=f(47432),e=f(46639),t=f(11372),n=f(38313),o=f(23137);function s(c){var _=this.__data__=new b(c);this.size=_.size}s.prototype.clear=p,s.prototype.delete=e,s.prototype.get=t,s.prototype.has=n,s.prototype.set=o,k.exports=s},5144:(k,B,f)=>{var b=f(56807);k.exports=b.Symbol},68047:(k,B,f)=>{var b=f(56807);k.exports=b.Uint8Array},69847:(k,B,f)=>{var e=f(18324)(f(56807),"WeakMap");k.exports=e},29030:k=>{k.exports=function(f,b){for(var p=-1,e=null==f?0:f.length;++p<e&&!1!==b(f[p],p,f););return f}},94382:k=>{k.exports=function(f,b){for(var p=-1,e=null==f?0:f.length,t=0,n=[];++p<e;){var o=f[p];b(o,p,f)&&(n[t++]=o)}return n}},264:(k,B,f)=>{var b=f(74265),p=f(92526),e=f(87572),t=f(77790),n=f(5021),o=f(18353),c=Object.prototype.hasOwnProperty;k.exports=function(w,M){var U=e(w),V=!U&&p(w),H=!U&&!V&&t(w),$=!U&&!V&&!H&&o(w),pt=U||V||H||$,nt=pt?b(w.length,String):[],st=nt.length;for(var Ct in w)(M||c.call(w,Ct))&&(!pt||!("length"==Ct||H&&("offset"==Ct||"parent"==Ct)||$&&("buffer"==Ct||"byteLength"==Ct||"byteOffset"==Ct)||n(Ct,st)))&&nt.push(Ct);return nt}},9829:k=>{k.exports=function(f,b){for(var p=-1,e=null==f?0:f.length,t=Array(e);++p<e;)t[p]=b(f[p],p,f);return t}},57437:k=>{k.exports=function(f,b){for(var p=-1,e=b.length,t=f.length;++p<e;)f[t+p]=b[p];return f}},49782:(k,B,f)=>{var b=f(75372),p=f(47660),t=Object.prototype.hasOwnProperty;k.exports=function(o,s,c){var _=o[s];(!t.call(o,s)||!p(_,c)||void 0===c&&!(s in o))&&b(o,s,c)}},42128:(k,B,f)=>{var b=f(47660);k.exports=function(e,t){for(var n=e.length;n--;)if(b(e[n][0],t))return n;return-1}},56470:(k,B,f)=>{var b=f(56394),p=f(254);k.exports=function(t,n){return t&&b(n,p(n),t)}},88253:(k,B,f)=>{var b=f(56394),p=f(22174);k.exports=function(t,n){return t&&b(n,p(n),t)}},75372:(k,B,f)=>{var b=f(59891);k.exports=function(e,t,n){"__proto__"==t&&b?b(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},55594:(k,B,f)=>{var b=f(71096),p=f(29030),e=f(49782),t=f(56470),n=f(88253),o=f(61709),s=f(93895),c=f(56306),_=f(81294),w=f(72972),M=f(77449),U=f(24524),V=f(72181),H=f(70334),$=f(80323),pt=f(87572),nt=f(77790),st=f(68586),Ct=f(75388),xt=f(5981),yt=f(254),ut=f(22174),Lt="[object Arguments]",Gt="[object Function]",Ye="[object Object]",le={};le[Lt]=le["[object Array]"]=le["[object ArrayBuffer]"]=le["[object DataView]"]=le["[object Boolean]"]=le["[object Date]"]=le["[object Float32Array]"]=le["[object Float64Array]"]=le["[object Int8Array]"]=le["[object Int16Array]"]=le["[object Int32Array]"]=le["[object Map]"]=le["[object Number]"]=le[Ye]=le["[object RegExp]"]=le["[object Set]"]=le["[object String]"]=le["[object Symbol]"]=le["[object Uint8Array]"]=le["[object Uint8ClampedArray]"]=le["[object Uint16Array]"]=le["[object Uint32Array]"]=!0,le["[object Error]"]=le[Gt]=le["[object WeakMap]"]=!1,k.exports=function jt(Yt,ge,$t,oe,re,Et){var kt,we=1&ge,Ae=2&ge,ci=4&ge;if($t&&(kt=re?$t(Yt,oe,re,Et):$t(Yt)),void 0!==kt)return kt;if(!Ct(Yt))return Yt;var Ze=pt(Yt);if(Ze){if(kt=V(Yt),!we)return s(Yt,kt)}else{var li=U(Yt),Fi=li==Gt||"[object GeneratorFunction]"==li;if(nt(Yt))return o(Yt,we);if(li==Ye||li==Lt||Fi&&!re){if(kt=Ae||Fi?{}:$(Yt),!we)return Ae?_(Yt,n(kt,Yt)):c(Yt,t(kt,Yt))}else{if(!le[li])return re?Yt:{};kt=H(Yt,li,we)}}Et||(Et=new b);var ui=Et.get(Yt);if(ui)return ui;Et.set(Yt,kt),xt(Yt)?Yt.forEach(function(We){kt.add(jt(We,ge,$t,We,Yt,Et))}):st(Yt)&&Yt.forEach(function(We,ri){kt.set(ri,jt(We,ge,$t,ri,Yt,Et))});var gi=Ze?void 0:(ci?Ae?M:w:Ae?ut:yt)(Yt);return p(gi||Yt,function(We,ri){gi&&(We=Yt[ri=We]),e(kt,ri,jt(We,ge,$t,ri,Yt,Et))}),kt}},51328:(k,B,f)=>{var b=f(75388),p=Object.create,e=function(){function t(){}return function(n){if(!b(n))return{};if(p)return p(n);t.prototype=n;var o=new t;return t.prototype=void 0,o}}();k.exports=e},885:(k,B,f)=>{var b=f(12294),p=f(55844);k.exports=function(t,n){for(var o=0,s=(n=b(n,t)).length;null!=t&&o<s;)t=t[p(n[o++])];return o&&o==s?t:void 0}},99262:(k,B,f)=>{var b=f(57437),p=f(87572);k.exports=function(t,n,o){var s=n(t);return p(t)?s:b(s,o(t))}},92663:(k,B,f)=>{var b=f(5144),p=f(36476),e=f(65899),o=b?b.toStringTag:void 0;k.exports=function(c){return null==c?void 0===c?"[object Undefined]":"[object Null]":o&&o in Object(c)?p(c):e(c)}},45446:(k,B,f)=>{var b=f(92663),p=f(3937);k.exports=function(n){return p(n)&&"[object Arguments]"==b(n)}},68306:(k,B,f)=>{var b=f(24524),p=f(3937);k.exports=function(n){return p(n)&&"[object Map]"==b(n)}},42523:(k,B,f)=>{var b=f(83032),p=f(24425),e=f(75388),t=f(18085),o=/^\[object .+?Constructor\]$/,M=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");k.exports=function(V){return!(!e(V)||p(V))&&(b(V)?M:o).test(t(V))}},73256:(k,B,f)=>{var b=f(24524),p=f(3937);k.exports=function(n){return p(n)&&"[object Set]"==b(n)}},66165:(k,B,f)=>{var b=f(92663),p=f(10862),e=f(3937),dt={};dt["[object Float32Array]"]=dt["[object Float64Array]"]=dt["[object Int8Array]"]=dt["[object Int16Array]"]=dt["[object Int32Array]"]=dt["[object Uint8Array]"]=dt["[object Uint8ClampedArray]"]=dt["[object Uint16Array]"]=dt["[object Uint32Array]"]=!0,dt["[object Arguments]"]=dt["[object Array]"]=dt["[object ArrayBuffer]"]=dt["[object Boolean]"]=dt["[object DataView]"]=dt["[object Date]"]=dt["[object Error]"]=dt["[object Function]"]=dt["[object Map]"]=dt["[object Number]"]=dt["[object Object]"]=dt["[object RegExp]"]=dt["[object Set]"]=dt["[object String]"]=dt["[object WeakMap]"]=!1,k.exports=function(rt){return e(rt)&&p(rt.length)&&!!dt[b(rt)]}},69894:(k,B,f)=>{var b=f(21907),p=f(37504),t=Object.prototype.hasOwnProperty;k.exports=function(o){if(!b(o))return p(o);var s=[];for(var c in Object(o))t.call(o,c)&&"constructor"!=c&&s.push(c);return s}},76119:(k,B,f)=>{var b=f(75388),p=f(21907),e=f(20495),n=Object.prototype.hasOwnProperty;k.exports=function(s){if(!b(s))return e(s);var c=p(s),_=[];for(var w in s)"constructor"==w&&(c||!n.call(s,w))||_.push(w);return _}},74265:k=>{k.exports=function(f,b){for(var p=-1,e=Array(f);++p<f;)e[p]=b(p);return e}},78873:(k,B,f)=>{var b=f(5144),p=f(9829),e=f(87572),t=f(2957),o=b?b.prototype:void 0,s=o?o.toString:void 0;k.exports=function c(_){if("string"==typeof _)return _;if(e(_))return p(_,c)+"";if(t(_))return s?s.call(_):"";var w=_+"";return"0"==w&&1/_==-1/0?"-0":w}},76041:k=>{k.exports=function(f){return function(b){return f(b)}}},12294:(k,B,f)=>{var b=f(87572),p=f(36474),e=f(52908),t=f(63881);k.exports=function(o,s){return b(o)?o:p(o,s)?[o]:e(t(o))}},49569:(k,B,f)=>{var b=f(68047);k.exports=function(e){var t=new e.constructor(e.byteLength);return new b(t).set(new b(e)),t}},61709:(k,B,f)=>{k=f.nmd(k);var b=f(56807),p=B&&!B.nodeType&&B,e=p&&k&&!k.nodeType&&k,n=e&&e.exports===p?b.Buffer:void 0,o=n?n.allocUnsafe:void 0;k.exports=function(c,_){if(_)return c.slice();var w=c.length,M=o?o(w):new c.constructor(w);return c.copy(M),M}},96961:(k,B,f)=>{var b=f(49569);k.exports=function(e,t){var n=t?b(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},66766:k=>{var B=/\w*$/;k.exports=function(b){var p=new b.constructor(b.source,B.exec(b));return p.lastIndex=b.lastIndex,p}},74610:(k,B,f)=>{var b=f(5144),p=b?b.prototype:void 0,e=p?p.valueOf:void 0;k.exports=function(n){return e?Object(e.call(n)):{}}},40625:(k,B,f)=>{var b=f(49569);k.exports=function(e,t){var n=t?b(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},93895:k=>{k.exports=function(f,b){var p=-1,e=f.length;for(b||(b=Array(e));++p<e;)b[p]=f[p];return b}},56394:(k,B,f)=>{var b=f(49782),p=f(75372);k.exports=function(t,n,o,s){var c=!o;o||(o={});for(var _=-1,w=n.length;++_<w;){var M=n[_],U=s?s(o[M],t[M],M,o,t):void 0;void 0===U&&(U=t[M]),c?p(o,M,U):b(o,M,U)}return o}},56306:(k,B,f)=>{var b=f(56394),p=f(77664);k.exports=function(t,n){return b(t,p(t),n)}},81294:(k,B,f)=>{var b=f(56394),p=f(19722);k.exports=function(t,n){return b(t,p(t),n)}},17592:(k,B,f)=>{var b=f(56807);k.exports=b["__core-js_shared__"]},59891:(k,B,f)=>{var b=f(18324),p=function(){try{var e=b(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();k.exports=p},89948:k=>{var B="object"==typeof global&&global&&global.Object===Object&&global;k.exports=B},72972:(k,B,f)=>{var b=f(99262),p=f(77664),e=f(254);k.exports=function(n){return b(n,e,p)}},77449:(k,B,f)=>{var b=f(99262),p=f(19722),e=f(22174);k.exports=function(n){return b(n,e,p)}},1520:(k,B,f)=>{var b=f(90149);k.exports=function(e,t){var n=e.__data__;return b(t)?n["string"==typeof t?"string":"hash"]:n.map}},18324:(k,B,f)=>{var b=f(42523),p=f(45278);k.exports=function(t,n){var o=p(t,n);return b(o)?o:void 0}},32341:(k,B,f)=>{var p=f(49219)(Object.getPrototypeOf,Object);k.exports=p},36476:(k,B,f)=>{var b=f(5144),p=Object.prototype,e=p.hasOwnProperty,t=p.toString,n=b?b.toStringTag:void 0;k.exports=function(s){var c=e.call(s,n),_=s[n];try{s[n]=void 0;var w=!0}catch(U){}var M=t.call(s);return w&&(c?s[n]=_:delete s[n]),M}},77664:(k,B,f)=>{var b=f(94382),p=f(75289),t=Object.prototype.propertyIsEnumerable,n=Object.getOwnPropertySymbols;k.exports=n?function(s){return null==s?[]:(s=Object(s),b(n(s),function(c){return t.call(s,c)}))}:p},19722:(k,B,f)=>{var b=f(57437),p=f(32341),e=f(77664),t=f(75289);k.exports=Object.getOwnPropertySymbols?function(s){for(var c=[];s;)b(c,e(s)),s=p(s);return c}:t},24524:(k,B,f)=>{var b=f(20696),p=f(43664),e=f(87209),t=f(39434),n=f(69847),o=f(92663),s=f(18085),c="[object Map]",w="[object Promise]",M="[object Set]",U="[object WeakMap]",V="[object DataView]",H=s(b),$=s(p),pt=s(e),nt=s(t),st=s(n),Ct=o;(b&&Ct(new b(new ArrayBuffer(1)))!=V||p&&Ct(new p)!=c||e&&Ct(e.resolve())!=w||t&&Ct(new t)!=M||n&&Ct(new n)!=U)&&(Ct=function(xt){var yt=o(xt),ut="[object Object]"==yt?xt.constructor:void 0,tt=ut?s(ut):"";if(tt)switch(tt){case H:return V;case $:return c;case pt:return w;case nt:return M;case st:return U}return yt}),k.exports=Ct},45278:k=>{k.exports=function(f,b){return null==f?void 0:f[b]}},39338:(k,B,f)=>{var b=f(24039);k.exports=function(){this.__data__=b?b(null):{},this.size=0}},81439:k=>{k.exports=function(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}},15136:(k,B,f)=>{var b=f(24039),t=Object.prototype.hasOwnProperty;k.exports=function(o){var s=this.__data__;if(b){var c=s[o];return"__lodash_hash_undefined__"===c?void 0:c}return t.call(s,o)?s[o]:void 0}},48899:(k,B,f)=>{var b=f(24039),e=Object.prototype.hasOwnProperty;k.exports=function(n){var o=this.__data__;return b?void 0!==o[n]:e.call(o,n)}},49077:(k,B,f)=>{var b=f(24039);k.exports=function(t,n){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=b&&void 0===n?"__lodash_hash_undefined__":n,this}},72181:k=>{var f=Object.prototype.hasOwnProperty;k.exports=function(p){var e=p.length,t=new p.constructor(e);return e&&"string"==typeof p[0]&&f.call(p,"index")&&(t.index=p.index,t.input=p.input),t}},70334:(k,B,f)=>{var b=f(49569),p=f(96961),e=f(66766),t=f(74610),n=f(40625);k.exports=function(Lt,at,dt){var it=Lt.constructor;switch(at){case"[object ArrayBuffer]":return b(Lt);case"[object Boolean]":case"[object Date]":return new it(+Lt);case"[object DataView]":return p(Lt,dt);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n(Lt,dt);case"[object Map]":case"[object Set]":return new it;case"[object Number]":case"[object String]":return new it(Lt);case"[object RegExp]":return e(Lt);case"[object Symbol]":return t(Lt)}}},80323:(k,B,f)=>{var b=f(51328),p=f(32341),e=f(21907);k.exports=function(n){return"function"!=typeof n.constructor||e(n)?{}:b(p(n))}},5021:k=>{var f=/^(?:0|[1-9]\d*)$/;k.exports=function(p,e){var t=typeof p;return!!(e=null==e?9007199254740991:e)&&("number"==t||"symbol"!=t&&f.test(p))&&p>-1&&p%1==0&&p<e}},36474:(k,B,f)=>{var b=f(87572),p=f(2957),e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,t=/^\w*$/;k.exports=function(o,s){if(b(o))return!1;var c=typeof o;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=o&&!p(o))||t.test(o)||!e.test(o)||null!=s&&o in Object(s)}},90149:k=>{k.exports=function(f){var b=typeof f;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==f:null===f}},24425:(k,B,f)=>{var t,b=f(17592),p=(t=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"";k.exports=function(t){return!!p&&p in t}},21907:k=>{var B=Object.prototype;k.exports=function(b){var p=b&&b.constructor;return b===("function"==typeof p&&p.prototype||B)}},20900:k=>{k.exports=function(){this.__data__=[],this.size=0}},84044:(k,B,f)=>{var b=f(42128),e=Array.prototype.splice;k.exports=function(n){var o=this.__data__,s=b(o,n);return!(s<0||(s==o.length-1?o.pop():e.call(o,s,1),--this.size,0))}},66981:(k,B,f)=>{var b=f(42128);k.exports=function(e){var t=this.__data__,n=b(t,e);return n<0?void 0:t[n][1]}},84629:(k,B,f)=>{var b=f(42128);k.exports=function(e){return b(this.__data__,e)>-1}},62720:(k,B,f)=>{var b=f(42128);k.exports=function(e,t){var n=this.__data__,o=b(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},99166:(k,B,f)=>{var b=f(54141),p=f(943),e=f(43664);k.exports=function(){this.size=0,this.__data__={hash:new b,map:new(e||p),string:new b}}},61222:(k,B,f)=>{var b=f(1520);k.exports=function(e){var t=b(this,e).delete(e);return this.size-=t?1:0,t}},22470:(k,B,f)=>{var b=f(1520);k.exports=function(e){return b(this,e).get(e)}},1048:(k,B,f)=>{var b=f(1520);k.exports=function(e){return b(this,e).has(e)}},34186:(k,B,f)=>{var b=f(1520);k.exports=function(e,t){var n=b(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},23213:(k,B,f)=>{var b=f(26504);k.exports=function(t){var n=b(t,function(s){return 500===o.size&&o.clear(),s}),o=n.cache;return n}},24039:(k,B,f)=>{var p=f(18324)(Object,"create");k.exports=p},37504:(k,B,f)=>{var p=f(49219)(Object.keys,Object);k.exports=p},20495:k=>{k.exports=function(f){var b=[];if(null!=f)for(var p in Object(f))b.push(p);return b}},57662:(k,B,f)=>{k=f.nmd(k);var b=f(89948),p=B&&!B.nodeType&&B,e=p&&k&&!k.nodeType&&k,n=e&&e.exports===p&&b.process,o=function(){try{return e&&e.require&&e.require("util").types||n&&n.binding&&n.binding("util")}catch(c){}}();k.exports=o},65899:k=>{var f=Object.prototype.toString;k.exports=function(p){return f.call(p)}},49219:k=>{k.exports=function(f,b){return function(p){return f(b(p))}}},56807:(k,B,f)=>{var b=f(89948),p="object"==typeof self&&self&&self.Object===Object&&self,e=b||p||Function("return this")();k.exports=e},47432:(k,B,f)=>{var b=f(943);k.exports=function(){this.__data__=new b,this.size=0}},46639:k=>{k.exports=function(f){var b=this.__data__,p=b.delete(f);return this.size=b.size,p}},11372:k=>{k.exports=function(f){return this.__data__.get(f)}},38313:k=>{k.exports=function(f){return this.__data__.has(f)}},23137:(k,B,f)=>{var b=f(943),p=f(43664),e=f(17324);k.exports=function(o,s){var c=this.__data__;if(c instanceof b){var _=c.__data__;if(!p||_.length<199)return _.push([o,s]),this.size=++c.size,this;c=this.__data__=new e(_)}return c.set(o,s),this.size=c.size,this}},52908:(k,B,f)=>{var b=f(23213),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e=/\\(\\)?/g,t=b(function(n){var o=[];return 46===n.charCodeAt(0)&&o.push(""),n.replace(p,function(s,c,_,w){o.push(_?w.replace(e,"$1"):c||s)}),o});k.exports=t},55844:(k,B,f)=>{var b=f(2957);k.exports=function(t){if("string"==typeof t||b(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},18085:k=>{var f=Function.prototype.toString;k.exports=function(p){if(null!=p){try{return f.call(p)}catch(e){}try{return p+""}catch(e){}}return""}},77282:(k,B,f)=>{var b=f(55594);k.exports=function(n){return b(n,5)}},47660:k=>{k.exports=function(f,b){return f===b||f!=f&&b!=b}},60778:(k,B,f)=>{var b=f(885);k.exports=function(e,t,n){var o=null==e?void 0:b(e,t);return void 0===o?n:o}},92526:(k,B,f)=>{var b=f(45446),p=f(3937),e=Object.prototype,t=e.hasOwnProperty,n=e.propertyIsEnumerable,o=b(function(){return arguments}())?b:function(s){return p(s)&&t.call(s,"callee")&&!n.call(s,"callee")};k.exports=o},87572:k=>{k.exports=Array.isArray},32292:(k,B,f)=>{var b=f(83032),p=f(10862);k.exports=function(t){return null!=t&&p(t.length)&&!b(t)}},77790:(k,B,f)=>{k=f.nmd(k);var b=f(56807),p=f(88603),e=B&&!B.nodeType&&B,t=e&&k&&!k.nodeType&&k,o=t&&t.exports===e?b.Buffer:void 0;k.exports=(o?o.isBuffer:void 0)||p},18421:(k,B,f)=>{var b=f(69894),p=f(24524),e=f(92526),t=f(87572),n=f(32292),o=f(77790),s=f(21907),c=f(18353),U=Object.prototype.hasOwnProperty;k.exports=function(H){if(null==H)return!0;if(n(H)&&(t(H)||"string"==typeof H||"function"==typeof H.splice||o(H)||c(H)||e(H)))return!H.length;var $=p(H);if("[object Map]"==$||"[object Set]"==$)return!H.size;if(s(H))return!b(H).length;for(var pt in H)if(U.call(H,pt))return!1;return!0}},83032:(k,B,f)=>{var b=f(92663),p=f(75388);k.exports=function(c){if(!p(c))return!1;var _=b(c);return"[object Function]"==_||"[object GeneratorFunction]"==_||"[object AsyncFunction]"==_||"[object Proxy]"==_}},10862:k=>{k.exports=function(b){return"number"==typeof b&&b>-1&&b%1==0&&b<=9007199254740991}},68586:(k,B,f)=>{var b=f(68306),p=f(76041),e=f(57662),t=e&&e.isMap,n=t?p(t):b;k.exports=n},75388:k=>{k.exports=function(f){var b=typeof f;return null!=f&&("object"==b||"function"==b)}},3937:k=>{k.exports=function(f){return null!=f&&"object"==typeof f}},12507:(k,B,f)=>{var b=f(92663),p=f(32341),e=f(3937),s=Function.prototype.toString,c=Object.prototype.hasOwnProperty,_=s.call(Object);k.exports=function(M){if(!e(M)||"[object Object]"!=b(M))return!1;var U=p(M);if(null===U)return!0;var V=c.call(U,"constructor")&&U.constructor;return"function"==typeof V&&V instanceof V&&s.call(V)==_}},5981:(k,B,f)=>{var b=f(73256),p=f(76041),e=f(57662),t=e&&e.isSet,n=t?p(t):b;k.exports=n},2957:(k,B,f)=>{var b=f(92663),p=f(3937);k.exports=function(n){return"symbol"==typeof n||p(n)&&"[object Symbol]"==b(n)}},18353:(k,B,f)=>{var b=f(66165),p=f(76041),e=f(57662),t=e&&e.isTypedArray,n=t?p(t):b;k.exports=n},254:(k,B,f)=>{var b=f(264),p=f(69894),e=f(32292);k.exports=function(n){return e(n)?b(n):p(n)}},22174:(k,B,f)=>{var b=f(264),p=f(76119),e=f(32292);k.exports=function(n){return e(n)?b(n,!0):p(n)}},26504:(k,B,f)=>{var b=f(17324);function e(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var o=function(){var s=arguments,c=n?n.apply(this,s):s[0],_=o.cache;if(_.has(c))return _.get(c);var w=t.apply(this,s);return o.cache=_.set(c,w)||_,w};return o.cache=new(e.Cache||b),o}e.Cache=b,k.exports=e},75289:k=>{k.exports=function(){return[]}},88603:k=>{k.exports=function(){return!1}},63881:(k,B,f)=>{var b=f(78873);k.exports=function(e){return null==e?"":b(e)}},59009:(k,B,f)=>{var b="function"==typeof Map&&Map.prototype,p=Object.getOwnPropertyDescriptor&&b?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=b&&p&&"function"==typeof p.get?p.get:null,t=b&&Map.prototype.forEach,n="function"==typeof Set&&Set.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,s=n&&o&&"function"==typeof o.get?o.get:null,c=n&&Set.prototype.forEach,w="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,U="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,H="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,$=Boolean.prototype.valueOf,pt=Object.prototype.toString,nt=Function.prototype.toString,st=String.prototype.match,Ct="function"==typeof BigInt?BigInt.prototype.valueOf:null,xt=Object.getOwnPropertySymbols,yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ut="function"==typeof Symbol&&"object"==typeof Symbol.iterator,tt="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,lt=Object.prototype.propertyIsEnumerable,ot=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Et){return Et.__proto__}:null),Lt=f(96553).custom,at=Lt&&Be(Lt)?Lt:null;function dt(Et,kt,we){var Ae="double"===(we.quoteStyle||kt)?'"':"'";return Ae+Et+Ae}function it(Et){return String(Et).replace(/"/g,"&quot;")}function rt(Et){return!("[object Array]"!==qe(Et)||tt&&"object"==typeof Et&&tt in Et)}function Be(Et){if(ut)return Et&&"object"==typeof Et&&Et instanceof Symbol;if("symbol"==typeof Et)return!0;if(!Et||"object"!=typeof Et||!yt)return!1;try{return yt.call(Et),!0}catch(kt){}return!1}k.exports=function Et(kt,we,Ae,ci){var Ze=we||{};if(vi(Ze,"quoteStyle")&&"single"!==Ze.quoteStyle&&"double"!==Ze.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(vi(Ze,"maxStringLength")&&("number"==typeof Ze.maxStringLength?Ze.maxStringLength<0&&Ze.maxStringLength!==1/0:null!==Ze.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var li=!vi(Ze,"customInspect")||Ze.customInspect;if("boolean"!=typeof li&&"symbol"!==li)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(vi(Ze,"indent")&&null!==Ze.indent&&"\t"!==Ze.indent&&!(parseInt(Ze.indent,10)===Ze.indent&&Ze.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===kt)return"undefined";if(null===kt)return"null";if("boolean"==typeof kt)return kt?"true":"false";if("string"==typeof kt)return he(kt,Ze);if("number"==typeof kt)return 0===kt?1/0/kt>0?"0":"-0":String(kt);if("bigint"==typeof kt)return String(kt)+"n";var Fi=void 0===Ze.depth?5:Ze.depth;if(void 0===Ae&&(Ae=0),Ae>=Fi&&Fi>0&&"object"==typeof kt)return rt(kt)?"[Array]":"[Object]";var ui=function(Et,kt){var we;if("\t"===Et.indent)we="\t";else{if(!("number"==typeof Et.indent&&Et.indent>0))return null;we=Array(Et.indent+1).join(" ")}return{base:we,prev:Array(kt+1).join(we)}}(Ze,Ae);if(void 0===ci)ci=[];else if(oi(ci,kt)>=0)return"[Circular]";function Ei(Zi,Sn,$e){if(Sn&&(ci=ci.slice()).push(Sn),$e){var Me={depth:Ze.depth};return vi(Ze,"quoteStyle")&&(Me.quoteStyle=Ze.quoteStyle),Et(Zi,Me,Ae+1,ci)}return Et(Zi,Ze,Ae+1,ci)}if("function"==typeof kt){var gi=function(Et){if(Et.name)return Et.name;var kt=st.call(nt.call(Et),/^function\s*([\w$]+)/);return kt?kt[1]:null}(kt),We=re(kt,Ei);return"[Function"+(gi?": "+gi:" (anonymous)")+"]"+(We.length>0?" { "+We.join(", ")+" }":"")}if(Be(kt)){var ri=ut?String(kt).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):yt.call(kt);return"object"!=typeof kt||ut?ri:le(ri)}if(function(Et){return!(!Et||"object"!=typeof Et)&&("undefined"!=typeof HTMLElement&&Et instanceof HTMLElement||"string"==typeof Et.nodeName&&"function"==typeof Et.getAttribute)}(kt)){for(var ue="<"+String(kt.nodeName).toLowerCase(),je=kt.attributes||[],ti=0;ti<je.length;ti++)ue+=" "+je[ti].name+"="+dt(it(je[ti].value),"double",Ze);return ue+=">",kt.childNodes&&kt.childNodes.length&&(ue+="..."),ue+"</"+String(kt.nodeName).toLowerCase()+">"}if(rt(kt)){if(0===kt.length)return"[]";var Ri=re(kt,Ei);return ui&&!function(Et){for(var kt=0;kt<Et.length;kt++)if(oi(Et[kt],"\n")>=0)return!1;return!0}(Ri)?"["+oe(Ri,ui)+"]":"[ "+Ri.join(", ")+" ]"}if(function(Et){return!("[object Error]"!==qe(Et)||tt&&"object"==typeof Et&&tt in Et)}(kt)){var Pe=re(kt,Ei);return 0===Pe.length?"["+String(kt)+"]":"{ ["+String(kt)+"] "+Pe.join(", ")+" }"}if("object"==typeof kt&&li){if(at&&"function"==typeof kt[at])return kt[at]();if("symbol"!==li&&"function"==typeof kt.inspect)return kt.inspect()}if(function(Et){if(!e||!Et||"object"!=typeof Et)return!1;try{e.call(Et);try{s.call(Et)}catch(kt){return!0}return Et instanceof Map}catch(kt){}return!1}(kt)){var ie=[];return t.call(kt,function(Zi,Sn){ie.push(Ei(Sn,kt,!0)+" => "+Ei(Zi,kt))}),Yt("Map",e.call(kt),ie,ui)}if(function(Et){if(!s||!Et||"object"!=typeof Et)return!1;try{s.call(Et);try{e.call(Et)}catch(kt){return!0}return Et instanceof Set}catch(kt){}return!1}(kt)){var Mt=[];return c.call(kt,function(Zi){Mt.push(Ei(Zi,kt))}),Yt("Set",s.call(kt),Mt,ui)}if(function(Et){if(!w||!Et||"object"!=typeof Et)return!1;try{w.call(Et,w);try{U.call(Et,U)}catch(kt){return!0}return Et instanceof WeakMap}catch(kt){}return!1}(kt))return jt("WeakMap");if(function(Et){if(!U||!Et||"object"!=typeof Et)return!1;try{U.call(Et,U);try{w.call(Et,w)}catch(kt){return!0}return Et instanceof WeakSet}catch(kt){}return!1}(kt))return jt("WeakSet");if(function(Et){if(!H||!Et||"object"!=typeof Et)return!1;try{return H.call(Et),!0}catch(kt){}return!1}(kt))return jt("WeakRef");if(function(Et){return!("[object Number]"!==qe(Et)||tt&&"object"==typeof Et&&tt in Et)}(kt))return le(Ei(Number(kt)));if(function(Et){if(!Et||"object"!=typeof Et||!Ct)return!1;try{return Ct.call(Et),!0}catch(kt){}return!1}(kt))return le(Ei(Ct.call(kt)));if(function(Et){return!("[object Boolean]"!==qe(Et)||tt&&"object"==typeof Et&&tt in Et)}(kt))return le($.call(kt));if(function(Et){return!("[object String]"!==qe(Et)||tt&&"object"==typeof Et&&tt in Et)}(kt))return le(Ei(String(kt)));if(!function(Et){return!("[object Date]"!==qe(Et)||tt&&"object"==typeof Et&&tt in Et)}(kt)&&!function(Et){return!("[object RegExp]"!==qe(Et)||tt&&"object"==typeof Et&&tt in Et)}(kt)){var ct=re(kt,Ei),It=ot?ot(kt)===Object.prototype:kt instanceof Object||kt.constructor===Object,te=kt instanceof Object?"":"null prototype",ve=!It&&tt&&Object(kt)===kt&&tt in kt?qe(kt).slice(8,-1):te?"Object":"",ki=(It||"function"!=typeof kt.constructor?"":kt.constructor.name?kt.constructor.name+" ":"")+(ve||te?"["+[].concat(ve||[],te||[]).join(": ")+"] ":"");return 0===ct.length?ki+"{}":ui?ki+"{"+oe(ct,ui)+"}":ki+"{ "+ct.join(", ")+" }"}return String(kt)};var Ke=Object.prototype.hasOwnProperty||function(Et){return Et in this};function vi(Et,kt){return Ke.call(Et,kt)}function qe(Et){return pt.call(Et)}function oi(Et,kt){if(Et.indexOf)return Et.indexOf(kt);for(var we=0,Ae=Et.length;we<Ae;we++)if(Et[we]===kt)return we;return-1}function he(Et,kt){if(Et.length>kt.maxStringLength){var we=Et.length-kt.maxStringLength,Ae="... "+we+" more character"+(we>1?"s":"");return he(Et.slice(0,kt.maxStringLength),kt)+Ae}return dt(Et.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,ze),"single",kt)}function ze(Et){var kt=Et.charCodeAt(0),we={8:"b",9:"t",10:"n",12:"f",13:"r"}[kt];return we?"\\"+we:"\\x"+(kt<16?"0":"")+kt.toString(16).toUpperCase()}function le(Et){return"Object("+Et+")"}function jt(Et){return Et+" { ? }"}function Yt(Et,kt,we,Ae){return Et+" ("+kt+") {"+(Ae?oe(we,Ae):we.join(", "))+"}"}function oe(Et,kt){if(0===Et.length)return"";var we="\n"+kt.prev+kt.base;return we+Et.join(","+we)+"\n"+kt.prev}function re(Et,kt){var we=rt(Et),Ae=[];if(we){Ae.length=Et.length;for(var ci=0;ci<Et.length;ci++)Ae[ci]=vi(Et,ci)?kt(Et[ci],Et):""}var li,Ze="function"==typeof xt?xt(Et):[];if(ut){li={};for(var Fi=0;Fi<Ze.length;Fi++)li["$"+Ze[Fi]]=Ze[Fi]}for(var ui in Et)!vi(Et,ui)||we&&String(Number(ui))===ui&&ui<Et.length||ut&&li["$"+ui]instanceof Symbol||(/[^\w$]/.test(ui)?Ae.push(kt(ui,Et)+": "+kt(Et[ui],Et)):Ae.push(ui+": "+kt(Et[ui],Et)));if("function"==typeof xt)for(var Ei=0;Ei<Ze.length;Ei++)lt.call(Et,Ze[Ei])&&Ae.push("["+kt(Ze[Ei])+"]: "+kt(Et[Ze[Ei]],Et));return Ae}},70721:k=>{"use strict";function B(f,b){return Object.prototype.hasOwnProperty.call(f,b)}k.exports=function(f,b,p,e){p=p||"=";var t={};if("string"!=typeof f||0===f.length)return t;var n=/\+/g;f=f.split(b=b||"&");var o=1e3;e&&"number"==typeof e.maxKeys&&(o=e.maxKeys);var s=f.length;o>0&&s>o&&(s=o);for(var c=0;c<s;++c){var M,U,V,H,_=f[c].replace(n,"%20"),w=_.indexOf(p);w>=0?(M=_.substr(0,w),U=_.substr(w+1)):(M=_,U=""),V=decodeURIComponent(M),H=decodeURIComponent(U),B(t,V)?Array.isArray(t[V])?t[V].push(H):t[V]=[t[V],H]:t[V]=H}return t}},75892:k=>{"use strict";var B=function(f){switch(typeof f){case"string":return f;case"boolean":return f?"true":"false";case"number":return isFinite(f)?f:"";default:return""}};k.exports=function(f,b,p,e){return b=b||"&",p=p||"=",null===f&&(f=void 0),"object"==typeof f?Object.keys(f).map(function(t){var n=encodeURIComponent(B(t))+p;return Array.isArray(f[t])?f[t].map(function(o){return n+encodeURIComponent(B(o))}).join(b):n+encodeURIComponent(B(f[t]))}).join(b):e?encodeURIComponent(B(e))+p+encodeURIComponent(B(f)):""}},36e3:(k,B,f)=>{"use strict";B.decode=B.parse=f(70721),B.encode=B.stringify=f(75892)},26029:k=>{var B=function(f){"use strict";var e,b=Object.prototype,p=b.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.asyncIterator||"@@asyncIterator",s=t.toStringTag||"@@toStringTag";function c(bt,Ht,ce){return Object.defineProperty(bt,Ht,{value:ce,enumerable:!0,configurable:!0,writable:!0}),bt[Ht]}try{c({},"")}catch(bt){c=function(Ht,ce,Ye){return Ht[ce]=Ye}}function _(bt,Ht,ce,Ye){var Be=Object.create((Ht&&Ht.prototype instanceof pt?Ht:pt).prototype),He=new it(Ye||[]);return Be._invoke=function(bt,Ht,ce){var Ye=M;return function(Be,He){if(Ye===V)throw new Error("Generator is already running");if(Ye===H){if("throw"===Be)throw He;return Gt()}for(ce.method=Be,ce.arg=He;;){var Ke=ce.delegate;if(Ke){var vi=Lt(Ke,ce);if(vi){if(vi===$)continue;return vi}}if("next"===ce.method)ce.sent=ce._sent=ce.arg;else if("throw"===ce.method){if(Ye===M)throw Ye=H,ce.arg;ce.dispatchException(ce.arg)}else"return"===ce.method&&ce.abrupt("return",ce.arg);Ye=V;var qe=w(bt,Ht,ce);if("normal"===qe.type){if(Ye=ce.done?H:U,qe.arg===$)continue;return{value:qe.arg,done:ce.done}}"throw"===qe.type&&(Ye=H,ce.method="throw",ce.arg=qe.arg)}}}(bt,ce,He),Be}function w(bt,Ht,ce){try{return{type:"normal",arg:bt.call(Ht,ce)}}catch(Ye){return{type:"throw",arg:Ye}}}f.wrap=_;var M="suspendedStart",U="suspendedYield",V="executing",H="completed",$={};function pt(){}function nt(){}function st(){}var Ct={};c(Ct,n,function(){return this});var xt=Object.getPrototypeOf,yt=xt&&xt(xt(rt([])));yt&&yt!==b&&p.call(yt,n)&&(Ct=yt);var ut=st.prototype=pt.prototype=Object.create(Ct);function tt(bt){["next","throw","return"].forEach(function(Ht){c(bt,Ht,function(ce){return this._invoke(Ht,ce)})})}function lt(bt,Ht){function ce(Be,He,Ke,vi){var qe=w(bt[Be],bt,He);if("throw"!==qe.type){var Ne=qe.arg,oi=Ne.value;return oi&&"object"==typeof oi&&p.call(oi,"__await")?Ht.resolve(oi.__await).then(function(Ft){ce("next",Ft,Ke,vi)},function(Ft){ce("throw",Ft,Ke,vi)}):Ht.resolve(oi).then(function(Ft){Ne.value=Ft,Ke(Ne)},function(Ft){return ce("throw",Ft,Ke,vi)})}vi(qe.arg)}var Ye;this._invoke=function(Be,He){function Ke(){return new Ht(function(vi,qe){ce(Be,He,vi,qe)})}return Ye=Ye?Ye.then(Ke,Ke):Ke()}}function Lt(bt,Ht){var ce=bt.iterator[Ht.method];if(ce===e){if(Ht.delegate=null,"throw"===Ht.method){if(bt.iterator.return&&(Ht.method="return",Ht.arg=e,Lt(bt,Ht),"throw"===Ht.method))return $;Ht.method="throw",Ht.arg=new TypeError("The iterator does not provide a 'throw' method")}return $}var Ye=w(ce,bt.iterator,Ht.arg);if("throw"===Ye.type)return Ht.method="throw",Ht.arg=Ye.arg,Ht.delegate=null,$;var de=Ye.arg;return de?de.done?(Ht[bt.resultName]=de.value,Ht.next=bt.nextLoc,"return"!==Ht.method&&(Ht.method="next",Ht.arg=e),Ht.delegate=null,$):de:(Ht.method="throw",Ht.arg=new TypeError("iterator result is not an object"),Ht.delegate=null,$)}function at(bt){var Ht={tryLoc:bt[0]};1 in bt&&(Ht.catchLoc=bt[1]),2 in bt&&(Ht.finallyLoc=bt[2],Ht.afterLoc=bt[3]),this.tryEntries.push(Ht)}function dt(bt){var Ht=bt.completion||{};Ht.type="normal",delete Ht.arg,bt.completion=Ht}function it(bt){this.tryEntries=[{tryLoc:"root"}],bt.forEach(at,this),this.reset(!0)}function rt(bt){if(bt){var Ht=bt[n];if(Ht)return Ht.call(bt);if("function"==typeof bt.next)return bt;if(!isNaN(bt.length)){var ce=-1,Ye=function de(){for(;++ce<bt.length;)if(p.call(bt,ce))return de.value=bt[ce],de.done=!1,de;return de.value=e,de.done=!0,de};return Ye.next=Ye}}return{next:Gt}}function Gt(){return{value:e,done:!0}}return nt.prototype=st,c(ut,"constructor",st),c(st,"constructor",nt),nt.displayName=c(st,s,"GeneratorFunction"),f.isGeneratorFunction=function(bt){var Ht="function"==typeof bt&&bt.constructor;return!!Ht&&(Ht===nt||"GeneratorFunction"===(Ht.displayName||Ht.name))},f.mark=function(bt){return Object.setPrototypeOf?Object.setPrototypeOf(bt,st):(bt.__proto__=st,c(bt,s,"GeneratorFunction")),bt.prototype=Object.create(ut),bt},f.awrap=function(bt){return{__await:bt}},tt(lt.prototype),c(lt.prototype,o,function(){return this}),f.AsyncIterator=lt,f.async=function(bt,Ht,ce,Ye,de){void 0===de&&(de=Promise);var Be=new lt(_(bt,Ht,ce,Ye),de);return f.isGeneratorFunction(Ht)?Be:Be.next().then(function(He){return He.done?He.value:Be.next()})},tt(ut),c(ut,s,"Generator"),c(ut,n,function(){return this}),c(ut,"toString",function(){return"[object Generator]"}),f.keys=function(bt){var Ht=[];for(var ce in bt)Ht.push(ce);return Ht.reverse(),function Ye(){for(;Ht.length;){var de=Ht.pop();if(de in bt)return Ye.value=de,Ye.done=!1,Ye}return Ye.done=!0,Ye}},f.values=rt,it.prototype={constructor:it,reset:function(bt){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(dt),!bt)for(var Ht in this)"t"===Ht.charAt(0)&&p.call(this,Ht)&&!isNaN(+Ht.slice(1))&&(this[Ht]=e)},stop:function(){this.done=!0;var Ht=this.tryEntries[0].completion;if("throw"===Ht.type)throw Ht.arg;return this.rval},dispatchException:function(bt){if(this.done)throw bt;var Ht=this;function ce(vi,qe){return Be.type="throw",Be.arg=bt,Ht.next=vi,qe&&(Ht.method="next",Ht.arg=e),!!qe}for(var Ye=this.tryEntries.length-1;Ye>=0;--Ye){var de=this.tryEntries[Ye],Be=de.completion;if("root"===de.tryLoc)return ce("end");if(de.tryLoc<=this.prev){var He=p.call(de,"catchLoc"),Ke=p.call(de,"finallyLoc");if(He&&Ke){if(this.prev<de.catchLoc)return ce(de.catchLoc,!0);if(this.prev<de.finallyLoc)return ce(de.finallyLoc)}else if(He){if(this.prev<de.catchLoc)return ce(de.catchLoc,!0)}else{if(!Ke)throw new Error("try statement without catch or finally");if(this.prev<de.finallyLoc)return ce(de.finallyLoc)}}}},abrupt:function(bt,Ht){for(var ce=this.tryEntries.length-1;ce>=0;--ce){var Ye=this.tryEntries[ce];if(Ye.tryLoc<=this.prev&&p.call(Ye,"finallyLoc")&&this.prev<Ye.finallyLoc){var de=Ye;break}}de&&("break"===bt||"continue"===bt)&&de.tryLoc<=Ht&&Ht<=de.finallyLoc&&(de=null);var Be=de?de.completion:{};return Be.type=bt,Be.arg=Ht,de?(this.method="next",this.next=de.finallyLoc,$):this.complete(Be)},complete:function(bt,Ht){if("throw"===bt.type)throw bt.arg;return"break"===bt.type||"continue"===bt.type?this.next=bt.arg:"return"===bt.type?(this.rval=this.arg=bt.arg,this.method="return",this.next="end"):"normal"===bt.type&&Ht&&(this.next=Ht),$},finish:function(bt){for(var Ht=this.tryEntries.length-1;Ht>=0;--Ht){var ce=this.tryEntries[Ht];if(ce.finallyLoc===bt)return this.complete(ce.completion,ce.afterLoc),dt(ce),$}},catch:function(bt){for(var Ht=this.tryEntries.length-1;Ht>=0;--Ht){var ce=this.tryEntries[Ht];if(ce.tryLoc===bt){var Ye=ce.completion;if("throw"===Ye.type){var de=Ye.arg;dt(ce)}return de}}throw new Error("illegal catch attempt")},delegateYield:function(bt,Ht,ce){return this.delegate={iterator:rt(bt),resultName:Ht,nextLoc:ce},"next"===this.method&&(this.arg=e),$}},f}(k.exports);try{regeneratorRuntime=B}catch(f){"object"==typeof globalThis?globalThis.regeneratorRuntime=B:Function("r","regeneratorRuntime = r")(B)}},93544:(k,B,f)=>{"use strict";var b=f(4320),p=f(4640),e=f(59009),t=b("%TypeError%"),n=b("%WeakMap%",!0),o=b("%Map%",!0),s=p("WeakMap.prototype.get",!0),c=p("WeakMap.prototype.set",!0),_=p("WeakMap.prototype.has",!0),w=p("Map.prototype.get",!0),M=p("Map.prototype.set",!0),U=p("Map.prototype.has",!0),V=function(nt,st){for(var xt,Ct=nt;null!==(xt=Ct.next);Ct=xt)if(xt.key===st)return Ct.next=xt.next,xt.next=nt.next,nt.next=xt,xt};k.exports=function(){var st,Ct,xt,yt={assert:function(ut){if(!yt.has(ut))throw new t("Side channel does not contain "+e(ut))},get:function(ut){if(n&&ut&&("object"==typeof ut||"function"==typeof ut)){if(st)return s(st,ut)}else if(o){if(Ct)return w(Ct,ut)}else if(xt)return function(nt,st){var Ct=V(nt,st);return Ct&&Ct.value}(xt,ut)},has:function(ut){if(n&&ut&&("object"==typeof ut||"function"==typeof ut)){if(st)return _(st,ut)}else if(o){if(Ct)return U(Ct,ut)}else if(xt)return function(nt,st){return!!V(nt,st)}(xt,ut);return!1},set:function(ut,tt){n&&ut&&("object"==typeof ut||"function"==typeof ut)?(st||(st=new n),c(st,ut,tt)):o?(Ct||(Ct=new o),M(Ct,ut,tt)):(xt||(xt={key:{},next:null}),function(nt,st,Ct){var xt=V(nt,st);xt?xt.value=Ct:nt.next={key:st,next:nt.next,value:Ct}}(xt,ut,tt))}};return yt}},47511:(k,B,f)=>{"use strict";f.r(B),f.d(B,{default:()=>pu,helpers:()=>_h});var b={};f.r(b),f.d(b,{JsonPatchError:()=>Go,_areEquals:()=>Bl,applyOperation:()=>vs,applyPatch:()=>Bs,applyReducer:()=>Ec,deepClone:()=>Su,getValueByPointer:()=>Pl,validate:()=>ar,validator:()=>Fl});var p={};f.r(p),f.d(p,{compare:()=>Tc,generate:()=>el,observe:()=>Ys,unobserve:()=>Hl});var e={};f.r(e),f.d(e,{cookie:()=>cu,header:()=>Lc,path:()=>lu,query:()=>Uu});var t=f(49719),n=f(42475),o=f(25551),s=f(73507),c=f(41586),_=f(86657),w=f(40107),M=f(31082);function U(T,L,j){return L in T?M(T,L,{value:j,enumerable:!0,configurable:!0,writable:!0}):T[L]=j,T}function V(T,L){var j=t(T);if(n){var Q=n(T);L&&(Q=o(Q).call(Q,function(mt){return s(T,mt).enumerable})),j.push.apply(j,Q)}return j}function H(T){for(var L=1;L<arguments.length;L++){var Q,j=null!=arguments[L]?arguments[L]:{};if(L%2)c(Q=V(Object(j),!0)).call(Q,function(Vt){U(T,Vt,j[Vt])});else if(_)w(T,_(j));else{var mt;c(mt=V(Object(j))).call(mt,function(Vt){M(T,Vt,s(j,Vt))})}}return T}var $=f(41246),pt=f.n($),nt=f(15157),st=f.n(nt),Ct=f(5128),xt=f(84215),yt=f(17830),ut=f(6275),tt=f(28355),lt=f(16051);function ot(T,L){(null==L||L>T.length)&&(L=T.length);for(var j=0,Q=new Array(L);j<L;j++)Q[j]=T[j];return Q}function Lt(T,L){var j;if(T){if("string"==typeof T)return ot(T,L);var Q=tt(j=Object.prototype.toString.call(T)).call(j,8,-1);if("Object"===Q&&T.constructor&&(Q=T.constructor.name),"Map"===Q||"Set"===Q)return lt(T);if("Arguments"===Q||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Q))return ot(T,L)}}function at(T,L){var j=void 0!==xt&&yt(T)||T["@@iterator"];if(!j){if(ut(T)||(j=Lt(T))||L&&T&&"number"==typeof T.length){j&&(T=j);var Q=0,mt=function(){};return{s:mt,n:function(){return Q>=T.length?{done:!0}:{done:!1,value:T[Q++]}},e:function(me){throw me},f:mt}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ee,Vt=!0,Ut=!1;return{s:function(){j=j.call(T)},n:function(){var me=j.next();return Vt=me.done,me},e:function(me){Ut=!0,ee=me},f:function(){try{!Vt&&null!=j.return&&j.return()}finally{if(Ut)throw ee}}}}var dt=f(36496);function it(T){return(it="function"==typeof xt&&"symbol"==typeof dt?function(j){return typeof j}:function(j){return j&&"function"==typeof xt&&j.constructor===xt&&j!==xt.prototype?"symbol":typeof j})(T)}function Ht(T,L){return function(T){if(ut(T))return T}(T)||function(T,L){var j=null==T?null:void 0!==xt&&yt(T)||T["@@iterator"];if(null!=j){var Ut,ee,Q=[],mt=!0,Vt=!1;try{for(j=j.call(T);!(mt=(Ut=j.next()).done)&&(Q.push(Ut.value),!L||Q.length!==L);mt=!0);}catch(pe){Vt=!0,ee=pe}finally{try{!mt&&null!=j.return&&j.return()}finally{if(Vt)throw ee}}return Q}}(T,L)||Lt(T,L)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ce=f(75534);function Ye(T,L,j,Q,mt,Vt,Ut){try{var ee=T[Vt](Ut),pe=ee.value}catch(me){return void j(me)}ee.done?L(pe):ce.resolve(pe).then(Q,mt)}function de(T){return function(){var L=this,j=arguments;return new ce(function(Q,mt){var Vt=T.apply(L,j);function Ut(pe){Ye(Vt,Q,mt,Ut,ee,"next",pe)}function ee(pe){Ye(Vt,Q,mt,Ut,ee,"throw",pe)}Ut(void 0)})}}var Be=f(22043),He=f.n(Be),Ke=f(17423),vi=f.n(Ke),qe=f(58201),Ne=f.n(qe),oi=f(6089),Ft=f.n(oi),_e=f(99182),Xt=f.n(_e),Jt=f(32633),Rt=f.n(Jt),Pt=f(17878),he=f.n(Pt),ze=f(44559),le=f.n(ze),jt=f(2165),Yt=f.n(jt),ge=f(37647),$t=f.n(ge),re=(f(11966),f(84268)),Et=f.n(re);function kt(T){return null==T}var ue={isNothing:kt,isObject:function(T){return"object"==typeof T&&null!==T},toArray:function(T){return Array.isArray(T)?T:kt(T)?[]:[T]},repeat:function(T,L){var Q,j="";for(Q=0;Q<L;Q+=1)j+=T;return j},isNegativeZero:function(T){return 0===T&&Number.NEGATIVE_INFINITY===1/T},extend:function(T,L){var j,Q,mt,Vt;if(L)for(j=0,Q=(Vt=Object.keys(L)).length;j<Q;j+=1)T[mt=Vt[j]]=L[mt];return T}};function je(T,L){var j="",Q=T.reason||"(unknown reason)";return T.mark?(T.mark.name&&(j+='in "'+T.mark.name+'" '),j+="("+(T.mark.line+1)+":"+(T.mark.column+1)+")",!L&&T.mark.snippet&&(j+="\n\n"+T.mark.snippet),Q+" "+j):Q}function ti(T,L){Error.call(this),this.name="YAMLException",this.reason=T,this.mark=L,this.message=je(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(ti.prototype=Object.create(Error.prototype)).constructor=ti,ti.prototype.toString=function(L){return this.name+": "+je(this,L)};var Ri=ti;function Pe(T,L,j,Q,mt){var Vt="",Ut="",ee=Math.floor(mt/2)-1;return Q-L>ee&&(L=Q-ee+(Vt=" ... ").length),j-Q>ee&&(j=Q+ee-(Ut=" ...").length),{str:Vt+T.slice(L,j).replace(/\t/g,"\u2192")+Ut,pos:Q-L+Vt.length}}function ie(T,L){return ue.repeat(" ",L-T.length)+T}var It=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],te=["scalar","sequence","mapping"],ki=function(T,L){if(L=L||{},Object.keys(L).forEach(function(j){if(-1===It.indexOf(j))throw new Ri('Unknown option "'+j+'" is met in definition of "'+T+'" YAML type.')}),this.options=L,this.tag=T,this.kind=L.kind||null,this.resolve=L.resolve||function(){return!0},this.construct=L.construct||function(j){return j},this.instanceOf=L.instanceOf||null,this.predicate=L.predicate||null,this.represent=L.represent||null,this.representName=L.representName||null,this.defaultStyle=L.defaultStyle||null,this.multi=L.multi||!1,this.styleAliases=function(T){var L={};return null!==T&&Object.keys(T).forEach(function(j){T[j].forEach(function(Q){L[String(Q)]=j})}),L}(L.styleAliases||null),-1===te.indexOf(this.kind))throw new Ri('Unknown kind "'+this.kind+'" is specified for "'+T+'" YAML type.')};function Zi(T,L){var j=[];return T[L].forEach(function(Q){var mt=j.length;j.forEach(function(Vt,Ut){Vt.tag===Q.tag&&Vt.kind===Q.kind&&Vt.multi===Q.multi&&(mt=Ut)}),j[mt]=Q}),j}function $e(T){return this.extend(T)}$e.prototype.extend=function(L){var j=[],Q=[];if(L instanceof ki)Q.push(L);else if(Array.isArray(L))Q=Q.concat(L);else{if(!L||!Array.isArray(L.implicit)&&!Array.isArray(L.explicit))throw new Ri("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");L.implicit&&(j=j.concat(L.implicit)),L.explicit&&(Q=Q.concat(L.explicit))}j.forEach(function(Vt){if(!(Vt instanceof ki))throw new Ri("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(Vt.loadKind&&"scalar"!==Vt.loadKind)throw new Ri("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(Vt.multi)throw new Ri("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),Q.forEach(function(Vt){if(!(Vt instanceof ki))throw new Ri("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var mt=Object.create($e.prototype);return mt.implicit=(this.implicit||[]).concat(j),mt.explicit=(this.explicit||[]).concat(Q),mt.compiledImplicit=Zi(mt,"implicit"),mt.compiledExplicit=Zi(mt,"explicit"),mt.compiledTypeMap=function(){var L,j,T={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function Q(mt){mt.multi?(T.multi[mt.kind].push(mt),T.multi.fallback.push(mt)):T[mt.kind][mt.tag]=T.fallback[mt.tag]=mt}for(L=0,j=arguments.length;L<j;L+=1)arguments[L].forEach(Q);return T}(mt.compiledImplicit,mt.compiledExplicit),mt};var Me=$e,Te=new ki("tag:yaml.org,2002:str",{kind:"scalar",construct:function(T){return null!==T?T:""}}),Xe=new ki("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(T){return null!==T?T:[]}}),pi=new ki("tag:yaml.org,2002:map",{kind:"mapping",construct:function(T){return null!==T?T:{}}}),Ki=new Me({explicit:[Te,Xe,pi]}),hr=new ki("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(T){if(null===T)return!0;var L=T.length;return 1===L&&"~"===T||4===L&&("null"===T||"Null"===T||"NULL"===T)},construct:function(){return null},predicate:function(T){return null===T},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Jn=new ki("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(T){if(null===T)return!1;var L=T.length;return 4===L&&("true"===T||"True"===T||"TRUE"===T)||5===L&&("false"===T||"False"===T||"FALSE"===T)},construct:function(T){return"true"===T||"True"===T||"TRUE"===T},predicate:function(T){return"[object Boolean]"===Object.prototype.toString.call(T)},represent:{lowercase:function(T){return T?"true":"false"},uppercase:function(T){return T?"TRUE":"FALSE"},camelcase:function(T){return T?"True":"False"}},defaultStyle:"lowercase"});function As(T){return 48<=T&&T<=57||65<=T&&T<=70||97<=T&&T<=102}function ro(T){return 48<=T&&T<=55}function Hi(T){return 48<=T&&T<=57}var Xr=new ki("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(T){if(null===T)return!1;var mt,L=T.length,j=0,Q=!1;if(!L)return!1;if(("-"===(mt=T[j])||"+"===mt)&&(mt=T[++j]),"0"===mt){if(j+1===L)return!0;if("b"===(mt=T[++j])){for(j++;j<L;j++)if("_"!==(mt=T[j])){if("0"!==mt&&"1"!==mt)return!1;Q=!0}return Q&&"_"!==mt}if("x"===mt){for(j++;j<L;j++)if("_"!==(mt=T[j])){if(!As(T.charCodeAt(j)))return!1;Q=!0}return Q&&"_"!==mt}if("o"===mt){for(j++;j<L;j++)if("_"!==(mt=T[j])){if(!ro(T.charCodeAt(j)))return!1;Q=!0}return Q&&"_"!==mt}}if("_"===mt)return!1;for(;j<L;j++)if("_"!==(mt=T[j])){if(!Hi(T.charCodeAt(j)))return!1;Q=!0}return!(!Q||"_"===mt)},construct:function(T){var Q,L=T,j=1;if(-1!==L.indexOf("_")&&(L=L.replace(/_/g,"")),("-"===(Q=L[0])||"+"===Q)&&("-"===Q&&(j=-1),Q=(L=L.slice(1))[0]),"0"===L)return 0;if("0"===Q){if("b"===L[1])return j*parseInt(L.slice(2),2);if("x"===L[1])return j*parseInt(L.slice(2),16);if("o"===L[1])return j*parseInt(L.slice(2),8)}return j*parseInt(L,10)},predicate:function(T){return"[object Number]"===Object.prototype.toString.call(T)&&T%1==0&&!ue.isNegativeZero(T)},represent:{binary:function(T){return T>=0?"0b"+T.toString(2):"-0b"+T.toString(2).slice(1)},octal:function(T){return T>=0?"0o"+T.toString(8):"-0o"+T.toString(8).slice(1)},decimal:function(T){return T.toString(10)},hexadecimal:function(T){return T>=0?"0x"+T.toString(16).toUpperCase():"-0x"+T.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ho=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),No=/^[-+]?[0-9]+e/,jo=new ki("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(T){return!(null===T||!ho.test(T)||"_"===T[T.length-1])},construct:function(T){var L,j;return j="-"===(L=T.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(L[0])>=0&&(L=L.slice(1)),".inf"===L?1===j?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===L?NaN:j*parseFloat(L,10)},predicate:function(T){return"[object Number]"===Object.prototype.toString.call(T)&&(T%1!=0||ue.isNegativeZero(T))},represent:function(T,L){var j;if(isNaN(T))switch(L){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===T)switch(L){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===T)switch(L){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ue.isNegativeZero(T))return"-0.0";return j=T.toString(10),No.test(j)?j.replace("e",".e"):j},defaultStyle:"lowercase"}),rr=Ki.extend({implicit:[hr,Jn,Xr,jo]}),vr=rr,dr=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ro=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),vn=new ki("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(T){return null!==T&&(null!==dr.exec(T)||null!==Ro.exec(T))},construct:function(T){var L,j,Q,mt,Vt,Ut,ee,Qe,pe=0,me=null;if(null===(L=dr.exec(T))&&(L=Ro.exec(T)),null===L)throw new Error("Date resolve error");if(j=+L[1],Q=+L[2]-1,mt=+L[3],!L[4])return new Date(Date.UTC(j,Q,mt));if(Vt=+L[4],Ut=+L[5],ee=+L[6],L[7]){for(pe=L[7].slice(0,3);pe.length<3;)pe+="0";pe=+pe}return L[9]&&(me=6e4*(60*+L[10]+ +(L[11]||0)),"-"===L[9]&&(me=-me)),Qe=new Date(Date.UTC(j,Q,mt,Vt,Ut,ee,pe)),me&&Qe.setTime(Qe.getTime()-me),Qe},instanceOf:Date,represent:function(T){return T.toISOString()}}),xo=new ki("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(T){return"<<"===T||null===T}}),Eo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",qn=new ki("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(T){if(null===T)return!1;var L,j,Q=0,mt=T.length,Vt=Eo;for(j=0;j<mt;j++)if(!((L=Vt.indexOf(T.charAt(j)))>64)){if(L<0)return!1;Q+=6}return Q%8==0},construct:function(T){var L,j,Q=T.replace(/[\r\n=]/g,""),mt=Q.length,Vt=Eo,Ut=0,ee=[];for(L=0;L<mt;L++)L%4==0&&L&&(ee.push(Ut>>16&255),ee.push(Ut>>8&255),ee.push(255&Ut)),Ut=Ut<<6|Vt.indexOf(Q.charAt(L));return 0==(j=mt%4*6)?(ee.push(Ut>>16&255),ee.push(Ut>>8&255),ee.push(255&Ut)):18===j?(ee.push(Ut>>10&255),ee.push(Ut>>2&255)):12===j&&ee.push(Ut>>4&255),new Uint8Array(ee)},predicate:function(T){return"[object Uint8Array]"===Object.prototype.toString.call(T)},represent:function(T){var Q,mt,L="",j=0,Vt=T.length,Ut=Eo;for(Q=0;Q<Vt;Q++)Q%3==0&&Q&&(L+=Ut[j>>18&63],L+=Ut[j>>12&63],L+=Ut[j>>6&63],L+=Ut[63&j]),j=(j<<8)+T[Q];return 0==(mt=Vt%3)?(L+=Ut[j>>18&63],L+=Ut[j>>12&63],L+=Ut[j>>6&63],L+=Ut[63&j]):2===mt?(L+=Ut[j>>10&63],L+=Ut[j>>4&63],L+=Ut[j<<2&63],L+=Ut[64]):1===mt&&(L+=Ut[j>>2&63],L+=Ut[j<<4&63],L+=Ut[64],L+=Ut[64]),L}}),Sr=Object.prototype.hasOwnProperty,as=Object.prototype.toString,wr=new ki("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(T){if(null===T)return!0;var j,Q,mt,Vt,Ut,L=[],ee=T;for(j=0,Q=ee.length;j<Q;j+=1){if(Ut=!1,"[object Object]"!==as.call(mt=ee[j]))return!1;for(Vt in mt)if(Sr.call(mt,Vt)){if(Ut)return!1;Ut=!0}if(!Ut)return!1;if(-1!==L.indexOf(Vt))return!1;L.push(Vt)}return!0},construct:function(T){return null!==T?T:[]}}),po=Object.prototype.toString,aa=new ki("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(T){if(null===T)return!0;var L,j,Q,mt,Vt,Ut=T;for(Vt=new Array(Ut.length),L=0,j=Ut.length;L<j;L+=1){if("[object Object]"!==po.call(Q=Ut[L])||1!==(mt=Object.keys(Q)).length)return!1;Vt[L]=[mt[0],Q[mt[0]]]}return!0},construct:function(T){if(null===T)return[];var L,j,Q,mt,Vt,Ut=T;for(Vt=new Array(Ut.length),L=0,j=Ut.length;L<j;L+=1)Q=Ut[L],mt=Object.keys(Q),Vt[L]=[mt[0],Q[mt[0]]];return Vt}}),Rr=Object.prototype.hasOwnProperty,Dr=new ki("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(T){if(null===T)return!0;var L,j=T;for(L in j)if(Rr.call(j,L)&&null!==j[L])return!1;return!0},construct:function(T){return null!==T?T:{}}}),la=vr.extend({implicit:[vn,xo],explicit:[qn,wr,aa,Dr]}),Cs=Object.prototype.hasOwnProperty,Io=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,cs=/[\x85\u2028\u2029]/,Ir=/[,\[\]\{\}]/,Mr=/^(?:!|!!|![a-z\-]+!)$/i,qo=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function us(T){return Object.prototype.toString.call(T)}function Bo(T){return 10===T||13===T}function pr(T){return 9===T||32===T}function To(T){return 9===T||32===T||10===T||13===T}function Br(T){return 44===T||91===T||93===T||123===T||125===T}function so(T){var L;return 48<=T&&T<=57?T-48:97<=(L=32|T)&&L<=102?L-97+10:-1}function hs(T){return 120===T?2:117===T?4:85===T?8:0}function go(T){return 48<=T&&T<=57?T-48:-1}function Ws(T){return 48===T?"\0":97===T?"\x07":98===T?"\b":116===T||9===T?"\t":110===T?"\n":118===T?"\v":102===T?"\f":114===T?"\r":101===T?"\x1b":32===T?" ":34===T?'"':47===T?"/":92===T?"\\":78===T?"\x85":95===T?"\xa0":76===T?"\u2028":80===T?"\u2029":""}function Ca(T){return T<=65535?String.fromCharCode(T):String.fromCharCode(55296+(T-65536>>10),56320+(T-65536&1023))}for(var Hr=new Array(256),Ho=new Array(256),yr=0;yr<256;yr++)Hr[yr]=Ws(yr)?1:0,Ho[yr]=Ws(yr);function ca(T,L){this.input=T,this.filename=L.filename||null,this.schema=L.schema||la,this.onWarning=L.onWarning||null,this.legacy=L.legacy||!1,this.json=L.json||!1,this.listener=L.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=T.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Gn(T,L){var j={name:T.filename,buffer:T.input.slice(0,-1),position:T.position,line:T.line,column:T.position-T.lineStart};return j.snippet=function(T,L){if(L=Object.create(L||null),!T.buffer)return null;L.maxLength||(L.maxLength=79),"number"!=typeof L.indent&&(L.indent=1),"number"!=typeof L.linesBefore&&(L.linesBefore=3),"number"!=typeof L.linesAfter&&(L.linesAfter=2);for(var Vt,j=/\r?\n|\r|\0/g,Q=[0],mt=[],Ut=-1;Vt=j.exec(T.buffer);)mt.push(Vt.index),Q.push(Vt.index+Vt[0].length),T.position<=Vt.index&&Ut<0&&(Ut=Q.length-2);Ut<0&&(Ut=Q.length-1);var pe,me,ee="",Ue=Math.min(T.line+L.linesAfter,mt.length).toString().length,Ge=L.maxLength-(L.indent+Ue+3);for(pe=1;pe<=L.linesBefore&&!(Ut-pe<0);pe++)me=Pe(T.buffer,Q[Ut-pe],mt[Ut-pe],T.position-(Q[Ut]-Q[Ut-pe]),Ge),ee=ue.repeat(" ",L.indent)+ie((T.line-pe+1).toString(),Ue)+" | "+me.str+"\n"+ee;for(me=Pe(T.buffer,Q[Ut],mt[Ut],T.position,Ge),ee+=ue.repeat(" ",L.indent)+ie((T.line+1).toString(),Ue)+" | "+me.str+"\n",ee+=ue.repeat("-",L.indent+Ue+3+me.pos)+"^\n",pe=1;pe<=L.linesAfter&&!(Ut+pe>=mt.length);pe++)me=Pe(T.buffer,Q[Ut+pe],mt[Ut+pe],T.position-(Q[Ut]-Q[Ut+pe]),Ge),ee+=ue.repeat(" ",L.indent)+ie((T.line+pe+1).toString(),Ue)+" | "+me.str+"\n";return ee.replace(/\n$/,"")}(j),new Ri(L,j)}function en(T,L){throw Gn(T,L)}function Ss(T,L){T.onWarning&&T.onWarning.call(null,Gn(T,L))}var Dt={YAML:function(L,j,Q){var mt,Vt,Ut;null!==L.version&&en(L,"duplication of %YAML directive"),1!==Q.length&&en(L,"YAML directive accepts exactly one argument"),null===(mt=/^([0-9]+)\.([0-9]+)$/.exec(Q[0]))&&en(L,"ill-formed argument of the YAML directive"),Vt=parseInt(mt[1],10),Ut=parseInt(mt[2],10),1!==Vt&&en(L,"unacceptable YAML version of the document"),L.version=Q[0],L.checkLineBreaks=Ut<2,1!==Ut&&2!==Ut&&Ss(L,"unsupported YAML version of the document")},TAG:function(L,j,Q){var mt,Vt;2!==Q.length&&en(L,"TAG directive accepts exactly two arguments"),Vt=Q[1],Mr.test(mt=Q[0])||en(L,"ill-formed tag handle (first argument) of the TAG directive"),Cs.call(L.tagMap,mt)&&en(L,'there is a previously declared suffix for "'+mt+'" tag handle'),qo.test(Vt)||en(L,"ill-formed tag prefix (second argument) of the TAG directive");try{Vt=decodeURIComponent(Vt)}catch(Ut){en(L,"tag prefix is malformed: "+Vt)}L.tagMap[mt]=Vt}};function X(T,L,j,Q){var mt,Vt,Ut,ee;if(L<j){if(ee=T.input.slice(L,j),Q)for(mt=0,Vt=ee.length;mt<Vt;mt+=1)9===(Ut=ee.charCodeAt(mt))||32<=Ut&&Ut<=1114111||en(T,"expected valid JSON character");else Io.test(ee)&&en(T,"the stream contains non-printable characters");T.result+=ee}}function P(T,L,j,Q){var mt,Vt,Ut,ee;for(ue.isObject(j)||en(T,"cannot merge mappings; the provided source object is unacceptable"),Ut=0,ee=(mt=Object.keys(j)).length;Ut<ee;Ut+=1)Cs.call(L,Vt=mt[Ut])||(L[Vt]=j[Vt],Q[Vt]=!0)}function G(T,L,j,Q,mt,Vt,Ut,ee,pe){var me,Ue;if(Array.isArray(mt))for(me=0,Ue=(mt=Array.prototype.slice.call(mt)).length;me<Ue;me+=1)Array.isArray(mt[me])&&en(T,"nested arrays are not supported inside keys"),"object"==typeof mt&&"[object Object]"===us(mt[me])&&(mt[me]="[object Object]");if("object"==typeof mt&&"[object Object]"===us(mt)&&(mt="[object Object]"),mt=String(mt),null===L&&(L={}),"tag:yaml.org,2002:merge"===Q)if(Array.isArray(Vt))for(me=0,Ue=Vt.length;me<Ue;me+=1)P(T,L,Vt[me],j);else P(T,L,Vt,j);else!T.json&&!Cs.call(j,mt)&&Cs.call(L,mt)&&(T.line=Ut||T.line,T.lineStart=ee||T.lineStart,T.position=pe||T.position,en(T,"duplicated mapping key")),"__proto__"===mt?Object.defineProperty(L,mt,{configurable:!0,enumerable:!0,writable:!0,value:Vt}):L[mt]=Vt,delete j[mt];return L}function St(T){var L;10===(L=T.input.charCodeAt(T.position))?T.position++:13===L?(T.position++,10===T.input.charCodeAt(T.position)&&T.position++):en(T,"a line break is expected"),T.line+=1,T.lineStart=T.position,T.firstTabInLine=-1}function Ee(T,L,j){for(var Q=0,mt=T.input.charCodeAt(T.position);0!==mt;){for(;pr(mt);)9===mt&&-1===T.firstTabInLine&&(T.firstTabInLine=T.position),mt=T.input.charCodeAt(++T.position);if(L&&35===mt)do{mt=T.input.charCodeAt(++T.position)}while(10!==mt&&13!==mt&&0!==mt);if(!Bo(mt))break;for(St(T),mt=T.input.charCodeAt(T.position),Q++,T.lineIndent=0;32===mt;)T.lineIndent++,mt=T.input.charCodeAt(++T.position)}return-1!==j&&0!==Q&&T.lineIndent<j&&Ss(T,"deficient indentation"),Q}function ei(T){var j,L=T.position;return!(45!==(j=T.input.charCodeAt(L))&&46!==j||j!==T.input.charCodeAt(L+1)||j!==T.input.charCodeAt(L+2)||(L+=3,j=T.input.charCodeAt(L),0!==j&&!To(j)))}function Ni(T,L){1===L?T.result+=" ":L>1&&(T.result+=ue.repeat("\n",L-1))}function to(T,L){var j,pe,Q=T.tag,mt=T.anchor,Vt=[],ee=!1;if(-1!==T.firstTabInLine)return!1;for(null!==T.anchor&&(T.anchorMap[T.anchor]=Vt),pe=T.input.charCodeAt(T.position);0!==pe&&(-1!==T.firstTabInLine&&(T.position=T.firstTabInLine,en(T,"tab characters must not be used in indentation")),45===pe&&To(T.input.charCodeAt(T.position+1)));)if(ee=!0,T.position++,Ee(T,!0,-1)&&T.lineIndent<=L)Vt.push(null),pe=T.input.charCodeAt(T.position);else if(j=T.line,tr(T,L,3,!1,!0),Vt.push(T.result),Ee(T,!0,-1),pe=T.input.charCodeAt(T.position),(T.line===j||T.lineIndent>L)&&0!==pe)en(T,"bad indentation of a sequence entry");else if(T.lineIndent<L)break;return!!ee&&(T.tag=Q,T.anchor=mt,T.kind="sequence",T.result=Vt,!0)}function rn(T){var L,mt,Vt,Ut,j=!1,Q=!1;if(33!==(Ut=T.input.charCodeAt(T.position)))return!1;if(null!==T.tag&&en(T,"duplication of a tag property"),60===(Ut=T.input.charCodeAt(++T.position))?(j=!0,Ut=T.input.charCodeAt(++T.position)):33===Ut?(Q=!0,mt="!!",Ut=T.input.charCodeAt(++T.position)):mt="!",L=T.position,j){do{Ut=T.input.charCodeAt(++T.position)}while(0!==Ut&&62!==Ut);T.position<T.length?(Vt=T.input.slice(L,T.position),Ut=T.input.charCodeAt(++T.position)):en(T,"unexpected end of the stream within a verbatim tag")}else{for(;0!==Ut&&!To(Ut);)33===Ut&&(Q?en(T,"tag suffix cannot contain exclamation marks"):(mt=T.input.slice(L-1,T.position+1),Mr.test(mt)||en(T,"named tag handle cannot contain such characters"),Q=!0,L=T.position+1)),Ut=T.input.charCodeAt(++T.position);Vt=T.input.slice(L,T.position),Ir.test(Vt)&&en(T,"tag suffix cannot contain flow indicator characters")}Vt&&!qo.test(Vt)&&en(T,"tag name cannot contain such characters: "+Vt);try{Vt=decodeURIComponent(Vt)}catch(ee){en(T,"tag name is malformed: "+Vt)}return j?T.tag=Vt:Cs.call(T.tagMap,mt)?T.tag=T.tagMap[mt]+Vt:"!"===mt?T.tag="!"+Vt:"!!"===mt?T.tag="tag:yaml.org,2002:"+Vt:en(T,'undeclared tag handle "'+mt+'"'),!0}function Zr(T){var L,j;if(38!==(j=T.input.charCodeAt(T.position)))return!1;for(null!==T.anchor&&en(T,"duplication of an anchor property"),j=T.input.charCodeAt(++T.position),L=T.position;0!==j&&!To(j)&&!Br(j);)j=T.input.charCodeAt(++T.position);return T.position===L&&en(T,"name of an anchor node must contain at least one character"),T.anchor=T.input.slice(L,T.position),!0}function tr(T,L,j,Q,mt){var Vt,Ut,ee,Ge,Qe,si,Ci,Ai,xi,pe=1,me=!1,Ue=!1;if(null!==T.listener&&T.listener("open",T),T.tag=null,T.anchor=null,T.kind=null,T.result=null,Vt=Ut=ee=4===j||3===j,Q&&Ee(T,!0,-1)&&(me=!0,T.lineIndent>L?pe=1:T.lineIndent===L?pe=0:T.lineIndent<L&&(pe=-1)),1===pe)for(;rn(T)||Zr(T);)Ee(T,!0,-1)?(me=!0,ee=Vt,T.lineIndent>L?pe=1:T.lineIndent===L?pe=0:T.lineIndent<L&&(pe=-1)):ee=!1;if(ee&&(ee=me||mt),(1===pe||4===j)&&(Ai=1===j||2===j?L:L+1,xi=T.position-T.lineStart,1===pe?ee&&(to(T,xi)||function(T,L,j){var Q,mt,Vt,Ut,ee,pe,Ii,me=T.tag,Ue=T.anchor,Ge={},Qe=Object.create(null),si=null,Ci=null,Ai=null,xi=!1,Ji=!1;if(-1!==T.firstTabInLine)return!1;for(null!==T.anchor&&(T.anchorMap[T.anchor]=Ge),Ii=T.input.charCodeAt(T.position);0!==Ii;){if(!xi&&-1!==T.firstTabInLine&&(T.position=T.firstTabInLine,en(T,"tab characters must not be used in indentation")),Q=T.input.charCodeAt(T.position+1),Vt=T.line,63!==Ii&&58!==Ii||!To(Q)){if(Ut=T.line,ee=T.lineStart,pe=T.position,!tr(T,j,2,!1,!0))break;if(T.line===Vt){for(Ii=T.input.charCodeAt(T.position);pr(Ii);)Ii=T.input.charCodeAt(++T.position);if(58===Ii)To(Ii=T.input.charCodeAt(++T.position))||en(T,"a whitespace character is expected after the key-value separator within a block mapping"),xi&&(G(T,Ge,Qe,si,Ci,null,Ut,ee,pe),si=Ci=Ai=null),Ji=!0,xi=!1,mt=!1,si=T.tag,Ci=T.result;else{if(!Ji)return T.tag=me,T.anchor=Ue,!0;en(T,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Ji)return T.tag=me,T.anchor=Ue,!0;en(T,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===Ii?(xi&&(G(T,Ge,Qe,si,Ci,null,Ut,ee,pe),si=Ci=Ai=null),Ji=!0,xi=!0,mt=!0):xi?(xi=!1,mt=!0):en(T,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),T.position+=1,Ii=Q;if((T.line===Vt||T.lineIndent>L)&&(xi&&(Ut=T.line,ee=T.lineStart,pe=T.position),tr(T,L,4,!0,mt)&&(xi?Ci=T.result:Ai=T.result),xi||(G(T,Ge,Qe,si,Ci,Ai,Ut,ee,pe),si=Ci=Ai=null),Ee(T,!0,-1),Ii=T.input.charCodeAt(T.position)),(T.line===Vt||T.lineIndent>L)&&0!==Ii)en(T,"bad indentation of a mapping entry");else if(T.lineIndent<L)break}return xi&&G(T,Ge,Qe,si,Ci,null,Ut,ee,pe),Ji&&(T.tag=me,T.anchor=Ue,T.kind="mapping",T.result=Ge),Ji}(T,xi,Ai))||function(T,L){var Q,mt,Vt,ee,Ue,Ge,Qe,si,Ai,xi,Ji,Ii,j=!0,Ut=T.tag,pe=T.anchor,Ci=Object.create(null);if(91===(Ii=T.input.charCodeAt(T.position)))Ue=93,si=!1,ee=[];else{if(123!==Ii)return!1;Ue=125,si=!0,ee={}}for(null!==T.anchor&&(T.anchorMap[T.anchor]=ee),Ii=T.input.charCodeAt(++T.position);0!==Ii;){if(Ee(T,!0,L),(Ii=T.input.charCodeAt(T.position))===Ue)return T.position++,T.tag=Ut,T.anchor=pe,T.kind=si?"mapping":"sequence",T.result=ee,!0;j?44===Ii&&en(T,"expected the node content, but found ','"):en(T,"missed comma between flow collection entries"),Ji=null,Ge=Qe=!1,63===Ii&&To(T.input.charCodeAt(T.position+1))&&(Ge=Qe=!0,T.position++,Ee(T,!0,L)),Q=T.line,mt=T.lineStart,Vt=T.position,tr(T,L,1,!1,!0),xi=T.tag,Ai=T.result,Ee(T,!0,L),Ii=T.input.charCodeAt(T.position),(Qe||T.line===Q)&&58===Ii&&(Ge=!0,Ii=T.input.charCodeAt(++T.position),Ee(T,!0,L),tr(T,L,1,!1,!0),Ji=T.result),si?G(T,ee,Ci,xi,Ai,Ji,Q,mt,Vt):ee.push(Ge?G(T,null,Ci,xi,Ai,Ji,Q,mt,Vt):Ai),Ee(T,!0,L),44===(Ii=T.input.charCodeAt(T.position))?(j=!0,Ii=T.input.charCodeAt(++T.position)):j=!1}en(T,"unexpected end of the stream within a flow collection")}(T,Ai)?Ue=!0:(Ut&&function(T,L){var j,Q,Ue,Ge,mt=1,Vt=!1,Ut=!1,ee=L,pe=0,me=!1;if(124===(Ge=T.input.charCodeAt(T.position)))Q=!1;else{if(62!==Ge)return!1;Q=!0}for(T.kind="scalar",T.result="";0!==Ge;)if(43===(Ge=T.input.charCodeAt(++T.position))||45===Ge)1===mt?mt=43===Ge?3:2:en(T,"repeat of a chomping mode identifier");else{if(!((Ue=go(Ge))>=0))break;0===Ue?en(T,"bad explicit indentation width of a block scalar; it cannot be less than one"):Ut?en(T,"repeat of an indentation width identifier"):(ee=L+Ue-1,Ut=!0)}if(pr(Ge)){do{Ge=T.input.charCodeAt(++T.position)}while(pr(Ge));if(35===Ge)do{Ge=T.input.charCodeAt(++T.position)}while(!Bo(Ge)&&0!==Ge)}for(;0!==Ge;){for(St(T),T.lineIndent=0,Ge=T.input.charCodeAt(T.position);(!Ut||T.lineIndent<ee)&&32===Ge;)T.lineIndent++,Ge=T.input.charCodeAt(++T.position);if(!Ut&&T.lineIndent>ee&&(ee=T.lineIndent),Bo(Ge))pe++;else{if(T.lineIndent<ee){3===mt?T.result+=ue.repeat("\n",Vt?1+pe:pe):1===mt&&Vt&&(T.result+="\n");break}for(Q?pr(Ge)?(me=!0,T.result+=ue.repeat("\n",Vt?1+pe:pe)):me?(me=!1,T.result+=ue.repeat("\n",pe+1)):0===pe?Vt&&(T.result+=" "):T.result+=ue.repeat("\n",pe):T.result+=ue.repeat("\n",Vt?1+pe:pe),Vt=!0,Ut=!0,pe=0,j=T.position;!Bo(Ge)&&0!==Ge;)Ge=T.input.charCodeAt(++T.position);X(T,j,T.position,!1)}}return!0}(T,Ai)||function(T,L){var j,Q,mt;if(39!==(j=T.input.charCodeAt(T.position)))return!1;for(T.kind="scalar",T.result="",T.position++,Q=mt=T.position;0!==(j=T.input.charCodeAt(T.position));)if(39===j){if(X(T,Q,T.position,!0),39!==(j=T.input.charCodeAt(++T.position)))return!0;Q=T.position,T.position++,mt=T.position}else Bo(j)?(X(T,Q,mt,!0),Ni(T,Ee(T,!1,L)),Q=mt=T.position):T.position===T.lineStart&&ei(T)?en(T,"unexpected end of the document within a single quoted scalar"):(T.position++,mt=T.position);en(T,"unexpected end of the stream within a single quoted scalar")}(T,Ai)||function(T,L){var j,Q,mt,Vt,Ut,ee;if(34!==(ee=T.input.charCodeAt(T.position)))return!1;for(T.kind="scalar",T.result="",T.position++,j=Q=T.position;0!==(ee=T.input.charCodeAt(T.position));){if(34===ee)return X(T,j,T.position,!0),T.position++,!0;if(92===ee){if(X(T,j,T.position,!0),Bo(ee=T.input.charCodeAt(++T.position)))Ee(T,!1,L);else if(ee<256&&Hr[ee])T.result+=Ho[ee],T.position++;else if((Ut=hs(ee))>0){for(mt=Ut,Vt=0;mt>0;mt--)(Ut=so(ee=T.input.charCodeAt(++T.position)))>=0?Vt=(Vt<<4)+Ut:en(T,"expected hexadecimal character");T.result+=Ca(Vt),T.position++}else en(T,"unknown escape sequence");j=Q=T.position}else Bo(ee)?(X(T,j,Q,!0),Ni(T,Ee(T,!1,L)),j=Q=T.position):T.position===T.lineStart&&ei(T)?en(T,"unexpected end of the document within a double quoted scalar"):(T.position++,Q=T.position)}en(T,"unexpected end of the stream within a double quoted scalar")}(T,Ai)?Ue=!0:function(T){var L,j,Q;if(42!==(Q=T.input.charCodeAt(T.position)))return!1;for(Q=T.input.charCodeAt(++T.position),L=T.position;0!==Q&&!To(Q)&&!Br(Q);)Q=T.input.charCodeAt(++T.position);return T.position===L&&en(T,"name of an alias node must contain at least one character"),j=T.input.slice(L,T.position),Cs.call(T.anchorMap,j)||en(T,'unidentified alias "'+j+'"'),T.result=T.anchorMap[j],Ee(T,!0,-1),!0}(T)?(Ue=!0,(null!==T.tag||null!==T.anchor)&&en(T,"alias node should not have any properties")):function(T,L,j){var mt,Vt,Ut,ee,pe,me,Ue,si,Ge=T.kind,Qe=T.result;if(To(si=T.input.charCodeAt(T.position))||Br(si)||35===si||38===si||42===si||33===si||124===si||62===si||39===si||34===si||37===si||64===si||96===si||(63===si||45===si)&&(To(mt=T.input.charCodeAt(T.position+1))||j&&Br(mt)))return!1;for(T.kind="scalar",T.result="",Vt=Ut=T.position,ee=!1;0!==si;){if(58===si){if(To(mt=T.input.charCodeAt(T.position+1))||j&&Br(mt))break}else if(35===si){if(To(T.input.charCodeAt(T.position-1)))break}else{if(T.position===T.lineStart&&ei(T)||j&&Br(si))break;if(Bo(si)){if(pe=T.line,me=T.lineStart,Ue=T.lineIndent,Ee(T,!1,-1),T.lineIndent>=L){ee=!0,si=T.input.charCodeAt(T.position);continue}T.position=Ut,T.line=pe,T.lineStart=me,T.lineIndent=Ue;break}}ee&&(X(T,Vt,Ut,!1),Ni(T,T.line-pe),Vt=Ut=T.position,ee=!1),pr(si)||(Ut=T.position+1),si=T.input.charCodeAt(++T.position)}return X(T,Vt,Ut,!1),!!T.result||(T.kind=Ge,T.result=Qe,!1)}(T,Ai,1===j)&&(Ue=!0,null===T.tag&&(T.tag="?")),null!==T.anchor&&(T.anchorMap[T.anchor]=T.result)):0===pe&&(Ue=ee&&to(T,xi))),null===T.tag)null!==T.anchor&&(T.anchorMap[T.anchor]=T.result);else if("?"===T.tag){for(null!==T.result&&"scalar"!==T.kind&&en(T,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+T.kind+'"'),Ge=0,Qe=T.implicitTypes.length;Ge<Qe;Ge+=1)if((Ci=T.implicitTypes[Ge]).resolve(T.result)){T.result=Ci.construct(T.result),T.tag=Ci.tag,null!==T.anchor&&(T.anchorMap[T.anchor]=T.result);break}}else if("!"!==T.tag){if(Cs.call(T.typeMap[T.kind||"fallback"],T.tag))Ci=T.typeMap[T.kind||"fallback"][T.tag];else for(Ci=null,Ge=0,Qe=(si=T.typeMap.multi[T.kind||"fallback"]).length;Ge<Qe;Ge+=1)if(T.tag.slice(0,si[Ge].tag.length)===si[Ge].tag){Ci=si[Ge];break}Ci||en(T,"unknown tag !<"+T.tag+">"),null!==T.result&&Ci.kind!==T.kind&&en(T,"unacceptable node kind for !<"+T.tag+'> tag; it should be "'+Ci.kind+'", not "'+T.kind+'"'),Ci.resolve(T.result,T.tag)?(T.result=Ci.construct(T.result,T.tag),null!==T.anchor&&(T.anchorMap[T.anchor]=T.result)):en(T,"cannot resolve a node with !<"+T.tag+"> explicit tag")}return null!==T.listener&&T.listener("close",T),null!==T.tag||null!==T.anchor||Ue}function js(T){var j,Q,mt,Ut,L=T.position,Vt=!1;for(T.version=null,T.checkLineBreaks=T.legacy,T.tagMap=Object.create(null),T.anchorMap=Object.create(null);0!==(Ut=T.input.charCodeAt(T.position))&&(Ee(T,!0,-1),Ut=T.input.charCodeAt(T.position),!(T.lineIndent>0||37!==Ut));){for(Vt=!0,Ut=T.input.charCodeAt(++T.position),j=T.position;0!==Ut&&!To(Ut);)Ut=T.input.charCodeAt(++T.position);for(mt=[],(Q=T.input.slice(j,T.position)).length<1&&en(T,"directive name must not be less than one character in length");0!==Ut;){for(;pr(Ut);)Ut=T.input.charCodeAt(++T.position);if(35===Ut){do{Ut=T.input.charCodeAt(++T.position)}while(0!==Ut&&!Bo(Ut));break}if(Bo(Ut))break;for(j=T.position;0!==Ut&&!To(Ut);)Ut=T.input.charCodeAt(++T.position);mt.push(T.input.slice(j,T.position))}0!==Ut&&St(T),Cs.call(Dt,Q)?Dt[Q](T,Q,mt):Ss(T,'unknown document directive "'+Q+'"')}Ee(T,!0,-1),0===T.lineIndent&&45===T.input.charCodeAt(T.position)&&45===T.input.charCodeAt(T.position+1)&&45===T.input.charCodeAt(T.position+2)?(T.position+=3,Ee(T,!0,-1)):Vt&&en(T,"directives end mark is expected"),tr(T,T.lineIndent-1,4,!1,!0),Ee(T,!0,-1),T.checkLineBreaks&&cs.test(T.input.slice(L,T.position))&&Ss(T,"non-ASCII line breaks are interpreted as content"),T.documents.push(T.result),T.position===T.lineStart&&ei(T)?46===T.input.charCodeAt(T.position)&&(T.position+=3,Ee(T,!0,-1)):T.position<T.length-1&&en(T,"end of the stream or a document separator is expected")}function Vr(T,L){L=L||{},0!==(T=String(T)).length&&(10!==T.charCodeAt(T.length-1)&&13!==T.charCodeAt(T.length-1)&&(T+="\n"),65279===T.charCodeAt(0)&&(T=T.slice(1)));var j=new ca(T,L),Q=T.indexOf("\0");for(-1!==Q&&(j.position=Q,en(j,"null byte is not allowed in input")),j.input+="\0";32===j.input.charCodeAt(j.position);)j.lineIndent+=1,j.position+=1;for(;j.position<j.length-1;)js(j);return j.documents}var Qt={loadAll:function(T,L,j){null!==L&&"object"==typeof L&&void 0===j&&(j=L,L=null);var Q=Vr(T,j);if("function"!=typeof L)return Q;for(var mt=0,Vt=Q.length;mt<Vt;mt+=1)L(Q[mt])},load:function(T,L){var j=Vr(T,L);if(0!==j.length){if(1===j.length)return j[0];throw new Ri("expected a single document in the stream, but found more")}}},F=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,Co={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},ts=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],wa=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Qi(T){var L,j,Q;if(L=T.toString(16).toUpperCase(),T<=255)j="x",Q=2;else if(T<=65535)j="u",Q=4;else{if(!(T<=4294967295))throw new Ri("code point within a string may not be greater than 0xFFFFFFFF");j="U",Q=8}return"\\"+j+ue.repeat("0",Q-L.length)+L}function An(T){this.schema=T.schema||la,this.indent=Math.max(1,T.indent||2),this.noArrayIndent=T.noArrayIndent||!1,this.skipInvalid=T.skipInvalid||!1,this.flowLevel=ue.isNothing(T.flowLevel)?-1:T.flowLevel,this.styleMap=function(T,L){var j,Q,mt,Vt,Ut,ee,pe;if(null===L)return{};for(j={},mt=0,Vt=(Q=Object.keys(L)).length;mt<Vt;mt+=1)Ut=Q[mt],ee=String(L[Ut]),"!!"===Ut.slice(0,2)&&(Ut="tag:yaml.org,2002:"+Ut.slice(2)),(pe=T.compiledTypeMap.fallback[Ut])&&Y.call(pe.styleAliases,ee)&&(ee=pe.styleAliases[ee]),j[Ut]=ee;return j}(this.schema,T.styles||null),this.sortKeys=T.sortKeys||!1,this.lineWidth=T.lineWidth||80,this.noRefs=T.noRefs||!1,this.noCompatMode=T.noCompatMode||!1,this.condenseFlow=T.condenseFlow||!1,this.quotingType='"'===T.quotingType?2:1,this.forceQuotes=T.forceQuotes||!1,this.replacer="function"==typeof T.replacer?T.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function On(T,L){for(var Ut,j=ue.repeat(" ",L),Q=0,mt=-1,Vt="",ee=T.length;Q<ee;)-1===(mt=T.indexOf("\n",Q))?(Ut=T.slice(Q),Q=ee):(Ut=T.slice(Q,mt+1),Q=mt+1),Ut.length&&"\n"!==Ut&&(Vt+=j),Vt+=Ut;return Vt}function Er(T,L){return"\n"+ue.repeat(" ",T.indent*L)}function es(T){return 32===T||9===T}function Qn(T){return 32<=T&&T<=126||161<=T&&T<=55295&&8232!==T&&8233!==T||57344<=T&&T<=65533&&65279!==T||65536<=T&&T<=1114111}function Tr(T){return Qn(T)&&65279!==T&&13!==T&&10!==T}function ps(T,L,j){var Q=Tr(T),mt=Q&&!es(T);return(j?Q:Q&&44!==T&&91!==T&&93!==T&&123!==T&&125!==T)&&35!==T&&!(58===L&&!mt)||Tr(L)&&!es(L)&&35===T||58===L&&mt}function fr(T,L){var Q,j=T.charCodeAt(L);return j>=55296&&j<=56319&&L+1<T.length&&(Q=T.charCodeAt(L+1))>=56320&&Q<=57343?1024*(j-55296)+Q-56320+65536:j}function Wr(T){return/^\n* /.test(T)}function ks(T,L,j,Q,mt){T.dump=function(){if(0===L.length)return 2===T.quotingType?'""':"''";if(!T.noCompatMode&&(-1!==ts.indexOf(L)||wa.test(L)))return 2===T.quotingType?'"'+L+'"':"'"+L+"'";var Vt=T.indent*Math.max(1,j),Ut=-1===T.lineWidth?-1:Math.max(Math.min(T.lineWidth,40),T.lineWidth-Vt);switch(function(T,L,j,Q,mt,Vt,Ut,ee){var pe,me=0,Ue=null,Ge=!1,Qe=!1,si=-1!==Q,Ci=-1,Ai=function(T){return Qn(T)&&65279!==T&&!es(T)&&45!==T&&63!==T&&58!==T&&44!==T&&91!==T&&93!==T&&123!==T&&125!==T&&35!==T&&38!==T&&42!==T&&33!==T&&124!==T&&61!==T&&62!==T&&39!==T&&34!==T&&37!==T&&64!==T&&96!==T}(fr(T,0))&&function(T){return!es(T)&&58!==T}(fr(T,T.length-1));if(L||Ut)for(pe=0;pe<T.length;me>=65536?pe+=2:pe++){if(!Qn(me=fr(T,pe)))return 5;Ai=Ai&&ps(me,Ue,ee),Ue=me}else{for(pe=0;pe<T.length;me>=65536?pe+=2:pe++){if(10===(me=fr(T,pe)))Ge=!0,si&&(Qe=Qe||pe-Ci-1>Q&&" "!==T[Ci+1],Ci=pe);else if(!Qn(me))return 5;Ai=Ai&&ps(me,Ue,ee),Ue=me}Qe=Qe||si&&pe-Ci-1>Q&&" "!==T[Ci+1]}return Ge||Qe?j>9&&Wr(T)?5:Ut?2===Vt?5:2:Qe?4:3:!Ai||Ut||mt(T)?2===Vt?5:2:1}(L,Q||T.flowLevel>-1&&j>=T.flowLevel,T.indent,Ut,function(me){return function(T,L){var j,Q;for(j=0,Q=T.implicitTypes.length;j<Q;j+=1)if(T.implicitTypes[j].resolve(L))return!0;return!1}(T,me)},T.quotingType,T.forceQuotes&&!Q,mt)){case 1:return L;case 2:return"'"+L.replace(/'/g,"''")+"'";case 3:return"|"+Xa(L,T.indent)+Qs(On(L,Vt));case 4:return">"+Xa(L,T.indent)+Qs(On(function(T,L){for(var Vt,Ut,j=/(\n+)([^\n]*)/g,Q=(me=void 0,me=T.indexOf("\n"),j.lastIndex=me=-1!==me?me:T.length,Ka(T.slice(0,me),L)),mt="\n"===T[0]||" "===T[0];Ut=j.exec(T);){var pe=Ut[2];Vt=" "===pe[0],Q+=Ut[1]+(mt||Vt||""===pe?"":"\n")+Ka(pe,L),mt=Vt}var me;return Q}(L,Ut),Vt));case 5:return'"'+function(T){for(var Q,L="",j=0,mt=0;mt<T.length;j>=65536?mt+=2:mt++)j=fr(T,mt),!(Q=Co[j])&&Qn(j)?(L+=T[mt],j>=65536&&(L+=T[mt+1])):L+=Q||Qi(j);return L}(L)+'"';default:throw new Ri("impossible error: invalid scalar style")}}()}function Xa(T,L){var j=Wr(T)?String(L):"",Q="\n"===T[T.length-1];return j+(!Q||"\n"!==T[T.length-2]&&"\n"!==T?Q?"":"-":"+")+"\n"}function Qs(T){return"\n"===T[T.length-1]?T.slice(0,-1):T}function Ka(T,L){if(""===T||" "===T[0])return T;for(var Q,Vt,j=/ [^ ]/g,mt=0,Ut=0,ee=0,pe="";Q=j.exec(T);)(ee=Q.index)-mt>L&&(pe+="\n"+T.slice(mt,Vt=Ut>mt?Ut:ee),mt=Vt+1),Ut=ee;return pe+="\n",(pe+=T.length-mt>L&&Ut>mt?T.slice(mt,Ut)+"\n"+T.slice(Ut+1):T.slice(mt)).slice(1)}function ha(T,L,j){var Q,mt,Vt,Ut,ee,pe;for(Vt=0,Ut=(mt=j?T.explicitTypes:T.implicitTypes).length;Vt<Ut;Vt+=1)if(((ee=mt[Vt]).instanceOf||ee.predicate)&&(!ee.instanceOf||"object"==typeof L&&L instanceof ee.instanceOf)&&(!ee.predicate||ee.predicate(L))){if(T.tag=j?ee.multi&&ee.representName?ee.representName(L):ee.tag:"?",ee.represent){if(pe=T.styleMap[ee.tag]||ee.defaultStyle,"[object Function]"===F.call(ee.represent))Q=ee.represent(L,pe);else{if(!Y.call(ee.represent,pe))throw new Ri("!<"+ee.tag+'> tag resolver accepts not "'+pe+'" style');Q=ee.represent[pe](L,pe)}T.dump=Q}return!0}return!1}function gs(T,L,j,Q,mt,Vt,Ut){T.tag=null,T.dump=j,ha(T,j,!1)||ha(T,j,!0);var me,ee=F.call(T.dump),pe=Q;Q&&(Q=T.flowLevel<0||T.flowLevel>L);var Ge,Qe,Ue="[object Object]"===ee||"[object Array]"===ee;if(Ue&&(Qe=-1!==(Ge=T.duplicates.indexOf(j))),(null!==T.tag&&"?"!==T.tag||Qe||2!==T.indent&&L>0)&&(mt=!1),Qe&&T.usedDuplicates[Ge])T.dump="*ref_"+Ge;else{if(Ue&&Qe&&!T.usedDuplicates[Ge]&&(T.usedDuplicates[Ge]=!0),"[object Object]"===ee)Q&&0!==Object.keys(T.dump).length?(function(T,L,j,Q){var ee,pe,me,Ue,Ge,Qe,mt="",Vt=T.tag,Ut=Object.keys(j);if(!0===T.sortKeys)Ut.sort();else if("function"==typeof T.sortKeys)Ut.sort(T.sortKeys);else if(T.sortKeys)throw new Ri("sortKeys must be a boolean or a function");for(ee=0,pe=Ut.length;ee<pe;ee+=1)Qe="",(!Q||""!==mt)&&(Qe+=Er(T,L)),Ue=j[me=Ut[ee]],T.replacer&&(Ue=T.replacer.call(j,me,Ue)),gs(T,L+1,me,!0,!0,!0)&&((Ge=null!==T.tag&&"?"!==T.tag||T.dump&&T.dump.length>1024)&&(T.dump&&10===T.dump.charCodeAt(0)?Qe+="?":Qe+="? "),Qe+=T.dump,Ge&&(Qe+=Er(T,L)),gs(T,L+1,Ue,!0,Ge)&&(T.dump&&10===T.dump.charCodeAt(0)?Qe+=":":Qe+=": ",mt+=Qe+=T.dump));T.tag=Vt,T.dump=mt||"{}"}(T,L,T.dump,mt),Qe&&(T.dump="&ref_"+Ge+T.dump)):(function(T,L,j){var Ut,ee,pe,me,Ue,Q="",mt=T.tag,Vt=Object.keys(j);for(Ut=0,ee=Vt.length;Ut<ee;Ut+=1)Ue="",""!==Q&&(Ue+=", "),T.condenseFlow&&(Ue+='"'),me=j[pe=Vt[Ut]],T.replacer&&(me=T.replacer.call(j,pe,me)),gs(T,L,pe,!1,!1)&&(T.dump.length>1024&&(Ue+="? "),Ue+=T.dump+(T.condenseFlow?'"':"")+":"+(T.condenseFlow?"":" "),gs(T,L,me,!1,!1)&&(Q+=Ue+=T.dump));T.tag=mt,T.dump="{"+Q+"}"}(T,L,T.dump),Qe&&(T.dump="&ref_"+Ge+" "+T.dump));else if("[object Array]"===ee)Q&&0!==T.dump.length?(function(T,L,j,Q){var Ut,ee,pe,mt="",Vt=T.tag;for(Ut=0,ee=j.length;Ut<ee;Ut+=1)pe=j[Ut],T.replacer&&(pe=T.replacer.call(j,String(Ut),pe)),(gs(T,L+1,pe,!0,!0,!1,!0)||void 0===pe&&gs(T,L+1,null,!0,!0,!1,!0))&&((!Q||""!==mt)&&(mt+=Er(T,L)),T.dump&&10===T.dump.charCodeAt(0)?mt+="-":mt+="- ",mt+=T.dump);T.tag=Vt,T.dump=mt||"[]"}(T,T.noArrayIndent&&!Ut&&L>0?L-1:L,T.dump,mt),Qe&&(T.dump="&ref_"+Ge+T.dump)):(function(T,L,j){var Vt,Ut,ee,Q="",mt=T.tag;for(Vt=0,Ut=j.length;Vt<Ut;Vt+=1)ee=j[Vt],T.replacer&&(ee=T.replacer.call(j,String(Vt),ee)),(gs(T,L,ee,!1,!1)||void 0===ee&&gs(T,L,null,!1,!1))&&(""!==Q&&(Q+=","+(T.condenseFlow?"":" ")),Q+=T.dump);T.tag=mt,T.dump="["+Q+"]"}(T,L,T.dump),Qe&&(T.dump="&ref_"+Ge+" "+T.dump));else{if("[object String]"!==ee){if("[object Undefined]"===ee)return!1;if(T.skipInvalid)return!1;throw new Ri("unacceptable kind of an object to dump "+ee)}"?"!==T.tag&&ks(T,T.dump,L,Vt,pe)}null!==T.tag&&"?"!==T.tag&&(me=encodeURI("!"===T.tag[0]?T.tag.slice(1):T.tag).replace(/!/g,"%21"),me="!"===T.tag[0]?"!"+me:"tag:yaml.org,2002:"===me.slice(0,18)?"!!"+me.slice(18):"!<"+me+">",T.dump=me+" "+T.dump)}return!0}function Ja(T,L){var mt,Vt,j=[],Q=[];for(Ns(T,j,Q),mt=0,Vt=Q.length;mt<Vt;mt+=1)L.duplicates.push(j[Q[mt]]);L.usedDuplicates=new Array(Vt)}function Ns(T,L,j){var Q,mt,Vt;if(null!==T&&"object"==typeof T)if(-1!==(mt=L.indexOf(T)))-1===j.indexOf(mt)&&j.push(mt);else if(L.push(T),Array.isArray(T))for(mt=0,Vt=T.length;mt<Vt;mt+=1)Ns(T[mt],L,j);else for(mt=0,Vt=(Q=Object.keys(T)).length;mt<Vt;mt+=1)Ns(T[Q[mt]],L,j)}function $a(T,L){return function(){throw new Error("Function yaml."+T+" is removed in js-yaml 4. Use yaml."+L+" instead, which is now safe by default.")}}const _o={Type:ki,Schema:Me,FAILSAFE_SCHEMA:Ki,JSON_SCHEMA:rr,CORE_SCHEMA:vr,DEFAULT_SCHEMA:la,load:Qt.load,loadAll:Qt.loadAll,dump:function(T,L){var j=new An(L=L||{});j.noRefs||Ja(T,j);var Q=T;return j.replacer&&(Q=j.replacer.call({"":Q},"",Q)),gs(j,0,Q,!0,!0)?j.dump+"\n":""},YAMLException:Ri,types:{binary:qn,float:jo,map:pi,null:hr,pairs:aa,set:Dr,timestamp:vn,bool:Jn,int:Xr,merge:xo,omap:wr,seq:Xe,str:Te},safeLoad:$a("safeLoad","load"),safeLoadAll:$a("safeLoadAll","loadAll"),safeDump:$a("safeDump","dump")},Ra="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:is,Blob:ms,File:Or}=Ra;function ea(T){return function(T){if(ut(T))return ot(T)}(T)||function(T){if(void 0!==xt&&null!=yt(T)||null!=T["@@iterator"])return lt(T)}(T)||Lt(T)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fl=f(36028),ns=f.n(fl),gl=function(L){return":/?#[]@!$&'()*+,;=".indexOf(L)>-1},Za=function(L){return/^[a-z0-9\-._~]+$/i.test(L)};function da(T){var L,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Q=j.escape,mt=arguments.length>2?arguments[2]:void 0;return"number"==typeof T&&(T=T.toString()),"string"==typeof T&&T.length&&Q?mt?JSON.parse(T):Rt()(L=ea(T)).call(L,function(Vt){var Ut,ee;if(Za(Vt)||gl(Vt)&&"unsafe"===Q)return Vt;var pe=new TextEncoder;return Rt()(Ut=Rt()(ee=Ft()(pe.encode(Vt))).call(ee,function(Ue){var Ge;return ns()(Ge="0".concat(Ue.toString(16).toUpperCase())).call(Ge,-2)})).call(Ut,function(Ue){return"%".concat(Ue)}).join("")}).join(""):T}function ws(T){var L=T.value;return Array.isArray(L)?function(T){var L=T.key,j=T.value,Q=T.style,mt=T.explode,Vt=T.escape,Ut=function(Ge){return da(Ge,{escape:Vt})};if("simple"===Q)return Rt()(j).call(j,function(Ue){return Ut(Ue)}).join(",");if("label"===Q)return".".concat(Rt()(j).call(j,function(Ue){return Ut(Ue)}).join("."));if("matrix"===Q)return Rt()(j).call(j,function(Ue){return Ut(Ue)}).reduce(function(Ue,Ge){var Qe,si,Ci;return!Ue||mt?le()(si=le()(Ci="".concat(Ue||"",";")).call(Ci,L,"=")).call(si,Ge):le()(Qe="".concat(Ue,",")).call(Qe,Ge)},"");if("form"===Q){var ee=mt?"&".concat(L,"="):",";return Rt()(j).call(j,function(Ue){return Ut(Ue)}).join(ee)}if("spaceDelimited"===Q){var pe=mt?"".concat(L,"="):"";return Rt()(j).call(j,function(Ue){return Ut(Ue)}).join(" ".concat(pe))}if("pipeDelimited"===Q){var me=mt?"".concat(L,"="):"";return Rt()(j).call(j,function(Ue){return Ut(Ue)}).join("|".concat(me))}}(T):"object"===it(L)?function(T){var L=T.key,j=T.value,Q=T.style,mt=T.explode,Vt=T.escape,Ut=function(me){return da(me,{escape:Vt})},ee=he()(j);return"simple"===Q?ee.reduce(function(pe,me){var Ue,Ge,Qe,si=Ut(j[me]),Ci=mt?"=":",",Ai=pe?"".concat(pe,","):"";return le()(Ue=le()(Ge=le()(Qe="".concat(Ai)).call(Qe,me)).call(Ge,Ci)).call(Ue,si)},""):"label"===Q?ee.reduce(function(pe,me){var Ue,Ge,Qe,si=Ut(j[me]),Ci=mt?"=":".",Ai=pe?"".concat(pe,"."):".";return le()(Ue=le()(Ge=le()(Qe="".concat(Ai)).call(Qe,me)).call(Ge,Ci)).call(Ue,si)},""):"matrix"===Q&&mt?ee.reduce(function(pe,me){var Ue,Ge,Qe=Ut(j[me]),si=pe?"".concat(pe,";"):";";return le()(Ue=le()(Ge="".concat(si)).call(Ge,me,"=")).call(Ue,Qe)},""):"matrix"===Q?ee.reduce(function(pe,me){var Ue,Ge,Qe=Ut(j[me]),si=pe?"".concat(pe,","):";".concat(L,"=");return le()(Ue=le()(Ge="".concat(si)).call(Ge,me,",")).call(Ue,Qe)},""):"form"===Q?ee.reduce(function(pe,me){var Ue,Ge,Qe,si,Ci=Ut(j[me]),Ai=pe?le()(Ue="".concat(pe)).call(Ue,mt?"&":","):"",xi=mt?"=":",";return le()(Ge=le()(Qe=le()(si="".concat(Ai)).call(si,me)).call(Qe,xi)).call(Ge,Ci)},""):void 0}(T):function(T){var Ut,L=T.key,j=T.value,Q=T.style,mt=T.escape,Vt=function(pe){return da(pe,{escape:mt})};return"simple"===Q?Vt(j):"label"===Q?".".concat(Vt(j)):"matrix"===Q?le()(Ut=";".concat(L,"=")).call(Ut,Vt(j)):"form"===Q||"deepObject"===Q?Vt(j):void 0}(T)}const nc=function(L,j){j.body=L};var Eu={serializeRes:Xc,mergeInQueryOrForm:na};function Yc(T){return _c.apply(this,arguments)}function _c(){return _c=de(He().mark(function T(L){var j,mt,Vt,Ut,ee=arguments;return He().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(j=ee.length>1&&void 0!==ee[1]?ee[1]:{},"object"===it(L)&&(L=(j=L).url),j.headers=j.headers||{},Eu.mergeInQueryOrForm(j),j.headers&&he()(j.headers).forEach(function(Ue){var Ge=j.headers[Ue];"string"==typeof Ge&&(j.headers[Ue]=Ge.replace(/\n+/g," "))}),!j.requestInterceptor){me.next=12;break}return me.next=8,j.requestInterceptor(j);case 8:if(me.t0=me.sent,me.t0){me.next=11;break}me.t0=j;case 11:j=me.t0;case 12:return/multipart\/form-data/i.test(j.headers["content-type"]||j.headers["Content-Type"])&&j.body instanceof is&&(delete j.headers["content-type"],delete j.headers["Content-Type"]),me.prev=14,me.next=17,(j.userFetch||fetch)(j.url,j);case 17:return mt=me.sent,me.next=20,Eu.serializeRes(mt,L,j);case 20:if(mt=me.sent,!j.responseInterceptor){me.next=28;break}return me.next=24,j.responseInterceptor(mt);case 24:if(me.t1=me.sent,me.t1){me.next=27;break}me.t1=mt;case 27:mt=me.t1;case 28:me.next=39;break;case 30:if(me.prev=30,me.t2=me.catch(14),mt){me.next=34;break}throw me.t2;case 34:throw(Vt=new Error(mt.statusText||"response status is ".concat(mt.status))).status=mt.status,Vt.statusCode=mt.status,Vt.responseError=me.t2,Vt;case 39:if(mt.ok){me.next=45;break}throw(Ut=new Error(mt.statusText||"response status is ".concat(mt.status))).status=mt.status,Ut.statusCode=mt.status,Ut.response=mt,Ut;case 45:return me.abrupt("return",mt);case 46:case"end":return me.stop()}},T,null,[[14,30]])})),_c.apply(this,arguments)}var $u=function(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(L)};function Tu(T,L){return L&&(0===L.indexOf("application/json")||L.indexOf("+json")>0)?JSON.parse(T):_o.load(T)}function Xc(T,L){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Q=j.loadSpec,mt=void 0!==Q&&Q,Vt={ok:T.ok,url:T.url||L,status:T.status,statusText:T.statusText,headers:Zu(T.headers)},Ut=Vt.headers["content-type"],ee=mt||$u(Ut),pe=ee?T.text:T.blob||T.buffer;return pe.call(T).then(function(me){if(Vt.text=me,Vt.data=me,ee)try{var Ue=Tu(me,Ut);Vt.body=Ue,Vt.obj=Ue}catch(Ge){Vt.parseError=Ge}return Vt})}function oc(T){return vi()(T).call(T,", ")?T.split(", "):T}function Zu(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof Ne()(T)?{}:Ft()(Ne()(T).call(T)).reduce(function(L,j){var Q=Ht(j,2);return L[Q[0]]=oc(Q[1]),L},{})}function gr(T,L){return!L&&"undefined"!=typeof navigator&&(L=navigator),L&&"ReactNative"===L.product?!(!T||"object"!==it(T)||"string"!=typeof T.uri):!!(void 0!==Or&&T instanceof Or||void 0!==ms&&T instanceof ms||ArrayBuffer.isView(T))||null!==T&&"object"===it(T)&&"function"==typeof T.pipe}function Pa(T,L){return Array.isArray(T)&&T.some(function(j){return gr(j,L)})}var ia={form:",",spaceDelimited:"%20",pipeDelimited:"|"},Cu={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function zr(T,L){var j=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Q=L.collectionFormat,mt=L.allowEmptyValue,Vt=L.serializationOption,Ut=L.encoding,ee="object"!==it(L)||Array.isArray(L)?L:L.value,pe=j?function(Ci){return Ci.toString()}:function(Ci){return encodeURIComponent(Ci)},me=pe(T);if(void 0===ee&&mt)return[[me,""]];if(gr(ee)||Pa(ee))return[[me,ee]];if(Vt)return _s(T,ee,j,Vt);if(Ut){if([it(Ut.style),it(Ut.explode),it(Ut.allowReserved)].some(function(Ci){return"undefined"!==Ci})){var Ue=Ut.style,Ge=Ut.explode,Qe=Ut.allowReserved;return _s(T,ee,j,{style:Ue,explode:Ge,allowReserved:Qe})}if(Ut.contentType){if("application/json"===Ut.contentType){var si="string"==typeof ee?ee:Xt()(ee);return[[me,pe(si)]]}return[[me,pe(ee.toString())]]}return"object"!==it(ee)?[[me,pe(ee)]]:Array.isArray(ee)&&ee.every(function(Ci){return"object"!==it(Ci)})?[[me,Rt()(ee).call(ee,pe).join(",")]]:[[me,pe(Xt()(ee))]]}return"object"!==it(ee)?[[me,pe(ee)]]:Array.isArray(ee)?"multi"===Q?[[me,Rt()(ee).call(ee,pe)]]:[[me,Rt()(ee).call(ee,pe).join(Cu[Q||"csv"])]]:[[me,""]]}function _s(T,L,j,Q){var mt,Ue,Ge,Vt=Q.style||"form",Ut=void 0===Q.explode?"form"===Vt:Q.explode,ee=!j&&(Q&&Q.allowReserved?"unsafe":"reserved"),pe=function(si){return da(si,{escape:ee})},me=j?function(Qe){return Qe}:function(Qe){return da(Qe,{escape:ee})};return"object"!==it(L)?[[me(T),pe(L)]]:Array.isArray(L)?Ut?[[me(T),Rt()(L).call(L,pe)]]:[[me(T),Rt()(L).call(L,pe).join(ia[Vt])]]:"deepObject"===Vt?Rt()(Ue=he()(L)).call(Ue,function(Qe){var si;return[me(le()(si="".concat(T,"[")).call(si,Qe,"]")),pe(L[Qe])]}):Ut?Rt()(Ge=he()(L)).call(Ge,function(Qe){return[me(Qe),pe(L[Qe])]}):[[me(T),Rt()(mt=he()(L)).call(mt,function(Qe){var si;return[le()(si="".concat(me(Qe),",")).call(si,pe(L[Qe]))]}).join(",")]]}function pa(T){return Yt()(T).reduce(function(L,j){var ee,Q=Ht(j,2),Ut=at(zr(Q[0],Q[1],!0));try{for(Ut.s();!(ee=Ut.n()).done;){var pe=Ht(ee.value,2),me=pe[0],Ue=pe[1];if(Array.isArray(Ue)){var Qe,Ge=at(Ue);try{for(Ge.s();!(Qe=Ge.n()).done;){var si=Qe.value;if(ArrayBuffer.isView(si)){var Ci=new ms([si]);L.append(me,Ci)}else L.append(me,si)}}catch(xi){Ge.e(xi)}finally{Ge.f()}}else if(ArrayBuffer.isView(Ue)){var Ai=new ms([Ue]);L.append(me,Ai)}else L.append(me,Ue)}}catch(xi){Ut.e(xi)}finally{Ut.f()}return L},new is)}function Fa(T){var L=he()(T).reduce(function(j,Q){var Vt,mt=at(zr(Q,T[Q]));try{for(mt.s();!(Vt=mt.n()).done;){var Ut=Ht(Vt.value,2);j[Ut[0]]=Ut[1]}}catch(me){mt.e(me)}finally{mt.f()}return j},{});return Et().stringify(L,{encode:!1,indices:!1})||""}function na(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},L=T.url,j=void 0===L?"":L,Q=T.query,mt=T.form,Vt=function(){for(var Ii=arguments.length,Xn=new Array(Ii),Tn=0;Tn<Ii;Tn++)Xn[Tn]=arguments[Tn];var Oo=$t()(Xn).call(Xn,function(io){return io}).join("&");return Oo?"?".concat(Oo):""};if(mt){var Ut=he()(mt).some(function(Ji){var Ii=mt[Ji].value;return gr(Ii)||Pa(Ii)}),ee=T.headers["content-type"]||T.headers["Content-Type"];if(Ut||/multipart\/form-data/i.test(ee)){var pe=pa(T.form);nc(pe,T)}else T.body=Fa(mt);delete T.form}if(Q){var me=j.split("?"),Ue=Ht(me,2),Ge=Ue[0],Qe=Ue[1],si="";if(Qe){var Ci=Et().parse(Qe),Ai=he()(Q);Ai.forEach(function(Ji){return delete Ci[Ji]}),si=Et().stringify(Ci,{encode:!0})}var xi=Vt(si,Fa(Q));T.url=Ge+xi,delete T.query}return T}function Kc(T,L){if(!(T instanceof L))throw new TypeError("Cannot call a class as a function")}function Jc(T,L){for(var j=0;j<L.length;j++){var Q=L[j];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),M(T,Q.key,Q)}}function rc(T,L,j){return L&&Jc(T.prototype,L),j&&Jc(T,j),T}var T,$c=f(20265),Mh=f.n($c),sc=f(2204),xr=f.n(sc),Zc=f(35644),Da=f.n(Zc),Qu=(T=function(L,j){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,mt){Q.__proto__=mt}||function(Q,mt){for(var Vt in mt)mt.hasOwnProperty(Vt)&&(Q[Vt]=mt[Vt])})(L,j)},function(L,j){function Q(){this.constructor=L}T(L,j),L.prototype=null===j?Object.create(j):(Q.prototype=j.prototype,new Q)}),Ba=Object.prototype.hasOwnProperty;function ac(T,L){return Ba.call(T,L)}function vc(T){if(Array.isArray(T)){for(var j=new Array(T.length),L=0;L<j.length;L++)j[L]=""+L;return j}if(Object.keys)return Object.keys(T);for(var Q in j=[],T)ac(T,Q)&&j.push(Q);return j}function os(T){switch(typeof T){case"object":return JSON.parse(JSON.stringify(T));case"undefined":return null;default:return T}}function Ll(T){for(var Q,L=0,j=T.length;L<j;){if(!((Q=T.charCodeAt(L))>=48&&Q<=57))return!1;L++}return!0}function Un(T){return-1===T.indexOf("/")&&-1===T.indexOf("~")?T:T.replace(/~/g,"~0").replace(/\//g,"~1")}function bc(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}function yc(T){if(void 0===T)return!0;if(T)if(Array.isArray(T)){for(var L=0,j=T.length;L<j;L++)if(yc(T[L]))return!0}else if("object"==typeof T){var Q=vc(T),mt=Q.length;for(L=0;L<mt;L++)if(yc(T[Q[L]]))return!0}return!1}function Nl(T,L){var j=[T];for(var Q in L){var mt="object"==typeof L[Q]?JSON.stringify(L[Q],null,2):L[Q];void 0!==mt&&j.push(Q+": "+mt)}return j.join("\n")}var ml=function(T){function L(j,Q,mt,Vt,Ut){var ee=this.constructor,pe=T.call(this,Nl(j,{name:Q,index:mt,operation:Vt,tree:Ut}))||this;return pe.name=Q,pe.index=mt,pe.operation=Vt,pe.tree=Ut,Object.setPrototypeOf(pe,ee.prototype),pe.message=Nl(j,{name:Q,index:mt,operation:Vt,tree:Ut}),pe}return Qu(L,T),L}(Error),Go=ml,Su=os,_l={add:function(T,L,j){return T[L]=this.value,{newDocument:j}},remove:function(T,L,j){var Q=T[L];return delete T[L],{newDocument:j,removed:Q}},replace:function(T,L,j){var Q=T[L];return T[L]=this.value,{newDocument:j,removed:Q}},move:function(T,L,j){var Q=Pl(j,this.path);Q&&(Q=os(Q));var mt=vs(j,{op:"remove",path:this.from}).removed;return vs(j,{op:"add",path:this.path,value:mt}),{newDocument:j,removed:Q}},copy:function(T,L,j){var Q=Pl(j,this.from);return vs(j,{op:"add",path:this.path,value:os(Q)}),{newDocument:j}},test:function(T,L,j){return{newDocument:j,test:Bl(T[L],this.value)}},_get:function(T,L,j){return this.value=T[L],{newDocument:j}}},qu={add:function(T,L,j){return Ll(L)?T.splice(L,0,this.value):T[L]=this.value,{newDocument:j,index:L}},remove:function(T,L,j){return{newDocument:j,removed:T.splice(L,1)[0]}},replace:function(T,L,j){var Q=T[L];return T[L]=this.value,{newDocument:j,removed:Q}},move:_l.move,copy:_l.copy,test:_l.test,_get:_l._get};function Pl(T,L){if(""==L)return T;var j={op:"_get",path:L};return vs(T,j),j.value}function vs(T,L,j,Q,mt,Vt){if(void 0===j&&(j=!1),void 0===Q&&(Q=!0),void 0===mt&&(mt=!0),void 0===Vt&&(Vt=0),j&&("function"==typeof j?j(L,0,T,L.path):Fl(L,0)),""===L.path){var Ut={newDocument:T};if("add"===L.op)return Ut.newDocument=L.value,Ut;if("replace"===L.op)return Ut.newDocument=L.value,Ut.removed=T,Ut;if("move"===L.op||"copy"===L.op)return Ut.newDocument=Pl(T,L.from),"move"===L.op&&(Ut.removed=T),Ut;if("test"===L.op){if(Ut.test=Bl(T,L.value),!1===Ut.test)throw new Go("Test operation failed","TEST_OPERATION_FAILED",Vt,L,T);return Ut.newDocument=T,Ut}if("remove"===L.op)return Ut.removed=T,Ut.newDocument=null,Ut;if("_get"===L.op)return L.value=T,Ut;if(j)throw new Go("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",Vt,L,T);return Ut}Q||(T=os(T));var pe=(L.path||"").split("/"),me=T,Ue=1,Ge=pe.length,Qe=void 0,si=void 0,Ci=void 0;for(Ci="function"==typeof j?j:Fl;;){if((si=pe[Ue])&&-1!=si.indexOf("~")&&(si=bc(si)),mt&&"__proto__"==si)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(j&&void 0===Qe&&(void 0===me[si]?Qe=pe.slice(0,Ue).join("/"):Ue==Ge-1&&(Qe=L.path),void 0!==Qe&&Ci(L,0,T,Qe)),Ue++,Array.isArray(me)){if("-"===si)si=me.length;else{if(j&&!Ll(si))throw new Go("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",Vt,L,T);Ll(si)&&(si=~~si)}if(Ue>=Ge){if(j&&"add"===L.op&&si>me.length)throw new Go("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",Vt,L,T);if(!1===(Ut=qu[L.op].call(L,me,si,T)).test)throw new Go("Test operation failed","TEST_OPERATION_FAILED",Vt,L,T);return Ut}}else if(Ue>=Ge){if(!1===(Ut=_l[L.op].call(L,me,si,T)).test)throw new Go("Test operation failed","TEST_OPERATION_FAILED",Vt,L,T);return Ut}if(me=me[si],j&&Ue<Ge&&(!me||"object"!=typeof me))throw new Go("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",Vt,L,T)}}function Bs(T,L,j,Q,mt){if(void 0===Q&&(Q=!0),void 0===mt&&(mt=!0),j&&!Array.isArray(L))throw new Go("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");Q||(T=os(T));for(var Vt=new Array(L.length),Ut=0,ee=L.length;Ut<ee;Ut++)Vt[Ut]=vs(T,L[Ut],j,!0,mt,Ut),T=Vt[Ut].newDocument;return Vt.newDocument=T,Vt}function Ec(T,L,j){var Q=vs(T,L);if(!1===Q.test)throw new Go("Test operation failed","TEST_OPERATION_FAILED",j,L,T);return Q.newDocument}function Fl(T,L,j,Q){if("object"!=typeof T||null===T||Array.isArray(T))throw new Go("Operation is not an object","OPERATION_NOT_AN_OBJECT",L,T,j);if(!_l[T.op])throw new Go("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",L,T,j);if("string"!=typeof T.path)throw new Go("Operation `path` property is not a string","OPERATION_PATH_INVALID",L,T,j);if(0!==T.path.indexOf("/")&&T.path.length>0)throw new Go('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",L,T,j);if(("move"===T.op||"copy"===T.op)&&"string"!=typeof T.from)throw new Go("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",L,T,j);if(("add"===T.op||"replace"===T.op||"test"===T.op)&&void 0===T.value)throw new Go("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",L,T,j);if(("add"===T.op||"replace"===T.op||"test"===T.op)&&yc(T.value))throw new Go("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",L,T,j);if(j)if("add"==T.op){var mt=T.path.split("/").length,Vt=Q.split("/").length;if(mt!==Vt+1&&mt!==Vt)throw new Go("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",L,T,j)}else if("replace"===T.op||"remove"===T.op||"_get"===T.op){if(T.path!==Q)throw new Go("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",L,T,j)}else if("move"===T.op||"copy"===T.op){var ee=ar([{op:"_get",path:T.from,value:void 0}],j);if(ee&&"OPERATION_PATH_UNRESOLVABLE"===ee.name)throw new Go("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",L,T,j)}}function ar(T,L,j){try{if(!Array.isArray(T))throw new Go("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(L)Bs(os(L),os(T),j||!0);else{j=j||Fl;for(var Q=0;Q<T.length;Q++)j(T[Q],Q,L,void 0)}}catch(mt){if(mt instanceof Go)return mt;throw mt}}function Bl(T,L){if(T===L)return!0;if(T&&L&&"object"==typeof T&&"object"==typeof L){var mt,Vt,Ut,j=Array.isArray(T),Q=Array.isArray(L);if(j&&Q){if((Vt=T.length)!=L.length)return!1;for(mt=Vt;0!=mt--;)if(!Bl(T[mt],L[mt]))return!1;return!0}if(j!=Q)return!1;var ee=Object.keys(T);if((Vt=ee.length)!==Object.keys(L).length)return!1;for(mt=Vt;0!=mt--;)if(!L.hasOwnProperty(ee[mt]))return!1;for(mt=Vt;0!=mt--;)if(!Bl(T[Ut=ee[mt]],L[Ut]))return!1;return!0}return T!=T&&L!=L}var tl=new WeakMap,Ia=function(L){this.observers=new Map,this.obj=L},vl=function(L,j){this.callback=L,this.observer=j};function Hl(T,L){L.unobserve()}function Ys(T,L){var Q,mt=function(T){return tl.get(T)}(T);if(mt){var Vt=function(T,L){return T.observers.get(L)}(mt,L);Q=Vt&&Vt.observer}else mt=new Ia(T),tl.set(T,mt);if(Q)return Q;if(Q={},mt.value=os(T),L){Q.callback=L,Q.next=null;var Ut=function(){el(Q)},ee=function(){clearTimeout(Q.next),Q.next=setTimeout(Ut)};"undefined"!=typeof window&&(window.addEventListener("mouseup",ee),window.addEventListener("keyup",ee),window.addEventListener("mousedown",ee),window.addEventListener("keydown",ee),window.addEventListener("change",ee))}return Q.patches=[],Q.object=T,Q.unobserve=function(){el(Q),clearTimeout(Q.next),function(T,L){T.observers.delete(L.callback)}(mt,Q),"undefined"!=typeof window&&(window.removeEventListener("mouseup",ee),window.removeEventListener("keyup",ee),window.removeEventListener("mousedown",ee),window.removeEventListener("keydown",ee),window.removeEventListener("change",ee))},mt.observers.set(L,new vl(L,Q)),Q}function el(T,L){void 0===L&&(L=!1);var j=tl.get(T.object);Ha(j.value,T.object,T.patches,"",L),T.patches.length&&Bs(j.value,T.patches);var Q=T.patches;return Q.length>0&&(T.patches=[],T.callback&&T.callback(Q)),Q}function Ha(T,L,j,Q,mt){if(L!==T){"function"==typeof L.toJSON&&(L=L.toJSON());for(var Vt=vc(L),Ut=vc(T),pe=!1,me=Ut.length-1;me>=0;me--){var Ge=T[Ue=Ut[me]];if(!ac(L,Ue)||void 0===L[Ue]&&void 0!==Ge&&!1===Array.isArray(L))Array.isArray(T)===Array.isArray(L)?(mt&&j.push({op:"test",path:Q+"/"+Un(Ue),value:os(Ge)}),j.push({op:"remove",path:Q+"/"+Un(Ue)}),pe=!0):(mt&&j.push({op:"test",path:Q,value:T}),j.push({op:"replace",path:Q,value:L}));else{var Qe=L[Ue];"object"==typeof Ge&&null!=Ge&&"object"==typeof Qe&&null!=Qe&&Array.isArray(Ge)===Array.isArray(Qe)?Ha(Ge,Qe,j,Q+"/"+Un(Ue),mt):Ge!==Qe&&(mt&&j.push({op:"test",path:Q+"/"+Un(Ue),value:os(Ge)}),j.push({op:"replace",path:Q+"/"+Un(Ue),value:os(Qe)}))}}if(pe||Vt.length!=Ut.length)for(me=0;me<Vt.length;me++){var Ue;!ac(T,Ue=Vt[me])&&void 0!==L[Ue]&&j.push({op:"add",path:Q+"/"+Un(Ue),value:os(L[Ue])})}}}function Tc(T,L,j){void 0===j&&(j=!1);var Q=[];return Ha(T,L,Q,"",j),Q}Object.assign({},b,p,{JsonPatchError:ml,deepClone:os,escapePathComponent:Un,unescapePathComponent:bc});var Vl=f(25320),Xs=f.n(Vl),Sc=f(77282),ih=f.n(Sc);const vo={add:function(T,L){return{op:"add",path:T,value:L}},replace:qc,remove:function(T){return{op:"remove",path:T}},merge:function(T,L){return{type:"mutation",op:"merge",path:T,value:L}},mergeDeep:function(T,L){return{type:"mutation",op:"mergeDeep",path:T,value:L}},context:function(T,L){return{type:"context",path:T,value:L}},getIn:function(T,L){return L.reduce(function(j,Q){return void 0!==Q&&j?j[Q]:j},T)},applyPatch:function(T,L,j){if(j=j||{},"merge"===(L=H(H({},L),{},{path:L.path&&bl(L.path)})).op){var Q=Ce(T,L.path);pt()(Q,L.value),Bs(T,[qc(L.path,Q)])}else if("mergeDeep"===L.op){var mt=Ce(T,L.path);for(var Vt in L.value){var Ut=L.value[Vt],ee=Array.isArray(Ut);if(ee){var pe=mt[Vt]||[];mt[Vt]=le()(pe).call(pe,Ut)}else if(bs(Ut)&&!ee){var me=H({},mt[Vt]);for(var Ue in Ut){if(Object.prototype.hasOwnProperty.call(me,Ue)){me=Xs()(ih()(me),Ut);break}pt()(me,U({},Ue,Ut[Ue]))}mt[Vt]=me}else mt[Vt]=Ut}}else if("add"===L.op&&""===L.path&&bs(L.value)){Bs(T,he()(L.value).reduce(function(xi,Ji){return xi.push({op:"add",path:"/".concat(bl(Ji)),value:L.value[Ji]}),xi},[]))}else if("replace"===L.op&&""===L.path){var si=L.value;j.allowMetaPatches&&L.meta&&Tt(L)&&(Array.isArray(L.value)||bs(L.value))&&(si=H(H({},si),L.meta)),T=si}else if(Bs(T,[L]),j.allowMetaPatches&&L.meta&&Tt(L)&&(Array.isArray(L.value)||bs(L.value))){var Ai=H(H({},Ce(T,L.path)),L.meta);Bs(T,[qc(L.path,Ai)])}return T},parentPathMatch:function(T,L){if(!Array.isArray(L))return!1;for(var j=0,Q=L.length;j<Q;j+=1)if(L[j]!==T[j])return!1;return!0},flatten:nl,fullyNormalizeArray:function(T){return Aa(nl(yl(T)))},normalizeArray:yl,isPromise:function(T){return bs(T)&&Va(T.then)},forEachNew:function(T,L){try{return cc(T,fa,L)}catch(j){return j}},forEachNewPrimitive:function(T,L){try{return cc(T,il,L)}catch(j){return j}},isJsonPatch:El,isContextPatch:function(T){return fe(T)&&"context"===T.type},isPatch:fe,isMutation:gt,isAdditiveMutation:Tt,isGenerator:function(T){return"[object GeneratorFunction]"===Object.prototype.toString.call(T)},isFunction:Va,isObject:bs,isError:function(T){return T instanceof Error}};function bl(T){return Array.isArray(T)?T.length<1?"":"/".concat(Rt()(T).call(T,function(L){return(L+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):T}function qc(T,L,j){return{op:"replace",path:T,value:L,meta:j}}function cc(T,L,j){var Q;return Aa(nl(Rt()(Q=$t()(T).call(T,Tt)).call(Q,function(ee){return L(ee.value,j,ee.path)})||[]))}function il(T,L,j){return j=j||[],Array.isArray(T)?Rt()(T).call(T,function(mt,Vt){return il(mt,L,le()(j).call(j,Vt))}):bs(T)?Rt()(Q=he()(T)).call(Q,function(mt){return il(T[mt],L,le()(j).call(j,mt))}):L(T,j[j.length-1],j);var Q}function fa(T,L,j){var Q=[];if((j=j||[]).length>0){var mt=L(T,j[j.length-1],j);mt&&(Q=le()(Q).call(Q,mt))}if(Array.isArray(T)){var Vt=Rt()(T).call(T,function(pe,me){return fa(pe,L,le()(j).call(j,me))});Vt&&(Q=le()(Q).call(Q,Vt))}else if(bs(T)){var Ut,ee=Rt()(Ut=he()(T)).call(Ut,function(pe){return fa(T[pe],L,le()(j).call(j,pe))});ee&&(Q=le()(Q).call(Q,ee))}return nl(Q)}function yl(T){return Array.isArray(T)?T:[T]}function nl(T){var L;return le()(L=[]).apply(L,ea(Rt()(T).call(T,function(j){return Array.isArray(j)?nl(j):j})))}function Aa(T){return $t()(T).call(T,function(L){return void 0!==L})}function bs(T){return T&&"object"===it(T)}function Va(T){return T&&"function"==typeof T}function El(T){if(fe(T)){var L=T.op;return"add"===L||"remove"===L||"replace"===L}return!1}function gt(T){return El(T)||fe(T)&&"mutation"===T.type}function Tt(T){return gt(T)&&("add"===T.op||"replace"===T.op||"merge"===T.op||"mergeDeep"===T.op)}function fe(T){return T&&"object"===it(T)}function Ce(T,L){try{return Pl(T,L)}catch(j){return console.error(j),{}}}var Je=f(3933),De=f.n(Je),Ve=f(26360),hi=f.n(Ve);function _i(T,L){function j(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var Q=arguments.length,mt=new Array(Q),Vt=0;Vt<Q;Vt++)mt[Vt]=arguments[Vt];this.message=mt[0],L&&L.apply(this,mt)}return(j.prototype=new Error).name=T,j.prototype.constructor=j,j}var bi=f(57051),bn=f.n(bi),ln=["properties"],kn=["properties"],lr=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],lo=["schema/example","items/example"];function eo(T){var L=T[T.length-1],j=T[T.length-2],Q=T.join("/");return ln.indexOf(L)>-1&&-1===kn.indexOf(j)||lr.indexOf(Q)>-1||lo.some(function(mt){return Q.indexOf(mt)>-1})}function Xo(T,L){var j,mt=Ht(T.split("#"),2),Ut=mt[1],ee=Ct.resolve(mt[0]||"",L||"");return Ut?le()(j="".concat(ee,"#")).call(j,Ut):ee}var co="application/json, application/yaml",ys=new RegExp("^([a-z]+://|//)","i"),rs=_i("JSONRefError",function(L,j,Q){this.originalError=Q,pt()(this,j||{})}),kr={},Ua=new(De()),Au=[function(T){return"paths"===T[0]&&"responses"===T[3]&&"examples"===T[5]},function(T){return"paths"===T[0]&&"responses"===T[3]&&"content"===T[5]&&"example"===T[7]},function(T){return"paths"===T[0]&&"responses"===T[3]&&"content"===T[5]&&"examples"===T[7]&&"value"===T[9]},function(T){return"paths"===T[0]&&"requestBody"===T[3]&&"content"===T[4]&&"example"===T[6]},function(T){return"paths"===T[0]&&"requestBody"===T[3]&&"content"===T[4]&&"examples"===T[6]&&"value"===T[8]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"example"===T[4]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"example"===T[5]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"examples"===T[4]&&"value"===T[6]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"examples"===T[5]&&"value"===T[7]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"content"===T[4]&&"example"===T[6]},function(T){return"paths"===T[0]&&"parameters"===T[2]&&"content"===T[4]&&"examples"===T[6]&&"value"===T[8]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"content"===T[4]&&"example"===T[7]},function(T){return"paths"===T[0]&&"parameters"===T[3]&&"content"===T[5]&&"examples"===T[7]&&"value"===T[9]}],dd={key:"$ref",plugin:function(L,j,Q,mt){var Vt=mt.getInstance(),Ut=ns()(Q).call(Q,0,-1);if(!eo(Ut)&&!function(L){return Au.some(function(j){return j(L)})}(Ut)){var pe=mt.getContext(Q).baseDoc;if("string"!=typeof L)return new rs("$ref: must be a string (JSON-Ref)",{$ref:L,baseDoc:pe,fullPath:Q});var Qe,si,Ci,me=oh(L),Ue=me[0],Ge=me[1]||"";try{Qe=pe||Ue?Dc(Ue,pe):null}catch(Ii){return oa(Ii,{pointer:Ge,$ref:L,basePath:Qe,fullPath:Q})}if(function(T,L,j,Q){var mt,Vt,Ut=Ua.get(Q);Ut||Ua.set(Q,Ut={});var ee=function(T){return 0===T.length?"":"/".concat(Rt()(T).call(T,ol).join("/"))}(j),pe=le()(mt="".concat(L||"<specmap-base>","#")).call(mt,T),me=ee.replace(/allOf\/\d+\/?/g,"");if(L===Q.contextTree.get([]).baseDoc&&cr(me,T))return!0;var Ge="",Qe=j.some(function(si){var Ci;return Ge=le()(Ci="".concat(Ge,"/")).call(Ci,ol(si)),Ut[Ge]&&Ut[Ge].some(function(Ai){return cr(Ai,pe)||cr(pe,Ai)})});if(Qe)return!0;Ut[me]=le()(Vt=Ut[me]||[]).call(Vt,pe)}(Ge,Qe,Ut,mt)&&!Vt.useCircularStructures){var Ai=Xo(L,Qe);return L===Ai?null:vo.replace(Q,Ai)}if(null==Qe?(Ci=iu(Ge),void 0===(si=mt.get(Ci))&&(si=new rs("Could not resolve reference: ".concat(L),{pointer:Ge,$ref:L,baseDoc:pe,fullPath:Q}))):si=null!=(si=Ga(Qe,Ge)).__value?si.__value:si.catch(function(Ii){throw oa(Ii,{pointer:Ge,$ref:L,baseDoc:pe,fullPath:Q})}),si instanceof Error)return[vo.remove(Q),si];var xi=Xo(L,Qe),Ji=vo.replace(Ut,si,{$$ref:xi});if(Qe&&Qe!==pe)return[Ji,vo.context(Ut,{baseDoc:Qe})];try{if(!function(T,L){var j=[T];return L.path.reduce(function(mt,Vt){return j.push(mt[Vt]),mt[Vt]},T),function Q(mt){return vo.isObject(mt)&&(j.indexOf(mt)>=0||he()(mt).some(function(Vt){return Q(mt[Vt])}))}(L.value)}(mt.state,Ji)||Vt.useCircularStructures)return Ji}catch(Ii){return null}}}},eu=pt()(dd,{docCache:kr,absoluteify:Dc,clearCache:function(T){void 0!==T?delete kr[T]:he()(kr).forEach(function(L){delete kr[L]})},JSONRefError:rs,wrapError:oa,getDoc:rh,split:oh,extractFromDoc:Ga,fetchJSON:function(T){return fetch(T,{headers:{Accept:co},loadSpec:!0}).then(function(L){return L.text()}).then(function(L){return _o.load(L)})},extract:Ic,jsonPointerToArray:iu,unescapeJsonPointerToken:Mc});const hc=eu;function Dc(T,L){if(!ys.test(T)){var j;if(!L)throw new rs(le()(j="Tried to resolve a relative URL, without having a basePath. path: '".concat(T,"' basePath: '")).call(j,L,"'"));return Ct.resolve(L,T)}return T}function oa(T,L){var j,Q;return j=T&&T.response&&T.response.body?le()(Q="".concat(T.response.body.code," ")).call(Q,T.response.body.message):T.message,new rs("Could not resolve reference: ".concat(j),L,T)}function oh(T){return(T+"").split("#")}function Ga(T,L){var j=kr[T];if(j&&!vo.isPromise(j))try{var Q=Ic(L,j);return pt()(xr().resolve(Q),{__value:Q})}catch(mt){return xr().reject(mt)}return rh(T).then(function(mt){return Ic(L,mt)})}function rh(T){var L=kr[T];return L?vo.isPromise(L)?L:xr().resolve(L):(kr[T]=eu.fetchJSON(T).then(function(j){return kr[T]=j,j}),kr[T])}function Ic(T,L){var j=iu(T);if(j.length<1)return L;var Q=vo.getIn(L,j);if(void 0===Q)throw new rs("Could not resolve pointer: ".concat(T," does not exist in document"),{pointer:T});return Q}function iu(T){var L;if("string"!=typeof T)throw new TypeError("Expected a string, got a ".concat(it(T)));return"/"===T[0]&&(T=T.substr(1)),""===T?[]:Rt()(L=T.split("/")).call(L,Mc)}function Mc(T){return"string"!=typeof T?T:new(hi())("=".concat(T.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function ol(T){var L,j=new(hi())([["",T.replace(/~/g,"~0").replace(/\//g,"~1")]]);return ns()(L=j.toString()).call(L,1)}function cr(T,L){if(function(L){return!L||"/"===L||"#"===L}(L))return!0;var j=T.charAt(L.length),Q=ns()(L).call(L,-1);return 0===T.indexOf(L)&&(!j||"/"===j||"#"===j)&&"#"!==Q}var nu=f(18421),lh=f.n(nu);const xh={key:"allOf",plugin:function(L,j,Q,mt,Vt){if(!Vt.meta||!Vt.meta.$$ref){var Ut=ns()(Q).call(Q,0,-1);if(!eo(Ut)){if(!Array.isArray(L)){var ee=new TypeError("allOf must be an array");return ee.fullPath=Q,ee}var pe=!1,me=Vt.value;if(Ut.forEach(function(Qe){!me||(me=me[Qe])}),me=H({},me),!lh()(me)){delete me.allOf;var Ge,Ue=[];return Ue.push(mt.replace(Ut,{})),L.forEach(function(Qe,si){if(!mt.isObject(Qe)){if(pe)return null;pe=!0;var Ci=new TypeError("Elements in allOf must be objects");return Ci.fullPath=Q,Ue.push(Ci)}Ue.push(mt.mergeDeep(Ut,Qe));var xi=function(T,L){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Q=j.specmap,mt=j.getBaseUrlForNodePath,Vt=void 0===mt?function(me){var Ue;return Q.getContext(le()(Ue=[]).call(Ue,ea(L),ea(me))).baseDoc}:mt,Ut=j.targetKeys,ee=void 0===Ut?["$ref","$$ref"]:Ut,pe=[];return bn()(T).forEach(function(){if(vi()(ee).call(ee,this.key)&&"string"==typeof this.node){var Ue=this.path,Ge=le()(L).call(L,this.path),Qe=Xo(this.node,Vt(Ue));pe.push(Q.replace(Ge,Qe))}}),pe}(Qe,ns()(Q).call(Q,0,-1),{getBaseUrlForNodePath:function(Ii){var Xn;return mt.getContext(le()(Xn=[]).call(Xn,ea(Q),[si],ea(Ii))).baseDoc},specmap:mt});Ue.push.apply(Ue,ea(xi))}),Ue.push(mt.mergeDeep(Ut,me)),me.$$ref||Ue.push(mt.remove(le()(Ge=[]).call(Ge,Ut,"$$ref"))),Ue}}}}},kh={key:"parameters",plugin:function(L,j,Q,mt){if(Array.isArray(L)&&L.length){var Vt=pt()([],L),Ut=ns()(Q).call(Q,0,-1),ee=H({},vo.getIn(mt.spec,Ut));return L.forEach(function(pe,me){try{Vt[me].default=mt.parameterMacro(ee,pe)}catch(Ge){var Ue=new Error(Ge);return Ue.fullPath=Q,Ue}}),vo.replace(Q,Vt)}return vo.replace(Q,L)}},Lh={key:"properties",plugin:function(L,j,Q,mt){var Vt=H({},L);for(var Ut in L)try{Vt[Ut].default=mt.modelPropertyMacro(Vt[Ut])}catch(me){var ee=new Error(me);return ee.fullPath=Q,ee}return vo.replace(Q,Vt)}};var Nh=function(){function T(L){Kc(this,T),this.root=xu(L||{})}return rc(T,[{key:"set",value:function(j,Q){var mt=this.getParent(j,!0);if(mt){var Vt=j[j.length-1],Ut=mt.children;Ut[Vt]?ou(Ut[Vt],Q,mt):Ut[Vt]=xu(Q,mt)}else ou(this.root,Q,null)}},{key:"get",value:function(j){if((j=j||[]).length<1)return this.root.value;for(var mt,Vt,Q=this.root,Ut=0;Ut<j.length&&(mt=Q.children)[Vt=j[Ut]];Ut+=1)Q=mt[Vt];return Q&&Q.protoValue}},{key:"getParent",value:function(j,Q){return!j||j.length<1?null:j.length<2?this.root:ns()(j).call(j,0,-1).reduce(function(mt,Vt){if(!mt)return mt;var Ut=mt.children;return!Ut[Vt]&&Q&&(Ut[Vt]=xu(null,mt)),Ut[Vt]},this.root)}}]),T}();function xu(T,L){return ou({children:{}},T,L)}function ou(T,L,j){return T.value=L||{},T.protoValue=j?H(H({},j.protoValue),T.value):T.value,he()(T.children).forEach(function(Q){var mt=T.children[Q];T.children[Q]=ou(mt,mt.value,T)}),T}var dc=function(){},Ds=function(){function T(L){var Q,mt,j=this;Kc(this,T),pt()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new Nh,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:pt()(Object.create(this),vo,{getInstance:function(){return j}}),allowMetaPatches:!1},L),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=$t()(Q=Rt()(mt=this.plugins).call(mt,this.wrapPlugin.bind(this))).call(Q,vo.isFunction),this.patches.push(vo.add([],this.spec)),this.patches.push(vo.context([],this.context)),this.updatePatches(this.patches)}return rc(T,[{key:"debug",value:function(j){if(this.debugLevel===j){for(var Q,mt=arguments.length,Vt=new Array(mt>1?mt-1:0),Ut=1;Ut<mt;Ut++)Vt[Ut-1]=arguments[Ut];(Q=console).log.apply(Q,Vt)}}},{key:"verbose",value:function(j){if("verbose"===this.debugLevel){for(var Q,mt,Vt=arguments.length,Ut=new Array(Vt>1?Vt-1:0),ee=1;ee<Vt;ee++)Ut[ee-1]=arguments[ee];(Q=console).log.apply(Q,le()(mt=["[".concat(j,"]   ")]).call(mt,Ut))}}},{key:"wrapPlugin",value:function(j,Q){var Ut,pe,me,mt=this.pathDiscriminator,Vt=null;return j[this.pluginProp]?(Vt=j,Ut=j[this.pluginProp]):vo.isFunction(j)?Ut=j:vo.isObject(j)&&(pe=j,me=function(Ge,Qe){return!Array.isArray(Ge)||Ge.every(function(si,Ci){return si===Qe[Ci]})},Ut=He().mark(function Ue(Ge,Qe){var si,Ci,Ai,xi,Ji,Ii;return He().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:Ii=function(io,So,Zt){var Is,mr,Cr,jn,Lr,Yr,ba,ya,Zl,ju,vh,ra,Yh;return He().wrap(function(Hs){for(;;)switch(Hs.prev=Hs.next){case 0:if(vo.isObject(io)){Hs.next=6;break}if(pe.key!==So[So.length-1]){Hs.next=4;break}return Hs.next=4,pe.plugin(io,pe.key,So,Qe);case 4:Hs.next=30;break;case 6:mr=So[Is=So.length-1],Cr=So.indexOf("properties"),jn="properties"===mr&&Is===Cr,Lr=Qe.allowMetaPatches&&Ci[io.$$ref],Yr=0,ba=he()(io);case 12:if(!(Yr<ba.length)){Hs.next=30;break}if(Zl=io[ya=ba[Yr]],ju=le()(So).call(So,ya),vh=vo.isObject(Zl),ra=io.$$ref,Lr){Hs.next=22;break}if(!vh){Hs.next=22;break}return Qe.allowMetaPatches&&ra&&(Ci[ra]=!0),Hs.delegateYield(Ii(Zl,ju,Zt),"t0",22);case 22:if(jn||ya!==pe.key){Hs.next=27;break}if(Yh=me(mt,So),mt&&!Yh){Hs.next=27;break}return Hs.next=27,pe.plugin(Zl,ya,ju,Qe,Zt);case 27:Yr++,Hs.next=12;break;case 30:case"end":return Hs.stop()}},si)},si=He().mark(Ii),Ci={},Ai=at($t()(Ge).call(Ge,vo.isAdditiveMutation)),Tn.prev=4,Ai.s();case 6:if((xi=Ai.n()).done){Tn.next=11;break}return Tn.delegateYield(Ii((Ji=xi.value).value,Ji.path,Ji),"t0",9);case 9:Tn.next=6;break;case 11:Tn.next=16;break;case 13:Tn.prev=13,Tn.t1=Tn.catch(4),Ai.e(Tn.t1);case 16:return Tn.prev=16,Ai.f(),Tn.finish(16);case 19:case"end":return Tn.stop()}},Ue,null,[[4,13,16,19]])})),pt()(Ut.bind(Vt),{pluginName:j.name||Q,isGenerator:vo.isGenerator(Ut)})}},{key:"nextPlugin",value:function(){var j,Q=this;return Mh()(j=this.wrappedPlugins).call(j,function(mt){return Q.getMutationsForPlugin(mt).length>0})}},{key:"nextPromisedPatch",value:function(){var j;if(this.promisedPatches.length>0)return xr().race(Rt()(j=this.promisedPatches).call(j,function(Q){return Q.value}))}},{key:"getPluginHistory",value:function(j){var Q=this.constructor.getPluginName(j);return this.pluginHistory[Q]||[]}},{key:"getPluginRunCount",value:function(j){return this.getPluginHistory(j).length}},{key:"getPluginHistoryTip",value:function(j){var Q=this.getPluginHistory(j);return Q&&Q[Q.length-1]||{}}},{key:"getPluginMutationIndex",value:function(j){var Q=this.getPluginHistoryTip(j).mutationIndex;return"number"!=typeof Q?-1:Q}},{key:"updatePluginHistory",value:function(j,Q){var mt=this.constructor.getPluginName(j);this.pluginHistory[mt]=this.pluginHistory[mt]||[],this.pluginHistory[mt].push(Q)}},{key:"updatePatches",value:function(j){var Q=this;vo.normalizeArray(j).forEach(function(mt){if(mt instanceof Error)Q.errors.push(mt);else try{if(!vo.isObject(mt))return void Q.debug("updatePatches","Got a non-object patch",mt);if(Q.showDebug&&Q.allPatches.push(mt),vo.isPromise(mt.value))return Q.promisedPatches.push(mt),void Q.promisedPatchThen(mt);if(vo.isContextPatch(mt))return void Q.setContext(mt.path,mt.value);if(vo.isMutation(mt))return void Q.updateMutations(mt)}catch(Vt){console.error(Vt),Q.errors.push(Vt)}})}},{key:"updateMutations",value:function(j){"object"===it(j.value)&&!Array.isArray(j.value)&&this.allowMetaPatches&&(j.value=H({},j.value));var Q=vo.applyPatch(this.state,j,{allowMetaPatches:this.allowMetaPatches});Q&&(this.mutations.push(j),this.state=Q)}},{key:"removePromisedPatch",value:function(j){var Q,mt=this.promisedPatches.indexOf(j);mt<0?this.debug("Tried to remove a promisedPatch that isn't there!"):Da()(Q=this.promisedPatches).call(Q,mt,1)}},{key:"promisedPatchThen",value:function(j){var Q=this;return j.value=j.value.then(function(mt){var Vt=H(H({},j),{},{value:mt});Q.removePromisedPatch(j),Q.updatePatches(Vt)}).catch(function(mt){Q.removePromisedPatch(j),Q.updatePatches(mt)}),j.value}},{key:"getMutations",value:function(j,Q){var mt;return j=j||0,"number"!=typeof Q&&(Q=this.mutations.length),ns()(mt=this.mutations).call(mt,j,Q)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(j){var Q=this.getPluginMutationIndex(j);return this.getMutations(Q+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(j){return vo.getIn(this.state,j)}},{key:"_getContext",value:function(j){return this.contextTree.get(j)}},{key:"setContext",value:function(j,Q){return this.contextTree.set(j,Q)}},{key:"_hasRun",value:function(j){return this.getPluginRunCount(this.getCurrentPlugin())>(j||0)}},{key:"dispatch",value:function(){var ee,j=this,Q=this,mt=this.nextPlugin();if(!mt){var Vt=this.nextPromisedPatch();if(Vt)return Vt.then(function(){return j.dispatch()}).catch(function(){return j.dispatch()});var Ut={spec:this.state,errors:this.errors};return this.showDebug&&(Ut.patches=this.allPatches),xr().resolve(Ut)}if(Q.pluginCount=Q.pluginCount||{},Q.pluginCount[mt]=(Q.pluginCount[mt]||0)+1,Q.pluginCount[mt]>100)return xr().resolve({spec:Q.state,errors:le()(ee=Q.errors).call(ee,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(mt!==this.currentPlugin&&this.promisedPatches.length){var pe,me=Rt()(pe=this.promisedPatches).call(pe,function(Qe){return Qe.value});return xr().all(Rt()(me).call(me,function(Qe){return Qe.then(dc,dc)})).then(function(){return j.dispatch()})}return function(){Q.currentPlugin=mt;var Qe=Q.getCurrentMutations(),si=Q.mutations.length-1;try{if(mt.isGenerator){var Ai,Ci=at(mt(Qe,Q.getLib()));try{for(Ci.s();!(Ai=Ci.n()).done;)Ge(Ai.value)}catch(Ii){Ci.e(Ii)}finally{Ci.f()}}else Ge(mt(Qe,Q.getLib()))}catch(Ii){console.error(Ii),Ge([pt()(Object.create(Ii),{plugin:mt})])}finally{Q.updatePluginHistory(mt,{mutationIndex:si})}return Q.dispatch()}();function Ge(Qe){Qe&&(Qe=vo.fullyNormalizeArray(Qe),Q.updatePatches(Qe,mt))}}}],[{key:"getPluginName",value:function(j){return j.pluginName}},{key:"getPatchesOfType",value:function(j,Q){return $t()(j).call(j,Q)}}]),T}(),rl={refs:hc,allOf:xh,parameters:kh,properties:Lh},ch=f(75388),Es=f.n(ch),Ac=function(L){return String.prototype.toLowerCase.call(L)},Lu=function(L){return L.replace(/[^\w]/gi,"_")};function uh(T){var L=T.openapi;return!!L&&st()(L).call(L,"3")}function Oc(T,L){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",Q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},mt=Q.v2OperationIdCompatibilityMode;if(!T||"object"!==it(T))return null;var Vt=(T.operationId||"").replace(/\s/g,"");return Vt.length?Lu(T.operationId):hh(L,j,{v2OperationIdCompatibilityMode:mt})}function hh(T,L){var j,Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},mt=Q.v2OperationIdCompatibilityMode;if(mt){var Vt,Ut,ee=le()(Vt="".concat(L.toLowerCase(),"_")).call(Vt,T).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(ee=ee||le()(Ut="".concat(T.substring(1),"_")).call(Ut,L)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return le()(j="".concat(Ac(L))).call(j,Lu(T))}function Nu(T,L){var j;return le()(j="".concat(Ac(L),"-")).call(j,T)}function xc(T,L,j){if(!T||"object"!==it(T)||!T.paths||"object"!==it(T.paths))return null;var Q=T.paths;for(var mt in Q)for(var Vt in Q[mt])if("PARAMETERS"!==Vt.toUpperCase()){var Ut=Q[mt][Vt];if(Ut&&"object"===it(Ut)){var ee={spec:T,pathName:mt,method:Vt.toUpperCase(),operation:Ut},pe=L(ee);if(j&&pe)return ee}}}function Pu(T){var L=T.spec,j=L.paths,Q={};if(!j||L.$$normalized)return T;for(var mt in j){var Vt=j[mt];if(Es()(Vt)){var Ut=Vt.parameters,ee=function(Ge){var Qe=Vt[Ge];if(!Es()(Qe))return"continue";var si=Oc(Qe,mt,Ge);if(si){Q[si]?Q[si].push(Qe):Q[si]=[Qe];var Ci=Q[si];if(Ci.length>1)Ci.forEach(function(mr,Cr){var jn;mr.__originalOperationId=mr.__originalOperationId||mr.operationId,mr.operationId=le()(jn="".concat(si)).call(jn,Cr+1)});else if(void 0!==Qe.operationId){var Ai=Ci[0];Ai.__originalOperationId=Ai.__originalOperationId||Qe.operationId,Ai.operationId=si}}if("parameters"!==Ge){var xi=[],Ji={};for(var Ii in L)("produces"===Ii||"consumes"===Ii||"security"===Ii)&&(Ji[Ii]=L[Ii],xi.push(Ji));if(Ut&&(Ji.parameters=Ut,xi.push(Ji)),xi.length){var Tn,Xn=at(xi);try{for(Xn.s();!(Tn=Xn.n()).done;){var Oo=Tn.value;for(var io in Oo)if(Qe[io]){if("parameters"===io){var Zt,So=at(Oo[io]);try{var Is=function(){var Cr=Zt.value;Qe[io].some(function(Lr){return Lr.name&&Lr.name===Cr.name||Lr.$ref&&Lr.$ref===Cr.$ref||Lr.$$ref&&Lr.$$ref===Cr.$$ref||Lr===Cr})||Qe[io].push(Cr)};for(So.s();!(Zt=So.n()).done;)Is()}catch(mr){So.e(mr)}finally{So.f()}}}else Qe[io]=Oo[io]}}catch(mr){Xn.e(mr)}finally{Xn.f()}}}};for(var pe in Vt)ee(pe)}}return L.$$normalized=!0,T}function dh(T){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},j=L.requestInterceptor,Q=L.responseInterceptor,mt=T.withCredentials?"include":"same-origin";return function(Vt){return T({url:Vt,loadSpec:!0,requestInterceptor:j,responseInterceptor:Q,headers:{Accept:co},credentials:mt}).then(function(Ut){return Ut.body})}}function Bh(T){var j=T.spec,mt=T.mode,Vt=T.allowMetaPatches,Ut=void 0===Vt||Vt,ee=T.pathDiscriminator,pe=T.modelPropertyMacro,me=T.parameterMacro,Ue=T.requestInterceptor,Ge=T.responseInterceptor,Qe=T.skipNormalization,si=T.useCircularStructures,Ci=T.http,Ai=T.baseDoc;return Ai=Ai||T.url,Ci=T.fetch||Ci||Yc,j?xi(j):dh(Ci,{requestInterceptor:Ue,responseInterceptor:Ge})(Ai).then(xi);function xi(Ji){Ai&&(rl.refs.docCache[Ai]=Ji),rl.refs.fetchJSON=dh(Ci,{requestInterceptor:Ue,responseInterceptor:Ge});var Ii=[rl.refs];return"function"==typeof me&&Ii.push(rl.parameters),"function"==typeof pe&&Ii.push(rl.properties),"strict"!==mt&&Ii.push(rl.allOf),function(T){return new Ds(T).dispatch()}({spec:Ji,context:{baseDoc:Ai},plugins:Ii,allowMetaPatches:Ut,pathDiscriminator:ee,parameterMacro:me,modelPropertyMacro:pe,useCircularStructures:si}).then(Qe?function(){var Xn=de(He().mark(function Tn(Oo){return He().wrap(function(So){for(;;)switch(So.prev=So.next){case 0:return So.abrupt("return",Oo);case 1:case"end":return So.stop()}},Tn)}));return function(Tn){return Xn.apply(this,arguments)}}():Pu)}}var Hh=f(60778),Fu=f.n(Hh);function ph(){return ph=de(He().mark(function T(L,j){var Q,mt,Ge,Qe,si,Ci,Ai=arguments;return He().wrap(function(Ji){for(;;)switch(Ji.prev=Ji.next){case 0:return mt=(Q=Ai.length>2&&void 0!==Ai[2]?Ai[2]:{}).returnEntireTree,Ge={pathDiscriminator:j,baseDoc:Q.baseDoc,requestInterceptor:Q.requestInterceptor,responseInterceptor:Q.responseInterceptor,parameterMacro:Q.parameterMacro,modelPropertyMacro:Q.modelPropertyMacro,useCircularStructures:Q.useCircularStructures},Qe=Pu({spec:L}),si=Qe.spec,Ji.next=6,Bh(H(H({},Ge),{},{spec:si,allowMetaPatches:!0,skipNormalization:!0}));case 6:return Ci=Ji.sent,!mt&&Array.isArray(j)&&j.length&&(Ci.spec=Fu()(Ci.spec,j)||null),Ji.abrupt("return",Ci);case 9:case"end":return Ji.stop()}},T)})),ph.apply(this,arguments)}var Vh=function(){return null},kc_mapTagOperations=function(T){var L=T.spec,j=T.cb,Q=void 0===j?Vh:j,mt=T.defaultTag,Vt=void 0===mt?"default":mt,Ut=T.v2OperationIdCompatibilityMode,ee={},pe={};return xc(L,function(me){var Ue=me.pathName,Ge=me.method,Qe=me.operation,si=Qe.tags?function(L){return Array.isArray(L)?L:[L]}(Qe.tags):[Vt];si.forEach(function(Ci){if("string"==typeof Ci){pe[Ci]=pe[Ci]||{};var Ii,Ai=pe[Ci],xi=Oc(Qe,Ue,Ge,{v2OperationIdCompatibilityMode:Ut}),Ji=Q({spec:L,pathName:Ue,method:Ge,operation:Qe,operationId:xi});if(ee[xi])ee[xi]+=1,Ai[le()(Ii="".concat(xi)).call(Ii,ee[xi])]=Ji;else if(void 0!==Ai[xi]){var Xn,Tn,Oo=ee[xi]||1;ee[xi]=Oo+1,Ai[le()(Xn="".concat(xi)).call(Xn,ee[xi])]=Ji;var io=Ai[xi];delete Ai[xi],Ai[le()(Tn="".concat(xi)).call(Tn,Oo)]=io}else Ai[xi]=Ji}})}),pe},kc_makeExecute=function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(L){var j=L.pathName,Q=L.method,mt=L.operationId;return function(Vt){var Ut=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ee=T.requestInterceptor,pe=T.responseInterceptor,me=T.userFetch;return T.execute(H({spec:T.spec,requestInterceptor:ee,responseInterceptor:pe,userFetch:me,pathName:j,method:Q,parameters:Vt,operationId:mt},Ut))}}},ga=f(83091);var fh=f(12507),au=f.n(fh),Xl=f(76216);const Wh={body:function(T){T.req.body=T.value},header:function(T){var L=T.req,j=T.parameter,Q=T.value;L.headers=L.headers||{},void 0!==Q&&(L.headers[j.name]=Q)},query:function(T){var L=T.req,j=T.value,Q=T.parameter;if(L.query=L.query||{},!1===j&&"boolean"===Q.type&&(j="false"),0===j&&["number","integer"].indexOf(Q.type)>-1&&(j="0"),j)L.query[Q.name]={collectionFormat:Q.collectionFormat,value:j};else if(Q.allowEmptyValue&&void 0!==j){var mt=Q.name;L.query[mt]=L.query[mt]||{},L.query[mt].allowEmptyValue=!0}},path:function(T){var L=T.req,j=T.value;L.url=L.url.split("{".concat(T.parameter.name,"}")).join(encodeURIComponent(j))},formData:function(T){var L=T.req,j=T.value,Q=T.parameter;(j||Q.allowEmptyValue)&&(L.form=L.form||{},L.form[Q.name]={value:j,allowEmptyValue:Q.allowEmptyValue,collectionFormat:Q.collectionFormat})}};function ma(T,L){return vi()(L).call(L,"application/json")?"string"==typeof T?T:Xt()(T):T.toString()}function lu(T){var L=T.req,j=T.value,Q=T.parameter,mt=Q.name,Vt=Q.style,Ut=Q.explode,ee=Q.content;if(ee){var pe=he()(ee)[0];L.url=L.url.split("{".concat(mt,"}")).join(da(ma(j,pe),{escape:!0}))}else{var me=ws({key:Q.name,value:j,style:Vt||"simple",explode:Ut||!1,escape:!0});L.url=L.url.split("{".concat(mt,"}")).join(me)}}function Uu(T){var L=T.req,j=T.value,Q=T.parameter;if(L.query=L.query||{},Q.content){var mt=he()(Q.content)[0];L.query[Q.name]=ma(j,mt)}else if(!1===j&&(j="false"),0===j&&(j="0"),j)L.query[Q.name]={value:j,serializationOption:{style:Q.style,explode:Q.explode,allowReserved:Q.allowReserved}};else if(Q.allowEmptyValue&&void 0!==j){var pe=Q.name;L.query[pe]=L.query[pe]||{},L.query[pe].allowEmptyValue=!0}}var _a=["accept","authorization","content-type"];function Lc(T){var L=T.req,j=T.parameter,Q=T.value;if(L.headers=L.headers||{},!(_a.indexOf(j.name.toLowerCase())>-1)){if(j.content){var mt=he()(j.content)[0];return void(L.headers[j.name]=ma(Q,mt))}void 0!==Q&&(L.headers[j.name]=ws({key:j.name,value:Q,style:j.style||"simple",explode:void 0!==j.explode&&j.explode,escape:!1}))}}function cu(T){var L=T.req,j=T.parameter,Q=T.value;L.headers=L.headers||{};var mt=it(Q);if(j.content){var Vt,Ut=he()(j.content)[0];L.headers.Cookie=le()(Vt="".concat(j.name,"=")).call(Vt,ma(Q,Ut))}else if("undefined"!==mt){var ee="object"===mt&&!Array.isArray(Q)&&j.explode?"":"".concat(j.name,"=");L.headers.Cookie=ee+ws({key:j.name,value:Q,escape:!1,style:j.style||"form",explode:void 0!==j.explode&&j.explode})}}var Gu=f(26692),uu=f.n(Gu);var Wa=["http","fetch","spec","operationId","pathName","method","parameters","securities"],Nc=function(L){return Array.isArray(L)?L:[]},jh=_i("OperationNotFoundError",function(L,j,Q){this.originalError=Q,pt()(this,j||{})}),va={buildRequest:$l};function $l(T){var L,j,Q=T.spec,mt=T.operationId,Vt=T.responseContentType,Ut=T.scheme,ee=T.requestInterceptor,pe=T.responseInterceptor,me=T.contextUrl,Ue=T.userFetch,Ge=T.server,Qe=T.serverVariables,si=T.http,Ci=T.parameters,Ai=T.parameterBuilders,xi=uh(Q);Ai||(Ai=xi?e:Wh);var Ii={url:"",credentials:si&&si.withCredentials?"include":"same-origin",headers:{},cookies:{}};ee&&(Ii.requestInterceptor=ee),pe&&(Ii.responseInterceptor=pe),Ue&&(Ii.userFetch=Ue);var Xn=function(T,L){return T&&T.paths?function(T,L){return xc(T,L,!0)||null}(T,function(j){var Q=j.pathName,mt=j.method,Vt=j.operation;if(!Vt||"object"!==it(Vt))return!1;var Ut=Vt.operationId;return[Oc(Vt,Q,mt),Nu(Q,mt),Ut].some(function(me){return me&&me===L})}):null}(Q,mt);if(!Xn)throw new jh("Operation ".concat(mt," not found"));var Tn=Xn.operation,Oo=void 0===Tn?{}:Tn,io=Xn.method,So=Xn.pathName;if(Ii.url+=Fc({spec:Q,scheme:Ut,contextUrl:me,server:Ge,serverVariables:Qe,pathName:So,method:io}),!mt)return delete Ii.cookies,Ii;Ii.url+=So,Ii.method="".concat(io).toUpperCase(),Ci=Ci||{};var Zt=Q.paths[So]||{};Vt&&(Ii.headers.accept=Vt);var Is=function(L){var j={};L.forEach(function(mt){j[mt.in]||(j[mt.in]={}),j[mt.in][mt.name]=mt});var Q=[];return he()(j).forEach(function(mt){he()(j[mt]).forEach(function(Vt){Q.push(j[mt][Vt])})}),Q}(le()(L=le()(j=[]).call(j,Nc(Oo.parameters))).call(L,Nc(Zt.parameters)));Is.forEach(function(jn){var Yr,ba,Lr=Ai[jn.in];if("body"===jn.in&&jn.schema&&jn.schema.properties&&(Yr=Ci),void 0===(Yr=jn&&jn.name&&Ci[jn.name]))Yr=jn&&jn.name&&Ci[le()(ba="".concat(jn.in,".")).call(ba,jn.name)];else if(function(L,j){return $t()(j).call(j,function(Q){return Q.name===L})}(jn.name,Is).length>1){var ya;console.warn(le()(ya="Parameter '".concat(jn.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(ya,jn.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==Yr){if(void 0!==jn.default&&void 0===Yr&&(Yr=jn.default),void 0===Yr&&jn.required&&!jn.allowEmptyValue)throw new Error("Required parameter ".concat(jn.name," is not provided"));if(xi&&jn.schema&&"object"===jn.schema.type&&"string"==typeof Yr)try{Yr=JSON.parse(Yr)}catch(Zl){throw new Error("Could not parse object parameter value string as JSON")}Lr&&Lr({req:Ii,parameter:jn,value:Yr,operation:Oo,spec:Q})}});var mr=H(H({},T),{},{operation:Oo});if((Ii=xi?function(T,L){var j=T.operation,Q=T.requestBody,Ut=T.attachContentTypeForEmptyPayload,ee=T.requestContentType;L=function(T){var L=T.request,j=T.securities,Q=void 0===j?{}:j,mt=T.operation,Vt=void 0===mt?{}:mt,Ut=T.spec,ee=H({},L),pe=Q.authorized,me=void 0===pe?{}:pe,Ue=Vt.security||Ut.security||[],Ge=me&&!!he()(me).length,Qe=Fu()(Ut,["components","securitySchemes"])||{};return ee.headers=ee.headers||{},ee.query=ee.query||{},he()(Q).length&&Ge&&Ue&&(!Array.isArray(Vt.security)||Vt.security.length)?(Ue.forEach(function(si){he()(si).forEach(function(Ci){var Ai=me[Ci],xi=Qe[Ci];if(Ai){var Ji=Ai.value||Ai,Ii=xi.type;if(Ai)if("apiKey"===Ii)"query"===xi.in&&(ee.query[xi.name]=Ji),"header"===xi.in&&(ee.headers[xi.name]=Ji),"cookie"===xi.in&&(ee.cookies[xi.name]=Ji);else if("http"===Ii){if(/^basic$/i.test(xi.scheme)){var Xn,Tn=Ji.username||"",Oo=Ji.password||"",io=uu()(le()(Xn="".concat(Tn,":")).call(Xn,Oo));ee.headers.Authorization="Basic ".concat(io)}/^bearer$/i.test(xi.scheme)&&(ee.headers.Authorization="Bearer ".concat(Ji))}else if("oauth2"===Ii||"openIdConnect"===Ii){var So,Zt=Ai.token||{},mr=Zt[xi["x-tokenName"]||"access_token"],Cr=Zt.token_type;(!Cr||"bearer"===Cr.toLowerCase())&&(Cr="Bearer"),ee.headers.Authorization=le()(So="".concat(Cr," ")).call(So,mr)}}})}),ee):L}({request:L,securities:T.securities,operation:j,spec:T.spec});var pe=j.requestBody||{},me=he()(pe.content||{}),Ue=ee&&me.indexOf(ee)>-1;if(Q||Ut){if(ee&&Ue)L.headers["Content-Type"]=ee;else if(!ee){var Ge=me[0];Ge&&(L.headers["Content-Type"]=Ge,ee=Ge)}}else ee&&Ue&&(L.headers["Content-Type"]=ee);if(!T.responseContentType&&j.responses){var Qe,si=$t()(Qe=Yt()(j.responses)).call(Qe,function(Ai){var xi=Ht(Ai,2),Ii=xi[1],Xn=parseInt(xi[0],10);return Xn>=200&&Xn<300&&au()(Ii.content)}).reduce(function(Ai,xi){var Ii=Ht(xi,2)[1];return le()(Ai).call(Ai,he()(Ii.content))},[]);si.length>0&&(L.headers.accept=si.join(", "))}if(Q)if(ee){if(me.indexOf(ee)>-1)if("application/x-www-form-urlencoded"===ee||"multipart/form-data"===ee)if("object"===it(Q)){var Ci=(pe.content[ee]||{}).encoding||{};L.form={},he()(Q).forEach(function(Ai){L.form[Ai]={value:Q[Ai],encoding:Ci[Ai]||{}}})}else L.form=Q;else L.body=Q}else L.body=Q;return L}(mr,Ii):function(T,L){var pe,me,j=T.spec,Q=T.operation,Vt=T.requestContentType,Ut=T.responseContentType,ee=T.attachContentTypeForEmptyPayload;if(L=function(T){var L=T.request,j=T.securities,Q=void 0===j?{}:j,mt=T.operation,Vt=void 0===mt?{}:mt,Ut=T.spec,ee=H({},L),pe=Q.authorized,me=void 0===pe?{}:pe,Ue=Q.specSecurity,Qe=Vt.security||(void 0===Ue?[]:Ue),si=me&&!!he()(me).length,Ci=Ut.securityDefinitions;return ee.headers=ee.headers||{},ee.query=ee.query||{},he()(Q).length&&si&&Qe&&(!Array.isArray(Vt.security)||Vt.security.length)?(Qe.forEach(function(Ai){he()(Ai).forEach(function(xi){var Ji=me[xi];if(Ji){var Ii=Ji.token,Xn=Ji.value||Ji,Tn=Ci[xi],Oo=Tn.type,So=Ii&&Ii[Tn["x-tokenName"]||"access_token"],Zt=Ii&&Ii.token_type;if(Ji)if("apiKey"===Oo){var Is="query"===Tn.in?"query":"headers";ee[Is]=ee[Is]||{},ee[Is][Tn.name]=Xn}else if("basic"===Oo)if(Xn.header)ee.headers.authorization=Xn.header;else{var mr,Cr=Xn.username||"",jn=Xn.password||"";Xn.base64=uu()(le()(mr="".concat(Cr,":")).call(mr,jn)),ee.headers.authorization="Basic ".concat(Xn.base64)}else if("oauth2"===Oo&&So){var Lr;Zt=Zt&&"bearer"!==Zt.toLowerCase()?Zt:"Bearer",ee.headers.authorization=le()(Lr="".concat(Zt," ")).call(Lr,So)}}})}),ee):L}({request:L,securities:T.securities,operation:Q,spec:j}),L.body||L.form||ee)if(Vt)L.headers["Content-Type"]=Vt;else if(Array.isArray(Q.consumes)){var Ue=Ht(Q.consumes,1);L.headers["Content-Type"]=Ue[0]}else if(Array.isArray(j.consumes)){var Ge=Ht(j.consumes,1);L.headers["Content-Type"]=Ge[0]}else Q.parameters&&$t()(pe=Q.parameters).call(pe,function(xi){return"file"===xi.type}).length?L.headers["Content-Type"]="multipart/form-data":Q.parameters&&$t()(me=Q.parameters).call(me,function(xi){return"formData"===xi.in}).length&&(L.headers["Content-Type"]="application/x-www-form-urlencoded");else if(Vt){var Qe,si,Ci=Q.parameters&&$t()(Qe=Q.parameters).call(Qe,function(xi){return"body"===xi.in}).length>0,Ai=Q.parameters&&$t()(si=Q.parameters).call(si,function(xi){return"formData"===xi.in}).length>0;(Ci||Ai)&&(L.headers["Content-Type"]=Vt)}return!Ut&&Array.isArray(Q.produces)&&Q.produces.length>0&&(L.headers.accept=Q.produces.join(", ")),L}(mr,Ii)).cookies&&he()(Ii.cookies).length){var Cr=he()(Ii.cookies).reduce(function(jn,Lr){return jn+(jn?"&":"")+Xl.serialize(Lr,Ii.cookies[Lr])},"");Ii.headers.Cookie=Cr}return Ii.cookies&&delete Ii.cookies,na(Ii),Ii}var Pc=function(L){return L?L.replace(/\W/g,""):null};function Fc(T){return uh(T.spec)?function(T){var L=T.spec,j=T.pathName,Q=T.method,mt=T.server,Vt=T.contextUrl,Ut=T.serverVariables,ee=void 0===Ut?{}:Ut,pe=Fu()(L,["paths",j,(Q||"").toLowerCase(),"servers"])||Fu()(L,["paths",j,"servers"])||Fu()(L,["servers"]),me="",Ue=null;if(mt&&pe&&pe.length){var Ge=Rt()(pe).call(pe,function(Ci){return Ci.url});Ge.indexOf(mt)>-1&&(me=mt,Ue=pe[Ge.indexOf(mt)])}if(!me&&pe&&pe.length){me=pe[0].url;var Qe=Ht(pe,1);Ue=Qe[0]}if(me.indexOf("{")>-1){var si=function(T){for(var Q,L=[],j=/{([^}]+)}/g;Q=j.exec(T);)L.push(Q[1]);return L}(me);si.forEach(function(Ci){if(Ue.variables&&Ue.variables[Ci]){var xi=ee[Ci]||Ue.variables[Ci].default,Ji=new RegExp("{".concat(Ci,"}"),"g");me=me.replace(Ji,xi)}})}return function(){var ee,pe,T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",j=Ct.parse(T&&L?Ct.resolve(L,T):T),Q=Ct.parse(L),mt=Pc(j.protocol)||Pc(Q.protocol)||"",Vt=j.host||Q.host,Ut=j.pathname||"";return"/"===(ee=mt&&Vt?le()(pe="".concat(mt,"://")).call(pe,Vt+Ut):Ut)[ee.length-1]?ns()(ee).call(ee,0,-1):ee}(me,Vt)}(T):function(T){var Ue,Ge,L=T.spec,j=T.scheme,Q=T.contextUrl,Vt=Ct.parse(void 0===Q?"":Q),Ut=Array.isArray(L.schemes)?L.schemes[0]:null,ee=j||Ut||Pc(Vt.protocol)||"http",pe=L.host||Vt.host||"",me=L.basePath||"";return"/"===(Ue=ee&&pe?le()(Ge="".concat(ee,"://")).call(Ge,pe+me):me)[Ue.length-1]?ns()(Ue).call(Ue,0,-1):Ue}(T)}function ur(T){var L=this,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof T?j.url=T:j=T,!(this instanceof ur))return new ur(j);pt()(this,j);var Q=this.resolve().then(function(){return L.disableInterfaces||pt()(L,ur.makeApisTagOperation(L)),L});return Q.client=this,Q}ur.makeHttp=function(T,L,j){return j=j||function(Q){return Q},L=L||function(Q){return Q},function(Q){return"string"==typeof Q&&(Q={url:Q}),Eu.mergeInQueryOrForm(Q),Q=L(Q),j(T(Q))}}.bind(null,ur.http=Yc),ur.resolve=Bh,ur.resolveSubtree=function(T,L){return ph.apply(this,arguments)},ur.execute=function(T){var L=T.http,j=T.fetch,Q=T.spec,mt=T.operationId,Vt=T.pathName,Ut=T.method,ee=T.parameters,pe=T.securities,me=function(T,L){if(null==T)return{};var Q,mt,j=function(T,L){if(null==T)return{};var mt,Vt,j={},Q=t(T);for(Vt=0;Vt<Q.length;Vt++)mt=Q[Vt],!(ga(L).call(L,mt)>=0)&&(j[mt]=T[mt]);return j}(T,L);if(n){var Vt=n(T);for(mt=0;mt<Vt.length;mt++)Q=Vt[mt],!(ga(L).call(L,Q)>=0)&&(!Object.prototype.propertyIsEnumerable.call(T,Q)||(j[Q]=T[Q]))}return j}(T,Wa),Ue=L||j||Yc;Vt&&Ut&&!mt&&(mt=Nu(Vt,Ut));var Ge=va.buildRequest(H({spec:Q,operationId:mt,parameters:ee,securities:pe,http:Ue},me));return Ge.body&&(au()(Ge.body)||Array.isArray(Ge.body))&&(Ge.body=Xt()(Ge.body)),Ue(Ge)},ur.serializeRes=Xc,ur.serializeHeaders=Zu,ur.clearCache=function(){rl.refs.clearCache()},ur.makeApisTagOperation=function(){var T=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},L=kc_makeExecute(T);return{apis:kc_mapTagOperations({v2OperationIdCompatibilityMode:T.v2OperationIdCompatibilityMode,spec:T.spec,cb:L})}},ur.buildRequest=$l,ur.helpers={opId:Oc},ur.getBaseUrl=Fc,(ur.prototype={http:Yc,execute:function(L){return this.applyDefaults(),ur.execute(H({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},L))},resolve:function(){var L=this,j=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ur.resolve(H({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},j)).then(function(Q){return L.originalSpec=L.spec,L.spec=Q.spec,L.errors=Q.errors,L})}}).applyDefaults=function(){var L=this.spec,j=this.url;if(j&&st()(j).call(j,"http")){var Q=Ct.parse(j);L.host||(L.host=Q.host),L.schemes||(L.schemes=[Q.protocol.replace(":","")]),L.basePath||(L.basePath="/")}};var _h=ur.helpers;const pu=ur},84329:k=>{"use strict";var B=String.prototype.replace,f=/%20/g;k.exports={default:"RFC3986",formatters:{RFC1738:function(p){return B.call(p,f,"+")},RFC3986:function(p){return String(p)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},84268:(k,B,f)=>{"use strict";var b=f(3736),p=f(12259),e=f(84329);k.exports={formats:e,parse:p,stringify:b}},12259:(k,B,f)=>{"use strict";var b=f(5924),p=Object.prototype.hasOwnProperty,e=Array.isArray,t={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:b.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},o=function(V,H){return V&&"string"==typeof V&&H.comma&&V.indexOf(",")>-1?V.split(","):V},M=function(H,$,pt,nt){if(H){var st=pt.allowDots?H.replace(/\.([^.[]+)/g,"[$1]"):H,xt=/(\[[^[\]]*])/g,yt=pt.depth>0&&/(\[[^[\]]*])/.exec(st),ut=yt?st.slice(0,yt.index):st,tt=[];if(ut){if(!pt.plainObjects&&p.call(Object.prototype,ut)&&!pt.allowPrototypes)return;tt.push(ut)}for(var lt=0;pt.depth>0&&null!==(yt=xt.exec(st))&&lt<pt.depth;){if(lt+=1,!pt.plainObjects&&p.call(Object.prototype,yt[1].slice(1,-1))&&!pt.allowPrototypes)return;tt.push(yt[1])}return yt&&tt.push("["+st.slice(yt.index)+"]"),function(V,H,$,pt){for(var nt=pt?H:o(H,$),st=V.length-1;st>=0;--st){var Ct,xt=V[st];if("[]"===xt&&$.parseArrays)Ct=[].concat(nt);else{Ct=$.plainObjects?Object.create(null):{};var yt="["===xt.charAt(0)&&"]"===xt.charAt(xt.length-1)?xt.slice(1,-1):xt,ut=parseInt(yt,10);$.parseArrays||""!==yt?!isNaN(ut)&&xt!==yt&&String(ut)===yt&&ut>=0&&$.parseArrays&&ut<=$.arrayLimit?(Ct=[])[ut]=nt:Ct[yt]=nt:Ct={0:nt}}nt=Ct}return nt}(tt,$,pt,nt)}};k.exports=function(V,H){var $=function(H){if(!H)return t;if(null!=H.decoder&&"function"!=typeof H.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==H.charset&&"utf-8"!==H.charset&&"iso-8859-1"!==H.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===H.allowDots?t.allowDots:!!H.allowDots,allowPrototypes:"boolean"==typeof H.allowPrototypes?H.allowPrototypes:t.allowPrototypes,allowSparse:"boolean"==typeof H.allowSparse?H.allowSparse:t.allowSparse,arrayLimit:"number"==typeof H.arrayLimit?H.arrayLimit:t.arrayLimit,charset:void 0===H.charset?t.charset:H.charset,charsetSentinel:"boolean"==typeof H.charsetSentinel?H.charsetSentinel:t.charsetSentinel,comma:"boolean"==typeof H.comma?H.comma:t.comma,decoder:"function"==typeof H.decoder?H.decoder:t.decoder,delimiter:"string"==typeof H.delimiter||b.isRegExp(H.delimiter)?H.delimiter:t.delimiter,depth:"number"==typeof H.depth||!1===H.depth?+H.depth:t.depth,ignoreQueryPrefix:!0===H.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof H.interpretNumericEntities?H.interpretNumericEntities:t.interpretNumericEntities,parameterLimit:"number"==typeof H.parameterLimit?H.parameterLimit:t.parameterLimit,parseArrays:!1!==H.parseArrays,plainObjects:"boolean"==typeof H.plainObjects?H.plainObjects:t.plainObjects,strictNullHandling:"boolean"==typeof H.strictNullHandling?H.strictNullHandling:t.strictNullHandling}}(H);if(""===V||null==V)return $.plainObjects?Object.create(null):{};for(var pt="string"==typeof V?function(H,$){var yt,pt={},Ct=($.ignoreQueryPrefix?H.replace(/^\?/,""):H).split($.delimiter,$.parameterLimit===1/0?void 0:$.parameterLimit),xt=-1,ut=$.charset;if($.charsetSentinel)for(yt=0;yt<Ct.length;++yt)0===Ct[yt].indexOf("utf8=")&&("utf8=%E2%9C%93"===Ct[yt]?ut="utf-8":"utf8=%26%2310003%3B"===Ct[yt]&&(ut="iso-8859-1"),xt=yt,yt=Ct.length);for(yt=0;yt<Ct.length;++yt)if(yt!==xt){var Lt,at,tt=Ct[yt],lt=tt.indexOf("]="),ot=-1===lt?tt.indexOf("="):lt+1;-1===ot?(Lt=$.decoder(tt,t.decoder,ut,"key"),at=$.strictNullHandling?null:""):(Lt=$.decoder(tt.slice(0,ot),t.decoder,ut,"key"),at=b.maybeMap(o(tt.slice(ot+1),$),function(dt){return $.decoder(dt,t.decoder,ut,"value")})),at&&$.interpretNumericEntities&&"iso-8859-1"===ut&&(at=at.replace(/&#(\d+);/g,function(H,$){return String.fromCharCode(parseInt($,10))})),tt.indexOf("[]=")>-1&&(at=e(at)?[at]:at),pt[Lt]=p.call(pt,Lt)?b.combine(pt[Lt],at):at}return pt}(V,$):V,nt=$.plainObjects?Object.create(null):{},st=Object.keys(pt),Ct=0;Ct<st.length;++Ct){var xt=st[Ct],yt=M(xt,pt[xt],$,"string"==typeof V);nt=b.merge(nt,yt,$)}return!0===$.allowSparse?nt:b.compact(nt)}},3736:(k,B,f)=>{"use strict";var b=f(93544),p=f(5924),e=f(84329),t=Object.prototype.hasOwnProperty,n={brackets:function(st){return st+"[]"},comma:"comma",indices:function(st,Ct){return st+"["+Ct+"]"},repeat:function(st){return st}},o=Array.isArray,s=String.prototype.split,c=Array.prototype.push,_=function(nt,st){c.apply(nt,o(st)?st:[st])},w=Date.prototype.toISOString,M=e.default,U={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:p.encode,encodeValuesOnly:!1,format:M,formatter:e.formatters[M],indices:!1,serializeDate:function(st){return w.call(st)},skipNulls:!1,strictNullHandling:!1},H={},$=function nt(st,Ct,xt,yt,ut,tt,lt,ot,Lt,at,dt,it,rt,Gt,bt){for(var Ht=st,ce=bt,Ye=0,de=!1;void 0!==(ce=ce.get(H))&&!de;){var Be=ce.get(st);if(Ye+=1,void 0!==Be){if(Be===Ye)throw new RangeError("Cyclic object value");de=!0}void 0===ce.get(H)&&(Ye=0)}if("function"==typeof lt?Ht=lt(Ct,Ht):Ht instanceof Date?Ht=at(Ht):"comma"===xt&&o(Ht)&&(Ht=p.maybeMap(Ht,function(he){return he instanceof Date?at(he):he})),null===Ht){if(yt)return tt&&!rt?tt(Ct,U.encoder,Gt,"key",dt):Ct;Ht=""}if(function(st){return"string"==typeof st||"number"==typeof st||"boolean"==typeof st||"symbol"==typeof st||"bigint"==typeof st}(Ht)||p.isBuffer(Ht)){if(tt){var He=rt?Ct:tt(Ct,U.encoder,Gt,"key",dt);if("comma"===xt&&rt){for(var Ke=s.call(String(Ht),","),vi="",qe=0;qe<Ke.length;++qe)vi+=(0===qe?"":",")+it(tt(Ke[qe],U.encoder,Gt,"value",dt));return[it(He)+"="+vi]}return[it(He)+"="+it(tt(Ht,U.encoder,Gt,"value",dt))]}return[it(Ct)+"="+it(String(Ht))]}var oi,Ne=[];if(void 0===Ht)return Ne;if("comma"===xt&&o(Ht))oi=[{value:Ht.length>0?Ht.join(",")||null:void 0}];else if(o(lt))oi=lt;else{var Ft=Object.keys(Ht);oi=ot?Ft.sort(ot):Ft}for(var _e=0;_e<oi.length;++_e){var Xt=oi[_e],Jt="object"==typeof Xt&&void 0!==Xt.value?Xt.value:Ht[Xt];if(!ut||null!==Jt){var Rt=o(Ht)?"function"==typeof xt?xt(Ct,Xt):Ct:Ct+(Lt?"."+Xt:"["+Xt+"]");bt.set(st,Ye);var Pt=b();Pt.set(H,bt),_(Ne,nt(Jt,Rt,xt,yt,ut,tt,lt,ot,Lt,at,dt,it,rt,Gt,Pt))}}return Ne};k.exports=function(nt,st){var yt,Ct=nt,xt=function(st){if(!st)return U;if(null!=st.encoder&&"function"!=typeof st.encoder)throw new TypeError("Encoder has to be a function.");var Ct=st.charset||U.charset;if(void 0!==st.charset&&"utf-8"!==st.charset&&"iso-8859-1"!==st.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var xt=e.default;if(void 0!==st.format){if(!t.call(e.formatters,st.format))throw new TypeError("Unknown format option provided.");xt=st.format}var yt=e.formatters[xt],ut=U.filter;return("function"==typeof st.filter||o(st.filter))&&(ut=st.filter),{addQueryPrefix:"boolean"==typeof st.addQueryPrefix?st.addQueryPrefix:U.addQueryPrefix,allowDots:void 0===st.allowDots?U.allowDots:!!st.allowDots,charset:Ct,charsetSentinel:"boolean"==typeof st.charsetSentinel?st.charsetSentinel:U.charsetSentinel,delimiter:void 0===st.delimiter?U.delimiter:st.delimiter,encode:"boolean"==typeof st.encode?st.encode:U.encode,encoder:"function"==typeof st.encoder?st.encoder:U.encoder,encodeValuesOnly:"boolean"==typeof st.encodeValuesOnly?st.encodeValuesOnly:U.encodeValuesOnly,filter:ut,format:xt,formatter:yt,serializeDate:"function"==typeof st.serializeDate?st.serializeDate:U.serializeDate,skipNulls:"boolean"==typeof st.skipNulls?st.skipNulls:U.skipNulls,sort:"function"==typeof st.sort?st.sort:null,strictNullHandling:"boolean"==typeof st.strictNullHandling?st.strictNullHandling:U.strictNullHandling}}(st);"function"==typeof xt.filter?Ct=(0,xt.filter)("",Ct):o(xt.filter)&&(yt=xt.filter);var tt=[];if("object"!=typeof Ct||null===Ct)return"";var ot=n[st&&st.arrayFormat in n?st.arrayFormat:st&&"indices"in st?st.indices?"indices":"repeat":"indices"];yt||(yt=Object.keys(Ct)),xt.sort&&yt.sort(xt.sort);for(var Lt=b(),at=0;at<yt.length;++at){var dt=yt[at];xt.skipNulls&&null===Ct[dt]||_(tt,$(Ct[dt],dt,ot,xt.strictNullHandling,xt.skipNulls,xt.encode?xt.encoder:null,xt.filter,xt.sort,xt.allowDots,xt.serializeDate,xt.format,xt.formatter,xt.encodeValuesOnly,xt.charset,Lt))}var it=tt.join(xt.delimiter),rt=!0===xt.addQueryPrefix?"?":"";return xt.charsetSentinel&&(rt+="iso-8859-1"===xt.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),it.length>0?rt+it:""}},5924:(k,B,f)=>{"use strict";var b=f(84329),p=Object.prototype.hasOwnProperty,e=Array.isArray,t=function(){for(var pt=[],nt=0;nt<256;++nt)pt.push("%"+((nt<16?"0":"")+nt.toString(16)).toUpperCase());return pt}(),o=function(nt,st){for(var Ct=st&&st.plainObjects?Object.create(null):{},xt=0;xt<nt.length;++xt)void 0!==nt[xt]&&(Ct[xt]=nt[xt]);return Ct};k.exports={arrayToObject:o,assign:function(nt,st){return Object.keys(st).reduce(function(Ct,xt){return Ct[xt]=st[xt],Ct},nt)},combine:function(nt,st){return[].concat(nt,st)},compact:function(nt){for(var st=[{obj:{o:nt},prop:"o"}],Ct=[],xt=0;xt<st.length;++xt)for(var yt=st[xt],ut=yt.obj[yt.prop],tt=Object.keys(ut),lt=0;lt<tt.length;++lt){var ot=tt[lt],Lt=ut[ot];"object"==typeof Lt&&null!==Lt&&-1===Ct.indexOf(Lt)&&(st.push({obj:ut,prop:ot}),Ct.push(Lt))}return function(nt){for(;nt.length>1;){var st=nt.pop(),Ct=st.obj[st.prop];if(e(Ct)){for(var xt=[],yt=0;yt<Ct.length;++yt)void 0!==Ct[yt]&&xt.push(Ct[yt]);st.obj[st.prop]=xt}}}(st),nt},decode:function(pt,nt,st){var Ct=pt.replace(/\+/g," ");if("iso-8859-1"===st)return Ct.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Ct)}catch(xt){return Ct}},encode:function(nt,st,Ct,xt,yt){if(0===nt.length)return nt;var ut=nt;if("symbol"==typeof nt?ut=Symbol.prototype.toString.call(nt):"string"!=typeof nt&&(ut=String(nt)),"iso-8859-1"===Ct)return escape(ut).replace(/%u[0-9a-f]{4}/gi,function(Lt){return"%26%23"+parseInt(Lt.slice(2),16)+"%3B"});for(var tt="",lt=0;lt<ut.length;++lt){var ot=ut.charCodeAt(lt);45===ot||46===ot||95===ot||126===ot||ot>=48&&ot<=57||ot>=65&&ot<=90||ot>=97&&ot<=122||yt===b.RFC1738&&(40===ot||41===ot)?tt+=ut.charAt(lt):ot<128?tt+=t[ot]:ot<2048?tt+=t[192|ot>>6]+t[128|63&ot]:ot<55296||ot>=57344?tt+=t[224|ot>>12]+t[128|ot>>6&63]+t[128|63&ot]:(ot=65536+((1023&ot)<<10|1023&ut.charCodeAt(lt+=1)),tt+=t[240|ot>>18]+t[128|ot>>12&63]+t[128|ot>>6&63]+t[128|63&ot])}return tt},isBuffer:function(nt){return!(!nt||"object"!=typeof nt||!(nt.constructor&&nt.constructor.isBuffer&&nt.constructor.isBuffer(nt)))},isRegExp:function(nt){return"[object RegExp]"===Object.prototype.toString.call(nt)},maybeMap:function(nt,st){if(e(nt)){for(var Ct=[],xt=0;xt<nt.length;xt+=1)Ct.push(st(nt[xt]));return Ct}return st(nt)},merge:function pt(nt,st,Ct){if(!st)return nt;if("object"!=typeof st){if(e(nt))nt.push(st);else{if(!nt||"object"!=typeof nt)return[nt,st];(Ct&&(Ct.plainObjects||Ct.allowPrototypes)||!p.call(Object.prototype,st))&&(nt[st]=!0)}return nt}if(!nt||"object"!=typeof nt)return[nt].concat(st);var xt=nt;return e(nt)&&!e(st)&&(xt=o(nt,Ct)),e(nt)&&e(st)?(st.forEach(function(yt,ut){if(p.call(nt,ut)){var tt=nt[ut];tt&&"object"==typeof tt&&yt&&"object"==typeof yt?nt[ut]=pt(tt,yt,Ct):nt.push(yt)}else nt[ut]=yt}),nt):Object.keys(st).reduce(function(yt,ut){var tt=st[ut];return yt[ut]=p.call(yt,ut)?pt(yt[ut],tt,Ct):tt,yt},xt)}}},57051:k=>{var B=k.exports=function(H){return new f(H)};function f(H){this.value=H}function b(H,$,pt){var nt=[],st=[],Ct=!0;return function xt(yt){var ut=pt?p(yt):yt,tt={},lt=!0,ot={node:ut,node_:yt,path:[].concat(nt),parent:st[st.length-1],parents:st,key:nt.slice(-1)[0],isRoot:0===nt.length,level:nt.length,circular:null,update:function(dt,it){ot.isRoot||(ot.parent.node[ot.key]=dt),ot.node=dt,it&&(lt=!1)},delete:function(dt){delete ot.parent.node[ot.key],dt&&(lt=!1)},remove:function(dt){M(ot.parent.node)?ot.parent.node.splice(ot.key,1):delete ot.parent.node[ot.key],dt&&(lt=!1)},keys:null,before:function(dt){tt.before=dt},after:function(dt){tt.after=dt},pre:function(dt){tt.pre=dt},post:function(dt){tt.post=dt},stop:function(){Ct=!1},block:function(){lt=!1}};if(!Ct)return ot;function Lt(){if("object"==typeof ot.node&&null!==ot.node){(!ot.keys||ot.node_!==ot.node)&&(ot.keys=e(ot.node)),ot.isLeaf=0==ot.keys.length;for(var dt=0;dt<st.length;dt++)if(st[dt].node_===yt){ot.circular=st[dt];break}}else ot.isLeaf=!0,ot.keys=null;ot.notLeaf=!ot.isLeaf,ot.notRoot=!ot.isRoot}Lt();var at=$.call(ot,ot.node);return void 0!==at&&ot.update&&ot.update(at),tt.before&&tt.before.call(ot,ot.node),lt&&("object"==typeof ot.node&&null!==ot.node&&!ot.circular&&(st.push(ot),Lt(),U(ot.keys,function(dt,it){nt.push(dt),tt.pre&&tt.pre.call(ot,ot.node[dt],dt);var rt=xt(ot.node[dt]);pt&&V.call(ot.node,dt)&&(ot.node[dt]=rt.node),rt.isLast=it==ot.keys.length-1,rt.isFirst=0==it,tt.post&&tt.post.call(ot,rt),nt.pop()}),st.pop()),tt.after&&tt.after.call(ot,ot.node)),ot}(H).node}function p(H){if("object"==typeof H&&null!==H){var $;if(M(H))$=[];else if(function(H){return"[object Date]"===t(H)}(H))$=new Date(H.getTime?H.getTime():H);else if(function(H){return"[object RegExp]"===t(H)}(H))$=new RegExp(H);else if(function(H){return"[object Error]"===t(H)}(H))$={message:H.message};else if(function(H){return"[object Boolean]"===t(H)}(H))$=new Boolean(H);else if(function(H){return"[object Number]"===t(H)}(H))$=new Number(H);else if(function(H){return"[object String]"===t(H)}(H))$=new String(H);else if(Object.create&&Object.getPrototypeOf)$=Object.create(Object.getPrototypeOf(H));else if(H.constructor===Object)$={};else{var nt=function(){};nt.prototype=H.constructor&&H.constructor.prototype||H.__proto__||{},$=new nt}return U(e(H),function(st){$[st]=H[st]}),$}return H}f.prototype.get=function(H){for(var $=this.value,pt=0;pt<H.length;pt++){var nt=H[pt];if(!$||!V.call($,nt)){$=void 0;break}$=$[nt]}return $},f.prototype.has=function(H){for(var $=this.value,pt=0;pt<H.length;pt++){var nt=H[pt];if(!$||!V.call($,nt))return!1;$=$[nt]}return!0},f.prototype.set=function(H,$){for(var pt=this.value,nt=0;nt<H.length-1;nt++){var st=H[nt];V.call(pt,st)||(pt[st]={}),pt=pt[st]}return pt[H[nt]]=$,$},f.prototype.map=function(H){return b(this.value,H,!0)},f.prototype.forEach=function(H){return this.value=b(this.value,H,!1),this.value},f.prototype.reduce=function(H,$){var pt=1===arguments.length,nt=pt?this.value:$;return this.forEach(function(st){(!this.isRoot||!pt)&&(nt=H.call(this,nt,st))}),nt},f.prototype.paths=function(){var H=[];return this.forEach(function($){H.push(this.path)}),H},f.prototype.nodes=function(){var H=[];return this.forEach(function($){H.push(this.node)}),H},f.prototype.clone=function(){var H=[],$=[];return function pt(nt){for(var st=0;st<H.length;st++)if(H[st]===nt)return $[st];if("object"==typeof nt&&null!==nt){var Ct=p(nt);return H.push(nt),$.push(Ct),U(e(nt),function(xt){Ct[xt]=pt(nt[xt])}),H.pop(),$.pop(),Ct}return nt}(this.value)};var e=Object.keys||function($){var pt=[];for(var nt in $)pt.push(nt);return pt};function t(H){return Object.prototype.toString.call(H)}var M=Array.isArray||function($){return"[object Array]"===Object.prototype.toString.call($)},U=function(H,$){if(H.forEach)return H.forEach($);for(var pt=0;pt<H.length;pt++)$(H[pt],pt,H)};U(e(f.prototype),function(H){B[H]=function($){var pt=[].slice.call(arguments,1),nt=new f($);return nt[H].apply(nt,pt)}});var V=Object.hasOwnProperty||function(H,$){return $ in H}},46486:function(k,B,f){var b;k=f.nmd(k),function(p){"object"==typeof global&&global;var o,s=2147483647,c=36,pt=/^xn--/,nt=/[^\x20-\x7E]/,st=/[\x2E\u3002\uFF0E\uFF61]/g,Ct={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},yt=Math.floor,ut=String.fromCharCode;function lt(de){throw RangeError(Ct[de])}function ot(de,Be){for(var He=de.length,Ke=[];He--;)Ke[He]=Be(de[He]);return Ke}function Lt(de,Be){var He=de.split("@"),Ke="";return He.length>1&&(Ke=He[0]+"@",de=He[1]),Ke+ot((de=de.replace(st,".")).split("."),Be).join(".")}function at(de){for(var vi,qe,Be=[],He=0,Ke=de.length;He<Ke;)(vi=de.charCodeAt(He++))>=55296&&vi<=56319&&He<Ke?56320==(64512&(qe=de.charCodeAt(He++)))?Be.push(((1023&vi)<<10)+(1023&qe)+65536):(Be.push(vi),He--):Be.push(vi);return Be}function dt(de){return ot(de,function(Be){var He="";return Be>65535&&(He+=ut((Be-=65536)>>>10&1023|55296),Be=56320|1023&Be),He+ut(Be)}).join("")}function it(de){return de-48<10?de-22:de-65<26?de-65:de-97<26?de-97:c}function rt(de,Be){return de+22+75*(de<26)-((0!=Be)<<5)}function Gt(de,Be,He){var Ke=0;for(de=He?yt(de/700):de>>1,de+=yt(de/Be);de>455;Ke+=c)de=yt(de/35);return yt(Ke+36*de/(de+38))}function bt(de){var Ke,oi,Ft,_e,Xt,Jt,Rt,Pt,he,ze,Be=[],He=de.length,vi=0,qe=128,Ne=72;for((oi=de.lastIndexOf("-"))<0&&(oi=0),Ft=0;Ft<oi;++Ft)de.charCodeAt(Ft)>=128&&lt("not-basic"),Be.push(de.charCodeAt(Ft));for(_e=oi>0?oi+1:0;_e<He;){for(Xt=vi,Jt=1,Rt=c;_e>=He&&lt("invalid-input"),((Pt=it(de.charCodeAt(_e++)))>=c||Pt>yt((s-vi)/Jt))&&lt("overflow"),vi+=Pt*Jt,!(Pt<(he=Rt<=Ne?1:Rt>=Ne+26?26:Rt-Ne));Rt+=c)Jt>yt(s/(ze=c-he))&&lt("overflow"),Jt*=ze;Ne=Gt(vi-Xt,Ke=Be.length+1,0==Xt),yt(vi/Ke)>s-qe&&lt("overflow"),qe+=yt(vi/Ke),vi%=Ke,Be.splice(vi++,0,qe)}return dt(Be)}function Ht(de){var Be,He,Ke,vi,qe,Ne,oi,Ft,_e,Xt,Jt,Pt,he,ze,le,Rt=[];for(Pt=(de=at(de)).length,Be=128,He=0,qe=72,Ne=0;Ne<Pt;++Ne)(Jt=de[Ne])<128&&Rt.push(ut(Jt));for(Ke=vi=Rt.length,vi&&Rt.push("-");Ke<Pt;){for(oi=s,Ne=0;Ne<Pt;++Ne)(Jt=de[Ne])>=Be&&Jt<oi&&(oi=Jt);for(oi-Be>yt((s-He)/(he=Ke+1))&&lt("overflow"),He+=(oi-Be)*he,Be=oi,Ne=0;Ne<Pt;++Ne)if((Jt=de[Ne])<Be&&++He>s&&lt("overflow"),Jt==Be){for(Ft=He,_e=c;!(Ft<(Xt=_e<=qe?1:_e>=qe+26?26:_e-qe));_e+=c)Rt.push(ut(rt(Xt+(le=Ft-Xt)%(ze=c-Xt),0))),Ft=yt(le/ze);Rt.push(ut(rt(Ft,0))),qe=Gt(He,he,Ke==vi),He=0,++Ke}++He,++Be}return Rt.join("")}o={version:"1.3.2",ucs2:{decode:at,encode:dt},decode:bt,encode:Ht,toASCII:function(de){return Lt(de,function(Be){return nt.test(Be)?"xn--"+Ht(Be):Be})},toUnicode:function(de){return Lt(de,function(Be){return pt.test(Be)?bt(Be.slice(4).toLowerCase()):Be})}},void 0!==(b=function(){return o}.call(B,f,B,k))&&(k.exports=b)}()},5128:(k,B,f)=>{"use strict";var b=f(46486),p=f(77107);function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}B.parse=Ct,B.resolve=function(tt,lt){return Ct(tt,!1,!0).resolve(lt)},B.resolveObject=function(tt,lt){return tt?Ct(tt,!1,!0).resolveObject(lt):lt},B.format=function(tt){return p.isString(tt)&&(tt=Ct(tt)),tt instanceof e?tt.format():e.prototype.format.call(tt)},B.Url=e;var t=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),_=["'"].concat(c),w=["%","/","?",";","#"].concat(_),M=["/","?","#"],V=/^[+a-z0-9A-Z_-]{0,63}$/,H=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$={javascript:!0,"javascript:":!0},pt={javascript:!0,"javascript:":!0},nt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},st=f(36e3);function Ct(tt,lt,ot){if(tt&&p.isObject(tt)&&tt instanceof e)return tt;var Lt=new e;return Lt.parse(tt,lt,ot),Lt}e.prototype.parse=function(tt,lt,ot){if(!p.isString(tt))throw new TypeError("Parameter 'url' must be a string, not "+typeof tt);var Lt=tt.indexOf("?"),at=-1!==Lt&&Lt<tt.indexOf("#")?"?":"#",dt=tt.split(at);dt[0]=dt[0].replace(/\\/g,"/");var rt=tt=dt.join(at);if(rt=rt.trim(),!ot&&1===tt.split("#").length){var Gt=o.exec(rt);if(Gt)return this.path=rt,this.href=rt,this.pathname=Gt[1],Gt[2]?(this.search=Gt[2],this.query=lt?st.parse(this.search.substr(1)):this.search.substr(1)):lt&&(this.search="",this.query={}),this}var bt=t.exec(rt);if(bt){var Ht=(bt=bt[0]).toLowerCase();this.protocol=Ht,rt=rt.substr(bt.length)}if(ot||bt||rt.match(/^\/\/[^@\/]+@[^@\/]+/)){var ce="//"===rt.substr(0,2);ce&&(!bt||!pt[bt])&&(rt=rt.substr(2),this.slashes=!0)}if(!pt[bt]&&(ce||bt&&!nt[bt])){for(var Ye=-1,de=0;de<M.length;de++)-1!==(Be=rt.indexOf(M[de]))&&(-1===Ye||Be<Ye)&&(Ye=Be);var He,Ke;for(-1!==(Ke=-1===Ye?rt.lastIndexOf("@"):rt.lastIndexOf("@",Ye))&&(He=rt.slice(0,Ke),rt=rt.slice(Ke+1),this.auth=decodeURIComponent(He)),Ye=-1,de=0;de<w.length;de++){var Be;-1!==(Be=rt.indexOf(w[de]))&&(-1===Ye||Be<Ye)&&(Ye=Be)}-1===Ye&&(Ye=rt.length),this.host=rt.slice(0,Ye),rt=rt.slice(Ye),this.parseHost(),this.hostname=this.hostname||"";var vi="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!vi)for(var qe=this.hostname.split(/\./),Ne=(de=0,qe.length);de<Ne;de++){var oi=qe[de];if(oi&&!oi.match(V)){for(var Ft="",_e=0,Xt=oi.length;_e<Xt;_e++)oi.charCodeAt(_e)>127?Ft+="x":Ft+=oi[_e];if(!Ft.match(V)){var Jt=qe.slice(0,de),Rt=qe.slice(de+1),Pt=oi.match(H);Pt&&(Jt.push(Pt[1]),Rt.unshift(Pt[2])),Rt.length&&(rt="/"+Rt.join(".")+rt),this.hostname=Jt.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),vi||(this.hostname=b.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,vi&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==rt[0]&&(rt="/"+rt))}if(!$[Ht])for(de=0,Ne=_.length;de<Ne;de++){var le=_[de];if(-1!==rt.indexOf(le)){var jt=encodeURIComponent(le);jt===le&&(jt=escape(le)),rt=rt.split(le).join(jt)}}var Yt=rt.indexOf("#");-1!==Yt&&(this.hash=rt.substr(Yt),rt=rt.slice(0,Yt));var ge=rt.indexOf("?");return-1!==ge?(this.search=rt.substr(ge),this.query=rt.substr(ge+1),lt&&(this.query=st.parse(this.query)),rt=rt.slice(0,ge)):lt&&(this.search="",this.query={}),rt&&(this.pathname=rt),nt[Ht]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},e.prototype.format=function(){var tt=this.auth||"";tt&&(tt=(tt=encodeURIComponent(tt)).replace(/%3A/i,":"),tt+="@");var lt=this.protocol||"",ot=this.pathname||"",Lt=this.hash||"",at=!1,dt="";this.host?at=tt+this.host:this.hostname&&(at=tt+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(at+=":"+this.port)),this.query&&p.isObject(this.query)&&Object.keys(this.query).length&&(dt=st.stringify(this.query));var it=this.search||dt&&"?"+dt||"";return lt&&":"!==lt.substr(-1)&&(lt+=":"),this.slashes||(!lt||nt[lt])&&!1!==at?(at="//"+(at||""),ot&&"/"!==ot.charAt(0)&&(ot="/"+ot)):at||(at=""),Lt&&"#"!==Lt.charAt(0)&&(Lt="#"+Lt),it&&"?"!==it.charAt(0)&&(it="?"+it),lt+at+(ot=ot.replace(/[?#]/g,function(rt){return encodeURIComponent(rt)}))+(it=it.replace("#","%23"))+Lt},e.prototype.resolve=function(tt){return this.resolveObject(Ct(tt,!1,!0)).format()},e.prototype.resolveObject=function(tt){if(p.isString(tt)){var lt=new e;lt.parse(tt,!1,!0),tt=lt}for(var ot=new e,Lt=Object.keys(this),at=0;at<Lt.length;at++){var dt=Lt[at];ot[dt]=this[dt]}if(ot.hash=tt.hash,""===tt.href)return ot.href=ot.format(),ot;if(tt.slashes&&!tt.protocol){for(var it=Object.keys(tt),rt=0;rt<it.length;rt++){var Gt=it[rt];"protocol"!==Gt&&(ot[Gt]=tt[Gt])}return nt[ot.protocol]&&ot.hostname&&!ot.pathname&&(ot.path=ot.pathname="/"),ot.href=ot.format(),ot}if(tt.protocol&&tt.protocol!==ot.protocol){if(!nt[tt.protocol]){for(var bt=Object.keys(tt),Ht=0;Ht<bt.length;Ht++){var ce=bt[Ht];ot[ce]=tt[ce]}return ot.href=ot.format(),ot}if(ot.protocol=tt.protocol,tt.host||pt[tt.protocol])ot.pathname=tt.pathname;else{for(var Ne=(tt.pathname||"").split("/");Ne.length&&!(tt.host=Ne.shift()););tt.host||(tt.host=""),tt.hostname||(tt.hostname=""),""!==Ne[0]&&Ne.unshift(""),Ne.length<2&&Ne.unshift(""),ot.pathname=Ne.join("/")}return ot.search=tt.search,ot.query=tt.query,ot.host=tt.host||"",ot.auth=tt.auth,ot.hostname=tt.hostname||tt.host,ot.port=tt.port,(ot.pathname||ot.search)&&(ot.path=(ot.pathname||"")+(ot.search||"")),ot.slashes=ot.slashes||tt.slashes,ot.href=ot.format(),ot}var Be=ot.pathname&&"/"===ot.pathname.charAt(0),He=tt.host||tt.pathname&&"/"===tt.pathname.charAt(0),Ke=He||Be||ot.host&&tt.pathname,vi=Ke,qe=ot.pathname&&ot.pathname.split("/")||[],oi=(Ne=tt.pathname&&tt.pathname.split("/")||[],ot.protocol&&!nt[ot.protocol]);if(oi&&(ot.hostname="",ot.port=null,ot.host&&(""===qe[0]?qe[0]=ot.host:qe.unshift(ot.host)),ot.host="",tt.protocol&&(tt.hostname=null,tt.port=null,tt.host&&(""===Ne[0]?Ne[0]=tt.host:Ne.unshift(tt.host)),tt.host=null),Ke=Ke&&(""===Ne[0]||""===qe[0])),He)ot.host=tt.host||""===tt.host?tt.host:ot.host,ot.hostname=tt.hostname||""===tt.hostname?tt.hostname:ot.hostname,ot.search=tt.search,ot.query=tt.query,qe=Ne;else if(Ne.length)qe||(qe=[]),qe.pop(),qe=qe.concat(Ne),ot.search=tt.search,ot.query=tt.query;else if(!p.isNullOrUndefined(tt.search))return oi&&(ot.hostname=ot.host=qe.shift(),(Ft=!!(ot.host&&ot.host.indexOf("@")>0)&&ot.host.split("@"))&&(ot.auth=Ft.shift(),ot.host=ot.hostname=Ft.shift())),ot.search=tt.search,ot.query=tt.query,(!p.isNull(ot.pathname)||!p.isNull(ot.search))&&(ot.path=(ot.pathname?ot.pathname:"")+(ot.search?ot.search:"")),ot.href=ot.format(),ot;if(!qe.length)return ot.pathname=null,ot.path=ot.search?"/"+ot.search:null,ot.href=ot.format(),ot;for(var _e=qe.slice(-1)[0],Xt=(ot.host||tt.host||qe.length>1)&&("."===_e||".."===_e)||""===_e,Jt=0,Rt=qe.length;Rt>=0;Rt--)"."===(_e=qe[Rt])?qe.splice(Rt,1):".."===_e?(qe.splice(Rt,1),Jt++):Jt&&(qe.splice(Rt,1),Jt--);if(!Ke&&!vi)for(;Jt--;Jt)qe.unshift("..");Ke&&""!==qe[0]&&(!qe[0]||"/"!==qe[0].charAt(0))&&qe.unshift(""),Xt&&"/"!==qe.join("/").substr(-1)&&qe.push("");var Ft,Pt=""===qe[0]||qe[0]&&"/"===qe[0].charAt(0);return oi&&(ot.hostname=ot.host=Pt?"":qe.length?qe.shift():"",(Ft=!!(ot.host&&ot.host.indexOf("@")>0)&&ot.host.split("@"))&&(ot.auth=Ft.shift(),ot.host=ot.hostname=Ft.shift())),(Ke=Ke||ot.host&&qe.length)&&!Pt&&qe.unshift(""),qe.length?ot.pathname=qe.join("/"):(ot.pathname=null,ot.path=null),(!p.isNull(ot.pathname)||!p.isNull(ot.search))&&(ot.path=(ot.pathname?ot.pathname:"")+(ot.search?ot.search:"")),ot.auth=tt.auth||ot.auth,ot.slashes=ot.slashes||tt.slashes,ot.href=ot.format(),ot},e.prototype.parseHost=function(){var tt=this.host,lt=n.exec(tt);lt&&(":"!==(lt=lt[0])&&(this.port=lt.substr(1)),tt=tt.substr(0,tt.length-lt.length)),tt&&(this.hostname=tt)}},77107:k=>{"use strict";k.exports={isString:function(B){return"string"==typeof B},isObject:function(B){return"object"==typeof B&&null!==B},isNull:function(B){return null===B},isNullOrUndefined:function(B){return null==B}}},17131:k=>{k.exports=function p(e,t,n){function o(_,w){if(!t[_]){if(!e[_]){if(s)return s(_,!0);var U=new Error("Cannot find module '"+_+"'");throw U.code="MODULE_NOT_FOUND",U}var V=t[_]={exports:{}};e[_][0].call(V.exports,function(H){return o(e[_][1][H]||H)},V,V.exports,p,e,t,n)}return t[_].exports}for(var s=void 0,c=0;c<n.length;c++)o(n[c]);return o}({1:[function(p,e,t){"use strict";e.exports=function n(o){if(!o||"object"!=typeof o)return o;if("[object Date]"==Object.prototype.toString.call(o))return new Date(o.getTime());if(Array.isArray(o))return o.map(n);var s={};return Object.keys(o).forEach(function(c){s[c]=n(o[c])}),s}},{}],2:[function(p,e,t){e.exports=function(_,w){if("string"!=typeof _)throw new TypeError("String expected");w||(w=document);var M=/<([\w:]+)/.exec(_);if(!M)return w.createTextNode(_);_=_.replace(/^\s+|\s+$/g,"");var U=M[1];if("body"==U)return(nt=w.createElement("html")).innerHTML=_,nt.removeChild(nt.lastChild);var nt,V=s[U]||s._default,H=V[0],$=V[1],pt=V[2];for((nt=w.createElement("div")).innerHTML=$+_+pt;H--;)nt=nt.lastChild;if(nt.firstChild==nt.lastChild)return nt.removeChild(nt.firstChild);for(var st=w.createDocumentFragment();nt.firstChild;)st.appendChild(nt.removeChild(nt.firstChild));return st};var o,n=!1;"undefined"!=typeof document&&((o=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',n=!o.getElementsByTagName("link").length,o=void 0);var s={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:n?[1,"X<div>","</div>"]:[0,"",""]};s.td=s.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],s.option=s.optgroup=[1,'<select multiple="multiple">',"</select>"],s.thead=s.tbody=s.colgroup=s.caption=s.tfoot=[1,"<table>","</table>"],s.polyline=s.ellipse=s.polygon=s.circle=s.text=s.line=s.path=s.rect=s.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],3:[function(p,e,t){var n=/^(?:submit|button|image|reset|file)$/i,o=/^(?:input|select|textarea|keygen)/i,s=/(\[[^\[\]]*\])/g;function w(V,H,$){if(0===H.length)return $;var pt=H.shift(),nt=pt.match(/^\[(.+?)\]$/);if("[]"===pt)return V=V||[],Array.isArray(V)?V.push(w(null,H,$)):(V._values=V._values||[],V._values.push(w(null,H,$))),V;if(nt){var st=nt[1],Ct=+st;isNaN(Ct)?(V=V||{})[st]=w(V[st],H,$):(V=V||[])[Ct]=w(V[Ct],H,$)}else V[pt]=w(V[pt],H,$);return V}function M(V,H,$){if(H.match(s))w(V,function(V){var H=[],pt=new RegExp(s),nt=/^([^\[\]]*)/.exec(V);for(nt[1]&&H.push(nt[1]);null!==(nt=pt.exec(V));)H.push(nt[1]);return H}(H),$);else{var st=V[H];st?(Array.isArray(st)||(V[H]=[st]),V[H].push($)):V[H]=$}return V}function U(V,H,$){return $=$.replace(/(\r)?\n/g,"\r\n"),$=($=encodeURIComponent($)).replace(/%20/g,"+"),V+(V?"&":"")+encodeURIComponent(H)+"="+$}e.exports=function(V,H){"object"!=typeof H?H={hash:!!H}:void 0===H.hash&&(H.hash=!0);for(var $=H.hash?{}:"",pt=H.serializer||(H.hash?M:U),nt=V&&V.elements?V.elements:[],st=Object.create(null),Ct=0;Ct<nt.length;++Ct){var xt=nt[Ct];if((H.disabled||!xt.disabled)&&xt.name&&o.test(xt.nodeName)&&!n.test(xt.type)){var yt=xt.name,ut=xt.value;if(("checkbox"===xt.type||"radio"===xt.type)&&!xt.checked&&(ut=void 0),H.empty){if("checkbox"===xt.type&&!xt.checked&&(ut=""),"radio"===xt.type&&(st[xt.name]||xt.checked?xt.checked&&(st[xt.name]=!0):st[xt.name]=!1),!ut&&"radio"==xt.type)continue}else if(!ut)continue;if("select-multiple"===xt.type){ut=[];for(var tt=xt.options,lt=!1,ot=0;ot<tt.length;++ot){var Lt=tt[ot];Lt.selected&&(Lt.value||H.empty&&!Lt.value)&&(lt=!0,$=H.hash&&"[]"!==yt.slice(yt.length-2)?pt($,yt+"[]",Lt.value):pt($,yt,Lt.value))}!lt&&H.empty&&($=pt($,yt,""));continue}$=pt($,yt,ut)}}if(H.empty)for(var yt in st)st[yt]||($=pt($,yt,""));return $}},{}],4:[function(p,e,t){var n=p("domify"),o=p("form-serialize"),s=p("deep-clone-simple"),_=function(U){var V=document.createElement("div");V.classList.add("vex-dialog-buttons");for(var H=0;H<U.length;H++){var $=U[H],pt=document.createElement("button");pt.type=$.type,pt.textContent=$.text,pt.className=$.className,pt.classList.add("vex-dialog-button"),0===H?pt.classList.add("vex-first"):H===U.length-1&&pt.classList.add("vex-last"),function(nt){pt.addEventListener("click",function(st){nt.click&&nt.click.call(this,st)}.bind(this))}.bind(this)($),V.appendChild(pt)}return V};e.exports=function(U){var V={name:"dialog",open:function($){var pt=Object.assign({},s(this.defaultOptions),$);pt.unsafeMessage&&!pt.message?pt.message=pt.unsafeMessage:pt.message&&(pt.message=U._escapeHtml(pt.message));var nt=pt.unsafeContent=function(U){var V=document.createElement("form");V.classList.add("vex-dialog-form");var H=document.createElement("div");H.classList.add("vex-dialog-message"),H.appendChild(U.message instanceof window.Node?U.message:n(U.message));var $=document.createElement("div");return $.classList.add("vex-dialog-input"),$.appendChild(U.input instanceof window.Node?U.input:n(U.input)),V.appendChild(H),V.appendChild($),V}(pt),st=U.open(pt);""!==pt.yesText&&(pt.buttons[0].text=pt.yesText),""!==pt.noText&&(pt.buttons[1].text=pt.noText);var Ct=pt.beforeClose&&pt.beforeClose.bind(st);if(st.options.beforeClose=function(){var ut=!Ct||Ct();return ut&&pt.callback(this.value||!1),ut}.bind(st),nt.appendChild(_.call(st,pt.buttons)),st.form=nt,nt.addEventListener("submit",pt.onSubmit.bind(st)),pt.focusFirstInput){var xt=st.contentEl.querySelector("button, input, select, textarea");xt&&xt.focus()}return st},alert:function(H){return"string"==typeof H&&(H={message:H}),H=Object.assign({},s(this.defaultOptions),s(this.defaultAlertOptions),H),this.open(H)},confirm:function(H){if("object"!=typeof H||"function"!=typeof H.callback)throw new Error("dialog.confirm(options) requires options.callback.");return H=Object.assign({},s(this.defaultOptions),s(this.defaultConfirmOptions),H),this.open(H)},prompt:function(H){if("object"!=typeof H||"function"!=typeof H.callback)throw new Error("dialog.prompt(options) requires options.callback.");var $=Object.assign({},s(this.defaultOptions),s(this.defaultPromptOptions)),pt={unsafeMessage:'<label for="vex">'+U._escapeHtml(H.label||$.label)+"</label>",input:'<input name="vex" type="text" class="vex-dialog-prompt-input" placeholder="'+U._escapeHtml(H.placeholder||$.placeholder)+'" value="'+U._escapeHtml(H.value||$.value)+'" />'},nt=(H=Object.assign($,pt,H)).callback;return H.callback=function(Ct){if("object"==typeof Ct){var xt=Object.keys(Ct);Ct=xt.length?Ct[xt[0]]:""}nt(Ct)},this.open(H)},buttons:{YES:{text:"OK",type:"submit",className:"vex-dialog-button-primary",click:function(){this.value=!0}},NO:{text:"Cancel",type:"button",className:"vex-dialog-button-secondary",click:function(){this.value=!1,this.close()}}}};return V.defaultOptions={callback:function(){},afterOpen:function(){},message:"",input:"",yesText:"",noText:"",buttons:[V.buttons.YES,V.buttons.NO],showCloseButton:!1,onSubmit:function($){return $.preventDefault(),this.options.input&&(this.value=o(this.form,{hash:!0})),this.close()},focusFirstInput:!0},V.defaultAlertOptions={buttons:[V.buttons.YES]},V.defaultPromptOptions={label:"Prompt:",placeholder:"",value:""},V.defaultConfirmOptions={},V}},{"deep-clone-simple":1,domify:2,"form-serialize":3}]},{},[4])(4)},61058:k=>{k.exports=function p(e,t,n){function o(_,w){if(!t[_]){if(!e[_]){if(s)return s(_,!0);var U=new Error("Cannot find module '"+_+"'");throw U.code="MODULE_NOT_FOUND",U}var V=t[_]={exports:{}};e[_][0].call(V.exports,function(H){return o(e[_][1][H]||H)},V,V.exports,p,e,t,n)}return t[_].exports}for(var s=void 0,c=0;c<n.length;c++)o(n[c]);return o}({1:[function(p,e,t){"document"in window.self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(n){"use strict";if("Element"in n){var o="classList",s="prototype",c=n.Element[s],_=Object,w=String[s].trim||function(){return this.replace(/^\s+|\s+$/g,"")},M=Array[s].indexOf||function(st){for(var Ct=0,xt=this.length;Ct<xt;Ct++)if(Ct in this&&this[Ct]===st)return Ct;return-1},U=function(st,Ct){this.name=st,this.code=DOMException[st],this.message=Ct},V=function(st,Ct){if(""===Ct)throw new U("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(Ct))throw new U("INVALID_CHARACTER_ERR","String contains an invalid character");return M.call(st,Ct)},H=function(st){for(var Ct=w.call(st.getAttribute("class")||""),xt=Ct?Ct.split(/\s+/):[],yt=0,ut=xt.length;yt<ut;yt++)this.push(xt[yt]);this._updateClassName=function(){st.setAttribute("class",this.toString())}},$=H[s]=[],pt=function(){return new H(this)};if(U[s]=Error[s],$.item=function(st){return this[st]||null},$.contains=function(st){return-1!==V(this,st+="")},$.add=function(){var yt,st=arguments,Ct=0,xt=st.length,ut=!1;do{-1===V(this,yt=st[Ct]+"")&&(this.push(yt),ut=!0)}while(++Ct<xt);ut&&this._updateClassName()},$.remove=function(){var yt,tt,st=arguments,Ct=0,xt=st.length,ut=!1;do{for(tt=V(this,yt=st[Ct]+"");-1!==tt;)this.splice(tt,1),ut=!0,tt=V(this,yt)}while(++Ct<xt);ut&&this._updateClassName()},$.toggle=function(st,Ct){var xt=this.contains(st+=""),yt=xt?!0!==Ct&&"remove":!1!==Ct&&"add";return yt&&this[yt](st),!0===Ct||!1===Ct?Ct:!xt},$.toString=function(){return this.join(" ")},_.defineProperty){var nt={get:pt,enumerable:!0,configurable:!0};try{_.defineProperty(c,o,nt)}catch(st){(void 0===st.number||-2146823252===st.number)&&(nt.enumerable=!1,_.defineProperty(c,o,nt))}}else _[s].__defineGetter__&&c.__defineGetter__(o,pt)}}(window.self),function(){"use strict";var n=document.createElement("_");if(n.classList.add("c1","c2"),!n.classList.contains("c2")){var o=function(c){var _=DOMTokenList.prototype[c];DOMTokenList.prototype[c]=function(w){var M,U=arguments.length;for(M=0;M<U;M++)_.call(this,w=arguments[M])}};o("add"),o("remove")}if(n.classList.toggle("c3",!1),n.classList.contains("c3")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(c,_){return 1 in arguments&&!this.contains(c)==!_?_:s.call(this,c)}}n=null}())},{}],2:[function(p,e,t){e.exports=function(_,w){if("string"!=typeof _)throw new TypeError("String expected");w||(w=document);var M=/<([\w:]+)/.exec(_);if(!M)return w.createTextNode(_);_=_.replace(/^\s+|\s+$/g,"");var U=M[1];if("body"==U)return(nt=w.createElement("html")).innerHTML=_,nt.removeChild(nt.lastChild);var nt,V=s[U]||s._default,H=V[0],$=V[1],pt=V[2];for((nt=w.createElement("div")).innerHTML=$+_+pt;H--;)nt=nt.lastChild;if(nt.firstChild==nt.lastChild)return nt.removeChild(nt.firstChild);for(var st=w.createDocumentFragment();nt.firstChild;)st.appendChild(nt.removeChild(nt.firstChild));return st};var o,n=!1;"undefined"!=typeof document&&((o=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',n=!o.getElementsByTagName("link").length,o=void 0);var s={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:n?[1,"X<div>","</div>"]:[0,"",""]};s.td=s.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],s.option=s.optgroup=[1,'<select multiple="multiple">',"</select>"],s.thead=s.tbody=s.colgroup=s.caption=s.tfoot=[1,"<table>","</table>"],s.polyline=s.ellipse=s.polygon=s.circle=s.text=s.line=s.path=s.rect=s.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],3:[function(p,e,t){"use strict";function n(s,c){if(null==s)throw new TypeError("Cannot convert first argument to object");for(var _=Object(s),w=1;w<arguments.length;w++){var M=arguments[w];if(null!=M)for(var U=Object.keys(Object(M)),V=0,H=U.length;V<H;V++){var $=U[V],pt=Object.getOwnPropertyDescriptor(M,$);void 0!==pt&&pt.enumerable&&(_[$]=M[$])}}return _}e.exports={assign:n,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}}},{}],4:[function(p,e,t){p("classlist-polyfill"),p("es6-object-assign").polyfill();var n=p("domify"),o=function($){if(void 0!==$){var pt=document.createElement("div");return pt.appendChild(document.createTextNode($)),pt.innerHTML}return""},s=function($,pt){if("string"==typeof pt&&0!==pt.length)for(var nt=pt.split(" "),st=0;st<nt.length;st++){var Ct=nt[st];Ct.length&&$.classList.add(Ct)}},c=function(){var $=document.createElement("div"),pt={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oanimationend",msAnimation:"MSAnimationEnd"};for(var nt in pt)if(void 0!==$.style[nt])return pt[nt];return!1}(),__vex="vex",__content="vex-content",__overlay="vex-overlay",__close="vex-close",__closing="vex-closing",__open="vex-open",w={},M=1,U=!1,V={open:function($){var pt=function(ot){console.warn('The "'+ot+'" property is deprecated in vex 3. Use CSS classes and the appropriate "ClassName" options, instead.'),console.warn("See http://github.hubspot.com/vex/api/advanced/#options")};$.css&&pt("css"),$.overlayCSS&&pt("overlayCSS"),$.contentCSS&&pt("contentCSS"),$.closeCSS&&pt("closeCSS");var nt={};nt.id=M++,w[nt.id]=nt,nt.isOpen=!0,nt.close=function(){if(!this.isOpen)return!0;var ot=this.options;if(U&&!ot.escapeButtonCloses)return!1;if(!1===function(){return!ot.beforeClose||ot.beforeClose.call(this)}.bind(this)())return!1;this.isOpen=!1;var at=window.getComputedStyle(this.contentEl);function dt(Gt){return"none"!==at.getPropertyValue(Gt+"animation-name")&&"0s"!==at.getPropertyValue(Gt+"animation-duration")}var it=dt("")||dt("-webkit-")||dt("-moz-")||dt("-o-"),rt=function Gt(){!this.rootEl.parentNode||(this.rootEl.removeEventListener(c,Gt),this.overlayEl.removeEventListener(c,Gt),delete w[this.id],this.rootEl.parentNode.removeChild(this.rootEl),this.bodyEl.removeChild(this.overlayEl),ot.afterClose&&ot.afterClose.call(this),0===Object.keys(w).length&&document.body.classList.remove(__open))}.bind(this);return c&&it?(this.rootEl.addEventListener(c,rt),this.overlayEl.addEventListener(c,rt),this.rootEl.classList.add(__closing),this.overlayEl.classList.add(__closing)):rt(),!0},"string"==typeof $&&($={content:$}),$.unsafeContent&&!$.content?$.content=$.unsafeContent:$.content&&($.content=o($.content));var st=nt.options=Object.assign({},V.defaultOptions,$),Ct=nt.bodyEl=document.getElementsByTagName("body")[0],xt=nt.rootEl=document.createElement("div");xt.classList.add(__vex),s(xt,st.className);var yt=nt.overlayEl=document.createElement("div");yt.classList.add(__overlay),s(yt,st.overlayClassName),st.overlayClosesOnClick&&xt.addEventListener("click",function(ot){ot.target===xt&&nt.close()}),Ct.appendChild(yt);var ut=nt.contentEl=document.createElement("div");if(ut.classList.add(__content),s(ut,st.contentClassName),ut.appendChild(st.content instanceof window.Node?st.content:n(st.content)),xt.appendChild(ut),st.showCloseButton){var tt=nt.closeEl=document.createElement("div");tt.classList.add(__close),s(tt,st.closeClassName),tt.addEventListener("click",nt.close.bind(nt)),ut.appendChild(tt)}return document.querySelector(st.appendLocation).appendChild(xt),st.afterOpen&&st.afterOpen.call(nt),document.body.classList.add(__open),nt},close:function($){var pt;if($.id)pt=$.id;else{if("string"!=typeof $)throw new TypeError("close requires a vex object or id string");pt=$}return!!w[pt]&&w[pt].close()},closeTop:function(){var $=Object.keys(w);return!!$.length&&w[$[$.length-1]].close()},closeAll:function(){for(var $ in w)this.close($);return!0},getAll:function(){return w},getById:function($){return w[$]}};window.addEventListener("keyup",function($){27===$.keyCode&&(U=!0,V.closeTop(),U=!1)}),window.addEventListener("popstate",function(){V.defaultOptions.closeAllOnPopState&&V.closeAll()}),V.defaultOptions={content:"",showCloseButton:!0,escapeButtonCloses:!0,overlayClosesOnClick:!0,appendLocation:"body",className:"",overlayClassName:"",contentClassName:"",closeClassName:"",closeAllOnPopState:!0},Object.defineProperty(V,"_escapeHtml",{configurable:!1,enumerable:!1,writable:!1,value:o}),V.registerPlugin=function($,pt){var nt=$(V),st=pt||nt.name;if(V[st])throw new Error("Plugin "+pt+" is already registered.");V[st]=nt},e.exports=V},{"classlist-polyfill":1,domify:2,"es6-object-assign":3}]},{},[4])(4)},48926:k=>{function B(b,p,e,t,n,o,s){try{var c=b[o](s),_=c.value}catch(w){return void e(w)}c.done?p(_):Promise.resolve(_).then(t,n)}k.exports=function(b){return function(){var p=this,e=arguments;return new Promise(function(t,n){var o=b.apply(p,e);function s(_){B(o,t,n,s,c,"next",_)}function c(_){B(o,t,n,s,c,"throw",_)}s(void 0)})}},k.exports.default=k.exports,k.exports.__esModule=!0},35987:(k,B,f)=>{"use strict";function c(at,dt,it,rt){return new(it||(it=Promise))(function(bt,Ht){function ce(Be){try{de(rt.next(Be))}catch(He){Ht(He)}}function Ye(Be){try{de(rt.throw(Be))}catch(He){Ht(He)}}function de(Be){Be.done?bt(Be.value):function(bt){return bt instanceof it?bt:new it(function(Ht){Ht(bt)})}(Be.value).then(ce,Ye)}de((rt=rt.apply(at,dt||[])).next())})}function nt(at){return this instanceof nt?(this.v=at,this):new nt(at)}function st(at,dt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Gt,rt=it.apply(at,dt||[]),bt=[];return Gt={},Ht("next"),Ht("throw"),Ht("return"),Gt[Symbol.asyncIterator]=function(){return this},Gt;function Ht(Ke){rt[Ke]&&(Gt[Ke]=function(vi){return new Promise(function(qe,Ne){bt.push([Ke,vi,qe,Ne])>1||ce(Ke,vi)})})}function ce(Ke,vi){try{!function(Ke){Ke.value instanceof nt?Promise.resolve(Ke.value.v).then(de,Be):He(bt[0][2],Ke)}(rt[Ke](vi))}catch(qe){He(bt[0][3],qe)}}function de(Ke){ce("next",Ke)}function Be(Ke){ce("throw",Ke)}function He(Ke,vi){Ke(vi),bt.shift(),bt.length&&ce(bt[0][0],bt[0][1])}}function xt(at){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it,dt=at[Symbol.asyncIterator];return dt?dt.call(at):(at=function(at){var dt="function"==typeof Symbol&&Symbol.iterator,it=dt&&at[dt],rt=0;if(it)return it.call(at);if(at&&"number"==typeof at.length)return{next:function(){return at&&rt>=at.length&&(at=void 0),{value:at&&at[rt++],done:!at}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}(at),it={},rt("next"),rt("throw"),rt("return"),it[Symbol.asyncIterator]=function(){return this},it);function rt(bt){it[bt]=at[bt]&&function(Ht){return new Promise(function(ce,Ye){!function(bt,Ht,ce,Ye){Promise.resolve(Ye).then(function(de){bt({value:de,done:ce})},Ht)}(ce,Ye,(Ht=at[bt](Ht)).done,Ht.value)})}}}f.d(B,{mG:()=>c,qq:()=>nt,FC:()=>st,KL:()=>xt})},6089:(k,B,f)=>{k.exports=f(82422)},44559:(k,B,f)=>{k.exports=f(8535)},58201:(k,B,f)=>{k.exports=f(29114)},37647:(k,B,f)=>{k.exports=f(30376)},20265:(k,B,f)=>{k.exports=f(9102)},17423:(k,B,f)=>{k.exports=f(40809)},32633:(k,B,f)=>{k.exports=f(40051)},36028:(k,B,f)=>{k.exports=f(42905)},35644:(k,B,f)=>{k.exports=f(77120)},15157:(k,B,f)=>{k.exports=f(47940)},99182:(k,B,f)=>{k.exports=f(15783)},41246:(k,B,f)=>{k.exports=f(68397)},2165:(k,B,f)=>{k.exports=f(64043)},17878:(k,B,f)=>{k.exports=f(69265)},2204:(k,B,f)=>{k.exports=f(64781)},26360:(k,B,f)=>{k.exports=f(99671)},3933:(k,B,f)=>{k.exports=f(80297)},16051:(k,B,f)=>{k.exports=f(13770)},6275:(k,B,f)=>{k.exports=f(66715)},17830:(k,B,f)=>{k.exports=f(46481)},25551:(k,B,f)=>{k.exports=f(81788)},41586:(k,B,f)=>{k.exports=f(38637)},83091:(k,B,f)=>{k.exports=f(48414)},28355:(k,B,f)=>{k.exports=f(30595)},40107:(k,B,f)=>{k.exports=f(83930)},31082:(k,B,f)=>{k.exports=f(41076)},73507:(k,B,f)=>{k.exports=f(27109)},86657:(k,B,f)=>{k.exports=f(35841)},42475:(k,B,f)=>{k.exports=f(5643)},49719:(k,B,f)=>{k.exports=f(50606)},75534:(k,B,f)=>{k.exports=f(98222)},84215:(k,B,f)=>{k.exports=f(16487)},36496:(k,B,f)=>{k.exports=f(9735)},22043:(k,B,f)=>{k.exports=f(26029)},59312:(k,B,f)=>{"use strict";f.r(B),f.d(B,{__extends:()=>p,__assign:()=>e,__rest:()=>t,__decorate:()=>n,__param:()=>o,__metadata:()=>s,__awaiter:()=>c,__generator:()=>_,__createBinding:()=>w,__exportStar:()=>M,__values:()=>U,__read:()=>V,__spread:()=>H,__spreadArrays:()=>$,__spreadArray:()=>pt,__await:()=>nt,__asyncGenerator:()=>st,__asyncDelegator:()=>Ct,__asyncValues:()=>xt,__makeTemplateObject:()=>yt,__importStar:()=>tt,__importDefault:()=>lt,__classPrivateFieldGet:()=>ot,__classPrivateFieldSet:()=>Lt});var b=function(at,dt){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(it,rt){it.__proto__=rt}||function(it,rt){for(var Gt in rt)Object.prototype.hasOwnProperty.call(rt,Gt)&&(it[Gt]=rt[Gt])})(at,dt)};function p(at,dt){if("function"!=typeof dt&&null!==dt)throw new TypeError("Class extends value "+String(dt)+" is not a constructor or null");function it(){this.constructor=at}b(at,dt),at.prototype=null===dt?Object.create(dt):(it.prototype=dt.prototype,new it)}var e=function(){return e=Object.assign||function(dt){for(var it,rt=1,Gt=arguments.length;rt<Gt;rt++)for(var bt in it=arguments[rt])Object.prototype.hasOwnProperty.call(it,bt)&&(dt[bt]=it[bt]);return dt},e.apply(this,arguments)};function t(at,dt){var it={};for(var rt in at)Object.prototype.hasOwnProperty.call(at,rt)&&dt.indexOf(rt)<0&&(it[rt]=at[rt]);if(null!=at&&"function"==typeof Object.getOwnPropertySymbols){var Gt=0;for(rt=Object.getOwnPropertySymbols(at);Gt<rt.length;Gt++)dt.indexOf(rt[Gt])<0&&Object.prototype.propertyIsEnumerable.call(at,rt[Gt])&&(it[rt[Gt]]=at[rt[Gt]])}return it}function n(at,dt,it,rt){var Ht,Gt=arguments.length,bt=Gt<3?dt:null===rt?rt=Object.getOwnPropertyDescriptor(dt,it):rt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)bt=Reflect.decorate(at,dt,it,rt);else for(var ce=at.length-1;ce>=0;ce--)(Ht=at[ce])&&(bt=(Gt<3?Ht(bt):Gt>3?Ht(dt,it,bt):Ht(dt,it))||bt);return Gt>3&&bt&&Object.defineProperty(dt,it,bt),bt}function o(at,dt){return function(it,rt){dt(it,rt,at)}}function s(at,dt){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(at,dt)}function c(at,dt,it,rt){return new(it||(it=Promise))(function(bt,Ht){function ce(Be){try{de(rt.next(Be))}catch(He){Ht(He)}}function Ye(Be){try{de(rt.throw(Be))}catch(He){Ht(He)}}function de(Be){Be.done?bt(Be.value):function(bt){return bt instanceof it?bt:new it(function(Ht){Ht(bt)})}(Be.value).then(ce,Ye)}de((rt=rt.apply(at,dt||[])).next())})}function _(at,dt){var rt,Gt,bt,Ht,it={label:0,sent:function(){if(1&bt[0])throw bt[1];return bt[1]},trys:[],ops:[]};return Ht={next:ce(0),throw:ce(1),return:ce(2)},"function"==typeof Symbol&&(Ht[Symbol.iterator]=function(){return this}),Ht;function ce(de){return function(Be){return function(de){if(rt)throw new TypeError("Generator is already executing.");for(;it;)try{if(rt=1,Gt&&(bt=2&de[0]?Gt.return:de[0]?Gt.throw||((bt=Gt.return)&&bt.call(Gt),0):Gt.next)&&!(bt=bt.call(Gt,de[1])).done)return bt;switch(Gt=0,bt&&(de=[2&de[0],bt.value]),de[0]){case 0:case 1:bt=de;break;case 4:return it.label++,{value:de[1],done:!1};case 5:it.label++,Gt=de[1],de=[0];continue;case 7:de=it.ops.pop(),it.trys.pop();continue;default:if(!(bt=(bt=it.trys).length>0&&bt[bt.length-1])&&(6===de[0]||2===de[0])){it=0;continue}if(3===de[0]&&(!bt||de[1]>bt[0]&&de[1]<bt[3])){it.label=de[1];break}if(6===de[0]&&it.label<bt[1]){it.label=bt[1],bt=de;break}if(bt&&it.label<bt[2]){it.label=bt[2],it.ops.push(de);break}bt[2]&&it.ops.pop(),it.trys.pop();continue}de=dt.call(at,it)}catch(Be){de=[6,Be],Gt=0}finally{rt=bt=0}if(5&de[0])throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}([de,Be])}}}var w=Object.create?function(at,dt,it,rt){void 0===rt&&(rt=it),Object.defineProperty(at,rt,{enumerable:!0,get:function(){return dt[it]}})}:function(at,dt,it,rt){void 0===rt&&(rt=it),at[rt]=dt[it]};function M(at,dt){for(var it in at)"default"!==it&&!Object.prototype.hasOwnProperty.call(dt,it)&&w(dt,at,it)}function U(at){var dt="function"==typeof Symbol&&Symbol.iterator,it=dt&&at[dt],rt=0;if(it)return it.call(at);if(at&&"number"==typeof at.length)return{next:function(){return at&&rt>=at.length&&(at=void 0),{value:at&&at[rt++],done:!at}}};throw new TypeError(dt?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(at,dt){var it="function"==typeof Symbol&&at[Symbol.iterator];if(!it)return at;var Gt,Ht,rt=it.call(at),bt=[];try{for(;(void 0===dt||dt-- >0)&&!(Gt=rt.next()).done;)bt.push(Gt.value)}catch(ce){Ht={error:ce}}finally{try{Gt&&!Gt.done&&(it=rt.return)&&it.call(rt)}finally{if(Ht)throw Ht.error}}return bt}function H(){for(var at=[],dt=0;dt<arguments.length;dt++)at=at.concat(V(arguments[dt]));return at}function $(){for(var at=0,dt=0,it=arguments.length;dt<it;dt++)at+=arguments[dt].length;var rt=Array(at),Gt=0;for(dt=0;dt<it;dt++)for(var bt=arguments[dt],Ht=0,ce=bt.length;Ht<ce;Ht++,Gt++)rt[Gt]=bt[Ht];return rt}function pt(at,dt,it){if(it||2===arguments.length)for(var bt,rt=0,Gt=dt.length;rt<Gt;rt++)(bt||!(rt in dt))&&(bt||(bt=Array.prototype.slice.call(dt,0,rt)),bt[rt]=dt[rt]);return at.concat(bt||dt)}function nt(at){return this instanceof nt?(this.v=at,this):new nt(at)}function st(at,dt,it){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Gt,rt=it.apply(at,dt||[]),bt=[];return Gt={},Ht("next"),Ht("throw"),Ht("return"),Gt[Symbol.asyncIterator]=function(){return this},Gt;function Ht(Ke){rt[Ke]&&(Gt[Ke]=function(vi){return new Promise(function(qe,Ne){bt.push([Ke,vi,qe,Ne])>1||ce(Ke,vi)})})}function ce(Ke,vi){try{!function(Ke){Ke.value instanceof nt?Promise.resolve(Ke.value.v).then(de,Be):He(bt[0][2],Ke)}(rt[Ke](vi))}catch(qe){He(bt[0][3],qe)}}function de(Ke){ce("next",Ke)}function Be(Ke){ce("throw",Ke)}function He(Ke,vi){Ke(vi),bt.shift(),bt.length&&ce(bt[0][0],bt[0][1])}}function Ct(at){var dt,it;return dt={},rt("next"),rt("throw",function(Gt){throw Gt}),rt("return"),dt[Symbol.iterator]=function(){return this},dt;function rt(Gt,bt){dt[Gt]=at[Gt]?function(Ht){return(it=!it)?{value:nt(at[Gt](Ht)),done:"return"===Gt}:bt?bt(Ht):Ht}:bt}}function xt(at){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it,dt=at[Symbol.asyncIterator];return dt?dt.call(at):(at=U(at),it={},rt("next"),rt("throw"),rt("return"),it[Symbol.asyncIterator]=function(){return this},it);function rt(bt){it[bt]=at[bt]&&function(Ht){return new Promise(function(ce,Ye){!function(bt,Ht,ce,Ye){Promise.resolve(Ye).then(function(de){bt({value:de,done:ce})},Ht)}(ce,Ye,(Ht=at[bt](Ht)).done,Ht.value)})}}}function yt(at,dt){return Object.defineProperty?Object.defineProperty(at,"raw",{value:dt}):at.raw=dt,at}var ut=Object.create?function(at,dt){Object.defineProperty(at,"default",{enumerable:!0,value:dt})}:function(at,dt){at.default=dt};function tt(at){if(at&&at.__esModule)return at;var dt={};if(null!=at)for(var it in at)"default"!==it&&Object.prototype.hasOwnProperty.call(at,it)&&w(dt,at,it);return ut(dt,at),dt}function lt(at){return at&&at.__esModule?at:{default:at}}function ot(at,dt,it,rt){if("a"===it&&!rt)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof dt?at!==dt||!rt:!dt.has(at))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===it?rt:"a"===it?rt.call(at):rt?rt.value:dt.get(at)}function Lt(at,dt,it,rt,Gt){if("m"===rt)throw new TypeError("Private method is not writable");if("a"===rt&&!Gt)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof dt?at!==dt||!Gt:!dt.has(at))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===rt?Gt.call(at,it):Gt?Gt.value=it:dt.set(at,it),it}},96553:()=>{},41777:(k,B,f)=>{"use strict";f.d(B,{l3:()=>e,_j:()=>b,LC:()=>p,ZN:()=>st,jt:()=>n,pV:()=>V,F4:()=>w,IO:()=>$,vP:()=>s,SB:()=>_,oB:()=>c,eR:()=>M,X$:()=>t,ZE:()=>Ct,k1:()=>xt});class b{}class p{}const e="*";function t(yt,ut){return{type:7,name:yt,definitions:ut,options:{}}}function n(yt,ut=null){return{type:4,styles:ut,timings:yt}}function s(yt,ut=null){return{type:2,steps:yt,options:ut}}function c(yt){return{type:6,styles:yt,offset:null}}function _(yt,ut,tt){return{type:0,name:yt,styles:ut,options:tt}}function w(yt){return{type:5,steps:yt}}function M(yt,ut,tt=null){return{type:1,expr:yt,animation:ut,options:tt}}function V(yt=null){return{type:9,options:yt}}function $(yt,ut,tt=null){return{type:11,selector:yt,animation:ut,options:tt}}function nt(yt){Promise.resolve(null).then(yt)}class st{constructor(ut=0,tt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ut+tt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ut=>ut()),this._onDoneFns=[])}onStart(ut){this._onStartFns.push(ut)}onDone(ut){this._onDoneFns.push(ut)}onDestroy(ut){this._onDestroyFns.push(ut)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){nt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ut=>ut()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ut=>ut()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(ut){this._position=this.totalTime?ut*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ut){const tt="start"==ut?this._onStartFns:this._onDoneFns;tt.forEach(lt=>lt()),tt.length=0}}class Ct{constructor(ut){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ut;let tt=0,lt=0,ot=0;const Lt=this.players.length;0==Lt?nt(()=>this._onFinish()):this.players.forEach(at=>{at.onDone(()=>{++tt==Lt&&this._onFinish()}),at.onDestroy(()=>{++lt==Lt&&this._onDestroy()}),at.onStart(()=>{++ot==Lt&&this._onStart()})}),this.totalTime=this.players.reduce((at,dt)=>Math.max(at,dt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ut=>ut()),this._onDoneFns=[])}init(){this.players.forEach(ut=>ut.init())}onStart(ut){this._onStartFns.push(ut)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ut=>ut()),this._onStartFns=[])}onDone(ut){this._onDoneFns.push(ut)}onDestroy(ut){this._onDestroyFns.push(ut)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ut=>ut.play())}pause(){this.players.forEach(ut=>ut.pause())}restart(){this.players.forEach(ut=>ut.restart())}finish(){this._onFinish(),this.players.forEach(ut=>ut.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ut=>ut.destroy()),this._onDestroyFns.forEach(ut=>ut()),this._onDestroyFns=[])}reset(){this.players.forEach(ut=>ut.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ut){const tt=ut*this.totalTime;this.players.forEach(lt=>{const ot=lt.totalTime?Math.min(1,tt/lt.totalTime):1;lt.setPosition(ot)})}getPosition(){const ut=this.players.reduce((tt,lt)=>null===tt||lt.totalTime>tt.totalTime?lt:tt,null);return null!=ut?ut.getPosition():0}beforeDestroy(){this.players.forEach(ut=>{ut.beforeDestroy&&ut.beforeDestroy()})}triggerCallback(ut){const tt="start"==ut?this._onStartFns:this._onDoneFns;tt.forEach(lt=>lt()),tt.length=0}}const xt="!"},15664:(k,B,f)=>{"use strict";f.d(B,{rt:()=>ie,s1:()=>Ht,kH:()=>ue,Em:()=>ce,tE:()=>ri,qV:()=>he,qm:()=>Pe,ic:()=>de,Kd:()=>ui,X6:()=>oe,yG:()=>re});var b=f(69808),p=f(5e3),e=f(77579),t=f(50727),n=f(61135),o=f(39646),s=f(91159),c=f(18505),_=f(78372),w=f(39300),M=f(54004),U=f(95698),V=f(35684),H=f(71884),$=f(82722),pt=f(63191),nt=f(70925),st=f(17144);class bt{constructor(ct){this._items=ct,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new e.x,this._typeaheadSubscription=t.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=It=>It.disabled,this._pressedLetters=[],this.tabOut=new e.x,this.change=new e.x,ct instanceof p.n_E&&ct.changes.subscribe(It=>{if(this._activeItem){const ve=It.toArray().indexOf(this._activeItem);ve>-1&&ve!==this._activeItemIndex&&(this._activeItemIndex=ve)}})}skipPredicate(ct){return this._skipPredicateFn=ct,this}withWrap(ct=!0){return this._wrap=ct,this}withVerticalOrientation(ct=!0){return this._vertical=ct,this}withHorizontalOrientation(ct){return this._horizontal=ct,this}withAllowedModifierKeys(ct){return this._allowedModifierKeys=ct,this}withTypeAhead(ct=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,c.b)(It=>this._pressedLetters.push(It)),(0,_.b)(ct),(0,w.h)(()=>this._pressedLetters.length>0),(0,M.U)(()=>this._pressedLetters.join(""))).subscribe(It=>{const te=this._getItemsArray();for(let ve=1;ve<te.length+1;ve++){const Ti=(this._activeItemIndex+ve)%te.length,ki=te[Ti];if(!this._skipPredicateFn(ki)&&0===ki.getLabel().toUpperCase().trim().indexOf(It)){this.setActiveItem(Ti);break}}this._pressedLetters=[]}),this}withHomeAndEnd(ct=!0){return this._homeAndEnd=ct,this}setActiveItem(ct){const It=this._activeItem;this.updateActiveItem(ct),this._activeItem!==It&&this.change.next(this._activeItemIndex)}onKeydown(ct){const It=ct.keyCode,ve=["altKey","ctrlKey","metaKey","shiftKey"].every(Ti=>!ct[Ti]||this._allowedModifierKeys.indexOf(Ti)>-1);switch(It){case s.Mf:return void this.tabOut.next();case s.JH:if(this._vertical&&ve){this.setNextItemActive();break}return;case s.LH:if(this._vertical&&ve){this.setPreviousItemActive();break}return;case s.SV:if(this._horizontal&&ve){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case s.oh:if(this._horizontal&&ve){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case s.Sd:if(this._homeAndEnd&&ve){this.setFirstItemActive();break}return;case s.uR:if(this._homeAndEnd&&ve){this.setLastItemActive();break}return;default:return void((ve||(0,s.Vb)(ct,"shiftKey"))&&(ct.key&&1===ct.key.length?this._letterKeyStream.next(ct.key.toLocaleUpperCase()):(It>=s.A&&It<=s.Z||It>=s.xE&&It<=s.aO)&&this._letterKeyStream.next(String.fromCharCode(It))))}this._pressedLetters=[],ct.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(ct){const It=this._getItemsArray(),te="number"==typeof ct?ct:It.indexOf(ct),ve=It[te];this._activeItem=null==ve?null:ve,this._activeItemIndex=te}_setActiveItemByDelta(ct){this._wrap?this._setActiveInWrapMode(ct):this._setActiveInDefaultMode(ct)}_setActiveInWrapMode(ct){const It=this._getItemsArray();for(let te=1;te<=It.length;te++){const ve=(this._activeItemIndex+ct*te+It.length)%It.length;if(!this._skipPredicateFn(It[ve]))return void this.setActiveItem(ve)}}_setActiveInDefaultMode(ct){this._setActiveItemByIndex(this._activeItemIndex+ct,ct)}_setActiveItemByIndex(ct,It){const te=this._getItemsArray();if(te[ct]){for(;this._skipPredicateFn(te[ct]);)if(!te[ct+=It])return;this.setActiveItem(ct)}}_getItemsArray(){return this._items instanceof p.n_E?this._items.toArray():this._items}}class Ht extends bt{setActiveItem(ct){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(ct),this.activeItem&&this.activeItem.setActiveStyles()}}class ce extends bt{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(ct){return this._origin=ct,this}setActiveItem(ct){super.setActiveItem(ct),this.activeItem&&this.activeItem.focus(this._origin)}}let de=(()=>{class Mt{constructor(It){this._platform=It}isDisabled(It){return It.hasAttribute("disabled")}isVisible(It){return function(Mt){return!!(Mt.offsetWidth||Mt.offsetHeight||"function"==typeof Mt.getClientRects&&Mt.getClientRects().length)}(It)&&"visible"===getComputedStyle(It).visibility}isTabbable(It){if(!this._platform.isBrowser)return!1;const te=function(Mt){try{return Mt.frameElement}catch(ct){return null}}(function(Mt){return Mt.ownerDocument&&Mt.ownerDocument.defaultView||window}(It));if(te&&(-1===_e(te)||!this.isVisible(te)))return!1;let ve=It.nodeName.toLowerCase(),Ti=_e(It);return It.hasAttribute("contenteditable")?-1!==Ti:!("iframe"===ve||"object"===ve||this._platform.WEBKIT&&this._platform.IOS&&!function(Mt){let ct=Mt.nodeName.toLowerCase(),It="input"===ct&&Mt.type;return"text"===It||"password"===It||"select"===ct||"textarea"===ct}(It))&&("audio"===ve?!!It.hasAttribute("controls")&&-1!==Ti:"video"===ve?-1!==Ti&&(null!==Ti||this._platform.FIREFOX||It.hasAttribute("controls")):It.tabIndex>=0)}isFocusable(It,te){return function(Mt){return!function(Mt){return function(Mt){return"input"==Mt.nodeName.toLowerCase()}(Mt)&&"hidden"==Mt.type}(Mt)&&(function(Mt){let ct=Mt.nodeName.toLowerCase();return"input"===ct||"select"===ct||"button"===ct||"textarea"===ct}(Mt)||function(Mt){return function(Mt){return"a"==Mt.nodeName.toLowerCase()}(Mt)&&Mt.hasAttribute("href")}(Mt)||Mt.hasAttribute("contenteditable")||Ft(Mt))}(It)&&!this.isDisabled(It)&&((null==te?void 0:te.ignoreVisibility)||this.isVisible(It))}}return Mt.\u0275fac=function(It){return new(It||Mt)(p.LFG(nt.t4))},Mt.\u0275prov=p.Yz7({token:Mt,factory:Mt.\u0275fac,providedIn:"root"}),Mt})();function Ft(Mt){if(!Mt.hasAttribute("tabindex")||void 0===Mt.tabIndex)return!1;let ct=Mt.getAttribute("tabindex");return!(!ct||isNaN(parseInt(ct,10)))}function _e(Mt){if(!Ft(Mt))return null;const ct=parseInt(Mt.getAttribute("tabindex")||"",10);return isNaN(ct)?-1:ct}class Pt{constructor(ct,It,te,ve,Ti=!1){this._element=ct,this._checker=It,this._ngZone=te,this._document=ve,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,Ti||this.attachAnchors()}get enabled(){return this._enabled}set enabled(ct){this._enabled=ct,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(ct,this._startAnchor),this._toggleAnchorTabIndex(ct,this._endAnchor))}destroy(){const ct=this._startAnchor,It=this._endAnchor;ct&&(ct.removeEventListener("focus",this.startAnchorListener),ct.remove()),It&&(It.removeEventListener("focus",this.endAnchorListener),It.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(ct){return new Promise(It=>{this._executeOnStable(()=>It(this.focusInitialElement(ct)))})}focusFirstTabbableElementWhenReady(ct){return new Promise(It=>{this._executeOnStable(()=>It(this.focusFirstTabbableElement(ct)))})}focusLastTabbableElementWhenReady(ct){return new Promise(It=>{this._executeOnStable(()=>It(this.focusLastTabbableElement(ct)))})}_getRegionBoundary(ct){const It=this._element.querySelectorAll(`[cdk-focus-region-${ct}], [cdkFocusRegion${ct}], [cdk-focus-${ct}]`);return"start"==ct?It.length?It[0]:this._getFirstTabbableElement(this._element):It.length?It[It.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(ct){const It=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(It){if(!this._checker.isFocusable(It)){const te=this._getFirstTabbableElement(It);return null==te||te.focus(ct),!!te}return It.focus(ct),!0}return this.focusFirstTabbableElement(ct)}focusFirstTabbableElement(ct){const It=this._getRegionBoundary("start");return It&&It.focus(ct),!!It}focusLastTabbableElement(ct){const It=this._getRegionBoundary("end");return It&&It.focus(ct),!!It}hasAttached(){return this._hasAttached}_getFirstTabbableElement(ct){if(this._checker.isFocusable(ct)&&this._checker.isTabbable(ct))return ct;const It=ct.children;for(let te=0;te<It.length;te++){const ve=It[te].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(It[te]):null;if(ve)return ve}return null}_getLastTabbableElement(ct){if(this._checker.isFocusable(ct)&&this._checker.isTabbable(ct))return ct;const It=ct.children;for(let te=It.length-1;te>=0;te--){const ve=It[te].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(It[te]):null;if(ve)return ve}return null}_createAnchor(){const ct=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,ct),ct.classList.add("cdk-visually-hidden"),ct.classList.add("cdk-focus-trap-anchor"),ct.setAttribute("aria-hidden","true"),ct}_toggleAnchorTabIndex(ct,It){ct?It.setAttribute("tabindex","0"):It.removeAttribute("tabindex")}toggleAnchors(ct){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(ct,this._startAnchor),this._toggleAnchorTabIndex(ct,this._endAnchor))}_executeOnStable(ct){this._ngZone.isStable?ct():this._ngZone.onStable.pipe((0,U.q)(1)).subscribe(ct)}}let he=(()=>{class Mt{constructor(It,te,ve){this._checker=It,this._ngZone=te,this._document=ve}create(It,te=!1){return new Pt(It,this._checker,this._ngZone,this._document,te)}}return Mt.\u0275fac=function(It){return new(It||Mt)(p.LFG(de),p.LFG(p.R0b),p.LFG(b.K0))},Mt.\u0275prov=p.Yz7({token:Mt,factory:Mt.\u0275fac,providedIn:"root"}),Mt})();function oe(Mt){return 0===Mt.offsetX&&0===Mt.offsetY}function re(Mt){const ct=Mt.touches&&Mt.touches[0]||Mt.changedTouches&&Mt.changedTouches[0];return!(!ct||-1!==ct.identifier||null!=ct.radiusX&&1!==ct.radiusX||null!=ct.radiusY&&1!==ct.radiusY)}const Et=new p.OlP("cdk-input-modality-detector-options"),kt={ignoreKeys:[s.zL,s.jx,s.b2,s.MW,s.JU]},Ae=(0,nt.i$)({passive:!0,capture:!0});let ci=(()=>{class Mt{constructor(It,te,ve,Ti){this._platform=It,this._mostRecentTarget=null,this._modality=new n.X(null),this._lastTouchMs=0,this._onKeydown=ki=>{var Zi,Sn;(null===(Sn=null===(Zi=this._options)||void 0===Zi?void 0:Zi.ignoreKeys)||void 0===Sn?void 0:Sn.some($e=>$e===ki.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,nt.sA)(ki))},this._onMousedown=ki=>{Date.now()-this._lastTouchMs<650||(this._modality.next(oe(ki)?"keyboard":"mouse"),this._mostRecentTarget=(0,nt.sA)(ki))},this._onTouchstart=ki=>{re(ki)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,nt.sA)(ki))},this._options=Object.assign(Object.assign({},kt),Ti),this.modalityDetected=this._modality.pipe((0,V.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,H.x)()),It.isBrowser&&te.runOutsideAngular(()=>{ve.addEventListener("keydown",this._onKeydown,Ae),ve.addEventListener("mousedown",this._onMousedown,Ae),ve.addEventListener("touchstart",this._onTouchstart,Ae)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ae),document.removeEventListener("mousedown",this._onMousedown,Ae),document.removeEventListener("touchstart",this._onTouchstart,Ae))}}return Mt.\u0275fac=function(It){return new(It||Mt)(p.LFG(nt.t4),p.LFG(p.R0b),p.LFG(b.K0),p.LFG(Et,8))},Mt.\u0275prov=p.Yz7({token:Mt,factory:Mt.\u0275fac,providedIn:"root"}),Mt})();const Ze=new p.OlP("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),Fi=new p.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let ui=(()=>{class Mt{constructor(It,te,ve,Ti){this._ngZone=te,this._defaultOptions=Ti,this._document=ve,this._liveElement=It||this._createLiveElement()}announce(It,...te){const ve=this._defaultOptions;let Ti,ki;return 1===te.length&&"number"==typeof te[0]?ki=te[0]:[Ti,ki]=te,this.clear(),clearTimeout(this._previousTimeout),Ti||(Ti=ve&&ve.politeness?ve.politeness:"polite"),null==ki&&ve&&(ki=ve.duration),this._liveElement.setAttribute("aria-live",Ti),this._ngZone.runOutsideAngular(()=>new Promise(Zi=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=It,Zi(),"number"==typeof ki&&(this._previousTimeout=setTimeout(()=>this.clear(),ki))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var It;clearTimeout(this._previousTimeout),null===(It=this._liveElement)||void 0===It||It.remove(),this._liveElement=null}_createLiveElement(){const It="cdk-live-announcer-element",te=this._document.getElementsByClassName(It),ve=this._document.createElement("div");for(let Ti=0;Ti<te.length;Ti++)te[Ti].remove();return ve.classList.add(It),ve.classList.add("cdk-visually-hidden"),ve.setAttribute("aria-atomic","true"),ve.setAttribute("aria-live","polite"),this._document.body.appendChild(ve),ve}}return Mt.\u0275fac=function(It){return new(It||Mt)(p.LFG(Ze,8),p.LFG(p.R0b),p.LFG(b.K0),p.LFG(Fi,8))},Mt.\u0275prov=p.Yz7({token:Mt,factory:Mt.\u0275fac,providedIn:"root"}),Mt})();const gi=new p.OlP("cdk-focus-monitor-default-options"),We=(0,nt.i$)({passive:!0,capture:!0});let ri=(()=>{class Mt{constructor(It,te,ve,Ti,ki){this._ngZone=It,this._platform=te,this._inputModalityDetector=ve,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new e.x,this._rootNodeFocusAndBlurListener=Zi=>{const Sn=(0,nt.sA)(Zi),$e="focus"===Zi.type?this._onFocus:this._onBlur;for(let Me=Sn;Me;Me=Me.parentElement)$e.call(this,Zi,Me)},this._document=Ti,this._detectionMode=(null==ki?void 0:ki.detectionMode)||0}monitor(It,te=!1){const ve=(0,pt.fI)(It);if(!this._platform.isBrowser||1!==ve.nodeType)return(0,o.of)(null);const Ti=(0,nt.kV)(ve)||this._getDocument(),ki=this._elementInfo.get(ve);if(ki)return te&&(ki.checkChildren=!0),ki.subject;const Zi={checkChildren:te,subject:new e.x,rootNode:Ti};return this._elementInfo.set(ve,Zi),this._registerGlobalListeners(Zi),Zi.subject}stopMonitoring(It){const te=(0,pt.fI)(It),ve=this._elementInfo.get(te);ve&&(ve.subject.complete(),this._setClasses(te),this._elementInfo.delete(te),this._removeGlobalListeners(ve))}focusVia(It,te,ve){const Ti=(0,pt.fI)(It);Ti===this._getDocument().activeElement?this._getClosestElementsInfo(Ti).forEach(([Zi,Sn])=>this._originChanged(Zi,te,Sn)):(this._setOrigin(te),"function"==typeof Ti.focus&&Ti.focus(ve))}ngOnDestroy(){this._elementInfo.forEach((It,te)=>this.stopMonitoring(te))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(It){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(It)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(It){return 1===this._detectionMode||!!(null==It?void 0:It.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(It,te){It.classList.toggle("cdk-focused",!!te),It.classList.toggle("cdk-touch-focused","touch"===te),It.classList.toggle("cdk-keyboard-focused","keyboard"===te),It.classList.toggle("cdk-mouse-focused","mouse"===te),It.classList.toggle("cdk-program-focused","program"===te)}_setOrigin(It,te=!1){this._ngZone.runOutsideAngular(()=>{this._origin=It,this._originFromTouchInteraction="touch"===It&&te,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(It,te){const ve=this._elementInfo.get(te),Ti=(0,nt.sA)(It);!ve||!ve.checkChildren&&te!==Ti||this._originChanged(te,this._getFocusOrigin(Ti),ve)}_onBlur(It,te){const ve=this._elementInfo.get(te);!ve||ve.checkChildren&&It.relatedTarget instanceof Node&&te.contains(It.relatedTarget)||(this._setClasses(te),this._emitOrigin(ve.subject,null))}_emitOrigin(It,te){this._ngZone.run(()=>It.next(te))}_registerGlobalListeners(It){if(!this._platform.isBrowser)return;const te=It.rootNode,ve=this._rootNodeFocusListenerCount.get(te)||0;ve||this._ngZone.runOutsideAngular(()=>{te.addEventListener("focus",this._rootNodeFocusAndBlurListener,We),te.addEventListener("blur",this._rootNodeFocusAndBlurListener,We)}),this._rootNodeFocusListenerCount.set(te,ve+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,$.R)(this._stopInputModalityDetector)).subscribe(Ti=>{this._setOrigin(Ti,!0)}))}_removeGlobalListeners(It){const te=It.rootNode;if(this._rootNodeFocusListenerCount.has(te)){const ve=this._rootNodeFocusListenerCount.get(te);ve>1?this._rootNodeFocusListenerCount.set(te,ve-1):(te.removeEventListener("focus",this._rootNodeFocusAndBlurListener,We),te.removeEventListener("blur",this._rootNodeFocusAndBlurListener,We),this._rootNodeFocusListenerCount.delete(te))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(It,te,ve){this._setClasses(It,te),this._emitOrigin(ve.subject,te),this._lastFocusOrigin=te}_getClosestElementsInfo(It){const te=[];return this._elementInfo.forEach((ve,Ti)=>{(Ti===It||ve.checkChildren&&Ti.contains(It))&&te.push([Ti,ve])}),te}}return Mt.\u0275fac=function(It){return new(It||Mt)(p.LFG(p.R0b),p.LFG(nt.t4),p.LFG(ci),p.LFG(b.K0,8),p.LFG(gi,8))},Mt.\u0275prov=p.Yz7({token:Mt,factory:Mt.\u0275fac,providedIn:"root"}),Mt})(),ue=(()=>{class Mt{constructor(It,te){this._elementRef=It,this._focusMonitor=te,this.cdkFocusChange=new p.vpe}ngAfterViewInit(){const It=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(It,1===It.nodeType&&It.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(te=>this.cdkFocusChange.emit(te))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return Mt.\u0275fac=function(It){return new(It||Mt)(p.Y36(p.SBq),p.Y36(ri))},Mt.\u0275dir=p.lG2({type:Mt,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),Mt})();const je="cdk-high-contrast-black-on-white",ti="cdk-high-contrast-white-on-black",Ri="cdk-high-contrast-active";let Pe=(()=>{class Mt{constructor(It,te){this._platform=It,this._document=te}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const It=this._document.createElement("div");It.style.backgroundColor="rgb(1,2,3)",It.style.position="absolute",this._document.body.appendChild(It);const te=this._document.defaultView||window,ve=te&&te.getComputedStyle?te.getComputedStyle(It):null,Ti=(ve&&ve.backgroundColor||"").replace(/ /g,"");switch(It.remove(),Ti){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const It=this._document.body.classList;It.remove(Ri),It.remove(je),It.remove(ti),this._hasCheckedHighContrastMode=!0;const te=this.getHighContrastMode();1===te?(It.add(Ri),It.add(je)):2===te&&(It.add(Ri),It.add(ti))}}}return Mt.\u0275fac=function(It){return new(It||Mt)(p.LFG(nt.t4),p.LFG(b.K0))},Mt.\u0275prov=p.Yz7({token:Mt,factory:Mt.\u0275fac,providedIn:"root"}),Mt})(),ie=(()=>{class Mt{constructor(It){It._applyBodyHighContrastModeCssClasses()}}return Mt.\u0275fac=function(It){return new(It||Mt)(p.LFG(Pe))},Mt.\u0275mod=p.oAB({type:Mt}),Mt.\u0275inj=p.cJS({imports:[[nt.ud,st.Q8]]}),Mt})()},50226:(k,B,f)=>{"use strict";f.d(B,{vT:()=>_,Is:()=>s});var b=f(5e3),p=f(69808);const e=new b.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,b.f3M)(p.K0)}}),n=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let s=(()=>{class w{constructor(U){if(this.value="ltr",this.change=new b.vpe,U){const H=U.documentElement?U.documentElement.dir:null;this.value=function(w){const M=(null==w?void 0:w.toLowerCase())||"";return"auto"===M&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?n.test(navigator.language)?"rtl":"ltr":"rtl"===M?"rtl":"ltr"}((U.body?U.body.dir:null)||H||"ltr")}}ngOnDestroy(){this.change.complete()}}return w.\u0275fac=function(U){return new(U||w)(b.LFG(e,8))},w.\u0275prov=b.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),_=(()=>{class w{}return w.\u0275fac=function(U){return new(U||w)},w.\u0275mod=b.oAB({type:w}),w.\u0275inj=b.cJS({}),w})()},63191:(k,B,f)=>{"use strict";f.d(B,{Eq:()=>n,Ig:()=>p,HM:()=>o,fI:()=>s,su:()=>e,du:()=>c});var b=f(5e3);function p(_){return null!=_&&"false"!=`${_}`}function e(_,w=0){return function(_){return!isNaN(parseFloat(_))&&!isNaN(Number(_))}(_)?Number(_):w}function n(_){return Array.isArray(_)?_:[_]}function o(_){return null==_?"":"string"==typeof _?_:`${_}px`}function s(_){return _ instanceof b.SBq?_.nativeElement:_}function c(_,w=/\s+/){const M=[];if(null!=_){const U=Array.isArray(_)?_:`${_}`.split(w);for(const V of U){const H=`${V}`.trim();H&&M.push(H)}}return M}},20449:(k,B,f)=>{"use strict";f.d(B,{Ov:()=>c,A8:()=>w,yy:()=>o,eX:()=>s,k:()=>M,Z9:()=>t});var b=f(77579),p=f(5e3);function t(U){return U&&"function"==typeof U.connect}class o{applyChanges(V,H,$,pt,nt){V.forEachOperation((st,Ct,xt)=>{let yt,ut;if(null==st.previousIndex){const tt=$(st,Ct,xt);yt=H.createEmbeddedView(tt.templateRef,tt.context,tt.index),ut=1}else null==xt?(H.remove(Ct),ut=3):(yt=H.get(Ct),H.move(yt,xt),ut=2);nt&&nt({context:null==yt?void 0:yt.context,operation:ut,record:st})})}detach(){}}class s{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(V,H,$,pt,nt){V.forEachOperation((st,Ct,xt)=>{let yt,ut;null==st.previousIndex?(yt=this._insertView(()=>$(st,Ct,xt),xt,H,pt(st)),ut=yt?1:0):null==xt?(this._detachAndCacheView(Ct,H),ut=3):(yt=this._moveView(Ct,xt,H,pt(st)),ut=2),nt&&nt({context:null==yt?void 0:yt.context,operation:ut,record:st})})}detach(){for(const V of this._viewCache)V.destroy();this._viewCache=[]}_insertView(V,H,$,pt){const nt=this._insertViewFromCache(H,$);if(nt)return void(nt.context.$implicit=pt);const st=V();return $.createEmbeddedView(st.templateRef,st.context,st.index)}_detachAndCacheView(V,H){const $=H.detach(V);this._maybeCacheView($,H)}_moveView(V,H,$,pt){const nt=$.get(V);return $.move(nt,H),nt.context.$implicit=pt,nt}_maybeCacheView(V,H){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(V);else{const $=H.indexOf(V);-1===$?V.destroy():H.remove($)}}_insertViewFromCache(V,H){const $=this._viewCache.pop();return $&&H.insert($,V),$||null}}class c{constructor(V=!1,H,$=!0){this._multiple=V,this._emitChanges=$,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new b.x,H&&H.length&&(V?H.forEach(pt=>this._markSelected(pt)):this._markSelected(H[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...V){this._verifyValueAssignment(V),V.forEach(H=>this._markSelected(H)),this._emitChangeEvent()}deselect(...V){this._verifyValueAssignment(V),V.forEach(H=>this._unmarkSelected(H)),this._emitChangeEvent()}toggle(V){this.isSelected(V)?this.deselect(V):this.select(V)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(V){return this._selection.has(V)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(V){this._multiple&&this.selected&&this._selected.sort(V)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(V){this.isSelected(V)||(this._multiple||this._unmarkAll(),this._selection.add(V),this._emitChanges&&this._selectedToEmit.push(V))}_unmarkSelected(V){this.isSelected(V)&&(this._selection.delete(V),this._emitChanges&&this._deselectedToEmit.push(V))}_unmarkAll(){this.isEmpty()||this._selection.forEach(V=>this._unmarkSelected(V))}_verifyValueAssignment(V){}}let w=(()=>{class U{constructor(){this._listeners=[]}notify(H,$){for(let pt of this._listeners)pt(H,$)}listen(H){return this._listeners.push(H),()=>{this._listeners=this._listeners.filter($=>H!==$)}}ngOnDestroy(){this._listeners=[]}}return U.\u0275fac=function(H){return new(H||U)},U.\u0275prov=p.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();const M=new p.OlP("_ViewRepeater")},91159:(k,B,f)=>{"use strict";f.d(B,{A:()=>Ke,zL:()=>c,ZH:()=>p,jx:()=>s,yY:()=>lt,JH:()=>xt,uR:()=>$,K5:()=>n,hY:()=>M,Sd:()=>pt,oh:()=>nt,b2:()=>Kr,MW:()=>li,aO:()=>ce,VM:()=>H,Ku:()=>V,SV:()=>Ct,JU:()=>o,L_:()=>U,Mf:()=>e,LH:()=>st,Z:()=>Ze,xE:()=>ot,Vb:()=>Zo});const p=8,e=9,n=13,o=16,s=17,c=18,M=27,U=32,V=33,H=34,$=35,pt=36,nt=37,st=38,Ct=39,xt=40,lt=46,ot=48,ce=57,Ke=65,Ze=90,li=91,Kr=224;function Zo(Hn,...vn){return vn.length?vn.some(Qo=>Hn[Qo]):Hn.altKey||Hn.shiftKey||Hn.ctrlKey||Hn.metaKey}},95113:(k,B,f)=>{"use strict";f.d(B,{Yg:()=>xt,u3:()=>ut});var b=f(5e3),p=f(63191),e=f(77579),t=f(39841),n=f(97272),o=f(79307),s=f(95698),c=f(35684),_=f(78372),w=f(54004),M=f(68675),U=f(82722),V=f(70925);const $=new Set;let pt,nt=(()=>{class tt{constructor(ot){this._platform=ot,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ct}matchMedia(ot){return(this._platform.WEBKIT||this._platform.BLINK)&&function(tt){if(!$.has(tt))try{pt||(pt=document.createElement("style"),pt.setAttribute("type","text/css"),document.head.appendChild(pt)),pt.sheet&&(pt.sheet.insertRule(`@media ${tt} {body{ }}`,0),$.add(tt))}catch(lt){console.error(lt)}}(ot),this._matchMedia(ot)}}return tt.\u0275fac=function(ot){return new(ot||tt)(b.LFG(V.t4))},tt.\u0275prov=b.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})();function Ct(tt){return{matches:"all"===tt||""===tt,media:tt,addListener:()=>{},removeListener:()=>{}}}let xt=(()=>{class tt{constructor(ot,Lt){this._mediaMatcher=ot,this._zone=Lt,this._queries=new Map,this._destroySubject=new e.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(ot){return yt((0,p.Eq)(ot)).some(at=>this._registerQuery(at).mql.matches)}observe(ot){const at=yt((0,p.Eq)(ot)).map(it=>this._registerQuery(it).observable);let dt=(0,t.a)(at);return dt=(0,n.z)(dt.pipe((0,s.q)(1)),dt.pipe((0,c.T)(1),(0,_.b)(0))),dt.pipe((0,w.U)(it=>{const rt={matches:!1,breakpoints:{}};return it.forEach(({matches:Gt,query:bt})=>{rt.matches=rt.matches||Gt,rt.breakpoints[bt]=Gt}),rt}))}_registerQuery(ot){if(this._queries.has(ot))return this._queries.get(ot);const Lt=this._mediaMatcher.matchMedia(ot),dt={observable:new o.y(it=>{const rt=Gt=>this._zone.run(()=>it.next(Gt));return Lt.addListener(rt),()=>{Lt.removeListener(rt)}}).pipe((0,M.O)(Lt),(0,w.U)(({matches:it})=>({query:ot,matches:it})),(0,U.R)(this._destroySubject)),mql:Lt};return this._queries.set(ot,dt),dt}}return tt.\u0275fac=function(ot){return new(ot||tt)(b.LFG(nt),b.LFG(b.R0b))},tt.\u0275prov=b.Yz7({token:tt,factory:tt.\u0275fac,providedIn:"root"}),tt})();function yt(tt){return tt.map(lt=>lt.split(",")).reduce((lt,ot)=>lt.concat(ot)).map(lt=>lt.trim())}const ut={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},17144:(k,B,f)=>{"use strict";f.d(B,{wD:()=>c,Q8:()=>_});var b=f(63191),p=f(5e3),e=f(79307),t=f(77579),n=f(78372);let o=(()=>{class w{create(U){return"undefined"==typeof MutationObserver?null:new MutationObserver(U)}}return w.\u0275fac=function(U){return new(U||w)},w.\u0275prov=p.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),s=(()=>{class w{constructor(U){this._mutationObserverFactory=U,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((U,V)=>this._cleanupObserver(V))}observe(U){const V=(0,b.fI)(U);return new e.y(H=>{const pt=this._observeElement(V).subscribe(H);return()=>{pt.unsubscribe(),this._unobserveElement(V)}})}_observeElement(U){if(this._observedElements.has(U))this._observedElements.get(U).count++;else{const V=new t.x,H=this._mutationObserverFactory.create($=>V.next($));H&&H.observe(U,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(U,{observer:H,stream:V,count:1})}return this._observedElements.get(U).stream}_unobserveElement(U){this._observedElements.has(U)&&(this._observedElements.get(U).count--,this._observedElements.get(U).count||this._cleanupObserver(U))}_cleanupObserver(U){if(this._observedElements.has(U)){const{observer:V,stream:H}=this._observedElements.get(U);V&&V.disconnect(),H.complete(),this._observedElements.delete(U)}}}return w.\u0275fac=function(U){return new(U||w)(p.LFG(o))},w.\u0275prov=p.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})(),c=(()=>{class w{constructor(U,V,H){this._contentObserver=U,this._elementRef=V,this._ngZone=H,this.event=new p.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(U){this._disabled=(0,b.Ig)(U),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(U){this._debounce=(0,b.su)(U),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const U=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?U.pipe((0,n.b)(this.debounce)):U).subscribe(this.event)})}_unsubscribe(){var U;null===(U=this._currentSubscription)||void 0===U||U.unsubscribe()}}return w.\u0275fac=function(U){return new(U||w)(p.Y36(s),p.Y36(p.SBq),p.Y36(p.R0b))},w.\u0275dir=p.lG2({type:w,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),w})(),_=(()=>{class w{}return w.\u0275fac=function(U){return new(U||w)},w.\u0275mod=p.oAB({type:w}),w.\u0275inj=p.cJS({providers:[o]}),w})()},91314:(k,B,f)=>{"use strict";f.d(B,{aV:()=>oi,X_:()=>ut,Xj:()=>it,U8:()=>he});var b=f(30495),p=f(69808),e=f(5e3),t=f(63191),n=f(70925),o=f(50226),s=f(99129),c=f(77579),_=f(50727),w=f(56451),M=f(95698),U=f(82722);const V=(0,n.Mq)();class H{constructor(jt,Yt){this._viewportRuler=jt,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=Yt}attach(){}enable(){if(this._canBeEnabled()){const jt=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=jt.style.left||"",this._previousHTMLStyles.top=jt.style.top||"",jt.style.left=(0,t.HM)(-this._previousScrollPosition.left),jt.style.top=(0,t.HM)(-this._previousScrollPosition.top),jt.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const jt=this._document.documentElement,ge=jt.style,$t=this._document.body.style,oe=ge.scrollBehavior||"",re=$t.scrollBehavior||"";this._isEnabled=!1,ge.left=this._previousHTMLStyles.left,ge.top=this._previousHTMLStyles.top,jt.classList.remove("cdk-global-scrollblock"),V&&(ge.scrollBehavior=$t.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),V&&(ge.scrollBehavior=oe,$t.scrollBehavior=re)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const Yt=this._document.body,ge=this._viewportRuler.getViewportSize();return Yt.scrollHeight>ge.height||Yt.scrollWidth>ge.width}}class pt{constructor(jt,Yt,ge,$t){this._scrollDispatcher=jt,this._ngZone=Yt,this._viewportRuler=ge,this._config=$t,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(jt){this._overlayRef=jt}enable(){if(this._scrollSubscription)return;const jt=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=jt.subscribe(()=>{const Yt=this._viewportRuler.getViewportScrollPosition().top;Math.abs(Yt-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=jt.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class nt{enable(){}disable(){}attach(){}}function st(le,jt){return jt.some(Yt=>le.bottom<Yt.top||le.top>Yt.bottom||le.right<Yt.left||le.left>Yt.right)}function Ct(le,jt){return jt.some(Yt=>le.top<Yt.top||le.bottom>Yt.bottom||le.left<Yt.left||le.right>Yt.right)}class xt{constructor(jt,Yt,ge,$t){this._scrollDispatcher=jt,this._viewportRuler=Yt,this._ngZone=ge,this._config=$t,this._scrollSubscription=null}attach(jt){this._overlayRef=jt}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const Yt=this._overlayRef.overlayElement.getBoundingClientRect(),{width:ge,height:$t}=this._viewportRuler.getViewportSize();st(Yt,[{width:ge,height:$t,bottom:$t,right:ge,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let yt=(()=>{class le{constructor(Yt,ge,$t,oe){this._scrollDispatcher=Yt,this._viewportRuler=ge,this._ngZone=$t,this.noop=()=>new nt,this.close=re=>new pt(this._scrollDispatcher,this._ngZone,this._viewportRuler,re),this.block=()=>new H(this._viewportRuler,this._document),this.reposition=re=>new xt(this._scrollDispatcher,this._viewportRuler,this._ngZone,re),this._document=oe}}return le.\u0275fac=function(Yt){return new(Yt||le)(e.LFG(b.mF),e.LFG(b.rL),e.LFG(e.R0b),e.LFG(p.K0))},le.\u0275prov=e.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})();class ut{constructor(jt){if(this.scrollStrategy=new nt,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,jt){const Yt=Object.keys(jt);for(const ge of Yt)void 0!==jt[ge]&&(this[ge]=jt[ge])}}}class ot{constructor(jt,Yt){this.connectionPair=jt,this.scrollableViewProperties=Yt}}class dt{constructor(jt,Yt,ge,$t,oe,re,Et,kt,we){this._portalOutlet=jt,this._host=Yt,this._pane=ge,this._config=$t,this._ngZone=oe,this._keyboardDispatcher=re,this._document=Et,this._location=kt,this._outsideClickDispatcher=we,this._backdropElement=null,this._backdropClick=new c.x,this._attachments=new c.x,this._detachments=new c.x,this._locationChanges=_.w0.EMPTY,this._backdropClickHandler=Ae=>this._backdropClick.next(Ae),this._keydownEvents=new c.x,this._outsidePointerEvents=new c.x,$t.scrollStrategy&&(this._scrollStrategy=$t.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=$t.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(jt){let Yt=this._portalOutlet.attach(jt);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,M.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),Yt}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const jt=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),jt}dispose(){var jt;const Yt=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(jt=this._host)||void 0===jt||jt.remove(),this._previousHostParent=this._pane=this._host=null,Yt&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(jt){jt!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=jt,this.hasAttached()&&(jt.attach(this),this.updatePosition()))}updateSize(jt){this._config=Object.assign(Object.assign({},this._config),jt),this._updateElementSize()}setDirection(jt){this._config=Object.assign(Object.assign({},this._config),{direction:jt}),this._updateElementDirection()}addPanelClass(jt){this._pane&&this._toggleClasses(this._pane,jt,!0)}removePanelClass(jt){this._pane&&this._toggleClasses(this._pane,jt,!1)}getDirection(){const jt=this._config.direction;return jt?"string"==typeof jt?jt:jt.value:"ltr"}updateScrollStrategy(jt){jt!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=jt,this.hasAttached()&&(jt.attach(this),jt.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const jt=this._pane.style;jt.width=(0,t.HM)(this._config.width),jt.height=(0,t.HM)(this._config.height),jt.minWidth=(0,t.HM)(this._config.minWidth),jt.minHeight=(0,t.HM)(this._config.minHeight),jt.maxWidth=(0,t.HM)(this._config.maxWidth),jt.maxHeight=(0,t.HM)(this._config.maxHeight)}_togglePointerEvents(jt){this._pane.style.pointerEvents=jt?"":"none"}_attachBackdrop(){const jt="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(jt)})}):this._backdropElement.classList.add(jt)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const jt=this._backdropElement;if(!jt)return;let Yt;const ge=()=>{jt&&(jt.removeEventListener("click",this._backdropClickHandler),jt.removeEventListener("transitionend",ge),this._disposeBackdrop(jt)),this._config.backdropClass&&this._toggleClasses(jt,this._config.backdropClass,!1),clearTimeout(Yt)};jt.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{jt.addEventListener("transitionend",ge)}),jt.style.pointerEvents="none",Yt=this._ngZone.runOutsideAngular(()=>setTimeout(ge,500))}_toggleClasses(jt,Yt,ge){const $t=(0,t.Eq)(Yt||[]).filter(oe=>!!oe);$t.length&&(ge?jt.classList.add(...$t):jt.classList.remove(...$t))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const jt=this._ngZone.onStable.pipe((0,U.R)((0,w.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),jt.unsubscribe())})})}_disposeScrollStrategy(){const jt=this._scrollStrategy;jt&&(jt.disable(),jt.detach&&jt.detach())}_disposeBackdrop(jt){jt&&(jt.remove(),this._backdropElement===jt&&(this._backdropElement=null))}}let it=(()=>{class le{constructor(Yt,ge){this._platform=ge,this._document=Yt}ngOnDestroy(){var Yt;null===(Yt=this._containerElement)||void 0===Yt||Yt.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const Yt="cdk-overlay-container";if(this._platform.isBrowser||(0,n.Oy)()){const $t=this._document.querySelectorAll(`.${Yt}[platform="server"], .${Yt}[platform="test"]`);for(let oe=0;oe<$t.length;oe++)$t[oe].remove()}const ge=this._document.createElement("div");ge.classList.add(Yt),(0,n.Oy)()?ge.setAttribute("platform","test"):this._platform.isBrowser||ge.setAttribute("platform","server"),this._document.body.appendChild(ge),this._containerElement=ge}}return le.\u0275fac=function(Yt){return new(Yt||le)(e.LFG(p.K0),e.LFG(n.t4))},le.\u0275prov=e.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})();const rt="cdk-overlay-connected-position-bounding-box",Gt=/([A-Za-z%]+)$/;class bt{constructor(jt,Yt,ge,$t,oe){this._viewportRuler=Yt,this._document=ge,this._platform=$t,this._overlayContainer=oe,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new c.x,this._resizeSubscription=_.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(jt)}get positions(){return this._preferredPositions}attach(jt){this._validatePositions(),jt.hostElement.classList.add(rt),this._overlayRef=jt,this._boundingBox=jt.hostElement,this._pane=jt.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const jt=this._originRect,Yt=this._overlayRect,ge=this._viewportRect,$t=[];let oe;for(let re of this._preferredPositions){let Et=this._getOriginPoint(jt,re),kt=this._getOverlayPoint(Et,Yt,re),we=this._getOverlayFit(kt,Yt,ge,re);if(we.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(re,Et);this._canFitWithFlexibleDimensions(we,kt,ge)?$t.push({position:re,origin:Et,overlayRect:Yt,boundingBoxRect:this._calculateBoundingBoxRect(Et,re)}):(!oe||oe.overlayFit.visibleArea<we.visibleArea)&&(oe={overlayFit:we,overlayPoint:kt,originPoint:Et,position:re,overlayRect:Yt})}if($t.length){let re=null,Et=-1;for(const kt of $t){const we=kt.boundingBoxRect.width*kt.boundingBoxRect.height*(kt.position.weight||1);we>Et&&(Et=we,re=kt)}return this._isPushed=!1,void this._applyPosition(re.position,re.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(oe.position,oe.originPoint);this._applyPosition(oe.position,oe.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ht(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(rt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const jt=this._lastPosition||this._preferredPositions[0],Yt=this._getOriginPoint(this._originRect,jt);this._applyPosition(jt,Yt)}}withScrollableContainers(jt){return this._scrollables=jt,this}withPositions(jt){return this._preferredPositions=jt,-1===jt.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(jt){return this._viewportMargin=jt,this}withFlexibleDimensions(jt=!0){return this._hasFlexibleDimensions=jt,this}withGrowAfterOpen(jt=!0){return this._growAfterOpen=jt,this}withPush(jt=!0){return this._canPush=jt,this}withLockedPosition(jt=!0){return this._positionLocked=jt,this}setOrigin(jt){return this._origin=jt,this}withDefaultOffsetX(jt){return this._offsetX=jt,this}withDefaultOffsetY(jt){return this._offsetY=jt,this}withTransformOriginOn(jt){return this._transformOriginSelector=jt,this}_getOriginPoint(jt,Yt){let ge,$t;if("center"==Yt.originX)ge=jt.left+jt.width/2;else{const oe=this._isRtl()?jt.right:jt.left,re=this._isRtl()?jt.left:jt.right;ge="start"==Yt.originX?oe:re}return $t="center"==Yt.originY?jt.top+jt.height/2:"top"==Yt.originY?jt.top:jt.bottom,{x:ge,y:$t}}_getOverlayPoint(jt,Yt,ge){let $t,oe;return $t="center"==ge.overlayX?-Yt.width/2:"start"===ge.overlayX?this._isRtl()?-Yt.width:0:this._isRtl()?0:-Yt.width,oe="center"==ge.overlayY?-Yt.height/2:"top"==ge.overlayY?0:-Yt.height,{x:jt.x+$t,y:jt.y+oe}}_getOverlayFit(jt,Yt,ge,$t){const oe=Ye(Yt);let{x:re,y:Et}=jt,kt=this._getOffset($t,"x"),we=this._getOffset($t,"y");kt&&(re+=kt),we&&(Et+=we);let Ze=0-Et,li=Et+oe.height-ge.height,Fi=this._subtractOverflows(oe.width,0-re,re+oe.width-ge.width),ui=this._subtractOverflows(oe.height,Ze,li),Ei=Fi*ui;return{visibleArea:Ei,isCompletelyWithinViewport:oe.width*oe.height===Ei,fitsInViewportVertically:ui===oe.height,fitsInViewportHorizontally:Fi==oe.width}}_canFitWithFlexibleDimensions(jt,Yt,ge){if(this._hasFlexibleDimensions){const $t=ge.bottom-Yt.y,oe=ge.right-Yt.x,re=ce(this._overlayRef.getConfig().minHeight),Et=ce(this._overlayRef.getConfig().minWidth),we=jt.fitsInViewportHorizontally||null!=Et&&Et<=oe;return(jt.fitsInViewportVertically||null!=re&&re<=$t)&&we}return!1}_pushOverlayOnScreen(jt,Yt,ge){if(this._previousPushAmount&&this._positionLocked)return{x:jt.x+this._previousPushAmount.x,y:jt.y+this._previousPushAmount.y};const $t=Ye(Yt),oe=this._viewportRect,re=Math.max(jt.x+$t.width-oe.width,0),Et=Math.max(jt.y+$t.height-oe.height,0),kt=Math.max(oe.top-ge.top-jt.y,0),we=Math.max(oe.left-ge.left-jt.x,0);let Ae=0,ci=0;return Ae=$t.width<=oe.width?we||-re:jt.x<this._viewportMargin?oe.left-ge.left-jt.x:0,ci=$t.height<=oe.height?kt||-Et:jt.y<this._viewportMargin?oe.top-ge.top-jt.y:0,this._previousPushAmount={x:Ae,y:ci},{x:jt.x+Ae,y:jt.y+ci}}_applyPosition(jt,Yt){if(this._setTransformOrigin(jt),this._setOverlayElementStyles(Yt,jt),this._setBoundingBoxStyles(Yt,jt),jt.panelClass&&this._addPanelClasses(jt.panelClass),this._lastPosition=jt,this._positionChanges.observers.length){const ge=this._getScrollVisibility(),$t=new ot(jt,ge);this._positionChanges.next($t)}this._isInitialRender=!1}_setTransformOrigin(jt){if(!this._transformOriginSelector)return;const Yt=this._boundingBox.querySelectorAll(this._transformOriginSelector);let ge,$t=jt.overlayY;ge="center"===jt.overlayX?"center":this._isRtl()?"start"===jt.overlayX?"right":"left":"start"===jt.overlayX?"left":"right";for(let oe=0;oe<Yt.length;oe++)Yt[oe].style.transformOrigin=`${ge} ${$t}`}_calculateBoundingBoxRect(jt,Yt){const ge=this._viewportRect,$t=this._isRtl();let oe,re,Et,Ae,ci,Ze;if("top"===Yt.overlayY)re=jt.y,oe=ge.height-re+this._viewportMargin;else if("bottom"===Yt.overlayY)Et=ge.height-jt.y+2*this._viewportMargin,oe=ge.height-Et+this._viewportMargin;else{const li=Math.min(ge.bottom-jt.y+ge.top,jt.y),Fi=this._lastBoundingBoxSize.height;oe=2*li,re=jt.y-li,oe>Fi&&!this._isInitialRender&&!this._growAfterOpen&&(re=jt.y-Fi/2)}if("end"===Yt.overlayX&&!$t||"start"===Yt.overlayX&&$t)Ze=ge.width-jt.x+this._viewportMargin,Ae=jt.x-this._viewportMargin;else if("start"===Yt.overlayX&&!$t||"end"===Yt.overlayX&&$t)ci=jt.x,Ae=ge.right-jt.x;else{const li=Math.min(ge.right-jt.x+ge.left,jt.x),Fi=this._lastBoundingBoxSize.width;Ae=2*li,ci=jt.x-li,Ae>Fi&&!this._isInitialRender&&!this._growAfterOpen&&(ci=jt.x-Fi/2)}return{top:re,left:ci,bottom:Et,right:Ze,width:Ae,height:oe}}_setBoundingBoxStyles(jt,Yt){const ge=this._calculateBoundingBoxRect(jt,Yt);!this._isInitialRender&&!this._growAfterOpen&&(ge.height=Math.min(ge.height,this._lastBoundingBoxSize.height),ge.width=Math.min(ge.width,this._lastBoundingBoxSize.width));const $t={};if(this._hasExactPosition())$t.top=$t.left="0",$t.bottom=$t.right=$t.maxHeight=$t.maxWidth="",$t.width=$t.height="100%";else{const oe=this._overlayRef.getConfig().maxHeight,re=this._overlayRef.getConfig().maxWidth;$t.height=(0,t.HM)(ge.height),$t.top=(0,t.HM)(ge.top),$t.bottom=(0,t.HM)(ge.bottom),$t.width=(0,t.HM)(ge.width),$t.left=(0,t.HM)(ge.left),$t.right=(0,t.HM)(ge.right),$t.alignItems="center"===Yt.overlayX?"center":"end"===Yt.overlayX?"flex-end":"flex-start",$t.justifyContent="center"===Yt.overlayY?"center":"bottom"===Yt.overlayY?"flex-end":"flex-start",oe&&($t.maxHeight=(0,t.HM)(oe)),re&&($t.maxWidth=(0,t.HM)(re))}this._lastBoundingBoxSize=ge,Ht(this._boundingBox.style,$t)}_resetBoundingBoxStyles(){Ht(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ht(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(jt,Yt){const ge={},$t=this._hasExactPosition(),oe=this._hasFlexibleDimensions,re=this._overlayRef.getConfig();if($t){const Ae=this._viewportRuler.getViewportScrollPosition();Ht(ge,this._getExactOverlayY(Yt,jt,Ae)),Ht(ge,this._getExactOverlayX(Yt,jt,Ae))}else ge.position="static";let Et="",kt=this._getOffset(Yt,"x"),we=this._getOffset(Yt,"y");kt&&(Et+=`translateX(${kt}px) `),we&&(Et+=`translateY(${we}px)`),ge.transform=Et.trim(),re.maxHeight&&($t?ge.maxHeight=(0,t.HM)(re.maxHeight):oe&&(ge.maxHeight="")),re.maxWidth&&($t?ge.maxWidth=(0,t.HM)(re.maxWidth):oe&&(ge.maxWidth="")),Ht(this._pane.style,ge)}_getExactOverlayY(jt,Yt,ge){let $t={top:"",bottom:""},oe=this._getOverlayPoint(Yt,this._overlayRect,jt);this._isPushed&&(oe=this._pushOverlayOnScreen(oe,this._overlayRect,ge));let re=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return oe.y-=re,"bottom"===jt.overlayY?$t.bottom=this._document.documentElement.clientHeight-(oe.y+this._overlayRect.height)+"px":$t.top=(0,t.HM)(oe.y),$t}_getExactOverlayX(jt,Yt,ge){let re,$t={left:"",right:""},oe=this._getOverlayPoint(Yt,this._overlayRect,jt);return this._isPushed&&(oe=this._pushOverlayOnScreen(oe,this._overlayRect,ge)),re=this._isRtl()?"end"===jt.overlayX?"left":"right":"end"===jt.overlayX?"right":"left","right"===re?$t.right=this._document.documentElement.clientWidth-(oe.x+this._overlayRect.width)+"px":$t.left=(0,t.HM)(oe.x),$t}_getScrollVisibility(){const jt=this._getOriginRect(),Yt=this._pane.getBoundingClientRect(),ge=this._scrollables.map($t=>$t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ct(jt,ge),isOriginOutsideView:st(jt,ge),isOverlayClipped:Ct(Yt,ge),isOverlayOutsideView:st(Yt,ge)}}_subtractOverflows(jt,...Yt){return Yt.reduce((ge,$t)=>ge-Math.max($t,0),jt)}_getNarrowedViewportRect(){const jt=this._document.documentElement.clientWidth,Yt=this._document.documentElement.clientHeight,ge=this._viewportRuler.getViewportScrollPosition();return{top:ge.top+this._viewportMargin,left:ge.left+this._viewportMargin,right:ge.left+jt-this._viewportMargin,bottom:ge.top+Yt-this._viewportMargin,width:jt-2*this._viewportMargin,height:Yt-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(jt,Yt){return"x"===Yt?null==jt.offsetX?this._offsetX:jt.offsetX:null==jt.offsetY?this._offsetY:jt.offsetY}_validatePositions(){}_addPanelClasses(jt){this._pane&&(0,t.Eq)(jt).forEach(Yt=>{""!==Yt&&-1===this._appliedPanelClasses.indexOf(Yt)&&(this._appliedPanelClasses.push(Yt),this._pane.classList.add(Yt))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(jt=>{this._pane.classList.remove(jt)}),this._appliedPanelClasses=[])}_getOriginRect(){const jt=this._origin;if(jt instanceof e.SBq)return jt.nativeElement.getBoundingClientRect();if(jt instanceof Element)return jt.getBoundingClientRect();const Yt=jt.width||0,ge=jt.height||0;return{top:jt.y,bottom:jt.y+ge,left:jt.x,right:jt.x+Yt,height:ge,width:Yt}}}function Ht(le,jt){for(let Yt in jt)jt.hasOwnProperty(Yt)&&(le[Yt]=jt[Yt]);return le}function ce(le){if("number"!=typeof le&&null!=le){const[jt,Yt]=le.split(Gt);return Yt&&"px"!==Yt?null:parseFloat(jt)}return le||null}function Ye(le){return{top:Math.floor(le.top),right:Math.floor(le.right),bottom:Math.floor(le.bottom),left:Math.floor(le.left),width:Math.floor(le.width),height:Math.floor(le.height)}}const de="cdk-global-overlay-wrapper";class Be{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(jt){const Yt=jt.getConfig();this._overlayRef=jt,this._width&&!Yt.width&&jt.updateSize({width:this._width}),this._height&&!Yt.height&&jt.updateSize({height:this._height}),jt.hostElement.classList.add(de),this._isDisposed=!1}top(jt=""){return this._bottomOffset="",this._topOffset=jt,this._alignItems="flex-start",this}left(jt=""){return this._rightOffset="",this._leftOffset=jt,this._justifyContent="flex-start",this}bottom(jt=""){return this._topOffset="",this._bottomOffset=jt,this._alignItems="flex-end",this}right(jt=""){return this._leftOffset="",this._rightOffset=jt,this._justifyContent="flex-end",this}width(jt=""){return this._overlayRef?this._overlayRef.updateSize({width:jt}):this._width=jt,this}height(jt=""){return this._overlayRef?this._overlayRef.updateSize({height:jt}):this._height=jt,this}centerHorizontally(jt=""){return this.left(jt),this._justifyContent="center",this}centerVertically(jt=""){return this.top(jt),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const jt=this._overlayRef.overlayElement.style,Yt=this._overlayRef.hostElement.style,ge=this._overlayRef.getConfig(),{width:$t,height:oe,maxWidth:re,maxHeight:Et}=ge,kt=!("100%"!==$t&&"100vw"!==$t||re&&"100%"!==re&&"100vw"!==re),we=!("100%"!==oe&&"100vh"!==oe||Et&&"100%"!==Et&&"100vh"!==Et);jt.position=this._cssPosition,jt.marginLeft=kt?"0":this._leftOffset,jt.marginTop=we?"0":this._topOffset,jt.marginBottom=this._bottomOffset,jt.marginRight=this._rightOffset,kt?Yt.justifyContent="flex-start":"center"===this._justifyContent?Yt.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?Yt.justifyContent="flex-end":"flex-end"===this._justifyContent&&(Yt.justifyContent="flex-start"):Yt.justifyContent=this._justifyContent,Yt.alignItems=we?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const jt=this._overlayRef.overlayElement.style,Yt=this._overlayRef.hostElement,ge=Yt.style;Yt.classList.remove(de),ge.justifyContent=ge.alignItems=jt.marginTop=jt.marginBottom=jt.marginLeft=jt.marginRight=jt.position="",this._overlayRef=null,this._isDisposed=!0}}let He=(()=>{class le{constructor(Yt,ge,$t,oe){this._viewportRuler=Yt,this._document=ge,this._platform=$t,this._overlayContainer=oe}global(){return new Be}flexibleConnectedTo(Yt){return new bt(Yt,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return le.\u0275fac=function(Yt){return new(Yt||le)(e.LFG(b.rL),e.LFG(p.K0),e.LFG(n.t4),e.LFG(it))},le.\u0275prov=e.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})(),Ke=(()=>{class le{constructor(Yt){this._attachedOverlays=[],this._document=Yt}ngOnDestroy(){this.detach()}add(Yt){this.remove(Yt),this._attachedOverlays.push(Yt)}remove(Yt){const ge=this._attachedOverlays.indexOf(Yt);ge>-1&&this._attachedOverlays.splice(ge,1),0===this._attachedOverlays.length&&this.detach()}}return le.\u0275fac=function(Yt){return new(Yt||le)(e.LFG(p.K0))},le.\u0275prov=e.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})(),vi=(()=>{class le extends Ke{constructor(Yt){super(Yt),this._keydownListener=ge=>{const $t=this._attachedOverlays;for(let oe=$t.length-1;oe>-1;oe--)if($t[oe]._keydownEvents.observers.length>0){$t[oe]._keydownEvents.next(ge);break}}}add(Yt){super.add(Yt),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return le.\u0275fac=function(Yt){return new(Yt||le)(e.LFG(p.K0))},le.\u0275prov=e.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})(),qe=(()=>{class le extends Ke{constructor(Yt,ge){super(Yt),this._platform=ge,this._cursorStyleIsSet=!1,this._pointerDownListener=$t=>{this._pointerDownEventTarget=(0,n.sA)($t)},this._clickListener=$t=>{const oe=(0,n.sA)($t),re="click"===$t.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:oe;this._pointerDownEventTarget=null;const Et=this._attachedOverlays.slice();for(let kt=Et.length-1;kt>-1;kt--){const we=Et[kt];if(!(we._outsidePointerEvents.observers.length<1)&&we.hasAttached()){if(we.overlayElement.contains(oe)||we.overlayElement.contains(re))break;we._outsidePointerEvents.next($t)}}}}add(Yt){if(super.add(Yt),!this._isAttached){const ge=this._document.body;ge.addEventListener("pointerdown",this._pointerDownListener,!0),ge.addEventListener("click",this._clickListener,!0),ge.addEventListener("auxclick",this._clickListener,!0),ge.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=ge.style.cursor,ge.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const Yt=this._document.body;Yt.removeEventListener("pointerdown",this._pointerDownListener,!0),Yt.removeEventListener("click",this._clickListener,!0),Yt.removeEventListener("auxclick",this._clickListener,!0),Yt.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(Yt.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return le.\u0275fac=function(Yt){return new(Yt||le)(e.LFG(p.K0),e.LFG(n.t4))},le.\u0275prov=e.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})(),Ne=0,oi=(()=>{class le{constructor(Yt,ge,$t,oe,re,Et,kt,we,Ae,ci,Ze){this.scrollStrategies=Yt,this._overlayContainer=ge,this._componentFactoryResolver=$t,this._positionBuilder=oe,this._keyboardDispatcher=re,this._injector=Et,this._ngZone=kt,this._document=we,this._directionality=Ae,this._location=ci,this._outsideClickDispatcher=Ze}create(Yt){const ge=this._createHostElement(),$t=this._createPaneElement(ge),oe=this._createPortalOutlet($t),re=new ut(Yt);return re.direction=re.direction||this._directionality.value,new dt(oe,ge,$t,re,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(Yt){const ge=this._document.createElement("div");return ge.id="cdk-overlay-"+Ne++,ge.classList.add("cdk-overlay-pane"),Yt.appendChild(ge),ge}_createHostElement(){const Yt=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(Yt),Yt}_createPortalOutlet(Yt){return this._appRef||(this._appRef=this._injector.get(e.z2F)),new s.u0(Yt,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return le.\u0275fac=function(Yt){return new(Yt||le)(e.LFG(yt),e.LFG(it),e.LFG(e._Vd),e.LFG(He),e.LFG(vi),e.LFG(e.zs3),e.LFG(e.R0b),e.LFG(p.K0),e.LFG(o.Is),e.LFG(p.Ye),e.LFG(qe))},le.\u0275prov=e.Yz7({token:le,factory:le.\u0275fac}),le})();const Pt={provide:new e.OlP("cdk-connected-overlay-scroll-strategy"),deps:[oi],useFactory:function(le){return()=>le.scrollStrategies.reposition()}};let he=(()=>{class le{}return le.\u0275fac=function(Yt){return new(Yt||le)},le.\u0275mod=e.oAB({type:le}),le.\u0275inj=e.cJS({providers:[oi,Pt],imports:[[o.vT,s.eL,b.Cl],b.Cl]}),le})()},70925:(k,B,f)=>{"use strict";f.d(B,{t4:()=>t,ud:()=>n,sA:()=>xt,ht:()=>Ct,kV:()=>st,Oy:()=>yt,_i:()=>$,qK:()=>c,i$:()=>M,Mq:()=>H});var b=f(5e3),p=f(69808);let e;try{e="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(ut){e=!1}let o,t=(()=>{class ut{constructor(lt){this._platformId=lt,this.isBrowser=this._platformId?(0,p.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!e)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return ut.\u0275fac=function(lt){return new(lt||ut)(b.LFG(b.Lbi))},ut.\u0275prov=b.Yz7({token:ut,factory:ut.\u0275fac,providedIn:"root"}),ut})(),n=(()=>{class ut{}return ut.\u0275fac=function(lt){return new(lt||ut)},ut.\u0275mod=b.oAB({type:ut}),ut.\u0275inj=b.cJS({}),ut})();const s=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function c(){if(o)return o;if("object"!=typeof document||!document)return o=new Set(s),o;let ut=document.createElement("input");return o=new Set(s.filter(tt=>(ut.setAttribute("type",tt),ut.type===tt))),o}let _,U,V,pt;function M(ut){return function(){if(null==_&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>_=!0}))}finally{_=_||!1}return _}()?ut:!!ut.capture}function H(){if(null==V){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return V=!1,V;if("scrollBehavior"in document.documentElement.style)V=!0;else{const ut=Element.prototype.scrollTo;V=!!ut&&!/\{\s*\[native code\]\s*\}/.test(ut.toString())}}return V}function $(){if("object"!=typeof document||!document)return 0;if(null==U){const ut=document.createElement("div"),tt=ut.style;ut.dir="rtl",tt.width="1px",tt.overflow="auto",tt.visibility="hidden",tt.pointerEvents="none",tt.position="absolute";const lt=document.createElement("div"),ot=lt.style;ot.width="2px",ot.height="1px",ut.appendChild(lt),document.body.appendChild(ut),U=0,0===ut.scrollLeft&&(ut.scrollLeft=1,U=0===ut.scrollLeft?1:2),ut.remove()}return U}function st(ut){if(function(){if(null==pt){const ut="undefined"!=typeof document?document.head:null;pt=!(!ut||!ut.createShadowRoot&&!ut.attachShadow)}return pt}()){const tt=ut.getRootNode?ut.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&tt instanceof ShadowRoot)return tt}return null}function Ct(){let ut="undefined"!=typeof document&&document?document.activeElement:null;for(;ut&&ut.shadowRoot;){const tt=ut.shadowRoot.activeElement;if(tt===ut)break;ut=tt}return ut}function xt(ut){return ut.composedPath?ut.composedPath()[0]:ut.target}function yt(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}},99129:(k,B,f)=>{"use strict";f.d(B,{en:()=>V,ig:()=>nt,Pl:()=>Ct,C5:()=>w,u0:()=>$,eL:()=>yt,UE:()=>M});var b=f(5e3),p=f(69808);class _{attach(lt){return this._attachedHost=lt,lt.attach(this)}detach(){let lt=this._attachedHost;null!=lt&&(this._attachedHost=null,lt.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(lt){this._attachedHost=lt}}class w extends _{constructor(lt,ot,Lt,at){super(),this.component=lt,this.viewContainerRef=ot,this.injector=Lt,this.componentFactoryResolver=at}}class M extends _{constructor(lt,ot,Lt){super(),this.templateRef=lt,this.viewContainerRef=ot,this.context=Lt}get origin(){return this.templateRef.elementRef}attach(lt,ot=this.context){return this.context=ot,super.attach(lt)}detach(){return this.context=void 0,super.detach()}}class U extends _{constructor(lt){super(),this.element=lt instanceof b.SBq?lt.nativeElement:lt}}class V{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(lt){return lt instanceof w?(this._attachedPortal=lt,this.attachComponentPortal(lt)):lt instanceof M?(this._attachedPortal=lt,this.attachTemplatePortal(lt)):this.attachDomPortal&&lt instanceof U?(this._attachedPortal=lt,this.attachDomPortal(lt)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(lt){this._disposeFn=lt}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class $ extends V{constructor(lt,ot,Lt,at,dt){super(),this.outletElement=lt,this._componentFactoryResolver=ot,this._appRef=Lt,this._defaultInjector=at,this.attachDomPortal=it=>{const rt=it.element,Gt=this._document.createComment("dom-portal");rt.parentNode.insertBefore(Gt,rt),this.outletElement.appendChild(rt),this._attachedPortal=it,super.setDisposeFn(()=>{Gt.parentNode&&Gt.parentNode.replaceChild(rt,Gt)})},this._document=dt}attachComponentPortal(lt){const Lt=(lt.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(lt.component);let at;return lt.viewContainerRef?(at=lt.viewContainerRef.createComponent(Lt,lt.viewContainerRef.length,lt.injector||lt.viewContainerRef.injector),this.setDisposeFn(()=>at.destroy())):(at=Lt.create(lt.injector||this._defaultInjector),this._appRef.attachView(at.hostView),this.setDisposeFn(()=>{this._appRef.detachView(at.hostView),at.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(at)),this._attachedPortal=lt,at}attachTemplatePortal(lt){let ot=lt.viewContainerRef,Lt=ot.createEmbeddedView(lt.templateRef,lt.context);return Lt.rootNodes.forEach(at=>this.outletElement.appendChild(at)),Lt.detectChanges(),this.setDisposeFn(()=>{let at=ot.indexOf(Lt);-1!==at&&ot.remove(at)}),this._attachedPortal=lt,Lt}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(lt){return lt.hostView.rootNodes[0]}}let nt=(()=>{class tt extends M{constructor(ot,Lt){super(ot,Lt)}}return tt.\u0275fac=function(ot){return new(ot||tt)(b.Y36(b.Rgc),b.Y36(b.s_b))},tt.\u0275dir=b.lG2({type:tt,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[b.qOj]}),tt})(),Ct=(()=>{class tt extends V{constructor(ot,Lt,at){super(),this._componentFactoryResolver=ot,this._viewContainerRef=Lt,this._isInitialized=!1,this.attached=new b.vpe,this.attachDomPortal=dt=>{const it=dt.element,rt=this._document.createComment("dom-portal");dt.setAttachedHost(this),it.parentNode.insertBefore(rt,it),this._getRootNode().appendChild(it),this._attachedPortal=dt,super.setDisposeFn(()=>{rt.parentNode&&rt.parentNode.replaceChild(it,rt)})},this._document=at}get portal(){return this._attachedPortal}set portal(ot){this.hasAttached()&&!ot&&!this._isInitialized||(this.hasAttached()&&super.detach(),ot&&super.attach(ot),this._attachedPortal=ot)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(ot){ot.setAttachedHost(this);const Lt=null!=ot.viewContainerRef?ot.viewContainerRef:this._viewContainerRef,dt=(ot.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(ot.component),it=Lt.createComponent(dt,Lt.length,ot.injector||Lt.injector);return Lt!==this._viewContainerRef&&this._getRootNode().appendChild(it.hostView.rootNodes[0]),super.setDisposeFn(()=>it.destroy()),this._attachedPortal=ot,this._attachedRef=it,this.attached.emit(it),it}attachTemplatePortal(ot){ot.setAttachedHost(this);const Lt=this._viewContainerRef.createEmbeddedView(ot.templateRef,ot.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=ot,this._attachedRef=Lt,this.attached.emit(Lt),Lt}_getRootNode(){const ot=this._viewContainerRef.element.nativeElement;return ot.nodeType===ot.ELEMENT_NODE?ot:ot.parentNode}}return tt.\u0275fac=function(ot){return new(ot||tt)(b.Y36(b._Vd),b.Y36(b.s_b),b.Y36(p.K0))},tt.\u0275dir=b.lG2({type:tt,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[b.qOj]}),tt})(),yt=(()=>{class tt{}return tt.\u0275fac=function(ot){return new(ot||tt)},tt.\u0275mod=b.oAB({type:tt}),tt.\u0275inj=b.cJS({}),tt})()},30495:(k,B,f)=>{"use strict";f.d(B,{PQ:()=>de,ZD:()=>Ft,mF:()=>Ye,Cl:()=>_e,rL:()=>He});var b=f(63191),p=f(5e3),e=f(84408),t=f(50727);const n={schedule(Xt){let Jt=requestAnimationFrame,Rt=cancelAnimationFrame;const{delegate:Pt}=n;Pt&&(Jt=Pt.requestAnimationFrame,Rt=Pt.cancelAnimationFrame);const he=Jt(ze=>{Rt=void 0,Xt(ze)});return new t.w0(()=>null==Rt?void 0:Rt(he))},requestAnimationFrame(...Xt){const{delegate:Jt}=n;return((null==Jt?void 0:Jt.requestAnimationFrame)||requestAnimationFrame)(...Xt)},cancelAnimationFrame(...Xt){const{delegate:Jt}=n;return((null==Jt?void 0:Jt.cancelAnimationFrame)||cancelAnimationFrame)(...Xt)},delegate:void 0};var s=f(97565);new class extends s.v{flush(Jt){this._active=!0,this._scheduled=void 0;const{actions:Rt}=this;let Pt,he=-1;Jt=Jt||Rt.shift();const ze=Rt.length;do{if(Pt=Jt.execute(Jt.state,Jt.delay))break}while(++he<ze&&(Jt=Rt.shift()));if(this._active=!1,Pt){for(;++he<ze&&(Jt=Rt.shift());)Jt.unsubscribe();throw Pt}}}(class extends e.o{constructor(Jt,Rt){super(Jt,Rt),this.scheduler=Jt,this.work=Rt}requestAsyncId(Jt,Rt,Pt=0){return null!==Pt&&Pt>0?super.requestAsyncId(Jt,Rt,Pt):(Jt.actions.push(this),Jt._scheduled||(Jt._scheduled=n.requestAnimationFrame(()=>Jt.flush(void 0))))}recycleAsyncId(Jt,Rt,Pt=0){if(null!=Pt&&Pt>0||null==Pt&&this.delay>0)return super.recycleAsyncId(Jt,Rt,Pt);0===Jt.actions.length&&(n.cancelAnimationFrame(Rt),Jt._scheduled=void 0)}});var M=f(77579),U=f(39646),V=f(79307),H=f(54968),pt=(f(53101),f(34986)),nt=f(54482),st=f(38421),Ct=f(25403),yt=f(5963);function ut(Xt,Jt=pt.P){return function(Xt){return(0,nt.e)((Jt,Rt)=>{let Pt=!1,he=null,ze=null,le=!1;const jt=()=>{if(null==ze||ze.unsubscribe(),ze=null,Pt){Pt=!1;const ge=he;he=null,Rt.next(ge)}le&&Rt.complete()},Yt=()=>{ze=null,le&&Rt.complete()};Jt.subscribe(new Ct.Q(Rt,ge=>{Pt=!0,he=ge,ze||(0,st.Xf)(Xt()).subscribe(ze=new Ct.Q(Rt,jt,Yt))},()=>{le=!0,(!Pt||!ze||ze.closed)&&Rt.complete()}))})}(()=>(0,yt.H)(Xt,Jt))}var tt=f(39300),lt=f(82722),ot=f(69808),Lt=f(70925),at=f(50226);let Ye=(()=>{class Xt{constructor(Rt,Pt,he){this._ngZone=Rt,this._platform=Pt,this._scrolled=new M.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=he}register(Rt){this.scrollContainers.has(Rt)||this.scrollContainers.set(Rt,Rt.elementScrolled().subscribe(()=>this._scrolled.next(Rt)))}deregister(Rt){const Pt=this.scrollContainers.get(Rt);Pt&&(Pt.unsubscribe(),this.scrollContainers.delete(Rt))}scrolled(Rt=20){return this._platform.isBrowser?new V.y(Pt=>{this._globalSubscription||this._addGlobalListener();const he=Rt>0?this._scrolled.pipe(ut(Rt)).subscribe(Pt):this._scrolled.subscribe(Pt);return this._scrolledCount++,()=>{he.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,U.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((Rt,Pt)=>this.deregister(Pt)),this._scrolled.complete()}ancestorScrolled(Rt,Pt){const he=this.getAncestorScrollContainers(Rt);return this.scrolled(Pt).pipe((0,tt.h)(ze=>!ze||he.indexOf(ze)>-1))}getAncestorScrollContainers(Rt){const Pt=[];return this.scrollContainers.forEach((he,ze)=>{this._scrollableContainsElement(ze,Rt)&&Pt.push(ze)}),Pt}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(Rt,Pt){let he=(0,b.fI)(Pt),ze=Rt.getElementRef().nativeElement;do{if(he==ze)return!0}while(he=he.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const Rt=this._getWindow();return(0,H.R)(Rt.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Xt.\u0275fac=function(Rt){return new(Rt||Xt)(p.LFG(p.R0b),p.LFG(Lt.t4),p.LFG(ot.K0,8))},Xt.\u0275prov=p.Yz7({token:Xt,factory:Xt.\u0275fac,providedIn:"root"}),Xt})(),de=(()=>{class Xt{constructor(Rt,Pt,he,ze){this.elementRef=Rt,this.scrollDispatcher=Pt,this.ngZone=he,this.dir=ze,this._destroyed=new M.x,this._elementScrolled=new V.y(le=>this.ngZone.runOutsideAngular(()=>(0,H.R)(this.elementRef.nativeElement,"scroll").pipe((0,lt.R)(this._destroyed)).subscribe(le)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(Rt){const Pt=this.elementRef.nativeElement,he=this.dir&&"rtl"==this.dir.value;null==Rt.left&&(Rt.left=he?Rt.end:Rt.start),null==Rt.right&&(Rt.right=he?Rt.start:Rt.end),null!=Rt.bottom&&(Rt.top=Pt.scrollHeight-Pt.clientHeight-Rt.bottom),he&&0!=(0,Lt._i)()?(null!=Rt.left&&(Rt.right=Pt.scrollWidth-Pt.clientWidth-Rt.left),2==(0,Lt._i)()?Rt.left=Rt.right:1==(0,Lt._i)()&&(Rt.left=Rt.right?-Rt.right:Rt.right)):null!=Rt.right&&(Rt.left=Pt.scrollWidth-Pt.clientWidth-Rt.right),this._applyScrollToOptions(Rt)}_applyScrollToOptions(Rt){const Pt=this.elementRef.nativeElement;(0,Lt.Mq)()?Pt.scrollTo(Rt):(null!=Rt.top&&(Pt.scrollTop=Rt.top),null!=Rt.left&&(Pt.scrollLeft=Rt.left))}measureScrollOffset(Rt){const Pt="left",ze=this.elementRef.nativeElement;if("top"==Rt)return ze.scrollTop;if("bottom"==Rt)return ze.scrollHeight-ze.clientHeight-ze.scrollTop;const le=this.dir&&"rtl"==this.dir.value;return"start"==Rt?Rt=le?"right":Pt:"end"==Rt&&(Rt=le?Pt:"right"),le&&2==(0,Lt._i)()?Rt==Pt?ze.scrollWidth-ze.clientWidth-ze.scrollLeft:ze.scrollLeft:le&&1==(0,Lt._i)()?Rt==Pt?ze.scrollLeft+ze.scrollWidth-ze.clientWidth:-ze.scrollLeft:Rt==Pt?ze.scrollLeft:ze.scrollWidth-ze.clientWidth-ze.scrollLeft}}return Xt.\u0275fac=function(Rt){return new(Rt||Xt)(p.Y36(p.SBq),p.Y36(Ye),p.Y36(p.R0b),p.Y36(at.Is,8))},Xt.\u0275dir=p.lG2({type:Xt,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),Xt})(),He=(()=>{class Xt{constructor(Rt,Pt,he){this._platform=Rt,this._change=new M.x,this._changeListener=ze=>{this._change.next(ze)},this._document=he,Pt.runOutsideAngular(()=>{if(Rt.isBrowser){const ze=this._getWindow();ze.addEventListener("resize",this._changeListener),ze.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const Rt=this._getWindow();Rt.removeEventListener("resize",this._changeListener),Rt.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const Rt={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),Rt}getViewportRect(){const Rt=this.getViewportScrollPosition(),{width:Pt,height:he}=this.getViewportSize();return{top:Rt.top,left:Rt.left,bottom:Rt.top+he,right:Rt.left+Pt,height:he,width:Pt}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const Rt=this._document,Pt=this._getWindow(),he=Rt.documentElement,ze=he.getBoundingClientRect();return{top:-ze.top||Rt.body.scrollTop||Pt.scrollY||he.scrollTop||0,left:-ze.left||Rt.body.scrollLeft||Pt.scrollX||he.scrollLeft||0}}change(Rt=20){return Rt>0?this._change.pipe(ut(Rt)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const Rt=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:Rt.innerWidth,height:Rt.innerHeight}:{width:0,height:0}}}return Xt.\u0275fac=function(Rt){return new(Rt||Xt)(p.LFG(Lt.t4),p.LFG(p.R0b),p.LFG(ot.K0,8))},Xt.\u0275prov=p.Yz7({token:Xt,factory:Xt.\u0275fac,providedIn:"root"}),Xt})(),Ft=(()=>{class Xt{}return Xt.\u0275fac=function(Rt){return new(Rt||Xt)},Xt.\u0275mod=p.oAB({type:Xt}),Xt.\u0275inj=p.cJS({}),Xt})(),_e=(()=>{class Xt{}return Xt.\u0275fac=function(Rt){return new(Rt||Xt)},Xt.\u0275mod=p.oAB({type:Xt}),Xt.\u0275inj=p.cJS({imports:[[at.vT,Lt.ud,Ft],at.vT,Ft]}),Xt})()},69808:(k,B,f)=>{"use strict";f.d(B,{mr:()=>Ct,Ov:()=>Js,ez:()=>Bo,K0:()=>s,Do:()=>yt,V_:()=>w,Ye:()=>ut,S$:()=>nt,mk:()=>jo,sg:()=>dr,O5:()=>Zo,PC:()=>qn,RF:()=>xo,n9:()=>Eo,b0:()=>xt,lw:()=>c,EM:()=>Ho,JF:()=>Ss,NF:()=>hs,w_:()=>o,bD:()=>pr,q:()=>e,Mx:()=>pn,HT:()=>n});var b=f(5e3);let p=null;function e(){return p}function n(Dt){p||(p=Dt)}class o{}const s=new b.OlP("DocumentToken");let c=(()=>{class Dt{historyGo(P){throw new Error("Not implemented")}}return Dt.\u0275fac=function(P){return new(P||Dt)},Dt.\u0275prov=b.Yz7({token:Dt,factory:function(){return(0,b.LFG)(M)},providedIn:"platform"}),Dt})();const w=new b.OlP("Location Initialized");let M=(()=>{class Dt extends c{constructor(P){super(),this._doc=P,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return e().getBaseHref(this._doc)}onPopState(P){const G=e().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",P,!1),()=>G.removeEventListener("popstate",P)}onHashChange(P){const G=e().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",P,!1),()=>G.removeEventListener("hashchange",P)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(P){this.location.pathname=P}pushState(P,G,St){U()?this._history.pushState(P,G,St):this.location.hash=St}replaceState(P,G,St){U()?this._history.replaceState(P,G,St):this.location.hash=St}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}}return Dt.\u0275fac=function(P){return new(P||Dt)(b.LFG(s))},Dt.\u0275prov=b.Yz7({token:Dt,factory:function(){return new M((0,b.LFG)(s))},providedIn:"platform"}),Dt})();function U(){return!!window.history.pushState}function H(Dt,X){if(0==Dt.length)return X;if(0==X.length)return Dt;let P=0;return Dt.endsWith("/")&&P++,X.startsWith("/")&&P++,2==P?Dt+X.substring(1):1==P?Dt+X:Dt+"/"+X}function $(Dt){const X=Dt.match(/#|\?|$/),P=X&&X.index||Dt.length;return Dt.slice(0,P-("/"===Dt[P-1]?1:0))+Dt.slice(P)}function pt(Dt){return Dt&&"?"!==Dt[0]?"?"+Dt:Dt}let nt=(()=>{class Dt{historyGo(P){throw new Error("Not implemented")}}return Dt.\u0275fac=function(P){return new(P||Dt)},Dt.\u0275prov=b.Yz7({token:Dt,factory:function(){return function(Dt){const X=(0,b.LFG)(s).location;return new xt((0,b.LFG)(c),X&&X.origin||"")}()},providedIn:"root"}),Dt})();const Ct=new b.OlP("appBaseHref");let xt=(()=>{class Dt extends nt{constructor(P,G){if(super(),this._platformLocation=P,this._removeListenerFns=[],null==G&&(G=this._platformLocation.getBaseHrefFromDOM()),null==G)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=G}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return H(this._baseHref,P)}path(P=!1){const G=this._platformLocation.pathname+pt(this._platformLocation.search),St=this._platformLocation.hash;return St&&P?`${G}${St}`:G}pushState(P,G,St,Ee){const ei=this.prepareExternalUrl(St+pt(Ee));this._platformLocation.pushState(P,G,ei)}replaceState(P,G,St,Ee){const ei=this.prepareExternalUrl(St+pt(Ee));this._platformLocation.replaceState(P,G,ei)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(P=0){var G,St;null===(St=(G=this._platformLocation).historyGo)||void 0===St||St.call(G,P)}}return Dt.\u0275fac=function(P){return new(P||Dt)(b.LFG(c),b.LFG(Ct,8))},Dt.\u0275prov=b.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})(),yt=(()=>{class Dt extends nt{constructor(P,G){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(P){const G=H(this._baseHref,P);return G.length>0?"#"+G:G}pushState(P,G,St,Ee){let ei=this.prepareExternalUrl(St+pt(Ee));0==ei.length&&(ei=this._platformLocation.pathname),this._platformLocation.pushState(P,G,ei)}replaceState(P,G,St,Ee){let ei=this.prepareExternalUrl(St+pt(Ee));0==ei.length&&(ei=this._platformLocation.pathname),this._platformLocation.replaceState(P,G,ei)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(P=0){var G,St;null===(St=(G=this._platformLocation).historyGo)||void 0===St||St.call(G,P)}}return Dt.\u0275fac=function(P){return new(P||Dt)(b.LFG(c),b.LFG(Ct,8))},Dt.\u0275prov=b.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})(),ut=(()=>{class Dt{constructor(P,G){this._subject=new b.vpe,this._urlChangeListeners=[],this._platformStrategy=P;const St=this._platformStrategy.getBaseHref();this._platformLocation=G,this._baseHref=$(ot(St)),this._platformStrategy.onPopState(Ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ee.state,type:Ee.type})})}path(P=!1){return this.normalize(this._platformStrategy.path(P))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(P,G=""){return this.path()==this.normalize(P+pt(G))}normalize(P){return Dt.stripTrailingSlash(function(Dt,X){return Dt&&X.startsWith(Dt)?X.substring(Dt.length):X}(this._baseHref,ot(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._platformStrategy.prepareExternalUrl(P)}go(P,G="",St=null){this._platformStrategy.pushState(St,"",P,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+pt(G)),St)}replaceState(P,G="",St=null){this._platformStrategy.replaceState(St,"",P,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+pt(G)),St)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(P=0){var G,St;null===(St=(G=this._platformStrategy).historyGo)||void 0===St||St.call(G,P)}onUrlChange(P){this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)}))}_notifyUrlChangeListeners(P="",G){this._urlChangeListeners.forEach(St=>St(P,G))}subscribe(P,G,St){return this._subject.subscribe({next:P,error:G,complete:St})}}return Dt.normalizeQueryParams=pt,Dt.joinWithSlash=H,Dt.stripTrailingSlash=$,Dt.\u0275fac=function(P){return new(P||Dt)(b.LFG(nt),b.LFG(c))},Dt.\u0275prov=b.Yz7({token:Dt,factory:function(){return new ut((0,b.LFG)(nt),(0,b.LFG)(c))},providedIn:"root"}),Dt})();function ot(Dt){return Dt.replace(/\/index.html$/,"")}var dt=(()=>((dt=dt||{})[dt.Zero=0]="Zero",dt[dt.One=1]="One",dt[dt.Two=2]="Two",dt[dt.Few=3]="Few",dt[dt.Many=4]="Many",dt[dt.Other=5]="Other",dt))();const he=b.kL8;class wo{}let No=(()=>{class Dt extends wo{constructor(P){super(),this.locale=P}getPluralCategory(P,G){switch(he(G||this.locale)(P)){case dt.Zero:return"zero";case dt.One:return"one";case dt.Two:return"two";case dt.Few:return"few";case dt.Many:return"many";default:return"other"}}}return Dt.\u0275fac=function(P){return new(P||Dt)(b.LFG(b.soG))},Dt.\u0275prov=b.Yz7({token:Dt,factory:Dt.\u0275fac}),Dt})();function pn(Dt,X){X=encodeURIComponent(X);for(const P of Dt.split(";")){const G=P.indexOf("="),[St,Ee]=-1==G?[P,""]:[P.slice(0,G),P.slice(G+1)];if(St.trim()===X)return decodeURIComponent(Ee)}return null}let jo=(()=>{class Dt{constructor(P,G,St,Ee){this._iterableDiffers=P,this._keyValueDiffers=G,this._ngEl=St,this._renderer=Ee,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(P){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof P?P.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(P){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof P?P.split(/\s+/):P,this._rawClass&&((0,b.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const P=this._iterableDiffer.diff(this._rawClass);P&&this._applyIterableChanges(P)}else if(this._keyValueDiffer){const P=this._keyValueDiffer.diff(this._rawClass);P&&this._applyKeyValueChanges(P)}}_applyKeyValueChanges(P){P.forEachAddedItem(G=>this._toggleClass(G.key,G.currentValue)),P.forEachChangedItem(G=>this._toggleClass(G.key,G.currentValue)),P.forEachRemovedItem(G=>{G.previousValue&&this._toggleClass(G.key,!1)})}_applyIterableChanges(P){P.forEachAddedItem(G=>{if("string"!=typeof G.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,b.AaK)(G.item)}`);this._toggleClass(G.item,!0)}),P.forEachRemovedItem(G=>this._toggleClass(G.item,!1))}_applyClasses(P){P&&(Array.isArray(P)||P instanceof Set?P.forEach(G=>this._toggleClass(G,!0)):Object.keys(P).forEach(G=>this._toggleClass(G,!!P[G])))}_removeClasses(P){P&&(Array.isArray(P)||P instanceof Set?P.forEach(G=>this._toggleClass(G,!1)):Object.keys(P).forEach(G=>this._toggleClass(G,!1)))}_toggleClass(P,G){(P=P.trim())&&P.split(/\s+/g).forEach(St=>{G?this._renderer.addClass(this._ngEl.nativeElement,St):this._renderer.removeClass(this._ngEl.nativeElement,St)})}}return Dt.\u0275fac=function(P){return new(P||Dt)(b.Y36(b.ZZ4),b.Y36(b.aQg),b.Y36(b.SBq),b.Y36(b.Qsj))},Dt.\u0275dir=b.lG2({type:Dt,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Dt})();class vr{constructor(X,P,G,St){this.$implicit=X,this.ngForOf=P,this.index=G,this.count=St}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let dr=(()=>{class Dt{constructor(P,G,St){this._viewContainer=P,this._template=G,this._differs=St,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const G=this._viewContainer;P.forEachOperation((St,Ee,ei)=>{if(null==St.previousIndex)G.createEmbeddedView(this._template,new vr(St.item,this._ngForOf,-1,-1),null===ei?void 0:ei);else if(null==ei)G.remove(null===Ee?void 0:Ee);else if(null!==Ee){const Ni=G.get(Ee);G.move(Ni,ei),Ro(Ni,St)}});for(let St=0,Ee=G.length;St<Ee;St++){const Ni=G.get(St).context;Ni.index=St,Ni.count=Ee,Ni.ngForOf=this._ngForOf}P.forEachIdentityChange(St=>{Ro(G.get(St.currentIndex),St)})}static ngTemplateContextGuard(P,G){return!0}}return Dt.\u0275fac=function(P){return new(P||Dt)(b.Y36(b.s_b),b.Y36(b.Rgc),b.Y36(b.ZZ4))},Dt.\u0275dir=b.lG2({type:Dt,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Dt})();function Ro(Dt,X){Dt.context.$implicit=X.item}let Zo=(()=>{class Dt{constructor(P,G){this._viewContainer=P,this._context=new Hn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){vn("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){vn("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,G){return!0}}return Dt.\u0275fac=function(P){return new(P||Dt)(b.Y36(b.s_b),b.Y36(b.Rgc))},Dt.\u0275dir=b.lG2({type:Dt,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Dt})();class Hn{constructor(){this.$implicit=null,this.ngIf=null}}function vn(Dt,X){if(X&&!X.createEmbeddedView)throw new Error(`${Dt} must be a TemplateRef, but received '${(0,b.AaK)(X)}'.`)}class Qo{constructor(X,P){this._viewContainerRef=X,this._templateRef=P,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(X){X&&!this._created?this.create():!X&&this._created&&this.destroy()}}let xo=(()=>{class Dt{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(P){this._ngSwitch=P,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(P){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(P)}_matchCase(P){const G=P==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||G,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),G}_updateDefaultCases(P){if(this._defaultViews&&P!==this._defaultUsed){this._defaultUsed=P;for(let G=0;G<this._defaultViews.length;G++)this._defaultViews[G].enforceState(P)}}}return Dt.\u0275fac=function(P){return new(P||Dt)},Dt.\u0275dir=b.lG2({type:Dt,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),Dt})(),Eo=(()=>{class Dt{constructor(P,G,St){this.ngSwitch=St,St._addCase(),this._view=new Qo(P,G)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return Dt.\u0275fac=function(P){return new(P||Dt)(b.Y36(b.s_b),b.Y36(b.Rgc),b.Y36(xo,9))},Dt.\u0275dir=b.lG2({type:Dt,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),Dt})(),qn=(()=>{class Dt{constructor(P,G,St){this._ngEl=P,this._differs=G,this._renderer=St,this._ngStyle=null,this._differ=null}set ngStyle(P){this._ngStyle=P,!this._differ&&P&&(this._differ=this._differs.find(P).create())}ngDoCheck(){if(this._differ){const P=this._differ.diff(this._ngStyle);P&&this._applyChanges(P)}}_setStyle(P,G){const[St,Ee]=P.split(".");null!=(G=null!=G&&Ee?`${G}${Ee}`:G)?this._renderer.setStyle(this._ngEl.nativeElement,St,G):this._renderer.removeStyle(this._ngEl.nativeElement,St)}_applyChanges(P){P.forEachRemovedItem(G=>this._setStyle(G.key,null)),P.forEachAddedItem(G=>this._setStyle(G.key,G.currentValue)),P.forEachChangedItem(G=>this._setStyle(G.key,G.currentValue))}}return Dt.\u0275fac=function(P){return new(P||Dt)(b.Y36(b.SBq),b.Y36(b.aQg),b.Y36(b.Qsj))},Dt.\u0275dir=b.lG2({type:Dt,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),Dt})();class Jr{createSubscription(X,P){return X.subscribe({next:P,error:G=>{throw G}})}dispose(X){X.unsubscribe()}onDestroy(X){X.unsubscribe()}}class wr{createSubscription(X,P){return X.then(P,G=>{throw G})}dispose(X){}onDestroy(X){}}const po=new wr,$r=new Jr;let Js=(()=>{class Dt{constructor(P){this._ref=P,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(P){return this._obj?P!==this._obj?(this._dispose(),this.transform(P)):this._latestValue:(P&&this._subscribe(P),this._latestValue)}_subscribe(P){this._obj=P,this._strategy=this._selectStrategy(P),this._subscription=this._strategy.createSubscription(P,G=>this._updateLatestValue(P,G))}_selectStrategy(P){if((0,b.QGY)(P))return po;if((0,b.F4k)(P))return $r;throw function(Dt,X){return Error(`InvalidPipeArgument: '${X}' for pipe '${(0,b.AaK)(Dt)}'`)}(Dt,P)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(P,G){P===this._obj&&(this._latestValue=G,this._ref.markForCheck())}}return Dt.\u0275fac=function(P){return new(P||Dt)(b.Y36(b.sBO,16))},Dt.\u0275pipe=b.Yjl({name:"async",type:Dt,pure:!1}),Dt})(),Bo=(()=>{class Dt{}return Dt.\u0275fac=function(P){return new(P||Dt)},Dt.\u0275mod=b.oAB({type:Dt}),Dt.\u0275inj=b.cJS({providers:[{provide:wo,useClass:No}]}),Dt})();const pr="browser";function hs(Dt){return Dt===pr}let Ho=(()=>{class Dt{}return Dt.\u0275prov=(0,b.Yz7)({token:Dt,providedIn:"root",factory:()=>new yr((0,b.LFG)(s),window)}),Dt})();class yr{constructor(X,P){this.document=X,this.window=P,this.offset=()=>[0,0]}setOffset(X){this.offset=Array.isArray(X)?()=>X:X}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(X){this.supportsScrolling()&&this.window.scrollTo(X[0],X[1])}scrollToAnchor(X){if(!this.supportsScrolling())return;const P=function(Dt,X){const P=Dt.getElementById(X)||Dt.getElementsByName(X)[0];if(P)return P;if("function"==typeof Dt.createTreeWalker&&Dt.body&&(Dt.body.createShadowRoot||Dt.body.attachShadow)){const G=Dt.createTreeWalker(Dt.body,NodeFilter.SHOW_ELEMENT);let St=G.currentNode;for(;St;){const Ee=St.shadowRoot;if(Ee){const ei=Ee.getElementById(X)||Ee.querySelector(`[name="${X}"]`);if(ei)return ei}St=G.nextNode()}}return null}(this.document,X);P&&(this.scrollToElement(P),this.attemptFocus(P))}setHistoryScrollRestoration(X){if(this.supportScrollRestoration()){const P=this.window.history;P&&P.scrollRestoration&&(P.scrollRestoration=X)}}scrollToElement(X){const P=X.getBoundingClientRect(),G=P.left+this.window.pageXOffset,St=P.top+this.window.pageYOffset,Ee=this.offset();this.window.scrollTo(G-Ee[0],St-Ee[1])}attemptFocus(X){return X.focus(),this.document.activeElement===X}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const X=ca(this.window.history)||ca(Object.getPrototypeOf(this.window.history));return!(!X||!X.writable&&!X.set)}catch(X){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(X){return!1}}}function ca(Dt){return Object.getOwnPropertyDescriptor(Dt,"scrollRestoration")}class Ss{}},40520:(k,B,f)=>{"use strict";f.d(B,{eN:()=>bt,JF:()=>ge});var b=f(69808),p=f(5e3),e=f(39646),t=f(79307),n=f(24351),o=f(39300),s=f(54004);class c{}class _{}class w{constructor(Et){this.normalizedNames=new Map,this.lazyUpdate=null,Et?this.lazyInit="string"==typeof Et?()=>{this.headers=new Map,Et.split("\n").forEach(kt=>{const we=kt.indexOf(":");if(we>0){const Ae=kt.slice(0,we),ci=Ae.toLowerCase(),Ze=kt.slice(we+1).trim();this.maybeSetNormalizedName(Ae,ci),this.headers.has(ci)?this.headers.get(ci).push(Ze):this.headers.set(ci,[Ze])}})}:()=>{this.headers=new Map,Object.keys(Et).forEach(kt=>{let we=Et[kt];const Ae=kt.toLowerCase();"string"==typeof we&&(we=[we]),we.length>0&&(this.headers.set(Ae,we),this.maybeSetNormalizedName(kt,Ae))})}:this.headers=new Map}has(Et){return this.init(),this.headers.has(Et.toLowerCase())}get(Et){this.init();const kt=this.headers.get(Et.toLowerCase());return kt&&kt.length>0?kt[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Et){return this.init(),this.headers.get(Et.toLowerCase())||null}append(Et,kt){return this.clone({name:Et,value:kt,op:"a"})}set(Et,kt){return this.clone({name:Et,value:kt,op:"s"})}delete(Et,kt){return this.clone({name:Et,value:kt,op:"d"})}maybeSetNormalizedName(Et,kt){this.normalizedNames.has(kt)||this.normalizedNames.set(kt,Et)}init(){this.lazyInit&&(this.lazyInit instanceof w?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Et=>this.applyUpdate(Et)),this.lazyUpdate=null))}copyFrom(Et){Et.init(),Array.from(Et.headers.keys()).forEach(kt=>{this.headers.set(kt,Et.headers.get(kt)),this.normalizedNames.set(kt,Et.normalizedNames.get(kt))})}clone(Et){const kt=new w;return kt.lazyInit=this.lazyInit&&this.lazyInit instanceof w?this.lazyInit:this,kt.lazyUpdate=(this.lazyUpdate||[]).concat([Et]),kt}applyUpdate(Et){const kt=Et.name.toLowerCase();switch(Et.op){case"a":case"s":let we=Et.value;if("string"==typeof we&&(we=[we]),0===we.length)return;this.maybeSetNormalizedName(Et.name,kt);const Ae=("a"===Et.op?this.headers.get(kt):void 0)||[];Ae.push(...we),this.headers.set(kt,Ae);break;case"d":const ci=Et.value;if(ci){let Ze=this.headers.get(kt);if(!Ze)return;Ze=Ze.filter(li=>-1===ci.indexOf(li)),0===Ze.length?(this.headers.delete(kt),this.normalizedNames.delete(kt)):this.headers.set(kt,Ze)}else this.headers.delete(kt),this.normalizedNames.delete(kt)}}forEach(Et){this.init(),Array.from(this.normalizedNames.keys()).forEach(kt=>Et(this.normalizedNames.get(kt),this.headers.get(kt)))}}class M{encodeKey(Et){return $(Et)}encodeValue(Et){return $(Et)}decodeKey(Et){return decodeURIComponent(Et)}decodeValue(Et){return decodeURIComponent(Et)}}const V=/%(\d[a-f0-9])/gi,H={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function $(re){return encodeURIComponent(re).replace(V,(Et,kt)=>{var we;return null!==(we=H[kt])&&void 0!==we?we:Et})}function pt(re){return`${re}`}class nt{constructor(Et={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Et.encoder||new M,Et.fromString){if(Et.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(re,Et){const kt=new Map;return re.length>0&&re.replace(/^\?/,"").split("&").forEach(Ae=>{const ci=Ae.indexOf("="),[Ze,li]=-1==ci?[Et.decodeKey(Ae),""]:[Et.decodeKey(Ae.slice(0,ci)),Et.decodeValue(Ae.slice(ci+1))],Fi=kt.get(Ze)||[];Fi.push(li),kt.set(Ze,Fi)}),kt}(Et.fromString,this.encoder)}else Et.fromObject?(this.map=new Map,Object.keys(Et.fromObject).forEach(kt=>{const we=Et.fromObject[kt];this.map.set(kt,Array.isArray(we)?we:[we])})):this.map=null}has(Et){return this.init(),this.map.has(Et)}get(Et){this.init();const kt=this.map.get(Et);return kt?kt[0]:null}getAll(Et){return this.init(),this.map.get(Et)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Et,kt){return this.clone({param:Et,value:kt,op:"a"})}appendAll(Et){const kt=[];return Object.keys(Et).forEach(we=>{const Ae=Et[we];Array.isArray(Ae)?Ae.forEach(ci=>{kt.push({param:we,value:ci,op:"a"})}):kt.push({param:we,value:Ae,op:"a"})}),this.clone(kt)}set(Et,kt){return this.clone({param:Et,value:kt,op:"s"})}delete(Et,kt){return this.clone({param:Et,value:kt,op:"d"})}toString(){return this.init(),this.keys().map(Et=>{const kt=this.encoder.encodeKey(Et);return this.map.get(Et).map(we=>kt+"="+this.encoder.encodeValue(we)).join("&")}).filter(Et=>""!==Et).join("&")}clone(Et){const kt=new nt({encoder:this.encoder});return kt.cloneFrom=this.cloneFrom||this,kt.updates=(this.updates||[]).concat(Et),kt}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Et=>this.map.set(Et,this.cloneFrom.map.get(Et))),this.updates.forEach(Et=>{switch(Et.op){case"a":case"s":const kt=("a"===Et.op?this.map.get(Et.param):void 0)||[];kt.push(pt(Et.value)),this.map.set(Et.param,kt);break;case"d":if(void 0===Et.value){this.map.delete(Et.param);break}{let we=this.map.get(Et.param)||[];const Ae=we.indexOf(pt(Et.value));-1!==Ae&&we.splice(Ae,1),we.length>0?this.map.set(Et.param,we):this.map.delete(Et.param)}}}),this.cloneFrom=this.updates=null)}}class Ct{constructor(){this.map=new Map}set(Et,kt){return this.map.set(Et,kt),this}get(Et){return this.map.has(Et)||this.map.set(Et,Et.defaultValue()),this.map.get(Et)}delete(Et){return this.map.delete(Et),this}has(Et){return this.map.has(Et)}keys(){return this.map.keys()}}function yt(re){return"undefined"!=typeof ArrayBuffer&&re instanceof ArrayBuffer}function ut(re){return"undefined"!=typeof Blob&&re instanceof Blob}function tt(re){return"undefined"!=typeof FormData&&re instanceof FormData}class ot{constructor(Et,kt,we,Ae){let ci;if(this.url=kt,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Et.toUpperCase(),function(re){switch(re){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ae?(this.body=void 0!==we?we:null,ci=Ae):ci=we,ci&&(this.reportProgress=!!ci.reportProgress,this.withCredentials=!!ci.withCredentials,ci.responseType&&(this.responseType=ci.responseType),ci.headers&&(this.headers=ci.headers),ci.context&&(this.context=ci.context),ci.params&&(this.params=ci.params)),this.headers||(this.headers=new w),this.context||(this.context=new Ct),this.params){const Ze=this.params.toString();if(0===Ze.length)this.urlWithParams=kt;else{const li=kt.indexOf("?");this.urlWithParams=kt+(-1===li?"?":li<kt.length-1?"&":"")+Ze}}else this.params=new nt,this.urlWithParams=kt}serializeBody(){return null===this.body?null:yt(this.body)||ut(this.body)||tt(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof nt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||tt(this.body)?null:ut(this.body)?this.body.type||null:yt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Et={}){var kt;const we=Et.method||this.method,Ae=Et.url||this.url,ci=Et.responseType||this.responseType,Ze=void 0!==Et.body?Et.body:this.body,li=void 0!==Et.withCredentials?Et.withCredentials:this.withCredentials,Fi=void 0!==Et.reportProgress?Et.reportProgress:this.reportProgress;let ui=Et.headers||this.headers,Ei=Et.params||this.params;const gi=null!==(kt=Et.context)&&void 0!==kt?kt:this.context;return void 0!==Et.setHeaders&&(ui=Object.keys(Et.setHeaders).reduce((We,ri)=>We.set(ri,Et.setHeaders[ri]),ui)),Et.setParams&&(Ei=Object.keys(Et.setParams).reduce((We,ri)=>We.set(ri,Et.setParams[ri]),Ei)),new ot(we,Ae,Ze,{params:Ei,headers:ui,context:gi,reportProgress:Fi,responseType:ci,withCredentials:li})}}var Lt=(()=>((Lt=Lt||{})[Lt.Sent=0]="Sent",Lt[Lt.UploadProgress=1]="UploadProgress",Lt[Lt.ResponseHeader=2]="ResponseHeader",Lt[Lt.DownloadProgress=3]="DownloadProgress",Lt[Lt.Response=4]="Response",Lt[Lt.User=5]="User",Lt))();class at{constructor(Et,kt=200,we="OK"){this.headers=Et.headers||new w,this.status=void 0!==Et.status?Et.status:kt,this.statusText=Et.statusText||we,this.url=Et.url||null,this.ok=this.status>=200&&this.status<300}}class dt extends at{constructor(Et={}){super(Et),this.type=Lt.ResponseHeader}clone(Et={}){return new dt({headers:Et.headers||this.headers,status:void 0!==Et.status?Et.status:this.status,statusText:Et.statusText||this.statusText,url:Et.url||this.url||void 0})}}class it extends at{constructor(Et={}){super(Et),this.type=Lt.Response,this.body=void 0!==Et.body?Et.body:null}clone(Et={}){return new it({body:void 0!==Et.body?Et.body:this.body,headers:Et.headers||this.headers,status:void 0!==Et.status?Et.status:this.status,statusText:Et.statusText||this.statusText,url:Et.url||this.url||void 0})}}class rt extends at{constructor(Et){super(Et,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Et.url||"(unknown url)"}`:`Http failure response for ${Et.url||"(unknown url)"}: ${Et.status} ${Et.statusText}`,this.error=Et.error||null}}function Gt(re,Et){return{body:Et,headers:re.headers,context:re.context,observe:re.observe,params:re.params,reportProgress:re.reportProgress,responseType:re.responseType,withCredentials:re.withCredentials}}let bt=(()=>{class re{constructor(kt){this.handler=kt}request(kt,we,Ae={}){let ci;if(kt instanceof ot)ci=kt;else{let Fi,ui;Fi=Ae.headers instanceof w?Ae.headers:new w(Ae.headers),Ae.params&&(ui=Ae.params instanceof nt?Ae.params:new nt({fromObject:Ae.params})),ci=new ot(kt,we,void 0!==Ae.body?Ae.body:null,{headers:Fi,context:Ae.context,params:ui,reportProgress:Ae.reportProgress,responseType:Ae.responseType||"json",withCredentials:Ae.withCredentials})}const Ze=(0,e.of)(ci).pipe((0,n.b)(Fi=>this.handler.handle(Fi)));if(kt instanceof ot||"events"===Ae.observe)return Ze;const li=Ze.pipe((0,o.h)(Fi=>Fi instanceof it));switch(Ae.observe||"body"){case"body":switch(ci.responseType){case"arraybuffer":return li.pipe((0,s.U)(Fi=>{if(null!==Fi.body&&!(Fi.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Fi.body}));case"blob":return li.pipe((0,s.U)(Fi=>{if(null!==Fi.body&&!(Fi.body instanceof Blob))throw new Error("Response is not a Blob.");return Fi.body}));case"text":return li.pipe((0,s.U)(Fi=>{if(null!==Fi.body&&"string"!=typeof Fi.body)throw new Error("Response is not a string.");return Fi.body}));default:return li.pipe((0,s.U)(Fi=>Fi.body))}case"response":return li;default:throw new Error(`Unreachable: unhandled observe type ${Ae.observe}}`)}}delete(kt,we={}){return this.request("DELETE",kt,we)}get(kt,we={}){return this.request("GET",kt,we)}head(kt,we={}){return this.request("HEAD",kt,we)}jsonp(kt,we){return this.request("JSONP",kt,{params:(new nt).append(we,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(kt,we={}){return this.request("OPTIONS",kt,we)}patch(kt,we,Ae={}){return this.request("PATCH",kt,Gt(Ae,we))}post(kt,we,Ae={}){return this.request("POST",kt,Gt(Ae,we))}put(kt,we,Ae={}){return this.request("PUT",kt,Gt(Ae,we))}}return re.\u0275fac=function(kt){return new(kt||re)(p.LFG(c))},re.\u0275prov=p.Yz7({token:re,factory:re.\u0275fac}),re})();class Ht{constructor(Et,kt){this.next=Et,this.interceptor=kt}handle(Et){return this.interceptor.intercept(Et,this.next)}}const ce=new p.OlP("HTTP_INTERCEPTORS");let Ye=(()=>{class re{intercept(kt,we){return we.handle(kt)}}return re.\u0275fac=function(kt){return new(kt||re)},re.\u0275prov=p.Yz7({token:re,factory:re.\u0275fac}),re})();const oi=/^\)\]\}',?\n/;let _e=(()=>{class re{constructor(kt){this.xhrFactory=kt}handle(kt){if("JSONP"===kt.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new t.y(we=>{const Ae=this.xhrFactory.build();if(Ae.open(kt.method,kt.urlWithParams),kt.withCredentials&&(Ae.withCredentials=!0),kt.headers.forEach((ri,ue)=>Ae.setRequestHeader(ri,ue.join(","))),kt.headers.has("Accept")||Ae.setRequestHeader("Accept","application/json, text/plain, */*"),!kt.headers.has("Content-Type")){const ri=kt.detectContentTypeHeader();null!==ri&&Ae.setRequestHeader("Content-Type",ri)}if(kt.responseType){const ri=kt.responseType.toLowerCase();Ae.responseType="json"!==ri?ri:"text"}const ci=kt.serializeBody();let Ze=null;const li=()=>{if(null!==Ze)return Ze;const ri=1223===Ae.status?204:Ae.status,ue=Ae.statusText||"OK",je=new w(Ae.getAllResponseHeaders()),ti=function(re){return"responseURL"in re&&re.responseURL?re.responseURL:/^X-Request-URL:/m.test(re.getAllResponseHeaders())?re.getResponseHeader("X-Request-URL"):null}(Ae)||kt.url;return Ze=new dt({headers:je,status:ri,statusText:ue,url:ti}),Ze},Fi=()=>{let{headers:ri,status:ue,statusText:je,url:ti}=li(),Ri=null;204!==ue&&(Ri=void 0===Ae.response?Ae.responseText:Ae.response),0===ue&&(ue=Ri?200:0);let Pe=ue>=200&&ue<300;if("json"===kt.responseType&&"string"==typeof Ri){const ie=Ri;Ri=Ri.replace(oi,"");try{Ri=""!==Ri?JSON.parse(Ri):null}catch(Mt){Ri=ie,Pe&&(Pe=!1,Ri={error:Mt,text:Ri})}}Pe?(we.next(new it({body:Ri,headers:ri,status:ue,statusText:je,url:ti||void 0})),we.complete()):we.error(new rt({error:Ri,headers:ri,status:ue,statusText:je,url:ti||void 0}))},ui=ri=>{const{url:ue}=li(),je=new rt({error:ri,status:Ae.status||0,statusText:Ae.statusText||"Unknown Error",url:ue||void 0});we.error(je)};let Ei=!1;const gi=ri=>{Ei||(we.next(li()),Ei=!0);let ue={type:Lt.DownloadProgress,loaded:ri.loaded};ri.lengthComputable&&(ue.total=ri.total),"text"===kt.responseType&&!!Ae.responseText&&(ue.partialText=Ae.responseText),we.next(ue)},We=ri=>{let ue={type:Lt.UploadProgress,loaded:ri.loaded};ri.lengthComputable&&(ue.total=ri.total),we.next(ue)};return Ae.addEventListener("load",Fi),Ae.addEventListener("error",ui),Ae.addEventListener("timeout",ui),Ae.addEventListener("abort",ui),kt.reportProgress&&(Ae.addEventListener("progress",gi),null!==ci&&Ae.upload&&Ae.upload.addEventListener("progress",We)),Ae.send(ci),we.next({type:Lt.Sent}),()=>{Ae.removeEventListener("error",ui),Ae.removeEventListener("abort",ui),Ae.removeEventListener("load",Fi),Ae.removeEventListener("timeout",ui),kt.reportProgress&&(Ae.removeEventListener("progress",gi),null!==ci&&Ae.upload&&Ae.upload.removeEventListener("progress",We)),Ae.readyState!==Ae.DONE&&Ae.abort()}})}}return re.\u0275fac=function(kt){return new(kt||re)(p.LFG(b.JF))},re.\u0275prov=p.Yz7({token:re,factory:re.\u0275fac}),re})();const Xt=new p.OlP("XSRF_COOKIE_NAME"),Jt=new p.OlP("XSRF_HEADER_NAME");class Rt{}let Pt=(()=>{class re{constructor(kt,we,Ae){this.doc=kt,this.platform=we,this.cookieName=Ae,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const kt=this.doc.cookie||"";return kt!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,b.Mx)(kt,this.cookieName),this.lastCookieString=kt),this.lastToken}}return re.\u0275fac=function(kt){return new(kt||re)(p.LFG(b.K0),p.LFG(p.Lbi),p.LFG(Xt))},re.\u0275prov=p.Yz7({token:re,factory:re.\u0275fac}),re})(),he=(()=>{class re{constructor(kt,we){this.tokenService=kt,this.headerName=we}intercept(kt,we){const Ae=kt.url.toLowerCase();if("GET"===kt.method||"HEAD"===kt.method||Ae.startsWith("http://")||Ae.startsWith("https://"))return we.handle(kt);const ci=this.tokenService.getToken();return null!==ci&&!kt.headers.has(this.headerName)&&(kt=kt.clone({headers:kt.headers.set(this.headerName,ci)})),we.handle(kt)}}return re.\u0275fac=function(kt){return new(kt||re)(p.LFG(Rt),p.LFG(Jt))},re.\u0275prov=p.Yz7({token:re,factory:re.\u0275fac}),re})(),ze=(()=>{class re{constructor(kt,we){this.backend=kt,this.injector=we,this.chain=null}handle(kt){if(null===this.chain){const we=this.injector.get(ce,[]);this.chain=we.reduceRight((Ae,ci)=>new Ht(Ae,ci),this.backend)}return this.chain.handle(kt)}}return re.\u0275fac=function(kt){return new(kt||re)(p.LFG(_),p.LFG(p.zs3))},re.\u0275prov=p.Yz7({token:re,factory:re.\u0275fac}),re})(),Yt=(()=>{class re{static disable(){return{ngModule:re,providers:[{provide:he,useClass:Ye}]}}static withOptions(kt={}){return{ngModule:re,providers:[kt.cookieName?{provide:Xt,useValue:kt.cookieName}:[],kt.headerName?{provide:Jt,useValue:kt.headerName}:[]]}}}return re.\u0275fac=function(kt){return new(kt||re)},re.\u0275mod=p.oAB({type:re}),re.\u0275inj=p.cJS({providers:[he,{provide:ce,useExisting:he,multi:!0},{provide:Rt,useClass:Pt},{provide:Xt,useValue:"XSRF-TOKEN"},{provide:Jt,useValue:"X-XSRF-TOKEN"}]}),re})(),ge=(()=>{class re{}return re.\u0275fac=function(kt){return new(kt||re)},re.\u0275mod=p.oAB({type:re}),re.\u0275inj=p.cJS({providers:[bt,{provide:c,useClass:ze},_e,{provide:_,useExisting:_e}],imports:[[Yt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),re})()},5e3:(k,B,f)=>{"use strict";f.d(B,{deG:()=>nc,tb:()=>Eb,AFp:()=>vb,ip1:()=>em,CZH:()=>Yd,hGG:()=>iS,z2F:()=>Mp,sBO:()=>OC,Sil:()=>nm,_Vd:()=>Tp,EJc:()=>Cb,SBq:()=>Cp,qLn:()=>zl,vpe:()=>yu,tBr:()=>Hl,XFs:()=>Yt,OlP:()=>er,zs3:()=>Nr,ZZ4:()=>wf,aQg:()=>Rf,soG:()=>Cf,YKP:()=>Mv,h0i:()=>Wd,PXZ:()=>SC,R0b:()=>tc,FiY:()=>Ys,Lbi:()=>yb,g9A:()=>bb,n_E:()=>_f,Qsj:()=>aT,FYo:()=>wv,JOm:()=>_a,q3G:()=>cr,tp0:()=>Ha,Rgc:()=>Dp,dDg:()=>Rb,GfV:()=>Rv,s_b:()=>bf,ifc:()=>Ze,eFA:()=>Mb,G48:()=>AC,Gpc:()=>M,f3M:()=>tl,_c5:()=>JC,VLi:()=>yC,c2e:()=>Tb,zSh:()=>dp,wAp:()=>Dn,vHH:()=>$,EiD:()=>ol,mCW:()=>bo,qzn:()=>fe,JVY:()=>Je,pB0:()=>_i,eBb:()=>Ve,L6k:()=>De,LAX:()=>hi,cg1:()=>kg,kL8:()=>J_,yhl:()=>Ce,dqk:()=>gi,sIi:()=>Dl,CqO:()=>s_,QGY:()=>bg,F4k:()=>r_,RDi:()=>Ho,AaK:()=>c,z3N:()=>Kt,qOj:()=>ko,TTD:()=>Mr,_Bn:()=>Tv,xp6:()=>Yu,uIk:()=>lg,ekj:()=>Rg,Suo:()=>$v,Xpm:()=>te,lG2:()=>Te,Yz7:()=>Ne,cJS:()=>Ft,oAB:()=>Sn,Yjl:()=>Xe,Y36:()=>mp,_UZ:()=>i_,GkF:()=>n_,BQk:()=>vg,ynx:()=>_g,qZA:()=>mg,TgZ:()=>gg,EpF:()=>o_,n5z:()=>Ps,Ikx:()=>Og,LFG:()=>ar,$8M:()=>fl,$Z:()=>e_,NdJ:()=>yg,CRH:()=>Zv,kcU:()=>es,O4$:()=>Er,oxw:()=>c_,ALo:()=>Uv,lcZ:()=>Gv,Hsn:()=>h_,F$t:()=>u_,Q6J:()=>pg,s9C:()=>Cg,DdM:()=>kv,VKq:()=>Lv,WLB:()=>Nv,iGM:()=>Kv,MAs:()=>jm,CHM:()=>Qt,LSH:()=>nu,Udp:()=>wg,WFA:()=>Eg,d8E:()=>xg,YNc:()=>Wm,W1O:()=>eb,_uU:()=>k_,Oqu:()=>Ig,hij:()=>uf,AsE:()=>Mg,lnq:()=>Ag,Gf:()=>Jv});var b=f(77579),p=f(50727),e=f(79307),t=f(56451),n=f(13099);function o(h){for(let d in h)if(h[d]===o)return d;throw Error("Could not find renamed property on target object.")}function s(h,d){for(const v in d)d.hasOwnProperty(v)&&!h.hasOwnProperty(v)&&(h[v]=d[v])}function c(h){if("string"==typeof h)return h;if(Array.isArray(h))return"["+h.map(c).join(", ")+"]";if(null==h)return""+h;if(h.overriddenName)return`${h.overriddenName}`;if(h.name)return`${h.name}`;const d=h.toString();if(null==d)return""+d;const v=d.indexOf("\n");return-1===v?d:d.substring(0,v)}function _(h,d){return null==h||""===h?null===d?"":d:null==d||""===d?h:h+" "+d}const w=o({__forward_ref__:o});function M(h){return h.__forward_ref__=M,h.toString=function(){return c(this())},h}function U(h){return V(h)?h():h}function V(h){return"function"==typeof h&&h.hasOwnProperty(w)&&h.__forward_ref__===M}class $ extends Error{constructor(d,v){super(function(h,d){return`${h?`NG0${h}: `:""}${d}`}(d,v)),this.code=d}}function st(h){return"string"==typeof h?h:null==h?"":String(h)}function Ct(h){return"function"==typeof h?h.name||h.toString():"object"==typeof h&&null!=h&&"function"==typeof h.type?h.type.name||h.type.toString():st(h)}function tt(h,d){const v=d?` in ${d}`:"";throw new $("201",`No provider for ${Ct(h)} found${v}`)}function Be(h,d){null==h&&function(h,d,v,C){throw new Error(`ASSERTION ERROR: ${h}`+(null==C?"":` [Expected=> ${v} ${C} ${d} <=Actual]`))}(d,h,null,"!=")}function Ne(h){return{token:h.token,providedIn:h.providedIn||null,factory:h.factory,value:void 0}}function Ft(h){return{providers:h.providers||[],imports:h.imports||[]}}function _e(h){return Xt(h,he)||Xt(h,le)}function Xt(h,d){return h.hasOwnProperty(d)?h[d]:null}function Pt(h){return h&&(h.hasOwnProperty(ze)||h.hasOwnProperty(jt))?h[ze]:null}const he=o({\u0275prov:o}),ze=o({\u0275inj:o}),le=o({ngInjectableDef:o}),jt=o({ngInjectorDef:o});var Yt=(()=>((Yt=Yt||{})[Yt.Default=0]="Default",Yt[Yt.Host=1]="Host",Yt[Yt.Self=2]="Self",Yt[Yt.SkipSelf=4]="SkipSelf",Yt[Yt.Optional=8]="Optional",Yt))();let ge;function oe(h){const d=ge;return ge=h,d}function re(h,d,v){const C=_e(h);return C&&"root"==C.providedIn?void 0===C.value?C.value=C.factory():C.value:v&Yt.Optional?null:void 0!==d?d:void tt(c(h),"Injector")}function kt(h){return{toString:h}.toString()}var we=(()=>((we=we||{})[we.OnPush=0]="OnPush",we[we.Default=1]="Default",we))(),Ze=(()=>{return(h=Ze||(Ze={}))[h.Emulated=0]="Emulated",h[h.None=2]="None",h[h.ShadowDom=3]="ShadowDom",Ze;var h})();const li="undefined"!=typeof globalThis&&globalThis,Fi="undefined"!=typeof window&&window,ui="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,gi=li||"undefined"!=typeof global&&global||Fi||ui,ue={},je=[],ti=o({\u0275cmp:o}),Ri=o({\u0275dir:o}),Pe=o({\u0275pipe:o}),ie=o({\u0275mod:o}),Mt=o({\u0275fac:o}),ct=o({__NG_ELEMENT_ID__:o});let It=0;function te(h){return kt(()=>{const v={},C={type:h.type,providersResolver:null,decls:h.decls,vars:h.vars,factory:null,template:h.template||null,consts:h.consts||null,ngContentSelectors:h.ngContentSelectors,hostBindings:h.hostBindings||null,hostVars:h.hostVars||0,hostAttrs:h.hostAttrs||null,contentQueries:h.contentQueries||null,declaredInputs:v,inputs:null,outputs:null,exportAs:h.exportAs||null,onPush:h.changeDetection===we.OnPush,directiveDefs:null,pipeDefs:null,selectors:h.selectors||je,viewQuery:h.viewQuery||null,features:h.features||null,data:h.data||{},encapsulation:h.encapsulation||Ze.Emulated,id:"c",styles:h.styles||je,_:null,setInput:null,schemas:h.schemas||null,tView:null},R=h.directives,x=h.features,z=h.pipes;return C.id+=It++,C.inputs=Me(h.inputs,v),C.outputs=Me(h.outputs),x&&x.forEach(et=>et(C)),C.directiveDefs=R?()=>("function"==typeof R?R():R).map(Ti):null,C.pipeDefs=z?()=>("function"==typeof z?z():z).map(ki):null,C})}function Ti(h){return pi(h)||function(h){return h[Ri]||null}(h)}function ki(h){return function(h){return h[Pe]||null}(h)}const Zi={};function Sn(h){return kt(()=>{const d={type:h.type,bootstrap:h.bootstrap||je,declarations:h.declarations||je,imports:h.imports||je,exports:h.exports||je,transitiveCompileScopes:null,schemas:h.schemas||null,id:h.id||null};return null!=h.id&&(Zi[h.id]=h.type),d})}function Me(h,d){if(null==h)return ue;const v={};for(const C in h)if(h.hasOwnProperty(C)){let R=h[C],x=R;Array.isArray(R)&&(x=R[1],R=R[0]),v[R]=C,d&&(d[R]=x)}return v}const Te=te;function Xe(h){return{type:h.type,name:h.name,factory:null,pure:!1!==h.pure,onDestroy:h.type.prototype.ngOnDestroy||null}}function pi(h){return h[ti]||null}function xn(h,d){const v=h[ie]||null;if(!v&&!0===d)throw new Error(`Type ${c(h)} does not have '\u0275mod' property.`);return v}function Eo(h){return Array.isArray(h)&&"object"==typeof h[1]}function Po(h){return Array.isArray(h)&&!0===h[1]}function Ts(h){return 0!=(8&h.flags)}function yn(h){return 2==(2&h.flags)}function Fr(h){return 1==(1&h.flags)}function qn(h){return null!==h.template}function Sr(h){return 0!=(512&h[2])}function cs(h,d){return h.hasOwnProperty(Mt)?h[Mt]:null}class Ir{constructor(d,v,C){this.previousValue=d,this.currentValue=v,this.firstChange=C}isFirstChange(){return this.firstChange}}function Mr(){return qo}function qo(h){return h.type.prototype.ngOnChanges&&(h.setInput=Bo),us}function us(){const h=To(this),d=null==h?void 0:h.current;if(d){const v=h.previous;if(v===ue)h.previous=d;else for(let C in d)v[C]=d[C];h.current=null,this.ngOnChanges(d)}}function Bo(h,d,v,C){const R=To(h)||function(h,d){return h[pr]=d}(h,{previous:ue,current:null}),x=R.current||(R.current={}),z=R.previous,et=this.declaredInputs[v],vt=z[et];x[et]=new Ir(vt&&vt.currentValue,d,z===ue),h[C]=d}Mr.ngInherit=!0;const pr="__ngSimpleChanges__";function To(h){return h[pr]||null}const Ws="http://www.w3.org/2000/svg";let Hr;function Ho(h){Hr=h}function Gn(h){return!!h.listen}const en={createRenderer:(h,d)=>void 0!==Hr?Hr:"undefined"!=typeof document?document:void 0};function Dt(h){for(;Array.isArray(h);)h=h[0];return h}function G(h,d){return Dt(d[h])}function St(h,d){return Dt(d[h.index])}function ei(h,d){return h.data[d]}function Ni(h,d){return h[d]}function mn(h,d){const v=d[h];return Eo(v)?v:v[0]}function Rn(h){return 4==(4&h[2])}function Vn(h){return 128==(128&h[2])}function mo(h,d){return null==d?null:h[d]}function to(h){h[18]=0}function Yo(h,d){h[5]+=d;let v=h,C=h[3];for(;null!==C&&(1===d&&1===v[5]||-1===d&&0===v[5]);)C[5]+=d,v=C,C=C[3]}const rn={lFrame:Co(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vr(){return rn.bindingsEnabled}function Di(){return rn.lFrame.lView}function In(){return rn.lFrame.tView}function Qt(h){return rn.lFrame.contextLView=h,h[8]}function F(){let h=Y();for(;null!==h&&64===h.type;)h=h.parent;return h}function Y(){return rn.lFrame.currentTNode}function Wt(h,d){const v=rn.lFrame;v.currentTNode=h,v.isParent=d}function se(){return rn.lFrame.isParent}function Ie(){rn.lFrame.isParent=!1}function mi(){return rn.isInCheckNoChangesMode}function Bi(h){rn.isInCheckNoChangesMode=h}function Gi(){const h=rn.lFrame;let d=h.bindingRootIndex;return-1===d&&(d=h.bindingRootIndex=h.tView.bindingStartIndex),d}function un(){return rn.lFrame.bindingIndex}function tn(){return rn.lFrame.bindingIndex++}function _n(h){const d=rn.lFrame,v=d.bindingIndex;return d.bindingIndex=d.bindingIndex+h,v}function Mo(h,d){const v=rn.lFrame;v.bindingIndex=v.bindingRootIndex=h,Vo(d)}function Vo(h){rn.lFrame.currentDirectiveIndex=h}function Gr(h){const d=rn.lFrame.currentDirectiveIndex;return-1===d?null:h[d]}function Qr(){return rn.lFrame.currentQueryIndex}function Uo(h){rn.lFrame.currentQueryIndex=h}function Os(h){const d=h[1];return 2===d.type?d.declTNode:1===d.type?h[6]:null}function qr(h,d,v){if(v&Yt.SkipSelf){let R=d,x=h;for(;!(R=R.parent,null!==R||v&Yt.Host||(R=Os(x),null===R||(x=x[15],10&R.type))););if(null===R)return!1;d=R,h=x}const C=rn.lFrame=Sa();return C.currentTNode=d,C.lView=h,!0}function ds(h){const d=Sa(),v=h[1];rn.lFrame=d,d.currentTNode=v.firstChild,d.lView=h,d.tView=v,d.contextLView=h,d.bindingIndex=v.bindingStartIndex,d.inI18n=!1}function Sa(){const h=rn.lFrame,d=null===h?null:h.child;return null===d?Co(h):d}function Co(h){const d={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:h,child:null,inI18n:!1};return null!==h&&(h.child=d),d}function ts(){const h=rn.lFrame;return rn.lFrame=h.parent,h.currentTNode=null,h.lView=null,h}const wa=ts;function ua(){const h=ts();h.isParent=!0,h.tView=null,h.selectedIndex=-1,h.contextLView=null,h.elementDepthCount=0,h.currentDirectiveIndex=-1,h.currentNamespace=null,h.bindingRootIndex=-1,h.bindingIndex=-1,h.currentQueryIndex=0}function on(){return rn.lFrame.selectedIndex}function An(h){rn.lFrame.selectedIndex=h}function On(){const h=rn.lFrame;return ei(h.tView,h.selectedIndex)}function Er(){rn.lFrame.currentNamespace=Ws}function es(){rn.lFrame.currentNamespace=null}function fs(h,d){for(let v=d.directiveStart,C=d.directiveEnd;v<C;v++){const x=h.data[v].type.prototype,{ngAfterContentInit:z,ngAfterContentChecked:et,ngAfterViewInit:vt,ngAfterViewChecked:Bt,ngOnDestroy:qt}=x;z&&(h.contentHooks||(h.contentHooks=[])).push(-v,z),et&&((h.contentHooks||(h.contentHooks=[])).push(v,et),(h.contentCheckHooks||(h.contentCheckHooks=[])).push(v,et)),vt&&(h.viewHooks||(h.viewHooks=[])).push(-v,vt),Bt&&((h.viewHooks||(h.viewHooks=[])).push(v,Bt),(h.viewCheckHooks||(h.viewCheckHooks=[])).push(v,Bt)),null!=qt&&(h.destroyHooks||(h.destroyHooks=[])).push(v,qt)}}function zs(h,d,v){hl(h,d,3,v)}function fr(h,d,v,C){(3&h[2])===v&&hl(h,d,v,C)}function Wr(h,d){let v=h[2];(3&v)===d&&(v&=2047,v+=1,h[2]=v)}function hl(h,d,v,C){const x=null!=C?C:-1,z=d.length-1;let et=0;for(let vt=void 0!==C?65535&h[18]:0;vt<z;vt++)if("number"==typeof d[vt+1]){if(et=d[vt],null!=C&&et>=C)break}else d[vt]<0&&(h[18]+=65536),(et<x||-1==x)&&(ic(h,v,d,vt),h[18]=(4294901760&h[18])+vt+2),vt++}function ic(h,d,v,C){const R=v[C]<0,x=v[C+1],et=h[R?-v[C]:v[C]];if(R){if(h[2]>>11<h[18]>>16&&(3&h[2])===d){h[2]+=2048;try{x.call(et)}finally{}}}else try{x.call(et)}finally{}}class ka{constructor(d,v,C){this.factory=d,this.resolving=!1,this.canSeeViewProviders=v,this.injectImpl=C}}function Na(h,d,v){const C=Gn(h);let R=0;for(;R<v.length;){const x=v[R];if("number"==typeof x){if(0!==x)break;R++;const z=v[R++],et=v[R++],vt=v[R++];C?h.setAttribute(d,et,vt,z):d.setAttributeNS(z,et,vt)}else{const z=x,et=v[++R];Al(z)?C&&h.setProperty(d,z,et):C?h.setAttribute(d,z,et):d.setAttribute(z,et),R++}}return R}function Ml(h){return 3===h||4===h||6===h}function Al(h){return 64===h.charCodeAt(0)}function Ls(h,d){if(null!==d&&0!==d.length)if(null===h||0===h.length)h=d.slice();else{let v=-1;for(let C=0;C<d.length;C++){const R=d[C];"number"==typeof R?v=R:0===v||ha(h,v,R,null,-1===v||2===v?d[++C]:null)}}return h}function ha(h,d,v,C,R){let x=0,z=h.length;if(-1===d)z=-1;else for(;x<h.length;){const et=h[x++];if("number"==typeof et){if(et===d){z=-1;break}if(et>d){z=x-1;break}}}for(;x<h.length;){const et=h[x];if("number"==typeof et)break;if(et===v){if(null===C)return void(null!==R&&(h[x+1]=R));if(C===h[x+1])return void(h[x+2]=R)}x++,null!==C&&x++,null!==R&&x++}-1!==z&&(h.splice(z,0,d),x=z+1),h.splice(x++,0,v),null!==C&&h.splice(x++,0,C),null!==R&&h.splice(x++,0,R)}function gs(h){return-1!==h}function Ja(h){return 32767&h}function ta(h,d){let v=function(h){return h>>16}(h),C=d;for(;v>0;)C=C[15],v--;return C}let Ol=!0;function dl(h){const d=Ol;return Ol=h,d}let ht=0;function J(h,d){const v=Nt(h,d);if(-1!==v)return v;const C=d[1];C.firstCreatePass&&(h.injectorIndex=d.length,wt(C.data,h),wt(d,null),wt(C.blueprint,null));const R=ne(h,d),x=h.injectorIndex;if(gs(R)){const z=Ja(R),et=ta(R,d),vt=et[1].data;for(let Bt=0;Bt<8;Bt++)d[x+Bt]=et[z+Bt]|vt[z+Bt]}return d[x+8]=R,x}function wt(h,d){h.push(0,0,0,0,0,0,0,0,d)}function Nt(h,d){return-1===h.injectorIndex||h.parent&&h.parent.injectorIndex===h.injectorIndex||null===d[h.injectorIndex+8]?-1:h.injectorIndex}function ne(h,d){if(h.parent&&-1!==h.parent.injectorIndex)return h.parent.injectorIndex;let v=0,C=null,R=d;for(;null!==R;){const x=R[1],z=x.type;if(C=2===z?x.declTNode:1===z?R[6]:null,null===C)return-1;if(v++,R=R[15],-1!==C.injectorIndex)return C.injectorIndex|v<<16}return-1}function Se(h,d,v){!function(h,d,v){let C;"string"==typeof v?C=v.charCodeAt(0)||0:v.hasOwnProperty(ct)&&(C=v[ct]),null==C&&(C=v[ct]=ht++);const R=255&C;d.data[h+(R>>5)]|=1<<R}(h,d,v)}function fi(h,d,v){if(v&Yt.Optional)return h;tt(d,"NodeInjector")}function ji(h,d,v,C){if(v&Yt.Optional&&void 0===C&&(C=null),0==(v&(Yt.Self|Yt.Host))){const R=h[9],x=oe(void 0);try{return R?R.get(d,C,v&Yt.Optional):re(d,C,v&Yt.Optional)}finally{oe(x)}}return fi(C,d,v)}function Fn(h,d,v,C=Yt.Default,R){if(null!==h){const x=function(h){if("string"==typeof h)return h.charCodeAt(0)||0;const d=h.hasOwnProperty(ct)?h[ct]:void 0;return"number"==typeof d?d>=0?255&d:ao:d}(v);if("function"==typeof x){if(!qr(d,h,C))return C&Yt.Host?fi(R,v,C):ji(d,v,C,R);try{const z=x(C);if(null!=z||C&Yt.Optional)return z;tt(v)}finally{wa()}}else if("number"==typeof x){let z=null,et=Nt(h,d),vt=-1,Bt=C&Yt.Host?d[16][6]:null;for((-1===et||C&Yt.SkipSelf)&&(vt=-1===et?ne(h,d):d[et+8],-1!==vt&&pl(C,!1)?(z=d[1],et=Ja(vt),d=ta(vt,d)):et=-1);-1!==et;){const qt=d[1];if(Or(x,et,qt.data)){const be=_o(et,d,v,z,C,Bt);if(be!==hn)return be}vt=d[et+8],-1!==vt&&pl(C,d[1].data[et+8]===Bt)&&Or(x,et,d)?(z=qt,et=Ja(vt),d=ta(vt,d)):et=-1}}}return ji(d,v,C,R)}const hn={};function ao(){return new jr(F(),Di())}function _o(h,d,v,C,R,x){const z=d[1],et=z.data[h+8],qt=Ra(et,z,v,null==C?yn(et)&&Ol:C!=z&&0!=(3&et.type),R&Yt.Host&&x===et);return null!==qt?is(d,z,qt,et):hn}function Ra(h,d,v,C,R){const x=h.providerIndexes,z=d.data,et=1048575&x,vt=h.directiveStart,qt=x>>20,Fe=R?et+qt:h.directiveEnd;for(let ni=C?et:et+qt;ni<Fe;ni++){const Si=z[ni];if(ni<vt&&v===Si||ni>=vt&&Si.type===v)return ni}if(R){const ni=z[vt];if(ni&&qn(ni)&&ni.type===v)return vt}return null}function is(h,d,v,C){let R=h[v];const x=d.data;if(function(h){return h instanceof ka}(R)){const z=R;z.resolving&&function(h,d){throw new $("200",`Circular dependency in DI detected for ${h}`)}(Ct(x[v]));const et=dl(z.canSeeViewProviders);z.resolving=!0;const vt=z.injectImpl?oe(z.injectImpl):null;qr(h,C,Yt.Default);try{R=h[v]=z.factory(void 0,x,h,C),d.firstCreatePass&&v>=C.directiveStart&&function(h,d,v){const{ngOnChanges:C,ngOnInit:R,ngDoCheck:x}=d.type.prototype;if(C){const z=qo(d);(v.preOrderHooks||(v.preOrderHooks=[])).push(h,z),(v.preOrderCheckHooks||(v.preOrderCheckHooks=[])).push(h,z)}R&&(v.preOrderHooks||(v.preOrderHooks=[])).push(0-h,R),x&&((v.preOrderHooks||(v.preOrderHooks=[])).push(h,x),(v.preOrderCheckHooks||(v.preOrderCheckHooks=[])).push(h,x))}(v,x[v],d)}finally{null!==vt&&oe(vt),dl(et),z.resolving=!1,wa()}}return R}function Or(h,d,v){return!!(v[d+(h>>5)]&1<<h)}function pl(h,d){return!(h&Yt.Self||h&Yt.Host&&d)}class jr{constructor(d,v){this._tNode=d,this._lView=v}get(d,v,C){return Fn(this._tNode,this._lView,d,C,v)}}function Ps(h){return kt(()=>{const d=h.prototype.constructor,v=d[Mt]||ea(d),C=Object.prototype;let R=Object.getPrototypeOf(h.prototype).constructor;for(;R&&R!==C;){const x=R[Mt]||ea(R);if(x&&x!==v)return x;R=Object.getPrototypeOf(R)}return x=>new x})}function ea(h){return V(h)?()=>{const d=ea(U(h));return d&&d()}:cs(h)}function fl(h){return function(h,d){if("class"===d)return h.classes;if("style"===d)return h.styles;const v=h.attrs;if(v){const C=v.length;let R=0;for(;R<C;){const x=v[R];if(Ml(x))break;if(0===x)R+=2;else if("number"==typeof x)for(R++;R<C&&"string"==typeof v[R];)R++;else{if(x===d)return v[R+1];R+=2}}}return null}(F(),h)}const gl="__parameters__";function Rs(h,d,v){return kt(()=>{const C=function(h){return function(...v){if(h){const C=h(...v);for(const R in C)this[R]=C[R]}}}(d);function R(...x){if(this instanceof R)return C.apply(this,x),this;const z=new R(...x);return et.annotation=z,et;function et(vt,Bt,qt){const be=vt.hasOwnProperty(gl)?vt[gl]:Object.defineProperty(vt,gl,{value:[]})[gl];for(;be.length<=qt;)be.push(null);return(be[qt]=be[qt]||[]).push(z),vt}}return v&&(R.prototype=Object.create(v.prototype)),R.prototype.ngMetadataName=h,R.annotationCls=R,R})}class er{constructor(d,v){this._desc=d,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof v?this.__NG_ELEMENT_ID__=v:void 0!==v&&(this.\u0275prov=Ne({token:this,providedIn:v.providedIn||"root",factory:v.factory}))}toString(){return`InjectionToken ${this._desc}`}}const nc=new er("AnalyzeForEntryComponents");function _s(h,d){void 0===d&&(d=h);for(let v=0;v<h.length;v++){let C=h[v];Array.isArray(C)?(d===h&&(d=h.slice(0,v)),_s(C,d)):d!==h&&d.push(C)}return d}function pa(h,d){h.forEach(v=>Array.isArray(v)?pa(v,d):d(v))}function Fa(h,d,v){d>=h.length?h.push(v):h.splice(d,0,v)}function na(h,d){return d>=h.length-1?h.pop():h.splice(d,1)[0]}function kl(h,d){const v=[];for(let C=0;C<h;C++)v.push(d);return v}function xr(h,d,v){let C=Da(h,d);return C>=0?h[1|C]=v:(C=~C,function(h,d,v,C){let R=h.length;if(R==d)h.push(v,C);else if(1===R)h.push(C,h[0]),h[0]=v;else{for(R--,h.push(h[R-1],h[R]);R>d;)h[R]=h[R-2],R--;h[d]=v,h[d+1]=C}}(h,C,d,v)),C}function Zc(h,d){const v=Da(h,d);if(v>=0)return h[1|v]}function Da(h,d){return function(h,d,v){let C=0,R=h.length>>v;for(;R!==C;){const x=C+(R-C>>1),z=h[x<<v];if(d===z)return x<<v;z>d?R=x:C=x+1}return~(R<<v)}(h,d,1)}const Nl={},ml="__NG_DI_FLAG__",Go="ngTempTokenPath",_l=/\n/gm,Pl="__source",vs=o({provide:String,useValue:o});let Bs;function Ec(h){const d=Bs;return Bs=h,d}function Fl(h,d=Yt.Default){if(void 0===Bs)throw new Error("inject() must be called from an injection context");return null===Bs?re(h,void 0,d):Bs.get(h,d&Yt.Optional?null:void 0,d)}function ar(h,d=Yt.Default){return(ge||Fl)(U(h),d)}const tl=ar;function Ia(h){const d=[];for(let v=0;v<h.length;v++){const C=U(h[v]);if(Array.isArray(C)){if(0===C.length)throw new Error("Arguments array must have arguments.");let R,x=Yt.Default;for(let z=0;z<C.length;z++){const et=C[z],vt=th(et);"number"==typeof vt?-1===vt?R=et.token:x|=vt:R=et}d.push(ar(R,x))}else d.push(ar(C))}return d}function vl(h,d){return h[ml]=d,h.prototype[ml]=d,h}function th(h){return h[ml]}const Hl=vl(Rs("Inject",h=>({token:h})),-1),Ys=vl(Rs("Optional"),8),Ha=vl(Rs("SkipSelf"),4);let cc;function fa(h){var d;return(null===(d=function(){if(void 0===cc&&(cc=null,gi.trustedTypes))try{cc=gi.trustedTypes.createPolicy("angular",{createHTML:h=>h,createScript:h=>h,createScriptURL:h=>h})}catch(h){}return cc}())||void 0===d?void 0:d.createHTML(h))||h}class Va{constructor(d){this.changingThisBreaksApplicationSecurity=d}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Mu extends Va{getTypeName(){return"HTML"}}class El extends Va{getTypeName(){return"Style"}}class Rc extends Va{getTypeName(){return"Script"}}class gt extends Va{getTypeName(){return"URL"}}class Tt extends Va{getTypeName(){return"ResourceURL"}}function Kt(h){return h instanceof Va?h.changingThisBreaksApplicationSecurity:h}function fe(h,d){const v=Ce(h);if(null!=v&&v!==d){if("ResourceURL"===v&&"URL"===d)return!0;throw new Error(`Required a safe ${d}, got a ${v} (see https://g.co/ng/security#xss)`)}return v===d}function Ce(h){return h instanceof Va&&h.getTypeName()||null}function Je(h){return new Mu(h)}function De(h){return new El(h)}function Ve(h){return new Rc(h)}function hi(h){return new gt(h)}function _i(h){return new Tt(h)}class bn{constructor(d){this.inertDocumentHelper=d}getInertBodyElement(d){d="<body><remove></remove>"+d;try{const v=(new window.DOMParser).parseFromString(fa(d),"text/html").body;return null===v?this.inertDocumentHelper.getInertBodyElement(d):(v.removeChild(v.firstChild),v)}catch(v){return null}}}class ln{constructor(d){if(this.defaultDoc=d,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const v=this.inertDocument.createElement("html");this.inertDocument.appendChild(v);const C=this.inertDocument.createElement("body");v.appendChild(C)}}getInertBodyElement(d){const v=this.inertDocument.createElement("template");if("content"in v)return v.innerHTML=fa(d),v;const C=this.inertDocument.createElement("body");return C.innerHTML=fa(d),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(C),C}stripCustomNsAttrs(d){const v=d.attributes;for(let R=v.length-1;0<R;R--){const z=v.item(R).name;("xmlns:ns1"===z||0===z.indexOf("ns1:"))&&d.removeAttribute(z)}let C=d.firstChild;for(;C;)C.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(C),C=C.nextSibling}}const lr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,eo=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function bo(h){return(h=String(h)).match(lr)||h.match(eo)?h:"unsafe:"+h}function co(h){const d={};for(const v of h.split(","))d[v]=!0;return d}function ys(...h){const d={};for(const v of h)for(const C in v)v.hasOwnProperty(C)&&(d[C]=!0);return d}const rs=co("area,br,col,hr,img,wbr"),kr=co("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ua=co("rp,rt"),eu=ys(rs,ys(kr,co("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ys(Ua,co("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ys(Ua,kr)),hc=co("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Dc=co("srcset"),Ga=ys(hc,Dc,co("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),co("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ah=co("script,style,template");class rh{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(d){let v=d.firstChild,C=!0;for(;v;)if(v.nodeType===Node.ELEMENT_NODE?C=this.startElement(v):v.nodeType===Node.TEXT_NODE?this.chars(v.nodeValue):this.sanitizedSomething=!0,C&&v.firstChild)v=v.firstChild;else for(;v;){v.nodeType===Node.ELEMENT_NODE&&this.endElement(v);let R=this.checkClobberedElement(v,v.nextSibling);if(R){v=R;break}v=this.checkClobberedElement(v,v.parentNode)}return this.buf.join("")}startElement(d){const v=d.nodeName.toLowerCase();if(!eu.hasOwnProperty(v))return this.sanitizedSomething=!0,!Ah.hasOwnProperty(v);this.buf.push("<"),this.buf.push(v);const C=d.attributes;for(let R=0;R<C.length;R++){const x=C.item(R),z=x.name,et=z.toLowerCase();if(!Ga.hasOwnProperty(et)){this.sanitizedSomething=!0;continue}let vt=x.value;hc[et]&&(vt=bo(vt)),Dc[et]&&(h=vt,vt=(h=String(h)).split(",").map(d=>bo(d.trim())).join(", ")),this.buf.push(" ",z,'="',iu(vt),'"')}var h;return this.buf.push(">"),!0}endElement(d){const v=d.nodeName.toLowerCase();eu.hasOwnProperty(v)&&!rs.hasOwnProperty(v)&&(this.buf.push("</"),this.buf.push(v),this.buf.push(">"))}chars(d){this.buf.push(iu(d))}checkClobberedElement(d,v){if(v&&(d.compareDocumentPosition(v)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${d.outerHTML}`);return v}}const Oh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ic=/([^\#-~ |!])/g;function iu(h){return h.replace(/&/g,"&amp;").replace(Oh,function(d){return"&#"+(1024*(d.charCodeAt(0)-55296)+(d.charCodeAt(1)-56320)+65536)+";"}).replace(Ic,function(d){return"&#"+d.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Mc;function ol(h,d){let v=null;try{Mc=Mc||function(h){const d=new ln(h);return function(){try{return!!(new window.DOMParser).parseFromString(fa(""),"text/html")}catch(h){return!1}}()?new bn(d):d}(h);let C=d?String(d):"";v=Mc.getInertBodyElement(C);let R=5,x=C;do{if(0===R)throw new Error("Failed to sanitize html because the input is unstable");R--,C=x,x=v.innerHTML,v=Mc.getInertBodyElement(C)}while(C!==x);return fa((new rh).sanitizeChildren(Wl(v)||v))}finally{if(v){const C=Wl(v)||v;for(;C.firstChild;)C.removeChild(C.firstChild)}}}function Wl(h){return"content"in h&&function(h){return h.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===h.nodeName}(h)?h.content:null}var cr=(()=>((cr=cr||{})[cr.NONE=0]="NONE",cr[cr.HTML=1]="HTML",cr[cr.STYLE=2]="STYLE",cr[cr.SCRIPT=3]="SCRIPT",cr[cr.URL=4]="URL",cr[cr.RESOURCE_URL=5]="RESOURCE_URL",cr))();function nu(h){const d=function(){const h=Di();return h&&h[12]}();return d?d.sanitize(cr.URL,h)||"":fe(h,"URL")?Kt(h):bo(st(h))}const ch="__ngContext__";function Es(h,d){h[ch]=d}function Lu(h){const d=function(h){return h[ch]||null}(h);return d?Array.isArray(d)?d:d.lView:null}function Bu(h){return h.ngOriginalError}function Vh(h,...d){h.error(...d)}class zl{constructor(){this._console=console}handleError(d){const v=this._findOriginalError(d),C=(h=d)&&h.ngErrorLogger||Vh;var h;C(this._console,"ERROR",d),v&&C(this._console,"ORIGINAL ERROR",v)}_findOriginalError(d){let v=d&&Bu(d);for(;v&&Bu(v);)v=Bu(v);return v||null}}const Xl=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(gi))();function Oa(h){return h instanceof Function?h():h}var _a=(()=>((_a=_a||{})[_a.Important=1]="Important",_a[_a.DashCase=2]="DashCase",_a))();function cu(h,d){return undefined(h,d)}function hu(h){const d=h[3];return Po(d)?d[3]:d}function du(h){return Nc(h[13])}function Wa(h){return Nc(h[4])}function Nc(h){for(;null!==h&&!Po(h);)h=h[4];return h}function ja(h,d,v,C,R){if(null!=C){let x,z=!1;Po(C)?x=C:Eo(C)&&(z=!0,C=C[0]);const et=Dt(C);0===h&&null!==v?null==R?Ut(d,v,et):Vt(d,v,et,R||null,!0):1===h&&null!==v?Vt(d,v,et,R||null,!0):2===h?function(h,d,v){const C=me(h,d);C&&function(h,d,v,C){Gn(h)?h.removeChild(d,v,C):d.removeChild(v)}(h,C,d,v)}(d,et,z):3===h&&d.destroyNode(et),null!=x&&function(h,d,v,C,R){const x=v[7];x!==Dt(v)&&ja(d,h,C,x,R);for(let et=10;et<v.length;et++){const vt=v[et];io(vt[1],vt,h,d,C,x)}}(d,h,x,v,R)}}function $l(h,d,v){return Gn(h)?h.createElement(d,v):null===v?h.createElement(d):h.createElementNS(v,d)}function ur(h,d){const v=h[9],C=v.indexOf(d),R=d[3];1024&d[2]&&(d[2]&=-1025,Yo(R,-1)),v.splice(C,1)}function _h(h,d){if(h.length<=10)return;const v=10+d,C=h[v];if(C){const R=C[17];null!==R&&R!==h&&ur(R,C),d>0&&(h[v-1][4]=C[4]);const x=na(h,10+d);!function(h,d){io(h,d,d[11],2,null,null),d[0]=null,d[6]=null}(C[1],C);const z=x[19];null!==z&&z.detachView(x[1]),C[3]=null,C[4]=null,C[2]&=-129}return C}function pu(h,d){if(!(256&d[2])){const v=d[11];Gn(v)&&v.destroyNode&&io(h,d,v,3,null,null),function(h){let d=h[13];if(!d)return T(h[1],h);for(;d;){let v=null;if(Eo(d))v=d[13];else{const C=d[10];C&&(v=C)}if(!v){for(;d&&!d[4]&&d!==h;)Eo(d)&&T(d[1],d),d=d[3];null===d&&(d=h),Eo(d)&&T(d[1],d),v=d&&d[4]}d=v}}(d)}}function T(h,d){if(!(256&d[2])){d[2]&=-129,d[2]|=256,function(h,d){let v;if(null!=h&&null!=(v=h.destroyHooks))for(let C=0;C<v.length;C+=2){const R=d[v[C]];if(!(R instanceof ka)){const x=v[C+1];if(Array.isArray(x))for(let z=0;z<x.length;z+=2){const et=R[x[z]],vt=x[z+1];try{vt.call(et)}finally{}}else try{x.call(R)}finally{}}}}(h,d),function(h,d){const v=h.cleanup,C=d[7];let R=-1;if(null!==v)for(let x=0;x<v.length-1;x+=2)if("string"==typeof v[x]){const z=v[x+1],et="function"==typeof z?z(d):Dt(d[z]),vt=C[R=v[x+2]],Bt=v[x+3];"boolean"==typeof Bt?et.removeEventListener(v[x],vt,Bt):Bt>=0?C[R=Bt]():C[R=-Bt].unsubscribe(),x+=2}else{const z=C[R=v[x+1]];v[x].call(z)}if(null!==C){for(let x=R+1;x<C.length;x++)C[x]();d[7]=null}}(h,d),1===d[1].type&&Gn(d[11])&&d[11].destroy();const v=d[17];if(null!==v&&Po(d[3])){v!==d[3]&&ur(v,d);const C=d[19];null!==C&&C.detachView(h)}}}function Q(h,d,v){return function(h,d,v){let C=d;for(;null!==C&&40&C.type;)C=(d=C).parent;if(null===C)return v[0];if(2&C.flags){const R=h.data[C.directiveStart].encapsulation;if(R===Ze.None||R===Ze.Emulated)return null}return St(C,v)}(h,d.parent,v)}function Vt(h,d,v,C,R){Gn(h)?h.insertBefore(d,v,C,R):d.insertBefore(v,C,R)}function Ut(h,d,v){Gn(h)?h.appendChild(d,v):d.appendChild(v)}function ee(h,d,v,C,R){null!==C?Vt(h,d,v,C,R):Ut(h,d,v)}function me(h,d){return Gn(h)?h.parentNode(d):d.parentNode}function Ge(h,d,v){return si(h,d,v)}let si=function(h,d,v){return 40&h.type?St(h,v):null};function xi(h,d,v,C){const R=Q(h,C,d),x=d[11],et=Ge(C.parent||d[6],C,d);if(null!=R)if(Array.isArray(v))for(let vt=0;vt<v.length;vt++)ee(x,R,v[vt],et,!1);else ee(x,R,v,et,!1)}function Ji(h,d){if(null!==d){const v=d.type;if(3&v)return St(d,h);if(4&v)return Xn(-1,h[d.index]);if(8&v){const C=d.child;if(null!==C)return Ji(h,C);{const R=h[d.index];return Po(R)?Xn(-1,R):Dt(R)}}if(32&v)return cu(d,h)()||Dt(h[d.index]);{const C=Ii(h,d);return null!==C?Array.isArray(C)?C[0]:Ji(hu(h[16]),C):Ji(h,d.next)}}return null}function Ii(h,d){return null!==d?h[16][6].projection[d.projection]:null}function Xn(h,d){const v=10+h+1;if(v<d.length){const C=d[v],R=C[1].firstChild;if(null!==R)return Ji(C,R)}return d[7]}function Oo(h,d,v,C,R,x,z){for(;null!=v;){const et=C[v.index],vt=v.type;if(z&&0===d&&(et&&Es(Dt(et),C),v.flags|=4),64!=(64&v.flags))if(8&vt)Oo(h,d,v.child,C,R,x,!1),ja(d,h,R,et,x);else if(32&vt){const Bt=cu(v,C);let qt;for(;qt=Bt();)ja(d,h,R,qt,x);ja(d,h,R,et,x)}else 16&vt?Zt(h,d,C,v,R,x):ja(d,h,R,et,x);v=z?v.projectionNext:v.next}}function io(h,d,v,C,R,x){Oo(v,C,h.firstChild,d,R,x,!1)}function Zt(h,d,v,C,R,x){const z=v[16],vt=z[6].projection[C.projection];if(Array.isArray(vt))for(let Bt=0;Bt<vt.length;Bt++)ja(d,h,R,vt[Bt],x);else Oo(h,d,vt,z[3],R,x,!0)}function Cr(h,d,v){Gn(h)?h.setAttribute(d,"style",v):d.style.cssText=v}function jn(h,d,v){Gn(h)?""===v?h.removeAttribute(d,"class"):h.setAttribute(d,"class",v):d.className=v}function Lr(h,d,v){let C=h.length;for(;;){const R=h.indexOf(d,v);if(-1===R)return R;if(0===R||h.charCodeAt(R-1)<=32){const x=d.length;if(R+x===C||h.charCodeAt(R+x)<=32)return R}v=R+1}}const ba="ng-template";function ya(h,d,v){let C=0;for(;C<h.length;){let R=h[C++];if(v&&"class"===R){if(R=h[C],-1!==Lr(R.toLowerCase(),d,0))return!0}else if(1===R){for(;C<h.length&&"string"==typeof(R=h[C++]);)if(R.toLowerCase()===d)return!0;return!1}}return!1}function Zl(h){return 4===h.type&&h.value!==ba}function ju(h,d,v){return d===(4!==h.type||v?h.value:ba)}function vh(h,d,v){let C=4;const R=h.attrs||[],x=function(h){for(let d=0;d<h.length;d++)if(Ml(h[d]))return d;return h.length}(R);let z=!1;for(let et=0;et<d.length;et++){const vt=d[et];if("number"!=typeof vt){if(!z)if(4&C){if(C=2|1&C,""!==vt&&!ju(h,vt,v)||""===vt&&1===d.length){if(ra(C))return!1;z=!0}}else{const Bt=8&C?vt:d[++et];if(8&C&&null!==h.attrs){if(!ya(h.attrs,Bt,v)){if(ra(C))return!1;z=!0}continue}const be=Yh(8&C?"class":vt,R,Zl(h),v);if(-1===be){if(ra(C))return!1;z=!0;continue}if(""!==Bt){let Fe;Fe=be>x?"":R[be+1].toLowerCase();const ni=8&C?Fe:null;if(ni&&-1!==Lr(ni,Bt,0)||2&C&&Bt!==Fe){if(ra(C))return!1;z=!0}}}}else{if(!z&&!ra(C)&&!ra(vt))return!1;if(z&&ra(vt))continue;z=!1,C=vt|1&C}}return ra(C)||z}function ra(h){return 0==(1&h)}function Yh(h,d,v,C){if(null===d)return-1;let R=0;if(C||!v){let x=!1;for(;R<d.length;){const z=d[R];if(z===h)return R;if(3===z||6===z)x=!0;else{if(1===z||2===z){let et=d[++R];for(;"string"==typeof et;)et=d[++R];continue}if(4===z)break;if(0===z){R+=4;continue}}R+=x?1:2}return-1}return function(h,d){let v=h.indexOf(4);if(v>-1)for(v++;v<h.length;){const C=h[v];if("number"==typeof C)return-1;if(C===d)return v;v++}return-1}(d,h)}function Xh(h,d,v=!1){for(let C=0;C<d.length;C++)if(vh(h,d[C],v))return!0;return!1}function uo(h,d){t:for(let v=0;v<d.length;v++){const C=d[v];if(h.length===C.length){for(let R=0;R<h.length;R++)if(h[R]!==C[R])continue t;return!0}}return!1}function _r(h,d){return h?":not("+d.trim()+")":d}function Op(h){let d=h[0],v=1,C=2,R="",x=!1;for(;v<h.length;){let z=h[v];if("string"==typeof z)if(2&C){const et=h[++v];R+="["+z+(et.length>0?'="'+et+'"':"")+"]"}else 8&C?R+="."+z:4&C&&(R+=" "+z);else""!==R&&!ra(z)&&(d+=_r(x,R),R=""),C=z,x=x||!ra(C);v++}return""!==R&&(d+=_r(x,R)),d}const Ln={};function Yu(h){Xd(In(),Di(),on()+h,mi())}function Xd(h,d,v,C){if(!C)if(3==(3&d[2])){const x=h.preOrderCheckHooks;null!==x&&zs(d,x,v)}else{const x=h.preOrderHooks;null!==x&&fr(d,x,0,v)}An(v)}function Xu(h,d){return h<<17|d<<2}function Sl(h){return h>>17&32767}function za(h){return 2|h}function wl(h){return(131068&h)>>2}function Kh(h,d){return-131069&h|d<<2}function fu(h){return 1|h}function Np(h,d){const v=h.contentQueries;if(null!==v)for(let C=0;C<v.length;C+=2){const R=v[C],x=v[C+1];if(-1!==x){const z=h.data[x];Uo(R),z.contentQueries(2,d[x],x)}}}function nd(h,d,v,C,R,x,z,et,vt,Bt){const qt=d.blueprint.slice();return qt[0]=R,qt[2]=140|C,to(qt),qt[3]=qt[15]=h,qt[8]=v,qt[10]=z||h&&h[10],qt[11]=et||h&&h[11],qt[12]=vt||h&&h[12]||null,qt[9]=Bt||h&&h[9]||null,qt[6]=x,qt[16]=2==d.type?h[16]:qt,qt}function Th(h,d,v,C,R){let x=h.data[d];if(null===x)x=function(h,d,v,C,R){const x=Y(),z=se(),vt=h.data[d]=function(h,d,v,C,R,x){return{type:v,index:C,insertBeforeIndex:null,injectorIndex:d?d.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:R,attrs:x,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:d,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,z?x:x&&x.parent,v,d,C,R);return null===h.firstChild&&(h.firstChild=vt),null!==x&&(z?null==x.child&&null!==vt.parent&&(x.child=vt):null===x.next&&(x.next=vt)),vt}(h,d,v,C,R),rn.lFrame.inI18n&&(x.flags|=64);else if(64&x.type){x.type=v,x.value=C,x.attrs=R;const z=function(){const h=rn.lFrame,d=h.currentTNode;return h.isParent?d:d.parent}();x.injectorIndex=null===z?-1:z.injectorIndex}return Wt(x,!0),x}function Ch(h,d,v,C){if(0===v)return-1;const R=d.length;for(let x=0;x<v;x++)d.push(C),h.blueprint.push(C),h.data.push(null);return R}function od(h,d,v){ds(d);try{const C=h.viewQuery;null!==C&&up(1,C,v);const R=h.template;null!==R&&Fp(h,d,R,1,v),h.firstCreatePass&&(h.firstCreatePass=!1),h.staticContentQueries&&Np(h,d),h.staticViewQueries&&up(2,h.viewQuery,v);const x=h.components;null!==x&&function(h,d){for(let v=0;v<d.length;v++)Jf(h,d[v])}(d,x)}catch(C){throw h.firstCreatePass&&(h.incompleteFirstPass=!0,h.firstCreatePass=!1),C}finally{d[2]&=-5,ua()}}function Sh(h,d,v,C){const R=d[2];if(256==(256&R))return;ds(d);const x=mi();try{to(d),function(h){rn.lFrame.bindingIndex=h}(h.bindingStartIndex),null!==v&&Fp(h,d,v,2,C);const z=3==(3&R);if(!x)if(z){const Bt=h.preOrderCheckHooks;null!==Bt&&zs(d,Bt,null)}else{const Bt=h.preOrderHooks;null!==Bt&&fr(d,Bt,0,null),Wr(d,0)}if(function(h){for(let d=du(h);null!==d;d=Wa(d)){if(!d[2])continue;const v=d[9];for(let C=0;C<v.length;C++){const R=v[C],x=R[3];0==(1024&R[2])&&Yo(x,1),R[2]|=1024}}}(d),function(h){for(let d=du(h);null!==d;d=Wa(d))for(let v=10;v<d.length;v++){const C=d[v],R=C[1];Vn(C)&&Sh(R,C,R.template,C[8])}}(d),null!==h.contentQueries&&Np(h,d),!x)if(z){const Bt=h.contentCheckHooks;null!==Bt&&zs(d,Bt)}else{const Bt=h.contentHooks;null!==Bt&&fr(d,Bt,1),Wr(d,1)}!function(h,d){const v=h.hostBindingOpCodes;if(null!==v)try{for(let C=0;C<v.length;C++){const R=v[C];if(R<0)An(~R);else{const x=R,z=v[++C],et=v[++C];Mo(z,x),et(2,d[x])}}}finally{An(-1)}}(h,d);const et=h.components;null!==et&&function(h,d){for(let v=0;v<d.length;v++)Jp(h,d[v])}(d,et);const vt=h.viewQuery;if(null!==vt&&up(2,vt,C),!x)if(z){const Bt=h.viewCheckHooks;null!==Bt&&zs(d,Bt)}else{const Bt=h.viewHooks;null!==Bt&&fr(d,Bt,2),Wr(d,2)}!0===h.firstUpdatePass&&(h.firstUpdatePass=!1),x||(d[2]&=-73),1024&d[2]&&(d[2]&=-1025,Yo(d[3],-1))}finally{ua()}}function Pp(h,d,v,C){const R=d[10],x=!mi(),z=Rn(d);try{x&&!z&&R.begin&&R.begin(),z&&od(h,d,C),Sh(h,d,v,C)}finally{x&&!z&&R.end&&R.end()}}function Fp(h,d,v,C,R){const x=on(),z=2&C;try{An(-1),z&&d.length>20&&Xd(h,d,20,mi()),v(C,R)}finally{An(x)}}function Bp(h,d,v){if(Ts(d)){const R=d.directiveEnd;for(let x=d.directiveStart;x<R;x++){const z=h.data[x];z.contentQueries&&z.contentQueries(1,v[x],x)}}}function ip(h,d,v){!Vr()||(function(h,d,v,C){const R=v.directiveStart,x=v.directiveEnd;h.firstCreatePass||J(v,d),Es(C,d);const z=v.initialInputs;for(let et=R;et<x;et++){const vt=h.data[et],Bt=qn(vt);Bt&&Wf(d,v,vt);const qt=is(d,h,et,v);Es(qt,d),null!==z&&jf(0,et-R,qt,vt,0,z),Bt&&(mn(v.index,d)[8]=qt)}}(h,d,v,St(v,d)),128==(128&v.flags)&&function(h,d,v){const C=v.directiveStart,R=v.directiveEnd,z=v.index,et=rn.lFrame.currentDirectiveIndex;try{An(z);for(let vt=C;vt<R;vt++){const Bt=h.data[vt],qt=d[vt];Vo(vt),(null!==Bt.hostBindings||0!==Bt.hostVars||null!==Bt.hostAttrs)&&op(Bt,qt)}}finally{An(-1),Vo(et)}}(h,d,v))}function mu(h,d,v=St){const C=d.localNames;if(null!==C){let R=d.index+1;for(let x=0;x<C.length;x+=2){const z=C[x+1],et=-1===z?v(d,h):h[z];h[R++]=et}}}function Hp(h){const d=h.tView;return null===d||d.incompleteFirstPass?h.tView=yd(1,null,h.template,h.decls,h.vars,h.directiveDefs,h.pipeDefs,h.viewQuery,h.schemas,h.consts):d}function yd(h,d,v,C,R,x,z,et,vt,Bt){const qt=20+C,be=qt+R,Fe=function(h,d){const v=[];for(let C=0;C<d;C++)v.push(C<h?null:Ln);return v}(qt,be),ni="function"==typeof Bt?Bt():Bt;return Fe[1]={type:h,blueprint:Fe,template:v,queries:null,viewQuery:et,declTNode:d,data:Fe.slice().fill(null,qt),bindingStartIndex:qt,expandoStartIndex:be,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof x?x():x,pipeRegistry:"function"==typeof z?z():z,firstChild:null,schemas:vt,consts:ni,incompleteFirstPass:!1}}function Gp(h,d,v,C){const R=Zp(d);null===v?R.push(C):(R.push(v),h.firstCreatePass&&hp(h).push(C,R.length-1))}function Wp(h,d,v){for(let C in h)if(h.hasOwnProperty(C)){const R=h[C];(v=null===v?{}:v).hasOwnProperty(C)?v[C].push(d,R):v[C]=[d,R]}return v}function Ea(h,d,v,C,R,x,z,et){const vt=St(d,v);let qt,Bt=d.inputs;!et&&null!=Bt&&(qt=Bt[C])?(tf(h,v,qt,C,R),yn(d)&&function(h,d){const v=mn(d,h);16&v[2]||(v[2]|=64)}(v,d.index)):3&d.type&&(C=function(h){return"class"===h?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h}(C),R=null!=z?z(R,d.value||"",C):R,Gn(x)?x.setProperty(vt,C,R):Al(C)||(vt.setProperty?vt.setProperty(C,R):vt[C]=R))}function np(h,d,v,C){let R=!1;if(Vr()){const x=function(h,d,v){const C=h.directiveRegistry;let R=null;if(C)for(let x=0;x<C.length;x++){const z=C[x];Xh(v,z.selectors,!1)&&(R||(R=[]),Se(J(v,d),h,z.type),qn(z)?(Yp(h,v),R.unshift(z)):R.push(z))}return R}(h,d,v),z=null===C?null:{"":-1};if(null!==x){R=!0,Xp(v,h.data.length,x.length);for(let qt=0;qt<x.length;qt++){const be=x[qt];be.providersResolver&&be.providersResolver(be)}let et=!1,vt=!1,Bt=Ch(h,d,x.length,null);for(let qt=0;qt<x.length;qt++){const be=x[qt];v.mergedAttrs=Ls(v.mergedAttrs,be.hostAttrs),Kp(h,v,d,Bt,be),Gf(Bt,be,z),null!==be.contentQueries&&(v.flags|=8),(null!==be.hostBindings||null!==be.hostAttrs||0!==be.hostVars)&&(v.flags|=128);const Fe=be.type.prototype;!et&&(Fe.ngOnChanges||Fe.ngOnInit||Fe.ngDoCheck)&&((h.preOrderHooks||(h.preOrderHooks=[])).push(v.index),et=!0),!vt&&(Fe.ngOnChanges||Fe.ngDoCheck)&&((h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(v.index),vt=!0),Bt++}!function(h,d){const C=d.directiveEnd,R=h.data,x=d.attrs,z=[];let et=null,vt=null;for(let Bt=d.directiveStart;Bt<C;Bt++){const qt=R[Bt],be=qt.inputs,Fe=null===x||Zl(d)?null:zf(be,x);z.push(Fe),et=Wp(be,Bt,et),vt=Wp(qt.outputs,Bt,vt)}null!==et&&(et.hasOwnProperty("class")&&(d.flags|=16),et.hasOwnProperty("style")&&(d.flags|=32)),d.initialInputs=z,d.inputs=et,d.outputs=vt}(h,v)}z&&function(h,d,v){if(d){const C=h.localNames=[];for(let R=0;R<d.length;R+=2){const x=v[d[R+1]];if(null==x)throw new $("301",`Export of name '${d[R+1]}' not found!`);C.push(d[R],x)}}}(v,C,z)}return v.mergedAttrs=Ls(v.mergedAttrs,v.attrs),R}function zp(h,d,v,C,R,x){const z=x.hostBindings;if(z){let et=h.hostBindingOpCodes;null===et&&(et=h.hostBindingOpCodes=[]);const vt=~d.index;(function(h){let d=h.length;for(;d>0;){const v=h[--d];if("number"==typeof v&&v<0)return v}return 0})(et)!=vt&&et.push(vt),et.push(C,R,z)}}function op(h,d){null!==h.hostBindings&&h.hostBindings(1,d)}function Yp(h,d){d.flags|=2,(h.components||(h.components=[])).push(d.index)}function Gf(h,d,v){if(v){if(d.exportAs)for(let C=0;C<d.exportAs.length;C++)v[d.exportAs[C]]=h;qn(d)&&(v[""]=h)}}function Xp(h,d,v){h.flags|=1,h.directiveStart=d,h.directiveEnd=d+v,h.providerIndexes=d}function Kp(h,d,v,C,R){h.data[C]=R;const x=R.factory||(R.factory=cs(R.type)),z=new ka(x,qn(R),null);h.blueprint[C]=z,v[C]=z,zp(h,d,0,C,Ch(h,v,R.hostVars,Ln),R)}function Wf(h,d,v){const C=St(d,h),R=Hp(v),x=h[10],z=Ed(h,nd(h,R,null,v.onPush?64:16,C,d,x,x.createRenderer(C,v),null,null));h[d.index]=z}function fc(h,d,v,C,R,x){const z=St(h,d);!function(h,d,v,C,R,x,z){if(null==x)Gn(h)?h.removeAttribute(d,R,v):d.removeAttribute(R);else{const et=null==z?st(x):z(x,C||"",R);Gn(h)?h.setAttribute(d,R,et,v):v?d.setAttributeNS(v,R,et):d.setAttribute(R,et)}}(d[11],z,x,h.value,v,C,R)}function jf(h,d,v,C,R,x){const z=x[d];if(null!==z){const et=C.setInput;for(let vt=0;vt<z.length;){const Bt=z[vt++],qt=z[vt++],be=z[vt++];null!==et?C.setInput(v,be,Bt,qt):v[qt]=be}}}function zf(h,d){let v=null,C=0;for(;C<d.length;){const R=d[C];if(0!==R)if(5!==R){if("number"==typeof R)break;h.hasOwnProperty(R)&&(null===v&&(v=[]),v.push(R,h[R],d[C+1])),C+=2}else C+=2;else C+=4}return v}function Yf(h,d,v,C){return new Array(h,!0,!1,d,null,0,C,v,null,null)}function Jp(h,d){const v=mn(d,h);if(Vn(v)){const C=v[1];80&v[2]?Sh(C,v,C.template,v[8]):v[5]>0&&wh(v)}}function wh(h){for(let C=du(h);null!==C;C=Wa(C))for(let R=10;R<C.length;R++){const x=C[R];if(1024&x[2]){const z=x[1];Sh(z,x,z.template,x[8])}else x[5]>0&&wh(x)}const v=h[1].components;if(null!==v)for(let C=0;C<v.length;C++){const R=mn(v[C],h);Vn(R)&&R[5]>0&&wh(R)}}function Jf(h,d){const v=mn(d,h),C=v[1];(function(h,d){for(let v=d.length;v<h.blueprint.length;v++)d.push(h.blueprint[v])})(C,v),od(C,v,v[8])}function Ed(h,d){return h[13]?h[14][4]=d:h[13]=d,h[14]=d,d}function ap(h){for(;h;){h[2]|=64;const d=hu(h);if(Sr(h)&&!d)return h;h=d}return null}function cp(h,d,v){const C=d[10];C.begin&&C.begin();try{Sh(h,d,h.template,v)}catch(R){throw qp(d,R),R}finally{C.end&&C.end()}}function $p(h){!function(h){for(let d=0;d<h.components.length;d++){const v=h.components[d],C=Lu(v),R=C[1];Pp(R,C,R.template,v)}}(h[8])}function up(h,d,v){Uo(0),d(h,v)}const Td=(()=>Promise.resolve(null))();function Zp(h){return h[7]||(h[7]=[])}function hp(h){return h.cleanup||(h.cleanup=[])}function Qp(h,d,v){return(null===h||qn(h))&&(v=function(h){for(;Array.isArray(h);){if("object"==typeof h[1])return h;h=h[0]}return null}(v[d.index])),v[11]}function qp(h,d){const v=h[9],C=v?v.get(zl,null):null;C&&C.handleError(d)}function tf(h,d,v,C,R){for(let x=0;x<v.length;){const z=v[x++],et=v[x++],vt=d[z],Bt=h.data[z];null!==Bt.setInput?Bt.setInput(vt,R,C,et):vt[et]=R}}function Vc(h,d,v){const C=G(d,h);!function(h,d,v){Gn(h)?h.setValue(d,v):d.textContent=v}(h[11],C,v)}function Cd(h,d,v){let C=v?h.styles:null,R=v?h.classes:null,x=0;if(null!==d)for(let z=0;z<d.length;z++){const et=d[z];"number"==typeof et?x=et:1==x?R=_(R,et):2==x&&(C=_(C,et+": "+d[++z]+";"))}v?h.styles=C:h.stylesWithoutHost=C,v?h.classes=R:h.classesWithoutHost=R}const Sd=new er("INJECTOR",-1);class _u{get(d,v=Nl){if(v===Nl){const C=new Error(`NullInjectorError: No provider for ${c(d)}!`);throw C.name="NullInjectorError",C}return v}}const dp=new er("Set Injector scope."),wd={},tg={};let pp;function fp(){return void 0===pp&&(pp=new _u),pp}function ef(h,d=null,v=null,C){const R=nf(h,d,v,C);return R._resolveInjectorDefTypes(),R}function nf(h,d=null,v=null,C){return new Rd(h,v,d||fp(),C)}class Rd{constructor(d,v,C,R=null){this.parent=C,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const x=[];v&&pa(v,et=>this.processProvider(et,d,v)),pa([d],et=>this.processInjectorType(et,[],x)),this.records.set(Sd,Rh(void 0,this));const z=this.records.get(dp);this.scope=null!=z?z.value:null,this.source=R||("object"==typeof d?null:c(d))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(d=>d.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(d,v=Nl,C=Yt.Default){this.assertNotDestroyed();const R=Ec(this),x=oe(void 0);try{if(!(C&Yt.SkipSelf)){let et=this.records.get(d);if(void 0===et){const vt=("function"==typeof(h=d)||"object"==typeof h&&h instanceof er)&&_e(d);et=vt&&this.injectableDefInScope(vt)?Rh(Dd(d),wd):null,this.records.set(d,et)}if(null!=et)return this.hydrate(d,et)}return(C&Yt.Self?fp():this.parent).get(d,v=C&Yt.Optional&&v===Nl?null:v)}catch(z){if("NullInjectorError"===z.name){if((z[Go]=z[Go]||[]).unshift(c(d)),R)throw z;return function(h,d,v,C){const R=h[Go];throw d[Pl]&&R.unshift(d[Pl]),h.message=function(h,d,v,C=null){h=h&&"\n"===h.charAt(0)&&"\u0275"==h.charAt(1)?h.substr(2):h;let R=c(d);if(Array.isArray(d))R=d.map(c).join(" -> ");else if("object"==typeof d){let x=[];for(let z in d)if(d.hasOwnProperty(z)){let et=d[z];x.push(z+":"+("string"==typeof et?JSON.stringify(et):c(et)))}R=`{${x.join(", ")}}`}return`${v}${C?"("+C+")":""}[${R}]: ${h.replace(_l,"\n  ")}`}("\n"+h.message,R,v,C),h.ngTokenPath=R,h[Go]=null,h}(z,d,"R3InjectorError",this.source)}throw z}finally{oe(x),Ec(R)}var h}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(d=>this.get(d))}toString(){const d=[];return this.records.forEach((C,R)=>d.push(c(R))),`R3Injector[${d.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(d,v,C){if(!(d=U(d)))return!1;let R=Pt(d);const x=null==R&&d.ngModule||void 0,z=void 0===x?d:x,et=-1!==C.indexOf(z);if(void 0!==x&&(R=Pt(x)),null==R)return!1;if(null!=R.imports&&!et){let qt;C.push(z);try{pa(R.imports,be=>{this.processInjectorType(be,v,C)&&(void 0===qt&&(qt=[]),qt.push(be))})}finally{}if(void 0!==qt)for(let be=0;be<qt.length;be++){const{ngModule:Fe,providers:ni}=qt[be];pa(ni,Si=>this.processProvider(Si,Fe,ni||je))}}this.injectorDefTypes.add(z);const vt=cs(z)||(()=>new z);this.records.set(z,Rh(vt,wd));const Bt=R.providers;if(null!=Bt&&!et){const qt=d;pa(Bt,be=>this.processProvider(be,qt,Bt))}return void 0!==x&&void 0!==d.providers}processProvider(d,v,C){let R=Dh(d=U(d))?d:U(d&&d.provide);const x=(h=d,sf(h)?Rh(void 0,h.useValue):Rh(rf(h),wd));var h;if(Dh(d)||!0!==d.multi)this.records.get(R);else{let z=this.records.get(R);z||(z=Rh(void 0,wd,!0),z.factory=()=>Ia(z.multi),this.records.set(R,z)),R=d,z.multi.push(d)}this.records.set(R,x)}hydrate(d,v){return v.value===wd&&(v.value=tg,v.value=v.factory()),"object"==typeof v.value&&v.value&&null!==(h=v.value)&&"object"==typeof h&&"function"==typeof h.ngOnDestroy&&this.onDestroy.add(v.value),v.value;var h}injectableDefInScope(d){if(!d.providedIn)return!1;const v=U(d.providedIn);return"string"==typeof v?"any"===v||v===this.scope:this.injectorDefTypes.has(v)}}function Dd(h){const d=_e(h),v=null!==d?d.factory:cs(h);if(null!==v)return v;if(h instanceof er)throw new Error(`Token ${c(h)} is missing a \u0275prov definition.`);if(h instanceof Function)return function(h){const d=h.length;if(d>0){const C=kl(d,"?");throw new Error(`Can't resolve all parameters for ${c(h)}: (${C.join(", ")}).`)}const v=function(h){const d=h&&(h[he]||h[le]);if(d){const v=function(h){if(h.hasOwnProperty("name"))return h.name;const d=(""+h).match(/^function\s*([^\s(]+)/);return null===d?"":d[1]}(h);return console.warn(`DEPRECATED: DI is instantiating a token "${v}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${v}" class.`),d}return null}(h);return null!==v?()=>v.factory(h):()=>new h}(h);throw new Error("unreachable")}function rf(h,d,v){let C;if(Dh(h)){const R=U(h);return cs(R)||Dd(R)}if(sf(h))C=()=>U(h.useValue);else if(function(h){return!(!h||!h.useFactory)}(h))C=()=>h.useFactory(...Ia(h.deps||[]));else if(function(h){return!(!h||!h.useExisting)}(h))C=()=>ar(U(h.useExisting));else{const R=U(h&&(h.useClass||h.provide));if(!function(h){return!!h.deps}(h))return cs(R)||Dd(R);C=()=>new R(...Ia(h.deps))}return C}function Rh(h,d,v=!1){return{factory:h,value:d,multi:v?[]:void 0}}function sf(h){return null!==h&&"object"==typeof h&&vs in h}function Dh(h){return"function"==typeof h}let Nr=(()=>{class h{static create(v,C){var R;if(Array.isArray(v))return ef({name:""},C,v,"");{const x=null!==(R=v.name)&&void 0!==R?R:"";return ef({name:x},v.parent,v.providers,x)}}}return h.THROW_IF_NOT_FOUND=Nl,h.NULL=new _u,h.\u0275prov=Ne({token:h,providedIn:"any",factory:()=>ar(Sd)}),h.__NG_ELEMENT_ID__=-1,h})();function zn(h,d){fs(Lu(h)[1],F())}function ko(h){let d=function(h){return Object.getPrototypeOf(h.prototype).constructor}(h.type),v=!0;const C=[h];for(;d;){let R;if(qn(h))R=d.\u0275cmp||d.\u0275dir;else{if(d.\u0275cmp)throw new Error("Directives cannot inherit Components");R=d.\u0275dir}if(R){if(v){C.push(R);const z=h;z.inputs=Yi(h.inputs),z.declaredInputs=Yi(h.declaredInputs),z.outputs=Yi(h.outputs);const et=R.hostBindings;et&&no(h,et);const vt=R.viewQuery,Bt=R.contentQueries;if(vt&&wn(h,vt),Bt&&Ko(h,Bt),s(h.inputs,R.inputs),s(h.declaredInputs,R.declaredInputs),s(h.outputs,R.outputs),qn(R)&&R.data.animation){const qt=h.data;qt.animation=(qt.animation||[]).concat(R.data.animation)}}const x=R.features;if(x)for(let z=0;z<x.length;z++){const et=x[z];et&&et.ngInherit&&et(h),et===ko&&(v=!1)}}d=Object.getPrototypeOf(d)}!function(h){let d=0,v=null;for(let C=h.length-1;C>=0;C--){const R=h[C];R.hostVars=d+=R.hostVars,R.hostAttrs=Ls(R.hostAttrs,v=Ls(v,R.hostAttrs))}}(C)}function Yi(h){return h===ue?{}:h===je?[]:h}function wn(h,d){const v=h.viewQuery;h.viewQuery=v?(C,R)=>{d(C,R),v(C,R)}:d}function Ko(h,d){const v=h.contentQueries;h.contentQueries=v?(C,R,x)=>{d(C,R,x),v(C,R,x)}:d}function no(h,d){const v=h.hostBindings;h.hostBindings=v?(C,R)=>{d(C,R),v(C,R)}:d}let fn=null;function Ao(){if(!fn){const h=gi.Symbol;if(h&&h.iterator)fn=h.iterator;else{const d=Object.getOwnPropertyNames(Map.prototype);for(let v=0;v<d.length;++v){const C=d[v];"entries"!==C&&"size"!==C&&Map.prototype[C]===Map.prototype.entries&&(fn=C)}}}return fn}function Dl(h){return!!ir(h)&&(Array.isArray(h)||!(h instanceof Map)&&Ao()in h)}function ir(h){return null!==h&&("function"==typeof h||"object"==typeof h)}function ss(h,d,v){return h[d]=v}function Ya(h,d,v){return!Object.is(h[d],v)&&(h[d]=v,!0)}function ad(h,d,v,C){const R=Ya(h,d,v);return Ya(h,d+1,C)||R}function lg(h,d,v,C){const R=Di();return Ya(R,tn(),d)&&(In(),fc(On(),R,h,d,v,C)),lg}function Ad(h,d,v,C){return Ya(h,tn(),v)?d+st(v)+C:Ln}function xd(h,d,v,C,R,x,z,et){const Bt=function(h,d,v,C,R){const x=ad(h,d,v,C);return Ya(h,d+2,R)||x}(h,un(),v,R,z);return _n(3),Bt?d+st(v)+C+st(R)+x+st(z)+et:Ln}function Wm(h,d,v,C,R,x,z,et){const vt=Di(),Bt=In(),qt=h+20,be=Bt.firstCreatePass?function(h,d,v,C,R,x,z,et,vt){const Bt=d.consts,qt=Th(d,h,4,z||null,mo(Bt,et));np(d,v,qt,mo(Bt,vt)),fs(d,qt);const be=qt.tViews=yd(2,qt,C,R,x,d.directiveRegistry,d.pipeRegistry,null,d.schemas,Bt);return null!==d.queries&&(d.queries.template(d,qt),be.queries=d.queries.embeddedTView(qt)),qt}(qt,Bt,vt,d,v,C,R,x,z):Bt.data[qt];Wt(be,!1);const Fe=vt[11].createComment("");xi(Bt,vt,Fe,be),Es(Fe,vt),Ed(vt,vt[qt]=Yf(Fe,vt,Fe,be)),Fr(be)&&ip(Bt,vt,be),null!=z&&mu(vt,be,et)}function jm(h){return Ni(rn.lFrame.contextLView,20+h)}function mp(h,d=Yt.Default){const v=Di();return null===v?ar(h,d):Fn(F(),v,U(h),d)}function e_(){throw new Error("invalid")}function pg(h,d,v){const C=Di();return Ya(C,tn(),d)&&Ea(In(),On(),C,h,d,C[11],v,!1),pg}function fg(h,d,v,C,R){const z=R?"class":"style";tf(h,v,d.inputs[z],z,C)}function gg(h,d,v,C){const R=Di(),x=In(),z=20+h,et=R[11],vt=R[z]=$l(et,d,rn.lFrame.currentNamespace),Bt=x.firstCreatePass?function(h,d,v,C,R,x,z){const et=d.consts,Bt=Th(d,h,2,R,mo(et,x));return np(d,v,Bt,mo(et,z)),null!==Bt.attrs&&Cd(Bt,Bt.attrs,!1),null!==Bt.mergedAttrs&&Cd(Bt,Bt.mergedAttrs,!0),null!==d.queries&&d.queries.elementStart(d,Bt),Bt}(z,x,R,0,d,v,C):x.data[z];Wt(Bt,!0);const qt=Bt.mergedAttrs;null!==qt&&Na(et,vt,qt);const be=Bt.classes;null!==be&&jn(et,vt,be);const Fe=Bt.styles;null!==Fe&&Cr(et,vt,Fe),64!=(64&Bt.flags)&&xi(x,R,vt,Bt),0===rn.lFrame.elementDepthCount&&Es(vt,R),rn.lFrame.elementDepthCount++,Fr(Bt)&&(ip(x,R,Bt),Bp(x,Bt,R)),null!==C&&mu(R,Bt)}function mg(){let h=F();se()?Ie():(h=h.parent,Wt(h,!1));const d=h;rn.lFrame.elementDepthCount--;const v=In();v.firstCreatePass&&(fs(v,h),Ts(h)&&v.queries.elementEnd(h)),null!=d.classesWithoutHost&&function(h){return 0!=(16&h.flags)}(d)&&fg(v,d,Di(),d.classesWithoutHost,!0),null!=d.stylesWithoutHost&&function(h){return 0!=(32&h.flags)}(d)&&fg(v,d,Di(),d.stylesWithoutHost,!1)}function i_(h,d,v,C){gg(h,d,v,C),mg()}function _g(h,d,v){const C=Di(),R=In(),x=h+20,z=R.firstCreatePass?function(h,d,v,C,R){const x=d.consts,z=mo(x,C),et=Th(d,h,8,"ng-container",z);return null!==z&&Cd(et,z,!0),np(d,v,et,mo(x,R)),null!==d.queries&&d.queries.elementStart(d,et),et}(x,R,C,d,v):R.data[x];Wt(z,!0);const et=C[x]=C[11].createComment("");xi(R,C,et,z),Es(et,C),Fr(z)&&(ip(R,C,z),Bp(R,z,C)),null!=v&&mu(C,z)}function vg(){let h=F();const d=In();se()?Ie():(h=h.parent,Wt(h,!1)),d.firstCreatePass&&(fs(d,h),Ts(h)&&d.queries.elementEnd(h))}function n_(h,d,v){_g(h,d,v),vg()}function o_(){return Di()}function bg(h){return!!h&&"function"==typeof h.then}function r_(h){return!!h&&"function"==typeof h.subscribe}const s_=r_;function yg(h,d,v,C){const R=Di(),x=In(),z=F();return a_(x,R,R[11],z,h,d,!!v,C),yg}function Eg(h,d){const v=F(),C=Di(),R=In();return a_(R,C,Qp(Gr(R.data),v,C),v,h,d,!1),Eg}function a_(h,d,v,C,R,x,z,et){const vt=Fr(C),qt=h.firstCreatePass&&hp(h),be=d[8],Fe=Zp(d);let ni=!0;if(3&C.type||et){const $i=St(C,d),gn=et?et($i):$i,Mi=Fe.length,En=et?yo=>et(Dt(yo[C.index])):C.index;if(Gn(v)){let yo=null;if(!et&&vt&&(yo=function(h,d,v,C){const R=h.cleanup;if(null!=R)for(let x=0;x<R.length-1;x+=2){const z=R[x];if(z===v&&R[x+1]===C){const et=d[7],vt=R[x+2];return et.length>vt?et[vt]:null}"string"==typeof z&&(x+=2)}return null}(h,d,R,C.index)),null!==yo)(yo.__ngLastListenerFn__||yo).__ngNextListenerFn__=x,yo.__ngLastListenerFn__=x,ni=!1;else{x=Tg(C,d,be,x,!1);const nr=v.listen(gn,R,x);Fe.push(x,nr),qt&&qt.push(R,En,Mi,Mi+1)}}else x=Tg(C,d,be,x,!0),gn.addEventListener(R,x,z),Fe.push(x),qt&&qt.push(R,En,Mi,z)}else x=Tg(C,d,be,x,!1);const Si=C.outputs;let Vi;if(ni&&null!==Si&&(Vi=Si[R])){const $i=Vi.length;if($i)for(let gn=0;gn<$i;gn+=2){const ec=d[Vi[gn]][Vi[gn+1]].subscribe(x),ud=Fe.length;Fe.push(x,ec),qt&&qt.push(R,C.index,ud,-(ud+1))}}}function l_(h,d,v,C){try{return!1!==v(C)}catch(R){return qp(h,R),!1}}function Tg(h,d,v,C,R){return function x(z){if(z===Function)return C;const et=2&h.flags?mn(h.index,d):d;0==(32&d[2])&&ap(et);let vt=l_(d,0,C,z),Bt=x.__ngNextListenerFn__;for(;Bt;)vt=l_(d,0,Bt,z)&&vt,Bt=Bt.__ngNextListenerFn__;return R&&!1===vt&&(z.preventDefault(),z.returnValue=!1),vt}}function c_(h=1){return function(h){return(rn.lFrame.contextLView=function(h,d){for(;h>0;)d=d[15],h--;return d}(h,rn.lFrame.contextLView))[8]}(h)}function vy(h,d){let v=null;const C=function(h){const d=h.attrs;if(null!=d){const v=d.indexOf(5);if(0==(1&v))return d[v+1]}return null}(h);for(let R=0;R<d.length;R++){const x=d[R];if("*"!==x){if(null===C?Xh(h,x,!0):uo(C,x))return R}else v=R}return v}function u_(h){const d=Di()[16][6];if(!d.projection){const C=d.projection=kl(h?h.length:1,null),R=C.slice();let x=d.child;for(;null!==x;){const z=h?vy(x,h):0;null!==z&&(R[z]?R[z].projectionNext=x:C[z]=x,R[z]=x),x=x.next}}}function h_(h,d=0,v){const C=Di(),R=In(),x=Th(R,20+h,16,null,v||null);null===x.projection&&(x.projection=d),Ie(),64!=(64&x.flags)&&function(h,d,v){Zt(d[11],0,d,v,Q(h,v,d),Ge(v.parent||d[6],v,d))}(R,C,x)}function Cg(h,d,v){return Sg(h,"",d,"",v),Cg}function Sg(h,d,v,C,R){const x=Di(),z=Ad(x,d,v,C);return z!==Ln&&Ea(In(),On(),x,h,z,x[11],R,!1),Sg}function y_(h,d,v,C,R){const x=h[v+1],z=null===d;let et=C?Sl(x):wl(x),vt=!1;for(;0!==et&&(!1===vt||z);){const qt=h[et+1];Ey(h[et],d)&&(vt=!0,h[et+1]=C?fu(qt):za(qt)),et=C?Sl(qt):wl(qt)}vt&&(h[v+1]=C?za(x):fu(x))}function Ey(h,d){return null===h||null==d||(Array.isArray(h)?h[1]:h)===d||!(!Array.isArray(h)||"string"!=typeof d)&&Da(h,d)>=0}function wg(h,d,v){return Uc(h,d,v,!1),wg}function Rg(h,d){return Uc(h,d,null,!0),Rg}function Uc(h,d,v,C){const R=Di(),x=In(),z=_n(2);x.firstUpdatePass&&function(h,d,v,C){const R=h.data;if(null===R[v+1]){const x=R[on()],z=function(h,d){return d>=h.expandoStartIndex}(h,v);(function(h,d){return 0!=(h.flags&(d?16:32))})(x,C)&&null===d&&!z&&(d=!1),d=function(h,d,v,C){const R=Gr(h);let x=C?d.residualClasses:d.residualStyles;if(null===R)0===(C?d.classBindings:d.styleBindings)&&(v=_p(v=Dg(null,h,d,v,C),d.attrs,C),x=null);else{const z=d.directiveStylingLast;if(-1===z||h[z]!==R)if(v=Dg(R,h,d,v,C),null===x){let vt=function(h,d,v){const C=v?d.classBindings:d.styleBindings;if(0!==wl(C))return h[Sl(C)]}(h,d,C);void 0!==vt&&Array.isArray(vt)&&(vt=Dg(null,h,d,vt[1],C),vt=_p(vt,d.attrs,C),function(h,d,v,C){h[Sl(v?d.classBindings:d.styleBindings)]=C}(h,d,C,vt))}else x=function(h,d,v){let C;const R=d.directiveEnd;for(let x=1+d.directiveStylingLast;x<R;x++)C=_p(C,h[x].hostAttrs,v);return _p(C,d.attrs,v)}(h,d,C)}return void 0!==x&&(C?d.residualClasses=x:d.residualStyles=x),v}(R,x,d,C),function(h,d,v,C,R,x){let z=x?d.classBindings:d.styleBindings,et=Sl(z),vt=wl(z);h[C]=v;let qt,Bt=!1;if(Array.isArray(v)){const be=v;qt=be[1],(null===qt||Da(be,qt)>0)&&(Bt=!0)}else qt=v;if(R)if(0!==vt){const Fe=Sl(h[et+1]);h[C+1]=Xu(Fe,et),0!==Fe&&(h[Fe+1]=Kh(h[Fe+1],C)),h[et+1]=function(h,d){return 131071&h|d<<17}(h[et+1],C)}else h[C+1]=Xu(et,0),0!==et&&(h[et+1]=Kh(h[et+1],C)),et=C;else h[C+1]=Xu(vt,0),0===et?et=C:h[vt+1]=Kh(h[vt+1],C),vt=C;Bt&&(h[C+1]=za(h[C+1])),y_(h,qt,C,!0),y_(h,qt,C,!1),function(h,d,v,C,R){const x=R?h.residualClasses:h.residualStyles;null!=x&&"string"==typeof d&&Da(x,d)>=0&&(v[C+1]=fu(v[C+1]))}(d,qt,h,C,x),z=Xu(et,vt),x?d.classBindings=z:d.styleBindings=z}(R,x,d,v,z,C)}}(x,h,z,C),d!==Ln&&Ya(R,z,d)&&function(h,d,v,C,R,x,z,et){if(!(3&d.type))return;const vt=h.data,Bt=vt[et+1];cf(function(h){return 1==(1&h)}(Bt)?O_(vt,d,v,R,wl(Bt),z):void 0)||(cf(x)||function(h){return 2==(2&h)}(Bt)&&(x=O_(vt,null,v,R,et,z)),function(h,d,v,C,R){const x=Gn(h);if(d)R?x?h.addClass(v,C):v.classList.add(C):x?h.removeClass(v,C):v.classList.remove(C);else{let z=-1===C.indexOf("-")?void 0:_a.DashCase;if(null==R)x?h.removeStyle(v,C,z):v.style.removeProperty(C);else{const et="string"==typeof R&&R.endsWith("!important");et&&(R=R.slice(0,-10),z|=_a.Important),x?h.setStyle(v,C,R,z):v.style.setProperty(C,R,et?"important":"")}}}(C,z,G(on(),v),R,x))}(x,x.data[on()],R,R[11],h,R[z+1]=function(h,d){return null==h||("string"==typeof d?h+=d:"object"==typeof h&&(h=c(Kt(h)))),h}(d,v),C,z)}function Dg(h,d,v,C,R){let x=null;const z=v.directiveEnd;let et=v.directiveStylingLast;for(-1===et?et=v.directiveStart:et++;et<z&&(x=d[et],C=_p(C,x.hostAttrs,R),x!==h);)et++;return null!==h&&(v.directiveStylingLast=et),C}function _p(h,d,v){const C=v?1:2;let R=-1;if(null!==d)for(let x=0;x<d.length;x++){const z=d[x];"number"==typeof z?R=z:R===C&&(Array.isArray(h)||(h=void 0===h?[]:["",h]),xr(h,z,!!v||d[++x]))}return void 0===h?null:h}function O_(h,d,v,C,R,x){const z=null===d;let et;for(;R>0;){const vt=h[R],Bt=Array.isArray(vt),qt=Bt?vt[1]:vt,be=null===qt;let Fe=v[R+1];Fe===Ln&&(Fe=be?je:void 0);let ni=be?Zc(Fe,C):qt===C?Fe:void 0;if(Bt&&!cf(ni)&&(ni=Zc(vt,C)),cf(ni)&&(et=ni,z))return et;const Si=h[R+1];R=z?Sl(Si):wl(Si)}if(null!==d){let vt=x?d.residualClasses:d.residualStyles;null!=vt&&(et=Zc(vt,C))}return et}function cf(h){return void 0!==h}function k_(h,d=""){const v=Di(),C=In(),R=h+20,x=C.firstCreatePass?Th(C,R,1,d,null):C.data[R],z=v[R]=function(h,d){return Gn(h)?h.createText(d):h.createTextNode(d)}(v[11],d);xi(C,v,z,x),Wt(x,!1)}function Ig(h){return uf("",h,""),Ig}function uf(h,d,v){const C=Di(),R=Ad(C,h,d,v);return R!==Ln&&Vc(C,on(),R),uf}function Mg(h,d,v,C,R){const x=Di(),z=function(h,d,v,C,R,x){const et=ad(h,un(),v,R);return _n(2),et?d+st(v)+C+st(R)+x:Ln}(x,h,d,v,C,R);return z!==Ln&&Vc(x,on(),z),Mg}function Ag(h,d,v,C,R,x,z){const et=Di(),vt=xd(et,h,d,v,C,R,x,z);return vt!==Ln&&Vc(et,on(),vt),Ag}function Og(h,d,v){const C=Di();return Ya(C,tn(),d)&&Ea(In(),On(),C,h,d,C[11],v,!0),Og}function xg(h,d,v){const C=Di();if(Ya(C,tn(),d)){const x=In(),z=On();Ea(x,z,C,h,d,Qp(Gr(x.data),z,C),v,!0)}return xg}const ld=void 0;var iE=["en",[["a","p"],["AM","PM"],ld],[["AM","PM"],ld,ld],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ld,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ld,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ld,"{1} 'at' {0}",ld],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(h){const v=Math.floor(Math.abs(h)),C=h.toString().replace(/^[^.]*\.?/,"").length;return 1===v&&0===C?1:5}];let Vd={};function kg(h){const d=function(h){return h.toLowerCase().replace(/_/g,"-")}(h);let v=$_(d);if(v)return v;const C=d.split("-")[0];if(v=$_(C),v)return v;if("en"===C)return iE;throw new Error(`Missing locale data for the locale "${h}".`)}function J_(h){return kg(h)[Dn.PluralCase]}function $_(h){return h in Vd||(Vd[h]=gi.ng&&gi.ng.common&&gi.ng.common.locales&&gi.ng.common.locales[h]),Vd[h]}var Dn=(()=>((Dn=Dn||{})[Dn.LocaleId=0]="LocaleId",Dn[Dn.DayPeriodsFormat=1]="DayPeriodsFormat",Dn[Dn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dn[Dn.DaysFormat=3]="DaysFormat",Dn[Dn.DaysStandalone=4]="DaysStandalone",Dn[Dn.MonthsFormat=5]="MonthsFormat",Dn[Dn.MonthsStandalone=6]="MonthsStandalone",Dn[Dn.Eras=7]="Eras",Dn[Dn.FirstDayOfWeek=8]="FirstDayOfWeek",Dn[Dn.WeekendRange=9]="WeekendRange",Dn[Dn.DateFormat=10]="DateFormat",Dn[Dn.TimeFormat=11]="TimeFormat",Dn[Dn.DateTimeFormat=12]="DateTimeFormat",Dn[Dn.NumberSymbols=13]="NumberSymbols",Dn[Dn.NumberFormats=14]="NumberFormats",Dn[Dn.CurrencyCode=15]="CurrencyCode",Dn[Dn.CurrencySymbol=16]="CurrencySymbol",Dn[Dn.CurrencyName=17]="CurrencyName",Dn[Dn.Currencies=18]="Currencies",Dn[Dn.Directionality=19]="Directionality",Dn[Dn.PluralCase=20]="PluralCase",Dn[Dn.ExtraData=21]="ExtraData",Dn))();const hf="en-US";let Z_=hf;function Pg(h,d,v,C,R){if(h=U(h),Array.isArray(h))for(let x=0;x<h.length;x++)Pg(h[x],d,v,C,R);else{const x=In(),z=Di();let et=Dh(h)?h:U(h.provide),vt=rf(h);const Bt=F(),qt=1048575&Bt.providerIndexes,be=Bt.directiveStart,Fe=Bt.providerIndexes>>20;if(Dh(h)||!h.multi){const ni=new ka(vt,R,mp),Si=Bg(et,d,R?qt:qt+Fe,be);-1===Si?(Se(J(Bt,z),x,et),Fg(x,h,d.length),d.push(et),Bt.directiveStart++,Bt.directiveEnd++,R&&(Bt.providerIndexes+=1048576),v.push(ni),z.push(ni)):(v[Si]=ni,z[Si]=ni)}else{const ni=Bg(et,d,qt+Fe,be),Si=Bg(et,d,qt,qt+Fe),Vi=ni>=0&&v[ni],$i=Si>=0&&v[Si];if(R&&!$i||!R&&!Vi){Se(J(Bt,z),x,et);const gn=function(h,d,v,C,R){const x=new ka(h,v,mp);return x.multi=[],x.index=d,x.componentProviders=0,Ev(x,R,C&&!v),x}(R?tT:qE,v.length,R,C,vt);!R&&$i&&(v[Si].providerFactory=gn),Fg(x,h,d.length,0),d.push(et),Bt.directiveStart++,Bt.directiveEnd++,R&&(Bt.providerIndexes+=1048576),v.push(gn),z.push(gn)}else Fg(x,h,ni>-1?ni:Si,Ev(v[R?Si:ni],vt,!R&&C));!R&&C&&$i&&v[Si].componentProviders++}}}function Fg(h,d,v,C){const R=Dh(d),x=function(h){return!!h.useClass}(d);if(R||x){const vt=(x?U(d.useClass):d).prototype.ngOnDestroy;if(vt){const Bt=h.destroyHooks||(h.destroyHooks=[]);if(!R&&d.multi){const qt=Bt.indexOf(v);-1===qt?Bt.push(v,[C,vt]):Bt[qt+1].push(C,vt)}else Bt.push(v,vt)}}}function Ev(h,d,v){return v&&h.componentProviders++,h.multi.push(d)-1}function Bg(h,d,v,C){for(let R=v;R<C;R++)if(d[R]===h)return R;return-1}function qE(h,d,v,C){return Hg(this.multi,[])}function tT(h,d,v,C){const R=this.multi;let x;if(this.providerFactory){const z=this.providerFactory.componentProviders,et=is(v,v[1],this.providerFactory.index,C);x=et.slice(0,z),Hg(R,x);for(let vt=z;vt<et.length;vt++)x.push(et[vt])}else x=[],Hg(R,x);return x}function Hg(h,d){for(let v=0;v<h.length;v++)d.push((0,h[v])());return d}function Tv(h,d=[]){return v=>{v.providersResolver=(C,R)=>function(h,d,v){const C=In();if(C.firstCreatePass){const R=qn(h);Pg(v,C.data,C.blueprint,R,!0),Pg(d,C.data,C.blueprint,R,!1)}}(C,R?R(h):h,d)}}class Cv{}class oT{resolveComponentFactory(d){throw function(h){const d=Error(`No component factory found for ${c(h)}. Did you add it to @NgModule.entryComponents?`);return d.ngComponent=h,d}(d)}}let Tp=(()=>{class h{}return h.NULL=new oT,h})();function rT(){return Gd(F(),Di())}function Gd(h,d){return new Cp(St(h,d))}let Cp=(()=>{class h{constructor(v){this.nativeElement=v}}return h.__NG_ELEMENT_ID__=rT,h})();function sT(h){return h instanceof Cp?h.nativeElement:h}class wv{}let aT=(()=>{class h{}return h.__NG_ELEMENT_ID__=()=>function(){const h=Di(),v=mn(F().index,h);return function(h){return h[11]}(Eo(v)?v:h)}(),h})(),uT=(()=>{class h{}return h.\u0275prov=Ne({token:h,providedIn:"root",factory:()=>null}),h})();class Rv{constructor(d){this.full=d,this.major=d.split(".")[0],this.minor=d.split(".")[1],this.patch=d.split(".").slice(2).join(".")}}const hT=new Rv("13.1.0"),Vg={};function mf(h,d,v,C,R=!1){for(;null!==v;){const x=d[v.index];if(null!==x&&C.push(Dt(x)),Po(x))for(let et=10;et<x.length;et++){const vt=x[et],Bt=vt[1].firstChild;null!==Bt&&mf(vt[1],vt,Bt,C)}const z=v.type;if(8&z)mf(h,d,v.child,C);else if(32&z){const et=cu(v,d);let vt;for(;vt=et();)C.push(vt)}else if(16&z){const et=Ii(d,v);if(Array.isArray(et))C.push(...et);else{const vt=hu(d[16]);mf(vt[1],vt,et,C,!0)}}v=R?v.projectionNext:v.next}return C}class Sp{constructor(d,v){this._lView=d,this._cdRefInjectingView=v,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const d=this._lView,v=d[1];return mf(v,d,v.firstChild,[])}get context(){return this._lView[8]}set context(d){this._lView[8]=d}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const d=this._lView[3];if(Po(d)){const v=d[8],C=v?v.indexOf(this):-1;C>-1&&(_h(d,C),na(v,C))}this._attachedToViewContainer=!1}pu(this._lView[1],this._lView)}onDestroy(d){Gp(this._lView[1],this._lView,null,d)}markForCheck(){ap(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(h,d,v){Bi(!0);try{cp(h,d,v)}finally{Bi(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var d;this._appRef=null,io(this._lView[1],d=this._lView,d[11],2,null,null)}attachToAppRef(d){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=d}}class dT extends Sp{constructor(d){super(d),this._view=d}detectChanges(){$p(this._view)}checkNoChanges(){!function(h){Bi(!0);try{$p(h)}finally{Bi(!1)}}(this._view)}get context(){return null}}class Dv extends Tp{constructor(d){super(),this.ngModule=d}resolveComponentFactory(d){const v=pi(d);return new Ug(v,this.ngModule)}}function Iv(h){const d=[];for(let v in h)h.hasOwnProperty(v)&&d.push({propName:h[v],templateName:v});return d}const fT=new er("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Xl});class Ug extends Cv{constructor(d,v){super(),this.componentDef=d,this.ngModule=v,this.componentType=d.type,this.selector=d.selectors.map(Op).join(","),this.ngContentSelectors=d.ngContentSelectors?d.ngContentSelectors:[],this.isBoundToModule=!!v}get inputs(){return Iv(this.componentDef.inputs)}get outputs(){return Iv(this.componentDef.outputs)}create(d,v,C,R){const x=(R=R||this.ngModule)?function(h,d){return{get:(v,C,R)=>{const x=h.get(v,Vg,R);return x!==Vg||C===Vg?x:d.get(v,C,R)}}}(d,R.injector):d,z=x.get(wv,en),et=x.get(uT,null),vt=z.createRenderer(null,this.componentDef),Bt=this.componentDef.selectors[0][0]||"div",qt=C?function(h,d,v){if(Gn(h))return h.selectRootElement(d,v===Ze.ShadowDom);let C="string"==typeof d?h.querySelector(d):d;return C.textContent="",C}(vt,C,this.componentDef.encapsulation):$l(z.createRenderer(null,this.componentDef),Bt,function(h){const d=h.toLowerCase();return"svg"===d?Ws:"math"===d?"http://www.w3.org/1998/MathML/":null}(Bt)),be=this.componentDef.onPush?576:528,Fe=function(h,d){return{components:[],scheduler:h||Xl,clean:Td,playerHandler:d||null,flags:0}}(),ni=yd(0,null,null,1,0,null,null,null,null,null),Si=nd(null,ni,Fe,be,null,null,z,vt,et,x);let Vi,$i;ds(Si);try{const gn=function(h,d,v,C,R,x){const z=v[1];v[20]=h;const vt=Th(z,20,2,"#host",null),Bt=vt.mergedAttrs=d.hostAttrs;null!==Bt&&(Cd(vt,Bt,!0),null!==h&&(Na(R,h,Bt),null!==vt.classes&&jn(R,h,vt.classes),null!==vt.styles&&Cr(R,h,vt.styles)));const qt=C.createRenderer(h,d),be=nd(v,Hp(d),null,d.onPush?64:16,v[20],vt,C,qt,x||null,null);return z.firstCreatePass&&(Se(J(vt,v),z,d.type),Yp(z,vt),Xp(vt,v.length,1)),Ed(v,be),v[20]=be}(qt,this.componentDef,Si,z,vt);if(qt)if(C)Na(vt,qt,["ng-version",hT.full]);else{const{attrs:Mi,classes:En}=function(h){const d=[],v=[];let C=1,R=2;for(;C<h.length;){let x=h[C];if("string"==typeof x)2===R?""!==x&&d.push(x,h[++C]):8===R&&v.push(x);else{if(!ra(R))break;R=x}C++}return{attrs:d,classes:v}}(this.componentDef.selectors[0]);Mi&&Na(vt,qt,Mi),En&&En.length>0&&jn(vt,qt,En.join(" "))}if($i=ei(ni,20),void 0!==v){const Mi=$i.projection=[];for(let En=0;En<this.ngContentSelectors.length;En++){const yo=v[En];Mi.push(null!=yo?Array.from(yo):null)}}Vi=function(h,d,v,C,R){const x=v[1],z=function(h,d,v){const C=F();h.firstCreatePass&&(v.providersResolver&&v.providersResolver(v),Kp(h,C,d,Ch(h,d,1,null),v));const R=is(d,h,C.directiveStart,C);Es(R,d);const x=St(C,d);return x&&Es(x,d),R}(x,v,d);if(C.components.push(z),h[8]=z,R&&R.forEach(vt=>vt(z,d)),d.contentQueries){const vt=F();d.contentQueries(1,z,vt.directiveStart)}const et=F();return!x.firstCreatePass||null===d.hostBindings&&null===d.hostAttrs||(An(et.index),zp(v[1],et,0,et.directiveStart,et.directiveEnd,d),op(d,z)),z}(gn,this.componentDef,Si,Fe,[zn]),od(ni,Si,null)}finally{ua()}return new _T(this.componentType,Vi,Gd($i,Si),Si,$i)}}class _T extends class{}{constructor(d,v,C,R,x){super(),this.location=C,this._rootLView=R,this._tNode=x,this.instance=v,this.hostView=this.changeDetectorRef=new dT(R),this.componentType=d}get injector(){return new jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(d){this.hostView.onDestroy(d)}}class Wd{}class Mv{}const jd=new Map;class xv extends Wd{constructor(d,v){super(),this._parent=v,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Dv(this);const C=xn(d);this._bootstrapComponents=Oa(C.bootstrap),this._r3Injector=nf(d,v,[{provide:Wd,useValue:this},{provide:Tp,useValue:this.componentFactoryResolver}],c(d)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(d)}get(d,v=Nr.THROW_IF_NOT_FOUND,C=Yt.Default){return d===Nr||d===Wd||d===Sd?this:this._r3Injector.get(d,v,C)}destroy(){const d=this._r3Injector;!d.destroyed&&d.destroy(),this.destroyCbs.forEach(v=>v()),this.destroyCbs=null}onDestroy(d){this.destroyCbs.push(d)}}class Gg extends Mv{constructor(d){super(),this.moduleType=d,null!==xn(d)&&function(h){const d=new Set;!function v(C){const R=xn(C,!0),x=R.id;null!==x&&(function(h,d,v){if(d&&d!==v)throw new Error(`Duplicate module registered for ${h} - ${c(d)} vs ${c(d.name)}`)}(x,jd.get(x),C),jd.set(x,C));const z=Oa(R.imports);for(const et of z)d.has(et)||(d.add(et),v(et))}(h)}(d)}create(d){return new xv(this.moduleType,d)}}function kv(h,d,v){const C=Gi()+h,R=Di();return R[C]===Ln?ss(R,C,v?d.call(v):d()):function(h,d){return h[d]}(R,C)}function Lv(h,d,v,C){return Pv(Di(),Gi(),h,d,v,C)}function Nv(h,d,v,C,R){return function(h,d,v,C,R,x,z){const et=d+v;return ad(h,et,R,x)?ss(h,et+2,z?C.call(z,R,x):C(R,x)):wp(h,et+2)}(Di(),Gi(),h,d,v,C,R)}function wp(h,d){const v=h[d];return v===Ln?void 0:v}function Pv(h,d,v,C,R,x){const z=d+v;return Ya(h,z,R)?ss(h,z+1,x?C.call(x,R):C(R)):wp(h,z+1)}function Uv(h,d){const v=In();let C;const R=h+20;v.firstCreatePass?(C=function(h,d){if(d)for(let v=d.length-1;v>=0;v--){const C=d[v];if(h===C.name)return C}}(d,v.pipeRegistry),v.data[R]=C,C.onDestroy&&(v.destroyHooks||(v.destroyHooks=[])).push(R,C.onDestroy)):C=v.data[R];const x=C.factory||(C.factory=cs(C.type)),z=oe(mp);try{const et=dl(!1),vt=x();return dl(et),function(h,d,v,C){v>=h.data.length&&(h.data[v]=null,h.blueprint[v]=null),d[v]=C}(v,Di(),R,vt),vt}finally{oe(z)}}function Gv(h,d,v){const C=h+20,R=Di(),x=Ni(R,C);return function(h,d){return h[1].data[d].pure}(R,C)?Pv(R,Gi(),d,x.transform,v,x):x.transform(v)}function Wg(h){return d=>{setTimeout(h,void 0,d)}}const yu=class extends b.x{constructor(d=!1){super(),this.__isAsync=d}emit(d){super.next(d)}subscribe(d,v,C){var R,x,z;let et=d,vt=v||(()=>null),Bt=C;if(d&&"object"==typeof d){const be=d;et=null===(R=be.next)||void 0===R?void 0:R.bind(be),vt=null===(x=be.error)||void 0===x?void 0:x.bind(be),Bt=null===(z=be.complete)||void 0===z?void 0:z.bind(be)}this.__isAsync&&(vt=Wg(vt),et&&(et=Wg(et)),Bt&&(Bt=Wg(Bt)));const qt=super.subscribe({next:et,error:vt,complete:Bt});return d instanceof p.w0&&d.add(qt),qt}};function kT(){return this._results[Ao()]()}class _f{constructor(d=!1){this._emitDistinctChangesOnly=d,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const v=Ao(),C=_f.prototype;C[v]||(C[v]=kT)}get changes(){return this._changes||(this._changes=new yu)}get(d){return this._results[d]}map(d){return this._results.map(d)}filter(d){return this._results.filter(d)}find(d){return this._results.find(d)}reduce(d,v){return this._results.reduce(d,v)}forEach(d){this._results.forEach(d)}some(d){return this._results.some(d)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(d,v){const C=this;C.dirty=!1;const R=_s(d);(this._changesDetected=!function(h,d,v){if(h.length!==d.length)return!1;for(let C=0;C<h.length;C++){let R=h[C],x=d[C];if(v&&(R=v(R),x=v(x)),x!==R)return!1}return!0}(C._results,R,v))&&(C._results=R,C.length=R.length,C.last=R[this.length-1],C.first=R[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Dp=(()=>{class h{}return h.__NG_ELEMENT_ID__=PT,h})();const LT=Dp,NT=class extends LT{constructor(d,v,C){super(),this._declarationLView=d,this._declarationTContainer=v,this.elementRef=C}createEmbeddedView(d){const v=this._declarationTContainer.tViews,C=nd(this._declarationLView,v,d,16,null,v.declTNode,null,null,null,null);C[17]=this._declarationLView[this._declarationTContainer.index];const x=this._declarationLView[19];return null!==x&&(C[19]=x.createEmbeddedView(v)),od(v,C,d),new Sp(C)}};function PT(){return vf(F(),Di())}function vf(h,d){return 4&h.type?new NT(d,h,Gd(h,d)):null}let bf=(()=>{class h{}return h.__NG_ELEMENT_ID__=FT,h})();function FT(){return zv(F(),Di())}const BT=bf,Wv=class extends BT{constructor(d,v,C){super(),this._lContainer=d,this._hostTNode=v,this._hostLView=C}get element(){return Gd(this._hostTNode,this._hostLView)}get injector(){return new jr(this._hostTNode,this._hostLView)}get parentInjector(){const d=ne(this._hostTNode,this._hostLView);if(gs(d)){const v=ta(d,this._hostLView),C=Ja(d);return new jr(v[1].data[C+8],v)}return new jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(d){const v=jv(this._lContainer);return null!==v&&v[d]||null}get length(){return this._lContainer.length-10}createEmbeddedView(d,v,C){const R=d.createEmbeddedView(v||{});return this.insert(R,C),R}createComponent(d,v,C,R,x){const z=d&&!("function"==typeof d);let et;if(z)et=v;else{const be=v||{};et=be.index,C=be.injector,R=be.projectableNodes,x=be.ngModuleRef}const vt=z?d:new Ug(pi(d)),Bt=C||this.parentInjector;if(!x&&null==vt.ngModule&&Bt){const be=Bt.get(Wd,null);be&&(x=be)}const qt=vt.create(Bt,R,void 0,x);return this.insert(qt.hostView,et),qt}insert(d,v){const C=d._lView,R=C[1];if(Po(C[3])){const qt=this.indexOf(d);if(-1!==qt)this.detach(qt);else{const be=C[3],Fe=new Wv(be,be[6],be[3]);Fe.detach(Fe.indexOf(d))}}const x=this._adjustIndex(v),z=this._lContainer;!function(h,d,v,C){const R=10+C,x=v.length;C>0&&(v[R-1][4]=d),C<x-10?(d[4]=v[R],Fa(v,10+C,d)):(v.push(d),d[4]=null),d[3]=v;const z=d[17];null!==z&&v!==z&&function(h,d){const v=h[9];d[16]!==d[3][3][16]&&(h[2]=!0),null===v?h[9]=[d]:v.push(d)}(z,d);const et=d[19];null!==et&&et.insertView(h),d[2]|=128}(R,C,z,x);const et=Xn(x,z),vt=C[11],Bt=me(vt,z[7]);return null!==Bt&&function(h,d,v,C,R,x){C[0]=R,C[6]=d,io(h,C,v,1,R,x)}(R,z[6],vt,C,Bt,et),d.attachToViewContainerRef(),Fa(jg(z),x,d),d}move(d,v){return this.insert(d,v)}indexOf(d){const v=jv(this._lContainer);return null!==v?v.indexOf(d):-1}remove(d){const v=this._adjustIndex(d,-1),C=_h(this._lContainer,v);C&&(na(jg(this._lContainer),v),pu(C[1],C))}detach(d){const v=this._adjustIndex(d,-1),C=_h(this._lContainer,v);return C&&null!=na(jg(this._lContainer),v)?new Sp(C):null}_adjustIndex(d,v=0){return null==d?this.length+v:d}};function jv(h){return h[8]}function jg(h){return h[8]||(h[8]=[])}function zv(h,d){let v;const C=d[h.index];if(Po(C))v=C;else{let R;if(8&h.type)R=Dt(C);else{const x=d[11];R=x.createComment("");const z=St(h,d);Vt(x,me(x,z),R,function(h,d){return Gn(h)?h.nextSibling(d):d.nextSibling}(x,z),!1)}d[h.index]=v=Yf(C,d,R,h),Ed(d,v)}return new Wv(v,h,d)}class zg{constructor(d){this.queryList=d,this.matches=null}clone(){return new zg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yg{constructor(d=[]){this.queries=d}createEmbeddedView(d){const v=d.queries;if(null!==v){const C=null!==d.contentQueries?d.contentQueries[0]:v.length,R=[];for(let x=0;x<C;x++){const z=v.getByIndex(x);R.push(this.queries[z.indexInDeclarationView].clone())}return new Yg(R)}return null}insertView(d){this.dirtyQueriesWithMatches(d)}detachView(d){this.dirtyQueriesWithMatches(d)}dirtyQueriesWithMatches(d){for(let v=0;v<this.queries.length;v++)null!==tb(d,v).matches&&this.queries[v].setDirty()}}class Yv{constructor(d,v,C=null){this.predicate=d,this.flags=v,this.read=C}}class Xg{constructor(d=[]){this.queries=d}elementStart(d,v){for(let C=0;C<this.queries.length;C++)this.queries[C].elementStart(d,v)}elementEnd(d){for(let v=0;v<this.queries.length;v++)this.queries[v].elementEnd(d)}embeddedTView(d){let v=null;for(let C=0;C<this.length;C++){const R=null!==v?v.length:0,x=this.getByIndex(C).embeddedTView(d,R);x&&(x.indexInDeclarationView=C,null!==v?v.push(x):v=[x])}return null!==v?new Xg(v):null}template(d,v){for(let C=0;C<this.queries.length;C++)this.queries[C].template(d,v)}getByIndex(d){return this.queries[d]}get length(){return this.queries.length}track(d){this.queries.push(d)}}class Kg{constructor(d,v=-1){this.metadata=d,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=v}elementStart(d,v){this.isApplyingToNode(v)&&this.matchTNode(d,v)}elementEnd(d){this._declarationNodeIndex===d.index&&(this._appliesToNextNode=!1)}template(d,v){this.elementStart(d,v)}embeddedTView(d,v){return this.isApplyingToNode(d)?(this.crossesNgTemplate=!0,this.addMatch(-d.index,v),new Kg(this.metadata)):null}isApplyingToNode(d){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const v=this._declarationNodeIndex;let C=d.parent;for(;null!==C&&8&C.type&&C.index!==v;)C=C.parent;return v===(null!==C?C.index:-1)}return this._appliesToNextNode}matchTNode(d,v){const C=this.metadata.predicate;if(Array.isArray(C))for(let R=0;R<C.length;R++){const x=C[R];this.matchTNodeWithReadOption(d,v,UT(v,x)),this.matchTNodeWithReadOption(d,v,Ra(v,d,x,!1,!1))}else C===Dp?4&v.type&&this.matchTNodeWithReadOption(d,v,-1):this.matchTNodeWithReadOption(d,v,Ra(v,d,C,!1,!1))}matchTNodeWithReadOption(d,v,C){if(null!==C){const R=this.metadata.read;if(null!==R)if(R===Cp||R===bf||R===Dp&&4&v.type)this.addMatch(v.index,-2);else{const x=Ra(v,d,R,!1,!1);null!==x&&this.addMatch(v.index,x)}else this.addMatch(v.index,C)}}addMatch(d,v){null===this.matches?this.matches=[d,v]:this.matches.push(d,v)}}function UT(h,d){const v=h.localNames;if(null!==v)for(let C=0;C<v.length;C+=2)if(v[C]===d)return v[C+1];return null}function WT(h,d,v,C){return-1===v?function(h,d){return 11&h.type?Gd(h,d):4&h.type?vf(h,d):null}(d,h):-2===v?function(h,d,v){return v===Cp?Gd(d,h):v===Dp?vf(d,h):v===bf?zv(d,h):void 0}(h,d,C):is(h,h[1],v,d)}function Xv(h,d,v,C){const R=d[19].queries[C];if(null===R.matches){const x=h.data,z=v.matches,et=[];for(let vt=0;vt<z.length;vt+=2){const Bt=z[vt];et.push(Bt<0?null:WT(d,x[Bt],z[vt+1],v.metadata.read))}R.matches=et}return R.matches}function Jg(h,d,v,C){const R=h.queries.getByIndex(v),x=R.matches;if(null!==x){const z=Xv(h,d,R,v);for(let et=0;et<x.length;et+=2){const vt=x[et];if(vt>0)C.push(z[et/2]);else{const Bt=x[et+1],qt=d[-vt];for(let be=10;be<qt.length;be++){const Fe=qt[be];Fe[17]===Fe[3]&&Jg(Fe[1],Fe,Bt,C)}if(null!==qt[9]){const be=qt[9];for(let Fe=0;Fe<be.length;Fe++){const ni=be[Fe];Jg(ni[1],ni,Bt,C)}}}}}return C}function Kv(h){const d=Di(),v=In(),C=Qr();Uo(C+1);const R=tb(v,C);if(h.dirty&&Rn(d)===(2==(2&R.metadata.flags))){if(null===R.matches)h.reset([]);else{const x=R.crossesNgTemplate?Jg(v,d,C,[]):Xv(v,d,R,C);h.reset(x,sT),h.notifyOnChanges()}return!0}return!1}function Jv(h,d,v){const C=In();C.firstCreatePass&&(qv(C,new Yv(h,d,v),-1),2==(2&d)&&(C.staticViewQueries=!0)),Qv(C,Di(),d)}function $v(h,d,v,C){const R=In();if(R.firstCreatePass){const x=F();qv(R,new Yv(d,v,C),x.index),function(h,d){const v=h.contentQueries||(h.contentQueries=[]);d!==(v.length?v[v.length-1]:-1)&&v.push(h.queries.length-1,d)}(R,h),2==(2&v)&&(R.staticContentQueries=!0)}Qv(R,Di(),v)}function Zv(){return h=Di(),d=Qr(),h[19].queries[d].queryList;var h,d}function Qv(h,d,v){const C=new _f(4==(4&v));Gp(h,d,C,C.destroy),null===d[19]&&(d[19]=new Yg),d[19].queries.push(new zg(C))}function qv(h,d,v){null===h.queries&&(h.queries=new Xg),h.queries.track(new Kg(d,v))}function tb(h,d){return h.queries.getByIndex(d)}function eb(h,d){return vf(h,d)}function Tf(...h){}const em=new er("Application Initializer");let Yd=(()=>{class h{constructor(v){this.appInits=v,this.resolve=Tf,this.reject=Tf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((C,R)=>{this.resolve=C,this.reject=R})}runInitializers(){if(this.initialized)return;const v=[],C=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let R=0;R<this.appInits.length;R++){const x=this.appInits[R]();if(bg(x))v.push(x);else if(s_(x)){const z=new Promise((et,vt)=>{x.subscribe({complete:et,error:vt})});v.push(z)}}Promise.all(v).then(()=>{C()}).catch(R=>{this.reject(R)}),0===v.length&&C(),this.initialized=!0}}return h.\u0275fac=function(v){return new(v||h)(ar(em,8))},h.\u0275prov=Ne({token:h,factory:h.\u0275fac}),h})();const vb=new er("AppId"),uC={provide:vb,useFactory:function(){return`${im()}${im()}${im()}`},deps:[]};function im(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bb=new er("Platform Initializer"),yb=new er("Platform ID"),Eb=new er("appBootstrapListener");let Tb=(()=>{class h{log(v){console.log(v)}warn(v){console.warn(v)}}return h.\u0275fac=function(v){return new(v||h)},h.\u0275prov=Ne({token:h,factory:h.\u0275fac}),h})();const Cf=new er("LocaleId"),Cb=new er("DefaultCurrencyCode");class hC{constructor(d,v){this.ngModuleFactory=d,this.componentFactories=v}}let nm=(()=>{class h{compileModuleSync(v){return new Gg(v)}compileModuleAsync(v){return Promise.resolve(this.compileModuleSync(v))}compileModuleAndAllComponentsSync(v){const C=this.compileModuleSync(v),x=Oa(xn(v).declarations).reduce((z,et)=>{const vt=pi(et);return vt&&z.push(new Ug(vt)),z},[]);return new hC(C,x)}compileModuleAndAllComponentsAsync(v){return Promise.resolve(this.compileModuleAndAllComponentsSync(v))}clearCache(){}clearCacheFor(v){}getModuleId(v){}}return h.\u0275fac=function(v){return new(v||h)},h.\u0275prov=Ne({token:h,factory:h.\u0275fac}),h})();const pC=(()=>Promise.resolve(0))();function om(h){"undefined"==typeof Zone?pC.then(()=>{h&&h.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",h)}class tc{constructor({enableLongStackTrace:d=!1,shouldCoalesceEventChangeDetection:v=!1,shouldCoalesceRunChangeDetection:C=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yu(!1),this.onMicrotaskEmpty=new yu(!1),this.onStable=new yu(!1),this.onError=new yu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const R=this;R._nesting=0,R._outer=R._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(R._inner=R._inner.fork(new Zone.TaskTrackingZoneSpec)),d&&Zone.longStackTraceZoneSpec&&(R._inner=R._inner.fork(Zone.longStackTraceZoneSpec)),R.shouldCoalesceEventChangeDetection=!C&&v,R.shouldCoalesceRunChangeDetection=C,R.lastRequestAnimationFrameId=-1,R.nativeRequestAnimationFrame=function(){let h=gi.requestAnimationFrame,d=gi.cancelAnimationFrame;if("undefined"!=typeof Zone&&h&&d){const v=h[Zone.__symbol__("OriginalDelegate")];v&&(h=v);const C=d[Zone.__symbol__("OriginalDelegate")];C&&(d=C)}return{nativeRequestAnimationFrame:h,nativeCancelAnimationFrame:d}}().nativeRequestAnimationFrame,function(h){const d=()=>{!function(h){h.isCheckStableRunning||-1!==h.lastRequestAnimationFrameId||(h.lastRequestAnimationFrameId=h.nativeRequestAnimationFrame.call(gi,()=>{h.fakeTopEventTask||(h.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{h.lastRequestAnimationFrameId=-1,sm(h),h.isCheckStableRunning=!0,rm(h),h.isCheckStableRunning=!1},void 0,()=>{},()=>{})),h.fakeTopEventTask.invoke()}),sm(h))}(h)};h._inner=h._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(v,C,R,x,z,et)=>{try{return Sb(h),v.invokeTask(R,x,z,et)}finally{(h.shouldCoalesceEventChangeDetection&&"eventTask"===x.type||h.shouldCoalesceRunChangeDetection)&&d(),wb(h)}},onInvoke:(v,C,R,x,z,et,vt)=>{try{return Sb(h),v.invoke(R,x,z,et,vt)}finally{h.shouldCoalesceRunChangeDetection&&d(),wb(h)}},onHasTask:(v,C,R,x)=>{v.hasTask(R,x),C===R&&("microTask"==x.change?(h._hasPendingMicrotasks=x.microTask,sm(h),rm(h)):"macroTask"==x.change&&(h.hasPendingMacrotasks=x.macroTask))},onHandleError:(v,C,R,x)=>(v.handleError(R,x),h.runOutsideAngular(()=>h.onError.emit(x)),!1)})}(R)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!tc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(tc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(d,v,C){return this._inner.run(d,v,C)}runTask(d,v,C,R){const x=this._inner,z=x.scheduleEventTask("NgZoneEvent: "+R,d,gC,Tf,Tf);try{return x.runTask(z,v,C)}finally{x.cancelTask(z)}}runGuarded(d,v,C){return this._inner.runGuarded(d,v,C)}runOutsideAngular(d){return this._outer.run(d)}}const gC={};function rm(h){if(0==h._nesting&&!h.hasPendingMicrotasks&&!h.isStable)try{h._nesting++,h.onMicrotaskEmpty.emit(null)}finally{if(h._nesting--,!h.hasPendingMicrotasks)try{h.runOutsideAngular(()=>h.onStable.emit(null))}finally{h.isStable=!0}}}function sm(h){h.hasPendingMicrotasks=!!(h._hasPendingMicrotasks||(h.shouldCoalesceEventChangeDetection||h.shouldCoalesceRunChangeDetection)&&-1!==h.lastRequestAnimationFrameId)}function Sb(h){h._nesting++,h.isStable&&(h.isStable=!1,h.onUnstable.emit(null))}function wb(h){h._nesting--,rm(h)}class vC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yu,this.onMicrotaskEmpty=new yu,this.onStable=new yu,this.onError=new yu}run(d,v,C){return d.apply(v,C)}runGuarded(d,v,C){return d.apply(v,C)}runOutsideAngular(d){return d()}runTask(d,v,C,R){return d.apply(v,C)}}let Rb=(()=>{class h{constructor(v){this._ngZone=v,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),v.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{tc.assertNotInAngularZone(),om(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())om(()=>{for(;0!==this._callbacks.length;){let v=this._callbacks.pop();clearTimeout(v.timeoutId),v.doneCb(this._didWork)}this._didWork=!1});else{let v=this.getPendingTasks();this._callbacks=this._callbacks.filter(C=>!C.updateCb||!C.updateCb(v)||(clearTimeout(C.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(v=>({source:v.source,creationLocation:v.creationLocation,data:v.data})):[]}addCallback(v,C,R){let x=-1;C&&C>0&&(x=setTimeout(()=>{this._callbacks=this._callbacks.filter(z=>z.timeoutId!==x),v(this._didWork,this.getPendingTasks())},C)),this._callbacks.push({doneCb:v,timeoutId:x,updateCb:R})}whenStable(v,C,R){if(R&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(v,C,R),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(v,C,R){return[]}}return h.\u0275fac=function(v){return new(v||h)(ar(tc))},h.\u0275prov=Ne({token:h,factory:h.\u0275fac}),h})(),Db=(()=>{class h{constructor(){this._applications=new Map,am.addToWindow(this)}registerApplication(v,C){this._applications.set(v,C)}unregisterApplication(v){this._applications.delete(v)}unregisterAllApplications(){this._applications.clear()}getTestability(v){return this._applications.get(v)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(v,C=!0){return am.findTestabilityInTree(this,v,C)}}return h.\u0275fac=function(v){return new(v||h)},h.\u0275prov=Ne({token:h,factory:h.\u0275fac}),h})();class bC{addToWindow(d){}findTestabilityInTree(d,v,C){return null}}function yC(h){am=h}let Wc,am=new bC;const Ib=new er("AllowMultipleToken");class SC{constructor(d,v){this.name=d,this.token=v}}function Mb(h,d,v=[]){const C=`Platform: ${d}`,R=new er(C);return(x=[])=>{let z=Ab();if(!z||z.injector.get(Ib,!1))if(h)h(v.concat(x).concat({provide:R,useValue:!0}));else{const et=v.concat(x).concat({provide:R,useValue:!0},{provide:dp,useValue:"platform"});!function(h){if(Wc&&!Wc.destroyed&&!Wc.injector.get(Ib,!1))throw new $("400","");Wc=h.get(Ob);const d=h.get(bb,null);d&&d.forEach(v=>v())}(Nr.create({providers:et,name:C}))}return function(h){const d=Ab();if(!d)throw new $("401","");return d}()}}function Ab(){return Wc&&!Wc.destroyed?Wc:null}let Ob=(()=>{class h{constructor(v){this._injector=v,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(v,C){const et=function(h,d){let v;return v="noop"===h?new vC:("zone.js"===h?void 0:h)||new tc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==d?void 0:d.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==d?void 0:d.ngZoneRunCoalescing)}),v}(C?C.ngZone:void 0,{ngZoneEventCoalescing:C&&C.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:C&&C.ngZoneRunCoalescing||!1}),vt=[{provide:tc,useValue:et}];return et.run(()=>{const Bt=Nr.create({providers:vt,parent:this.injector,name:v.moduleType.name}),qt=v.create(Bt),be=qt.injector.get(zl,null);if(!be)throw new $("402","");return et.runOutsideAngular(()=>{const Fe=et.onError.subscribe({next:ni=>{be.handleError(ni)}});qt.onDestroy(()=>{lm(this._modules,qt),Fe.unsubscribe()})}),function(h,d,v){try{const C=v();return bg(C)?C.catch(R=>{throw d.runOutsideAngular(()=>h.handleError(R)),R}):C}catch(C){throw d.runOutsideAngular(()=>h.handleError(C)),C}}(be,et,()=>{const Fe=qt.injector.get(Yd);return Fe.runInitializers(),Fe.donePromise.then(()=>(function(h){Be(h,"Expected localeId to be defined"),"string"==typeof h&&(Z_=h.toLowerCase().replace(/_/g,"-"))}(qt.injector.get(Cf,hf)||hf),this._moduleDoBootstrap(qt),qt))})})}bootstrapModule(v,C=[]){const R=xb({},C);return function(h,d,v){const C=new Gg(v);return Promise.resolve(C)}(0,0,v).then(x=>this.bootstrapModuleFactory(x,R))}_moduleDoBootstrap(v){const C=v.injector.get(Mp);if(v._bootstrapComponents.length>0)v._bootstrapComponents.forEach(R=>C.bootstrap(R));else{if(!v.instance.ngDoBootstrap)throw new $("403","");v.instance.ngDoBootstrap(C)}this._modules.push(v)}onDestroy(v){this._destroyListeners.push(v)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $("404","");this._modules.slice().forEach(v=>v.destroy()),this._destroyListeners.forEach(v=>v()),this._destroyed=!0}get destroyed(){return this._destroyed}}return h.\u0275fac=function(v){return new(v||h)(ar(Nr))},h.\u0275prov=Ne({token:h,factory:h.\u0275fac}),h})();function xb(h,d){return Array.isArray(d)?d.reduce(xb,h):Object.assign(Object.assign({},h),d)}let Mp=(()=>{class h{constructor(v,C,R,x,z){this._zone=v,this._injector=C,this._exceptionHandler=R,this._componentFactoryResolver=x,this._initStatus=z,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const et=new e.y(Bt=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Bt.next(this._stable),Bt.complete()})}),vt=new e.y(Bt=>{let qt;this._zone.runOutsideAngular(()=>{qt=this._zone.onStable.subscribe(()=>{tc.assertNotInAngularZone(),om(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Bt.next(!0))})})});const be=this._zone.onUnstable.subscribe(()=>{tc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Bt.next(!1)}))});return()=>{qt.unsubscribe(),be.unsubscribe()}});this.isStable=(0,t.T)(et,vt.pipe((0,n.B)()))}bootstrap(v,C){if(!this._initStatus.done)throw new $("405","");let R;R=v instanceof Cv?v:this._componentFactoryResolver.resolveComponentFactory(v),this.componentTypes.push(R.componentType);const x=function(h){return h.isBoundToModule}(R)?void 0:this._injector.get(Wd),et=R.create(Nr.NULL,[],C||R.selector,x),vt=et.location.nativeElement,Bt=et.injector.get(Rb,null),qt=Bt&&et.injector.get(Db);return Bt&&qt&&qt.registerApplication(vt,Bt),et.onDestroy(()=>{this.detachView(et.hostView),lm(this.components,et),qt&&qt.unregisterApplication(vt)}),this._loadComponent(et),et}tick(){if(this._runningTick)throw new $("101","");try{this._runningTick=!0;for(let v of this._views)v.detectChanges()}catch(v){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(v))}finally{this._runningTick=!1}}attachView(v){const C=v;this._views.push(C),C.attachToAppRef(this)}detachView(v){const C=v;lm(this._views,C),C.detachFromAppRef()}_loadComponent(v){this.attachView(v.hostView),this.tick(),this.components.push(v),this._injector.get(Eb,[]).concat(this._bootstrapListeners).forEach(R=>R(v))}ngOnDestroy(){this._views.slice().forEach(v=>v.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return h.\u0275fac=function(v){return new(v||h)(ar(tc),ar(Nr),ar(zl),ar(Tp),ar(Yd))},h.\u0275prov=Ne({token:h,factory:h.\u0275fac}),h})();function lm(h,d){const v=h.indexOf(d);v>-1&&h.splice(v,1)}let Lb=!0;function AC(){Lb=!1}let OC=(()=>{class h{}return h.__NG_ELEMENT_ID__=xC,h})();function xC(h){return function(h,d,v){if(yn(h)&&!v){const C=mn(h.index,d);return new Sp(C,C)}return 47&h.type?new Sp(d[16],d):null}(F(),Di(),16==(16&h))}class Ub{constructor(){}supports(d){return Dl(d)}create(d){return new HC(d)}}const BC=(h,d)=>d;class HC{constructor(d){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=d||BC}forEachItem(d){let v;for(v=this._itHead;null!==v;v=v._next)d(v)}forEachOperation(d){let v=this._itHead,C=this._removalsHead,R=0,x=null;for(;v||C;){const z=!C||v&&v.currentIndex<Wb(C,R,x)?v:C,et=Wb(z,R,x),vt=z.currentIndex;if(z===C)R--,C=C._nextRemoved;else if(v=v._next,null==z.previousIndex)R++;else{x||(x=[]);const Bt=et-R,qt=vt-R;if(Bt!=qt){for(let Fe=0;Fe<Bt;Fe++){const ni=Fe<x.length?x[Fe]:x[Fe]=0,Si=ni+Fe;qt<=Si&&Si<Bt&&(x[Fe]=ni+1)}x[z.previousIndex]=qt-Bt}}et!==vt&&d(z,et,vt)}}forEachPreviousItem(d){let v;for(v=this._previousItHead;null!==v;v=v._nextPrevious)d(v)}forEachAddedItem(d){let v;for(v=this._additionsHead;null!==v;v=v._nextAdded)d(v)}forEachMovedItem(d){let v;for(v=this._movesHead;null!==v;v=v._nextMoved)d(v)}forEachRemovedItem(d){let v;for(v=this._removalsHead;null!==v;v=v._nextRemoved)d(v)}forEachIdentityChange(d){let v;for(v=this._identityChangesHead;null!==v;v=v._nextIdentityChange)d(v)}diff(d){if(null==d&&(d=[]),!Dl(d))throw new Error(`Error trying to diff '${c(d)}'. Only arrays and iterables are allowed`);return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let R,x,z,v=this._itHead,C=!1;if(Array.isArray(d)){this.length=d.length;for(let et=0;et<this.length;et++)x=d[et],z=this._trackByFn(et,x),null!==v&&Object.is(v.trackById,z)?(C&&(v=this._verifyReinsertion(v,x,z,et)),Object.is(v.item,x)||this._addIdentityChange(v,x)):(v=this._mismatch(v,x,z,et),C=!0),v=v._next}else R=0,function(h,d){if(Array.isArray(h))for(let v=0;v<h.length;v++)d(h[v]);else{const v=h[Ao()]();let C;for(;!(C=v.next()).done;)d(C.value)}}(d,et=>{z=this._trackByFn(R,et),null!==v&&Object.is(v.trackById,z)?(C&&(v=this._verifyReinsertion(v,et,z,R)),Object.is(v.item,et)||this._addIdentityChange(v,et)):(v=this._mismatch(v,et,z,R),C=!0),v=v._next,R++}),this.length=R;return this._truncate(v),this.collection=d,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let d;for(d=this._previousItHead=this._itHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._additionsHead;null!==d;d=d._nextAdded)d.previousIndex=d.currentIndex;for(this._additionsHead=this._additionsTail=null,d=this._movesHead;null!==d;d=d._nextMoved)d.previousIndex=d.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(d,v,C,R){let x;return null===d?x=this._itTail:(x=d._prev,this._remove(d)),null!==(d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(C,null))?(Object.is(d.item,v)||this._addIdentityChange(d,v),this._reinsertAfter(d,x,R)):null!==(d=null===this._linkedRecords?null:this._linkedRecords.get(C,R))?(Object.is(d.item,v)||this._addIdentityChange(d,v),this._moveAfter(d,x,R)):d=this._addAfter(new VC(v,C),x,R),d}_verifyReinsertion(d,v,C,R){let x=null===this._unlinkedRecords?null:this._unlinkedRecords.get(C,null);return null!==x?d=this._reinsertAfter(x,d._prev,R):d.currentIndex!=R&&(d.currentIndex=R,this._addToMoves(d,R)),d}_truncate(d){for(;null!==d;){const v=d._next;this._addToRemovals(this._unlink(d)),d=v}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(d,v,C){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(d);const R=d._prevRemoved,x=d._nextRemoved;return null===R?this._removalsHead=x:R._nextRemoved=x,null===x?this._removalsTail=R:x._prevRemoved=R,this._insertAfter(d,v,C),this._addToMoves(d,C),d}_moveAfter(d,v,C){return this._unlink(d),this._insertAfter(d,v,C),this._addToMoves(d,C),d}_addAfter(d,v,C){return this._insertAfter(d,v,C),this._additionsTail=null===this._additionsTail?this._additionsHead=d:this._additionsTail._nextAdded=d,d}_insertAfter(d,v,C){const R=null===v?this._itHead:v._next;return d._next=R,d._prev=v,null===R?this._itTail=d:R._prev=d,null===v?this._itHead=d:v._next=d,null===this._linkedRecords&&(this._linkedRecords=new Gb),this._linkedRecords.put(d),d.currentIndex=C,d}_remove(d){return this._addToRemovals(this._unlink(d))}_unlink(d){null!==this._linkedRecords&&this._linkedRecords.remove(d);const v=d._prev,C=d._next;return null===v?this._itHead=C:v._next=C,null===C?this._itTail=v:C._prev=v,d}_addToMoves(d,v){return d.previousIndex===v||(this._movesTail=null===this._movesTail?this._movesHead=d:this._movesTail._nextMoved=d),d}_addToRemovals(d){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gb),this._unlinkedRecords.put(d),d.currentIndex=null,d._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=d,d._prevRemoved=null):(d._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=d),d}_addIdentityChange(d,v){return d.item=v,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=d:this._identityChangesTail._nextIdentityChange=d,d}}class VC{constructor(d,v){this.item=d,this.trackById=v,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class UC{constructor(){this._head=null,this._tail=null}add(d){null===this._head?(this._head=this._tail=d,d._nextDup=null,d._prevDup=null):(this._tail._nextDup=d,d._prevDup=this._tail,d._nextDup=null,this._tail=d)}get(d,v){let C;for(C=this._head;null!==C;C=C._nextDup)if((null===v||v<=C.currentIndex)&&Object.is(C.trackById,d))return C;return null}remove(d){const v=d._prevDup,C=d._nextDup;return null===v?this._head=C:v._nextDup=C,null===C?this._tail=v:C._prevDup=v,null===this._head}}class Gb{constructor(){this.map=new Map}put(d){const v=d.trackById;let C=this.map.get(v);C||(C=new UC,this.map.set(v,C)),C.add(d)}get(d,v){const R=this.map.get(d);return R?R.get(d,v):null}remove(d){const v=d.trackById;return this.map.get(v).remove(d)&&this.map.delete(v),d}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wb(h,d,v){const C=h.previousIndex;if(null===C)return C;let R=0;return v&&C<v.length&&(R=v[C]),C+d+R}class jb{constructor(){}supports(d){return d instanceof Map||ir(d)}create(){return new GC}}class GC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(d){let v;for(v=this._mapHead;null!==v;v=v._next)d(v)}forEachPreviousItem(d){let v;for(v=this._previousMapHead;null!==v;v=v._nextPrevious)d(v)}forEachChangedItem(d){let v;for(v=this._changesHead;null!==v;v=v._nextChanged)d(v)}forEachAddedItem(d){let v;for(v=this._additionsHead;null!==v;v=v._nextAdded)d(v)}forEachRemovedItem(d){let v;for(v=this._removalsHead;null!==v;v=v._nextRemoved)d(v)}diff(d){if(d){if(!(d instanceof Map||ir(d)))throw new Error(`Error trying to diff '${c(d)}'. Only maps and objects are allowed`)}else d=new Map;return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let v=this._mapHead;if(this._appendAfter=null,this._forEach(d,(C,R)=>{if(v&&v.key===R)this._maybeAddToChanges(v,C),this._appendAfter=v,v=v._next;else{const x=this._getOrCreateRecordForKey(R,C);v=this._insertBeforeOrAppend(v,x)}}),v){v._prev&&(v._prev._next=null),this._removalsHead=v;for(let C=v;null!==C;C=C._nextRemoved)C===this._mapHead&&(this._mapHead=null),this._records.delete(C.key),C._nextRemoved=C._next,C.previousValue=C.currentValue,C.currentValue=null,C._prev=null,C._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(d,v){if(d){const C=d._prev;return v._next=d,v._prev=C,d._prev=v,C&&(C._next=v),d===this._mapHead&&(this._mapHead=v),this._appendAfter=d,d}return this._appendAfter?(this._appendAfter._next=v,v._prev=this._appendAfter):this._mapHead=v,this._appendAfter=v,null}_getOrCreateRecordForKey(d,v){if(this._records.has(d)){const R=this._records.get(d);this._maybeAddToChanges(R,v);const x=R._prev,z=R._next;return x&&(x._next=z),z&&(z._prev=x),R._next=null,R._prev=null,R}const C=new WC(d);return this._records.set(d,C),C.currentValue=v,this._addToAdditions(C),C}_reset(){if(this.isDirty){let d;for(this._previousMapHead=this._mapHead,d=this._previousMapHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._changesHead;null!==d;d=d._nextChanged)d.previousValue=d.currentValue;for(d=this._additionsHead;null!=d;d=d._nextAdded)d.previousValue=d.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(d,v){Object.is(v,d.currentValue)||(d.previousValue=d.currentValue,d.currentValue=v,this._addToChanges(d))}_addToAdditions(d){null===this._additionsHead?this._additionsHead=this._additionsTail=d:(this._additionsTail._nextAdded=d,this._additionsTail=d)}_addToChanges(d){null===this._changesHead?this._changesHead=this._changesTail=d:(this._changesTail._nextChanged=d,this._changesTail=d)}_forEach(d,v){d instanceof Map?d.forEach(v):Object.keys(d).forEach(C=>v(d[C],C))}}class WC{constructor(d){this.key=d,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zb(){return new wf([new Ub])}let wf=(()=>{class h{constructor(v){this.factories=v}static create(v,C){if(null!=C){const R=C.factories.slice();v=v.concat(R)}return new h(v)}static extend(v){return{provide:h,useFactory:C=>h.create(v,C||zb()),deps:[[h,new Ha,new Ys]]}}find(v){const C=this.factories.find(R=>R.supports(v));if(null!=C)return C;throw new Error(`Cannot find a differ supporting object '${v}' of type '${function(h){return h.name||typeof h}(v)}'`)}}return h.\u0275prov=Ne({token:h,providedIn:"root",factory:zb}),h})();function Yb(){return new Rf([new jb])}let Rf=(()=>{class h{constructor(v){this.factories=v}static create(v,C){if(C){const R=C.factories.slice();v=v.concat(R)}return new h(v)}static extend(v){return{provide:h,useFactory:C=>h.create(v,C||Yb()),deps:[[h,new Ha,new Ys]]}}find(v){const C=this.factories.find(R=>R.supports(v));if(C)return C;throw new Error(`Cannot find a differ supporting object '${v}'`)}}return h.\u0275prov=Ne({token:h,providedIn:"root",factory:Yb}),h})();const zC=[new jb],XC=new wf([new Ub]),KC=new Rf(zC),JC=Mb(null,"core",[{provide:yb,useValue:"unknown"},{provide:Ob,deps:[Nr]},{provide:Db,deps:[]},{provide:Tb,deps:[]}]),tS=[{provide:Mp,useClass:Mp,deps:[tc,Nr,zl,Tp,Yd]},{provide:fT,deps:[tc],useFactory:function(h){let d=[];return h.onStable.subscribe(()=>{for(;d.length;)d.pop()()}),function(v){d.push(v)}}},{provide:Yd,useClass:Yd,deps:[[new Ys,em]]},{provide:nm,useClass:nm,deps:[]},uC,{provide:wf,useFactory:function(){return XC},deps:[]},{provide:Rf,useFactory:function(){return KC},deps:[]},{provide:Cf,useFactory:function(h){return h||"undefined"!=typeof $localize&&$localize.locale||hf},deps:[[new Hl(Cf),new Ys,new Ha]]},{provide:Cb,useValue:"USD"}];let iS=(()=>{class h{constructor(v){}}return h.\u0275fac=function(v){return new(v||h)(ar(Mp))},h.\u0275mod=Sn({type:h}),h.\u0275inj=Ft({providers:tS}),h})()},93075:(k,B,f)=>{"use strict";f.d(B,{Zs:()=>us,Fj:()=>H,NI:()=>or,oH:()=>Ts,sg:()=>Fr,u5:()=>ca,Cf:()=>nt,JU:()=>c,a5:()=>Rt,JJ:()=>jt,JL:()=>Yt,F:()=>dn,On:()=>jo,UX:()=>Gn,kI:()=>xt,_Y:()=>rr});var b=f(5e3),p=f(69808),e=f(32076),t=f(4128),n=f(54004);let o=(()=>{class X{constructor(G,St){this._renderer=G,this._elementRef=St,this.onChange=Ee=>{},this.onTouched=()=>{}}setProperty(G,St){this._renderer.setProperty(this._elementRef.nativeElement,G,St)}registerOnTouched(G){this.onTouched=G}registerOnChange(G){this.onChange=G}setDisabledState(G){this.setProperty("disabled",G)}}return X.\u0275fac=function(G){return new(G||X)(b.Y36(b.Qsj),b.Y36(b.SBq))},X.\u0275dir=b.lG2({type:X}),X})(),s=(()=>{class X extends o{}return X.\u0275fac=function(){let P;return function(St){return(P||(P=b.n5z(X)))(St||X)}}(),X.\u0275dir=b.lG2({type:X,features:[b.qOj]}),X})();const c=new b.OlP("NgValueAccessor"),M={provide:c,useExisting:(0,b.Gpc)(()=>H),multi:!0},V=new b.OlP("CompositionEventMode");let H=(()=>{class X extends o{constructor(G,St,Ee){super(G,St),this._compositionMode=Ee,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const X=(0,p.q)()?(0,p.q)().getUserAgent():"";return/android (\d+)/.test(X.toLowerCase())}())}writeValue(G){this.setProperty("value",null==G?"":G)}_handleInput(G){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(G)}_compositionStart(){this._composing=!0}_compositionEnd(G){this._composing=!1,this._compositionMode&&this.onChange(G)}}return X.\u0275fac=function(G){return new(G||X)(b.Y36(b.Qsj),b.Y36(b.SBq),b.Y36(V,8))},X.\u0275dir=b.lG2({type:X,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(G,St){1&G&&b.NdJ("input",function(ei){return St._handleInput(ei.target.value)})("blur",function(){return St.onTouched()})("compositionstart",function(){return St._compositionStart()})("compositionend",function(ei){return St._compositionEnd(ei.target.value)})},features:[b._Bn([M]),b.qOj]}),X})();function $(X){return null==X||0===X.length}function pt(X){return null!=X&&"number"==typeof X.length}const nt=new b.OlP("NgValidators"),st=new b.OlP("NgAsyncValidators"),Ct=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class xt{static min(P){return X=P,P=>{if($(P.value)||$(X))return null;const G=parseFloat(P.value);return!isNaN(G)&&G<X?{min:{min:X,actual:P.value}}:null};var X}static max(P){return X=P,P=>{if($(P.value)||$(X))return null;const G=parseFloat(P.value);return!isNaN(G)&&G>X?{max:{max:X,actual:P.value}}:null};var X}static required(P){return tt(P)}static requiredTrue(P){return lt(P)}static email(P){return $((X=P).value)||Ct.test(X.value)?null:{email:!0};var X}static minLength(P){return X=P,P=>$(P.value)||!pt(P.value)?null:P.value.length<X?{minlength:{requiredLength:X,actualLength:P.value.length}}:null;var X}static maxLength(P){return X=P,P=>pt(P.value)&&P.value.length>X?{maxlength:{requiredLength:X,actualLength:P.value.length}}:null;var X}static pattern(P){return function(X){if(!X)return it;let P,G;return"string"==typeof X?(G="","^"!==X.charAt(0)&&(G+="^"),G+=X,"$"!==X.charAt(X.length-1)&&(G+="$"),P=new RegExp(G)):(G=X.toString(),P=X),St=>{if($(St.value))return null;const Ee=St.value;return P.test(Ee)?null:{pattern:{requiredPattern:G,actualValue:Ee}}}}(P)}static nullValidator(P){return null}static compose(P){return de(P)}static composeAsync(P){return He(P)}}function tt(X){return $(X.value)?{required:!0}:null}function lt(X){return!0===X.value?null:{required:!0}}function it(X){return null}function rt(X){return null!=X}function Gt(X){const P=(0,b.QGY)(X)?(0,e.D)(X):X;return(0,b.CqO)(P),P}function bt(X){let P={};return X.forEach(G=>{P=null!=G?Object.assign(Object.assign({},P),G):P}),0===Object.keys(P).length?null:P}function Ht(X,P){return P.map(G=>G(X))}function Ye(X){return X.map(P=>function(X){return!X.validate}(P)?P:G=>P.validate(G))}function de(X){if(!X)return null;const P=X.filter(rt);return 0==P.length?null:function(G){return bt(Ht(G,P))}}function Be(X){return null!=X?de(Ye(X)):null}function He(X){if(!X)return null;const P=X.filter(rt);return 0==P.length?null:function(G){const St=Ht(G,P).map(Gt);return(0,t.D)(St).pipe((0,n.U)(bt))}}function Ke(X){return null!=X?He(Ye(X)):null}function vi(X,P){return null===X?[P]:Array.isArray(X)?[...X,P]:[X,P]}function qe(X){return X._rawValidators}function Ne(X){return X._rawAsyncValidators}function oi(X){return X?Array.isArray(X)?X:[X]:[]}function Ft(X,P){return Array.isArray(X)?X.includes(P):X===P}function _e(X,P){const G=oi(P);return oi(X).forEach(Ee=>{Ft(G,Ee)||G.push(Ee)}),G}function Xt(X,P){return oi(P).filter(G=>!Ft(X,G))}class Jt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(P){this._rawValidators=P||[],this._composedValidatorFn=Be(this._rawValidators)}_setAsyncValidators(P){this._rawAsyncValidators=P||[],this._composedAsyncValidatorFn=Ke(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(P){this._onDestroyCallbacks.push(P)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(P=>P()),this._onDestroyCallbacks=[]}reset(P){this.control&&this.control.reset(P)}hasError(P,G){return!!this.control&&this.control.hasError(P,G)}getError(P,G){return this.control?this.control.getError(P,G):null}}class Rt extends Jt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Pt extends Jt{get formDirective(){return null}get path(){return null}}class he{constructor(P){this._cd=P}is(P){var G,St,Ee;return"submitted"===P?!!(null===(G=this._cd)||void 0===G?void 0:G.submitted):!!(null===(Ee=null===(St=this._cd)||void 0===St?void 0:St.control)||void 0===Ee?void 0:Ee[P])}}let jt=(()=>{class X extends he{constructor(G){super(G)}}return X.\u0275fac=function(G){return new(G||X)(b.Y36(Rt,2))},X.\u0275dir=b.lG2({type:X,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(G,St){2&G&&b.ekj("ng-untouched",St.is("untouched"))("ng-touched",St.is("touched"))("ng-pristine",St.is("pristine"))("ng-dirty",St.is("dirty"))("ng-valid",St.is("valid"))("ng-invalid",St.is("invalid"))("ng-pending",St.is("pending"))},features:[b.qOj]}),X})(),Yt=(()=>{class X extends he{constructor(G){super(G)}}return X.\u0275fac=function(G){return new(G||X)(b.Y36(Pt,10))},X.\u0275dir=b.lG2({type:X,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(G,St){2&G&&b.ekj("ng-untouched",St.is("untouched"))("ng-touched",St.is("touched"))("ng-pristine",St.is("pristine"))("ng-dirty",St.is("dirty"))("ng-valid",St.is("valid"))("ng-invalid",St.is("invalid"))("ng-pending",St.is("pending"))("ng-submitted",St.is("submitted"))},features:[b.qOj]}),X})();function Ei(X,P){ue(X,P),P.valueAccessor.writeValue(X.value),function(X,P){P.valueAccessor.registerOnChange(G=>{X._pendingValue=G,X._pendingChange=!0,X._pendingDirty=!0,"change"===X.updateOn&&Pe(X,P)})}(X,P),function(X,P){const G=(St,Ee)=>{P.valueAccessor.writeValue(St),Ee&&P.viewToModelUpdate(St)};X.registerOnChange(G),P._registerOnDestroy(()=>{X._unregisterOnChange(G)})}(X,P),function(X,P){P.valueAccessor.registerOnTouched(()=>{X._pendingTouched=!0,"blur"===X.updateOn&&X._pendingChange&&Pe(X,P),"submit"!==X.updateOn&&X.markAsTouched()})}(X,P),function(X,P){if(P.valueAccessor.setDisabledState){const G=St=>{P.valueAccessor.setDisabledState(St)};X.registerOnDisabledChange(G),P._registerOnDestroy(()=>{X._unregisterOnDisabledChange(G)})}}(X,P)}function gi(X,P,G=!0){const St=()=>{};P.valueAccessor&&(P.valueAccessor.registerOnChange(St),P.valueAccessor.registerOnTouched(St)),je(X,P),X&&(P._invokeOnDestroyCallbacks(),X._registerOnCollectionChange(()=>{}))}function We(X,P){X.forEach(G=>{G.registerOnValidatorChange&&G.registerOnValidatorChange(P)})}function ue(X,P){const G=qe(X);null!==P.validator?X.setValidators(vi(G,P.validator)):"function"==typeof G&&X.setValidators([G]);const St=Ne(X);null!==P.asyncValidator?X.setAsyncValidators(vi(St,P.asyncValidator)):"function"==typeof St&&X.setAsyncValidators([St]);const Ee=()=>X.updateValueAndValidity();We(P._rawValidators,Ee),We(P._rawAsyncValidators,Ee)}function je(X,P){let G=!1;if(null!==X){if(null!==P.validator){const Ee=qe(X);if(Array.isArray(Ee)&&Ee.length>0){const ei=Ee.filter(Ni=>Ni!==P.validator);ei.length!==Ee.length&&(G=!0,X.setValidators(ei))}}if(null!==P.asyncValidator){const Ee=Ne(X);if(Array.isArray(Ee)&&Ee.length>0){const ei=Ee.filter(Ni=>Ni!==P.asyncValidator);ei.length!==Ee.length&&(G=!0,X.setAsyncValidators(ei))}}}const St=()=>{};return We(P._rawValidators,St),We(P._rawAsyncValidators,St),G}function Pe(X,P){X._pendingDirty&&X.markAsDirty(),X.setValue(X._pendingValue,{emitModelToViewChange:!1}),P.viewToModelUpdate(X._pendingValue),X._pendingChange=!1}function Mt(X,P){ue(X,P)}function ve(X,P){if(!X.hasOwnProperty("model"))return!1;const G=X.model;return!!G.isFirstChange()||!Object.is(P,G.currentValue)}function ki(X,P){X._syncPendingControls(),P.forEach(G=>{const St=G.control;"submit"===St.updateOn&&St._pendingChange&&(G.viewToModelUpdate(St._pendingValue),St._pendingChange=!1)})}function Zi(X,P){if(!P)return null;let G,St,Ee;return Array.isArray(P),P.forEach(ei=>{ei.constructor===H?G=ei:function(X){return Object.getPrototypeOf(X.constructor)===s}(ei)?St=ei:Ee=ei}),Ee||St||G||null}function Sn(X,P){const G=X.indexOf(P);G>-1&&X.splice(G,1)}const Me="VALID",Te="INVALID",Xe="PENDING",pi="DISABLED";function cn(X){return(Jo(X)?X.validators:X)||null}function xn(X){return Array.isArray(X)?Be(X):X||null}function oo(X,P){return(Jo(P)?P.asyncValidators:X)||null}function hr(X){return Array.isArray(X)?Ke(X):X||null}function Jo(X){return null!=X&&!Array.isArray(X)&&"object"==typeof X}class Pr{constructor(P,G){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=P,this._rawAsyncValidators=G,this._composedValidatorFn=xn(this._rawValidators),this._composedAsyncValidatorFn=hr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(P){this._rawValidators=this._composedValidatorFn=P}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(P){this._rawAsyncValidators=this._composedAsyncValidatorFn=P}get parent(){return this._parent}get valid(){return this.status===Me}get invalid(){return this.status===Te}get pending(){return this.status==Xe}get disabled(){return this.status===pi}get enabled(){return this.status!==pi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(P){this._rawValidators=P,this._composedValidatorFn=xn(P)}setAsyncValidators(P){this._rawAsyncValidators=P,this._composedAsyncValidatorFn=hr(P)}addValidators(P){this.setValidators(_e(P,this._rawValidators))}addAsyncValidators(P){this.setAsyncValidators(_e(P,this._rawAsyncValidators))}removeValidators(P){this.setValidators(Xt(P,this._rawValidators))}removeAsyncValidators(P){this.setAsyncValidators(Xt(P,this._rawAsyncValidators))}hasValidator(P){return Ft(this._rawValidators,P)}hasAsyncValidator(P){return Ft(this._rawAsyncValidators,P)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(P={}){this.touched=!0,this._parent&&!P.onlySelf&&this._parent.markAsTouched(P)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(P=>P.markAllAsTouched())}markAsUntouched(P={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(G=>{G.markAsUntouched({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}markAsDirty(P={}){this.pristine=!1,this._parent&&!P.onlySelf&&this._parent.markAsDirty(P)}markAsPristine(P={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(G=>{G.markAsPristine({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}markAsPending(P={}){this.status=Xe,!1!==P.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!P.onlySelf&&this._parent.markAsPending(P)}disable(P={}){const G=this._parentMarkedDirty(P.onlySelf);this.status=pi,this.errors=null,this._forEachChild(St=>{St.disable(Object.assign(Object.assign({},P),{onlySelf:!0}))}),this._updateValue(),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},P),{skipPristineCheck:G})),this._onDisabledChange.forEach(St=>St(!0))}enable(P={}){const G=this._parentMarkedDirty(P.onlySelf);this.status=Me,this._forEachChild(St=>{St.enable(Object.assign(Object.assign({},P),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},P),{skipPristineCheck:G})),this._onDisabledChange.forEach(St=>St(!1))}_updateAncestors(P){this._parent&&!P.onlySelf&&(this._parent.updateValueAndValidity(P),P.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(P){this._parent=P}updateValueAndValidity(P={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Me||this.status===Xe)&&this._runAsyncValidator(P.emitEvent)),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!P.onlySelf&&this._parent.updateValueAndValidity(P)}_updateTreeValidity(P={emitEvent:!0}){this._forEachChild(G=>G._updateTreeValidity(P)),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pi:Me}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(P){if(this.asyncValidator){this.status=Xe,this._hasOwnPendingAsyncValidator=!0;const G=Gt(this.asyncValidator(this));this._asyncValidationSubscription=G.subscribe(St=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(St,{emitEvent:P})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(P,G={}){this.errors=P,this._updateControlsErrors(!1!==G.emitEvent)}get(P){return function(X,P,G){if(null==P||(Array.isArray(P)||(P=P.split(".")),Array.isArray(P)&&0===P.length))return null;let St=X;return P.forEach(Ee=>{St=St instanceof Jn?St.controls.hasOwnProperty(Ee)?St.controls[Ee]:null:St instanceof As&&St.at(Ee)||null}),St}(this,P)}getError(P,G){const St=G?this.get(G):this;return St&&St.errors?St.errors[P]:null}hasError(P,G){return!!this.getError(P,G)}get root(){let P=this;for(;P._parent;)P=P._parent;return P}_updateControlsErrors(P){this.status=this._calculateStatus(),P&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(P)}_initObservables(){this.valueChanges=new b.vpe,this.statusChanges=new b.vpe}_calculateStatus(){return this._allControlsDisabled()?pi:this.errors?Te:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xe)?Xe:this._anyControlsHaveStatus(Te)?Te:Me}_anyControlsHaveStatus(P){return this._anyControls(G=>G.status===P)}_anyControlsDirty(){return this._anyControls(P=>P.dirty)}_anyControlsTouched(){return this._anyControls(P=>P.touched)}_updatePristine(P={}){this.pristine=!this._anyControlsDirty(),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}_updateTouched(P={}){this.touched=this._anyControlsTouched(),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}_isBoxedValue(P){return"object"==typeof P&&null!==P&&2===Object.keys(P).length&&"value"in P&&"disabled"in P}_registerOnCollectionChange(P){this._onCollectionChange=P}_setUpdateStrategy(P){Jo(P)&&null!=P.updateOn&&(this._updateOn=P.updateOn)}_parentMarkedDirty(P){return!P&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class or extends Pr{constructor(P=null,G,St){super(cn(G),oo(St,G)),this._onChange=[],this._applyFormState(P),this._setUpdateStrategy(G),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(P,G={}){this.value=this._pendingValue=P,this._onChange.length&&!1!==G.emitModelToViewChange&&this._onChange.forEach(St=>St(this.value,!1!==G.emitViewToModelChange)),this.updateValueAndValidity(G)}patchValue(P,G={}){this.setValue(P,G)}reset(P=null,G={}){this._applyFormState(P),this.markAsPristine(G),this.markAsUntouched(G),this.setValue(this.value,G),this._pendingChange=!1}_updateValue(){}_anyControls(P){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(P){this._onChange.push(P)}_unregisterOnChange(P){Sn(this._onChange,P)}registerOnDisabledChange(P){this._onDisabledChange.push(P)}_unregisterOnDisabledChange(P){Sn(this._onDisabledChange,P)}_forEachChild(P){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(P){this._isBoxedValue(P)?(this.value=this._pendingValue=P.value,P.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=P}}class Jn extends Pr{constructor(P,G,St){super(cn(G),oo(St,G)),this.controls=P,this._initObservables(),this._setUpdateStrategy(G),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(P,G){return this.controls[P]?this.controls[P]:(this.controls[P]=G,G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange),G)}addControl(P,G,St={}){this.registerControl(P,G),this.updateValueAndValidity({emitEvent:St.emitEvent}),this._onCollectionChange()}removeControl(P,G={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],this.updateValueAndValidity({emitEvent:G.emitEvent}),this._onCollectionChange()}setControl(P,G,St={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],G&&this.registerControl(P,G),this.updateValueAndValidity({emitEvent:St.emitEvent}),this._onCollectionChange()}contains(P){return this.controls.hasOwnProperty(P)&&this.controls[P].enabled}setValue(P,G={}){this._checkAllValuesPresent(P),Object.keys(P).forEach(St=>{this._throwIfControlMissing(St),this.controls[St].setValue(P[St],{onlySelf:!0,emitEvent:G.emitEvent})}),this.updateValueAndValidity(G)}patchValue(P,G={}){null!=P&&(Object.keys(P).forEach(St=>{this.controls[St]&&this.controls[St].patchValue(P[St],{onlySelf:!0,emitEvent:G.emitEvent})}),this.updateValueAndValidity(G))}reset(P={},G={}){this._forEachChild((St,Ee)=>{St.reset(P[Ee],{onlySelf:!0,emitEvent:G.emitEvent})}),this._updatePristine(G),this._updateTouched(G),this.updateValueAndValidity(G)}getRawValue(){return this._reduceChildren({},(P,G,St)=>(P[St]=G instanceof or?G.value:G.getRawValue(),P))}_syncPendingControls(){let P=this._reduceChildren(!1,(G,St)=>!!St._syncPendingControls()||G);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_throwIfControlMissing(P){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[P])throw new Error(`Cannot find form control with name: ${P}.`)}_forEachChild(P){Object.keys(this.controls).forEach(G=>{const St=this.controls[G];St&&P(St,G)})}_setUpControls(){this._forEachChild(P=>{P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(P){for(const G of Object.keys(this.controls)){const St=this.controls[G];if(this.contains(G)&&P(St))return!0}return!1}_reduceValue(){return this._reduceChildren({},(P,G,St)=>((G.enabled||this.disabled)&&(P[St]=G.value),P))}_reduceChildren(P,G){let St=P;return this._forEachChild((Ee,ei)=>{St=G(St,Ee,ei)}),St}_allControlsDisabled(){for(const P of Object.keys(this.controls))if(this.controls[P].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(P){this._forEachChild((G,St)=>{if(void 0===P[St])throw new Error(`Must supply a value for form control with name: '${St}'.`)})}}class As extends Pr{constructor(P,G,St){super(cn(G),oo(St,G)),this.controls=P,this._initObservables(),this._setUpdateStrategy(G),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(P){return this.controls[P]}push(P,G={}){this.controls.push(P),this._registerControl(P),this.updateValueAndValidity({emitEvent:G.emitEvent}),this._onCollectionChange()}insert(P,G,St={}){this.controls.splice(P,0,G),this._registerControl(G),this.updateValueAndValidity({emitEvent:St.emitEvent})}removeAt(P,G={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),this.controls.splice(P,1),this.updateValueAndValidity({emitEvent:G.emitEvent})}setControl(P,G,St={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),this.controls.splice(P,1),G&&(this.controls.splice(P,0,G),this._registerControl(G)),this.updateValueAndValidity({emitEvent:St.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(P,G={}){this._checkAllValuesPresent(P),P.forEach((St,Ee)=>{this._throwIfControlMissing(Ee),this.at(Ee).setValue(St,{onlySelf:!0,emitEvent:G.emitEvent})}),this.updateValueAndValidity(G)}patchValue(P,G={}){null!=P&&(P.forEach((St,Ee)=>{this.at(Ee)&&this.at(Ee).patchValue(St,{onlySelf:!0,emitEvent:G.emitEvent})}),this.updateValueAndValidity(G))}reset(P=[],G={}){this._forEachChild((St,Ee)=>{St.reset(P[Ee],{onlySelf:!0,emitEvent:G.emitEvent})}),this._updatePristine(G),this._updateTouched(G),this.updateValueAndValidity(G)}getRawValue(){return this.controls.map(P=>P instanceof or?P.value:P.getRawValue())}clear(P={}){this.controls.length<1||(this._forEachChild(G=>G._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:P.emitEvent}))}_syncPendingControls(){let P=this.controls.reduce((G,St)=>!!St._syncPendingControls()||G,!1);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_throwIfControlMissing(P){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(P))throw new Error(`Cannot find form control at index ${P}`)}_forEachChild(P){this.controls.forEach((G,St)=>{P(G,St)})}_updateValue(){this.value=this.controls.filter(P=>P.enabled||this.disabled).map(P=>P.value)}_anyControls(P){return this.controls.some(G=>G.enabled&&P(G))}_setUpControls(){this._forEachChild(P=>this._registerControl(P))}_checkAllValuesPresent(P){this._forEachChild((G,St)=>{if(void 0===P[St])throw new Error(`Must supply a value for form control at index: ${St}.`)})}_allControlsDisabled(){for(const P of this.controls)if(P.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(P){P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)}}const ro={provide:Pt,useExisting:(0,b.Gpc)(()=>dn)},Hi=(()=>Promise.resolve(null))();let dn=(()=>{class X extends Pt{constructor(G,St){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new b.vpe,this.form=new Jn({},Be(G),Ke(St))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(G){Hi.then(()=>{const St=this._findContainer(G.path);G.control=St.registerControl(G.name,G.control),Ei(G.control,G),G.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(G)})}getControl(G){return this.form.get(G.path)}removeControl(G){Hi.then(()=>{const St=this._findContainer(G.path);St&&St.removeControl(G.name),Sn(this._directives,G)})}addFormGroup(G){Hi.then(()=>{const St=this._findContainer(G.path),Ee=new Jn({});Mt(Ee,G),St.registerControl(G.name,Ee),Ee.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(G){Hi.then(()=>{const St=this._findContainer(G.path);St&&St.removeControl(G.name)})}getFormGroup(G){return this.form.get(G.path)}updateModel(G,St){Hi.then(()=>{this.form.get(G.path).setValue(St)})}setValue(G){this.control.setValue(G)}onSubmit(G){return this.submitted=!0,ki(this.form,this._directives),this.ngSubmit.emit(G),!1}onReset(){this.resetForm()}resetForm(G){this.form.reset(G),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(G){return G.pop(),G.length?this.form.get(G):this.form}}return X.\u0275fac=function(G){return new(G||X)(b.Y36(nt,10),b.Y36(st,10))},X.\u0275dir=b.lG2({type:X,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(G,St){1&G&&b.NdJ("submit",function(ei){return St.onSubmit(ei)})("reset",function(){return St.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[b._Bn([ro]),b.qOj]}),X})();const $o={provide:Rt,useExisting:(0,b.Gpc)(()=>jo)},pn=(()=>Promise.resolve(null))();let jo=(()=>{class X extends Rt{constructor(G,St,Ee,ei){super(),this.control=new or,this._registered=!1,this.update=new b.vpe,this._parent=G,this._setValidators(St),this._setAsyncValidators(Ee),this.valueAccessor=Zi(0,ei)}ngOnChanges(G){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in G&&this._updateDisabled(G),ve(G,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(X,P){return[...P.path,X]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(G){this.viewModel=G,this.update.emit(G)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ei(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(G){pn.then(()=>{this.control.setValue(G,{emitViewToModelChange:!1})})}_updateDisabled(G){const St=G.isDisabled.currentValue,Ee=""===St||St&&"false"!==St;pn.then(()=>{Ee&&!this.control.disabled?this.control.disable():!Ee&&this.control.disabled&&this.control.enable()})}}return X.\u0275fac=function(G){return new(G||X)(b.Y36(Pt,9),b.Y36(nt,10),b.Y36(st,10),b.Y36(c,10))},X.\u0275dir=b.lG2({type:X,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[b._Bn([$o]),b.qOj,b.TTD]}),X})(),rr=(()=>{class X{}return X.\u0275fac=function(G){return new(G||X)},X.\u0275dir=b.lG2({type:X,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),X})(),Zo=(()=>{class X{}return X.\u0275fac=function(G){return new(G||X)},X.\u0275mod=b.oAB({type:X}),X.\u0275inj=b.cJS({}),X})();const Eo=new b.OlP("NgModelWithFormControlWarning"),Po={provide:Rt,useExisting:(0,b.Gpc)(()=>Ts)};let Ts=(()=>{class X extends Rt{constructor(G,St,Ee,ei){super(),this._ngModelWarningConfig=ei,this.update=new b.vpe,this._ngModelWarningSent=!1,this._setValidators(G),this._setAsyncValidators(St),this.valueAccessor=Zi(0,Ee)}set isDisabled(G){}ngOnChanges(G){if(this._isControlChanged(G)){const St=G.form.previousValue;St&&gi(St,this,!1),Ei(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}ve(G,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&gi(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(G){this.viewModel=G,this.update.emit(G)}_isControlChanged(G){return G.hasOwnProperty("form")}}return X._ngModelWarningSentOnce=!1,X.\u0275fac=function(G){return new(G||X)(b.Y36(nt,10),b.Y36(st,10),b.Y36(c,10),b.Y36(Eo,8))},X.\u0275dir=b.lG2({type:X,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[b._Bn([Po]),b.qOj,b.TTD]}),X})();const yn={provide:Pt,useExisting:(0,b.Gpc)(()=>Fr)};let Fr=(()=>{class X extends Pt{constructor(G,St){super(),this.validators=G,this.asyncValidators=St,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new b.vpe,this._setValidators(G),this._setAsyncValidators(St)}ngOnChanges(G){this._checkFormPresent(),G.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(je(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(G){const St=this.form.get(G.path);return Ei(St,G),St.updateValueAndValidity({emitEvent:!1}),this.directives.push(G),St}getControl(G){return this.form.get(G.path)}removeControl(G){gi(G.control||null,G,!1),Sn(this.directives,G)}addFormGroup(G){this._setUpFormContainer(G)}removeFormGroup(G){this._cleanUpFormContainer(G)}getFormGroup(G){return this.form.get(G.path)}addFormArray(G){this._setUpFormContainer(G)}removeFormArray(G){this._cleanUpFormContainer(G)}getFormArray(G){return this.form.get(G.path)}updateModel(G,St){this.form.get(G.path).setValue(St)}onSubmit(G){return this.submitted=!0,ki(this.form,this.directives),this.ngSubmit.emit(G),!1}onReset(){this.resetForm()}resetForm(G){this.form.reset(G),this.submitted=!1}_updateDomValue(){this.directives.forEach(G=>{const St=G.control,Ee=this.form.get(G.path);St!==Ee&&(gi(St||null,G),Ee instanceof or&&(Ei(Ee,G),G.control=Ee))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(G){const St=this.form.get(G.path);Mt(St,G),St.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(G){if(this.form){const St=this.form.get(G.path);St&&function(X,P){return je(X,P)}(St,G)&&St.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ue(this.form,this),this._oldForm&&je(this._oldForm,this)}_checkFormPresent(){}}return X.\u0275fac=function(G){return new(G||X)(b.Y36(nt,10),b.Y36(st,10))},X.\u0275dir=b.lG2({type:X,selectors:[["","formGroup",""]],hostBindings:function(G,St){1&G&&b.NdJ("submit",function(ei){return St.onSubmit(ei)})("reset",function(){return St.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[b._Bn([yn]),b.qOj,b.TTD]}),X})();const Ir={provide:nt,useExisting:(0,b.Gpc)(()=>qo),multi:!0},Mr={provide:nt,useExisting:(0,b.Gpc)(()=>us),multi:!0};let qo=(()=>{class X{constructor(){this._required=!1}get required(){return this._required}set required(G){this._required=null!=G&&!1!==G&&"false"!=`${G}`,this._onChange&&this._onChange()}validate(G){return this.required?tt(G):null}registerOnValidatorChange(G){this._onChange=G}}return X.\u0275fac=function(G){return new(G||X)},X.\u0275dir=b.lG2({type:X,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(G,St){2&G&&b.uIk("required",St.required?"":null)},inputs:{required:"required"},features:[b._Bn([Ir])]}),X})(),us=(()=>{class X extends qo{validate(G){return this.required?lt(G):null}}return X.\u0275fac=function(){let P;return function(St){return(P||(P=b.n5z(X)))(St||X)}}(),X.\u0275dir=b.lG2({type:X,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(G,St){2&G&&b.uIk("required",St.required?"":null)},features:[b._Bn([Mr]),b.qOj]}),X})(),yr=(()=>{class X{}return X.\u0275fac=function(G){return new(G||X)},X.\u0275mod=b.oAB({type:X}),X.\u0275inj=b.cJS({imports:[[Zo]]}),X})(),ca=(()=>{class X{}return X.\u0275fac=function(G){return new(G||X)},X.\u0275mod=b.oAB({type:X}),X.\u0275inj=b.cJS({imports:[yr]}),X})(),Gn=(()=>{class X{static withConfig(G){return{ngModule:X,providers:[{provide:Eo,useValue:G.warnOnNgModelWithFormControl}]}}}return X.\u0275fac=function(G){return new(G||X)},X.\u0275mod=b.oAB({type:X}),X.\u0275inj=b.cJS({imports:[yr]}),X})()},91079:(k,B,f)=>{"use strict";f.d(B,{XC:()=>Ye,Bb:()=>_e,ZL:()=>Ne});var b=f(15664),p=f(63191),e=f(5e3),t=f(90508),n=f(50727),o=f(77579),s=f(49770),c=f(56451),_=f(39646),w=f(54968),M=f(70925),U=f(69808),V=f(91314),H=f(30495),$=f(91159),pt=f(99129),nt=f(93075),st=f(67322),Ct=f(95698),xt=f(63900),yt=f(39300),ut=f(54004),tt=f(18505),lt=f(91005),ot=f(50226);const Lt=["panel"];function at(Xt,Jt){if(1&Xt&&(e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA()),2&Xt){const Rt=Jt.id,Pt=e.oxw();e.Q6J("id",Pt.id)("ngClass",Pt._classList),e.uIk("aria-label",Pt.ariaLabel||null)("aria-labelledby",Pt._getPanelAriaLabelledby(Rt))}}const dt=["*"];let it=0;class rt{constructor(Jt,Rt){this.source=Jt,this.option=Rt}}const Gt=(0,t.Kr)(class{}),bt=new e.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}});let ce=(()=>{class Xt extends Gt{constructor(Rt,Pt,he,ze){super(),this._changeDetectorRef=Rt,this._elementRef=Pt,this._activeOptionChanges=n.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new e.vpe,this.opened=new e.vpe,this.closed=new e.vpe,this.optionActivated=new e.vpe,this._classList={},this.id="mat-autocomplete-"+it++,this.inertGroups=(null==ze?void 0:ze.SAFARI)||!1,this._autoActiveFirstOption=!!he.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(Rt){this._autoActiveFirstOption=(0,p.Ig)(Rt)}set classList(Rt){this._classList=Rt&&Rt.length?(0,p.du)(Rt).reduce((Pt,he)=>(Pt[he]=!0,Pt),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new b.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(Rt=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[Rt]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(Rt){this.panel&&(this.panel.nativeElement.scrollTop=Rt)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(Rt){const Pt=new rt(this,Rt);this.optionSelected.emit(Pt)}_getPanelAriaLabelledby(Rt){return this.ariaLabel?null:this.ariaLabelledby?(Rt?Rt+" ":"")+this.ariaLabelledby:Rt}_setVisibilityClasses(Rt){Rt[this._visibleClass]=this.showPanel,Rt[this._hiddenClass]=!this.showPanel}}return Xt.\u0275fac=function(Rt){return new(Rt||Xt)(e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(bt),e.Y36(M.t4))},Xt.\u0275dir=e.lG2({type:Xt,viewQuery:function(Rt,Pt){if(1&Rt&&(e.Gf(e.Rgc,7),e.Gf(Lt,5)),2&Rt){let he;e.iGM(he=e.CRH())&&(Pt.template=he.first),e.iGM(he=e.CRH())&&(Pt.panel=he.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[e.qOj]}),Xt})(),Ye=(()=>{class Xt extends ce{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return Xt.\u0275fac=function(){let Jt;return function(Pt){return(Jt||(Jt=e.n5z(Xt)))(Pt||Xt)}}(),Xt.\u0275cmp=e.Xpm({type:Xt,selectors:[["mat-autocomplete"]],contentQueries:function(Rt,Pt,he){if(1&Rt&&(e.Suo(he,t.K7,5),e.Suo(he,t.ey,5)),2&Rt){let ze;e.iGM(ze=e.CRH())&&(Pt.optionGroups=ze),e.iGM(ze=e.CRH())&&(Pt.options=ze)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[e._Bn([{provide:t.HF,useExisting:Xt}]),e.qOj],ngContentSelectors:dt,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(Rt,Pt){1&Rt&&(e.F$t(),e.YNc(0,at,3,4,"ng-template"))},directives:[U.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),Xt})();const de=new e.OlP("mat-autocomplete-scroll-strategy"),He={provide:de,deps:[V.aV],useFactory:function(Xt){return()=>Xt.scrollStrategies.reposition()}},Ke={provide:nt.JU,useExisting:(0,e.Gpc)(()=>Ne),multi:!0};let qe=(()=>{class Xt{constructor(Rt,Pt,he,ze,le,jt,Yt,ge,$t,oe,re){this._element=Rt,this._overlay=Pt,this._viewContainerRef=he,this._zone=ze,this._changeDetectorRef=le,this._dir=Yt,this._formField=ge,this._document=$t,this._viewportRuler=oe,this._defaults=re,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=n.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new o.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,s.P)(()=>this.autocomplete&&this.autocomplete.options?(0,c.T)(...this.autocomplete.options.map(Et=>Et.onSelectionChange)):this._zone.onStable.pipe((0,Ct.q)(1),(0,xt.w)(()=>this.optionSelections))),this._scrollStrategy=jt}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(Rt){this._autocompleteDisabled=(0,p.Ig)(Rt)}ngAfterViewInit(){const Rt=this._getWindow();void 0!==Rt&&this._zone.runOutsideAngular(()=>Rt.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(Rt){Rt.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const Rt=this._getWindow();void 0!==Rt&&Rt.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,c.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,yt.h)(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,yt.h)(()=>this._overlayAttached)):(0,_.of)()).pipe((0,ut.U)(Rt=>Rt instanceof t.rN?Rt:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,c.T)((0,w.R)(this._document,"click"),(0,w.R)(this._document,"auxclick"),(0,w.R)(this._document,"touchend")).pipe((0,yt.h)(Rt=>{const Pt=(0,M.sA)(Rt),he=this._formField?this._formField._elementRef.nativeElement:null,ze=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&Pt!==this._element.nativeElement&&(!he||!he.contains(Pt))&&(!ze||!ze.contains(Pt))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(Pt)}))}writeValue(Rt){Promise.resolve(null).then(()=>this._setTriggerValue(Rt))}registerOnChange(Rt){this._onChange=Rt}registerOnTouched(Rt){this._onTouched=Rt}setDisabledState(Rt){this._element.nativeElement.disabled=Rt}_handleKeydown(Rt){const Pt=Rt.keyCode;if(Pt===$.hY&&!(0,$.Vb)(Rt)&&Rt.preventDefault(),this.activeOption&&Pt===$.K5&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),Rt.preventDefault();else if(this.autocomplete){const he=this.autocomplete._keyManager.activeItem,ze=Pt===$.LH||Pt===$.JH;this.panelOpen||Pt===$.Mf?this.autocomplete._keyManager.onKeydown(Rt):ze&&this._canOpen()&&this.openPanel(),(ze||this.autocomplete._keyManager.activeItem!==he)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(Rt){let Pt=Rt.target,he=Pt.value;"number"===Pt.type&&(he=""==he?null:parseFloat(he)),this._previousValue!==he&&(this._previousValue=he,this._onChange(he),this._canOpen()&&this._document.activeElement===Rt.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_floatLabel(Rt=!1){this._formField&&"auto"===this._formField.floatLabel&&(Rt?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const Rt=this._zone.onStable.pipe((0,Ct.q)(1)),Pt=this.autocomplete.options.changes.pipe((0,tt.b)(()=>this._positionStrategy.reapplyLastPosition()),(0,lt.g)(0));return(0,c.T)(Rt,Pt).pipe((0,xt.w)(()=>{const he=this.panelOpen;return this._resetActiveItem(),this.autocomplete._setVisibility(),this.panelOpen&&(this._overlayRef.updatePosition(),he!==this.panelOpen&&this.autocomplete.opened.emit()),this.panelClosingActions}),(0,Ct.q)(1)).subscribe(he=>this._setValueAndClose(he))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(Rt){const Pt=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(Rt):Rt,he=null!=Pt?Pt:"";this._formField?this._formField._control.value=he:this._element.nativeElement.value=he,this._previousValue=he}_setValueAndClose(Rt){Rt&&Rt.source&&(this._clearPreviousSelectedOption(Rt.source),this._setTriggerValue(Rt.source.value),this._onChange(Rt.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(Rt.source)),this.closePanel()}_clearPreviousSelectedOption(Rt){this.autocomplete.options.forEach(Pt=>{Pt!==Rt&&Pt.selected&&Pt.deselect()})}_attachOverlay(){var Rt;let Pt=this._overlayRef;Pt?(this._positionStrategy.setOrigin(this._getConnectedElement()),Pt.updateSize({width:this._getPanelWidth()})):(this._portal=new pt.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(Rt=this._formField)||void 0===Rt?void 0:Rt.getLabelId()}),Pt=this._overlay.create(this._getOverlayConfig()),this._overlayRef=Pt,Pt.keydownEvents().subscribe(ze=>{(ze.keyCode===$.hY&&!(0,$.Vb)(ze)||ze.keyCode===$.LH&&(0,$.Vb)(ze,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),ze.stopPropagation(),ze.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&Pt&&Pt.updateSize({width:this._getPanelWidth()})})),Pt&&!Pt.hasAttached()&&(Pt.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const he=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&he!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var Rt;return new V.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(Rt=this._defaults)||void 0===Rt?void 0:Rt.overlayPanelClass})}_getOverlayPosition(){const Rt=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(Rt),this._positionStrategy=Rt,Rt}_setStrategyPositions(Rt){const Pt=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],he=this._aboveClass,ze=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:he},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:he}];let le;le="above"===this.position?ze:"below"===this.position?Pt:[...Pt,...ze],Rt.withPositions(le)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const Rt=this.autocomplete;Rt.autoActiveFirstOption?Rt._keyManager.setFirstItemActive():Rt._keyManager.setActiveItem(-1)}_canOpen(){const Rt=this._element.nativeElement;return!Rt.readOnly&&!Rt.disabled&&!this._autocompleteDisabled}_getWindow(){var Rt;return(null===(Rt=this._document)||void 0===Rt?void 0:Rt.defaultView)||window}_scrollToOption(Rt){const Pt=this.autocomplete,he=(0,t.CB)(Rt,Pt.options,Pt.optionGroups);if(0===Rt&&1===he)Pt._setScrollTop(0);else if(Pt.panel){const ze=Pt.options.toArray()[Rt];if(ze){const le=ze._getHostElement(),jt=(0,t.jH)(le.offsetTop,le.offsetHeight,Pt._getScrollTop(),Pt.panel.nativeElement.offsetHeight);Pt._setScrollTop(jt)}}}}return Xt.\u0275fac=function(Rt){return new(Rt||Xt)(e.Y36(e.SBq),e.Y36(V.aV),e.Y36(e.s_b),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(de),e.Y36(ot.Is,8),e.Y36(st.G_,9),e.Y36(U.K0,8),e.Y36(H.rL),e.Y36(bt,8))},Xt.\u0275dir=e.lG2({type:Xt,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[e.TTD]}),Xt})(),Ne=(()=>{class Xt extends qe{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return Xt.\u0275fac=function(){let Jt;return function(Pt){return(Jt||(Jt=e.n5z(Xt)))(Pt||Xt)}}(),Xt.\u0275dir=e.lG2({type:Xt,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(Rt,Pt){1&Rt&&e.NdJ("focusin",function(){return Pt._handleFocus()})("blur",function(){return Pt._onTouched()})("input",function(ze){return Pt._handleInput(ze)})("keydown",function(ze){return Pt._handleKeydown(ze)}),2&Rt&&e.uIk("autocomplete",Pt.autocompleteAttribute)("role",Pt.autocompleteDisabled?null:"combobox")("aria-autocomplete",Pt.autocompleteDisabled?null:"list")("aria-activedescendant",Pt.panelOpen&&Pt.activeOption?Pt.activeOption.id:null)("aria-expanded",Pt.autocompleteDisabled?null:Pt.panelOpen.toString())("aria-owns",Pt.autocompleteDisabled||!Pt.panelOpen||null==Pt.autocomplete?null:Pt.autocomplete.id)("aria-haspopup",!Pt.autocompleteDisabled)},exportAs:["matAutocompleteTrigger"],features:[e._Bn([Ke]),e.qOj]}),Xt})(),_e=(()=>{class Xt{}return Xt.\u0275fac=function(Rt){return new(Rt||Xt)},Xt.\u0275mod=e.oAB({type:Xt}),Xt.\u0275inj=e.cJS({providers:[He],imports:[[V.U8,t.Ng,t.BQ,U.ez],H.ZD,t.Ng,t.BQ]}),Xt})()},47423:(k,B,f)=>{"use strict";f.d(B,{zs:()=>U,lW:()=>M,ot:()=>V});var b=f(5e3),p=f(90508),e=f(76360),t=f(15664);const n=["mat-button",""],o=["*"],_=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],w=(0,p.pj)((0,p.Id)((0,p.Kr)(class{constructor(H){this._elementRef=H}})));let M=(()=>{class H extends w{constructor(pt,nt,st){super(pt),this._focusMonitor=nt,this._animationMode=st,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const Ct of _)this._hasHostAttributes(Ct)&&this._getHostElement().classList.add(Ct);pt.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(pt,nt){pt?this._focusMonitor.focusVia(this._getHostElement(),pt,nt):this._getHostElement().focus(nt)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...pt){return pt.some(nt=>this._getHostElement().hasAttribute(nt))}}return H.\u0275fac=function(pt){return new(pt||H)(b.Y36(b.SBq),b.Y36(t.tE),b.Y36(e.Qb,8))},H.\u0275cmp=b.Xpm({type:H,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(pt,nt){if(1&pt&&b.Gf(p.wG,5),2&pt){let st;b.iGM(st=b.CRH())&&(nt.ripple=st.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(pt,nt){2&pt&&(b.uIk("disabled",nt.disabled||null),b.ekj("_mat-animation-noopable","NoopAnimations"===nt._animationMode)("mat-button-disabled",nt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[b.qOj],attrs:n,ngContentSelectors:o,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(pt,nt){1&pt&&(b.F$t(),b.TgZ(0,"span",0),b.Hsn(1),b.qZA(),b._UZ(2,"span",1),b._UZ(3,"span",2)),2&pt&&(b.xp6(2),b.ekj("mat-button-ripple-round",nt.isRoundButton||nt.isIconButton),b.Q6J("matRippleDisabled",nt._isRippleDisabled())("matRippleCentered",nt.isIconButton)("matRippleTrigger",nt._getHostElement()))},directives:[p.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),H})(),U=(()=>{class H extends M{constructor(pt,nt,st){super(nt,pt,st)}_haltDisabledEvents(pt){this.disabled&&(pt.preventDefault(),pt.stopImmediatePropagation())}}return H.\u0275fac=function(pt){return new(pt||H)(b.Y36(t.tE),b.Y36(b.SBq),b.Y36(e.Qb,8))},H.\u0275cmp=b.Xpm({type:H,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(pt,nt){1&pt&&b.NdJ("click",function(Ct){return nt._haltDisabledEvents(Ct)}),2&pt&&(b.uIk("tabindex",nt.disabled?-1:nt.tabIndex||0)("disabled",nt.disabled||null)("aria-disabled",nt.disabled.toString()),b.ekj("_mat-animation-noopable","NoopAnimations"===nt._animationMode)("mat-button-disabled",nt.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[b.qOj],attrs:n,ngContentSelectors:o,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(pt,nt){1&pt&&(b.F$t(),b.TgZ(0,"span",0),b.Hsn(1),b.qZA(),b._UZ(2,"span",1),b._UZ(3,"span",2)),2&pt&&(b.xp6(2),b.ekj("mat-button-ripple-round",nt.isRoundButton||nt.isIconButton),b.Q6J("matRippleDisabled",nt._isRippleDisabled())("matRippleCentered",nt.isIconButton)("matRippleTrigger",nt._getHostElement()))},directives:[p.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),H})(),V=(()=>{class H{}return H.\u0275fac=function(pt){return new(pt||H)},H.\u0275mod=b.oAB({type:H}),H.\u0275inj=b.cJS({imports:[[p.si,p.BQ],p.BQ]}),H})()},90508:(k,B,f)=>{"use strict";f.d(B,{yN:()=>st,mZ:()=>Ct,_A:()=>Ye,rD:()=>Ft,sG:()=>de,K7:()=>ui,HF:()=>ci,Y2:()=>re,BQ:()=>tt,X2:()=>_e,uc:()=>Rt,XK:()=>Ne,ey:()=>ue,Ng:()=>Ri,rN:()=>We,nP:()=>we,us:()=>Ae,wG:()=>Et,si:()=>kt,IR:()=>ge,CB:()=>je,jH:()=>ti,pj:()=>dt,Kr:()=>it,Id:()=>at,FD:()=>Gt,sb:()=>rt,E0:()=>Xt});var b=f(5e3),p=f(50226),t=f(69808),n=f(70925),o=f(15664),s=f(63191),c=f(77579),_=f(68675),w=f(76360),M=f(91159);function H(Pe,ie){if(1&Pe&&b._UZ(0,"mat-pseudo-checkbox",4),2&Pe){const Mt=b.oxw();b.Q6J("state",Mt.selected?"checked":"unchecked")("disabled",Mt.disabled)}}function $(Pe,ie){if(1&Pe&&(b.TgZ(0,"span",5),b._uU(1),b.qZA()),2&Pe){const Mt=b.oxw();b.xp6(1),b.hij("(",Mt.group.label,")")}}const pt=["*"];let st=(()=>{class Pe{}return Pe.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",Pe.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",Pe.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",Pe.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)",Pe})(),Ct=(()=>{class Pe{}return Pe.COMPLEX="375ms",Pe.ENTERING="225ms",Pe.EXITING="195ms",Pe})();const ut=new b.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let tt=(()=>{class Pe{constructor(Mt,ct,It){this._sanityChecks=ct,this._document=It,this._hasDoneGlobalChecks=!1,Mt._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(Mt){return!(0,n.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[Mt])}}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)(b.LFG(o.qm),b.LFG(ut,8),b.LFG(t.K0))},Pe.\u0275mod=b.oAB({type:Pe}),Pe.\u0275inj=b.cJS({imports:[[p.vT],p.vT]}),Pe})();function at(Pe){return class extends Pe{constructor(...ie){super(...ie),this._disabled=!1}get disabled(){return this._disabled}set disabled(ie){this._disabled=(0,s.Ig)(ie)}}}function dt(Pe,ie){return class extends Pe{constructor(...Mt){super(...Mt),this.defaultColor=ie,this.color=ie}get color(){return this._color}set color(Mt){const ct=Mt||this.defaultColor;ct!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),ct&&this._elementRef.nativeElement.classList.add(`mat-${ct}`),this._color=ct)}}}function it(Pe){return class extends Pe{constructor(...ie){super(...ie),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(ie){this._disableRipple=(0,s.Ig)(ie)}}}function rt(Pe,ie=0){return class extends Pe{constructor(...Mt){super(...Mt),this._tabIndex=ie,this.defaultTabIndex=ie}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(Mt){this._tabIndex=null!=Mt?(0,s.su)(Mt):this.defaultTabIndex}}}function Gt(Pe){return class extends Pe{constructor(...ie){super(...ie),this.stateChanges=new c.x,this.errorState=!1}updateErrorState(){const ie=this.errorState,te=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);te!==ie&&(this.errorState=te,this.stateChanges.next())}}}const Ht=new b.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return(0,b.f3M)(b.soG)}});class Ye{constructor(){this._localeChanges=new c.x,this.localeChanges=this._localeChanges}getValidDateOrNull(ie){return this.isDateInstance(ie)&&this.isValid(ie)?ie:null}deserialize(ie){return null==ie||this.isDateInstance(ie)&&this.isValid(ie)?ie:this.invalid()}setLocale(ie){this.locale=ie,this._localeChanges.next()}compareDate(ie,Mt){return this.getYear(ie)-this.getYear(Mt)||this.getMonth(ie)-this.getMonth(Mt)||this.getDate(ie)-this.getDate(Mt)}sameDate(ie,Mt){if(ie&&Mt){let ct=this.isValid(ie),It=this.isValid(Mt);return ct&&It?!this.compareDate(ie,Mt):ct==It}return ie==Mt}clampDate(ie,Mt,ct){return Mt&&this.compareDate(ie,Mt)<0?Mt:ct&&this.compareDate(ie,ct)>0?ct:ie}}const de=new b.OlP("mat-date-formats"),Be=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function He(Pe,ie){const Mt=Array(Pe);for(let ct=0;ct<Pe;ct++)Mt[ct]=ie(ct);return Mt}let Ke=(()=>{class Pe extends Ye{constructor(Mt,ct){super(),this.useUtcForDisplay=!1,super.setLocale(Mt)}getYear(Mt){return Mt.getFullYear()}getMonth(Mt){return Mt.getMonth()}getDate(Mt){return Mt.getDate()}getDayOfWeek(Mt){return Mt.getDay()}getMonthNames(Mt){const ct=new Intl.DateTimeFormat(this.locale,{month:Mt,timeZone:"utc"});return He(12,It=>this._format(ct,new Date(2017,It,1)))}getDateNames(){const Mt=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return He(31,ct=>this._format(Mt,new Date(2017,0,ct+1)))}getDayOfWeekNames(Mt){const ct=new Intl.DateTimeFormat(this.locale,{weekday:Mt,timeZone:"utc"});return He(7,It=>this._format(ct,new Date(2017,0,It+1)))}getYearName(Mt){const ct=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(ct,Mt)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(Mt){return this.getDate(this._createDateWithOverflow(this.getYear(Mt),this.getMonth(Mt)+1,0))}clone(Mt){return new Date(Mt.getTime())}createDate(Mt,ct,It){let te=this._createDateWithOverflow(Mt,ct,It);return te.getMonth(),te}today(){return new Date}parse(Mt){return"number"==typeof Mt?new Date(Mt):Mt?new Date(Date.parse(Mt)):null}format(Mt,ct){if(!this.isValid(Mt))throw Error("NativeDateAdapter: Cannot format invalid date.");const It=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},ct),{timeZone:"utc"}));return this._format(It,Mt)}addCalendarYears(Mt,ct){return this.addCalendarMonths(Mt,12*ct)}addCalendarMonths(Mt,ct){let It=this._createDateWithOverflow(this.getYear(Mt),this.getMonth(Mt)+ct,this.getDate(Mt));return this.getMonth(It)!=((this.getMonth(Mt)+ct)%12+12)%12&&(It=this._createDateWithOverflow(this.getYear(It),this.getMonth(It),0)),It}addCalendarDays(Mt,ct){return this._createDateWithOverflow(this.getYear(Mt),this.getMonth(Mt),this.getDate(Mt)+ct)}toIso8601(Mt){return[Mt.getUTCFullYear(),this._2digit(Mt.getUTCMonth()+1),this._2digit(Mt.getUTCDate())].join("-")}deserialize(Mt){if("string"==typeof Mt){if(!Mt)return null;if(Be.test(Mt)){let ct=new Date(Mt);if(this.isValid(ct))return ct}}return super.deserialize(Mt)}isDateInstance(Mt){return Mt instanceof Date}isValid(Mt){return!isNaN(Mt.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(Mt,ct,It){const te=new Date;return te.setFullYear(Mt,ct,It),te.setHours(0,0,0,0),te}_2digit(Mt){return("00"+Mt).slice(-2)}_format(Mt,ct){const It=new Date;return It.setUTCFullYear(ct.getFullYear(),ct.getMonth(),ct.getDate()),It.setUTCHours(ct.getHours(),ct.getMinutes(),ct.getSeconds(),ct.getMilliseconds()),Mt.format(It)}}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)(b.LFG(Ht,8),b.LFG(n.t4))},Pe.\u0275prov=b.Yz7({token:Pe,factory:Pe.\u0275fac}),Pe})();const vi={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let qe=(()=>{class Pe{}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)},Pe.\u0275mod=b.oAB({type:Pe}),Pe.\u0275inj=b.cJS({providers:[{provide:Ye,useClass:Ke}],imports:[[n.ud]]}),Pe})(),Ne=(()=>{class Pe{}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)},Pe.\u0275mod=b.oAB({type:Pe}),Pe.\u0275inj=b.cJS({providers:[{provide:de,useValue:vi}],imports:[[qe]]}),Pe})(),Ft=(()=>{class Pe{isErrorState(Mt,ct){return!!(Mt&&Mt.invalid&&(Mt.touched||ct&&ct.submitted))}}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)},Pe.\u0275prov=b.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe})(),_e=(()=>{class Pe{}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)},Pe.\u0275dir=b.lG2({type:Pe,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),Pe})();function Xt(Pe,ie,Mt="mat"){Pe.changes.pipe((0,_.O)(Pe)).subscribe(({length:ct})=>{Jt(ie,`${Mt}-2-line`,!1),Jt(ie,`${Mt}-3-line`,!1),Jt(ie,`${Mt}-multi-line`,!1),2===ct||3===ct?Jt(ie,`${Mt}-${ct}-line`,!0):ct>3&&Jt(ie,`${Mt}-multi-line`,!0)})}function Jt(Pe,ie,Mt){Pe.nativeElement.classList.toggle(ie,Mt)}let Rt=(()=>{class Pe{}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)},Pe.\u0275mod=b.oAB({type:Pe}),Pe.\u0275inj=b.cJS({imports:[[tt],tt]}),Pe})();class Pt{constructor(ie,Mt,ct){this._renderer=ie,this.element=Mt,this.config=ct,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const he={enterDuration:225,exitDuration:150},le=(0,n.i$)({passive:!0}),jt=["mousedown","touchstart"],Yt=["mouseup","mouseleave","touchend","touchcancel"];class ge{constructor(ie,Mt,ct,It){this._target=ie,this._ngZone=Mt,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,It.isBrowser&&(this._containerElement=(0,s.fI)(ct))}fadeInRipple(ie,Mt,ct={}){const It=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),te=Object.assign(Object.assign({},he),ct.animation);ct.centered&&(ie=It.left+It.width/2,Mt=It.top+It.height/2);const ve=ct.radius||function(Pe,ie,Mt){const ct=Math.max(Math.abs(Pe-Mt.left),Math.abs(Pe-Mt.right)),It=Math.max(Math.abs(ie-Mt.top),Math.abs(ie-Mt.bottom));return Math.sqrt(ct*ct+It*It)}(ie,Mt,It),Ti=ie-It.left,ki=Mt-It.top,Zi=te.enterDuration,Sn=document.createElement("div");Sn.classList.add("mat-ripple-element"),Sn.style.left=Ti-ve+"px",Sn.style.top=ki-ve+"px",Sn.style.height=2*ve+"px",Sn.style.width=2*ve+"px",null!=ct.color&&(Sn.style.backgroundColor=ct.color),Sn.style.transitionDuration=`${Zi}ms`,this._containerElement.appendChild(Sn),window.getComputedStyle(Sn).getPropertyValue("opacity"),Sn.style.transform="scale(1)";const $e=new Pt(this,Sn,ct);return $e.state=0,this._activeRipples.add($e),ct.persistent||(this._mostRecentTransientRipple=$e),this._runTimeoutOutsideZone(()=>{const Me=$e===this._mostRecentTransientRipple;$e.state=1,!ct.persistent&&(!Me||!this._isPointerDown)&&$e.fadeOut()},Zi),$e}fadeOutRipple(ie){const Mt=this._activeRipples.delete(ie);if(ie===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!Mt)return;const ct=ie.element,It=Object.assign(Object.assign({},he),ie.config.animation);ct.style.transitionDuration=`${It.exitDuration}ms`,ct.style.opacity="0",ie.state=2,this._runTimeoutOutsideZone(()=>{ie.state=3,ct.remove()},It.exitDuration)}fadeOutAll(){this._activeRipples.forEach(ie=>ie.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(ie=>{ie.config.persistent||ie.fadeOut()})}setupTriggerEvents(ie){const Mt=(0,s.fI)(ie);!Mt||Mt===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=Mt,this._registerEvents(jt))}handleEvent(ie){"mousedown"===ie.type?this._onMousedown(ie):"touchstart"===ie.type?this._onTouchStart(ie):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Yt),this._pointerUpEventsRegistered=!0)}_onMousedown(ie){const Mt=(0,o.X6)(ie),ct=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!Mt&&!ct&&(this._isPointerDown=!0,this.fadeInRipple(ie.clientX,ie.clientY,this._target.rippleConfig))}_onTouchStart(ie){if(!this._target.rippleDisabled&&!(0,o.yG)(ie)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const Mt=ie.changedTouches;for(let ct=0;ct<Mt.length;ct++)this.fadeInRipple(Mt[ct].clientX,Mt[ct].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(ie=>{!ie.config.persistent&&(1===ie.state||ie.config.terminateOnPointerUp&&0===ie.state)&&ie.fadeOut()}))}_runTimeoutOutsideZone(ie,Mt=0){this._ngZone.runOutsideAngular(()=>setTimeout(ie,Mt))}_registerEvents(ie){this._ngZone.runOutsideAngular(()=>{ie.forEach(Mt=>{this._triggerElement.addEventListener(Mt,this,le)})})}_removeTriggerEvents(){this._triggerElement&&(jt.forEach(ie=>{this._triggerElement.removeEventListener(ie,this,le)}),this._pointerUpEventsRegistered&&Yt.forEach(ie=>{this._triggerElement.removeEventListener(ie,this,le)}))}}const re=new b.OlP("mat-ripple-global-options");let Et=(()=>{class Pe{constructor(Mt,ct,It,te,ve){this._elementRef=Mt,this._animationMode=ve,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=te||{},this._rippleRenderer=new ge(this,ct,Mt,It)}get disabled(){return this._disabled}set disabled(Mt){Mt&&this.fadeOutAllNonPersistent(),this._disabled=Mt,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(Mt){this._trigger=Mt,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(Mt,ct=0,It){return"number"==typeof Mt?this._rippleRenderer.fadeInRipple(Mt,ct,Object.assign(Object.assign({},this.rippleConfig),It)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),Mt))}}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)(b.Y36(b.SBq),b.Y36(b.R0b),b.Y36(n.t4),b.Y36(re,8),b.Y36(w.Qb,8))},Pe.\u0275dir=b.lG2({type:Pe,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(Mt,ct){2&Mt&&b.ekj("mat-ripple-unbounded",ct.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),Pe})(),kt=(()=>{class Pe{}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)},Pe.\u0275mod=b.oAB({type:Pe}),Pe.\u0275inj=b.cJS({imports:[[tt,n.ud],tt]}),Pe})(),we=(()=>{class Pe{constructor(Mt){this._animationMode=Mt,this.state="unchecked",this.disabled=!1}}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)(b.Y36(w.Qb,8))},Pe.\u0275cmp=b.Xpm({type:Pe,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(Mt,ct){2&Mt&&b.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===ct.state)("mat-pseudo-checkbox-checked","checked"===ct.state)("mat-pseudo-checkbox-disabled",ct.disabled)("_mat-animation-noopable","NoopAnimations"===ct._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(Mt,ct){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),Pe})(),Ae=(()=>{class Pe{}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)},Pe.\u0275mod=b.oAB({type:Pe}),Pe.\u0275inj=b.cJS({imports:[[tt]]}),Pe})();const ci=new b.OlP("MAT_OPTION_PARENT_COMPONENT"),ui=new b.OlP("MatOptgroup");let gi=0;class We{constructor(ie,Mt=!1){this.source=ie,this.isUserInput=Mt}}let ri=(()=>{class Pe{constructor(Mt,ct,It,te){this._element=Mt,this._changeDetectorRef=ct,this._parent=It,this.group=te,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+gi++,this.onSelectionChange=new b.vpe,this._stateChanges=new c.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(Mt){this._disabled=(0,s.Ig)(Mt)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(Mt,ct){const It=this._getHostElement();"function"==typeof It.focus&&It.focus(ct)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(Mt){(Mt.keyCode===M.K5||Mt.keyCode===M.L_)&&!(0,M.Vb)(Mt)&&(this._selectViaInteraction(),Mt.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const Mt=this.viewValue;Mt!==this._mostRecentViewValue&&(this._mostRecentViewValue=Mt,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(Mt=!1){this.onSelectionChange.emit(new We(this,Mt))}}return Pe.\u0275fac=function(Mt){b.$Z()},Pe.\u0275dir=b.lG2({type:Pe,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),Pe})(),ue=(()=>{class Pe extends ri{constructor(Mt,ct,It,te){super(Mt,ct,It,te)}}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)(b.Y36(b.SBq),b.Y36(b.sBO),b.Y36(ci,8),b.Y36(ui,8))},Pe.\u0275cmp=b.Xpm({type:Pe,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(Mt,ct){1&Mt&&b.NdJ("click",function(){return ct._selectViaInteraction()})("keydown",function(te){return ct._handleKeydown(te)}),2&Mt&&(b.Ikx("id",ct.id),b.uIk("tabindex",ct._getTabIndex())("aria-selected",ct._getAriaSelected())("aria-disabled",ct.disabled.toString()),b.ekj("mat-selected",ct.selected)("mat-option-multiple",ct.multiple)("mat-active",ct.active)("mat-option-disabled",ct.disabled))},exportAs:["matOption"],features:[b.qOj],ngContentSelectors:pt,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(Mt,ct){1&Mt&&(b.F$t(),b.YNc(0,H,1,2,"mat-pseudo-checkbox",0),b.TgZ(1,"span",1),b.Hsn(2),b.qZA(),b.YNc(3,$,2,1,"span",2),b._UZ(4,"div",3)),2&Mt&&(b.Q6J("ngIf",ct.multiple),b.xp6(3),b.Q6J("ngIf",ct.group&&ct.group._inert),b.xp6(1),b.Q6J("matRippleTrigger",ct._getHostElement())("matRippleDisabled",ct.disabled||ct.disableRipple))},directives:[t.O5,Et,we],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),Pe})();function je(Pe,ie,Mt){if(Mt.length){let ct=ie.toArray(),It=Mt.toArray(),te=0;for(let ve=0;ve<Pe+1;ve++)ct[ve].group&&ct[ve].group===It[te]&&te++;return te}return 0}function ti(Pe,ie,Mt,ct){return Pe<Mt?Pe:Pe+ie>Mt+ct?Math.max(0,Pe-ct+ie):Mt}let Ri=(()=>{class Pe{}return Pe.\u0275fac=function(Mt){return new(Mt||Pe)},Pe.\u0275mod=b.oAB({type:Pe}),Pe.\u0275inj=b.cJS({imports:[[kt,t.ez,tt,Ae]]}),Pe})()},48966:(k,B,f)=>{"use strict";f.d(B,{uw:()=>Ye,Is:()=>oi,so:()=>Lt});var b=f(91314),p=f(99129),e=f(5e3),t=f(90508),n=f(50226),o=f(77579),s=f(49770),c=f(50727),_=f(39646),w=f(39300),M=f(95698),U=f(68675),V=f(70925),H=f(69808),$=f(41777),pt=f(15664),nt=f(91159),st=f(76360);function Ct(Ft,_e){}class xt{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0}}const yt={dialogContainer:(0,$.X$)("dialogContainer",[(0,$.SB)("void, exit",(0,$.oB)({opacity:0,transform:"scale(0.7)"})),(0,$.SB)("enter",(0,$.oB)({transform:"none"})),(0,$.eR)("* => enter",(0,$.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,$.oB)({transform:"none",opacity:1}))),(0,$.eR)("* => void, * => exit",(0,$.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,$.oB)({opacity:0})))])};let tt=(()=>{class Ft extends p.en{constructor(Xt,Jt,Rt,Pt,he,ze,le,jt){super(),this._elementRef=Xt,this._focusTrapFactory=Jt,this._changeDetectorRef=Rt,this._config=he,this._interactivityChecker=ze,this._ngZone=le,this._focusMonitor=jt,this._animationStateChanged=new e.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=Yt=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(Yt)),this._ariaLabelledBy=he.ariaLabelledBy||null,this._document=Pt}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement()}attachComponentPortal(Xt){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(Xt)}attachTemplatePortal(Xt){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(Xt)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(Xt,Jt){this._interactivityChecker.isFocusable(Xt)||(Xt.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{Xt.addEventListener("blur",()=>Xt.removeAttribute("tabindex")),Xt.addEventListener("mousedown",()=>Xt.removeAttribute("tabindex"))})),Xt.focus(Jt)}_focusByCssSelector(Xt,Jt){let Rt=this._elementRef.nativeElement.querySelector(Xt);Rt&&this._forceFocus(Rt,Jt)}_trapFocus(){const Xt=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||Xt.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(Jt=>{Jt||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const Xt=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&Xt&&"function"==typeof Xt.focus){const Jt=(0,V.ht)(),Rt=this._elementRef.nativeElement;(!Jt||Jt===this._document.body||Jt===Rt||Rt.contains(Jt))&&(this._focusMonitor?(this._focusMonitor.focusVia(Xt,this._closeInteractionType),this._closeInteractionType=null):Xt.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,V.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const Xt=this._elementRef.nativeElement,Jt=(0,V.ht)();return Xt===Jt||Xt.contains(Jt)}}return Ft.\u0275fac=function(Xt){return new(Xt||Ft)(e.Y36(e.SBq),e.Y36(pt.qV),e.Y36(e.sBO),e.Y36(H.K0,8),e.Y36(xt),e.Y36(pt.ic),e.Y36(e.R0b),e.Y36(pt.tE))},Ft.\u0275dir=e.lG2({type:Ft,viewQuery:function(Xt,Jt){if(1&Xt&&e.Gf(p.Pl,7),2&Xt){let Rt;e.iGM(Rt=e.CRH())&&(Jt._portalOutlet=Rt.first)}},features:[e.qOj]}),Ft})(),lt=(()=>{class Ft extends tt{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:Xt,totalTime:Jt}){"enter"===Xt?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:Jt})):"exit"===Xt&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:Jt}))}_onAnimationStart({toState:Xt,totalTime:Jt}){"enter"===Xt?this._animationStateChanged.next({state:"opening",totalTime:Jt}):("exit"===Xt||"void"===Xt)&&this._animationStateChanged.next({state:"closing",totalTime:Jt})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return Ft.\u0275fac=function(){let _e;return function(Jt){return(_e||(_e=e.n5z(Ft)))(Jt||Ft)}}(),Ft.\u0275cmp=e.Xpm({type:Ft,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(Xt,Jt){1&Xt&&e.WFA("@dialogContainer.start",function(Pt){return Jt._onAnimationStart(Pt)})("@dialogContainer.done",function(Pt){return Jt._onAnimationDone(Pt)}),2&Xt&&(e.Ikx("id",Jt._id),e.uIk("role",Jt._config.role)("aria-labelledby",Jt._config.ariaLabel?null:Jt._ariaLabelledBy)("aria-label",Jt._config.ariaLabel)("aria-describedby",Jt._config.ariaDescribedBy||null),e.d8E("@dialogContainer",Jt._state))},features:[e.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(Xt,Jt){1&Xt&&e.YNc(0,Ct,0,0,"ng-template",0)},directives:[p.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[yt.dialogContainer]}}),Ft})(),ot=0;class Lt{constructor(_e,Xt,Jt="mat-dialog-"+ot++){this._overlayRef=_e,this._containerInstance=Xt,this.id=Jt,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new o.x,this._afterClosed=new o.x,this._beforeClosed=new o.x,this._state=0,Xt._id=Jt,Xt._animationStateChanged.pipe((0,w.h)(Rt=>"opened"===Rt.state),(0,M.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),Xt._animationStateChanged.pipe((0,w.h)(Rt=>"closed"===Rt.state),(0,M.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),_e.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),_e.keydownEvents().pipe((0,w.h)(Rt=>Rt.keyCode===nt.hY&&!this.disableClose&&!(0,nt.Vb)(Rt))).subscribe(Rt=>{Rt.preventDefault(),at(this,"keyboard")}),_e.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():at(this,"mouse")})}close(_e){this._result=_e,this._containerInstance._animationStateChanged.pipe((0,w.h)(Xt=>"closing"===Xt.state),(0,M.q)(1)).subscribe(Xt=>{this._beforeClosed.next(_e),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),Xt.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(_e){let Xt=this._getPositionStrategy();return _e&&(_e.left||_e.right)?_e.left?Xt.left(_e.left):Xt.right(_e.right):Xt.centerHorizontally(),_e&&(_e.top||_e.bottom)?_e.top?Xt.top(_e.top):Xt.bottom(_e.bottom):Xt.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(_e="",Xt=""){return this._overlayRef.updateSize({width:_e,height:Xt}),this._overlayRef.updatePosition(),this}addPanelClass(_e){return this._overlayRef.addPanelClass(_e),this}removePanelClass(_e){return this._overlayRef.removePanelClass(_e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function at(Ft,_e,Xt){return void 0!==Ft._containerInstance&&(Ft._containerInstance._closeInteractionType=_e),Ft.close(Xt)}const dt=new e.OlP("MatDialogData"),it=new e.OlP("mat-dialog-default-options"),rt=new e.OlP("mat-dialog-scroll-strategy"),Ht={provide:rt,deps:[b.aV],useFactory:function(Ft){return()=>Ft.scrollStrategies.block()}};let ce=(()=>{class Ft{constructor(Xt,Jt,Rt,Pt,he,ze,le,jt,Yt,ge){this._overlay=Xt,this._injector=Jt,this._defaultOptions=Rt,this._parentDialog=Pt,this._overlayContainer=he,this._dialogRefConstructor=le,this._dialogContainerType=jt,this._dialogDataToken=Yt,this._animationMode=ge,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new o.x,this._afterOpenedAtThisLevel=new o.x,this._ariaHiddenElements=new Map,this._dialogAnimatingOpen=!1,this.afterAllClosed=(0,s.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,U.O)(void 0))),this._scrollStrategy=ze}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const Xt=this._parentDialog;return Xt?Xt._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(Xt,Jt){if(Jt=function(Ft,_e){return Object.assign(Object.assign({},_e),Ft)}(Jt,this._defaultOptions||new xt),Jt.id&&this.getDialogById(Jt.id),this._dialogAnimatingOpen)return this._lastDialogRef;const Rt=this._createOverlay(Jt),Pt=this._attachDialogContainer(Rt,Jt);if("NoopAnimations"!==this._animationMode){const ze=Pt._animationStateChanged.subscribe(le=>{"opening"===le.state&&(this._dialogAnimatingOpen=!0),"opened"===le.state&&(this._dialogAnimatingOpen=!1,ze.unsubscribe())});this._animationStateSubscriptions||(this._animationStateSubscriptions=new c.w0),this._animationStateSubscriptions.add(ze)}const he=this._attachDialogContent(Xt,Pt,Rt,Jt);return this._lastDialogRef=he,this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(he),he.afterClosed().subscribe(()=>this._removeOpenDialog(he)),this.afterOpened.next(he),Pt._initializeWithAttachedContent(),he}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(Xt){return this.openDialogs.find(Jt=>Jt.id===Xt)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._animationStateSubscriptions&&this._animationStateSubscriptions.unsubscribe()}_createOverlay(Xt){const Jt=this._getOverlayConfig(Xt);return this._overlay.create(Jt)}_getOverlayConfig(Xt){const Jt=new b.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:Xt.scrollStrategy||this._scrollStrategy(),panelClass:Xt.panelClass,hasBackdrop:Xt.hasBackdrop,direction:Xt.direction,minWidth:Xt.minWidth,minHeight:Xt.minHeight,maxWidth:Xt.maxWidth,maxHeight:Xt.maxHeight,disposeOnNavigation:Xt.closeOnNavigation});return Xt.backdropClass&&(Jt.backdropClass=Xt.backdropClass),Jt}_attachDialogContainer(Xt,Jt){const Pt=e.zs3.create({parent:Jt&&Jt.viewContainerRef&&Jt.viewContainerRef.injector||this._injector,providers:[{provide:xt,useValue:Jt}]}),he=new p.C5(this._dialogContainerType,Jt.viewContainerRef,Pt,Jt.componentFactoryResolver);return Xt.attach(he).instance}_attachDialogContent(Xt,Jt,Rt,Pt){const he=new this._dialogRefConstructor(Rt,Jt,Pt.id);if(Xt instanceof e.Rgc)Jt.attachTemplatePortal(new p.UE(Xt,null,{$implicit:Pt.data,dialogRef:he}));else{const ze=this._createInjector(Pt,he,Jt),le=Jt.attachComponentPortal(new p.C5(Xt,Pt.viewContainerRef,ze));he.componentInstance=le.instance}return he.updateSize(Pt.width,Pt.height).updatePosition(Pt.position),he}_createInjector(Xt,Jt,Rt){const Pt=Xt&&Xt.viewContainerRef&&Xt.viewContainerRef.injector,he=[{provide:this._dialogContainerType,useValue:Rt},{provide:this._dialogDataToken,useValue:Xt.data},{provide:this._dialogRefConstructor,useValue:Jt}];return Xt.direction&&(!Pt||!Pt.get(n.Is,null,e.XFs.Optional))&&he.push({provide:n.Is,useValue:{value:Xt.direction,change:(0,_.of)()}}),e.zs3.create({parent:Pt||this._injector,providers:he})}_removeOpenDialog(Xt){const Jt=this.openDialogs.indexOf(Xt);Jt>-1&&(this.openDialogs.splice(Jt,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((Rt,Pt)=>{Rt?Pt.setAttribute("aria-hidden",Rt):Pt.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const Xt=this._overlayContainer.getContainerElement();if(Xt.parentElement){const Jt=Xt.parentElement.children;for(let Rt=Jt.length-1;Rt>-1;Rt--){let Pt=Jt[Rt];Pt!==Xt&&"SCRIPT"!==Pt.nodeName&&"STYLE"!==Pt.nodeName&&!Pt.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(Pt,Pt.getAttribute("aria-hidden")),Pt.setAttribute("aria-hidden","true"))}}}_closeDialogs(Xt){let Jt=Xt.length;for(;Jt--;)Xt[Jt].close()}}return Ft.\u0275fac=function(Xt){e.$Z()},Ft.\u0275dir=e.lG2({type:Ft}),Ft})(),Ye=(()=>{class Ft extends ce{constructor(Xt,Jt,Rt,Pt,he,ze,le,jt){super(Xt,Jt,Pt,ze,le,he,Lt,lt,dt,jt)}}return Ft.\u0275fac=function(Xt){return new(Xt||Ft)(e.LFG(b.aV),e.LFG(e.zs3),e.LFG(H.Ye,8),e.LFG(it,8),e.LFG(rt),e.LFG(Ft,12),e.LFG(b.Xj),e.LFG(st.Qb,8))},Ft.\u0275prov=e.Yz7({token:Ft,factory:Ft.\u0275fac}),Ft})(),oi=(()=>{class Ft{}return Ft.\u0275fac=function(Xt){return new(Xt||Ft)},Ft.\u0275mod=e.oAB({type:Ft}),Ft.\u0275inj=e.cJS({providers:[Ye,Ht],imports:[[b.U8,p.eL,t.BQ],t.BQ]}),Ft})()},4834:(k,B,f)=>{"use strict";f.d(B,{d:()=>t,t:()=>n});var b=f(5e3),p=f(63191),e=f(90508);let t=(()=>{class o{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(c){this._vertical=(0,p.Ig)(c)}get inset(){return this._inset}set inset(c){this._inset=(0,p.Ig)(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275cmp=b.Xpm({type:o,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(c,_){2&c&&(b.uIk("aria-orientation",_.vertical?"vertical":"horizontal"),b.ekj("mat-divider-vertical",_.vertical)("mat-divider-horizontal",!_.vertical)("mat-divider-inset",_.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(c,_){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),o})(),n=(()=>{class o{}return o.\u0275fac=function(c){return new(c||o)},o.\u0275mod=b.oAB({type:o}),o.\u0275inj=b.cJS({imports:[[e.BQ],e.BQ]}),o})()},81125:(k,B,f)=>{"use strict";f.d(B,{pp:()=>_e,To:()=>Xt,ib:()=>He,u4:()=>oi,yz:()=>Ne,yK:()=>Ft});var b=f(5e3),p=f(63191),e=f(77579),t=f(50727),n=f(20449);let o=0;const s=new b.OlP("CdkAccordion");let c=(()=>{class Jt{constructor(){this._stateChanges=new e.x,this._openCloseAllActions=new e.x,this.id="cdk-accordion-"+o++,this._multi=!1}get multi(){return this._multi}set multi(Pt){this._multi=(0,p.Ig)(Pt)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(Pt){this._stateChanges.next(Pt)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return Jt.\u0275fac=function(Pt){return new(Pt||Jt)},Jt.\u0275dir=b.lG2({type:Jt,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[b._Bn([{provide:s,useExisting:Jt}]),b.TTD]}),Jt})(),_=0,w=(()=>{class Jt{constructor(Pt,he,ze){this.accordion=Pt,this._changeDetectorRef=he,this._expansionDispatcher=ze,this._openCloseAllSubscription=t.w0.EMPTY,this.closed=new b.vpe,this.opened=new b.vpe,this.destroyed=new b.vpe,this.expandedChange=new b.vpe,this.id="cdk-accordion-child-"+_++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=ze.listen((le,jt)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===jt&&this.id!==le&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(Pt){Pt=(0,p.Ig)(Pt),this._expanded!==Pt&&(this._expanded=Pt,this.expandedChange.emit(Pt),Pt?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(Pt){this._disabled=(0,p.Ig)(Pt)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(Pt=>{this.disabled||(this.expanded=Pt)})}}return Jt.\u0275fac=function(Pt){return new(Pt||Jt)(b.Y36(s,12),b.Y36(b.sBO),b.Y36(n.A8))},Jt.\u0275dir=b.lG2({type:Jt,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[b._Bn([{provide:s,useValue:void 0}])]}),Jt})(),M=(()=>{class Jt{}return Jt.\u0275fac=function(Pt){return new(Pt||Jt)},Jt.\u0275mod=b.oAB({type:Jt}),Jt.\u0275inj=b.cJS({}),Jt})();var U=f(99129),V=f(69808),H=f(90508),$=f(15664),pt=f(71884),nt=f(68675),st=f(39300),Ct=f(95698),xt=f(91159),yt=f(76360),ut=f(60515),tt=f(56451),lt=f(41777);const ot=["body"];function Lt(Jt,Rt){}const at=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],dt=["mat-expansion-panel-header","*","mat-action-row"];function it(Jt,Rt){if(1&Jt&&b._UZ(0,"span",2),2&Jt){const Pt=b.oxw();b.Q6J("@indicatorRotate",Pt._getExpandedState())}}const rt=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Gt=["mat-panel-title","mat-panel-description","*"],bt=new b.OlP("MAT_ACCORDION"),Ht="225ms cubic-bezier(0.4,0.0,0.2,1)",ce={indicatorRotate:(0,lt.X$)("indicatorRotate",[(0,lt.SB)("collapsed, void",(0,lt.oB)({transform:"rotate(0deg)"})),(0,lt.SB)("expanded",(0,lt.oB)({transform:"rotate(180deg)"})),(0,lt.eR)("expanded <=> collapsed, void => collapsed",(0,lt.jt)(Ht))]),bodyExpansion:(0,lt.X$)("bodyExpansion",[(0,lt.SB)("collapsed, void",(0,lt.oB)({height:"0px",visibility:"hidden"})),(0,lt.SB)("expanded",(0,lt.oB)({height:"*",visibility:"visible"})),(0,lt.eR)("expanded <=> collapsed, void => collapsed",(0,lt.jt)(Ht))])};let Ye=(()=>{class Jt{constructor(Pt){this._template=Pt}}return Jt.\u0275fac=function(Pt){return new(Pt||Jt)(b.Y36(b.Rgc))},Jt.\u0275dir=b.lG2({type:Jt,selectors:[["ng-template","matExpansionPanelContent",""]]}),Jt})(),de=0;const Be=new b.OlP("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let He=(()=>{class Jt extends w{constructor(Pt,he,ze,le,jt,Yt,ge){super(Pt,he,ze),this._viewContainerRef=le,this._animationMode=Yt,this._hideToggle=!1,this.afterExpand=new b.vpe,this.afterCollapse=new b.vpe,this._inputChanges=new e.x,this._headerId="mat-expansion-panel-header-"+de++,this._bodyAnimationDone=new e.x,this.accordion=Pt,this._document=jt,this._bodyAnimationDone.pipe((0,pt.x)(($t,oe)=>$t.fromState===oe.fromState&&$t.toState===oe.toState)).subscribe($t=>{"void"!==$t.fromState&&("expanded"===$t.toState?this.afterExpand.emit():"collapsed"===$t.toState&&this.afterCollapse.emit())}),ge&&(this.hideToggle=ge.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(Pt){this._hideToggle=(0,p.Ig)(Pt)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(Pt){this._togglePosition=Pt}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe((0,nt.O)(null),(0,st.h)(()=>this.expanded&&!this._portal),(0,Ct.q)(1)).subscribe(()=>{this._portal=new U.UE(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(Pt){this._inputChanges.next(Pt)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const Pt=this._document.activeElement,he=this._body.nativeElement;return Pt===he||he.contains(Pt)}return!1}}return Jt.\u0275fac=function(Pt){return new(Pt||Jt)(b.Y36(bt,12),b.Y36(b.sBO),b.Y36(n.A8),b.Y36(b.s_b),b.Y36(V.K0),b.Y36(yt.Qb,8),b.Y36(Be,8))},Jt.\u0275cmp=b.Xpm({type:Jt,selectors:[["mat-expansion-panel"]],contentQueries:function(Pt,he,ze){if(1&Pt&&b.Suo(ze,Ye,5),2&Pt){let le;b.iGM(le=b.CRH())&&(he._lazyContent=le.first)}},viewQuery:function(Pt,he){if(1&Pt&&b.Gf(ot,5),2&Pt){let ze;b.iGM(ze=b.CRH())&&(he._body=ze.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(Pt,he){2&Pt&&b.ekj("mat-expanded",he.expanded)("_mat-animation-noopable","NoopAnimations"===he._animationMode)("mat-expansion-panel-spacing",he._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[b._Bn([{provide:bt,useValue:void 0}]),b.qOj,b.TTD],ngContentSelectors:dt,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(Pt,he){1&Pt&&(b.F$t(at),b.Hsn(0),b.TgZ(1,"div",0,1),b.NdJ("@bodyExpansion.done",function(le){return he._bodyAnimationDone.next(le)}),b.TgZ(3,"div",2),b.Hsn(4,1),b.YNc(5,Lt,0,0,"ng-template",3),b.qZA(),b.Hsn(6,2),b.qZA()),2&Pt&&(b.xp6(1),b.Q6J("@bodyExpansion",he._getExpandedState())("id",he.id),b.uIk("aria-labelledby",he._headerId),b.xp6(4),b.Q6J("cdkPortalOutlet",he._portal))},directives:[U.Pl],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[ce.bodyExpansion]},changeDetection:0}),Jt})();class vi{}const qe=(0,H.sb)(vi);let Ne=(()=>{class Jt extends qe{constructor(Pt,he,ze,le,jt,Yt,ge){super(),this.panel=Pt,this._element=he,this._focusMonitor=ze,this._changeDetectorRef=le,this._animationMode=Yt,this._parentChangeSubscription=t.w0.EMPTY;const $t=Pt.accordion?Pt.accordion._stateChanges.pipe((0,st.h)(oe=>!(!oe.hideToggle&&!oe.togglePosition))):ut.E;this.tabIndex=parseInt(ge||"")||0,this._parentChangeSubscription=(0,tt.T)(Pt.opened,Pt.closed,$t,Pt._inputChanges.pipe((0,st.h)(oe=>!!(oe.hideToggle||oe.disabled||oe.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),Pt.closed.pipe((0,st.h)(()=>Pt._containsFocus())).subscribe(()=>ze.focusVia(he,"program")),jt&&(this.expandedHeight=jt.expandedHeight,this.collapsedHeight=jt.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const Pt=this._isExpanded();return Pt&&this.expandedHeight?this.expandedHeight:!Pt&&this.collapsedHeight?this.collapsedHeight:null}_keydown(Pt){switch(Pt.keyCode){case xt.L_:case xt.K5:(0,xt.Vb)(Pt)||(Pt.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(Pt))}}focus(Pt,he){Pt?this._focusMonitor.focusVia(this._element,Pt,he):this._element.nativeElement.focus(he)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(Pt=>{Pt&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return Jt.\u0275fac=function(Pt){return new(Pt||Jt)(b.Y36(He,1),b.Y36(b.SBq),b.Y36($.tE),b.Y36(b.sBO),b.Y36(Be,8),b.Y36(yt.Qb,8),b.$8M("tabindex"))},Jt.\u0275cmp=b.Xpm({type:Jt,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(Pt,he){1&Pt&&b.NdJ("click",function(){return he._toggle()})("keydown",function(le){return he._keydown(le)}),2&Pt&&(b.uIk("id",he.panel._headerId)("tabindex",he.tabIndex)("aria-controls",he._getPanelId())("aria-expanded",he._isExpanded())("aria-disabled",he.panel.disabled),b.Udp("height",he._getHeaderHeight()),b.ekj("mat-expanded",he._isExpanded())("mat-expansion-toggle-indicator-after","after"===he._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===he._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===he._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[b.qOj],ngContentSelectors:Gt,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(Pt,he){1&Pt&&(b.F$t(rt),b.TgZ(0,"span",0),b.Hsn(1),b.Hsn(2,1),b.Hsn(3,2),b.qZA(),b.YNc(4,it,1,1,"span",1)),2&Pt&&(b.xp6(4),b.Q6J("ngIf",he._showToggle()))},directives:[V.O5],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[ce.indicatorRotate]},changeDetection:0}),Jt})(),oi=(()=>{class Jt{}return Jt.\u0275fac=function(Pt){return new(Pt||Jt)},Jt.\u0275dir=b.lG2({type:Jt,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),Jt})(),Ft=(()=>{class Jt{}return Jt.\u0275fac=function(Pt){return new(Pt||Jt)},Jt.\u0275dir=b.lG2({type:Jt,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),Jt})(),_e=(()=>{class Jt extends c{constructor(){super(...arguments),this._ownHeaders=new b.n_E,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(Pt){this._hideToggle=(0,p.Ig)(Pt)}ngAfterContentInit(){this._headers.changes.pipe((0,nt.O)(this._headers)).subscribe(Pt=>{this._ownHeaders.reset(Pt.filter(he=>he.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new $.Em(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(Pt){this._keyManager.onKeydown(Pt)}_handleHeaderFocus(Pt){this._keyManager.updateActiveItem(Pt)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return Jt.\u0275fac=function(){let Rt;return function(he){return(Rt||(Rt=b.n5z(Jt)))(he||Jt)}}(),Jt.\u0275dir=b.lG2({type:Jt,selectors:[["mat-accordion"]],contentQueries:function(Pt,he,ze){if(1&Pt&&b.Suo(ze,Ne,5),2&Pt){let le;b.iGM(le=b.CRH())&&(he._headers=le)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(Pt,he){2&Pt&&b.ekj("mat-accordion-multi",he.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[b._Bn([{provide:bt,useExisting:Jt}]),b.qOj]}),Jt})(),Xt=(()=>{class Jt{}return Jt.\u0275fac=function(Pt){return new(Pt||Jt)},Jt.\u0275mod=b.oAB({type:Jt}),Jt.\u0275inj=b.cJS({imports:[[V.ez,H.BQ,M,U.eL]]}),Jt})()},67322:(k,B,f)=>{"use strict";f.d(B,{G_:()=>Yt,KE:()=>ge,Eo:()=>de,lN:()=>$t,hX:()=>oi});var b=f(17144),p=f(69808),e=f(5e3),t=f(90508),n=f(63191),o=f(77579),s=f(56451),c=f(54968),_=f(68675),w=f(82722),M=f(95698),U=f(41777),V=f(76360),H=f(50226),$=f(70925);const pt=["connectionContainer"],nt=["inputContainer"],st=["label"];function Ct(oe,re){1&oe&&(e.ynx(0),e.TgZ(1,"div",14),e._UZ(2,"div",15),e._UZ(3,"div",16),e._UZ(4,"div",17),e.qZA(),e.TgZ(5,"div",18),e._UZ(6,"div",15),e._UZ(7,"div",16),e._UZ(8,"div",17),e.qZA(),e.BQk())}function xt(oe,re){if(1&oe){const Et=e.EpF();e.TgZ(0,"div",19),e.NdJ("cdkObserveContent",function(){return e.CHM(Et),e.oxw().updateOutlineGap()}),e.Hsn(1,1),e.qZA()}if(2&oe){const Et=e.oxw();e.Q6J("cdkObserveContentDisabled","outline"!=Et.appearance)}}function yt(oe,re){if(1&oe&&(e.ynx(0),e.Hsn(1,2),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.BQk()),2&oe){const Et=e.oxw(2);e.xp6(3),e.Oqu(Et._control.placeholder)}}function ut(oe,re){1&oe&&e.Hsn(0,3,["*ngSwitchCase","true"])}function tt(oe,re){1&oe&&(e.TgZ(0,"span",23),e._uU(1," *"),e.qZA())}function lt(oe,re){if(1&oe){const Et=e.EpF();e.TgZ(0,"label",20,21),e.NdJ("cdkObserveContent",function(){return e.CHM(Et),e.oxw().updateOutlineGap()}),e.YNc(2,yt,4,1,"ng-container",12),e.YNc(3,ut,1,0,"ng-content",12),e.YNc(4,tt,2,0,"span",22),e.qZA()}if(2&oe){const Et=e.oxw();e.ekj("mat-empty",Et._control.empty&&!Et._shouldAlwaysFloat())("mat-form-field-empty",Et._control.empty&&!Et._shouldAlwaysFloat())("mat-accent","accent"==Et.color)("mat-warn","warn"==Et.color),e.Q6J("cdkObserveContentDisabled","outline"!=Et.appearance)("id",Et._labelId)("ngSwitch",Et._hasLabel()),e.uIk("for",Et._control.id)("aria-owns",Et._control.id),e.xp6(2),e.Q6J("ngSwitchCase",!1),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngIf",!Et.hideRequiredMarker&&Et._control.required&&!Et._control.disabled)}}function ot(oe,re){1&oe&&(e.TgZ(0,"div",24),e.Hsn(1,4),e.qZA())}function Lt(oe,re){if(1&oe&&(e.TgZ(0,"div",25),e._UZ(1,"span",26),e.qZA()),2&oe){const Et=e.oxw();e.xp6(1),e.ekj("mat-accent","accent"==Et.color)("mat-warn","warn"==Et.color)}}function at(oe,re){if(1&oe&&(e.TgZ(0,"div"),e.Hsn(1,5),e.qZA()),2&oe){const Et=e.oxw();e.Q6J("@transitionMessages",Et._subscriptAnimationState)}}function dt(oe,re){if(1&oe&&(e.TgZ(0,"div",30),e._uU(1),e.qZA()),2&oe){const Et=e.oxw(2);e.Q6J("id",Et._hintLabelId),e.xp6(1),e.Oqu(Et.hintLabel)}}function it(oe,re){if(1&oe&&(e.TgZ(0,"div",27),e.YNc(1,dt,2,2,"div",28),e.Hsn(2,6),e._UZ(3,"div",29),e.Hsn(4,7),e.qZA()),2&oe){const Et=e.oxw();e.Q6J("@transitionMessages",Et._subscriptAnimationState),e.xp6(1),e.Q6J("ngIf",Et.hintLabel)}}const rt=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Gt=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],Ht=new e.OlP("MatError"),Ye={transitionMessages:(0,U.X$)("transitionMessages",[(0,U.SB)("enter",(0,U.oB)({opacity:1,transform:"translateY(0%)"})),(0,U.eR)("void => enter",[(0,U.oB)({opacity:0,transform:"translateY(-5px)"}),(0,U.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let de=(()=>{class oe{}return oe.\u0275fac=function(Et){return new(Et||oe)},oe.\u0275dir=e.lG2({type:oe}),oe})();const qe=new e.OlP("MatHint");let oi=(()=>{class oe{}return oe.\u0275fac=function(Et){return new(Et||oe)},oe.\u0275dir=e.lG2({type:oe,selectors:[["mat-label"]]}),oe})(),Ft=(()=>{class oe{}return oe.\u0275fac=function(Et){return new(Et||oe)},oe.\u0275dir=e.lG2({type:oe,selectors:[["mat-placeholder"]]}),oe})();const _e=new e.OlP("MatPrefix"),Jt=new e.OlP("MatSuffix");let Pt=0;const le=(0,t.pj)(class{constructor(oe){this._elementRef=oe}},"primary"),jt=new e.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Yt=new e.OlP("MatFormField");let ge=(()=>{class oe extends le{constructor(Et,kt,we,Ae,ci,Ze,li){super(Et),this._changeDetectorRef=kt,this._dir=we,this._defaults=Ae,this._platform=ci,this._ngZone=Ze,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new o.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Pt++,this._labelId="mat-form-field-label-"+Pt++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==li,this.appearance=Ae&&Ae.appearance?Ae.appearance:"legacy",this._hideRequiredMarker=!(!Ae||null==Ae.hideRequiredMarker)&&Ae.hideRequiredMarker}get appearance(){return this._appearance}set appearance(Et){const kt=this._appearance;this._appearance=Et||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&kt!==Et&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(Et){this._hideRequiredMarker=(0,n.Ig)(Et)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(Et){this._hintLabel=Et,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(Et){Et!==this._floatLabel&&(this._floatLabel=Et||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(Et){this._explicitFormFieldControl=Et}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const Et=this._control;Et.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${Et.controlType}`),Et.stateChanges.pipe((0,_.O)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),Et.ngControl&&Et.ngControl.valueChanges&&Et.ngControl.valueChanges.pipe((0,w.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,w.R)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,s.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,_.O)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,_.O)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,w.R)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(Et){const kt=this._control?this._control.ngControl:null;return kt&&kt[Et]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,c.R)(this._label.nativeElement,"transitionend").pipe((0,M.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let Et=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&Et.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const kt=this._hintChildren?this._hintChildren.find(Ae=>"start"===Ae.align):null,we=this._hintChildren?this._hintChildren.find(Ae=>"end"===Ae.align):null;kt?Et.push(kt.id):this._hintLabel&&Et.push(this._hintLabelId),we&&Et.push(we.id)}else this._errorChildren&&Et.push(...this._errorChildren.map(kt=>kt.id));this._control.setDescribedByIds(Et)}}_validateControlChild(){}updateOutlineGap(){const Et=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&Et&&Et.children.length&&Et.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let kt=0,we=0;const Ae=this._connectionContainerRef.nativeElement,ci=Ae.querySelectorAll(".mat-form-field-outline-start"),Ze=Ae.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const li=Ae.getBoundingClientRect();if(0===li.width&&0===li.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const Fi=this._getStartEnd(li),ui=Et.children,Ei=this._getStartEnd(ui[0].getBoundingClientRect());let gi=0;for(let We=0;We<ui.length;We++)gi+=ui[We].offsetWidth;kt=Math.abs(Ei-Fi)-5,we=gi>0?.75*gi+10:0}for(let li=0;li<ci.length;li++)ci[li].style.width=`${kt}px`;for(let li=0;li<Ze.length;li++)Ze[li].style.width=`${we}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(Et){return this._dir&&"rtl"===this._dir.value?Et.right:Et.left}_isAttachedToDOM(){const Et=this._elementRef.nativeElement;if(Et.getRootNode){const kt=Et.getRootNode();return kt&&kt!==Et}return document.documentElement.contains(Et)}}return oe.\u0275fac=function(Et){return new(Et||oe)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(H.Is,8),e.Y36(jt,8),e.Y36($.t4),e.Y36(e.R0b),e.Y36(V.Qb,8))},oe.\u0275cmp=e.Xpm({type:oe,selectors:[["mat-form-field"]],contentQueries:function(Et,kt,we){if(1&Et&&(e.Suo(we,de,5),e.Suo(we,de,7),e.Suo(we,oi,5),e.Suo(we,oi,7),e.Suo(we,Ft,5),e.Suo(we,Ht,5),e.Suo(we,qe,5),e.Suo(we,_e,5),e.Suo(we,Jt,5)),2&Et){let Ae;e.iGM(Ae=e.CRH())&&(kt._controlNonStatic=Ae.first),e.iGM(Ae=e.CRH())&&(kt._controlStatic=Ae.first),e.iGM(Ae=e.CRH())&&(kt._labelChildNonStatic=Ae.first),e.iGM(Ae=e.CRH())&&(kt._labelChildStatic=Ae.first),e.iGM(Ae=e.CRH())&&(kt._placeholderChild=Ae.first),e.iGM(Ae=e.CRH())&&(kt._errorChildren=Ae),e.iGM(Ae=e.CRH())&&(kt._hintChildren=Ae),e.iGM(Ae=e.CRH())&&(kt._prefixChildren=Ae),e.iGM(Ae=e.CRH())&&(kt._suffixChildren=Ae)}},viewQuery:function(Et,kt){if(1&Et&&(e.Gf(pt,7),e.Gf(nt,5),e.Gf(st,5)),2&Et){let we;e.iGM(we=e.CRH())&&(kt._connectionContainerRef=we.first),e.iGM(we=e.CRH())&&(kt._inputContainerRef=we.first),e.iGM(we=e.CRH())&&(kt._label=we.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(Et,kt){2&Et&&e.ekj("mat-form-field-appearance-standard","standard"==kt.appearance)("mat-form-field-appearance-fill","fill"==kt.appearance)("mat-form-field-appearance-outline","outline"==kt.appearance)("mat-form-field-appearance-legacy","legacy"==kt.appearance)("mat-form-field-invalid",kt._control.errorState)("mat-form-field-can-float",kt._canLabelFloat())("mat-form-field-should-float",kt._shouldLabelFloat())("mat-form-field-has-label",kt._hasFloatingLabel())("mat-form-field-hide-placeholder",kt._hideControlPlaceholder())("mat-form-field-disabled",kt._control.disabled)("mat-form-field-autofilled",kt._control.autofilled)("mat-focused",kt._control.focused)("ng-untouched",kt._shouldForward("untouched"))("ng-touched",kt._shouldForward("touched"))("ng-pristine",kt._shouldForward("pristine"))("ng-dirty",kt._shouldForward("dirty"))("ng-valid",kt._shouldForward("valid"))("ng-invalid",kt._shouldForward("invalid"))("ng-pending",kt._shouldForward("pending"))("_mat-animation-noopable",!kt._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[e._Bn([{provide:Yt,useExisting:oe}]),e.qOj],ngContentSelectors:Gt,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(Et,kt){1&Et&&(e.F$t(rt),e.TgZ(0,"div",0),e.TgZ(1,"div",1,2),e.NdJ("click",function(Ae){return kt._control.onContainerClick&&kt._control.onContainerClick(Ae)}),e.YNc(3,Ct,9,0,"ng-container",3),e.YNc(4,xt,2,1,"div",4),e.TgZ(5,"div",5,6),e.Hsn(7),e.TgZ(8,"span",7),e.YNc(9,lt,5,16,"label",8),e.qZA(),e.qZA(),e.YNc(10,ot,2,0,"div",9),e.qZA(),e.YNc(11,Lt,2,4,"div",10),e.TgZ(12,"div",11),e.YNc(13,at,2,1,"div",12),e.YNc(14,it,5,2,"div",13),e.qZA(),e.qZA()),2&Et&&(e.xp6(3),e.Q6J("ngIf","outline"==kt.appearance),e.xp6(1),e.Q6J("ngIf",kt._prefixChildren.length),e.xp6(5),e.Q6J("ngIf",kt._hasFloatingLabel()),e.xp6(1),e.Q6J("ngIf",kt._suffixChildren.length),e.xp6(1),e.Q6J("ngIf","outline"!=kt.appearance),e.xp6(1),e.Q6J("ngSwitch",kt._getDisplayedMessages()),e.xp6(1),e.Q6J("ngSwitchCase","error"),e.xp6(1),e.Q6J("ngSwitchCase","hint"))},directives:[p.O5,p.RF,p.n9,b.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[Ye.transitionMessages]},changeDetection:0}),oe})(),$t=(()=>{class oe{}return oe.\u0275fac=function(Et){return new(Et||oe)},oe.\u0275mod=e.oAB({type:oe}),oe.\u0275inj=e.cJS({imports:[[p.ez,t.BQ,b.Q8],t.BQ]}),oe})()},43954:(k,B,f)=>{"use strict";f.d(B,{Il:()=>ot,N6:()=>Lt,DX:()=>U,jo:()=>$,$H:()=>V});var b=f(5e3),p=f(90508),e=f(63191),t=f(50226);const n=["*"],o=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],s=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"];class _{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const it=Math.max(...this.tracker);return it>1?this.rowCount+it-1:this.rowCount}update(it,rt){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(it),this.tracker.fill(0,0,this.tracker.length),this.positions=rt.map(Gt=>this._trackTile(Gt))}_trackTile(it){const rt=this._findMatchingGap(it.colspan);return this._markTilePosition(rt,it),this.columnIndex=rt+it.colspan,new w(this.rowIndex,rt)}_findMatchingGap(it){let rt=-1,Gt=-1;do{this.columnIndex+it>this.tracker.length?(this._nextRow(),rt=this.tracker.indexOf(0,this.columnIndex),Gt=this._findGapEndIndex(rt)):(rt=this.tracker.indexOf(0,this.columnIndex),-1!=rt?(Gt=this._findGapEndIndex(rt),this.columnIndex=rt+1):(this._nextRow(),rt=this.tracker.indexOf(0,this.columnIndex),Gt=this._findGapEndIndex(rt)))}while(Gt-rt<it||0==Gt);return Math.max(rt,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let it=0;it<this.tracker.length;it++)this.tracker[it]=Math.max(0,this.tracker[it]-1)}_findGapEndIndex(it){for(let rt=it+1;rt<this.tracker.length;rt++)if(0!=this.tracker[rt])return rt;return this.tracker.length}_markTilePosition(it,rt){for(let Gt=0;Gt<rt.colspan;Gt++)this.tracker[it+Gt]=rt.rowspan}}class w{constructor(it,rt){this.row=it,this.col=rt}}const M=new b.OlP("MAT_GRID_LIST");let U=(()=>{class dt{constructor(rt,Gt){this._element=rt,this._gridList=Gt,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(rt){this._rowspan=Math.round((0,e.su)(rt))}get colspan(){return this._colspan}set colspan(rt){this._colspan=Math.round((0,e.su)(rt))}_setStyle(rt,Gt){this._element.nativeElement.style[rt]=Gt}}return dt.\u0275fac=function(rt){return new(rt||dt)(b.Y36(b.SBq),b.Y36(M,8))},dt.\u0275cmp=b.Xpm({type:dt,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(rt,Gt){2&rt&&b.uIk("rowspan",Gt.rowspan)("colspan",Gt.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:n,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(rt,Gt){1&rt&&(b.F$t(),b.TgZ(0,"div",0),b.Hsn(1),b.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),dt})(),V=(()=>{class dt{constructor(rt){this._element=rt}ngAfterContentInit(){(0,p.E0)(this._lines,this._element)}}return dt.\u0275fac=function(rt){return new(rt||dt)(b.Y36(b.SBq))},dt.\u0275cmp=b.Xpm({type:dt,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(rt,Gt,bt){if(1&rt&&b.Suo(bt,p.X2,5),2&rt){let Ht;b.iGM(Ht=b.CRH())&&(Gt._lines=Ht)}},ngContentSelectors:s,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(rt,Gt){1&rt&&(b.F$t(o),b.Hsn(0),b.TgZ(1,"div",0),b.Hsn(2,1),b.qZA(),b.Hsn(3,2))},encapsulation:2,changeDetection:0}),dt})(),$=(()=>{class dt{}return dt.\u0275fac=function(rt){return new(rt||dt)},dt.\u0275dir=b.lG2({type:dt,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),dt})();const nt=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class st{constructor(){this._rows=0,this._rowspan=0}init(it,rt,Gt,bt){this._gutterSize=tt(it),this._rows=rt.rowCount,this._rowspan=rt.rowspan,this._cols=Gt,this._direction=bt}getBaseTileSize(it,rt){return`(${it}% - (${this._gutterSize} * ${rt}))`}getTilePosition(it,rt){return 0===rt?"0":ut(`(${it} + ${this._gutterSize}) * ${rt}`)}getTileSize(it,rt){return`(${it} * ${rt}) + (${rt-1} * ${this._gutterSize})`}setStyle(it,rt,Gt){let bt=100/this._cols,Ht=(this._cols-1)/this._cols;this.setColStyles(it,Gt,bt,Ht),this.setRowStyles(it,rt,bt,Ht)}setColStyles(it,rt,Gt,bt){let Ht=this.getBaseTileSize(Gt,bt);it._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(Ht,rt)),it._setStyle("width",ut(this.getTileSize(Ht,it.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(it){return`${this._rowspan} * ${this.getTileSize(it,1)}`}getComputedHeight(){return null}}class Ct extends st{constructor(it){super(),this.fixedRowHeight=it}init(it,rt,Gt,bt){super.init(it,rt,Gt,bt),this.fixedRowHeight=tt(this.fixedRowHeight),nt.test(this.fixedRowHeight)}setRowStyles(it,rt){it._setStyle("top",this.getTilePosition(this.fixedRowHeight,rt)),it._setStyle("height",ut(this.getTileSize(this.fixedRowHeight,it.rowspan)))}getComputedHeight(){return["height",ut(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(it){it._setListStyle(["height",null]),it._tiles&&it._tiles.forEach(rt=>{rt._setStyle("top",null),rt._setStyle("height",null)})}}class xt extends st{constructor(it){super(),this._parseRatio(it)}setRowStyles(it,rt,Gt,bt){this.baseTileHeight=this.getBaseTileSize(Gt/this.rowHeightRatio,bt),it._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,rt)),it._setStyle("paddingTop",ut(this.getTileSize(this.baseTileHeight,it.rowspan)))}getComputedHeight(){return["paddingBottom",ut(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(it){it._setListStyle(["paddingBottom",null]),it._tiles.forEach(rt=>{rt._setStyle("marginTop",null),rt._setStyle("paddingTop",null)})}_parseRatio(it){const rt=it.split(":");this.rowHeightRatio=parseFloat(rt[0])/parseFloat(rt[1])}}class yt extends st{setRowStyles(it,rt){let Ht=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);it._setStyle("top",this.getTilePosition(Ht,rt)),it._setStyle("height",ut(this.getTileSize(Ht,it.rowspan)))}reset(it){it._tiles&&it._tiles.forEach(rt=>{rt._setStyle("top",null),rt._setStyle("height",null)})}}function ut(dt){return`calc(${dt})`}function tt(dt){return dt.match(/([A-Za-z%]+)$/)?dt:`${dt}px`}let ot=(()=>{class dt{constructor(rt,Gt){this._element=rt,this._dir=Gt,this._gutter="1px"}get cols(){return this._cols}set cols(rt){this._cols=Math.max(1,Math.round((0,e.su)(rt)))}get gutterSize(){return this._gutter}set gutterSize(rt){this._gutter=`${null==rt?"":rt}`}get rowHeight(){return this._rowHeight}set rowHeight(rt){const Gt=`${null==rt?"":rt}`;Gt!==this._rowHeight&&(this._rowHeight=Gt,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(rt){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===rt?new yt:rt&&rt.indexOf(":")>-1?new xt(rt):new Ct(rt)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new _);const rt=this._tileCoordinator,Gt=this._tiles.filter(Ht=>!Ht._gridList||Ht._gridList===this),bt=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,Gt),this._tileStyler.init(this.gutterSize,rt,this.cols,bt),Gt.forEach((Ht,ce)=>{const Ye=rt.positions[ce];this._tileStyler.setStyle(Ht,Ye.row,Ye.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(rt){rt&&(this._element.nativeElement.style[rt[0]]=rt[1])}}return dt.\u0275fac=function(rt){return new(rt||dt)(b.Y36(b.SBq),b.Y36(t.Is,8))},dt.\u0275cmp=b.Xpm({type:dt,selectors:[["mat-grid-list"]],contentQueries:function(rt,Gt,bt){if(1&rt&&b.Suo(bt,U,5),2&rt){let Ht;b.iGM(Ht=b.CRH())&&(Gt._tiles=Ht)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(rt,Gt){2&rt&&b.uIk("cols",Gt.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[b._Bn([{provide:M,useExisting:dt}])],ngContentSelectors:n,decls:2,vars:0,template:function(rt,Gt){1&rt&&(b.F$t(),b.TgZ(0,"div"),b.Hsn(1),b.qZA())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n"],encapsulation:2,changeDetection:0}),dt})(),Lt=(()=>{class dt{}return dt.\u0275fac=function(rt){return new(rt||dt)},dt.\u0275mod=b.oAB({type:dt}),dt.\u0275inj=b.cJS({imports:[[p.uc,p.BQ],p.uc,p.BQ]}),dt})()},63874:(k,B,f)=>{"use strict";f.d(B,{Hw:()=>vi,Ps:()=>qe});var b=f(5e3),p=f(90508),e=f(63191),t=f(69808),n=f(79307),o=f(30576),c=f(39646),_=f(4128),w=f(50727),M=f(18505),U=f(54004),V=f(70262),H=f(28746),$=f(13099),pt=f(95698),nt=f(40520),st=f(22313);const Ct=["*"];let xt;function ut(Ne){var oi;return(null===(oi=function(){if(void 0===xt&&(xt=null,"undefined"!=typeof window)){const Ne=window;void 0!==Ne.trustedTypes&&(xt=Ne.trustedTypes.createPolicy("angular#components",{createHTML:oi=>oi}))}return xt}())||void 0===oi?void 0:oi.createHTML(Ne))||Ne}function tt(Ne){return Error(`Unable to find icon with the name "${Ne}"`)}function ot(Ne){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Ne}".`)}function Lt(Ne){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Ne}".`)}class at{constructor(oi,Ft,_e){this.url=oi,this.svgText=Ft,this.options=_e}}let dt=(()=>{class Ne{constructor(Ft,_e,Xt,Jt){this._httpClient=Ft,this._sanitizer=_e,this._errorHandler=Jt,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=Xt}addSvgIcon(Ft,_e,Xt){return this.addSvgIconInNamespace("",Ft,_e,Xt)}addSvgIconLiteral(Ft,_e,Xt){return this.addSvgIconLiteralInNamespace("",Ft,_e,Xt)}addSvgIconInNamespace(Ft,_e,Xt,Jt){return this._addSvgIconConfig(Ft,_e,new at(Xt,null,Jt))}addSvgIconResolver(Ft){return this._resolvers.push(Ft),this}addSvgIconLiteralInNamespace(Ft,_e,Xt,Jt){const Rt=this._sanitizer.sanitize(b.q3G.HTML,Xt);if(!Rt)throw Lt(Xt);const Pt=ut(Rt);return this._addSvgIconConfig(Ft,_e,new at("",Pt,Jt))}addSvgIconSet(Ft,_e){return this.addSvgIconSetInNamespace("",Ft,_e)}addSvgIconSetLiteral(Ft,_e){return this.addSvgIconSetLiteralInNamespace("",Ft,_e)}addSvgIconSetInNamespace(Ft,_e,Xt){return this._addSvgIconSetConfig(Ft,new at(_e,null,Xt))}addSvgIconSetLiteralInNamespace(Ft,_e,Xt){const Jt=this._sanitizer.sanitize(b.q3G.HTML,_e);if(!Jt)throw Lt(_e);const Rt=ut(Jt);return this._addSvgIconSetConfig(Ft,new at("",Rt,Xt))}registerFontClassAlias(Ft,_e=Ft){return this._fontCssClassesByAlias.set(Ft,_e),this}classNameForFontAlias(Ft){return this._fontCssClassesByAlias.get(Ft)||Ft}setDefaultFontSetClass(Ft){return this._defaultFontSetClass=Ft,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(Ft){const _e=this._sanitizer.sanitize(b.q3G.RESOURCE_URL,Ft);if(!_e)throw ot(Ft);const Xt=this._cachedIconsByUrl.get(_e);return Xt?(0,c.of)(Gt(Xt)):this._loadSvgIconFromConfig(new at(Ft,null)).pipe((0,M.b)(Jt=>this._cachedIconsByUrl.set(_e,Jt)),(0,U.U)(Jt=>Gt(Jt)))}getNamedSvgIcon(Ft,_e=""){const Xt=bt(_e,Ft);let Jt=this._svgIconConfigs.get(Xt);if(Jt)return this._getSvgFromConfig(Jt);if(Jt=this._getIconConfigFromResolvers(_e,Ft),Jt)return this._svgIconConfigs.set(Xt,Jt),this._getSvgFromConfig(Jt);const Rt=this._iconSetConfigs.get(_e);return Rt?this._getSvgFromIconSetConfigs(Ft,Rt):function(Ne,oi){const Ft=(0,o.m)(Ne)?Ne:()=>Ne,_e=Xt=>Xt.error(Ft());return new n.y(_e)}(tt(Xt))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(Ft){return Ft.svgText?(0,c.of)(Gt(this._svgElementFromConfig(Ft))):this._loadSvgIconFromConfig(Ft).pipe((0,U.U)(_e=>Gt(_e)))}_getSvgFromIconSetConfigs(Ft,_e){const Xt=this._extractIconWithNameFromAnySet(Ft,_e);if(Xt)return(0,c.of)(Xt);const Jt=_e.filter(Rt=>!Rt.svgText).map(Rt=>this._loadSvgIconSetFromConfig(Rt).pipe((0,V.K)(Pt=>{const ze=`Loading icon set URL: ${this._sanitizer.sanitize(b.q3G.RESOURCE_URL,Rt.url)} failed: ${Pt.message}`;return this._errorHandler.handleError(new Error(ze)),(0,c.of)(null)})));return(0,_.D)(Jt).pipe((0,U.U)(()=>{const Rt=this._extractIconWithNameFromAnySet(Ft,_e);if(!Rt)throw tt(Ft);return Rt}))}_extractIconWithNameFromAnySet(Ft,_e){for(let Xt=_e.length-1;Xt>=0;Xt--){const Jt=_e[Xt];if(Jt.svgText&&Jt.svgText.toString().indexOf(Ft)>-1){const Rt=this._svgElementFromConfig(Jt),Pt=this._extractSvgIconFromSet(Rt,Ft,Jt.options);if(Pt)return Pt}}return null}_loadSvgIconFromConfig(Ft){return this._fetchIcon(Ft).pipe((0,M.b)(_e=>Ft.svgText=_e),(0,U.U)(()=>this._svgElementFromConfig(Ft)))}_loadSvgIconSetFromConfig(Ft){return Ft.svgText?(0,c.of)(null):this._fetchIcon(Ft).pipe((0,M.b)(_e=>Ft.svgText=_e))}_extractSvgIconFromSet(Ft,_e,Xt){const Jt=Ft.querySelector(`[id="${_e}"]`);if(!Jt)return null;const Rt=Jt.cloneNode(!0);if(Rt.removeAttribute("id"),"svg"===Rt.nodeName.toLowerCase())return this._setSvgAttributes(Rt,Xt);if("symbol"===Rt.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(Rt),Xt);const Pt=this._svgElementFromString(ut("<svg></svg>"));return Pt.appendChild(Rt),this._setSvgAttributes(Pt,Xt)}_svgElementFromString(Ft){const _e=this._document.createElement("DIV");_e.innerHTML=Ft;const Xt=_e.querySelector("svg");if(!Xt)throw Error("<svg> tag not found");return Xt}_toSvgElement(Ft){const _e=this._svgElementFromString(ut("<svg></svg>")),Xt=Ft.attributes;for(let Jt=0;Jt<Xt.length;Jt++){const{name:Rt,value:Pt}=Xt[Jt];"id"!==Rt&&_e.setAttribute(Rt,Pt)}for(let Jt=0;Jt<Ft.childNodes.length;Jt++)Ft.childNodes[Jt].nodeType===this._document.ELEMENT_NODE&&_e.appendChild(Ft.childNodes[Jt].cloneNode(!0));return _e}_setSvgAttributes(Ft,_e){return Ft.setAttribute("fit",""),Ft.setAttribute("height","100%"),Ft.setAttribute("width","100%"),Ft.setAttribute("preserveAspectRatio","xMidYMid meet"),Ft.setAttribute("focusable","false"),_e&&_e.viewBox&&Ft.setAttribute("viewBox",_e.viewBox),Ft}_fetchIcon(Ft){var _e;const{url:Xt,options:Jt}=Ft,Rt=null!==(_e=null==Jt?void 0:Jt.withCredentials)&&void 0!==_e&&_e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==Xt)throw Error(`Cannot fetch icon from URL "${Xt}".`);const Pt=this._sanitizer.sanitize(b.q3G.RESOURCE_URL,Xt);if(!Pt)throw ot(Xt);const he=this._inProgressUrlFetches.get(Pt);if(he)return he;const ze=this._httpClient.get(Pt,{responseType:"text",withCredentials:Rt}).pipe((0,U.U)(le=>ut(le)),(0,H.x)(()=>this._inProgressUrlFetches.delete(Pt)),(0,$.B)());return this._inProgressUrlFetches.set(Pt,ze),ze}_addSvgIconConfig(Ft,_e,Xt){return this._svgIconConfigs.set(bt(Ft,_e),Xt),this}_addSvgIconSetConfig(Ft,_e){const Xt=this._iconSetConfigs.get(Ft);return Xt?Xt.push(_e):this._iconSetConfigs.set(Ft,[_e]),this}_svgElementFromConfig(Ft){if(!Ft.svgElement){const _e=this._svgElementFromString(Ft.svgText);this._setSvgAttributes(_e,Ft.options),Ft.svgElement=_e}return Ft.svgElement}_getIconConfigFromResolvers(Ft,_e){for(let Xt=0;Xt<this._resolvers.length;Xt++){const Jt=this._resolvers[Xt](_e,Ft);if(Jt)return Ht(Jt)?new at(Jt.url,null,Jt.options):new at(Jt,null)}}}return Ne.\u0275fac=function(Ft){return new(Ft||Ne)(b.LFG(nt.eN,8),b.LFG(st.H7),b.LFG(t.K0,8),b.LFG(b.qLn))},Ne.\u0275prov=b.Yz7({token:Ne,factory:Ne.\u0275fac,providedIn:"root"}),Ne})();function Gt(Ne){return Ne.cloneNode(!0)}function bt(Ne,oi){return Ne+":"+oi}function Ht(Ne){return!(!Ne.url||!Ne.options)}const ce=(0,p.pj)(class{constructor(Ne){this._elementRef=Ne}}),Ye=new b.OlP("mat-icon-location",{providedIn:"root",factory:function(){const Ne=(0,b.f3M)(t.K0),oi=Ne?Ne.location:null;return{getPathname:()=>oi?oi.pathname+oi.search:""}}}),Be=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],He=Be.map(Ne=>`[${Ne}]`).join(", "),Ke=/^url\(['"]?#(.*?)['"]?\)$/;let vi=(()=>{class Ne extends ce{constructor(Ft,_e,Xt,Jt,Rt){super(Ft),this._iconRegistry=_e,this._location=Jt,this._errorHandler=Rt,this._inline=!1,this._currentIconFetch=w.w0.EMPTY,Xt||Ft.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(Ft){this._inline=(0,e.Ig)(Ft)}get svgIcon(){return this._svgIcon}set svgIcon(Ft){Ft!==this._svgIcon&&(Ft?this._updateSvgIcon(Ft):this._svgIcon&&this._clearSvgElement(),this._svgIcon=Ft)}get fontSet(){return this._fontSet}set fontSet(Ft){const _e=this._cleanupFontValue(Ft);_e!==this._fontSet&&(this._fontSet=_e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(Ft){const _e=this._cleanupFontValue(Ft);_e!==this._fontIcon&&(this._fontIcon=_e,this._updateFontIconClasses())}_splitIconName(Ft){if(!Ft)return["",""];const _e=Ft.split(":");switch(_e.length){case 1:return["",_e[0]];case 2:return _e;default:throw Error(`Invalid icon name: "${Ft}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const Ft=this._elementsWithExternalReferences;if(Ft&&Ft.size){const _e=this._location.getPathname();_e!==this._previousPath&&(this._previousPath=_e,this._prependPathToReferences(_e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(Ft){this._clearSvgElement();const _e=Ft.querySelectorAll("style");for(let Jt=0;Jt<_e.length;Jt++)_e[Jt].textContent+=" ";const Xt=this._location.getPathname();this._previousPath=Xt,this._cacheChildrenWithExternalReferences(Ft),this._prependPathToReferences(Xt),this._elementRef.nativeElement.appendChild(Ft)}_clearSvgElement(){const Ft=this._elementRef.nativeElement;let _e=Ft.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();_e--;){const Xt=Ft.childNodes[_e];(1!==Xt.nodeType||"svg"===Xt.nodeName.toLowerCase())&&Xt.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const Ft=this._elementRef.nativeElement,_e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();_e!=this._previousFontSetClass&&(this._previousFontSetClass&&Ft.classList.remove(this._previousFontSetClass),_e&&Ft.classList.add(_e),this._previousFontSetClass=_e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&Ft.classList.remove(this._previousFontIconClass),this.fontIcon&&Ft.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(Ft){return"string"==typeof Ft?Ft.trim().split(" ")[0]:Ft}_prependPathToReferences(Ft){const _e=this._elementsWithExternalReferences;_e&&_e.forEach((Xt,Jt)=>{Xt.forEach(Rt=>{Jt.setAttribute(Rt.name,`url('${Ft}#${Rt.value}')`)})})}_cacheChildrenWithExternalReferences(Ft){const _e=Ft.querySelectorAll(He),Xt=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let Jt=0;Jt<_e.length;Jt++)Be.forEach(Rt=>{const Pt=_e[Jt],he=Pt.getAttribute(Rt),ze=he?he.match(Ke):null;if(ze){let le=Xt.get(Pt);le||(le=[],Xt.set(Pt,le)),le.push({name:Rt,value:ze[1]})}})}_updateSvgIcon(Ft){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),Ft){const[_e,Xt]=this._splitIconName(Ft);_e&&(this._svgNamespace=_e),Xt&&(this._svgName=Xt),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Xt,_e).pipe((0,pt.q)(1)).subscribe(Jt=>this._setSvgElement(Jt),Jt=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${_e}:${Xt}! ${Jt.message}`))})}}}return Ne.\u0275fac=function(Ft){return new(Ft||Ne)(b.Y36(b.SBq),b.Y36(dt),b.$8M("aria-hidden"),b.Y36(Ye),b.Y36(b.qLn))},Ne.\u0275cmp=b.Xpm({type:Ne,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(Ft,_e){2&Ft&&(b.uIk("data-mat-icon-type",_e._usingFontIcon()?"font":"svg")("data-mat-icon-name",_e._svgName||_e.fontIcon)("data-mat-icon-namespace",_e._svgNamespace||_e.fontSet),b.ekj("mat-icon-inline",_e.inline)("mat-icon-no-color","primary"!==_e.color&&"accent"!==_e.color&&"warn"!==_e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[b.qOj],ngContentSelectors:Ct,decls:1,vars:0,template:function(Ft,_e){1&Ft&&(b.F$t(),b.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),Ne})(),qe=(()=>{class Ne{}return Ne.\u0275fac=function(Ft){return new(Ft||Ne)},Ne.\u0275mod=b.oAB({type:Ne}),Ne.\u0275inj=b.cJS({imports:[[p.BQ],p.BQ]}),Ne})()},77531:(k,B,f)=>{"use strict";f.d(B,{Jk:()=>$,Nt:()=>Ct,c:()=>xt});var b=f(63191),p=f(70925),e=f(5e3),t=f(93075),n=f(90508),o=f(67322),s=f(77579),c=f(60515);const _=(0,p.i$)({passive:!0});let w=(()=>{class yt{constructor(tt,lt){this._platform=tt,this._ngZone=lt,this._monitoredElements=new Map}monitor(tt){if(!this._platform.isBrowser)return c.E;const lt=(0,b.fI)(tt),ot=this._monitoredElements.get(lt);if(ot)return ot.subject;const Lt=new s.x,at="cdk-text-field-autofilled",dt=it=>{"cdk-text-field-autofill-start"!==it.animationName||lt.classList.contains(at)?"cdk-text-field-autofill-end"===it.animationName&&lt.classList.contains(at)&&(lt.classList.remove(at),this._ngZone.run(()=>Lt.next({target:it.target,isAutofilled:!1}))):(lt.classList.add(at),this._ngZone.run(()=>Lt.next({target:it.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{lt.addEventListener("animationstart",dt,_),lt.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(lt,{subject:Lt,unlisten:()=>{lt.removeEventListener("animationstart",dt,_)}}),Lt}stopMonitoring(tt){const lt=(0,b.fI)(tt),ot=this._monitoredElements.get(lt);ot&&(ot.unlisten(),ot.subject.complete(),lt.classList.remove("cdk-text-field-autofill-monitored"),lt.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(lt))}ngOnDestroy(){this._monitoredElements.forEach((tt,lt)=>this.stopMonitoring(lt))}}return yt.\u0275fac=function(tt){return new(tt||yt)(e.LFG(p.t4),e.LFG(e.R0b))},yt.\u0275prov=e.Yz7({token:yt,factory:yt.\u0275fac,providedIn:"root"}),yt})(),V=(()=>{class yt{}return yt.\u0275fac=function(tt){return new(tt||yt)},yt.\u0275mod=e.oAB({type:yt}),yt.\u0275inj=e.cJS({imports:[[p.ud]]}),yt})();const $=new e.OlP("MAT_INPUT_VALUE_ACCESSOR"),pt=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let nt=0;const st=(0,n.FD)(class{constructor(yt,ut,tt,lt){this._defaultErrorStateMatcher=yt,this._parentForm=ut,this._parentFormGroup=tt,this.ngControl=lt}});let Ct=(()=>{class yt extends st{constructor(tt,lt,ot,Lt,at,dt,it,rt,Gt,bt){super(dt,Lt,at,ot),this._elementRef=tt,this._platform=lt,this._autofillMonitor=rt,this._formField=bt,this._uid="mat-input-"+nt++,this.focused=!1,this.stateChanges=new s.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(Ye=>(0,p.qK)().has(Ye));const Ht=this._elementRef.nativeElement,ce=Ht.nodeName.toLowerCase();this._inputValueAccessor=it||Ht,this._previousNativeValue=this.value,this.id=this.id,lt.IOS&&Gt.runOutsideAngular(()=>{tt.nativeElement.addEventListener("keyup",Ye=>{const de=Ye.target;!de.value&&0===de.selectionStart&&0===de.selectionEnd&&(de.setSelectionRange(1,1),de.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===ce,this._isTextarea="textarea"===ce,this._isInFormField=!!bt,this._isNativeSelect&&(this.controlType=Ht.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(tt){this._disabled=(0,b.Ig)(tt),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(tt){this._id=tt||this._uid}get required(){var tt,lt,ot,Lt;return null!==(Lt=null!==(tt=this._required)&&void 0!==tt?tt:null===(ot=null===(lt=this.ngControl)||void 0===lt?void 0:lt.control)||void 0===ot?void 0:ot.hasValidator(t.kI.required))&&void 0!==Lt&&Lt}set required(tt){this._required=(0,b.Ig)(tt)}get type(){return this._type}set type(tt){this._type=tt||"text",this._validateType(),!this._isTextarea&&(0,p.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(tt){tt!==this.value&&(this._inputValueAccessor.value=tt,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(tt){this._readonly=(0,b.Ig)(tt)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(tt=>{this.autofilled=tt.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(tt){this._elementRef.nativeElement.focus(tt)}_focusChanged(tt){tt!==this.focused&&(this.focused=tt,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var tt,lt;const ot=(null===(lt=null===(tt=this._formField)||void 0===tt?void 0:tt._hideControlPlaceholder)||void 0===lt?void 0:lt.call(tt))?null:this.placeholder;if(ot!==this._previousPlaceholder){const Lt=this._elementRef.nativeElement;this._previousPlaceholder=ot,ot?Lt.setAttribute("placeholder",ot):Lt.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const tt=this._elementRef.nativeElement.value;this._previousNativeValue!==tt&&(this._previousNativeValue=tt,this.stateChanges.next())}_validateType(){pt.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let tt=this._elementRef.nativeElement.validity;return tt&&tt.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const tt=this._elementRef.nativeElement,lt=tt.options[0];return this.focused||tt.multiple||!this.empty||!!(tt.selectedIndex>-1&&lt&&lt.label)}return this.focused||!this.empty}setDescribedByIds(tt){tt.length?this._elementRef.nativeElement.setAttribute("aria-describedby",tt.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const tt=this._elementRef.nativeElement;return this._isNativeSelect&&(tt.multiple||tt.size>1)}}return yt.\u0275fac=function(tt){return new(tt||yt)(e.Y36(e.SBq),e.Y36(p.t4),e.Y36(t.a5,10),e.Y36(t.F,8),e.Y36(t.sg,8),e.Y36(n.rD),e.Y36($,10),e.Y36(w),e.Y36(e.R0b),e.Y36(o.G_,8))},yt.\u0275dir=e.lG2({type:yt,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:11,hostBindings:function(tt,lt){1&tt&&e.NdJ("focus",function(){return lt._focusChanged(!0)})("blur",function(){return lt._focusChanged(!1)})("input",function(){return lt._onInput()}),2&tt&&(e.Ikx("disabled",lt.disabled)("required",lt.required),e.uIk("id",lt.id)("data-placeholder",lt.placeholder)("readonly",lt.readonly&&!lt._isNativeSelect||null)("aria-invalid",lt.empty&&lt.required?null:lt.errorState)("aria-required",lt.required),e.ekj("mat-input-server",lt._isServer)("mat-native-select-inline",lt._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[e._Bn([{provide:o.Eo,useExisting:yt}]),e.qOj,e.TTD]}),yt})(),xt=(()=>{class yt{}return yt.\u0275fac=function(tt){return new(tt||yt)},yt.\u0275mod=e.oAB({type:yt}),yt.\u0275inj=e.cJS({providers:[n.rD],imports:[[V,o.lN,n.BQ],V,o.lN]}),yt})()},92181:(k,B,f)=>{"use strict";f.d(B,{VK:()=>_e,Tx:()=>jt,p6:()=>le});var b=f(15664),p=f(63191),e=f(91159),t=f(5e3),n=f(77579),o=f(50727),s=f(56451),c=f(39646),_=f(53101),w=f(68675),M=f(63900),U=f(95698),V=f(39300),H=f(82722),$=f(91005),pt=f(41777),nt=f(99129),st=f(69808),Ct=f(90508),xt=f(91314),yt=f(70925),ut=f(50226),tt=f(30495);const lt=["mat-menu-item",""];function ot(Yt,ge){1&Yt&&(t.O4$(),t.TgZ(0,"svg",2),t._UZ(1,"polygon",3),t.qZA())}const Lt=["*"];function at(Yt,ge){if(1&Yt){const $t=t.EpF();t.TgZ(0,"div",0),t.NdJ("keydown",function(re){return t.CHM($t),t.oxw()._handleKeydown(re)})("click",function(){return t.CHM($t),t.oxw().closed.emit("click")})("@transformMenu.start",function(re){return t.CHM($t),t.oxw()._onAnimationStart(re)})("@transformMenu.done",function(re){return t.CHM($t),t.oxw()._onAnimationDone(re)}),t.TgZ(1,"div",1),t.Hsn(2),t.qZA(),t.qZA()}if(2&Yt){const $t=t.oxw();t.Q6J("id",$t.panelId)("ngClass",$t._classList)("@transformMenu",$t._panelAnimationState),t.uIk("aria-label",$t.ariaLabel||null)("aria-labelledby",$t.ariaLabelledby||null)("aria-describedby",$t.ariaDescribedby||null)}}const dt={transformMenu:(0,pt.X$)("transformMenu",[(0,pt.SB)("void",(0,pt.oB)({opacity:0,transform:"scale(0.8)"})),(0,pt.eR)("void => enter",(0,pt.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,pt.oB)({opacity:1,transform:"scale(1)"}))),(0,pt.eR)("* => void",(0,pt.jt)("100ms 25ms linear",(0,pt.oB)({opacity:0})))]),fadeInItems:(0,pt.X$)("fadeInItems",[(0,pt.SB)("showing",(0,pt.oB)({opacity:1})),(0,pt.eR)("void => *",[(0,pt.oB)({opacity:0}),(0,pt.jt)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Gt=new t.OlP("MatMenuContent"),He=new t.OlP("MAT_MENU_PANEL"),Ke=(0,Ct.Kr)((0,Ct.Id)(class{}));let vi=(()=>{class Yt extends Ke{constructor($t,oe,re,Et,kt){super(),this._elementRef=$t,this._focusMonitor=re,this._parentMenu=Et,this._changeDetectorRef=kt,this.role="menuitem",this._hovered=new n.x,this._focused=new n.x,this._highlighted=!1,this._triggersSubmenu=!1,Et&&Et.addItem&&Et.addItem(this)}focus($t,oe){this._focusMonitor&&$t?this._focusMonitor.focusVia(this._getHostElement(),$t,oe):this._getHostElement().focus(oe),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled($t){this.disabled&&($t.preventDefault(),$t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var $t;const oe=this._elementRef.nativeElement.cloneNode(!0),re=oe.querySelectorAll("mat-icon, .material-icons");for(let Et=0;Et<re.length;Et++)re[Et].remove();return(null===($t=oe.textContent)||void 0===$t?void 0:$t.trim())||""}_setHighlighted($t){var oe;this._highlighted=$t,null===(oe=this._changeDetectorRef)||void 0===oe||oe.markForCheck()}}return Yt.\u0275fac=function($t){return new($t||Yt)(t.Y36(t.SBq),t.Y36(st.K0),t.Y36(b.tE),t.Y36(He,8),t.Y36(t.sBO))},Yt.\u0275cmp=t.Xpm({type:Yt,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function($t,oe){1&$t&&t.NdJ("click",function(Et){return oe._checkDisabled(Et)})("mouseenter",function(){return oe._handleMouseEnter()}),2&$t&&(t.uIk("role",oe.role)("tabindex",oe._getTabIndex())("aria-disabled",oe.disabled.toString())("disabled",oe.disabled||null),t.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",oe._highlighted)("mat-menu-item-submenu-trigger",oe._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[t.qOj],attrs:lt,ngContentSelectors:Lt,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function($t,oe){1&$t&&(t.F$t(),t.Hsn(0),t._UZ(1,"div",0),t.YNc(2,ot,2,0,"svg",1)),2&$t&&(t.xp6(1),t.Q6J("matRippleDisabled",oe.disableRipple||oe.disabled)("matRippleTrigger",oe._getHostElement()),t.xp6(1),t.Q6J("ngIf",oe._triggersSubmenu))},directives:[Ct.wG,st.O5],encapsulation:2,changeDetection:0}),Yt})();const qe=new t.OlP("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let oi=0,Ft=(()=>{class Yt{constructor($t,oe,re){this._elementRef=$t,this._ngZone=oe,this._defaultOptions=re,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new t.n_E,this._tabSubscription=o.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new n.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new t.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+oi++}get xPosition(){return this._xPosition}set xPosition($t){this._xPosition=$t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition($t){this._yPosition=$t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger($t){this._overlapTrigger=(0,p.Ig)($t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop($t){this._hasBackdrop=(0,p.Ig)($t)}set panelClass($t){const oe=this._previousPanelClass;oe&&oe.length&&oe.split(" ").forEach(re=>{this._classList[re]=!1}),this._previousPanelClass=$t,$t&&$t.length&&($t.split(" ").forEach(re=>{this._classList[re]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList($t){this.panelClass=$t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new b.Em(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,w.O)(this._directDescendantItems),(0,M.w)($t=>(0,s.T)(...$t.map(oe=>oe._focused)))).subscribe($t=>this._keyManager.updateActiveItem($t))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe((0,w.O)(this._directDescendantItems),(0,M.w)(oe=>(0,s.T)(...oe.map(re=>re._hovered))))}addItem($t){}removeItem($t){}_handleKeydown($t){const oe=$t.keyCode,re=this._keyManager;switch(oe){case e.hY:(0,e.Vb)($t)||($t.preventDefault(),this.closed.emit("keydown"));break;case e.oh:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case e.SV:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(oe===e.LH||oe===e.JH)&&re.setFocusOrigin("keyboard"),re.onKeydown($t)}}focusFirstItem($t="program"){this.lazyContent?this._ngZone.onStable.pipe((0,U.q)(1)).subscribe(()=>this._focusFirstItem($t)):this._focusFirstItem($t)}_focusFirstItem($t){const oe=this._keyManager;if(oe.setFocusOrigin($t).setFirstItemActive(),!oe.activeItem&&this._directDescendantItems.length){let re=this._directDescendantItems.first._getHostElement().parentElement;for(;re;){if("menu"===re.getAttribute("role")){re.focus();break}re=re.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation($t){const oe=Math.min(this._baseElevation+$t,24),re=`${this._elevationPrefix}${oe}`,Et=Object.keys(this._classList).find(kt=>kt.startsWith(this._elevationPrefix));(!Et||Et===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[re]=!0,this._previousElevation=re)}setPositionClasses($t=this.xPosition,oe=this.yPosition){const re=this._classList;re["mat-menu-before"]="before"===$t,re["mat-menu-after"]="after"===$t,re["mat-menu-above"]="above"===oe,re["mat-menu-below"]="below"===oe}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone($t){this._animationDone.next($t),this._isAnimating=!1}_onAnimationStart($t){this._isAnimating=!0,"enter"===$t.toState&&0===this._keyManager.activeItemIndex&&($t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,w.O)(this._allItems)).subscribe($t=>{this._directDescendantItems.reset($t.filter(oe=>oe._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return Yt.\u0275fac=function($t){return new($t||Yt)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(qe))},Yt.\u0275dir=t.lG2({type:Yt,contentQueries:function($t,oe,re){if(1&$t&&(t.Suo(re,Gt,5),t.Suo(re,vi,5),t.Suo(re,vi,4)),2&$t){let Et;t.iGM(Et=t.CRH())&&(oe.lazyContent=Et.first),t.iGM(Et=t.CRH())&&(oe._allItems=Et),t.iGM(Et=t.CRH())&&(oe.items=Et)}},viewQuery:function($t,oe){if(1&$t&&t.Gf(t.Rgc,5),2&$t){let re;t.iGM(re=t.CRH())&&(oe.templateRef=re.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),Yt})(),_e=(()=>{class Yt extends Ft{constructor($t,oe,re){super($t,oe,re),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return Yt.\u0275fac=function($t){return new($t||Yt)(t.Y36(t.SBq),t.Y36(t.R0b),t.Y36(qe))},Yt.\u0275cmp=t.Xpm({type:Yt,selectors:[["mat-menu"]],hostVars:3,hostBindings:function($t,oe){2&$t&&t.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[t._Bn([{provide:He,useExisting:Yt}]),t.qOj],ngContentSelectors:Lt,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function($t,oe){1&$t&&(t.F$t(),t.YNc(0,at,3,6,"ng-template"))},directives:[st.mk],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[dt.transformMenu,dt.fadeInItems]},changeDetection:0}),Yt})();const Xt=new t.OlP("mat-menu-scroll-strategy"),Rt={provide:Xt,deps:[xt.aV],useFactory:function(Yt){return()=>Yt.scrollStrategies.reposition()}},he=(0,yt.i$)({passive:!0});let ze=(()=>{class Yt{constructor($t,oe,re,Et,kt,we,Ae,ci){this._overlay=$t,this._element=oe,this._viewContainerRef=re,this._menuItemInstance=we,this._dir=Ae,this._focusMonitor=ci,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=o.w0.EMPTY,this._hoverSubscription=o.w0.EMPTY,this._menuCloseSubscription=o.w0.EMPTY,this._handleTouchStart=Ze=>{(0,b.yG)(Ze)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new t.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new t.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=Et,this._parentMaterialMenu=kt instanceof Ft?kt:void 0,oe.nativeElement.addEventListener("touchstart",this._handleTouchStart,he),we&&(we._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor($t){this.menu=$t}get menu(){return this._menu}set menu($t){$t!==this._menu&&(this._menu=$t,this._menuCloseSubscription.unsubscribe(),$t&&(this._menuCloseSubscription=$t.close.subscribe(oe=>{this._destroyMenu(oe),("click"===oe||"tab"===oe)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(oe)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,he),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const $t=this._createOverlay(),oe=$t.getConfig();this._setPosition(oe.positionStrategy),oe.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,$t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Ft&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus($t,oe){this._focusMonitor&&$t?this._focusMonitor.focusVia(this._element,$t,oe):this._element.nativeElement.focus(oe)}updatePosition(){var $t;null===($t=this._overlayRef)||void 0===$t||$t.updatePosition()}_destroyMenu($t){if(!this._overlayRef||!this.menuOpen)return;const oe=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===$t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,oe instanceof Ft?(oe._resetAnimation(),oe.lazyContent?oe._animationDone.pipe((0,V.h)(re=>"void"===re.toState),(0,U.q)(1),(0,H.R)(oe.lazyContent._attached)).subscribe({next:()=>oe.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),oe.lazyContent&&oe.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let $t=0,oe=this.menu.parentMenu;for(;oe;)$t++,oe=oe.parentMenu;this.menu.setElevation($t)}}_setIsMenuOpen($t){this._menuOpen=$t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted($t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const $t=this._getOverlayConfig();this._subscribeToPositions($t.positionStrategy),this._overlayRef=this._overlay.create($t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new xt.X_({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions($t){this.menu.setPositionClasses&&$t.positionChanges.subscribe(oe=>{this.menu.setPositionClasses("start"===oe.connectionPair.overlayX?"after":"before","top"===oe.connectionPair.overlayY?"below":"above")})}_setPosition($t){let[oe,re]="before"===this.menu.xPosition?["end","start"]:["start","end"],[Et,kt]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[we,Ae]=[Et,kt],[ci,Ze]=[oe,re],li=0;this.triggersSubmenu()?(Ze=oe="before"===this.menu.xPosition?"start":"end",re=ci="end"===oe?"start":"end",li="bottom"===Et?8:-8):this.menu.overlapTrigger||(we="top"===Et?"bottom":"top",Ae="top"===kt?"bottom":"top"),$t.withPositions([{originX:oe,originY:we,overlayX:ci,overlayY:Et,offsetY:li},{originX:re,originY:we,overlayX:Ze,overlayY:Et,offsetY:li},{originX:oe,originY:Ae,overlayX:ci,overlayY:kt,offsetY:-li},{originX:re,originY:Ae,overlayX:Ze,overlayY:kt,offsetY:-li}])}_menuClosingActions(){const $t=this._overlayRef.backdropClick(),oe=this._overlayRef.detachments(),re=this._parentMaterialMenu?this._parentMaterialMenu.closed:(0,c.of)(),Et=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,V.h)(kt=>kt!==this._menuItemInstance),(0,V.h)(()=>this._menuOpen)):(0,c.of)();return(0,s.T)($t,re,Et,oe)}_handleMousedown($t){(0,b.X6)($t)||(this._openedBy=0===$t.button?"mouse":void 0,this.triggersSubmenu()&&$t.preventDefault())}_handleKeydown($t){const oe=$t.keyCode;(oe===e.K5||oe===e.L_)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(oe===e.SV&&"ltr"===this.dir||oe===e.oh&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick($t){this.triggersSubmenu()?($t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,V.h)($t=>$t===this._menuItemInstance&&!$t.disabled),(0,$.g)(0,_.E)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Ft&&this.menu._isAnimating?this.menu._animationDone.pipe((0,U.q)(1),(0,$.g)(0,_.E),(0,H.R)(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new nt.UE(this.menu.templateRef,this._viewContainerRef)),this._portal}}return Yt.\u0275fac=function($t){return new($t||Yt)(t.Y36(xt.aV),t.Y36(t.SBq),t.Y36(t.s_b),t.Y36(Xt),t.Y36(He,8),t.Y36(vi,10),t.Y36(ut.Is,8),t.Y36(b.tE))},Yt.\u0275dir=t.lG2({type:Yt,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function($t,oe){1&$t&&t.NdJ("click",function(Et){return oe._handleClick(Et)})("mousedown",function(Et){return oe._handleMousedown(Et)})("keydown",function(Et){return oe._handleKeydown(Et)}),2&$t&&t.uIk("aria-expanded",oe.menuOpen||null)("aria-controls",oe.menuOpen?oe.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),Yt})(),le=(()=>{class Yt extends ze{}return Yt.\u0275fac=function(){let ge;return function(oe){return(ge||(ge=t.n5z(Yt)))(oe||Yt)}}(),Yt.\u0275dir=t.lG2({type:Yt,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[t.qOj]}),Yt})(),jt=(()=>{class Yt{}return Yt.\u0275fac=function($t){return new($t||Yt)},Yt.\u0275mod=t.oAB({type:Yt}),Yt.\u0275inj=t.cJS({providers:[Rt],imports:[[st.ez,Ct.BQ,Ct.si,xt.U8],tt.ZD,Ct.BQ]}),Yt})()},20773:(k,B,f)=>{"use strict";f.d(B,{Cq:()=>xt,$g:()=>Ct});var b=f(5e3),p=f(69808),e=f(90508),t=f(63191),n=f(70925),o=f(76360);function s(yt,ut){if(1&yt&&(b.O4$(),b._UZ(0,"circle",3)),2&yt){const tt=b.oxw();b.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+tt._spinnerAnimationLabel)("stroke-dashoffset",tt._getStrokeDashOffset(),"px")("stroke-dasharray",tt._getStrokeCircumference(),"px")("stroke-width",tt._getCircleStrokeWidth(),"%"),b.uIk("r",tt._getCircleRadius())}}function c(yt,ut){if(1&yt&&(b.O4$(),b._UZ(0,"circle",3)),2&yt){const tt=b.oxw();b.Udp("stroke-dashoffset",tt._getStrokeDashOffset(),"px")("stroke-dasharray",tt._getStrokeCircumference(),"px")("stroke-width",tt._getCircleStrokeWidth(),"%"),b.uIk("r",tt._getCircleRadius())}}function _(yt,ut){if(1&yt&&(b.O4$(),b._UZ(0,"circle",3)),2&yt){const tt=b.oxw();b.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+tt._spinnerAnimationLabel)("stroke-dashoffset",tt._getStrokeDashOffset(),"px")("stroke-dasharray",tt._getStrokeCircumference(),"px")("stroke-width",tt._getCircleStrokeWidth(),"%"),b.uIk("r",tt._getCircleRadius())}}function w(yt,ut){if(1&yt&&(b.O4$(),b._UZ(0,"circle",3)),2&yt){const tt=b.oxw();b.Udp("stroke-dashoffset",tt._getStrokeDashOffset(),"px")("stroke-dasharray",tt._getStrokeCircumference(),"px")("stroke-width",tt._getCircleStrokeWidth(),"%"),b.uIk("r",tt._getCircleRadius())}}const H=(0,e.pj)(class{constructor(yt){this._elementRef=yt}},"primary"),$=new b.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class st extends H{constructor(ut,tt,lt,ot,Lt){super(ut),this._document=lt,this._diameter=100,this._value=0,this.mode="determinate";const at=st._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),at.has(lt.head)||at.set(lt.head,new Set([100])),this._noopAnimations="NoopAnimations"===ot&&!!Lt&&!Lt._forceAnimations,Lt&&(Lt.diameter&&(this.diameter=Lt.diameter),Lt.strokeWidth&&(this.strokeWidth=Lt.strokeWidth))}get diameter(){return this._diameter}set diameter(ut){this._diameter=(0,t.su)(ut),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(ut){this._strokeWidth=(0,t.su)(ut)}get value(){return"determinate"===this.mode?this._value:0}set value(ut){this._value=Math.max(0,Math.min(100,(0,t.su)(ut)))}ngOnInit(){const ut=this._elementRef.nativeElement;this._styleRoot=(0,n.kV)(ut)||this._document.head,this._attachStyleNode(),ut.classList.add("mat-progress-spinner-indeterminate-animation")}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const ut=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${ut} ${ut}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const ut=this._styleRoot,tt=this._diameter,lt=st._diameters;let ot=lt.get(ut);if(!ot||!ot.has(tt)){const Lt=this._document.createElement("style");Lt.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),Lt.textContent=this._getAnimationText(),ut.appendChild(Lt),ot||(ot=new Set,lt.set(ut,ot)),ot.add(tt)}}_getAnimationText(){const ut=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*ut).replace(/END_VALUE/g,""+.2*ut).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}st._diameters=new WeakMap,st.\u0275fac=function(ut){return new(ut||st)(b.Y36(b.SBq),b.Y36(n.t4),b.Y36(p.K0,8),b.Y36(o.Qb,8),b.Y36($))},st.\u0275cmp=b.Xpm({type:st,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(ut,tt){2&ut&&(b.uIk("aria-valuemin","determinate"===tt.mode?0:null)("aria-valuemax","determinate"===tt.mode?100:null)("aria-valuenow","determinate"===tt.mode?tt.value:null)("mode",tt.mode),b.Udp("width",tt.diameter,"px")("height",tt.diameter,"px"),b.ekj("_mat-animation-noopable",tt._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[b.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(ut,tt){1&ut&&(b.O4$(),b.TgZ(0,"svg",0),b.YNc(1,s,1,9,"circle",1),b.YNc(2,c,1,7,"circle",2),b.qZA()),2&ut&&(b.Udp("width",tt.diameter,"px")("height",tt.diameter,"px"),b.Q6J("ngSwitch","indeterminate"===tt.mode),b.uIk("viewBox",tt._getViewBox()),b.xp6(1),b.Q6J("ngSwitchCase",!0),b.xp6(1),b.Q6J("ngSwitchCase",!1))},directives:[p.RF,p.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let Ct=(()=>{class yt extends st{constructor(tt,lt,ot,Lt,at){super(tt,lt,ot,Lt,at),this.mode="indeterminate"}}return yt.\u0275fac=function(tt){return new(tt||yt)(b.Y36(b.SBq),b.Y36(n.t4),b.Y36(p.K0,8),b.Y36(o.Qb,8),b.Y36($))},yt.\u0275cmp=b.Xpm({type:yt,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(tt,lt){2&tt&&(b.Udp("width",lt.diameter,"px")("height",lt.diameter,"px"),b.ekj("_mat-animation-noopable",lt._noopAnimations))},inputs:{color:"color"},features:[b.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(tt,lt){1&tt&&(b.O4$(),b.TgZ(0,"svg",0),b.YNc(1,_,1,9,"circle",1),b.YNc(2,w,1,7,"circle",2),b.qZA()),2&tt&&(b.Udp("width",lt.diameter,"px")("height",lt.diameter,"px"),b.Q6J("ngSwitch","indeterminate"===lt.mode),b.uIk("viewBox",lt._getViewBox()),b.xp6(1),b.Q6J("ngSwitchCase",!0),b.xp6(1),b.Q6J("ngSwitchCase",!1))},directives:[p.RF,p.n9],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0}),yt})(),xt=(()=>{class yt{}return yt.\u0275fac=function(tt){return new(tt||yt)},yt.\u0275mod=b.oAB({type:yt}),yt.\u0275inj=b.cJS({imports:[[e.BQ,p.ez],e.BQ]}),yt})()},57261:(k,B,f)=>{"use strict";f.d(B,{ux:()=>Lt,ZX:()=>tt});var b=f(91314),p=f(99129),e=f(69808),t=f(5e3),n=f(90508),o=f(47423),s=f(77579),c=f(95698),_=f(82722),w=f(41777),M=f(70925),U=f(95113),V=f(15664);function H(at,dt){if(1&at){const it=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"button",2),t.NdJ("click",function(){return t.CHM(it),t.oxw().action()}),t._uU(2),t.qZA(),t.qZA()}if(2&at){const it=t.oxw();t.xp6(2),t.Oqu(it.data.action)}}function $(at,dt){}const pt=new t.OlP("MatSnackBarData");class nt{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const st=Math.pow(2,31)-1;class Ct{constructor(dt,it){this._overlayRef=it,this._afterDismissed=new s.x,this._afterOpened=new s.x,this._onAction=new s.x,this._dismissedByAction=!1,this.containerInstance=dt,this.onAction().subscribe(()=>this.dismiss()),dt._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(dt){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(dt,st))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let xt=(()=>{class at{constructor(it,rt){this.snackBarRef=it,this.data=rt}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return at.\u0275fac=function(it){return new(it||at)(t.Y36(Ct),t.Y36(pt))},at.\u0275cmp=t.Xpm({type:at,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(it,rt){1&it&&(t.TgZ(0,"span"),t._uU(1),t.qZA(),t.YNc(2,H,3,1,"div",0)),2&it&&(t.xp6(1),t.Oqu(rt.data.message),t.xp6(1),t.Q6J("ngIf",rt.hasAction))},directives:[e.O5,o.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),at})();const yt={snackBarState:(0,w.X$)("state",[(0,w.SB)("void, hidden",(0,w.oB)({transform:"scale(0.8)",opacity:0})),(0,w.SB)("visible",(0,w.oB)({transform:"scale(1)",opacity:1})),(0,w.eR)("* => visible",(0,w.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,w.eR)("* => void, * => hidden",(0,w.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,w.oB)({opacity:0})))])};let ut=(()=>{class at extends p.en{constructor(it,rt,Gt,bt,Ht){super(),this._ngZone=it,this._elementRef=rt,this._changeDetectorRef=Gt,this._platform=bt,this.snackBarConfig=Ht,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new s.x,this._onExit=new s.x,this._onEnter=new s.x,this._animationState="void",this.attachDomPortal=ce=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(ce)),this._live="assertive"!==Ht.politeness||Ht.announcementMessage?"off"===Ht.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(it){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(it)}attachTemplatePortal(it){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(it)}onAnimationEnd(it){const{fromState:rt,toState:Gt}=it;if(("void"===Gt&&"void"!==rt||"hidden"===Gt)&&this._completeExit(),"visible"===Gt){const bt=this._onEnter;this._ngZone.run(()=>{bt.next(),bt.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,c.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const it=this._elementRef.nativeElement,rt=this.snackBarConfig.panelClass;rt&&(Array.isArray(rt)?rt.forEach(Gt=>it.classList.add(Gt)):it.classList.add(rt)),"center"===this.snackBarConfig.horizontalPosition&&it.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&it.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const it=this._elementRef.nativeElement.querySelector("[aria-hidden]"),rt=this._elementRef.nativeElement.querySelector("[aria-live]");if(it&&rt){let Gt=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&it.contains(document.activeElement)&&(Gt=document.activeElement),it.removeAttribute("aria-hidden"),rt.appendChild(it),null==Gt||Gt.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return at.\u0275fac=function(it){return new(it||at)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(M.t4),t.Y36(nt))},at.\u0275cmp=t.Xpm({type:at,selectors:[["snack-bar-container"]],viewQuery:function(it,rt){if(1&it&&t.Gf(p.Pl,7),2&it){let Gt;t.iGM(Gt=t.CRH())&&(rt._portalOutlet=Gt.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(it,rt){1&it&&t.WFA("@state.done",function(bt){return rt.onAnimationEnd(bt)}),2&it&&t.d8E("@state",rt._animationState)},features:[t.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(it,rt){1&it&&(t.TgZ(0,"div",0),t.YNc(1,$,0,0,"ng-template",1),t.qZA(),t._UZ(2,"div")),2&it&&(t.xp6(2),t.uIk("aria-live",rt._live)("role",rt._role))},directives:[p.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[yt.snackBarState]}}),at})(),tt=(()=>{class at{}return at.\u0275fac=function(it){return new(it||at)},at.\u0275mod=t.oAB({type:at}),at.\u0275inj=t.cJS({imports:[[b.U8,p.eL,e.ez,o.ot,n.BQ],n.BQ]}),at})();const lt=new t.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function(){return new nt}});let Lt=(()=>{class at{constructor(it,rt,Gt,bt,Ht,ce){this._overlay=it,this._live=rt,this._injector=Gt,this._breakpointObserver=bt,this._parentSnackBar=Ht,this._defaultConfig=ce,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=xt,this.snackBarContainerComponent=ut,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const it=this._parentSnackBar;return it?it._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(it){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=it:this._snackBarRefAtThisLevel=it}openFromComponent(it,rt){return this._attach(it,rt)}openFromTemplate(it,rt){return this._attach(it,rt)}open(it,rt="",Gt){const bt=Object.assign(Object.assign({},this._defaultConfig),Gt);return bt.data={message:it,action:rt},bt.announcementMessage===it&&(bt.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,bt)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(it,rt){const bt=t.zs3.create({parent:rt&&rt.viewContainerRef&&rt.viewContainerRef.injector||this._injector,providers:[{provide:nt,useValue:rt}]}),Ht=new p.C5(this.snackBarContainerComponent,rt.viewContainerRef,bt),ce=it.attach(Ht);return ce.instance.snackBarConfig=rt,ce.instance}_attach(it,rt){const Gt=Object.assign(Object.assign(Object.assign({},new nt),this._defaultConfig),rt),bt=this._createOverlay(Gt),Ht=this._attachSnackBarContainer(bt,Gt),ce=new Ct(Ht,bt);if(it instanceof t.Rgc){const Ye=new p.UE(it,null,{$implicit:Gt.data,snackBarRef:ce});ce.instance=Ht.attachTemplatePortal(Ye)}else{const Ye=this._createInjector(Gt,ce),de=new p.C5(it,void 0,Ye),Be=Ht.attachComponentPortal(de);ce.instance=Be.instance}return this._breakpointObserver.observe(U.u3.HandsetPortrait).pipe((0,_.R)(bt.detachments())).subscribe(Ye=>{bt.overlayElement.classList.toggle(this.handsetCssClass,Ye.matches)}),Gt.announcementMessage&&Ht._onAnnounce.subscribe(()=>{this._live.announce(Gt.announcementMessage,Gt.politeness)}),this._animateSnackBar(ce,Gt),this._openedSnackBarRef=ce,this._openedSnackBarRef}_animateSnackBar(it,rt){it.afterDismissed().subscribe(()=>{this._openedSnackBarRef==it&&(this._openedSnackBarRef=null),rt.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{it.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):it.containerInstance.enter(),rt.duration&&rt.duration>0&&it.afterOpened().subscribe(()=>it._dismissAfter(rt.duration))}_createOverlay(it){const rt=new b.X_;rt.direction=it.direction;let Gt=this._overlay.position().global();const bt="rtl"===it.direction,Ht="left"===it.horizontalPosition||"start"===it.horizontalPosition&&!bt||"end"===it.horizontalPosition&&bt,ce=!Ht&&"center"!==it.horizontalPosition;return Ht?Gt.left("0"):ce?Gt.right("0"):Gt.centerHorizontally(),"top"===it.verticalPosition?Gt.top("0"):Gt.bottom("0"),rt.positionStrategy=Gt,this._overlay.create(rt)}_createInjector(it,rt){return t.zs3.create({parent:it&&it.viewContainerRef&&it.viewContainerRef.injector||this._injector,providers:[{provide:Ct,useValue:rt},{provide:pt,useValue:it.data}]})}}return at.\u0275fac=function(it){return new(it||at)(t.LFG(b.aV),t.LFG(V.Kd),t.LFG(t.zs3),t.LFG(U.Yg),t.LFG(at,12),t.LFG(lt))},at.\u0275prov=t.Yz7({token:at,factory:at.\u0275fac,providedIn:tt}),at})()},53251:(k,B,f)=>{"use strict";f.d(B,{uX:()=>ze,SP:()=>We,uD:()=>Rt,Nh:()=>Pe});var b=f(15664),p=f(17144),e=f(99129),t=f(69808),n=f(5e3),o=f(90508),s=f(76360),c=f(77579),_=f(50727),w=f(54968),M=f(39646),U=f(56451),V=f(5963),H=f(41777),$=f(68675),pt=f(71884),nt=f(82722),st=f(50226),Ct=f(63191),xt=f(91159),yt=f(70925),ut=f(30495);function tt(ie,Mt){1&ie&&n.Hsn(0)}const lt=["*"];function ot(ie,Mt){}const Lt=function(ie){return{animationDuration:ie}},at=function(ie,Mt){return{value:ie,params:Mt}},dt=["tabListContainer"],it=["tabList"],rt=["tabListInner"],Gt=["nextPaginator"],bt=["previousPaginator"],Ht=["tabBodyWrapper"],ce=["tabHeader"];function Ye(ie,Mt){}function de(ie,Mt){if(1&ie&&n.YNc(0,Ye,0,0,"ng-template",9),2&ie){const ct=n.oxw().$implicit;n.Q6J("cdkPortalOutlet",ct.templateLabel)}}function Be(ie,Mt){if(1&ie&&n._uU(0),2&ie){const ct=n.oxw().$implicit;n.Oqu(ct.textLabel)}}function He(ie,Mt){if(1&ie){const ct=n.EpF();n.TgZ(0,"div",6),n.NdJ("click",function(){const te=n.CHM(ct),ve=te.$implicit,Ti=te.index,ki=n.oxw(),Zi=n.MAs(1);return ki._handleClick(ve,Zi,Ti)})("cdkFocusChange",function(te){const Ti=n.CHM(ct).index;return n.oxw()._tabFocusChanged(te,Ti)}),n.TgZ(1,"div",7),n.YNc(2,de,1,1,"ng-template",8),n.YNc(3,Be,1,1,"ng-template",8),n.qZA(),n.qZA()}if(2&ie){const ct=Mt.$implicit,It=Mt.index,te=n.oxw();n.ekj("mat-tab-label-active",te.selectedIndex==It),n.Q6J("id",te._getTabLabelId(It))("disabled",ct.disabled)("matRippleDisabled",ct.disabled||te.disableRipple),n.uIk("tabIndex",te._getTabIndex(ct,It))("aria-posinset",It+1)("aria-setsize",te._tabs.length)("aria-controls",te._getTabContentId(It))("aria-selected",te.selectedIndex==It)("aria-label",ct.ariaLabel||null)("aria-labelledby",!ct.ariaLabel&&ct.ariaLabelledby?ct.ariaLabelledby:null),n.xp6(2),n.Q6J("ngIf",ct.templateLabel),n.xp6(1),n.Q6J("ngIf",!ct.templateLabel)}}function Ke(ie,Mt){if(1&ie){const ct=n.EpF();n.TgZ(0,"mat-tab-body",10),n.NdJ("_onCentered",function(){return n.CHM(ct),n.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(te){return n.CHM(ct),n.oxw()._setTabBodyWrapperHeight(te)}),n.qZA()}if(2&ie){const ct=Mt.$implicit,It=Mt.index,te=n.oxw();n.ekj("mat-tab-body-active",te.selectedIndex===It),n.Q6J("id",te._getTabContentId(It))("content",ct.content)("position",ct.position)("origin",ct.origin)("animationDuration",te.animationDuration),n.uIk("tabindex",null!=te.contentTabIndex&&te.selectedIndex===It?te.contentTabIndex:null)("aria-labelledby",te._getTabLabelId(It))}}const qe=new n.OlP("MatInkBarPositioner",{providedIn:"root",factory:function(){return Mt=>({left:Mt?(Mt.offsetLeft||0)+"px":"0",width:Mt?(Mt.offsetWidth||0)+"px":"0"})}});let oi=(()=>{class ie{constructor(ct,It,te,ve){this._elementRef=ct,this._ngZone=It,this._inkBarPositioner=te,this._animationMode=ve}alignToElement(ct){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(ct))}):this._setStyles(ct)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(ct){const It=this._inkBarPositioner(ct),te=this._elementRef.nativeElement;te.style.left=It.left,te.style.width=It.width}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.SBq),n.Y36(n.R0b),n.Y36(qe),n.Y36(s.Qb,8))},ie.\u0275dir=n.lG2({type:ie,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(ct,It){2&ct&&n.ekj("_mat-animation-noopable","NoopAnimations"===It._animationMode)}}),ie})();const Ft=new n.OlP("MatTabContent"),Xt=new n.OlP("MatTabLabel"),Jt=new n.OlP("MAT_TAB");let Rt=(()=>{class ie extends e.ig{constructor(ct,It,te){super(ct,It),this._closestTab=te}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.Rgc),n.Y36(n.s_b),n.Y36(Jt,8))},ie.\u0275dir=n.lG2({type:ie,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[n._Bn([{provide:Xt,useExisting:ie}]),n.qOj]}),ie})();const Pt=(0,o.Id)(class{}),he=new n.OlP("MAT_TAB_GROUP");let ze=(()=>{class ie extends Pt{constructor(ct,It){super(),this._viewContainerRef=ct,this._closestTabGroup=It,this.textLabel="",this._contentPortal=null,this._stateChanges=new c.x,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(ct){this._setTemplateLabelInput(ct)}get content(){return this._contentPortal}ngOnChanges(ct){(ct.hasOwnProperty("textLabel")||ct.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new e.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(ct){ct&&ct._closestTab===this&&(this._templateLabel=ct)}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.s_b),n.Y36(he,8))},ie.\u0275cmp=n.Xpm({type:ie,selectors:[["mat-tab"]],contentQueries:function(ct,It,te){if(1&ct&&(n.Suo(te,Xt,5),n.Suo(te,Ft,7,n.Rgc)),2&ct){let ve;n.iGM(ve=n.CRH())&&(It.templateLabel=ve.first),n.iGM(ve=n.CRH())&&(It._explicitContent=ve.first)}},viewQuery:function(ct,It){if(1&ct&&n.Gf(n.Rgc,7),2&ct){let te;n.iGM(te=n.CRH())&&(It._implicitContent=te.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[n._Bn([{provide:Jt,useExisting:ie}]),n.qOj,n.TTD],ngContentSelectors:lt,decls:1,vars:0,template:function(ct,It){1&ct&&(n.F$t(),n.YNc(0,tt,1,0,"ng-template"))},encapsulation:2}),ie})();const le={translateTab:(0,H.X$)("translateTab",[(0,H.SB)("center, void, left-origin-center, right-origin-center",(0,H.oB)({transform:"none"})),(0,H.SB)("left",(0,H.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,H.SB)("right",(0,H.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,H.eR)("* => left, * => right, left => center, right => center",(0,H.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,H.eR)("void => left-origin-center",[(0,H.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,H.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,H.eR)("void => right-origin-center",[(0,H.oB)({transform:"translate3d(100%, 0, 0)"}),(0,H.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let jt=(()=>{class ie extends e.Pl{constructor(ct,It,te,ve){super(ct,It,ve),this._host=te,this._centeringSub=_.w0.EMPTY,this._leavingSub=_.w0.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,$.O)(this._host._isCenterPosition(this._host._position))).subscribe(ct=>{ct&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n._Vd),n.Y36(n.s_b),n.Y36((0,n.Gpc)(()=>ge)),n.Y36(t.K0))},ie.\u0275dir=n.lG2({type:ie,selectors:[["","matTabBodyHost",""]],features:[n.qOj]}),ie})(),Yt=(()=>{class ie{constructor(ct,It,te){this._elementRef=ct,this._dir=It,this._dirChangeSubscription=_.w0.EMPTY,this._translateTabComplete=new c.x,this._onCentering=new n.vpe,this._beforeCentering=new n.vpe,this._afterLeavingCenter=new n.vpe,this._onCentered=new n.vpe(!0),this.animationDuration="500ms",It&&(this._dirChangeSubscription=It.change.subscribe(ve=>{this._computePositionAnimationState(ve),te.markForCheck()})),this._translateTabComplete.pipe((0,pt.x)((ve,Ti)=>ve.fromState===Ti.fromState&&ve.toState===Ti.toState)).subscribe(ve=>{this._isCenterPosition(ve.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(ve.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(ct){this._positionIndex=ct,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(ct){const It=this._isCenterPosition(ct.toState);this._beforeCentering.emit(It),It&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(ct){return"center"==ct||"left-origin-center"==ct||"right-origin-center"==ct}_computePositionAnimationState(ct=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==ct?"left":"right":this._positionIndex>0?"ltr"==ct?"right":"left":"center"}_computePositionFromOrigin(ct){const It=this._getLayoutDirection();return"ltr"==It&&ct<=0||"rtl"==It&&ct>0?"left-origin-center":"right-origin-center"}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.SBq),n.Y36(st.Is,8),n.Y36(n.sBO))},ie.\u0275dir=n.lG2({type:ie,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),ie})(),ge=(()=>{class ie extends Yt{constructor(ct,It,te){super(ct,It,te)}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.SBq),n.Y36(st.Is,8),n.Y36(n.sBO))},ie.\u0275cmp=n.Xpm({type:ie,selectors:[["mat-tab-body"]],viewQuery:function(ct,It){if(1&ct&&n.Gf(e.Pl,5),2&ct){let te;n.iGM(te=n.CRH())&&(It._portalHost=te.first)}},hostAttrs:[1,"mat-tab-body"],features:[n.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(ct,It){1&ct&&(n.TgZ(0,"div",0,1),n.NdJ("@translateTab.start",function(ve){return It._onTranslateTabStarted(ve)})("@translateTab.done",function(ve){return It._translateTabComplete.next(ve)}),n.YNc(2,ot,0,0,"ng-template",2),n.qZA()),2&ct&&n.Q6J("@translateTab",n.WLB(3,at,It._position,n.VKq(1,Lt,It.animationDuration)))},directives:[jt],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[le.translateTab]}}),ie})();const $t=new n.OlP("MAT_TABS_CONFIG"),oe=(0,o.Id)(class{});let re=(()=>{class ie extends oe{constructor(ct){super(),this.elementRef=ct}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.SBq))},ie.\u0275dir=n.lG2({type:ie,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(ct,It){2&ct&&(n.uIk("aria-disabled",!!It.disabled),n.ekj("mat-tab-disabled",It.disabled))},inputs:{disabled:"disabled"},features:[n.qOj]}),ie})();const Et=(0,yt.i$)({passive:!0});let ci=(()=>{class ie{constructor(ct,It,te,ve,Ti,ki,Zi){this._elementRef=ct,this._changeDetectorRef=It,this._viewportRuler=te,this._dir=ve,this._ngZone=Ti,this._platform=ki,this._animationMode=Zi,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new c.x,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new c.x,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new n.vpe,this.indexFocused=new n.vpe,Ti.runOutsideAngular(()=>{(0,w.R)(ct.nativeElement,"mouseleave").pipe((0,nt.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(ct){ct=(0,Ct.su)(ct),this._selectedIndex!=ct&&(this._selectedIndexChanged=!0,this._selectedIndex=ct,this._keyManager&&this._keyManager.updateActiveItem(ct))}ngAfterViewInit(){(0,w.R)(this._previousPaginator.nativeElement,"touchstart",Et).pipe((0,nt.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,w.R)(this._nextPaginator.nativeElement,"touchstart",Et).pipe((0,nt.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const ct=this._dir?this._dir.change:(0,M.of)("ltr"),It=this._viewportRuler.change(150),te=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new b.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(te):te(),(0,U.T)(ct,It,this._items.changes).pipe((0,nt.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>Promise.resolve().then(te)),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,nt.R)(this._destroyed)).subscribe(ve=>{this.indexFocused.emit(ve),this._setTabFocus(ve)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(ct){if(!(0,xt.Vb)(ct))switch(ct.keyCode){case xt.K5:case xt.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(ct));break;default:this._keyManager.onKeydown(ct)}}_onContentChanges(){const ct=this._elementRef.nativeElement.textContent;ct!==this._currentTextContent&&(this._currentTextContent=ct||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(ct){!this._isValidIndex(ct)||this.focusIndex===ct||!this._keyManager||this._keyManager.setActiveItem(ct)}_isValidIndex(ct){if(!this._items)return!0;const It=this._items?this._items.toArray()[ct]:null;return!!It&&!It.disabled}_setTabFocus(ct){if(this._showPaginationControls&&this._scrollToLabel(ct),this._items&&this._items.length){this._items.toArray()[ct].focus();const It=this._tabListContainer.nativeElement;It.scrollLeft="ltr"==this._getLayoutDirection()?0:It.scrollWidth-It.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const ct=this.scrollDistance,It="ltr"===this._getLayoutDirection()?-ct:ct;this._tabList.nativeElement.style.transform=`translateX(${Math.round(It)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(ct){this._scrollTo(ct)}_scrollHeader(ct){return this._scrollTo(this._scrollDistance+("before"==ct?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(ct){this._stopInterval(),this._scrollHeader(ct)}_scrollToLabel(ct){if(this.disablePagination)return;const It=this._items?this._items.toArray()[ct]:null;if(!It)return;const te=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:ve,offsetWidth:Ti}=It.elementRef.nativeElement;let ki,Zi;"ltr"==this._getLayoutDirection()?(ki=ve,Zi=ki+Ti):(Zi=this._tabListInner.nativeElement.offsetWidth-ve,ki=Zi-Ti);const Sn=this.scrollDistance,$e=this.scrollDistance+te;ki<Sn?this.scrollDistance-=Sn-ki+60:Zi>$e&&(this.scrollDistance+=Zi-$e+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const ct=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;ct||(this.scrollDistance=0),ct!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=ct}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const ct=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,It=ct?ct.elementRef.nativeElement:null;It?this._inkBar.alignToElement(It):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(ct,It){It&&null!=It.button&&0!==It.button||(this._stopInterval(),(0,V.H)(650,100).pipe((0,nt.R)((0,U.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:te,distance:ve}=this._scrollHeader(ct);(0===ve||ve>=te)&&this._stopInterval()}))}_scrollTo(ct){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const It=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(It,ct)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:It,distance:this._scrollDistance}}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(ut.rL),n.Y36(st.Is,8),n.Y36(n.R0b),n.Y36(yt.t4),n.Y36(s.Qb,8))},ie.\u0275dir=n.lG2({type:ie,inputs:{disablePagination:"disablePagination"}}),ie})(),Ze=(()=>{class ie extends ci{constructor(ct,It,te,ve,Ti,ki,Zi){super(ct,It,te,ve,Ti,ki,Zi),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(ct){this._disableRipple=(0,Ct.Ig)(ct)}_itemSelected(ct){ct.preventDefault()}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(ut.rL),n.Y36(st.Is,8),n.Y36(n.R0b),n.Y36(yt.t4),n.Y36(s.Qb,8))},ie.\u0275dir=n.lG2({type:ie,inputs:{disableRipple:"disableRipple"},features:[n.qOj]}),ie})(),li=(()=>{class ie extends Ze{constructor(ct,It,te,ve,Ti,ki,Zi){super(ct,It,te,ve,Ti,ki,Zi)}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36(ut.rL),n.Y36(st.Is,8),n.Y36(n.R0b),n.Y36(yt.t4),n.Y36(s.Qb,8))},ie.\u0275cmp=n.Xpm({type:ie,selectors:[["mat-tab-header"]],contentQueries:function(ct,It,te){if(1&ct&&n.Suo(te,re,4),2&ct){let ve;n.iGM(ve=n.CRH())&&(It._items=ve)}},viewQuery:function(ct,It){if(1&ct&&(n.Gf(oi,7),n.Gf(dt,7),n.Gf(it,7),n.Gf(rt,7),n.Gf(Gt,5),n.Gf(bt,5)),2&ct){let te;n.iGM(te=n.CRH())&&(It._inkBar=te.first),n.iGM(te=n.CRH())&&(It._tabListContainer=te.first),n.iGM(te=n.CRH())&&(It._tabList=te.first),n.iGM(te=n.CRH())&&(It._tabListInner=te.first),n.iGM(te=n.CRH())&&(It._nextPaginator=te.first),n.iGM(te=n.CRH())&&(It._previousPaginator=te.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(ct,It){2&ct&&n.ekj("mat-tab-header-pagination-controls-enabled",It._showPaginationControls)("mat-tab-header-rtl","rtl"==It._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[n.qOj],ngContentSelectors:lt,decls:14,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(ct,It){1&ct&&(n.F$t(),n.TgZ(0,"div",0,1),n.NdJ("click",function(){return It._handlePaginatorClick("before")})("mousedown",function(ve){return It._handlePaginatorPress("before",ve)})("touchend",function(){return It._stopInterval()}),n._UZ(2,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.NdJ("keydown",function(ve){return It._handleKeydown(ve)}),n.TgZ(5,"div",5,6),n.NdJ("cdkObserveContent",function(){return It._onContentChanges()}),n.TgZ(7,"div",7,8),n.Hsn(9),n.qZA(),n._UZ(10,"mat-ink-bar"),n.qZA(),n.qZA(),n.TgZ(11,"div",9,10),n.NdJ("mousedown",function(ve){return It._handlePaginatorPress("after",ve)})("click",function(){return It._handlePaginatorClick("after")})("touchend",function(){return It._stopInterval()}),n._UZ(13,"div",2),n.qZA()),2&ct&&(n.ekj("mat-tab-header-pagination-disabled",It._disableScrollBefore),n.Q6J("matRippleDisabled",It._disableScrollBefore||It.disableRipple),n.xp6(5),n.ekj("_mat-animation-noopable","NoopAnimations"===It._animationMode),n.xp6(6),n.ekj("mat-tab-header-pagination-disabled",It._disableScrollAfter),n.Q6J("matRippleDisabled",It._disableScrollAfter||It.disableRipple))},directives:[o.wG,p.wD,oi],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),ie})(),Fi=0;class ui{}const Ei=(0,o.pj)((0,o.Kr)(class{constructor(ie){this._elementRef=ie}}),"primary");let gi=(()=>{class ie extends Ei{constructor(ct,It,te,ve){var Ti;super(ct),this._changeDetectorRef=It,this._animationMode=ve,this._tabs=new n.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=_.w0.EMPTY,this._tabLabelSubscription=_.w0.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new n.vpe,this.focusChange=new n.vpe,this.animationDone=new n.vpe,this.selectedTabChange=new n.vpe(!0),this._groupId=Fi++,this.animationDuration=te&&te.animationDuration?te.animationDuration:"500ms",this.disablePagination=!(!te||null==te.disablePagination)&&te.disablePagination,this.dynamicHeight=!(!te||null==te.dynamicHeight)&&te.dynamicHeight,this.contentTabIndex=null!==(Ti=null==te?void 0:te.contentTabIndex)&&void 0!==Ti?Ti:null}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(ct){this._dynamicHeight=(0,Ct.Ig)(ct)}get selectedIndex(){return this._selectedIndex}set selectedIndex(ct){this._indexToSelect=(0,Ct.su)(ct,null)}get animationDuration(){return this._animationDuration}set animationDuration(ct){this._animationDuration=/^\d+$/.test(ct)?ct+"ms":ct}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(ct){this._contentTabIndex=(0,Ct.su)(ct,null)}get backgroundColor(){return this._backgroundColor}set backgroundColor(ct){const It=this._elementRef.nativeElement;It.classList.remove(`mat-background-${this.backgroundColor}`),ct&&It.classList.add(`mat-background-${ct}`),this._backgroundColor=ct}ngAfterContentChecked(){const ct=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=ct){const It=null==this._selectedIndex;if(!It){this.selectedTabChange.emit(this._createChangeEvent(ct));const te=this._tabBodyWrapper.nativeElement;te.style.minHeight=te.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((te,ve)=>te.isActive=ve===ct),It||(this.selectedIndexChange.emit(ct),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((It,te)=>{It.position=te-ct,null!=this._selectedIndex&&0==It.position&&!It.origin&&(It.origin=ct-this._selectedIndex)}),this._selectedIndex!==ct&&(this._selectedIndex=ct,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const It=this._tabs.toArray();for(let te=0;te<It.length;te++)if(It[te].isActive){this._indexToSelect=this._selectedIndex=te;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,$.O)(this._allTabs)).subscribe(ct=>{this._tabs.reset(ct.filter(It=>It._closestTabGroup===this||!It._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}focusTab(ct){const It=this._tabHeader;It&&(It.focusIndex=ct)}_focusChanged(ct){this.focusChange.emit(this._createChangeEvent(ct))}_createChangeEvent(ct){const It=new ui;return It.index=ct,this._tabs&&this._tabs.length&&(It.tab=this._tabs.toArray()[ct]),It}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,U.T)(...this._tabs.map(ct=>ct._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(ct){return Math.min(this._tabs.length-1,Math.max(ct||0,0))}_getTabLabelId(ct){return`mat-tab-label-${this._groupId}-${ct}`}_getTabContentId(ct){return`mat-tab-content-${this._groupId}-${ct}`}_setTabBodyWrapperHeight(ct){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const It=this._tabBodyWrapper.nativeElement;It.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(It.style.height=ct+"px")}_removeTabBodyWrapperHeight(){const ct=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=ct.clientHeight,ct.style.height="",this.animationDone.emit()}_handleClick(ct,It,te){ct.disabled||(this.selectedIndex=It.focusIndex=te)}_getTabIndex(ct,It){return ct.disabled?null:this.selectedIndex===It?0:-1}_tabFocusChanged(ct,It){ct&&"mouse"!==ct&&"touch"!==ct&&(this._tabHeader.focusIndex=It)}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36($t,8),n.Y36(s.Qb,8))},ie.\u0275dir=n.lG2({type:ie,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[n.qOj]}),ie})(),We=(()=>{class ie extends gi{constructor(ct,It,te,ve){super(ct,It,te,ve)}}return ie.\u0275fac=function(ct){return new(ct||ie)(n.Y36(n.SBq),n.Y36(n.sBO),n.Y36($t,8),n.Y36(s.Qb,8))},ie.\u0275cmp=n.Xpm({type:ie,selectors:[["mat-tab-group"]],contentQueries:function(ct,It,te){if(1&ct&&n.Suo(te,ze,5),2&ct){let ve;n.iGM(ve=n.CRH())&&(It._allTabs=ve)}},viewQuery:function(ct,It){if(1&ct&&(n.Gf(Ht,5),n.Gf(ce,5)),2&ct){let te;n.iGM(te=n.CRH())&&(It._tabBodyWrapper=te.first),n.iGM(te=n.CRH())&&(It._tabHeader=te.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(ct,It){2&ct&&n.ekj("mat-tab-group-dynamic-height",It.dynamicHeight)("mat-tab-group-inverted-header","below"===It.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[n._Bn([{provide:he,useExisting:ie}]),n.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(ct,It){1&ct&&(n.TgZ(0,"mat-tab-header",0,1),n.NdJ("indexFocused",function(ve){return It._focusChanged(ve)})("selectFocusedIndex",function(ve){return It.selectedIndex=ve}),n.YNc(2,He,4,14,"div",2),n.qZA(),n.TgZ(3,"div",3,4),n.YNc(5,Ke,1,9,"mat-tab-body",5),n.qZA()),2&ct&&(n.Q6J("selectedIndex",It.selectedIndex||0)("disableRipple",It.disableRipple)("disablePagination",It.disablePagination),n.xp6(2),n.Q6J("ngForOf",It._tabs),n.xp6(1),n.ekj("_mat-animation-noopable","NoopAnimations"===It._animationMode),n.xp6(2),n.Q6J("ngForOf",It._tabs))},directives:[li,t.sg,re,o.wG,b.kH,t.O5,e.Pl,ge],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),ie})(),Pe=(()=>{class ie{}return ie.\u0275fac=function(ct){return new(ct||ie)},ie.\u0275mod=n.oAB({type:ie}),ie.\u0275inj=n.cJS({imports:[[t.ez,o.BQ,e.eL,o.si,p.Q8,b.rt],o.BQ]}),ie})()},76360:(k,B,f)=>{"use strict";f.d(B,{Qb:()=>js,PW:()=>Di});var b=f(5e3),p=f(22313),e=f(41777);function t(){return"undefined"!=typeof window&&void 0!==window.document}function n(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function o(Qt){switch(Qt.length){case 0:return new e.ZN;case 1:return Qt[0];default:return new e.ZE(Qt)}}function s(Qt,F,Y,_t,Wt={},se={}){const Ie=[],xe=[];let ii=-1,mi=null;if(_t.forEach(Bi=>{const Gi=Bi.offset,un=Gi==ii,Mn=un&&mi||{};Object.keys(Bi).forEach(tn=>{let _n=tn,Bn=Bi[tn];if("offset"!==tn)switch(_n=F.normalizePropertyName(_n,Ie),Bn){case e.k1:Bn=Wt[tn];break;case e.l3:Bn=se[tn];break;default:Bn=F.normalizeStyleValue(tn,_n,Bn,Ie)}Mn[_n]=Bn}),un||xe.push(Mn),mi=Mn,ii=Gi}),Ie.length){const Bi="\n - ";throw new Error(`Unable to animate due to the following errors:${Bi}${Ie.join(Bi)}`)}return xe}function c(Qt,F,Y,_t){switch(F){case"start":Qt.onStart(()=>_t(Y&&_(Y,"start",Qt)));break;case"done":Qt.onDone(()=>_t(Y&&_(Y,"done",Qt)));break;case"destroy":Qt.onDestroy(()=>_t(Y&&_(Y,"destroy",Qt)))}}function _(Qt,F,Y){const _t=Y.totalTime,se=w(Qt.element,Qt.triggerName,Qt.fromState,Qt.toState,F||Qt.phaseName,null==_t?Qt.totalTime:_t,!!Y.disabled),Ie=Qt._data;return null!=Ie&&(se._data=Ie),se}function w(Qt,F,Y,_t,Wt="",se=0,Ie){return{element:Qt,triggerName:F,fromState:Y,toState:_t,phaseName:Wt,totalTime:se,disabled:!!Ie}}function M(Qt,F,Y){let _t;return Qt instanceof Map?(_t=Qt.get(F),_t||Qt.set(F,_t=Y)):(_t=Qt[F],_t||(_t=Qt[F]=Y)),_t}function U(Qt){const F=Qt.indexOf(":");return[Qt.substring(1,F),Qt.substr(F+1)]}let V=(Qt,F)=>!1,H=(Qt,F,Y)=>[];(n()||"undefined"!=typeof Element)&&(V=t()?(Qt,F)=>{for(;F&&F!==document.documentElement;){if(F===Qt)return!0;F=F.parentNode||F.host}return!1}:(Qt,F)=>Qt.contains(F),H=(Qt,F,Y)=>{let _t=[];if(Y){const Wt=Qt.querySelectorAll(F);for(let se=0;se<Wt.length;se++)_t.push(Wt[se])}else{const Wt=Qt.querySelector(F);Wt&&_t.push(Wt)}return _t});let nt=null,st=!1;function Ct(Qt){nt||(nt=("undefined"!=typeof document?document.body:null)||{},st=!!nt.style&&"WebkitAppearance"in nt.style);let F=!0;return nt.style&&!function(Qt){return"ebkit"==Qt.substring(1,6)}(Qt)&&(F=Qt in nt.style,!F&&st&&(F="Webkit"+Qt.charAt(0).toUpperCase()+Qt.substr(1)in nt.style)),F}const yt=V,ut=H;function tt(Qt){const F={};return Object.keys(Qt).forEach(Y=>{const _t=Y.replace(/([a-z])([A-Z])/g,"$1-$2");F[_t]=Qt[Y]}),F}let lt=(()=>{class Qt{validateStyleProperty(Y){return Ct(Y)}matchesElement(Y,_t){return!1}containsElement(Y,_t){return yt(Y,_t)}query(Y,_t,Wt){return ut(Y,_t,Wt)}computeStyle(Y,_t,Wt){return Wt||""}animate(Y,_t,Wt,se,Ie,xe=[],ii){return new e.ZN(Wt,se)}}return Qt.\u0275fac=function(Y){return new(Y||Qt)},Qt.\u0275prov=b.Yz7({token:Qt,factory:Qt.\u0275fac}),Qt})(),ot=(()=>{class Qt{}return Qt.NOOP=new lt,Qt})();const it="ng-enter",rt="ng-leave",Ht="ng-trigger",ce=".ng-trigger",Ye="ng-animating",de=".ng-animating";function Be(Qt){if("number"==typeof Qt)return Qt;const F=Qt.match(/^(-?[\.\d]+)(m?s)/);return!F||F.length<2?0:He(parseFloat(F[1]),F[2])}function He(Qt,F){return"s"===F?1e3*Qt:Qt}function Ke(Qt,F,Y){return Qt.hasOwnProperty("duration")?Qt:function(Qt,F,Y){let Wt,se=0,Ie="";if("string"==typeof Qt){const xe=Qt.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===xe)return F.push(`The provided timing value "${Qt}" is invalid.`),{duration:0,delay:0,easing:""};Wt=He(parseFloat(xe[1]),xe[2]);const ii=xe[3];null!=ii&&(se=He(parseFloat(ii),xe[4]));const mi=xe[5];mi&&(Ie=mi)}else Wt=Qt;if(!Y){let xe=!1,ii=F.length;Wt<0&&(F.push("Duration values below 0 are not allowed for this animation step."),xe=!0),se<0&&(F.push("Delay values below 0 are not allowed for this animation step."),xe=!0),xe&&F.splice(ii,0,`The provided timing value "${Qt}" is invalid.`)}return{duration:Wt,delay:se,easing:Ie}}(Qt,F,Y)}function qe(Qt,F={}){return Object.keys(Qt).forEach(Y=>{F[Y]=Qt[Y]}),F}function oi(Qt,F,Y={}){if(F)for(let _t in Qt)Y[_t]=Qt[_t];else qe(Qt,Y);return Y}function Ft(Qt,F,Y){return Y?F+":"+Y+";":""}function _e(Qt){let F="";for(let Y=0;Y<Qt.style.length;Y++){const _t=Qt.style.item(Y);F+=Ft(0,_t,Qt.style.getPropertyValue(_t))}for(const Y in Qt.style)Qt.style.hasOwnProperty(Y)&&!Y.startsWith("_")&&(F+=Ft(0,$t(Y),Qt.style[Y]));Qt.setAttribute("style",F)}function Xt(Qt,F,Y){Qt.style&&(Object.keys(F).forEach(_t=>{const Wt=ge(_t);Y&&!Y.hasOwnProperty(_t)&&(Y[_t]=Qt.style[Wt]),Qt.style[Wt]=F[_t]}),n()&&_e(Qt))}function Jt(Qt,F){Qt.style&&(Object.keys(F).forEach(Y=>{const _t=ge(Y);Qt.style[_t]=""}),n()&&_e(Qt))}function Rt(Qt){return Array.isArray(Qt)?1==Qt.length?Qt[0]:(0,e.vP)(Qt):Qt}const he=new RegExp("{{\\s*(.+?)\\s*}}","g");function ze(Qt){let F=[];if("string"==typeof Qt){let Y;for(;Y=he.exec(Qt);)F.push(Y[1]);he.lastIndex=0}return F}function le(Qt,F,Y){const _t=Qt.toString(),Wt=_t.replace(he,(se,Ie)=>{let xe=F[Ie];return F.hasOwnProperty(Ie)||(Y.push(`Please provide a value for the animation param ${Ie}`),xe=""),xe.toString()});return Wt==_t?Qt:Wt}function jt(Qt){const F=[];let Y=Qt.next();for(;!Y.done;)F.push(Y.value),Y=Qt.next();return F}const Yt=/-+([a-z0-9])/g;function ge(Qt){return Qt.replace(Yt,(...F)=>F[1].toUpperCase())}function $t(Qt){return Qt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function oe(Qt,F){return 0===Qt||0===F}function re(Qt,F,Y){const _t=Object.keys(Y);if(_t.length&&F.length){let se=F[0],Ie=[];if(_t.forEach(xe=>{se.hasOwnProperty(xe)||Ie.push(xe),se[xe]=Y[xe]}),Ie.length)for(var Wt=1;Wt<F.length;Wt++){let xe=F[Wt];Ie.forEach(function(ii){xe[ii]=kt(Qt,ii)})}}return F}function Et(Qt,F,Y){switch(F.type){case 7:return Qt.visitTrigger(F,Y);case 0:return Qt.visitState(F,Y);case 1:return Qt.visitTransition(F,Y);case 2:return Qt.visitSequence(F,Y);case 3:return Qt.visitGroup(F,Y);case 4:return Qt.visitAnimate(F,Y);case 5:return Qt.visitKeyframes(F,Y);case 6:return Qt.visitStyle(F,Y);case 8:return Qt.visitReference(F,Y);case 9:return Qt.visitAnimateChild(F,Y);case 10:return Qt.visitAnimateRef(F,Y);case 11:return Qt.visitQuery(F,Y);case 12:return Qt.visitStagger(F,Y);default:throw new Error(`Unable to resolve animation metadata node #${F.type}`)}}function kt(Qt,F){return window.getComputedStyle(Qt)[F]}function Ae(Qt,F){const Y=[];return"string"==typeof Qt?Qt.split(/\s*,\s*/).forEach(_t=>function(Qt,F,Y){if(":"==Qt[0]){const ii=function(Qt,F){switch(Qt){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(Y,_t)=>parseFloat(_t)>parseFloat(Y);case":decrement":return(Y,_t)=>parseFloat(_t)<parseFloat(Y);default:return F.push(`The transition alias value "${Qt}" is not supported`),"* => *"}}(Qt,Y);if("function"==typeof ii)return void F.push(ii);Qt=ii}const _t=Qt.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==_t||_t.length<4)return Y.push(`The provided transition expression "${Qt}" is not supported`),F;const Wt=_t[1],se=_t[2],Ie=_t[3];F.push(ui(Wt,Ie));"<"==se[0]&&!("*"==Wt&&"*"==Ie)&&F.push(ui(Ie,Wt))}(_t,Y,F)):Y.push(Qt),Y}const li=new Set(["true","1"]),Fi=new Set(["false","0"]);function ui(Qt,F){const Y=li.has(Qt)||Fi.has(Qt),_t=li.has(F)||Fi.has(F);return(Wt,se)=>{let Ie="*"==Qt||Qt==Wt,xe="*"==F||F==se;return!Ie&&Y&&"boolean"==typeof Wt&&(Ie=Wt?li.has(Qt):Fi.has(Qt)),!xe&&_t&&"boolean"==typeof se&&(xe=se?li.has(F):Fi.has(F)),Ie&&xe}}const gi=new RegExp("s*:selfs*,?","g");function We(Qt,F,Y){return new ue(Qt).build(F,Y)}class ue{constructor(F){this._driver=F}build(F,Y){const _t=new Ri(Y);return this._resetContextStyleTimingState(_t),Et(this,Rt(F),_t)}_resetContextStyleTimingState(F){F.currentQuerySelector="",F.collectedStyles={},F.collectedStyles[""]={},F.currentTime=0}visitTrigger(F,Y){let _t=Y.queryCount=0,Wt=Y.depCount=0;const se=[],Ie=[];return"@"==F.name.charAt(0)&&Y.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),F.definitions.forEach(xe=>{if(this._resetContextStyleTimingState(Y),0==xe.type){const ii=xe,mi=ii.name;mi.toString().split(/\s*,\s*/).forEach(Bi=>{ii.name=Bi,se.push(this.visitState(ii,Y))}),ii.name=mi}else if(1==xe.type){const ii=this.visitTransition(xe,Y);_t+=ii.queryCount,Wt+=ii.depCount,Ie.push(ii)}else Y.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:F.name,states:se,transitions:Ie,queryCount:_t,depCount:Wt,options:null}}visitState(F,Y){const _t=this.visitStyle(F.styles,Y),Wt=F.options&&F.options.params||null;if(_t.containsDynamicStyles){const se=new Set,Ie=Wt||{};if(_t.styles.forEach(xe=>{if(ie(xe)){const ii=xe;Object.keys(ii).forEach(mi=>{ze(ii[mi]).forEach(Bi=>{Ie.hasOwnProperty(Bi)||se.add(Bi)})})}}),se.size){const xe=jt(se.values());Y.errors.push(`state("${F.name}", ...) must define default values for all the following style substitutions: ${xe.join(", ")}`)}}return{type:0,name:F.name,style:_t,options:Wt?{params:Wt}:null}}visitTransition(F,Y){Y.queryCount=0,Y.depCount=0;const _t=Et(this,Rt(F.animation),Y);return{type:1,matchers:Ae(F.expr,Y.errors),animation:_t,queryCount:Y.queryCount,depCount:Y.depCount,options:ct(F.options)}}visitSequence(F,Y){return{type:2,steps:F.steps.map(_t=>Et(this,_t,Y)),options:ct(F.options)}}visitGroup(F,Y){const _t=Y.currentTime;let Wt=0;const se=F.steps.map(Ie=>{Y.currentTime=_t;const xe=Et(this,Ie,Y);return Wt=Math.max(Wt,Y.currentTime),xe});return Y.currentTime=Wt,{type:3,steps:se,options:ct(F.options)}}visitAnimate(F,Y){const _t=function(Qt,F){let Y=null;if(Qt.hasOwnProperty("duration"))Y=Qt;else if("number"==typeof Qt)return It(Ke(Qt,F).duration,0,"");const _t=Qt;if(_t.split(/\s+/).some(se=>"{"==se.charAt(0)&&"{"==se.charAt(1))){const se=It(0,0,"");return se.dynamic=!0,se.strValue=_t,se}return Y=Y||Ke(_t,F),It(Y.duration,Y.delay,Y.easing)}(F.timings,Y.errors);Y.currentAnimateTimings=_t;let Wt,se=F.styles?F.styles:(0,e.oB)({});if(5==se.type)Wt=this.visitKeyframes(se,Y);else{let Ie=F.styles,xe=!1;if(!Ie){xe=!0;const mi={};_t.easing&&(mi.easing=_t.easing),Ie=(0,e.oB)(mi)}Y.currentTime+=_t.duration+_t.delay;const ii=this.visitStyle(Ie,Y);ii.isEmptyStep=xe,Wt=ii}return Y.currentAnimateTimings=null,{type:4,timings:_t,style:Wt,options:null}}visitStyle(F,Y){const _t=this._makeStyleAst(F,Y);return this._validateStyleAst(_t,Y),_t}_makeStyleAst(F,Y){const _t=[];Array.isArray(F.styles)?F.styles.forEach(Ie=>{"string"==typeof Ie?Ie==e.l3?_t.push(Ie):Y.errors.push(`The provided style string value ${Ie} is not allowed.`):_t.push(Ie)}):_t.push(F.styles);let Wt=!1,se=null;return _t.forEach(Ie=>{if(ie(Ie)){const xe=Ie,ii=xe.easing;if(ii&&(se=ii,delete xe.easing),!Wt)for(let mi in xe)if(xe[mi].toString().indexOf("{{")>=0){Wt=!0;break}}}),{type:6,styles:_t,easing:se,offset:F.offset,containsDynamicStyles:Wt,options:null}}_validateStyleAst(F,Y){const _t=Y.currentAnimateTimings;let Wt=Y.currentTime,se=Y.currentTime;_t&&se>0&&(se-=_t.duration+_t.delay),F.styles.forEach(Ie=>{"string"!=typeof Ie&&Object.keys(Ie).forEach(xe=>{if(!this._driver.validateStyleProperty(xe))return void Y.errors.push(`The provided animation property "${xe}" is not a supported CSS property for animations`);const ii=Y.collectedStyles[Y.currentQuerySelector],mi=ii[xe];let Bi=!0;mi&&(se!=Wt&&se>=mi.startTime&&Wt<=mi.endTime&&(Y.errors.push(`The CSS property "${xe}" that exists between the times of "${mi.startTime}ms" and "${mi.endTime}ms" is also being animated in a parallel animation between the times of "${se}ms" and "${Wt}ms"`),Bi=!1),se=mi.startTime),Bi&&(ii[xe]={startTime:se,endTime:Wt}),Y.options&&function(Qt,F,Y){const _t=F.params||{},Wt=ze(Qt);Wt.length&&Wt.forEach(se=>{_t.hasOwnProperty(se)||Y.push(`Unable to resolve the local animation param ${se} in the given list of values`)})}(Ie[xe],Y.options,Y.errors)})})}visitKeyframes(F,Y){const _t={type:5,styles:[],options:null};if(!Y.currentAnimateTimings)return Y.errors.push("keyframes() must be placed inside of a call to animate()"),_t;let se=0;const Ie=[];let xe=!1,ii=!1,mi=0;const Bi=F.steps.map(Wn=>{const Mo=this._makeStyleAst(Wn,Y);let sr=null!=Mo.offset?Mo.offset:function(Qt){if("string"==typeof Qt)return null;let F=null;if(Array.isArray(Qt))Qt.forEach(Y=>{if(ie(Y)&&Y.hasOwnProperty("offset")){const _t=Y;F=parseFloat(_t.offset),delete _t.offset}});else if(ie(Qt)&&Qt.hasOwnProperty("offset")){const Y=Qt;F=parseFloat(Y.offset),delete Y.offset}return F}(Mo.styles),Vo=0;return null!=sr&&(se++,Vo=Mo.offset=sr),ii=ii||Vo<0||Vo>1,xe=xe||Vo<mi,mi=Vo,Ie.push(Vo),Mo});ii&&Y.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),xe&&Y.errors.push("Please ensure that all keyframe offsets are in order");const Gi=F.steps.length;let un=0;se>0&&se<Gi?Y.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==se&&(un=1/(Gi-1));const Mn=Gi-1,tn=Y.currentTime,_n=Y.currentAnimateTimings,Bn=_n.duration;return Bi.forEach((Wn,Mo)=>{const sr=un>0?Mo==Mn?1:un*Mo:Ie[Mo],Vo=sr*Bn;Y.currentTime=tn+_n.delay+Vo,_n.duration=Vo,this._validateStyleAst(Wn,Y),Wn.offset=sr,_t.styles.push(Wn)}),_t}visitReference(F,Y){return{type:8,animation:Et(this,Rt(F.animation),Y),options:ct(F.options)}}visitAnimateChild(F,Y){return Y.depCount++,{type:9,options:ct(F.options)}}visitAnimateRef(F,Y){return{type:10,animation:this.visitReference(F.animation,Y),options:ct(F.options)}}visitQuery(F,Y){const _t=Y.currentQuerySelector,Wt=F.options||{};Y.queryCount++,Y.currentQuery=F;const[se,Ie]=function(Qt){const F=!!Qt.split(/\s*,\s*/).find(Y=>":self"==Y);return F&&(Qt=Qt.replace(gi,"")),Qt=Qt.replace(/@\*/g,ce).replace(/@\w+/g,Y=>ce+"-"+Y.substr(1)).replace(/:animating/g,de),[Qt,F]}(F.selector);Y.currentQuerySelector=_t.length?_t+" "+se:se,M(Y.collectedStyles,Y.currentQuerySelector,{});const xe=Et(this,Rt(F.animation),Y);return Y.currentQuery=null,Y.currentQuerySelector=_t,{type:11,selector:se,limit:Wt.limit||0,optional:!!Wt.optional,includeSelf:Ie,animation:xe,originalSelector:F.selector,options:ct(F.options)}}visitStagger(F,Y){Y.currentQuery||Y.errors.push("stagger() can only be used inside of query()");const _t="full"===F.timings?{duration:0,delay:0,easing:"full"}:Ke(F.timings,Y.errors,!0);return{type:12,animation:Et(this,Rt(F.animation),Y),timings:_t,options:null}}}class Ri{constructor(F){this.errors=F,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function ie(Qt){return!Array.isArray(Qt)&&"object"==typeof Qt}function ct(Qt){return Qt?(Qt=qe(Qt)).params&&(Qt.params=function(Qt){return Qt?qe(Qt):null}(Qt.params)):Qt={},Qt}function It(Qt,F,Y){return{duration:Qt,delay:F,easing:Y}}function te(Qt,F,Y,_t,Wt,se,Ie=null,xe=!1){return{type:1,element:Qt,keyframes:F,preStyleProps:Y,postStyleProps:_t,duration:Wt,delay:se,totalTime:Wt+se,easing:Ie,subTimeline:xe}}class ve{constructor(){this._map=new Map}consume(F){let Y=this._map.get(F);return Y?this._map.delete(F):Y=[],Y}append(F,Y){let _t=this._map.get(F);_t||this._map.set(F,_t=[]),_t.push(...Y)}has(F){return this._map.has(F)}clear(){this._map.clear()}}const Zi=new RegExp(":enter","g"),$e=new RegExp(":leave","g");function Me(Qt,F,Y,_t,Wt,se={},Ie={},xe,ii,mi=[]){return(new Te).buildKeyframes(Qt,F,Y,_t,Wt,se,Ie,xe,ii,mi)}class Te{buildKeyframes(F,Y,_t,Wt,se,Ie,xe,ii,mi,Bi=[]){mi=mi||new ve;const Gi=new pi(F,Y,mi,Wt,se,Bi,[]);Gi.options=ii,Gi.currentTimeline.setStyles([Ie],null,Gi.errors,ii),Et(this,_t,Gi);const un=Gi.timelines.filter(Mn=>Mn.containsAnimation());if(un.length&&Object.keys(xe).length){const Mn=un[un.length-1];Mn.allowOnlyTimelineStyles()||Mn.setStyles([xe],null,Gi.errors,ii)}return un.length?un.map(Mn=>Mn.buildKeyframes()):[te(Y,[],[],[],0,0,"",!1)]}visitTrigger(F,Y){}visitState(F,Y){}visitTransition(F,Y){}visitAnimateChild(F,Y){const _t=Y.subInstructions.consume(Y.element);if(_t){const Wt=Y.createSubContext(F.options),se=Y.currentTimeline.currentTime,Ie=this._visitSubInstructions(_t,Wt,Wt.options);se!=Ie&&Y.transformIntoNewTimeline(Ie)}Y.previousNode=F}visitAnimateRef(F,Y){const _t=Y.createSubContext(F.options);_t.transformIntoNewTimeline(),this.visitReference(F.animation,_t),Y.transformIntoNewTimeline(_t.currentTimeline.currentTime),Y.previousNode=F}_visitSubInstructions(F,Y,_t){let se=Y.currentTimeline.currentTime;const Ie=null!=_t.duration?Be(_t.duration):null,xe=null!=_t.delay?Be(_t.delay):null;return 0!==Ie&&F.forEach(ii=>{const mi=Y.appendInstructionToTimeline(ii,Ie,xe);se=Math.max(se,mi.duration+mi.delay)}),se}visitReference(F,Y){Y.updateOptions(F.options,!0),Et(this,F.animation,Y),Y.previousNode=F}visitSequence(F,Y){const _t=Y.subContextCount;let Wt=Y;const se=F.options;if(se&&(se.params||se.delay)&&(Wt=Y.createSubContext(se),Wt.transformIntoNewTimeline(),null!=se.delay)){6==Wt.previousNode.type&&(Wt.currentTimeline.snapshotCurrentStyles(),Wt.previousNode=Xe);const Ie=Be(se.delay);Wt.delayNextStep(Ie)}F.steps.length&&(F.steps.forEach(Ie=>Et(this,Ie,Wt)),Wt.currentTimeline.applyStylesToKeyframe(),Wt.subContextCount>_t&&Wt.transformIntoNewTimeline()),Y.previousNode=F}visitGroup(F,Y){const _t=[];let Wt=Y.currentTimeline.currentTime;const se=F.options&&F.options.delay?Be(F.options.delay):0;F.steps.forEach(Ie=>{const xe=Y.createSubContext(F.options);se&&xe.delayNextStep(se),Et(this,Ie,xe),Wt=Math.max(Wt,xe.currentTimeline.currentTime),_t.push(xe.currentTimeline)}),_t.forEach(Ie=>Y.currentTimeline.mergeTimelineCollectedStyles(Ie)),Y.transformIntoNewTimeline(Wt),Y.previousNode=F}_visitTiming(F,Y){if(F.dynamic){const _t=F.strValue;return Ke(Y.params?le(_t,Y.params,Y.errors):_t,Y.errors)}return{duration:F.duration,delay:F.delay,easing:F.easing}}visitAnimate(F,Y){const _t=Y.currentAnimateTimings=this._visitTiming(F.timings,Y),Wt=Y.currentTimeline;_t.delay&&(Y.incrementTime(_t.delay),Wt.snapshotCurrentStyles());const se=F.style;5==se.type?this.visitKeyframes(se,Y):(Y.incrementTime(_t.duration),this.visitStyle(se,Y),Wt.applyStylesToKeyframe()),Y.currentAnimateTimings=null,Y.previousNode=F}visitStyle(F,Y){const _t=Y.currentTimeline,Wt=Y.currentAnimateTimings;!Wt&&_t.getCurrentStyleProperties().length&&_t.forwardFrame();const se=Wt&&Wt.easing||F.easing;F.isEmptyStep?_t.applyEmptyStep(se):_t.setStyles(F.styles,se,Y.errors,Y.options),Y.previousNode=F}visitKeyframes(F,Y){const _t=Y.currentAnimateTimings,Wt=Y.currentTimeline.duration,se=_t.duration,xe=Y.createSubContext().currentTimeline;xe.easing=_t.easing,F.styles.forEach(ii=>{xe.forwardTime((ii.offset||0)*se),xe.setStyles(ii.styles,ii.easing,Y.errors,Y.options),xe.applyStylesToKeyframe()}),Y.currentTimeline.mergeTimelineCollectedStyles(xe),Y.transformIntoNewTimeline(Wt+se),Y.previousNode=F}visitQuery(F,Y){const _t=Y.currentTimeline.currentTime,Wt=F.options||{},se=Wt.delay?Be(Wt.delay):0;se&&(6===Y.previousNode.type||0==_t&&Y.currentTimeline.getCurrentStyleProperties().length)&&(Y.currentTimeline.snapshotCurrentStyles(),Y.previousNode=Xe);let Ie=_t;const xe=Y.invokeQuery(F.selector,F.originalSelector,F.limit,F.includeSelf,!!Wt.optional,Y.errors);Y.currentQueryTotal=xe.length;let ii=null;xe.forEach((mi,Bi)=>{Y.currentQueryIndex=Bi;const Gi=Y.createSubContext(F.options,mi);se&&Gi.delayNextStep(se),mi===Y.element&&(ii=Gi.currentTimeline),Et(this,F.animation,Gi),Gi.currentTimeline.applyStylesToKeyframe(),Ie=Math.max(Ie,Gi.currentTimeline.currentTime)}),Y.currentQueryIndex=0,Y.currentQueryTotal=0,Y.transformIntoNewTimeline(Ie),ii&&(Y.currentTimeline.mergeTimelineCollectedStyles(ii),Y.currentTimeline.snapshotCurrentStyles()),Y.previousNode=F}visitStagger(F,Y){const _t=Y.parentContext,Wt=Y.currentTimeline,se=F.timings,Ie=Math.abs(se.duration),xe=Ie*(Y.currentQueryTotal-1);let ii=Ie*Y.currentQueryIndex;switch(se.duration<0?"reverse":se.easing){case"reverse":ii=xe-ii;break;case"full":ii=_t.currentStaggerTime}const Bi=Y.currentTimeline;ii&&Bi.delayNextStep(ii);const Gi=Bi.currentTime;Et(this,F.animation,Y),Y.previousNode=F,_t.currentStaggerTime=Wt.currentTime-Gi+(Wt.startTime-_t.currentTimeline.startTime)}}const Xe={};class pi{constructor(F,Y,_t,Wt,se,Ie,xe,ii){this._driver=F,this.element=Y,this.subInstructions=_t,this._enterClassName=Wt,this._leaveClassName=se,this.errors=Ie,this.timelines=xe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Xe,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ii||new Ki(this._driver,Y,0),xe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(F,Y){if(!F)return;const _t=F;let Wt=this.options;null!=_t.duration&&(Wt.duration=Be(_t.duration)),null!=_t.delay&&(Wt.delay=Be(_t.delay));const se=_t.params;if(se){let Ie=Wt.params;Ie||(Ie=this.options.params={}),Object.keys(se).forEach(xe=>{(!Y||!Ie.hasOwnProperty(xe))&&(Ie[xe]=le(se[xe],Ie,this.errors))})}}_copyOptions(){const F={};if(this.options){const Y=this.options.params;if(Y){const _t=F.params={};Object.keys(Y).forEach(Wt=>{_t[Wt]=Y[Wt]})}}return F}createSubContext(F=null,Y,_t){const Wt=Y||this.element,se=new pi(this._driver,Wt,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Wt,_t||0));return se.previousNode=this.previousNode,se.currentAnimateTimings=this.currentAnimateTimings,se.options=this._copyOptions(),se.updateOptions(F),se.currentQueryIndex=this.currentQueryIndex,se.currentQueryTotal=this.currentQueryTotal,se.parentContext=this,this.subContextCount++,se}transformIntoNewTimeline(F){return this.previousNode=Xe,this.currentTimeline=this.currentTimeline.fork(this.element,F),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(F,Y,_t){const Wt={duration:null!=Y?Y:F.duration,delay:this.currentTimeline.currentTime+(null!=_t?_t:0)+F.delay,easing:""},se=new cn(this._driver,F.element,F.keyframes,F.preStyleProps,F.postStyleProps,Wt,F.stretchStartingKeyframe);return this.timelines.push(se),Wt}incrementTime(F){this.currentTimeline.forwardTime(this.currentTimeline.duration+F)}delayNextStep(F){F>0&&this.currentTimeline.delayNextStep(F)}invokeQuery(F,Y,_t,Wt,se,Ie){let xe=[];if(Wt&&xe.push(this.element),F.length>0){F=(F=F.replace(Zi,"."+this._enterClassName)).replace($e,"."+this._leaveClassName);let mi=this._driver.query(this.element,F,1!=_t);0!==_t&&(mi=_t<0?mi.slice(mi.length+_t,mi.length):mi.slice(0,_t)),xe.push(...mi)}return!se&&0==xe.length&&Ie.push(`\`query("${Y}")\` returned zero elements. (Use \`query("${Y}", { optional: true })\` if you wish to allow this.)`),xe}}class Ki{constructor(F,Y,_t,Wt){this._driver=F,this.element=Y,this.startTime=_t,this._elementTimelineStylesLookup=Wt,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(Y),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(Y,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(F){const Y=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||Y?(this.forwardTime(this.currentTime+F),Y&&this.snapshotCurrentStyles()):this.startTime+=F}fork(F,Y){return this.applyStylesToKeyframe(),new Ki(this._driver,F,Y||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(F){this.applyStylesToKeyframe(),this.duration=F,this._loadKeyframe()}_updateStyle(F,Y){this._localTimelineStyles[F]=Y,this._globalTimelineStyles[F]=Y,this._styleSummary[F]={time:this.currentTime,value:Y}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(F){F&&(this._previousKeyframe.easing=F),Object.keys(this._globalTimelineStyles).forEach(Y=>{this._backFill[Y]=this._globalTimelineStyles[Y]||e.l3,this._currentKeyframe[Y]=e.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(F,Y,_t,Wt){Y&&(this._previousKeyframe.easing=Y);const se=Wt&&Wt.params||{},Ie=function(Qt,F){const Y={};let _t;return Qt.forEach(Wt=>{"*"===Wt?(_t=_t||Object.keys(F),_t.forEach(se=>{Y[se]=e.l3})):oi(Wt,!1,Y)}),Y}(F,this._globalTimelineStyles);Object.keys(Ie).forEach(xe=>{const ii=le(Ie[xe],se,_t);this._pendingStyles[xe]=ii,this._localTimelineStyles.hasOwnProperty(xe)||(this._backFill[xe]=this._globalTimelineStyles.hasOwnProperty(xe)?this._globalTimelineStyles[xe]:e.l3),this._updateStyle(xe,ii)})}applyStylesToKeyframe(){const F=this._pendingStyles,Y=Object.keys(F);0!=Y.length&&(this._pendingStyles={},Y.forEach(_t=>{this._currentKeyframe[_t]=F[_t]}),Object.keys(this._localTimelineStyles).forEach(_t=>{this._currentKeyframe.hasOwnProperty(_t)||(this._currentKeyframe[_t]=this._localTimelineStyles[_t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(F=>{const Y=this._localTimelineStyles[F];this._pendingStyles[F]=Y,this._updateStyle(F,Y)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const F=[];for(let Y in this._currentKeyframe)F.push(Y);return F}mergeTimelineCollectedStyles(F){Object.keys(F._styleSummary).forEach(Y=>{const _t=this._styleSummary[Y],Wt=F._styleSummary[Y];(!_t||Wt.time>_t.time)&&this._updateStyle(Y,Wt.value)})}buildKeyframes(){this.applyStylesToKeyframe();const F=new Set,Y=new Set,_t=1===this._keyframes.size&&0===this.duration;let Wt=[];this._keyframes.forEach((xe,ii)=>{const mi=oi(xe,!0);Object.keys(mi).forEach(Bi=>{const Gi=mi[Bi];Gi==e.k1?F.add(Bi):Gi==e.l3&&Y.add(Bi)}),_t||(mi.offset=ii/this.duration),Wt.push(mi)});const se=F.size?jt(F.values()):[],Ie=Y.size?jt(Y.values()):[];if(_t){const xe=Wt[0],ii=qe(xe);xe.offset=0,ii.offset=1,Wt=[xe,ii]}return te(this.element,Wt,se,Ie,this.duration,this.startTime,this.easing,!1)}}class cn extends Ki{constructor(F,Y,_t,Wt,se,Ie,xe=!1){super(F,Y,Ie.delay),this.keyframes=_t,this.preStyleProps=Wt,this.postStyleProps=se,this._stretchStartingKeyframe=xe,this.timings={duration:Ie.duration,delay:Ie.delay,easing:Ie.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let F=this.keyframes,{delay:Y,duration:_t,easing:Wt}=this.timings;if(this._stretchStartingKeyframe&&Y){const se=[],Ie=_t+Y,xe=Y/Ie,ii=oi(F[0],!1);ii.offset=0,se.push(ii);const mi=oi(F[0],!1);mi.offset=xn(xe),se.push(mi);const Bi=F.length-1;for(let Gi=1;Gi<=Bi;Gi++){let un=oi(F[Gi],!1);un.offset=xn((Y+un.offset*_t)/Ie),se.push(un)}_t=Ie,Y=0,Wt="",F=se}return te(this.element,F,this.preStyleProps,this.postStyleProps,_t,Y,Wt,!0)}}function xn(Qt,F=3){const Y=Math.pow(10,F-1);return Math.round(Qt*Y)/Y}class Jo{}class or extends Jo{normalizePropertyName(F,Y){return ge(F)}normalizeStyleValue(F,Y,_t,Wt){let se="";const Ie=_t.toString().trim();if(Jn[Y]&&0!==_t&&"0"!==_t)if("number"==typeof _t)se="px";else{const xe=_t.match(/^[+-]?[\d\.]+([a-z]*)$/);xe&&0==xe[1].length&&Wt.push(`Please provide a CSS unit value for ${F}:${_t}`)}return Ie+se}}const Jn=(()=>function(Qt){const F={};return Qt.forEach(Y=>F[Y]=!0),F}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function ro(Qt,F,Y,_t,Wt,se,Ie,xe,ii,mi,Bi,Gi,un){return{type:0,element:Qt,triggerName:F,isRemovalTransition:Wt,fromState:Y,fromStyles:se,toState:_t,toStyles:Ie,timelines:xe,queriedElements:ii,preStyleProps:mi,postStyleProps:Bi,totalTime:Gi,errors:un}}const Hi={};class dn{constructor(F,Y,_t){this._triggerName=F,this.ast=Y,this._stateStyles=_t}match(F,Y,_t,Wt){return function(Qt,F,Y,_t,Wt){return Qt.some(se=>se(F,Y,_t,Wt))}(this.ast.matchers,F,Y,_t,Wt)}buildStyles(F,Y,_t){const Wt=this._stateStyles["*"],se=this._stateStyles[F],Ie=Wt?Wt.buildStyles(Y,_t):{};return se?se.buildStyles(Y,_t):Ie}build(F,Y,_t,Wt,se,Ie,xe,ii,mi,Bi){const Gi=[],un=this.ast.options&&this.ast.options.params||Hi,tn=this.buildStyles(_t,xe&&xe.params||Hi,Gi),_n=ii&&ii.params||Hi,Bn=this.buildStyles(Wt,_n,Gi),Wn=new Set,Mo=new Map,sr=new Map,Vo="void"===Wt,Gr={params:Object.assign(Object.assign({},un),_n)},Qr=Bi?[]:Me(F,Y,this.ast.animation,se,Ie,tn,Bn,Gr,mi,Gi);let Uo=0;if(Qr.forEach(qr=>{Uo=Math.max(qr.duration+qr.delay,Uo)}),Gi.length)return ro(Y,this._triggerName,_t,Wt,Vo,tn,Bn,[],[],Mo,sr,Uo,Gi);Qr.forEach(qr=>{const ds=qr.element,Sa=M(Mo,ds,{});qr.preStyleProps.forEach(ts=>Sa[ts]=!0);const Co=M(sr,ds,{});qr.postStyleProps.forEach(ts=>Co[ts]=!0),ds!==Y&&Wn.add(ds)});const Os=jt(Wn.values());return ro(Y,this._triggerName,_t,Wt,Vo,tn,Bn,Qr,Os,Mo,sr,Uo)}}class Lo{constructor(F,Y,_t){this.styles=F,this.defaultParams=Y,this.normalizer=_t}buildStyles(F,Y){const _t={},Wt=qe(this.defaultParams);return Object.keys(F).forEach(se=>{const Ie=F[se];null!=Ie&&(Wt[se]=Ie)}),this.styles.styles.forEach(se=>{if("string"!=typeof se){const Ie=se;Object.keys(Ie).forEach(xe=>{let ii=Ie[xe];ii.length>1&&(ii=le(ii,Wt,Y));const mi=this.normalizer.normalizePropertyName(xe,Y);ii=this.normalizer.normalizeStyleValue(xe,mi,ii,Y),_t[mi]=ii})}}),_t}}class ho{constructor(F,Y,_t){this.name=F,this.ast=Y,this._normalizer=_t,this.transitionFactories=[],this.states={},Y.states.forEach(Wt=>{this.states[Wt.name]=new Lo(Wt.style,Wt.options&&Wt.options.params||{},_t)}),Kn(this.states,"true","1"),Kn(this.states,"false","0"),Y.transitions.forEach(Wt=>{this.transitionFactories.push(new dn(F,Wt,this.states))}),this.fallbackTransition=function(Qt,F,Y){return new dn(Qt,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ie,xe)=>!0],options:null,queryCount:0,depCount:0},F)}(F,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(F,Y,_t,Wt){return this.transitionFactories.find(Ie=>Ie.match(F,Y,_t,Wt))||null}matchStyles(F,Y,_t){return this.fallbackTransition.buildStyles(F,Y,_t)}}function Kn(Qt,F,Y){Qt.hasOwnProperty(F)?Qt.hasOwnProperty(Y)||(Qt[Y]=Qt[F]):Qt.hasOwnProperty(Y)&&(Qt[F]=Qt[Y])}const No=new ve;class $o{constructor(F,Y,_t){this.bodyNode=F,this._driver=Y,this._normalizer=_t,this._animations={},this._playersById={},this.players=[]}register(F,Y){const _t=[],Wt=We(this._driver,Y,_t);if(_t.length)throw new Error(`Unable to build the animation due to the following errors: ${_t.join("\n")}`);this._animations[F]=Wt}_buildPlayer(F,Y,_t){const Wt=F.element,se=s(0,this._normalizer,0,F.keyframes,Y,_t);return this._driver.animate(Wt,se,F.duration,F.delay,F.easing,[],!0)}create(F,Y,_t={}){const Wt=[],se=this._animations[F];let Ie;const xe=new Map;if(se?(Ie=Me(this._driver,Y,se,it,rt,{},{},_t,No,Wt),Ie.forEach(Bi=>{const Gi=M(xe,Bi.element,{});Bi.postStyleProps.forEach(un=>Gi[un]=null)})):(Wt.push("The requested animation doesn't exist or has already been destroyed"),Ie=[]),Wt.length)throw new Error(`Unable to create the animation due to the following errors: ${Wt.join("\n")}`);xe.forEach((Bi,Gi)=>{Object.keys(Bi).forEach(un=>{Bi[un]=this._driver.computeStyle(Gi,un,e.l3)})});const mi=o(Ie.map(Bi=>{const Gi=xe.get(Bi.element);return this._buildPlayer(Bi,{},Gi)}));return this._playersById[F]=mi,mi.onDestroy(()=>this.destroy(F)),this.players.push(mi),mi}destroy(F){const Y=this._getPlayer(F);Y.destroy(),delete this._playersById[F];const _t=this.players.indexOf(Y);_t>=0&&this.players.splice(_t,1)}_getPlayer(F){const Y=this._playersById[F];if(!Y)throw new Error(`Unable to find the timeline player referenced by ${F}`);return Y}listen(F,Y,_t,Wt){const se=w(Y,"","","");return c(this._getPlayer(F),_t,se,Wt),()=>{}}command(F,Y,_t,Wt){if("register"==_t)return void this.register(F,Wt[0]);if("create"==_t)return void this.create(F,Y,Wt[0]||{});const se=this._getPlayer(F);switch(_t){case"play":se.play();break;case"pause":se.pause();break;case"reset":se.reset();break;case"restart":se.restart();break;case"finish":se.finish();break;case"init":se.init();break;case"setPosition":se.setPosition(parseFloat(Wt[0]));break;case"destroy":this.destroy(F)}}}const pn="ng-animate-queued",rr="ng-animate-disabled",Kr=[],Zo={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Hn={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vn="__ng_removed";class Qo{constructor(F,Y=""){this.namespaceId=Y;const _t=F&&F.hasOwnProperty("value");if(this.value=null!=(Qt=_t?F.value:F)?Qt:null,_t){const se=qe(F);delete se.value,this.options=se}else this.options={};var Qt;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(F){const Y=F.params;if(Y){const _t=this.options.params;Object.keys(Y).forEach(Wt=>{null==_t[Wt]&&(_t[Wt]=Y[Wt])})}}}const xo="void",Eo=new Qo(xo);class Po{constructor(F,Y,_t){this.id=F,this.hostElement=Y,this._engine=_t,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+F,po(Y,this._hostClassName)}listen(F,Y,_t,Wt){if(!this._triggers.hasOwnProperty(Y))throw new Error(`Unable to listen on the animation trigger event "${_t}" because the animation trigger "${Y}" doesn't exist!`);if(null==_t||0==_t.length)throw new Error(`Unable to listen on the animation trigger "${Y}" because the provided event is undefined!`);if("start"!=(Qt=_t)&&"done"!=Qt)throw new Error(`The provided animation trigger event "${_t}" for the animation trigger "${Y}" is not supported!`);var Qt;const se=M(this._elementListeners,F,[]),Ie={name:Y,phase:_t,callback:Wt};se.push(Ie);const xe=M(this._engine.statesByElement,F,{});return xe.hasOwnProperty(Y)||(po(F,Ht),po(F,Ht+"-"+Y),xe[Y]=Eo),()=>{this._engine.afterFlush(()=>{const ii=se.indexOf(Ie);ii>=0&&se.splice(ii,1),this._triggers[Y]||delete xe[Y]})}}register(F,Y){return!this._triggers[F]&&(this._triggers[F]=Y,!0)}_getTrigger(F){const Y=this._triggers[F];if(!Y)throw new Error(`The provided animation trigger "${F}" has not been registered!`);return Y}trigger(F,Y,_t,Wt=!0){const se=this._getTrigger(Y),Ie=new yn(this.id,Y,F);let xe=this._engine.statesByElement.get(F);xe||(po(F,Ht),po(F,Ht+"-"+Y),this._engine.statesByElement.set(F,xe={}));let ii=xe[Y];const mi=new Qo(_t,this.id);if(!(_t&&_t.hasOwnProperty("value"))&&ii&&mi.absorbOptions(ii.options),xe[Y]=mi,ii||(ii=Eo),mi.value!==xo&&ii.value===mi.value){if(!function(Qt,F){const Y=Object.keys(Qt),_t=Object.keys(F);if(Y.length!=_t.length)return!1;for(let Wt=0;Wt<Y.length;Wt++){const se=Y[Wt];if(!F.hasOwnProperty(se)||Qt[se]!==F[se])return!1}return!0}(ii.params,mi.params)){const _n=[],Bn=se.matchStyles(ii.value,ii.params,_n),Wn=se.matchStyles(mi.value,mi.params,_n);_n.length?this._engine.reportError(_n):this._engine.afterFlush(()=>{Jt(F,Bn),Xt(F,Wn)})}return}const un=M(this._engine.playersByElement,F,[]);un.forEach(_n=>{_n.namespaceId==this.id&&_n.triggerName==Y&&_n.queued&&_n.destroy()});let Mn=se.matchTransition(ii.value,mi.value,F,mi.params),tn=!1;if(!Mn){if(!Wt)return;Mn=se.fallbackTransition,tn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:F,triggerName:Y,transition:Mn,fromState:ii,toState:mi,player:Ie,isFallbackTransition:tn}),tn||(po(F,pn),Ie.onStart(()=>{$r(F,pn)})),Ie.onDone(()=>{let _n=this.players.indexOf(Ie);_n>=0&&this.players.splice(_n,1);const Bn=this._engine.playersByElement.get(F);if(Bn){let Wn=Bn.indexOf(Ie);Wn>=0&&Bn.splice(Wn,1)}}),this.players.push(Ie),un.push(Ie),Ie}deregister(F){delete this._triggers[F],this._engine.statesByElement.forEach((Y,_t)=>{delete Y[F]}),this._elementListeners.forEach((Y,_t)=>{this._elementListeners.set(_t,Y.filter(Wt=>Wt.name!=F))})}clearElementCache(F){this._engine.statesByElement.delete(F),this._elementListeners.delete(F);const Y=this._engine.playersByElement.get(F);Y&&(Y.forEach(_t=>_t.destroy()),this._engine.playersByElement.delete(F))}_signalRemovalForInnerTriggers(F,Y){const _t=this._engine.driver.query(F,ce,!0);_t.forEach(Wt=>{if(Wt[vn])return;const se=this._engine.fetchNamespacesByElement(Wt);se.size?se.forEach(Ie=>Ie.triggerLeaveAnimation(Wt,Y,!1,!0)):this.clearElementCache(Wt)}),this._engine.afterFlushAnimationsDone(()=>_t.forEach(Wt=>this.clearElementCache(Wt)))}triggerLeaveAnimation(F,Y,_t,Wt){const se=this._engine.statesByElement.get(F);if(se){const Ie=[];if(Object.keys(se).forEach(xe=>{if(this._triggers[xe]){const ii=this.trigger(F,xe,xo,Wt);ii&&Ie.push(ii)}}),Ie.length)return this._engine.markElementAsRemoved(this.id,F,!0,Y),_t&&o(Ie).onDone(()=>this._engine.processLeaveNode(F)),!0}return!1}prepareLeaveAnimationListeners(F){const Y=this._elementListeners.get(F),_t=this._engine.statesByElement.get(F);if(Y&&_t){const Wt=new Set;Y.forEach(se=>{const Ie=se.name;if(Wt.has(Ie))return;Wt.add(Ie);const ii=this._triggers[Ie].fallbackTransition,mi=_t[Ie]||Eo,Bi=new Qo(xo),Gi=new yn(this.id,Ie,F);this._engine.totalQueuedPlayers++,this._queue.push({element:F,triggerName:Ie,transition:ii,fromState:mi,toState:Bi,player:Gi,isFallbackTransition:!0})})}}removeNode(F,Y){const _t=this._engine;if(F.childElementCount&&this._signalRemovalForInnerTriggers(F,Y),this.triggerLeaveAnimation(F,Y,!0))return;let Wt=!1;if(_t.totalAnimations){const se=_t.players.length?_t.playersByQueriedElement.get(F):[];if(se&&se.length)Wt=!0;else{let Ie=F;for(;Ie=Ie.parentNode;)if(_t.statesByElement.get(Ie)){Wt=!0;break}}}if(this.prepareLeaveAnimationListeners(F),Wt)_t.markElementAsRemoved(this.id,F,!1,Y);else{const se=F[vn];(!se||se===Zo)&&(_t.afterFlush(()=>this.clearElementCache(F)),_t.destroyInnerAnimations(F),_t._onRemovalComplete(F,Y))}}insertNode(F,Y){po(F,this._hostClassName)}drainQueuedTransitions(F){const Y=[];return this._queue.forEach(_t=>{const Wt=_t.player;if(Wt.destroyed)return;const se=_t.element,Ie=this._elementListeners.get(se);Ie&&Ie.forEach(xe=>{if(xe.name==_t.triggerName){const ii=w(se,_t.triggerName,_t.fromState.value,_t.toState.value);ii._data=F,c(_t.player,xe.phase,ii,xe.callback)}}),Wt.markedForDestroy?this._engine.afterFlush(()=>{Wt.destroy()}):Y.push(_t)}),this._queue=[],Y.sort((_t,Wt)=>{const se=_t.transition.ast.depCount,Ie=Wt.transition.ast.depCount;return 0==se||0==Ie?se-Ie:this._engine.driver.containsElement(_t.element,Wt.element)?1:-1})}destroy(F){this.players.forEach(Y=>Y.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,F)}elementContainsData(F){let Y=!1;return this._elementListeners.has(F)&&(Y=!0),Y=!!this._queue.find(_t=>_t.element===F)||Y,Y}}class Ts{constructor(F,Y,_t){this.bodyNode=F,this.driver=Y,this._normalizer=_t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(Wt,se)=>{}}_onRemovalComplete(F,Y){this.onRemovalComplete(F,Y)}get queuedPlayers(){const F=[];return this._namespaceList.forEach(Y=>{Y.players.forEach(_t=>{_t.queued&&F.push(_t)})}),F}createNamespace(F,Y){const _t=new Po(F,Y,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,Y)?this._balanceNamespaceList(_t,Y):(this.newHostElements.set(Y,_t),this.collectEnterElement(Y)),this._namespaceLookup[F]=_t}_balanceNamespaceList(F,Y){const _t=this._namespaceList.length-1;if(_t>=0){let Wt=!1;for(let se=_t;se>=0;se--)if(this.driver.containsElement(this._namespaceList[se].hostElement,Y)){this._namespaceList.splice(se+1,0,F),Wt=!0;break}Wt||this._namespaceList.splice(0,0,F)}else this._namespaceList.push(F);return this.namespacesByHostElement.set(Y,F),F}register(F,Y){let _t=this._namespaceLookup[F];return _t||(_t=this.createNamespace(F,Y)),_t}registerTrigger(F,Y,_t){let Wt=this._namespaceLookup[F];Wt&&Wt.register(Y,_t)&&this.totalAnimations++}destroy(F,Y){if(!F)return;const _t=this._fetchNamespace(F);this.afterFlush(()=>{this.namespacesByHostElement.delete(_t.hostElement),delete this._namespaceLookup[F];const Wt=this._namespaceList.indexOf(_t);Wt>=0&&this._namespaceList.splice(Wt,1)}),this.afterFlushAnimationsDone(()=>_t.destroy(Y))}_fetchNamespace(F){return this._namespaceLookup[F]}fetchNamespacesByElement(F){const Y=new Set,_t=this.statesByElement.get(F);if(_t){const Wt=Object.keys(_t);for(let se=0;se<Wt.length;se++){const Ie=_t[Wt[se]].namespaceId;if(Ie){const xe=this._fetchNamespace(Ie);xe&&Y.add(xe)}}}return Y}trigger(F,Y,_t,Wt){if(Sr(Y)){const se=this._fetchNamespace(F);if(se)return se.trigger(Y,_t,Wt),!0}return!1}insertNode(F,Y,_t,Wt){if(!Sr(Y))return;const se=Y[vn];if(se&&se.setForRemoval){se.setForRemoval=!1,se.setForMove=!0;const Ie=this.collectedLeaveElements.indexOf(Y);Ie>=0&&this.collectedLeaveElements.splice(Ie,1)}if(F){const Ie=this._fetchNamespace(F);Ie&&Ie.insertNode(Y,_t)}Wt&&this.collectEnterElement(Y)}collectEnterElement(F){this.collectedEnterElements.push(F)}markElementAsDisabled(F,Y){Y?this.disabledNodes.has(F)||(this.disabledNodes.add(F),po(F,rr)):this.disabledNodes.has(F)&&(this.disabledNodes.delete(F),$r(F,rr))}removeNode(F,Y,_t,Wt){if(Sr(Y)){const se=F?this._fetchNamespace(F):null;if(se?se.removeNode(Y,Wt):this.markElementAsRemoved(F,Y,!1,Wt),_t){const Ie=this.namespacesByHostElement.get(Y);Ie&&Ie.id!==F&&Ie.removeNode(Y,Wt)}}else this._onRemovalComplete(Y,Wt)}markElementAsRemoved(F,Y,_t,Wt){this.collectedLeaveElements.push(Y),Y[vn]={namespaceId:F,setForRemoval:Wt,hasAnimation:_t,removedBeforeQueried:!1}}listen(F,Y,_t,Wt,se){return Sr(Y)?this._fetchNamespace(F).listen(Y,_t,Wt,se):()=>{}}_buildInstruction(F,Y,_t,Wt,se){return F.transition.build(this.driver,F.element,F.fromState.value,F.toState.value,_t,Wt,F.fromState.options,F.toState.options,Y,se)}destroyInnerAnimations(F){let Y=this.driver.query(F,ce,!0);Y.forEach(_t=>this.destroyActiveAnimationsForElement(_t)),0!=this.playersByQueriedElement.size&&(Y=this.driver.query(F,de,!0),Y.forEach(_t=>this.finishActiveQueriedAnimationOnElement(_t)))}destroyActiveAnimationsForElement(F){const Y=this.playersByElement.get(F);Y&&Y.forEach(_t=>{_t.queued?_t.markedForDestroy=!0:_t.destroy()})}finishActiveQueriedAnimationOnElement(F){const Y=this.playersByQueriedElement.get(F);Y&&Y.forEach(_t=>_t.finish())}whenRenderingDone(){return new Promise(F=>{if(this.players.length)return o(this.players).onDone(()=>F());F()})}processLeaveNode(F){var Y;const _t=F[vn];if(_t&&_t.setForRemoval){if(F[vn]=Zo,_t.namespaceId){this.destroyInnerAnimations(F);const Wt=this._fetchNamespace(_t.namespaceId);Wt&&Wt.clearElementCache(F)}this._onRemovalComplete(F,_t.setForRemoval)}(null===(Y=F.classList)||void 0===Y?void 0:Y.contains(rr))&&this.markElementAsDisabled(F,!1),this.driver.query(F,".ng-animate-disabled",!0).forEach(Wt=>{this.markElementAsDisabled(Wt,!1)})}flush(F=-1){let Y=[];if(this.newHostElements.size&&(this.newHostElements.forEach((_t,Wt)=>this._balanceNamespaceList(_t,Wt)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let _t=0;_t<this.collectedEnterElements.length;_t++)po(this.collectedEnterElements[_t],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const _t=[];try{Y=this._flushAnimations(_t,F)}finally{for(let Wt=0;Wt<_t.length;Wt++)_t[Wt]()}}else for(let _t=0;_t<this.collectedLeaveElements.length;_t++)this.processLeaveNode(this.collectedLeaveElements[_t]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(_t=>_t()),this._flushFns=[],this._whenQuietFns.length){const _t=this._whenQuietFns;this._whenQuietFns=[],Y.length?o(Y).onDone(()=>{_t.forEach(Wt=>Wt())}):_t.forEach(Wt=>Wt())}}reportError(F){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${F.join("\n")}`)}_flushAnimations(F,Y){const _t=new ve,Wt=[],se=new Map,Ie=[],xe=new Map,ii=new Map,mi=new Map,Bi=new Set;this.disabledNodes.forEach(Qi=>{Bi.add(Qi);const nn=this.driver.query(Qi,".ng-animate-queued",!0);for(let on=0;on<nn.length;on++)Bi.add(nn[on])});const Gi=this.bodyNode,un=Array.from(this.statesByElement.keys()),Mn=wr(un,this.collectedEnterElements),tn=new Map;let _n=0;Mn.forEach((Qi,nn)=>{const on=it+_n++;tn.set(nn,on),Qi.forEach(An=>po(An,on))});const Bn=[],Wn=new Set,Mo=new Set;for(let Qi=0;Qi<this.collectedLeaveElements.length;Qi++){const nn=this.collectedLeaveElements[Qi],on=nn[vn];on&&on.setForRemoval&&(Bn.push(nn),Wn.add(nn),on.hasAnimation?this.driver.query(nn,".ng-star-inserted",!0).forEach(An=>Wn.add(An)):Mo.add(nn))}const sr=new Map,Vo=wr(un,Array.from(Wn));Vo.forEach((Qi,nn)=>{const on=rt+_n++;sr.set(nn,on),Qi.forEach(An=>po(An,on))}),F.push(()=>{Mn.forEach((Qi,nn)=>{const on=tn.get(nn);Qi.forEach(An=>$r(An,on))}),Vo.forEach((Qi,nn)=>{const on=sr.get(nn);Qi.forEach(An=>$r(An,on))}),Bn.forEach(Qi=>{this.processLeaveNode(Qi)})});const Gr=[],Qr=[];for(let Qi=this._namespaceList.length-1;Qi>=0;Qi--)this._namespaceList[Qi].drainQueuedTransitions(Y).forEach(on=>{const An=on.player,On=on.element;if(Gr.push(An),this.collectedEnterElements.length){const ps=On[vn];if(ps&&ps.setForMove)return void An.destroy()}const Er=!Gi||!this.driver.containsElement(Gi,On),Ar=sr.get(On),es=tn.get(On),Qn=this._buildInstruction(on,_t,es,Ar,Er);if(Qn.errors&&Qn.errors.length)Qr.push(Qn);else{if(Er)return An.onStart(()=>Jt(On,Qn.fromStyles)),An.onDestroy(()=>Xt(On,Qn.toStyles)),void Wt.push(An);if(on.isFallbackTransition)return An.onStart(()=>Jt(On,Qn.fromStyles)),An.onDestroy(()=>Xt(On,Qn.toStyles)),void Wt.push(An);Qn.timelines.forEach(ps=>ps.stretchStartingKeyframe=!0),_t.append(On,Qn.timelines),Ie.push({instruction:Qn,player:An,element:On}),Qn.queriedElements.forEach(ps=>M(xe,ps,[]).push(An)),Qn.preStyleProps.forEach((ps,fs)=>{const zs=Object.keys(ps);if(zs.length){let fr=ii.get(fs);fr||ii.set(fs,fr=new Set),zs.forEach(Wr=>fr.add(Wr))}}),Qn.postStyleProps.forEach((ps,fs)=>{const zs=Object.keys(ps);let fr=mi.get(fs);fr||mi.set(fs,fr=new Set),zs.forEach(Wr=>fr.add(Wr))})}});if(Qr.length){const Qi=[];Qr.forEach(nn=>{Qi.push(`@${nn.triggerName} has failed due to:\n`),nn.errors.forEach(on=>Qi.push(`- ${on}\n`))}),Gr.forEach(nn=>nn.destroy()),this.reportError(Qi)}const Uo=new Map,Os=new Map;Ie.forEach(Qi=>{const nn=Qi.element;_t.has(nn)&&(Os.set(nn,nn),this._beforeAnimationBuild(Qi.player.namespaceId,Qi.instruction,Uo))}),Wt.forEach(Qi=>{const nn=Qi.element;this._getPreviousPlayers(nn,!1,Qi.namespaceId,Qi.triggerName,null).forEach(An=>{M(Uo,nn,[]).push(An),An.destroy()})});const qr=Bn.filter(Qi=>Ta(Qi,ii,mi)),ds=new Map;Jr(ds,this.driver,Mo,mi,e.l3).forEach(Qi=>{Ta(Qi,ii,mi)&&qr.push(Qi)});const Co=new Map;Mn.forEach((Qi,nn)=>{Jr(Co,this.driver,new Set(Qi),ii,e.k1)}),qr.forEach(Qi=>{const nn=ds.get(Qi),on=Co.get(Qi);ds.set(Qi,Object.assign(Object.assign({},nn),on))});const ts=[],wa=[],ua={};Ie.forEach(Qi=>{const{element:nn,player:on,instruction:An}=Qi;if(_t.has(nn)){if(Bi.has(nn))return on.onDestroy(()=>Xt(nn,An.toStyles)),on.disabled=!0,on.overrideTotalTime(An.totalTime),void Wt.push(on);let On=ua;if(Os.size>1){let Ar=nn;const es=[];for(;Ar=Ar.parentNode;){const Qn=Os.get(Ar);if(Qn){On=Qn;break}es.push(Ar)}es.forEach(Qn=>Os.set(Qn,On))}const Er=this._buildAnimation(on.namespaceId,An,Uo,se,Co,ds);if(on.setRealPlayer(Er),On===ua)ts.push(on);else{const Ar=this.playersByElement.get(On);Ar&&Ar.length&&(on.parentPlayer=o(Ar)),Wt.push(on)}}else Jt(nn,An.fromStyles),on.onDestroy(()=>Xt(nn,An.toStyles)),wa.push(on),Bi.has(nn)&&Wt.push(on)}),wa.forEach(Qi=>{const nn=se.get(Qi.element);if(nn&&nn.length){const on=o(nn);Qi.setRealPlayer(on)}}),Wt.forEach(Qi=>{Qi.parentPlayer?Qi.syncPlayerEvents(Qi.parentPlayer):Qi.destroy()});for(let Qi=0;Qi<Bn.length;Qi++){const nn=Bn[Qi],on=nn[vn];if($r(nn,rt),on&&on.hasAnimation)continue;let An=[];if(xe.size){let Er=xe.get(nn);Er&&Er.length&&An.push(...Er);let Ar=this.driver.query(nn,de,!0);for(let es=0;es<Ar.length;es++){let Qn=xe.get(Ar[es]);Qn&&Qn.length&&An.push(...Qn)}}const On=An.filter(Er=>!Er.destroyed);On.length?Js(this,nn,On):this.processLeaveNode(nn)}return Bn.length=0,ts.forEach(Qi=>{this.players.push(Qi),Qi.onDone(()=>{Qi.destroy();const nn=this.players.indexOf(Qi);this.players.splice(nn,1)}),Qi.play()}),ts}elementContainsData(F,Y){let _t=!1;const Wt=Y[vn];return Wt&&Wt.setForRemoval&&(_t=!0),this.playersByElement.has(Y)&&(_t=!0),this.playersByQueriedElement.has(Y)&&(_t=!0),this.statesByElement.has(Y)&&(_t=!0),this._fetchNamespace(F).elementContainsData(Y)||_t}afterFlush(F){this._flushFns.push(F)}afterFlushAnimationsDone(F){this._whenQuietFns.push(F)}_getPreviousPlayers(F,Y,_t,Wt,se){let Ie=[];if(Y){const xe=this.playersByQueriedElement.get(F);xe&&(Ie=xe)}else{const xe=this.playersByElement.get(F);if(xe){const ii=!se||se==xo;xe.forEach(mi=>{mi.queued||!ii&&mi.triggerName!=Wt||Ie.push(mi)})}}return(_t||Wt)&&(Ie=Ie.filter(xe=>!(_t&&_t!=xe.namespaceId||Wt&&Wt!=xe.triggerName))),Ie}_beforeAnimationBuild(F,Y,_t){const se=Y.element,Ie=Y.isRemovalTransition?void 0:F,xe=Y.isRemovalTransition?void 0:Y.triggerName;for(const ii of Y.timelines){const mi=ii.element,Bi=mi!==se,Gi=M(_t,mi,[]);this._getPreviousPlayers(mi,Bi,Ie,xe,Y.toState).forEach(Mn=>{const tn=Mn.getRealPlayer();tn.beforeDestroy&&tn.beforeDestroy(),Mn.destroy(),Gi.push(Mn)})}Jt(se,Y.fromStyles)}_buildAnimation(F,Y,_t,Wt,se,Ie){const xe=Y.triggerName,ii=Y.element,mi=[],Bi=new Set,Gi=new Set,un=Y.timelines.map(tn=>{const _n=tn.element;Bi.add(_n);const Bn=_n[vn];if(Bn&&Bn.removedBeforeQueried)return new e.ZN(tn.duration,tn.delay);const Wn=_n!==ii,Mo=function(Qt){const F=[];return Rr(Qt,F),F}((_t.get(_n)||Kr).map(Uo=>Uo.getRealPlayer())).filter(Uo=>!!Uo.element&&Uo.element===_n),sr=se.get(_n),Vo=Ie.get(_n),Gr=s(0,this._normalizer,0,tn.keyframes,sr,Vo),Qr=this._buildPlayer(tn,Gr,Mo);if(tn.subTimeline&&Wt&&Gi.add(_n),Wn){const Uo=new yn(F,xe,_n);Uo.setRealPlayer(Qr),mi.push(Uo)}return Qr});mi.forEach(tn=>{M(this.playersByQueriedElement,tn.element,[]).push(tn),tn.onDone(()=>function(Qt,F,Y){let _t;if(Qt instanceof Map){if(_t=Qt.get(F),_t){if(_t.length){const Wt=_t.indexOf(Y);_t.splice(Wt,1)}0==_t.length&&Qt.delete(F)}}else if(_t=Qt[F],_t){if(_t.length){const Wt=_t.indexOf(Y);_t.splice(Wt,1)}0==_t.length&&delete Qt[F]}return _t}(this.playersByQueriedElement,tn.element,tn))}),Bi.forEach(tn=>po(tn,Ye));const Mn=o(un);return Mn.onDestroy(()=>{Bi.forEach(tn=>$r(tn,Ye)),Xt(ii,Y.toStyles)}),Gi.forEach(tn=>{M(Wt,tn,[]).push(Mn)}),Mn}_buildPlayer(F,Y,_t){return Y.length>0?this.driver.animate(F.element,Y,F.duration,F.delay,F.easing,_t):new e.ZN(F.duration,F.delay)}}class yn{constructor(F,Y,_t){this.namespaceId=F,this.triggerName=Y,this.element=_t,this._player=new e.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(F){this._containsRealPlayer||(this._player=F,Object.keys(this._queuedCallbacks).forEach(Y=>{this._queuedCallbacks[Y].forEach(_t=>c(F,Y,void 0,_t))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(F.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(F){this.totalTime=F}syncPlayerEvents(F){const Y=this._player;Y.triggerCallback&&F.onStart(()=>Y.triggerCallback("start")),F.onDone(()=>this.finish()),F.onDestroy(()=>this.destroy())}_queueEvent(F,Y){M(this._queuedCallbacks,F,[]).push(Y)}onDone(F){this.queued&&this._queueEvent("done",F),this._player.onDone(F)}onStart(F){this.queued&&this._queueEvent("start",F),this._player.onStart(F)}onDestroy(F){this.queued&&this._queueEvent("destroy",F),this._player.onDestroy(F)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(F){this.queued||this._player.setPosition(F)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(F){const Y=this._player;Y.triggerCallback&&Y.triggerCallback(F)}}function Sr(Qt){return Qt&&1===Qt.nodeType}function Fo(Qt,F){const Y=Qt.style.display;return Qt.style.display=null!=F?F:"none",Y}function Jr(Qt,F,Y,_t,Wt){const se=[];Y.forEach(ii=>se.push(Fo(ii)));const Ie=[];_t.forEach((ii,mi)=>{const Bi={};ii.forEach(Gi=>{const un=Bi[Gi]=F.computeStyle(mi,Gi,Wt);(!un||0==un.length)&&(mi[vn]=Hn,Ie.push(mi))}),Qt.set(mi,Bi)});let xe=0;return Y.forEach(ii=>Fo(ii,se[xe++])),Ie}function wr(Qt,F){const Y=new Map;if(Qt.forEach(xe=>Y.set(xe,[])),0==F.length)return Y;const Wt=new Set(F),se=new Map;function Ie(xe){if(!xe)return 1;let ii=se.get(xe);if(ii)return ii;const mi=xe.parentNode;return ii=Y.has(mi)?mi:Wt.has(mi)?1:Ie(mi),se.set(xe,ii),ii}return F.forEach(xe=>{const ii=Ie(xe);1!==ii&&Y.get(ii).push(xe)}),Y}function po(Qt,F){var Y;null===(Y=Qt.classList)||void 0===Y||Y.add(F)}function $r(Qt,F){var Y;null===(Y=Qt.classList)||void 0===Y||Y.remove(F)}function Js(Qt,F,Y){o(Y).onDone(()=>Qt.processLeaveNode(F))}function Rr(Qt,F){for(let Y=0;Y<Qt.length;Y++){const _t=Qt[Y];_t instanceof e.ZE?Rr(_t.players,F):F.push(_t)}}function Ta(Qt,F,Y){const _t=Y.get(Qt);if(!_t)return!1;let Wt=F.get(Qt);return Wt?_t.forEach(se=>Wt.add(se)):F.set(Qt,_t),Y.delete(Qt),!0}class Dr{constructor(F,Y,_t){this.bodyNode=F,this._driver=Y,this._normalizer=_t,this._triggerCache={},this.onRemovalComplete=(Wt,se)=>{},this._transitionEngine=new Ts(F,Y,_t),this._timelineEngine=new $o(F,Y,_t),this._transitionEngine.onRemovalComplete=(Wt,se)=>this.onRemovalComplete(Wt,se)}registerTrigger(F,Y,_t,Wt,se){const Ie=F+"-"+Wt;let xe=this._triggerCache[Ie];if(!xe){const ii=[],mi=We(this._driver,se,ii);if(ii.length)throw new Error(`The animation trigger "${Wt}" has failed to build due to the following errors:\n - ${ii.join("\n - ")}`);xe=function(Qt,F,Y){return new ho(Qt,F,Y)}(Wt,mi,this._normalizer),this._triggerCache[Ie]=xe}this._transitionEngine.registerTrigger(Y,Wt,xe)}register(F,Y){this._transitionEngine.register(F,Y)}destroy(F,Y){this._transitionEngine.destroy(F,Y)}onInsert(F,Y,_t,Wt){this._transitionEngine.insertNode(F,Y,_t,Wt)}onRemove(F,Y,_t,Wt){this._transitionEngine.removeNode(F,Y,Wt||!1,_t)}disableAnimations(F,Y){this._transitionEngine.markElementAsDisabled(F,Y)}process(F,Y,_t,Wt){if("@"==_t.charAt(0)){const[se,Ie]=U(_t);this._timelineEngine.command(se,Y,Ie,Wt)}else this._transitionEngine.trigger(F,Y,_t,Wt)}listen(F,Y,_t,Wt,se){if("@"==_t.charAt(0)){const[Ie,xe]=U(_t);return this._timelineEngine.listen(Ie,Y,xe,se)}return this._transitionEngine.listen(F,Y,_t,Wt,se)}flush(F=-1){this._transitionEngine.flush(F)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function la(Qt,F){let Y=null,_t=null;return Array.isArray(F)&&F.length?(Y=br(F[0]),F.length>1&&(_t=br(F[F.length-1]))):F&&(Y=br(F)),Y||_t?new Cs(Qt,Y,_t):null}let Cs=(()=>{class Qt{constructor(Y,_t,Wt){this._element=Y,this._startStyles=_t,this._endStyles=Wt,this._state=0;let se=Qt.initialStylesByElement.get(Y);se||Qt.initialStylesByElement.set(Y,se={}),this._initialStyles=se}start(){this._state<1&&(this._startStyles&&Xt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xt(this._element,this._initialStyles),this._endStyles&&(Xt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Qt.initialStylesByElement.delete(this._element),this._startStyles&&(Jt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Jt(this._element,this._endStyles),this._endStyles=null),Xt(this._element,this._initialStyles),this._state=3)}}return Qt.initialStylesByElement=new WeakMap,Qt})();function br(Qt){let F=null;const Y=Object.keys(Qt);for(let _t=0;_t<Y.length;_t++){const Wt=Y[_t];xa(Wt)&&(F=F||{},F[Wt]=Qt[Wt])}return F}function xa(Qt){return"display"===Qt||"position"===Qt}const ls="animation",zo="animationend";class Do{constructor(F,Y,_t,Wt,se,Ie,xe){this._element=F,this._name=Y,this._duration=_t,this._delay=Wt,this._easing=se,this._fillMode=Ie,this._onDoneFn=xe,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=ii=>this._handleCallback(ii)}apply(){(function(Qt,F){const Y=pr(Qt,"").trim();let _t=0;Y.length&&(function(Qt,F){let Y=0;for(let _t=0;_t<Qt.length;_t++)","===Qt.charAt(_t)&&Y++;return Y}(Y)+1,F=`${Y}, ${F}`),Bo(Qt,"",F)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),us(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Io(this._element,this._name,"paused")}resume(){Io(this._element,this._name,"running")}setPosition(F){const Y=Mr(this._element,this._name);this._position=F*this._duration,Bo(this._element,"Delay",`-${this._position}ms`,Y)}getPosition(){return this._position}_handleCallback(F){const Y=F._ngTestManualTimestamp||Date.now(),_t=1e3*parseFloat(F.elapsedTime.toFixed(3));F.animationName==this._name&&Math.max(Y-this._startTime,0)>=this._delay&&_t>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),us(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(Qt,F){const _t=pr(Qt,"").split(","),Wt=qo(_t,F);Wt>=0&&(_t.splice(Wt,1),Bo(Qt,"",_t.join(",")))}(this._element,this._name))}}function Io(Qt,F,Y){Bo(Qt,"PlayState",Y,Mr(Qt,F))}function Mr(Qt,F){const Y=pr(Qt,"");return Y.indexOf(",")>0?qo(Y.split(","),F):qo([Y],F)}function qo(Qt,F){for(let Y=0;Y<Qt.length;Y++)if(Qt[Y].indexOf(F)>=0)return Y;return-1}function us(Qt,F,Y){Y?Qt.removeEventListener(zo,F):Qt.addEventListener(zo,F)}function Bo(Qt,F,Y,_t){const Wt=ls+F;if(null!=_t){const se=Qt.style[Wt];if(se.length){const Ie=se.split(",");Ie[_t]=Y,Y=Ie.join(",")}}Qt.style[Wt]=Y}function pr(Qt,F){return Qt.style[ls+F]||""}class hs{constructor(F,Y,_t,Wt,se,Ie,xe,ii){this.element=F,this.keyframes=Y,this.animationName=_t,this._duration=Wt,this._delay=se,this._finalStyles=xe,this._specialStyles=ii,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=Ie||"linear",this.totalTime=Wt+se,this._buildStyler()}onStart(F){this._onStartFns.push(F)}onDone(F){this._onDoneFns.push(F)}onDestroy(F){this._onDestroyFns.push(F)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(F=>F()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(F=>F()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(F=>F()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(F){this._styler.setPosition(F)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Do(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(F){const Y="start"==F?this._onStartFns:this._onDoneFns;Y.forEach(_t=>_t()),Y.length=0}beforeDestroy(){this.init();const F={};if(this.hasStarted()){const Y=this._state>=3;Object.keys(this._finalStyles).forEach(_t=>{"offset"!=_t&&(F[_t]=Y?this._finalStyles[_t]:kt(this.element,_t))})}this.currentSnapshot=F}}class go extends e.ZN{constructor(F,Y){super(),this.element=F,this._startingStyles={},this.__initialized=!1,this._styles=tt(Y)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(F=>{this._startingStyles[F]=this.element.style[F]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(F=>this.element.style.setProperty(F,this._styles[F])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(F=>{const Y=this._startingStyles[F];Y?this.element.style.setProperty(F,Y):this.element.style.removeProperty(F)}),this._startingStyles=null,super.destroy())}}class Hr{constructor(){this._count=0}validateStyleProperty(F){return Ct(F)}matchesElement(F,Y){return!1}containsElement(F,Y){return yt(F,Y)}query(F,Y,_t){return ut(F,Y,_t)}computeStyle(F,Y,_t){return window.getComputedStyle(F)[Y]}buildKeyframeElement(F,Y,_t){_t=_t.map(xe=>tt(xe));let Wt=`@keyframes ${Y} {\n`,se="";_t.forEach(xe=>{se=" ";const ii=parseFloat(xe.offset);Wt+=`${se}${100*ii}% {\n`,se+=" ",Object.keys(xe).forEach(mi=>{const Bi=xe[mi];switch(mi){case"offset":return;case"easing":return void(Bi&&(Wt+=`${se}animation-timing-function: ${Bi};\n`));default:return void(Wt+=`${se}${mi}: ${Bi};\n`)}}),Wt+=`${se}}\n`}),Wt+="}\n";const Ie=document.createElement("style");return Ie.textContent=Wt,Ie}animate(F,Y,_t,Wt,se,Ie=[],xe){const ii=Ie.filter(Bn=>Bn instanceof hs),mi={};oe(_t,Wt)&&ii.forEach(Bn=>{let Wn=Bn.currentSnapshot;Object.keys(Wn).forEach(Mo=>mi[Mo]=Wn[Mo])});const Bi=function(Qt){let F={};return Qt&&(Array.isArray(Qt)?Qt:[Qt]).forEach(_t=>{Object.keys(_t).forEach(Wt=>{"offset"==Wt||"easing"==Wt||(F[Wt]=_t[Wt])})}),F}(Y=re(F,Y,mi));if(0==_t)return new go(F,Bi);const Gi="gen_css_kf_"+this._count++,un=this.buildKeyframeElement(F,Gi,Y);(function(Qt){var F;const Y=null===(F=Qt.getRootNode)||void 0===F?void 0:F.call(Qt);return"undefined"!=typeof ShadowRoot&&Y instanceof ShadowRoot?Y:document.head})(F).appendChild(un);const tn=la(F,Y),_n=new hs(F,Y,Gi,_t,Wt,se,Bi,tn);return _n.onDestroy(()=>{var Qt;(Qt=un).parentNode.removeChild(Qt)}),_n}}class Ss{constructor(F,Y,_t,Wt){this.element=F,this.keyframes=Y,this.options=_t,this._specialStyles=Wt,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=_t.duration,this._delay=_t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(F=>F()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const F=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,F,this.options),this._finalKeyframe=F.length?F[F.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(F,Y,_t){return F.animate(Y,_t)}onStart(F){this._onStartFns.push(F)}onDone(F){this._onDoneFns.push(F)}onDestroy(F){this._onDestroyFns.push(F)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(F=>F()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(F=>F()),this._onDestroyFns=[])}setPosition(F){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=F*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const F={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(Y=>{"offset"!=Y&&(F[Y]=this._finished?this._finalKeyframe[Y]:kt(this.element,Y))}),this.currentSnapshot=F}triggerCallback(F){const Y="start"==F?this._onStartFns:this._onDoneFns;Y.forEach(_t=>_t()),Y.length=0}}class Dt{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(P().toString()),this._cssKeyframesDriver=new Hr}validateStyleProperty(F){return Ct(F)}matchesElement(F,Y){return!1}containsElement(F,Y){return yt(F,Y)}query(F,Y,_t){return ut(F,Y,_t)}computeStyle(F,Y,_t){return window.getComputedStyle(F)[Y]}overrideWebAnimationsSupport(F){this._isNativeImpl=F}animate(F,Y,_t,Wt,se,Ie=[],xe){if(!xe&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(F,Y,_t,Wt,se,Ie);const Bi={duration:_t,delay:Wt,fill:0==Wt?"both":"forwards"};se&&(Bi.easing=se);const Gi={},un=Ie.filter(tn=>tn instanceof Ss);oe(_t,Wt)&&un.forEach(tn=>{let _n=tn.currentSnapshot;Object.keys(_n).forEach(Bn=>Gi[Bn]=_n[Bn])});const Mn=la(F,Y=re(F,Y=Y.map(tn=>oi(tn,!1)),Gi));return new Ss(F,Y,Bi,Mn)}}function P(){return t()&&Element.prototype.animate||{}}var G=f(69808);let St=(()=>{class Qt extends e._j{constructor(Y,_t){super(),this._nextAnimationId=0,this._renderer=Y.createRenderer(_t.body,{id:"0",encapsulation:b.ifc.None,styles:[],data:{animation:[]}})}build(Y){const _t=this._nextAnimationId.toString();this._nextAnimationId++;const Wt=Array.isArray(Y)?(0,e.vP)(Y):Y;return Ni(this._renderer,null,_t,"register",[Wt]),new Ee(_t,this._renderer)}}return Qt.\u0275fac=function(Y){return new(Y||Qt)(b.LFG(b.FYo),b.LFG(G.K0))},Qt.\u0275prov=b.Yz7({token:Qt,factory:Qt.\u0275fac}),Qt})();class Ee extends e.LC{constructor(F,Y){super(),this._id=F,this._renderer=Y}create(F,Y){return new ei(this._id,F,Y||{},this._renderer)}}class ei{constructor(F,Y,_t,Wt){this.id=F,this.element=Y,this._renderer=Wt,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",_t)}_listen(F,Y){return this._renderer.listen(this.element,`@@${this.id}:${F}`,Y)}_command(F,...Y){return Ni(this._renderer,this.element,this.id,F,Y)}onDone(F){this._listen("done",F)}onStart(F){this._listen("start",F)}onDestroy(F){this._listen("destroy",F)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(F){this._command("setPosition",F)}getPosition(){var F,Y;return null!==(Y=null===(F=this._renderer.engine.players[+this.id])||void 0===F?void 0:F.getPosition())&&void 0!==Y?Y:0}}function Ni(Qt,F,Y,_t,Wt){return Qt.setProperty(F,`@@${Y}:${_t}`,Wt)}const Rn="@.disabled";let Vn=(()=>{class Qt{constructor(Y,_t,Wt){this.delegate=Y,this.engine=_t,this._zone=Wt,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),_t.onRemovalComplete=(se,Ie)=>{const xe=null==Ie?void 0:Ie.parentNode(se);xe&&Ie.removeChild(xe,se)}}createRenderer(Y,_t){const se=this.delegate.createRenderer(Y,_t);if(!(Y&&_t&&_t.data&&_t.data.animation)){let Bi=this._rendererCache.get(se);return Bi||(Bi=new Pn("",se,this.engine),this._rendererCache.set(se,Bi)),Bi}const Ie=_t.id,xe=_t.id+"-"+this._currentId;this._currentId++,this.engine.register(xe,Y);const ii=Bi=>{Array.isArray(Bi)?Bi.forEach(ii):this.engine.registerTrigger(Ie,xe,Y,Bi.name,Bi)};return _t.data.animation.forEach(ii),new mo(this,xe,se,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(Y,_t,Wt){Y>=0&&Y<this._microtaskId?this._zone.run(()=>_t(Wt)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(se=>{const[Ie,xe]=se;Ie(xe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([_t,Wt]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return Qt.\u0275fac=function(Y){return new(Y||Qt)(b.LFG(b.FYo),b.LFG(Dr),b.LFG(b.R0b))},Qt.\u0275prov=b.Yz7({token:Qt,factory:Qt.\u0275fac}),Qt})();class Pn{constructor(F,Y,_t){this.namespaceId=F,this.delegate=Y,this.engine=_t,this.destroyNode=this.delegate.destroyNode?Wt=>Y.destroyNode(Wt):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(F,Y){return this.delegate.createElement(F,Y)}createComment(F){return this.delegate.createComment(F)}createText(F){return this.delegate.createText(F)}appendChild(F,Y){this.delegate.appendChild(F,Y),this.engine.onInsert(this.namespaceId,Y,F,!1)}insertBefore(F,Y,_t,Wt=!0){this.delegate.insertBefore(F,Y,_t),this.engine.onInsert(this.namespaceId,Y,F,Wt)}removeChild(F,Y,_t){this.engine.onRemove(this.namespaceId,Y,this.delegate,_t)}selectRootElement(F,Y){return this.delegate.selectRootElement(F,Y)}parentNode(F){return this.delegate.parentNode(F)}nextSibling(F){return this.delegate.nextSibling(F)}setAttribute(F,Y,_t,Wt){this.delegate.setAttribute(F,Y,_t,Wt)}removeAttribute(F,Y,_t){this.delegate.removeAttribute(F,Y,_t)}addClass(F,Y){this.delegate.addClass(F,Y)}removeClass(F,Y){this.delegate.removeClass(F,Y)}setStyle(F,Y,_t,Wt){this.delegate.setStyle(F,Y,_t,Wt)}removeStyle(F,Y,_t){this.delegate.removeStyle(F,Y,_t)}setProperty(F,Y,_t){"@"==Y.charAt(0)&&Y==Rn?this.disableAnimations(F,!!_t):this.delegate.setProperty(F,Y,_t)}setValue(F,Y){this.delegate.setValue(F,Y)}listen(F,Y,_t){return this.delegate.listen(F,Y,_t)}disableAnimations(F,Y){this.engine.disableAnimations(F,Y)}}class mo extends Pn{constructor(F,Y,_t,Wt){super(Y,_t,Wt),this.factory=F,this.namespaceId=Y}setProperty(F,Y,_t){"@"==Y.charAt(0)?"."==Y.charAt(1)&&Y==Rn?this.disableAnimations(F,_t=void 0===_t||!!_t):this.engine.process(this.namespaceId,F,Y.substr(1),_t):this.delegate.setProperty(F,Y,_t)}listen(F,Y,_t){if("@"==Y.charAt(0)){const Wt=function(Qt){switch(Qt){case"body":return document.body;case"document":return document;case"window":return window;default:return Qt}}(F);let se=Y.substr(1),Ie="";return"@"!=se.charAt(0)&&([se,Ie]=function(Qt){const F=Qt.indexOf(".");return[Qt.substring(0,F),Qt.substr(F+1)]}(se)),this.engine.listen(this.namespaceId,Wt,se,Ie,xe=>{this.factory.scheduleListenerCallback(xe._data||-1,_t,xe)})}return this.delegate.listen(F,Y,_t)}}let rn=(()=>{class Qt extends Dr{constructor(Y,_t,Wt){super(Y.body,_t,Wt)}ngOnDestroy(){this.flush()}}return Qt.\u0275fac=function(Y){return new(Y||Qt)(b.LFG(G.K0),b.LFG(ot),b.LFG(Jo))},Qt.\u0275prov=b.Yz7({token:Qt,factory:Qt.\u0275fac}),Qt})();const js=new b.OlP("AnimationModuleType"),Vr=[{provide:e._j,useClass:St},{provide:Jo,useFactory:function(){return new or}},{provide:Dr,useClass:rn},{provide:b.FYo,useFactory:function(Qt,F,Y){return new Vn(Qt,F,Y)},deps:[p.se,Dr,b.R0b]}],Ur=[{provide:ot,useFactory:function(){return"function"==typeof P()?new Dt:new Hr}},{provide:js,useValue:"BrowserAnimations"},...Vr],ul=[{provide:ot,useClass:lt},{provide:js,useValue:"NoopAnimations"},...Vr];let Di=(()=>{class Qt{static withConfig(Y){return{ngModule:Qt,providers:Y.disableAnimations?ul:Ur}}}return Qt.\u0275fac=function(Y){return new(Y||Qt)},Qt.\u0275mod=b.oAB({type:Qt}),Qt.\u0275inj=b.cJS({providers:Ur,imports:[p.b2]}),Qt})()},22313:(k,B,f)=>{"use strict";f.d(B,{b2:()=>ze,H7:()=>Ti,Dx:()=>$t,q6:()=>Pt,se:()=>Gt});var b=f(69808),p=f(5e3);class e extends b.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class t extends e{static makeCurrent(){(0,b.HT)(new t)}onAndCancel(Me,Te,Xe){return Me.addEventListener(Te,Xe,!1),()=>{Me.removeEventListener(Te,Xe,!1)}}dispatchEvent(Me,Te){Me.dispatchEvent(Te)}remove(Me){Me.parentNode&&Me.parentNode.removeChild(Me)}createElement(Me,Te){return(Te=Te||this.getDefaultDocument()).createElement(Me)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Me){return Me.nodeType===Node.ELEMENT_NODE}isShadowRoot(Me){return Me instanceof DocumentFragment}getGlobalEventTarget(Me,Te){return"window"===Te?window:"document"===Te?Me:"body"===Te?Me.body:null}getBaseHref(Me){const Te=(n=n||document.querySelector("base"),n?n.getAttribute("href"):null);return null==Te?null:function($e){s=s||document.createElement("a"),s.setAttribute("href",$e);const Me=s.pathname;return"/"===Me.charAt(0)?Me:`/${Me}`}(Te)}resetBaseElement(){n=null}getUserAgent(){return window.navigator.userAgent}getCookie(Me){return(0,b.Mx)(document.cookie,Me)}}let s,n=null;const _=new p.OlP("TRANSITION_ID"),M=[{provide:p.ip1,useFactory:function($e,Me,Te){return()=>{Te.get(p.CZH).donePromise.then(()=>{const Xe=(0,b.q)(),pi=Me.querySelectorAll(`style[ng-transition="${$e}"]`);for(let Ki=0;Ki<pi.length;Ki++)Xe.remove(pi[Ki])})}},deps:[_,b.K0,p.zs3],multi:!0}];class U{static init(){(0,p.VLi)(new U)}addToWindow(Me){p.dqk.getAngularTestability=(Xe,pi=!0)=>{const Ki=Me.findTestabilityInTree(Xe,pi);if(null==Ki)throw new Error("Could not find testability for element.");return Ki},p.dqk.getAllAngularTestabilities=()=>Me.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>Me.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(Xe=>{const pi=p.dqk.getAllAngularTestabilities();let Ki=pi.length,cn=!1;const xn=function(oo){cn=cn||oo,Ki--,0==Ki&&Xe(cn)};pi.forEach(function(oo){oo.whenStable(xn)})})}findTestabilityInTree(Me,Te,Xe){if(null==Te)return null;const pi=Me.getTestability(Te);return null!=pi?pi:Xe?(0,b.q)().isShadowRoot(Te)?this.findTestabilityInTree(Me,Te.host,!0):this.findTestabilityInTree(Me,Te.parentElement,!0):null}}let V=(()=>{class $e{build(){return new XMLHttpRequest}}return $e.\u0275fac=function(Te){return new(Te||$e)},$e.\u0275prov=p.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const H=new p.OlP("EventManagerPlugins");let $=(()=>{class $e{constructor(Te,Xe){this._zone=Xe,this._eventNameToPlugin=new Map,Te.forEach(pi=>pi.manager=this),this._plugins=Te.slice().reverse()}addEventListener(Te,Xe,pi){return this._findPluginFor(Xe).addEventListener(Te,Xe,pi)}addGlobalEventListener(Te,Xe,pi){return this._findPluginFor(Xe).addGlobalEventListener(Te,Xe,pi)}getZone(){return this._zone}_findPluginFor(Te){const Xe=this._eventNameToPlugin.get(Te);if(Xe)return Xe;const pi=this._plugins;for(let Ki=0;Ki<pi.length;Ki++){const cn=pi[Ki];if(cn.supports(Te))return this._eventNameToPlugin.set(Te,cn),cn}throw new Error(`No event manager plugin found for event ${Te}`)}}return $e.\u0275fac=function(Te){return new(Te||$e)(p.LFG(H),p.LFG(p.R0b))},$e.\u0275prov=p.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class pt{constructor(Me){this._doc=Me}addGlobalEventListener(Me,Te,Xe){const pi=(0,b.q)().getGlobalEventTarget(this._doc,Me);if(!pi)throw new Error(`Unsupported event target ${pi} for event ${Te}`);return this.addEventListener(pi,Te,Xe)}}let nt=(()=>{class $e{constructor(){this._stylesSet=new Set}addStyles(Te){const Xe=new Set;Te.forEach(pi=>{this._stylesSet.has(pi)||(this._stylesSet.add(pi),Xe.add(pi))}),this.onStylesAdded(Xe)}onStylesAdded(Te){}getAllStyles(){return Array.from(this._stylesSet)}}return $e.\u0275fac=function(Te){return new(Te||$e)},$e.\u0275prov=p.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),st=(()=>{class $e extends nt{constructor(Te){super(),this._doc=Te,this._hostNodes=new Map,this._hostNodes.set(Te.head,[])}_addStylesToHost(Te,Xe,pi){Te.forEach(Ki=>{const cn=this._doc.createElement("style");cn.textContent=Ki,pi.push(Xe.appendChild(cn))})}addHost(Te){const Xe=[];this._addStylesToHost(this._stylesSet,Te,Xe),this._hostNodes.set(Te,Xe)}removeHost(Te){const Xe=this._hostNodes.get(Te);Xe&&Xe.forEach(Ct),this._hostNodes.delete(Te)}onStylesAdded(Te){this._hostNodes.forEach((Xe,pi)=>{this._addStylesToHost(Te,pi,Xe)})}ngOnDestroy(){this._hostNodes.forEach(Te=>Te.forEach(Ct))}}return $e.\u0275fac=function(Te){return new(Te||$e)(p.LFG(b.K0))},$e.\u0275prov=p.Yz7({token:$e,factory:$e.\u0275fac}),$e})();function Ct($e){(0,b.q)().remove($e)}const xt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yt=/%COMP%/g;function dt($e,Me,Te){for(let Xe=0;Xe<Me.length;Xe++){let pi=Me[Xe];Array.isArray(pi)?dt($e,pi,Te):(pi=pi.replace(yt,$e),Te.push(pi))}return Te}function it($e){return Me=>{if("__ngUnwrap__"===Me)return $e;!1===$e(Me)&&(Me.preventDefault(),Me.returnValue=!1)}}let Gt=(()=>{class $e{constructor(Te,Xe,pi){this.eventManager=Te,this.sharedStylesHost=Xe,this.appId=pi,this.rendererByCompId=new Map,this.defaultRenderer=new bt(Te)}createRenderer(Te,Xe){if(!Te||!Xe)return this.defaultRenderer;switch(Xe.encapsulation){case p.ifc.Emulated:{let pi=this.rendererByCompId.get(Xe.id);return pi||(pi=new Ye(this.eventManager,this.sharedStylesHost,Xe,this.appId),this.rendererByCompId.set(Xe.id,pi)),pi.applyToHost(Te),pi}case 1:case p.ifc.ShadowDom:return new de(this.eventManager,this.sharedStylesHost,Te,Xe);default:if(!this.rendererByCompId.has(Xe.id)){const pi=dt(Xe.id,Xe.styles,[]);this.sharedStylesHost.addStyles(pi),this.rendererByCompId.set(Xe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return $e.\u0275fac=function(Te){return new(Te||$e)(p.LFG($),p.LFG(st),p.LFG(p.AFp))},$e.\u0275prov=p.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class bt{constructor(Me){this.eventManager=Me,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Me,Te){return Te?document.createElementNS(xt[Te]||Te,Me):document.createElement(Me)}createComment(Me){return document.createComment(Me)}createText(Me){return document.createTextNode(Me)}appendChild(Me,Te){Me.appendChild(Te)}insertBefore(Me,Te,Xe){Me&&Me.insertBefore(Te,Xe)}removeChild(Me,Te){Me&&Me.removeChild(Te)}selectRootElement(Me,Te){let Xe="string"==typeof Me?document.querySelector(Me):Me;if(!Xe)throw new Error(`The selector "${Me}" did not match any elements`);return Te||(Xe.textContent=""),Xe}parentNode(Me){return Me.parentNode}nextSibling(Me){return Me.nextSibling}setAttribute(Me,Te,Xe,pi){if(pi){Te=pi+":"+Te;const Ki=xt[pi];Ki?Me.setAttributeNS(Ki,Te,Xe):Me.setAttribute(Te,Xe)}else Me.setAttribute(Te,Xe)}removeAttribute(Me,Te,Xe){if(Xe){const pi=xt[Xe];pi?Me.removeAttributeNS(pi,Te):Me.removeAttribute(`${Xe}:${Te}`)}else Me.removeAttribute(Te)}addClass(Me,Te){Me.classList.add(Te)}removeClass(Me,Te){Me.classList.remove(Te)}setStyle(Me,Te,Xe,pi){pi&(p.JOm.DashCase|p.JOm.Important)?Me.style.setProperty(Te,Xe,pi&p.JOm.Important?"important":""):Me.style[Te]=Xe}removeStyle(Me,Te,Xe){Xe&p.JOm.DashCase?Me.style.removeProperty(Te):Me.style[Te]=""}setProperty(Me,Te,Xe){Me[Te]=Xe}setValue(Me,Te){Me.nodeValue=Te}listen(Me,Te,Xe){return"string"==typeof Me?this.eventManager.addGlobalEventListener(Me,Te,it(Xe)):this.eventManager.addEventListener(Me,Te,it(Xe))}}class Ye extends bt{constructor(Me,Te,Xe,pi){super(Me),this.component=Xe;const Ki=dt(pi+"-"+Xe.id,Xe.styles,[]);Te.addStyles(Ki),this.contentAttr="_ngcontent-%COMP%".replace(yt,pi+"-"+Xe.id),this.hostAttr="_nghost-%COMP%".replace(yt,pi+"-"+Xe.id)}applyToHost(Me){super.setAttribute(Me,this.hostAttr,"")}createElement(Me,Te){const Xe=super.createElement(Me,Te);return super.setAttribute(Xe,this.contentAttr,""),Xe}}class de extends bt{constructor(Me,Te,Xe,pi){super(Me),this.sharedStylesHost=Te,this.hostEl=Xe,this.shadowRoot=Xe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ki=dt(pi.id,pi.styles,[]);for(let cn=0;cn<Ki.length;cn++){const xn=document.createElement("style");xn.textContent=Ki[cn],this.shadowRoot.appendChild(xn)}}nodeOrShadowRoot(Me){return Me===this.hostEl?this.shadowRoot:Me}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Me,Te){return super.appendChild(this.nodeOrShadowRoot(Me),Te)}insertBefore(Me,Te,Xe){return super.insertBefore(this.nodeOrShadowRoot(Me),Te,Xe)}removeChild(Me,Te){return super.removeChild(this.nodeOrShadowRoot(Me),Te)}parentNode(Me){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Me)))}}let Be=(()=>{class $e extends pt{constructor(Te){super(Te)}supports(Te){return!0}addEventListener(Te,Xe,pi){return Te.addEventListener(Xe,pi,!1),()=>this.removeEventListener(Te,Xe,pi)}removeEventListener(Te,Xe,pi){return Te.removeEventListener(Xe,pi)}}return $e.\u0275fac=function(Te){return new(Te||$e)(p.LFG(b.K0))},$e.\u0275prov=p.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const He=["alt","control","meta","shift"],vi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qe={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ne={alt:$e=>$e.altKey,control:$e=>$e.ctrlKey,meta:$e=>$e.metaKey,shift:$e=>$e.shiftKey};let oi=(()=>{class $e extends pt{constructor(Te){super(Te)}supports(Te){return null!=$e.parseEventName(Te)}addEventListener(Te,Xe,pi){const Ki=$e.parseEventName(Xe),cn=$e.eventCallback(Ki.fullKey,pi,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,b.q)().onAndCancel(Te,Ki.domEventName,cn))}static parseEventName(Te){const Xe=Te.toLowerCase().split("."),pi=Xe.shift();if(0===Xe.length||"keydown"!==pi&&"keyup"!==pi)return null;const Ki=$e._normalizeKey(Xe.pop());let cn="";if(He.forEach(oo=>{const hr=Xe.indexOf(oo);hr>-1&&(Xe.splice(hr,1),cn+=oo+".")}),cn+=Ki,0!=Xe.length||0===Ki.length)return null;const xn={};return xn.domEventName=pi,xn.fullKey=cn,xn}static getEventFullKey(Te){let Xe="",pi=function($e){let Me=$e.key;if(null==Me){if(Me=$e.keyIdentifier,null==Me)return"Unidentified";Me.startsWith("U+")&&(Me=String.fromCharCode(parseInt(Me.substring(2),16)),3===$e.location&&qe.hasOwnProperty(Me)&&(Me=qe[Me]))}return vi[Me]||Me}(Te);return pi=pi.toLowerCase()," "===pi?pi="space":"."===pi&&(pi="dot"),He.forEach(Ki=>{Ki!=pi&&Ne[Ki](Te)&&(Xe+=Ki+".")}),Xe+=pi,Xe}static eventCallback(Te,Xe,pi){return Ki=>{$e.getEventFullKey(Ki)===Te&&pi.runGuarded(()=>Xe(Ki))}}static _normalizeKey(Te){return"esc"===Te?"escape":Te}}return $e.\u0275fac=function(Te){return new(Te||$e)(p.LFG(b.K0))},$e.\u0275prov=p.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const Pt=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:b.bD},{provide:p.g9A,useValue:function(){t.makeCurrent(),U.init()},multi:!0},{provide:b.K0,useFactory:function(){return(0,p.RDi)(document),document},deps:[]}]),he=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function(){return new p.qLn},deps:[]},{provide:H,useClass:Be,multi:!0,deps:[b.K0,p.R0b,p.Lbi]},{provide:H,useClass:oi,multi:!0,deps:[b.K0]},{provide:Gt,useClass:Gt,deps:[$,st,p.AFp]},{provide:p.FYo,useExisting:Gt},{provide:nt,useExisting:st},{provide:st,useClass:st,deps:[b.K0]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:$,useClass:$,deps:[H,p.R0b]},{provide:b.JF,useClass:V,deps:[]}];let ze=(()=>{class $e{constructor(Te){if(Te)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Te){return{ngModule:$e,providers:[{provide:p.AFp,useValue:Te.appId},{provide:_,useExisting:p.AFp},M]}}}return $e.\u0275fac=function(Te){return new(Te||$e)(p.LFG($e,12))},$e.\u0275mod=p.oAB({type:$e}),$e.\u0275inj=p.cJS({providers:he,imports:[b.ez,p.hGG]}),$e})(),$t=(()=>{class $e{constructor(Te){this._doc=Te}getTitle(){return this._doc.title}setTitle(Te){this._doc.title=Te||""}}return $e.\u0275fac=function(Te){return new(Te||$e)(p.LFG(b.K0))},$e.\u0275prov=p.Yz7({token:$e,factory:function(Te){let Xe=null;return Xe=Te?new Te:new $t((0,p.LFG)(b.K0)),Xe},providedIn:"root"}),$e})();"undefined"!=typeof window&&window;let Ti=(()=>{class $e{}return $e.\u0275fac=function(Te){return new(Te||$e)},$e.\u0275prov=p.Yz7({token:$e,factory:function(Te){let Xe=null;return Xe=Te?new(Te||$e):p.LFG(Zi),Xe},providedIn:"root"}),$e})(),Zi=(()=>{class $e extends Ti{constructor(Te){super(),this._doc=Te}sanitize(Te,Xe){if(null==Xe)return null;switch(Te){case p.q3G.NONE:return Xe;case p.q3G.HTML:return(0,p.qzn)(Xe,"HTML")?(0,p.z3N)(Xe):(0,p.EiD)(this._doc,String(Xe)).toString();case p.q3G.STYLE:return(0,p.qzn)(Xe,"Style")?(0,p.z3N)(Xe):Xe;case p.q3G.SCRIPT:if((0,p.qzn)(Xe,"Script"))return(0,p.z3N)(Xe);throw new Error("unsafe value used in a script context");case p.q3G.URL:return(0,p.yhl)(Xe),(0,p.qzn)(Xe,"URL")?(0,p.z3N)(Xe):(0,p.mCW)(String(Xe));case p.q3G.RESOURCE_URL:if((0,p.qzn)(Xe,"ResourceURL"))return(0,p.z3N)(Xe);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Te} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Te){return(0,p.JVY)(Te)}bypassSecurityTrustStyle(Te){return(0,p.L6k)(Te)}bypassSecurityTrustScript(Te){return(0,p.eBb)(Te)}bypassSecurityTrustUrl(Te){return(0,p.LAX)(Te)}bypassSecurityTrustResourceUrl(Te){return(0,p.pB0)(Te)}}return $e.\u0275fac=function(Te){return new(Te||$e)(p.LFG(b.K0))},$e.\u0275prov=p.Yz7({token:$e,factory:function(Te){let Xe=null;return Xe=Te?new Te:function($e){return new Zi($e.get(b.K0))}(p.LFG(p.zs3)),Xe},providedIn:"root"}),$e})()},91083:(k,B,f)=>{"use strict";f.d(B,{gz:()=>vr,yS:()=>fr,Bz:()=>Na,lC:()=>Br});var b=f(5e3);const e=(0,f(83888).d)(ht=>function(){ht(this),this.name="EmptyError",this.message="no elements in sequence"});var t=f(79307),n=f(50727),o=f(54482),s=f(25403);function c(){return(0,o.e)((ht,q)=>{let J=null;ht._refCount++;const wt=new s.Q(q,void 0,void 0,void 0,()=>{if(!ht||ht._refCount<=0||0<--ht._refCount)return void(J=null);const Nt=ht._connection,ne=J;J=null,Nt&&(!ne||Nt===ne)&&Nt.unsubscribe(),q.unsubscribe()});ht.subscribe(wt),wt.closed||(J=ht.connect())})}class _ extends t.y{constructor(q,J){super(),this.source=q,this.subjectFactory=J,this._subject=null,this._refCount=0,this._connection=null,(0,o.A)(q)&&(this.lift=q.lift)}_subscribe(q){return this.getSubject().subscribe(q)}getSubject(){const q=this._subject;return(!q||q.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:q}=this;this._subject=this._connection=null,null==q||q.unsubscribe()}connect(){let q=this._connection;if(!q){q=this._connection=new n.w0;const J=this.getSubject();q.add(this.source.subscribe(new s.Q(J,void 0,()=>{this._teardown(),J.complete()},wt=>{this._teardown(),J.error(wt)},()=>this._teardown()))),q.closed&&(this._connection=null,q=n.w0.EMPTY)}return q}refCount(){return c()(this)}}var w=f(32076),M=f(39646),U=f(61135),V=f(39841),H=f(97272),$=f(49770),pt=f(60515),nt=f(77579);function st(ht,q,J,wt,Nt){return(ne,Se)=>{let Le=J,fi=q,ji=0;ne.subscribe(new s.Q(Se,Fn=>{const hn=ji++;fi=Le?ht(fi,Fn,hn):(Le=!0,Fn),wt&&Se.next(fi)},Nt&&(()=>{Le&&Se.next(fi),Se.complete()})))}}function Ct(ht,q){return(0,o.e)(st(ht,q,arguments.length>=2,!0))}var xt=f(39300);function yt(ht){return ht<=0?()=>pt.E:(0,o.e)((q,J)=>{let wt=[];q.subscribe(new s.Q(J,Nt=>{wt.push(Nt),ht<wt.length&&wt.shift()},()=>{for(const Nt of wt)J.next(Nt);J.complete()},void 0,()=>{wt=null}))})}function ut(ht=tt){return(0,o.e)((q,J)=>{let wt=!1;q.subscribe(new s.Q(J,Nt=>{wt=!0,J.next(Nt)},()=>wt?J.complete():J.error(ht())))})}function tt(){return new e}function lt(ht){return(0,o.e)((q,J)=>{let wt=!1;q.subscribe(new s.Q(J,Nt=>{wt=!0,J.next(Nt)},()=>{wt||J.next(ht),J.complete()}))})}var ot=f(44671),at=f(95698);function dt(ht,q){const J=arguments.length>=2;return wt=>wt.pipe(ht?(0,xt.h)((Nt,ne)=>ht(Nt,ne,wt)):ot.y,(0,at.q)(1),J?lt(q):ut(()=>new e))}var it=f(54004),rt=f(63900),Gt=f(68675),bt=f(70262),Ht=f(24351),ce=f(95577),Ye=f(18505),de=f(28746),Be=f(8189),He=f(69808);class Ke{constructor(q,J){this.id=q,this.url=J}}class vi extends Ke{constructor(q,J,wt="imperative",Nt=null){super(q,J),this.navigationTrigger=wt,this.restoredState=Nt}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qe extends Ke{constructor(q,J,wt){super(q,J),this.urlAfterRedirects=wt}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ne extends Ke{constructor(q,J,wt){super(q,J),this.reason=wt}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class oi extends Ke{constructor(q,J,wt){super(q,J),this.error=wt}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ft extends Ke{constructor(q,J,wt,Nt){super(q,J),this.urlAfterRedirects=wt,this.state=Nt}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _e extends Ke{constructor(q,J,wt,Nt){super(q,J),this.urlAfterRedirects=wt,this.state=Nt}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xt extends Ke{constructor(q,J,wt,Nt,ne){super(q,J),this.urlAfterRedirects=wt,this.state=Nt,this.shouldActivate=ne}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jt extends Ke{constructor(q,J,wt,Nt){super(q,J),this.urlAfterRedirects=wt,this.state=Nt}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rt extends Ke{constructor(q,J,wt,Nt){super(q,J),this.urlAfterRedirects=wt,this.state=Nt}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pt{constructor(q){this.route=q}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class he{constructor(q){this.route=q}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ze{constructor(q){this.snapshot=q}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class le{constructor(q){this.snapshot=q}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jt{constructor(q){this.snapshot=q}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yt{constructor(q){this.snapshot=q}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ge{constructor(q,J,wt){this.routerEvent=q,this.position=J,this.anchor=wt}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $t="primary";class oe{constructor(q){this.params=q||{}}has(q){return Object.prototype.hasOwnProperty.call(this.params,q)}get(q){if(this.has(q)){const J=this.params[q];return Array.isArray(J)?J[0]:J}return null}getAll(q){if(this.has(q)){const J=this.params[q];return Array.isArray(J)?J:[J]}return[]}get keys(){return Object.keys(this.params)}}function re(ht){return new oe(ht)}const Et="ngNavigationCancelingError";function kt(ht){const q=Error("NavigationCancelingError: "+ht);return q[Et]=!0,q}function Ae(ht,q,J){const wt=J.path.split("/");if(wt.length>ht.length||"full"===J.pathMatch&&(q.hasChildren()||wt.length<ht.length))return null;const Nt={};for(let ne=0;ne<wt.length;ne++){const Se=wt[ne],Le=ht[ne];if(Se.startsWith(":"))Nt[Se.substring(1)]=Le;else if(Se!==Le.path)return null}return{consumed:ht.slice(0,wt.length),posParams:Nt}}function Ze(ht,q){const J=ht?Object.keys(ht):void 0,wt=q?Object.keys(q):void 0;if(!J||!wt||J.length!=wt.length)return!1;let Nt;for(let ne=0;ne<J.length;ne++)if(Nt=J[ne],!li(ht[Nt],q[Nt]))return!1;return!0}function li(ht,q){if(Array.isArray(ht)&&Array.isArray(q)){if(ht.length!==q.length)return!1;const J=[...ht].sort(),wt=[...q].sort();return J.every((Nt,ne)=>wt[ne]===Nt)}return ht===q}function Fi(ht){return Array.prototype.concat.apply([],ht)}function ui(ht){return ht.length>0?ht[ht.length-1]:null}function gi(ht,q){for(const J in ht)ht.hasOwnProperty(J)&&q(ht[J],J)}function We(ht){return(0,b.CqO)(ht)?ht:(0,b.QGY)(ht)?(0,w.D)(Promise.resolve(ht)):(0,M.of)(ht)}const ue={exact:function Pe(ht,q,J){if(!Zi(ht.segments,q.segments)||!It(ht.segments,q.segments,J)||ht.numberOfChildren!==q.numberOfChildren)return!1;for(const wt in q.children)if(!ht.children[wt]||!Pe(ht.children[wt],q.children[wt],J))return!1;return!0},subset:Mt},je={exact:function(ht,q){return Ze(ht,q)},subset:function(ht,q){return Object.keys(q).length<=Object.keys(ht).length&&Object.keys(q).every(J=>li(ht[J],q[J]))},ignored:()=>!0};function ti(ht,q,J){return ue[J.paths](ht.root,q.root,J.matrixParams)&&je[J.queryParams](ht.queryParams,q.queryParams)&&!("exact"===J.fragment&&ht.fragment!==q.fragment)}function Mt(ht,q,J){return ct(ht,q,q.segments,J)}function ct(ht,q,J,wt){if(ht.segments.length>J.length){const Nt=ht.segments.slice(0,J.length);return!(!Zi(Nt,J)||q.hasChildren()||!It(Nt,J,wt))}if(ht.segments.length===J.length){if(!Zi(ht.segments,J)||!It(ht.segments,J,wt))return!1;for(const Nt in q.children)if(!ht.children[Nt]||!Mt(ht.children[Nt],q.children[Nt],wt))return!1;return!0}{const Nt=J.slice(0,ht.segments.length),ne=J.slice(ht.segments.length);return!!(Zi(ht.segments,Nt)&&It(ht.segments,Nt,wt)&&ht.children[$t])&&ct(ht.children[$t],q,ne,wt)}}function It(ht,q,J){return q.every((wt,Nt)=>je[J](ht[Nt].parameters,wt.parameters))}class te{constructor(q,J,wt){this.root=q,this.queryParams=J,this.fragment=wt}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=re(this.queryParams)),this._queryParamMap}toString(){return Te.serialize(this)}}class ve{constructor(q,J){this.segments=q,this.children=J,this.parent=null,gi(J,(wt,Nt)=>wt.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xe(this)}}class Ti{constructor(q,J){this.path=q,this.parameters=J}get parameterMap(){return this._parameterMap||(this._parameterMap=re(this.parameters)),this._parameterMap}toString(){return Pr(this)}}function Zi(ht,q){return ht.length===q.length&&ht.every((J,wt)=>J.path===q[wt].path)}class $e{}class Me{parse(q){const J=new Xr(q);return new te(J.parseRootSegment(),J.parseQueryParams(),J.parseFragment())}serialize(q){const J=`/${pi(q.root,!0)}`,wt=function(ht){const q=Object.keys(ht).map(J=>{const wt=ht[J];return Array.isArray(wt)?wt.map(Nt=>`${cn(J)}=${cn(Nt)}`).join("&"):`${cn(J)}=${cn(wt)}`}).filter(J=>!!J);return q.length?`?${q.join("&")}`:""}(q.queryParams);var ht;return`${J}${wt}${"string"==typeof q.fragment?`#${ht=q.fragment,encodeURI(ht)}`:""}`}}const Te=new Me;function Xe(ht){return ht.segments.map(q=>Pr(q)).join("/")}function pi(ht,q){if(!ht.hasChildren())return Xe(ht);if(q){const J=ht.children[$t]?pi(ht.children[$t],!1):"",wt=[];return gi(ht.children,(Nt,ne)=>{ne!==$t&&wt.push(`${ne}:${pi(Nt,!1)}`)}),wt.length>0?`${J}(${wt.join("//")})`:J}{const J=function(ht,q){let J=[];return gi(ht.children,(wt,Nt)=>{Nt===$t&&(J=J.concat(q(wt,Nt)))}),gi(ht.children,(wt,Nt)=>{Nt!==$t&&(J=J.concat(q(wt,Nt)))}),J}(ht,(wt,Nt)=>Nt===$t?[pi(ht.children[$t],!1)]:[`${Nt}:${pi(wt,!1)}`]);return 1===Object.keys(ht.children).length&&null!=ht.children[$t]?`${Xe(ht)}/${J[0]}`:`${Xe(ht)}/(${J.join("//")})`}}function Ki(ht){return encodeURIComponent(ht).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cn(ht){return Ki(ht).replace(/%3B/gi,";")}function oo(ht){return Ki(ht).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hr(ht){return decodeURIComponent(ht)}function Jo(ht){return hr(ht.replace(/\+/g,"%20"))}function Pr(ht){return`${oo(ht.path)}${function(ht){return Object.keys(ht).map(q=>`;${oo(q)}=${oo(ht[q])}`).join("")}(ht.parameters)}`}const As=/^[^\/()?;=#]+/;function ro(ht){const q=ht.match(As);return q?q[0]:""}const Hi=/^[^=?&#]+/,Nn=/^[^&#]+/;class Xr{constructor(q){this.url=q,this.remaining=q}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){const q={};if(this.consumeOptional("?"))do{this.parseQueryParam(q)}while(this.consumeOptional("&"));return q}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const q=[];for(this.peekStartsWith("(")||q.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),q.push(this.parseSegment());let J={};this.peekStartsWith("/(")&&(this.capture("/"),J=this.parseParens(!0));let wt={};return this.peekStartsWith("(")&&(wt=this.parseParens(!1)),(q.length>0||Object.keys(J).length>0)&&(wt[$t]=new ve(q,J)),wt}parseSegment(){const q=ro(this.remaining);if(""===q&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(q),new Ti(hr(q),this.parseMatrixParams())}parseMatrixParams(){const q={};for(;this.consumeOptional(";");)this.parseParam(q);return q}parseParam(q){const J=ro(this.remaining);if(!J)return;this.capture(J);let wt="";if(this.consumeOptional("=")){const Nt=ro(this.remaining);Nt&&(wt=Nt,this.capture(wt))}q[hr(J)]=hr(wt)}parseQueryParam(q){const J=function(ht){const q=ht.match(Hi);return q?q[0]:""}(this.remaining);if(!J)return;this.capture(J);let wt="";if(this.consumeOptional("=")){const Se=function(ht){const q=ht.match(Nn);return q?q[0]:""}(this.remaining);Se&&(wt=Se,this.capture(wt))}const Nt=Jo(J),ne=Jo(wt);if(q.hasOwnProperty(Nt)){let Se=q[Nt];Array.isArray(Se)||(Se=[Se],q[Nt]=Se),Se.push(ne)}else q[Nt]=ne}parseParens(q){const J={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const wt=ro(this.remaining),Nt=this.remaining[wt.length];if("/"!==Nt&&")"!==Nt&&";"!==Nt)throw new Error(`Cannot parse url '${this.url}'`);let ne;wt.indexOf(":")>-1?(ne=wt.substr(0,wt.indexOf(":")),this.capture(ne),this.capture(":")):q&&(ne=$t);const Se=this.parseChildren();J[ne]=1===Object.keys(Se).length?Se[$t]:new ve([],Se),this.consumeOptional("//")}return J}peekStartsWith(q){return this.remaining.startsWith(q)}consumeOptional(q){return!!this.peekStartsWith(q)&&(this.remaining=this.remaining.substring(q.length),!0)}capture(q){if(!this.consumeOptional(q))throw new Error(`Expected "${q}".`)}}class ho{constructor(q){this._root=q}get root(){return this._root.value}parent(q){const J=this.pathFromRoot(q);return J.length>1?J[J.length-2]:null}children(q){const J=wo(q,this._root);return J?J.children.map(wt=>wt.value):[]}firstChild(q){const J=wo(q,this._root);return J&&J.children.length>0?J.children[0].value:null}siblings(q){const J=Kn(q,this._root);return J.length<2?[]:J[J.length-2].children.map(Nt=>Nt.value).filter(Nt=>Nt!==q)}pathFromRoot(q){return Kn(q,this._root).map(J=>J.value)}}function wo(ht,q){if(ht===q.value)return q;for(const J of q.children){const wt=wo(ht,J);if(wt)return wt}return null}function Kn(ht,q){if(ht===q.value)return[q];for(const J of q.children){const wt=Kn(ht,J);if(wt.length)return wt.unshift(q),wt}return[]}class No{constructor(q,J){this.value=q,this.children=J}toString(){return`TreeNode(${this.value})`}}function $o(ht){const q={};return ht&&ht.children.forEach(J=>q[J.value.outlet]=J),q}class pn extends ho{constructor(q,J){super(q),this.snapshot=J,Hn(this,q)}toString(){return this.snapshot.toString()}}function jo(ht,q){const J=function(ht,q){const Se=new Kr([],{},{},"",{},$t,q,null,ht.root,-1,{});return new Zo("",new No(Se,[]))}(ht,q),wt=new U.X([new Ti("",{})]),Nt=new U.X({}),ne=new U.X({}),Se=new U.X({}),Le=new U.X(""),fi=new vr(wt,Nt,Se,Le,ne,$t,q,J.root);return fi.snapshot=J.root,new pn(new No(fi,[]),J)}class vr{constructor(q,J,wt,Nt,ne,Se,Le,fi){this.url=q,this.params=J,this.queryParams=wt,this.fragment=Nt,this.data=ne,this.outlet=Se,this.component=Le,this._futureSnapshot=fi}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(q=>re(q)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(q=>re(q)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function dr(ht,q="emptyOnly"){const J=ht.pathFromRoot;let wt=0;if("always"!==q)for(wt=J.length-1;wt>=1;){const Nt=J[wt],ne=J[wt-1];if(Nt.routeConfig&&""===Nt.routeConfig.path)wt--;else{if(ne.component)break;wt--}}return function(ht){return ht.reduce((q,J)=>({params:Object.assign(Object.assign({},q.params),J.params),data:Object.assign(Object.assign({},q.data),J.data),resolve:Object.assign(Object.assign({},q.resolve),J._resolvedData)}),{params:{},data:{},resolve:{}})}(J.slice(wt))}class Kr{constructor(q,J,wt,Nt,ne,Se,Le,fi,ji,Fn,hn){this.url=q,this.params=J,this.queryParams=wt,this.fragment=Nt,this.data=ne,this.outlet=Se,this.component=Le,this.routeConfig=fi,this._urlSegment=ji,this._lastPathIndex=Fn,this._resolve=hn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=re(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=re(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(wt=>wt.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zo extends ho{constructor(q,J){super(J),this.url=q,Hn(this,J)}toString(){return vn(this._root)}}function Hn(ht,q){q.value._routerState=ht,q.children.forEach(J=>Hn(ht,J))}function vn(ht){const q=ht.children.length>0?` { ${ht.children.map(vn).join(", ")} } `:"";return`${ht.value}${q}`}function Qo(ht){if(ht.snapshot){const q=ht.snapshot,J=ht._futureSnapshot;ht.snapshot=J,Ze(q.queryParams,J.queryParams)||ht.queryParams.next(J.queryParams),q.fragment!==J.fragment&&ht.fragment.next(J.fragment),Ze(q.params,J.params)||ht.params.next(J.params),function(ht,q){if(ht.length!==q.length)return!1;for(let J=0;J<ht.length;++J)if(!Ze(ht[J],q[J]))return!1;return!0}(q.url,J.url)||ht.url.next(J.url),Ze(q.data,J.data)||ht.data.next(J.data)}else ht.snapshot=ht._futureSnapshot,ht.data.next(ht._futureSnapshot.data)}function xo(ht,q){const J=Ze(ht.params,q.params)&&function(ht,q){return Zi(ht,q)&&ht.every((J,wt)=>Ze(J.parameters,q[wt].parameters))}(ht.url,q.url);return J&&!(!ht.parent!=!q.parent)&&(!ht.parent||xo(ht.parent,q.parent))}function Po(ht,q,J){if(J&&ht.shouldReuseRoute(q.value,J.value.snapshot)){const wt=J.value;wt._futureSnapshot=q.value;const Nt=function(ht,q,J){return q.children.map(wt=>{for(const Nt of J.children)if(ht.shouldReuseRoute(wt.value,Nt.value.snapshot))return Po(ht,wt,Nt);return Po(ht,wt)})}(ht,q,J);return new No(wt,Nt)}{if(ht.shouldAttach(q.value)){const ne=ht.retrieve(q.value);if(null!==ne){const Se=ne.route;return Se.value._futureSnapshot=q.value,Se.children=q.children.map(Le=>Po(ht,Le)),Se}}const wt=function(ht){return new vr(new U.X(ht.url),new U.X(ht.params),new U.X(ht.queryParams),new U.X(ht.fragment),new U.X(ht.data),ht.outlet,ht.component,ht)}(q.value),Nt=q.children.map(ne=>Po(ht,ne));return new No(wt,Nt)}}function qn(ht){return"object"==typeof ht&&null!=ht&&!ht.outlets&&!ht.segmentPath}function Sr(ht){return"object"==typeof ht&&null!=ht&&ht.outlets}function as(ht,q,J,wt,Nt){let ne={};return wt&&gi(wt,(Se,Le)=>{ne[Le]=Array.isArray(Se)?Se.map(fi=>`${fi}`):`${Se}`}),new te(J.root===ht?q:Fo(J.root,ht,q),ne,Nt)}function Fo(ht,q,J){const wt={};return gi(ht.children,(Nt,ne)=>{wt[ne]=Nt===q?J:Fo(Nt,q,J)}),new ve(ht.segments,wt)}class Jr{constructor(q,J,wt){if(this.isAbsolute=q,this.numberOfDoubleDots=J,this.commands=wt,q&&wt.length>0&&qn(wt[0]))throw new Error("Root segment cannot have matrix parameters");const Nt=wt.find(Sr);if(Nt&&Nt!==ui(wt))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class po{constructor(q,J,wt){this.segmentGroup=q,this.processChildren=J,this.index=wt}}function Rr(ht,q,J){if(ht||(ht=new ve([],{})),0===ht.segments.length&&ht.hasChildren())return Gs(ht,q,J);const wt=function(ht,q,J){let wt=0,Nt=q;const ne={match:!1,pathIndex:0,commandIndex:0};for(;Nt<ht.segments.length;){if(wt>=J.length)return ne;const Se=ht.segments[Nt],Le=J[wt];if(Sr(Le))break;const fi=`${Le}`,ji=wt<J.length-1?J[wt+1]:null;if(Nt>0&&void 0===fi)break;if(fi&&ji&&"object"==typeof ji&&void 0===ji.outlets){if(!br(fi,ji,Se))return ne;wt+=2}else{if(!br(fi,{},Se))return ne;wt++}Nt++}return{match:!0,pathIndex:Nt,commandIndex:wt}}(ht,q,J),Nt=J.slice(wt.commandIndex);if(wt.match&&wt.pathIndex<ht.segments.length){const ne=new ve(ht.segments.slice(0,wt.pathIndex),{});return ne.children[$t]=new ve(ht.segments.slice(wt.pathIndex),ht.children),Gs(ne,0,Nt)}return wt.match&&0===Nt.length?new ve(ht.segments,{}):wt.match&&!ht.hasChildren()?Dr(ht,q,J):wt.match?Gs(ht,0,Nt):Dr(ht,q,J)}function Gs(ht,q,J){if(0===J.length)return new ve(ht.segments,{});{const wt=function(ht){return Sr(ht[0])?ht[0].outlets:{[$t]:ht}}(J),Nt={};return gi(wt,(ne,Se)=>{"string"==typeof ne&&(ne=[ne]),null!==ne&&(Nt[Se]=Rr(ht.children[Se],q,ne))}),gi(ht.children,(ne,Se)=>{void 0===wt[Se]&&(Nt[Se]=ne)}),new ve(ht.segments,Nt)}}function Dr(ht,q,J){const wt=ht.segments.slice(0,q);let Nt=0;for(;Nt<J.length;){const ne=J[Nt];if(Sr(ne)){const fi=la(ne.outlets);return new ve(wt,fi)}if(0===Nt&&qn(J[0])){wt.push(new Ti(ht.segments[q].path,Cs(J[0]))),Nt++;continue}const Se=Sr(ne)?ne.outlets[$t]:`${ne}`,Le=Nt<J.length-1?J[Nt+1]:null;Se&&Le&&qn(Le)?(wt.push(new Ti(Se,Cs(Le))),Nt+=2):(wt.push(new Ti(Se,{})),Nt++)}return new ve(wt,{})}function la(ht){const q={};return gi(ht,(J,wt)=>{"string"==typeof J&&(J=[J]),null!==J&&(q[wt]=Dr(new ve([],{}),0,J))}),q}function Cs(ht){const q={};return gi(ht,(J,wt)=>q[wt]=`${J}`),q}function br(ht,q,J){return ht==J.path&&Ze(q,J.parameters)}class $s{constructor(q,J,wt,Nt){this.routeReuseStrategy=q,this.futureState=J,this.currState=wt,this.forwardEvent=Nt}activate(q){const J=this.futureState._root,wt=this.currState?this.currState._root:null;this.deactivateChildRoutes(J,wt,q),Qo(this.futureState.root),this.activateChildRoutes(J,wt,q)}deactivateChildRoutes(q,J,wt){const Nt=$o(J);q.children.forEach(ne=>{const Se=ne.value.outlet;this.deactivateRoutes(ne,Nt[Se],wt),delete Nt[Se]}),gi(Nt,(ne,Se)=>{this.deactivateRouteAndItsChildren(ne,wt)})}deactivateRoutes(q,J,wt){const Nt=q.value,ne=J?J.value:null;if(Nt===ne)if(Nt.component){const Se=wt.getContext(Nt.outlet);Se&&this.deactivateChildRoutes(q,J,Se.children)}else this.deactivateChildRoutes(q,J,wt);else ne&&this.deactivateRouteAndItsChildren(J,wt)}deactivateRouteAndItsChildren(q,J){q.value.component&&this.routeReuseStrategy.shouldDetach(q.value.snapshot)?this.detachAndStoreRouteSubtree(q,J):this.deactivateRouteAndOutlet(q,J)}detachAndStoreRouteSubtree(q,J){const wt=J.getContext(q.value.outlet),Nt=wt&&q.value.component?wt.children:J,ne=$o(q);for(const Se of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[Se],Nt);if(wt&&wt.outlet){const Se=wt.outlet.detach(),Le=wt.children.onOutletDeactivated();this.routeReuseStrategy.store(q.value.snapshot,{componentRef:Se,route:q,contexts:Le})}}deactivateRouteAndOutlet(q,J){const wt=J.getContext(q.value.outlet),Nt=wt&&q.value.component?wt.children:J,ne=$o(q);for(const Se of Object.keys(ne))this.deactivateRouteAndItsChildren(ne[Se],Nt);wt&&wt.outlet&&(wt.outlet.deactivate(),wt.children.onOutletDeactivated(),wt.attachRef=null,wt.resolver=null,wt.route=null)}activateChildRoutes(q,J,wt){const Nt=$o(J);q.children.forEach(ne=>{this.activateRoutes(ne,Nt[ne.value.outlet],wt),this.forwardEvent(new Yt(ne.value.snapshot))}),q.children.length&&this.forwardEvent(new le(q.value.snapshot))}activateRoutes(q,J,wt){const Nt=q.value,ne=J?J.value:null;if(Qo(Nt),Nt===ne)if(Nt.component){const Se=wt.getOrCreateContext(Nt.outlet);this.activateChildRoutes(q,J,Se.children)}else this.activateChildRoutes(q,J,wt);else if(Nt.component){const Se=wt.getOrCreateContext(Nt.outlet);if(this.routeReuseStrategy.shouldAttach(Nt.snapshot)){const Le=this.routeReuseStrategy.retrieve(Nt.snapshot);this.routeReuseStrategy.store(Nt.snapshot,null),Se.children.onOutletReAttached(Le.contexts),Se.attachRef=Le.componentRef,Se.route=Le.route.value,Se.outlet&&Se.outlet.attach(Le.componentRef,Le.route.value),Qo(Le.route.value),this.activateChildRoutes(q,null,Se.children)}else{const Le=function(ht){for(let q=ht.parent;q;q=q.parent){const J=q.routeConfig;if(J&&J._loadedConfig)return J._loadedConfig;if(J&&J.component)return null}return null}(Nt.snapshot),fi=Le?Le.module.componentFactoryResolver:null;Se.attachRef=null,Se.route=Nt,Se.resolver=fi,Se.outlet&&Se.outlet.activateWith(Nt,fi),this.activateChildRoutes(q,null,Se.children)}}else this.activateChildRoutes(q,null,wt)}}class zo{constructor(q,J){this.routes=q,this.module=J}}function fo(ht){return"function"==typeof ht}function Io(ht){return ht instanceof te}const us=Symbol("INITIAL_VALUE");function Bo(){return(0,rt.w)(ht=>(0,V.a)(ht.map(q=>q.pipe((0,at.q)(1),(0,Gt.O)(us)))).pipe(Ct((q,J)=>{let wt=!1;return J.reduce((Nt,ne,Se)=>Nt!==us?Nt:(ne===us&&(wt=!0),wt||!1!==ne&&Se!==J.length-1&&!Io(ne)?Nt:ne),q)},us),(0,xt.h)(q=>q!==us),(0,it.U)(q=>Io(q)?q:!0===q),(0,at.q)(1)))}class pr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new To,this.attachRef=null}}class To{constructor(){this.contexts=new Map}onChildOutletCreated(q,J){const wt=this.getOrCreateContext(q);wt.outlet=J,this.contexts.set(q,wt)}onChildOutletDestroyed(q){const J=this.getContext(q);J&&(J.outlet=null,J.attachRef=null)}onOutletDeactivated(){const q=this.contexts;return this.contexts=new Map,q}onOutletReAttached(q){this.contexts=q}getOrCreateContext(q){let J=this.getContext(q);return J||(J=new pr,this.contexts.set(q,J)),J}getContext(q){return this.contexts.get(q)||null}}let Br=(()=>{class ht{constructor(J,wt,Nt,ne,Se){this.parentContexts=J,this.location=wt,this.resolver=Nt,this.changeDetector=Se,this.activated=null,this._activatedRoute=null,this.activateEvents=new b.vpe,this.deactivateEvents=new b.vpe,this.attachEvents=new b.vpe,this.detachEvents=new b.vpe,this.name=ne||$t,J.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const J=this.parentContexts.getContext(this.name);J&&J.route&&(J.attachRef?this.attach(J.attachRef,J.route):this.activateWith(J.route,J.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const J=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(J.instance),J}attach(J,wt){this.activated=J,this._activatedRoute=wt,this.location.insert(J.hostView),this.attachEvents.emit(J.instance)}deactivate(){if(this.activated){const J=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(J)}}activateWith(J,wt){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=J;const Se=(wt=wt||this.resolver).resolveComponentFactory(J._futureSnapshot.routeConfig.component),Le=this.parentContexts.getOrCreateContext(this.name).children,fi=new so(J,Le,this.location.injector);this.activated=this.location.createComponent(Se,this.location.length,fi),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return ht.\u0275fac=function(J){return new(J||ht)(b.Y36(To),b.Y36(b.s_b),b.Y36(b._Vd),b.$8M("name"),b.Y36(b.sBO))},ht.\u0275dir=b.lG2({type:ht,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),ht})();class so{constructor(q,J,wt){this.route=q,this.childContexts=J,this.parent=wt}get(q,J){return q===vr?this.route:q===To?this.childContexts:this.parent.get(q,J)}}let hs=(()=>{class ht{}return ht.\u0275fac=function(J){return new(J||ht)},ht.\u0275cmp=b.Xpm({type:ht,selectors:[["ng-component"]],decls:1,vars:0,template:function(J,wt){1&J&&b._UZ(0,"router-outlet")},directives:[Br],encapsulation:2}),ht})();function go(ht,q=""){for(let J=0;J<ht.length;J++){const wt=ht[J];Ws(wt,Ca(q,wt))}}function Ws(ht,q){ht.children&&go(ht.children,q)}function Ca(ht,q){return q?ht||q.path?ht&&!q.path?`${ht}/`:!ht&&q.path?q.path:`${ht}/${q.path}`:"":ht}function Hr(ht){const q=ht.children&&ht.children.map(Hr),J=q?Object.assign(Object.assign({},ht),{children:q}):Object.assign({},ht);return!J.component&&(q||J.loadChildren)&&J.outlet&&J.outlet!==$t&&(J.component=hs),J}function Ho(ht){return ht.outlet||$t}function yr(ht,q){const J=ht.filter(wt=>Ho(wt)===q);return J.push(...ht.filter(wt=>Ho(wt)!==q)),J}const ca={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Gn(ht,q,J){var wt;if(""===q.path)return"full"===q.pathMatch&&(ht.hasChildren()||J.length>0)?Object.assign({},ca):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ne=(q.matcher||Ae)(J,ht,q);if(!ne)return Object.assign({},ca);const Se={};gi(ne.posParams,(fi,ji)=>{Se[ji]=fi.path});const Le=ne.consumed.length>0?Object.assign(Object.assign({},Se),ne.consumed[ne.consumed.length-1].parameters):Se;return{matched:!0,consumedSegments:ne.consumed,lastChild:ne.consumed.length,parameters:Le,positionalParamSegments:null!==(wt=ne.posParams)&&void 0!==wt?wt:{}}}function en(ht,q,J,wt,Nt="corrected"){if(J.length>0&&function(ht,q,J){return J.some(wt=>G(ht,q,wt)&&Ho(wt)!==$t)}(ht,J,wt)){const Se=new ve(q,function(ht,q,J,wt){const Nt={};Nt[$t]=wt,wt._sourceSegment=ht,wt._segmentIndexShift=q.length;for(const ne of J)if(""===ne.path&&Ho(ne)!==$t){const Se=new ve([],{});Se._sourceSegment=ht,Se._segmentIndexShift=q.length,Nt[Ho(ne)]=Se}return Nt}(ht,q,wt,new ve(J,ht.children)));return Se._sourceSegment=ht,Se._segmentIndexShift=q.length,{segmentGroup:Se,slicedSegments:[]}}if(0===J.length&&function(ht,q,J){return J.some(wt=>G(ht,q,wt))}(ht,J,wt)){const Se=new ve(ht.segments,function(ht,q,J,wt,Nt,ne){const Se={};for(const Le of wt)if(G(ht,J,Le)&&!Nt[Ho(Le)]){const fi=new ve([],{});fi._sourceSegment=ht,fi._segmentIndexShift="legacy"===ne?ht.segments.length:q.length,Se[Ho(Le)]=fi}return Object.assign(Object.assign({},Nt),Se)}(ht,q,J,wt,ht.children,Nt));return Se._sourceSegment=ht,Se._segmentIndexShift=q.length,{segmentGroup:Se,slicedSegments:J}}const ne=new ve(ht.segments,ht.children);return ne._sourceSegment=ht,ne._segmentIndexShift=q.length,{segmentGroup:ne,slicedSegments:J}}function G(ht,q,J){return(!(ht.hasChildren()||q.length>0)||"full"!==J.pathMatch)&&""===J.path}function St(ht,q,J,wt){return!!(Ho(ht)===wt||wt!==$t&&G(q,J,ht))&&("**"===ht.path||Gn(q,ht,J).matched)}function Ee(ht,q,J){return 0===q.length&&!ht.children[J]}class ei{constructor(q){this.segmentGroup=q||null}}class Ni{constructor(q){this.urlTree=q}}function mn(ht){return new t.y(q=>q.error(new ei(ht)))}function Rn(ht){return new t.y(q=>q.error(new Ni(ht)))}function Vn(ht){return new t.y(q=>q.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${ht}'`)))}class to{constructor(q,J,wt,Nt,ne){this.configLoader=J,this.urlSerializer=wt,this.urlTree=Nt,this.config=ne,this.allowRedirects=!0,this.ngModule=q.get(b.h0i)}apply(){const q=en(this.urlTree.root,[],[],this.config).segmentGroup,J=new ve(q.segments,q.children);return this.expandSegmentGroup(this.ngModule,this.config,J,$t).pipe((0,it.U)(ne=>this.createUrlTree(rn(ne),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,bt.K)(ne=>{if(ne instanceof Ni)return this.allowRedirects=!1,this.match(ne.urlTree);throw ne instanceof ei?this.noMatchError(ne):ne}))}match(q){return this.expandSegmentGroup(this.ngModule,this.config,q.root,$t).pipe((0,it.U)(Nt=>this.createUrlTree(rn(Nt),q.queryParams,q.fragment))).pipe((0,bt.K)(Nt=>{throw Nt instanceof ei?this.noMatchError(Nt):Nt}))}noMatchError(q){return new Error(`Cannot match any routes. URL Segment: '${q.segmentGroup}'`)}createUrlTree(q,J,wt){const Nt=q.segments.length>0?new ve([],{[$t]:q}):q;return new te(Nt,J,wt)}expandSegmentGroup(q,J,wt,Nt){return 0===wt.segments.length&&wt.hasChildren()?this.expandChildren(q,J,wt).pipe((0,it.U)(ne=>new ve([],ne))):this.expandSegment(q,wt,J,wt.segments,Nt,!0)}expandChildren(q,J,wt){const Nt=[];for(const ne of Object.keys(wt.children))"primary"===ne?Nt.unshift(ne):Nt.push(ne);return(0,w.D)(Nt).pipe((0,Ht.b)(ne=>{const Se=wt.children[ne],Le=yr(J,ne);return this.expandSegmentGroup(q,Le,Se,ne).pipe((0,it.U)(fi=>({segment:fi,outlet:ne})))}),Ct((ne,Se)=>(ne[Se.outlet]=Se.segment,ne),{}),function(ht,q){const J=arguments.length>=2;return wt=>wt.pipe(ht?(0,xt.h)((Nt,ne)=>ht(Nt,ne,wt)):ot.y,yt(1),J?lt(q):ut(()=>new e))}())}expandSegment(q,J,wt,Nt,ne,Se){return(0,w.D)(wt).pipe((0,Ht.b)(Le=>this.expandSegmentAgainstRoute(q,J,wt,Le,Nt,ne,Se).pipe((0,bt.K)(ji=>{if(ji instanceof ei)return(0,M.of)(null);throw ji}))),dt(Le=>!!Le),(0,bt.K)((Le,fi)=>{if(Le instanceof e||"EmptyError"===Le.name){if(Ee(J,Nt,ne))return(0,M.of)(new ve([],{}));throw new ei(J)}throw Le}))}expandSegmentAgainstRoute(q,J,wt,Nt,ne,Se,Le){return St(Nt,J,ne,Se)?void 0===Nt.redirectTo?this.matchSegmentAgainstRoute(q,J,Nt,ne,Se):Le&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(q,J,wt,Nt,ne,Se):mn(J):mn(J)}expandSegmentAgainstRouteUsingRedirect(q,J,wt,Nt,ne,Se){return"**"===Nt.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(q,wt,Nt,Se):this.expandRegularSegmentAgainstRouteUsingRedirect(q,J,wt,Nt,ne,Se)}expandWildCardWithParamsAgainstRouteUsingRedirect(q,J,wt,Nt){const ne=this.applyRedirectCommands([],wt.redirectTo,{});return wt.redirectTo.startsWith("/")?Rn(ne):this.lineralizeSegments(wt,ne).pipe((0,ce.z)(Se=>{const Le=new ve(Se,{});return this.expandSegment(q,Le,J,Se,Nt,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(q,J,wt,Nt,ne,Se){const{matched:Le,consumedSegments:fi,lastChild:ji,positionalParamSegments:Fn}=Gn(J,Nt,ne);if(!Le)return mn(J);const hn=this.applyRedirectCommands(fi,Nt.redirectTo,Fn);return Nt.redirectTo.startsWith("/")?Rn(hn):this.lineralizeSegments(Nt,hn).pipe((0,ce.z)(ao=>this.expandSegment(q,J,wt,ao.concat(ne.slice(ji)),Se,!1)))}matchSegmentAgainstRoute(q,J,wt,Nt,ne){if("**"===wt.path)return wt.loadChildren?(wt._loadedConfig?(0,M.of)(wt._loadedConfig):this.configLoader.load(q.injector,wt)).pipe((0,it.U)(ao=>(wt._loadedConfig=ao,new ve(Nt,{})))):(0,M.of)(new ve(Nt,{}));const{matched:Se,consumedSegments:Le,lastChild:fi}=Gn(J,wt,Nt);if(!Se)return mn(J);const ji=Nt.slice(fi);return this.getChildConfig(q,wt,Nt).pipe((0,ce.z)(hn=>{const ao=hn.module,_o=hn.routes,{segmentGroup:Ra,slicedSegments:is}=en(J,Le,ji,_o),ms=new ve(Ra.segments,Ra.children);if(0===is.length&&ms.hasChildren())return this.expandChildren(ao,_o,ms).pipe((0,it.U)(Ps=>new ve(Le,Ps)));if(0===_o.length&&0===is.length)return(0,M.of)(new ve(Le,{}));const Or=Ho(wt)===ne;return this.expandSegment(ao,ms,_o,is,Or?$t:ne,!0).pipe((0,it.U)(jr=>new ve(Le.concat(jr.segments),jr.children)))}))}getChildConfig(q,J,wt){return J.children?(0,M.of)(new zo(J.children,q)):J.loadChildren?void 0!==J._loadedConfig?(0,M.of)(J._loadedConfig):this.runCanLoadGuards(q.injector,J,wt).pipe((0,ce.z)(Nt=>{return Nt?this.configLoader.load(q.injector,J).pipe((0,it.U)(ne=>(J._loadedConfig=ne,ne))):(ht=J,new t.y(q=>q.error(kt(`Cannot load children because the guard of the route "path: '${ht.path}'" returned false`))));var ht})):(0,M.of)(new zo([],q))}runCanLoadGuards(q,J,wt){const Nt=J.canLoad;if(!Nt||0===Nt.length)return(0,M.of)(!0);const ne=Nt.map(Se=>{const Le=q.get(Se);let fi;if((ht=Le)&&fo(ht.canLoad))fi=Le.canLoad(J,wt);else{if(!fo(Le))throw new Error("Invalid CanLoad guard");fi=Le(J,wt)}var ht;return We(fi)});return(0,M.of)(ne).pipe(Bo(),(0,Ye.b)(Se=>{if(!Io(Se))return;const Le=kt(`Redirecting to "${this.urlSerializer.serialize(Se)}"`);throw Le.url=Se,Le}),(0,it.U)(Se=>!0===Se))}lineralizeSegments(q,J){let wt=[],Nt=J.root;for(;;){if(wt=wt.concat(Nt.segments),0===Nt.numberOfChildren)return(0,M.of)(wt);if(Nt.numberOfChildren>1||!Nt.children[$t])return Vn(q.redirectTo);Nt=Nt.children[$t]}}applyRedirectCommands(q,J,wt){return this.applyRedirectCreatreUrlTree(J,this.urlSerializer.parse(J),q,wt)}applyRedirectCreatreUrlTree(q,J,wt,Nt){const ne=this.createSegmentGroup(q,J.root,wt,Nt);return new te(ne,this.createQueryParams(J.queryParams,this.urlTree.queryParams),J.fragment)}createQueryParams(q,J){const wt={};return gi(q,(Nt,ne)=>{if("string"==typeof Nt&&Nt.startsWith(":")){const Le=Nt.substring(1);wt[ne]=J[Le]}else wt[ne]=Nt}),wt}createSegmentGroup(q,J,wt,Nt){const ne=this.createSegments(q,J.segments,wt,Nt);let Se={};return gi(J.children,(Le,fi)=>{Se[fi]=this.createSegmentGroup(q,Le,wt,Nt)}),new ve(ne,Se)}createSegments(q,J,wt,Nt){return J.map(ne=>ne.path.startsWith(":")?this.findPosParam(q,ne,Nt):this.findOrReturn(ne,wt))}findPosParam(q,J,wt){const Nt=wt[J.path.substring(1)];if(!Nt)throw new Error(`Cannot redirect to '${q}'. Cannot find '${J.path}'.`);return Nt}findOrReturn(q,J){let wt=0;for(const Nt of J){if(Nt.path===q.path)return J.splice(wt),Nt;wt++}return q}}function rn(ht){const q={};for(const wt of Object.keys(ht.children)){const ne=rn(ht.children[wt]);(ne.segments.length>0||ne.hasChildren())&&(q[wt]=ne)}return function(ht){if(1===ht.numberOfChildren&&ht.children[$t]){const q=ht.children[$t];return new ve(ht.segments.concat(q.segments),q.children)}return ht}(new ve(ht.segments,q))}class Zs{constructor(q){this.path=q,this.route=this.path[this.path.length-1]}}class tr{constructor(q,J){this.component=q,this.route=J}}function js(ht,q,J){const wt=ht._root;return Di(wt,q?q._root:null,J,[wt.value])}function Ur(ht,q,J){const wt=function(ht){if(!ht)return null;for(let q=ht.parent;q;q=q.parent){const J=q.routeConfig;if(J&&J._loadedConfig)return J._loadedConfig}return null}(q);return(wt?wt.module.injector:J).get(ht)}function Di(ht,q,J,wt,Nt={canDeactivateChecks:[],canActivateChecks:[]}){const ne=$o(q);return ht.children.forEach(Se=>{(function(ht,q,J,wt,Nt={canDeactivateChecks:[],canActivateChecks:[]}){const ne=ht.value,Se=q?q.value:null,Le=J?J.getContext(ht.value.outlet):null;if(Se&&ne.routeConfig===Se.routeConfig){const fi=function(ht,q,J){if("function"==typeof J)return J(ht,q);switch(J){case"pathParamsChange":return!Zi(ht.url,q.url);case"pathParamsOrQueryParamsChange":return!Zi(ht.url,q.url)||!Ze(ht.queryParams,q.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xo(ht,q)||!Ze(ht.queryParams,q.queryParams);default:return!xo(ht,q)}}(Se,ne,ne.routeConfig.runGuardsAndResolvers);fi?Nt.canActivateChecks.push(new Zs(wt)):(ne.data=Se.data,ne._resolvedData=Se._resolvedData),Di(ht,q,ne.component?Le?Le.children:null:J,wt,Nt),fi&&Le&&Le.outlet&&Le.outlet.isActivated&&Nt.canDeactivateChecks.push(new tr(Le.outlet.component,Se))}else Se&&F(q,Le,Nt),Nt.canActivateChecks.push(new Zs(wt)),Di(ht,null,ne.component?Le?Le.children:null:J,wt,Nt)})(Se,ne[Se.value.outlet],J,wt.concat([Se.value]),Nt),delete ne[Se.value.outlet]}),gi(ne,(Se,Le)=>F(Se,J.getContext(Le),Nt)),Nt}function F(ht,q,J){const wt=$o(ht),Nt=ht.value;gi(wt,(ne,Se)=>{F(ne,Nt.component?q?q.children.getContext(Se):null:q,J)}),J.canDeactivateChecks.push(new tr(Nt.component&&q&&q.outlet&&q.outlet.isActivated?q.outlet.component:null,Nt))}class Bi{}function Gi(ht){return new t.y(q=>q.error(ht))}class Mn{constructor(q,J,wt,Nt,ne,Se){this.rootComponentType=q,this.config=J,this.urlTree=wt,this.url=Nt,this.paramsInheritanceStrategy=ne,this.relativeLinkResolution=Se}recognize(){const q=en(this.urlTree.root,[],[],this.config.filter(Se=>void 0===Se.redirectTo),this.relativeLinkResolution).segmentGroup,J=this.processSegmentGroup(this.config,q,$t);if(null===J)return null;const wt=new Kr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),Nt=new No(wt,J),ne=new Zo(this.url,Nt);return this.inheritParamsAndData(ne._root),ne}inheritParamsAndData(q){const J=q.value,wt=dr(J,this.paramsInheritanceStrategy);J.params=Object.freeze(wt.params),J.data=Object.freeze(wt.data),q.children.forEach(Nt=>this.inheritParamsAndData(Nt))}processSegmentGroup(q,J,wt){return 0===J.segments.length&&J.hasChildren()?this.processChildren(q,J):this.processSegment(q,J,J.segments,wt)}processChildren(q,J){const wt=[];for(const ne of Object.keys(J.children)){const Se=J.children[ne],Le=yr(q,ne),fi=this.processSegmentGroup(Le,Se,ne);if(null===fi)return null;wt.push(...fi)}const Nt=Wn(wt);return Nt.sort((q,J)=>q.value.outlet===$t?-1:J.value.outlet===$t?1:q.value.outlet.localeCompare(J.value.outlet)),Nt}processSegment(q,J,wt,Nt){for(const ne of q){const Se=this.processSegmentAgainstRoute(ne,J,wt,Nt);if(null!==Se)return Se}return Ee(J,wt,Nt)?[]:null}processSegmentAgainstRoute(q,J,wt,Nt){if(q.redirectTo||!St(q,J,wt,Nt))return null;let ne,Se=[],Le=[];if("**"===q.path){const _o=wt.length>0?ui(wt).parameters:{};ne=new Kr(wt,_o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gr(q),Ho(q),q.component,q,sr(J),Vo(J)+wt.length,Qr(q))}else{const _o=Gn(J,q,wt);if(!_o.matched)return null;Se=_o.consumedSegments,Le=wt.slice(_o.lastChild),ne=new Kr(Se,_o.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Gr(q),Ho(q),q.component,q,sr(J),Vo(J)+Se.length,Qr(q))}const fi=(ht=q).children?ht.children:ht.loadChildren?ht._loadedConfig.routes:[],{segmentGroup:ji,slicedSegments:Fn}=en(J,Se,Le,fi.filter(_o=>void 0===_o.redirectTo),this.relativeLinkResolution);var ht;if(0===Fn.length&&ji.hasChildren()){const _o=this.processChildren(fi,ji);return null===_o?null:[new No(ne,_o)]}if(0===fi.length&&0===Fn.length)return[new No(ne,[])];const hn=Ho(q)===Nt,ao=this.processSegment(fi,ji,Fn,hn?$t:Nt);return null===ao?null:[new No(ne,ao)]}}function Bn(ht){const q=ht.value.routeConfig;return q&&""===q.path&&void 0===q.redirectTo}function Wn(ht){const q=[],J=new Set;for(const wt of ht){if(!Bn(wt)){q.push(wt);continue}const Nt=q.find(ne=>wt.value.routeConfig===ne.value.routeConfig);void 0!==Nt?(Nt.children.push(...wt.children),J.add(Nt)):q.push(wt)}for(const wt of J){const Nt=Wn(wt.children);q.push(new No(wt.value,Nt))}return q.filter(wt=>!J.has(wt))}function sr(ht){let q=ht;for(;q._sourceSegment;)q=q._sourceSegment;return q}function Vo(ht){let q=ht,J=q._segmentIndexShift?q._segmentIndexShift:0;for(;q._sourceSegment;)q=q._sourceSegment,J+=q._segmentIndexShift?q._segmentIndexShift:0;return J-1}function Gr(ht){return ht.data||{}}function Qr(ht){return ht.resolve||{}}function Co(ht){return(0,rt.w)(q=>{const J=ht(q);return J?(0,w.D)(J).pipe((0,it.U)(()=>q)):(0,M.of)(q)})}class ua extends class{shouldDetach(q){return!1}store(q,J){}shouldAttach(q){return!1}retrieve(q){return null}shouldReuseRoute(q,J){return q.routeConfig===J.routeConfig}}{}const Qi=new b.OlP("ROUTES");class nn{constructor(q,J,wt,Nt){this.injector=q,this.compiler=J,this.onLoadStartListener=wt,this.onLoadEndListener=Nt}load(q,J){if(J._loader$)return J._loader$;this.onLoadStartListener&&this.onLoadStartListener(J);const Nt=this.loadModuleFactory(J.loadChildren).pipe((0,it.U)(ne=>{this.onLoadEndListener&&this.onLoadEndListener(J);const Se=ne.create(q);return new zo(Fi(Se.injector.get(Qi,void 0,b.XFs.Self|b.XFs.Optional)).map(Hr),Se)}),(0,bt.K)(ne=>{throw J._loader$=void 0,ne}));return J._loader$=new _(Nt,()=>new nt.x).pipe(c()),J._loader$}loadModuleFactory(q){return We(q()).pipe((0,ce.z)(J=>J instanceof b.YKP?(0,M.of)(J):(0,w.D)(this.compiler.compileModuleAsync(J))))}}class An{shouldProcessUrl(q){return!0}extract(q){return q}merge(q,J){return q}}function On(ht){throw ht}function Er(ht,q,J){return q.parse("/")}function Ar(ht,q){return(0,M.of)(null)}const es={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Qn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Tr=(()=>{class ht{constructor(J,wt,Nt,ne,Se,Le,fi){this.rootComponentType=J,this.urlSerializer=wt,this.rootContexts=Nt,this.location=ne,this.config=fi,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new nt.x,this.errorHandler=On,this.malformedUriErrorHandler=Er,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ar,afterPreactivation:Ar},this.urlHandlingStrategy=new An,this.routeReuseStrategy=new ua,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Se.get(b.h0i),this.console=Se.get(b.c2e);const hn=Se.get(b.R0b);this.isNgZoneEnabled=hn instanceof b.R0b&&b.R0b.isInAngularZone(),this.resetConfig(fi),this.currentUrlTree=new te(new ve([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new nn(Se,Le,ao=>this.triggerEvent(new Pt(ao)),ao=>this.triggerEvent(new he(ao))),this.routerState=jo(this.currentUrlTree,this.rootComponentType),this.transitions=new U.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var J;return null===(J=this.location.getState())||void 0===J?void 0:J.\u0275routerPageId}setupNavigations(J){const wt=this.events;return J.pipe((0,xt.h)(Nt=>0!==Nt.id),(0,it.U)(Nt=>Object.assign(Object.assign({},Nt),{extractedUrl:this.urlHandlingStrategy.extract(Nt.rawUrl)})),(0,rt.w)(Nt=>{let ne=!1,Se=!1;return(0,M.of)(Nt).pipe((0,Ye.b)(Le=>{this.currentNavigation={id:Le.id,initialUrl:Le.currentRawUrl,extractedUrl:Le.extractedUrl,trigger:Le.source,extras:Le.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,rt.w)(Le=>{const fi=this.browserUrlTree.toString(),ji=!this.navigated||Le.extractedUrl.toString()!==fi||fi!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ji)&&this.urlHandlingStrategy.shouldProcessUrl(Le.rawUrl))return fs(Le.source)&&(this.browserUrlTree=Le.extractedUrl),(0,M.of)(Le).pipe((0,rt.w)(hn=>{const ao=this.transitions.getValue();return wt.next(new vi(hn.id,this.serializeUrl(hn.extractedUrl),hn.source,hn.restoredState)),ao!==this.transitions.getValue()?pt.E:Promise.resolve(hn)}),function(ht,q,J,wt){return(0,rt.w)(Nt=>function(ht,q,J,wt,Nt){return new to(ht,q,J,wt,Nt).apply()}(ht,q,J,Nt.extractedUrl,wt).pipe((0,it.U)(ne=>Object.assign(Object.assign({},Nt),{urlAfterRedirects:ne}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ye.b)(hn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:hn.urlAfterRedirects})}),function(ht,q,J,wt,Nt){return(0,ce.z)(ne=>function(ht,q,J,wt,Nt="emptyOnly",ne="legacy"){try{const Se=new Mn(ht,q,J,wt,Nt,ne).recognize();return null===Se?Gi(new Bi):(0,M.of)(Se)}catch(Se){return Gi(Se)}}(ht,q,ne.urlAfterRedirects,J(ne.urlAfterRedirects),wt,Nt).pipe((0,it.U)(Se=>Object.assign(Object.assign({},ne),{targetSnapshot:Se}))))}(this.rootComponentType,this.config,hn=>this.serializeUrl(hn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ye.b)(hn=>{if("eager"===this.urlUpdateStrategy){if(!hn.extras.skipLocationChange){const _o=this.urlHandlingStrategy.merge(hn.urlAfterRedirects,hn.rawUrl);this.setBrowserUrl(_o,hn)}this.browserUrlTree=hn.urlAfterRedirects}const ao=new Ft(hn.id,this.serializeUrl(hn.extractedUrl),this.serializeUrl(hn.urlAfterRedirects),hn.targetSnapshot);wt.next(ao)}));if(ji&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:ao,extractedUrl:_o,source:Ra,restoredState:is,extras:ms}=Le,Or=new vi(ao,this.serializeUrl(_o),Ra,is);wt.next(Or);const pl=jo(_o,this.rootComponentType).snapshot;return(0,M.of)(Object.assign(Object.assign({},Le),{targetSnapshot:pl,urlAfterRedirects:_o,extras:Object.assign(Object.assign({},ms),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Le.rawUrl,Le.resolve(null),pt.E}),Co(Le=>{const{targetSnapshot:fi,id:ji,extractedUrl:Fn,rawUrl:hn,extras:{skipLocationChange:ao,replaceUrl:_o}}=Le;return this.hooks.beforePreactivation(fi,{navigationId:ji,appliedUrlTree:Fn,rawUrlTree:hn,skipLocationChange:!!ao,replaceUrl:!!_o})}),(0,Ye.b)(Le=>{const fi=new _e(Le.id,this.serializeUrl(Le.extractedUrl),this.serializeUrl(Le.urlAfterRedirects),Le.targetSnapshot);this.triggerEvent(fi)}),(0,it.U)(Le=>Object.assign(Object.assign({},Le),{guards:js(Le.targetSnapshot,Le.currentSnapshot,this.rootContexts)})),function(ht,q){return(0,ce.z)(J=>{const{targetSnapshot:wt,currentSnapshot:Nt,guards:{canActivateChecks:ne,canDeactivateChecks:Se}}=J;return 0===Se.length&&0===ne.length?(0,M.of)(Object.assign(Object.assign({},J),{guardsResult:!0})):function(ht,q,J,wt){return(0,w.D)(ht).pipe((0,ce.z)(Nt=>function(ht,q,J,wt,Nt){const ne=q&&q.routeConfig?q.routeConfig.canDeactivate:null;if(!ne||0===ne.length)return(0,M.of)(!0);const Se=ne.map(Le=>{const fi=Ur(Le,q,Nt);let ji;if(function(ht){return ht&&fo(ht.canDeactivate)}(fi))ji=We(fi.canDeactivate(ht,q,J,wt));else{if(!fo(fi))throw new Error("Invalid CanDeactivate guard");ji=We(fi(ht,q,J,wt))}return ji.pipe(dt())});return(0,M.of)(Se).pipe(Bo())}(Nt.component,Nt.route,J,q,wt)),dt(Nt=>!0!==Nt,!0))}(Se,wt,Nt,ht).pipe((0,ce.z)(Le=>Le&&function(ht){return"boolean"==typeof ht}(Le)?function(ht,q,J,wt){return(0,w.D)(q).pipe((0,Ht.b)(Nt=>(0,H.z)(function(ht,q){return null!==ht&&q&&q(new ze(ht)),(0,M.of)(!0)}(Nt.route.parent,wt),function(ht,q){return null!==ht&&q&&q(new jt(ht)),(0,M.of)(!0)}(Nt.route,wt),function(ht,q,J){const wt=q[q.length-1],ne=q.slice(0,q.length-1).reverse().map(Se=>function(ht){const q=ht.routeConfig?ht.routeConfig.canActivateChild:null;return q&&0!==q.length?{node:ht,guards:q}:null}(Se)).filter(Se=>null!==Se).map(Se=>(0,$.P)(()=>{const Le=Se.guards.map(fi=>{const ji=Ur(fi,Se.node,J);let Fn;if(function(ht){return ht&&fo(ht.canActivateChild)}(ji))Fn=We(ji.canActivateChild(wt,ht));else{if(!fo(ji))throw new Error("Invalid CanActivateChild guard");Fn=We(ji(wt,ht))}return Fn.pipe(dt())});return(0,M.of)(Le).pipe(Bo())}));return(0,M.of)(ne).pipe(Bo())}(ht,Nt.path,J),function(ht,q,J){const wt=q.routeConfig?q.routeConfig.canActivate:null;if(!wt||0===wt.length)return(0,M.of)(!0);const Nt=wt.map(ne=>(0,$.P)(()=>{const Se=Ur(ne,q,J);let Le;if(function(ht){return ht&&fo(ht.canActivate)}(Se))Le=We(Se.canActivate(q,ht));else{if(!fo(Se))throw new Error("Invalid CanActivate guard");Le=We(Se(q,ht))}return Le.pipe(dt())}));return(0,M.of)(Nt).pipe(Bo())}(ht,Nt.route,J))),dt(Nt=>!0!==Nt,!0))}(wt,ne,ht,q):(0,M.of)(Le)),(0,it.U)(Le=>Object.assign(Object.assign({},J),{guardsResult:Le})))})}(this.ngModule.injector,Le=>this.triggerEvent(Le)),(0,Ye.b)(Le=>{if(Io(Le.guardsResult)){const ji=kt(`Redirecting to "${this.serializeUrl(Le.guardsResult)}"`);throw ji.url=Le.guardsResult,ji}const fi=new Xt(Le.id,this.serializeUrl(Le.extractedUrl),this.serializeUrl(Le.urlAfterRedirects),Le.targetSnapshot,!!Le.guardsResult);this.triggerEvent(fi)}),(0,xt.h)(Le=>!!Le.guardsResult||(this.restoreHistory(Le),this.cancelNavigationTransition(Le,""),!1)),Co(Le=>{if(Le.guards.canActivateChecks.length)return(0,M.of)(Le).pipe((0,Ye.b)(fi=>{const ji=new Jt(fi.id,this.serializeUrl(fi.extractedUrl),this.serializeUrl(fi.urlAfterRedirects),fi.targetSnapshot);this.triggerEvent(ji)}),(0,rt.w)(fi=>{let ji=!1;return(0,M.of)(fi).pipe(function(ht,q){return(0,ce.z)(J=>{const{targetSnapshot:wt,guards:{canActivateChecks:Nt}}=J;if(!Nt.length)return(0,M.of)(J);let ne=0;return(0,w.D)(Nt).pipe((0,Ht.b)(Se=>function(ht,q,J,wt){return function(ht,q,J,wt){const Nt=Object.keys(ht);if(0===Nt.length)return(0,M.of)({});const ne={};return(0,w.D)(Nt).pipe((0,ce.z)(Se=>function(ht,q,J,wt){const Nt=Ur(ht,q,wt);return We(Nt.resolve?Nt.resolve(q,J):Nt(q,J))}(ht[Se],q,J,wt).pipe((0,Ye.b)(Le=>{ne[Se]=Le}))),yt(1),(0,ce.z)(()=>Object.keys(ne).length===Nt.length?(0,M.of)(ne):pt.E))}(ht._resolve,ht,q,wt).pipe((0,it.U)(ne=>(ht._resolvedData=ne,ht.data=Object.assign(Object.assign({},ht.data),dr(ht,J).resolve),null)))}(Se.route,wt,ht,q)),(0,Ye.b)(()=>ne++),yt(1),(0,ce.z)(Se=>ne===Nt.length?(0,M.of)(J):pt.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ye.b)({next:()=>ji=!0,complete:()=>{ji||(this.restoreHistory(fi),this.cancelNavigationTransition(fi,"At least one route resolver didn't emit any value."))}}))}),(0,Ye.b)(fi=>{const ji=new Rt(fi.id,this.serializeUrl(fi.extractedUrl),this.serializeUrl(fi.urlAfterRedirects),fi.targetSnapshot);this.triggerEvent(ji)}))}),Co(Le=>{const{targetSnapshot:fi,id:ji,extractedUrl:Fn,rawUrl:hn,extras:{skipLocationChange:ao,replaceUrl:_o}}=Le;return this.hooks.afterPreactivation(fi,{navigationId:ji,appliedUrlTree:Fn,rawUrlTree:hn,skipLocationChange:!!ao,replaceUrl:!!_o})}),(0,it.U)(Le=>{const fi=function(ht,q,J){const wt=Po(ht,q._root,J?J._root:void 0);return new pn(wt,q)}(this.routeReuseStrategy,Le.targetSnapshot,Le.currentRouterState);return Object.assign(Object.assign({},Le),{targetRouterState:fi})}),(0,Ye.b)(Le=>{this.currentUrlTree=Le.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Le.urlAfterRedirects,Le.rawUrl),this.routerState=Le.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Le.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Le),this.browserUrlTree=Le.urlAfterRedirects)}),((ht,q,J)=>(0,it.U)(wt=>(new $s(q,wt.targetRouterState,wt.currentRouterState,J).activate(ht),wt)))(this.rootContexts,this.routeReuseStrategy,Le=>this.triggerEvent(Le)),(0,Ye.b)({next(){ne=!0},complete(){ne=!0}}),(0,de.x)(()=>{var Le;ne||Se||this.cancelNavigationTransition(Nt,`Navigation ID ${Nt.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Le=this.currentNavigation)||void 0===Le?void 0:Le.id)===Nt.id&&(this.currentNavigation=null)}),(0,bt.K)(Le=>{if(Se=!0,function(ht){return ht&&ht[Et]}(Le)){const fi=Io(Le.url);fi||(this.navigated=!0,this.restoreHistory(Nt,!0));const ji=new Ne(Nt.id,this.serializeUrl(Nt.extractedUrl),Le.message);wt.next(ji),fi?setTimeout(()=>{const Fn=this.urlHandlingStrategy.merge(Le.url,this.rawUrlTree),hn={skipLocationChange:Nt.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fs(Nt.source)};this.scheduleNavigation(Fn,"imperative",null,hn,{resolve:Nt.resolve,reject:Nt.reject,promise:Nt.promise})},0):Nt.resolve(!1)}else{this.restoreHistory(Nt,!0);const fi=new oi(Nt.id,this.serializeUrl(Nt.extractedUrl),Le);wt.next(fi);try{Nt.resolve(this.errorHandler(Le))}catch(ji){Nt.reject(ji)}}return pt.E}))}))}resetRootComponentType(J){this.rootComponentType=J,this.routerState.root.component=this.rootComponentType}setTransition(J){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),J))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(J=>{const wt="popstate"===J.type?"popstate":"hashchange";"popstate"===wt&&setTimeout(()=>{var Nt;const ne={replaceUrl:!0},Se=(null===(Nt=J.state)||void 0===Nt?void 0:Nt.navigationId)?J.state:null;if(Se){const fi=Object.assign({},Se);delete fi.navigationId,delete fi.\u0275routerPageId,0!==Object.keys(fi).length&&(ne.state=fi)}const Le=this.parseUrl(J.url);this.scheduleNavigation(Le,wt,Se,ne)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(J){this.events.next(J)}resetConfig(J){go(J),this.config=J.map(Hr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(J,wt={}){const{relativeTo:Nt,queryParams:ne,fragment:Se,queryParamsHandling:Le,preserveFragment:fi}=wt,ji=Nt||this.routerState.root,Fn=fi?this.currentUrlTree.fragment:Se;let hn=null;switch(Le){case"merge":hn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ne);break;case"preserve":hn=this.currentUrlTree.queryParams;break;default:hn=ne||null}return null!==hn&&(hn=this.removeEmptyProps(hn)),function(ht,q,J,wt,Nt){if(0===J.length)return as(q.root,q.root,q,wt,Nt);const ne=function(ht){if("string"==typeof ht[0]&&1===ht.length&&"/"===ht[0])return new Jr(!0,0,ht);let q=0,J=!1;const wt=ht.reduce((Nt,ne,Se)=>{if("object"==typeof ne&&null!=ne){if(ne.outlets){const Le={};return gi(ne.outlets,(fi,ji)=>{Le[ji]="string"==typeof fi?fi.split("/"):fi}),[...Nt,{outlets:Le}]}if(ne.segmentPath)return[...Nt,ne.segmentPath]}return"string"!=typeof ne?[...Nt,ne]:0===Se?(ne.split("/").forEach((Le,fi)=>{0==fi&&"."===Le||(0==fi&&""===Le?J=!0:".."===Le?q++:""!=Le&&Nt.push(Le))}),Nt):[...Nt,ne]},[]);return new Jr(J,q,wt)}(J);if(ne.toRoot())return as(q.root,new ve([],{}),q,wt,Nt);const Se=function(ht,q,J){if(ht.isAbsolute)return new po(q.root,!0,0);if(-1===J.snapshot._lastPathIndex){const ne=J.snapshot._urlSegment;return new po(ne,ne===q.root,0)}const wt=qn(ht.commands[0])?0:1;return function(ht,q,J){let wt=ht,Nt=q,ne=J;for(;ne>Nt;){if(ne-=Nt,wt=wt.parent,!wt)throw new Error("Invalid number of '../'");Nt=wt.segments.length}return new po(wt,!1,Nt-ne)}(J.snapshot._urlSegment,J.snapshot._lastPathIndex+wt,ht.numberOfDoubleDots)}(ne,q,ht),Le=Se.processChildren?Gs(Se.segmentGroup,Se.index,ne.commands):Rr(Se.segmentGroup,Se.index,ne.commands);return as(Se.segmentGroup,Le,q,wt,Nt)}(ji,this.currentUrlTree,J,hn,null!=Fn?Fn:null)}navigateByUrl(J,wt={skipLocationChange:!1}){const Nt=Io(J)?J:this.parseUrl(J),ne=this.urlHandlingStrategy.merge(Nt,this.rawUrlTree);return this.scheduleNavigation(ne,"imperative",null,wt)}navigate(J,wt={skipLocationChange:!1}){return function(ht){for(let q=0;q<ht.length;q++){const J=ht[q];if(null==J)throw new Error(`The requested path contains ${J} segment at index ${q}`)}}(J),this.navigateByUrl(this.createUrlTree(J,wt),wt)}serializeUrl(J){return this.urlSerializer.serialize(J)}parseUrl(J){let wt;try{wt=this.urlSerializer.parse(J)}catch(Nt){wt=this.malformedUriErrorHandler(Nt,this.urlSerializer,J)}return wt}isActive(J,wt){let Nt;if(Nt=!0===wt?Object.assign({},es):!1===wt?Object.assign({},Qn):wt,Io(J))return ti(this.currentUrlTree,J,Nt);const ne=this.parseUrl(J);return ti(this.currentUrlTree,ne,Nt)}removeEmptyProps(J){return Object.keys(J).reduce((wt,Nt)=>{const ne=J[Nt];return null!=ne&&(wt[Nt]=ne),wt},{})}processNavigations(){this.navigations.subscribe(J=>{this.navigated=!0,this.lastSuccessfulId=J.id,this.currentPageId=J.targetPageId,this.events.next(new qe(J.id,this.serializeUrl(J.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,J.resolve(!0)},J=>{this.console.warn(`Unhandled Navigation Error: ${J}`)})}scheduleNavigation(J,wt,Nt,ne,Se){var Le,fi,ji;if(this.disposed)return Promise.resolve(!1);const Fn=this.transitions.value,hn=fs(wt)&&Fn&&!fs(Fn.source),ao=Fn.rawUrl.toString()===J.toString(),_o=Fn.id===(null===(Le=this.currentNavigation)||void 0===Le?void 0:Le.id);if(hn&&ao&&_o)return Promise.resolve(!0);let is,ms,Or;Se?(is=Se.resolve,ms=Se.reject,Or=Se.promise):Or=new Promise((Ps,ea)=>{is=Ps,ms=ea});const pl=++this.navigationId;let jr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(Nt=this.location.getState()),jr=Nt&&Nt.\u0275routerPageId?Nt.\u0275routerPageId:ne.replaceUrl||ne.skipLocationChange?null!==(fi=this.browserPageId)&&void 0!==fi?fi:0:(null!==(ji=this.browserPageId)&&void 0!==ji?ji:0)+1):jr=0,this.setTransition({id:pl,targetPageId:jr,source:wt,restoredState:Nt,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:J,extras:ne,resolve:is,reject:ms,promise:Or,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Or.catch(Ps=>Promise.reject(Ps))}setBrowserUrl(J,wt){const Nt=this.urlSerializer.serialize(J),ne=Object.assign(Object.assign({},wt.extras.state),this.generateNgRouterState(wt.id,wt.targetPageId));this.location.isCurrentPathEqualTo(Nt)||wt.extras.replaceUrl?this.location.replaceState(Nt,"",ne):this.location.go(Nt,"",ne)}restoreHistory(J,wt=!1){var Nt,ne;if("computed"===this.canceledNavigationResolution){const Se=this.currentPageId-J.targetPageId;"popstate"!==J.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(Nt=this.currentNavigation)||void 0===Nt?void 0:Nt.finalUrl)||0===Se?this.currentUrlTree===(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.finalUrl)&&0===Se&&(this.resetState(J),this.browserUrlTree=J.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Se)}else"replace"===this.canceledNavigationResolution&&(wt&&this.resetState(J),this.resetUrlToCurrentUrlTree())}resetState(J){this.routerState=J.currentRouterState,this.currentUrlTree=J.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,J.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(J,wt){const Nt=new Ne(J.id,this.serializeUrl(J.extractedUrl),wt);this.triggerEvent(Nt),J.resolve(!1)}generateNgRouterState(J,wt){return"computed"===this.canceledNavigationResolution?{navigationId:J,\u0275routerPageId:wt}:{navigationId:J}}}return ht.\u0275fac=function(J){b.$Z()},ht.\u0275prov=b.Yz7({token:ht,factory:ht.\u0275fac}),ht})();function fs(ht){return"imperative"!==ht}let fr=(()=>{class ht{constructor(J,wt,Nt){this.router=J,this.route=wt,this.locationStrategy=Nt,this.commands=null,this.href=null,this.onChanges=new nt.x,this.subscription=J.events.subscribe(ne=>{ne instanceof qe&&this.updateTargetUrlAndHref()})}set routerLink(J){this.commands=null!=J?Array.isArray(J)?J:[J]:null}ngOnChanges(J){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(J,wt,Nt,ne,Se){if(0!==J||wt||Nt||ne||Se||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Le={skipLocationChange:Wr(this.skipLocationChange),replaceUrl:Wr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Le),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Wr(this.preserveFragment)})}}return ht.\u0275fac=function(J){return new(J||ht)(b.Y36(Tr),b.Y36(vr),b.Y36(He.S$))},ht.\u0275dir=b.lG2({type:ht,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(J,wt){1&J&&b.NdJ("click",function(ne){return wt.onClick(ne.button,ne.ctrlKey,ne.shiftKey,ne.altKey,ne.metaKey)}),2&J&&b.uIk("target",wt.target)("href",wt.href,b.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[b.TTD]}),ht})();function Wr(ht){return""===ht||!!ht}class xs{}class La{preload(q,J){return(0,M.of)(null)}}let Il=(()=>{class ht{constructor(J,wt,Nt,ne){this.router=J,this.injector=Nt,this.preloadingStrategy=ne,this.loader=new nn(Nt,wt,fi=>J.triggerEvent(new Pt(fi)),fi=>J.triggerEvent(new he(fi)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,xt.h)(J=>J instanceof qe),(0,Ht.b)(()=>this.preload())).subscribe(()=>{})}preload(){const J=this.injector.get(b.h0i);return this.processRoutes(J,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(J,wt){const Nt=[];for(const ne of wt)if(ne.loadChildren&&!ne.canLoad&&ne._loadedConfig){const Se=ne._loadedConfig;Nt.push(this.processRoutes(Se.module,Se.routes))}else ne.loadChildren&&!ne.canLoad?Nt.push(this.preloadConfig(J,ne)):ne.children&&Nt.push(this.processRoutes(J,ne.children));return(0,w.D)(Nt).pipe((0,Be.J)(),(0,it.U)(ne=>{}))}preloadConfig(J,wt){return this.preloadingStrategy.preload(wt,()=>(wt._loadedConfig?(0,M.of)(wt._loadedConfig):this.loader.load(J.injector,wt)).pipe((0,ce.z)(ne=>(wt._loadedConfig=ne,this.processRoutes(ne.module,ne.routes)))))}}return ht.\u0275fac=function(J){return new(J||ht)(b.LFG(Tr),b.LFG(b.Sil),b.LFG(b.zs3),b.LFG(xs))},ht.\u0275prov=b.Yz7({token:ht,factory:ht.\u0275fac}),ht})(),ks=(()=>{class ht{constructor(J,wt,Nt={}){this.router=J,this.viewportScroller=wt,this.options=Nt,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},Nt.scrollPositionRestoration=Nt.scrollPositionRestoration||"disabled",Nt.anchorScrolling=Nt.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(J=>{J instanceof vi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=J.navigationTrigger,this.restoredId=J.restoredState?J.restoredState.navigationId:0):J instanceof qe&&(this.lastId=J.id,this.scheduleScrollEvent(J,this.router.parseUrl(J.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(J=>{J instanceof ge&&(J.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(J.position):J.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(J.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(J,wt){this.router.triggerEvent(new ge(J,"popstate"===this.lastSource?this.store[this.restoredId]:null,wt))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return ht.\u0275fac=function(J){b.$Z()},ht.\u0275prov=b.Yz7({token:ht,factory:ht.\u0275fac}),ht})();const Qs=new b.OlP("ROUTER_CONFIGURATION"),mc=new b.OlP("ROUTER_FORROOT_GUARD"),Ka=[He.Ye,{provide:$e,useClass:Me},{provide:Tr,useFactory:function(ht,q,J,wt,Nt,ne,Se={},Le,fi){const ji=new Tr(null,ht,q,J,wt,Nt,Fi(ne));return Le&&(ji.urlHandlingStrategy=Le),fi&&(ji.routeReuseStrategy=fi),function(ht,q){ht.errorHandler&&(q.errorHandler=ht.errorHandler),ht.malformedUriErrorHandler&&(q.malformedUriErrorHandler=ht.malformedUriErrorHandler),ht.onSameUrlNavigation&&(q.onSameUrlNavigation=ht.onSameUrlNavigation),ht.paramsInheritanceStrategy&&(q.paramsInheritanceStrategy=ht.paramsInheritanceStrategy),ht.relativeLinkResolution&&(q.relativeLinkResolution=ht.relativeLinkResolution),ht.urlUpdateStrategy&&(q.urlUpdateStrategy=ht.urlUpdateStrategy),ht.canceledNavigationResolution&&(q.canceledNavigationResolution=ht.canceledNavigationResolution)}(Se,ji),Se.enableTracing&&ji.events.subscribe(Fn=>{var hn,ao;null===(hn=console.group)||void 0===hn||hn.call(console,`Router Event: ${Fn.constructor.name}`),console.log(Fn.toString()),console.log(Fn),null===(ao=console.groupEnd)||void 0===ao||ao.call(console)}),ji},deps:[$e,To,He.Ye,b.zs3,b.Sil,Qi,Qs,[class{},new b.FiY],[class{},new b.FiY]]},To,{provide:vr,useFactory:function(ht){return ht.routerState.root},deps:[Tr]},Il,La,class{preload(q,J){return J().pipe((0,bt.K)(()=>(0,M.of)(null)))}},{provide:Qs,useValue:{enableTracing:!1}}];function qs(){return new b.PXZ("Router",Tr)}let Na=(()=>{class ht{constructor(J,wt){}static forRoot(J,wt){return{ngModule:ht,providers:[Ka,ha(J),{provide:mc,useFactory:Ls,deps:[[Tr,new b.FiY,new b.tp0]]},{provide:Qs,useValue:wt||{}},{provide:He.S$,useFactory:Al,deps:[He.lw,[new b.tBr(He.mr),new b.FiY],Qs]},{provide:ks,useFactory:Ml,deps:[Tr,He.EM,Qs]},{provide:xs,useExisting:wt&&wt.preloadingStrategy?wt.preloadingStrategy:La},{provide:b.PXZ,multi:!0,useFactory:qs},[ta,{provide:b.ip1,multi:!0,useFactory:Ol,deps:[ta]},{provide:$a,useFactory:dl,deps:[ta]},{provide:b.tb,multi:!0,useExisting:$a}]]}}static forChild(J){return{ngModule:ht,providers:[ha(J)]}}}return ht.\u0275fac=function(J){return new(J||ht)(b.LFG(mc,8),b.LFG(Tr,8))},ht.\u0275mod=b.oAB({type:ht}),ht.\u0275inj=b.cJS({}),ht})();function Ml(ht,q,J){return J.scrollOffset&&q.setOffset(J.scrollOffset),new ks(ht,q,J)}function Al(ht,q,J={}){return J.useHash?new He.Do(ht,q):new He.b0(ht,q)}function Ls(ht){return"guarded"}function ha(ht){return[{provide:b.deG,multi:!0,useValue:ht},{provide:Qi,multi:!0,useValue:ht}]}let ta=(()=>{class ht{constructor(J){this.injector=J,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new nt.x}appInitializer(){return this.injector.get(He.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let wt=null;const Nt=new Promise(Le=>wt=Le),ne=this.injector.get(Tr),Se=this.injector.get(Qs);return"disabled"===Se.initialNavigation?(ne.setUpLocationChangeListener(),wt(!0)):"enabled"===Se.initialNavigation||"enabledBlocking"===Se.initialNavigation?(ne.hooks.afterPreactivation=()=>this.initNavigation?(0,M.of)(null):(this.initNavigation=!0,wt(!0),this.resultOfPreactivationDone),ne.initialNavigation()):wt(!0),Nt})}bootstrapListener(J){const wt=this.injector.get(Qs),Nt=this.injector.get(Il),ne=this.injector.get(ks),Se=this.injector.get(Tr),Le=this.injector.get(b.z2F);J===Le.components[0]&&(("enabledNonBlocking"===wt.initialNavigation||void 0===wt.initialNavigation)&&Se.initialNavigation(),Nt.setUpPreloading(),ne.init(),Se.resetRootComponentType(Le.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return ht.\u0275fac=function(J){return new(J||ht)(b.LFG(b.zs3))},ht.\u0275prov=b.Yz7({token:ht,factory:ht.\u0275fac}),ht})();function Ol(ht){return ht.appInitializer.bind(ht)}function dl(ht){return ht.bootstrapListener.bind(ht)}const $a=new b.OlP("Router Initializer")},15861:(k,B,f)=>{"use strict";function b(e,t,n,o,s,c,_){try{var w=e[c](_),M=w.value}catch(U){return void n(U)}w.done?t(M):Promise.resolve(M).then(o,s)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(o,s){var c=e.apply(t,n);function _(M){b(c,o,s,_,w,"next",M)}function w(M){b(c,o,s,_,w,"throw",M)}_(void 0)})}}f.d(B,{Z:()=>p})}},k=>{k(k.s=13155)}]);