var T9=Object.defineProperty,C9=Object.defineProperties,S9=Object.getOwnPropertyDescriptors,Tx=Object.getOwnPropertySymbols,w9=Object.prototype.hasOwnProperty,R9=Object.prototype.propertyIsEnumerable,_T=(C,A,g)=>A in C?T9(C,A,{enumerable:!0,configurable:!0,writable:!0,value:g}):C[A]=g,Je=(C,A)=>{for(var g in A||(A={}))w9.call(A,g)&&_T(C,g,A[g]);if(Tx)for(var g of Tx(A))R9.call(A,g)&&_T(C,g,A[g]);return C},wi=(C,A)=>C9(C,S9(A)),No=(C,A,g)=>(_T(C,"symbol"!=typeof A?A+"":A,g),g);(self.webpackChunkAutoBlocklyApp=self.webpackChunkAutoBlocklyApp||[]).push([[179],{38506:C=>{function A(b,w,o,n,a,c,d){try{var _=b[c](d),y=_.value}catch(R){return void o(R)}_.done?w(y):Promise.resolve(y).then(n,a)}C.exports=function(b){return function(){var w=this,o=arguments;return new Promise(function(n,a){var c=b.apply(w,o);function d(y){A(c,n,a,d,_,"next",y)}function _(y){A(c,n,a,d,_,"throw",y)}d(void 0)})}},C.exports.default=C.exports,C.exports.__esModule=!0},89926:(C,A,g)=>{C.exports=g(16775)},87048:(C,A,g)=>{C.exports=g(29032)},20272:(C,A,g)=>{C.exports=g(93928)},26775:(C,A,g)=>{C.exports=g(40779)},78804:(C,A,g)=>{C.exports=g(88092)},11761:(C,A,g)=>{C.exports=g(43910)},64770:(C,A,g)=>{C.exports=g(89412)},71049:(C,A,g)=>{C.exports=g(71166)},3498:(C,A,g)=>{C.exports=g(14570)},38330:(C,A,g)=>{C.exports=g(68786)},23289:(C,A,g)=>{C.exports=g(94768)},53130:(C,A,g)=>{C.exports=g(5219)},45107:(C,A,g)=>{C.exports=g(47833)},45635:(C,A,g)=>{C.exports=g(16625)},96916:(C,A,g)=>{C.exports=g(95609)},58258:(C,A,g)=>{C.exports=g(56447)},14569:(C,A,g)=>{C.exports=g(3024)},97326:(C,A,g)=>{C.exports=g(15814)},57124:(C,A,g)=>{C.exports=g(80345)},57272:(C,A,g)=>{C.exports=g(90974)},66360:(C,A,g)=>{C.exports=g(23458)},71094:(C,A,g)=>{C.exports=g(75223)},93165:(C,A,g)=>{C.exports=g(31151)},19898:(C,A,g)=>{C.exports=g(31175)},84916:(C,A,g)=>{C.exports=g(60918)},31946:(C,A,g)=>{C.exports=g(68625)},18753:(C,A,g)=>{C.exports=g(58917)},90343:(C,A,g)=>{C.exports=g(2126)},12988:(C,A,g)=>{C.exports=g(93648)},23005:(C,A,g)=>{C.exports=g(58300)},26394:(C,A,g)=>{C.exports=g(7137)},93449:(C,A,g)=>{C.exports=g(24435)},3599:(C,A,g)=>{C.exports=g(30218)},39126:(C,A,g)=>{C.exports=g(91388)},2805:(C,A,g)=>{"use strict";g.r(A),g.d(A,{__extends:()=>w,__assign:()=>o,__rest:()=>n,__decorate:()=>a,__param:()=>c,__metadata:()=>d,__awaiter:()=>_,__generator:()=>y,__createBinding:()=>R,__exportStar:()=>x,__values:()=>B,__read:()=>H,__spread:()=>F,__spreadArrays:()=>Y,__spreadArray:()=>z,__await:()=>G,__asyncGenerator:()=>ie,__asyncDelegator:()=>Z,__asyncValues:()=>re,__makeTemplateObject:()=>$,__importStar:()=>K,__importDefault:()=>j,__classPrivateFieldGet:()=>k,__classPrivateFieldSet:()=>oe});var b=function(W,J){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,ee){ne.__proto__=ee}||function(ne,ee){for(var me in ee)Object.prototype.hasOwnProperty.call(ee,me)&&(ne[me]=ee[me])})(W,J)};function w(W,J){if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function ne(){this.constructor=W}b(W,J),W.prototype=null===J?Object.create(J):(ne.prototype=J.prototype,new ne)}var o=function(){return o=Object.assign||function(J){for(var ne,ee=1,me=arguments.length;ee<me;ee++)for(var se in ne=arguments[ee])Object.prototype.hasOwnProperty.call(ne,se)&&(J[se]=ne[se]);return J},o.apply(this,arguments)};function n(W,J){var ne={};for(var ee in W)Object.prototype.hasOwnProperty.call(W,ee)&&J.indexOf(ee)<0&&(ne[ee]=W[ee]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var me=0;for(ee=Object.getOwnPropertySymbols(W);me<ee.length;me++)J.indexOf(ee[me])<0&&Object.prototype.propertyIsEnumerable.call(W,ee[me])&&(ne[ee[me]]=W[ee[me]])}return ne}function a(W,J,ne,ee){var de,me=arguments.length,se=me<3?J:null===ee?ee=Object.getOwnPropertyDescriptor(J,ne):ee;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)se=Reflect.decorate(W,J,ne,ee);else for(var Ee=W.length-1;Ee>=0;Ee--)(de=W[Ee])&&(se=(me<3?de(se):me>3?de(J,ne,se):de(J,ne))||se);return me>3&&se&&Object.defineProperty(J,ne,se),se}function c(W,J){return function(ne,ee){J(ne,ee,W)}}function d(W,J){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(W,J)}function _(W,J,ne,ee){return new(ne||(ne=Promise))(function(se,de){function Ee(Re){try{fe(ee.next(Re))}catch(Te){de(Te)}}function we(Re){try{fe(ee.throw(Re))}catch(Te){de(Te)}}function fe(Re){Re.done?se(Re.value):function(se){return se instanceof ne?se:new ne(function(de){de(se)})}(Re.value).then(Ee,we)}fe((ee=ee.apply(W,J||[])).next())})}function y(W,J){var ee,me,se,de,ne={label:0,sent:function(){if(1&se[0])throw se[1];return se[1]},trys:[],ops:[]};return de={next:Ee(0),throw:Ee(1),return:Ee(2)},"function"==typeof Symbol&&(de[Symbol.iterator]=function(){return this}),de;function Ee(fe){return function(Re){return function(fe){if(ee)throw new TypeError("Generator is already executing.");for(;ne;)try{if(ee=1,me&&(se=2&fe[0]?me.return:fe[0]?me.throw||((se=me.return)&&se.call(me),0):me.next)&&!(se=se.call(me,fe[1])).done)return se;switch(me=0,se&&(fe=[2&fe[0],se.value]),fe[0]){case 0:case 1:se=fe;break;case 4:return ne.label++,{value:fe[1],done:!1};case 5:ne.label++,me=fe[1],fe=[0];continue;case 7:fe=ne.ops.pop(),ne.trys.pop();continue;default:if(!(se=(se=ne.trys).length>0&&se[se.length-1])&&(6===fe[0]||2===fe[0])){ne=0;continue}if(3===fe[0]&&(!se||fe[1]>se[0]&&fe[1]<se[3])){ne.label=fe[1];break}if(6===fe[0]&&ne.label<se[1]){ne.label=se[1],se=fe;break}if(se&&ne.label<se[2]){ne.label=se[2],ne.ops.push(fe);break}se[2]&&ne.ops.pop(),ne.trys.pop();continue}fe=J.call(W,ne)}catch(Re){fe=[6,Re],me=0}finally{ee=se=0}if(5&fe[0])throw fe[1];return{value:fe[0]?fe[1]:void 0,done:!0}}([fe,Re])}}}var R=Object.create?function(W,J,ne,ee){void 0===ee&&(ee=ne),Object.defineProperty(W,ee,{enumerable:!0,get:function(){return J[ne]}})}:function(W,J,ne,ee){void 0===ee&&(ee=ne),W[ee]=J[ne]};function x(W,J){for(var ne in W)"default"!==ne&&!Object.prototype.hasOwnProperty.call(J,ne)&&R(J,W,ne)}function B(W){var J="function"==typeof Symbol&&Symbol.iterator,ne=J&&W[J],ee=0;if(ne)return ne.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ee>=W.length&&(W=void 0),{value:W&&W[ee++],done:!W}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(W,J){var ne="function"==typeof Symbol&&W[Symbol.iterator];if(!ne)return W;var me,de,ee=ne.call(W),se=[];try{for(;(void 0===J||J-- >0)&&!(me=ee.next()).done;)se.push(me.value)}catch(Ee){de={error:Ee}}finally{try{me&&!me.done&&(ne=ee.return)&&ne.call(ee)}finally{if(de)throw de.error}}return se}function F(){for(var W=[],J=0;J<arguments.length;J++)W=W.concat(H(arguments[J]));return W}function Y(){for(var W=0,J=0,ne=arguments.length;J<ne;J++)W+=arguments[J].length;var ee=Array(W),me=0;for(J=0;J<ne;J++)for(var se=arguments[J],de=0,Ee=se.length;de<Ee;de++,me++)ee[me]=se[de];return ee}function z(W,J,ne){if(ne||2===arguments.length)for(var se,ee=0,me=J.length;ee<me;ee++)(se||!(ee in J))&&(se||(se=Array.prototype.slice.call(J,0,ee)),se[ee]=J[ee]);return W.concat(se||J)}function G(W){return this instanceof G?(this.v=W,this):new G(W)}function ie(W,J,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ee=ne.apply(W,J||[]),se=[];return me={},de("next"),de("throw"),de("return"),me[Symbol.asyncIterator]=function(){return this},me;function de(Ie){ee[Ie]&&(me[Ie]=function(xe){return new Promise(function(Oe,ot){se.push([Ie,xe,Oe,ot])>1||Ee(Ie,xe)})})}function Ee(Ie,xe){try{!function(Ie){Ie.value instanceof G?Promise.resolve(Ie.value.v).then(fe,Re):Te(se[0][2],Ie)}(ee[Ie](xe))}catch(Oe){Te(se[0][3],Oe)}}function fe(Ie){Ee("next",Ie)}function Re(Ie){Ee("throw",Ie)}function Te(Ie,xe){Ie(xe),se.shift(),se.length&&Ee(se[0][0],se[0][1])}}function Z(W){var J,ne;return J={},ee("next"),ee("throw",function(me){throw me}),ee("return"),J[Symbol.iterator]=function(){return this},J;function ee(me,se){J[me]=W[me]?function(de){return(ne=!ne)?{value:G(W[me](de)),done:"return"===me}:se?se(de):de}:se}}function re(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,J=W[Symbol.asyncIterator];return J?J.call(W):(W=B(W),ne={},ee("next"),ee("throw"),ee("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function ee(se){ne[se]=W[se]&&function(de){return new Promise(function(Ee,we){!function(se,de,Ee,we){Promise.resolve(we).then(function(fe){se({value:fe,done:Ee})},de)}(Ee,we,(de=W[se](de)).done,de.value)})}}}function $(W,J){return Object.defineProperty?Object.defineProperty(W,"raw",{value:J}):W.raw=J,W}var ae=Object.create?function(W,J){Object.defineProperty(W,"default",{enumerable:!0,value:J})}:function(W,J){W.default=J};function K(W){if(W&&W.__esModule)return W;var J={};if(null!=W)for(var ne in W)"default"!==ne&&Object.prototype.hasOwnProperty.call(W,ne)&&R(J,W,ne);return ae(J,W),J}function j(W){return W&&W.__esModule?W:{default:W}}function k(W,J,ne,ee){if("a"===ne&&!ee)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof J?W!==J||!ee:!J.has(W))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===ne?ee:"a"===ne?ee.call(W):ee?ee.value:J.get(W)}function oe(W,J,ne,ee,me){if("m"===ee)throw new TypeError("Private method is not writable");if("a"===ee&&!me)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof J?W!==J||!me:!J.has(W))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===ee?me.call(W,ne):me?me.value=ne:J.set(W,ne),ne}},76588:function(C,A,g){var w,o;w=[g(96761)],void 0!==(o=function(n){"use strict";return n}.apply(A,w))&&(C.exports=o)},96761:function(C,A){var w;void 0!==(w=function(){"use strict";var o={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return o.CONNECTING_SNAP_RADIUS=o.SNAP_RADIUS,o.CURRENT_CONNECTION_PREFERENCE=8,o.BUMP_DELAY=250,o.BUMP_RANDOMNESS=10,o.COLLAPSE_CHARS=30,o.LONGPRESS=750,o.SOUND_LIMIT=100,o.DRAG_STACK=!0,o.HSV_SATURATION=.45,o.HSV_VALUE=.65,o.SPRITE={width:96,height:124,url:"sprites.png"},o.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},o.DRAG_NONE=0,o.DRAG_STICKY=1,o.DRAG_BEGIN=1,o.DRAG_FREE=2,o.OPPOSITE_TYPE=[],o.OPPOSITE_TYPE[o.connectionTypes.INPUT_VALUE]=o.connectionTypes.OUTPUT_VALUE,o.OPPOSITE_TYPE[o.connectionTypes.OUTPUT_VALUE]=o.connectionTypes.INPUT_VALUE,o.OPPOSITE_TYPE[o.connectionTypes.NEXT_STATEMENT]=o.connectionTypes.PREVIOUS_STATEMENT,o.OPPOSITE_TYPE[o.connectionTypes.PREVIOUS_STATEMENT]=o.connectionTypes.NEXT_STATEMENT,o.VARIABLE_CATEGORY_NAME="VARIABLE",o.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",o.PROCEDURE_CATEGORY_NAME="PROCEDURE",o.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",o.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",o.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",o.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",o.utils={},o.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),o.Msg={},o.utils.global.Blockly||(o.utils.global.Blockly={}),o.utils.global.Blockly.Msg||(o.utils.global.Blockly.Msg=o.Msg),o.utils.colour={},o.utils.colour.parse=function(n){n=String(n).toLowerCase().trim();var a=o.utils.colour.names[n];if(a||(a="0x"==n.substring(0,2)?"#"+n.substring(2):n,/^#[0-9a-f]{6}$/.test(a="#"==a[0]?a:"#"+a)))return a;if(/^#[0-9a-f]{3}$/.test(a))return["#",a[1],a[1],a[2],a[2],a[3],a[3]].join("");var c=n.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return c&&(n=Number(c[1]),a=Number(c[2]),c=Number(c[3]),0<=n&&256>n&&0<=a&&256>a&&0<=c&&256>c)?o.utils.colour.rgbToHex(n,a,c):null},o.utils.colour.rgbToHex=function(n,a,c){return a=n<<16|a<<8|c,16>n?"#"+(16777216|a).toString(16).substr(1):"#"+a.toString(16)},o.utils.colour.hexToRgb=function(n){return(n=o.utils.colour.parse(n))?[(n=parseInt(n.substr(1),16))>>16,n>>8&255,255&n]:[0,0,0]},o.utils.colour.hsvToHex=function(n,a,c){var d=0,_=0,y=0;if(0==a)y=_=d=c;else{var R=Math.floor(n/60),x=n/60-R;n=c*(1-a);var B=c*(1-a*x);switch(a=c*(1-a*(1-x)),R){case 1:d=B,_=c,y=n;break;case 2:d=n,_=c,y=a;break;case 3:d=n,_=B,y=c;break;case 4:d=a,_=n,y=c;break;case 5:d=c,_=n,y=B;break;case 6:case 0:d=c,_=a,y=n}}return o.utils.colour.rgbToHex(Math.floor(d),Math.floor(_),Math.floor(y))},o.utils.colour.blend=function(n,a,c){return(n=o.utils.colour.parse(n))&&(a=o.utils.colour.parse(a))?(n=o.utils.colour.hexToRgb(n),a=o.utils.colour.hexToRgb(a),o.utils.colour.rgbToHex(Math.round(a[0]+c*(n[0]-a[0])),Math.round(a[1]+c*(n[1]-a[1])),Math.round(a[2]+c*(n[2]-a[2])))):null},o.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},o.utils.Coordinate=function(n,a){this.x=n,this.y=a},o.utils.Coordinate.equals=function(n,a){return n==a||!(!n||!a)&&n.x==a.x&&n.y==a.y},o.utils.Coordinate.distance=function(n,a){var c=n.x-a.x;return n=n.y-a.y,Math.sqrt(c*c+n*n)},o.utils.Coordinate.magnitude=function(n){return Math.sqrt(n.x*n.x+n.y*n.y)},o.utils.Coordinate.difference=function(n,a){return new o.utils.Coordinate(n.x-a.x,n.y-a.y)},o.utils.Coordinate.sum=function(n,a){return new o.utils.Coordinate(n.x+a.x,n.y+a.y)},o.utils.Coordinate.prototype.clone=function(){return new o.utils.Coordinate(this.x,this.y)},o.utils.Coordinate.prototype.scale=function(n){return this.x*=n,this.y*=n,this},o.utils.Coordinate.prototype.translate=function(n,a){return this.x+=n,this.y+=a,this},o.utils.Rect=function(n,a,c,d){this.top=n,this.bottom=a,this.left=c,this.right=d},o.utils.Rect.prototype.contains=function(n,a){return n>=this.left&&n<=this.right&&a>=this.top&&a<=this.bottom},o.utils.Rect.prototype.intersects=function(n){return!(this.left>n.right||this.right<n.left||this.top>n.bottom||this.bottom<n.top)},o.utils.string={},o.utils.string.startsWith=function(n,a){return 0==n.lastIndexOf(a,0)},o.utils.string.shortestStringLength=function(n){return n.length?n.reduce(function(a,c){return a.length<c.length?a:c}).length:0},o.utils.string.commonWordPrefix=function(n,a){if(!n.length)return 0;if(1==n.length)return n[0].length;var c=0;a=a||o.utils.string.shortestStringLength(n);for(var d=0;d<a;d++){for(var _=n[0][d],y=1;y<n.length;y++)if(_!=n[y][d])return c;" "==_&&(c=d+1)}for(y=1;y<n.length;y++)if((_=n[y][d])&&" "!=_)return c;return a},o.utils.string.commonWordSuffix=function(n,a){if(!n.length)return 0;if(1==n.length)return n[0].length;var c=0;a=a||o.utils.string.shortestStringLength(n);for(var d=0;d<a;d++){for(var _=n[0].substr(-d-1,1),y=1;y<n.length;y++)if(_!=n[y].substr(-d-1,1))return c;" "==_&&(c=d+1)}for(y=1;y<n.length;y++)if((_=n[y].charAt(n[y].length-d-1))&&" "!=_)return c;return a},o.utils.string.wrap=function(n,a){n=n.split("\n");for(var c=0;c<n.length;c++)n[c]=o.utils.string.wrapLine_(n[c],a);return n.join("\n")},o.utils.string.wrapLine_=function(n,a){if(n.length<=a)return n;for(var c=n.trim().split(/\s+/),d=0;d<c.length;d++)c[d].length>a&&(a=c[d].length);d=-1/0;var _=1;do{var y=d,R=n;n=[];var x=c.length/_,B=1;for(d=0;d<c.length-1;d++)B<(d+1.5)/x?(B++,n[d]=!0):n[d]=!1;n=o.utils.string.wrapMutate_(c,n,a),d=o.utils.string.wrapScore_(c,n,a),n=o.utils.string.wrapToText_(c,n),_++}while(d>y);return R},o.utils.string.wrapScore_=function(n,a,c){for(var d=[0],_=[],y=0;y<n.length;y++)d[d.length-1]+=n[y].length,!0===a[y]?(d.push(0),_.push(n[y].charAt(n[y].length-1))):!1===a[y]&&d[d.length-1]++;for(n=Math.max.apply(Math,d),y=a=0;y<d.length;y++)a-=2*Math.pow(Math.abs(c-d[y]),1.5),a-=Math.pow(n-d[y],1.5),-1!=".?!".indexOf(_[y])?a+=c/3:-1!=",;)]}".indexOf(_[y])&&(a+=c/4);return 1<d.length&&d[d.length-1]<=d[d.length-2]&&(a+=.5),a},o.utils.string.wrapMutate_=function(n,a,c){for(var _,d=o.utils.string.wrapScore_(n,a,c),y=0;y<a.length-1;y++)if(a[y]!=a[y+1]){var R=[].concat(a);R[y]=!R[y],R[y+1]=!R[y+1];var x=o.utils.string.wrapScore_(n,R,c);x>d&&(d=x,_=R)}return _?o.utils.string.wrapMutate_(n,_,c):a},o.utils.string.wrapToText_=function(n,a){for(var c=[],d=0;d<n.length;d++)c.push(n[d]),void 0!==a[d]&&c.push(a[d]?"\n":" ");return c.join("")},o.utils.Size=function(n,a){this.width=n,this.height=a},o.utils.Size.equals=function(n,a){return n==a||!(!n||!a)&&n.width==a.width&&n.height==a.height},o.utils.style={},o.utils.style.getSize=function(n){if("none"!=o.utils.style.getStyle_(n,"display"))return o.utils.style.getSizeWithDisplay_(n);var a=n.style,c=a.display,d=a.visibility,_=a.position;a.visibility="hidden",a.position="absolute",a.display="inline";var y=n.offsetWidth;return n=n.offsetHeight,a.display=c,a.position=_,a.visibility=d,new o.utils.Size(y,n)},o.utils.style.getSizeWithDisplay_=function(n){return new o.utils.Size(n.offsetWidth,n.offsetHeight)},o.utils.style.getStyle_=function(n,a){return o.utils.style.getComputedStyle(n,a)||o.utils.style.getCascadedStyle(n,a)||n.style&&n.style[a]},o.utils.style.getComputedStyle=function(n,a){return document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(n,null))&&(n[a]||n.getPropertyValue(a))||""},o.utils.style.getCascadedStyle=function(n,a){return n.currentStyle?n.currentStyle[a]:null},o.utils.style.getPageOffset=function(n){var a=new o.utils.Coordinate(0,0);n=n.getBoundingClientRect();var c=document.documentElement;return c=new o.utils.Coordinate(window.pageXOffset||c.scrollLeft,window.pageYOffset||c.scrollTop),a.x=n.left+c.x,a.y=n.top+c.y,a},o.utils.style.getViewportPageOffset=function(){var n=document.body,a=document.documentElement;return new o.utils.Coordinate(n.scrollLeft||a.scrollLeft,n.scrollTop||a.scrollTop)},o.utils.style.setElementShown=function(n,a){n.style.display=a?"":"none"},o.utils.style.isRightToLeft=function(n){return"rtl"==o.utils.style.getStyle_(n,"direction")},o.utils.style.getBorderBox=function(n){var a=o.utils.style.getComputedStyle(n,"borderLeftWidth"),c=o.utils.style.getComputedStyle(n,"borderRightWidth"),d=o.utils.style.getComputedStyle(n,"borderTopWidth");return n=o.utils.style.getComputedStyle(n,"borderBottomWidth"),{top:parseFloat(d),right:parseFloat(c),bottom:parseFloat(n),left:parseFloat(a)}},o.utils.style.scrollIntoContainerView=function(n,a,c){n=o.utils.style.getContainerOffsetToScrollInto(n,a,c),a.scrollLeft=n.x,a.scrollTop=n.y},o.utils.style.getContainerOffsetToScrollInto=function(n,a,c){var d=o.utils.style.getPageOffset(n),_=o.utils.style.getPageOffset(a),y=o.utils.style.getBorderBox(a),R=d.x-_.x-y.left;return d=d.y-_.y-y.top,_=o.utils.style.getSizeWithDisplay_(n),n=a.clientWidth-_.width,_=a.clientHeight-_.height,y=a.scrollLeft,a=a.scrollTop,c?(y+=R-n/2,a+=d-_/2):(y+=Math.min(R,Math.max(R-n,0)),a+=Math.min(d,Math.max(d-_,0))),new o.utils.Coordinate(y,a)},o.utils.userAgent={},function(n){function a(d){return-1!=c.indexOf(d.toUpperCase())}o.utils.userAgent.raw=n;var c=o.utils.userAgent.raw.toUpperCase();o.utils.userAgent.IE=a("Trident")||a("MSIE"),o.utils.userAgent.EDGE=a("Edge"),o.utils.userAgent.JAVA_FX=a("JavaFX"),o.utils.userAgent.CHROME=(a("Chrome")||a("CriOS"))&&!o.utils.userAgent.EDGE,o.utils.userAgent.WEBKIT=a("WebKit")&&!o.utils.userAgent.EDGE,o.utils.userAgent.GECKO=a("Gecko")&&!o.utils.userAgent.WEBKIT&&!o.utils.userAgent.IE&&!o.utils.userAgent.EDGE,o.utils.userAgent.ANDROID=a("Android"),n=o.utils.global.navigator&&o.utils.global.navigator.maxTouchPoints,o.utils.userAgent.IPAD=a("iPad")||a("Macintosh")&&0<n,o.utils.userAgent.IPOD=a("iPod"),o.utils.userAgent.IPHONE=a("iPhone")&&!o.utils.userAgent.IPAD&&!o.utils.userAgent.IPOD,o.utils.userAgent.MAC=a("Macintosh"),o.utils.userAgent.TABLET=o.utils.userAgent.IPAD||o.utils.userAgent.ANDROID&&!a("Mobile")||a("Silk"),o.utils.userAgent.MOBILE=!o.utils.userAgent.TABLET&&(o.utils.userAgent.IPOD||o.utils.userAgent.IPHONE||o.utils.userAgent.ANDROID||a("IEMobile"))}(o.utils.global.navigator&&o.utils.global.navigator.userAgent||""),o.utils.noEvent=function(n){n.preventDefault(),n.stopPropagation()},o.utils.isTargetInput=function(n){return"textarea"==n.target.type||"text"==n.target.type||"number"==n.target.type||"email"==n.target.type||"password"==n.target.type||"search"==n.target.type||"tel"==n.target.type||"url"==n.target.type||n.target.isContentEditable||n.target.dataset&&"true"==n.target.dataset.isTextInput},o.utils.getRelativeXY=function(n){var a=new o.utils.Coordinate(0,0),c=n.getAttribute("x");return c&&(a.x=parseInt(c,10)),(c=n.getAttribute("y"))&&(a.y=parseInt(c,10)),(c=(c=n.getAttribute("transform"))&&c.match(o.utils.getRelativeXY.XY_REGEX_))&&(a.x+=Number(c[1]),c[3]&&(a.y+=Number(c[3]))),(n=n.getAttribute("style"))&&-1<n.indexOf("translate")&&(n=n.match(o.utils.getRelativeXY.XY_STYLE_REGEX_))&&(a.x+=Number(n[1]),n[3]&&(a.y+=Number(n[3]))),a},o.utils.getInjectionDivXY_=function(n){for(var a=0,c=0;n;){var d=o.utils.getRelativeXY(n);if(a+=d.x,c+=d.y,-1!=(" "+(n.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;n=n.parentNode}return new o.utils.Coordinate(a,c)},o.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,o.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,o.utils.isRightButton=function(n){return!(!n.ctrlKey||!o.utils.userAgent.MAC)||2==n.button},o.utils.mouseToSvg=function(n,a,c){var d=a.createSVGPoint();return d.x=n.clientX,d.y=n.clientY,c||(c=a.getScreenCTM().inverse()),d.matrixTransform(c)},o.utils.getScrollDeltaPixels=function(n){switch(n.deltaMode){default:return{x:n.deltaX,y:n.deltaY};case 1:return{x:n.deltaX*o.LINE_MODE_MULTIPLIER,y:n.deltaY*o.LINE_MODE_MULTIPLIER};case 2:return{x:n.deltaX*o.PAGE_MODE_MULTIPLIER,y:n.deltaY*o.PAGE_MODE_MULTIPLIER}}},o.utils.tokenizeInterpolation=function(n){return o.utils.tokenizeInterpolation_(n,!0)},o.utils.replaceMessageReferences=function(n){return"string"!=typeof n?n:(n=o.utils.tokenizeInterpolation_(n,!1)).length?String(n[0]):""},o.utils.checkMessageReferences=function(n){for(var a=!0,c=o.Msg,d=n.match(/%{BKY_[A-Z]\w*}/gi),_=0;_<d.length;_++)null==c[d[_].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+d[_]+" in "+n),a=!1);return a},o.utils.tokenizeInterpolation_=function(n,a){var c=[],d=n.split("");d.push("");var _=0;n=[];for(var y=null,R=0;R<d.length;R++){var x=d[R];0==_?"%"==x?((x=n.join(""))&&c.push(x),n.length=0,_=1):n.push(x):1==_?"%"==x?(n.push(x),_=0):a&&"0"<=x&&"9">=x?(_=2,y=x,(x=n.join(""))&&c.push(x),n.length=0):"{"==x?_=3:(n.push("%",x),_=0):2==_?"0"<=x&&"9">=x?y+=x:(c.push(parseInt(y,10)),R--,_=0):3==_&&(""==x?(n.splice(0,0,"%{"),R--,_=0):"}"!=x?n.push(x):(_=n.join(""),/[A-Z]\w*/i.test(_)?(x=_.toUpperCase(),(x=o.utils.string.startsWith(x,"BKY_")?x.substring(4):null)&&x in o.Msg?"string"==typeof(_=o.Msg[x])?Array.prototype.push.apply(c,o.utils.tokenizeInterpolation_(_,a)):c.push(a?String(_):_):c.push("%{"+_+"}")):c.push("%{"+_+"}"),_=n.length=0))}for((x=n.join(""))&&c.push(x),a=[],R=n.length=0;R<c.length;++R)"string"==typeof c[R]?n.push(c[R]):((x=n.join(""))&&a.push(x),n.length=0,a.push(c[R]));return(x=n.join(""))&&a.push(x),n.length=0,a},o.utils.genUid=function(){for(var n=o.utils.genUid.soup_.length,a=[],c=0;20>c;c++)a[c]=o.utils.genUid.soup_.charAt(Math.random()*n);return a.join("")},o.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o.utils.is3dSupported=function(){if(void 0!==o.utils.is3dSupported.cached_)return o.utils.is3dSupported.cached_;if(!o.utils.global.getComputedStyle)return!1;var n=document.createElement("p"),a="none",c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var d in document.body.insertBefore(n,null),c)if(void 0!==n.style[d]){if(n.style[d]="translate3d(1px,1px,1px)",!(a=o.utils.global.getComputedStyle(n)))return document.body.removeChild(n),!1;a=a.getPropertyValue(c[d])}return document.body.removeChild(n),o.utils.is3dSupported.cached_="none"!==a,o.utils.is3dSupported.cached_},o.utils.runAfterPageLoad=function(n){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)n();else var a=setInterval(function(){"complete"==document.readyState&&(clearInterval(a),n())},10)},o.utils.getViewportBBox=function(){var n=o.utils.style.getViewportPageOffset();return new o.utils.Rect(n.y,document.documentElement.clientHeight+n.y,n.x,document.documentElement.clientWidth+n.x)},o.utils.arrayRemove=function(n,a){return-1!=(a=n.indexOf(a))&&(n.splice(a,1),!0)},o.utils.getDocumentScroll=function(){var n=document.documentElement,a=window;return o.utils.userAgent.IE&&a.pageYOffset!=n.scrollTop?new o.utils.Coordinate(n.scrollLeft,n.scrollTop):new o.utils.Coordinate(a.pageXOffset||n.scrollLeft,a.pageYOffset||n.scrollTop)},o.utils.getBlockTypeCounts=function(n,a){var c=Object.create(null),d=n.getDescendants(!0);for(a&&(n=n.getNextBlock())&&(n=d.indexOf(n),d.splice(n,d.length-n)),n=0;a=d[n];n++)c[a.type]?c[a.type]++:c[a.type]=1;return c},o.utils.screenToWsCoordinates=function(n,a){var c=a.x;a=a.y;var d=n.getInjectionDiv().getBoundingClientRect();return c=new o.utils.Coordinate(c-d.left,a-d.top),a=n.getOriginOffsetInPixels(),o.utils.Coordinate.difference(c,a).scale(1/n.scale)},o.utils.parseBlockColour=function(n){var a="string"==typeof n?o.utils.replaceMessageReferences(n):n,c=Number(a);if(!isNaN(c)&&0<=c&&360>=c)return{hue:c,hex:o.utils.colour.hsvToHex(c,o.HSV_SATURATION,255*o.HSV_VALUE)};if(c=o.utils.colour.parse(a))return{hue:null,hex:c};throw c='Invalid colour: "'+a+'"',n!=a&&(c+=' (from "'+n+'")'),Error(c)},o.Touch={},o.Touch.TOUCH_ENABLED="ontouchstart"in o.utils.global||!!(o.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!o.utils.global.navigator||!o.utils.global.navigator.maxTouchPoints&&!o.utils.global.navigator.msMaxTouchPoints),o.Touch.touchIdentifier_=null,o.Touch.TOUCH_MAP={},o.utils.global.PointerEvent?o.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:o.Touch.TOUCH_ENABLED&&(o.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),o.longPid_=0,o.longStart=function(n,a){o.longStop_(),n.changedTouches&&1!=n.changedTouches.length||(o.longPid_=setTimeout(function(){n.changedTouches&&(n.button=2,n.clientX=n.changedTouches[0].clientX,n.clientY=n.changedTouches[0].clientY),a&&a.handleRightClick(n)},o.LONGPRESS))},o.longStop_=function(){o.longPid_&&(clearTimeout(o.longPid_),o.longPid_=0)},o.Touch.clearTouchIdentifier=function(){o.Touch.touchIdentifier_=null},o.Touch.shouldHandleEvent=function(n){return!o.Touch.isMouseOrTouchEvent(n)||o.Touch.checkTouchIdentifier(n)},o.Touch.getTouchIdentifierFromEvent=function(n){return null!=n.pointerId?n.pointerId:n.changedTouches&&n.changedTouches[0]&&null!=n.changedTouches[0].identifier?n.changedTouches[0].identifier:"mouse"},o.Touch.checkTouchIdentifier=function(n){var a=o.Touch.getTouchIdentifierFromEvent(n);return null!=o.Touch.touchIdentifier_?o.Touch.touchIdentifier_==a:("mousedown"==n.type||"touchstart"==n.type||"pointerdown"==n.type)&&(o.Touch.touchIdentifier_=a,!0)},o.Touch.setClientFromTouch=function(n){if(o.utils.string.startsWith(n.type,"touch")){var a=n.changedTouches[0];n.clientX=a.clientX,n.clientY=a.clientY}},o.Touch.isMouseOrTouchEvent=function(n){return o.utils.string.startsWith(n.type,"touch")||o.utils.string.startsWith(n.type,"mouse")||o.utils.string.startsWith(n.type,"pointer")},o.Touch.isTouchEvent=function(n){return o.utils.string.startsWith(n.type,"touch")||o.utils.string.startsWith(n.type,"pointer")},o.Touch.splitEventByTouches=function(n){var a=[];if(n.changedTouches)for(var c=0;c<n.changedTouches.length;c++)a[c]={type:n.type,changedTouches:[n.changedTouches[c]],target:n.target,stopPropagation:function(){n.stopPropagation()},preventDefault:function(){n.preventDefault()}};else a.push(n);return a},o.browserEvents={},o.browserEvents.conditionalBind=function(n,a,c,d,_,y){var R=!1,x=function(z){var G=!_;z=o.Touch.splitEventByTouches(z);for(var Z,ie=0;Z=z[ie];ie++)(!G||o.Touch.shouldHandleEvent(Z))&&(o.Touch.setClientFromTouch(Z),c?d.call(c,Z):d(Z),R=!0)},B=[];if(o.utils.global.PointerEvent&&a in o.Touch.TOUCH_MAP)for(var F,H=0;F=o.Touch.TOUCH_MAP[a][H];H++)n.addEventListener(F,x,!1),B.push([n,F,x]);else if(n.addEventListener(a,x,!1),B.push([n,a,x]),a in o.Touch.TOUCH_MAP){var Y=function(z){x(z),R&&!y&&z.preventDefault()};for(H=0;F=o.Touch.TOUCH_MAP[a][H];H++)n.addEventListener(F,Y,!1),B.push([n,F,Y])}return B},o.browserEvents.bind=function(n,a,c,d){var _=function(H){c?d.call(c,H):d(H)},y=[];if(o.utils.global.PointerEvent&&a in o.Touch.TOUCH_MAP)for(var x,R=0;x=o.Touch.TOUCH_MAP[a][R];R++)n.addEventListener(x,_,!1),y.push([n,x,_]);else if(n.addEventListener(a,_,!1),y.push([n,a,_]),a in o.Touch.TOUCH_MAP){var B=function(H){if(H.changedTouches&&1==H.changedTouches.length){var F=H.changedTouches[0];H.clientX=F.clientX,H.clientY=F.clientY}_(H),H.preventDefault()};for(R=0;x=o.Touch.TOUCH_MAP[a][R];R++)n.addEventListener(x,B,!1),y.push([n,x,B])}return y},o.browserEvents.unbind=function(n){for(;n.length;){var a=n.pop(),c=a[2];a[0].removeEventListener(a[1],c,!1)}return c},o.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},o.ComponentManager.prototype.addComponent=function(n,a){var c=n.component.id;if(!a&&this.componentData_[c])throw Error('Plugin "'+c+'" with capabilities "'+this.componentData_[c].capabilities+'" already added.');this.componentData_[c]=n,a=[];for(var d=0;d<n.capabilities.length;d++){var _=String(n.capabilities[d]).toLowerCase();a.push(_),void 0===this.capabilityToComponentIds_[_]?this.capabilityToComponentIds_[_]=[c]:this.capabilityToComponentIds_[_].push(c)}this.componentData_[c].capabilities=a},o.ComponentManager.prototype.removeComponent=function(n){var a=this.componentData_[n];if(a){for(var c=0;c<a.capabilities.length;c++){var d=String(a.capabilities[c]).toLowerCase();this.capabilityToComponentIds_[d].splice(this.capabilityToComponentIds_[d].indexOf(n),1)}delete this.componentData_[n]}},o.ComponentManager.prototype.addCapability=function(n,a){if(!this.getComponent(n))throw Error('Cannot add capability, "'+a+'". Plugin "'+n+'" has not been added to the ComponentManager');this.hasCapability(n,a)?console.warn('Plugin "'+n+'already has capability "'+a+'"'):(a=String(a).toLowerCase(),this.componentData_[n].capabilities.push(a),this.capabilityToComponentIds_[a].push(n))},o.ComponentManager.prototype.removeCapability=function(n,a){if(!this.getComponent(n))throw Error('Cannot remove capability, "'+a+'". Plugin "'+n+'" has not been added to the ComponentManager');this.hasCapability(n,a)?(a=String(a).toLowerCase(),this.componentData_[n].capabilities.splice(this.componentData_[n].capabilities.indexOf(a),1),this.capabilityToComponentIds_[a].splice(this.capabilityToComponentIds_[a].indexOf(n),1)):console.warn('Plugin "'+n+"doesn't have capability \""+a+'" to remove')},o.ComponentManager.prototype.hasCapability=function(n,a){return a=String(a).toLowerCase(),-1!==this.componentData_[n].capabilities.indexOf(a)},o.ComponentManager.prototype.getComponent=function(n){return this.componentData_[n]&&this.componentData_[n].component},o.ComponentManager.prototype.getComponents=function(n,a){if(n=String(n).toLowerCase(),!(n=this.capabilityToComponentIds_[n]))return[];var c=[];if(a){var d=[],_=this.componentData_;n.forEach(function(y){d.push(_[y])}),d.sort(function(y,R){return y.weight-R.weight}),d.forEach(function(y){c.push(y.component)})}else _=this.componentData_,n.forEach(function(y){c.push(_[y].component)});return c},o.ComponentManager.Capability=function(n){this.name_=n},o.ComponentManager.Capability.prototype.toString=function(){return this.name_},o.ComponentManager.Capability.POSITIONABLE=new o.ComponentManager.Capability("positionable"),o.ComponentManager.Capability.DRAG_TARGET=new o.ComponentManager.Capability("drag_target"),o.ComponentManager.Capability.DELETE_AREA=new o.ComponentManager.Capability("delete_area"),o.ComponentManager.Capability.AUTOHIDEABLE=new o.ComponentManager.Capability("autohideable"),o.utils.Svg=function(n){this.tagName_=n},o.utils.Svg.prototype.toString=function(){return this.tagName_},o.utils.Svg.ANIMATE=new o.utils.Svg("animate"),o.utils.Svg.CIRCLE=new o.utils.Svg("circle"),o.utils.Svg.CLIPPATH=new o.utils.Svg("clipPath"),o.utils.Svg.DEFS=new o.utils.Svg("defs"),o.utils.Svg.FECOMPOSITE=new o.utils.Svg("feComposite"),o.utils.Svg.FECOMPONENTTRANSFER=new o.utils.Svg("feComponentTransfer"),o.utils.Svg.FEFLOOD=new o.utils.Svg("feFlood"),o.utils.Svg.FEFUNCA=new o.utils.Svg("feFuncA"),o.utils.Svg.FEGAUSSIANBLUR=new o.utils.Svg("feGaussianBlur"),o.utils.Svg.FEPOINTLIGHT=new o.utils.Svg("fePointLight"),o.utils.Svg.FESPECULARLIGHTING=new o.utils.Svg("feSpecularLighting"),o.utils.Svg.FILTER=new o.utils.Svg("filter"),o.utils.Svg.FOREIGNOBJECT=new o.utils.Svg("foreignObject"),o.utils.Svg.G=new o.utils.Svg("g"),o.utils.Svg.IMAGE=new o.utils.Svg("image"),o.utils.Svg.LINE=new o.utils.Svg("line"),o.utils.Svg.PATH=new o.utils.Svg("path"),o.utils.Svg.PATTERN=new o.utils.Svg("pattern"),o.utils.Svg.POLYGON=new o.utils.Svg("polygon"),o.utils.Svg.RECT=new o.utils.Svg("rect"),o.utils.Svg.SVG=new o.utils.Svg("svg"),o.utils.Svg.TEXT=new o.utils.Svg("text"),o.utils.Svg.TSPAN=new o.utils.Svg("tspan"),o.utils.dom={},o.utils.dom.SVG_NS="http://www.w3.org/2000/svg",o.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",o.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",o.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},o.utils.dom.cacheWidths_=null,o.utils.dom.cacheReference_=0,o.utils.dom.canvasContext_=null,o.utils.dom.createSvgElement=function(n,a,c){for(var d in n=document.createElementNS(o.utils.dom.SVG_NS,String(n)),a)n.setAttribute(d,a[d]);return document.body.runtimeStyle&&(n.runtimeStyle=n.currentStyle=n.style),c&&c.appendChild(n),n},o.utils.dom.addClass=function(n,a){var c=n.getAttribute("class")||"";return-1==(" "+c+" ").indexOf(" "+a+" ")&&(c&&(c+=" "),n.setAttribute("class",c+a),!0)},o.utils.dom.removeClasses=function(n,a){a=a.split(" ");for(var c=0;c<a.length;c++)o.utils.dom.removeClass(n,a[c])},o.utils.dom.removeClass=function(n,a){var c=n.getAttribute("class");if(-1==(" "+c+" ").indexOf(" "+a+" "))return!1;c=c.split(/\s+/);for(var d=0;d<c.length;d++)c[d]&&c[d]!=a||(c.splice(d,1),d--);return c.length?n.setAttribute("class",c.join(" ")):n.removeAttribute("class"),!0},o.utils.dom.hasClass=function(n,a){return-1!=(" "+n.getAttribute("class")+" ").indexOf(" "+a+" ")},o.utils.dom.removeNode=function(n){return n&&n.parentNode?n.parentNode.removeChild(n):null},o.utils.dom.insertAfter=function(n,a){var c=a.nextSibling;if(!(a=a.parentNode))throw Error("Reference node has no parent.");c?a.insertBefore(n,c):a.appendChild(n)},o.utils.dom.containsNode=function(n,a){return!!(n.compareDocumentPosition(a)&o.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},o.utils.dom.setCssTransform=function(n,a){n.style.transform=a,n.style["-webkit-transform"]=a},o.utils.dom.startTextWidthCache=function(){o.utils.dom.cacheReference_++,o.utils.dom.cacheWidths_||(o.utils.dom.cacheWidths_=Object.create(null))},o.utils.dom.stopTextWidthCache=function(){o.utils.dom.cacheReference_--,o.utils.dom.cacheReference_||(o.utils.dom.cacheWidths_=null)},o.utils.dom.getTextWidth=function(n){var c,a=n.textContent+"\n"+n.className.baseVal;if(o.utils.dom.cacheWidths_&&(c=o.utils.dom.cacheWidths_[a]))return c;try{c=o.utils.userAgent.IE||o.utils.userAgent.EDGE?n.getBBox().width:n.getComputedTextLength()}catch(d){return 8*n.textContent.length}return o.utils.dom.cacheWidths_&&(o.utils.dom.cacheWidths_[a]=c),c},o.utils.dom.getFastTextWidth=function(n,a,c,d){return o.utils.dom.getFastTextWidthWithSizeString(n,a+"pt",c,d)},o.utils.dom.getFastTextWidthWithSizeString=function(n,a,c,d){var y,_=n.textContent;return n=_+"\n"+n.className.baseVal,o.utils.dom.cacheWidths_&&(y=o.utils.dom.cacheWidths_[n])||(o.utils.dom.canvasContext_||((y=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(y),o.utils.dom.canvasContext_=y.getContext("2d")),o.utils.dom.canvasContext_.font=c+" "+a+" "+d,y=o.utils.dom.canvasContext_.measureText(_).width,o.utils.dom.cacheWidths_&&(o.utils.dom.cacheWidths_[n]=y)),y},o.utils.dom.measureFontMetrics=function(n,a,c,d){var _=document.createElement("span");_.style.font=c+" "+a+" "+d,_.textContent=n,(n=document.createElement("div")).style.width="1px",n.style.height="0px",(a=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),a.appendChild(_),a.appendChild(n),document.body.appendChild(a);try{c={},a.style.alignItems="baseline",c.baseline=n.offsetTop-_.offsetTop,a.style.alignItems="flex-end",c.height=n.offsetTop-_.offsetTop}finally{document.body.removeChild(a)}return c},o.utils.math={},o.utils.math.toRadians=function(n){return n*Math.PI/180},o.utils.math.toDegrees=function(n){return 180*n/Math.PI},o.utils.math.clamp=function(n,a,c){if(c<n){var d=c;c=n,n=d}return Math.max(n,Math.min(a,c))},o.DropDownDiv=function(){},o.DropDownDiv.boundsElement_=null,o.DropDownDiv.owner_=null,o.DropDownDiv.positionToField_=null,o.DropDownDiv.ARROW_SIZE=16,o.DropDownDiv.BORDER_SIZE=1,o.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,o.DropDownDiv.PADDING_Y=16,o.DropDownDiv.ANIMATION_TIME=.25,o.DropDownDiv.animateOutTimer_=null,o.DropDownDiv.onHide_=null,o.DropDownDiv.rendererClassName_="",o.DropDownDiv.themeClassName_="",o.DropDownDiv.createDom=function(){if(!o.DropDownDiv.DIV_){var n=document.createElement("div");n.className="blocklyDropDownDiv",(o.parentContainer||document.body).appendChild(n),o.DropDownDiv.DIV_=n;var a=document.createElement("div");a.className="blocklyDropDownContent",n.appendChild(a),o.DropDownDiv.content_=a,(a=document.createElement("div")).className="blocklyDropDownArrow",n.appendChild(a),o.DropDownDiv.arrow_=a,o.DropDownDiv.DIV_.style.opacity=0,o.DropDownDiv.DIV_.style.transition="transform "+o.DropDownDiv.ANIMATION_TIME+"s, opacity "+o.DropDownDiv.ANIMATION_TIME+"s",n.addEventListener("focusin",function(){o.utils.dom.addClass(n,"blocklyFocused")}),n.addEventListener("focusout",function(){o.utils.dom.removeClass(n,"blocklyFocused")})}},o.DropDownDiv.setBoundsElement=function(n){o.DropDownDiv.boundsElement_=n},o.DropDownDiv.getContentDiv=function(){return o.DropDownDiv.content_},o.DropDownDiv.clearContent=function(){o.DropDownDiv.content_.textContent="",o.DropDownDiv.content_.style.width=""},o.DropDownDiv.setColour=function(n,a){o.DropDownDiv.DIV_.style.backgroundColor=n,o.DropDownDiv.DIV_.style.borderColor=a},o.DropDownDiv.showPositionedByBlock=function(n,a,c,d){return o.DropDownDiv.showPositionedByRect_(o.DropDownDiv.getScaledBboxOfBlock_(a),n,c,d)},o.DropDownDiv.showPositionedByField=function(n,a,c){return o.DropDownDiv.positionToField_=!0,o.DropDownDiv.showPositionedByRect_(o.DropDownDiv.getScaledBboxOfField_(n),n,a,c)},o.DropDownDiv.getScaledBboxOfBlock_=function(n){var a=n.getSvgRoot(),c=a.getBBox(),d=n.workspace.scale;return n=c.height*d,c=c.width*d,a=o.utils.style.getPageOffset(a),new o.utils.Rect(a.y,a.y+n,a.x,a.x+c)},o.DropDownDiv.getScaledBboxOfField_=function(n){return n=n.getScaledBBox(),new o.utils.Rect(n.top,n.bottom,n.left,n.right)},o.DropDownDiv.showPositionedByRect_=function(n,a,c,d){var _=n.left+(n.right-n.left)/2,y=n.bottom;n=n.top,d&&(n+=d);for(var R=(d=a.getSourceBlock()).workspace;R.options.parentWorkspace;)R=R.options.parentWorkspace;return o.DropDownDiv.setBoundsElement(R.getParentSvg().parentNode),o.DropDownDiv.show(a,d.RTL,_,y,_,n,c)},o.DropDownDiv.show=function(n,a,c,d,_,y,R){return o.DropDownDiv.owner_=n,o.DropDownDiv.onHide_=R||null,(n=o.DropDownDiv.DIV_).style.direction=a?"rtl":"ltr",a=o.getMainWorkspace(),o.DropDownDiv.rendererClassName_=a.getRenderer().getClassName(),o.DropDownDiv.themeClassName_=a.getTheme().getClassName(),o.utils.dom.addClass(n,o.DropDownDiv.rendererClassName_),o.utils.dom.addClass(n,o.DropDownDiv.themeClassName_),o.DropDownDiv.positionInternal_(c,d,_,y)},o.DropDownDiv.getBoundsInfo_=function(){var n=o.utils.style.getPageOffset(o.DropDownDiv.boundsElement_),a=o.utils.style.getSize(o.DropDownDiv.boundsElement_);return{left:n.x,right:n.x+a.width,top:n.y,bottom:n.y+a.height,width:a.width,height:a.height}},o.DropDownDiv.getPositionMetrics_=function(n,a,c,d){var _=o.DropDownDiv.getBoundsInfo_(),y=o.utils.style.getSize(o.DropDownDiv.DIV_);return a+y.height<_.bottom?o.DropDownDiv.getPositionBelowMetrics_(n,a,_,y):d-y.height>_.top?o.DropDownDiv.getPositionAboveMetrics_(c,d,_,y):a+y.height<document.documentElement.clientHeight?o.DropDownDiv.getPositionBelowMetrics_(n,a,_,y):d-y.height>document.documentElement.clientTop?o.DropDownDiv.getPositionAboveMetrics_(c,d,_,y):o.DropDownDiv.getPositionTopOfPageMetrics_(n,_,y)},o.DropDownDiv.getPositionBelowMetrics_=function(n,a,c,d){return{initialX:(n=o.DropDownDiv.getPositionX(n,c.left,c.right,d.width)).divX,initialY:a,finalX:n.divX,finalY:a+o.DropDownDiv.PADDING_Y,arrowX:n.arrowX,arrowY:-(o.DropDownDiv.ARROW_SIZE/2+o.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},o.DropDownDiv.getPositionAboveMetrics_=function(n,a,c,d){return{initialX:(n=o.DropDownDiv.getPositionX(n,c.left,c.right,d.width)).divX,initialY:a-d.height,finalX:n.divX,finalY:a-d.height-o.DropDownDiv.PADDING_Y,arrowX:n.arrowX,arrowY:d.height-2*o.DropDownDiv.BORDER_SIZE-o.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},o.DropDownDiv.getPositionTopOfPageMetrics_=function(n,a,c){return{initialX:(n=o.DropDownDiv.getPositionX(n,a.left,a.right,c.width)).divX,initialY:0,finalX:n.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},o.DropDownDiv.getPositionX=function(n,a,c,d){var _=n;return n=o.utils.math.clamp(a,n-d/2,c-d),{arrowX:d=o.utils.math.clamp(a=o.DropDownDiv.ARROW_HORIZONTAL_PADDING,(_-=o.DropDownDiv.ARROW_SIZE/2)-n,d-a-o.DropDownDiv.ARROW_SIZE),divX:n}},o.DropDownDiv.isVisible=function(){return!!o.DropDownDiv.owner_},o.DropDownDiv.hideIfOwner=function(n,a){return o.DropDownDiv.owner_===n&&(a?o.DropDownDiv.hideWithoutAnimation():o.DropDownDiv.hide(),!0)},o.DropDownDiv.hide=function(){var n=o.DropDownDiv.DIV_;n.style.transform="translate(0, 0)",n.style.opacity=0,o.DropDownDiv.animateOutTimer_=setTimeout(function(){o.DropDownDiv.hideWithoutAnimation()},1e3*o.DropDownDiv.ANIMATION_TIME),o.DropDownDiv.onHide_&&(o.DropDownDiv.onHide_(),o.DropDownDiv.onHide_=null)},o.DropDownDiv.hideWithoutAnimation=function(){if(o.DropDownDiv.isVisible()){o.DropDownDiv.animateOutTimer_&&clearTimeout(o.DropDownDiv.animateOutTimer_);var n=o.DropDownDiv.DIV_;n.style.transform="",n.style.left="",n.style.top="",n.style.opacity=0,n.style.display="none",n.style.backgroundColor="",n.style.borderColor="",o.DropDownDiv.onHide_&&(o.DropDownDiv.onHide_(),o.DropDownDiv.onHide_=null),o.DropDownDiv.clearContent(),o.DropDownDiv.owner_=null,o.DropDownDiv.rendererClassName_&&(o.utils.dom.removeClass(n,o.DropDownDiv.rendererClassName_),o.DropDownDiv.rendererClassName_=""),o.DropDownDiv.themeClassName_&&(o.utils.dom.removeClass(n,o.DropDownDiv.themeClassName_),o.DropDownDiv.themeClassName_=""),o.getMainWorkspace().markFocused()}},o.DropDownDiv.positionInternal_=function(n,a,c,d){(n=o.DropDownDiv.getPositionMetrics_(n,a,c,d)).arrowVisible?(o.DropDownDiv.arrow_.style.display="",o.DropDownDiv.arrow_.style.transform="translate("+n.arrowX+"px,"+n.arrowY+"px) rotate(45deg)",o.DropDownDiv.arrow_.setAttribute("class",n.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):o.DropDownDiv.arrow_.style.display="none",a=Math.floor(n.initialX),c=Math.floor(n.initialY),d=Math.floor(n.finalX);var _=Math.floor(n.finalY),y=o.DropDownDiv.DIV_;return y.style.left=a+"px",y.style.top=c+"px",y.style.display="block",y.style.opacity=1,y.style.transform="translate("+(d-a)+"px,"+(_-c)+"px)",!!n.arrowAtTop},o.DropDownDiv.repositionForWindowResize=function(){if(o.DropDownDiv.owner_){var n=o.DropDownDiv.owner_,a=n.getSourceBlock();n=o.DropDownDiv.positionToField_?o.DropDownDiv.getScaledBboxOfField_(n):o.DropDownDiv.getScaledBboxOfBlock_(a),o.DropDownDiv.positionInternal_(a=n.left+(n.right-n.left)/2,n.bottom,a,n.top)}else o.DropDownDiv.hide()},o.registry={},o.registry.typeMap_=Object.create(null),o.registry.DEFAULT="default",o.registry.Type=function(n){this.name_=n},o.registry.Type.prototype.toString=function(){return this.name_},o.registry.Type.CONNECTION_CHECKER=new o.registry.Type("connectionChecker"),o.registry.Type.CURSOR=new o.registry.Type("cursor"),o.registry.Type.EVENT=new o.registry.Type("event"),o.registry.Type.FIELD=new o.registry.Type("field"),o.registry.Type.RENDERER=new o.registry.Type("renderer"),o.registry.Type.TOOLBOX=new o.registry.Type("toolbox"),o.registry.Type.THEME=new o.registry.Type("theme"),o.registry.Type.TOOLBOX_ITEM=new o.registry.Type("toolboxItem"),o.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new o.registry.Type("flyoutsVerticalToolbox"),o.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new o.registry.Type("flyoutsHorizontalToolbox"),o.registry.Type.METRICS_MANAGER=new o.registry.Type("metricsManager"),o.registry.Type.BLOCK_DRAGGER=new o.registry.Type("blockDragger"),o.registry.register=function(n,a,c,d){if(!(n instanceof o.registry.Type)&&"string"!=typeof n||""==String(n).trim())throw Error('Invalid type "'+n+'". The type must be a non-empty string or a Blockly.registry.Type.');if(n=String(n).toLowerCase(),"string"!=typeof a||""==a.trim())throw Error('Invalid name "'+a+'". The name must be a non-empty string.');if(a=a.toLowerCase(),!c)throw Error("Can not register a null value");var _=o.registry.typeMap_[n];if(_||(_=o.registry.typeMap_[n]=Object.create(null)),o.registry.validate_(n,c),!d&&_[a])throw Error('Name "'+a+'" with type "'+n+'" already registered.');_[a]=c},o.registry.validate_=function(n,a){if(n===String(o.registry.Type.FIELD)&&"function"!=typeof a.fromJson)throw Error('Type "'+n+'" must have a fromJson function')},o.registry.unregister=function(n,a){n=String(n).toLowerCase(),a=a.toLowerCase();var c=o.registry.typeMap_[n];c&&c[a]?delete o.registry.typeMap_[n][a]:console.warn("Unable to unregister ["+a+"]["+n+"] from the registry.")},o.registry.getItem_=function(n,a,c){n=String(n).toLowerCase(),a=a.toLowerCase();var d=o.registry.typeMap_[n];if(!d||!d[a]){if(a="Unable to find ["+a+"]["+n+"] in the registry.",c)throw Error(a+" You must require or register a "+n+" plugin.");return console.warn(a),null}return d[a]},o.registry.hasItem=function(n,a){return n=String(n).toLowerCase(),a=a.toLowerCase(),!!(n=o.registry.typeMap_[n])&&!!n[a]},o.registry.getClass=function(n,a,c){return o.registry.getItem_(n,a,c)},o.registry.getObject=function(n,a,c){return o.registry.getItem_(n,a,c)},o.registry.getClassFromOptions=function(n,a,c){return"function"==typeof(a=a.plugins[n.toString()]||o.registry.DEFAULT)?a:o.registry.getClass(n,a,c)},o.Events={},o.Events.group_="",o.Events.recordUndo=!0,o.Events.disabled_=0,o.Events.CREATE="create",o.Events.BLOCK_CREATE=o.Events.CREATE,o.Events.DELETE="delete",o.Events.BLOCK_DELETE=o.Events.DELETE,o.Events.CHANGE="change",o.Events.BLOCK_CHANGE=o.Events.CHANGE,o.Events.MOVE="move",o.Events.BLOCK_MOVE=o.Events.MOVE,o.Events.VAR_CREATE="var_create",o.Events.VAR_DELETE="var_delete",o.Events.VAR_RENAME="var_rename",o.Events.UI="ui",o.Events.BLOCK_DRAG="drag",o.Events.SELECTED="selected",o.Events.CLICK="click",o.Events.MARKER_MOVE="marker_move",o.Events.BUBBLE_OPEN="bubble_open",o.Events.TRASHCAN_OPEN="trashcan_open",o.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",o.Events.THEME_CHANGE="theme_change",o.Events.VIEWPORT_CHANGE="viewport_change",o.Events.COMMENT_CREATE="comment_create",o.Events.COMMENT_DELETE="comment_delete",o.Events.COMMENT_CHANGE="comment_change",o.Events.COMMENT_MOVE="comment_move",o.Events.FINISHED_LOADING="finished_loading",o.Events.BUMP_EVENTS=[o.Events.BLOCK_CREATE,o.Events.BLOCK_MOVE,o.Events.COMMENT_CREATE,o.Events.COMMENT_MOVE],o.Events.FIRE_QUEUE_=[],o.Events.fire=function(n){o.Events.isEnabled()&&(o.Events.FIRE_QUEUE_.length||setTimeout(o.Events.fireNow_,0),o.Events.FIRE_QUEUE_.push(n))},o.Events.fireNow_=function(){for(var c,n=o.Events.filter(o.Events.FIRE_QUEUE_,!0),a=o.Events.FIRE_QUEUE_.length=0;c=n[a];a++)if(c.workspaceId){var d=o.Workspace.getById(c.workspaceId);d&&d.fireChangeListener(c)}},o.Events.filter=function(n,a){n=n.slice(),a||n.reverse();for(var y,c=[],d=Object.create(null),_=0;y=n[_];_++)if(!y.isNull()){var R=[y.isUiEvent?o.Events.UI:y.type,y.blockId,y.workspaceId].join(" "),x=d[R],B=x?x.event:null;x?y.type==o.Events.MOVE&&x.index==_-1?(B.newParentId=y.newParentId,B.newInputName=y.newInputName,B.newCoordinate=y.newCoordinate,x.index=_):y.type==o.Events.CHANGE&&y.element==B.element&&y.name==B.name?B.newValue=y.newValue:y.type==o.Events.VIEWPORT_CHANGE?(B.viewTop=y.viewTop,B.viewLeft=y.viewLeft,B.scale=y.scale,B.oldScale=y.oldScale):(y.type!=o.Events.CLICK||B.type!=o.Events.BUBBLE_OPEN)&&(d[R]={event:y,index:_},c.push(y)):(d[R]={event:y,index:_},c.push(y))}for(n=c.filter(function(H){return!H.isNull()}),a||n.reverse(),_=1;y=n[_];_++)y.type==o.Events.CHANGE&&"mutation"==y.element&&n.unshift(n.splice(_,1)[0]);return n},o.Events.clearPendingUndo=function(){for(var a,n=0;a=o.Events.FIRE_QUEUE_[n];n++)a.recordUndo=!1},o.Events.disable=function(){o.Events.disabled_++},o.Events.enable=function(){o.Events.disabled_--},o.Events.isEnabled=function(){return 0==o.Events.disabled_},o.Events.getGroup=function(){return o.Events.group_},o.Events.setGroup=function(n){o.Events.group_="boolean"==typeof n?n?o.utils.genUid():"":n},o.Events.getDescendantIds=function(n){var a=[];n=n.getDescendants(!1);for(var d,c=0;d=n[c];c++)a[c]=d.id;return a},o.Events.fromJson=function(n,a){var c=o.Events.get(n.type);if(!c)throw Error("Unknown event type.");return(c=new c).fromJson(n),c.workspaceId=a.id,c},o.Events.get=function(n){return o.registry.getClass(o.registry.Type.EVENT,n)},o.Events.disableOrphans=function(n){if((n.type==o.Events.MOVE||n.type==o.Events.CREATE)&&n.workspaceId){var a=o.Workspace.getById(n.workspaceId),c=a.getBlockById(n.blockId);if(c){n=o.Events.recordUndo;try{o.Events.recordUndo=!1;var d=c.getParent();if(d&&d.isEnabled()){var y,_=c.getDescendants(!1);for(a=0;y=_[a];a++)y.setEnabled(!0)}else if((c.outputConnection||c.previousConnection)&&!a.isDragging())do{c.setEnabled(!1),c=c.getNextBlock()}while(c)}finally{o.Events.recordUndo=n}}}},o.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=o.Events.getGroup(),this.recordUndo=o.Events.recordUndo},o.Events.Abstract.prototype.isUiEvent=!1,o.Events.Abstract.prototype.toJson=function(){var n={type:this.type};return this.group&&(n.group=this.group),n},o.Events.Abstract.prototype.fromJson=function(n){this.isBlank=!1,this.group=n.group},o.Events.Abstract.prototype.isNull=function(){return!1},o.Events.Abstract.prototype.run=function(n){},o.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var n=o.Workspace.getById(this.workspaceId);if(!n)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return n},o.utils.object={},o.utils.object.inherits=function(n,a){n.superClass_=a.prototype,n.prototype=Object.create(a.prototype),n.prototype.constructor=n},o.utils.object.mixin=function(n,a){for(var c in a)n[c]=a[c]},o.utils.object.deepMerge=function(n,a){for(var c in a)n[c]=null!=a[c]&&"object"==typeof a[c]?o.utils.object.deepMerge(n[c]||Object.create(null),a[c]):a[c];return n},o.utils.object.values=function(n){return Object.values?Object.values(n):Object.keys(n).map(function(a){return n[a]})},o.utils.xml={},o.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",o.utils.xml.document=function(){return document},o.utils.xml.createElement=function(n){return o.utils.xml.document().createElementNS(o.utils.xml.NAME_SPACE,n)},o.utils.xml.createTextNode=function(n){return o.utils.xml.document().createTextNode(n)},o.utils.xml.textToDomDocument=function(n){return(new DOMParser).parseFromString(n,"text/xml")},o.utils.xml.domToText=function(n){return(new XMLSerializer).serializeToString(n)},o.inputTypes={VALUE:o.connectionTypes.INPUT_VALUE,STATEMENT:o.connectionTypes.NEXT_STATEMENT,DUMMY:5},o.Xml={},o.Xml.workspaceToDom=function(n,a){var c=o.utils.xml.createElement("xml"),d=o.Xml.variablesToDom(o.Variables.allUsedVarModels(n));d.hasChildNodes()&&c.appendChild(d);var y,_=n.getTopComments(!0);for(d=0;y=_[d];d++)c.appendChild(y.toXmlWithXY(a));for(n=n.getTopBlocks(!0),d=0;_=n[d];d++)c.appendChild(o.Xml.blockToDomWithXY(_,a));return c},o.Xml.variablesToDom=function(n){for(var d,a=o.utils.xml.createElement("variables"),c=0;d=n[c];c++){var _=o.utils.xml.createElement("variable");_.appendChild(o.utils.xml.createTextNode(d.name)),d.type&&_.setAttribute("type",d.type),_.id=d.getId(),a.appendChild(_)}return a},o.Xml.blockToDomWithXY=function(n,a){if(n.isInsertionMarker()&&!(n=n.getChildren(!1)[0]))return new DocumentFragment;var c;n.workspace.RTL&&(c=n.workspace.getWidth()),a=o.Xml.blockToDom(n,a);var d=n.getRelativeToSurfaceXY();return a.setAttribute("x",Math.round(n.workspace.RTL?c-d.x:d.x)),a.setAttribute("y",Math.round(d.y)),a},o.Xml.fieldToDom_=function(n){if(n.isSerializable()){var a=o.utils.xml.createElement("field");return a.setAttribute("name",n.name||""),n.toXml(a)}return null},o.Xml.allFieldsToDom_=function(n,a){for(var d,c=0;d=n.inputList[c];c++)for(var y,_=0;y=d.fieldRow[_];_++)(y=o.Xml.fieldToDom_(y))&&a.appendChild(y)},o.Xml.blockToDom=function(n,a){if(n.isInsertionMarker())return(n=n.getChildren(!1)[0])?o.Xml.blockToDom(n):new DocumentFragment;var c=o.utils.xml.createElement(n.isShadow()?"shadow":"block");if(c.setAttribute("type",n.type),a||c.setAttribute("id",n.id),n.mutationToDom){var d=n.mutationToDom();d&&(d.hasChildNodes()||d.hasAttributes())&&c.appendChild(d)}if(o.Xml.allFieldsToDom_(n,c),d=n.getCommentText()){var _=n.commentModel.size,y=n.commentModel.pinned,R=o.utils.xml.createElement("comment");R.appendChild(o.utils.xml.createTextNode(d)),R.setAttribute("pinned",y),R.setAttribute("h",_.height),R.setAttribute("w",_.width),c.appendChild(R)}for(n.data&&((d=o.utils.xml.createElement("data")).appendChild(o.utils.xml.createTextNode(n.data)),c.appendChild(d)),d=0;_=n.inputList[d];d++){var x;if(y=!0,_.type!=o.inputTypes.DUMMY){var B=_.connection.targetBlock();_.type==o.inputTypes.VALUE?x=o.utils.xml.createElement("value"):_.type==o.inputTypes.STATEMENT&&(x=o.utils.xml.createElement("statement")),!(R=_.connection.getShadowDom())||B&&B.isShadow()||x.appendChild(o.Xml.cloneShadow_(R,a)),B&&(R=o.Xml.blockToDom(B,a)).nodeType==o.utils.dom.NodeType.ELEMENT_NODE&&(x.appendChild(R),y=!1),x.setAttribute("name",_.name),y||c.appendChild(x)}}return null!=n.inputsInline&&n.inputsInline!=n.inputsInlineDefault&&c.setAttribute("inline",n.inputsInline),n.isCollapsed()&&c.setAttribute("collapsed",!0),n.isEnabled()||c.setAttribute("disabled",!0),n.isDeletable()||n.isShadow()||c.setAttribute("deletable",!1),n.isMovable()||n.isShadow()||c.setAttribute("movable",!1),n.isEditable()||c.setAttribute("editable",!1),(d=n.getNextBlock())&&(R=o.Xml.blockToDom(d,a)).nodeType==o.utils.dom.NodeType.ELEMENT_NODE&&((x=o.utils.xml.createElement("next")).appendChild(R),c.appendChild(x)),!(R=n.nextConnection&&n.nextConnection.getShadowDom())||d&&d.isShadow()||x.appendChild(o.Xml.cloneShadow_(R,a)),c},o.Xml.cloneShadow_=function(n,a){for(var d,c=n=n.cloneNode(!0);c;)if(a&&"shadow"==c.nodeName&&c.removeAttribute("id"),c.firstChild)c=c.firstChild;else{for(;c&&!c.nextSibling;)d=c,c=c.parentNode,d.nodeType==o.utils.dom.NodeType.TEXT_NODE&&""==d.data.trim()&&c.firstChild!=d&&o.utils.dom.removeNode(d);c&&(d=c,c=c.nextSibling,d.nodeType==o.utils.dom.NodeType.TEXT_NODE&&""==d.data.trim()&&o.utils.dom.removeNode(d))}return n},o.Xml.domToText=function(n){return o.utils.xml.domToText(n).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},o.Xml.domToPrettyText=function(n){n=o.Xml.domToText(n).split("<");for(var a="",c=1;c<n.length;c++){var d=n[c];"/"==d[0]&&(a=a.substring(2)),n[c]=a+"<"+d,"/"!=d[0]&&"/>"!=d.slice(-2)&&(a+="  ")}return(n=(n=n.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},o.Xml.textToDom=function(n){var a=o.utils.xml.textToDomDocument(n);if(!a||!a.documentElement||a.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+n);return a.documentElement},o.Xml.clearWorkspaceAndLoadFromXml=function(n,a){return a.setResizesEnabled(!1),a.clear(),n=o.Xml.domToWorkspace(n,a),a.setResizesEnabled(!0),n},o.Xml.domToWorkspace=function(n,a){if(n instanceof o.Workspace){var c=n;n=a,a=c,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var d;a.RTL&&(d=a.getWidth()),c=[],o.utils.dom.startTextWidthCache();var _=o.Events.getGroup();_||o.Events.setGroup(!0),a.setResizesEnabled&&a.setResizesEnabled(!1);var y=!0;try{for(var x,R=0;x=n.childNodes[R];R++){var B=x.nodeName.toLowerCase(),H=x;if("block"==B||"shadow"==B&&!o.Events.recordUndo){var F=o.Xml.domToBlock(H,a);c.push(F.id);var Y=H.hasAttribute("x")?parseInt(H.getAttribute("x"),10):10,z=H.hasAttribute("y")?parseInt(H.getAttribute("y"),10):10;isNaN(Y)||isNaN(z)||F.moveBy(a.RTL?d-Y:Y,z),y=!1}else{if("shadow"==B)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==B)a.rendered?o.WorkspaceCommentSvg?o.WorkspaceCommentSvg.fromXml(H,a,d):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):o.WorkspaceComment?o.WorkspaceComment.fromXml(H,a):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==B){if(!y)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");o.Xml.domToVariables(H,a),y=!1}}}}finally{_||o.Events.setGroup(!1),o.utils.dom.stopTextWidthCache()}return a.setResizesEnabled&&a.setResizesEnabled(!0),o.Events.fire(new(o.Events.get(o.Events.FINISHED_LOADING))(a)),c},o.Xml.appendDomToWorkspace=function(n,a){var c;if(Object.prototype.hasOwnProperty.call(a,"scale")&&(c=a.getBlocksBoundingBox()),n=o.Xml.domToWorkspace(n,a),c&&c.top!=c.bottom){var d=c.bottom,_=a.RTL?c.right:c.left,y=1/0,R=-1/0,x=1/0;for(c=0;c<n.length;c++){var B=a.getBlockById(n[c]).getRelativeToSurfaceXY();B.y<x&&(x=B.y),B.x<y&&(y=B.x),B.x>R&&(R=B.x)}for(d=d-x+10,_=a.RTL?_-R:_-y,c=0;c<n.length;c++)a.getBlockById(n[c]).moveBy(_,d)}return n},o.Xml.domToBlock=function(n,a){if(n instanceof o.Workspace){var c=n;n=a,a=c,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}o.Events.disable(),c=a.getAllVariables();try{var d=o.Xml.domToBlockHeadless_(n,a),_=d.getDescendants(!1);if(a.rendered){d.setConnectionTracking(!1);for(var y=_.length-1;0<=y;y--)_[y].initSvg();for(y=_.length-1;0<=y;y--)_[y].render(!1);setTimeout(function(){d.disposed||d.setConnectionTracking(!0)},1),d.updateDisabled(),a.resizeContents()}else for(y=_.length-1;0<=y;y--)_[y].initModel()}finally{o.Events.enable()}if(o.Events.isEnabled()){for(n=o.Variables.getAddedVariables(a,c),y=0;y<n.length;y++)a=n[y],o.Events.fire(new(o.Events.get(o.Events.VAR_CREATE))(a));o.Events.fire(new(o.Events.get(o.Events.CREATE))(d))}return d},o.Xml.domToVariables=function(n,a){for(var d,c=0;d=n.childNodes[c];c++)if(d.nodeType==o.utils.dom.NodeType.ELEMENT_NODE){var _=d.getAttribute("type"),y=d.getAttribute("id");a.createVariable(d.textContent,_,y)}},o.Xml.mapSupportedXmlTags_=function(n){for(var d,a={mutation:[],comment:[],data:[],field:[],input:[],next:[]},c=0;d=n.childNodes[c];c++)if(d.nodeType!=o.utils.dom.NodeType.TEXT_NODE)switch(d.nodeName.toLowerCase()){case"mutation":a.mutation.push(d);break;case"comment":if(!o.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}a.comment.push(d);break;case"data":a.data.push(d);break;case"title":case"field":a.field.push(d);break;case"value":case"statement":a.input.push(d);break;case"next":a.next.push(d);break;default:console.warn("Ignoring unknown tag: "+d.nodeName)}return a},o.Xml.applyMutationTagNodes_=function(n,a){for(var _,c=!1,d=0;_=n[d];d++)a.domToMutation&&(a.domToMutation(_),a.initSvg&&(c=!0));return c},o.Xml.applyCommentTagNodes_=function(n,a){for(var d,c=0;d=n[c];c++){var _=d.textContent,y="true"==d.getAttribute("pinned"),R=parseInt(d.getAttribute("w"),10);d=parseInt(d.getAttribute("h"),10),a.setCommentText(_),a.commentModel.pinned=y,isNaN(R)||isNaN(d)||(a.commentModel.size=new o.utils.Size(R,d)),y&&a.getCommentIcon&&!a.isInFlyout&&setTimeout(function(){a.getCommentIcon().setVisible(!0)},1)}},o.Xml.applyDataTagNodes_=function(n,a){for(var d,c=0;d=n[c];c++)a.data=d.textContent},o.Xml.applyFieldTagNodes_=function(n,a){for(var d,c=0;d=n[c];c++){var _=d.getAttribute("name");o.Xml.domToField_(a,_,d)}},o.Xml.findChildBlocks_=function(n){for(var d,a={childBlockElement:null,childShadowElement:null},c=0;d=n.childNodes[c];c++)d.nodeType==o.utils.dom.NodeType.ELEMENT_NODE&&("block"==d.nodeName.toLowerCase()?a.childBlockElement=d:"shadow"==d.nodeName.toLowerCase()&&(a.childShadowElement=d));return a},o.Xml.applyInputTagNodes_=function(n,a,c,d){for(var y,_=0;y=n[_];_++){var R=y.getAttribute("name"),x=c.getInput(R);if(!x){console.warn("Ignoring non-existent input "+R+" in block "+d);break}if((y=o.Xml.findChildBlocks_(y)).childBlockElement){if(!x.connection)throw TypeError("Input connection does not exist.");o.Xml.domToBlockHeadless_(y.childBlockElement,a,x.connection,!1)}y.childShadowElement&&x.connection.setShadowDom(y.childShadowElement)}},o.Xml.applyNextTagNodes_=function(n,a,c){for(var _,d=0;_=n[d];d++){if((_=o.Xml.findChildBlocks_(_)).childBlockElement){if(!c.nextConnection)throw TypeError("Next statement does not exist.");if(c.nextConnection.isConnected())throw TypeError("Next statement is already connected.");o.Xml.domToBlockHeadless_(_.childBlockElement,a,c.nextConnection,!0)}_.childShadowElement&&c.nextConnection&&c.nextConnection.setShadowDom(_.childShadowElement)}},o.Xml.domToBlockHeadless_=function(n,a,c,d){var _=n.getAttribute("type");if(!_)throw TypeError("Block type unspecified: "+n.outerHTML);var y=n.getAttribute("id");y=a.newBlock(_,y);var R=o.Xml.mapSupportedXmlTags_(n),x=o.Xml.applyMutationTagNodes_(R.mutation,y);if(o.Xml.applyCommentTagNodes_(R.comment,y),o.Xml.applyDataTagNodes_(R.data,y),c)if(d){if(!y.previousConnection)throw TypeError("Next block does not have previous statement.");c.connect(y.previousConnection)}else if(y.outputConnection)c.connect(y.outputConnection);else{if(!y.previousConnection)throw TypeError("Child block does not have output or previous statement.");c.connect(y.previousConnection)}if(o.Xml.applyFieldTagNodes_(R.field,y),o.Xml.applyInputTagNodes_(R.input,a,y,_),o.Xml.applyNextTagNodes_(R.next,a,y),x&&y.initSvg(),(a=n.getAttribute("inline"))&&y.setInputsInline("true"==a),(a=n.getAttribute("disabled"))&&y.setEnabled("true"!=a&&"disabled"!=a),(a=n.getAttribute("deletable"))&&y.setDeletable("true"==a),(a=n.getAttribute("movable"))&&y.setMovable("true"==a),(a=n.getAttribute("editable"))&&y.setEditable("true"==a),(a=n.getAttribute("collapsed"))&&y.setCollapsed("true"==a),"shadow"==n.nodeName.toLowerCase()){for(n=y.getChildren(!1),a=0;c=n[a];a++)if(!c.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(y.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");y.setShadow(!0)}return y},o.Xml.domToField_=function(n,a,c){var d=n.getField(a);d?d.fromXml(c):console.warn("Ignoring non-existent field "+a+" in block "+n.type)},o.Xml.deleteNext=function(n){for(var c,a=0;c=n.childNodes[a];a++)if("next"==c.nodeName.toLowerCase()){n.removeChild(c);break}},o.Events.BlockBase=function(n){o.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===n)?"":n.id,this.workspaceId=this.isBlank?"":n.workspace.id},o.utils.object.inherits(o.Events.BlockBase,o.Events.Abstract),o.Events.BlockBase.prototype.toJson=function(){var n=o.Events.BlockBase.superClass_.toJson.call(this);return n.blockId=this.blockId,n},o.Events.BlockBase.prototype.fromJson=function(n){o.Events.BlockBase.superClass_.fromJson.call(this,n),this.blockId=n.blockId},o.Events.BlockChange=function(n,a,c,d,_){o.Events.Change.superClass_.constructor.call(this,n),n&&(this.element=void 0===a?"":a,this.name=void 0===c?"":c,this.oldValue=void 0===d?"":d,this.newValue=void 0===_?"":_)},o.utils.object.inherits(o.Events.BlockChange,o.Events.BlockBase),o.Events.Change=o.Events.BlockChange,o.Events.BlockChange.prototype.type=o.Events.CHANGE,o.Events.BlockChange.prototype.toJson=function(){var n=o.Events.BlockChange.superClass_.toJson.call(this);return n.element=this.element,this.name&&(n.name=this.name),n.oldValue=this.oldValue,n.newValue=this.newValue,n},o.Events.BlockChange.prototype.fromJson=function(n){o.Events.BlockChange.superClass_.fromJson.call(this,n),this.element=n.element,this.name=n.name,this.oldValue=n.oldValue,this.newValue=n.newValue},o.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},o.Events.BlockChange.prototype.run=function(n){var a=this.getEventWorkspace_().getBlockById(this.blockId);if(a)switch(a.mutator&&a.mutator.setVisible(!1),n=n?this.newValue:this.oldValue,this.element){case"field":(a=a.getField(this.name))?a.setValue(n):console.warn("Can't set non-existent field: "+this.name);break;case"comment":a.setCommentText(n||null);break;case"collapsed":a.setCollapsed(!!n);break;case"disabled":a.setEnabled(!n);break;case"inline":a.setInputsInline(!!n);break;case"mutation":var c="";if(a.mutationToDom&&(c=(c=a.mutationToDom())&&o.Xml.domToText(c)),a.domToMutation){var d=o.Xml.textToDom(n||"<mutation/>");a.domToMutation(d)}o.Events.fire(new o.Events.BlockChange(a,"mutation",null,c,n));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},o.Events.Create=function(n){o.Events.Create.superClass_.constructor.call(this,n),n&&(n.isShadow()&&(this.recordUndo=!1),this.xml=n.workspace.rendered?o.Xml.blockToDomWithXY(n):o.Xml.blockToDom(n),this.ids=o.Events.getDescendantIds(n))},o.utils.object.inherits(o.Events.Create,o.Events.BlockBase),o.Events.BlockCreate=o.Events.Create,o.Events.Create.prototype.type=o.Events.CREATE,o.Events.Create.prototype.toJson=function(){var n=o.Events.Create.superClass_.toJson.call(this);return n.xml=o.Xml.domToText(this.xml),n.ids=this.ids,this.recordUndo||(n.recordUndo=this.recordUndo),n},o.Events.Create.prototype.fromJson=function(n){o.Events.Create.superClass_.fromJson.call(this,n),this.xml=o.Xml.textToDom(n.xml),this.ids=n.ids,void 0!==n.recordUndo&&(this.recordUndo=n.recordUndo)},o.Events.Create.prototype.run=function(n){var a=this.getEventWorkspace_();if(n)(n=o.utils.xml.createElement("xml")).appendChild(this.xml),o.Xml.domToWorkspace(n,a);else{n=0;for(var c;c=this.ids[n];n++){var d=a.getBlockById(c);d?d.dispose(!1):c==this.blockId&&console.warn("Can't uncreate non-existent block: "+c)}}},o.Events.Delete=function(n){if(o.Events.Delete.superClass_.constructor.call(this,n),n){if(n.getParent())throw Error("Connected blocks cannot be deleted.");n.isShadow()&&(this.recordUndo=!1),this.oldXml=n.workspace.rendered?o.Xml.blockToDomWithXY(n):o.Xml.blockToDom(n),this.ids=o.Events.getDescendantIds(n)}},o.utils.object.inherits(o.Events.Delete,o.Events.BlockBase),o.Events.BlockDelete=o.Events.Delete,o.Events.Delete.prototype.type=o.Events.DELETE,o.Events.Delete.prototype.toJson=function(){var n=o.Events.Delete.superClass_.toJson.call(this);return n.oldXml=o.Xml.domToText(this.oldXml),n.ids=this.ids,this.recordUndo||(n.recordUndo=this.recordUndo),n},o.Events.Delete.prototype.fromJson=function(n){o.Events.Delete.superClass_.fromJson.call(this,n),this.oldXml=o.Xml.textToDom(n.oldXml),this.ids=n.ids,void 0!==n.recordUndo&&(this.recordUndo=n.recordUndo)},o.Events.Delete.prototype.run=function(n){var a=this.getEventWorkspace_();if(n){n=0;for(var c;c=this.ids[n];n++){var d=a.getBlockById(c);d?d.dispose(!1):c==this.blockId&&console.warn("Can't delete non-existent block: "+c)}}else(n=o.utils.xml.createElement("xml")).appendChild(this.oldXml),o.Xml.domToWorkspace(n,a)},o.Events.Move=function(n){o.Events.Move.superClass_.constructor.call(this,n),n&&(n.isShadow()&&(this.recordUndo=!1),n=this.currentLocation_(),this.oldParentId=n.parentId,this.oldInputName=n.inputName,this.oldCoordinate=n.coordinate)},o.utils.object.inherits(o.Events.Move,o.Events.BlockBase),o.Events.BlockMove=o.Events.Move,o.Events.Move.prototype.type=o.Events.MOVE,o.Events.Move.prototype.toJson=function(){var n=o.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(n.newParentId=this.newParentId),this.newInputName&&(n.newInputName=this.newInputName),this.newCoordinate&&(n.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(n.recordUndo=this.recordUndo),n},o.Events.Move.prototype.fromJson=function(n){if(o.Events.Move.superClass_.fromJson.call(this,n),this.newParentId=n.newParentId,this.newInputName=n.newInputName,n.newCoordinate){var a=n.newCoordinate.split(",");this.newCoordinate=new o.utils.Coordinate(Number(a[0]),Number(a[1]))}void 0!==n.recordUndo&&(this.recordUndo=n.recordUndo)},o.Events.Move.prototype.recordNew=function(){var n=this.currentLocation_();this.newParentId=n.parentId,this.newInputName=n.inputName,this.newCoordinate=n.coordinate},o.Events.Move.prototype.currentLocation_=function(){var n=this.getEventWorkspace_().getBlockById(this.blockId),a={},c=n.getParent();return c?(a.parentId=c.id,(n=c.getInputWithBlock(n))&&(a.inputName=n.name)):a.coordinate=n.getRelativeToSurfaceXY(),a},o.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&o.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},o.Events.Move.prototype.run=function(n){var a=this.getEventWorkspace_(),c=a.getBlockById(this.blockId);if(c){var d=n?this.newParentId:this.oldParentId,_=n?this.newInputName:this.oldInputName,y=n?this.newCoordinate:this.oldCoordinate;if(n=null,d&&!(n=a.getBlockById(d)))return void console.warn("Can't connect to non-existent block: "+d);if(c.getParent()&&c.unplug(),y)_=c.getRelativeToSurfaceXY(),c.moveBy(y.x-_.x,y.y-_.y);else{if(a=(c=c.outputConnection||c.previousConnection).type,_){if(n=n.getInput(_))var R=n.connection}else a==o.connectionTypes.PREVIOUS_STATEMENT&&(R=n.nextConnection);R?c.connect(R):console.warn("Can't connect to non-existent input: "+_)}}else console.warn("Can't move non-existent block: "+this.blockId)},o.registry.register(o.registry.Type.EVENT,o.Events.CREATE,o.Events.Create),o.registry.register(o.registry.Type.EVENT,o.Events.DELETE,o.Events.Delete),o.registry.register(o.registry.Type.EVENT,o.Events.CHANGE,o.Events.BlockChange),o.registry.register(o.registry.Type.EVENT,o.Events.MOVE,o.Events.Move),o.Events.FinishedLoading=function(n){this.isBlank=void 0===n,this.workspaceId=n?n.id:"",this.group=o.Events.getGroup(),this.recordUndo=!1},o.utils.object.inherits(o.Events.FinishedLoading,o.Events.Abstract),o.Events.FinishedLoading.prototype.type=o.Events.FINISHED_LOADING,o.Events.FinishedLoading.prototype.toJson=function(){var n={type:this.type};return this.group&&(n.group=this.group),this.workspaceId&&(n.workspaceId=this.workspaceId),n},o.Events.FinishedLoading.prototype.fromJson=function(n){this.isBlank=!1,this.workspaceId=n.workspaceId,this.group=n.group},o.registry.register(o.registry.Type.EVENT,o.Events.FINISHED_LOADING,o.Events.FinishedLoading),o.Events.UiBase=function(n){o.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===n,this.workspaceId=n||"",this.recordUndo=!1},o.utils.object.inherits(o.Events.UiBase,o.Events.Abstract),o.Events.UiBase.prototype.isUiEvent=!0,o.Events.Ui=function(n,a,c,d){o.Events.Ui.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.element=void 0===a?"":a,this.oldValue=void 0===c?"":c,this.newValue=void 0===d?"":d},o.utils.object.inherits(o.Events.Ui,o.Events.UiBase),o.Events.Ui.prototype.type=o.Events.UI,o.Events.Ui.prototype.toJson=function(){var n=o.Events.Ui.superClass_.toJson.call(this);return n.element=this.element,void 0!==this.newValue&&(n.newValue=this.newValue),this.blockId&&(n.blockId=this.blockId),n},o.Events.Ui.prototype.fromJson=function(n){o.Events.Ui.superClass_.fromJson.call(this,n),this.element=n.element,this.newValue=n.newValue,this.blockId=n.blockId},o.registry.register(o.registry.Type.EVENT,o.Events.UI,o.Events.Ui),o.Events.VarBase=function(n){o.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===n)?"":n.getId(),this.workspaceId=this.isBlank?"":n.workspace.id},o.utils.object.inherits(o.Events.VarBase,o.Events.Abstract),o.Events.VarBase.prototype.toJson=function(){var n=o.Events.VarBase.superClass_.toJson.call(this);return n.varId=this.varId,n},o.Events.VarBase.prototype.fromJson=function(n){o.Events.VarBase.superClass_.toJson.call(this),this.varId=n.varId},o.Events.VarCreate=function(n){o.Events.VarCreate.superClass_.constructor.call(this,n),n&&(this.varType=n.type,this.varName=n.name)},o.utils.object.inherits(o.Events.VarCreate,o.Events.VarBase),o.Events.VarCreate.prototype.type=o.Events.VAR_CREATE,o.Events.VarCreate.prototype.toJson=function(){var n=o.Events.VarCreate.superClass_.toJson.call(this);return n.varType=this.varType,n.varName=this.varName,n},o.Events.VarCreate.prototype.fromJson=function(n){o.Events.VarCreate.superClass_.fromJson.call(this,n),this.varType=n.varType,this.varName=n.varName},o.Events.VarCreate.prototype.run=function(n){var a=this.getEventWorkspace_();n?a.createVariable(this.varName,this.varType,this.varId):a.deleteVariableById(this.varId)},o.Events.VarDelete=function(n){o.Events.VarDelete.superClass_.constructor.call(this,n),n&&(this.varType=n.type,this.varName=n.name)},o.utils.object.inherits(o.Events.VarDelete,o.Events.VarBase),o.Events.VarDelete.prototype.type=o.Events.VAR_DELETE,o.Events.VarDelete.prototype.toJson=function(){var n=o.Events.VarDelete.superClass_.toJson.call(this);return n.varType=this.varType,n.varName=this.varName,n},o.Events.VarDelete.prototype.fromJson=function(n){o.Events.VarDelete.superClass_.fromJson.call(this,n),this.varType=n.varType,this.varName=n.varName},o.Events.VarDelete.prototype.run=function(n){var a=this.getEventWorkspace_();n?a.deleteVariableById(this.varId):a.createVariable(this.varName,this.varType,this.varId)},o.Events.VarRename=function(n,a){o.Events.VarRename.superClass_.constructor.call(this,n),n&&(this.oldName=n.name,this.newName=void 0===a?"":a)},o.utils.object.inherits(o.Events.VarRename,o.Events.VarBase),o.Events.VarRename.prototype.type=o.Events.VAR_RENAME,o.Events.VarRename.prototype.toJson=function(){var n=o.Events.VarRename.superClass_.toJson.call(this);return n.oldName=this.oldName,n.newName=this.newName,n},o.Events.VarRename.prototype.fromJson=function(n){o.Events.VarRename.superClass_.fromJson.call(this,n),this.oldName=n.oldName,this.newName=n.newName},o.Events.VarRename.prototype.run=function(n){this.getEventWorkspace_().renameVariableById(this.varId,n?this.newName:this.oldName)},o.registry.register(o.registry.Type.EVENT,o.Events.VAR_CREATE,o.Events.VarCreate),o.registry.register(o.registry.Type.EVENT,o.Events.VAR_DELETE,o.Events.VarDelete),o.registry.register(o.registry.Type.EVENT,o.Events.VAR_RENAME,o.Events.VarRename),o.BlockDragSurfaceSvg=function(n){this.container_=n,this.createDom()},o.BlockDragSurfaceSvg.prototype.SVG_=null,o.BlockDragSurfaceSvg.prototype.dragGroup_=null,o.BlockDragSurfaceSvg.prototype.container_=null,o.BlockDragSurfaceSvg.prototype.scale_=1,o.BlockDragSurfaceSvg.prototype.surfaceXY_=null,o.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new o.utils.Coordinate(0,0),o.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=o.utils.dom.createSvgElement(o.utils.Svg.SVG,{xmlns:o.utils.dom.SVG_NS,"xmlns:html":o.utils.dom.HTML_NS,"xmlns:xlink":o.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{},this.SVG_))},o.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(n){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(n),this.SVG_.style.display="block",this.surfaceXY_=new o.utils.Coordinate(0,0)},o.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(n,a,c){this.scale_=c,n=n.toFixed(0),a=a.toFixed(0),this.childSurfaceXY_.x=parseInt(n,10),this.childSurfaceXY_.y=parseInt(a,10),this.dragGroup_.setAttribute("transform","translate("+n+","+a+") scale("+c+")")},o.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var n=this.surfaceXY_.x,a=this.surfaceXY_.y;n=n.toFixed(0),a=a.toFixed(0),this.SVG_.style.display="block",o.utils.dom.setCssTransform(this.SVG_,"translate3d("+n+"px, "+a+"px, 0px)")},o.BlockDragSurfaceSvg.prototype.translateBy=function(n,a){this.surfaceXY_=new o.utils.Coordinate(this.surfaceXY_.x+n,this.surfaceXY_.y+a),this.translateSurfaceInternal_()},o.BlockDragSurfaceSvg.prototype.translateSurface=function(n,a){this.surfaceXY_=new o.utils.Coordinate(n*this.scale_,a*this.scale_),this.translateSurfaceInternal_()},o.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var n=o.utils.getRelativeXY(this.SVG_);return new o.utils.Coordinate(n.x/this.scale_,n.y/this.scale_)},o.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},o.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},o.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},o.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},o.BlockDragSurfaceSvg.prototype.clearAndHide=function(n){if(n?n.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},o.Css={},o.Css.injected_=!1,o.Css.register=function(n){if(o.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(o.Css.CONTENT,n),n.length=0},o.Css.inject=function(n,a){if(!o.Css.injected_){o.Css.injected_=!0;var c=o.Css.CONTENT.join("\n");o.Css.CONTENT.length=0,n&&(n=a.replace(/[\\/]$/,""),c=c.replace(/<<<PATH>>>/g,n),(n=document.createElement("style")).id="blockly-common-style",c=document.createTextNode(c),n.appendChild(c),document.head.insertBefore(n,document.head.firstChild))}},o.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],o.Grid=function(n,a){this.gridPattern_=n,this.spacing_=a.spacing,this.length_=a.length,this.line2_=(this.line1_=n.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=a.snap},o.Grid.prototype.scale_=1,o.Grid.prototype.dispose=function(){this.gridPattern_=null},o.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},o.Grid.prototype.getSpacing=function(){return this.spacing_},o.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},o.Grid.prototype.update=function(n){this.scale_=n;var a=this.spacing_*n||100;this.gridPattern_.setAttribute("width",a),this.gridPattern_.setAttribute("height",a);var c=(a=Math.floor(this.spacing_/2)+.5)-this.length_/2,d=a+this.length_/2;this.setLineAttributes_(this.line1_,n,c*=n,d*=n,a*=n,a),this.setLineAttributes_(this.line2_,n,a,a,c,d)},o.Grid.prototype.setLineAttributes_=function(n,a,c,d,_,y){n&&(n.setAttribute("stroke-width",a),n.setAttribute("x1",c),n.setAttribute("y1",_),n.setAttribute("x2",d),n.setAttribute("y2",y))},o.Grid.prototype.moveTo=function(n,a){this.gridPattern_.setAttribute("x",n),this.gridPattern_.setAttribute("y",a),(o.utils.userAgent.IE||o.utils.userAgent.EDGE)&&this.update(this.scale_)},o.Grid.createDom=function(n,a,c){return n=o.utils.dom.createSvgElement(o.utils.Svg.PATTERN,{id:"blocklyGridPattern"+n,patternUnits:"userSpaceOnUse"},c),0<a.length&&0<a.spacing?(o.utils.dom.createSvgElement(o.utils.Svg.LINE,{stroke:a.colour},n),1<a.length&&o.utils.dom.createSvgElement(o.utils.Svg.LINE,{stroke:a.colour},n)):o.utils.dom.createSvgElement(o.utils.Svg.LINE,{},n),n},o.Theme=function(n,a,c,d){this.name=n,this.blockStyles=a||Object.create(null),this.categoryStyles=c||Object.create(null),this.componentStyles=d||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,o.registry.register(o.registry.Type.THEME,n,this)},o.Theme.prototype.getClassName=function(){return this.name+"-theme"},o.Theme.prototype.setBlockStyle=function(n,a){this.blockStyles[n]=a},o.Theme.prototype.setCategoryStyle=function(n,a){this.categoryStyles[n]=a},o.Theme.prototype.getComponentStyle=function(n){return(n=this.componentStyles[n])&&"string"==typeof n&&this.getComponentStyle(n)?this.getComponentStyle(n):n?String(n):null},o.Theme.prototype.setComponentStyle=function(n,a){this.componentStyles[n]=a},o.Theme.prototype.setFontStyle=function(n){this.fontStyle=n},o.Theme.prototype.setStartHats=function(n){this.startHats=n},o.Theme.defineTheme=function(n,a){var c=new o.Theme(n),d=a.base;return d&&("string"==typeof d&&(d=o.registry.getObject(o.registry.Type.THEME,d)),d instanceof o.Theme&&(o.utils.object.deepMerge(c,d),c.name=n)),o.utils.object.deepMerge(c.blockStyles,a.blockStyles),o.utils.object.deepMerge(c.categoryStyles,a.categoryStyles),o.utils.object.deepMerge(c.componentStyles,a.componentStyles),o.utils.object.deepMerge(c.fontStyle,a.fontStyle),null!=a.startHats&&(c.startHats=a.startHats),c},o.Themes={},o.Themes.Classic={},o.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},o.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},o.Themes.Classic=new o.Theme("classic",o.Themes.Classic.defaultBlockStyles,o.Themes.Classic.categoryStyles),o.utils.IdGenerator={},o.utils.IdGenerator.nextId_=0,o.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(o.utils.IdGenerator.nextId_++).toString(36)},o.utils.Metrics=function(){},o.utils.toolbox={},o.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",o.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",o.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},o.utils.toolbox.convertToolboxDefToJson=function(n){return n?((n instanceof Element||"string"==typeof n)&&(n=o.utils.toolbox.parseToolboxTree(n),n=o.utils.toolbox.convertToToolboxJson_(n)),o.utils.toolbox.validateToolbox_(n),n):null},o.utils.toolbox.validateToolbox_=function(n){var a=n.kind;if(n=n.contents,a&&a!=o.utils.toolbox.FLYOUT_TOOLBOX_KIND&&a!=o.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+a+". Please supply either "+o.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+o.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!n)throw Error("Toolbox must have a contents attribute.")},o.utils.toolbox.convertFlyoutDefToJsonArray=function(n){return n?n.contents?n.contents:Array.isArray(n)&&0<n.length&&!n[0].nodeType?n:o.utils.toolbox.xmlToJsonArray_(n):[]},o.utils.toolbox.hasCategories=function(n){if(!n)return!1;var a=n.kind;return a?a==o.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!n.contents.filter(function(c){return"CATEGORY"==c.kind.toUpperCase()}).length},o.utils.toolbox.isCategoryCollapsible=function(n){return!(!n||!n.contents||!n.contents.filter(function(a){return"CATEGORY"==a.kind.toUpperCase()}).length)},o.utils.toolbox.convertToToolboxJson_=function(n){var a={contents:o.utils.toolbox.xmlToJsonArray_(n)};return n instanceof Node&&o.utils.toolbox.addAttributes_(n,a),a},o.utils.toolbox.xmlToJsonArray_=function(n){var d,a=[],c=n.childNodes;for(c||(c=n),n=0;d=c[n];n++)if(d.tagName){var _={},y=d.tagName.toUpperCase();_.kind=y,"BLOCK"==y?_.blockxml=d:d.childNodes&&0<d.childNodes.length&&(_.contents=o.utils.toolbox.xmlToJsonArray_(d)),o.utils.toolbox.addAttributes_(d,_),a.push(_)}return a},o.utils.toolbox.addAttributes_=function(n,a){for(var c=0;c<n.attributes.length;c++){var d=n.attributes[c];-1<d.nodeName.indexOf("css-")?(a.cssconfig=a.cssconfig||{},a.cssconfig[d.nodeName.replace("css-","")]=d.value):a[d.nodeName]=d.value}},o.utils.toolbox.parseToolboxTree=function(n){if(n){if("string"!=typeof n&&(o.utils.userAgent.IE&&n.outerHTML?n=n.outerHTML:n instanceof Element||(n=null)),"string"==typeof n&&"xml"!=(n=o.Xml.textToDom(n)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else n=null;return n},o.Options=function(n){var a=!!n.readOnly;if(a)var c=null,d=!1,_=!1,y=!1,R=!1,x=!1,B=!1;else{c=o.utils.toolbox.convertToolboxDefToJson(n.toolbox),d=o.utils.toolbox.hasCategories(c),void 0===(_=n.trashcan)&&(_=d);var H=n.maxTrashcanContents;_?void 0===H&&(H=32):H=0,void 0===(y=n.collapse)&&(y=d),void 0===(R=n.comments)&&(R=d),void 0===(x=n.disable)&&(x=d),void 0===(B=n.sounds)&&(B=!0)}var F=!!n.rtl,Y=n.horizontalLayout;void 0===Y&&(Y=!1);var z=n.toolboxPosition;z="end"!==z,z=Y?z?o.utils.toolbox.Position.TOP:o.utils.toolbox.Position.BOTTOM:z==F?o.utils.toolbox.Position.RIGHT:o.utils.toolbox.Position.LEFT;var G=n.css;void 0===G&&(G=!0);var ie="https://blockly-demo.appspot.com/static/media/";n.media?ie=n.media:n.path&&(ie=n.path+"media/");var Z=void 0===n.oneBasedIndex||!!n.oneBasedIndex,re=n.renderer||"geras",$=n.plugins||{};this.RTL=F,this.oneBasedIndex=Z,this.collapse=y,this.comments=R,this.disable=x,this.readOnly=a,this.maxBlocks=n.maxBlocks||1/0,this.maxInstances=n.maxInstances,this.pathToMedia=ie,this.hasCategories=d,this.moveOptions=o.Options.parseMoveOptions_(n,d),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=_,this.maxTrashcanContents=H,this.hasSounds=B,this.hasCss=G,this.horizontalLayout=Y,this.languageTree=c,this.gridOptions=o.Options.parseGridOptions_(n),this.zoomOptions=o.Options.parseZoomOptions_(n),this.toolboxPosition=z,this.theme=o.Options.parseThemeOptions_(n),this.renderer=re,this.rendererOverrides=n.rendererOverrides,this.gridPattern=null,this.parentWorkspace=n.parentWorkspace,this.plugins=$},o.BlocklyOptions=function(){},o.Options.parseMoveOptions_=function(n,a){var c=n.move||{},d={};return void 0===c.scrollbars&&void 0===n.scrollbars?d.scrollbars=a:"object"==typeof c.scrollbars?(d.scrollbars={},d.scrollbars.horizontal=!!c.scrollbars.horizontal,d.scrollbars.vertical=!!c.scrollbars.vertical,d.scrollbars.horizontal&&d.scrollbars.vertical?d.scrollbars=!0:d.scrollbars.horizontal||d.scrollbars.vertical||(d.scrollbars=!1)):d.scrollbars=!!c.scrollbars||!!n.scrollbars,d.wheel=d.scrollbars&&void 0!==c.wheel?!!c.wheel:"object"==typeof d.scrollbars,d.drag=!(!d.scrollbars||void 0!==c.drag&&!c.drag),d},o.Options.parseZoomOptions_=function(n){var a={};return a.controls=void 0!==(n=n.zoom||{}).controls&&!!n.controls,a.wheel=void 0!==n.wheel&&!!n.wheel,a.startScale=void 0===n.startScale?1:Number(n.startScale),a.maxScale=void 0===n.maxScale?3:Number(n.maxScale),a.minScale=void 0===n.minScale?.3:Number(n.minScale),a.scaleSpeed=void 0===n.scaleSpeed?1.2:Number(n.scaleSpeed),a.pinch=void 0===n.pinch?a.wheel||a.controls:!!n.pinch,a},o.Options.parseGridOptions_=function(n){n=n.grid||{};var a={};return a.spacing=Number(n.spacing)||0,a.colour=n.colour||"#888",a.length=void 0===n.length?1:Number(n.length),a.snap=0<a.spacing&&!!n.snap,a},o.Options.parseThemeOptions_=function(n){return"string"==typeof(n=n.theme||o.Themes.Classic)?o.registry.getObject(o.registry.Type.THEME,n):n instanceof o.Theme?n:o.Theme.defineTheme(n.name||"builtin"+o.utils.IdGenerator.getNextUniqueId(),n)},o.Options.parseToolboxTree=function(n){return o.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),o.utils.toolbox.parseToolboxTree(n)},o.ScrollbarPair=function(n,a,c,d,_){this.workspace_=n,c=void 0===c||c;var y=(a=void 0===a||a)&&c;a&&(this.hScroll=new o.Scrollbar(n,!0,y,d,_)),c&&(this.vScroll=new o.Scrollbar(n,!1,y,d,_)),y&&(this.corner_=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{height:o.Scrollbar.scrollbarThickness,width:o.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),o.utils.dom.insertAfter(this.corner_,n.getBubbleCanvas())),this.oldHostMetrics_=null},o.ScrollbarPair.prototype.dispose=function(){o.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},o.ScrollbarPair.prototype.resize=function(){var n=this.workspace_.getMetrics();if(n){var a=!1,c=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==n.viewWidth&&this.oldHostMetrics_.viewHeight==n.viewHeight&&this.oldHostMetrics_.absoluteTop==n.absoluteTop&&this.oldHostMetrics_.absoluteLeft==n.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==n.scrollWidth&&this.oldHostMetrics_.viewLeft==n.viewLeft&&this.oldHostMetrics_.scrollLeft==n.scrollLeft||(a=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==n.scrollHeight&&this.oldHostMetrics_.viewTop==n.viewTop&&this.oldHostMetrics_.scrollTop==n.scrollTop||(c=!0)):c=a=!0,a||c){try{o.Events.disable(),this.hScroll&&a&&this.hScroll.resize(n),this.vScroll&&c&&this.vScroll.resize(n)}finally{o.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==n.viewWidth&&this.oldHostMetrics_.absoluteLeft==n.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==n.viewHeight&&this.oldHostMetrics_.absoluteTop==n.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=n}},o.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},o.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},o.ScrollbarPair.prototype.setOrigin=function(n,a){this.hScroll&&this.hScroll.setOrigin(n,a),this.vScroll&&this.vScroll.setOrigin(n,a)},o.ScrollbarPair.prototype.set=function(n,a,c){this.hScroll&&this.hScroll.set(n,!1),this.vScroll&&this.vScroll.set(a,!1),(c||void 0===c)&&(n={},this.hScroll&&(n.x=this.hScroll.getRatio_()),this.vScroll&&(n.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(n))},o.ScrollbarPair.prototype.setX=function(n){this.hScroll&&this.hScroll.set(n,!0)},o.ScrollbarPair.prototype.setY=function(n){this.vScroll&&this.vScroll.set(n,!0)},o.ScrollbarPair.prototype.setContainerVisible=function(n){this.hScroll&&this.hScroll.setContainerVisible(n),this.vScroll&&this.vScroll.setContainerVisible(n)},o.ScrollbarPair.prototype.isVisible=function(){var n=!1;return this.hScroll&&(n=this.hScroll.isVisible()),this.vScroll&&(n=n||this.vScroll.isVisible()),n},o.ScrollbarPair.prototype.resizeContent=function(n){this.hScroll&&this.hScroll.resizeContentHorizontal(n),this.vScroll&&this.vScroll.resizeContentVertical(n)},o.ScrollbarPair.prototype.resizeView=function(n){this.hScroll&&this.hScroll.resizeViewHorizontal(n),this.vScroll&&this.vScroll.resizeViewVertical(n)},o.Scrollbar=function(n,a,c,d,_){this.workspace_=n,this.pair_=c||!1,this.horizontal_=a,this.margin_=void 0!==_?_:o.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(d),this.position=new o.utils.Coordinate(0,0),n=o.Scrollbar.scrollbarThickness,a?(this.svgBackground_.setAttribute("height",n),this.outerSvg_.setAttribute("height",n),this.svgHandle_.setAttribute("height",n-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",n),this.outerSvg_.setAttribute("width",n),this.svgHandle_.setAttribute("width",n-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=o.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=o.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},o.Scrollbar.prototype.origin_=new o.utils.Coordinate(0,0),o.Scrollbar.prototype.startDragMouse_=0,o.Scrollbar.prototype.scrollbarLength_=0,o.Scrollbar.prototype.handleLength_=0,o.Scrollbar.prototype.handlePosition_=0,o.Scrollbar.prototype.isVisible_=!0,o.Scrollbar.prototype.containerVisible_=!0,o.Scrollbar.scrollbarThickness=15,o.Touch.TOUCH_ENABLED&&(o.Scrollbar.scrollbarThickness=25),o.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,o.Scrollbar.metricsAreEquivalent_=function(n,a){return n.viewWidth==a.viewWidth&&n.viewHeight==a.viewHeight&&n.viewLeft==a.viewLeft&&n.viewTop==a.viewTop&&n.absoluteTop==a.absoluteTop&&n.absoluteLeft==a.absoluteLeft&&n.scrollWidth==a.scrollWidth&&n.scrollHeight==a.scrollHeight&&n.scrollLeft==a.scrollLeft&&n.scrollTop==a.scrollTop},o.Scrollbar.prototype.dispose=function(){this.cleanUp_(),o.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,o.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,o.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},o.Scrollbar.prototype.constrainHandleLength_=function(n){return 0>=n||isNaN(n)?0:Math.min(n,this.scrollbarLength_)},o.Scrollbar.prototype.setHandleLength_=function(n){this.handleLength_=n,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},o.Scrollbar.prototype.constrainHandlePosition_=function(n){return 0>=n||isNaN(n)?0:Math.min(n,this.scrollbarLength_-this.handleLength_)},o.Scrollbar.prototype.setHandlePosition=function(n){this.handlePosition_=n,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},o.Scrollbar.prototype.setScrollbarLength_=function(n){this.scrollbarLength_=n,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},o.Scrollbar.prototype.setPosition=function(n,a){this.position.x=n,this.position.y=a,o.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},o.Scrollbar.prototype.resize=function(n){!n&&!(n=this.workspace_.getMetrics())||this.oldHostMetrics_&&o.Scrollbar.metricsAreEquivalent_(n,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(n):this.resizeVertical_(n),this.oldHostMetrics_=n,this.updateMetrics_())},o.Scrollbar.prototype.requiresViewResize_=function(n){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==n.viewWidth||this.oldHostMetrics_.viewHeight!==n.viewHeight||this.oldHostMetrics_.absoluteLeft!==n.absoluteLeft||this.oldHostMetrics_.absoluteTop!==n.absoluteTop},o.Scrollbar.prototype.resizeHorizontal_=function(n){this.requiresViewResize_(n)?this.resizeViewHorizontal(n):this.resizeContentHorizontal(n)},o.Scrollbar.prototype.resizeViewHorizontal=function(n){var a=n.viewWidth-2*this.margin_;this.pair_&&(a-=o.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,a)),a=n.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(a+=o.Scrollbar.scrollbarThickness),this.setPosition(a,n.absoluteTop+n.viewHeight-o.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(n)},o.Scrollbar.prototype.resizeContentHorizontal=function(n){if(n.viewWidth>=n.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var a=this.scrollbarLength_*n.viewWidth/n.scrollWidth;a=this.constrainHandleLength_(a),this.setHandleLength_(a);var c=this.scrollbarLength_-this.handleLength_;n=this.constrainHandlePosition_(n=(n.viewLeft-n.scrollLeft)/(a=n.scrollWidth-n.viewWidth)*c),this.setHandlePosition(n),this.ratio=c/a}},o.Scrollbar.prototype.resizeVertical_=function(n){this.requiresViewResize_(n)?this.resizeViewVertical(n):this.resizeContentVertical(n)},o.Scrollbar.prototype.resizeViewVertical=function(n){var a=n.viewHeight-2*this.margin_;this.pair_&&(a-=o.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,a)),this.setPosition(this.workspace_.RTL?n.absoluteLeft+this.margin_:n.absoluteLeft+n.viewWidth-o.Scrollbar.scrollbarThickness-this.margin_,n.absoluteTop+this.margin_),this.resizeContentVertical(n)},o.Scrollbar.prototype.resizeContentVertical=function(n){if(n.viewHeight>=n.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var a=this.scrollbarLength_*n.viewHeight/n.scrollHeight;a=this.constrainHandleLength_(a),this.setHandleLength_(a);var c=this.scrollbarLength_-this.handleLength_;n=this.constrainHandlePosition_(n=(n.viewTop-n.scrollTop)/(a=n.scrollHeight-n.viewHeight)*c),this.setHandlePosition(n),this.ratio=c/a}},o.Scrollbar.prototype.createDom_=function(n){var a="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");n&&(a+=" "+n),this.outerSvg_=o.utils.dom.createSvgElement(o.utils.Svg.SVG,{class:a},null),this.svgGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),n=Math.floor((o.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:n,ry:n},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),o.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},o.Scrollbar.prototype.isVisible=function(){return this.isVisible_},o.Scrollbar.prototype.setContainerVisible=function(n){var a=n!=this.containerVisible_;this.containerVisible_=n,a&&this.updateDisplay_()},o.Scrollbar.prototype.setVisible=function(n){var a=n!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=n,a&&this.updateDisplay_()},o.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},o.Scrollbar.prototype.onMouseDownBar_=function(n){if(this.workspace_.markFocused(),o.Touch.clearTouchIdentifier(),this.cleanUp_(),o.utils.isRightButton(n))n.stopPropagation();else{var a=o.utils.mouseToSvg(n,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());a=this.horizontal_?a.x:a.y;var c=o.utils.getInjectionDivXY_(this.svgHandle_),d=this.handlePosition_,_=.95*this.handleLength_;a<=(c=this.horizontal_?c.x:c.y)?d-=_:a>=c+this.handleLength_&&(d+=_),this.setHandlePosition(this.constrainHandlePosition_(d)),this.updateMetrics_(),n.stopPropagation(),n.preventDefault()}},o.Scrollbar.prototype.onMouseDownHandle_=function(n){this.workspace_.markFocused(),this.cleanUp_(),o.utils.isRightButton(n)?n.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?n.clientX:n.clientY,o.Scrollbar.onMouseUpWrapper_=o.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),o.Scrollbar.onMouseMoveWrapper_=o.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),n.stopPropagation(),n.preventDefault())},o.Scrollbar.prototype.onMouseMoveHandle_=function(n){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?n.clientX:n.clientY)-this.startDragMouse_))),this.updateMetrics_()},o.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),o.Touch.clearTouchIdentifier(),this.cleanUp_()},o.Scrollbar.prototype.cleanUp_=function(){o.hideChaff(!0),o.Scrollbar.onMouseUpWrapper_&&(o.browserEvents.unbind(o.Scrollbar.onMouseUpWrapper_),o.Scrollbar.onMouseUpWrapper_=null),o.Scrollbar.onMouseMoveWrapper_&&(o.browserEvents.unbind(o.Scrollbar.onMouseMoveWrapper_),o.Scrollbar.onMouseMoveWrapper_=null)},o.Scrollbar.prototype.getRatio_=function(){var n=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(n)&&(n=0),n},o.Scrollbar.prototype.updateMetrics_=function(){var n=this.getRatio_(),a={};this.horizontal_?a.x=n:a.y=n,this.workspace_.setMetrics(a)},o.Scrollbar.prototype.set=function(n,a){this.setHandlePosition(this.constrainHandlePosition_(n*this.ratio)),(a||void 0===a)&&this.updateMetrics_()},o.Scrollbar.prototype.setOrigin=function(n,a){this.origin_=new o.utils.Coordinate(n,a)},o.Tooltip={},o.Tooltip.visible=!1,o.Tooltip.blocked_=!1,o.Tooltip.LIMIT=50,o.Tooltip.mouseOutPid_=0,o.Tooltip.showPid_=0,o.Tooltip.lastX_=0,o.Tooltip.lastY_=0,o.Tooltip.element_=null,o.Tooltip.poisonedElement_=null,o.Tooltip.OFFSET_X=0,o.Tooltip.OFFSET_Y=10,o.Tooltip.RADIUS_OK=10,o.Tooltip.HOVER_MS=750,o.Tooltip.MARGINS=5,o.Tooltip.DIV=null,o.Tooltip.getTooltipOfObject=function(n){if(n=o.Tooltip.getTargetObject_(n)){for(n=n.tooltip;"function"==typeof n;)n=n();if("string"!=typeof n)throw Error("Tooltip function must return a string.");return n}return""},o.Tooltip.getTargetObject_=function(n){for(;n&&n.tooltip;){if("string"==typeof n.tooltip||"function"==typeof n.tooltip)return n;n=n.tooltip}return null},o.Tooltip.createDom=function(){o.Tooltip.DIV||(o.Tooltip.DIV=document.createElement("div"),o.Tooltip.DIV.className="blocklyTooltipDiv",(o.parentContainer||document.body).appendChild(o.Tooltip.DIV))},o.Tooltip.bindMouseEvents=function(n){n.mouseOverWrapper_=o.browserEvents.bind(n,"mouseover",null,o.Tooltip.onMouseOver_),n.mouseOutWrapper_=o.browserEvents.bind(n,"mouseout",null,o.Tooltip.onMouseOut_),n.addEventListener("mousemove",o.Tooltip.onMouseMove_,!1)},o.Tooltip.unbindMouseEvents=function(n){n&&(o.browserEvents.unbind(n.mouseOverWrapper_),o.browserEvents.unbind(n.mouseOutWrapper_),n.removeEventListener("mousemove",o.Tooltip.onMouseMove_))},o.Tooltip.onMouseOver_=function(n){o.Tooltip.blocked_||(n=o.Tooltip.getTargetObject_(n.currentTarget),o.Tooltip.element_!=n&&(o.Tooltip.hide(),o.Tooltip.poisonedElement_=null,o.Tooltip.element_=n),clearTimeout(o.Tooltip.mouseOutPid_))},o.Tooltip.onMouseOut_=function(n){o.Tooltip.blocked_||(o.Tooltip.mouseOutPid_=setTimeout(function(){o.Tooltip.element_=null,o.Tooltip.poisonedElement_=null,o.Tooltip.hide()},1),clearTimeout(o.Tooltip.showPid_))},o.Tooltip.onMouseMove_=function(n){if(o.Tooltip.element_&&o.Tooltip.element_.tooltip&&!o.Tooltip.blocked_)if(o.Tooltip.visible){var a=o.Tooltip.lastX_-n.pageX;n=o.Tooltip.lastY_-n.pageY,Math.sqrt(a*a+n*n)>o.Tooltip.RADIUS_OK&&o.Tooltip.hide()}else o.Tooltip.poisonedElement_!=o.Tooltip.element_&&(clearTimeout(o.Tooltip.showPid_),o.Tooltip.lastX_=n.pageX,o.Tooltip.lastY_=n.pageY,o.Tooltip.showPid_=setTimeout(o.Tooltip.show_,o.Tooltip.HOVER_MS))},o.Tooltip.dispose=function(){o.Tooltip.element_=null,o.Tooltip.poisonedElement_=null,o.Tooltip.hide()},o.Tooltip.hide=function(){o.Tooltip.visible&&(o.Tooltip.visible=!1,o.Tooltip.DIV&&(o.Tooltip.DIV.style.display="none")),o.Tooltip.showPid_&&clearTimeout(o.Tooltip.showPid_)},o.Tooltip.block=function(){o.Tooltip.hide(),o.Tooltip.blocked_=!0},o.Tooltip.unblock=function(){o.Tooltip.blocked_=!1},o.Tooltip.show_=function(){if(!o.Tooltip.blocked_&&(o.Tooltip.poisonedElement_=o.Tooltip.element_,o.Tooltip.DIV)){o.Tooltip.DIV.textContent="";var n=o.Tooltip.getTooltipOfObject(o.Tooltip.element_);n=(n=o.utils.string.wrap(n,o.Tooltip.LIMIT)).split("\n");for(var a=0;a<n.length;a++){var c=document.createElement("div");c.appendChild(document.createTextNode(n[a])),o.Tooltip.DIV.appendChild(c)}n=o.Tooltip.element_.RTL,a=document.documentElement.clientWidth,c=document.documentElement.clientHeight,o.Tooltip.DIV.style.direction=n?"rtl":"ltr",o.Tooltip.DIV.style.display="block",o.Tooltip.visible=!0;var d=o.Tooltip.lastX_;d=n?d-(o.Tooltip.OFFSET_X+o.Tooltip.DIV.offsetWidth):d+o.Tooltip.OFFSET_X;var _=o.Tooltip.lastY_+o.Tooltip.OFFSET_Y;_+o.Tooltip.DIV.offsetHeight>c+window.scrollY&&(_-=o.Tooltip.DIV.offsetHeight+2*o.Tooltip.OFFSET_Y),n?d=Math.max(o.Tooltip.MARGINS-window.scrollX,d):d+o.Tooltip.DIV.offsetWidth>a+window.scrollX-2*o.Tooltip.MARGINS&&(d=a-o.Tooltip.DIV.offsetWidth-2*o.Tooltip.MARGINS),o.Tooltip.DIV.style.top=_+"px",o.Tooltip.DIV.style.left=d+"px"}},o.utils.aria={},o.utils.aria.ARIA_PREFIX_="aria-",o.utils.aria.ROLE_ATTRIBUTE_="role",o.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},o.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},o.utils.aria.setRole=function(n,a){n.setAttribute(o.utils.aria.ROLE_ATTRIBUTE_,a)},o.utils.aria.setState=function(n,a,c){Array.isArray(c)&&(c=c.join(" ")),n.setAttribute(o.utils.aria.ARIA_PREFIX_+a,c)},o.IASTNodeLocation=function(){},o.IASTNodeLocationSvg=function(){},o.IASTNodeLocationWithBlock=function(){},o.IKeyboardAccessible=function(){},o.utils.deprecation={},o.utils.deprecation.warn=function(n,a,c,d){n=n+" was deprecated on "+a+" and will be deleted on "+c+".",d&&(n+="\nUse "+d+" instead."),console.warn(n)},o.Connection=function(n,a){this.sourceBlock_=n,this.type=a},o.Connection.CAN_CONNECT=0,o.Connection.REASON_SELF_CONNECTION=1,o.Connection.REASON_WRONG_TYPE=2,o.Connection.REASON_TARGET_NULL=3,o.Connection.REASON_CHECKS_FAILED=4,o.Connection.REASON_DIFFERENT_WORKSPACES=5,o.Connection.REASON_SHADOW_PARENT=6,o.Connection.REASON_DRAG_CHECKS_FAILED=7,o.Connection.prototype.targetConnection=null,o.Connection.prototype.disposed=!1,o.Connection.prototype.check_=null,o.Connection.prototype.shadowDom_=null,o.Connection.prototype.x=0,o.Connection.prototype.y=0,o.Connection.prototype.connect_=function(n){var x,a=o.connectionTypes.INPUT_VALUE,c=this.getSourceBlock(),d=n.getSourceBlock();if(n.isConnected()&&n.disconnect(),this.isConnected()){var _=this.getShadowDom(!0);this.shadowDom_=null;var y=this.targetBlock();if(y.isShadow())y.dispose(!1);else{this.disconnect();var R=y}this.shadowDom_=_}o.Events.isEnabled()&&(x=new(o.Events.get(o.Events.BLOCK_MOVE))(d)),o.Connection.connectReciprocally_(this,n),d.setParent(c),x&&(x.recordNew(),o.Events.fire(x)),R&&((d=o.Connection.getConnectionForOrphanedConnection(d,n=this.type===a?R.outputConnection:R.previousConnection))?n.connect(d):n.onFailedConnect(this))},o.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var n=this.targetBlock();n&&n.unplug()}this.disposed=!0},o.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},o.Connection.prototype.isSuperior=function(){return this.type==o.connectionTypes.INPUT_VALUE||this.type==o.connectionTypes.NEXT_STATEMENT},o.Connection.prototype.isConnected=function(){return!!this.targetConnection},o.Connection.prototype.canConnectWithReason=function(n){return o.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,n,!1)},o.Connection.prototype.checkConnection=function(n){o.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var a=this.getConnectionChecker(),c=a.canConnectWithReason(this,n,!1);if(c!=o.Connection.CAN_CONNECT)throw Error(a.getErrorMessage(c,this,n))},o.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},o.Connection.prototype.isConnectionAllowed=function(n){return o.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,n,!0)},o.Connection.prototype.onFailedConnect=function(n){},o.Connection.prototype.connect=function(n){if(this.targetConnection!=n&&this.getConnectionChecker().canConnect(this,n,!1)){var a=o.Events.getGroup();a||o.Events.setGroup(!0),this.isSuperior()?this.connect_(n):n.connect_(this),a||o.Events.setGroup(!1)}},o.Connection.connectReciprocally_=function(n,a){if(!n||!a)throw Error("Cannot connect null connections.");n.targetConnection=a,a.targetConnection=n},o.Connection.getSingleConnection_=function(n,a){for(var y,c=null,d=(a=a.outputConnection).getConnectionChecker(),_=0;y=n.inputList[_];_++)if((y=y.connection)&&d.canConnect(a,y,!1)){if(c)return null;c=y}return c},o.Connection.getConnectionForOrphanedOutput_=function(n,a){for(var c;c=o.Connection.getSingleConnection_(n,a);)if(!(n=c.targetBlock())||n.isShadow())return c;return null},o.Connection.getConnectionForOrphanedConnection=function(n,a){if(a.type===o.connectionTypes.OUTPUT_VALUE)return o.Connection.getConnectionForOrphanedOutput_(n,a.getSourceBlock());n=n.lastConnectionInStack(!0);var c=a.getConnectionChecker();return n&&c.canConnect(a,n,!1)?n:null},o.Connection.prototype.disconnect=function(){var n=this.targetConnection;if(!n)throw Error("Source connection not connected.");if(n.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var a=this.sourceBlock_,c=n.getSourceBlock();n=this}else a=n.getSourceBlock(),c=this.sourceBlock_;var d=o.Events.getGroup();d||o.Events.setGroup(!0),this.disconnectInternal_(a,c),c.isShadow()||n.respawnShadow_(),d||o.Events.setGroup(!1)},o.Connection.prototype.disconnectInternal_=function(n,a){var c;o.Events.isEnabled()&&(c=new(o.Events.get(o.Events.BLOCK_MOVE))(a)),this.targetConnection=this.targetConnection.targetConnection=null,a.setParent(null),c&&(c.recordNew(),o.Events.fire(c))},o.Connection.prototype.respawnShadow_=function(){var n=this.getSourceBlock(),a=this.getShadowDom();if(n.workspace&&a)if((n=o.Xml.domToBlock(a,n.workspace)).outputConnection)this.connect(n.outputConnection);else{if(!n.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(n.previousConnection)}},o.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},o.Connection.prototype.checkType=function(n){return o.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,n,!1)},o.Connection.prototype.checkType_=function(n){return o.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(n)},o.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},o.Connection.prototype.setCheck=function(n){return n?(Array.isArray(n)||(n=[n]),this.check_=n,this.onCheckChanged_()):this.check_=null,this},o.Connection.prototype.getCheck=function(){return this.check_},o.Connection.prototype.setShadowDom=function(n){this.shadowDom_=n,(n=this.targetBlock())?n.isShadow()&&(n.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},o.Connection.prototype.getShadowDom=function(n){return n&&this.targetBlock().isShadow()?o.Xml.blockToDom(this.targetBlock()):this.shadowDom_},o.Connection.prototype.neighbours=function(n){return[]},o.Connection.prototype.getParentInput=function(){for(var n=null,a=this.sourceBlock_.inputList,c=0;c<a.length;c++)if(a[c].connection===this){n=a[c];break}return n},o.Connection.prototype.toString=function(){var n=this.sourceBlock_;if(!n)return"Orphan Connection";if(n.outputConnection==this)var a="Output Connection of ";else if(n.previousConnection==this)a="Previous Connection of ";else if(n.nextConnection==this)a="Next Connection of ";else{a=null;for(var d,c=0;d=n.inputList[c];c++)if(d.connection==this){a=d;break}if(!a)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";a='Input "'+a.name+'" connection on '}return a+n.toDevString()},o.IConnectionChecker=function(){},o.ConnectionChecker=function(){},o.ConnectionChecker.prototype.canConnect=function(n,a,c,d){return this.canConnectWithReason(n,a,c,d)==o.Connection.CAN_CONNECT},o.ConnectionChecker.prototype.canConnectWithReason=function(n,a,c,d){var _=this.doSafetyChecks(n,a);return _!=o.Connection.CAN_CONNECT?_:this.doTypeChecks(n,a)?c&&!this.doDragChecks(n,a,d||0)?o.Connection.REASON_DRAG_CHECKS_FAILED:o.Connection.CAN_CONNECT:o.Connection.REASON_CHECKS_FAILED},o.ConnectionChecker.prototype.getErrorMessage=function(n,a,c){switch(n){case o.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case o.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case o.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case o.Connection.REASON_TARGET_NULL:return"Target connection is null.";case o.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+a+" expected "+a.getCheck()+", found "+c.getCheck();case o.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case o.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},o.ConnectionChecker.prototype.doSafetyChecks=function(n,a){if(!n||!a)return o.Connection.REASON_TARGET_NULL;if(n.isSuperior())var c=n.getSourceBlock(),d=a.getSourceBlock();else d=n.getSourceBlock(),c=a.getSourceBlock();return c==d?o.Connection.REASON_SELF_CONNECTION:a.type!=o.OPPOSITE_TYPE[n.type]?o.Connection.REASON_WRONG_TYPE:c.workspace!==d.workspace?o.Connection.REASON_DIFFERENT_WORKSPACES:c.isShadow()&&!d.isShadow()?o.Connection.REASON_SHADOW_PARENT:o.Connection.CAN_CONNECT},o.ConnectionChecker.prototype.doTypeChecks=function(n,a){if(n=n.getCheck(),a=a.getCheck(),!n||!a)return!0;for(var c=0;c<n.length;c++)if(-1!=a.indexOf(n[c]))return!0;return!1},o.ConnectionChecker.prototype.doDragChecks=function(n,a,c){if(n.distanceFrom(a)>c||a.getSourceBlock().isInsertionMarker())return!1;switch(a.type){case o.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(n,a);case o.connectionTypes.OUTPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isInsertionMarker()||n.isConnected())return!1;break;case o.connectionTypes.INPUT_VALUE:if(a.isConnected()&&!a.targetBlock().isMovable()&&!a.targetBlock().isShadow())return!1;break;case o.connectionTypes.NEXT_STATEMENT:if(a.isConnected()&&!n.getSourceBlock().nextConnection&&!a.targetBlock().isShadow()&&a.targetBlock().nextConnection)return!1;break;default:return!1}return-1==o.draggingConnections.indexOf(a)},o.ConnectionChecker.prototype.canConnectToPrevious_=function(n,a){return!(n.targetConnection||-1!=o.draggingConnections.indexOf(a)||a.targetConnection&&(!(n=a.targetBlock()).isInsertionMarker()||n.getPreviousBlock()))},o.registry.register(o.registry.Type.CONNECTION_CHECKER,o.registry.DEFAULT,o.ConnectionChecker),o.VariableMap=function(n){this.variableMap_=Object.create(null),this.workspace=n},o.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},o.VariableMap.prototype.renameVariable=function(n,a){var c=this.getVariable(a,n.type),d=this.workspace.getAllBlocks(!1);o.Events.setGroup(!0);try{c&&c.getId()!=n.getId()?this.renameVariableWithConflict_(n,a,c,d):this.renameVariableAndUses_(n,a,d)}finally{o.Events.setGroup(!1)}},o.VariableMap.prototype.renameVariableById=function(n,a){var c=this.getVariableById(n);if(!c)throw Error("Tried to rename a variable that didn't exist. ID: "+n);this.renameVariable(c,a)},o.VariableMap.prototype.renameVariableAndUses_=function(n,a,c){for(o.Events.fire(new(o.Events.get(o.Events.VAR_RENAME))(n,a)),n.name=a,a=0;a<c.length;a++)c[a].updateVarName(n)},o.VariableMap.prototype.renameVariableWithConflict_=function(n,a,c,d){var _=n.type;for(a!=c.name&&this.renameVariableAndUses_(c,a,d),a=0;a<d.length;a++)d[a].renameVarById(n.getId(),c.getId());o.Events.fire(new(o.Events.get(o.Events.VAR_DELETE))(n)),n=this.getVariablesOfType(_).indexOf(n),this.variableMap_[_].splice(n,1)},o.VariableMap.prototype.createVariable=function(n,a,c){var d=this.getVariable(n,a);if(d){if(c&&d.getId()!=c)throw Error('Variable "'+n+'" is already in use and its id is "'+d.getId()+'" which conflicts with the passed in id, "'+c+'".');return d}if(c&&this.getVariableById(c))throw Error('Variable id, "'+c+'", is already in use.');return d=c||o.utils.genUid(),d=new o.VariableModel(this.workspace,n,a=a||"",d),(n=this.variableMap_[a]||[]).push(d),delete this.variableMap_[a],this.variableMap_[a]=n,d},o.VariableMap.prototype.deleteVariable=function(n){for(var d,a=this.variableMap_[n.type],c=0;d=a[c];c++)if(d.getId()==n.getId()){a.splice(c,1),o.Events.fire(new(o.Events.get(o.Events.VAR_DELETE))(n));break}},o.VariableMap.prototype.deleteVariableById=function(n){var a=this.getVariableById(n);if(a){var _,c=a.name,d=this.getVariableUsesById(n);for(n=0;_=d[n];n++)if("procedures_defnoreturn"==_.type||"procedures_defreturn"==_.type)return n=_.getFieldValue("NAME"),c=o.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",c).replace("%2",n),void o.alert(c);var y=this;1<d.length?(c=o.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",c),o.confirm(c,function(R){R&&a&&y.deleteVariableInternal(a,d)})):y.deleteVariableInternal(a,d)}else console.warn("Can't delete non-existent variable: "+n)},o.VariableMap.prototype.deleteVariableInternal=function(n,a){var c=o.Events.getGroup();c||o.Events.setGroup(!0);try{for(var d=0;d<a.length;d++)a[d].dispose(!0);this.deleteVariable(n)}finally{c||o.Events.setGroup(!1)}},o.VariableMap.prototype.getVariable=function(n,a){if(a=this.variableMap_[a||""])for(var d,c=0;d=a[c];c++)if(o.Names.equals(d.name,n))return d;return null},o.VariableMap.prototype.getVariableById=function(n){for(var a=Object.keys(this.variableMap_),c=0;c<a.length;c++)for(var y,d=a[c],_=0;y=this.variableMap_[d][_];_++)if(y.getId()==n)return y;return null},o.VariableMap.prototype.getVariablesOfType=function(n){return(n=this.variableMap_[n||""])?n.slice():[]},o.VariableMap.prototype.getVariableTypes=function(n){var a={};o.utils.object.mixin(a,this.variableMap_),n&&n.getPotentialVariableMap()&&o.utils.object.mixin(a,n.getPotentialVariableMap().variableMap_),n=Object.keys(a),a=!1;for(var c=0;c<n.length;c++)""==n[c]&&(a=!0);return a||n.push(""),n},o.VariableMap.prototype.getAllVariables=function(){var a,n=[];for(a in this.variableMap_)n=n.concat(this.variableMap_[a]);return n},o.VariableMap.prototype.getAllVariableNames=function(){var a,n=[];for(a in this.variableMap_)for(var _,c=this.variableMap_[a],d=0;_=c[d];d++)n.push(_.name);return n},o.VariableMap.prototype.getVariableUsesById=function(n){for(var a=[],c=this.workspace.getAllBlocks(!1),d=0;d<c.length;d++){var _=c[d].getVarModels();if(_)for(var y=0;y<_.length;y++)_[y].getId()==n&&a.push(c[d])}return a},o.Workspace=function(n){this.id=o.utils.genUid(),o.Workspace.WorkspaceDB_[this.id]=this,this.options=n||new o.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(o.registry.getClassFromOptions(o.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new o.VariableMap(this),this.potentialVariableMap_=null},o.Workspace.prototype.rendered=!1,o.Workspace.prototype.isClearing=!1,o.Workspace.prototype.MAX_UNDO=1024,o.Workspace.prototype.connectionDBList=null,o.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete o.Workspace.WorkspaceDB_[this.id]},o.Workspace.SCAN_ANGLE=3,o.Workspace.prototype.sortObjects_=function(n,a){return n=n.getRelativeToSurfaceXY(),a=a.getRelativeToSurfaceXY(),n.y+o.Workspace.prototype.sortObjects_.offset*n.x-(a.y+o.Workspace.prototype.sortObjects_.offset*a.x)},o.Workspace.prototype.addTopBlock=function(n){this.topBlocks_.push(n)},o.Workspace.prototype.removeTopBlock=function(n){if(!o.utils.arrayRemove(this.topBlocks_,n))throw Error("Block not present in workspace's list of top-most blocks.")},o.Workspace.prototype.getTopBlocks=function(n){var a=[].concat(this.topBlocks_);return n&&1<a.length&&(this.sortObjects_.offset=Math.sin(o.utils.math.toRadians(o.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),a.sort(this.sortObjects_)),a},o.Workspace.prototype.addTypedBlock=function(n){this.typedBlocksDB_[n.type]||(this.typedBlocksDB_[n.type]=[]),this.typedBlocksDB_[n.type].push(n)},o.Workspace.prototype.removeTypedBlock=function(n){this.typedBlocksDB_[n.type].splice(this.typedBlocksDB_[n.type].indexOf(n),1),this.typedBlocksDB_[n.type].length||delete this.typedBlocksDB_[n.type]},o.Workspace.prototype.getBlocksByType=function(n,a){return this.typedBlocksDB_[n]?(n=this.typedBlocksDB_[n].slice(0),a&&1<n.length&&(this.sortObjects_.offset=Math.sin(o.utils.math.toRadians(o.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),n.sort(this.sortObjects_)),n):[]},o.Workspace.prototype.addTopComment=function(n){this.topComments_.push(n),this.commentDB_[n.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+n.id+'"'),this.commentDB_[n.id]=n},o.Workspace.prototype.removeTopComment=function(n){if(!o.utils.arrayRemove(this.topComments_,n))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[n.id]},o.Workspace.prototype.getTopComments=function(n){var a=[].concat(this.topComments_);return n&&1<a.length&&(this.sortObjects_.offset=Math.sin(o.utils.math.toRadians(o.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),a.sort(this.sortObjects_)),a},o.Workspace.prototype.getAllBlocks=function(n){if(n){n=this.getTopBlocks(!0);for(var a=[],c=0;c<n.length;c++)a.push.apply(a,n[c].getDescendants(!0))}else for(a=this.getTopBlocks(!1),c=0;c<a.length;c++)a.push.apply(a,a[c].getChildren(!1));return a.filter(function(d){return!d.isInsertionMarker()})},o.Workspace.prototype.clear=function(){this.isClearing=!0;try{var n=o.Events.getGroup();for(n||o.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);n||o.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},o.Workspace.prototype.renameVariableById=function(n,a){this.variableMap_.renameVariableById(n,a)},o.Workspace.prototype.createVariable=function(n,a,c){return this.variableMap_.createVariable(n,a,c)},o.Workspace.prototype.getVariableUsesById=function(n){return this.variableMap_.getVariableUsesById(n)},o.Workspace.prototype.deleteVariableById=function(n){this.variableMap_.deleteVariableById(n)},o.Workspace.prototype.getVariable=function(n,a){return this.variableMap_.getVariable(n,a)},o.Workspace.prototype.getVariableById=function(n){return this.variableMap_.getVariableById(n)},o.Workspace.prototype.getVariablesOfType=function(n){return this.variableMap_.getVariablesOfType(n)},o.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},o.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},o.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},o.Workspace.prototype.getWidth=function(){return 0},o.Workspace.prototype.newBlock=function(n,a){return new o.Block(this,n,a)},o.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},o.Workspace.prototype.remainingCapacityOfType=function(n){return this.options.maxInstances?(void 0!==this.options.maxInstances[n]?this.options.maxInstances[n]:1/0)-this.getBlocksByType(n,!1).length:1/0},o.Workspace.prototype.isCapacityAvailable=function(n){if(!this.hasBlockLimits())return!0;var c,a=0;for(c in n){if(n[c]>this.remainingCapacityOfType(c))return!1;a+=n[c]}return!(a>this.remainingCapacity())},o.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},o.Workspace.prototype.getUndoStack=function(){return this.undoStack_},o.Workspace.prototype.getRedoStack=function(){return this.redoStack_},o.Workspace.prototype.undo=function(n){var a=n?this.redoStack_:this.undoStack_,c=n?this.undoStack_:this.redoStack_,d=a.pop();if(d){for(var _=[d];a.length&&d.group&&d.group==a[a.length-1].group;)_.push(a.pop());for(a=0;d=_[a];a++)c.push(d);_=o.Events.filter(_,n),o.Events.recordUndo=!1;try{for(a=0;d=_[a];a++)d.run(n)}finally{o.Events.recordUndo=!0}}},o.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,o.Events.clearPendingUndo()},o.Workspace.prototype.addChangeListener=function(n){return this.listeners_.push(n),n},o.Workspace.prototype.removeChangeListener=function(n){o.utils.arrayRemove(this.listeners_,n)},o.Workspace.prototype.fireChangeListener=function(n){if(n.recordUndo)for(this.undoStack_.push(n),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var c,a=0;c=this.listeners_[a];a++)c(n)},o.Workspace.prototype.getBlockById=function(n){return this.blockDB_[n]||null},o.Workspace.prototype.setBlockById=function(n,a){this.blockDB_[n]=a},o.Workspace.prototype.removeBlockById=function(n){delete this.blockDB_[n]},o.Workspace.prototype.getCommentById=function(n){return this.commentDB_[n]||null},o.Workspace.prototype.allInputsFilled=function(n){for(var d,a=this.getTopBlocks(!1),c=0;d=a[c];c++)if(!d.allInputsFilled(n))return!1;return!0},o.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},o.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new o.VariableMap(this)},o.Workspace.prototype.getVariableMap=function(){return this.variableMap_},o.Workspace.prototype.setVariableMap=function(n){this.variableMap_=n},o.Workspace.WorkspaceDB_=Object.create(null),o.Workspace.getById=function(n){return o.Workspace.WorkspaceDB_[n]||null},o.Workspace.getAll=function(){var a,n=[];for(a in o.Workspace.WorkspaceDB_)n.push(o.Workspace.WorkspaceDB_[a]);return n},o.WorkspaceDragSurfaceSvg=function(n){this.container_=n,this.createDom()},o.WorkspaceDragSurfaceSvg.prototype.SVG_=null,o.WorkspaceDragSurfaceSvg.prototype.container_=null,o.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=o.utils.dom.createSvgElement(o.utils.Svg.SVG,{xmlns:o.utils.dom.SVG_NS,"xmlns:html":o.utils.dom.HTML_NS,"xmlns:xlink":o.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},o.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(n,a){n=n.toFixed(0),a=a.toFixed(0),this.SVG_.style.display="block",o.utils.dom.setCssTransform(this.SVG_,"translate3d("+n+"px, "+a+"px, 0px)")},o.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return o.utils.getRelativeXY(this.SVG_)},o.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(n){if(!n)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var a=this.SVG_.childNodes[0],c=this.SVG_.childNodes[1];if(!(a&&c&&o.utils.dom.hasClass(a,"blocklyBlockCanvas")&&o.utils.dom.hasClass(c,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?o.utils.dom.insertAfter(a,this.previousSibling_):n.insertBefore(a,n.firstChild),o.utils.dom.insertAfter(c,a),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");o.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},o.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(n,a,c,d,_,y){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=c,n.setAttribute("transform","translate(0, 0) scale("+y+")"),a.setAttribute("transform","translate(0, 0) scale("+y+")"),this.SVG_.setAttribute("width",d),this.SVG_.setAttribute("height",_),this.SVG_.appendChild(n),this.SVG_.appendChild(a),this.SVG_.style.display="block"},o.blockRendering={},o.blockRendering.useDebugger=!1,o.blockRendering.register=function(n,a){o.registry.register(o.registry.Type.RENDERER,n,a)},o.blockRendering.unregister=function(n){o.registry.unregister(o.registry.Type.RENDERER,n)},o.blockRendering.startDebugger=function(){o.blockRendering.useDebugger=!0},o.blockRendering.stopDebugger=function(){o.blockRendering.useDebugger=!1},o.blockRendering.init=function(n,a,c){return(n=new(o.registry.getClass(o.registry.Type.RENDERER,n))(n)).init(a,c),n},o.ASTNode=function(n,a,c){if(!a)throw Error("Cannot create a node without a location.");this.type_=n,this.isConnection_=o.ASTNode.isConnectionType_(n),this.location_=a,this.wsCoordinate_=null,this.processParams_(c||null)},o.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},o.ASTNode.NAVIGATE_ALL_FIELDS=!1,o.ASTNode.DEFAULT_OFFSET_Y=-20,o.ASTNode.isConnectionType_=function(n){switch(n){case o.ASTNode.types.PREVIOUS:case o.ASTNode.types.NEXT:case o.ASTNode.types.INPUT:case o.ASTNode.types.OUTPUT:return!0}return!1},o.ASTNode.createFieldNode=function(n){return n?new o.ASTNode(o.ASTNode.types.FIELD,n):null},o.ASTNode.createConnectionNode=function(n){if(!n)return null;var a=n.type;return a==o.connectionTypes.INPUT_VALUE||a==o.connectionTypes.NEXT_STATEMENT&&n.getParentInput()?o.ASTNode.createInputNode(n.getParentInput()):a==o.connectionTypes.NEXT_STATEMENT?new o.ASTNode(o.ASTNode.types.NEXT,n):a==o.connectionTypes.OUTPUT_VALUE?new o.ASTNode(o.ASTNode.types.OUTPUT,n):a==o.connectionTypes.PREVIOUS_STATEMENT?new o.ASTNode(o.ASTNode.types.PREVIOUS,n):null},o.ASTNode.createInputNode=function(n){return n&&n.connection?new o.ASTNode(o.ASTNode.types.INPUT,n.connection):null},o.ASTNode.createBlockNode=function(n){return n?new o.ASTNode(o.ASTNode.types.BLOCK,n):null},o.ASTNode.createStackNode=function(n){return n?new o.ASTNode(o.ASTNode.types.STACK,n):null},o.ASTNode.createWorkspaceNode=function(n,a){return a&&n?new o.ASTNode(o.ASTNode.types.WORKSPACE,n,{wsCoordinate:a}):null},o.ASTNode.createTopNode=function(n){var a=n.previousConnection||n.outputConnection;return a?o.ASTNode.createConnectionNode(a):o.ASTNode.createBlockNode(n)},o.ASTNode.prototype.processParams_=function(n){n&&n.wsCoordinate&&(this.wsCoordinate_=n.wsCoordinate)},o.ASTNode.prototype.getLocation=function(){return this.location_},o.ASTNode.prototype.getType=function(){return this.type_},o.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},o.ASTNode.prototype.isConnection=function(){return this.isConnection_},o.ASTNode.prototype.findNextForInput_=function(){var c,n=this.location_.getParentInput(),a=n.getSourceBlock();for(n=a.inputList.indexOf(n)+1;c=a.inputList[n];n++){for(var y,d=c.fieldRow,_=0;y=d[_];_++)if(y.isClickable()||o.ASTNode.NAVIGATE_ALL_FIELDS)return o.ASTNode.createFieldNode(y);if(c.connection)return o.ASTNode.createInputNode(c)}return null},o.ASTNode.prototype.findNextForField_=function(){var n=this.location_,a=n.getParentInput(),c=n.getSourceBlock(),d=c.inputList.indexOf(a);for(n=a.fieldRow.indexOf(n)+1;a=c.inputList[d];d++){for(var _=a.fieldRow;n<_.length;){if(_[n].isClickable()||o.ASTNode.NAVIGATE_ALL_FIELDS)return o.ASTNode.createFieldNode(_[n]);n++}if(n=0,a.connection)return o.ASTNode.createInputNode(a)}return null},o.ASTNode.prototype.findPrevForInput_=function(){for(var d,n=this.location_.getParentInput(),a=n.getSourceBlock(),c=a.inputList.indexOf(n);d=a.inputList[c];c--){if(d.connection&&d!==n)return o.ASTNode.createInputNode(d);for(var y,_=(d=d.fieldRow).length-1;y=d[_];_--)if(y.isClickable()||o.ASTNode.NAVIGATE_ALL_FIELDS)return o.ASTNode.createFieldNode(y)}return null},o.ASTNode.prototype.findPrevForField_=function(){var _,n=this.location_,a=n.getParentInput(),c=n.getSourceBlock(),d=c.inputList.indexOf(a);for(n=a.fieldRow.indexOf(n)-1;_=c.inputList[d];d--){if(_.connection&&_!==a)return o.ASTNode.createInputNode(_);for(_=_.fieldRow;-1<n;){if(_[n].isClickable()||o.ASTNode.NAVIGATE_ALL_FIELDS)return o.ASTNode.createFieldNode(_[n]);n--}0<=d-1&&(n=c.inputList[d-1].fieldRow.length-1)}return null},o.ASTNode.prototype.navigateBetweenStacks_=function(n){var a=this.getLocation();if(a instanceof o.Block||(a=a.getSourceBlock()),!a||!a.workspace)return null;var c=a.getRootBlock();a=c.workspace.getTopBlocks(!0);for(var _,d=0;_=a[d];d++)if(c.id==_.id)return-1==(n=d+(n?1:-1))||n==a.length?null:o.ASTNode.createStackNode(a[n]);throw Error("Couldn't find "+(n?"next":"previous")+" stack?!")},o.ASTNode.prototype.findTopASTNodeForBlock_=function(n){var a=n.previousConnection||n.outputConnection;return a?o.ASTNode.createConnectionNode(a):o.ASTNode.createBlockNode(n)},o.ASTNode.prototype.getOutAstNodeForBlock_=function(n){if(!n)return null;var a=(n=n.getTopStackBlock()).previousConnection||n.outputConnection;return a&&a.targetConnection&&a.targetConnection.getParentInput()?o.ASTNode.createInputNode(a.targetConnection.getParentInput()):o.ASTNode.createStackNode(n)},o.ASTNode.prototype.findFirstFieldOrInput_=function(n){n=n.inputList;for(var c,a=0;c=n[a];a++){for(var y,d=c.fieldRow,_=0;y=d[_];_++)if(y.isClickable()||o.ASTNode.NAVIGATE_ALL_FIELDS)return o.ASTNode.createFieldNode(y);if(c.connection)return o.ASTNode.createInputNode(c)}return null},o.ASTNode.prototype.getSourceBlock=function(){return this.getType()===o.ASTNode.types.BLOCK||this.getType()===o.ASTNode.types.STACK?this.getLocation():this.getType()===o.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},o.ASTNode.prototype.next=function(){switch(this.type_){case o.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case o.ASTNode.types.OUTPUT:var n=this.location_;return o.ASTNode.createBlockNode(n.getSourceBlock());case o.ASTNode.types.FIELD:return this.findNextForField_();case o.ASTNode.types.INPUT:return this.findNextForInput_();case o.ASTNode.types.BLOCK:return o.ASTNode.createConnectionNode(this.location_.nextConnection);case o.ASTNode.types.PREVIOUS:return o.ASTNode.createBlockNode((n=this.location_).getSourceBlock());case o.ASTNode.types.NEXT:return o.ASTNode.createConnectionNode((n=this.location_).targetConnection)}return null},o.ASTNode.prototype.in=function(){switch(this.type_){case o.ASTNode.types.WORKSPACE:var n=this.location_.getTopBlocks(!0);if(0<n.length)return o.ASTNode.createStackNode(n[0]);break;case o.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(n=this.location_);case o.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(n=this.location_);case o.ASTNode.types.INPUT:return o.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},o.ASTNode.prototype.prev=function(){switch(this.type_){case o.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case o.ASTNode.types.FIELD:return this.findPrevForField_();case o.ASTNode.types.INPUT:return this.findPrevForInput_();case o.ASTNode.types.BLOCK:var n=this.location_;return o.ASTNode.createConnectionNode(n.previousConnection||n.outputConnection);case o.ASTNode.types.PREVIOUS:if((n=(n=this.location_).targetConnection)&&!n.getParentInput())return o.ASTNode.createConnectionNode(n);break;case o.ASTNode.types.NEXT:return o.ASTNode.createBlockNode((n=this.location_).getSourceBlock())}return null},o.ASTNode.prototype.out=function(){switch(this.type_){case o.ASTNode.types.STACK:var n=this.location_,a=n.getRelativeToSurfaceXY();return a=new o.utils.Coordinate(a.x,a.y+o.ASTNode.DEFAULT_OFFSET_Y),o.ASTNode.createWorkspaceNode(n.workspace,a);case o.ASTNode.types.OUTPUT:return(a=(n=this.location_).targetConnection)?o.ASTNode.createConnectionNode(a):o.ASTNode.createStackNode(n.getSourceBlock());case o.ASTNode.types.FIELD:return o.ASTNode.createBlockNode(this.location_.getSourceBlock());case o.ASTNode.types.INPUT:return o.ASTNode.createBlockNode((n=this.location_).getSourceBlock());case o.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(n=this.location_);case o.ASTNode.types.PREVIOUS:case o.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((n=this.location_).getSourceBlock())}return null},o.Blocks=Object.create(null),o.Extensions={},o.Extensions.ALL_=Object.create(null),o.Extensions.register=function(n,a){if("string"!=typeof n||""==n.trim())throw Error('Error: Invalid extension name "'+n+'"');if(o.Extensions.ALL_[n])throw Error('Error: Extension "'+n+'" is already registered.');if("function"!=typeof a)throw Error('Error: Extension "'+n+'" must be a function');o.Extensions.ALL_[n]=a},o.Extensions.registerMixin=function(n,a){if(!a||"object"!=typeof a)throw Error('Error: Mixin "'+n+'" must be a object');o.Extensions.register(n,function(){this.mixin(a)})},o.Extensions.registerMutator=function(n,a,c,d){var _='Error when registering mutator "'+n+'": ';o.Extensions.checkHasFunction_(_,a.domToMutation,"domToMutation"),o.Extensions.checkHasFunction_(_,a.mutationToDom,"mutationToDom");var y=o.Extensions.checkMutatorDialog_(a,_);if(c&&"function"!=typeof c)throw Error('Extension "'+n+'" is not a function');o.Extensions.register(n,function(){if(y){if(!o.Mutator)throw Error(_+"Missing require for Blockly.Mutator");this.setMutator(new o.Mutator(d||[]))}this.mixin(a),c&&c.apply(this)})},o.Extensions.unregister=function(n){o.Extensions.ALL_[n]?delete o.Extensions.ALL_[n]:console.warn('No extension mapping for name "'+n+'" found to unregister')},o.Extensions.apply=function(n,a,c){var d=o.Extensions.ALL_[n];if("function"!=typeof d)throw Error('Error: Extension "'+n+'" not found.');if(c)o.Extensions.checkNoMutatorProperties_(n,a);else var _=o.Extensions.getMutatorProperties_(a);if(d.apply(a),c)o.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+n+'": ',a);else if(!o.Extensions.mutatorPropertiesMatch_(_,a))throw Error('Error when applying extension "'+n+'": mutation properties changed when applying a non-mutator extension.')},o.Extensions.checkHasFunction_=function(n,a,c){if(!a)throw Error(n+'missing required property "'+c+'"');if("function"!=typeof a)throw Error(n+'" required property "'+c+'" must be a function')},o.Extensions.checkNoMutatorProperties_=function(n,a){if(o.Extensions.getMutatorProperties_(a).length)throw Error('Error: tried to apply mutation "'+n+'" to a block that already has mutator functions.  Block id: '+a.id)},o.Extensions.checkMutatorDialog_=function(n,a){var c=void 0!==n.compose,d=void 0!==n.decompose;if(c&&d){if("function"!=typeof n.compose)throw Error(a+"compose must be a function.");if("function"!=typeof n.decompose)throw Error(a+"decompose must be a function.");return!0}if(!c&&!d)return!1;throw Error(a+'Must have both or neither of "compose" and "decompose"')},o.Extensions.checkBlockHasMutatorProperties_=function(n,a){if("function"!=typeof a.domToMutation)throw Error(n+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof a.mutationToDom)throw Error(n+'Applying a mutator didn\'t add "mutationToDom"');o.Extensions.checkMutatorDialog_(a,n)},o.Extensions.getMutatorProperties_=function(n){var a=[];return void 0!==n.domToMutation&&a.push(n.domToMutation),void 0!==n.mutationToDom&&a.push(n.mutationToDom),void 0!==n.compose&&a.push(n.compose),void 0!==n.decompose&&a.push(n.decompose),a},o.Extensions.mutatorPropertiesMatch_=function(n,a){if((a=o.Extensions.getMutatorProperties_(a)).length!=n.length)return!1;for(var c=0;c<a.length;c++)if(n[c]!=a[c])return!1;return!0},o.Extensions.buildTooltipForDropdown=function(n,a){var c=[];return"object"==typeof document&&o.utils.runAfterPageLoad(function(){for(var d in a)o.utils.checkMessageReferences(a[d])}),function(){this.type&&-1==c.indexOf(this.type)&&(o.Extensions.checkDropdownOptionsInTable_(this,n,a),c.push(this.type)),this.setTooltip(function(){var d=String(this.getFieldValue(n)),_=a[d];return null==_?-1==c.indexOf(this.type)&&(d="No tooltip mapping for value "+d+" of field "+n,null!=this.type&&(d+=" of block type "+this.type),console.warn(d+".")):_=o.utils.replaceMessageReferences(_),_}.bind(this))}},o.Extensions.checkDropdownOptionsInTable_=function(n,a,c){var d=n.getField(a);if(!d.isOptionListDynamic()){d=d.getOptions();for(var _=0;_<d.length;++_){var y=d[_][1];null==c[y]&&console.warn("No tooltip mapping for value "+y+" of field "+a+" of block type "+n.type)}}},o.Extensions.buildTooltipWithFieldText=function(n,a){return"object"==typeof document&&o.utils.runAfterPageLoad(function(){o.utils.checkMessageReferences(n)}),function(){this.setTooltip(function(){var c=this.getField(a);return o.utils.replaceMessageReferences(n).replace("%1",c?c.getText():"")}.bind(this))}},o.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var n=this.getParent();return n&&n.getInputsInline()&&n.tooltip||this.tooltipWhenNotConnected_}.bind(this))},o.Extensions.register("parent_tooltip_when_inline",o.Extensions.extensionParentTooltip_),o.fieldRegistry={},o.fieldRegistry.register=function(n,a){o.registry.register(o.registry.Type.FIELD,n,a)},o.fieldRegistry.unregister=function(n){o.registry.unregister(o.registry.Type.FIELD,n)},o.fieldRegistry.fromJson=function(n){var a=o.registry.getObject(o.registry.Type.FIELD,n.type);return a?a.fromJson(n):(console.warn("Blockly could not create a field of type "+n.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},o.IDeletable=function(){},o.blockAnimations={},o.blockAnimations.disconnectPid_=0,o.blockAnimations.disconnectGroup_=null,o.blockAnimations.disposeUiEffect=function(n){var a=n.workspace,c=n.getSvgRoot();a.getAudioManager().play("delete"),n=a.getSvgXY(c),(c=c.cloneNode(!0)).translateX_=n.x,c.translateY_=n.y,c.setAttribute("transform","translate("+n.x+","+n.y+")"),a.getParentSvg().appendChild(c),c.bBox_=c.getBBox(),o.blockAnimations.disposeUiStep_(c,a.RTL,new Date,a.scale)},o.blockAnimations.disposeUiStep_=function(n,a,c,d){var _=(new Date-c)/150;1<_?o.utils.dom.removeNode(n):(n.setAttribute("transform","translate("+(n.translateX_+(a?-1:1)*n.bBox_.width*d/2*_)+","+(n.translateY_+n.bBox_.height*d*_)+") scale("+(1-_)*d+")"),setTimeout(o.blockAnimations.disposeUiStep_,10,n,a,c,d))},o.blockAnimations.connectionUiEffect=function(n){var a=n.workspace,c=a.scale;if(a.getAudioManager().play("click"),!(1>c)){var d=a.getSvgXY(n.getSvgRoot());n.outputConnection?(d.x+=(n.RTL?3:-3)*c,d.y+=13*c):n.previousConnection&&(d.x+=(n.RTL?-23:23)*c,d.y+=3*c),n=o.utils.dom.createSvgElement(o.utils.Svg.CIRCLE,{cx:d.x,cy:d.y,r:0,fill:"none",stroke:"#888","stroke-width":10},a.getParentSvg()),o.blockAnimations.connectionUiStep_(n,new Date,c)}},o.blockAnimations.connectionUiStep_=function(n,a,c){var d=(new Date-a)/150;1<d?o.utils.dom.removeNode(n):(n.setAttribute("r",25*d*c),n.style.opacity=1-d,o.blockAnimations.disconnectPid_=setTimeout(o.blockAnimations.connectionUiStep_,10,n,a,c))},o.blockAnimations.disconnectUiEffect=function(n){if(n.workspace.getAudioManager().play("disconnect"),!(1>n.workspace.scale)){var a=n.getHeightWidth().height;a=Math.atan(10/a)/Math.PI*180,n.RTL||(a*=-1),o.blockAnimations.disconnectUiStep_(n.getSvgRoot(),a,new Date)}},o.blockAnimations.disconnectUiStep_=function(n,a,c){var d=(new Date-c)/200;1<d?n.skew_="":(n.skew_="skewX("+Math.round(Math.sin(d*Math.PI*3)*(1-d)*a)+")",o.blockAnimations.disconnectGroup_=n,o.blockAnimations.disconnectPid_=setTimeout(o.blockAnimations.disconnectUiStep_,10,n,a,c)),n.setAttribute("transform",n.translate_+n.skew_)},o.blockAnimations.disconnectUiStop=function(){if(o.blockAnimations.disconnectGroup_){clearTimeout(o.blockAnimations.disconnectPid_);var n=o.blockAnimations.disconnectGroup_;n.skew_="",n.setAttribute("transform",n.translate_),o.blockAnimations.disconnectGroup_=null}},o.Events.BlockDrag=function(n,a,c){o.Events.BlockDrag.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.isStart=a,this.blocks=c},o.utils.object.inherits(o.Events.BlockDrag,o.Events.UiBase),o.Events.BlockDrag.prototype.type=o.Events.BLOCK_DRAG,o.Events.BlockDrag.prototype.toJson=function(){var n=o.Events.BlockDrag.superClass_.toJson.call(this);return n.isStart=this.isStart,n.blockId=this.blockId,n.blocks=this.blocks,n},o.Events.BlockDrag.prototype.fromJson=function(n){o.Events.BlockDrag.superClass_.fromJson.call(this,n),this.isStart=n.isStart,this.blockId=n.blockId,this.blocks=n.blocks},o.registry.register(o.registry.Type.EVENT,o.Events.BLOCK_DRAG,o.Events.BlockDrag),o.IBlockDragger=function(){},o.InsertionMarkerManager=function(n){this.topBlock_=o.selected=n,this.workspace_=n.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},o.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},o.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",o.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,o.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{o.Events.enable()}},o.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},o.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},o.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},o.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(o.Events.disable(),this.hidePreview_(),o.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var n=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;o.blockAnimations.connectionUiEffect(n.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},o.InsertionMarkerManager.prototype.update=function(n,a){var c=this.getCandidate_(n);((this.wouldDeleteBlock_=this.shouldDelete_(c,a))||this.shouldUpdatePreviews_(c,n))&&(o.Events.disable(),this.maybeHidePreview_(c),this.maybeShowPreview_(c),o.Events.enable())},o.InsertionMarkerManager.prototype.createMarkerBlock_=function(n){var a=n.type;o.Events.disable();try{var c=this.workspace_.newBlock(a);if(c.setInsertionMarker(!0),n.mutationToDom){var d=n.mutationToDom();d&&c.domToMutation(d)}for(a=0;a<n.inputList.length;a++){var _=n.inputList[a];if(_.name!=o.constants.COLLAPSED_INPUT_NAME){var y=c.inputList[a];if(!y)throw Error(o.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(d=0;d<_.fieldRow.length;d++){var R=_.fieldRow[d],x=y.fieldRow[d];if(!x)throw Error(o.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));x.setValue(R.getValue())}}}c.setCollapsed(n.isCollapsed()),c.setInputsInline(n.getInputsInline()),c.initSvg(),c.getSvgRoot().setAttribute("visibility","hidden")}finally{o.Events.enable()}return c},o.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var n=this.topBlock_.getConnections_(!1),a=this.topBlock_.lastConnectionInStack(!0);if(a&&a!=this.topBlock_.nextConnection){if(n.push(a),this.lastOnStack_=a,this.lastMarker_){o.Events.disable();try{this.lastMarker_.dispose()}finally{o.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(a.getSourceBlock())}return n},o.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(n,a){var c=n.local,d=n.closest;return n=n.radius,c&&d?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==d&&this.localConnection_==c||(c=this.localConnection_.x+a.x-this.closestConnection_.x,a=this.localConnection_.y+a.y-this.closestConnection_.y,a=Math.sqrt(c*c+a*a),d&&n>a-o.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},o.InsertionMarkerManager.prototype.getCandidate_=function(n){for(var a=this.getStartRadius_(),c=null,d=null,_=0;_<this.availableConnections_.length;_++){var y=this.availableConnections_[_],R=y.closest(a,n);R.connection&&(c=R.connection,d=y,a=R.radius)}return{closest:c,local:d,radius:a}},o.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?o.CONNECTING_SNAP_RADIUS:o.SNAP_RADIUS},o.InsertionMarkerManager.prototype.shouldDelete_=function(n,a){return!(!a||!this.workspace_.getComponentManager().hasCapability(a.id,o.ComponentManager.Capability.DELETE_AREA))&&a.wouldDelete(this.topBlock_,n&&!!n.closest)},o.InsertionMarkerManager.prototype.maybeShowPreview_=function(n){if(!this.wouldDeleteBlock_){var a=n.closest;n=n.local,a&&(a==this.closestConnection_||a.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=a,this.localConnection_=n,this.showPreview_()))}},o.InsertionMarkerManager.prototype.showPreview_=function(){var n=this.closestConnection_,a=this.workspace_.getRenderer();switch(a.getConnectionPreviewMethod(n,this.localConnection_,this.topBlock_)){case o.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case o.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case o.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}n&&a.shouldHighlightConnection(n)&&n.highlight()},o.InsertionMarkerManager.prototype.maybeHidePreview_=function(n){if(n.closest){var a=this.closestConnection_!=n.closest;n=this.localConnection_!=n.local,this.closestConnection_&&this.localConnection_&&(a||n||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},o.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},o.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var n=this.localConnection_,a=this.closestConnection_,c=this.lastOnStack_&&n==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((n=c.getMatchingConnection(n.getSourceBlock(),n))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");c.render(),c.rendered=!0,c.getSvgRoot().setAttribute("visibility","visible"),n&&a&&c.positionNearConnection(n,a),a&&n.connect(a),this.markerConnection_=n},o.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var n=this.markerConnection_,a=n.getSourceBlock(),c=a.nextConnection,d=a.previousConnection,_=a.outputConnection;if(_=n.type==o.connectionTypes.INPUT_VALUE&&!(_&&_.targetConnection),!(n!=c||d&&d.targetConnection)||_?n.targetBlock().unplug(!1):n.type==o.connectionTypes.NEXT_STATEMENT&&n!=c?((c=n.targetConnection).getSourceBlock().unplug(!1),d=d?d.targetConnection:null,a.unplug(!0),d&&d.connect(c)):a.unplug(!0),n.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(n=a.getSvgRoot())&&n.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},o.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var n=this.closestConnection_;this.highlightedBlock_=n.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(n,!0)},o.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},o.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},o.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},o.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var n=[];return this.firstMarker_&&n.push(this.firstMarker_),this.lastMarker_&&n.push(this.lastMarker_),n},o.BlockDragger=function(n,a){this.draggingBlock_=n,this.workspace_=a,this.draggedConnectionManager_=new o.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=o.BlockDragger.initIconData_(n)},o.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},o.BlockDragger.initIconData_=function(n){var a=[];n=n.getDescendants(!1);for(var d,c=0;d=n[c];c++){d=d.getIcons();for(var _=0;_<d.length;_++){var y={location:d[_].getIconLocation(),icon:d[_]};a.push(y)}}return a},o.BlockDragger.prototype.startDrag=function(n,a){o.Events.getGroup()||o.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),o.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),o.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(a)&&this.disconnectBlock_(a,n),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},o.BlockDragger.prototype.shouldDisconnect_=function(n){return!!(this.draggingBlock_.getParent()||n&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},o.BlockDragger.prototype.disconnectBlock_=function(n,a){this.draggingBlock_.unplug(n),n=this.pixelsToWorkspaceUnits_(a),n=o.utils.Coordinate.sum(this.startXY_,n),this.draggingBlock_.translate(n.x,n.y),o.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},o.BlockDragger.prototype.fireDragStartEvent_=function(){var n=new(o.Events.get(o.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));o.Events.fire(n)},o.BlockDragger.prototype.drag=function(n,a){a=this.pixelsToWorkspaceUnits_(a);var c=o.utils.Coordinate.sum(this.startXY_,a);this.draggingBlock_.moveDuringDrag(c),this.dragIcons_(a),c=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(n),this.draggedConnectionManager_.update(a,this.dragTarget_),n=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),n!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==c&&(c&&c.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},o.BlockDragger.prototype.endDrag=function(n,a){if(this.drag(n,a),this.dragIconData_=[],this.fireDragEndEvent_(),o.utils.dom.stopTextWidthCache(),o.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))n=this.startXY_;else{var c=(n=this.getNewLocationAfterDrag_(a)).delta;n=n.newLocation}this.draggingBlock_.moveOffDragSurface(n),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),c?this.updateBlockAfterMove_(c):o.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),o.Events.setGroup(!1)},o.BlockDragger.prototype.getNewLocationAfterDrag_=function(n){var a={};return a.delta=this.pixelsToWorkspaceUnits_(n),a.newLocation=o.utils.Coordinate.sum(this.startXY_,a.delta),a},o.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),o.draggingConnections=[],!0)},o.BlockDragger.prototype.updateBlockAfterMove_=function(n){this.draggingBlock_.moveConnections(n.x,n.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},o.BlockDragger.prototype.fireDragEndEvent_=function(){var n=new(o.Events.get(o.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));o.Events.fire(n)},o.BlockDragger.prototype.updateToolboxStyle_=function(n){var a=this.workspace_.getToolbox();if(a){var c=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";n&&"function"==typeof a.removeStyle?a.removeStyle(c):n||"function"!=typeof a.addStyle||a.addStyle(c)}},o.BlockDragger.prototype.fireMoveEvent_=function(){var n=new(o.Events.get(o.Events.BLOCK_MOVE))(this.draggingBlock_);n.oldCoordinate=this.startXY_,n.recordNew(),o.Events.fire(n)},o.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},o.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(n){return n=new o.utils.Coordinate(n.x/this.workspace_.scale,n.y/this.workspace_.scale),this.workspace_.isMutator&&n.scale(1/this.workspace_.options.parentWorkspace.scale),n},o.BlockDragger.prototype.dragIcons_=function(n){for(var a=0;a<this.dragIconData_.length;a++){var c=this.dragIconData_[a];c.icon.setIconLocation(o.utils.Coordinate.sum(c.location,n))}},o.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},o.registry.register(o.registry.Type.BLOCK_DRAGGER,o.registry.DEFAULT,o.BlockDragger),o.IContextMenu=function(){},o.IDraggable=function(){},o.IBubble=function(){},o.Bubble=function(n,a,c,d,_,y){this.workspace_=n,this.content_=a,this.shape_=c,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,c=o.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(c=-c),this.arrow_radians_=o.utils.math.toRadians(c),n.getBubbleCanvas().appendChild(this.createDom_(a,!(!_||!y))),this.setAnchorLocation(d),_&&y||(_=(n=this.content_.getBBox()).width+2*o.Bubble.BORDER_WIDTH,y=n.height+2*o.Bubble.BORDER_WIDTH),this.setBubbleSize(_,y),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},o.Bubble.BORDER_WIDTH=6,o.Bubble.ARROW_THICKNESS=5,o.Bubble.ARROW_ANGLE=20,o.Bubble.ARROW_BEND=4,o.Bubble.ANCHOR_RADIUS=8,o.Bubble.onMouseUpWrapper_=null,o.Bubble.onMouseMoveWrapper_=null,o.Bubble.unbindDragEvents_=function(){o.Bubble.onMouseUpWrapper_&&(o.browserEvents.unbind(o.Bubble.onMouseUpWrapper_),o.Bubble.onMouseUpWrapper_=null),o.Bubble.onMouseMoveWrapper_&&(o.browserEvents.unbind(o.Bubble.onMouseMoveWrapper_),o.Bubble.onMouseMoveWrapper_=null)},o.Bubble.bubbleMouseUp_=function(n){o.Touch.clearTouchIdentifier(),o.Bubble.unbindDragEvents_()},o.Bubble.prototype.rendered_=!1,o.Bubble.prototype.anchorXY_=null,o.Bubble.prototype.relativeLeft_=0,o.Bubble.prototype.relativeTop_=0,o.Bubble.prototype.width_=0,o.Bubble.prototype.height_=0,o.Bubble.prototype.autoLayout_=!0,o.Bubble.prototype.createDom_=function(n,a){this.bubbleGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{},null);var c={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return o.utils.userAgent.JAVA_FX&&(c={}),c=o.utils.dom.createSvgElement(o.utils.Svg.G,c,this.bubbleGroup_),this.bubbleArrow_=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{},c),this.bubbleBack_=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:o.Bubble.BORDER_WIDTH,ry:o.Bubble.BORDER_WIDTH},c),a?(this.resizeGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),o.utils.dom.createSvgElement(o.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(a=2*o.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),o.utils.dom.createSvgElement(o.utils.Svg.LINE,{class:"blocklyResizeLine",x1:a/3,y1:a-1,x2:a-1,y2:a/3},this.resizeGroup_),o.utils.dom.createSvgElement(o.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*a/3,y1:a-1,x2:a-1,y2:2*a/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=o.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=o.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(n),this.bubbleGroup_},o.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},o.Bubble.prototype.setSvgId=function(n){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=n)},o.Bubble.prototype.bubbleMouseDown_=function(n){var a=this.workspace_.getGesture(n);a&&a.handleBubbleStart(n,this)},o.Bubble.prototype.showContextMenu=function(n){},o.Bubble.prototype.isDeletable=function(){return!1},o.Bubble.prototype.setDeleteStyle=function(n){},o.Bubble.prototype.resizeMouseDown_=function(n){this.promote(),o.Bubble.unbindDragEvents_(),o.utils.isRightButton(n)||(this.workspace_.startDrag(n,new o.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),o.Bubble.onMouseUpWrapper_=o.browserEvents.conditionalBind(document,"mouseup",this,o.Bubble.bubbleMouseUp_),o.Bubble.onMouseMoveWrapper_=o.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),o.hideChaff()),n.stopPropagation()},o.Bubble.prototype.resizeMouseMove_=function(n){this.autoLayout_=!1,n=this.workspace_.moveDrag(n),this.setBubbleSize(this.workspace_.RTL?-n.x:n.x,n.y),this.workspace_.RTL&&this.positionBubble_()},o.Bubble.prototype.registerResizeEvent=function(n){this.resizeCallback_=n},o.Bubble.prototype.registerMoveEvent=function(n){this.moveCallback_=n},o.Bubble.prototype.promote=function(){var n=this.bubbleGroup_.parentNode;return n.lastChild!==this.bubbleGroup_&&(n.appendChild(this.bubbleGroup_),!0)},o.Bubble.prototype.setAnchorLocation=function(n){this.anchorXY_=n,this.rendered_&&this.positionBubble_()},o.Bubble.prototype.layoutBubble_=function(){var n=this.workspace_.getMetricsManager().getViewMetrics(!0),a=this.getOptimalRelativeLeft_(n),c=this.getOptimalRelativeTop_(n),d=this.shape_.getBBox(),_={x:a,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},y={x:-this.width_-30,y:c};c={x:d.width,y:c};var R={x:a,y:d.height};a=d.width<d.height?c:R,d=d.width<d.height?R:c,c=this.getOverlap_(_,n),R=this.getOverlap_(y,n);var x=this.getOverlap_(a,n);n=this.getOverlap_(d,n),c==(n=Math.max(c,R,x,n))?(this.relativeLeft_=_.x,this.relativeTop_=_.y):R==n?(this.relativeLeft_=y.x,this.relativeTop_=y.y):x==n?(this.relativeLeft_=a.x,this.relativeTop_=a.y):(this.relativeLeft_=d.x,this.relativeTop_=d.y)},o.Bubble.prototype.getOverlap_=function(n,a){var c=this.workspace_.RTL?this.anchorXY_.x-n.x-this.width_:n.x+this.anchorXY_.x;return n=n.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(c+this.width_,a.left+a.width)-Math.max(c,a.left))*(Math.min(n+this.height_,a.top+a.height)-Math.max(n,a.top))/(this.width_*this.height_)))},o.Bubble.prototype.getOptimalRelativeLeft_=function(n){var a=-this.width_/4;if(this.width_>n.width)return a;if(this.workspace_.RTL)var c=this.anchorXY_.x-a,d=c-this.width_,_=n.left+n.width,y=n.left+o.Scrollbar.scrollbarThickness/this.workspace_.scale;else c=(d=a+this.anchorXY_.x)+this.width_,y=n.left,_=n.left+n.width-o.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?d<y?a=-(y-this.anchorXY_.x+this.width_):c>_&&(a=-(_-this.anchorXY_.x)):d<y?a=y-this.anchorXY_.x:c>_&&(a=_-this.anchorXY_.x-this.width_),a},o.Bubble.prototype.getOptimalRelativeTop_=function(n){var a=-this.height_/4;if(this.height_>n.height)return a;var c=this.anchorXY_.y+a,_=n.top;n=n.top+n.height-o.Scrollbar.scrollbarThickness/this.workspace_.scale;var y=this.anchorXY_.y;return c<_?a=_-y:c+this.height_>n&&(a=n-y-this.height_),a},o.Bubble.prototype.positionBubble_=function(){var n=this.anchorXY_.x;this.moveTo(n=this.workspace_.RTL?n-(this.relativeLeft_+this.width_):n+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},o.Bubble.prototype.moveTo=function(n,a){this.bubbleGroup_.setAttribute("transform","translate("+n+","+a+")")},o.Bubble.prototype.setDragging=function(n){!n&&this.moveCallback_&&this.moveCallback_()},o.Bubble.prototype.getBubbleSize=function(){return new o.utils.Size(this.width_,this.height_)},o.Bubble.prototype.setBubbleSize=function(n,a){var c=2*o.Bubble.BORDER_WIDTH;n=Math.max(n,c+45),a=Math.max(a,c+20),this.width_=n,this.height_=a,this.bubbleBack_.setAttribute("width",n),this.bubbleBack_.setAttribute("height",a),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*o.Bubble.BORDER_WIDTH+","+(a-c)+") scale(-1 1)":"translate("+(n-c)+","+(a-c)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},o.Bubble.prototype.renderArrow_=function(){var n=[],a=this.width_/2,c=this.height_/2,d=-this.relativeLeft_,_=-this.relativeTop_;if(a==d&&c==_)n.push("M "+a+","+c);else{_-=c,d-=a,this.workspace_.RTL&&(d*=-1);var y=Math.sqrt(_*_+d*d),R=Math.acos(d/y);0>_&&(R=2*Math.PI-R);var x=R+Math.PI/2;x>2*Math.PI&&(x-=2*Math.PI);var B=Math.sin(x),H=Math.cos(x),F=this.getBubbleSize();x=(F.width+F.height)/o.Bubble.ARROW_THICKNESS,x=Math.min(x,F.width,F.height)/4,d=a+(F=1-o.Bubble.ANCHOR_RADIUS/y)*d,_=c+F*_,F=a+x*H;var Y=c+x*B;a-=x*H,c-=x*B,(B=R+this.arrow_radians_)>2*Math.PI&&(B-=2*Math.PI),R=Math.sin(B)*y/o.Bubble.ARROW_BEND,y=Math.cos(B)*y/o.Bubble.ARROW_BEND,n.push("M"+F+","+Y),n.push("C"+(F+y)+","+(Y+R)+" "+d+","+_+" "+d+","+_),n.push("C"+d+","+_+" "+(a+y)+","+(c+R)+" "+a+","+c)}n.push("z"),this.bubbleArrow_.setAttribute("d",n.join(" "))},o.Bubble.prototype.setColour=function(n){this.bubbleBack_.setAttribute("fill",n),this.bubbleArrow_.setAttribute("fill",n)},o.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&o.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&o.browserEvents.unbind(this.onMouseDownResizeWrapper_),o.Bubble.unbindDragEvents_(),o.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},o.Bubble.prototype.moveDuringDrag=function(n,a){n?n.translateSurface(a.x,a.y):this.moveTo(a.x,a.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-a.x-this.width_:a.x-this.anchorXY_.x,this.relativeTop_=a.y-this.anchorXY_.y,this.renderArrow_()},o.Bubble.prototype.getRelativeToSurfaceXY=function(){return new o.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},o.Bubble.prototype.setAutoLayout=function(n){this.autoLayout_=n},o.Bubble.textToDom=function(n){var a=o.utils.dom.createSvgElement(o.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:o.Bubble.BORDER_WIDTH},null);n=n.split("\n");for(var c=0;c<n.length;c++){var d=o.utils.dom.createSvgElement(o.utils.Svg.TSPAN,{dy:"1em",x:o.Bubble.BORDER_WIDTH},a),_=document.createTextNode(n[c]);d.appendChild(_)}return a},o.Bubble.createNonEditableBubble=function(n,a,c){if((c=new o.Bubble(a.workspace,n,a.pathObject.svgPath,c,null,null)).setSvgId(a.id),a.RTL){a=n.getBBox().width;for(var _,d=0;_=n.childNodes[d];d++)_.setAttribute("text-anchor","end"),_.setAttribute("x",a+o.Bubble.BORDER_WIDTH)}return c},o.Events.CommentBase=function(n){this.commentId=(this.isBlank=void 0===n)?"":n.id,this.workspaceId=this.isBlank?"":n.workspace.id,this.group=o.Events.getGroup(),this.recordUndo=o.Events.recordUndo},o.utils.object.inherits(o.Events.CommentBase,o.Events.Abstract),o.Events.CommentBase.prototype.toJson=function(){var n=o.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(n.commentId=this.commentId),n},o.Events.CommentBase.prototype.fromJson=function(n){o.Events.CommentBase.superClass_.fromJson.call(this,n),this.commentId=n.commentId},o.Events.CommentChange=function(n,a,c){o.Events.CommentChange.superClass_.constructor.call(this,n),n&&(this.oldContents_=void 0===a?"":a,this.newContents_=void 0===c?"":c)},o.utils.object.inherits(o.Events.CommentChange,o.Events.CommentBase),o.Events.CommentChange.prototype.type=o.Events.COMMENT_CHANGE,o.Events.CommentChange.prototype.toJson=function(){var n=o.Events.CommentChange.superClass_.toJson.call(this);return n.oldContents=this.oldContents_,n.newContents=this.newContents_,n},o.Events.CommentChange.prototype.fromJson=function(n){o.Events.CommentChange.superClass_.fromJson.call(this,n),this.oldContents_=n.oldContents,this.newContents_=n.newContents},o.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},o.Events.CommentChange.prototype.run=function(n){var a=this.getEventWorkspace_().getCommentById(this.commentId);a?a.setContent(n?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},o.Events.CommentCreate=function(n){o.Events.CommentCreate.superClass_.constructor.call(this,n),n&&(this.xml=n.toXmlWithXY())},o.utils.object.inherits(o.Events.CommentCreate,o.Events.CommentBase),o.Events.CommentCreate.prototype.type=o.Events.COMMENT_CREATE,o.Events.CommentCreate.prototype.toJson=function(){var n=o.Events.CommentCreate.superClass_.toJson.call(this);return n.xml=o.Xml.domToText(this.xml),n},o.Events.CommentCreate.prototype.fromJson=function(n){o.Events.CommentCreate.superClass_.fromJson.call(this,n),this.xml=o.Xml.textToDom(n.xml)},o.Events.CommentCreate.prototype.run=function(n){o.Events.CommentCreateDeleteHelper(this,n)},o.Events.CommentCreateDeleteHelper=function(n,a){var c=n.getEventWorkspace_();a?((a=o.utils.xml.createElement("xml")).appendChild(n.xml),o.Xml.domToWorkspace(a,c)):(c=c.getCommentById(n.commentId))?c.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+n.commentId)},o.Events.CommentDelete=function(n){o.Events.CommentDelete.superClass_.constructor.call(this,n),n&&(this.xml=n.toXmlWithXY())},o.utils.object.inherits(o.Events.CommentDelete,o.Events.CommentBase),o.Events.CommentDelete.prototype.type=o.Events.COMMENT_DELETE,o.Events.CommentDelete.prototype.toJson=function(){return o.Events.CommentDelete.superClass_.toJson.call(this)},o.Events.CommentDelete.prototype.fromJson=function(n){o.Events.CommentDelete.superClass_.fromJson.call(this,n)},o.Events.CommentDelete.prototype.run=function(n){o.Events.CommentCreateDeleteHelper(this,!n)},o.Events.CommentMove=function(n){o.Events.CommentMove.superClass_.constructor.call(this,n),n&&(this.comment_=n,this.oldCoordinate_=n.getXY(),this.newCoordinate_=null)},o.utils.object.inherits(o.Events.CommentMove,o.Events.CommentBase),o.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},o.Events.CommentMove.prototype.type=o.Events.COMMENT_MOVE,o.Events.CommentMove.prototype.setOldCoordinate=function(n){this.oldCoordinate_=n},o.Events.CommentMove.prototype.toJson=function(){var n=o.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(n.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(n.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),n},o.Events.CommentMove.prototype.fromJson=function(n){if(o.Events.CommentMove.superClass_.fromJson.call(this,n),n.oldCoordinate){var a=n.oldCoordinate.split(",");this.oldCoordinate_=new o.utils.Coordinate(Number(a[0]),Number(a[1]))}n.newCoordinate&&(a=n.newCoordinate.split(","),this.newCoordinate_=new o.utils.Coordinate(Number(a[0]),Number(a[1])))},o.Events.CommentMove.prototype.isNull=function(){return o.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},o.Events.CommentMove.prototype.run=function(n){var a=this.getEventWorkspace_().getCommentById(this.commentId);if(a){n=n?this.newCoordinate_:this.oldCoordinate_;var c=a.getXY();a.moveBy(n.x-c.x,n.y-c.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},o.registry.register(o.registry.Type.EVENT,o.Events.COMMENT_CREATE,o.Events.CommentCreate),o.registry.register(o.registry.Type.EVENT,o.Events.COMMENT_CHANGE,o.Events.CommentChange),o.registry.register(o.registry.Type.EVENT,o.Events.COMMENT_MOVE,o.Events.CommentMove),o.registry.register(o.registry.Type.EVENT,o.Events.COMMENT_DELETE,o.Events.CommentDelete),o.BubbleDragger=function(n,a){this.draggingBubble_=n,this.workspace_=a,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=o.utils.is3dSupported()&&a.getBlockDragSurface()?a.getBlockDragSurface():null},o.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},o.BubbleDragger.prototype.startBubbleDrag=function(){o.Events.getGroup()||o.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},o.BubbleDragger.prototype.dragBubble=function(n,a){a=this.pixelsToWorkspaceUnits_(a),a=o.utils.Coordinate.sum(this.startXY_,a),this.draggingBubble_.moveDuringDrag(this.dragSurface_,a),a=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(n),n=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),n!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==a&&(a&&a.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},o.BubbleDragger.prototype.shouldDelete_=function(n){return!(!n||!this.workspace_.getComponentManager().hasCapability(n.id,o.ComponentManager.Capability.DELETE_AREA))&&n.wouldDelete(this.draggingBubble_,!1)},o.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},o.BubbleDragger.prototype.endBubbleDrag=function(n,a){this.dragBubble(n,a),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?n=this.startXY_:(n=this.pixelsToWorkspaceUnits_(a),n=o.utils.Coordinate.sum(this.startXY_,n)),this.draggingBubble_.moveTo(n.x,n.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),o.Events.setGroup(!1)},o.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var n=new(o.Events.get(o.Events.COMMENT_MOVE))(this.draggingBubble_);n.setOldCoordinate(this.startXY_),n.recordNew(),o.Events.fire(n)}},o.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(n){return n=new o.utils.Coordinate(n.x/this.workspace_.scale,n.y/this.workspace_.scale),this.workspace_.isMutator&&n.scale(1/this.workspace_.options.parentWorkspace.scale),n},o.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},o.Events.Click=function(n,a,c){o.Events.Click.superClass_.constructor.call(this,n?n.workspace.id:a),this.blockId=n?n.id:null,this.targetType=c},o.utils.object.inherits(o.Events.Click,o.Events.UiBase),o.Events.Click.prototype.type=o.Events.CLICK,o.Events.Click.prototype.toJson=function(){var n=o.Events.Click.superClass_.toJson.call(this);return n.targetType=this.targetType,this.blockId&&(n.blockId=this.blockId),n},o.Events.Click.prototype.fromJson=function(n){o.Events.Click.superClass_.fromJson.call(this,n),this.targetType=n.targetType,this.blockId=n.blockId},o.registry.register(o.registry.Type.EVENT,o.Events.CLICK,o.Events.Click),o.WorkspaceDragger=function(n){this.workspace_=n,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new o.utils.Coordinate(n.scrollX,n.scrollY)},o.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},o.WorkspaceDragger.prototype.startDrag=function(){o.selected&&o.selected.unselect(),this.workspace_.setupDragSurface()},o.WorkspaceDragger.prototype.endDrag=function(n){this.drag(n),this.workspace_.resetDragSurface()},o.WorkspaceDragger.prototype.drag=function(n){if(n=o.utils.Coordinate.sum(this.startScrollXY_,n),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(n.x,n.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(n.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,n.y)}},o.Gesture=function(n,a){this.mouseDownXY_=null,this.currentDragDeltaXY_=new o.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=a,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=n,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!o.DRAG_STACK},o.Gesture.prototype.dispose=function(){o.Touch.clearTouchIdentifier(),o.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&o.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&o.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},o.Gesture.prototype.updateFromEvent_=function(n){var a=new o.utils.Coordinate(n.clientX,n.clientY);this.updateDragDelta_(a)&&(this.updateIsDragging_(),o.longStop_()),this.mostRecentEvent_=n},o.Gesture.prototype.updateDragDelta_=function(n){return this.currentDragDeltaXY_=o.utils.Coordinate.difference(n,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=o.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?o.FLYOUT_DRAG_RADIUS:o.DRAG_RADIUS))},o.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),o.Events.getGroup()||o.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},o.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},o.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},o.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new o.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},o.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},o.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(o.registry.getClassFromOptions(o.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},o.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new o.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},o.Gesture.prototype.doStart=function(n){o.utils.isTargetInput(n)?this.cancel():(this.hasStarted_=!0,o.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),o.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=n,o.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),o.utils.isRightButton(n)?this.handleRightClick(n):("touchstart"!=n.type.toLowerCase()&&"pointerdown"!=n.type.toLowerCase()||"mouse"==n.pointerType||o.longStart(n,this),this.mouseDownXY_=new o.utils.Coordinate(n.clientX,n.clientY),this.healStack_=n.altKey||n.ctrlKey||n.metaKey,this.bindMouseEvents(n)))},o.Gesture.prototype.bindMouseEvents=function(n){this.onMoveWrapper_=o.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=o.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),n.preventDefault(),n.stopPropagation()},o.Gesture.prototype.handleMove=function(n){this.updateFromEvent_(n),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),n.preventDefault(),n.stopPropagation()},o.Gesture.prototype.handleUp=function(n){this.updateFromEvent_(n),o.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(n,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(n,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(n),n.preventDefault(),n.stopPropagation(),this.dispose())},o.Gesture.prototype.cancel=function(){this.isEnding_||(o.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},o.Gesture.prototype.handleRightClick=function(n){this.targetBlock_?(this.bringBlockToFront_(),o.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(n)):this.startBubble_?this.startBubble_.showContextMenu(n):this.startWorkspace_&&!this.flyout_&&(o.hideChaff(),this.startWorkspace_.showContextMenu(n)),n.preventDefault(),n.stopPropagation(),this.dispose()},o.Gesture.prototype.handleWsStart=function(n,a){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(a),this.mostRecentEvent_=n,this.doStart(n)},o.Gesture.prototype.fireWorkspaceClick_=function(n){o.Events.fire(new(o.Events.get(o.Events.CLICK))(null,n.id,"workspace"))},o.Gesture.prototype.handleFlyoutStart=function(n,a){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(a),this.handleWsStart(n,a.getWorkspace())},o.Gesture.prototype.handleBlockStart=function(n,a){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(a),this.mostRecentEvent_=n},o.Gesture.prototype.handleBubbleStart=function(n,a){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(a),this.mostRecentEvent_=n},o.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},o.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},o.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(o.Events.getGroup()||o.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var n=new(o.Events.get(o.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");o.Events.fire(n)}this.bringBlockToFront_(),o.Events.setGroup(!1)},o.Gesture.prototype.doWorkspaceClick_=function(n){n=this.creatorWorkspace_,o.selected&&o.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||n)},o.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},o.Gesture.prototype.setStartField=function(n){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=n)},o.Gesture.prototype.setStartBubble=function(n){this.startBubble_||(this.startBubble_=n)},o.Gesture.prototype.setStartBlock=function(n){this.startBlock_||this.startBubble_||(this.startBlock_=n,n.isInFlyout&&n!=n.getRootBlock()?this.setTargetBlock_(n.getRootBlock()):this.setTargetBlock_(n))},o.Gesture.prototype.setTargetBlock_=function(n){n.isShadow()?this.setTargetBlock_(n.getParent()):this.targetBlock_=n},o.Gesture.prototype.setStartWorkspace_=function(n){this.startWorkspace_||(this.startWorkspace_=n)},o.Gesture.prototype.setStartFlyout_=function(n){this.flyout_||(this.flyout_=n)},o.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},o.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},o.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},o.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},o.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},o.Gesture.prototype.hasStarted=function(){return this.hasStarted_},o.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},o.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},o.Gesture.inProgress=function(){for(var c,n=o.Workspace.getAll(),a=0;c=n[a];a++)if(c.currentGesture_)return!0;return!1},o.IRegistrable=function(){},o.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},o.Marker.prototype.setDrawer=function(n){this.drawer_=n},o.Marker.prototype.getDrawer=function(){return this.drawer_},o.Marker.prototype.getCurNode=function(){return this.curNode_},o.Marker.prototype.setCurNode=function(n){var a=this.curNode_;this.curNode_=n,this.drawer_&&this.drawer_.draw(a,this.curNode_)},o.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},o.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},o.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},o.Cursor=function(){o.Cursor.superClass_.constructor.call(this),this.type="cursor"},o.utils.object.inherits(o.Cursor,o.Marker),o.Cursor.prototype.next=function(){var n=this.getCurNode();if(!n)return null;for(n=n.next();n&&n.next()&&(n.getType()==o.ASTNode.types.NEXT||n.getType()==o.ASTNode.types.BLOCK);)n=n.next();return n&&this.setCurNode(n),n},o.Cursor.prototype.in=function(){var n=this.getCurNode();return n?((n.getType()==o.ASTNode.types.PREVIOUS||n.getType()==o.ASTNode.types.OUTPUT)&&(n=n.next()),(n=n.in())&&this.setCurNode(n),n):null},o.Cursor.prototype.prev=function(){var n=this.getCurNode();if(!n)return null;for(n=n.prev();n&&n.prev()&&(n.getType()==o.ASTNode.types.NEXT||n.getType()==o.ASTNode.types.BLOCK);)n=n.prev();return n&&this.setCurNode(n),n},o.Cursor.prototype.out=function(){var n=this.getCurNode();return n?((n=n.out())&&n.getType()==o.ASTNode.types.BLOCK&&(n=n.prev()||n),n&&this.setCurNode(n),n):null},o.registry.register(o.registry.Type.CURSOR,o.registry.DEFAULT,o.Cursor),o.MarkerManager=function(n){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=n},o.MarkerManager.LOCAL_MARKER="local_marker_1",o.MarkerManager.prototype.registerMarker=function(n,a){this.markers_[n]&&this.unregisterMarker(n),a.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,a)),this.setMarkerSvg(a.getDrawer().createDom()),this.markers_[n]=a},o.MarkerManager.prototype.unregisterMarker=function(n){var a=this.markers_[n];if(!a)throw Error("Marker with ID "+n+" does not exist. Can only unregister markers that exist.");a.dispose(),delete this.markers_[n]},o.MarkerManager.prototype.getCursor=function(){return this.cursor_},o.MarkerManager.prototype.getMarker=function(n){return this.markers_[n]||null},o.MarkerManager.prototype.setCursor=function(n){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=n)&&(n=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(n),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},o.MarkerManager.prototype.setCursorSvg=function(n){n?(this.workspace_.getBlockCanvas().appendChild(n),this.cursorSvg_=n):this.cursorSvg_=null},o.MarkerManager.prototype.setMarkerSvg=function(n){n?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(n,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(n)):this.markerSvg_=null},o.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},o.MarkerManager.prototype.dispose=function(){for(var c,n=Object.keys(this.markers_),a=0;c=n[a];a++)this.unregisterMarker(c);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},o.WidgetDiv={},o.WidgetDiv.owner_=null,o.WidgetDiv.dispose_=null,o.WidgetDiv.rendererClassName_="",o.WidgetDiv.themeClassName_="",o.WidgetDiv.createDom=function(){o.WidgetDiv.DIV||(o.WidgetDiv.DIV=document.createElement("div"),o.WidgetDiv.DIV.className="blocklyWidgetDiv",(o.parentContainer||document.body).appendChild(o.WidgetDiv.DIV))},o.WidgetDiv.show=function(n,a,c){o.WidgetDiv.hide(),o.WidgetDiv.owner_=n,o.WidgetDiv.dispose_=c,(n=o.WidgetDiv.DIV).style.direction=a?"rtl":"ltr",n.style.display="block",a=o.getMainWorkspace(),o.WidgetDiv.rendererClassName_=a.getRenderer().getClassName(),o.WidgetDiv.themeClassName_=a.getTheme().getClassName(),o.utils.dom.addClass(n,o.WidgetDiv.rendererClassName_),o.utils.dom.addClass(n,o.WidgetDiv.themeClassName_)},o.WidgetDiv.hide=function(){if(o.WidgetDiv.isVisible()){o.WidgetDiv.owner_=null;var n=o.WidgetDiv.DIV;n.style.display="none",n.style.left="",n.style.top="",o.WidgetDiv.dispose_&&o.WidgetDiv.dispose_(),o.WidgetDiv.dispose_=null,n.textContent="",o.WidgetDiv.rendererClassName_&&(o.utils.dom.removeClass(n,o.WidgetDiv.rendererClassName_),o.WidgetDiv.rendererClassName_=""),o.WidgetDiv.themeClassName_&&(o.utils.dom.removeClass(n,o.WidgetDiv.themeClassName_),o.WidgetDiv.themeClassName_=""),o.getMainWorkspace().markFocused()}},o.WidgetDiv.isVisible=function(){return!!o.WidgetDiv.owner_},o.WidgetDiv.hideIfOwner=function(n){o.WidgetDiv.owner_==n&&o.WidgetDiv.hide()},o.WidgetDiv.positionInternal_=function(n,a,c){o.WidgetDiv.DIV.style.left=n+"px",o.WidgetDiv.DIV.style.top=a+"px",o.WidgetDiv.DIV.style.height=c+"px"},o.WidgetDiv.positionWithAnchor=function(n,a,c,d){var _=o.WidgetDiv.calculateY_(n,a,c);n=o.WidgetDiv.calculateX_(n,a,c,d),0>_?o.WidgetDiv.positionInternal_(n,0,c.height+_):o.WidgetDiv.positionInternal_(n,_,c.height)},o.WidgetDiv.calculateX_=function(n,a,c,d){return d?(a=Math.max(a.right-c.width,n.left),Math.min(a,n.right-c.width)):(a=Math.min(a.left,n.right-c.width),Math.max(a,n.left))},o.WidgetDiv.calculateY_=function(n,a,c){return a.bottom+c.height>=n.bottom?a.top-c.height:a.bottom},o.Field=function(n,a,c){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new o.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,c&&this.configure_(c),this.setValue(n),a&&this.setValidator(a)},o.Field.prototype.DEFAULT_VALUE=null,o.Field.prototype.name=void 0,o.Field.prototype.disposed=!1,o.Field.prototype.maxDisplayLength=50,o.Field.prototype.sourceBlock_=null,o.Field.prototype.isDirty_=!0,o.Field.prototype.visible_=!0,o.Field.prototype.clickTarget_=null,o.Field.NBSP="\xa0",o.Field.prototype.EDITABLE=!0,o.Field.prototype.SERIALIZABLE=!1,o.Field.prototype.configure_=function(n){var a=n.tooltip;"string"==typeof a&&(a=o.utils.replaceMessageReferences(n.tooltip)),a&&this.setTooltip(a)},o.Field.prototype.setSourceBlock=function(n){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=n},o.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},o.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},o.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},o.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},o.Field.prototype.initModel=function(){},o.Field.prototype.createBorderRect_=function(){this.borderRect_=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},o.Field.prototype.createTextElement_=function(){this.textElement_=o.utils.dom.createSvgElement(o.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},o.Field.prototype.bindEvents_=function(){o.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=o.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},o.Field.prototype.fromXml=function(n){this.setValue(n.textContent)},o.Field.prototype.toXml=function(n){return n.textContent=this.getValue(),n},o.Field.prototype.dispose=function(){o.DropDownDiv.hideIfOwner(this),o.WidgetDiv.hideIfOwner(this),o.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&o.browserEvents.unbind(this.mouseDownWrapper_),o.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},o.Field.prototype.updateEditable=function(){var n=this.fieldGroup_;this.EDITABLE&&n&&(this.sourceBlock_.isEditable()?(o.utils.dom.addClass(n,"blocklyEditableText"),o.utils.dom.removeClass(n,"blocklyNonEditableText"),n.style.cursor=this.CURSOR):(o.utils.dom.addClass(n,"blocklyNonEditableText"),o.utils.dom.removeClass(n,"blocklyEditableText"),n.style.cursor=""))},o.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},o.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},o.Field.prototype.isSerializable=function(){var n=!1;return this.name&&(this.SERIALIZABLE?n=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),n=!0)),n},o.Field.prototype.isVisible=function(){return this.visible_},o.Field.prototype.setVisible=function(n){if(this.visible_!=n){this.visible_=n;var a=this.getSvgRoot();a&&(a.style.display=n?"block":"none")}},o.Field.prototype.setValidator=function(n){this.validator_=n},o.Field.prototype.getValidator=function(){return this.validator_},o.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},o.Field.prototype.applyColour=function(){},o.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},o.Field.prototype.showEditor=function(n){this.isClickable()&&this.showEditor_(n)},o.Field.prototype.updateSize_=function(n){var a=this.getConstants(),c=2*(n=null!=n?n:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),d=a.FIELD_TEXT_HEIGHT,_=0;this.textElement_&&(c+=_=o.utils.dom.getFastTextWidth(this.textElement_,a.FIELD_TEXT_FONTSIZE,a.FIELD_TEXT_FONTWEIGHT,a.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(d=Math.max(d,a.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=d,this.size_.width=c,this.positionTextElement_(n,_),this.positionBorderRect_()},o.Field.prototype.positionTextElement_=function(n,a){if(this.textElement_){var c=this.getConstants(),d=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-a-n:n),this.textElement_.setAttribute("y",c.FIELD_TEXT_BASELINE_CENTER?d:d-c.FIELD_TEXT_HEIGHT/2+c.FIELD_TEXT_BASELINE)}},o.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},o.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new o.utils.Size(0,0)},o.Field.prototype.getScaledBBox=function(){if(this.borderRect_)n=this.borderRect_.getBoundingClientRect(),c=o.utils.style.getPageOffset(this.borderRect_),d=n.width,n=n.height;else{var n=this.sourceBlock_.getHeightWidth(),a=this.sourceBlock_.workspace.scale,c=this.getAbsoluteXY_(),d=n.width*a;n=n.height*a,o.utils.userAgent.GECKO?(c.x+=1.5*a,c.y+=1.5*a):o.utils.userAgent.EDGE||o.utils.userAgent.IE||(c.x-=.5*a,c.y-=.5*a),d+=1*a,n+=1*a}return new o.utils.Rect(c.y,c.y+n,c.x,c.x+d)},o.Field.prototype.getDisplayText_=function(){var n=this.getText();return n?(n.length>this.maxDisplayLength&&(n=n.substring(0,this.maxDisplayLength-2)+"\u2026"),n=n.replace(/\s/g,o.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(n+="\u200f"),n):o.Field.NBSP},o.Field.prototype.getText=function(){if(this.getText_){var n=this.getText_.call(this);if(null!==n)return String(n)}return String(this.getValue())},o.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},o.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},o.Field.prototype.setValue=function(n){if(null!==n){var a=this.doClassValidation_(n);if(!((n=this.processValidation_(n,a))instanceof Error)){if((a=this.getValidator())&&(a=a.call(this,n),(n=this.processValidation_(n,a))instanceof Error))return;if(!(a=this.sourceBlock_)||!a.disposed){var c=this.getValue();c===n?this.doValueUpdate_(n):(a&&o.Events.isEnabled()&&o.Events.fire(new(o.Events.get(o.Events.BLOCK_CHANGE))(a,"field",this.name||null,c,n)),this.doValueUpdate_(n),this.isDirty_&&this.forceRerender())}}}},o.Field.prototype.processValidation_=function(n,a){return null===a?(this.doValueInvalid_(n),this.isDirty_&&this.forceRerender(),Error()):(void 0!==a&&(n=a),n)},o.Field.prototype.getValue=function(){return this.value_},o.Field.prototype.doClassValidation_=function(n){return null==n?null:n},o.Field.prototype.doValueUpdate_=function(n){this.value_=n,this.isDirty_=!0},o.Field.prototype.doValueInvalid_=function(n){},o.Field.prototype.onMouseDown_=function(n){this.sourceBlock_&&this.sourceBlock_.workspace&&(n=this.sourceBlock_.workspace.getGesture(n))&&n.setStartField(this)},o.Field.prototype.setTooltip=function(n){n||""===n||(n=this.sourceBlock_);var a=this.getClickTarget_();a?a.tooltip=n:this.tooltip_=n},o.Field.prototype.getTooltip=function(){var n=this.getClickTarget_();return o.Tooltip.getTooltipOfObject(n||{tooltip:this.tooltip_})},o.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},o.Field.prototype.getAbsoluteXY_=function(){return o.utils.style.getPageOffset(this.getClickTarget_())},o.Field.prototype.referencesVariables=function(){return!1},o.Field.prototype.getParentInput=function(){for(var n=null,a=this.sourceBlock_,c=a.inputList,d=0;d<a.inputList.length;d++)for(var _=c[d],y=_.fieldRow,R=0;R<y.length;R++)if(y[R]===this){n=_;break}return n},o.Field.prototype.getFlipRtl=function(){return!1},o.Field.prototype.isTabNavigable=function(){return!1},o.Field.prototype.onShortcut=function(n){return!1},o.Field.prototype.setCursorSvg=function(n){n?(this.fieldGroup_.appendChild(n),this.cursorSvg_=n):this.cursorSvg_=null},o.Field.prototype.setMarkerSvg=function(n){n?(this.fieldGroup_.appendChild(n),this.markerSvg_=n):this.markerSvg_=null},o.Field.prototype.updateMarkers_=function(){var n=this.sourceBlock_.workspace;n.keyboardAccessibilityMode&&this.cursorSvg_&&n.getCursor().draw(),n.keyboardAccessibilityMode&&this.markerSvg_&&n.getMarker(o.MarkerManager.LOCAL_MARKER).draw()},o.FieldLabel=function(n,a,c){this.class_=null,o.FieldLabel.superClass_.constructor.call(this,n,null,c),c||(this.class_=a||null)},o.utils.object.inherits(o.FieldLabel,o.Field),o.FieldLabel.prototype.DEFAULT_VALUE="",o.FieldLabel.fromJson=function(n){var a=o.utils.replaceMessageReferences(n.text);return new o.FieldLabel(a,void 0,n)},o.FieldLabel.prototype.EDITABLE=!1,o.FieldLabel.prototype.configure_=function(n){o.FieldLabel.superClass_.configure_.call(this,n),this.class_=n.class},o.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&o.utils.dom.addClass(this.textElement_,this.class_)},o.FieldLabel.prototype.doClassValidation_=function(n){return null==n?null:String(n)},o.FieldLabel.prototype.setClass=function(n){this.textElement_&&(this.class_&&o.utils.dom.removeClass(this.textElement_,this.class_),n&&o.utils.dom.addClass(this.textElement_,n)),this.class_=n},o.fieldRegistry.register("field_label",o.FieldLabel),o.Input=function(n,a,c,d){if(n!=o.inputTypes.DUMMY&&!a)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=n,this.name=a,this.sourceBlock_=c,this.connection=d,this.fieldRow=[]},o.Input.prototype.align=o.constants.ALIGN.LEFT,o.Input.prototype.visible_=!0,o.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},o.Input.prototype.appendField=function(n,a){return this.insertFieldAt(this.fieldRow.length,n,a),this},o.Input.prototype.insertFieldAt=function(n,a,c){if(0>n||n>this.fieldRow.length)throw Error("index "+n+" out of bounds.");return(a||""==a&&c)&&("string"==typeof a&&(a=o.fieldRegistry.fromJson({type:"field_label",text:a})),a.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(a.init(),a.applyColour()),a.name=c,a.setVisible(this.isVisible()),a.prefixField&&(n=this.insertFieldAt(n,a.prefixField)),this.fieldRow.splice(n,0,a),++n,a.suffixField&&(n=this.insertFieldAt(n,a.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),n},o.Input.prototype.removeField=function(n,a){for(var d,c=0;d=this.fieldRow[c];c++)if(d.name===n)return d.dispose(),this.fieldRow.splice(c,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(a)return!1;throw Error('Field "'+n+'" not found.')},o.Input.prototype.isVisible=function(){return this.visible_},o.Input.prototype.setVisible=function(n){var a=[];if(this.visible_==n)return a;this.visible_=n;for(var d,c=0;d=this.fieldRow[c];c++)d.setVisible(n);return this.connection&&(this.connection=this.connection,n?a=this.connection.startTrackingAll():this.connection.stopTrackingAll(),c=this.connection.targetBlock())&&(c.getSvgRoot().style.display=n?"block":"none"),a},o.Input.prototype.markDirty=function(){for(var a,n=0;a=this.fieldRow[n];n++)a.markDirty()},o.Input.prototype.setCheck=function(n){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(n),this},o.Input.prototype.setAlign=function(n){return this.align=n,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},o.Input.prototype.setShadowDom=function(n){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(n),this},o.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},o.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var n=0;n<this.fieldRow.length;n++)this.fieldRow[n].init()},o.Input.prototype.dispose=function(){for(var a,n=0;a=this.fieldRow[n];n++)a.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},o.Block=function(n,a,c){if(o.Generator&&void 0!==o.Generator.prototype[a])throw Error('Block prototypeName "'+a+'" conflicts with Blockly.Generator members.');if(this.id=c&&!n.getBlockById(c)?c:o.utils.genUid(),n.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new o.utils.Size(160,80)},this.xy_=new o.utils.Coordinate(0,0),this.workspace=n,this.isInFlyout=n.isFlyout,this.isInMutator=n.isMutator,this.RTL=n.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,a){if(this.type=a,!(c=o.Blocks[a])||"object"!=typeof c)throw TypeError("Unknown block type: "+a);o.utils.object.mixin(this,c)}n.addTopBlock(this),n.addTypedBlock(this),(n=o.Events.getGroup())||o.Events.setGroup(!0),a=o.Events.recordUndo;try{"function"==typeof this.init&&(o.Events.recordUndo=!1,this.init(),o.Events.recordUndo=a),o.Events.isEnabled()&&o.Events.fire(new(o.Events.get(o.Events.BLOCK_CREATE))(this))}finally{n||o.Events.setGroup(!1),o.Events.recordUndo=a}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},o.Block.COLLAPSED_INPUT_NAME=o.constants.COLLAPSED_INPUT_NAME,o.Block.COLLAPSED_FIELD_NAME=o.constants.COLLAPSED_FIELD_NAME,o.Block.prototype.data=null,o.Block.prototype.disposed=!1,o.Block.prototype.hue_=null,o.Block.prototype.colour_="#000000",o.Block.prototype.styleName_="",o.Block.prototype.dispose=function(n){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(n),o.Events.isEnabled()&&o.Events.fire(new(o.Events.get(o.Events.BLOCK_DELETE))(this)),o.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),o.selected==this&&(o.selected=null);for(var a=this.childBlocks_.length-1;0<=a;a--)this.childBlocks_[a].dispose(!1);a=0;for(var c;c=this.inputList[a];a++)c.dispose();this.inputList.length=0;var _,d=this.getConnections_(!0);for(a=0;_=d[a];a++)_.dispose()}finally{o.Events.enable(),this.disposed=!0}}},o.Block.prototype.initModel=function(){for(var a,n=0;a=this.inputList[n];n++)for(var d,c=0;d=a.fieldRow[c];c++)d.initModel&&d.initModel()},o.Block.prototype.unplug=function(n){this.outputConnection?this.unplugFromRow_(n):this.previousConnection&&this.unplugFromStack_(n)},o.Block.prototype.unplugFromRow_=function(n){var a=null;this.outputConnection.isConnected()&&(a=this.outputConnection.targetConnection,this.outputConnection.disconnect()),a&&n&&(n=this.getOnlyValueConnection_())&&n.isConnected()&&!n.targetBlock().isShadow()&&((n=n.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(n,a,!1)?a.connect(n):n.onFailedConnect(a))},o.Block.prototype.getOnlyValueConnection_=function(){for(var n=null,a=0;a<this.inputList.length;a++){var c=this.inputList[a].connection;if(c&&c.type==o.connectionTypes.INPUT_VALUE&&c.targetConnection){if(n)return null;n=c}}return n},o.Block.prototype.unplugFromStack_=function(n){var a=null;this.previousConnection.isConnected()&&(a=this.previousConnection.targetConnection,this.previousConnection.disconnect());var c=this.getNextBlock();n&&c&&!c.isShadow()&&((n=this.nextConnection.targetConnection).disconnect(),a&&this.workspace.connectionChecker.canConnect(a,n,!1)&&a.connect(n))},o.Block.prototype.getConnections_=function(n){n=[],this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection);for(var c,a=0;c=this.inputList[a];a++)c.connection&&n.push(c.connection);return n},o.Block.prototype.lastConnectionInStack=function(n){for(var a=this.nextConnection;a;){var c=a.targetBlock();if(!c||n&&c.isShadow())return a;a=c.nextConnection}return null},o.Block.prototype.bumpNeighbours=function(){},o.Block.prototype.getParent=function(){return this.parentBlock_},o.Block.prototype.getInputWithBlock=function(n){for(var c,a=0;c=this.inputList[a];a++)if(c.connection&&c.connection.targetBlock()==n)return c;return null},o.Block.prototype.getSurroundParent=function(){var n=this;do{var a=n;if(!(n=n.getParent()))return null}while(n.getNextBlock()==a);return n},o.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},o.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},o.Block.prototype.getFirstStatementConnection=function(){for(var a,n=0;a=this.inputList[n];n++)if(a.connection&&a.connection.type==o.connectionTypes.NEXT_STATEMENT)return a.connection;return null},o.Block.prototype.getRootBlock=function(){var n=this;do{var a=n;n=a.parentBlock_}while(n);return a},o.Block.prototype.getTopStackBlock=function(){var n=this;do{var a=n.getPreviousBlock()}while(a&&a.getNextBlock()==n&&(n=a));return n},o.Block.prototype.getChildren=function(n){if(!n)return this.childBlocks_;n=[];for(var c,a=0;c=this.inputList[a];a++)c.connection&&(c=c.connection.targetBlock())&&n.push(c);return(a=this.getNextBlock())&&n.push(a),n},o.Block.prototype.setParent=function(n){if(n!=this.parentBlock_){if(this.parentBlock_){if(o.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=n)?n.childBlocks_.push(this):this.workspace.addTopBlock(this)}},o.Block.prototype.getDescendants=function(n){for(var d,a=[this],c=this.getChildren(n),_=0;d=c[_];_++)a.push.apply(a,d.getDescendants(n));return a},o.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},o.Block.prototype.setDeletable=function(n){this.deletable_=n},o.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},o.Block.prototype.setMovable=function(n){this.movable_=n},o.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(o.utils.getBlockTypeCounts(this,!0))},o.Block.prototype.isShadow=function(){return this.isShadow_},o.Block.prototype.setShadow=function(n){this.isShadow_=n},o.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},o.Block.prototype.setInsertionMarker=function(n){this.isInsertionMarker_=n},o.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},o.Block.prototype.setEditable=function(n){this.editable_=n,n=0;for(var a;a=this.inputList[n];n++)for(var d,c=0;d=a.fieldRow[c];c++)d.updateEditable()},o.Block.prototype.isDisposed=function(){return this.disposed},o.Block.prototype.getMatchingConnection=function(n,a){var c=this.getConnections_(!0);if(n=n.getConnections_(!0),c.length!=n.length)throw Error("Connection lists did not match in length.");for(var d=0;d<n.length;d++)if(n[d]==a)return c[d];return null},o.Block.prototype.setHelpUrl=function(n){this.helpUrl=n},o.Block.prototype.setTooltip=function(n){this.tooltip=n},o.Block.prototype.getTooltip=function(){return o.Tooltip.getTooltipOfObject(this)},o.Block.prototype.getColour=function(){return this.colour_},o.Block.prototype.getStyleName=function(){return this.styleName_},o.Block.prototype.getHue=function(){return this.hue_},o.Block.prototype.setColour=function(n){n=o.utils.parseBlockColour(n),this.hue_=n.hue,this.colour_=n.hex},o.Block.prototype.setStyle=function(n){this.styleName_=n},o.Block.prototype.setOnChange=function(n){if(n&&"function"!=typeof n)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=n)&&(this.onchangeWrapper_=n.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},o.Block.prototype.getField=function(n){if("string"!=typeof n)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===n?"nothing":n+" of type "+typeof n)+" instead");for(var c,a=0;c=this.inputList[a];a++)for(var _,d=0;_=c.fieldRow[d];d++)if(_.name===n)return _;return null},o.Block.prototype.getVars=function(){for(var c,n=[],a=0;c=this.inputList[a];a++)for(var _,d=0;_=c.fieldRow[d];d++)_.referencesVariables()&&n.push(_.getValue());return n},o.Block.prototype.getVarModels=function(){for(var c,n=[],a=0;c=this.inputList[a];a++)for(var _,d=0;_=c.fieldRow[d];d++)_.referencesVariables()&&(_=this.workspace.getVariableById(_.getValue()))&&n.push(_);return n},o.Block.prototype.updateVarName=function(n){for(var c,a=0;c=this.inputList[a];a++)for(var _,d=0;_=c.fieldRow[d];d++)_.referencesVariables()&&n.getId()==_.getValue()&&_.refreshVariableName()},o.Block.prototype.renameVarById=function(n,a){for(var d,c=0;d=this.inputList[c];c++)for(var y,_=0;y=d.fieldRow[_];_++)y.referencesVariables()&&n==y.getValue()&&y.setValue(a)},o.Block.prototype.getFieldValue=function(n){return(n=this.getField(n))?n.getValue():null},o.Block.prototype.setFieldValue=function(n,a){var c=this.getField(a);if(!c)throw Error('Field "'+a+'" not found.');c.setValue(n)},o.Block.prototype.setPreviousStatement=function(n,a){if(n){if(void 0===a&&(a=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(o.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(a)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},o.Block.prototype.setNextStatement=function(n,a){if(n)void 0===a&&(a=null),this.nextConnection||(this.nextConnection=this.makeConnection_(o.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(a);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},o.Block.prototype.setOutput=function(n,a){if(n){if(void 0===a&&(a=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(o.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(a)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},o.Block.prototype.setInputsInline=function(n){this.inputsInline!=n&&(o.Events.fire(new(o.Events.get(o.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,n)),this.inputsInline=n)},o.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var n=1;n<this.inputList.length;n++)if(this.inputList[n-1].type==o.inputTypes.DUMMY&&this.inputList[n].type==o.inputTypes.DUMMY)return!1;for(n=1;n<this.inputList.length;n++)if(this.inputList[n-1].type==o.inputTypes.VALUE&&this.inputList[n].type==o.inputTypes.DUMMY)return!0;return!1},o.Block.prototype.setOutputShape=function(n){this.outputShape_=n},o.Block.prototype.getOutputShape=function(){return this.outputShape_},o.Block.prototype.isEnabled=function(){return!this.disabled},o.Block.prototype.setEnabled=function(n){this.isEnabled()!=n&&(o.Events.fire(new(o.Events.get(o.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!n)),this.disabled=!n)},o.Block.prototype.getInheritedDisabled=function(){for(var n=this.getSurroundParent();n;){if(n.disabled)return!0;n=n.getSurroundParent()}return!1},o.Block.prototype.isCollapsed=function(){return this.collapsed_},o.Block.prototype.setCollapsed=function(n){this.collapsed_!=n&&(o.Events.fire(new(o.Events.get(o.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,n)),this.collapsed_=n)},o.Block.prototype.toString=function(n,a){function c(H){var F=H.getCheck();return!F&&H.targetConnection&&(F=H.targetConnection.getCheck()),!!F&&(-1!=F.indexOf("Boolean")||-1!=F.indexOf("Number"))}function d(){R&&R.getType()==x.getType()&&R.getLocation()==x.getLocation()&&(R=null)}var _=[];a=a||"?";var y=o.ASTNode.NAVIGATE_ALL_FIELDS;o.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var R=o.ASTNode.createBlockNode(this),x=R;R;){switch(R.getType()){case o.ASTNode.types.INPUT:var B=R.getLocation();R.in()?c(B)&&_.push("("):_.push(a);break;case o.ASTNode.types.FIELD:(B=R.getLocation()).name!=o.constants.COLLAPSED_FIELD_NAME&&_.push(B.getText())}if(!(R=(B=R).in()||B.next())){for(R=B.out(),d();R&&!R.next();)R=R.out(),d(),R&&R.getType()==o.ASTNode.types.INPUT&&c(R.getLocation())&&_.push(")");R&&(R=R.next())}}for(o.ASTNode.NAVIGATE_ALL_FIELDS=y,a=2;a<_.length;a++)"("==_[a-2]&&")"==_[a]&&(_[a-2]=_[a-1],_.splice(a-1,2));return _=(_=_.reduce(function(H,F){return H+("("==H.substr(-1)||")"==F?"":" ")+F},"")).trim()||"???",n&&_.length>n&&(_=_.substring(0,n-3)+"..."),_},o.Block.prototype.appendValueInput=function(n){return this.appendInput_(o.inputTypes.VALUE,n)},o.Block.prototype.appendStatementInput=function(n){return this.appendInput_(o.inputTypes.STATEMENT,n)},o.Block.prototype.appendDummyInput=function(n){return this.appendInput_(o.inputTypes.DUMMY,n||"")},o.Block.prototype.jsonInit=function(n){var a=n.type?'Block "'+n.type+'": ':"";if(n.output&&n.previousStatement)throw Error(a+"Must not have both an output and a previousStatement.");if(n.style&&n.style.hat&&(this.hat=n.style.hat,n.style=null),n.style&&n.colour)throw Error(a+"Must not have both a colour and a style.");n.style?this.jsonInitStyle_(n,a):this.jsonInitColour_(n,a);for(var c=0;void 0!==n["message"+c];)this.interpolate_(n["message"+c],n["args"+c]||[],n["lastDummyAlign"+c],a),c++;if(void 0!==n.inputsInline&&this.setInputsInline(n.inputsInline),void 0!==n.output&&this.setOutput(!0,n.output),void 0!==n.outputShape&&this.setOutputShape(n.outputShape),void 0!==n.previousStatement&&this.setPreviousStatement(!0,n.previousStatement),void 0!==n.nextStatement&&this.setNextStatement(!0,n.nextStatement),void 0!==n.tooltip&&(c=o.utils.replaceMessageReferences(c=n.tooltip),this.setTooltip(c)),void 0!==n.enableContextMenu&&(this.contextMenu=!!(c=n.enableContextMenu)),void 0!==n.helpUrl&&(c=o.utils.replaceMessageReferences(c=n.helpUrl),this.setHelpUrl(c)),"string"==typeof n.extensions&&(console.warn(a+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+n.type+"' block."),n.extensions=[n.extensions]),void 0!==n.mutator&&o.Extensions.apply(n.mutator,this,!0),n=n.extensions,Array.isArray(n))for(a=0;a<n.length;++a)o.Extensions.apply(n[a],this,!1)},o.Block.prototype.jsonInitColour_=function(n,a){if("colour"in n)if(void 0===n.colour)console.warn(a+"Undefined colour value.");else{n=n.colour;try{this.setColour(n)}catch(c){console.warn(a+"Illegal colour value: ",n)}}},o.Block.prototype.jsonInitStyle_=function(n,a){n=n.style;try{this.setStyle(n)}catch(c){console.warn(a+"Style does not exist: ",n)}},o.Block.prototype.mixin=function(n,a){if(void 0!==a&&"boolean"!=typeof a)throw Error("opt_disableCheck must be a boolean if provided");if(!a){for(var c in a=[],n)void 0!==this[c]&&a.push(c);if(a.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(a))}o.utils.object.mixin(this,n)},o.Block.prototype.interpolate_=function(n,a,c,d){n=o.utils.tokenizeInterpolation(n),this.validateTokens_(n,a.length),a=this.interpolateArguments_(n,a,c),c=[],n=0;for(var _;_=a[n];n++)if(this.isInputKeyword_(_.type)){if(_=this.inputFromJson_(_,d)){for(var R,y=0;R=c[y];y++)_.appendField(R[0],R[1]);c.length=0}}else(y=this.fieldFromJson_(_))&&c.push([y,_.name])},o.Block.prototype.validateTokens_=function(n,a){for(var c=[],d=0,_=0;_<n.length;_++){var y=n[_];if("number"==typeof y){if(1>y||y>a)throw Error('Block "'+this.type+'": Message index %'+y+" out of range.");if(c[y])throw Error('Block "'+this.type+'": Message index %'+y+" duplicated.");c[y]=!0,d++}}if(d!=a)throw Error('Block "'+this.type+'": Message does not reference all '+a+" arg(s).")},o.Block.prototype.interpolateArguments_=function(n,a,c){for(var d=[],_=0;_<n.length;_++){var y=n[_];"number"==typeof y&&(y=a[y-1]),("string"!=typeof y||(y=this.stringToFieldJson_(y)))&&d.push(y)}return(n=d.length)&&!this.isInputKeyword_(d[n-1].type)&&(n={type:"input_dummy"},c&&(n.align=c),d.push(n)),d},o.Block.prototype.fieldFromJson_=function(n){var a=o.fieldRegistry.fromJson(n);return!a&&n.alt?"string"==typeof n.alt?(n=this.stringToFieldJson_(n.alt))?this.fieldFromJson_(n):null:this.fieldFromJson_(n.alt):a},o.Block.prototype.inputFromJson_=function(n,a){var c={LEFT:o.constants.ALIGN.LEFT,RIGHT:o.constants.ALIGN.RIGHT,CENTRE:o.constants.ALIGN.CENTRE,CENTER:o.constants.ALIGN.CENTRE},d=null;switch(n.type){case"input_value":d=this.appendValueInput(n.name);break;case"input_statement":d=this.appendStatementInput(n.name);break;case"input_dummy":d=this.appendDummyInput(n.name)}return d?(n.check&&d.setCheck(n.check),n.align&&(void 0===(c=c[n.align.toUpperCase()])?console.warn(a+"Illegal align value: ",n.align):d.setAlign(c)),d):null},o.Block.prototype.isInputKeyword_=function(n){return"input_value"==n||"input_statement"==n||"input_dummy"==n},o.Block.prototype.stringToFieldJson_=function(n){return(n=n.trim())?{type:"field_label",text:n}:null},o.Block.prototype.appendInput_=function(n,a){var c=null;return(n==o.inputTypes.VALUE||n==o.inputTypes.STATEMENT)&&(c=this.makeConnection_(n)),n==o.inputTypes.STATEMENT&&this.statementInputCount++,n=new o.Input(n,a,this,c),this.inputList.push(n),n},o.Block.prototype.moveInputBefore=function(n,a){if(n!=a){for(var y,c=-1,d=a?-1:this.inputList.length,_=0;y=this.inputList[_];_++)if(y.name==n){if(c=_,-1!=d)break}else if(a&&y.name==a&&(d=_,-1!=c))break;if(-1==c)throw Error('Named input "'+n+'" not found.');if(-1==d)throw Error('Reference input "'+a+'" not found.');this.moveNumberedInputBefore(c,d)}},o.Block.prototype.moveNumberedInputBefore=function(n,a){if(n==a)throw Error("Can't move input to itself.");if(n>=this.inputList.length)throw RangeError("Input index "+n+" out of bounds.");if(a>this.inputList.length)throw RangeError("Reference input "+a+" out of bounds.");var c=this.inputList[n];this.inputList.splice(n,1),n<a&&a--,this.inputList.splice(a,0,c)},o.Block.prototype.removeInput=function(n,a){for(var d,c=0;d=this.inputList[c];c++)if(d.name==n)return d.type==o.inputTypes.STATEMENT&&this.statementInputCount--,d.dispose(),this.inputList.splice(c,1),!0;if(a)return!1;throw Error("Input not found: "+n)},o.Block.prototype.getInput=function(n){for(var c,a=0;c=this.inputList[a];a++)if(c.name==n)return c;return null},o.Block.prototype.getInputTargetBlock=function(n){return(n=this.getInput(n))&&n.connection&&n.connection.targetBlock()},o.Block.prototype.getCommentText=function(){return this.commentModel.text},o.Block.prototype.setCommentText=function(n){this.commentModel.text!=n&&(o.Events.fire(new(o.Events.get(o.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,n)),this.comment=this.commentModel.text=n)},o.Block.prototype.setWarningText=function(n,a){},o.Block.prototype.setMutator=function(n){},o.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},o.Block.prototype.moveBy=function(n,a){if(this.parentBlock_)throw Error("Block has parent.");var c=new(o.Events.get(o.Events.BLOCK_MOVE))(this);this.xy_.translate(n,a),c.recordNew(),o.Events.fire(c)},o.Block.prototype.makeConnection_=function(n){return new o.Connection(this,n)},o.Block.prototype.allInputsFilled=function(n){if(void 0===n&&(n=!0),!n&&this.isShadow())return!1;for(var c,a=0;c=this.inputList[a];a++)if(c.connection&&(!(c=c.connection.targetBlock())||!c.allInputsFilled(n)))return!1;return!(a=this.getNextBlock())||a.allInputsFilled(n)},o.Block.prototype.toDevString=function(){var n=this.type?'"'+this.type+'" block':"Block";return this.id&&(n+=' (id="'+this.id+'")'),n},o.blockRendering.IPathObject=function(n,a){},o.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},o.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},o.Menu.prototype.addChild=function(n){this.menuItems_.push(n)},o.Menu.prototype.render=function(n){var a=document.createElement("div");a.className="blocklyMenu goog-menu blocklyNonSelectable",a.tabIndex=0,this.roleName_&&o.utils.aria.setRole(a,this.roleName_),this.element_=a;for(var d,c=0;d=this.menuItems_[c];c++)a.appendChild(d.createDom());this.mouseOverHandler_=o.browserEvents.conditionalBind(a,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=o.browserEvents.conditionalBind(a,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=o.browserEvents.conditionalBind(a,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=o.browserEvents.conditionalBind(a,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=o.browserEvents.conditionalBind(a,"keydown",this,this.handleKeyEvent_),n.appendChild(a)},o.Menu.prototype.getElement=function(){return this.element_},o.Menu.prototype.focus=function(){var n=this.getElement();n&&(n.focus({preventScroll:!0}),o.utils.dom.addClass(n,"blocklyFocused"))},o.Menu.prototype.blur_=function(){var n=this.getElement();n&&(n.blur(),o.utils.dom.removeClass(n,"blocklyFocused"))},o.Menu.prototype.setRole=function(n){this.roleName_=n},o.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(o.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(o.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(o.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(o.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(o.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var a,n=0;a=this.menuItems_[n];n++)a.dispose();this.element_=null},o.Menu.prototype.getMenuItem_=function(n){for(var a=this.getElement();n&&n!=a;){if(o.utils.dom.hasClass(n,"blocklyMenuItem"))for(var d,c=0;d=this.menuItems_[c];c++)if(d.getElement()==n)return d;n=n.parentElement}return null},o.Menu.prototype.setHighlighted=function(n){var a=this.highlightedItem_;a&&(a.setHighlighted(!1),this.highlightedItem_=null),n&&(n.setHighlighted(!0),this.highlightedItem_=n,a=this.getElement(),o.utils.style.scrollIntoContainerView(n.getElement(),a),o.utils.aria.setState(a,o.utils.aria.State.ACTIVEDESCENDANT,n.getId()))},o.Menu.prototype.highlightNext=function(){var n=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(n,1)},o.Menu.prototype.highlightPrevious=function(){var n=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>n?this.menuItems_.length:n,-1)},o.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},o.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},o.Menu.prototype.highlightHelper_=function(n,a){n+=a;for(var c;c=this.menuItems_[n];){if(c.isEnabled()){this.setHighlighted(c);break}n+=a}},o.Menu.prototype.handleMouseOver_=function(n){(n=this.getMenuItem_(n.target))&&(n.isEnabled()?this.highlightedItem_!=n&&this.setHighlighted(n):this.setHighlighted(null))},o.Menu.prototype.handleClick_=function(n){var a=this.openingCoords;if(this.openingCoords=null,a&&"number"==typeof n.clientX){var c=new o.utils.Coordinate(n.clientX,n.clientY);if(1>o.utils.Coordinate.distance(a,c))return}(n=this.getMenuItem_(n.target))&&n.performAction()},o.Menu.prototype.handleMouseEnter_=function(n){this.focus()},o.Menu.prototype.handleMouseLeave_=function(n){this.getElement()&&(this.blur_(),this.setHighlighted(null))},o.Menu.prototype.handleKeyEvent_=function(n){if(this.menuItems_.length&&!(n.shiftKey||n.ctrlKey||n.metaKey||n.altKey)){var a=this.highlightedItem_;switch(n.keyCode){case o.utils.KeyCodes.ENTER:case o.utils.KeyCodes.SPACE:a&&a.performAction();break;case o.utils.KeyCodes.UP:this.highlightPrevious();break;case o.utils.KeyCodes.DOWN:this.highlightNext();break;case o.utils.KeyCodes.PAGE_UP:case o.utils.KeyCodes.HOME:this.highlightFirst_();break;case o.utils.KeyCodes.PAGE_DOWN:case o.utils.KeyCodes.END:this.highlightLast_();break;default:return}n.preventDefault(),n.stopPropagation()}},o.Menu.prototype.getSize=function(){var n=this.getElement(),a=o.utils.style.getSize(n);return a.height=n.scrollHeight,a},o.MenuItem=function(n,a){this.content_=n,this.value_=a,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},o.MenuItem.prototype.createDom=function(){var n=document.createElement("div");n.id=o.utils.IdGenerator.getNextUniqueId(),this.element_=n,n.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var a=document.createElement("div");if(a.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var c=document.createElement("div");c.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",a.appendChild(c)}return c=this.content_,"string"==typeof this.content_&&(c=document.createTextNode(this.content_)),a.appendChild(c),n.appendChild(a),this.roleName_&&o.utils.aria.setRole(n,this.roleName_),o.utils.aria.setState(n,o.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),o.utils.aria.setState(n,o.utils.aria.State.DISABLED,!this.enabled_),n},o.MenuItem.prototype.dispose=function(){this.element_=null},o.MenuItem.prototype.getElement=function(){return this.element_},o.MenuItem.prototype.getId=function(){return this.element_.id},o.MenuItem.prototype.getValue=function(){return this.value_},o.MenuItem.prototype.setRightToLeft=function(n){this.rightToLeft_=n},o.MenuItem.prototype.setRole=function(n){this.roleName_=n},o.MenuItem.prototype.setCheckable=function(n){this.checkable_=n},o.MenuItem.prototype.setChecked=function(n){this.checked_=n},o.MenuItem.prototype.setHighlighted=function(n){this.highlight_=n;var a=this.getElement();a&&this.isEnabled()&&(n?(o.utils.dom.addClass(a,"blocklyMenuItemHighlight"),o.utils.dom.addClass(a,"goog-menuitem-highlight")):(o.utils.dom.removeClass(a,"blocklyMenuItemHighlight"),o.utils.dom.removeClass(a,"goog-menuitem-highlight")))},o.MenuItem.prototype.isEnabled=function(){return this.enabled_},o.MenuItem.prototype.setEnabled=function(n){this.enabled_=n},o.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},o.MenuItem.prototype.onAction=function(n,a){this.actionHandler_=n.bind(a)},o.ContextMenu={},o.ContextMenu.currentBlock=null,o.ContextMenu.menu_=null,o.ContextMenu.show=function(n,a,c){if(o.WidgetDiv.show(o.ContextMenu,c,o.ContextMenu.dispose),a.length){var d=o.ContextMenu.populate_(a,c);o.ContextMenu.menu_=d,o.ContextMenu.position_(d,n,c),setTimeout(function(){d.focus()},1),o.ContextMenu.currentBlock=null}else o.ContextMenu.hide()},o.ContextMenu.populate_=function(n,a){var c=new o.Menu;c.setRole(o.utils.aria.Role.MENU);for(var _,d=0;_=n[d];d++){var y=new o.MenuItem(_.text);y.setRightToLeft(a),y.setRole(o.utils.aria.Role.MENUITEM),c.addChild(y),y.setEnabled(_.enabled),_.enabled&&y.onAction(function(R){o.ContextMenu.hide(),this.callback(this.scope)},_)}return c},o.ContextMenu.position_=function(n,a,c){var d=o.utils.getViewportBBox();a=new o.utils.Rect(a.clientY+d.top,a.clientY+d.top,a.clientX+d.left,a.clientX+d.left),o.ContextMenu.createWidget_(n);var _=n.getSize();c&&(a.left+=_.width,a.right+=_.width,d.left+=_.width,d.right+=_.width),o.WidgetDiv.positionWithAnchor(d,a,_,c),n.focus()},o.ContextMenu.createWidget_=function(n){n.render(o.WidgetDiv.DIV);var a=n.getElement();o.utils.dom.addClass(a,"blocklyContextMenu"),o.browserEvents.conditionalBind(a,"contextmenu",null,o.utils.noEvent),n.focus()},o.ContextMenu.hide=function(){o.WidgetDiv.hideIfOwner(o.ContextMenu),o.ContextMenu.currentBlock=null},o.ContextMenu.dispose=function(){o.ContextMenu.menu_&&(o.ContextMenu.menu_.dispose(),o.ContextMenu.menu_=null)},o.ContextMenu.callbackFactory=function(n,a){return function(){o.Events.disable();try{var c=o.Xml.domToBlock(a,n.workspace),d=n.getRelativeToSurfaceXY();d.x=n.RTL?d.x-o.SNAP_RADIUS:d.x+o.SNAP_RADIUS,d.y+=2*o.SNAP_RADIUS,c.moveBy(d.x,d.y)}finally{o.Events.enable()}o.Events.isEnabled()&&!c.isShadow()&&o.Events.fire(new(o.Events.get(o.Events.BLOCK_CREATE))(c)),c.select()}},o.ContextMenu.commentDeleteOption=function(n){return{text:o.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){o.Events.setGroup(!0),n.dispose(!0,!0),o.Events.setGroup(!1)}}},o.ContextMenu.commentDuplicateOption=function(n){return{text:o.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){o.duplicate(n)}}},o.ContextMenu.workspaceCommentOption=function(n,a){if(!o.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var c={enabled:!o.utils.userAgent.IE};return c.text=o.Msg.ADD_COMMENT,c.callback=function(){var d=new o.WorkspaceCommentSvg(n,o.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,o.WorkspaceCommentSvg.DEFAULT_SIZE,o.WorkspaceCommentSvg.DEFAULT_SIZE),_=n.getInjectionDiv().getBoundingClientRect();_=new o.utils.Coordinate(a.clientX-_.left,a.clientY-_.top);var y=n.getOriginOffsetInPixels();(_=o.utils.Coordinate.difference(_,y)).scale(1/n.scale),d.moveBy(_.x,_.y),n.rendered&&(d.initSvg(),d.render(),d.select())},c},o.ContextMenuRegistry=function(){o.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},o.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},o.ContextMenuRegistry.registry=null,o.ContextMenuRegistry.prototype.register=function(n){if(this.registry_[n.id])throw Error('Menu item with ID "'+n.id+'" is already registered.');this.registry_[n.id]=n},o.ContextMenuRegistry.prototype.unregister=function(n){if(!this.registry_[n])throw Error('Menu item with ID "'+n+'" not found.');delete this.registry_[n]},o.ContextMenuRegistry.prototype.getItem=function(n){return this.registry_[n]||null},o.ContextMenuRegistry.prototype.getContextMenuOptions=function(n,a){var c=[],d=this.registry_;return Object.keys(d).forEach(function(_){if(n==(_=d[_]).scopeType){var y=_.preconditionFn(a);"hidden"!=y&&(_={text:"function"==typeof _.displayText?_.displayText(a):_.displayText,enabled:"enabled"==y,callback:_.callback,scope:a,weight:_.weight},c.push(_))}}),c.sort(function(_,y){return _.weight-y.weight}),c},new o.ContextMenuRegistry,o.Events.Selected=function(n,a,c){o.Events.Selected.superClass_.constructor.call(this,c),this.oldElementId=n,this.newElementId=a},o.utils.object.inherits(o.Events.Selected,o.Events.UiBase),o.Events.Selected.prototype.type=o.Events.SELECTED,o.Events.Selected.prototype.toJson=function(){var n=o.Events.Selected.superClass_.toJson.call(this);return n.oldElementId=this.oldElementId,n.newElementId=this.newElementId,n},o.Events.Selected.prototype.fromJson=function(n){o.Events.Selected.superClass_.fromJson.call(this,n),this.oldElementId=n.oldElementId,this.newElementId=n.newElementId},o.registry.register(o.registry.Type.EVENT,o.Events.SELECTED,o.Events.Selected),o.IBoundedElement=function(){},o.ICopyable=function(){},o.RenderedConnection=function(n,a){o.RenderedConnection.superClass_.constructor.call(this,n,a),this.db_=n.workspace.connectionDBList[a],this.dbOpposite_=n.workspace.connectionDBList[o.OPPOSITE_TYPE[a]],this.offsetInBlock_=new o.utils.Coordinate(0,0),this.trackedState_=o.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},o.utils.object.inherits(o.RenderedConnection,o.Connection),o.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},o.RenderedConnection.prototype.dispose=function(){o.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==o.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},o.RenderedConnection.prototype.getSourceBlock=function(){return o.RenderedConnection.superClass_.getSourceBlock.call(this)},o.RenderedConnection.prototype.targetBlock=function(){return o.RenderedConnection.superClass_.targetBlock.call(this)},o.RenderedConnection.prototype.distanceFrom=function(n){var a=this.x-n.x;return n=this.y-n.y,Math.sqrt(a*a+n*n)},o.RenderedConnection.prototype.bumpAwayFrom=function(n){if(!this.sourceBlock_.workspace.isDragging()){var a=this.sourceBlock_.getRootBlock();if(!a.isInFlyout){var c=!1;if(!a.isMovable()){if(!(a=n.getSourceBlock().getRootBlock()).isMovable())return;n=this,c=!0}var d=o.selected==a;d||a.addSelect();var _=n.x+o.SNAP_RADIUS+Math.floor(Math.random()*o.BUMP_RANDOMNESS)-this.x,y=n.y+o.SNAP_RADIUS+Math.floor(Math.random()*o.BUMP_RANDOMNESS)-this.y;c&&(y=-y),a.RTL&&(_=n.x-o.SNAP_RADIUS-Math.floor(Math.random()*o.BUMP_RANDOMNESS)-this.x),a.moveBy(_,y),d||a.removeSelect()}}},o.RenderedConnection.prototype.moveTo=function(n,a){this.trackedState_==o.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,a),this.trackedState_=o.RenderedConnection.TrackedState.TRACKED):this.trackedState_==o.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,a)),this.x=n,this.y=a},o.RenderedConnection.prototype.moveBy=function(n,a){this.moveTo(this.x+n,this.y+a)},o.RenderedConnection.prototype.moveToOffset=function(n){this.moveTo(n.x+this.offsetInBlock_.x,n.y+this.offsetInBlock_.y)},o.RenderedConnection.prototype.setOffsetInBlock=function(n,a){this.offsetInBlock_.x=n,this.offsetInBlock_.y=a},o.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},o.RenderedConnection.prototype.tighten=function(){var n=this.targetConnection.x-this.x,a=this.targetConnection.y-this.y;if(0!=n||0!=a){var c=this.targetBlock(),d=c.getSvgRoot();if(!d)throw Error("block is not rendered.");d=o.utils.getRelativeXY(d),c.getSvgRoot().setAttribute("transform","translate("+(d.x-n)+","+(d.y-a)+")"),c.moveConnections(-n,-a)}},o.RenderedConnection.prototype.closest=function(n,a){return this.dbOpposite_.searchForClosest(this,n,a)},o.RenderedConnection.prototype.highlight=function(){var n=this.sourceBlock_.workspace.getRenderer().getConstants(),a=n.shapeFor(this);a=this.type==o.connectionTypes.INPUT_VALUE||this.type==o.connectionTypes.OUTPUT_VALUE?o.utils.svgPaths.moveBy(0,-(n=n.TAB_OFFSET_FROM_TOP))+o.utils.svgPaths.lineOnAxis("v",n)+a.pathDown+o.utils.svgPaths.lineOnAxis("v",n):o.utils.svgPaths.moveBy(-(n=n.NOTCH_OFFSET_LEFT-n.CORNER_RADIUS),0)+o.utils.svgPaths.lineOnAxis("h",n)+a.pathLeft+o.utils.svgPaths.lineOnAxis("h",n),n=this.sourceBlock_.getRelativeToSurfaceXY(),o.Connection.highlightedPath_=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:a,transform:"translate("+(this.x-n.x)+","+(this.y-n.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},o.RenderedConnection.prototype.unhighlight=function(){o.utils.dom.removeNode(o.Connection.highlightedPath_),delete o.Connection.highlightedPath_},o.RenderedConnection.prototype.setTracking=function(n){n&&this.trackedState_==o.RenderedConnection.TrackedState.TRACKED||!n&&this.trackedState_==o.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(n?(this.db_.addConnection(this,this.y),this.trackedState_=o.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==o.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=o.RenderedConnection.TrackedState.UNTRACKED))},o.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var n=this.targetBlock().getDescendants(!1),a=0;a<n.length;a++){for(var c=n[a],d=c.getConnections_(!0),_=0;_<d.length;_++)d[_].setTracking(!1);for(c=c.getIcons(),_=0;_<c.length;_++)c[_].setVisible(!1)}},o.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var n=[];if(this.type!=o.connectionTypes.INPUT_VALUE&&this.type!=o.connectionTypes.NEXT_STATEMENT)return n;var a=this.targetBlock();if(a){if(a.isCollapsed()){var c=[];a.outputConnection&&c.push(a.outputConnection),a.nextConnection&&c.push(a.nextConnection),a.previousConnection&&c.push(a.previousConnection)}else c=a.getConnections_(!0);for(var d=0;d<c.length;d++)n.push.apply(n,c[d].startTrackingAll());n.length||(n[0]=a)}return n},o.RenderedConnection.prototype.isConnectionAllowed=function(n,a){return o.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(n)>a)&&o.RenderedConnection.superClass_.isConnectionAllowed.call(this,n)},o.RenderedConnection.prototype.onFailedConnect=function(n){var a=this.getSourceBlock();if(o.Events.recordUndo){var c=o.Events.getGroup();setTimeout(function(){a.isDisposed()||a.getParent()||(o.Events.setGroup(c),this.bumpAwayFrom(n),o.Events.setGroup(!1))}.bind(this),o.BUMP_DELAY)}},o.RenderedConnection.prototype.disconnectInternal_=function(n,a){o.RenderedConnection.superClass_.disconnectInternal_.call(this,n,a),n.rendered&&n.render(),a.rendered&&(a.updateDisabled(),a.render(),a.getSvgRoot().style.display="block")},o.RenderedConnection.prototype.respawnShadow_=function(){o.RenderedConnection.superClass_.respawnShadow_.call(this);var n=this.targetBlock();n&&(n.initSvg(),n.render(!1),(n=this.getSourceBlock()).rendered&&n.render())},o.RenderedConnection.prototype.neighbours=function(n){return this.dbOpposite_.getNeighbours(this,n)},o.RenderedConnection.prototype.connect_=function(n){o.RenderedConnection.superClass_.connect_.call(this,n);var a=this.getSourceBlock();n=n.getSourceBlock();var c=a.rendered,d=n.rendered;c&&a.updateDisabled(),d&&n.updateDisabled(),c&&d&&(this.type==o.connectionTypes.NEXT_STATEMENT||this.type==o.connectionTypes.PREVIOUS_STATEMENT?n.render():a.render()),(a=a.getInputWithBlock(n))&&(a=a.isVisible(),n.getSvgRoot().style.display=a?"block":"none")},o.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},o.BasicCursor=function(){o.BasicCursor.superClass_.constructor.call(this)},o.utils.object.inherits(o.BasicCursor,o.Cursor),o.BasicCursor.registrationName="basicCursor",o.BasicCursor.prototype.next=function(){var n=this.getCurNode();return n?((n=this.getNextNode_(n,this.validNode_))&&this.setCurNode(n),n):null},o.BasicCursor.prototype.in=function(){return this.next()},o.BasicCursor.prototype.prev=function(){var n=this.getCurNode();return n?((n=this.getPreviousNode_(n,this.validNode_))&&this.setCurNode(n),n):null},o.BasicCursor.prototype.out=function(){return this.prev()},o.BasicCursor.prototype.getNextNode_=function(n,a){if(!n)return null;var c=n.in()||n.next();return a(c)?c:c?this.getNextNode_(c,a):a(n=this.findSiblingOrParent_(n.out()))?n:n?this.getNextNode_(n,a):null},o.BasicCursor.prototype.getPreviousNode_=function(n,a){if(!n)return null;var c=n.prev();return a(c=c?this.getRightMostChild_(c):n.out())?c:c?this.getPreviousNode_(c,a):null},o.BasicCursor.prototype.validNode_=function(n){var a=!1;return((n=n&&n.getType())==o.ASTNode.types.OUTPUT||n==o.ASTNode.types.INPUT||n==o.ASTNode.types.FIELD||n==o.ASTNode.types.NEXT||n==o.ASTNode.types.PREVIOUS||n==o.ASTNode.types.WORKSPACE)&&(a=!0),a},o.BasicCursor.prototype.findSiblingOrParent_=function(n){return n?n.next()||this.findSiblingOrParent_(n.out()):null},o.BasicCursor.prototype.getRightMostChild_=function(n){if(!n.in())return n;for(n=n.in();n.next();)n=n.next();return this.getRightMostChild_(n)},o.registry.register(o.registry.Type.CURSOR,o.BasicCursor.registrationName,o.BasicCursor),o.TabNavigateCursor=function(){o.TabNavigateCursor.superClass_.constructor.call(this)},o.utils.object.inherits(o.TabNavigateCursor,o.BasicCursor),o.TabNavigateCursor.prototype.validNode_=function(n){var a=!1,c=n&&n.getType();return n&&(n=n.getLocation(),c==o.ASTNode.types.FIELD&&n&&n.isTabNavigable()&&n.isClickable()&&(a=!0)),a},o.BlockSvg=function(n,a,c){this.svgGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=n.getRenderer().getConstants().getBlockStyle(null),this.pathObject=n.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=n,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=o.utils.is3dSupported()&&!!n.getBlockDragSurface();var d=this.pathObject.svgPath;d.tooltip=this,o.Tooltip.bindMouseEvents(d),o.BlockSvg.superClass_.constructor.call(this,n,a,c),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:o.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},o.utils.object.inherits(o.BlockSvg,o.Block),o.BlockSvg.prototype.height=0,o.BlockSvg.prototype.width=0,o.BlockSvg.prototype.warningTextDb_=null,o.BlockSvg.INLINE=-1,o.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",o.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var a,n=0;a=this.inputList[n];n++)a.init();for(a=this.getIcons(),n=0;n<a.length;n++)a[n].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),n=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!n||o.browserEvents.conditionalBind(n,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,n.parentNode||this.workspace.getCanvas().appendChild(n)},o.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},o.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},o.BlockSvg.prototype.getColourShadow=function(){return o.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},o.BlockSvg.prototype.getColourBorder=function(){return o.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},o.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(o.selected!=this){var n=null;if(o.selected){n=o.selected.id,o.Events.disable();try{o.selected.unselect()}finally{o.Events.enable()}}n=new(o.Events.get(o.Events.SELECTED))(n,this.id,this.workspace.id),o.Events.fire(n),o.selected=this,this.addSelect()}},o.BlockSvg.prototype.unselect=function(){if(o.selected==this){var n=new(o.Events.get(o.Events.SELECTED))(this.id,null,this.workspace.id);n.workspaceId=this.workspace.id,o.Events.fire(n),o.selected=null,this.removeSelect()}},o.BlockSvg.prototype.mutator=null,o.BlockSvg.prototype.comment=null,o.BlockSvg.prototype.commentIcon_=null,o.BlockSvg.prototype.warning=null,o.BlockSvg.prototype.getIcons=function(){var n=[];return this.mutator&&n.push(this.mutator),this.commentIcon_&&n.push(this.commentIcon_),this.warning&&n.push(this.warning),n},o.BlockSvg.prototype.setParent=function(n){var a=this.parentBlock_;if(n!=a){o.utils.dom.startTextWidthCache(),o.BlockSvg.superClass_.setParent.call(this,n),o.utils.dom.stopTextWidthCache();var c=this.getSvgRoot();if(!this.workspace.isClearing&&c){var d=this.getRelativeToSurfaceXY();n?(n.getSvgRoot().appendChild(c),n=this.getRelativeToSurfaceXY(),this.moveConnections(n.x-d.x,n.y-d.y)):a&&(this.workspace.getCanvas().appendChild(c),this.translate(d.x,d.y)),this.applyColour()}}},o.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var n=0,a=0,c=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,d=this.getSvgRoot();if(d)do{var _=o.utils.getRelativeXY(d);n+=_.x,a+=_.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==d&&(n+=(_=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,a+=_.y),d=d.parentNode}while(d&&d!=this.workspace.getCanvas()&&d!=c);return new o.utils.Coordinate(n,a)},o.BlockSvg.prototype.moveBy=function(n,a){if(this.parentBlock_)throw Error("Block has parent.");var c=o.Events.isEnabled();if(c)var d=new(o.Events.get(o.Events.BLOCK_MOVE))(this);var _=this.getRelativeToSurfaceXY();this.translate(_.x+n,_.y+a),this.moveConnections(n,a),c&&(d.recordNew(),o.Events.fire(d)),this.workspace.resizeContents()},o.BlockSvg.prototype.translate=function(n,a){this.getSvgRoot().setAttribute("transform","translate("+n+","+a+")")},o.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var n=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(n.x,n.y),(n=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(n)}},o.BlockSvg.prototype.moveTo=function(n){var a=this.getRelativeToSurfaceXY();this.moveBy(n.x-a.x,n.y-a.y)},o.BlockSvg.prototype.moveOffDragSurface=function(n){this.useDragSurface_&&(this.translate(n.x,n.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},o.BlockSvg.prototype.moveDuringDrag=function(n){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(n.x,n.y):(this.svgGroup_.translate_="translate("+n.x+","+n.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},o.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},o.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var n=this.workspace.getGrid();if(n&&n.shouldSnap()){var a=n.getSpacing(),c=a/2,d=this.getRelativeToSurfaceXY();n=Math.round((d.x-c)/a)*a+c-d.x,a=Math.round((d.y-c)/a)*a+c-d.y,n=Math.round(n),a=Math.round(a),0==n&&0==a||this.moveBy(n,a)}}},o.BlockSvg.prototype.getBoundingRectangle=function(){var n=this.getRelativeToSurfaceXY(),a=this.getHeightWidth();if(this.RTL)var c=n.x-a.width,d=n.x;else c=n.x,d=n.x+a.width;return new o.utils.Rect(n.y,n.y+a.height,c,d)},o.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var a,n=0;a=this.inputList[n];n++)a.markDirty()},o.BlockSvg.prototype.setCollapsed=function(n){this.collapsed_!=n&&(o.BlockSvg.superClass_.setCollapsed.call(this,n),n?this.rendered&&this.render():this.updateCollapsed_())},o.BlockSvg.prototype.updateCollapsed_=function(){for(var _,n=this.isCollapsed(),a=o.constants.COLLAPSED_INPUT_NAME,c=o.constants.COLLAPSED_FIELD_NAME,d=0;_=this.inputList[d];d++)_.name!=a&&_.setVisible(!n);if(n){for(_=this.getIcons(),d=0;n=_[d];d++)n.setVisible(!1);d=this.toString(o.COLLAPSE_CHARS),(_=this.getField(c))?_.setValue(d):(_=this.getInput(a)||this.appendDummyInput(a)).appendField(new o.FieldLabel(d),c)}else this.updateDisabled(),this.removeInput(a)},o.BlockSvg.prototype.tab=function(n,a){var c=new o.TabNavigateCursor;c.setCurNode(o.ASTNode.createFieldNode(n)),n=c.getCurNode(),a?c.next():c.prev(),(a=c.getCurNode())&&a!==n&&(a.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(a))},o.BlockSvg.prototype.onMouseDown_=function(n){var a=this.workspace&&this.workspace.getGesture(n);a&&a.handleBlockStart(n,this)},o.BlockSvg.prototype.showHelp=function(){var n="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;n&&window.open(n)},o.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var n=o.ContextMenuRegistry.registry.getContextMenuOptions(o.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(n),n},o.BlockSvg.prototype.showContextMenu=function(n){var a=this.generateContextMenu();a&&a.length&&(o.ContextMenu.show(n,a,this.RTL),o.ContextMenu.currentBlock=this)},o.BlockSvg.prototype.moveConnections=function(n,a){if(this.rendered){for(var c=this.getConnections_(!1),d=0;d<c.length;d++)c[d].moveBy(n,a);for(c=this.getIcons(),d=0;d<c.length;d++)c[d].computeIconLocation();for(d=0;d<this.childBlocks_.length;d++)this.childBlocks_[d].moveConnections(n,a)}},o.BlockSvg.prototype.setDragging=function(n){if(n){var a=this.getSvgRoot();a.translate_="",a.skew_="",o.draggingConnections=o.draggingConnections.concat(this.getConnections_(!0)),o.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else o.draggingConnections=[],o.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(a=0;a<this.childBlocks_.length;a++)this.childBlocks_[a].setDragging(n)},o.BlockSvg.prototype.setMovable=function(n){o.BlockSvg.superClass_.setMovable.call(this,n),this.pathObject.updateMovable(n)},o.BlockSvg.prototype.setEditable=function(n){o.BlockSvg.superClass_.setEditable.call(this,n),n=this.getIcons();for(var a=0;a<n.length;a++)n[a].updateEditable()},o.BlockSvg.prototype.setShadow=function(n){o.BlockSvg.superClass_.setShadow.call(this,n),this.applyColour()},o.BlockSvg.prototype.setInsertionMarker=function(n){this.isInsertionMarker_!=n&&(this.isInsertionMarker_=n)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},o.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},o.BlockSvg.prototype.dispose=function(n,a){if(this.workspace){o.Tooltip.dispose(),o.Tooltip.unbindMouseEvents(this.pathObject.svgPath),o.utils.dom.startTextWidthCache();var c=this.workspace;if(o.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),o.ContextMenu.currentBlock==this&&o.ContextMenu.hide(),a&&this.rendered&&(this.unplug(n),o.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var d in this.warningTextDb_)clearTimeout(this.warningTextDb_[d]);this.warningTextDb_=null}for(a=this.getIcons(),d=0;d<a.length;d++)a[d].dispose();o.BlockSvg.superClass_.dispose.call(this,!!n),o.utils.dom.removeNode(this.svgGroup_),c.resizeContents(),this.svgGroup_=null,o.utils.dom.stopTextWidthCache()}},o.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var n=o.Xml.blockToDom(this,!0);o.Xml.deleteNext(n);var a=this.getRelativeToSurfaceXY();return n.setAttribute("x",this.RTL?-a.x:a.x),n.setAttribute("y",a.y),{xml:n,source:this.workspace,typeCounts:o.utils.getBlockTypeCounts(this,!0)}},o.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var n=this.getIcons(),a=0;a<n.length;a++)n[a].applyColour();for(n=0;a=this.inputList[n];n++)for(var d,c=0;d=a.fieldRow[c];c++)d.applyColour()},o.BlockSvg.prototype.updateDisabled=function(){var n=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var c,a=0;c=n[a];a++)c.rendered&&c.updateDisabled()},o.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},o.BlockSvg.prototype.setCommentText=function(n){if(!o.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=n&&(o.BlockSvg.superClass_.setCommentText.call(this,n),!!this.commentIcon_==(n=null!=n)?this.commentIcon_.updateText():(n?this.comment=this.commentIcon_=new o.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},o.BlockSvg.prototype.setWarningText=function(n,a){if(!o.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var c=a||"";if(c)this.warningTextDb_[c]&&(clearTimeout(this.warningTextDb_[c]),delete this.warningTextDb_[c]);else for(var d in this.warningTextDb_)clearTimeout(this.warningTextDb_[d]),delete this.warningTextDb_[d];if(this.workspace.isDragging()){var _=this;this.warningTextDb_[c]=setTimeout(function(){_.workspace&&(delete _.warningTextDb_[c],_.setWarningText(n,c))},100)}else{if(this.isInFlyout&&(n=null),a=!1,"string"==typeof n){d=this.getSurroundParent();for(var y=null;d;)d.isCollapsed()&&(y=d),d=d.getSurroundParent();y&&y.setWarningText(o.Msg.COLLAPSED_WARNINGS_WARNING,o.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new o.Warning(this),a=!0),this.warning.setText(n,c)}else this.warning&&!c?(this.warning.dispose(),a=!0):this.warning&&(a=this.warning.getText(),this.warning.setText("",c),(d=this.warning.getText())||this.warning.dispose(),a=a!=d);a&&this.rendered&&(this.render(),this.bumpNeighbours())}},o.BlockSvg.prototype.setMutator=function(n){this.mutator&&this.mutator!==n&&this.mutator.dispose(),n&&(n.setBlock(this),this.mutator=n,n.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},o.BlockSvg.prototype.setEnabled=function(n){this.isEnabled()!=n&&(o.BlockSvg.superClass_.setEnabled.call(this,n),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},o.BlockSvg.prototype.setHighlighted=function(n){this.rendered&&this.pathObject.updateHighlighted(n)},o.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},o.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},o.BlockSvg.prototype.setDeleteStyle=function(n){this.pathObject.updateDraggingDelete(n)},o.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},o.BlockSvg.prototype.setColour=function(n){o.BlockSvg.superClass_.setColour.call(this,n),n=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(n.style),this.style=n.style,this.styleName_=n.name,this.applyColour()},o.BlockSvg.prototype.setStyle=function(n){var a=this.workspace.getRenderer().getConstants().getBlockStyle(n);if(this.styleName_=n,!a)throw Error("Invalid style name: "+n);this.hat=a.hat,this.pathObject.setStyle(a),this.colour_=a.colourPrimary,this.style=a,this.applyColour()},o.BlockSvg.prototype.bringToFront=function(){var n=this;do{var a=n.getSvgRoot(),c=a.parentNode,d=c.childNodes;d[d.length-1]!==a&&c.appendChild(a),n=n.getParent()}while(n)},o.BlockSvg.prototype.setPreviousStatement=function(n,a){o.BlockSvg.superClass_.setPreviousStatement.call(this,n,a),this.rendered&&(this.render(),this.bumpNeighbours())},o.BlockSvg.prototype.setNextStatement=function(n,a){o.BlockSvg.superClass_.setNextStatement.call(this,n,a),this.rendered&&(this.render(),this.bumpNeighbours())},o.BlockSvg.prototype.setOutput=function(n,a){o.BlockSvg.superClass_.setOutput.call(this,n,a),this.rendered&&(this.render(),this.bumpNeighbours())},o.BlockSvg.prototype.setInputsInline=function(n){o.BlockSvg.superClass_.setInputsInline.call(this,n),this.rendered&&(this.render(),this.bumpNeighbours())},o.BlockSvg.prototype.removeInput=function(n,a){return n=o.BlockSvg.superClass_.removeInput.call(this,n,a),this.rendered&&(this.render(),this.bumpNeighbours()),n},o.BlockSvg.prototype.moveNumberedInputBefore=function(n,a){o.BlockSvg.superClass_.moveNumberedInputBefore.call(this,n,a),this.rendered&&(this.render(),this.bumpNeighbours())},o.BlockSvg.prototype.appendInput_=function(n,a){return n=o.BlockSvg.superClass_.appendInput_.call(this,n,a),this.rendered&&(this.render(),this.bumpNeighbours()),n},o.BlockSvg.prototype.setConnectionTracking=function(n){if(this.previousConnection&&this.previousConnection.setTracking(n),this.outputConnection&&this.outputConnection.setTracking(n),this.nextConnection){this.nextConnection.setTracking(n);var a=this.nextConnection.targetBlock();a&&a.setConnectionTracking(n)}if(!this.collapsed_)for(a=0;a<this.inputList.length;a++){var c=this.inputList[a].connection;c&&(c.setTracking(n),(c=c.targetBlock())&&c.setConnectionTracking(n))}},o.BlockSvg.prototype.getConnections_=function(n){var a=[];if((n||this.rendered)&&(this.outputConnection&&a.push(this.outputConnection),this.previousConnection&&a.push(this.previousConnection),this.nextConnection&&a.push(this.nextConnection),n||!this.collapsed_)){n=0;for(var c;c=this.inputList[n];n++)c.connection&&a.push(c.connection)}return a},o.BlockSvg.prototype.lastConnectionInStack=function(n){return o.BlockSvg.superClass_.lastConnectionInStack.call(this,n)},o.BlockSvg.prototype.getMatchingConnection=function(n,a){return o.BlockSvg.superClass_.getMatchingConnection.call(this,n,a)},o.BlockSvg.prototype.makeConnection_=function(n){return new o.RenderedConnection(this,n)},o.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var n=this.getRootBlock();if(!n.isInFlyout)for(var d,a=this.getConnections_(!1),c=0;d=a[c];c++){d.isConnected()&&d.isSuperior()&&d.targetBlock().bumpNeighbours();for(var R,_=d.neighbours(o.SNAP_RADIUS),y=0;R=_[y];y++)d.isConnected()&&R.isConnected()||R.getSourceBlock().getRootBlock()!=n&&(d.isSuperior()?R.bumpAwayFrom(d):d.bumpAwayFrom(R))}}},o.BlockSvg.prototype.scheduleSnapAndBump=function(){var n=this,a=o.Events.getGroup();setTimeout(function(){o.Events.setGroup(a),n.snapToGrid(),o.Events.setGroup(!1)},o.BUMP_DELAY/2),setTimeout(function(){o.Events.setGroup(a),n.bumpNeighbours(),o.Events.setGroup(!1)},o.BUMP_DELAY)},o.BlockSvg.prototype.positionNearConnection=function(n,a){n.type!=o.connectionTypes.NEXT_STATEMENT&&n.type!=o.connectionTypes.INPUT_VALUE||this.moveBy(a.x-n.x,a.y-n.y)},o.BlockSvg.prototype.getParent=function(){return o.BlockSvg.superClass_.getParent.call(this)},o.BlockSvg.prototype.getRootBlock=function(){return o.BlockSvg.superClass_.getRootBlock.call(this)},o.BlockSvg.prototype.render=function(n){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,o.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==n){var a=this.getParent();a?a.render(!0):this.workspace.resizeContents()}o.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},o.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(o.MarkerManager.LOCAL_MARKER).draw()},o.BlockSvg.prototype.updateConnectionLocations_=function(){var n=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(n),this.outputConnection&&this.outputConnection.moveToOffset(n);for(var a=0;a<this.inputList.length;a++){var c=this.inputList[a].connection;c&&(c.moveToOffset(n),c.isConnected()&&c.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(n),this.nextConnection.isConnected()&&this.nextConnection.tighten())},o.BlockSvg.prototype.setCursorSvg=function(n){this.pathObject.setCursorSvg(n)},o.BlockSvg.prototype.setMarkerSvg=function(n){this.pathObject.setMarkerSvg(n)},o.BlockSvg.prototype.getHeightWidth=function(){var n=this.height,a=this.width,c=this.getNextBlock();if(c){c=c.getHeightWidth();var d=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;n+=c.height-d,a=Math.max(a,c.width)}return{height:n,width:a}},o.BlockSvg.prototype.fadeForReplacement=function(n){this.pathObject.updateReplacementFade(n)},o.BlockSvg.prototype.highlightShapeForInput=function(n,a){this.pathObject.updateShapeForInputHighlight(n,a)},o.ConnectionDB=function(n){this.connections_=[],this.connectionChecker_=n},o.ConnectionDB.prototype.addConnection=function(n,a){a=this.calculateIndexForYPos_(a),this.connections_.splice(a,0,n)},o.ConnectionDB.prototype.findIndexOfConnection_=function(n,a){if(!this.connections_.length)return-1;var c=this.calculateIndexForYPos_(a);if(c>=this.connections_.length)return-1;a=n.y;for(var d=c;0<=d&&this.connections_[d].y==a;){if(this.connections_[d]==n)return d;d--}for(d=c;d<this.connections_.length&&this.connections_[d].y==a;){if(this.connections_[d]==n)return d;d++}return-1},o.ConnectionDB.prototype.calculateIndexForYPos_=function(n){if(!this.connections_.length)return 0;for(var a=0,c=this.connections_.length;a<c;){var d=Math.floor((a+c)/2);if(this.connections_[d].y<n)a=d+1;else{if(!(this.connections_[d].y>n)){a=d;break}c=d}}return a},o.ConnectionDB.prototype.removeConnection=function(n,a){if(-1==(n=this.findIndexOfConnection_(n,a)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(n,1)},o.ConnectionDB.prototype.getNeighbours=function(n,a){function c(H){var F=_-d[H].x,Y=y-d[H].y;return Math.sqrt(F*F+Y*Y)<=a&&B.push(d[H]),Y<a}var d=this.connections_,_=n.x,y=n.y;n=0;for(var R=d.length-2,x=R;n<x;)d[x].y<y?n=x:R=x,x=Math.floor((n+R)/2);var B=[];if(R=n=x,d.length){for(;0<=n&&c(n);)n--;do{R++}while(R<d.length&&c(R))}return B},o.ConnectionDB.prototype.isInYRange_=function(n,a,c){return Math.abs(this.connections_[n].y-a)<=c},o.ConnectionDB.prototype.searchForClosest=function(n,a,c){if(!this.connections_.length)return{connection:null,radius:a};var d=n.y,_=n.x;n.x=_+c.x,n.y=d+c.y;var y=this.calculateIndexForYPos_(n.y);c=null;for(var x,R=a,B=y-1;0<=B&&this.isInYRange_(B,n.y,a);)this.connectionChecker_.canConnect(n,x=this.connections_[B],!0,R)&&(c=x,R=x.distanceFrom(n)),B--;for(;y<this.connections_.length&&this.isInYRange_(y,n.y,a);)this.connectionChecker_.canConnect(n,x=this.connections_[y],!0,R)&&(c=x,R=x.distanceFrom(n)),y++;return n.x=_,n.y=d,{connection:c,radius:R}},o.ConnectionDB.init=function(n){var a=[];return a[o.connectionTypes.INPUT_VALUE]=new o.ConnectionDB(n),a[o.connectionTypes.OUTPUT_VALUE]=new o.ConnectionDB(n),a[o.connectionTypes.NEXT_STATEMENT]=new o.ConnectionDB(n),a[o.connectionTypes.PREVIOUS_STATEMENT]=new o.ConnectionDB(n),a},o.Events.ThemeChange=function(n,a){o.Events.ThemeChange.superClass_.constructor.call(this,a),this.themeName=n},o.utils.object.inherits(o.Events.ThemeChange,o.Events.UiBase),o.Events.ThemeChange.prototype.type=o.Events.THEME_CHANGE,o.Events.ThemeChange.prototype.toJson=function(){var n=o.Events.ThemeChange.superClass_.toJson.call(this);return n.themeName=this.themeName,n},o.Events.ThemeChange.prototype.fromJson=function(n){o.Events.ThemeChange.superClass_.fromJson.call(this,n),this.themeName=n.themeName},o.registry.register(o.registry.Type.EVENT,o.Events.THEME_CHANGE,o.Events.ThemeChange),o.Events.ViewportChange=function(n,a,c,d,_){o.Events.ViewportChange.superClass_.constructor.call(this,d),this.viewTop=n,this.viewLeft=a,this.scale=c,this.oldScale=_},o.utils.object.inherits(o.Events.ViewportChange,o.Events.UiBase),o.Events.ViewportChange.prototype.type=o.Events.VIEWPORT_CHANGE,o.Events.ViewportChange.prototype.toJson=function(){var n=o.Events.ViewportChange.superClass_.toJson.call(this);return n.viewTop=this.viewTop,n.viewLeft=this.viewLeft,n.scale=this.scale,n.oldScale=this.oldScale,n},o.Events.ViewportChange.prototype.fromJson=function(n){o.Events.ViewportChange.superClass_.fromJson.call(this,n),this.viewTop=n.viewTop,this.viewLeft=n.viewLeft,this.scale=n.scale,this.oldScale=n.oldScale},o.registry.register(o.registry.Type.EVENT,o.Events.VIEWPORT_CHANGE,o.Events.ViewportChange),o.IMetricsManager=function(){},o.MetricsManager=function(n){this.workspace_=n},o.MetricsManager.prototype.getDimensionsPx_=function(n){var a=0,c=0;return n&&(a=n.getWidth(),c=n.getHeight()),new o.utils.Size(a,c)},o.MetricsManager.prototype.getFlyoutMetrics=function(n){return{width:(n=this.getDimensionsPx_(this.workspace_.getFlyout(n))).width,height:n.height,position:this.workspace_.toolboxPosition}},o.MetricsManager.prototype.getToolboxMetrics=function(){var n=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:n.width,height:n.height,position:this.workspace_.toolboxPosition}},o.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},o.MetricsManager.prototype.getAbsoluteMetrics=function(){var n=0,a=this.getToolboxMetrics(),c=this.getFlyoutMetrics(!0),d=!!this.workspace_.getToolbox(),_=!!this.workspace_.getFlyout(!0),y=d?a.position:c.position,R=y==o.utils.toolbox.Position.LEFT;return y=y==o.utils.toolbox.Position.TOP,d&&R?n=a.width:_&&R&&(n=c.width),R=0,d&&y?R=a.height:_&&y&&(R=c.height),{top:R,left:n}},o.MetricsManager.prototype.getViewMetrics=function(n){n=n?this.workspace_.scale:1;var a=this.getSvgMetrics(),c=this.getToolboxMetrics(),d=this.getFlyoutMetrics(!0),_=this.workspace_.getToolbox()?c.position:d.position;return this.workspace_.getToolbox()?_==o.utils.toolbox.Position.TOP||_==o.utils.toolbox.Position.BOTTOM?a.height-=c.height:(_==o.utils.toolbox.Position.LEFT||_==o.utils.toolbox.Position.RIGHT)&&(a.width-=c.width):this.workspace_.getFlyout(!0)&&(_==o.utils.toolbox.Position.TOP||_==o.utils.toolbox.Position.BOTTOM?a.height-=d.height:(_==o.utils.toolbox.Position.LEFT||_==o.utils.toolbox.Position.RIGHT)&&(a.width-=d.width)),{height:a.height/n,width:a.width/n,top:-this.workspace_.scrollY/n,left:-this.workspace_.scrollX/n}},o.MetricsManager.prototype.getContentMetrics=function(n){n=n?1:this.workspace_.scale;var a=this.workspace_.getBlocksBoundingBox();return{height:(a.bottom-a.top)*n,width:(a.right-a.left)*n,top:a.top*n,left:a.left*n}},o.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},o.MetricsManager.prototype.getComputedFixedEdges_=function(n){if(!this.hasFixedEdges())return{};var a=this.workspace_.isMovableHorizontally(),c=this.workspace_.isMovableVertically();n=n||this.getViewMetrics(!1);var d={};return c||(d.top=n.top,d.bottom=n.top+n.height),a||(d.left=n.left,d.right=n.left+n.width),d},o.MetricsManager.prototype.getPaddedContent_=function(n,a){var c=a.top+a.height,d=a.left+a.width,_=n.width,y=_/2,R=(n=n.height)/2;return{top:Math.min(a.top-R,c-n),bottom:Math.max(c+R,a.top+n),left:Math.min(a.left-y,d-_),right:Math.max(d+y,a.left+_)}},o.MetricsManager.prototype.getScrollMetrics=function(n,a,c){n=n?this.workspace_.scale:1,a=a||this.getViewMetrics(!1);var d=c||this.getContentMetrics();c=this.getComputedFixedEdges_(a),a=this.getPaddedContent_(a,d);var _=void 0!==c.left?c.left:a.left;return{top:(d=void 0!==c.top?c.top:a.top)/n,left:_/n,width:((void 0!==c.right?c.right:a.right)-_)/n,height:((void 0!==c.bottom?c.bottom:a.bottom)-d)/n}},o.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},o.MetricsManager.prototype.getMetrics=function(){var n=this.getToolboxMetrics(),a=this.getFlyoutMetrics(!0),c=this.getSvgMetrics(),d=this.getAbsoluteMetrics(),_=this.getViewMetrics(),y=this.getContentMetrics(),R=this.getScrollMetrics(!1,_,y);return{contentHeight:y.height,contentWidth:y.width,contentTop:y.top,contentLeft:y.left,scrollHeight:R.height,scrollWidth:R.width,scrollTop:R.top,scrollLeft:R.left,viewHeight:_.height,viewWidth:_.width,viewTop:_.top,viewLeft:_.left,absoluteTop:d.top,absoluteLeft:d.left,svgHeight:c.height,svgWidth:c.width,toolboxWidth:n.width,toolboxHeight:n.height,toolboxPosition:n.position,flyoutWidth:a.width,flyoutHeight:a.height}},o.registry.register(o.registry.Type.METRICS_MANAGER,o.registry.DEFAULT,o.MetricsManager),o.FlyoutMetricsManager=function(n,a){this.flyout_=a,o.FlyoutMetricsManager.superClass_.constructor.call(this,n)},o.utils.object.inherits(o.FlyoutMetricsManager,o.MetricsManager),o.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var n=this.workspace_.getCanvas().getBBox()}catch(a){n={height:0,y:0,width:0,x:0}}return n},o.FlyoutMetricsManager.prototype.getContentMetrics=function(n){var a=this.getBoundingBox_();return{height:a.height*(n=n?1:this.workspace_.scale),width:a.width*n,top:a.y*n,left:a.x*n}},o.FlyoutMetricsManager.prototype.getScrollMetrics=function(n,a,c){return{height:((a=c||this.getContentMetrics()).height+2*(c=this.flyout_.MARGIN*this.workspace_.scale))/(n=n?this.workspace_.scale:1),width:(a.width+a.left+c)/n,top:0,left:0}},o.ThemeManager=function(n,a){this.workspace_=n,this.theme_=a,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},o.ThemeManager.prototype.getTheme=function(){return this.theme_},o.ThemeManager.prototype.setTheme=function(n){var c,a=this.theme_;for(this.theme_=n,(n=this.workspace_.getInjectionDiv())&&(a&&o.utils.dom.removeClass(n,a.getClassName()),o.utils.dom.addClass(n,this.theme_.getClassName())),a=0;n=this.subscribedWorkspaces_[a];a++)n.refreshTheme();for(a=0,n=Object.keys(this.componentDB_);c=n[a];a++)for(var _,d=0;_=this.componentDB_[c][d];d++){var y=_.element;_=_.propertyName;var R=this.theme_&&this.theme_.getComponentStyle(c);y.style[_]=R||""}o.hideChaff()},o.ThemeManager.prototype.subscribeWorkspace=function(n){this.subscribedWorkspaces_.push(n)},o.ThemeManager.prototype.unsubscribeWorkspace=function(n){if(0>(n=this.subscribedWorkspaces_.indexOf(n)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(n,1)},o.ThemeManager.prototype.subscribe=function(n,a,c){this.componentDB_[a]||(this.componentDB_[a]=[]),this.componentDB_[a].push({element:n,propertyName:c}),a=this.theme_&&this.theme_.getComponentStyle(a),n.style[c]=a||""},o.ThemeManager.prototype.unsubscribe=function(n){if(n)for(var d,a=Object.keys(this.componentDB_),c=0;d=a[c];c++){for(var _=this.componentDB_[d],y=_.length-1;0<=y;y--)_[y].element===n&&_.splice(y,1);this.componentDB_[d].length||delete this.componentDB_[d]}},o.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},o.TouchGesture=function(n,a){o.TouchGesture.superClass_.constructor.call(this,n,a),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},o.utils.object.inherits(o.TouchGesture,o.Gesture),o.TouchGesture.ZOOM_IN_MULTIPLIER=5,o.TouchGesture.ZOOM_OUT_MULTIPLIER=6,o.TouchGesture.prototype.doStart=function(n){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,o.TouchGesture.superClass_.doStart.call(this,n),!this.isEnding_&&o.Touch.isTouchEvent(n)&&this.handleTouchStart(n)},o.TouchGesture.prototype.bindMouseEvents=function(n){this.onStartWrapper_=o.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=o.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=o.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),n.preventDefault(),n.stopPropagation()},o.TouchGesture.prototype.handleStart=function(n){!this.isDragging()&&o.Touch.isTouchEvent(n)&&(this.handleTouchStart(n),this.isMultiTouch()&&o.longStop_())},o.TouchGesture.prototype.handleMove=function(n){this.isDragging()?o.Touch.shouldHandleEvent(n)&&o.TouchGesture.superClass_.handleMove.call(this,n):this.isMultiTouch()?(o.Touch.isTouchEvent(n)&&this.handleTouchMove(n),o.longStop_()):o.TouchGesture.superClass_.handleMove.call(this,n)},o.TouchGesture.prototype.handleUp=function(n){o.Touch.isTouchEvent(n)&&!this.isDragging()&&this.handleTouchEnd(n),!this.isMultiTouch()||this.isDragging()?o.Touch.shouldHandleEvent(n)&&o.TouchGesture.superClass_.handleUp.call(this,n):(n.preventDefault(),n.stopPropagation(),this.dispose())},o.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},o.TouchGesture.prototype.dispose=function(){o.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&o.browserEvents.unbind(this.onStartWrapper_)},o.TouchGesture.prototype.handleTouchStart=function(n){var a=o.Touch.getTouchIdentifierFromEvent(n);this.cachedPoints_[a]=this.getTouchPoint(n),2==(a=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=o.utils.Coordinate.distance(this.cachedPoints_[a[0]],this.cachedPoints_[a[1]]),this.isMultiTouch_=!0,n.preventDefault())},o.TouchGesture.prototype.handleTouchMove=function(n){var a=o.Touch.getTouchIdentifierFromEvent(n);this.cachedPoints_[a]=this.getTouchPoint(n),a=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===a.length?this.handlePinch_(n):o.TouchGesture.superClass_.handleMove.call(this,n)},o.TouchGesture.prototype.handlePinch_=function(n){var a=Object.keys(this.cachedPoints_);if(a=o.utils.Coordinate.distance(this.cachedPoints_[a[0]],this.cachedPoints_[a[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var c=a-this.previousScale_;c=0<c?c*o.TouchGesture.ZOOM_IN_MULTIPLIER:c*o.TouchGesture.ZOOM_OUT_MULTIPLIER;var d=this.startWorkspace_,_=o.utils.mouseToSvg(n,d.getParentSvg(),d.getInverseScreenCTM());d.zoom(_.x,_.y,c)}this.previousScale_=a,n.preventDefault()},o.TouchGesture.prototype.handleTouchEnd=function(n){n=o.Touch.getTouchIdentifierFromEvent(n),this.cachedPoints_[n]&&delete this.cachedPoints_[n],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},o.TouchGesture.prototype.getTouchPoint=function(n){return this.startWorkspace_?new o.utils.Coordinate(n.pageX?n.pageX:n.changedTouches[0].pageX,n.pageY?n.pageY:n.changedTouches[0].pageY):null},o.WorkspaceAudio=function(n){this.parentWorkspace_=n,this.SOUNDS_=Object.create(null)},o.WorkspaceAudio.prototype.lastSound_=null,o.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},o.WorkspaceAudio.prototype.load=function(n,a){if(n.length){try{var c=new o.utils.global.Audio}catch(x){return}for(var d,_=0;_<n.length;_++){var y=n[_],R=y.match(/\.(\w+)$/);if(R&&c.canPlayType("audio/"+R[1])){d=new o.utils.global.Audio(y);break}}d&&d.play&&(this.SOUNDS_[a]=d)}},o.WorkspaceAudio.prototype.preload=function(){for(var n in this.SOUNDS_){var a=this.SOUNDS_[n];a.volume=.01;var c=a.play();if(void 0!==c?c.then(a.pause).catch(function(){}):a.pause(),o.utils.userAgent.IPAD||o.utils.userAgent.IPHONE)break}},o.WorkspaceAudio.prototype.play=function(n,a){var c=this.SOUNDS_[n];c?(n=new Date,null!=this.lastSound_&&n-this.lastSound_<o.SOUND_LIMIT||(this.lastSound_=n,(c=o.utils.userAgent.IPAD||o.utils.userAgent.ANDROID?c:c.cloneNode()).volume=void 0===a?1:a,c.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(n,a)},o.WorkspaceSvg=function(n,a,c){o.WorkspaceSvg.superClass_.constructor.call(this,n),this.metricsManager_=new(o.registry.getClassFromOptions(o.registry.Type.METRICS_MANAGER,n,!0))(this),this.getMetrics=n.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=n.setMetrics||o.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new o.ComponentManager,this.connectionDBList=o.ConnectionDB.init(this.connectionChecker),a&&(this.blockDragSurface_=a),c&&(this.workspaceDragSurface_=c),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&o.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new o.WorkspaceAudio(n.parentWorkspace),this.grid_=this.options.gridPattern?new o.Grid(this.options.gridPattern,n.gridOptions):null,this.markerManager_=new o.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),o.Variables&&o.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(o.VARIABLE_CATEGORY_NAME,o.Variables.flyoutCategory),o.VariablesDynamic&&o.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(o.VARIABLE_DYNAMIC_CATEGORY_NAME,o.VariablesDynamic.flyoutCategory),o.Procedures&&o.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(o.PROCEDURE_CATEGORY_NAME,o.Procedures.flyoutCategory),this.addChangeListener(o.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new o.ThemeManager(this,this.options.theme||o.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=o.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new o.utils.Size(0,0)},o.utils.object.inherits(o.WorkspaceSvg,o.Workspace),o.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,o.WorkspaceSvg.prototype.rendered=!0,o.WorkspaceSvg.prototype.isVisible_=!0,o.WorkspaceSvg.prototype.isFlyout=!1,o.WorkspaceSvg.prototype.isMutator=!1,o.WorkspaceSvg.prototype.resizesEnabled_=!0,o.WorkspaceSvg.prototype.scrollX=0,o.WorkspaceSvg.prototype.scrollY=0,o.WorkspaceSvg.prototype.startScrollX=0,o.WorkspaceSvg.prototype.startScrollY=0,o.WorkspaceSvg.prototype.dragDeltaXY_=null,o.WorkspaceSvg.prototype.scale=1,o.WorkspaceSvg.prototype.oldScale_=1,o.WorkspaceSvg.prototype.oldTop_=0,o.WorkspaceSvg.prototype.oldLeft_=0,o.WorkspaceSvg.prototype.trashcan=null,o.WorkspaceSvg.prototype.scrollbar=null,o.WorkspaceSvg.prototype.flyout_=null,o.WorkspaceSvg.prototype.toolbox_=null,o.WorkspaceSvg.prototype.currentGesture_=null,o.WorkspaceSvg.prototype.blockDragSurface_=null,o.WorkspaceSvg.prototype.workspaceDragSurface_=null,o.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,o.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,o.WorkspaceSvg.prototype.injectionDiv_=null,o.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,o.WorkspaceSvg.prototype.targetWorkspace=null,o.WorkspaceSvg.prototype.inverseScreenCTM_=null,o.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,o.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},o.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},o.WorkspaceSvg.prototype.setMetricsManager=function(n){this.metricsManager_=n,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},o.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},o.WorkspaceSvg.prototype.setCursorSvg=function(n){this.markerManager_.setCursorSvg(n)},o.WorkspaceSvg.prototype.setMarkerSvg=function(n){this.markerManager_.setMarkerSvg(n)},o.WorkspaceSvg.prototype.getMarker=function(n){return this.markerManager_?this.markerManager_.getMarker(n):null},o.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},o.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},o.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},o.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},o.WorkspaceSvg.prototype.setTheme=function(n){n||(n=o.Themes.Classic),this.themeManager_.setTheme(n)},o.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(a){return!!a.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var n=new(o.Events.get(o.Events.THEME_CHANGE))(this.getTheme().name,this.id);o.Events.fire(n)},o.WorkspaceSvg.prototype.updateBlockStyles_=function(n){for(var c,a=0;c=n[a];a++){var d=c.getStyleName();d&&(c.setStyle(d),c.mutator&&c.mutator.updateBlockStyle())}},o.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var n=this.getParentSvg().getScreenCTM();n&&(this.inverseScreenCTM_=n.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},o.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},o.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},o.WorkspaceSvg.prototype.getSvgXY=function(n){var a=0,c=0,d=1;(o.utils.dom.containsNode(this.getCanvas(),n)||o.utils.dom.containsNode(this.getBubbleCanvas(),n))&&(d=this.scale);do{var _=o.utils.getRelativeXY(n);(n==this.getCanvas()||n==this.getBubbleCanvas())&&(d=1),a+=_.x*d,c+=_.y*d,n=n.parentNode}while(n&&n!=this.getParentSvg());return new o.utils.Coordinate(a,c)},o.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var n=this.cachedParentSvgSize_;return new o.utils.Size(n.width,n.height)},o.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return o.utils.getInjectionDivXY_(this.getCanvas())},o.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var n=this.svgGroup_;n;){if(-1!=(" "+(n.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=n;break}n=n.parentNode}return this.injectionDiv_},o.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},o.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(n){this.resizeHandlerWrapper_=n},o.WorkspaceSvg.prototype.createDom=function(n){return this.svgGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:"blocklyWorkspace"},null),n&&(this.svgBackground_=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{height:"100%",width:"100%",class:n},this.svgGroup_),"blocklyMainBackground"==n&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(o.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),o.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(o.registry.getClassFromOptions(o.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(n=o.registry.getClassFromOptions(o.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new n),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},o.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(o.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),o.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var n=this.getParentSvg();n&&n.parentNode&&o.utils.dom.removeNode(n.parentNode)}this.resizeHandlerWrapper_&&(o.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},o.WorkspaceSvg.prototype.newBlock=function(n,a){return new o.BlockSvg(this,n,a)},o.WorkspaceSvg.prototype.addTrashcan=function(){if(!o.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new o.Trashcan(this);var n=this.trashcan.createDom();this.svgGroup_.insertBefore(n,this.svgBlockCanvas_)},o.WorkspaceSvg.prototype.addZoomControls=function(){if(!o.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new o.ZoomControls(this);var n=this.zoomControls_.createDom();this.svgGroup_.appendChild(n)},o.WorkspaceSvg.prototype.addFlyout=function(n){var a=new o.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(o.registry.getClassFromOptions(o.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(a):new(o.registry.getClassFromOptions(o.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(a),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(n)},o.WorkspaceSvg.prototype.getFlyout=function(n){return this.flyout_||n?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},o.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},o.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},o.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},o.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var _,n=this.componentManager_.getComponents(o.ComponentManager.Capability.POSITIONABLE,!0),a=this.getMetricsManager().getUiMetrics(),c=[],d=0;_=n[d];d++)_.position(a,c),(_=_.getBoundingRectangle())&&c.push(_);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},o.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var n=o.utils.getDocumentScroll();o.utils.Coordinate.equals(this.lastRecordedPageScroll_,n)||(this.lastRecordedPageScroll_=n,this.updateScreenCalculations_())},o.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},o.WorkspaceSvg.prototype.setCachedParentSvgSize=function(n,a){var c=this.getParentSvg();n&&(this.cachedParentSvgSize_.width=n,c.cachedWidth_=n),a&&(this.cachedParentSvgSize_.height=a,c.cachedHeight_=a)},o.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},o.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var n=this.svgGroup_;n;){if("svg"==n.tagName){this.cachedParentSvg_=n;break}n=n.parentNode}return this.cachedParentSvg_},o.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(o.Events.isEnabled()){var n=this.scale,a=-this.scrollY,c=-this.scrollX;if(!(n==this.oldScale_&&1>Math.abs(a-this.oldTop_)&&1>Math.abs(c-this.oldLeft_))){var d=new(o.Events.get(o.Events.VIEWPORT_CHANGE))(a,c,n,this.id,this.oldScale_);this.oldScale_=n,this.oldTop_=a,this.oldLeft_=c,o.Events.fire(d)}}},o.WorkspaceSvg.prototype.translate=function(n,a){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(n,a);else{var c="translate("+n+","+a+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",c),this.svgBubbleCanvas_.setAttribute("transform",c)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(n,a,this.scale),this.grid_&&this.grid_.moveTo(n,a),this.maybeFireViewportChangeEvent()},o.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var n=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",n="translate("+n.x+","+n.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",n)}},o.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var n=this.svgBlockCanvas_.previousSibling,a=parseInt(this.getParentSvg().getAttribute("width"),10),c=parseInt(this.getParentSvg().getAttribute("height"),10),d=o.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),n,a,c,this.scale),this.workspaceDragSurface_.translateSurface(d.x,d.y)}},o.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},o.WorkspaceSvg.prototype.getWidth=function(){var n=this.getMetrics();return n?n.viewWidth/this.scale:0},o.WorkspaceSvg.prototype.setVisible=function(n){if(this.isVisible_=n,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(n),this.getFlyout()&&this.getFlyout().setContainerVisible(n),this.getParentSvg().style.display=n?"block":"none",this.toolbox_&&this.toolbox_.setVisible(n),n){for(var a=(n=this.getAllBlocks(!1)).length-1;0<=a;a--)n[a].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else o.hideChaff(!0)},o.WorkspaceSvg.prototype.render=function(){for(var n=this.getAllBlocks(!1),a=n.length-1;0<=a;a--)n[a].render(!1);if(this.currentGesture_)for(n=this.currentGesture_.getInsertionMarkers(),a=0;a<n.length;a++)n[a].render(!1);this.markerManager_.updateMarkers()},o.WorkspaceSvg.prototype.highlightBlock=function(n,a){if(void 0===a){for(var d,c=0;d=this.highlightedBlocks_[c];c++)d.setHighlighted(!1);this.highlightedBlocks_.length=0}(d=n?this.getBlockById(n):null)&&((n=void 0===a||a)?-1==this.highlightedBlocks_.indexOf(d)&&this.highlightedBlocks_.push(d):o.utils.arrayRemove(this.highlightedBlocks_,d),d.setHighlighted(n))},o.WorkspaceSvg.prototype.paste=function(n){!this.rendered||!n.tagName||n.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==n.tagName.toLowerCase()?this.pasteWorkspaceComment_(n):this.pasteBlock_(n))},o.WorkspaceSvg.prototype.pasteBlock_=function(n){o.Events.disable();try{var a=o.Xml.domToBlock(n,this),c=parseInt(n.getAttribute("x"),10),d=parseInt(n.getAttribute("y"),10);if(!isNaN(c)&&!isNaN(d)){this.RTL&&(c=-c);do{n=!1;for(var R,_=this.getAllBlocks(!1),y=0;R=_[y];y++){var x=R.getRelativeToSurfaceXY();if(1>=Math.abs(c-x.x)&&1>=Math.abs(d-x.y)){n=!0;break}}if(!n){var H,B=a.getConnections_(!1);for(y=0;H=B[y];y++)if(H.closest(o.SNAP_RADIUS,new o.utils.Coordinate(c,d)).connection){n=!0;break}}n&&(c=this.RTL?c-o.SNAP_RADIUS:c+o.SNAP_RADIUS,d+=2*o.SNAP_RADIUS)}while(n);a.moveBy(c,d)}}finally{o.Events.enable()}o.Events.isEnabled()&&!a.isShadow()&&o.Events.fire(new(o.Events.get(o.Events.BLOCK_CREATE))(a)),a.select()},o.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(n){o.Events.disable();try{var a=o.WorkspaceCommentSvg.fromXml(n,this),c=parseInt(n.getAttribute("x"),10),d=parseInt(n.getAttribute("y"),10);isNaN(c)||isNaN(d)||(this.RTL&&(c=-c),a.moveBy(c+50,d+50))}finally{o.Events.enable()}o.Events.isEnabled()&&o.WorkspaceComment.fireCreateEvent(a),a.select()},o.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var n=this.isFlyout?this.targetWorkspace:this;n&&!n.currentGesture_&&n.toolbox_&&n.toolbox_.getFlyout()&&n.toolbox_.refreshSelection()},o.WorkspaceSvg.prototype.renameVariableById=function(n,a){o.WorkspaceSvg.superClass_.renameVariableById.call(this,n,a),this.refreshToolboxSelection()},o.WorkspaceSvg.prototype.deleteVariableById=function(n){o.WorkspaceSvg.superClass_.deleteVariableById.call(this,n),this.refreshToolboxSelection()},o.WorkspaceSvg.prototype.createVariable=function(n,a,c){return n=o.WorkspaceSvg.superClass_.createVariable.call(this,n,a,c),this.refreshToolboxSelection(),n},o.WorkspaceSvg.prototype.recordDeleteAreas=function(){o.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},o.WorkspaceSvg.prototype.recordDragTargets=function(){var n=this.componentManager_.getComponents(o.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var c,a=0;c=n[a];a++){var d=c.getClientRect();d&&this.dragTargetAreas_.push({component:c,clientRect:d})}},o.WorkspaceSvg.prototype.getDragTarget=function(n){for(var c,a=0;c=this.dragTargetAreas_[a];a++)if(c.clientRect.contains(n.clientX,n.clientY))return c.component;return null},o.WorkspaceSvg.prototype.onMouseDown_=function(n){var a=this.getGesture(n);a&&a.handleWsStart(n,this)},o.WorkspaceSvg.prototype.startDrag=function(n,a){(n=o.utils.mouseToSvg(n,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,n.y/=this.scale,this.dragDeltaXY_=o.utils.Coordinate.difference(a,n)},o.WorkspaceSvg.prototype.moveDrag=function(n){return(n=o.utils.mouseToSvg(n,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,n.y/=this.scale,o.utils.Coordinate.sum(this.dragDeltaXY_,n)},o.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},o.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},o.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},o.WorkspaceSvg.prototype.isMovableHorizontally=function(){var n=!!this.scrollbar;return this.isMovable()&&(!n||n&&this.scrollbar.canScrollHorizontally())},o.WorkspaceSvg.prototype.isMovableVertically=function(){var n=!!this.scrollbar;return this.isMovable()&&(!n||n&&this.scrollbar.canScrollVertically())},o.WorkspaceSvg.prototype.onMouseWheel_=function(n){if(o.Gesture.inProgress())n.preventDefault(),n.stopPropagation();else{var a=this.options.zoomOptions&&this.options.zoomOptions.wheel,c=this.options.moveOptions&&this.options.moveOptions.wheel;if(a||c){var d=o.utils.getScrollDeltaPixels(n);!a||!n.ctrlKey&&c?(a=this.scrollX-d.x,c=this.scrollY-d.y,n.shiftKey&&!d.x&&(a=this.scrollX-d.y,c=this.scrollY),this.scroll(a,c)):(d=-d.y/50,a=o.utils.mouseToSvg(n,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(a.x,a.y,d)),n.preventDefault()}}},o.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var n=this.getTopBoundedElements();if(!n.length)return new o.utils.Rect(0,0,0,0);for(var a=n[0].getBoundingRectangle(),c=1;c<n.length;c++){var d=n[c];d.isInsertionMarker&&d.isInsertionMarker()||((d=d.getBoundingRectangle()).top<a.top&&(a.top=d.top),d.bottom>a.bottom&&(a.bottom=d.bottom),d.left<a.left&&(a.left=d.left),d.right>a.right&&(a.right=d.right))}return a},o.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),o.Events.setGroup(!0);for(var d,n=this.getTopBlocks(!0),a=0,c=0;d=n[c];c++)if(d.isMovable()){var _=d.getRelativeToSurfaceXY();d.moveBy(-_.x,a-_.y),d.snapToGrid(),a=d.getRelativeToSurfaceXY().y+d.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}o.Events.setGroup(!1),this.setResizesEnabled(!0)},o.WorkspaceSvg.prototype.showContextMenu=function(n){if(!this.options.readOnly&&!this.isFlyout){var a=o.ContextMenuRegistry.registry.getContextMenuOptions(o.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(a,n),o.ContextMenu.show(n,a,this.RTL)}},o.WorkspaceSvg.prototype.updateToolbox=function(n){if(n=o.utils.toolbox.convertToolboxDefToJson(n)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(o.utils.toolbox.hasCategories(n)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=n,this.toolbox_.render(n)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=n,this.flyout_.show(n)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},o.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(o.mainWorkspace=this,this.setBrowserFocus())},o.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(n){try{this.getParentSvg().parentNode.setActive()}catch(a){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},o.WorkspaceSvg.prototype.zoom=function(n,a,c){c=Math.pow(this.options.zoomOptions.scaleSpeed,c);var d=this.scale*c;if(this.scale!=d){d>this.options.zoomOptions.maxScale?c=this.options.zoomOptions.maxScale/this.scale:d<this.options.zoomOptions.minScale&&(c=this.options.zoomOptions.minScale/this.scale);var _=this.getCanvas().getCTM(),y=this.getParentSvg().createSVGPoint();y.x=n,y.y=a,y=y.matrixTransform(_.inverse()),_=_.translate((n=y.x)*(1-c),(a=y.y)*(1-c)).scale(c),this.scrollX=_.e,this.scrollY=_.f,this.setScale(d)}},o.WorkspaceSvg.prototype.zoomCenter=function(n){var a=this.getMetrics();if(this.flyout_){var c=a.svgWidth?a.svgWidth/2:0;a=a.svgHeight?a.svgHeight/2:0}else c=a.viewWidth/2+a.absoluteLeft,a=a.viewHeight/2+a.absoluteTop;this.zoom(c,a,n)},o.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var n=this.getMetrics(),a=n.viewWidth;n=n.viewHeight;var c=this.getBlocksBoundingBox(),d=c.right-c.left;if(c=c.bottom-c.top,d){this.flyout_&&(this.horizontalLayout?(n+=this.flyout_.getHeight(),c+=this.flyout_.getHeight()/this.scale):(a+=this.flyout_.getWidth(),d+=this.flyout_.getWidth()/this.scale)),a/=d,n/=c,o.Events.disable();try{this.setScale(Math.min(a,n)),this.scrollCenter()}finally{o.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},o.WorkspaceSvg.prototype.beginCanvasTransition=function(){o.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),o.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},o.WorkspaceSvg.prototype.endCanvasTransition=function(){o.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),o.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},o.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var n=this.getMetrics(),a=(n.scrollWidth-n.viewWidth)/2,c=(n.scrollHeight-n.viewHeight)/2;this.scroll(a=-a-n.scrollLeft,c=-c-n.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},o.WorkspaceSvg.prototype.centerOnBlock=function(n){if(this.isMovable()){if(n=n?this.getBlockById(n):null){var a=n.getRelativeToSurfaceXY(),c=n.getHeightWidth(),d=this.scale;n=(a.x+(this.RTL?-1:1)*c.width/2)*d,a=(a.y+c.height/2)*d,c=this.getMetrics(),this.scroll(-(n-c.viewWidth/2),-(a-c.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},o.WorkspaceSvg.prototype.setScale=function(n){this.options.zoomOptions.maxScale&&n>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&n<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale),this.scale=n,o.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),n=this.getMetrics(),this.scrollX-=n.absoluteLeft,this.scrollY-=n.absoluteTop,n.viewLeft+=n.absoluteLeft,n.viewTop+=n.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(n):this.scrollbar.resizeContent(n))},o.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},o.WorkspaceSvg.prototype.scroll=function(n,a){o.hideChaff(!0);var c=this.getMetrics();n=Math.min(n,-c.scrollLeft),a=Math.min(a,-c.scrollTop);var d=c.scrollTop+Math.max(0,c.scrollHeight-c.viewHeight);n=Math.max(n,-(c.scrollLeft+Math.max(0,c.scrollWidth-c.viewWidth))),a=Math.max(a,-d),this.scrollX=n,this.scrollY=a,this.scrollbar&&this.scrollbar.set(-(n+c.scrollLeft),-(a+c.scrollTop),!1),this.translate(n+=c.absoluteLeft,a+=c.absoluteTop)},o.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(n){var a=this.getMetrics();"number"==typeof n.x&&(this.scrollX=-(a.scrollLeft+(a.scrollWidth-a.viewWidth)*n.x)),"number"==typeof n.y&&(this.scrollY=-(a.scrollTop+(a.scrollHeight-a.viewHeight)*n.y)),this.translate(this.scrollX+a.absoluteLeft,this.scrollY+a.absoluteTop)},o.WorkspaceSvg.prototype.getBlockById=function(n){return o.WorkspaceSvg.superClass_.getBlockById.call(this,n)},o.WorkspaceSvg.prototype.getTopBlocks=function(n){return o.WorkspaceSvg.superClass_.getTopBlocks.call(this,n)},o.WorkspaceSvg.prototype.addTopBlock=function(n){this.addTopBoundedElement(n),o.WorkspaceSvg.superClass_.addTopBlock.call(this,n)},o.WorkspaceSvg.prototype.removeTopBlock=function(n){this.removeTopBoundedElement(n),o.WorkspaceSvg.superClass_.removeTopBlock.call(this,n)},o.WorkspaceSvg.prototype.addTopComment=function(n){this.addTopBoundedElement(n),o.WorkspaceSvg.superClass_.addTopComment.call(this,n)},o.WorkspaceSvg.prototype.removeTopComment=function(n){this.removeTopBoundedElement(n),o.WorkspaceSvg.superClass_.removeTopComment.call(this,n)},o.WorkspaceSvg.prototype.addTopBoundedElement=function(n){this.topBoundedElements_.push(n)},o.WorkspaceSvg.prototype.removeTopBoundedElement=function(n){o.utils.arrayRemove(this.topBoundedElements_,n)},o.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},o.WorkspaceSvg.prototype.setResizesEnabled=function(n){var a=!this.resizesEnabled_&&n;this.resizesEnabled_=n,a&&this.resizeContents()},o.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),o.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},o.WorkspaceSvg.prototype.registerButtonCallback=function(n,a){if("function"!=typeof a)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[n]=a},o.WorkspaceSvg.prototype.getButtonCallback=function(n){return(n=this.flyoutButtonCallbacks_[n])?n:null},o.WorkspaceSvg.prototype.removeButtonCallback=function(n){this.flyoutButtonCallbacks_[n]=null},o.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(n,a){if("function"!=typeof a)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[n]=a},o.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(n){return this.toolboxCategoryCallbacks_[n]||null},o.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(n){this.toolboxCategoryCallbacks_[n]=null},o.WorkspaceSvg.prototype.getGesture=function(n){var a="mousedown"==n.type||"touchstart"==n.type||"pointerdown"==n.type,c=this.currentGesture_;return c?a&&c.hasStarted()?(console.warn("Tried to start the same gesture twice."),c.cancel(),null):c:a?this.currentGesture_=new o.TouchGesture(n,this):null},o.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},o.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},o.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},o.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},o.inject=function(n,a){if(o.checkBlockColourConstants(),"string"==typeof n&&(n=document.getElementById(n)||document.querySelector(n)),!n||!o.utils.dom.containsNode(document,n))throw Error("Error: container is not in current document.");a=new o.Options(a||{});var c=document.createElement("div");c.className="injectionDiv",c.tabIndex=0,o.utils.aria.setState(c,o.utils.aria.State.LABEL,o.Msg.WORKSPACE_ARIA_LABEL),n.appendChild(c),n=o.createDom_(c,a);var d=new o.BlockDragSurfaceSvg(c),_=new o.WorkspaceDragSurfaceSvg(c),y=o.createMainWorkspace_(n,a,d,_);return o.init_(y),o.mainWorkspace=y,o.svgResize(y),c.addEventListener("focusin",function(){o.mainWorkspace=y}),y},o.createDom_=function(n,a){n.setAttribute("dir","LTR"),o.Css.inject(a.hasCss,a.pathToMedia),n=o.utils.dom.createSvgElement(o.utils.Svg.SVG,{xmlns:o.utils.dom.SVG_NS,"xmlns:html":o.utils.dom.HTML_NS,"xmlns:xlink":o.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},n);var c=o.utils.dom.createSvgElement(o.utils.Svg.DEFS,{},n),d=String(Math.random()).substring(2);return a.gridPattern=o.Grid.createDom(d,a.gridOptions,c),n},o.createMainWorkspace_=function(n,a,c,d){return a.parentWorkspace=null,(a=new o.WorkspaceSvg(a,c,d)).scale=(c=a.options).zoomOptions.startScale,n.appendChild(a.createDom("blocklyMainBackground")),o.utils.dom.addClass(a.getInjectionDiv(),a.getRenderer().getClassName()),o.utils.dom.addClass(a.getInjectionDiv(),a.getTheme().getClassName()),!c.hasCategories&&c.languageTree&&(d=a.addFlyout(o.utils.Svg.SVG),o.utils.dom.insertAfter(d,n)),c.hasTrashcan&&a.addTrashcan(),c.zoomOptions&&c.zoomOptions.controls&&a.addZoomControls(),a.getThemeManager().subscribe(n,"workspaceBackgroundColour","background-color"),a.translate(0,0),a.addChangeListener(o.bumpIntoBoundsHandler_(a)),o.svgResize(a),o.WidgetDiv.createDom(),o.DropDownDiv.createDom(),o.Tooltip.createDom(),a},o.extractObjectFromEvent_=function(n,a){var c=null;switch(a.type){case o.Events.BLOCK_CREATE:case o.Events.BLOCK_MOVE:(c=n.getBlockById(a.blockId))&&(c=c.getRootBlock());break;case o.Events.COMMENT_CREATE:case o.Events.COMMENT_MOVE:c=n.getCommentById(a.commentId)}return c},o.bumpTopObjectsIntoBounds_=function(n){var a=n.getMetricsManager();if(a.hasFixedEdges()&&!n.isDragging()){a=a.getScrollMetrics(!0);for(var _,c=n.getTopBoundedElements(),d=0;_=c[d];d++)o.bumpObjectIntoBounds_(n,a,_)}},o.bumpIntoBoundsHandler_=function(n){return function(a){var c=n.getMetricsManager();if(c.hasFixedEdges()&&!n.isDragging())if(-1!==o.Events.BUMP_EVENTS.indexOf(a.type)){c=c.getScrollMetrics(!0);var d=o.extractObjectFromEvent_(n,a);if(d){var _=o.Events.getGroup();o.Events.setGroup(a.group),o.bumpObjectIntoBounds_(n,c,d)&&!a.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==_&&o.Events.setGroup(_)}}else a.type===o.Events.VIEWPORT_CHANGE&&a.scale>a.oldScale&&o.bumpTopObjectsIntoBounds_(n)}},o.bumpObjectIntoBounds_=function(n,a,c){var d=c.getBoundingRectangle(),_=d.right-d.left,y=o.utils.math.clamp(a.top,d.top,a.top+a.height-(d.bottom-d.top))-d.top,R=a.left;return a=a.left+a.width-_,n.RTL?R=Math.min(a,R):a=Math.max(R,a),!(!(n=o.utils.math.clamp(R,d.left,a)-d.left)&&!y||(c.moveBy(n,y),0))},o.init_=function(n){var a=n.options,c=n.getParentSvg();if(o.browserEvents.conditionalBind(c.parentNode,"contextmenu",null,function(_){o.utils.isTargetInput(_)||_.preventDefault()}),c=o.browserEvents.conditionalBind(window,"resize",null,function(){o.hideChaff(!0),o.svgResize(n),o.bumpTopObjectsIntoBounds_(n)}),n.setResizeHandlerWrapper(c),o.inject.bindDocumentEvents_(),a.languageTree){c=n.getToolbox();var d=n.getFlyout(!0);c?c.init():d&&(d.init(n),d.show(a.languageTree),"function"==typeof d.scrollToStart&&d.scrollToStart())}a.hasTrashcan&&n.trashcan.init(),a.zoomOptions&&a.zoomOptions.controls&&n.zoomControls_.init(),a.moveOptions&&a.moveOptions.scrollbars?(n.scrollbar=new o.ScrollbarPair(n,!0===a.moveOptions.scrollbars||!!a.moveOptions.scrollbars.horizontal,!0===a.moveOptions.scrollbars||!!a.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),n.scrollbar.resize()):n.setMetrics({x:.5,y:.5}),a.hasSounds&&o.inject.loadSounds_(a.pathToMedia,n)},o.inject.bindDocumentEvents_=function(){o.documentEventsBound_||(o.browserEvents.conditionalBind(document,"scroll",null,function(){for(var c,n=o.Workspace.getAll(),a=0;c=n[a];a++)c.updateInverseScreenCTM&&c.updateInverseScreenCTM()}),o.browserEvents.conditionalBind(document,"keydown",null,o.onKeyDown),o.browserEvents.bind(document,"touchend",null,o.longStop_),o.browserEvents.bind(document,"touchcancel",null,o.longStop_),o.utils.userAgent.IPAD&&o.browserEvents.conditionalBind(window,"orientationchange",document,function(){o.svgResize(o.getMainWorkspace())})),o.documentEventsBound_=!0},o.inject.loadSounds_=function(n,a){var c=a.getAudioManager();c.load([n+"click.mp3",n+"click.wav",n+"click.ogg"],"click"),c.load([n+"disconnect.wav",n+"disconnect.mp3",n+"disconnect.ogg"],"disconnect"),c.load([n+"delete.mp3",n+"delete.ogg",n+"delete.wav"],"delete");var d=[];n=function(){for(;d.length;)o.browserEvents.unbind(d.pop());c.preload()},d.push(o.browserEvents.conditionalBind(document,"mousemove",null,n,!0)),d.push(o.browserEvents.conditionalBind(document,"touchstart",null,n,!0))},o.Names=function(n,a){if(this.variablePrefix_=a||"",this.reservedDict_=Object.create(null),n)for(n=n.split(","),a=0;a<n.length;a++)this.reservedDict_[n[a]]=!0;this.reset()},o.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",o.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},o.Names.prototype.setVariableMap=function(n){this.variableMap_=n},o.Names.prototype.getNameForUserVariable_=function(n){return this.variableMap_?(n=this.variableMap_.getVariableById(n))?n.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},o.Names.prototype.populateVariables=function(n){n=o.Variables.allUsedVarModels(n);for(var a=0;a<n.length;a++)this.getName(n[a].getId(),o.VARIABLE_CATEGORY_NAME)},o.Names.prototype.populateProcedures=function(n){n=(n=o.Procedures.allProcedures(n))[0].concat(n[1]);for(var a=0;a<n.length;a++)this.getName(n[a][0],o.PROCEDURE_CATEGORY_NAME)},o.Names.prototype.getName=function(n,a){var c=n;a==o.VARIABLE_CATEGORY_NAME&&(n=this.getNameForUserVariable_(n))&&(c=n),n=c.toLowerCase();var d=a==o.VARIABLE_CATEGORY_NAME||a==o.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";a in this.db_||(this.db_[a]=Object.create(null));var _=this.db_[a];return n in _?d+_[n]:(a=this.getDistinctName(c,a),_[n]=a.substr(d.length),a)},o.Names.prototype.getUserNames=function(n){return Object.keys(this.db_[n]||{})},o.Names.prototype.getDistinctName=function(n,a){n=this.safeName_(n);for(var c="";this.dbReverse_[n+c]||n+c in this.reservedDict_;)c=c?c+1:2;return this.dbReverse_[n+=c]=!0,(a==o.VARIABLE_CATEGORY_NAME||a==o.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+n},o.Names.prototype.safeName_=function(n){return n?(n=encodeURI(n.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(n[0])&&(n="my_"+n)):n=o.Msg.UNNAMED_KEY||"unnamed",n},o.Names.equals=function(n,a){return n.toLowerCase()==a.toLowerCase()},o.Procedures={},o.Procedures.NAME_TYPE=o.PROCEDURE_CATEGORY_NAME,o.Procedures.DEFAULT_ARG="x",o.Procedures.allProcedures=function(n){var a=n.getBlocksByType("procedures_defnoreturn",!1).map(function(c){return c.getProcedureDef()});return n=n.getBlocksByType("procedures_defreturn",!1).map(function(c){return c.getProcedureDef()}),a.sort(o.Procedures.procTupleComparator_),n.sort(o.Procedures.procTupleComparator_),[a,n]},o.Procedures.procTupleComparator_=function(n,a){return n[0].localeCompare(a[0],void 0,{sensitivity:"base"})},o.Procedures.findLegalName=function(n,a){if(a.isInFlyout)return n;for(n=n||o.Msg.UNNAMED_KEY||"unnamed";!o.Procedures.isLegalName_(n,a.workspace,a);){var c=n.match(/^(.*?)(\d+)$/);n=c?c[1]+(parseInt(c[2],10)+1):n+"2"}return n},o.Procedures.isLegalName_=function(n,a,c){return!o.Procedures.isNameUsed(n,a,c)},o.Procedures.isNameUsed=function(n,a,c){a=a.getAllBlocks(!1);for(var d=0;d<a.length;d++)if(a[d]!=c&&a[d].getProcedureDef){var _=a[d].getProcedureDef();if(o.Names.equals(_[0],n))return!0}return!1},o.Procedures.rename=function(n){n=n.trim();var a=o.Procedures.findLegalName(n,this.getSourceBlock()),c=this.getValue();if(c!=n&&c!=a){n=this.getSourceBlock().workspace.getAllBlocks(!1);for(var d=0;d<n.length;d++)n[d].renameProcedure&&n[d].renameProcedure(c,a)}return a},o.Procedures.flyoutCategory=function(n){function a(y,R){for(var x=0;x<y.length;x++){var B=y[x][0],H=y[x][1],F=o.utils.xml.createElement("block");F.setAttribute("type",R),F.setAttribute("gap",16);var Y=o.utils.xml.createElement("mutation");for(Y.setAttribute("name",B),F.appendChild(Y),B=0;B<H.length;B++){var z=o.utils.xml.createElement("arg");z.setAttribute("name",H[B]),Y.appendChild(z)}c.push(F)}}var c=[];if(o.Blocks.procedures_defnoreturn){var d=o.utils.xml.createElement("block");d.setAttribute("type","procedures_defnoreturn"),d.setAttribute("gap",16);var _=o.utils.xml.createElement("field");_.setAttribute("name","NAME"),_.appendChild(o.utils.xml.createTextNode(o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),d.appendChild(_),c.push(d)}return o.Blocks.procedures_defreturn&&((d=o.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),d.setAttribute("gap",16),(_=o.utils.xml.createElement("field")).setAttribute("name","NAME"),_.appendChild(o.utils.xml.createTextNode(o.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(_),c.push(d)),o.Blocks.procedures_ifreturn&&((d=o.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),d.setAttribute("gap",16),c.push(d)),c.length&&c[c.length-1].setAttribute("gap",24),a((n=o.Procedures.allProcedures(n))[0],"procedures_callnoreturn"),a(n[1],"procedures_callreturn"),c},o.Procedures.updateMutatorFlyout_=function(n){for(var _,a=[],c=n.getBlocksByType("procedures_mutatorarg",!1),d=0;_=c[d];d++)a.push(_.getFieldValue("NAME"));c=o.utils.xml.createElement("xml"),(d=o.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(_=o.utils.xml.createElement("field")).setAttribute("name","NAME"),a=o.Variables.generateUniqueNameFromOptions(o.Procedures.DEFAULT_ARG,a),a=o.utils.xml.createTextNode(a),_.appendChild(a),d.appendChild(_),c.appendChild(d),n.updateToolbox(c)},o.Procedures.mutatorOpenListener=function(n){if(n.type==o.Events.BUBBLE_OPEN&&"mutator"===n.bubbleType&&n.isOpen){var a=(n=o.Workspace.getById(n.workspaceId).getBlockById(n.blockId)).type;("procedures_defnoreturn"==a||"procedures_defreturn"==a)&&(n=n.mutator.getWorkspace(),o.Procedures.updateMutatorFlyout_(n),n.addChangeListener(o.Procedures.mutatorChangeListener_))}},o.Procedures.mutatorChangeListener_=function(n){(n.type==o.Events.BLOCK_CREATE||n.type==o.Events.BLOCK_DELETE||n.type==o.Events.BLOCK_CHANGE)&&(n=o.Workspace.getById(n.workspaceId),o.Procedures.updateMutatorFlyout_(n))},o.Procedures.getCallers=function(n,a){var c=[];a=a.getAllBlocks(!1);for(var d=0;d<a.length;d++)if(a[d].getProcedureCall){var _=a[d].getProcedureCall();_&&o.Names.equals(_,n)&&c.push(a[d])}return c},o.Procedures.mutateCallers=function(n){var _,a=o.Events.recordUndo,c=n.getProcedureDef()[0],d=n.mutationToDom(!0);for(n=o.Procedures.getCallers(c,n.workspace),c=0;_=n[c];c++){var y=_.mutationToDom();y=y&&o.Xml.domToText(y),_.domToMutation(d);var R=_.mutationToDom();y!=(R=R&&o.Xml.domToText(R))&&(o.Events.recordUndo=!1,o.Events.fire(new(o.Events.get(o.Events.BLOCK_CHANGE))(_,"mutation",null,y,R)),o.Events.recordUndo=a)}},o.Procedures.getDefinition=function(n,a){a=a.getAllBlocks(!1);for(var c=0;c<a.length;c++)if(a[c].getProcedureDef){var d=a[c].getProcedureDef();if(d&&o.Names.equals(d[0],n))return a[c]}return null},o.ShortcutRegistry=function(){o.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},o.ShortcutRegistry.modifierKeys={Shift:o.utils.KeyCodes.SHIFT,Control:o.utils.KeyCodes.CTRL,Alt:o.utils.KeyCodes.ALT,Meta:o.utils.KeyCodes.META},o.ShortcutRegistry.prototype.register=function(n,a){if(this.registry_[n.name]&&!a)throw Error('Shortcut with name "'+n.name+'" already exists.');this.registry_[n.name]=n},o.ShortcutRegistry.prototype.unregister=function(n){return this.registry_[n]?(this.removeAllKeyMappings(n),delete this.registry_[n],!0):(console.warn('Keyboard shortcut with name "'+n+'" not found.'),!1)},o.ShortcutRegistry.prototype.addKeyMapping=function(n,a,c){n=String(n);var d=this.keyMap_[n];if(d&&!c)throw Error('Shortcut with name "'+a+'" collides with shortcuts '+d.toString());d&&c?d.unshift(a):this.keyMap_[n]=[a]},o.ShortcutRegistry.prototype.removeKeyMapping=function(n,a,c){var d=this.keyMap_[n];if(!d&&!c)return console.warn('No keyboard shortcut with name "'+a+'" registered with key code "'+n+'"'),!1;var _=d.indexOf(a);return-1<_?(d.splice(_,1),0==d.length&&delete this.keyMap_[n],!0):(c||console.warn('No keyboard shortcut with name "'+a+'" registered with key code "'+n+'"'),!1)},o.ShortcutRegistry.prototype.removeAllKeyMappings=function(n){for(var a in this.keyMap_)this.removeKeyMapping(a,n,!0)},o.ShortcutRegistry.prototype.setKeyMap=function(n){this.keyMap_=n},o.ShortcutRegistry.prototype.getKeyMap=function(){return o.utils.object.deepMerge(Object.create(null),this.keyMap_)},o.ShortcutRegistry.prototype.getRegistry=function(){return o.utils.object.deepMerge(Object.create(null),this.registry_)},o.ShortcutRegistry.prototype.onKeyDown=function(n,a){var c=this.serializeKeyEvent_(a);if(!(c=this.getShortcutNamesByKeyCode(c)))return!1;for(var _,d=0;_=c[d];d++)if((!(_=this.registry_[_]).preconditionFn||_.preconditionFn(n))&&_.callback&&_.callback(n,a,_))return!0;return!1},o.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(n){return this.keyMap_[n]||[]},o.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(n){var c,a=[];for(c in this.keyMap_)-1<this.keyMap_[c].indexOf(n)&&a.push(c);return a},o.ShortcutRegistry.prototype.serializeKeyEvent_=function(n){var c,a="";for(c in o.ShortcutRegistry.modifierKeys)n.getModifierState(c)&&(""!=a&&(a+="+"),a+=c);return""!=a&&n.keyCode?a=a+"+"+n.keyCode:n.keyCode&&(a=n.keyCode.toString()),a},o.ShortcutRegistry.prototype.checkModifiers_=function(n){for(var d,a=o.utils.object.values(o.ShortcutRegistry.modifierKeys),c=0;d=n[c];c++)if(0>a.indexOf(d))throw Error(d+" is not a valid modifier key.")},o.ShortcutRegistry.prototype.createSerializedKey=function(n,a){var c="";if(a)for(var d in this.checkModifiers_(a),o.ShortcutRegistry.modifierKeys)-1<a.indexOf(o.ShortcutRegistry.modifierKeys[d])&&(""!=c&&(c+="+"),c+=d);return""!=c&&n?c=c+"+"+n:n&&(c=n.toString()),c},new o.ShortcutRegistry,o.VariableModel=function(n,a,c,d){this.workspace=n,this.name=a,this.type=c||"",this.id_=d||o.utils.genUid(),o.Events.fire(new(o.Events.get(o.Events.VAR_CREATE))(this))},o.VariableModel.prototype.getId=function(){return this.id_},o.VariableModel.compareByName=function(n,a){return n.name.localeCompare(a.name,void 0,{sensitivity:"base"})},o.Variables={},o.Variables.NAME_TYPE=o.VARIABLE_CATEGORY_NAME,o.Variables.allUsedVarModels=function(n){var a=n.getAllBlocks(!1);n=Object.create(null);for(var c=0;c<a.length;c++){var d=a[c].getVarModels();if(d)for(var _=0;_<d.length;_++){var y=d[_],R=y.getId();R&&(n[R]=y)}}for(R in a=[],n)a.push(n[R]);return a},o.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},o.Variables.allDeveloperVariables=function(n){n=n.getAllBlocks(!1);for(var d,a=Object.create(null),c=0;d=n[c];c++){var _=d.getDeveloperVariables;if(!_&&d.getDeveloperVars&&(_=d.getDeveloperVars,o.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[d.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+d.type+"')"),o.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[d.type]=!0)),_)for(d=_(),_=0;_<d.length;_++)a[d[_]]=!0}return Object.keys(a)},o.Variables.flyoutCategory=function(n){var a=[],c=document.createElement("button");return c.setAttribute("text","%{BKY_NEW_VARIABLE}"),c.setAttribute("callbackKey","CREATE_VARIABLE"),n.registerButtonCallback("CREATE_VARIABLE",function(d){o.Variables.createVariableButtonHandler(d.getTargetWorkspace())}),a.push(c),n=o.Variables.flyoutCategoryBlocks(n),a.concat(n)},o.Variables.flyoutCategoryBlocks=function(n){var a=[];if(0<(n=n.getVariablesOfType("")).length){var c=n[n.length-1];if(o.Blocks.variables_set){var d=o.utils.xml.createElement("block");d.setAttribute("type","variables_set"),d.setAttribute("gap",o.Blocks.math_change?8:24),d.appendChild(o.Variables.generateVariableFieldDom(c)),a.push(d)}if(o.Blocks.math_change&&((d=o.utils.xml.createElement("block")).setAttribute("type","math_change"),d.setAttribute("gap",o.Blocks.variables_get?20:8),d.appendChild(o.Variables.generateVariableFieldDom(c)),c=o.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(c),a.push(d)),o.Blocks.variables_get){n.sort(o.VariableModel.compareByName),c=0;for(var _;_=n[c];c++)(d=o.utils.xml.createElement("block")).setAttribute("type","variables_get"),d.setAttribute("gap",8),d.appendChild(o.Variables.generateVariableFieldDom(_)),a.push(d)}}return a},o.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",o.Variables.generateUniqueName=function(n){return o.Variables.generateUniqueNameFromOptions(o.Variables.VAR_LETTER_OPTIONS.charAt(0),n.getAllVariableNames())},o.Variables.generateUniqueNameFromOptions=function(n,a){if(!a.length)return n;for(var c=o.Variables.VAR_LETTER_OPTIONS,d="",_=c.indexOf(n);;){for(var y=!1,R=0;R<a.length;R++)if(a[R].toLowerCase()==n){y=!0;break}if(!y)return n;++_==c.length&&(_=0,d=Number(d)+1),n=c.charAt(_)+d}},o.Variables.createVariableButtonHandler=function(n,a,c){var d=c||"",_=function(y){o.Variables.promptName(o.Msg.NEW_VARIABLE_TITLE,y,function(R){if(R){var x=o.Variables.nameUsedWithAnyType(R,n);if(x){if(x.type==d)var B=o.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",x.name);else B=(B=o.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",x.name).replace("%2",x.type);o.alert(B,function(){_(R)})}else n.createVariable(R,d),a&&a(R)}else a&&a(null)})};_("")},o.Variables.createVariable=o.Variables.createVariableButtonHandler,o.Variables.renameVariable=function(n,a,c){var d=function(_){var y=o.Msg.RENAME_VARIABLE_TITLE.replace("%1",a.name);o.Variables.promptName(y,_,function(R){if(R){var x=o.Variables.nameUsedWithOtherType_(R,a.type,n);x?(x=o.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",x.name).replace("%2",x.type),o.alert(x,function(){d(R)})):(n.renameVariableById(a.getId(),R),c&&c(R))}else c&&c(null)})};d("")},o.Variables.promptName=function(n,a,c){o.prompt(n,a,function(d){d&&((d=d.replace(/[\s\xa0]+/g," ").trim())==o.Msg.RENAME_VARIABLE||d==o.Msg.NEW_VARIABLE)&&(d=null),c(d)})},o.Variables.nameUsedWithOtherType_=function(n,a,c){c=c.getVariableMap().getAllVariables(),n=n.toLowerCase();for(var _,d=0;_=c[d];d++)if(_.name.toLowerCase()==n&&_.type!=a)return _;return null},o.Variables.nameUsedWithAnyType=function(n,a){a=a.getVariableMap().getAllVariables(),n=n.toLowerCase();for(var d,c=0;d=a[c];c++)if(d.name.toLowerCase()==n)return d;return null},o.Variables.generateVariableFieldDom=function(n){var a=o.utils.xml.createElement("field");return a.setAttribute("name","VAR"),a.setAttribute("id",n.getId()),a.setAttribute("variabletype",n.type),n=o.utils.xml.createTextNode(n.name),a.appendChild(n),a},o.Variables.getOrCreateVariablePackage=function(n,a,c,d){var _=o.Variables.getVariable(n,a,c,d);return _||(_=o.Variables.createVariable_(n,a,c,d)),_},o.Variables.getVariable=function(n,a,c,d){var _=n.getPotentialVariableMap(),y=null;if(a&&(!(y=n.getVariableById(a))&&_&&(y=_.getVariableById(a)),y))return y;if(c){if(null==d)throw Error("Tried to look up a variable by name without a type");!(y=n.getVariable(c,d))&&_&&(y=_.getVariable(c,d))}return y},o.Variables.createVariable_=function(n,a,c,d){var _=n.getPotentialVariableMap();return c||(c=o.Variables.generateUniqueName(n.isFlyout?n.targetWorkspace:n)),_?_.createVariable(c,d,a):n.createVariable(c,d,a)},o.Variables.getAddedVariables=function(n,a){n=n.getAllVariables();var c=[];if(a.length!=n.length)for(var d=0;d<n.length;d++){var _=n[d];-1==a.indexOf(_)&&c.push(_)}return c},o.VERSION="6.20210701.0",o.mainWorkspace=null,o.selected=null,o.draggingConnections=[],o.clipboardXml_=null,o.clipboardSource_=null,o.clipboardTypeCounts_=null,o.cache3dSupported_=null,o.parentContainer=null,o.svgSize=function(n){return o.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new o.utils.Size(n.cachedWidth_,n.cachedHeight_)},o.resizeSvgContents=function(n){n.resizeContents()},o.svgResize=function(n){for(;n.options.parentWorkspace;)n=n.options.parentWorkspace;var a=n.getParentSvg(),c=n.getCachedParentSvgSize(),d=a.parentNode;if(d){var _=d.offsetWidth;d=d.offsetHeight,c.width!=_&&(a.setAttribute("width",_+"px"),n.setCachedParentSvgSize(_,null)),c.height!=d&&(a.setAttribute("height",d+"px"),n.setCachedParentSvgSize(null,d)),n.resize()}},o.onKeyDown=function(n){var a=o.mainWorkspace;a&&!(o.utils.isTargetInput(n)||a.rendered&&!a.isVisible())&&o.ShortcutRegistry.registry.onKeyDown(a,n)},o.deleteBlock=function(n){n.workspace.isFlyout||(o.Events.setGroup(!0),o.hideChaff(),n.dispose(!n.outputConnection,!0),o.Events.setGroup(!1))},o.copy=function(n){(n=n.toCopyData())&&(o.clipboardXml_=n.xml,o.clipboardSource_=n.source,o.clipboardTypeCounts_=n.typeCounts)},o.paste=function(){if(!o.clipboardXml_)return!1;var n=o.clipboardSource_;return n.isFlyout&&(n=n.targetWorkspace),!(!o.clipboardTypeCounts_||!n.isCapacityAvailable(o.clipboardTypeCounts_)||(o.Events.setGroup(!0),n.paste(o.clipboardXml_),o.Events.setGroup(!1),0))},o.duplicate=function(n){var a=o.clipboardXml_,c=o.clipboardSource_;o.copy(n),n.workspace.paste(o.clipboardXml_),o.clipboardXml_=a,o.clipboardSource_=c},o.onContextMenu_=function(n){o.utils.isTargetInput(n)||n.preventDefault()},o.hideChaff=function(n){o.Tooltip.hide(),o.WidgetDiv.hide(),o.DropDownDiv.hideWithoutAnimation();var a=!!n;o.getMainWorkspace().getComponentManager().getComponents(o.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(c){c.autoHide(a)})},o.getMainWorkspace=function(){return o.mainWorkspace},o.alert=function(n,a){alert(n),a&&a()},o.confirm=function(n,a){a(confirm(n))},o.prompt=function(n,a,c){c(prompt(n,a))},o.jsonInitFactory_=function(n){return function(){this.jsonInit(n)}},o.defineBlocksWithJsonArray=function(n){for(var a=0;a<n.length;a++){var c=n[a];if(c){var d=c.type;null==d||""===d?console.warn("Block definition #"+a+" in JSON array is missing a type attribute. Skipping."):(o.Blocks[d]&&console.warn("Block definition #"+a+' in JSON array overwrites prior definition of "'+d+'".'),o.Blocks[d]={init:o.jsonInitFactory_(c)})}else console.warn("Block definition #"+a+" in JSON array is "+c+". Skipping.")}},o.isNumber=function(n){return/^\s*-?\d+(\.\d+)?\s*$/.test(n)},o.hueToHex=function(n){return o.utils.colour.hsvToHex(n,o.HSV_SATURATION,255*o.HSV_VALUE)},o.checkBlockColourConstants=function(){o.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),o.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),o.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),o.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),o.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),o.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),o.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),o.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),o.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),o.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),o.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),o.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),o.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),o.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),o.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),o.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},o.checkBlockColourConstant_=function(n,a,c){for(var d="Blockly",_=o,y=0;y<a.length;++y)d+="."+a[y],_&&(_=_[a[y]]);_&&_!==c&&(n=(void 0===c?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",d).replace("%2",n),console.warn(n))},o.setParentContainer=function(n){o.parentContainer=n},o.bindEvent_=o.browserEvents.bind,o.unbindEvent_=o.browserEvents.unbind,o.bindEventWithChecks_=o.browserEvents.conditionalBind,o.ALIGN_LEFT=o.constants.ALIGN.LEFT,o.ALIGN_CENTRE=o.constants.ALIGN.CENTRE,o.ALIGN_RIGHT=o.constants.ALIGN.RIGHT,o.INPUT_VALUE=o.connectionTypes.INPUT_VALUE,o.OUTPUT_VALUE=o.connectionTypes.OUTPUT_VALUE,o.NEXT_STATEMENT=o.connectionTypes.NEXT_STATEMENT,o.PREVIOUS_STATEMENT=o.connectionTypes.PREVIOUS_STATEMENT,o.DUMMY_INPUT=o.inputTypes.DUMMY,o.TOOLBOX_AT_TOP=o.utils.toolbox.Position.TOP,o.TOOLBOX_AT_BOTTOM=o.utils.toolbox.Position.BOTTOM,o.TOOLBOX_AT_LEFT=o.utils.toolbox.Position.LEFT,o.TOOLBOX_AT_RIGHT=o.utils.toolbox.Position.RIGHT,o.Events.BubbleOpen=function(n,a,c){o.Events.BubbleOpen.superClass_.constructor.call(this,n?n.workspace.id:void 0),this.blockId=n?n.id:null,this.isOpen=a,this.bubbleType=c},o.utils.object.inherits(o.Events.BubbleOpen,o.Events.UiBase),o.Events.BubbleOpen.prototype.type=o.Events.BUBBLE_OPEN,o.Events.BubbleOpen.prototype.toJson=function(){var n=o.Events.BubbleOpen.superClass_.toJson.call(this);return n.isOpen=this.isOpen,n.bubbleType=this.bubbleType,n.blockId=this.blockId,n},o.Events.BubbleOpen.prototype.fromJson=function(n){o.Events.BubbleOpen.superClass_.fromJson.call(this,n),this.isOpen=n.isOpen,this.bubbleType=n.bubbleType,this.blockId=n.blockId},o.registry.register(o.registry.Type.EVENT,o.Events.BUBBLE_OPEN,o.Events.BubbleOpen),o.Icon=function(n){this.block_=n,this.iconGroup_=null},o.Icon.prototype.collapseHidden=!0,o.Icon.prototype.SIZE=17,o.Icon.prototype.bubble_=null,o.Icon.prototype.iconXY_=null,o.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&o.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),o.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},o.Icon.prototype.dispose=function(){o.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},o.Icon.prototype.updateEditable=function(){},o.Icon.prototype.isVisible=function(){return!!this.bubble_},o.Icon.prototype.iconClick_=function(n){this.block_.workspace.isDragging()||this.block_.isInFlyout||o.utils.isRightButton(n)||this.setVisible(!this.isVisible())},o.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},o.Icon.prototype.setIconLocation=function(n){this.iconXY_=n,this.isVisible()&&this.bubble_.setAnchorLocation(n)},o.Icon.prototype.computeIconLocation=function(){var n=this.block_.getRelativeToSurfaceXY(),a=o.utils.getRelativeXY(this.iconGroup_);n=new o.utils.Coordinate(n.x+a.x+this.SIZE/2,n.y+a.y+this.SIZE/2),o.utils.Coordinate.equals(this.getIconLocation(),n)||this.setIconLocation(n)},o.Icon.prototype.getIconLocation=function(){return this.iconXY_},o.Icon.prototype.getCorrectedSize=function(){return new o.utils.Size(o.Icon.prototype.SIZE,o.Icon.prototype.SIZE-2)},o.Warning=function(n){o.Warning.superClass_.constructor.call(this,n),this.createIcon(),this.text_=Object.create(null)},o.utils.object.inherits(o.Warning,o.Icon),o.Warning.prototype.collapseHidden=!1,o.Warning.prototype.drawIcon_=function(n){o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},n),o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},n),o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},n)},o.Warning.prototype.setVisible=function(n){n!=this.isVisible()&&(o.Events.fire(new(o.Events.get(o.Events.BUBBLE_OPEN))(this.block_,n,"warning")),n?this.createBubble_():this.disposeBubble_())},o.Warning.prototype.createBubble_=function(){this.paragraphElement_=o.Bubble.textToDom(this.getText()),this.bubble_=o.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},o.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},o.Warning.prototype.setText=function(n,a){this.text_[a]!=n&&(n?this.text_[a]=n:delete this.text_[a],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},o.Warning.prototype.getText=function(){var a,n=[];for(a in this.text_)n.push(this.text_[a]);return n.join("\n")},o.Warning.prototype.dispose=function(){this.block_.warning=null,o.Icon.prototype.dispose.call(this)},o.Comment=function(n){o.Comment.superClass_.constructor.call(this,n),this.model_=n.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},o.utils.object.inherits(o.Comment,o.Icon),o.Comment.prototype.drawIcon_=function(n){o.utils.dom.createSvgElement(o.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},n),o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},n),o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},n)},o.Comment.prototype.createEditor_=function(){this.foreignObject_=o.utils.dom.createSvgElement(o.utils.Svg.FOREIGNOBJECT,{x:o.Bubble.BORDER_WIDTH,y:o.Bubble.BORDER_WIDTH},null);var n=document.createElementNS(o.utils.dom.HTML_NS,"body");n.setAttribute("xmlns",o.utils.dom.HTML_NS),n.className="blocklyMinimalBody";var a=this.textarea_=document.createElementNS(o.utils.dom.HTML_NS,"textarea");return a.className="blocklyCommentTextarea",a.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),a.value=this.model_.text,this.resizeTextarea_(),n.appendChild(a),this.foreignObject_.appendChild(n),this.onMouseUpWrapper_=o.browserEvents.conditionalBind(a,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=o.browserEvents.conditionalBind(a,"wheel",this,function(c){c.stopPropagation()}),this.onChangeWrapper_=o.browserEvents.conditionalBind(a,"change",this,function(c){this.cachedText_!=this.model_.text&&o.Events.fire(new(o.Events.get(o.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=o.browserEvents.conditionalBind(a,"input",this,function(c){this.model_.text=a.value}),setTimeout(a.focus.bind(a),0),this.foreignObject_},o.Comment.prototype.updateEditable=function(){o.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},o.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},o.Comment.prototype.resizeTextarea_=function(){var n=this.model_.size,a=2*o.Bubble.BORDER_WIDTH,c=n.width-a;n=n.height-a,this.foreignObject_.setAttribute("width",c),this.foreignObject_.setAttribute("height",n),this.textarea_.style.width=c-4+"px",this.textarea_.style.height=n-4+"px"},o.Comment.prototype.setVisible=function(n){n!=this.isVisible()&&(o.Events.fire(new(o.Events.get(o.Events.BUBBLE_OPEN))(this.block_,n,"comment")),(this.model_.pinned=n)?this.createBubble_():this.disposeBubble_())},o.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||o.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},o.Comment.prototype.createEditableBubble_=function(){this.bubble_=new o.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},o.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=o.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=o.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},o.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(o.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(o.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(o.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(o.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},o.Comment.prototype.startEdit_=function(n){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},o.Comment.prototype.getBubbleSize=function(){return this.model_.size},o.Comment.prototype.setBubbleSize=function(n,a){this.bubble_?this.bubble_.setBubbleSize(n,a):(this.model_.size.width=n,this.model_.size.height=a)},o.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},o.Comment.prototype.dispose=function(){this.block_.comment=null,o.Icon.prototype.dispose.call(this)},o.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),o.IComponent=function(){},o.IDragTarget=function(){},o.DragTarget=function(){},o.DragTarget.prototype.onDragEnter=function(n){},o.DragTarget.prototype.onDragOver=function(n){},o.DragTarget.prototype.onDragExit=function(n){},o.DragTarget.prototype.onDrop=function(n){},o.DragTarget.prototype.shouldPreventMove=function(n){return!1},o.IDeleteArea=function(){},o.DeleteArea=function(){o.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},o.utils.object.inherits(o.DeleteArea,o.DragTarget),o.DeleteArea.prototype.wouldDelete=function(n,a){return n instanceof o.BlockSvg?(n=!n.getParent()&&n.isDeletable(),this.updateWouldDelete_(n&&!a)):this.updateWouldDelete_(n.isDeletable()),this.wouldDelete_},o.DeleteArea.prototype.updateWouldDelete_=function(n){this.wouldDelete_=n},o.IFlyout=function(){},o.Flyout=function(n){o.Flyout.superClass_.constructor.call(this),n.setMetrics=this.setMetrics_.bind(this),this.workspace_=new o.WorkspaceSvg(n),this.workspace_.setMetricsManager(new o.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=o.utils.genUid(),this.RTL=!!n.RTL,this.horizontalLayout=!1,this.toolboxPosition_=n.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},o.utils.object.inherits(o.Flyout,o.DeleteArea),o.Flyout.prototype.autoClose=!0,o.Flyout.prototype.isVisible_=!1,o.Flyout.prototype.containerVisible_=!0,o.Flyout.prototype.CORNER_RADIUS=8,o.Flyout.prototype.MARGIN=o.Flyout.prototype.CORNER_RADIUS,o.Flyout.prototype.GAP_X=3*o.Flyout.prototype.MARGIN,o.Flyout.prototype.GAP_Y=3*o.Flyout.prototype.MARGIN,o.Flyout.prototype.SCROLLBAR_MARGIN=2.5,o.Flyout.prototype.width_=0,o.Flyout.prototype.height_=0,o.Flyout.prototype.dragAngleRange_=70,o.Flyout.prototype.createDom=function(n){return this.svgGroup_=o.utils.dom.createSvgElement(n,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},o.Flyout.prototype.init=function(n){this.targetWorkspace=n,this.workspace_.targetWorkspace=n,this.workspace_.scrollbar=new o.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,o.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,o.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),n.getComponentManager().addComponent({component:this,weight:1,capabilities:[o.ComponentManager.Capability.DELETE_AREA,o.ComponentManager.Capability.DRAG_TARGET]})},o.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),o.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(o.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},o.Flyout.prototype.getWidth=function(){return this.width_},o.Flyout.prototype.getHeight=function(){return this.height_},o.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},o.Flyout.prototype.getWorkspace=function(){return this.workspace_},o.Flyout.prototype.isVisible=function(){return this.isVisible_},o.Flyout.prototype.setVisible=function(n){var a=n!=this.isVisible();this.isVisible_=n,a&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},o.Flyout.prototype.setContainerVisible=function(n){var a=n!=this.containerVisible_;this.containerVisible_=n,a&&this.updateDisplay_()},o.Flyout.prototype.updateDisplay_=function(){var n=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=n?"block":"none",this.workspace_.scrollbar.setContainerVisible(n)},o.Flyout.prototype.positionAt_=function(n,a,c,d){this.svgGroup_.setAttribute("width",n),this.svgGroup_.setAttribute("height",a),this.workspace_.setCachedParentSvgSize(n,a),"svg"==this.svgGroup_.tagName?o.utils.dom.setCssTransform(this.svgGroup_,"translate("+c+"px,"+d+"px)"):this.svgGroup_.setAttribute("transform","translate("+c+","+d+")"),(n=this.workspace_.scrollbar)&&(n.setOrigin(c,d),n.resize(),n.hScroll&&n.hScroll.setPosition(n.hScroll.position.x,n.hScroll.position.y),n.vScroll&&n.vScroll.setPosition(n.vScroll.position.x,n.vScroll.position.y))},o.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var a,n=0;a=this.listeners_[n];n++)o.browserEvents.unbind(a);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},o.Flyout.prototype.show=function(n){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof n&&(n=this.getDynamicCategoryContents_(n)),this.setVisible(!0),n=o.utils.toolbox.convertFlyoutDefToJsonArray(n),n=this.createFlyoutInfo_(n),this.layout_(n.contents,n.gaps),this.listeners_.push(o.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var d,a=this.workspace_.getTopBlocks(!1),c=0;d=a[c];c++)d.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},o.Flyout.prototype.createFlyoutInfo_=function(n){var a=[],c=[];this.permanentlyDisabled_.length=0;for(var y,d=this.horizontalLayout?this.GAP_X:this.GAP_Y,_=0;y=n[_];_++)switch(y.custom&&(y=this.getDynamicCategoryContents_(y.custom),y=o.utils.toolbox.convertFlyoutDefToJsonArray(y),n.splice.apply(n,[_,1].concat(y)),y=n[_]),y.kind.toUpperCase()){case"BLOCK":var R=y,x=this.getBlockXml_(R);y=this.createBlock_(x),R=parseInt(R.gap||x.getAttribute("gap"),10),c.push(isNaN(R)?d:R),a.push({type:"block",block:y});break;case"SEP":this.addSeparatorGap_(y,c,d);break;case"LABEL":y=this.createButton_(y,!0),a.push({type:"button",button:y}),c.push(d);break;case"BUTTON":y=this.createButton_(y,!1),a.push({type:"button",button:y}),c.push(d)}return{contents:a,gaps:c}},o.Flyout.prototype.getDynamicCategoryContents_=function(n){if("function"!=typeof(n=this.workspace_.targetWorkspace.getToolboxCategoryCallback(n)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(n=n(this.workspace_.targetWorkspace),!Array.isArray(n))throw new TypeError("Result of toolbox category callback must be an array.");return n},o.Flyout.prototype.createButton_=function(n,a){if(!o.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new o.FlyoutButton(this.workspace_,this.targetWorkspace,n,a)},o.Flyout.prototype.createBlock_=function(n){return(n=o.Xml.domToBlock(n,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(n),n},o.Flyout.prototype.getBlockXml_=function(n){var a=null,c=n.blockxml;if(c&&"string"!=typeof c?a=c:c&&"string"==typeof c?(a=o.Xml.textToDom(c),n.blockxml=a):n.type&&((a=o.utils.xml.createElement("xml")).setAttribute("type",n.type),a.setAttribute("disabled",n.disabled),n.blockxml=a),!a)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return a},o.Flyout.prototype.addSeparatorGap_=function(n,a,c){n=parseInt(n.gap,10),!isNaN(n)&&0<a.length?a[a.length-1]=n:a.push(c)},o.Flyout.prototype.clearOldBlocks_=function(){for(var c,n=this.workspace_.getTopBlocks(!1),a=0;c=n[a];a++)c.workspace==this.workspace_&&c.dispose(!1,!1);for(a=0;a<this.mats_.length;a++)(n=this.mats_[a])&&(o.Tooltip.unbindMouseEvents(n),o.utils.dom.removeNode(n));for(a=this.mats_.length=0;n=this.buttons_[a];a++)n.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},o.Flyout.prototype.addBlockListeners_=function(n,a,c){this.listeners_.push(o.browserEvents.conditionalBind(n,"mousedown",null,this.blockMouseDown_(a))),this.listeners_.push(o.browserEvents.conditionalBind(c,"mousedown",null,this.blockMouseDown_(a))),this.listeners_.push(o.browserEvents.bind(n,"mouseenter",a,a.addSelect)),this.listeners_.push(o.browserEvents.bind(n,"mouseleave",a,a.removeSelect)),this.listeners_.push(o.browserEvents.bind(c,"mouseenter",a,a.addSelect)),this.listeners_.push(o.browserEvents.bind(c,"mouseleave",a,a.removeSelect))},o.Flyout.prototype.blockMouseDown_=function(n){var a=this;return function(c){var d=a.targetWorkspace.getGesture(c);d&&(d.setStartBlock(n),d.handleFlyoutStart(c,a))}},o.Flyout.prototype.onMouseDown_=function(n){var a=this.targetWorkspace.getGesture(n);a&&a.handleFlyoutStart(n,this)},o.Flyout.prototype.isBlockCreatable_=function(n){return n.isEnabled()},o.Flyout.prototype.createBlock=function(n){var a=null;o.Events.disable();var c=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{a=this.placeNewBlock_(n)}finally{o.Events.enable()}if(o.hideChaff(),n=o.Variables.getAddedVariables(this.targetWorkspace,c),o.Events.isEnabled()){for(o.Events.setGroup(!0),c=0;c<n.length;c++){var d=n[c];o.Events.fire(new(o.Events.get(o.Events.VAR_CREATE))(d))}o.Events.fire(new(o.Events.get(o.Events.BLOCK_CREATE))(a))}return this.autoClose?this.hide():this.filterForCapacity_(),a},o.Flyout.prototype.initFlyoutButton_=function(n,a,c){var d=n.createDom();n.moveTo(a,c),n.show(),this.listeners_.push(o.browserEvents.conditionalBind(d,"mousedown",this,this.onMouseDown_)),this.buttons_.push(n)},o.Flyout.prototype.createRect_=function(n,a,c,d,_){return(a=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{"fill-opacity":0,x:a,y:c,height:d.height,width:d.width},null)).tooltip=n,o.Tooltip.bindMouseEvents(a),this.workspace_.getCanvas().insertBefore(a,n.getSvgRoot()),n.flyoutRect_=a,this.mats_[_]=a},o.Flyout.prototype.moveRectToBlock_=function(n,a){var c=a.getHeightWidth();n.setAttribute("width",c.width),n.setAttribute("height",c.height),a=a.getRelativeToSurfaceXY(),n.setAttribute("y",a.y),n.setAttribute("x",this.RTL?a.x-c.width:a.x)},o.Flyout.prototype.filterForCapacity_=function(){for(var c,n=this.workspace_.getTopBlocks(!1),a=0;c=n[a];a++)if(-1==this.permanentlyDisabled_.indexOf(c))for(var d=this.targetWorkspace.isCapacityAvailable(o.utils.getBlockTypeCounts(c));c;)c.setEnabled(d),c=c.getNextBlock()},o.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},o.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},o.Flyout.prototype.placeNewBlock_=function(n){var a=this.targetWorkspace;if(!n.getSvgRoot())throw Error("oldBlock is not rendered.");var c=o.Xml.blockToDom(n,!0);if(a.setResizesEnabled(!1),!(c=o.Xml.domToBlock(c,a)).getSvgRoot())throw Error("block is not rendered.");var d=a.getOriginOffsetInPixels(),_=this.workspace_.getOriginOffsetInPixels();return(n=n.getRelativeToSurfaceXY()).scale(this.workspace_.scale),n=o.utils.Coordinate.sum(_,n),(d=o.utils.Coordinate.difference(n,d)).scale(1/a.scale),c.moveBy(d.x,d.y),c},o.HorizontalFlyout=function(n){o.HorizontalFlyout.superClass_.constructor.call(this,n),this.horizontalLayout=!0},o.utils.object.inherits(o.HorizontalFlyout,o.Flyout),o.HorizontalFlyout.prototype.setMetrics_=function(n){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),c=a.getScrollMetrics(),d=a.getViewMetrics();a=a.getAbsoluteMetrics(),"number"==typeof n.x&&(this.workspace_.scrollX=-(c.left+(c.width-d.width)*n.x)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}},o.HorizontalFlyout.prototype.getX=function(){return 0},o.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var n=this.targetWorkspace.getMetricsManager(),a=n.getAbsoluteMetrics(),c=n.getViewMetrics();n=n.getToolboxMetrics();var d=this.toolboxPosition_==o.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?d?n.height:c.height-this.height_:d?0:c.height:d?0:c.height+a.top-this.height_},o.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var n=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=n.width,this.setBackgroundPath_(n.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),n=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,n,a)}},o.HorizontalFlyout.prototype.setBackgroundPath_=function(n,a){var c=this.toolboxPosition_==o.utils.toolbox.Position.TOP,d=["M 0,"+(c?0:this.CORNER_RADIUS)];c?(d.push("h",n+2*this.CORNER_RADIUS),d.push("v",a),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("h",-n),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),d.push("h",n),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("v",a),d.push("h",-n-2*this.CORNER_RADIUS)),d.push("z"),this.svgBackground_.setAttribute("d",d.join(" "))},o.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},o.HorizontalFlyout.prototype.wheel_=function(n){var a=o.utils.getScrollDeltaPixels(n);if(a=a.x||a.y){var c=this.workspace_.getMetricsManager(),d=c.getScrollMetrics();a=c.getViewMetrics().left-d.left+a,this.workspace_.scrollbar.setX(a),o.WidgetDiv.hide(),o.DropDownDiv.hideWithoutAnimation()}n.preventDefault(),n.stopPropagation()},o.HorizontalFlyout.prototype.layout_=function(n,a){this.workspace_.scale=this.targetWorkspace.scale;var c=this.MARGIN,d=c+this.tabWidth_;this.RTL&&(n=n.reverse());for(var y,_=0;y=n[_];_++)if("block"==y.type){for(var B,R=(y=y.block).getDescendants(!1),x=0;B=R[x];x++)B.isInFlyout=!0;y.render(),R=y.getSvgRoot(),x=y.getHeightWidth(),B=y.outputConnection?this.tabWidth_:0,y.moveBy(B=this.RTL?d+x.width:d-B,c),B=this.createRect_(y,B,c,x,_),d+=x.width+a[_],this.addBlockListeners_(R,y,B)}else"button"==y.type&&(this.initFlyoutButton_(y.button,d,c),d+=y.button.width+a[_])},o.HorizontalFlyout.prototype.isDragTowardWorkspace=function(n){n=Math.atan2(n.y,n.x)/Math.PI*180;var a=this.dragAngleRange_;return n<90+a&&n>90-a||n>-90-a&&n<-90+a},o.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var n=this.svgGroup_.getBoundingClientRect(),a=n.top;return this.toolboxPosition_==o.utils.toolbox.Position.TOP?new o.utils.Rect(-1e9,a+n.height,-1e9,1e9):new o.utils.Rect(a,1e9,-1e9,1e9)},o.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var d,n=0,a=this.workspace_.getTopBlocks(!1),c=0;d=a[c];c++)n=Math.max(n,d.getHeightWidth().height);if(n+=1.5*this.MARGIN,n*=this.workspace_.scale,this.height_!=(n+=o.Scrollbar.scrollbarThickness)){for(c=0;d=a[c];c++)d.flyoutRect_&&this.moveRectToBlock_(d.flyoutRect_,d);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=o.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+n),this.height_=n,this.position(),this.targetWorkspace.recordDragTargets()}},o.registry.register(o.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,o.registry.DEFAULT,o.HorizontalFlyout),o.VerticalFlyout=function(n){o.VerticalFlyout.superClass_.constructor.call(this,n)},o.utils.object.inherits(o.VerticalFlyout,o.Flyout),o.VerticalFlyout.registryName="verticalFlyout",o.VerticalFlyout.prototype.setMetrics_=function(n){if(this.isVisible()){var a=this.workspace_.getMetricsManager(),c=a.getScrollMetrics(),d=a.getViewMetrics();a=a.getAbsoluteMetrics(),"number"==typeof n.y&&(this.workspace_.scrollY=-(c.top+(c.height-d.height)*n.y)),this.workspace_.translate(this.workspace_.scrollX+a.left,this.workspace_.scrollY+a.top)}},o.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var n=this.targetWorkspace.getMetricsManager(),a=n.getAbsoluteMetrics(),c=n.getViewMetrics();return n=n.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==o.utils.toolbox.Position.LEFT?n.width:c.width-this.width_:this.toolboxPosition_==o.utils.toolbox.Position.LEFT?0:c.width:this.toolboxPosition_==o.utils.toolbox.Position.LEFT?0:c.width+a.left-this.width_},o.VerticalFlyout.prototype.getY=function(){return 0},o.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var n=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=n.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,n.height-2*this.CORNER_RADIUS),n=this.getX();var a=this.getY();this.positionAt_(this.width_,this.height_,n,a)}},o.VerticalFlyout.prototype.setBackgroundPath_=function(n,a){var c=this.toolboxPosition_==o.utils.toolbox.Position.RIGHT,d=n+this.CORNER_RADIUS;(d=["M "+(c?d:0)+",0"]).push("h",c?-n:n),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,c?0:1,c?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("v",Math.max(0,a)),d.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,c?0:1,c?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),d.push("h",c?n:-n),d.push("z"),this.svgBackground_.setAttribute("d",d.join(" "))},o.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},o.VerticalFlyout.prototype.wheel_=function(n){var a=o.utils.getScrollDeltaPixels(n);if(a.y){var c=this.workspace_.getMetricsManager(),d=c.getScrollMetrics();a=c.getViewMetrics().top-d.top+a.y,this.workspace_.scrollbar.setY(a),o.WidgetDiv.hide(),o.DropDownDiv.hideWithoutAnimation()}n.preventDefault(),n.stopPropagation()},o.VerticalFlyout.prototype.layout_=function(n,a){this.workspace_.scale=this.targetWorkspace.scale;for(var y,c=this.MARGIN,d=this.RTL?c:c+this.tabWidth_,_=0;y=n[_];_++)if("block"==y.type){for(var B,R=(y=y.block).getDescendants(!1),x=0;B=R[x];x++)B.isInFlyout=!0;y.render(),R=y.getSvgRoot(),x=y.getHeightWidth(),y.moveBy(B=y.outputConnection?d-this.tabWidth_:d,c),B=this.createRect_(y,this.RTL?B-x.width:B,c,x,_),this.addBlockListeners_(R,y,B),c+=x.height+a[_]}else"button"==y.type&&(this.initFlyoutButton_(y.button,d,c),c+=y.button.height+a[_])},o.VerticalFlyout.prototype.isDragTowardWorkspace=function(n){n=Math.atan2(n.y,n.x)/Math.PI*180;var a=this.dragAngleRange_;return n<a&&n>-a||n<-180+a||n>180-a},o.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var n=this.svgGroup_.getBoundingClientRect(),a=n.left;return this.toolboxPosition_==o.utils.toolbox.Position.LEFT?new o.utils.Rect(-1e9,1e9,-1e9,a+n.width):new o.utils.Rect(-1e9,1e9,a,1e9)},o.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var d,n=0,a=this.workspace_.getTopBlocks(!1),c=0;d=a[c];c++){var _=d.getHeightWidth().width;d.outputConnection&&(_-=this.tabWidth_),n=Math.max(n,_)}for(c=0;d=this.buttons_[c];c++)n=Math.max(n,d.width);if(n+=1.5*this.MARGIN+this.tabWidth_,n*=this.workspace_.scale,this.width_!=(n+=o.Scrollbar.scrollbarThickness)){for(c=0;d=a[c];c++){if(this.RTL){_=d.getRelativeToSurfaceXY().x;var y=n/this.workspace_.scale-this.MARGIN;d.outputConnection||(y-=this.tabWidth_),d.moveBy(y-_,0)}d.flyoutRect_&&this.moveRectToBlock_(d.flyoutRect_,d)}if(this.RTL)for(c=0;d=this.buttons_[c];c++)a=d.getPosition().y,d.moveTo(n/this.workspace_.scale-d.width-this.MARGIN-this.tabWidth_,a);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=o.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+n,this.targetWorkspace.scrollY),this.width_=n,this.position(),this.targetWorkspace.recordDragTargets()}},o.registry.register(o.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,o.registry.DEFAULT,o.VerticalFlyout),o.FlyoutButton=function(n,a,c,d){this.workspace_=n,this.targetWorkspace_=a,this.text_=c.text,this.position_=new o.utils.Coordinate(0,0),this.isLabel_=d,this.callbackKey_=c.callbackKey||c.callbackkey,this.cssClass_=c["web-class"]||null,this.onMouseUpWrapper_=null,this.info=c},o.FlyoutButton.MARGIN_X=5,o.FlyoutButton.MARGIN_Y=2,o.FlyoutButton.prototype.width=0,o.FlyoutButton.prototype.height=0,o.FlyoutButton.prototype.createDom=function(){var n=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(n+=" "+this.cssClass_),this.svgGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:n},this.workspace_.getCanvas()),!this.isLabel_)var a=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);n=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var c=o.utils.dom.createSvgElement(o.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),d=o.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(d+="\u200f"),c.textContent=d,this.isLabel_&&(this.svgText_=c,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var _=o.utils.style.getComputedStyle(c,"fontSize"),y=o.utils.style.getComputedStyle(c,"fontWeight"),R=o.utils.style.getComputedStyle(c,"fontFamily");return this.width=o.utils.dom.getFastTextWidthWithSizeString(c,_,y,R),d=o.utils.dom.measureFontMetrics(d,_,y,R),this.height=d.height,this.isLabel_||(this.width+=2*o.FlyoutButton.MARGIN_X,this.height+=2*o.FlyoutButton.MARGIN_Y,a.setAttribute("width",this.width),a.setAttribute("height",this.height)),n.setAttribute("width",this.width),n.setAttribute("height",this.height),c.setAttribute("x",this.width/2),c.setAttribute("y",this.height/2-d.height/2+d.baseline),this.updateTransform_(),this.onMouseUpWrapper_=o.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},o.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},o.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},o.FlyoutButton.prototype.moveTo=function(n,a){this.position_.x=n,this.position_.y=a,this.updateTransform_()},o.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},o.FlyoutButton.prototype.getPosition=function(){return this.position_},o.FlyoutButton.prototype.getButtonText=function(){return this.text_},o.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},o.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&o.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&o.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},o.FlyoutButton.prototype.onMouseUp_=function(n){(n=this.targetWorkspace_.getGesture(n))&&n.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},o.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),o.Generator=function(n){this.name_=n,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},o.Generator.prototype.INFINITE_LOOP_TRAP=null,o.Generator.prototype.STATEMENT_PREFIX=null,o.Generator.prototype.STATEMENT_SUFFIX=null,o.Generator.prototype.INDENT="  ",o.Generator.prototype.COMMENT_WRAP=60,o.Generator.prototype.ORDER_OVERRIDES=[],o.Generator.prototype.isInitialized=null,o.Generator.prototype.workspaceToCode=function(n){n||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),n=o.getMainWorkspace());var a=[];this.init(n),n=n.getTopBlocks(!0);for(var d,c=0;d=n[c];c++){var _=this.blockToCode(d);Array.isArray(_)&&(_=_[0]),_&&(d.outputConnection&&(_=this.scrubNakedValue(_),this.STATEMENT_PREFIX&&!d.suppressPrefixSuffix&&(_=this.injectId(this.STATEMENT_PREFIX,d)+_),this.STATEMENT_SUFFIX&&!d.suppressPrefixSuffix&&(_+=this.injectId(this.STATEMENT_SUFFIX,d))),a.push(_))}return a=a.join("\n"),(a=(a=(a=this.finish(a)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},o.Generator.prototype.prefixLines=function(n,a){return a+n.replace(/(?!\n$)\n/g,"\n"+a)},o.Generator.prototype.allNestedComments=function(n){var a=[];n=n.getDescendants(!0);for(var c=0;c<n.length;c++){var d=n[c].getCommentText();d&&a.push(d)}return a.length&&a.push(""),a.join("\n")},o.Generator.prototype.blockToCode=function(n,a){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!n)return"";if(!n.isEnabled())return a?"":this.blockToCode(n.getNextBlock());if(n.isInsertionMarker())return a?"":this.blockToCode(n.getChildren(!1)[0]);var c=this[n.type];if("function"!=typeof c)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+n.type+'".');if(c=c.call(n,n),Array.isArray(c)){if(!n.outputConnection)throw TypeError("Expecting string from statement block: "+n.type);return[this.scrub_(n,c[0],a),c[1]]}if("string"==typeof c)return this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(c=this.injectId(this.STATEMENT_PREFIX,n)+c),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(c+=this.injectId(this.STATEMENT_SUFFIX,n)),this.scrub_(n,c,a);if(null===c)return"";throw SyntaxError("Invalid code generated: "+c)},o.Generator.prototype.valueToCode=function(n,a,c){if(isNaN(c))throw TypeError("Expecting valid order from block: "+n.type);var d=n.getInputTargetBlock(a);if(!d||""===(a=this.blockToCode(d)))return"";if(!Array.isArray(a))throw TypeError("Expecting tuple from value block: "+d.type);if(n=a[0],a=a[1],isNaN(a))throw TypeError("Expecting valid order from value block: "+d.type);if(!n)return"";d=!1;var _=Math.floor(c),y=Math.floor(a);if(_<=y&&(_!=y||0!=_&&99!=_))for(d=!0,_=0;_<this.ORDER_OVERRIDES.length;_++)if(this.ORDER_OVERRIDES[_][0]==c&&this.ORDER_OVERRIDES[_][1]==a){d=!1;break}return d&&(n="("+n+")"),n},o.Generator.prototype.statementToCode=function(n,a){if(n=n.getInputTargetBlock(a),"string"!=typeof(a=this.blockToCode(n)))throw TypeError("Expecting code from statement block: "+(n&&n.type));return a&&(a=this.prefixLines(a,this.INDENT)),a},o.Generator.prototype.addLoopTrap=function(n,a){return this.INFINITE_LOOP_TRAP&&(n=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,a),this.INDENT)+n),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(n=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,a),this.INDENT)+n),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(n+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,a),this.INDENT)),n},o.Generator.prototype.injectId=function(n,a){return a=a.id.replace(/\$/g,"$$$$"),n.replace(/%1/g,"'"+a+"'")},o.Generator.prototype.RESERVED_WORDS_="",o.Generator.prototype.addReservedWords=function(n){this.RESERVED_WORDS_+=n+","},o.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(o.Generator.prototype,"variableDB_",{get:function(){return o.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(n){o.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=n}}),o.Generator.prototype.provideFunction_=function(n,a){if(!this.definitions_[n]){var d,c=this.nameDB_.getDistinctName(n,o.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[n]=c,a=a.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,c);d!=a;)d=a,a=a.replace(/^(( {2})*) {2}/gm,"$1\0");a=a.replace(/\0/g,this.INDENT),this.definitions_[n]=a}return this.functionNames_[n]},o.Generator.prototype.init=function(n){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},o.Generator.prototype.scrub_=function(n,a,c){return a},o.Generator.prototype.finish=function(n){return delete this.definitions_,delete this.functionNames_,n},o.Generator.prototype.scrubNakedValue=function(n){return n},o.IToolboxItem=function(){},o.ISelectableToolboxItem=function(){},o.ICollapsibleToolboxItem=function(){},o.ToolboxItem=function(n,a,c){this.id_=n.toolboxitemid||o.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=c||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=n,this.parentToolbox_=a,this.workspace_=this.parentToolbox_.getWorkspace()},o.ToolboxItem.prototype.init=function(){},o.ToolboxItem.prototype.getDiv=function(){return null},o.ToolboxItem.prototype.getId=function(){return this.id_},o.ToolboxItem.prototype.getParent=function(){return null},o.ToolboxItem.prototype.getLevel=function(){return this.level_},o.ToolboxItem.prototype.isSelectable=function(){return!1},o.ToolboxItem.prototype.isCollapsible=function(){return!1},o.ToolboxItem.prototype.dispose=function(){},o.ToolboxCategory=function(n,a,c){o.ToolboxCategory.superClass_.constructor.call(this,n,a,c),this.name_=o.utils.replaceMessageReferences(n.name),this.colour_=this.getColour_(n),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),o.utils.object.mixin(this.cssConfig_,n.cssconfig||n.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(n)},o.utils.object.inherits(o.ToolboxCategory,o.ToolboxItem),o.ToolboxCategory.registrationName="category",o.ToolboxCategory.nestedPadding=19,o.ToolboxCategory.borderWidth=8,o.ToolboxCategory.defaultBackgroundColour="#57e",o.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},o.ToolboxCategory.prototype.parseContents_=function(n){var a=n.contents;if(n.custom)this.flyoutItems_=n.custom;else if(a){n=0;for(var c;c=a[n];n++)this.flyoutItems_.push(c)}},o.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},o.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),o.utils.aria.setRole(this.htmlDiv_,o.utils.aria.Role.TREEITEM),o.utils.aria.setState(this.htmlDiv_,o.utils.aria.State.SELECTED,!1),o.utils.aria.setState(this.htmlDiv_,o.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),o.utils.aria.setRole(this.iconDom_,o.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),o.utils.aria.setState(this.htmlDiv_,o.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},o.ToolboxCategory.prototype.createContainer_=function(){var n=document.createElement("div");return o.utils.dom.addClass(n,this.cssConfig_.container),n},o.ToolboxCategory.prototype.createRowContainer_=function(){var n=document.createElement("div");o.utils.dom.addClass(n,this.cssConfig_.row);var a=o.ToolboxCategory.nestedPadding*this.getLevel();return a=a.toString()+"px",this.workspace_.RTL?n.style.paddingRight=a:n.style.paddingLeft=a,n},o.ToolboxCategory.prototype.createRowContentsContainer_=function(){var n=document.createElement("div");return o.utils.dom.addClass(n,this.cssConfig_.rowcontentcontainer),n},o.ToolboxCategory.prototype.createIconDom_=function(){var n=document.createElement("span");return this.parentToolbox_.isHorizontal()||o.utils.dom.addClass(n,this.cssConfig_.icon),n.style.display="inline-block",n},o.ToolboxCategory.prototype.createLabelDom_=function(n){var a=document.createElement("span");return a.setAttribute("id",this.getId()+".label"),a.textContent=n,o.utils.dom.addClass(a,this.cssConfig_.label),a},o.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},o.ToolboxCategory.prototype.addColourBorder_=function(n){n&&(n=o.ToolboxCategory.borderWidth+"px solid "+(n||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=n:this.rowDiv_.style.borderLeft=n)},o.ToolboxCategory.prototype.getColour_=function(n){var a=n.categorystyle||n.categoryStyle;return(n=n.colour)&&a?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):a?this.getColourfromStyle_(a):this.parseColour_(n)},o.ToolboxCategory.prototype.getColourfromStyle_=function(n){var a=this.workspace_.getTheme();if(n&&a){if((a=a.categoryStyles[n])&&a.colour)return this.parseColour_(a.colour);console.warn('Style "'+n+'" must exist and contain a colour value')}return""},o.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},o.ToolboxCategory.prototype.parseColour_=function(n){if(null==(n=o.utils.replaceMessageReferences(n))||""===n)return"";var a=Number(n);return isNaN(a)?(a=o.utils.colour.parse(n))?a:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+n),""):o.hueToHex(a)},o.ToolboxCategory.prototype.openIcon_=function(n){n&&(o.utils.dom.removeClasses(n,this.cssConfig_.closedicon),o.utils.dom.addClass(n,this.cssConfig_.openicon))},o.ToolboxCategory.prototype.closeIcon_=function(n){n&&(o.utils.dom.removeClasses(n,this.cssConfig_.openicon),o.utils.dom.addClass(n,this.cssConfig_.closedicon))},o.ToolboxCategory.prototype.setVisible_=function(n){this.htmlDiv_.style.display=n?"block":"none",this.isHidden_=!n,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},o.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},o.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},o.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},o.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var n=this;n.getParent();)if(!(n=n.getParent()).isExpanded())return!1;return!0},o.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},o.ToolboxCategory.prototype.onClick=function(n){},o.ToolboxCategory.prototype.setSelected=function(n){if(n){var a=this.parseColour_(o.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||a,o.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",o.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);o.utils.aria.setState(this.htmlDiv_,o.utils.aria.State.SELECTED,n)},o.ToolboxCategory.prototype.setDisabled=function(n){this.isDisabled_=n,this.getDiv().setAttribute("disabled",n),n?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},o.ToolboxCategory.prototype.getName=function(){return this.name_},o.ToolboxCategory.prototype.getParent=function(){return this.parent_},o.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},o.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},o.ToolboxCategory.prototype.updateFlyoutContents=function(n){this.flyoutItems_=[],"string"==typeof n?this.toolboxItemDef_.custom=n:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=o.utils.toolbox.convertFlyoutDefToJsonArray(n)),this.parseContents_(this.toolboxItemDef_)},o.ToolboxCategory.prototype.dispose=function(){o.utils.dom.removeNode(this.htmlDiv_)},o.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),o.registry.register(o.registry.Type.TOOLBOX_ITEM,o.ToolboxCategory.registrationName,o.ToolboxCategory),o.ToolboxSeparator=function(n,a){o.ToolboxSeparator.superClass_.constructor.call(this,n,a),this.cssConfig_={container:"blocklyTreeSeparator"},o.utils.object.mixin(this.cssConfig_,n.cssconfig||n.cssConfig)},o.utils.object.inherits(o.ToolboxSeparator,o.ToolboxItem),o.ToolboxSeparator.registrationName="sep",o.ToolboxSeparator.prototype.init=function(){this.createDom_()},o.ToolboxSeparator.prototype.createDom_=function(){var n=document.createElement("div");return o.utils.dom.addClass(n,this.cssConfig_.container),this.htmlDiv_=n},o.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},o.ToolboxSeparator.prototype.dispose=function(){o.utils.dom.removeNode(this.htmlDiv_)},o.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),o.registry.register(o.registry.Type.TOOLBOX_ITEM,o.ToolboxSeparator.registrationName,o.ToolboxSeparator),o.CollapsibleToolboxCategory=function(n,a,c){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],o.CollapsibleToolboxCategory.superClass_.constructor.call(this,n,a,c)},o.utils.object.inherits(o.CollapsibleToolboxCategory,o.ToolboxCategory),o.CollapsibleToolboxCategory.registrationName="collapsibleCategory",o.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var n=o.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return n.contents="blocklyToolboxContents",n},o.CollapsibleToolboxCategory.prototype.parseContents_=function(n){var a=n.contents,c=!0;if(n.custom)this.flyoutItems_=n.custom;else if(a){n=0;for(var d;d=a[n];n++)!o.registry.hasItem(o.registry.Type.TOOLBOX_ITEM,d.kind)||d.kind.toLowerCase()==o.ToolboxSeparator.registrationName&&c?(this.flyoutItems_.push(d),c=!0):(this.createToolboxItem_(d),c=!1)}},o.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(n){var a=n.kind;"CATEGORY"==a.toUpperCase()&&o.utils.toolbox.isCategoryCollapsible(n)&&(a=o.CollapsibleToolboxCategory.registrationName),n=new(o.registry.getClass(o.registry.Type.TOOLBOX_ITEM,a))(n,this.parentToolbox_,this),this.toolboxItems_.push(n)},o.CollapsibleToolboxCategory.prototype.init=function(){o.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},o.CollapsibleToolboxCategory.prototype.createDom_=function(){o.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var n=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(n),o.utils.aria.setRole(this.subcategoriesDiv_,o.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},o.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var n=document.createElement("span");return this.parentToolbox_.isHorizontal()||(o.utils.dom.addClass(n,this.cssConfig_.icon),n.style.visibility="visible"),n.style.display="inline-block",n},o.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(n){var a=document.createElement("div");o.utils.dom.addClass(a,this.cssConfig_.contents);for(var c=0;c<n.length;c++){var d=n[c];d.init();var _=d.getDiv();a.appendChild(_),d.getClickTarget&&d.getClickTarget().setAttribute("id",d.getId())}return a},o.CollapsibleToolboxCategory.prototype.setExpanded=function(n){this.expanded_!=n&&((this.expanded_=n)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),o.utils.aria.setState(this.htmlDiv_,o.utils.aria.State.EXPANDED,n),this.parentToolbox_.handleToolboxItemResize())},o.CollapsibleToolboxCategory.prototype.setVisible_=function(n){this.htmlDiv_.style.display=n?"block":"none";for(var c,a=0;c=this.getChildToolboxItems()[a];a++)c.setVisible_(n);this.isHidden_=!n,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},o.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},o.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},o.CollapsibleToolboxCategory.prototype.onClick=function(n){this.toggleExpanded()},o.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},o.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},o.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},o.registry.register(o.registry.Type.TOOLBOX_ITEM,o.CollapsibleToolboxCategory.registrationName,o.CollapsibleToolboxCategory),o.Events.ToolboxItemSelect=function(n,a,c){o.Events.ToolboxItemSelect.superClass_.constructor.call(this,c),this.oldItem=n,this.newItem=a},o.utils.object.inherits(o.Events.ToolboxItemSelect,o.Events.UiBase),o.Events.ToolboxItemSelect.prototype.type=o.Events.TOOLBOX_ITEM_SELECT,o.Events.ToolboxItemSelect.prototype.toJson=function(){var n=o.Events.ToolboxItemSelect.superClass_.toJson.call(this);return n.oldItem=this.oldItem,n.newItem=this.newItem,n},o.Events.ToolboxItemSelect.prototype.fromJson=function(n){o.Events.ToolboxItemSelect.superClass_.fromJson.call(this,n),this.oldItem=n.oldItem,this.newItem=n.newItem},o.registry.register(o.registry.Type.EVENT,o.Events.TOOLBOX_ITEM_SELECT,o.Events.ToolboxItemSelect),o.IAutoHideable=function(){},o.IStyleable=function(){},o.IToolbox=function(){},o.Toolbox=function(n){o.Toolbox.superClass_.constructor.call(this),this.workspace_=n,this.id="toolbox",this.toolboxDef_=n.options.languageTree||{contents:[]},this.horizontalLayout_=n.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=n.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=n.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},o.utils.object.inherits(o.Toolbox,o.DeleteArea),o.Toolbox.prototype.onShortcut=function(n){return!1},o.Toolbox.prototype.init=function(){var n=this.workspace_,a=n.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),o.utils.dom.insertAfter(this.flyout_.createDom("svg"),a),this.setVisible(!0),this.flyout_.init(n),this.render(this.toolboxDef_),(n=n.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),n.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[o.ComponentManager.Capability.AUTOHIDEABLE,o.ComponentManager.Capability.DELETE_AREA,o.ComponentManager.Capability.DRAG_TARGET]})},o.Toolbox.prototype.createDom_=function(n){n=n.getParentSvg();var a=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,o.utils.aria.setRole(this.contentsDiv_,o.utils.aria.Role.TREE),a.appendChild(this.contentsDiv_),n.parentNode.insertBefore(a,n),this.attachEvents_(a,this.contentsDiv_),a},o.Toolbox.prototype.createContainer_=function(){var n=document.createElement("div");return n.setAttribute("layout",this.isHorizontal()?"h":"v"),o.utils.dom.addClass(n,"blocklyToolboxDiv"),o.utils.dom.addClass(n,"blocklyNonSelectable"),n.setAttribute("dir",this.RTL?"RTL":"LTR"),n},o.Toolbox.prototype.createContentsContainer_=function(){var n=document.createElement("div");return o.utils.dom.addClass(n,"blocklyToolboxContents"),this.isHorizontal()&&(n.style.flexDirection="row"),n},o.Toolbox.prototype.attachEvents_=function(n,a){n=o.browserEvents.conditionalBind(n,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(n),a=o.browserEvents.conditionalBind(a,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(a)},o.Toolbox.prototype.onClick_=function(n){if(o.utils.isRightButton(n)||n.target==this.HtmlDiv)o.hideChaff(!1);else{var a=n.target.getAttribute("id");a&&(a=this.getToolboxItemById(a)).isSelectable()&&(this.setSelectedItem(a),a.onClick(n)),o.hideChaff(!0)}o.Touch.clearTouchIdentifier()},o.Toolbox.prototype.onKeyDown_=function(n){var a=!1;switch(n.keyCode){case o.utils.KeyCodes.DOWN:a=this.selectNext_();break;case o.utils.KeyCodes.UP:a=this.selectPrevious_();break;case o.utils.KeyCodes.LEFT:a=this.selectParent_();break;case o.utils.KeyCodes.RIGHT:a=this.selectChild_();break;case o.utils.KeyCodes.ENTER:case o.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),a=!0);break;default:a=!1}!a&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(a=this.selectedItem_.onKeyDown(n)),a&&n.preventDefault()},o.Toolbox.prototype.createFlyout_=function(){var n=this.workspace_,a=new o.Options({parentWorkspace:n,rtl:n.RTL,oneBasedIndex:n.options.oneBasedIndex,horizontalLayout:n.horizontalLayout,renderer:n.options.renderer,rendererOverrides:n.options.rendererOverrides,move:{scrollbars:!0}});return a.toolboxPosition=n.options.toolboxPosition,new(o.registry.getClassFromOptions(n.horizontalLayout?o.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:o.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,n.options,!0))(a)},o.Toolbox.prototype.render=function(n){this.toolboxDef_=n;for(var a=0;a<this.contents_.length;a++){var c=this.contents_[a];c&&c.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(n.contents),this.position(),this.handleToolboxItemResize()},o.Toolbox.prototype.renderContents_=function(n){for(var d,a=document.createDocumentFragment(),c=0;d=n[c];c++)this.createToolboxItem_(d,a);this.contentsDiv_.appendChild(a)},o.Toolbox.prototype.createToolboxItem_=function(n,a){var c=n.kind;"CATEGORY"==c.toUpperCase()&&o.utils.toolbox.isCategoryCollapsible(n)&&(c=o.CollapsibleToolboxCategory.registrationName),(c=o.registry.getClass(o.registry.Type.TOOLBOX_ITEM,c.toLowerCase()))&&(n=new c(n,this),this.addToolboxItem_(n),n.init(),(c=n.getDiv())&&a.appendChild(c),n.getClickTarget&&n.getClickTarget().setAttribute("id",n.getId()))},o.Toolbox.prototype.addToolboxItem_=function(n){if(this.contents_.push(n),this.contentMap_[n.getId()]=n,n.isCollapsible())for(var c,a=0;c=n.getChildToolboxItems()[a];a++)this.addToolboxItem_(c)},o.Toolbox.prototype.getToolboxItems=function(){return this.contents_},o.Toolbox.prototype.addStyle=function(n){o.utils.dom.addClass(this.HtmlDiv,n)},o.Toolbox.prototype.removeStyle=function(n){o.utils.dom.removeClass(this.HtmlDiv,n)},o.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var n=this.HtmlDiv.getBoundingClientRect(),a=n.top,c=a+n.height,d=n.left;return n=d+n.width,this.toolboxPosition==o.utils.toolbox.Position.TOP?new o.utils.Rect(-1e7,c,-1e7,1e7):this.toolboxPosition==o.utils.toolbox.Position.BOTTOM?new o.utils.Rect(a,1e7,-1e7,1e7):this.toolboxPosition==o.utils.toolbox.Position.LEFT?new o.utils.Rect(-1e7,1e7,-1e7,n):new o.utils.Rect(-1e7,1e7,d,1e7)},o.Toolbox.prototype.wouldDelete=function(n,a){return this.updateWouldDelete_(n instanceof o.BlockSvg?!n.getParent()&&n.isDeletable():n.isDeletable()),this.wouldDelete_},o.Toolbox.prototype.onDragEnter=function(n){this.updateCursorDeleteStyle_(!0)},o.Toolbox.prototype.onDragExit=function(n){this.updateCursorDeleteStyle_(!1)},o.Toolbox.prototype.onDrop=function(n){this.updateCursorDeleteStyle_(!1)},o.Toolbox.prototype.updateWouldDelete_=function(n){n!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=n,this.updateCursorDeleteStyle_(!0))},o.Toolbox.prototype.updateCursorDeleteStyle_=function(n){var a=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";n?this.addStyle(a):this.removeStyle(a)},o.Toolbox.prototype.getToolboxItemById=function(n){return this.contentMap_[n]||null},o.Toolbox.prototype.getWidth=function(){return this.width_},o.Toolbox.prototype.getHeight=function(){return this.height_},o.Toolbox.prototype.getFlyout=function(){return this.flyout_},o.Toolbox.prototype.getWorkspace=function(){return this.workspace_},o.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},o.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},o.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},o.Toolbox.prototype.position=function(){var n=this.workspace_.getMetrics(),a=this.HtmlDiv;a&&(this.horizontalLayout_?(a.style.left="0",a.style.height="auto",a.style.width="100%",this.height_=a.offsetHeight,this.width_=n.viewWidth,this.toolboxPosition==o.utils.toolbox.Position.TOP?a.style.top="0":a.style.bottom="0"):(this.toolboxPosition==o.utils.toolbox.Position.RIGHT?a.style.right="0":a.style.left="0",a.style.height="100%",this.width_=a.offsetWidth,this.height_=n.viewHeight),this.flyout_.position())},o.Toolbox.prototype.handleToolboxItemResize=function(){var n=this.workspace_,a=this.HtmlDiv.getBoundingClientRect();n.translate(this.toolboxPosition==o.utils.toolbox.Position.LEFT?n.scrollX+a.width:n.scrollX,this.toolboxPosition==o.utils.toolbox.Position.TOP?n.scrollY+a.height:n.scrollY),o.svgResize(n)},o.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},o.Toolbox.prototype.refreshTheme=function(){for(var n=0;n<this.contents_.length;n++){var a=this.contents_[n];a.refreshTheme&&a.refreshTheme()}},o.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},o.Toolbox.prototype.setVisible=function(n){this.isVisible_!==n&&(this.HtmlDiv.style.display=n?"block":"none",this.isVisible_=n,this.workspace_.recordDragTargets())},o.Toolbox.prototype.autoHide=function(n){!n&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},o.Toolbox.prototype.setSelectedItem=function(n){var a=this.selectedItem_;!n&&!a||n&&!n.isSelectable()||(this.shouldDeselectItem_(a,n)&&null!=a&&this.deselectItem_(a),this.shouldSelectItem_(a,n)&&null!=n&&this.selectItem_(a,n),this.updateFlyout_(a,n),this.fireSelectEvent_(a,n))},o.Toolbox.prototype.shouldDeselectItem_=function(n,a){return null!=n&&(!n.isCollapsible()||n!=a)},o.Toolbox.prototype.shouldSelectItem_=function(n,a){return null!=a&&a!=n},o.Toolbox.prototype.deselectItem_=function(n){this.selectedItem_=null,this.previouslySelectedItem_=n,n.setSelected(!1),o.utils.aria.setState(this.contentsDiv_,o.utils.aria.State.ACTIVEDESCENDANT,"")},o.Toolbox.prototype.selectItem_=function(n,a){this.selectedItem_=a,this.previouslySelectedItem_=n,a.setSelected(!0),o.utils.aria.setState(this.contentsDiv_,o.utils.aria.State.ACTIVEDESCENDANT,a.getId())},o.Toolbox.prototype.selectItemByPosition=function(n){-1<n&&n<this.contents_.length&&(n=this.contents_[n]).isSelectable()&&this.setSelectedItem(n)},o.Toolbox.prototype.updateFlyout_=function(n,a){(n!=a||a.isCollapsible())&&a&&a.getContents().length?(this.flyout_.show(a.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},o.Toolbox.prototype.fireSelectEvent_=function(n,a){var c=n&&n.getName(),d=a&&a.getName();n==a&&(d=null),n=new(o.Events.get(o.Events.TOOLBOX_ITEM_SELECT))(c,d,this.workspace_.id),o.Events.fire(n)},o.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},o.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var n=this.selectedItem_;return n.isExpanded()?this.selectNext_():n.setExpanded(!0),!0},o.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var n=this.contents_.indexOf(this.selectedItem_)+1;if(-1<n&&n<this.contents_.length){for(var a=this.contents_[n];a&&!a.isSelectable();)a=this.contents_[++n];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1},o.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var n=this.contents_.indexOf(this.selectedItem_)-1;if(-1<n&&n<this.contents_.length){for(var a=this.contents_[n];a&&!a.isSelectable();)a=this.contents_[--n];if(a&&a.isSelectable())return this.setSelectedItem(a),!0}return!1},o.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var n=0;n<this.contents_.length;n++)this.contents_[n].dispose();for(n=0;n<this.boundEvents_.length;n++)o.browserEvents.unbind(this.boundEvents_[n]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),o.utils.dom.removeNode(this.HtmlDiv)},o.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),o.registry.register(o.registry.Type.TOOLBOX,o.registry.DEFAULT,o.Toolbox),o.Events.TrashcanOpen=function(n,a){o.Events.TrashcanOpen.superClass_.constructor.call(this,a),this.isOpen=n},o.utils.object.inherits(o.Events.TrashcanOpen,o.Events.UiBase),o.Events.TrashcanOpen.prototype.type=o.Events.TRASHCAN_OPEN,o.Events.TrashcanOpen.prototype.toJson=function(){var n=o.Events.TrashcanOpen.superClass_.toJson.call(this);return n.isOpen=this.isOpen,n},o.Events.TrashcanOpen.prototype.fromJson=function(n){o.Events.TrashcanOpen.superClass_.fromJson.call(this,n),this.isOpen=n.isOpen},o.registry.register(o.registry.Type.EVENT,o.Events.TRASHCAN_OPEN,o.Events.TrashcanOpen),o.IPositionable=function(){},o.uiPosition={},o.uiPosition.verticalPosition={TOP:0,BOTTOM:1},o.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},o.uiPosition.bumpDirection={UP:0,DOWN:1},o.uiPosition.getStartPositionRect=function(n,a,c,d,_,y){var R=y.scrollbar&&y.scrollbar.canScrollVertically();return n.horizontal===o.uiPosition.horizontalPosition.LEFT?(c=_.absoluteMetrics.left+c,R&&y.RTL&&(c+=o.Scrollbar.scrollbarThickness)):(c=_.absoluteMetrics.left+_.viewMetrics.width-a.width-c,R&&!y.RTL&&(c-=o.Scrollbar.scrollbarThickness)),n.vertical===o.uiPosition.verticalPosition.TOP?n=_.absoluteMetrics.top+d:(n=_.absoluteMetrics.top+_.viewMetrics.height-a.height-d,y.scrollbar&&y.scrollbar.canScrollHorizontally()&&(n-=o.Scrollbar.scrollbarThickness)),new o.utils.Rect(n,n+a.height,c,c+a.width)},o.uiPosition.getCornerOppositeToolbox=function(n,a){return{horizontal:a.toolboxMetrics.position===o.utils.toolbox.Position.LEFT||n.horizontalLayout&&!n.RTL?o.uiPosition.horizontalPosition.RIGHT:o.uiPosition.horizontalPosition.LEFT,vertical:a.toolboxMetrics.position===o.utils.toolbox.Position.BOTTOM?o.uiPosition.verticalPosition.TOP:o.uiPosition.verticalPosition.BOTTOM}},o.uiPosition.bumpPositionRect=function(n,a,c,d){for(var B,_=n.left,y=n.right-n.left,R=n.bottom-n.top,x=0;B=d[x];x++)n.intersects(B)&&(n=new o.utils.Rect(n=c===o.uiPosition.bumpDirection.UP?B.top-R-a:B.bottom+a,n+R,_,_+y),x=-1);return n},o.Trashcan=function(n){o.Trashcan.superClass_.constructor.call(this),this.workspace_=n,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(n=new o.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(n.toolboxPosition=this.workspace_.toolboxPosition==o.utils.toolbox.Position.TOP?o.utils.toolbox.Position.BOTTOM:o.utils.toolbox.Position.TOP,this.flyout=new(o.registry.getClassFromOptions(o.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(n)):(n.toolboxPosition=this.workspace_.toolboxPosition==o.utils.toolbox.Position.RIGHT?o.utils.toolbox.Position.LEFT:o.utils.toolbox.Position.RIGHT,this.flyout=new(o.registry.getClassFromOptions(o.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(n)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},o.utils.object.inherits(o.Trashcan,o.DeleteArea),o.Trashcan.prototype.WIDTH_=47,o.Trashcan.prototype.BODY_HEIGHT_=44,o.Trashcan.prototype.LID_HEIGHT_=16,o.Trashcan.prototype.MARGIN_VERTICAL_=20,o.Trashcan.prototype.MARGIN_HORIZONTAL_=20,o.Trashcan.prototype.MARGIN_HOTSPOT_=10,o.Trashcan.prototype.SPRITE_LEFT_=0,o.Trashcan.prototype.SPRITE_TOP_=32,o.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,o.Trashcan.ANIMATION_LENGTH_=80,o.Trashcan.ANIMATION_FRAMES_=4,o.Trashcan.OPACITY_MIN_=.4,o.Trashcan.OPACITY_MAX_=.8,o.Trashcan.MAX_LID_ANGLE_=45,o.Trashcan.prototype.isLidOpen=!1,o.Trashcan.prototype.minOpenness_=0,o.Trashcan.prototype.svgGroup_=null,o.Trashcan.prototype.svgLid_=null,o.Trashcan.prototype.lidTask_=0,o.Trashcan.prototype.lidOpen_=0,o.Trashcan.prototype.left_=0,o.Trashcan.prototype.top_=0,o.Trashcan.prototype.initialized_=!1,o.Trashcan.prototype.createDom=function(){this.svgGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:"blocklyTrash"},null);var n=String(Math.random()).substring(2),a=o.utils.dom.createSvgElement(o.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+n},this.svgGroup_);o.utils.dom.createSvgElement(o.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},a);var c=o.utils.dom.createSvgElement(o.utils.Svg.IMAGE,{width:o.SPRITE.width,x:-this.SPRITE_LEFT_,height:o.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+n+")"},this.svgGroup_);return c.setAttributeNS(o.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+o.SPRITE.url),a=o.utils.dom.createSvgElement(o.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+n},this.svgGroup_),o.utils.dom.createSvgElement(o.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},a),this.svgLid_=o.utils.dom.createSvgElement(o.utils.Svg.IMAGE,{width:o.SPRITE.width,x:-this.SPRITE_LEFT_,height:o.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+n+")"},this.svgGroup_),this.svgLid_.setAttributeNS(o.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+o.SPRITE.url),o.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),o.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),o.browserEvents.bind(c,"mouseover",this,this.mouseOver_),o.browserEvents.bind(c,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},o.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(o.utils.dom.insertAfter(this.flyout.createDom(o.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[o.ComponentManager.Capability.AUTOHIDEABLE,o.ComponentManager.Capability.DELETE_AREA,o.ComponentManager.Capability.DRAG_TARGET,o.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},o.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(o.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},o.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},o.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},o.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var n=this.contents_.map(o.Xml.textToDom);this.flyout.show(n),this.fireUiEvent_(!0)}},o.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},o.Trashcan.prototype.autoHide=function(n){!n&&this.flyout&&this.closeFlyout()},o.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},o.Trashcan.prototype.position=function(n,a){if(this.initialized_){var c=o.uiPosition.getCornerOppositeToolbox(this.workspace_,n);n=o.uiPosition.getStartPositionRect(c,new o.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,n,this.workspace_),a=o.uiPosition.bumpPositionRect(n,this.MARGIN_VERTICAL_,c.vertical===o.uiPosition.verticalPosition.TOP?o.uiPosition.bumpDirection.DOWN:o.uiPosition.bumpDirection.UP,a),this.top_=a.top,this.left_=a.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},o.Trashcan.prototype.getBoundingRectangle=function(){return new o.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},o.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var n=this.svgGroup_.getBoundingClientRect(),a=n.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new o.utils.Rect(a,a+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,n=n.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,n+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},o.Trashcan.prototype.onDragOver=function(n){this.setLidOpen(this.wouldDelete_)},o.Trashcan.prototype.onDragExit=function(n){this.setLidOpen(!1)},o.Trashcan.prototype.onDrop=function(n){setTimeout(this.setLidOpen.bind(this,!1),100)},o.Trashcan.prototype.setLidOpen=function(n){this.isLidOpen!=n&&(clearTimeout(this.lidTask_),this.isLidOpen=n,this.animateLid_())},o.Trashcan.prototype.animateLid_=function(){var n=o.Trashcan.ANIMATION_FRAMES_,a=1/(n+1);this.lidOpen_+=this.isLidOpen?a:-a,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*o.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(a=o.Trashcan.OPACITY_MIN_)+this.lidOpen_*(o.Trashcan.OPACITY_MAX_-a),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),o.Trashcan.ANIMATION_LENGTH_/n))},o.Trashcan.prototype.setLidAngle_=function(n){var a=this.workspace_.toolboxPosition==o.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(a?-n:n)+","+(a?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},o.Trashcan.prototype.setMinOpenness_=function(n){this.minOpenness_=n,this.isLidOpen||this.setLidAngle_(n*o.Trashcan.MAX_LID_ANGLE_)},o.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},o.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},o.Trashcan.prototype.fireUiEvent_=function(n){n=new(o.Events.get(o.Events.TRASHCAN_OPEN))(n,this.workspace_.id),o.Events.fire(n)},o.Trashcan.prototype.blockMouseDownWhenOpenable_=function(n){!this.contentsIsOpen()&&this.hasContents_()&&n.stopPropagation()},o.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},o.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},o.Trashcan.prototype.onDelete_=function(n){if(!(0>=this.workspace_.options.maxTrashcanContents)&&n.type==o.Events.BLOCK_DELETE&&n.oldXml.tagName&&"shadow"!=n.oldXml.tagName.toLowerCase()&&(n=this.cleanBlockXML_(n.oldXml),-1==this.contents_.indexOf(n))){for(this.contents_.unshift(n);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},o.Trashcan.prototype.cleanBlockXML_=function(n){for(var a=n=n.cloneNode(!0);a;){a.removeAttribute&&(a.removeAttribute("x"),a.removeAttribute("y"),a.removeAttribute("id"),a.removeAttribute("disabled"),"comment"==a.nodeName&&(a.removeAttribute("h"),a.removeAttribute("w"),a.removeAttribute("pinned")));var c=a.firstChild||a.nextSibling;if(!c)for(c=a.parentNode;c;){if(c.nextSibling){c=c.nextSibling;break}c=c.parentNode}a=c}return o.Xml.domToText(n)},o.VariablesDynamic={},o.VariablesDynamic.onCreateVariableButtonClick_String=function(n){o.Variables.createVariableButtonHandler(n.getTargetWorkspace(),void 0,"String")},o.VariablesDynamic.onCreateVariableButtonClick_Number=function(n){o.Variables.createVariableButtonHandler(n.getTargetWorkspace(),void 0,"Number")},o.VariablesDynamic.onCreateVariableButtonClick_Colour=function(n){o.Variables.createVariableButtonHandler(n.getTargetWorkspace(),void 0,"Colour")},o.VariablesDynamic.flyoutCategory=function(n){var a=[],c=document.createElement("button");return c.setAttribute("text",o.Msg.NEW_STRING_VARIABLE),c.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),a.push(c),(c=document.createElement("button")).setAttribute("text",o.Msg.NEW_NUMBER_VARIABLE),c.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),a.push(c),(c=document.createElement("button")).setAttribute("text",o.Msg.NEW_COLOUR_VARIABLE),c.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),a.push(c),n.registerButtonCallback("CREATE_VARIABLE_STRING",o.VariablesDynamic.onCreateVariableButtonClick_String),n.registerButtonCallback("CREATE_VARIABLE_NUMBER",o.VariablesDynamic.onCreateVariableButtonClick_Number),n.registerButtonCallback("CREATE_VARIABLE_COLOUR",o.VariablesDynamic.onCreateVariableButtonClick_Colour),n=o.VariablesDynamic.flyoutCategoryBlocks(n),a.concat(n)},o.VariablesDynamic.flyoutCategoryBlocks=function(n){var a=[];if(0<(n=n.getAllVariables()).length){if(o.Blocks.variables_set_dynamic){var c=n[n.length-1],d=o.utils.xml.createElement("block");d.setAttribute("type","variables_set_dynamic"),d.setAttribute("gap",24),d.appendChild(o.Variables.generateVariableFieldDom(c)),a.push(d)}if(o.Blocks.variables_get_dynamic){n.sort(o.VariableModel.compareByName),c=0;for(var _;_=n[c];c++)(d=o.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),d.setAttribute("gap",8),d.appendChild(o.Variables.generateVariableFieldDom(_)),a.push(d)}}return a},o.ZoomControls=function(n){this.workspace_=n,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},o.ZoomControls.prototype.WIDTH_=32,o.ZoomControls.prototype.HEIGHT_=32,o.ZoomControls.prototype.SMALL_SPACING_=2,o.ZoomControls.prototype.LARGE_SPACING_=11,o.ZoomControls.prototype.MARGIN_VERTICAL_=20,o.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,o.ZoomControls.prototype.svgGroup_=null,o.ZoomControls.prototype.left_=0,o.ZoomControls.prototype.top_=0,o.ZoomControls.prototype.initialized_=!1,o.ZoomControls.prototype.createDom=function(){this.svgGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{},null);var n=String(Math.random()).substring(2);return this.createZoomOutSvg_(n),this.createZoomInSvg_(n),this.workspace_.isMovable()&&this.createZoomResetSvg_(n),this.svgGroup_},o.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[o.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},o.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&o.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&o.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&o.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&o.browserEvents.unbind(this.onZoomOutWrapper_)},o.ZoomControls.prototype.getBoundingRectangle=function(){var n=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(n+=this.LARGE_SPACING_+this.HEIGHT_),new o.utils.Rect(this.top_,this.top_+n,this.left_,this.left_+this.WIDTH_)},o.ZoomControls.prototype.position=function(n,a){if(this.initialized_){var c=o.uiPosition.getCornerOppositeToolbox(this.workspace_,n),d=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(d+=this.LARGE_SPACING_+this.HEIGHT_),n=o.uiPosition.getStartPositionRect(c,new o.utils.Size(this.WIDTH_,d),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,n,this.workspace_),a=o.uiPosition.bumpPositionRect(n,this.MARGIN_VERTICAL_,(c=c.vertical)===o.uiPosition.verticalPosition.TOP?o.uiPosition.bumpDirection.DOWN:o.uiPosition.bumpDirection.UP,a),c===o.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(c=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(c+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(c=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(c+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=a.top,this.left_=a.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},o.ZoomControls.prototype.createZoomOutSvg_=function(n){this.zoomOutGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var a=o.utils.dom.createSvgElement(o.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+n},this.zoomOutGroup_);o.utils.dom.createSvgElement(o.utils.Svg.RECT,{width:32,height:32},a),o.utils.dom.createSvgElement(o.utils.Svg.IMAGE,{width:o.SPRITE.width,height:o.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+n+")"},this.zoomOutGroup_).setAttributeNS(o.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+o.SPRITE.url),this.onZoomOutWrapper_=o.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},o.ZoomControls.prototype.createZoomInSvg_=function(n){this.zoomInGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var a=o.utils.dom.createSvgElement(o.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+n},this.zoomInGroup_);o.utils.dom.createSvgElement(o.utils.Svg.RECT,{width:32,height:32},a),o.utils.dom.createSvgElement(o.utils.Svg.IMAGE,{width:o.SPRITE.width,height:o.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+n+")"},this.zoomInGroup_).setAttributeNS(o.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+o.SPRITE.url),this.onZoomInWrapper_=o.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},o.ZoomControls.prototype.zoom_=function(n,a){this.workspace_.markFocused(),this.workspace_.zoomCenter(n),this.fireZoomEvent_(),o.Touch.clearTouchIdentifier(),a.stopPropagation(),a.preventDefault()},o.ZoomControls.prototype.createZoomResetSvg_=function(n){this.zoomResetGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var a=o.utils.dom.createSvgElement(o.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+n},this.zoomResetGroup_);o.utils.dom.createSvgElement(o.utils.Svg.RECT,{width:32,height:32},a),o.utils.dom.createSvgElement(o.utils.Svg.IMAGE,{width:o.SPRITE.width,height:o.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+n+")"},this.zoomResetGroup_).setAttributeNS(o.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+o.SPRITE.url),this.onZoomResetWrapper_=o.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},o.ZoomControls.prototype.resetZoom_=function(n){this.workspace_.markFocused();var a=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(a),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),o.Touch.clearTouchIdentifier(),n.stopPropagation(),n.preventDefault()},o.ZoomControls.prototype.fireZoomEvent_=function(){var n=new(o.Events.get(o.Events.CLICK))(null,this.workspace_.id,"zoom_controls");o.Events.fire(n)},o.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),o.ShortcutItems={},o.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},o.ShortcutItems.registerEscape=function(){var n={name:o.ShortcutItems.names.ESCAPE,preconditionFn:function(a){return!a.options.readOnly},callback:function(){return o.hideChaff(),!0}};o.ShortcutRegistry.registry.register(n),o.ShortcutRegistry.registry.addKeyMapping(o.utils.KeyCodes.ESC,n.name)},o.ShortcutItems.registerDelete=function(){var n={name:o.ShortcutItems.names.DELETE,preconditionFn:function(a){return!a.options.readOnly&&o.selected&&o.selected.isDeletable()},callback:function(a,c){return c.preventDefault(),!o.Gesture.inProgress()&&(o.deleteBlock(o.selected),!0)}};o.ShortcutRegistry.registry.register(n),o.ShortcutRegistry.registry.addKeyMapping(o.utils.KeyCodes.DELETE,n.name),o.ShortcutRegistry.registry.addKeyMapping(o.utils.KeyCodes.BACKSPACE,n.name)},o.ShortcutItems.registerCopy=function(){var n={name:o.ShortcutItems.names.COPY,preconditionFn:function(c){return!c.options.readOnly&&!o.Gesture.inProgress()&&o.selected&&o.selected.isDeletable()&&o.selected.isMovable()},callback:function(c,d){return d.preventDefault(),o.hideChaff(),o.copy(o.selected),!0}};o.ShortcutRegistry.registry.register(n);var a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.C,[o.utils.KeyCodes.CTRL]);o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.C,[o.utils.KeyCodes.ALT]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.C,[o.utils.KeyCodes.META]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name)},o.ShortcutItems.registerCut=function(){var n={name:o.ShortcutItems.names.CUT,preconditionFn:function(c){return!c.options.readOnly&&!o.Gesture.inProgress()&&o.selected&&o.selected.isDeletable()&&o.selected.isMovable()&&!o.selected.workspace.isFlyout},callback:function(){return o.copy(o.selected),o.deleteBlock(o.selected),!0}};o.ShortcutRegistry.registry.register(n);var a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.X,[o.utils.KeyCodes.CTRL]);o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.X,[o.utils.KeyCodes.ALT]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.X,[o.utils.KeyCodes.META]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name)},o.ShortcutItems.registerPaste=function(){var n={name:o.ShortcutItems.names.PASTE,preconditionFn:function(c){return!c.options.readOnly&&!o.Gesture.inProgress()},callback:function(){return o.paste()}};o.ShortcutRegistry.registry.register(n);var a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.V,[o.utils.KeyCodes.CTRL]);o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.V,[o.utils.KeyCodes.ALT]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.V,[o.utils.KeyCodes.META]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name)},o.ShortcutItems.registerUndo=function(){var n={name:o.ShortcutItems.names.UNDO,preconditionFn:function(c){return!c.options.readOnly&&!o.Gesture.inProgress()},callback:function(c){return o.hideChaff(),c.undo(!1),!0}};o.ShortcutRegistry.registry.register(n);var a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.Z,[o.utils.KeyCodes.CTRL]);o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.Z,[o.utils.KeyCodes.ALT]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.Z,[o.utils.KeyCodes.META]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name)},o.ShortcutItems.registerRedo=function(){var n={name:o.ShortcutItems.names.REDO,preconditionFn:function(c){return!o.Gesture.inProgress()&&!c.options.readOnly},callback:function(c){return o.hideChaff(),c.undo(!0),!0}};o.ShortcutRegistry.registry.register(n);var a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.Z,[o.utils.KeyCodes.SHIFT,o.utils.KeyCodes.CTRL]);o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.Z,[o.utils.KeyCodes.SHIFT,o.utils.KeyCodes.ALT]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.Z,[o.utils.KeyCodes.SHIFT,o.utils.KeyCodes.META]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name),a=o.ShortcutRegistry.registry.createSerializedKey(o.utils.KeyCodes.Y,[o.utils.KeyCodes.CTRL]),o.ShortcutRegistry.registry.addKeyMapping(a,n.name)},o.ShortcutItems.registerDefaultShortcuts=function(){o.ShortcutItems.registerEscape(),o.ShortcutItems.registerDelete(),o.ShortcutItems.registerCopy(),o.ShortcutItems.registerCut(),o.ShortcutItems.registerPaste(),o.ShortcutItems.registerUndo(),o.ShortcutItems.registerRedo()},o.ShortcutItems.registerDefaultShortcuts(),o.ContextMenuItems={},o.ContextMenuItems.registerUndo=function(){o.ContextMenuRegistry.registry.register({displayText:function(){return o.Msg.UNDO},preconditionFn:function(n){return 0<n.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(n){n.workspace.undo(!1)},scopeType:o.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},o.ContextMenuItems.registerRedo=function(){o.ContextMenuRegistry.registry.register({displayText:function(){return o.Msg.REDO},preconditionFn:function(n){return 0<n.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(n){n.workspace.undo(!0)},scopeType:o.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},o.ContextMenuItems.registerCleanup=function(){o.ContextMenuRegistry.registry.register({displayText:function(){return o.Msg.CLEAN_UP},preconditionFn:function(n){return n.workspace.isMovable()?1<n.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(n){n.workspace.cleanUp()},scopeType:o.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},o.ContextMenuItems.toggleOption_=function(n,a){for(var c=0,d=0;d<a.length;d++)for(var _=a[d];_;)setTimeout(_.setCollapsed.bind(_,n),c),_=_.getNextBlock(),c+=10},o.ContextMenuItems.registerCollapse=function(){o.ContextMenuRegistry.registry.register({displayText:function(){return o.Msg.COLLAPSE_ALL},preconditionFn:function(n){if(n.workspace.options.collapse){n=n.workspace.getTopBlocks(!1);for(var a=0;a<n.length;a++)for(var c=n[a];c;){if(!c.isCollapsed())return"enabled";c=c.getNextBlock()}return"disabled"}return"hidden"},callback:function(n){o.ContextMenuItems.toggleOption_(!0,n.workspace.getTopBlocks(!0))},scopeType:o.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},o.ContextMenuItems.registerExpand=function(){o.ContextMenuRegistry.registry.register({displayText:function(){return o.Msg.EXPAND_ALL},preconditionFn:function(n){if(n.workspace.options.collapse){n=n.workspace.getTopBlocks(!1);for(var a=0;a<n.length;a++)for(var c=n[a];c;){if(c.isCollapsed())return"enabled";c=c.getNextBlock()}return"disabled"}return"hidden"},callback:function(n){o.ContextMenuItems.toggleOption_(!1,n.workspace.getTopBlocks(!0))},scopeType:o.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},o.ContextMenuItems.addDeletableBlocks_=function(n,a){if(n.isDeletable())Array.prototype.push.apply(a,n.getDescendants(!1));else{n=n.getChildren(!1);for(var c=0;c<n.length;c++)o.ContextMenuItems.addDeletableBlocks_(n[c],a)}},o.ContextMenuItems.getDeletableBlocks_=function(n){var a=[];n=n.getTopBlocks(!0);for(var c=0;c<n.length;c++)o.ContextMenuItems.addDeletableBlocks_(n[c],a);return a},o.ContextMenuItems.deleteNext_=function(n,a){o.Events.setGroup(a);var c=n.shift();c&&(c.workspace?(c.dispose(!1,!0),setTimeout(o.ContextMenuItems.deleteNext_,10,n,a)):o.ContextMenuItems.deleteNext_(n,a)),o.Events.setGroup(!1)},o.ContextMenuItems.registerDeleteAll=function(){o.ContextMenuRegistry.registry.register({displayText:function(n){if(n.workspace)return 1==(n=o.ContextMenuItems.getDeletableBlocks_(n.workspace).length)?o.Msg.DELETE_BLOCK:o.Msg.DELETE_X_BLOCKS.replace("%1",String(n))},preconditionFn:function(n){if(n.workspace)return 0<o.ContextMenuItems.getDeletableBlocks_(n.workspace).length?"enabled":"disabled"},callback:function(n){if(n.workspace){n.workspace.cancelCurrentGesture();var a=o.ContextMenuItems.getDeletableBlocks_(n.workspace),c=o.utils.genUid();2>a.length?o.ContextMenuItems.deleteNext_(a,c):o.confirm(o.Msg.DELETE_ALL_BLOCKS.replace("%1",a.length),function(d){d&&o.ContextMenuItems.deleteNext_(a,c)})}},scopeType:o.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},o.ContextMenuItems.registerWorkspaceOptions_=function(){o.ContextMenuItems.registerUndo(),o.ContextMenuItems.registerRedo(),o.ContextMenuItems.registerCleanup(),o.ContextMenuItems.registerCollapse(),o.ContextMenuItems.registerExpand(),o.ContextMenuItems.registerDeleteAll()},o.ContextMenuItems.registerDuplicate=function(){o.ContextMenuRegistry.registry.register({displayText:function(){return o.Msg.DUPLICATE_BLOCK},preconditionFn:function(n){return!(n=n.block).isInFlyout&&n.isDeletable()&&n.isMovable()?n.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(n){n.block&&o.duplicate(n.block)},scopeType:o.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},o.ContextMenuItems.registerComment=function(){o.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.getCommentIcon()?o.Msg.REMOVE_COMMENT:o.Msg.ADD_COMMENT},preconditionFn:function(n){return n=n.block,o.utils.userAgent.IE||n.isInFlyout||!n.workspace.options.comments||n.isCollapsed()||!n.isEditable()?"hidden":"enabled"},callback:function(n){(n=n.block).getCommentIcon()?n.setCommentText(null):n.setCommentText("")},scopeType:o.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},o.ContextMenuItems.registerInline=function(){o.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.getInputsInline()?o.Msg.EXTERNAL_INPUTS:o.Msg.INLINE_INPUTS},preconditionFn:function(n){if(!(n=n.block).isInFlyout&&n.isMovable()&&!n.isCollapsed())for(var a=1;a<n.inputList.length;a++)if(n.inputList[a-1].type!=o.inputTypes.STATEMENT&&n.inputList[a].type!=o.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(n){n.block.setInputsInline(!n.block.getInputsInline())},scopeType:o.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},o.ContextMenuItems.registerCollapseExpandBlock=function(){o.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.isCollapsed()?o.Msg.EXPAND_BLOCK:o.Msg.COLLAPSE_BLOCK},preconditionFn:function(n){return!(n=n.block).isInFlyout&&n.isMovable()&&n.workspace.options.collapse?"enabled":"hidden"},callback:function(n){n.block.setCollapsed(!n.block.isCollapsed())},scopeType:o.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},o.ContextMenuItems.registerDisable=function(){o.ContextMenuRegistry.registry.register({displayText:function(n){return n.block.isEnabled()?o.Msg.DISABLE_BLOCK:o.Msg.ENABLE_BLOCK},preconditionFn:function(n){return!(n=n.block).isInFlyout&&n.workspace.options.disable&&n.isEditable()?n.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(n){n=n.block;var a=o.Events.getGroup();a||o.Events.setGroup(!0),n.setEnabled(!n.isEnabled()),a||o.Events.setGroup(!1)},scopeType:o.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},o.ContextMenuItems.registerDelete=function(){o.ContextMenuRegistry.registry.register({displayText:function(n){var a=n.block;return n=a.getDescendants(!1).length,(a=a.getNextBlock())&&(n-=a.getDescendants(!1).length),1==n?o.Msg.DELETE_BLOCK:o.Msg.DELETE_X_BLOCKS.replace("%1",String(n))},preconditionFn:function(n){return!n.block.isInFlyout&&n.block.isDeletable()?"enabled":"hidden"},callback:function(n){o.Events.setGroup(!0),n.block&&o.deleteBlock(n.block),o.Events.setGroup(!1)},scopeType:o.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},o.ContextMenuItems.registerHelp=function(){o.ContextMenuRegistry.registry.register({displayText:function(){return o.Msg.HELP},preconditionFn:function(n){return("function"==typeof(n=n.block).helpUrl?n.helpUrl():n.helpUrl)?"enabled":"hidden"},callback:function(n){n.block.showHelp()},scopeType:o.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},o.ContextMenuItems.registerBlockOptions_=function(){o.ContextMenuItems.registerDuplicate(),o.ContextMenuItems.registerComment(),o.ContextMenuItems.registerInline(),o.ContextMenuItems.registerCollapseExpandBlock(),o.ContextMenuItems.registerDisable(),o.ContextMenuItems.registerDelete(),o.ContextMenuItems.registerHelp()},o.ContextMenuItems.registerDefaultOptions=function(){o.ContextMenuItems.registerWorkspaceOptions_(),o.ContextMenuItems.registerBlockOptions_()},o.ContextMenuItems.registerDefaultOptions(),o.Mutator=function(n){o.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=n},o.utils.object.inherits(o.Mutator,o.Icon),o.Mutator.prototype.workspace_=null,o.Mutator.prototype.workspaceWidth_=0,o.Mutator.prototype.workspaceHeight_=0,o.Mutator.prototype.setBlock=function(n){this.block_=n},o.Mutator.prototype.getWorkspace=function(){return this.workspace_},o.Mutator.prototype.drawIcon_=function(n){o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},n),o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},n),o.utils.dom.createSvgElement(o.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},n)},o.Mutator.prototype.iconClick_=function(n){this.block_.isEditable()&&o.Icon.prototype.iconClick_.call(this,n)},o.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=o.utils.dom.createSvgElement(o.utils.Svg.SVG,{x:o.Bubble.BORDER_WIDTH,y:o.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var c,n=o.utils.xml.createElement("xml"),a=0;c=this.quarkNames_[a];a++){var d=o.utils.xml.createElement("block");d.setAttribute("type",c),n.appendChild(d)}else n=null;return(a=new o.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?o.utils.toolbox.Position.RIGHT:o.utils.toolbox.Position.LEFT,(c=!!n)&&(a.languageTree=o.utils.toolbox.convertToolboxDefToJson(n)),this.workspace_=new o.WorkspaceSvg(a),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(o.Events.disableOrphans),n=c?this.workspace_.addFlyout(o.utils.Svg.G):null,a=this.workspace_.createDom("blocklyMutatorBackground"),n&&a.insertBefore(n,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(a),this.svgDialog_},o.Mutator.prototype.updateEditable=function(){o.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&o.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&o.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},o.Mutator.prototype.resizeBubble_=function(){var n=2*o.Bubble.BORDER_WIDTH,a=this.workspace_.getCanvas().getBBox(),c=a.width+a.x,d=a.height+3*n,_=this.workspace_.getFlyout();if(_){var y=_.getWorkspace().getMetricsManager().getScrollMetrics();d=Math.max(d,y.height+20),c+=_.getWidth()}this.block_.RTL&&(c=-a.x),c+=3*n,(Math.abs(this.workspaceWidth_-c)>n||Math.abs(this.workspaceHeight_-d)>n)&&(this.workspaceWidth_=c,this.workspaceHeight_=d,this.bubble_.setBubbleSize(c+n,d+n),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(n="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",n)),this.workspace_.resize()},o.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},o.Mutator.prototype.setVisible=function(n){if(n!=this.isVisible())if(o.Events.fire(new(o.Events.get(o.Events.BUBBLE_OPEN))(this.block_,n,"mutator")),n){this.bubble_=new o.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var a=this.workspace_.options.languageTree;n=this.workspace_.getFlyout(),a&&(n.init(this.workspace_),n.show(a)),this.rootBlock_=this.block_.decompose(this.workspace_),a=this.rootBlock_.getDescendants(!1);for(var d,c=0;d=a[c];c++)d.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),n?(a=2*n.CORNER_RADIUS,n=this.rootBlock_.RTL?n.getWidth()+a:a):n=a=16,this.block_.RTL&&(n=-n),this.rootBlock_.moveBy(n,a),this.block_.saveConnections){var _=this,y=this.block_;y.saveConnections(this.rootBlock_),this.sourceListener_=function(){y.saveConnections(_.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},o.Mutator.prototype.workspaceChanged_=function(n){if(!(n.isUiEvent||n.type==o.Events.CHANGE&&"disabled"==n.element)){if(!this.workspace_.isDragging()){n=this.workspace_.getTopBlocks(!1);for(var c,a=0;c=n[a];a++){var d=c.getRelativeToSurfaceXY();if(20>d.y&&c.moveBy(0,20-d.y),c.RTL){var _=-20,y=this.workspace_.getFlyout();y&&(_-=y.getWidth()),d.x>_&&c.moveBy(_-d.x,0)}else 20>d.x&&c.moveBy(20-d.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(o.Events.setGroup(!0),n=(n=(c=this.block_).mutationToDom())&&o.Xml.domToText(n),a=c.rendered,c.rendered=!1,c.compose(this.rootBlock_),c.rendered=a,c.initSvg(),c.rendered&&c.render(),n!=(a=(a=c.mutationToDom())&&o.Xml.domToText(a))){o.Events.fire(new(o.Events.get(o.Events.BLOCK_CHANGE))(c,"mutation",null,n,a));var R=o.Events.getGroup();setTimeout(function(){o.Events.setGroup(R),c.bumpNeighbours(),o.Events.setGroup(!1)},o.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),o.Events.setGroup(!1)}}},o.Mutator.prototype.dispose=function(){this.block_.mutator=null,o.Icon.prototype.dispose.call(this)},o.Mutator.prototype.updateBlockStyle=function(){var n=this.workspace_;if(n&&n.getAllBlocks(!1)){for(var d,a=n.getAllBlocks(!1),c=0;d=a[c];c++)d.setStyle(d.getStyleName());if(c=n.getFlyout())for(n=c.workspace_.getAllBlocks(!1),c=0;d=n[c];c++)d.setStyle(d.getStyleName())}},o.Mutator.reconnect=function(n,a,c){if(!n||!n.getSourceBlock().workspace)return!1;c=a.getInput(c).connection;var d=n.targetBlock();return!(d&&d!=a||c.targetConnection==n||(c.isConnected()&&c.disconnect(),c.connect(n),0))},o.Mutator.findParentWs=function(n){var a=null;if(n&&n.options){var c=n.options.parentWorkspace;n.isFlyout?c&&c.options&&(a=c.options.parentWorkspace):c&&(a=c)}return a},o.FieldTextInput=function(n,a,c){this.spellcheck_=!0,o.FieldTextInput.superClass_.constructor.call(this,n,a,c),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},o.utils.object.inherits(o.FieldTextInput,o.Field),o.FieldTextInput.prototype.DEFAULT_VALUE="",o.FieldTextInput.fromJson=function(n){var a=o.utils.replaceMessageReferences(n.text);return new o.FieldTextInput(a,void 0,n)},o.FieldTextInput.prototype.SERIALIZABLE=!0,o.FieldTextInput.BORDERRADIUS=4,o.FieldTextInput.prototype.CURSOR="text",o.FieldTextInput.prototype.configure_=function(n){o.FieldTextInput.superClass_.configure_.call(this,n),"boolean"==typeof n.spellcheck&&(this.spellcheck_=n.spellcheck)},o.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var d,n=0,a=0,c=0;d=this.sourceBlock_.inputList[c];c++){for(var _=0;d.fieldRow[_];_++)n++;d.connection&&a++}this.fullBlockClickTarget_=1>=n&&this.sourceBlock_.outputConnection&&!a}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},o.FieldTextInput.prototype.doClassValidation_=function(n){return null==n?null:String(n)},o.FieldTextInput.prototype.doValueInvalid_=function(n){this.isBeingEdited_&&(this.isTextValid_=!1,n=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&o.Events.isEnabled()&&o.Events.fire(new(o.Events.get(o.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,n,this.value_)))},o.FieldTextInput.prototype.doValueUpdate_=function(n){this.isTextValid_=!0,this.value_=n,this.isBeingEdited_||(this.isDirty_=!0)},o.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},o.FieldTextInput.prototype.render_=function(){if(o.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var n=this.htmlInput_;this.isTextValid_?(o.utils.dom.removeClass(n,"blocklyInvalidInput"),o.utils.aria.setState(n,o.utils.aria.State.INVALID,!1)):(o.utils.dom.addClass(n,"blocklyInvalidInput"),o.utils.aria.setState(n,o.utils.aria.State.INVALID,!0))}},o.FieldTextInput.prototype.setSpellcheck=function(n){n!=this.spellcheck_&&(this.spellcheck_=n,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},o.FieldTextInput.prototype.showEditor_=function(n,a){this.workspace_=this.sourceBlock_.workspace,!(n=a||!1)&&(o.utils.userAgent.MOBILE||o.utils.userAgent.ANDROID||o.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(n)},o.FieldTextInput.prototype.showPromptEditor_=function(){o.prompt(o.Msg.CHANGE_VALUE_TITLE,this.getText(),function(n){this.setValue(this.getValueFromEditorText_(n))}.bind(this))},o.FieldTextInput.prototype.showInlineEditor_=function(n){o.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,n||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},o.FieldTextInput.prototype.widgetCreate_=function(){var n=o.WidgetDiv.DIV;o.utils.dom.addClass(this.getClickTarget_(),"editing");var a=document.createElement("input");a.className="blocklyHtmlInput",a.setAttribute("spellcheck",this.spellcheck_);var c=this.workspace_.getScale(),d=this.getConstants().FIELD_TEXT_FONTSIZE*c+"pt";if(n.style.fontSize=d,a.style.fontSize=d,d=o.FieldTextInput.BORDERRADIUS*c+"px",this.fullBlockClickTarget_){d=((d=this.getScaledBBox()).bottom-d.top)/2+"px";var _=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;a.style.border=1*c+"px solid "+_,n.style.borderRadius=d,n.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(n.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*c+"px")}return a.style.borderRadius=d,n.appendChild(a),a.value=a.defaultValue=this.getEditorText_(this.value_),a.untypedDefaultValue_=this.value_,a.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(a),a},o.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var n=o.WidgetDiv.DIV.style;n.width="auto",n.height="auto",n.fontSize="",n.transition="",n.boxShadow="",this.htmlInput_=null,o.utils.dom.removeClass(this.getClickTarget_(),"editing")},o.FieldTextInput.prototype.bindInputEvents_=function(n){this.onKeyDownWrapper_=o.browserEvents.conditionalBind(n,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=o.browserEvents.conditionalBind(n,"input",this,this.onHtmlInputChange_)},o.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(o.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(o.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},o.FieldTextInput.prototype.onHtmlInputKeyDown_=function(n){n.keyCode==o.utils.KeyCodes.ENTER?(o.WidgetDiv.hide(),o.DropDownDiv.hideWithoutAnimation()):n.keyCode==o.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),o.WidgetDiv.hide(),o.DropDownDiv.hideWithoutAnimation()):n.keyCode==o.utils.KeyCodes.TAB&&(o.WidgetDiv.hide(),o.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!n.shiftKey),n.preventDefault())},o.FieldTextInput.prototype.onHtmlInputChange_=function(n){(n=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=n,o.Events.setGroup(!0),n=this.getValueFromEditorText_(n),this.setValue(n),this.forceRerender(),this.resizeEditor_(),o.Events.setGroup(!1))},o.FieldTextInput.prototype.setEditorValue_=function(n){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(n)),this.setValue(n)},o.FieldTextInput.prototype.resizeEditor_=function(){var n=o.WidgetDiv.DIV,a=this.getScaledBBox();n.style.width=a.right-a.left+"px",n.style.height=a.bottom-a.top+"px",a=new o.utils.Coordinate(this.sourceBlock_.RTL?a.right-n.offsetWidth:a.left,a.top),n.style.left=a.x+"px",n.style.top=a.y+"px"},o.FieldTextInput.prototype.isTabNavigable=function(){return!0},o.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},o.FieldTextInput.prototype.getEditorText_=function(n){return String(n)},o.FieldTextInput.prototype.getValueFromEditorText_=function(n){return n},o.fieldRegistry.register("field_input",o.FieldTextInput),o.FieldAngle=function(n,a,c){this.clockwise_=o.FieldAngle.CLOCKWISE,this.offset_=o.FieldAngle.OFFSET,this.wrap_=o.FieldAngle.WRAP,this.round_=o.FieldAngle.ROUND,o.FieldAngle.superClass_.constructor.call(this,n,a,c),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},o.utils.object.inherits(o.FieldAngle,o.FieldTextInput),o.FieldAngle.prototype.DEFAULT_VALUE=0,o.FieldAngle.fromJson=function(n){return new o.FieldAngle(n.angle,void 0,n)},o.FieldAngle.prototype.SERIALIZABLE=!0,o.FieldAngle.ROUND=15,o.FieldAngle.HALF=50,o.FieldAngle.CLOCKWISE=!1,o.FieldAngle.OFFSET=0,o.FieldAngle.WRAP=360,o.FieldAngle.RADIUS=o.FieldAngle.HALF-1,o.FieldAngle.prototype.configure_=function(n){switch(o.FieldAngle.superClass_.configure_.call(this,n),n.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var a=n.clockwise;"boolean"==typeof a&&(this.clockwise_=a),null!=(a=n.offset)&&(a=Number(a),isNaN(a)||(this.offset_=a)),null!=(a=n.wrap)&&(a=Number(a),isNaN(a)||(this.wrap_=a)),null!=(n=n.round)&&(n=Number(n),isNaN(n)||(this.round_=n))},o.FieldAngle.prototype.initView=function(){o.FieldAngle.superClass_.initView.call(this),this.symbol_=o.utils.dom.createSvgElement(o.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},o.FieldAngle.prototype.render_=function(){o.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},o.FieldAngle.prototype.showEditor_=function(n){o.FieldAngle.superClass_.showEditor_.call(this,n,o.utils.userAgent.MOBILE||o.utils.userAgent.ANDROID||o.utils.userAgent.IPAD),this.dropdownCreate_(),o.DropDownDiv.getContentDiv().appendChild(this.editor_),o.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),o.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},o.FieldAngle.prototype.dropdownCreate_=function(){var n=o.utils.dom.createSvgElement(o.utils.Svg.SVG,{xmlns:o.utils.dom.SVG_NS,"xmlns:html":o.utils.dom.HTML_NS,"xmlns:xlink":o.utils.dom.XLINK_NS,version:"1.1",height:2*o.FieldAngle.HALF+"px",width:2*o.FieldAngle.HALF+"px",style:"touch-action: none"},null),a=o.utils.dom.createSvgElement(o.utils.Svg.CIRCLE,{cx:o.FieldAngle.HALF,cy:o.FieldAngle.HALF,r:o.FieldAngle.RADIUS,class:"blocklyAngleCircle"},n);this.gauge_=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyAngleGauge"},n),this.line_=o.utils.dom.createSvgElement(o.utils.Svg.LINE,{x1:o.FieldAngle.HALF,y1:o.FieldAngle.HALF,class:"blocklyAngleLine"},n);for(var c=0;360>c;c+=15)o.utils.dom.createSvgElement(o.utils.Svg.LINE,{x1:o.FieldAngle.HALF+o.FieldAngle.RADIUS,y1:o.FieldAngle.HALF,x2:o.FieldAngle.HALF+o.FieldAngle.RADIUS-(c%45==0?10:5),y2:o.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+c+","+o.FieldAngle.HALF+","+o.FieldAngle.HALF+")"},n);this.clickWrapper_=o.browserEvents.conditionalBind(n,"click",this,this.hide_),this.clickSurfaceWrapper_=o.browserEvents.conditionalBind(a,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=o.browserEvents.conditionalBind(a,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=n},o.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(o.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(o.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(o.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},o.FieldAngle.prototype.hide_=function(){o.DropDownDiv.hideIfOwner(this),o.WidgetDiv.hide()},o.FieldAngle.prototype.onMouseMove_=function(n){var a=this.gauge_.ownerSVGElement.getBoundingClientRect(),c=n.clientX-a.left-o.FieldAngle.HALF;n=n.clientY-a.top-o.FieldAngle.HALF,a=Math.atan(-n/c),isNaN(a)||(a=o.utils.math.toDegrees(a),0>c?a+=180:0<n&&(a+=360),this.displayMouseOrKeyboardValue_(a=this.clockwise_?this.offset_+360-a:360-(this.offset_-a)))},o.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(n){this.round_&&(n=Math.round(n/this.round_)*this.round_),(n=this.wrapValue_(n))!=this.value_&&this.setEditorValue_(n)},o.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var n=Number(this.getText())+this.offset_,a=o.utils.math.toRadians(n%360);n=["M ",o.FieldAngle.HALF,",",o.FieldAngle.HALF];var c=o.FieldAngle.HALF,d=o.FieldAngle.HALF;if(!isNaN(a)){var _=Number(this.clockwise_),y=o.utils.math.toRadians(this.offset_),R=Math.cos(y)*o.FieldAngle.RADIUS,x=Math.sin(y)*-o.FieldAngle.RADIUS;_&&(a=2*y-a),c+=Math.cos(a)*o.FieldAngle.RADIUS,d-=Math.sin(a)*o.FieldAngle.RADIUS,a=Math.abs(Math.floor((a-y)/Math.PI)%2),_&&(a=1-a),n.push(" l ",R,",",x," A ",o.FieldAngle.RADIUS,",",o.FieldAngle.RADIUS," 0 ",a," ",_," ",c,",",d," z")}this.gauge_.setAttribute("d",n.join("")),this.line_.setAttribute("x2",c),this.line_.setAttribute("y2",d)}},o.FieldAngle.prototype.onHtmlInputKeyDown_=function(n){var a;if(o.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,n),n.keyCode===o.utils.KeyCodes.LEFT?a=this.sourceBlock_.RTL?1:-1:n.keyCode===o.utils.KeyCodes.RIGHT?a=this.sourceBlock_.RTL?-1:1:n.keyCode===o.utils.KeyCodes.DOWN?a=-1:n.keyCode===o.utils.KeyCodes.UP&&(a=1),a){var c=this.getValue();this.displayMouseOrKeyboardValue_(c+a*this.round_),n.preventDefault(),n.stopPropagation()}},o.FieldAngle.prototype.doClassValidation_=function(n){return n=Number(n),isNaN(n)||!isFinite(n)?null:this.wrapValue_(n)},o.FieldAngle.prototype.wrapValue_=function(n){return 0>(n%=360)&&(n+=360),n>this.wrap_&&(n-=360),n},o.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),o.fieldRegistry.register("field_angle",o.FieldAngle),o.FieldCheckbox=function(n,a,c){this.checkChar_=null,o.FieldCheckbox.superClass_.constructor.call(this,n,a,c)},o.utils.object.inherits(o.FieldCheckbox,o.Field),o.FieldCheckbox.prototype.DEFAULT_VALUE=!1,o.FieldCheckbox.fromJson=function(n){return new o.FieldCheckbox(n.checked,void 0,n)},o.FieldCheckbox.CHECK_CHAR="\u2713",o.FieldCheckbox.prototype.SERIALIZABLE=!0,o.FieldCheckbox.prototype.CURSOR="default",o.FieldCheckbox.prototype.configure_=function(n){o.FieldCheckbox.superClass_.configure_.call(this,n),n.checkCharacter&&(this.checkChar_=n.checkCharacter)},o.FieldCheckbox.prototype.initView=function(){o.FieldCheckbox.superClass_.initView.call(this),o.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},o.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},o.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||o.FieldCheckbox.CHECK_CHAR},o.FieldCheckbox.prototype.setCheckCharacter=function(n){this.checkChar_=n,this.forceRerender()},o.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},o.FieldCheckbox.prototype.doClassValidation_=function(n){return!0===n||"TRUE"===n?"TRUE":!1===n||"FALSE"===n?"FALSE":null},o.FieldCheckbox.prototype.doValueUpdate_=function(n){this.value_=this.convertValueToBool_(n),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},o.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},o.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},o.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},o.FieldCheckbox.prototype.convertValueToBool_=function(n){return"string"==typeof n?"TRUE"==n:!!n},o.fieldRegistry.register("field_checkbox",o.FieldCheckbox),o.FieldColour=function(n,a,c){o.FieldColour.superClass_.constructor.call(this,n,a,c),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},o.utils.object.inherits(o.FieldColour,o.Field),o.FieldColour.fromJson=function(n){return new o.FieldColour(n.colour,void 0,n)},o.FieldColour.prototype.SERIALIZABLE=!0,o.FieldColour.prototype.CURSOR="default",o.FieldColour.prototype.isDirty_=!1,o.FieldColour.prototype.colours_=null,o.FieldColour.prototype.titles_=null,o.FieldColour.prototype.columns_=0,o.FieldColour.prototype.configure_=function(n){o.FieldColour.superClass_.configure_.call(this,n),n.colourOptions&&(this.colours_=n.colourOptions,this.titles_=n.colourTitles),n.columns&&(this.columns_=n.columns)},o.FieldColour.prototype.initView=function(){this.size_=new o.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},o.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},o.FieldColour.prototype.doClassValidation_=function(n){return"string"!=typeof n?null:o.utils.colour.parse(n)},o.FieldColour.prototype.doValueUpdate_=function(n){this.value_=n,this.borderRect_?this.borderRect_.style.fill=n:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",n),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},o.FieldColour.prototype.getText=function(){var n=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(n)&&(n="#"+n[1]+n[3]+n[5]),n},o.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),o.FieldColour.prototype.DEFAULT_VALUE=o.FieldColour.COLOURS[0],o.FieldColour.TITLES=[],o.FieldColour.COLUMNS=7,o.FieldColour.prototype.setColours=function(n,a){return this.colours_=n,a&&(this.titles_=a),this},o.FieldColour.prototype.setColumns=function(n){return this.columns_=n,this},o.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),o.DropDownDiv.getContentDiv().appendChild(this.picker_),o.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},o.FieldColour.prototype.onClick_=function(n){null!==(n=(n=n.target)&&n.label)&&(this.setValue(n),o.DropDownDiv.hideIfOwner(this))},o.FieldColour.prototype.onKeyDown_=function(n){var a=!1;n.keyCode===o.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),a=!0):n.keyCode===o.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),a=!0):n.keyCode===o.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),a=!0):n.keyCode===o.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),a=!0):n.keyCode===o.utils.KeyCodes.ENTER&&((a=this.getHighlighted_())&&null!==(a=a&&a.label)&&this.setValue(a),o.DropDownDiv.hideWithoutAnimation(),a=!0),a&&n.stopPropagation()},o.FieldColour.prototype.moveHighlightBy_=function(n,a){var c=this.colours_||o.FieldColour.COLOURS,d=this.columns_||o.FieldColour.COLUMNS,_=this.highlightedIndex_%d,y=Math.floor(this.highlightedIndex_/d);_+=n,y+=a,0>n?0>_&&0<y?(_=d-1,y--):0>_&&(_=0):0<n?_>d-1&&y<Math.floor(c.length/d)-1?(_=0,y++):_>d-1&&_--:0>a?0>y&&(y=0):0<a&&y>Math.floor(c.length/d)-1&&(y=Math.floor(c.length/d)-1),this.setHighlightedCell_(this.picker_.childNodes[y].childNodes[_],y*d+_)},o.FieldColour.prototype.onMouseMove_=function(n){var a=(n=n.target)&&Number(n.getAttribute("data-index"));null!==a&&a!==this.highlightedIndex_&&this.setHighlightedCell_(n,a)},o.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},o.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var n=this.getHighlighted_();n&&o.utils.dom.removeClass(n,"blocklyColourHighlighted")},o.FieldColour.prototype.getHighlighted_=function(){var n=this.columns_||o.FieldColour.COLUMNS,a=this.picker_.childNodes[Math.floor(this.highlightedIndex_/n)];return a?a.childNodes[this.highlightedIndex_%n]:null},o.FieldColour.prototype.setHighlightedCell_=function(n,a){var c=this.getHighlighted_();c&&o.utils.dom.removeClass(c,"blocklyColourHighlighted"),o.utils.dom.addClass(n,"blocklyColourHighlighted"),this.highlightedIndex_=a,o.utils.aria.setState(this.picker_,o.utils.aria.State.ACTIVEDESCENDANT,n.getAttribute("id"))},o.FieldColour.prototype.dropdownCreate_=function(){var n=this.columns_||o.FieldColour.COLUMNS,a=this.colours_||o.FieldColour.COLOURS,c=this.titles_||o.FieldColour.TITLES,d=this.getValue(),_=document.createElement("table");_.className="blocklyColourTable",_.tabIndex=0,_.dir="ltr",o.utils.aria.setRole(_,o.utils.aria.Role.GRID),o.utils.aria.setState(_,o.utils.aria.State.EXPANDED,!0),o.utils.aria.setState(_,o.utils.aria.State.ROWCOUNT,Math.floor(a.length/n)),o.utils.aria.setState(_,o.utils.aria.State.COLCOUNT,n);for(var y,R=0;R<a.length;R++){R%n==0&&(y=document.createElement("tr"),o.utils.aria.setRole(y,o.utils.aria.Role.ROW),_.appendChild(y));var x=document.createElement("td");y.appendChild(x),x.label=a[R],x.title=c[R]||a[R],x.id=o.utils.IdGenerator.getNextUniqueId(),x.setAttribute("data-index",R),o.utils.aria.setRole(x,o.utils.aria.Role.GRIDCELL),o.utils.aria.setState(x,o.utils.aria.State.LABEL,a[R]),o.utils.aria.setState(x,o.utils.aria.State.SELECTED,a[R]==d),x.style.backgroundColor=a[R],a[R]==d&&(x.className="blocklyColourSelected",this.highlightedIndex_=R)}this.onClickWrapper_=o.browserEvents.conditionalBind(_,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=o.browserEvents.conditionalBind(_,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=o.browserEvents.conditionalBind(_,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=o.browserEvents.conditionalBind(_,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=o.browserEvents.conditionalBind(_,"keydown",this,this.onKeyDown_),this.picker_=_},o.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(o.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(o.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(o.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(o.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(o.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},o.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),o.fieldRegistry.register("field_colour",o.FieldColour),o.FieldDropdown=function(n,a,c){"function"!=typeof n&&o.FieldDropdown.validateOptions_(n),this.menuGenerator_=n,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],o.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],a,c),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},o.utils.object.inherits(o.FieldDropdown,o.Field),o.FieldDropdown.fromJson=function(n){return new o.FieldDropdown(n.options,void 0,n)},o.FieldDropdown.prototype.fromXml=function(n){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(n.textContent)},o.FieldDropdown.prototype.SERIALIZABLE=!0,o.FieldDropdown.CHECKMARK_OVERHANG=25,o.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,o.FieldDropdown.IMAGE_Y_OFFSET=5,o.FieldDropdown.IMAGE_Y_PADDING=2*o.FieldDropdown.IMAGE_Y_OFFSET,o.FieldDropdown.ARROW_CHAR=o.utils.userAgent.ANDROID?"\u25bc":"\u25be",o.FieldDropdown.prototype.CURSOR="default",o.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=o.utils.dom.createSvgElement(o.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&o.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},o.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},o.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=o.utils.dom.createSvgElement(o.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?o.FieldDropdown.ARROW_CHAR+" ":" "+o.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},o.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=o.utils.dom.createSvgElement(o.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(o.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},o.FieldDropdown.prototype.showEditor_=function(n){if(this.dropdownCreate_(),this.menu_.openingCoords=n&&"number"==typeof n.clientX?new o.utils.Coordinate(n.clientX,n.clientY):null,this.menu_.render(o.DropDownDiv.getContentDiv()),n=this.menu_.getElement(),o.utils.dom.addClass(n,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){n=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var a=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;o.DropDownDiv.setColour(n,a)}o.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},o.FieldDropdown.prototype.dropdownCreate_=function(){var n=new o.Menu;n.setRole(o.utils.aria.Role.LISTBOX),this.menu_=n;var a=this.getOptions(!1);this.selectedMenuItem_=null;for(var c=0;c<a.length;c++){var d=a[c][0],_=a[c][1];if("object"==typeof d){var y=new Image(d.width,d.height);y.src=d.src,y.alt=d.alt||"",d=y}(d=new o.MenuItem(d,_)).setRole(o.utils.aria.Role.OPTION),d.setRightToLeft(this.sourceBlock_.RTL),d.setCheckable(!0),n.addChild(d),d.setChecked(_==this.value_),_==this.value_&&(this.selectedMenuItem_=d),d.onAction(this.handleMenuActionEvent_,this)}},o.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},o.FieldDropdown.prototype.handleMenuActionEvent_=function(n){o.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,n)},o.FieldDropdown.prototype.onItemSelected_=function(n,a){this.setValue(a.getValue())},o.FieldDropdown.prototype.trimOptions_=function(){var n=this.menuGenerator_;if(Array.isArray(n)){for(var a=!1,c=0;c<n.length;c++){var d=n[c][0];"string"==typeof d?n[c][0]=o.utils.replaceMessageReferences(d):(null!=d.alt&&(n[c][0].alt=o.utils.replaceMessageReferences(d.alt)),a=!0)}if(!(a||2>n.length)){for(a=[],c=0;c<n.length;c++)a.push(n[c][0]);c=o.utils.string.shortestStringLength(a),d=o.utils.string.commonWordPrefix(a,c);var _=o.utils.string.commonWordSuffix(a,c);!d&&!_||c<=d+_||(d&&(this.prefixField=a[0].substring(0,d-1)),_&&(this.suffixField=a[0].substr(1-_)),this.menuGenerator_=o.FieldDropdown.applyTrim_(n,d,_))}}},o.FieldDropdown.applyTrim_=function(n,a,c){for(var d=[],_=0;_<n.length;_++){var y=n[_][0],R=n[_][1];y=y.substring(a,y.length-c),d[_]=[y,R]}return d},o.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},o.FieldDropdown.prototype.getOptions=function(n){return this.isOptionListDynamic()?(this.generatedOptions_&&n||(this.generatedOptions_=this.menuGenerator_.call(this),o.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},o.FieldDropdown.prototype.doClassValidation_=function(n){for(var _,a=!1,c=this.getOptions(!0),d=0;_=c[d];d++)if(_[1]==n){a=!0;break}return a?n:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+n),null)},o.FieldDropdown.prototype.doValueUpdate_=function(n){o.FieldDropdown.superClass_.doValueUpdate_.call(this,n),n=this.getOptions(!0);for(var c,a=0;c=n[a];a++)c[1]==this.value_&&(this.selectedOption_=c)},o.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},o.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var n=this.selectedOption_&&this.selectedOption_[0];n&&"object"==typeof n?this.renderSelectedImage_(n):this.renderSelectedText_(),this.positionBorderRect_()},o.FieldDropdown.prototype.renderSelectedImage_=function(n){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(o.utils.dom.XLINK_NS,"xlink:href",n.src),this.imageElement_.setAttribute("height",n.height),this.imageElement_.setAttribute("width",n.width);var a=Number(n.height);n=Number(n.width);var c=!!this.borderRect_,d=Math.max(c?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,a+o.FieldDropdown.IMAGE_Y_PADDING);c=c?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var _=this.svgArrow_?this.positionSVGArrow_(n+c,d/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):o.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=n+_+2*c,this.size_.height=d;var y=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",c+_):(y=n+_,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",c)),this.imageElement_.setAttribute("y",d/2-a/2),this.positionTextElement_(y+c,n+_)},o.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),o.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var n=!!this.borderRect_,a=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),c=o.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var d=0;this.svgArrow_&&(d=this.positionSVGArrow_(c+n,a/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=c+d+2*n,this.size_.height=a,this.positionTextElement_(n,c)},o.FieldDropdown.prototype.positionSVGArrow_=function(n,a){if(!this.svgArrow_)return 0;var c=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,d=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,_=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?c:n+d)+","+a+")"),_+d},o.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var n=this.selectedOption_[0];return"object"==typeof n?n.alt:n},o.FieldDropdown.validateOptions_=function(n){if(!Array.isArray(n))throw TypeError("FieldDropdown options must be an array.");if(!n.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var a=!1,c=0;c<n.length;++c){var d=n[c];Array.isArray(d)?"string"!=typeof d[1]?(a=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option id must be a string. Found "+d[1]+" in: ",d)):d[0]&&"string"!=typeof d[0]&&"string"!=typeof d[0].src&&(a=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must have a string label or image description. Found"+d[0]+" in: ",d)):(a=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must be an array. Found: ",d))}if(a)throw TypeError("Found invalid FieldDropdown options.")},o.fieldRegistry.register("field_dropdown",o.FieldDropdown),o.FieldLabelSerializable=function(n,a,c){o.FieldLabelSerializable.superClass_.constructor.call(this,n,a,c)},o.utils.object.inherits(o.FieldLabelSerializable,o.FieldLabel),o.FieldLabelSerializable.fromJson=function(n){var a=o.utils.replaceMessageReferences(n.text);return new o.FieldLabelSerializable(a,void 0,n)},o.FieldLabelSerializable.prototype.EDITABLE=!1,o.FieldLabelSerializable.prototype.SERIALIZABLE=!0,o.fieldRegistry.register("field_label_serializable",o.FieldLabelSerializable),o.FieldImage=function(n,a,c,d,_,y,R){if(!n)throw Error("Src value of an image field is required");if(n=o.utils.replaceMessageReferences(n),c=Number(o.utils.replaceMessageReferences(c)),a=Number(o.utils.replaceMessageReferences(a)),isNaN(c)||isNaN(a))throw Error("Height and width values of an image field must cast to numbers.");if(0>=c||0>=a)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",o.FieldImage.superClass_.constructor.call(this,n,null,R),R||(this.flipRtl_=!!y,this.altText_=o.utils.replaceMessageReferences(d)||""),this.size_=new o.utils.Size(a,c+o.FieldImage.Y_PADDING),this.imageHeight_=c,this.clickHandler_=null,"function"==typeof _&&(this.clickHandler_=_),this.imageElement_=null},o.utils.object.inherits(o.FieldImage,o.Field),o.FieldImage.prototype.DEFAULT_VALUE="",o.FieldImage.fromJson=function(n){return new o.FieldImage(n.src,n.width,n.height,void 0,void 0,void 0,n)},o.FieldImage.Y_PADDING=1,o.FieldImage.prototype.EDITABLE=!1,o.FieldImage.prototype.isDirty_=!1,o.FieldImage.prototype.configure_=function(n){o.FieldImage.superClass_.configure_.call(this,n),this.flipRtl_=!!n.flipRtl,this.altText_=o.utils.replaceMessageReferences(n.alt)||""},o.FieldImage.prototype.initView=function(){this.imageElement_=o.utils.dom.createSvgElement(o.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(o.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},o.FieldImage.prototype.updateSize_=function(){},o.FieldImage.prototype.doClassValidation_=function(n){return"string"!=typeof n?null:n},o.FieldImage.prototype.doValueUpdate_=function(n){this.value_=n,this.imageElement_&&this.imageElement_.setAttributeNS(o.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},o.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},o.FieldImage.prototype.setAlt=function(n){n!=this.altText_&&(this.altText_=n||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},o.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},o.FieldImage.prototype.setOnClickHandler=function(n){this.clickHandler_=n},o.FieldImage.prototype.getText_=function(){return this.altText_},o.fieldRegistry.register("field_image",o.FieldImage),o.FieldMultilineInput=function(n,a,c){o.FieldMultilineInput.superClass_.constructor.call(this,n,a,c),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},o.utils.object.inherits(o.FieldMultilineInput,o.FieldTextInput),o.FieldMultilineInput.prototype.configure_=function(n){o.FieldMultilineInput.superClass_.configure_.call(this,n),n.maxLines&&this.setMaxLines(n.maxLines)},o.FieldMultilineInput.fromJson=function(n){var a=o.utils.replaceMessageReferences(n.text);return new o.FieldMultilineInput(a,void 0,n)},o.FieldMultilineInput.prototype.toXml=function(n){return n.textContent=this.getValue().replace(/\n/g,"&#10;"),n},o.FieldMultilineInput.prototype.fromXml=function(n){this.setValue(n.textContent.replace(/&#10;/g,"\n"))},o.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},o.FieldMultilineInput.prototype.getDisplayText_=function(){var n=this.getText();if(!n)return o.Field.NBSP;var a=n.split("\n");n="";for(var c=this.isOverflowedY_?this.maxLines_:a.length,d=0;d<c;d++){var _=a[d];_.length>this.maxDisplayLength?_=_.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&d===c-1&&(_=_.substring(0,_.length-3)+"..."),n+=_=_.replace(/\s/g,o.Field.NBSP),d!==c-1&&(n+="\n")}return this.sourceBlock_.RTL&&(n+="\u200f"),n},o.FieldMultilineInput.prototype.doValueUpdate_=function(n){o.FieldMultilineInput.superClass_.doValueUpdate_.call(this,n),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},o.FieldMultilineInput.prototype.render_=function(){for(var n;n=this.textGroup_.firstChild;)this.textGroup_.removeChild(n);n=this.getDisplayText_().split("\n");for(var a=0,c=0;c<n.length;c++){var d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;o.utils.dom.createSvgElement(o.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:a+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(n[c])),a+=d}this.isBeingEdited_&&(n=this.htmlInput_,this.isOverflowedY_?o.utils.dom.addClass(n,"blocklyHtmlTextAreaInputOverflowedY"):o.utils.dom.removeClass(n,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),n=this.htmlInput_,this.isTextValid_?(o.utils.dom.removeClass(n,"blocklyInvalidInput"),o.utils.aria.setState(n,o.utils.aria.State.INVALID,!1)):(o.utils.dom.addClass(n,"blocklyInvalidInput"),o.utils.aria.setState(n,o.utils.aria.State.INVALID,!0)))},o.FieldMultilineInput.prototype.updateSize_=function(){for(var n=this.textGroup_.childNodes,a=0,c=0,d=0;d<n.length;d++){var _=o.utils.dom.getTextWidth(n[d]);_>a&&(a=_),c+=this.getConstants().FIELD_TEXT_HEIGHT+(0<d?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){n=this.value_.split("\n"),_=o.utils.dom.createSvgElement(o.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var y=this.getConstants().FIELD_TEXT_FONTSIZE,R=this.getConstants().FIELD_TEXT_FONTWEIGHT,x=this.getConstants().FIELD_TEXT_FONTFAMILY;for(d=0;d<n.length;d++){n[d].length>this.maxDisplayLength&&(n[d]=n[d].substring(0,this.maxDisplayLength)),_.textContent=n[d];var B=o.utils.dom.getFastTextWidth(_,y,R,x);B>a&&(a=B)}a+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(c+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,a+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",a),this.borderRect_.setAttribute("height",c)),this.size_.width=a,this.size_.height=c,this.positionBorderRect_()},o.FieldMultilineInput.prototype.showEditor_=function(n,a){o.FieldMultilineInput.superClass_.showEditor_.call(this,n,a),this.forceRerender()},o.FieldMultilineInput.prototype.widgetCreate_=function(){var n=o.WidgetDiv.DIV,a=this.workspace_.getScale(),c=document.createElement("textarea");c.className="blocklyHtmlInput blocklyHtmlTextAreaInput",c.setAttribute("spellcheck",this.spellcheck_);var d=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";n.style.fontSize=d,c.style.fontSize=d,c.style.borderRadius=o.FieldTextInput.BORDERRADIUS*a+"px",d=this.getConstants().FIELD_BORDER_RECT_X_PADDING*a;var _=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*a/2;return c.style.padding=_+"px "+d+"px "+_+"px "+d+"px",d=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,c.style.lineHeight=d*a+"px",n.appendChild(c),c.value=c.defaultValue=this.getEditorText_(this.value_),c.untypedDefaultValue_=this.value_,c.oldValue_=null,o.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(c),c},o.FieldMultilineInput.prototype.setMaxLines=function(n){"number"==typeof n&&0<n&&n!==this.maxLines_&&(this.maxLines_=n,this.forceRerender())},o.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},o.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(n){n.keyCode!==o.utils.KeyCodes.ENTER&&o.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,n)},o.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),o.fieldRegistry.register("field_multilinetext",o.FieldMultilineInput),o.FieldNumber=function(n,a,c,d,_,y){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,o.FieldNumber.superClass_.constructor.call(this,n,_,y),y||this.setConstraints(a,c,d)},o.utils.object.inherits(o.FieldNumber,o.FieldTextInput),o.FieldNumber.prototype.DEFAULT_VALUE=0,o.FieldNumber.fromJson=function(n){return new o.FieldNumber(n.value,void 0,void 0,void 0,void 0,n)},o.FieldNumber.prototype.SERIALIZABLE=!0,o.FieldNumber.prototype.configure_=function(n){o.FieldNumber.superClass_.configure_.call(this,n),this.setMinInternal_(n.min),this.setMaxInternal_(n.max),this.setPrecisionInternal_(n.precision)},o.FieldNumber.prototype.setConstraints=function(n,a,c){this.setMinInternal_(n),this.setMaxInternal_(a),this.setPrecisionInternal_(c),this.setValue(this.getValue())},o.FieldNumber.prototype.setMin=function(n){this.setMinInternal_(n),this.setValue(this.getValue())},o.FieldNumber.prototype.setMinInternal_=function(n){null==n?this.min_=-1/0:(n=Number(n),isNaN(n)||(this.min_=n))},o.FieldNumber.prototype.getMin=function(){return this.min_},o.FieldNumber.prototype.setMax=function(n){this.setMaxInternal_(n),this.setValue(this.getValue())},o.FieldNumber.prototype.setMaxInternal_=function(n){null==n?this.max_=1/0:(n=Number(n),isNaN(n)||(this.max_=n))},o.FieldNumber.prototype.getMax=function(){return this.max_},o.FieldNumber.prototype.setPrecision=function(n){this.setPrecisionInternal_(n),this.setValue(this.getValue())},o.FieldNumber.prototype.setPrecisionInternal_=function(n){this.precision_=Number(n)||0;var a=String(this.precision_);-1!=a.indexOf("e")&&(a=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var c=a.indexOf(".");this.decimalPlaces_=-1==c?n?0:null:a.length-c-1},o.FieldNumber.prototype.getPrecision=function(){return this.precision_},o.FieldNumber.prototype.doClassValidation_=function(n){return null===n||(n=(n=(n=(n=String(n)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),n=Number(n||0),isNaN(n))?null:(n=Math.min(Math.max(n,this.min_),this.max_),this.precision_&&isFinite(n)&&(n=Math.round(n/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(n=Number(n.toFixed(this.decimalPlaces_))),n)},o.FieldNumber.prototype.widgetCreate_=function(){var n=o.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&o.utils.aria.setState(n,o.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&o.utils.aria.setState(n,o.utils.aria.State.VALUEMAX,this.max_),n},o.fieldRegistry.register("field_number",o.FieldNumber),o.FieldVariable=function(n,a,c,d,_){this.menuGenerator_=o.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof n?n:"",this.size_=new o.utils.Size(0,0),_&&this.configure_(_),a&&this.setValidator(a),_||this.setTypes_(c,d)},o.utils.object.inherits(o.FieldVariable,o.FieldDropdown),o.FieldVariable.fromJson=function(n){var a=o.utils.replaceMessageReferences(n.variable);return new o.FieldVariable(a,void 0,void 0,void 0,n)},o.FieldVariable.prototype.SERIALIZABLE=!0,o.FieldVariable.prototype.configure_=function(n){o.FieldVariable.superClass_.configure_.call(this,n),this.setTypes_(n.variableTypes,n.defaultType)},o.FieldVariable.prototype.initModel=function(){if(!this.variable_){var n=o.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(n.getId())}},o.FieldVariable.prototype.shouldAddBorderRect_=function(){return o.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},o.FieldVariable.prototype.fromXml=function(n){var a=n.getAttribute("id"),c=n.textContent,d=n.getAttribute("variabletype")||n.getAttribute("variableType")||"";if(a=o.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,a,c,d),null!=d&&d!==a.type)throw Error("Serialized variable type with id '"+a.getId()+"' had type "+a.type+", and does not match variable field that references it: "+o.Xml.domToText(n)+".");this.setValue(a.getId())},o.FieldVariable.prototype.toXml=function(n){return this.initModel(),n.id=this.variable_.getId(),n.textContent=this.variable_.name,this.variable_.type&&n.setAttribute("variabletype",this.variable_.type),n},o.FieldVariable.prototype.setSourceBlock=function(n){if(n.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");o.FieldVariable.superClass_.setSourceBlock.call(this,n)},o.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},o.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},o.FieldVariable.prototype.getVariable=function(){return this.variable_},o.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},o.FieldVariable.prototype.doClassValidation_=function(n){if(null===n)return null;var a=o.Variables.getVariable(this.sourceBlock_.workspace,n);return a?this.typeIsAllowed_(a=a.type)?n:(console.warn("Variable type doesn't match this field!  Type was "+a),null):(console.warn("Variable id doesn't point to a real variable! ID was "+n),null)},o.FieldVariable.prototype.doValueUpdate_=function(n){this.variable_=o.Variables.getVariable(this.sourceBlock_.workspace,n),o.FieldVariable.superClass_.doValueUpdate_.call(this,n)},o.FieldVariable.prototype.typeIsAllowed_=function(n){var a=this.getVariableTypes_();if(!a)return!0;for(var c=0;c<a.length;c++)if(n==a[c])return!0;return!1},o.FieldVariable.prototype.getVariableTypes_=function(){var n=this.variableTypes;if(null===n&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(n=n||[""]).length)throw n=this.getText(),Error("'variableTypes' of field variable "+n+" was an empty list");return n},o.FieldVariable.prototype.setTypes_=function(n,a){if(a=a||"",null==n||null==n)n=null;else{if(!Array.isArray(n))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var c=!1,d=0;d<n.length;d++)n[d]==a&&(c=!0);if(!c)throw Error("Invalid default type '"+a+"' in the definition of a FieldVariable")}this.defaultType_=a,this.variableTypes=n},o.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},o.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var n=this.getText(),a=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var c=this.getVariableTypes_(),d=0;d<c.length;d++){var _=this.sourceBlock_.workspace.getVariablesOfType(c[d]);a=a.concat(_)}for(a.sort(o.VariableModel.compareByName),c=[],d=0;d<a.length;d++)c[d]=[a[d].name,a[d].getId()];return c.push([o.Msg.RENAME_VARIABLE,o.RENAME_VARIABLE_ID]),o.Msg.DELETE_VARIABLE&&c.push([o.Msg.DELETE_VARIABLE.replace("%1",n),o.DELETE_VARIABLE_ID]),c},o.FieldVariable.prototype.onItemSelected_=function(n,a){if(n=a.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(n==o.RENAME_VARIABLE_ID)return void o.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(n==o.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(n)},o.FieldVariable.prototype.referencesVariables=function(){return!0},o.fieldRegistry.register("field_variable",o.FieldVariable),o.utils.svgPaths={},o.utils.svgPaths.point=function(n,a){return" "+n+","+a+" "},o.utils.svgPaths.curve=function(n,a){return" "+n+a.join("")},o.utils.svgPaths.moveTo=function(n,a){return" M "+n+","+a+" "},o.utils.svgPaths.moveBy=function(n,a){return" m "+n+","+a+" "},o.utils.svgPaths.lineTo=function(n,a){return" l "+n+","+a+" "},o.utils.svgPaths.line=function(n){return" l"+n.join("")},o.utils.svgPaths.lineOnAxis=function(n,a){return" "+n+" "+a+" "},o.utils.svgPaths.arc=function(n,a,c,d){return n+" "+c+" "+c+" "+a+d},o.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=o.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!o.utils.userAgent.IE&&!o.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},o.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},o.blockRendering.ConstantProvider.prototype.setTheme=function(n){this.blockStyles=Object.create(null);var c,a=n.blockStyles;for(c in a)this.blockStyles[c]=this.validatedBlockStyle_(a[c]);this.setDynamicProperties_(n)},o.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(n){this.setFontConstants_(n),this.setComponentConstants_(n),this.ADD_START_HATS=null!=n.startHats?n.startHats:this.ADD_START_HATS},o.blockRendering.ConstantProvider.prototype.setFontConstants_=function(n){this.FIELD_TEXT_FONTFAMILY=n.fontStyle&&null!=n.fontStyle.family?n.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=n.fontStyle&&null!=n.fontStyle.weight?n.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=n.fontStyle&&null!=n.fontStyle.size?n.fontStyle.size:this.FIELD_TEXT_FONTSIZE,n=o.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=n.height,this.FIELD_TEXT_BASELINE=n.baseline},o.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(n){this.CURSOR_COLOUR=n.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=n.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=n.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(n.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},o.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(n){var a="auto_"+n;return this.blockStyles[a]||(this.blockStyles[a]=this.createBlockStyle_(n)),{style:this.blockStyles[a],name:a}},o.blockRendering.ConstantProvider.prototype.getBlockStyle=function(n){return this.blockStyles[n||""]||(n&&0==n.indexOf("auto_")?this.getBlockStyleForColour(n.substring(5)).style:this.createBlockStyle_("#000000"))},o.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(n){return this.validatedBlockStyle_({colourPrimary:n})},o.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(n){var a={};return n&&o.utils.object.mixin(a,n),n=o.utils.parseBlockColour(a.colourPrimary||"#000"),a.colourPrimary=n.hex,a.colourSecondary=a.colourSecondary?o.utils.parseBlockColour(a.colourSecondary).hex:this.generateSecondaryColour_(a.colourPrimary),a.colourTertiary=a.colourTertiary?o.utils.parseBlockColour(a.colourTertiary).hex:this.generateTertiaryColour_(a.colourPrimary),a.hat=a.hat||"",a},o.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(n){return o.utils.colour.blend("#fff",n,.6)||n},o.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(n){return o.utils.colour.blend("#fff",n,.3)||n},o.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&o.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&o.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&o.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},o.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var n=this.JAGGED_TEETH_HEIGHT,a=this.JAGGED_TEETH_WIDTH;return{height:n,width:a,path:o.utils.svgPaths.line([o.utils.svgPaths.point(a,n/4),o.utils.svgPaths.point(2*-a,n/2),o.utils.svgPaths.point(a,n/4)])}},o.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var n=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH;return{height:n,width:a,path:o.utils.svgPaths.curve("c",[o.utils.svgPaths.point(30,-n),o.utils.svgPaths.point(70,-n),o.utils.svgPaths.point(a,0)])}},o.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function n(y){var R=-(y=y?-1:1),x=c/2,B=x+2.5,H=x+.5,F=o.utils.svgPaths.point(-a,y*x);return x=o.utils.svgPaths.point(a,y*x),o.utils.svgPaths.curve("c",[o.utils.svgPaths.point(0,y*B),o.utils.svgPaths.point(-a,R*H),F])+o.utils.svgPaths.curve("s",[o.utils.svgPaths.point(a,2.5*R),x])}var a=this.TAB_WIDTH,c=this.TAB_HEIGHT,d=n(!0),_=n(!1);return{type:this.SHAPES.PUZZLE,width:a,height:c,pathDown:_,pathUp:d}},o.blockRendering.ConstantProvider.prototype.makeNotch=function(){function n(R){return o.utils.svgPaths.line([o.utils.svgPaths.point(R*d,c),o.utils.svgPaths.point(3*R,0),o.utils.svgPaths.point(R*d,-c)])}var a=this.NOTCH_WIDTH,c=this.NOTCH_HEIGHT,d=(a-3)/2,_=n(1),y=n(-1);return{type:this.SHAPES.NOTCH,width:a,height:c,pathLeft:_,pathRight:y}},o.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var n=this.CORNER_RADIUS;return{width:n,height:n,pathTop:o.utils.svgPaths.arc("a","0 0,0",n,o.utils.svgPaths.point(-n,n)),pathBottom:o.utils.svgPaths.arc("a","0 0,0",n,o.utils.svgPaths.point(n,n))}},o.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var n=this.CORNER_RADIUS,a=o.utils.svgPaths.moveBy(0,n)+o.utils.svgPaths.arc("a","0 0,1",n,o.utils.svgPaths.point(n,-n)),c=o.utils.svgPaths.arc("a","0 0,1",n,o.utils.svgPaths.point(n,n)),d=o.utils.svgPaths.arc("a","0 0,1",n,o.utils.svgPaths.point(-n,-n));return{topLeft:a,topRight:c,bottomRight:o.utils.svgPaths.arc("a","0 0,1",n,o.utils.svgPaths.point(-n,n)),bottomLeft:d,rightHeight:n}},o.blockRendering.ConstantProvider.prototype.shapeFor=function(n){switch(n.type){case o.connectionTypes.INPUT_VALUE:case o.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case o.connectionTypes.PREVIOUS_STATEMENT:case o.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},o.blockRendering.ConstantProvider.prototype.createDom=function(n,a,c){this.injectCSS_(a,c),n=o.utils.dom.createSvgElement(o.utils.Svg.DEFS,{},n),a=o.utils.dom.createSvgElement(o.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},n),o.utils.dom.createSvgElement(o.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},a),c=o.utils.dom.createSvgElement(o.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},a),o.utils.dom.createSvgElement(o.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},c),o.utils.dom.createSvgElement(o.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},a),o.utils.dom.createSvgElement(o.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},a),this.embossFilterId=a.id,this.embossFilter_=a,a=o.utils.dom.createSvgElement(o.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},n),o.utils.dom.createSvgElement(o.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},a),o.utils.dom.createSvgElement(o.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},a),this.disabledPatternId=a.id,this.disabledPattern_=a,o.blockRendering.Debug&&(n=o.utils.dom.createSvgElement(o.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),a=o.utils.dom.createSvgElement(o.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),o.utils.dom.createSvgElement(o.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),o.utils.dom.createSvgElement(o.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},n),o.utils.dom.createSvgElement(o.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.debugFilterId=n.id,this.debugFilter_=n)},o.blockRendering.ConstantProvider.prototype.injectCSS_=function(n,a){a=this.getCSS_(a),n="blockly-renderer-style-"+n,this.cssNode_=document.getElementById(n);var c=a.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=c:((a=document.createElement("style")).id=n,n=document.createTextNode(c),a.appendChild(n),document.head.insertBefore(a,document.head.firstChild),this.cssNode_=a)},o.blockRendering.ConstantProvider.prototype.getCSS_=function(n){return[n+" .blocklyText, ",n+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",n+" .blocklyText {","fill: #fff;","}",n+" .blocklyNonEditableText>rect,",n+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",n+" .blocklyNonEditableText>text,",n+" .blocklyEditableText>text {","fill: #000;","}",n+" .blocklyFlyoutLabelText {","fill: #000;","}",n+" .blocklyText.blocklyBubbleText {","fill: #000;","}",n+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",n+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",n+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",n+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",n+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",n+" .blocklyReplaceable .blocklyPathLight,",n+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",n+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},o.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},o.blockRendering.Types.LEFT_CORNER=o.blockRendering.Types.LEFT_SQUARE_CORNER|o.blockRendering.Types.LEFT_ROUND_CORNER,o.blockRendering.Types.RIGHT_CORNER=o.blockRendering.Types.RIGHT_SQUARE_CORNER|o.blockRendering.Types.RIGHT_ROUND_CORNER,o.blockRendering.Types.nextTypeValue_=16777216,o.blockRendering.Types.getType=function(n){return Object.prototype.hasOwnProperty.call(o.blockRendering.Types,n)||(o.blockRendering.Types[n]=o.blockRendering.Types.nextTypeValue_,o.blockRendering.Types.nextTypeValue_<<=1),o.blockRendering.Types[n]},o.blockRendering.Types.isField=function(n){return n.type&o.blockRendering.Types.FIELD},o.blockRendering.Types.isHat=function(n){return n.type&o.blockRendering.Types.HAT},o.blockRendering.Types.isIcon=function(n){return n.type&o.blockRendering.Types.ICON},o.blockRendering.Types.isSpacer=function(n){return n.type&o.blockRendering.Types.SPACER},o.blockRendering.Types.isInRowSpacer=function(n){return n.type&o.blockRendering.Types.IN_ROW_SPACER},o.blockRendering.Types.isInput=function(n){return n.type&o.blockRendering.Types.INPUT},o.blockRendering.Types.isExternalInput=function(n){return n.type&o.blockRendering.Types.EXTERNAL_VALUE_INPUT},o.blockRendering.Types.isInlineInput=function(n){return n.type&o.blockRendering.Types.INLINE_INPUT},o.blockRendering.Types.isStatementInput=function(n){return n.type&o.blockRendering.Types.STATEMENT_INPUT},o.blockRendering.Types.isPreviousConnection=function(n){return n.type&o.blockRendering.Types.PREVIOUS_CONNECTION},o.blockRendering.Types.isNextConnection=function(n){return n.type&o.blockRendering.Types.NEXT_CONNECTION},o.blockRendering.Types.isPreviousOrNextConnection=function(n){return n.type&(o.blockRendering.Types.PREVIOUS_CONNECTION|o.blockRendering.Types.NEXT_CONNECTION)},o.blockRendering.Types.isLeftRoundedCorner=function(n){return n.type&o.blockRendering.Types.LEFT_ROUND_CORNER},o.blockRendering.Types.isRightRoundedCorner=function(n){return n.type&o.blockRendering.Types.RIGHT_ROUND_CORNER},o.blockRendering.Types.isLeftSquareCorner=function(n){return n.type&o.blockRendering.Types.LEFT_SQUARE_CORNER},o.blockRendering.Types.isRightSquareCorner=function(n){return n.type&o.blockRendering.Types.RIGHT_SQUARE_CORNER},o.blockRendering.Types.isCorner=function(n){return n.type&o.blockRendering.Types.CORNER},o.blockRendering.Types.isJaggedEdge=function(n){return n.type&o.blockRendering.Types.JAGGED_EDGE},o.blockRendering.Types.isRow=function(n){return n.type&o.blockRendering.Types.ROW},o.blockRendering.Types.isBetweenRowSpacer=function(n){return n.type&o.blockRendering.Types.BETWEEN_ROW_SPACER},o.blockRendering.Types.isTopRow=function(n){return n.type&o.blockRendering.Types.TOP_ROW},o.blockRendering.Types.isBottomRow=function(n){return n.type&o.blockRendering.Types.BOTTOM_ROW},o.blockRendering.Types.isTopOrBottomRow=function(n){return n.type&(o.blockRendering.Types.TOP_ROW|o.blockRendering.Types.BOTTOM_ROW)},o.blockRendering.Types.isInputRow=function(n){return n.type&o.blockRendering.Types.INPUT_ROW},o.blockRendering.Measurable=function(n){this.height=this.width=0,this.type=o.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=n,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},o.blockRendering.Connection=function(n,a){o.blockRendering.Connection.superClass_.constructor.call(this,n),this.connectionModel=a,this.shape=this.constants_.shapeFor(a),this.isDynamicShape=!!this.shape.isDynamic,this.type|=o.blockRendering.Types.CONNECTION},o.utils.object.inherits(o.blockRendering.Connection,o.blockRendering.Measurable),o.blockRendering.OutputConnection=function(n,a){o.blockRendering.OutputConnection.superClass_.constructor.call(this,n,a),this.type|=o.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},o.utils.object.inherits(o.blockRendering.OutputConnection,o.blockRendering.Connection),o.blockRendering.PreviousConnection=function(n,a){o.blockRendering.PreviousConnection.superClass_.constructor.call(this,n,a),this.type|=o.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},o.utils.object.inherits(o.blockRendering.PreviousConnection,o.blockRendering.Connection),o.blockRendering.NextConnection=function(n,a){o.blockRendering.NextConnection.superClass_.constructor.call(this,n,a),this.type|=o.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},o.utils.object.inherits(o.blockRendering.NextConnection,o.blockRendering.Connection),o.blockRendering.InputConnection=function(n,a){o.blockRendering.InputConnection.superClass_.constructor.call(this,n,a.connection),this.type|=o.blockRendering.Types.INPUT,this.input=a,this.align=a.align,(this.connectedBlock=a.connection&&a.connection.targetBlock()?a.connection.targetBlock():null)?(n=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=n.width,this.connectedBlockHeight=n.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},o.utils.object.inherits(o.blockRendering.InputConnection,o.blockRendering.Connection),o.blockRendering.InlineInput=function(n,a){o.blockRendering.InlineInput.superClass_.constructor.call(this,n,a),this.type|=o.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},o.utils.object.inherits(o.blockRendering.InlineInput,o.blockRendering.InputConnection),o.blockRendering.StatementInput=function(n,a){o.blockRendering.StatementInput.superClass_.constructor.call(this,n,a),this.type|=o.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},o.utils.object.inherits(o.blockRendering.StatementInput,o.blockRendering.InputConnection),o.blockRendering.ExternalValueInput=function(n,a){o.blockRendering.ExternalValueInput.superClass_.constructor.call(this,n,a),this.type|=o.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},o.utils.object.inherits(o.blockRendering.ExternalValueInput,o.blockRendering.InputConnection),o.blockRendering.Icon=function(n,a){o.blockRendering.Icon.superClass_.constructor.call(this,n),this.icon=a,this.isVisible=a.isVisible(),this.type|=o.blockRendering.Types.ICON,n=a.getCorrectedSize(),this.height=n.height,this.width=n.width},o.utils.object.inherits(o.blockRendering.Icon,o.blockRendering.Measurable),o.blockRendering.JaggedEdge=function(n){o.blockRendering.JaggedEdge.superClass_.constructor.call(this,n),this.type|=o.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},o.utils.object.inherits(o.blockRendering.JaggedEdge,o.blockRendering.Measurable),o.blockRendering.Field=function(n,a,c){o.blockRendering.Field.superClass_.constructor.call(this,n),this.field=a,this.isEditable=a.EDITABLE,this.flipRtl=a.getFlipRtl(),this.type|=o.blockRendering.Types.FIELD,n=this.field.getSize(),this.height=n.height,this.width=n.width,this.parentInput=c},o.utils.object.inherits(o.blockRendering.Field,o.blockRendering.Measurable),o.blockRendering.Hat=function(n){o.blockRendering.Hat.superClass_.constructor.call(this,n),this.type|=o.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},o.utils.object.inherits(o.blockRendering.Hat,o.blockRendering.Measurable),o.blockRendering.SquareCorner=function(n,a){o.blockRendering.SquareCorner.superClass_.constructor.call(this,n),this.type=(a&&"left"!=a?o.blockRendering.Types.RIGHT_SQUARE_CORNER:o.blockRendering.Types.LEFT_SQUARE_CORNER)|o.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},o.utils.object.inherits(o.blockRendering.SquareCorner,o.blockRendering.Measurable),o.blockRendering.RoundCorner=function(n,a){o.blockRendering.RoundCorner.superClass_.constructor.call(this,n),this.type=(a&&"left"!=a?o.blockRendering.Types.RIGHT_ROUND_CORNER:o.blockRendering.Types.LEFT_ROUND_CORNER)|o.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},o.utils.object.inherits(o.blockRendering.RoundCorner,o.blockRendering.Measurable),o.blockRendering.InRowSpacer=function(n,a){o.blockRendering.InRowSpacer.superClass_.constructor.call(this,n),this.type=this.type|o.blockRendering.Types.SPACER|o.blockRendering.Types.IN_ROW_SPACER,this.width=a,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},o.utils.object.inherits(o.blockRendering.InRowSpacer,o.blockRendering.Measurable),o.blockRendering.Row=function(n){this.type=o.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=n,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},o.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},o.blockRendering.Row.prototype.getLastInput=function(){for(var a,n=this.elements.length-1;a=this.elements[n];n--)if(o.blockRendering.Types.isInput(a))return a;return null},o.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},o.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},o.blockRendering.Row.prototype.getFirstSpacer=function(){for(var a,n=0;a=this.elements[n];n++)if(o.blockRendering.Types.isSpacer(a))return a;return null},o.blockRendering.Row.prototype.getLastSpacer=function(){for(var a,n=this.elements.length-1;a=this.elements[n];n--)if(o.blockRendering.Types.isSpacer(a))return a;return null},o.blockRendering.TopRow=function(n){o.blockRendering.TopRow.superClass_.constructor.call(this,n),this.type|=o.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},o.utils.object.inherits(o.blockRendering.TopRow,o.blockRendering.Row),o.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(n){var a=(n.hat?"cap"===n.hat:this.constants_.ADD_START_HATS)&&!n.outputConnection&&!n.previousConnection,c=n.getPreviousBlock();return!!n.outputConnection||a||!!c&&c.getNextBlock()==n},o.blockRendering.TopRow.prototype.hasRightSquareCorner=function(n){return!0},o.blockRendering.TopRow.prototype.measure=function(){for(var _,n=0,a=0,c=0,d=0;_=this.elements[d];d++)a+=_.width,o.blockRendering.Types.isSpacer(_)||(o.blockRendering.Types.isHat(_)?c=Math.max(c,_.ascenderHeight):n=Math.max(n,_.height));this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,n)+c,this.capline=this.ascenderHeight=c,this.widthWithConnectedBlocks=this.width},o.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},o.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},o.blockRendering.BottomRow=function(n){o.blockRendering.BottomRow.superClass_.constructor.call(this,n),this.type|=o.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},o.utils.object.inherits(o.blockRendering.BottomRow,o.blockRendering.Row),o.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection||!!n.getNextBlock()},o.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(n){return!0},o.blockRendering.BottomRow.prototype.measure=function(){for(var _,n=0,a=0,c=0,d=0;_=this.elements[d];d++)a+=_.width,o.blockRendering.Types.isSpacer(_)||(o.blockRendering.Types.isNextConnection(_)?c=Math.max(c,_.height):n=Math.max(n,_.height));this.width=Math.max(this.minWidth,a),this.height=Math.max(this.minHeight,n)+c,this.descenderHeight=c,this.widthWithConnectedBlocks=this.width},o.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},o.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},o.blockRendering.SpacerRow=function(n,a,c){o.blockRendering.SpacerRow.superClass_.constructor.call(this,n),this.type=this.type|o.blockRendering.Types.SPACER|o.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=c,this.height=a,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new o.blockRendering.InRowSpacer(this.constants_,c)]},o.utils.object.inherits(o.blockRendering.SpacerRow,o.blockRendering.Row),o.blockRendering.SpacerRow.prototype.measure=function(){},o.blockRendering.InputRow=function(n){o.blockRendering.InputRow.superClass_.constructor.call(this,n),this.type|=o.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},o.utils.object.inherits(o.blockRendering.InputRow,o.blockRendering.Row),o.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var c,n=0,a=0;c=this.elements[a];a++)this.width+=c.width,o.blockRendering.Types.isInput(c)&&(o.blockRendering.Types.isStatementInput(c)?n+=c.connectedBlockWidth:o.blockRendering.Types.isExternalInput(c)&&0!=c.connectedBlockWidth&&(n+=c.connectedBlockWidth-c.connectionWidth)),o.blockRendering.Types.isSpacer(c)||(this.height=Math.max(this.height,c.height));this.connectedBlockWidths=n,this.widthWithConnectedBlocks=this.width+n},o.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},o.blockRendering.RenderInfo=function(n,a){this.block_=a,this.renderer_=n,this.constants_=this.renderer_.getConstants(),this.outputConnection=a.outputConnection?new o.blockRendering.OutputConnection(this.constants_,a.outputConnection):null,this.isInline=a.getInputsInline()&&!a.isCollapsed(),this.isCollapsed=a.isCollapsed(),this.isInsertionMarker=a.isInsertionMarker(),this.RTL=a.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new o.blockRendering.TopRow(this.constants_),this.bottomRow=new o.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},o.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},o.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},o.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var n=new o.blockRendering.InputRow(this.constants_);this.inputRows.push(n);for(var d,a=this.block_.getIcons(),c=0;d=a[c];c++){var _=new o.blockRendering.Icon(this.constants_,d);this.isCollapsed&&d.collapseHidden?this.hiddenIcons.push(_):n.elements.push(_)}for(d=null,c=0;a=this.block_.inputList[c];c++)if(a.isVisible()){for(this.shouldStartNewRow_(a,d)&&(this.rows.push(n),n=new o.blockRendering.InputRow(this.constants_),this.inputRows.push(n)),d=0;_=a.fieldRow[d];d++)n.elements.push(new o.blockRendering.Field(this.constants_,_,a));this.addInput_(a,n),d=a}this.isCollapsed&&(n.hasJaggedEdge=!0,n.elements.push(new o.blockRendering.JaggedEdge(this.constants_))),(n.elements.length||n.hasDummyInput)&&this.rows.push(n),this.populateBottomRow_(),this.rows.push(this.bottomRow)},o.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var n=!!this.block_.previousConnection,a=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!n,c=this.topRow.hasLeftSquareCorner(this.block_)?o.blockRendering.SquareCorner:o.blockRendering.RoundCorner;this.topRow.elements.push(new c(this.constants_)),a?(n=new o.blockRendering.Hat(this.constants_),this.topRow.elements.push(n),this.topRow.capline=n.ascenderHeight):n&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new o.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==o.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,c=this.topRow.hasRightSquareCorner(this.block_)?o.blockRendering.SquareCorner:o.blockRendering.RoundCorner,this.topRow.elements.push(new c(this.constants_,"right"))},o.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==o.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new o.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new o.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new o.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new o.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new o.blockRendering.RoundCorner(this.constants_,"right"))},o.blockRendering.RenderInfo.prototype.addInput_=function(n,a){this.isInline&&n.type==o.inputTypes.VALUE?(a.elements.push(new o.blockRendering.InlineInput(this.constants_,n)),a.hasInlineInput=!0):n.type==o.inputTypes.STATEMENT?(a.elements.push(new o.blockRendering.StatementInput(this.constants_,n)),a.hasStatement=!0):n.type==o.inputTypes.VALUE?(a.elements.push(new o.blockRendering.ExternalValueInput(this.constants_,n)),a.hasExternalInput=!0):n.type==o.inputTypes.DUMMY&&(a.minHeight=Math.max(a.minHeight,n.getSourceBlock()&&n.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),null==a.align&&(a.align=n.align)},o.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(n,a){return!(!a||n.type!=o.inputTypes.STATEMENT&&a.type!=o.inputTypes.STATEMENT&&(n.type!=o.inputTypes.VALUE&&n.type!=o.inputTypes.DUMMY||this.isInline))},o.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var a,n=0;a=this.rows[n];n++){var c=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new o.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,c[0]))),c.length){for(var d=0;d<c.length-1;d++){a.elements.push(c[d]);var _=this.getInRowSpacing_(c[d],c[d+1]);a.elements.push(new o.blockRendering.InRowSpacer(this.constants_,_))}a.elements.push(c[c.length-1]),a.endsWithElemSpacer()&&a.elements.push(new o.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(c[c.length-1],null)))}}},o.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(n,a){if(!n&&a&&o.blockRendering.Types.isStatementInput(a))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(n&&o.blockRendering.Types.isInput(n)&&!a){if(o.blockRendering.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(o.blockRendering.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(o.blockRendering.Types.isStatementInput(n))return this.constants_.NO_PADDING}return n&&o.blockRendering.Types.isLeftSquareCorner(n)&&a&&(o.blockRendering.Types.isPreviousConnection(a)||o.blockRendering.Types.isNextConnection(a))?a.notchOffset:n&&o.blockRendering.Types.isLeftRoundedCorner(n)&&a&&(o.blockRendering.Types.isPreviousConnection(a)||o.blockRendering.Types.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},o.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var _,n=0,a=0,c=0,d=0;_=this.rows[d];d++){if(_.measure(),a=Math.max(a,_.width),_.hasStatement){var y=_.getLastInput();n=Math.max(n,_.width-y.width)}c=Math.max(c,_.widthWithConnectedBlocks)}for(this.statementEdge=n,this.width=a,d=0;_=this.rows[d];d++)_.hasStatement&&(_.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(a,c),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},o.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var a,n=0;a=this.rows[n];n++)if(a.hasStatement)this.alignStatementRow_(a);else{var c=a.width;0<(c=this.getDesiredRowWidth_(a)-c)&&this.addAlignmentPadding_(a,c),o.blockRendering.Types.isTopOrBottomRow(a)&&(a.widthWithConnectedBlocks=a.width)}},o.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(n){return this.width-this.startX},o.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(n,a){var c=n.getFirstSpacer(),d=n.getLastSpacer();(n.hasExternalInput||n.hasStatement)&&(n.widthWithConnectedBlocks+=a),n.align==o.constants.ALIGN.LEFT?d.width+=a:n.align==o.constants.ALIGN.CENTRE?(c.width+=a/2,d.width+=a/2):n.align==o.constants.ALIGN.RIGHT?c.width+=a:d.width+=a,n.width+=a},o.blockRendering.RenderInfo.prototype.alignStatementRow_=function(n){var a=n.getLastInput(),c=n.width-a.width,d=this.statementEdge;0<(c=d-c)&&this.addAlignmentPadding_(n,c),c=n.width,d=this.getDesiredRowWidth_(n),a.width+=d-c,a.height=Math.max(a.height,n.height),n.width+=d-c,n.widthWithConnectedBlocks=Math.max(n.width,this.statementEdge+n.connectedBlockWidths)},o.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var n=this.rows;this.rows=[];for(var a=0;a<n.length;a++)this.rows.push(n[a]),a!=n.length-1&&this.rows.push(this.makeSpacerRow_(n[a],n[a+1]))},o.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(n,a){var c=this.getSpacerRowHeight_(n,a),d=this.getSpacerRowWidth_(n,a);return c=new o.blockRendering.SpacerRow(this.constants_,c,d),n.hasStatement&&(c.followsStatement=!0),a.hasStatement&&(c.precedesStatement=!0),c},o.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(n,a){return this.width-this.startX},o.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(n,a){return this.constants_.MEDIUM_PADDING},o.blockRendering.RenderInfo.prototype.getElemCenterline_=function(n,a){return o.blockRendering.Types.isSpacer(a)?n.yPos+a.height/2:o.blockRendering.Types.isBottomRow(n)?(n=n.yPos+n.height-n.descenderHeight,o.blockRendering.Types.isNextConnection(a)?n+a.height/2:n-a.height/2):o.blockRendering.Types.isTopRow(n)?o.blockRendering.Types.isHat(a)?n.capline-a.height/2:n.capline+a.height/2:n.yPos+n.height/2},o.blockRendering.RenderInfo.prototype.recordElemPositions_=function(n){for(var d,a=n.xPos,c=0;d=n.elements[c];c++)o.blockRendering.Types.isSpacer(d)&&(d.height=n.height),d.xPos=a,d.centerline=this.getElemCenterline_(n,d),a+=d.width},o.blockRendering.RenderInfo.prototype.finalize_=function(){for(var d,n=0,a=0,c=0;d=this.rows[c];c++)d.yPos=a,d.xPos=this.startX,a+=d.height,n=Math.max(n,d.widthWithConnectedBlocks),this.recordElemPositions_(d);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=n+this.startX,this.height=a,this.startY=this.topRow.capline,this.bottomRow.baseline=a-this.bottomRow.descenderHeight},o.blockRendering.Debug=function(n){this.debugElements_=[],this.svgRoot_=null,this.constants_=n},o.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},o.blockRendering.Debug.prototype.clearElems=function(){for(var a,n=0;a=this.debugElements_[n];n++)o.utils.dom.removeNode(a);this.debugElements_=[]},o.blockRendering.Debug.prototype.drawSpacerRow=function(n,a,c){if(o.blockRendering.Debug.config.rowSpacers){var d=Math.abs(n.height),_=0>n.height;_&&(a-=d),this.debugElements_.push(o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:c?-(n.xPos+n.width):n.xPos,y:a,width:n.width,height:d,stroke:_?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},o.blockRendering.Debug.prototype.drawSpacerElem=function(n,a,c){if(o.blockRendering.Debug.config.elemSpacers){a=Math.abs(n.width);var d=0>n.width,_=d?n.xPos-a:n.xPos;c&&(_=-(_+a)),this.debugElements_.push(o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:_,y:n.centerline-n.height/2,width:a,height:n.height,stroke:"pink",fill:d?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},o.blockRendering.Debug.prototype.drawRenderedElem=function(n,a){if(o.blockRendering.Debug.config.elems){var c=n.xPos;a&&(c=-(c+n.width)),this.debugElements_.push(o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:c,y:a=n.centerline-n.height/2,width:n.width,height:n.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),o.blockRendering.Types.isField(n)&&n.field instanceof o.FieldLabel&&this.debugElements_.push(o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:c,y:a+this.constants_.FIELD_TEXT_BASELINE,width:n.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}o.blockRendering.Types.isInput(n)&&o.blockRendering.Debug.config.connections&&this.drawConnection(n.connectionModel)},o.blockRendering.Debug.prototype.drawConnection=function(n){if(o.blockRendering.Debug.config.connections){if(n.type==o.connectionTypes.INPUT_VALUE)var a=4,c="magenta",d="none";else n.type==o.connectionTypes.OUTPUT_VALUE?(a=2,d=c="magenta"):n.type==o.connectionTypes.NEXT_STATEMENT?(a=4,c="goldenrod",d="none"):n.type==o.connectionTypes.PREVIOUS_STATEMENT&&(a=2,d=c="goldenrod");this.debugElements_.push(o.utils.dom.createSvgElement(o.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:n.offsetInBlock_.x,cy:n.offsetInBlock_.y,r:a,fill:d,stroke:c},this.svgRoot_))}},o.blockRendering.Debug.prototype.drawRenderedRow=function(n,a,c){o.blockRendering.Debug.config.rows&&(this.debugElements_.push(o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:c?-(n.xPos+n.width):n.xPos,y:n.yPos,width:n.width,height:n.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),o.blockRendering.Types.isTopOrBottomRow(n)||o.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:c?-(n.xPos+n.widthWithConnectedBlocks):n.xPos,y:n.yPos,width:n.widthWithConnectedBlocks,height:n.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},o.blockRendering.Debug.prototype.drawRowWithElements=function(n,a,c){for(var d=0,_=n.elements.length;d<_;d++){var y=n.elements[d];y?o.blockRendering.Types.isSpacer(y)?this.drawSpacerElem(y,n.height,c):this.drawRenderedElem(y,c):console.warn("A row has an undefined or null element.",n,y)}this.drawRenderedRow(n,a,c)},o.blockRendering.Debug.prototype.drawBoundingBox=function(n){if(o.blockRendering.Debug.config.blockBounds){var a=n.RTL?-n.width:0;this.debugElements_.push(o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:a,y:0,width:n.width,height:n.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),o.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"blockRenderDebug",x:a=n.RTL?-n.widthWithChildren:0,y:0,width:n.widthWithChildren,height:n.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},o.blockRendering.Debug.prototype.drawDebug=function(n,a){this.clearElems(),this.svgRoot_=n.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var _,c=0,d=0;_=a.rows[d];d++)o.blockRendering.Types.isBetweenRowSpacer(_)?this.drawSpacerRow(_,c,a.RTL):this.drawRowWithElements(_,c,a.RTL),c+=_.height;n.previousConnection&&this.drawConnection(n.previousConnection),n.nextConnection&&this.drawConnection(n.nextConnection),n.outputConnection&&this.drawConnection(n.outputConnection),a.rightSide&&this.drawRenderedElem(a.rightSide,a.RTL),this.drawBoundingBox(a),this.drawRender(n.pathObject.svgPath)},o.blockRendering.Debug.prototype.drawRender=function(n){o.blockRendering.Debug.config.render&&(n.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){n.setAttribute("filter","")},100))},o.blockRendering.Drawer=function(n,a){this.block_=n,this.info_=a,this.topLeft_=n.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=a.getRenderer().getConstants()},o.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),o.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},o.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},o.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var a,n=0;a=this.info_.hiddenIcons[n];n++)a.icon.iconGroup_.setAttribute("display","none")},o.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var n=1;n<this.info_.rows.length-1;n++){var a=this.info_.rows[n];a.hasJaggedEdge?this.drawJaggedEdge_(a):a.hasStatement?this.drawStatementInput_(a):a.hasExternalInput?this.drawValueInput_(a):this.drawRightSideRow_(a)}this.drawBottom_(),this.drawLeft_()},o.blockRendering.Drawer.prototype.drawTop_=function(){var n=this.info_.topRow,a=n.elements;this.positionPreviousConnection_(),this.outlinePath_+=o.utils.svgPaths.moveBy(n.xPos,this.info_.startY);for(var d,c=0;d=a[c];c++)o.blockRendering.Types.isLeftRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:o.blockRendering.Types.isRightRoundedCorner(d)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:o.blockRendering.Types.isPreviousConnection(d)?this.outlinePath_+=d.shape.pathLeft:o.blockRendering.Types.isHat(d)?this.outlinePath_+=this.constants_.START_HAT.path:o.blockRendering.Types.isSpacer(d)&&(this.outlinePath_+=o.utils.svgPaths.lineOnAxis("h",d.width));this.outlinePath_+=o.utils.svgPaths.lineOnAxis("v",n.height)},o.blockRendering.Drawer.prototype.drawJaggedEdge_=function(n){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+o.utils.svgPaths.lineOnAxis("v",n.height-this.constants_.JAGGED_TEETH.height)},o.blockRendering.Drawer.prototype.drawValueInput_=function(n){var a=n.getLastInput();this.positionExternalValueConnection_(n);var c="function"==typeof a.shape.pathDown?a.shape.pathDown(a.height):a.shape.pathDown;this.outlinePath_+=o.utils.svgPaths.lineOnAxis("H",a.xPos+a.width)+c+o.utils.svgPaths.lineOnAxis("v",n.height-a.connectionHeight)},o.blockRendering.Drawer.prototype.drawStatementInput_=function(n){var a=n.getLastInput(),c=a.xPos+a.notchOffset+a.shape.width;a=a.shape.pathRight+o.utils.svgPaths.lineOnAxis("h",-(a.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var d=n.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=o.utils.svgPaths.lineOnAxis("H",c)+a+o.utils.svgPaths.lineOnAxis("v",d)+this.constants_.INSIDE_CORNERS.pathBottom+o.utils.svgPaths.lineOnAxis("H",n.xPos+n.width),this.positionStatementInputConnection_(n)},o.blockRendering.Drawer.prototype.drawRightSideRow_=function(n){this.outlinePath_+=o.utils.svgPaths.lineOnAxis("V",n.yPos+n.height)},o.blockRendering.Drawer.prototype.drawBottom_=function(){var n=this.info_.bottomRow,a=n.elements;this.positionNextConnection_();for(var y,c=0,d="",_=a.length-1;y=a[_];_--)o.blockRendering.Types.isNextConnection(y)?d+=y.shape.pathRight:o.blockRendering.Types.isLeftSquareCorner(y)?d+=o.utils.svgPaths.lineOnAxis("H",n.xPos):o.blockRendering.Types.isLeftRoundedCorner(y)?d+=this.constants_.OUTSIDE_CORNERS.bottomLeft:o.blockRendering.Types.isRightRoundedCorner(y)?(d+=this.constants_.OUTSIDE_CORNERS.bottomRight,c=this.constants_.OUTSIDE_CORNERS.rightHeight):o.blockRendering.Types.isSpacer(y)&&(d+=o.utils.svgPaths.lineOnAxis("h",-1*y.width));this.outlinePath_+=o.utils.svgPaths.lineOnAxis("V",n.baseline-c),this.outlinePath_+=d},o.blockRendering.Drawer.prototype.drawLeft_=function(){var n=this.info_.outputConnection;if(this.positionOutputConnection_(),n){var a=n.connectionOffsetY+n.height;n="function"==typeof n.shape.pathUp?n.shape.pathUp(n.height):n.shape.pathUp,this.outlinePath_+=o.utils.svgPaths.lineOnAxis("V",a)+n}this.outlinePath_+="z"},o.blockRendering.Drawer.prototype.drawInternals_=function(){for(var a,n=0;a=this.info_.rows[n];n++)for(var d,c=0;d=a.elements[c];c++)o.blockRendering.Types.isInlineInput(d)?this.drawInlineInput_(d):(o.blockRendering.Types.isIcon(d)||o.blockRendering.Types.isField(d))&&this.layoutField_(d)},o.blockRendering.Drawer.prototype.layoutField_=function(n){if(o.blockRendering.Types.isField(n))var a=n.field.getSvgRoot();else o.blockRendering.Types.isIcon(n)&&(a=n.icon.iconGroup_);var c=n.centerline-n.height/2,d=n.xPos,_="";this.info_.RTL&&(d=-(d+n.width),n.flipRtl&&(d+=n.width,_="scale(-1 1)")),o.blockRendering.Types.isIcon(n)?(a.setAttribute("display","block"),a.setAttribute("transform","translate("+d+","+c+")"),n.icon.computeIconLocation()):a.setAttribute("transform","translate("+d+","+c+")"+_),this.info_.isInsertionMarker&&a.setAttribute("display","none")},o.blockRendering.Drawer.prototype.drawInlineInput_=function(n){var a=n.width,c=n.height,d=n.connectionOffsetY,_=n.connectionHeight+d;this.inlinePath_+=o.utils.svgPaths.moveTo(n.xPos+n.connectionWidth,n.centerline-c/2)+o.utils.svgPaths.lineOnAxis("v",d)+n.shape.pathDown+o.utils.svgPaths.lineOnAxis("v",c-_)+o.utils.svgPaths.lineOnAxis("h",a-n.connectionWidth)+o.utils.svgPaths.lineOnAxis("v",-c)+"z",this.positionInlineInputConnection_(n)},o.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(n){if(n.connectionModel){var c=n.xPos+n.connectionWidth+n.connectionOffsetX;this.info_.RTL&&(c*=-1),n.connectionModel.setOffsetInBlock(c,n.centerline-n.height/2+n.connectionOffsetY)}},o.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(n){var a=n.getLastInput();if(a.connectionModel){var c=n.xPos+n.statementEdge+a.notchOffset;this.info_.RTL&&(c*=-1),a.connectionModel.setOffsetInBlock(c,n.yPos)}},o.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(n){var a=n.getLastInput();if(a.connectionModel){var c=n.xPos+n.width;this.info_.RTL&&(c*=-1),a.connectionModel.setOffsetInBlock(c,n.yPos)}},o.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var n=this.info_.topRow;if(n.connection){var a=n.xPos+n.notchOffset;n.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-a:a,0)}},o.blockRendering.Drawer.prototype.positionNextConnection_=function(){var n=this.info_.bottomRow;if(n.connection){var a=n.connection,c=a.xPos;a.connectionModel.setOffsetInBlock(this.info_.RTL?-c:c,n.baseline)}},o.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var n=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-n:n,this.info_.outputConnection.connectionOffsetY)}},o.Events.MarkerMove=function(n,a,c,d){var _=n?n.workspace.id:void 0;d&&d.getType()==o.ASTNode.types.WORKSPACE&&(_=d.getLocation().id),o.Events.MarkerMove.superClass_.constructor.call(this,_),this.blockId=n?n.id:null,this.oldNode=c,this.newNode=d,this.isCursor=a},o.utils.object.inherits(o.Events.MarkerMove,o.Events.UiBase),o.Events.MarkerMove.prototype.type=o.Events.MARKER_MOVE,o.Events.MarkerMove.prototype.toJson=function(){var n=o.Events.MarkerMove.superClass_.toJson.call(this);return n.isCursor=this.isCursor,n.blockId=this.blockId,n.oldNode=this.oldNode,n.newNode=this.newNode,n},o.Events.MarkerMove.prototype.fromJson=function(n){o.Events.MarkerMove.superClass_.fromJson.call(this,n),this.isCursor=n.isCursor,this.blockId=n.blockId,this.oldNode=n.oldNode,this.newNode=n.newNode},o.registry.register(o.registry.Type.EVENT,o.Events.MARKER_MOVE,o.Events.MarkerMove),o.blockRendering.MarkerSvg=function(n,a,c){this.workspace_=n,this.marker_=c,this.parent_=null,this.constants_=a,this.currentMarkerSvg=null,n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=c.colour||n},o.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",o.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",o.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,o.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},o.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},o.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},o.blockRendering.MarkerSvg.prototype.createDom=function(){var n=this.isCursor()?o.blockRendering.MarkerSvg.CURSOR_CLASS:o.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=o.utils.dom.createSvgElement(o.utils.Svg.G,{class:n},null),this.createDomInternal_(),this.svgGroup_},o.blockRendering.MarkerSvg.prototype.setParent_=function(n){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),n.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),n.setMarkerSvg(this.getSvgRoot())),this.parent_=n},o.blockRendering.MarkerSvg.prototype.draw=function(n,a){if(a){this.constants_=this.workspace_.getRenderer().getConstants();var c=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||c,this.applyColour_(a),this.showAtLocation_(a),this.fireMarkerEvent_(n,a),void 0!==(n=this.currentMarkerSvg.childNodes[0])&&n.beginElement&&n.beginElement()}else this.hide()},o.blockRendering.MarkerSvg.prototype.showAtLocation_=function(n){var a=n.getLocation().type;n.getType()==o.ASTNode.types.BLOCK?this.showWithBlock_(n):n.getType()==o.ASTNode.types.OUTPUT?this.showWithOutput_(n):a==o.connectionTypes.INPUT_VALUE?this.showWithInput_(n):a==o.connectionTypes.NEXT_STATEMENT?this.showWithNext_(n):n.getType()==o.ASTNode.types.PREVIOUS?this.showWithPrevious_(n):n.getType()==o.ASTNode.types.FIELD?this.showWithField_(n):n.getType()==o.ASTNode.types.WORKSPACE?this.showWithCoordinates_(n):n.getType()==o.ASTNode.types.STACK&&this.showWithStack_(n)},o.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(n){var a=(n=n.getSourceBlock()).width,c=n.height,d=c*o.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,_=this.constants_.CURSOR_BLOCK_PADDING;if(n.previousConnection){var y=this.constants_.shapeFor(n.previousConnection);this.positionPrevious_(a,_,d,y)}else n.outputConnection?(y=this.constants_.shapeFor(n.outputConnection),this.positionOutput_(a,c,y)):this.positionBlock_(a,_,d);this.setParent_(n),this.showCurrent_()},o.blockRendering.MarkerSvg.prototype.showWithBlock_=function(n){this.showWithBlockPrevOutput_(n)},o.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(n){this.showWithBlockPrevOutput_(n)},o.blockRendering.MarkerSvg.prototype.showWithOutput_=function(n){this.showWithBlockPrevOutput_(n)},o.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(n){var a=n.getWsCoordinate();n=a.x,this.workspace_.RTL&&(n-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(n,a=a.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},o.blockRendering.MarkerSvg.prototype.showWithField_=function(n){var a=(n=n.getLocation()).getSize().width,c=n.getSize().height;this.positionRect_(0,0,a,c),this.setParent_(n),this.showCurrent_()},o.blockRendering.MarkerSvg.prototype.showWithInput_=function(n){var a=(n=n.getLocation()).getSourceBlock();this.positionInput_(n),this.setParent_(a),this.showCurrent_()},o.blockRendering.MarkerSvg.prototype.showWithNext_=function(n){var a=n.getLocation();n=a.getSourceBlock();var c=0;a=a.getOffsetInBlock().y;var d=n.getHeightWidth().width;this.workspace_.RTL&&(c=-d),this.positionLine_(c,a,d),this.setParent_(n),this.showCurrent_()},o.blockRendering.MarkerSvg.prototype.showWithStack_=function(n){var a=(n=n.getLocation()).getHeightWidth(),c=a.width+this.constants_.CURSOR_STACK_PADDING,d=-this.constants_.CURSOR_STACK_PADDING/2,y=d;this.workspace_.RTL&&(y=-(c+d)),this.positionRect_(y,-this.constants_.CURSOR_STACK_PADDING/2,c,a=a.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(n),this.showCurrent_()},o.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},o.blockRendering.MarkerSvg.prototype.positionBlock_=function(n,a,c){n=o.utils.svgPaths.moveBy(-a,c)+o.utils.svgPaths.lineOnAxis("V",-a)+o.utils.svgPaths.lineOnAxis("H",n+2*a)+o.utils.svgPaths.lineOnAxis("V",c),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},o.blockRendering.MarkerSvg.prototype.positionInput_=function(n){var a=n.getOffsetInBlock().x,c=n.getOffsetInBlock().y;n=o.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(n).pathDown,this.markerInput_.setAttribute("d",n),this.markerInput_.setAttribute("transform","translate("+a+","+c+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},o.blockRendering.MarkerSvg.prototype.positionLine_=function(n,a,c){this.markerSvgLine_.setAttribute("x",n),this.markerSvgLine_.setAttribute("y",a),this.markerSvgLine_.setAttribute("width",c),this.currentMarkerSvg=this.markerSvgLine_},o.blockRendering.MarkerSvg.prototype.positionOutput_=function(n,a,c){n=o.utils.svgPaths.moveBy(n,0)+o.utils.svgPaths.lineOnAxis("h",-(n-c.width))+o.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+c.pathDown+o.utils.svgPaths.lineOnAxis("V",a)+o.utils.svgPaths.lineOnAxis("H",n),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},o.blockRendering.MarkerSvg.prototype.positionPrevious_=function(n,a,c,d){n=o.utils.svgPaths.moveBy(-a,c)+o.utils.svgPaths.lineOnAxis("V",-a)+o.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+d.pathLeft+o.utils.svgPaths.lineOnAxis("H",n+2*a)+o.utils.svgPaths.lineOnAxis("V",c),this.markerBlock_.setAttribute("d",n),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},o.blockRendering.MarkerSvg.prototype.positionRect_=function(n,a,c,d){this.markerSvgRect_.setAttribute("x",n),this.markerSvgRect_.setAttribute("y",a),this.markerSvgRect_.setAttribute("width",c),this.markerSvgRect_.setAttribute("height",d),this.currentMarkerSvg=this.markerSvgRect_},o.blockRendering.MarkerSvg.prototype.flipRtl_=function(n){n.setAttribute("transform","scale(-1 1)")},o.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},o.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(n,a){var c=a.getSourceBlock();n=new(o.Events.get(o.Events.MARKER_MOVE))(c,this.isCursor(),n,a),o.Events.fire(n)},o.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},o.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=o.utils.dom.createSvgElement(o.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=o.utils.dom.createSvgElement(o.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var n=this.getBlinkProperties_();o.utils.dom.createSvgElement(o.utils.Svg.ANIMATE,n,this.markerSvgLine_),o.utils.dom.createSvgElement(o.utils.Svg.ANIMATE,n,this.markerInput_),n.attributeName="stroke",o.utils.dom.createSvgElement(o.utils.Svg.ANIMATE,n,this.markerBlock_)}return this.markerSvg_},o.blockRendering.MarkerSvg.prototype.applyColour_=function(n){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",n=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",n),this.markerBlock_.firstChild.setAttribute("values",n))},o.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&o.utils.dom.removeNode(this.svgGroup_)},o.blockRendering.PathObject=function(n,a,c){this.constants=c,this.svgRoot=n,this.svgPath=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=a,this.markerSvg=this.cursorSvg=null},o.blockRendering.PathObject.prototype.setPath=function(n){this.svgPath.setAttribute("d",n)},o.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},o.blockRendering.PathObject.prototype.setCursorSvg=function(n){n?(this.svgRoot.appendChild(n),this.cursorSvg=n):this.cursorSvg=null},o.blockRendering.PathObject.prototype.setMarkerSvg=function(n){n?(this.cursorSvg?this.svgRoot.insertBefore(n,this.cursorSvg):this.svgRoot.appendChild(n),this.markerSvg=n):this.markerSvg=null},o.blockRendering.PathObject.prototype.applyColour=function(n){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(n.isShadow()),this.updateDisabled_(!n.isEnabled()||n.getInheritedDisabled())},o.blockRendering.PathObject.prototype.setStyle=function(n){this.style=n},o.blockRendering.PathObject.prototype.setClass_=function(n,a){a?o.utils.dom.addClass(this.svgRoot,n):o.utils.dom.removeClass(this.svgRoot,n)},o.blockRendering.PathObject.prototype.updateHighlighted=function(n){this.svgPath.setAttribute("filter",n?"url(#"+this.constants.embossFilterId+")":"none")},o.blockRendering.PathObject.prototype.updateShadow_=function(n){n&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},o.blockRendering.PathObject.prototype.updateDisabled_=function(n){this.setClass_("blocklyDisabled",n),n&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},o.blockRendering.PathObject.prototype.updateSelected=function(n){this.setClass_("blocklySelected",n)},o.blockRendering.PathObject.prototype.updateDraggingDelete=function(n){this.setClass_("blocklyDraggingDelete",n)},o.blockRendering.PathObject.prototype.updateInsertionMarker=function(n){this.setClass_("blocklyInsertionMarker",n)},o.blockRendering.PathObject.prototype.updateMovable=function(n){this.setClass_("blocklyDraggable",n)},o.blockRendering.PathObject.prototype.updateReplacementFade=function(n){this.setClass_("blocklyReplaceable",n)},o.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(n,a){},o.blockRendering.Renderer=function(n){this.name=n,this.overrides=this.constants_=null},o.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},o.blockRendering.Renderer.prototype.init=function(n,a){this.constants_=this.makeConstants_(),a&&(this.overrides=a,o.utils.object.mixin(this.constants_,a)),this.constants_.setTheme(n),this.constants_.init()},o.blockRendering.Renderer.prototype.createDom=function(n,a){this.constants_.createDom(n,this.name+"-"+a.name,"."+this.getClassName()+"."+a.getClassName())},o.blockRendering.Renderer.prototype.refreshDom=function(n,a){var c=this.getConstants();c.dispose(),this.constants_=this.makeConstants_(),this.overrides&&o.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=c.randomIdentifier,this.constants_.setTheme(a),this.constants_.init(),this.createDom(n,a)},o.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},o.blockRendering.Renderer.prototype.makeConstants_=function(){return new o.blockRendering.ConstantProvider},o.blockRendering.Renderer.prototype.makeRenderInfo_=function(n){return new o.blockRendering.RenderInfo(this,n)},o.blockRendering.Renderer.prototype.makeDrawer_=function(n,a){return new o.blockRendering.Drawer(n,a)},o.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!o.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new o.blockRendering.Debug(this.getConstants())},o.blockRendering.Renderer.prototype.makeMarkerDrawer=function(n,a){return new o.blockRendering.MarkerSvg(n,this.getConstants(),a)},o.blockRendering.Renderer.prototype.makePathObject=function(n,a){return new o.blockRendering.PathObject(n,a,this.constants_)},o.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},o.blockRendering.Renderer.prototype.shouldHighlightConnection=function(n){return!0},o.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(n,a,c){return!!o.Connection.getConnectionForOrphanedConnection(n,c===o.connectionTypes.OUTPUT_VALUE?a.outputConnection:a.previousConnection)},o.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(n,a,c){return a.type==o.connectionTypes.OUTPUT_VALUE||a.type==o.connectionTypes.PREVIOUS_STATEMENT?!n.isConnected()||this.orphanCanConnectAtEnd(c,n.targetBlock(),a.type)?o.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:o.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:o.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},o.blockRendering.Renderer.prototype.render=function(n){o.blockRendering.useDebugger&&!n.renderingDebugger&&(n.renderingDebugger=this.makeDebugger_());var a=this.makeRenderInfo_(n);a.measure(),this.makeDrawer_(n,a).draw()},o.geras={},o.geras.ConstantProvider=function(){o.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},o.utils.object.inherits(o.geras.ConstantProvider,o.blockRendering.ConstantProvider),o.geras.ConstantProvider.prototype.getCSS_=function(n){return o.geras.ConstantProvider.superClass_.getCSS_.call(this,n).concat([n+" .blocklyInsertionMarker>.blocklyPathLight,",n+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},o.geras.Highlighter=function(n){this.info_=n,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,n=n.getRenderer(),this.constants_=n.getConstants(),this.highlightConstants_=n.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},o.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},o.geras.Highlighter.prototype.drawTopCorner=function(n){this.steps_+=o.utils.svgPaths.moveBy(n.xPos,this.info_.startY);for(var c,a=0;c=n.elements[a];a++)o.blockRendering.Types.isLeftSquareCorner(c)?this.steps_+=this.highlightConstants_.START_POINT:o.blockRendering.Types.isLeftRoundedCorner(c)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):o.blockRendering.Types.isPreviousConnection(c)?this.steps_+=this.notchPaths_.pathLeft:o.blockRendering.Types.isHat(c)?this.steps_+=this.startPaths_.path(this.RTL_):o.blockRendering.Types.isSpacer(c)&&0!=c.width&&(this.steps_+=o.utils.svgPaths.lineOnAxis("H",c.xPos+c.width-this.highlightOffset_));this.steps_+=o.utils.svgPaths.lineOnAxis("H",n.xPos+n.width-this.highlightOffset_)},o.geras.Highlighter.prototype.drawJaggedEdge_=function(n){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+o.utils.svgPaths.lineOnAxis("v",n.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},o.geras.Highlighter.prototype.drawValueInput=function(n){var a=n.getLastInput();if(this.RTL_){var c=n.height-a.connectionHeight;this.steps_+=o.utils.svgPaths.moveTo(a.xPos+a.width-this.highlightOffset_,n.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+o.utils.svgPaths.lineOnAxis("v",c)}else this.steps_+=o.utils.svgPaths.moveTo(a.xPos+a.width,n.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},o.geras.Highlighter.prototype.drawStatementInput=function(n){var a=n.getLastInput();if(this.RTL_){var c=n.height-2*this.insideCornerPaths_.height;this.steps_+=o.utils.svgPaths.moveTo(a.xPos,n.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+o.utils.svgPaths.lineOnAxis("v",c)+this.insideCornerPaths_.pathBottom(this.RTL_)+o.utils.svgPaths.lineTo(n.width-a.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=o.utils.svgPaths.moveTo(a.xPos,n.yPos+n.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+o.utils.svgPaths.lineTo(n.width-a.xPos-this.insideCornerPaths_.width,0)},o.geras.Highlighter.prototype.drawRightSideRow=function(n){var a=n.xPos+n.width-this.highlightOffset_;n.followsStatement&&(this.steps_+=o.utils.svgPaths.lineOnAxis("H",a)),this.RTL_&&(this.steps_+=o.utils.svgPaths.lineOnAxis("H",a),n.height>this.highlightOffset_&&(this.steps_+=o.utils.svgPaths.lineOnAxis("V",n.yPos+n.height-this.highlightOffset_)))},o.geras.Highlighter.prototype.drawBottomRow=function(n){if(this.RTL_)this.steps_+=o.utils.svgPaths.lineOnAxis("V",n.baseline-this.highlightOffset_);else{var a=this.info_.bottomRow.elements[0];o.blockRendering.Types.isLeftSquareCorner(a)?this.steps_+=o.utils.svgPaths.moveTo(n.xPos+this.highlightOffset_,n.baseline-this.highlightOffset_):o.blockRendering.Types.isLeftRoundedCorner(a)&&(this.steps_+=o.utils.svgPaths.moveTo(n.xPos,n.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},o.geras.Highlighter.prototype.drawLeft=function(){var n=this.info_.outputConnection;n&&(n=n.connectionOffsetY+n.height,this.RTL_?this.steps_+=o.utils.svgPaths.moveTo(this.info_.startX,n):(this.steps_+=o.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=o.utils.svgPaths.lineOnAxis("V",n)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(o.blockRendering.Types.isLeftRoundedCorner((n=this.info_.topRow).elements[0])?this.steps_+=o.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=o.utils.svgPaths.lineOnAxis("V",n.capline+this.highlightOffset_))},o.geras.Highlighter.prototype.drawInlineInput=function(n){var a=this.highlightOffset_,c=n.xPos+n.connectionWidth,d=n.centerline-n.height/2,_=n.width-n.connectionWidth,y=d+a;this.RTL_?(d=n.connectionOffsetY-a,n=n.height-(n.connectionOffsetY+n.connectionHeight)+a,this.inlineSteps_+=o.utils.svgPaths.moveTo(c-a,y)+o.utils.svgPaths.lineOnAxis("v",d)+this.puzzleTabPaths_.pathDown(this.RTL_)+o.utils.svgPaths.lineOnAxis("v",n)+o.utils.svgPaths.lineOnAxis("h",_)):this.inlineSteps_+=o.utils.svgPaths.moveTo(n.xPos+n.width+a,y)+o.utils.svgPaths.lineOnAxis("v",n.height)+o.utils.svgPaths.lineOnAxis("h",-_)+o.utils.svgPaths.moveTo(c,d+n.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},o.geras.InlineInput=function(n,a){o.geras.InlineInput.superClass_.constructor.call(this,n,a),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},o.utils.object.inherits(o.geras.InlineInput,o.blockRendering.InlineInput),o.geras.StatementInput=function(n,a){o.geras.StatementInput.superClass_.constructor.call(this,n,a),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},o.utils.object.inherits(o.geras.StatementInput,o.blockRendering.StatementInput),o.geras.RenderInfo=function(n,a){o.geras.RenderInfo.superClass_.constructor.call(this,n,a)},o.utils.object.inherits(o.geras.RenderInfo,o.blockRendering.RenderInfo),o.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},o.geras.RenderInfo.prototype.populateBottomRow_=function(){o.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==o.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},o.geras.RenderInfo.prototype.addInput_=function(n,a){this.isInline&&n.type==o.inputTypes.VALUE?(a.elements.push(new o.geras.InlineInput(this.constants_,n)),a.hasInlineInput=!0):n.type==o.inputTypes.STATEMENT?(a.elements.push(new o.geras.StatementInput(this.constants_,n)),a.hasStatement=!0):n.type==o.inputTypes.VALUE?(a.elements.push(new o.blockRendering.ExternalValueInput(this.constants_,n)),a.hasExternalInput=!0):n.type==o.inputTypes.DUMMY&&(a.minHeight=Math.max(a.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),a.hasDummyInput=!0),this.isInline||null!=a.align||(a.align=n.align)},o.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var c,n=!1,a=0;c=this.rows[a];a++)c.hasExternalInput&&(n=!0);for(a=0;c=this.rows[a];a++){var d=c.elements;if(c.elements=[],c.startsWithElemSpacer()&&c.elements.push(new o.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0]))),d.length){for(var _=0;_<d.length-1;_++){c.elements.push(d[_]);var y=this.getInRowSpacing_(d[_],d[_+1]);c.elements.push(new o.blockRendering.InRowSpacer(this.constants_,y))}c.elements.push(d[d.length-1]),c.endsWithElemSpacer()&&(y=this.getInRowSpacing_(d[d.length-1],null),n&&c.hasDummyInput&&(y+=this.constants_.TAB_WIDTH),c.elements.push(new o.blockRendering.InRowSpacer(this.constants_,y)))}}},o.geras.RenderInfo.prototype.getInRowSpacing_=function(n,a){if(!n)return a&&o.blockRendering.Types.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&o.blockRendering.Types.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&o.blockRendering.Types.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!o.blockRendering.Types.isInput(n)&&(!a||o.blockRendering.Types.isStatementInput(a)))return o.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:o.blockRendering.Types.isIcon(n)?2*this.constants_.LARGE_PADDING+1:o.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:o.blockRendering.Types.isPreviousOrNextConnection(n)?this.constants_.LARGE_PADDING:o.blockRendering.Types.isLeftRoundedCorner(n)?this.constants_.MIN_BLOCK_WIDTH:o.blockRendering.Types.isJaggedEdge(n)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(o.blockRendering.Types.isInput(n)&&!a){if(o.blockRendering.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(o.blockRendering.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(o.blockRendering.Types.isStatementInput(n))return this.constants_.NO_PADDING}if(!o.blockRendering.Types.isInput(n)&&a&&o.blockRendering.Types.isInput(a)){if(o.blockRendering.Types.isField(n)&&n.isEditable){if(o.blockRendering.Types.isInlineInput(a)||o.blockRendering.Types.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(o.blockRendering.Types.isInlineInput(a)||o.blockRendering.Types.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(o.blockRendering.Types.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(o.blockRendering.Types.isIcon(n)&&a&&!o.blockRendering.Types.isInput(a))return this.constants_.LARGE_PADDING;if(o.blockRendering.Types.isInlineInput(n)&&a&&o.blockRendering.Types.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(o.blockRendering.Types.isLeftSquareCorner(n)&&a){if(o.blockRendering.Types.isHat(a))return this.constants_.NO_PADDING;if(o.blockRendering.Types.isPreviousConnection(a))return a.notchOffset;if(o.blockRendering.Types.isNextConnection(a))return a.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(o.blockRendering.Types.isLeftRoundedCorner(n)&&a){if(o.blockRendering.Types.isPreviousConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS;if(o.blockRendering.Types.isNextConnection(a))return a.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return o.blockRendering.Types.isField(n)&&a&&o.blockRendering.Types.isField(a)&&n.isEditable==a.isEditable||a&&o.blockRendering.Types.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},o.geras.RenderInfo.prototype.getSpacerRowHeight_=function(n,a){return o.blockRendering.Types.isTopRow(n)&&o.blockRendering.Types.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:o.blockRendering.Types.isTopRow(n)||o.blockRendering.Types.isBottomRow(a)?this.constants_.NO_PADDING:n.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!n.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:n.hasStatement&&a.hasStatement||!n.hasStatement&&a.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},o.geras.RenderInfo.prototype.getElemCenterline_=function(n,a){if(o.blockRendering.Types.isSpacer(a))return n.yPos+a.height/2;if(o.blockRendering.Types.isBottomRow(n))return n=n.yPos+n.height-n.descenderHeight,o.blockRendering.Types.isNextConnection(a)?n+a.height/2:n-a.height/2;if(o.blockRendering.Types.isTopRow(n))return o.blockRendering.Types.isHat(a)?n.capline-a.height/2:n.capline+a.height/2;var c=n.yPos;return o.blockRendering.Types.isField(a)||o.blockRendering.Types.isIcon(a)?(c+=a.height/2,(n.hasInlineInput||n.hasStatement)&&a.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=n.height&&(c+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):c=o.blockRendering.Types.isInlineInput(a)?c+a.height/2:c+n.height/2,c},o.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var d,n=0,a=null,c=this.rows.length-1;d=this.rows[c];c--)d.nextRightEdge=n,o.blockRendering.Types.isInputRow(d)&&(d.hasStatement&&this.alignStatementRow_(d),a&&a.hasStatement&&d.width<a.width?d.nextRightEdge=a.width:n=d.width,a=d);for(c=n=0;d=this.rows[c];c++)d.hasStatement?n=this.getDesiredRowWidth_(d):o.blockRendering.Types.isSpacer(d)?d.width=Math.max(n,d.nextRightEdge):(0<(n=Math.max(n,d.nextRightEdge)-d.width)&&this.addAlignmentPadding_(d,n),n=d.width)}else o.geras.RenderInfo.superClass_.alignRowElements_.call(this)},o.geras.RenderInfo.prototype.getDesiredRowWidth_=function(n){return this.isInline&&n.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:o.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,n)},o.geras.RenderInfo.prototype.finalize_=function(){for(var d,n=0,a=0,c=0;d=this.rows[c];c++){d.yPos=a,d.xPos=this.startX,a+=d.height,n=Math.max(n,d.widthWithConnectedBlocks);var _=a-this.topRow.ascenderHeight;d==this.bottomRow&&_<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=_=this.constants_.MIN_BLOCK_HEIGHT-_,a+=_),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=n+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=a+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},o.geras.Drawer=function(n,a){o.geras.Drawer.superClass_.constructor.call(this,n,a),this.highlighter_=new o.geras.Highlighter(a)},o.utils.object.inherits(o.geras.Drawer,o.blockRendering.Drawer),o.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var n=this.block_.pathObject;n.setPath(this.outlinePath_+"\n"+this.inlinePath_),n.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&n.flipRTL(),o.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},o.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),o.geras.Drawer.superClass_.drawTop_.call(this)},o.geras.Drawer.prototype.drawJaggedEdge_=function(n){this.highlighter_.drawJaggedEdge_(n),o.geras.Drawer.superClass_.drawJaggedEdge_.call(this,n)},o.geras.Drawer.prototype.drawValueInput_=function(n){this.highlighter_.drawValueInput(n),o.geras.Drawer.superClass_.drawValueInput_.call(this,n)},o.geras.Drawer.prototype.drawStatementInput_=function(n){this.highlighter_.drawStatementInput(n),o.geras.Drawer.superClass_.drawStatementInput_.call(this,n)},o.geras.Drawer.prototype.drawRightSideRow_=function(n){this.highlighter_.drawRightSideRow(n),this.outlinePath_+=o.utils.svgPaths.lineOnAxis("H",n.xPos+n.width)+o.utils.svgPaths.lineOnAxis("V",n.yPos+n.height)},o.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),o.geras.Drawer.superClass_.drawBottom_.call(this)},o.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),o.geras.Drawer.superClass_.drawLeft_.call(this)},o.geras.Drawer.prototype.drawInlineInput_=function(n){this.highlighter_.drawInlineInput(n),o.geras.Drawer.superClass_.drawInlineInput_.call(this,n)},o.geras.Drawer.prototype.positionInlineInputConnection_=function(n){if(n.connectionModel){var c=n.xPos+n.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(c*=-1),n.connectionModel.setOffsetInBlock(c,n.centerline-n.height/2+n.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},o.geras.Drawer.prototype.positionStatementInputConnection_=function(n){var a=n.getLastInput();if(a.connectionModel){var c=n.xPos+n.statementEdge+a.notchOffset;a.connectionModel.setOffsetInBlock(c=this.info_.RTL?-1*c:c+this.constants_.DARK_PATH_OFFSET,n.yPos+this.constants_.DARK_PATH_OFFSET)}},o.geras.Drawer.prototype.positionExternalValueConnection_=function(n){var a=n.getLastInput();if(a.connectionModel){var c=n.xPos+n.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(c*=-1),a.connectionModel.setOffsetInBlock(c,n.yPos)}},o.geras.Drawer.prototype.positionNextConnection_=function(){var n=this.info_.bottomRow;if(n.connection){var a=n.connection,c=a.xPos;a.connectionModel.setOffsetInBlock((this.info_.RTL?-c:c)+this.constants_.DARK_PATH_OFFSET/2,n.baseline+this.constants_.DARK_PATH_OFFSET)}},o.geras.HighlightConstantProvider=function(n){this.constantProvider=n,this.OFFSET=.5,this.START_POINT=o.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},o.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},o.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var n=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,c=(1-Math.SQRT1_2)*(n+a)-a,d=o.utils.svgPaths.moveBy(c,c)+o.utils.svgPaths.arc("a","0 0,0",n,o.utils.svgPaths.point(-c-a,n-c)),_=o.utils.svgPaths.arc("a","0 0,0",n+a,o.utils.svgPaths.point(n+a,n+a)),y=o.utils.svgPaths.moveBy(c,-c)+o.utils.svgPaths.arc("a","0 0,0",n+a,o.utils.svgPaths.point(n-c,c+a));return{width:n+a,height:n,pathTop:function(R){return R?d:""},pathBottom:function(R){return R?_:y}}},o.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var n=this.constantProvider.CORNER_RADIUS,a=this.OFFSET,c=(1-Math.SQRT1_2)*(n-a)+a,d=o.utils.svgPaths.moveBy(c,c)+o.utils.svgPaths.arc("a","0 0,1",n-a,o.utils.svgPaths.point(n-c,-c+a)),_=o.utils.svgPaths.moveBy(a,n)+o.utils.svgPaths.arc("a","0 0,1",n-a,o.utils.svgPaths.point(n,-n+a)),y=-c,R=o.utils.svgPaths.moveBy(c,y)+o.utils.svgPaths.arc("a","0 0,1",n-a,o.utils.svgPaths.point(-c+a,-y-n));return{height:n,topLeft:function(x){return x?d:_},bottomLeft:function(){return R}}},o.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var n=this.constantProvider.TAB_WIDTH,a=this.constantProvider.TAB_HEIGHT,c=o.utils.svgPaths.moveBy(-2,3.4-a)+o.utils.svgPaths.lineTo(-.45*n,-2.1),d=o.utils.svgPaths.lineOnAxis("v",2.5)+o.utils.svgPaths.moveBy(.97*-n,2.5)+o.utils.svgPaths.curve("q",[o.utils.svgPaths.point(.05*-n,10),o.utils.svgPaths.point(.3*n,9.5)])+o.utils.svgPaths.moveBy(.67*n,-1.9)+o.utils.svgPaths.lineOnAxis("v",2.5),_=o.utils.svgPaths.lineOnAxis("v",-1.5)+o.utils.svgPaths.moveBy(-.92*n,-.5)+o.utils.svgPaths.curve("q",[o.utils.svgPaths.point(-.19*n,-5.5),o.utils.svgPaths.point(0,-11)])+o.utils.svgPaths.moveBy(.92*n,1),y=o.utils.svgPaths.moveBy(-5,a-.7)+o.utils.svgPaths.lineTo(.46*n,-2.1);return{width:n,height:a,pathUp:function(R){return R?c:_},pathDown:function(R){return R?d:y}}},o.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:o.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},o.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:o.utils.svgPaths.lineTo(5.1,2.6)+o.utils.svgPaths.moveBy(-10.2,6.8)+o.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},o.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var n=this.constantProvider.START_HAT.height,a=o.utils.svgPaths.moveBy(25,-8.7)+o.utils.svgPaths.curve("c",[o.utils.svgPaths.point(29.7,-6.2),o.utils.svgPaths.point(57.2,-.5),o.utils.svgPaths.point(75,8.7)]),c=o.utils.svgPaths.curve("c",[o.utils.svgPaths.point(17.8,-9.2),o.utils.svgPaths.point(45.3,-14.9),o.utils.svgPaths.point(75,-8.7)])+o.utils.svgPaths.moveTo(100.5,n+.5);return{path:function(d){return d?a:c}}},o.geras.PathObject=function(n,a,c){this.constants=c,this.svgRoot=n,this.svgPathDark=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=a},o.utils.object.inherits(o.geras.PathObject,o.blockRendering.PathObject),o.geras.PathObject.prototype.setPath=function(n){this.svgPath.setAttribute("d",n),this.svgPathDark.setAttribute("d",n)},o.geras.PathObject.prototype.setHighlightPath=function(n){this.svgPathLight.setAttribute("d",n)},o.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},o.geras.PathObject.prototype.applyColour=function(n){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),o.geras.PathObject.superClass_.applyColour.call(this,n),this.svgPath.setAttribute("stroke","none")},o.geras.PathObject.prototype.setStyle=function(n){this.style=n,this.colourDark=o.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},o.geras.PathObject.prototype.updateHighlighted=function(n){n?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},o.geras.PathObject.prototype.updateShadow_=function(n){n&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},o.geras.PathObject.prototype.updateDisabled_=function(n){o.geras.PathObject.superClass_.updateDisabled_.call(this,n),n&&this.svgPath.setAttribute("stroke","none")},o.geras.Renderer=function(n){o.geras.Renderer.superClass_.constructor.call(this,n),this.highlightConstants_=null},o.utils.object.inherits(o.geras.Renderer,o.blockRendering.Renderer),o.geras.Renderer.prototype.init=function(n,a){o.geras.Renderer.superClass_.init.call(this,n,a),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},o.geras.Renderer.prototype.refreshDom=function(n,a){o.geras.Renderer.superClass_.refreshDom.call(this,n,a),this.getHighlightConstants().init()},o.geras.Renderer.prototype.makeConstants_=function(){return new o.geras.ConstantProvider},o.geras.Renderer.prototype.makeRenderInfo_=function(n){return new o.geras.RenderInfo(this,n)},o.geras.Renderer.prototype.makeDrawer_=function(n,a){return new o.geras.Drawer(n,a)},o.geras.Renderer.prototype.makePathObject=function(n,a){return new o.geras.PathObject(n,a,this.getConstants())},o.geras.Renderer.prototype.makeHighlightConstants_=function(){return new o.geras.HighlightConstantProvider(this.getConstants())},o.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},o.blockRendering.register("geras",o.geras.Renderer),o.thrasos={},o.thrasos.RenderInfo=function(n,a){o.thrasos.RenderInfo.superClass_.constructor.call(this,n,a)},o.utils.object.inherits(o.thrasos.RenderInfo,o.blockRendering.RenderInfo),o.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},o.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var c,n=!1,a=0;c=this.rows[a];a++)c.hasExternalInput&&(n=!0);for(a=0;c=this.rows[a];a++){var d=c.elements;c.elements=[],c.startsWithElemSpacer()&&c.elements.push(new o.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,d[0])));for(var _=0;_<d.length-1;_++){c.elements.push(d[_]);var y=this.getInRowSpacing_(d[_],d[_+1]);c.elements.push(new o.blockRendering.InRowSpacer(this.constants_,y))}c.elements.push(d[d.length-1]),c.endsWithElemSpacer()&&(y=this.getInRowSpacing_(d[d.length-1],null),n&&c.hasDummyInput&&(y+=this.constants_.TAB_WIDTH),c.elements.push(new o.blockRendering.InRowSpacer(this.constants_,y)))}},o.thrasos.RenderInfo.prototype.getInRowSpacing_=function(n,a){if(!n)return a&&o.blockRendering.Types.isField(a)&&a.isEditable?this.constants_.MEDIUM_PADDING:a&&o.blockRendering.Types.isInlineInput(a)?this.constants_.MEDIUM_LARGE_PADDING:a&&o.blockRendering.Types.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!o.blockRendering.Types.isInput(n)&&!a)return o.blockRendering.Types.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:o.blockRendering.Types.isIcon(n)?2*this.constants_.LARGE_PADDING+1:o.blockRendering.Types.isHat(n)?this.constants_.NO_PADDING:o.blockRendering.Types.isPreviousOrNextConnection(n)?this.constants_.LARGE_PADDING:o.blockRendering.Types.isLeftRoundedCorner(n)?this.constants_.MIN_BLOCK_WIDTH:o.blockRendering.Types.isJaggedEdge(n)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(o.blockRendering.Types.isInput(n)&&!a){if(o.blockRendering.Types.isExternalInput(n))return this.constants_.NO_PADDING;if(o.blockRendering.Types.isInlineInput(n))return this.constants_.LARGE_PADDING;if(o.blockRendering.Types.isStatementInput(n))return this.constants_.NO_PADDING}if(!o.blockRendering.Types.isInput(n)&&a&&o.blockRendering.Types.isInput(a)){if(o.blockRendering.Types.isField(n)&&n.isEditable){if(o.blockRendering.Types.isInlineInput(a)||o.blockRendering.Types.isExternalInput(a))return this.constants_.SMALL_PADDING}else{if(o.blockRendering.Types.isInlineInput(a)||o.blockRendering.Types.isExternalInput(a))return this.constants_.MEDIUM_LARGE_PADDING;if(o.blockRendering.Types.isStatementInput(a))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(o.blockRendering.Types.isIcon(n)&&a&&!o.blockRendering.Types.isInput(a))return this.constants_.LARGE_PADDING;if(o.blockRendering.Types.isInlineInput(n)&&a&&o.blockRendering.Types.isField(a))return a.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(o.blockRendering.Types.isLeftSquareCorner(n)&&a){if(o.blockRendering.Types.isHat(a))return this.constants_.NO_PADDING;if(o.blockRendering.Types.isPreviousConnection(a)||o.blockRendering.Types.isNextConnection(a))return a.notchOffset}return o.blockRendering.Types.isLeftRoundedCorner(n)&&a?a.notchOffset-this.constants_.CORNER_RADIUS:o.blockRendering.Types.isField(n)&&a&&o.blockRendering.Types.isField(a)&&n.isEditable==a.isEditable||a&&o.blockRendering.Types.isJaggedEdge(a)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},o.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(n,a){return o.blockRendering.Types.isTopRow(n)&&o.blockRendering.Types.isBottomRow(a)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:o.blockRendering.Types.isTopRow(n)||o.blockRendering.Types.isBottomRow(a)?this.constants_.NO_PADDING:n.hasExternalInput&&a.hasExternalInput?this.constants_.LARGE_PADDING:!n.hasStatement&&a.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:n.hasStatement&&a.hasStatement||n.hasDummyInput||a.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},o.thrasos.RenderInfo.prototype.getElemCenterline_=function(n,a){if(o.blockRendering.Types.isSpacer(a))return n.yPos+a.height/2;if(o.blockRendering.Types.isBottomRow(n))return n=n.yPos+n.height-n.descenderHeight,o.blockRendering.Types.isNextConnection(a)?n+a.height/2:n-a.height/2;if(o.blockRendering.Types.isTopRow(n))return o.blockRendering.Types.isHat(a)?n.capline-a.height/2:n.capline+a.height/2;var c=n.yPos;return o.blockRendering.Types.isField(a)&&n.hasStatement?c+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+a.height/2):c+n.height/2},o.thrasos.RenderInfo.prototype.finalize_=function(){for(var d,n=0,a=0,c=0;d=this.rows[c];c++){d.yPos=a,d.xPos=this.startX,a+=d.height,n=Math.max(n,d.widthWithConnectedBlocks);var _=a-this.topRow.ascenderHeight;d==this.bottomRow&&_<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=_=this.constants_.MIN_BLOCK_HEIGHT-_,a+=_),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(n=Math.max(n,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=a-this.bottomRow.descenderHeight,this.widthWithChildren=n+this.startX,this.height=a,this.startY=this.topRow.capline},o.thrasos.Renderer=function(n){o.thrasos.Renderer.superClass_.constructor.call(this,n)},o.utils.object.inherits(o.thrasos.Renderer,o.blockRendering.Renderer),o.thrasos.Renderer.prototype.makeRenderInfo_=function(n){return new o.thrasos.RenderInfo(this,n)},o.blockRendering.register("thrasos",o.thrasos.Renderer),o.zelos={},o.zelos.ConstantProvider=function(){o.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},o.utils.object.inherits(o.zelos.ConstantProvider,o.blockRendering.ConstantProvider),o.zelos.ConstantProvider.prototype.setFontConstants_=function(n){o.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,n),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},o.zelos.ConstantProvider.prototype.init=function(){o.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},o.zelos.ConstantProvider.prototype.setDynamicProperties_=function(n){o.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,n),this.SELECTED_GLOW_COLOUR=n.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var a=Number(n.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=a&&!isNaN(a)?a:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=n.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(n=Number(n.getComponentStyle("replacementGlowSize")))&&!isNaN(n)?n:this.REPLACEMENT_GLOW_SIZE},o.zelos.ConstantProvider.prototype.dispose=function(){o.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&o.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&o.utils.dom.removeNode(this.replacementGlowFilter_)},o.zelos.ConstantProvider.prototype.makeStartHat=function(){var n=this.START_HAT_HEIGHT,a=this.START_HAT_WIDTH;return{height:n,width:a,path:o.utils.svgPaths.curve("c",[o.utils.svgPaths.point(25,-n),o.utils.svgPaths.point(71,-n),o.utils.svgPaths.point(a,0)])}},o.zelos.ConstantProvider.prototype.makeHexagonal=function(){function n(c,d,_){var y=c/2;return o.utils.svgPaths.lineTo(-(_=_?-1:1)*(y=y>a?a:y),c=(d?-1:1)*c/2)+o.utils.svgPaths.lineTo(_*y,c)}var a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(c){return(c/=2)>a?a:c},height:function(c){return c},connectionOffsetY:function(c){return c/2},connectionOffsetX:function(c){return-c},pathDown:function(c){return n(c,!1,!1)},pathUp:function(c){return n(c,!0,!1)},pathRightDown:function(c){return n(c,!1,!0)},pathRightUp:function(c){return n(c,!1,!0)}}},o.zelos.ConstantProvider.prototype.makeRounded=function(){function n(d,_,y){var R=d>c?d-c:0;return o.utils.svgPaths.arc("a","0 0,1",d=(d>c?c:d)/2,o.utils.svgPaths.point((_?-1:1)*d,(_?-1:1)*d))+o.utils.svgPaths.lineOnAxis("v",(y?1:-1)*R)+o.utils.svgPaths.arc("a","0 0,1",d,o.utils.svgPaths.point((_?1:-1)*d,(_?-1:1)*d))}var a=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,c=2*a;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(d){return(d/=2)>a?a:d},height:function(d){return d},connectionOffsetY:function(d){return d/2},connectionOffsetX:function(d){return-d},pathDown:function(d){return n(d,!1,!1)},pathUp:function(d){return n(d,!0,!1)},pathRightDown:function(d){return n(d,!1,!0)},pathRightUp:function(d){return n(d,!1,!0)}}},o.zelos.ConstantProvider.prototype.makeSquared=function(){function n(c,d,_){return c-=2*a,o.utils.svgPaths.arc("a","0 0,1",a,o.utils.svgPaths.point((d?-1:1)*a,(d?-1:1)*a))+o.utils.svgPaths.lineOnAxis("v",(_?1:-1)*c)+o.utils.svgPaths.arc("a","0 0,1",a,o.utils.svgPaths.point((d?1:-1)*a,(d?-1:1)*a))}var a=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(c){return a},height:function(c){return c},connectionOffsetY:function(c){return c/2},connectionOffsetX:function(c){return-c},pathDown:function(c){return n(c,!1,!1)},pathUp:function(c){return n(c,!0,!1)},pathRightDown:function(c){return n(c,!1,!0)},pathRightUp:function(c){return n(c,!1,!0)}}},o.zelos.ConstantProvider.prototype.shapeFor=function(n){var a=n.getCheck();switch(!a&&n.targetConnection&&(a=n.targetConnection.getCheck()),n.type){case o.connectionTypes.INPUT_VALUE:case o.connectionTypes.OUTPUT_VALUE:if(null!=(n=n.getSourceBlock().getOutputShape()))switch(n){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return a&&-1!=a.indexOf("Boolean")?this.HEXAGONAL:(a&&-1!=a.indexOf("Number")||a&&a.indexOf("String"),this.ROUNDED);case o.connectionTypes.PREVIOUS_STATEMENT:case o.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},o.zelos.ConstantProvider.prototype.makeNotch=function(){function n(H){return o.utils.svgPaths.curve("c",[o.utils.svgPaths.point(H*_/2,0),o.utils.svgPaths.point(H*_*3/4,R/2),o.utils.svgPaths.point(H*_,R)])+o.utils.svgPaths.line([o.utils.svgPaths.point(H*_,y)])+o.utils.svgPaths.curve("c",[o.utils.svgPaths.point(H*_/4,R/2),o.utils.svgPaths.point(H*_/2,R),o.utils.svgPaths.point(H*_,R)])+o.utils.svgPaths.lineOnAxis("h",H*d)+o.utils.svgPaths.curve("c",[o.utils.svgPaths.point(H*_/2,0),o.utils.svgPaths.point(H*_*3/4,-R/2),o.utils.svgPaths.point(H*_,-R)])+o.utils.svgPaths.line([o.utils.svgPaths.point(H*_,-y)])+o.utils.svgPaths.curve("c",[o.utils.svgPaths.point(H*_/4,-R/2),o.utils.svgPaths.point(H*_/2,-R),o.utils.svgPaths.point(H*_,-R)])}var a=this.NOTCH_WIDTH,c=this.NOTCH_HEIGHT,d=a/3,_=d/3,y=c/2,R=y/2,x=n(1),B=n(-1);return{type:this.SHAPES.NOTCH,width:a,height:c,pathLeft:x,pathRight:B}},o.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var n=this.CORNER_RADIUS,a=o.utils.svgPaths.arc("a","0 0,0",n,o.utils.svgPaths.point(-n,n)),c=o.utils.svgPaths.arc("a","0 0,1",n,o.utils.svgPaths.point(-n,n));return{width:n,height:n,pathTop:a,pathBottom:o.utils.svgPaths.arc("a","0 0,0",n,o.utils.svgPaths.point(n,n)),rightWidth:n,rightHeight:n,pathTopRight:c,pathBottomRight:o.utils.svgPaths.arc("a","0 0,1",n,o.utils.svgPaths.point(n,n))}},o.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(n){return o.utils.colour.blend("#000",n,.15)||n},o.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(n){return o.utils.colour.blend("#000",n,.25)||n},o.zelos.ConstantProvider.prototype.createDom=function(n,a,c){o.zelos.ConstantProvider.superClass_.createDom.call(this,n,a,c),n=o.utils.dom.createSvgElement(o.utils.Svg.DEFS,{},n),a=o.utils.dom.createSvgElement(o.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),o.utils.dom.createSvgElement(o.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},a),c=o.utils.dom.createSvgElement(o.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},a),o.utils.dom.createSvgElement(o.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},c),o.utils.dom.createSvgElement(o.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},a),o.utils.dom.createSvgElement(o.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},a),this.selectedGlowFilterId=a.id,this.selectedGlowFilter_=a,n=o.utils.dom.createSvgElement(o.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},n),o.utils.dom.createSvgElement(o.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},n),a=o.utils.dom.createSvgElement(o.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},n),o.utils.dom.createSvgElement(o.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},a),o.utils.dom.createSvgElement(o.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),o.utils.dom.createSvgElement(o.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),o.utils.dom.createSvgElement(o.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},n),this.replacementGlowFilterId=n.id,this.replacementGlowFilter_=n},o.zelos.ConstantProvider.prototype.getCSS_=function(n){return[n+" .blocklyText,",n+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",n+" .blocklyText {","fill: #fff;","}",n+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",n+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",n+" .blocklyNonEditableText>text,",n+" .blocklyEditableText>text,",n+" .blocklyNonEditableText>g>text,",n+" .blocklyEditableText>g>text {","fill: #575E75;","}",n+" .blocklyFlyoutLabelText {","fill: #575E75;","}",n+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",n+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",n+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",n+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",n+" .blocklyDropdownText {","fill: #fff !important;","}",n+".blocklyWidgetDiv .goog-menuitem,",n+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",n+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",n+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",n+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",n+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},o.zelos.TopRow=function(n){o.zelos.TopRow.superClass_.constructor.call(this,n)},o.utils.object.inherits(o.zelos.TopRow,o.blockRendering.TopRow),o.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},o.zelos.TopRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection||(n.hat?"cap"===n.hat:this.constants_.ADD_START_HATS)&&!n.outputConnection&&!n.previousConnection},o.zelos.TopRow.prototype.hasRightSquareCorner=function(n){return!!n.outputConnection&&!n.statementInputCount&&!n.nextConnection},o.zelos.BottomRow=function(n){o.zelos.BottomRow.superClass_.constructor.call(this,n)},o.utils.object.inherits(o.zelos.BottomRow,o.blockRendering.BottomRow),o.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},o.zelos.BottomRow.prototype.hasLeftSquareCorner=function(n){return!!n.outputConnection},o.zelos.BottomRow.prototype.hasRightSquareCorner=function(n){return!!n.outputConnection&&!n.statementInputCount&&!n.nextConnection},o.zelos.RightConnectionShape=function(n){o.zelos.RightConnectionShape.superClass_.constructor.call(this,n),this.type|=o.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},o.utils.object.inherits(o.zelos.RightConnectionShape,o.blockRendering.Measurable),o.zelos.RenderInfo=function(n,a){o.zelos.RenderInfo.superClass_.constructor.call(this,n,a),this.topRow=new o.zelos.TopRow(this.constants_),this.bottomRow=new o.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!a.getInputsInline()||a.isCollapsed(),this.hasStatementInput=0<a.statementInputCount,this.rightSide=this.outputConnection?new o.zelos.RightConnectionShape(this.constants_):null},o.utils.object.inherits(o.zelos.RenderInfo,o.blockRendering.RenderInfo),o.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},o.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},o.zelos.RenderInfo.prototype.shouldStartNewRow_=function(n,a){return!!a&&(n.type==o.inputTypes.STATEMENT||a.type==o.inputTypes.STATEMENT||(n.type==o.inputTypes.VALUE||n.type==o.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},o.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(n){return n.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):o.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,n)},o.zelos.RenderInfo.prototype.getInRowSpacing_=function(n,a){return n&&a||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!n&&a&&o.blockRendering.Types.isStatementInput(a)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:n&&o.blockRendering.Types.isLeftRoundedCorner(n)&&a&&(o.blockRendering.Types.isPreviousConnection(a)||o.blockRendering.Types.isNextConnection(a))?a.notchOffset-this.constants_.CORNER_RADIUS:n&&o.blockRendering.Types.isLeftSquareCorner(n)&&a&&o.blockRendering.Types.isHat(a)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},o.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(n,a){if(o.blockRendering.Types.isTopRow(n)&&o.blockRendering.Types.isBottomRow(a))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var c=o.blockRendering.Types.isInputRow(n)&&n.hasStatement,d=o.blockRendering.Types.isInputRow(a)&&a.hasStatement;return d||c?(n=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),d&&c?Math.max(n,this.constants_.DUMMY_INPUT_MIN_HEIGHT):n):o.blockRendering.Types.isTopRow(n)?n.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):o.blockRendering.Types.isBottomRow(a)?this.outputConnection?!a.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},o.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(n,a){var c=this.width-this.startX;return o.blockRendering.Types.isInputRow(n)&&n.hasStatement||o.blockRendering.Types.isInputRow(a)&&a.hasStatement?Math.max(c,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):c},o.zelos.RenderInfo.prototype.getElemCenterline_=function(n,a){if(n.hasStatement&&!o.blockRendering.Types.isSpacer(a)&&!o.blockRendering.Types.isStatementInput(a))return n.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(o.blockRendering.Types.isInlineInput(a)){var c=a.connectedBlock;if(c&&c.outputConnection&&c.nextConnection)return n.yPos+c.height/2}return o.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,n,a)},o.zelos.RenderInfo.prototype.addInput_=function(n,a){n.type==o.inputTypes.DUMMY&&a.hasDummyInput&&a.align==o.constants.ALIGN.LEFT&&n.align==o.constants.ALIGN.RIGHT&&(a.rightAlignedDummyInput=n),o.zelos.RenderInfo.superClass_.addInput_.call(this,n,a)},o.zelos.RenderInfo.prototype.addAlignmentPadding_=function(n,a){if(n.rightAlignedDummyInput){for(var c,_,d=0;(_=n.elements[d])&&(o.blockRendering.Types.isSpacer(_)&&(c=_),!o.blockRendering.Types.isField(_)||_.parentInput!=n.rightAlignedDummyInput);d++);if(c)return c.width+=a,void(n.width+=a)}o.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,n,a)},o.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var n=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,a=n,c=2;c<this.rows.length-1;c+=2){var d=this.rows[c-1],_=this.rows[c],y=this.rows[c+1];if(d=2==c?!!this.topRow.hasPreviousConnection:!!d.followsStatement,y=c+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!y.precedesStatement,o.blockRendering.Types.isInputRow(_)&&_.hasStatement)_.measure(),a=_.width-_.getLastInput().width+n;else if(d&&(2==c||y)&&o.blockRendering.Types.isInputRow(_)&&!_.hasStatement){y=_.xPos,d=null;for(var x,R=0;x=_.elements[R];R++)o.blockRendering.Types.isSpacer(x)&&(d=x),!(d&&(o.blockRendering.Types.isField(x)||o.blockRendering.Types.isInput(x))&&y<a)||o.blockRendering.Types.isField(x)&&(x.field instanceof o.FieldLabel||x.field instanceof o.FieldImage)||(d.width+=a-y),y+=x.width}}},o.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var c,n=0,a=0;c=this.rows[a];a++)c.yPos=n,n+=c.height;this.height=n,n=this.outputConnection.shape.height(a=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),a=this.outputConnection.shape.width(a),this.outputConnection.height=n,this.outputConnection.width=a,this.outputConnection.startX=a,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(n),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(a),c=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(c=a,this.rightSide.height=n,this.rightSide.width=c,this.rightSide.centerline=n/2,this.rightSide.xPos=this.width+c),this.startX=a,this.width+=a+c,this.widthWithChildren+=a+c}},o.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var c,n=0,a=0;c=this.rows[a];a++)if(o.blockRendering.Types.isInputRow(c)){n=c.elements[c.elements.length-2];var d=this.getNegativeSpacing_(c.elements[1]),_=this.getNegativeSpacing_(n),y=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(n=d+_)<y&&(d=(n=this.width-y)/2,_=n/2),c.elements.unshift(new o.blockRendering.InRowSpacer(this.constants_,-d)),c.elements.push(new o.blockRendering.InRowSpacer(this.constants_,-_))}if(n)for(this.width-=n,this.widthWithChildren-=n,this.rightSide.xPos-=n,a=0;c=this.rows[a];a++)o.blockRendering.Types.isTopOrBottomRow(c)&&(c.elements[1].width-=n,c.elements[1].widthWithConnectedBlocks-=n),c.width-=n,c.widthWithConnectedBlocks-=n}},o.zelos.RenderInfo.prototype.getNegativeSpacing_=function(n){if(!n)return 0;var a=this.outputConnection.width,c=this.outputConnection.shape.type,d=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)return c===d.SHAPES.ROUND?a-(c=this.height/2>(c=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?c:this.height/2)*(1-Math.sin(Math.acos((c-this.constants_.SMALL_PADDING)/c))):0;if(o.blockRendering.Types.isInlineInput(n)){var _=n.connectedBlock;return n=_?_.pathObject.outputShapeType:n.shape.type,_&&_.outputConnection&&(_.statementInputCount||_.nextConnection)||c==d.SHAPES.HEXAGONAL&&c!=n?0:a-this.constants_.SHAPE_IN_SHAPE_PADDING[c][n]}return o.blockRendering.Types.isField(n)?c==d.SHAPES.ROUND&&n.field instanceof o.FieldTextInput?a-2.75*d.GRID_UNIT:a-this.constants_.SHAPE_IN_SHAPE_PADDING[c][0]:o.blockRendering.Types.isIcon(n)?this.constants_.SMALL_PADDING:0},o.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var n=2;n<this.rows.length-1;n+=2){var a=this.rows[n-1],c=this.rows[n],d=this.rows[n+1],_=2==n,y=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!d.precedesStatement;if(_?this.topRow.hasPreviousConnection:a.followsStatement){var R=3==c.elements.length&&(c.elements[1].field instanceof o.FieldLabel||c.elements[1].field instanceof o.FieldImage);if(!_&&R)a.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.SMALL_PADDING,c.height-=this.constants_.MEDIUM_PADDING;else if(_||y){if(y){for(_=!1,y=0;R=c.elements[y];y++)if(o.blockRendering.Types.isInlineInput(R)&&R.connectedBlock&&!R.connectedBlock.isShadow()&&40<=R.connectedBlock.getHeightWidth().height){_=!0;break}_&&(a.height-=this.constants_.SMALL_PADDING,d.height-=this.constants_.SMALL_PADDING)}}else a.height+=this.constants_.SMALL_PADDING}}},o.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),o.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},o.zelos.Drawer=function(n,a){o.zelos.Drawer.superClass_.constructor.call(this,n,a)},o.utils.object.inherits(o.zelos.Drawer,o.blockRendering.Drawer),o.zelos.Drawer.prototype.draw=function(){var n=this.block_.pathObject;n.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),n.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&n.flipRTL(),o.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(n.outputShapeType=this.info_.outputConnection.shape.type),n.endDrawing()},o.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):o.zelos.Drawer.superClass_.drawOutline_.call(this)},o.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():o.zelos.Drawer.superClass_.drawLeft_.call(this)},o.zelos.Drawer.prototype.drawRightSideRow_=function(n){if(!(0>=n.height))if(n.precedesStatement||n.followsStatement){var a=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(n.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(a=n.height-(n.precedesStatement?a:0))?o.utils.svgPaths.lineOnAxis("V",n.yPos+a):"")+(n.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=o.utils.svgPaths.lineOnAxis("V",n.yPos+n.height)},o.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},o.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},o.zelos.Drawer.prototype.drawFlatTop_=function(){var n=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=o.utils.svgPaths.moveBy(n.xPos,this.info_.startY),this.outlinePath_+=o.utils.svgPaths.lineOnAxis("h",n.width)},o.zelos.Drawer.prototype.drawFlatBottom_=function(){var n=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=o.utils.svgPaths.lineOnAxis("V",n.baseline),this.outlinePath_+=o.utils.svgPaths.lineOnAxis("h",-n.width)},o.zelos.Drawer.prototype.drawInlineInput_=function(n){this.positionInlineInputConnection_(n);var a=n.input.name;if(!n.connectedBlock&&!this.info_.isInsertionMarker){var c=n.width-2*n.connectionWidth;n=o.utils.svgPaths.moveTo(n.xPos+n.connectionWidth,n.centerline-n.height/2)+o.utils.svgPaths.lineOnAxis("h",c)+n.shape.pathRightDown(n.height)+o.utils.svgPaths.lineOnAxis("h",-c)+n.shape.pathUp(n.height)+"z",this.block_.pathObject.setOutlinePath(a,n)}},o.zelos.Drawer.prototype.drawStatementInput_=function(n){var a=n.getLastInput(),c=a.xPos+a.notchOffset+a.shape.width,d=a.shape.pathRight+o.utils.svgPaths.lineOnAxis("h",-(a.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,_=n.height-2*this.constants_.INSIDE_CORNERS.height;a=this.constants_.INSIDE_CORNERS.pathBottom+o.utils.svgPaths.lineOnAxis("h",a.notchOffset-this.constants_.INSIDE_CORNERS.width)+(a.connectedBottomNextConnection?"":a.shape.pathLeft),this.outlinePath_+=o.utils.svgPaths.lineOnAxis("H",c)+d+o.utils.svgPaths.lineOnAxis("v",_)+a+o.utils.svgPaths.lineOnAxis("H",n.xPos+n.width),this.positionStatementInputConnection_(n)},o.zelos.MarkerSvg=function(n,a,c){o.zelos.MarkerSvg.superClass_.constructor.call(this,n,a,c)},o.utils.object.inherits(o.zelos.MarkerSvg,o.blockRendering.MarkerSvg),o.zelos.MarkerSvg.prototype.showWithInputOutput_=function(n){var a=n.getSourceBlock();n=n.getLocation().getOffsetInBlock(),this.positionCircle_(n.x,n.y),this.setParent_(a),this.showCurrent_()},o.zelos.MarkerSvg.prototype.showWithOutput_=function(n){this.showWithInputOutput_(n)},o.zelos.MarkerSvg.prototype.showWithInput_=function(n){this.showWithInputOutput_(n)},o.zelos.MarkerSvg.prototype.showWithBlock_=function(n){var a=(n=n.getLocation()).getHeightWidth();this.positionRect_(0,0,a.width,a.height),this.setParent_(n),this.showCurrent_()},o.zelos.MarkerSvg.prototype.positionCircle_=function(n,a){this.markerCircle_.setAttribute("cx",n),this.markerCircle_.setAttribute("cy",a),this.currentMarkerSvg=this.markerCircle_},o.zelos.MarkerSvg.prototype.hide=function(){o.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},o.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(o.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=o.utils.dom.createSvgElement(o.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var n=this.getBlinkProperties_();o.utils.dom.createSvgElement(o.utils.Svg.ANIMATE,n,this.markerCircle_)}return this.markerSvg_},o.zelos.MarkerSvg.prototype.applyColour_=function(n){o.zelos.MarkerSvg.superClass_.applyColour_.call(this,n),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},o.zelos.PathObject=function(n,a,c){o.zelos.PathObject.superClass_.constructor.call(this,n,a,c),this.constants=c,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},o.utils.object.inherits(o.zelos.PathObject,o.blockRendering.PathObject),o.zelos.PathObject.prototype.setPath=function(n){o.zelos.PathObject.superClass_.setPath.call(this,n),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",n)},o.zelos.PathObject.prototype.applyColour=function(n){for(var a in o.zelos.PathObject.superClass_.applyColour.call(this,n),n.isShadow()&&n.getParent()&&this.svgPath.setAttribute("stroke",n.getParent().style.colourTertiary),this.outlines_)this.outlines_[a].setAttribute("fill",this.style.colourTertiary)},o.zelos.PathObject.prototype.flipRTL=function(){for(var n in o.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[n].setAttribute("transform","scale(-1 1)")},o.zelos.PathObject.prototype.updateSelected=function(n){this.setClass_("blocklySelected",n),n?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},o.zelos.PathObject.prototype.updateReplacementFade=function(n){this.setClass_("blocklyReplaceable",n),n?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},o.zelos.PathObject.prototype.updateShapeForInputHighlight=function(n,a){n=n.getParentInput().name,(n=this.getOutlinePath_(n))&&(a?n.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):n.removeAttribute("filter"))},o.zelos.PathObject.prototype.beginDrawing=function(){for(var n in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[n]=1},o.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var n in this.remainingOutlines_)this.removeOutlinePath_(n);this.remainingOutlines_=null},o.zelos.PathObject.prototype.setOutlinePath=function(n,a){(n=this.getOutlinePath_(n)).setAttribute("d",a),n.setAttribute("fill",this.style.colourTertiary)},o.zelos.PathObject.prototype.getOutlinePath_=function(n){return this.outlines_[n]||(this.outlines_[n]=o.utils.dom.createSvgElement(o.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[n],this.outlines_[n]},o.zelos.PathObject.prototype.removeOutlinePath_=function(n){this.outlines_[n].parentNode.removeChild(this.outlines_[n]),delete this.outlines_[n]},o.zelos.Renderer=function(n){o.zelos.Renderer.superClass_.constructor.call(this,n)},o.utils.object.inherits(o.zelos.Renderer,o.blockRendering.Renderer),o.zelos.Renderer.prototype.makeConstants_=function(){return new o.zelos.ConstantProvider},o.zelos.Renderer.prototype.makeRenderInfo_=function(n){return new o.zelos.RenderInfo(this,n)},o.zelos.Renderer.prototype.makeDrawer_=function(n,a){return new o.zelos.Drawer(n,a)},o.zelos.Renderer.prototype.makeMarkerDrawer=function(n,a){return new o.zelos.MarkerSvg(n,this.getConstants(),a)},o.zelos.Renderer.prototype.makePathObject=function(n,a){return new o.zelos.PathObject(n,a,this.getConstants())},o.zelos.Renderer.prototype.shouldHighlightConnection=function(n){return n.type!=o.connectionTypes.INPUT_VALUE&&n.type!==o.connectionTypes.OUTPUT_VALUE},o.zelos.Renderer.prototype.getConnectionPreviewMethod=function(n,a,c){return a.type==o.connectionTypes.OUTPUT_VALUE?n.isConnected()?o.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:o.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:o.zelos.Renderer.superClass_.getConnectionPreviewMethod(n,a,c)},o.blockRendering.register("zelos",o.zelos.Renderer),o.Themes.Dark=o.Theme.defineTheme("dark",{base:o.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),o.Themes.Deuteranopia={},o.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},o.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},o.Themes.Deuteranopia=new o.Theme("deuteranopia",o.Themes.Deuteranopia.defaultBlockStyles,o.Themes.Deuteranopia.categoryStyles),o.Themes.HighContrast={},o.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},o.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},o.Themes.HighContrast=new o.Theme("highcontrast",o.Themes.HighContrast.defaultBlockStyles,o.Themes.HighContrast.categoryStyles),o.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),o.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),o.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),o.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),o.Themes.Tritanopia={},o.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},o.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},o.Themes.Tritanopia=new o.Theme("tritanopia",o.Themes.Tritanopia.defaultBlockStyles,o.Themes.Tritanopia.categoryStyles),o.requires={},o}.apply(A,[]))&&(C.exports=w)},20813:function(C,A,g){var w,o;w=[g(73517)],void 0!==(o=function(n){"use strict";return n.Blocks={},n.Blocks}.apply(A,w))&&(C.exports=o)},73517:function(C,A,g){var w,o;w=[g(96761)],void 0!==(o=function(n){"use strict";return n.Blocks.colour={},n.Constants={},n.Constants.Colour={},n.Constants.Colour.HUE=20,n.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),n.Constants.Lists={},n.Constants.Lists.HUE=260,n.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),n.Blocks.lists_create_with={init:function(){this.setHelpUrl(n.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new n.Mutator(["lists_create_with_item"])),this.setTooltip(n.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var a=n.utils.xml.createElement("mutation");return a.setAttribute("items",this.itemCount_),a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),10),this.updateShape_()},decompose:function(a){var c=a.newBlock("lists_create_with_container");c.initSvg();for(var d=c.getInput("STACK").connection,_=0;_<this.itemCount_;_++){var y=a.newBlock("lists_create_with_item");y.initSvg(),d.connect(y.previousConnection),d=y.nextConnection}return c},compose:function(a){var c=a.getInputTargetBlock("STACK");for(a=[];c&&!c.isInsertionMarker();)a.push(c.valueConnection_),c=c.nextConnection&&c.nextConnection.targetBlock();for(c=0;c<this.itemCount_;c++){var d=this.getInput("ADD"+c).connection.targetConnection;d&&-1==a.indexOf(d)&&d.disconnect()}for(this.itemCount_=a.length,this.updateShape_(),c=0;c<this.itemCount_;c++)n.Mutator.reconnect(a[c],this,"ADD"+c)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var c=0;a;){var d=this.getInput("ADD"+c);a.valueConnection_=d&&d.connection.targetConnection,c++,a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(n.Msg.LISTS_CREATE_EMPTY_TITLE);for(var a=0;a<this.itemCount_;a++)if(!this.getInput("ADD"+a)){var c=this.appendValueInput("ADD"+a).setAlign(n.ALIGN_RIGHT);0==a&&c.appendField(n.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++}},n.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},n.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(n.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},n.Blocks.lists_indexOf={init:function(){var a=[[n.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[n.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(n.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new n.FieldDropdown(a),"END"),this.setInputsInline(!0);var c=this;this.setTooltip(function(){return n.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",c.workspace.options.oneBasedIndex?"0":"-1")})}},n.Blocks.lists_getIndex={init:function(){var a=[[n.Msg.LISTS_GET_INDEX_GET,"GET"],[n.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[n.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[n.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[n.Msg.LISTS_GET_INDEX_LAST,"LAST"],[n.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(n.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),a=new n.FieldDropdown(a,function(d){d="REMOVE"==d,this.getSourceBlock().updateStatement_(d)}),this.appendValueInput("VALUE").setCheck("Array").appendField(n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(a,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),n.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(n.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var c=this;this.setTooltip(function(){var d=c.getFieldValue("MODE"),_=c.getFieldValue("WHERE"),y="";switch(d+" "+_){case"GET FROM_START":case"GET FROM_END":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":y=n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==_||"FROM_END"==_)&&(y+="  "+("FROM_START"==_?n.Msg.LISTS_INDEX_FROM_START_TOOLTIP:n.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",c.workspace.options.oneBasedIndex?"#1":"#0")),y})},mutationToDom:function(){var a=n.utils.xml.createElement("mutation");a.setAttribute("statement",!this.outputConnection);var c=this.getInput("AT").type==n.INPUT_VALUE;return a.setAttribute("at",c),a},domToMutation:function(a){var c="true"==a.getAttribute("statement");this.updateStatement_(c),a="false"!=a.getAttribute("at"),this.updateAt_(a)},updateStatement_:function(a){a!=!this.outputConnection&&(this.unplug(!0,!0),a?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(a){this.removeInput("AT"),this.removeInput("ORDINAL",!0),a?(this.appendValueInput("AT").setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var c=new n.FieldDropdown(this.WHERE_OPTIONS,function(d){var _="FROM_START"==d||"FROM_END"==d;if(_!=a){var y=this.getSourceBlock();return y.updateAt_(_),y.setFieldValue(d,"WHERE"),null}});this.getInput("AT").appendField(c,"WHERE"),n.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},n.Blocks.lists_setIndex={init:function(){var a=[[n.Msg.LISTS_SET_INDEX_SET,"SET"],[n.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[n.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[n.Msg.LISTS_GET_INDEX_LAST,"LAST"],[n.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(n.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new n.FieldDropdown(a),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(n.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(n.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var c=this;this.setTooltip(function(){var d=c.getFieldValue("MODE"),_=c.getFieldValue("WHERE"),y="";switch(d+" "+_){case"SET FROM_START":case"SET FROM_END":y=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":y=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":y=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":y=n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":y=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":y=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":y=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":y=n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==_||"FROM_END"==_)&&(y+="  "+n.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",c.workspace.options.oneBasedIndex?"#1":"#0")),y})},mutationToDom:function(){var a=n.utils.xml.createElement("mutation"),c=this.getInput("AT").type==n.INPUT_VALUE;return a.setAttribute("at",c),a},domToMutation:function(a){a="false"!=a.getAttribute("at"),this.updateAt_(a)},updateAt_:function(a){this.removeInput("AT"),this.removeInput("ORDINAL",!0),a?(this.appendValueInput("AT").setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var c=new n.FieldDropdown(this.WHERE_OPTIONS,function(d){var _="FROM_START"==d||"FROM_END"==d;if(_!=a){var y=this.getSourceBlock();return y.updateAt_(_),y.setFieldValue(d,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(c,"WHERE")}},n.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[n.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[n.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[n.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[n.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(n.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),n.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(n.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(n.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var a=n.utils.xml.createElement("mutation"),c=this.getInput("AT1").type==n.INPUT_VALUE;return a.setAttribute("at1",c),c=this.getInput("AT2").type==n.INPUT_VALUE,a.setAttribute("at2",c),a},domToMutation:function(a){var c="true"==a.getAttribute("at1");a="true"==a.getAttribute("at2"),this.updateAt_(1,c),this.updateAt_(2,a)},updateAt_:function(a,c){this.removeInput("AT"+a),this.removeInput("ORDINAL"+a,!0),c?(this.appendValueInput("AT"+a).setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+a).appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+a);var d=new n.FieldDropdown(this["WHERE_OPTIONS_"+a],function(_){var y="FROM_START"==_||"FROM_END"==_;if(y!=c){var R=this.getSourceBlock();return R.updateAt_(a,y),R.setFieldValue(_,"WHERE"+a),null}});this.getInput("AT"+a).appendField(d,"WHERE"+a),1==a&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),n.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},n.Blocks.lists_sort={init:function(){this.jsonInit({message0:n.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[n.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[n.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[n.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[n.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[n.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:n.Msg.LISTS_SORT_TOOLTIP,helpUrl:n.Msg.LISTS_SORT_HELPURL})}},n.Blocks.lists_split={init:function(){var a=this,c=new n.FieldDropdown([[n.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[n.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(d){a.updateType_(d)});this.setHelpUrl(n.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(c,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(n.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var d=a.getFieldValue("MODE");if("SPLIT"==d)return n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==d)return n.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+d)})},updateType_:function(a){if(this.getFieldValue("MODE")!=a){var c=this.getInput("INPUT").connection;c.setShadowDom(null);var d=c.targetBlock();d&&(c.disconnect(),d.isShadow()?d.dispose():this.bumpNeighbours())}"SPLIT"==a?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var a=n.utils.xml.createElement("mutation");return a.setAttribute("mode",this.getFieldValue("MODE")),a},domToMutation:function(a){this.updateType_(a.getAttribute("mode"))}},n.Blocks.logic={},n.Constants.Logic={},n.Constants.Logic.HUE=210,n.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),n.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),n.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},n.Extensions.register("logic_op_tooltip",n.Extensions.buildTooltipForDropdown("OP",n.Constants.Logic.TOOLTIPS_BY_OP)),n.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var a=n.utils.xml.createElement("mutation");return this.elseifCount_&&a.setAttribute("elseif",this.elseifCount_),this.elseCount_&&a.setAttribute("else",1),a},domToMutation:function(a){this.elseifCount_=parseInt(a.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(a.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(a){var c=a.newBlock("controls_if_if");c.initSvg();for(var d=c.nextConnection,_=1;_<=this.elseifCount_;_++){var y=a.newBlock("controls_if_elseif");y.initSvg(),d.connect(y.previousConnection),d=y.nextConnection}return this.elseCount_&&((a=a.newBlock("controls_if_else")).initSvg(),d.connect(a.previousConnection)),c},compose:function(a){a=a.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var c=[null],d=[null],_=null;a&&!a.isInsertionMarker();){switch(a.type){case"controls_if_elseif":this.elseifCount_++,c.push(a.valueConnection_),d.push(a.statementConnection_);break;case"controls_if_else":this.elseCount_++,_=a.statementConnection_;break;default:throw TypeError("Unknown block type: "+a.type)}a=a.nextConnection&&a.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(c,d,_)},saveConnections:function(a){a=a.nextConnection.targetBlock();for(var c=1;a;){switch(a.type){case"controls_if_elseif":var d=this.getInput("IF"+c),_=this.getInput("DO"+c);a.valueConnection_=d&&d.connection.targetConnection,a.statementConnection_=_&&_.connection.targetConnection,c++;break;case"controls_if_else":_=this.getInput("ELSE"),a.statementConnection_=_&&_.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+a.type)}a=a.nextConnection&&a.nextConnection.targetBlock()}},rebuildShape_:function(){var a=[null],c=[null],d=null;this.getInput("ELSE")&&(d=this.getInput("ELSE").connection.targetConnection);for(var _=1;this.getInput("IF"+_);){var y=this.getInput("IF"+_),R=this.getInput("DO"+_);a.push(y.connection.targetConnection),c.push(R.connection.targetConnection),_++}this.updateShape_(),this.reconnectChildBlocks_(a,c,d)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var a=1;this.getInput("IF"+a);)this.removeInput("IF"+a),this.removeInput("DO"+a),a++;for(a=1;a<=this.elseifCount_;a++)this.appendValueInput("IF"+a).setCheck("Boolean").appendField(n.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+a).appendField(n.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(n.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(a,c,d){for(var _=1;_<=this.elseifCount_;_++)n.Mutator.reconnect(a[_],this,"IF"+_),n.Mutator.reconnect(c[_],this,"DO"+_);n.Mutator.reconnect(d,this,"ELSE")}},n.Extensions.registerMutator("controls_if_mutator",n.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),n.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?n.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?n.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?n.Msg.CONTROLS_IF_TOOLTIP_4:"":n.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},n.Extensions.register("controls_if_tooltip",n.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),n.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(a){this.prevBlocks_||(this.prevBlocks_=[null,null]);var c=this.getInputTargetBlock("A"),d=this.getInputTargetBlock("B");c&&d&&!this.workspace.connectionChecker.doTypeChecks(c.outputConnection,d.outputConnection)&&(n.Events.setGroup(a.group),(a=this.prevBlocks_[0])!==c&&(c.unplug(),!a||a.isDisposed()||a.isShadow()||this.getInput("A").connection.connect(a.outputConnection)),(c=this.prevBlocks_[1])!==d&&(d.unplug(),!c||c.isDisposed()||c.isShadow()||this.getInput("B").connection.connect(c.outputConnection)),this.bumpNeighbours(),n.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},n.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(n.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},n.Extensions.register("logic_compare",n.Constants.Logic.LOGIC_COMPARE_EXTENSION),n.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(a){var c=this.getInputTargetBlock("THEN"),d=this.getInputTargetBlock("ELSE"),_=this.outputConnection.targetConnection;if((c||d)&&_)for(var y=0;2>y;y++){var R=1==y?c:d;R&&!R.workspace.connectionChecker.doTypeChecks(R.outputConnection,_)&&(n.Events.setGroup(a.group),_===this.prevParentConnection_?(this.unplug(),_.getSourceBlock().bumpNeighbours()):(R.unplug(),R.bumpNeighbours()),n.Events.setGroup(!1))}this.prevParentConnection_=_}},n.Extensions.registerMixin("logic_ternary",n.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),n.Blocks.loops={},n.Constants.Loops={},n.Constants.Loops.HUE=120,n.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),n.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},n.Extensions.register("controls_whileUntil_tooltip",n.Extensions.buildTooltipForDropdown("MODE",n.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),n.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},n.Extensions.register("controls_flow_tooltip",n.Extensions.buildTooltipForDropdown("FLOW",n.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),n.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(a){if(!this.isInFlyout){var c=this.getField("VAR").getVariable(),d=c.name;if(!this.isCollapsed()&&null!=d){var _={enabled:!0};_.text=n.Msg.VARIABLES_SET_CREATE_GET.replace("%1",d),c=n.Variables.generateVariableFieldDom(c),(d=n.utils.xml.createElement("block")).setAttribute("type","variables_get"),d.appendChild(c),_.callback=n.ContextMenu.callbackFactory(this,d),a.push(_)}}}},n.Extensions.registerMixin("contextMenu_newGetVariableBlock",n.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),n.Extensions.register("controls_for_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),n.Extensions.register("controls_forEach_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(a){do{if(-1!=n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(a.type))return a;a=a.getSurroundParent()}while(a);return null},onchange:function(a){if(this.workspace.isDragging&&!this.workspace.isDragging()&&a.type==n.Events.BLOCK_MOVE){var c=n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(c?null:n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var d=n.Events.getGroup();n.Events.setGroup(a.group),this.setEnabled(c),n.Events.setGroup(d)}}}},n.Extensions.registerMixin("controls_flow_in_loop_check",n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),n.Blocks.math={},n.Constants.Math={},n.Constants.Math.HUE=230,n.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),n.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},n.Extensions.register("math_op_tooltip",n.Extensions.buildTooltipForDropdown("OP",n.Constants.Math.TOOLTIPS_BY_OP)),n.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var a=n.utils.xml.createElement("mutation"),c="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return a.setAttribute("divisor_input",c),a},domToMutation:function(a){a="true"==a.getAttribute("divisor_input"),this.updateShape_(a)},updateShape_:function(a){var c=this.getInput("DIVISOR");a?c||this.appendValueInput("DIVISOR").setCheck("Number"):c&&this.removeInput("DIVISOR")}},n.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(a){a="DIVISIBLE_BY"==a,this.getSourceBlock().updateShape_(a)})},n.Extensions.registerMutator("math_is_divisibleby_mutator",n.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,n.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),n.Extensions.register("math_change_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),n.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(a){this.outputConnection.setCheck("MODE"==a?"Array":"Number")},mutationToDom:function(){var a=n.utils.xml.createElement("mutation");return a.setAttribute("op",this.getFieldValue("OP")),a},domToMutation:function(a){this.updateType_(a.getAttribute("op"))}},n.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(a){this.updateType_(a)}.bind(this))},n.Extensions.registerMutator("math_modes_of_list_mutator",n.Constants.Math.LIST_MODES_MUTATOR_MIXIN,n.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),n.Blocks.procedures={},n.Blocks.procedures_defnoreturn={init:function(){var a=n.Procedures.findLegalName("",this);(a=new n.FieldTextInput(a,n.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(n.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(a,"NAME").appendField("","PARAMS"),this.setMutator(new n.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&n.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(n.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(n.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(a){this.hasStatements_!==a&&(a?(this.appendStatementInput("STACK").appendField(n.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=a)},updateParams_:function(){var a="";this.arguments_.length&&(a=n.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),n.Events.disable();try{this.setFieldValue(a,"PARAMS")}finally{n.Events.enable()}},mutationToDom:function(a){var c=n.utils.xml.createElement("mutation");a&&c.setAttribute("name",this.getFieldValue("NAME"));for(var d=0;d<this.argumentVarModels_.length;d++){var _=n.utils.xml.createElement("arg"),y=this.argumentVarModels_[d];_.setAttribute("name",y.name),_.setAttribute("varid",y.getId()),a&&this.paramIds_&&_.setAttribute("paramId",this.paramIds_[d]),c.appendChild(_)}return this.hasStatements_||c.setAttribute("statements","false"),c},domToMutation:function(a){this.arguments_=[],this.argumentVarModels_=[];for(var d,c=0;d=a.childNodes[c];c++)if("arg"==d.nodeName.toLowerCase()){var _=d.getAttribute("name");d=d.getAttribute("varid")||d.getAttribute("varId"),this.arguments_.push(_),null!=(d=n.Variables.getOrCreateVariablePackage(this.workspace,d,_,""))?this.argumentVarModels_.push(d):console.log("Failed to create a variable with name "+_+", ignoring.")}this.updateParams_(),n.Procedures.mutateCallers(this),this.setStatements_("false"!==a.getAttribute("statements"))},decompose:function(a){var c=n.utils.xml.createElement("block");c.setAttribute("type","procedures_mutatorcontainer");var d=n.utils.xml.createElement("statement");d.setAttribute("name","STACK"),c.appendChild(d);for(var _=0;_<this.arguments_.length;_++){var y=n.utils.xml.createElement("block");y.setAttribute("type","procedures_mutatorarg");var R=n.utils.xml.createElement("field");R.setAttribute("name","NAME");var x=n.utils.xml.createTextNode(this.arguments_[_]);R.appendChild(x),y.appendChild(R),R=n.utils.xml.createElement("next"),y.appendChild(R),d.appendChild(y),d=R}return a=n.Xml.domToBlock(c,a),"procedures_defreturn"==this.type?a.setFieldValue(this.hasStatements_,"STATEMENTS"):a.removeInput("STATEMENT_INPUT"),n.Procedures.mutateCallers(this),a},compose:function(a){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var c=a.getInputTargetBlock("STACK");c&&!c.isInsertionMarker();){var d=c.getFieldValue("NAME");this.arguments_.push(d),d=this.workspace.getVariable(d,""),this.argumentVarModels_.push(d),this.paramIds_.push(c.id),c=c.nextConnection&&c.nextConnection.targetBlock()}this.updateParams_(),n.Procedures.mutateCallers(this),null!==(a=a.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(a="TRUE"==a)&&(a?(this.setStatements_(!0),n.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(a=this.getInput("STACK").connection,(this.statementConnection_=a.targetConnection)&&((a=a.targetBlock()).unplug(),a.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(a,c){var d=this.workspace.getVariableById(a);if(""==d.type){d=d.name,c=this.workspace.getVariableById(c);for(var _=!1,y=0;y<this.argumentVarModels_.length;y++)this.argumentVarModels_[y].getId()==a&&(this.arguments_[y]=c.name,this.argumentVarModels_[y]=c,_=!0);_&&(this.displayRenamedVar_(d,c.name),n.Procedures.mutateCallers(this))}},updateVarName:function(a){for(var c=a.name,d=!1,_=0;_<this.argumentVarModels_.length;_++)if(this.argumentVarModels_[_].getId()==a.getId()){var y=this.arguments_[_];this.arguments_[_]=c,d=!0}d&&(this.displayRenamedVar_(y,c),n.Procedures.mutateCallers(this))},displayRenamedVar_:function(a,c){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var y,d=this.mutator.workspace_.getAllBlocks(!1),_=0;y=d[_];_++)"procedures_mutatorarg"==y.type&&n.Names.equals(a,y.getFieldValue("NAME"))&&y.setFieldValue(c,"NAME")},customContextMenu:function(a){if(!this.isInFlyout){var c={enabled:!0},d=this.getFieldValue("NAME");c.text=n.Msg.PROCEDURES_CREATE_DO.replace("%1",d);var _=n.utils.xml.createElement("mutation");for(_.setAttribute("name",d),d=0;d<this.arguments_.length;d++){var y=n.utils.xml.createElement("arg");y.setAttribute("name",this.arguments_[d]),_.appendChild(y)}if((d=n.utils.xml.createElement("block")).setAttribute("type",this.callType_),d.appendChild(_),c.callback=n.ContextMenu.callbackFactory(this,d),a.push(c),!this.isCollapsed())for(d=0;d<this.argumentVarModels_.length;d++)(c={enabled:!0}).text=n.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(_=this.argumentVarModels_[d]).name),_=n.Variables.generateVariableFieldDom(_),(y=n.utils.xml.createElement("block")).setAttribute("type","variables_get"),y.appendChild(_),c.callback=n.ContextMenu.callbackFactory(this,y),a.push(c)}},callType_:"procedures_callnoreturn"},n.Blocks.procedures_defreturn={init:function(){var a=n.Procedures.findLegalName("",this);(a=new n.FieldTextInput(a,n.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(n.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(a,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(n.ALIGN_RIGHT).appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new n.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&n.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(n.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(n.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:n.Blocks.procedures_defnoreturn.setStatements_,updateParams_:n.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:n.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:n.Blocks.procedures_defnoreturn.domToMutation,decompose:n.Blocks.procedures_defnoreturn.decompose,compose:n.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:n.Blocks.procedures_defnoreturn.getVars,getVarModels:n.Blocks.procedures_defnoreturn.getVarModels,renameVarById:n.Blocks.procedures_defnoreturn.renameVarById,updateVarName:n.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:n.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:n.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},n.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(n.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new n.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},n.Blocks.procedures_mutatorarg={init:function(){var a=new n.FieldTextInput(n.Procedures.DEFAULT_ARG,this.validator_);a.oldShowEditorFn_=a.showEditor_,a.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(n.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(a,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,a.onFinishEditing_=this.deleteIntermediateVars_,a.createdVariables_=[],a.onFinishEditing_("x")},validator_:function(a){var c=this.getSourceBlock(),d=n.Mutator.findParentWs(c.workspace);if(!(a=a.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var _=(c.workspace.targetWorkspace||c.workspace).getAllBlocks(!1),y=a.toLowerCase(),R=0;R<_.length;R++)if(_[R].id!=this.getSourceBlock().id){var x=_[R].getFieldValue("NAME");if(x&&x.toLowerCase()==y)return null}return c.isInFlyout||((c=d.getVariable(a,""))&&c.name!=a&&d.renameVariableById(c.getId(),a),c||(c=d.createVariable(a,""))&&this.createdVariables_&&this.createdVariables_.push(c)),a},deleteIntermediateVars_:function(a){var c=n.Mutator.findParentWs(this.getSourceBlock().workspace);if(c)for(var d=0;d<this.createdVariables_.length;d++){var _=this.createdVariables_[d];_.name!=a&&c.deleteVariableById(_.getId())}}},n.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(n.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(a,c){n.Names.equals(a,this.getProcedureCall())&&(this.setFieldValue(c,"NAME"),this.setTooltip((this.outputConnection?n.Msg.PROCEDURES_CALLRETURN_TOOLTIP:n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",c)))},setProcedureParameters_:function(a,c){var d=n.Procedures.getDefinition(this.getProcedureCall(),this.workspace),_=d&&d.mutator&&d.mutator.isVisible();if(_||(this.quarkConnections_={},this.quarkIds_=null),c)if(a.join("\n")==this.arguments_.join("\n"))this.quarkIds_=c;else{if(c.length!=a.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),d=this.rendered,this.rendered=!1;for(var y=0;y<this.arguments_.length;y++){var R=this.getInput("ARG"+y);R&&(this.quarkConnections_[this.quarkIds_[y]]=R=R.connection.targetConnection,_&&R&&-1==c.indexOf(this.quarkIds_[y])&&(R.disconnect(),R.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(a),this.argumentVarModels_=[],y=0;y<this.arguments_.length;y++)a=n.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[y],""),this.argumentVarModels_.push(a);if(this.updateShape_(),this.quarkIds_=c)for(y=0;y<this.arguments_.length;y++)(c=this.quarkIds_[y])in this.quarkConnections_&&(n.Mutator.reconnect(R=this.quarkConnections_[c],this,"ARG"+y)||delete this.quarkConnections_[c]);(this.rendered=d)&&this.render()}},updateShape_:function(){for(var a=0;a<this.arguments_.length;a++){var c=this.getField("ARGNAME"+a);if(c){n.Events.disable();try{c.setValue(this.arguments_[a])}finally{n.Events.enable()}}else c=new n.FieldLabel(this.arguments_[a]),this.appendValueInput("ARG"+a).setAlign(n.ALIGN_RIGHT).appendField(c,"ARGNAME"+a).init()}for(;this.getInput("ARG"+a);)this.removeInput("ARG"+a),a++;(a=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(a.appendField(n.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),a.init()):this.getField("WITH")&&a.removeField("WITH"))},mutationToDom:function(){var a=n.utils.xml.createElement("mutation");a.setAttribute("name",this.getProcedureCall());for(var c=0;c<this.arguments_.length;c++){var d=n.utils.xml.createElement("arg");d.setAttribute("name",this.arguments_[c]),a.appendChild(d)}return a},domToMutation:function(a){var c=a.getAttribute("name");this.renameProcedure(this.getProcedureCall(),c),c=[];for(var y,d=[],_=0;y=a.childNodes[_];_++)"arg"==y.nodeName.toLowerCase()&&(c.push(y.getAttribute("name")),d.push(y.getAttribute("paramId")));this.setProcedureParameters_(c,d)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(a){if(this.workspace&&!this.workspace.isFlyout&&a.recordUndo)if(a.type==n.Events.BLOCK_CREATE&&-1!=a.ids.indexOf(this.id)){var c=this.getProcedureCall();if(!(c=n.Procedures.getDefinition(c,this.workspace))||c.type==this.defType_&&JSON.stringify(c.getVars())==JSON.stringify(this.arguments_)||(c=null),!c){n.Events.setGroup(a.group),a=n.utils.xml.createElement("xml"),(c=n.utils.xml.createElement("block")).setAttribute("type",this.defType_);var d=this.getRelativeToSurfaceXY(),_=d.y+2*n.SNAP_RADIUS;c.setAttribute("x",d.x+n.SNAP_RADIUS*(this.RTL?-1:1)),c.setAttribute("y",_),d=this.mutationToDom(),c.appendChild(d),(d=n.utils.xml.createElement("field")).setAttribute("name","NAME"),(_=this.getProcedureCall())||(_=n.Procedures.findLegalName("",this),this.renameProcedure("",_)),d.appendChild(n.utils.xml.createTextNode(_)),c.appendChild(d),a.appendChild(c),n.Xml.domToWorkspace(a,this.workspace),n.Events.setGroup(!1)}}else a.type==n.Events.BLOCK_DELETE?(c=this.getProcedureCall(),(c=n.Procedures.getDefinition(c,this.workspace))||(n.Events.setGroup(a.group),this.dispose(!0),n.Events.setGroup(!1))):a.type==n.Events.CHANGE&&"disabled"==a.element&&(c=this.getProcedureCall(),(c=n.Procedures.getDefinition(c,this.workspace))&&c.id==a.blockId&&((c=n.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),n.Events.setGroup(a.group),a.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),n.Events.setGroup(c)))},customContextMenu:function(a){if(this.workspace.isMovable()){var c={enabled:!0};c.text=n.Msg.PROCEDURES_HIGHLIGHT_DEF;var d=this.getProcedureCall(),_=this.workspace;c.callback=function(){var y=n.Procedures.getDefinition(d,_);y&&(_.centerOnBlock(y.id),y.select())},a.push(c)}},defType_:"procedures_defnoreturn"},n.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(n.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:n.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:n.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:n.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:n.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:n.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:n.Blocks.procedures_callnoreturn.domToMutation,getVars:n.Blocks.procedures_callnoreturn.getVars,getVarModels:n.Blocks.procedures_callnoreturn.getVarModels,onchange:n.Blocks.procedures_callnoreturn.onchange,customContextMenu:n.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},n.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(n.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(n.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(n.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var a=n.utils.xml.createElement("mutation");return a.setAttribute("value",Number(this.hasReturnValue_)),a},domToMutation:function(a){this.hasReturnValue_=1==a.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(a){if(this.workspace.isDragging&&!this.workspace.isDragging()){a=!1;var c=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(c.type)){a=!0;break}c=c.getSurroundParent()}while(c);a?("procedures_defnoreturn"==c.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=c.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(n.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(n.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},n.Blocks.texts={},n.Constants.Text={},n.Constants.Text.HUE=160,n.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),n.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[n.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[n.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[n.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[n.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[n.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[n.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(n.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),n.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(n.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(n.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var a=n.utils.xml.createElement("mutation"),c=this.getInput("AT1").type==n.INPUT_VALUE;return a.setAttribute("at1",c),c=this.getInput("AT2").type==n.INPUT_VALUE,a.setAttribute("at2",c),a},domToMutation:function(a){var c="true"==a.getAttribute("at1");a="true"==a.getAttribute("at2"),this.updateAt_(1,c),this.updateAt_(2,a)},updateAt_:function(a,c){this.removeInput("AT"+a),this.removeInput("ORDINAL"+a,!0),c?(this.appendValueInput("AT"+a).setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+a).appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+a),2==a&&n.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(n.Msg.TEXT_GET_SUBSTRING_TAIL));var d=new n.FieldDropdown(this["WHERE_OPTIONS_"+a],function(_){var y="FROM_START"==_||"FROM_END"==_;if(y!=c){var R=this.getSourceBlock();return R.updateAt_(a,y),R.setFieldValue(_,"WHERE"+a),null}});this.getInput("AT"+a).appendField(d,"WHERE"+a),1==a&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},n.Blocks.text_changeCase={init:function(){var a=[[n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(n.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new n.FieldDropdown(a),"CASE"),this.setOutput(!0,"String"),this.setTooltip(n.Msg.TEXT_CHANGECASE_TOOLTIP)}},n.Blocks.text_trim={init:function(){var a=[[n.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[n.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[n.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(n.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new n.FieldDropdown(a),"MODE"),this.setOutput(!0,"String"),this.setTooltip(n.Msg.TEXT_TRIM_TOOLTIP)}},n.Blocks.text_print={init:function(){this.jsonInit({message0:n.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:n.Msg.TEXT_PRINT_TOOLTIP,helpUrl:n.Msg.TEXT_PRINT_HELPURL})}},n.Blocks.text_prompt_ext={init:function(){var a=[[n.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[n.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(n.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var c=this;a=new n.FieldDropdown(a,function(d){c.updateType_(d)}),this.appendValueInput("TEXT").appendField(a,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==c.getFieldValue("TYPE")?n.Msg.TEXT_PROMPT_TOOLTIP_TEXT:n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(a){this.outputConnection.setCheck("NUMBER"==a?"Number":"String")},mutationToDom:function(){var a=n.utils.xml.createElement("mutation");return a.setAttribute("type",this.getFieldValue("TYPE")),a},domToMutation:function(a){this.updateType_(a.getAttribute("type"))}},n.Blocks.text_prompt={init:function(){this.mixin(n.Constants.Text.QUOTE_IMAGE_MIXIN);var a=[[n.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[n.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],c=this;this.setHelpUrl(n.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),a=new n.FieldDropdown(a,function(d){c.updateType_(d)}),this.appendDummyInput().appendField(a,"TYPE").appendField(this.newQuote_(!0)).appendField(new n.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==c.getFieldValue("TYPE")?n.Msg.TEXT_PROMPT_TOOLTIP_TEXT:n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:n.Blocks.text_prompt_ext.updateType_,mutationToDom:n.Blocks.text_prompt_ext.mutationToDom,domToMutation:n.Blocks.text_prompt_ext.domToMutation},n.Blocks.text_count={init:function(){this.jsonInit({message0:n.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:n.Msg.TEXT_COUNT_TOOLTIP,helpUrl:n.Msg.TEXT_COUNT_HELPURL})}},n.Blocks.text_replace={init:function(){this.jsonInit({message0:n.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:n.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:n.Msg.TEXT_REPLACE_HELPURL})}},n.Blocks.text_reverse={init:function(){this.jsonInit({message0:n.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:n.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:n.Msg.TEXT_REVERSE_HELPURL})}},n.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(a){for(var d,c=0;d=this.inputList[c];c++)for(var y,_=0;y=d.fieldRow[_];_++)if(a==y.name)return d.insertFieldAt(_,this.newQuote_(!0)),void d.insertFieldAt(_+2,this.newQuote_(!1));console.warn('field named "'+a+'" not found in '+this.toDevString())},newQuote_:function(a){return new n.FieldImage((a=this.RTL?!a:a)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,a?"\u201c":"\u201d")}},n.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(n.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},n.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var a=n.utils.xml.createElement("mutation");return a.setAttribute("items",this.itemCount_),a},domToMutation:function(a){this.itemCount_=parseInt(a.getAttribute("items"),10),this.updateShape_()},decompose:function(a){var c=a.newBlock("text_create_join_container");c.initSvg();for(var d=c.getInput("STACK").connection,_=0;_<this.itemCount_;_++){var y=a.newBlock("text_create_join_item");y.initSvg(),d.connect(y.previousConnection),d=y.nextConnection}return c},compose:function(a){var c=a.getInputTargetBlock("STACK");for(a=[];c&&!c.isInsertionMarker();)a.push(c.valueConnection_),c=c.nextConnection&&c.nextConnection.targetBlock();for(c=0;c<this.itemCount_;c++){var d=this.getInput("ADD"+c).connection.targetConnection;d&&-1==a.indexOf(d)&&d.disconnect()}for(this.itemCount_=a.length,this.updateShape_(),c=0;c<this.itemCount_;c++)n.Mutator.reconnect(a[c],this,"ADD"+c)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var c=0;a;){var d=this.getInput("ADD"+c);a.valueConnection_=d&&d.connection.targetConnection,c++,a=a.nextConnection&&a.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var a=0;a<this.itemCount_;a++)if(!this.getInput("ADD"+a)){var c=this.appendValueInput("ADD"+a).setAlign(n.ALIGN_RIGHT);0==a&&c.appendField(n.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+a);)this.removeInput("ADD"+a),a++}},n.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(n.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new n.Mutator(["text_create_join_item"]))},n.Extensions.register("text_append_tooltip",n.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),n.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var a=this;this.setTooltip(function(){return n.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",a.workspace.options.oneBasedIndex?"0":"-1")})},n.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var a=n.utils.xml.createElement("mutation");return a.setAttribute("at",!!this.isAt_),a},domToMutation:function(a){a="false"!=a.getAttribute("at"),this.updateAt_(a)},updateAt_:function(a){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),a&&(this.appendValueInput("AT").setCheck("Number"),n.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(n.Msg.ORDINAL_NUMBER_SUFFIX)),n.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(n.Msg.TEXT_CHARAT_TAIL)),this.isAt_=a}},n.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(c){(c="FROM_START"==c||"FROM_END"==c)!=this.isAt_&&this.getSourceBlock().updateAt_(c)}),this.updateAt_(!0);var a=this;this.setTooltip(function(){var c=a.getFieldValue("WHERE"),d=n.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==c||"FROM_END"==c)&&(c="FROM_START"==c?n.Msg.LISTS_INDEX_FROM_START_TOOLTIP:n.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(d+="  "+c.replace("%1",a.workspace.options.oneBasedIndex?"#1":"#0")),d})},n.Extensions.register("text_indexOf_tooltip",n.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),n.Extensions.register("text_quotes",n.Constants.Text.TEXT_QUOTES_EXTENSION),n.Extensions.registerMutator("text_join_mutator",n.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,n.Constants.Text.TEXT_JOIN_EXTENSION),n.Extensions.registerMutator("text_charAt_mutator",n.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,n.Constants.Text.TEXT_CHARAT_EXTENSION),n.Blocks.variables={},n.Constants.Variables={},n.Constants.Variables.HUE=330,n.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),n.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(a){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(c={text:n.Msg.RENAME_VARIABLE,enabled:!0,callback:n.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},y=this.getField("VAR").getText(),_={text:n.Msg.DELETE_VARIABLE.replace("%1",y),enabled:!0,callback:n.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},a.unshift(c),a.unshift(_));else{if("variables_get"==this.type)var c="variables_set",d=n.Msg.VARIABLES_GET_CREATE_SET;else c="variables_get",d=n.Msg.VARIABLES_SET_CREATE_GET;var _={enabled:0<this.workspace.remainingCapacity()},y=this.getField("VAR").getText();_.text=d.replace("%1",y),(d=n.utils.xml.createElement("field")).setAttribute("name","VAR"),d.appendChild(n.utils.xml.createTextNode(y)),(y=n.utils.xml.createElement("block")).setAttribute("type",c),y.appendChild(d),_.callback=n.ContextMenu.callbackFactory(this,y),a.push(_)}}},n.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(a){return function(){var c=a.workspace,d=a.getField("VAR").getVariable();n.Variables.renameVariable(c,d)}},n.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(a){return function(){var c=a.workspace,d=a.getField("VAR").getVariable();c.deleteVariableById(d.getId()),c.refreshToolboxSelection()}},n.Extensions.registerMixin("contextMenu_variableSetterGetter",n.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),n.Constants.VariablesDynamic={},n.Constants.VariablesDynamic.HUE=310,n.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),n.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(a){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(c={text:n.Msg.RENAME_VARIABLE,enabled:!0,callback:n.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},R=this.getField("VAR").getText(),y={text:n.Msg.DELETE_VARIABLE.replace("%1",R),enabled:!0,callback:n.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},a.unshift(c),a.unshift(y));else{var c=this.getFieldValue("VAR"),d=this.workspace.getVariableById(c).type;if("variables_get_dynamic"==this.type){c="variables_set_dynamic";var _=n.Msg.VARIABLES_GET_CREATE_SET}else c="variables_get_dynamic",_=n.Msg.VARIABLES_SET_CREATE_GET;var y={enabled:0<this.workspace.remainingCapacity()},R=this.getField("VAR").getText();y.text=_.replace("%1",R),(_=n.utils.xml.createElement("field")).setAttribute("name","VAR"),_.setAttribute("variabletype",d),_.appendChild(n.utils.xml.createTextNode(R)),(R=n.utils.xml.createElement("block")).setAttribute("type",c),R.appendChild(_),y.callback=n.ContextMenu.callbackFactory(this,R),a.push(y)}},onchange:function(a){a=this.getFieldValue("VAR"),a=n.Variables.getVariable(this.workspace,a),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(a.type):this.getInput("VALUE").connection.setCheck(a.type)}},n.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(a){return function(){var c=a.workspace,d=a.getField("VAR").getVariable();n.Variables.renameVariable(c,d)}},n.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(a){return function(){var c=a.workspace,d=a.getField("VAR").getVariable();c.deleteVariableById(d.getId()),c.refreshToolboxSelection()}},n.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",n.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),n.Blocks}.apply(A,w))&&(C.exports=o)},55490:function(C,A,g){var w,o;w=[g(82215),g(79841),g(20813),g(75610)],void 0!==(o=function(n,a,c,d){"use strict";return n.setLocale(a),n.Blocks=n.Blocks||{},Object.keys(c).forEach(function(_){n.Blocks[_]=c[_]}),n.JavaScript=d,n}.apply(A,w))&&(C.exports=o)},82215:function(C,A,g){var w,o;w=[g(76588)],void 0!==(o=function(n){"use strict";return n.setLocale=function(a){n.Msg=n.Msg||{},Object.keys(a).forEach(function(c){n.Msg[c]=a[c]})},n}.apply(A,w))&&(C.exports=o)},5389:function(C,A,g){var w,o;w=[g(55490)],void 0!==(o=function(n){"use strict";return n}.apply(A,w))&&(C.exports=o)},75610:function(C,A,g){var w,o;w=[g(82215),g(52657)],void 0!==(o=function(n,a){"use strict";return n.JavaScript=a,a}.apply(A,w))&&(C.exports=o)},52657:function(C,A,g){var w,o;w=[g(96761)],void 0!==(o=function(n){"use strict";return n.JavaScript=new n.Generator("JavaScript"),n.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(n.utils.global).join(",")),n.JavaScript.ORDER_ATOMIC=0,n.JavaScript.ORDER_NEW=1.1,n.JavaScript.ORDER_MEMBER=1.2,n.JavaScript.ORDER_FUNCTION_CALL=2,n.JavaScript.ORDER_INCREMENT=3,n.JavaScript.ORDER_DECREMENT=3,n.JavaScript.ORDER_BITWISE_NOT=4.1,n.JavaScript.ORDER_UNARY_PLUS=4.2,n.JavaScript.ORDER_UNARY_NEGATION=4.3,n.JavaScript.ORDER_LOGICAL_NOT=4.4,n.JavaScript.ORDER_TYPEOF=4.5,n.JavaScript.ORDER_VOID=4.6,n.JavaScript.ORDER_DELETE=4.7,n.JavaScript.ORDER_AWAIT=4.8,n.JavaScript.ORDER_EXPONENTIATION=5,n.JavaScript.ORDER_MULTIPLICATION=5.1,n.JavaScript.ORDER_DIVISION=5.2,n.JavaScript.ORDER_MODULUS=5.3,n.JavaScript.ORDER_SUBTRACTION=6.1,n.JavaScript.ORDER_ADDITION=6.2,n.JavaScript.ORDER_BITWISE_SHIFT=7,n.JavaScript.ORDER_RELATIONAL=8,n.JavaScript.ORDER_IN=8,n.JavaScript.ORDER_INSTANCEOF=8,n.JavaScript.ORDER_EQUALITY=9,n.JavaScript.ORDER_BITWISE_AND=10,n.JavaScript.ORDER_BITWISE_XOR=11,n.JavaScript.ORDER_BITWISE_OR=12,n.JavaScript.ORDER_LOGICAL_AND=13,n.JavaScript.ORDER_LOGICAL_OR=14,n.JavaScript.ORDER_CONDITIONAL=15,n.JavaScript.ORDER_ASSIGNMENT=16,n.JavaScript.ORDER_YIELD=17,n.JavaScript.ORDER_COMMA=18,n.JavaScript.ORDER_NONE=99,n.JavaScript.ORDER_OVERRIDES=[[n.JavaScript.ORDER_FUNCTION_CALL,n.JavaScript.ORDER_MEMBER],[n.JavaScript.ORDER_FUNCTION_CALL,n.JavaScript.ORDER_FUNCTION_CALL],[n.JavaScript.ORDER_MEMBER,n.JavaScript.ORDER_MEMBER],[n.JavaScript.ORDER_MEMBER,n.JavaScript.ORDER_FUNCTION_CALL],[n.JavaScript.ORDER_LOGICAL_NOT,n.JavaScript.ORDER_LOGICAL_NOT],[n.JavaScript.ORDER_MULTIPLICATION,n.JavaScript.ORDER_MULTIPLICATION],[n.JavaScript.ORDER_ADDITION,n.JavaScript.ORDER_ADDITION],[n.JavaScript.ORDER_LOGICAL_AND,n.JavaScript.ORDER_LOGICAL_AND],[n.JavaScript.ORDER_LOGICAL_OR,n.JavaScript.ORDER_LOGICAL_OR]],n.JavaScript.isInitialized=!1,n.JavaScript.init=function(a){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new n.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(a.getVariableMap()),this.nameDB_.populateVariables(a),this.nameDB_.populateProcedures(a);for(var c=[],d=n.Variables.allDeveloperVariables(a),_=0;_<d.length;_++)c.push(this.nameDB_.getName(d[_],n.Names.DEVELOPER_VARIABLE_TYPE));for(a=n.Variables.allUsedVarModels(a),_=0;_<a.length;_++)c.push(this.nameDB_.getName(a[_].getId(),n.VARIABLE_CATEGORY_NAME));c.length&&(this.definitions_.variables="var "+c.join(", ")+";"),this.isInitialized=!0},n.JavaScript.finish=function(a){var c=n.utils.object.values(this.definitions_);return a=Object.getPrototypeOf(this).finish.call(this,a),this.isInitialized=!1,this.nameDB_.reset(),c.join("\n\n")+"\n\n\n"+a},n.JavaScript.scrubNakedValue=function(a){return a+";\n"},n.JavaScript.quote_=function(a){return"'"+(a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},n.JavaScript.multiline_quote_=function(a){return a.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},n.JavaScript.scrub_=function(a,c,d){var _="";if(!a.outputConnection||!a.outputConnection.targetConnection){var y=a.getCommentText();y&&(y=n.utils.string.wrap(y,this.COMMENT_WRAP-3),_+=this.prefixLines(y+"\n","// "));for(var R=0;R<a.inputList.length;R++)a.inputList[R].type==n.inputTypes.VALUE&&(y=a.inputList[R].connection.targetBlock())&&(y=this.allNestedComments(y))&&(_+=this.prefixLines(y,"// "))}return a=a.nextConnection&&a.nextConnection.targetBlock(),_+c+(d?"":this.blockToCode(a))},n.JavaScript.getAdjusted=function(a,c,d,_,y){d=d||0,y=y||this.ORDER_NONE,a.workspace.options.oneBasedIndex&&d--;var R=a.workspace.options.oneBasedIndex?"1":"0";if(a=0<d?this.valueToCode(a,c,this.ORDER_ADDITION)||R:0>d?this.valueToCode(a,c,this.ORDER_SUBTRACTION)||R:_?this.valueToCode(a,c,this.ORDER_UNARY_NEGATION)||R:this.valueToCode(a,c,y)||R,n.isNumber(a))a=Number(a)+d,_&&(a=-a);else{if(0<d){a=a+" + "+d;var x=this.ORDER_ADDITION}else 0>d&&(a=a+" - "+-d,x=this.ORDER_SUBTRACTION);_&&(a=d?"-("+a+")":"-"+a,x=this.ORDER_UNARY_NEGATION),x=Math.floor(x),y=Math.floor(y),x&&y>=x&&(a="("+a+")")}return a},n.JavaScript.colour={},n.JavaScript.colour_picker=function(a){return[n.JavaScript.quote_(a.getFieldValue("COLOUR")),n.JavaScript.ORDER_ATOMIC]},n.JavaScript.colour_random=function(a){return[n.JavaScript.provideFunction_("colourRandom",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.colour_rgb=function(a){var c=n.JavaScript.valueToCode(a,"RED",n.JavaScript.ORDER_NONE)||0,d=n.JavaScript.valueToCode(a,"GREEN",n.JavaScript.ORDER_NONE)||0;return a=n.JavaScript.valueToCode(a,"BLUE",n.JavaScript.ORDER_NONE)||0,[n.JavaScript.provideFunction_("colourRgb",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+c+", "+d+", "+a+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.colour_blend=function(a){var c=n.JavaScript.valueToCode(a,"COLOUR1",n.JavaScript.ORDER_NONE)||"'#000000'",d=n.JavaScript.valueToCode(a,"COLOUR2",n.JavaScript.ORDER_NONE)||"'#000000'";return a=n.JavaScript.valueToCode(a,"RATIO",n.JavaScript.ORDER_NONE)||.5,[n.JavaScript.provideFunction_("colourBlend",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+c+", "+d+", "+a+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists={},n.JavaScript.lists_create_empty=function(a){return["[]",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.lists_create_with=function(a){for(var c=Array(a.itemCount_),d=0;d<a.itemCount_;d++)c[d]=n.JavaScript.valueToCode(a,"ADD"+d,n.JavaScript.ORDER_NONE)||"null";return["["+c.join(", ")+"]",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.lists_repeat=function(a){return[n.JavaScript.provideFunction_("listsRepeat",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(n.JavaScript.valueToCode(a,"ITEM",n.JavaScript.ORDER_NONE)||"null")+", "+(a=n.JavaScript.valueToCode(a,"NUM",n.JavaScript.ORDER_NONE)||"0")+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_length=function(a){return[(n.JavaScript.valueToCode(a,"VALUE",n.JavaScript.ORDER_MEMBER)||"[]")+".length",n.JavaScript.ORDER_MEMBER]},n.JavaScript.lists_isEmpty=function(a){return["!"+(n.JavaScript.valueToCode(a,"VALUE",n.JavaScript.ORDER_MEMBER)||"[]")+".length",n.JavaScript.ORDER_LOGICAL_NOT]},n.JavaScript.lists_indexOf=function(a){var c="FIRST"==a.getFieldValue("END")?"indexOf":"lastIndexOf",d=n.JavaScript.valueToCode(a,"FIND",n.JavaScript.ORDER_NONE)||"''";return c=(n.JavaScript.valueToCode(a,"VALUE",n.JavaScript.ORDER_MEMBER)||"[]")+"."+c+"("+d+")",a.workspace.options.oneBasedIndex?[c+" + 1",n.JavaScript.ORDER_ADDITION]:[c,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_getIndex=function(a){var c=a.getFieldValue("MODE")||"GET",d=a.getFieldValue("WHERE")||"FROM_START",_=n.JavaScript.valueToCode(a,"VALUE","RANDOM"==d?n.JavaScript.ORDER_NONE:n.JavaScript.ORDER_MEMBER)||"[]";switch(d){case"FIRST":if("GET"==c)return[_+"[0]",n.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==c)return[_+".shift()",n.JavaScript.ORDER_MEMBER];if("REMOVE"==c)return _+".shift();\n";break;case"LAST":if("GET"==c)return[_+".slice(-1)[0]",n.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==c)return[_+".pop()",n.JavaScript.ORDER_MEMBER];if("REMOVE"==c)return _+".pop();\n";break;case"FROM_START":if(a=n.JavaScript.getAdjusted(a,"AT"),"GET"==c)return[_+"["+a+"]",n.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==c)return[_+".splice("+a+", 1)[0]",n.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==c)return _+".splice("+a+", 1);\n";break;case"FROM_END":if(a=n.JavaScript.getAdjusted(a,"AT",1,!0),"GET"==c)return[_+".slice("+a+")[0]",n.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==c)return[_+".splice("+a+", 1)[0]",n.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==c)return _+".splice("+a+", 1);";break;case"RANDOM":if(_=n.JavaScript.provideFunction_("listsGetRandomItem",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+_+", "+("GET"!=c)+")","GET"==c||"GET_REMOVE"==c)return[_,n.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==c)return _+";\n"}throw Error("Unhandled combination (lists_getIndex).")},n.JavaScript.lists_setIndex=function(a){function c(){if(d.match(/^\w+$/))return"";var x=n.JavaScript.nameDB_.getDistinctName("tmpList",n.VARIABLE_CATEGORY_NAME),B="var "+x+" = "+d+";\n";return d=x,B}var d=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_MEMBER)||"[]",_=a.getFieldValue("MODE")||"GET",y=a.getFieldValue("WHERE")||"FROM_START",R=n.JavaScript.valueToCode(a,"TO",n.JavaScript.ORDER_ASSIGNMENT)||"null";switch(y){case"FIRST":if("SET"==_)return d+"[0] = "+R+";\n";if("INSERT"==_)return d+".unshift("+R+");\n";break;case"LAST":if("SET"==_)return(a=c())+(d+"[")+d+".length - 1] = "+R+";\n";if("INSERT"==_)return d+".push("+R+");\n";break;case"FROM_START":if(y=n.JavaScript.getAdjusted(a,"AT"),"SET"==_)return d+"["+y+"] = "+R+";\n";if("INSERT"==_)return d+".splice("+y+", 0, "+R+");\n";break;case"FROM_END":if(y=n.JavaScript.getAdjusted(a,"AT",1,!1,n.JavaScript.ORDER_SUBTRACTION),a=c(),"SET"==_)return a+(d+"[")+d+".length - "+y+"] = "+R+";\n";if("INSERT"==_)return a+(d+".splice(")+d+".length - "+y+", 0, "+R+");\n";break;case"RANDOM":if(a=c(),a+="var "+(y=n.JavaScript.nameDB_.getDistinctName("tmpX",n.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+d+".length);\n","SET"==_)return a+(d+"[")+y+"] = "+R+";\n";if("INSERT"==_)return a+(d+".splice(")+y+", 0, "+R+");\n"}throw Error("Unhandled combination (lists_setIndex).")},n.JavaScript.lists.getIndex_=function(a,c,d){return"FIRST"==c?"0":"FROM_END"==c?a+".length - 1 - "+d:"LAST"==c?a+".length - 1":d},n.JavaScript.lists_getSublist=function(a){var c=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_MEMBER)||"[]",d=a.getFieldValue("WHERE1"),_=a.getFieldValue("WHERE2");if("FIRST"==d&&"LAST"==_)c+=".slice(0)";else if(c.match(/^\w+$/)||"FROM_END"!=d&&"FROM_START"==_){switch(d){case"FROM_START":var y=n.JavaScript.getAdjusted(a,"AT1");break;case"FROM_END":y=c+".length - "+(y=n.JavaScript.getAdjusted(a,"AT1",1,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":y="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(_){case"FROM_START":a=n.JavaScript.getAdjusted(a,"AT2",1);break;case"FROM_END":a=c+".length - "+(a=n.JavaScript.getAdjusted(a,"AT2",0,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"LAST":a=c+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}c=c+".slice("+y+", "+a+")"}else{y=n.JavaScript.getAdjusted(a,"AT1"),a=n.JavaScript.getAdjusted(a,"AT2");var R=n.JavaScript.lists.getIndex_,x={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};c=n.JavaScript.provideFunction_("subsequence"+x[d]+x[_],["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==d||"FROM_START"==d?", at1":"")+("FROM_END"==_||"FROM_START"==_?", at2":"")+") {","  var start = "+R("sequence",d,"at1")+";","  var end = "+R("sequence",_,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+c+("FROM_END"==d||"FROM_START"==d?", "+y:"")+("FROM_END"==_||"FROM_START"==_?", "+a:"")+")"}return[c,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_sort=function(a){var c=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_FUNCTION_CALL)||"[]",d="1"===a.getFieldValue("DIRECTION")?1:-1;return a=a.getFieldValue("TYPE"),[c+".slice().sort("+n.JavaScript.provideFunction_("listsGetSortCompare",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+a+'", '+d+"))",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_split=function(a){var c=n.JavaScript.valueToCode(a,"INPUT",n.JavaScript.ORDER_MEMBER),d=n.JavaScript.valueToCode(a,"DELIM",n.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(a=a.getFieldValue("MODE")))c||(c="''"),a="split";else{if("JOIN"!=a)throw Error("Unknown mode: "+a);c||(c="[]"),a="join"}return[c+"."+a+"("+d+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.lists_reverse=function(a){return[(n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.logic={},n.JavaScript.controls_if=function(a){var c=0,d="";n.JavaScript.STATEMENT_PREFIX&&(d+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,a));do{var _=n.JavaScript.valueToCode(a,"IF"+c,n.JavaScript.ORDER_NONE)||"false",y=n.JavaScript.statementToCode(a,"DO"+c);n.JavaScript.STATEMENT_SUFFIX&&(y=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,a),n.JavaScript.INDENT)+y),d+=(0<c?" else ":"")+"if ("+_+") {\n"+y+"}",++c}while(a.getInput("IF"+c));return(a.getInput("ELSE")||n.JavaScript.STATEMENT_SUFFIX)&&(y=n.JavaScript.statementToCode(a,"ELSE"),n.JavaScript.STATEMENT_SUFFIX&&(y=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,a),n.JavaScript.INDENT)+y),d+=" else {\n"+y+"}"),d+"\n"},n.JavaScript.controls_ifelse=n.JavaScript.controls_if,n.JavaScript.logic_compare=function(a){var c={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[a.getFieldValue("OP")],d="=="==c||"!="==c?n.JavaScript.ORDER_EQUALITY:n.JavaScript.ORDER_RELATIONAL;return[(n.JavaScript.valueToCode(a,"A",d)||"0")+" "+c+" "+(a=n.JavaScript.valueToCode(a,"B",d)||"0"),d]},n.JavaScript.logic_operation=function(a){var c="AND"==a.getFieldValue("OP")?"&&":"||",d="&&"==c?n.JavaScript.ORDER_LOGICAL_AND:n.JavaScript.ORDER_LOGICAL_OR,_=n.JavaScript.valueToCode(a,"A",d);if(a=n.JavaScript.valueToCode(a,"B",d),_||a){var y="&&"==c?"true":"false";_||(_=y),a||(a=y)}else a=_="false";return[_+" "+c+" "+a,d]},n.JavaScript.logic_negate=function(a){var c=n.JavaScript.ORDER_LOGICAL_NOT;return["!"+(n.JavaScript.valueToCode(a,"BOOL",c)||"true"),c]},n.JavaScript.logic_boolean=function(a){return["TRUE"==a.getFieldValue("BOOL")?"true":"false",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.logic_null=function(a){return["null",n.JavaScript.ORDER_ATOMIC]},n.JavaScript.logic_ternary=function(a){return[(n.JavaScript.valueToCode(a,"IF",n.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(n.JavaScript.valueToCode(a,"THEN",n.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(a=n.JavaScript.valueToCode(a,"ELSE",n.JavaScript.ORDER_CONDITIONAL)||"null"),n.JavaScript.ORDER_CONDITIONAL]},n.JavaScript.loops={},n.JavaScript.controls_repeat_ext=function(a){var c=a.getField("TIMES")?String(Number(a.getFieldValue("TIMES"))):n.JavaScript.valueToCode(a,"TIMES",n.JavaScript.ORDER_ASSIGNMENT)||"0",d=n.JavaScript.statementToCode(a,"DO");d=n.JavaScript.addLoopTrap(d,a),a="";var _=n.JavaScript.nameDB_.getDistinctName("count",n.VARIABLE_CATEGORY_NAME),y=c;return c.match(/^\w+$/)||n.isNumber(c)||(a+="var "+(y=n.JavaScript.nameDB_.getDistinctName("repeat_end",n.VARIABLE_CATEGORY_NAME))+" = "+c+";\n"),a+"for (var "+_+" = 0; "+_+" < "+y+"; "+_+"++) {\n"+d+"}\n"},n.JavaScript.controls_repeat=n.JavaScript.controls_repeat_ext,n.JavaScript.controls_whileUntil=function(a){var c="UNTIL"==a.getFieldValue("MODE"),d=n.JavaScript.valueToCode(a,"BOOL",c?n.JavaScript.ORDER_LOGICAL_NOT:n.JavaScript.ORDER_NONE)||"false",_=n.JavaScript.statementToCode(a,"DO");return c&&(d="!"+d),"while ("+d+") {\n"+(_=n.JavaScript.addLoopTrap(_,a))+"}\n"},n.JavaScript.controls_for=function(a){var c=n.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME),d=n.JavaScript.valueToCode(a,"FROM",n.JavaScript.ORDER_ASSIGNMENT)||"0",_=n.JavaScript.valueToCode(a,"TO",n.JavaScript.ORDER_ASSIGNMENT)||"0",y=n.JavaScript.valueToCode(a,"BY",n.JavaScript.ORDER_ASSIGNMENT)||"1",R=n.JavaScript.statementToCode(a,"DO");if(R=n.JavaScript.addLoopTrap(R,a),n.isNumber(d)&&n.isNumber(_)&&n.isNumber(y)){var x=Number(d)<=Number(_);a="for ("+c+" = "+d+"; "+c+(x?" <= ":" >= ")+_+"; "+c,a=(1==(c=Math.abs(Number(y)))?a+(x?"++":"--"):a+(x?" += ":" -= ")+c)+") {\n"+R+"}\n"}else a="",x=d,d.match(/^\w+$/)||n.isNumber(d)||(a+="var "+(x=n.JavaScript.nameDB_.getDistinctName(c+"_start",n.VARIABLE_CATEGORY_NAME))+" = "+d+";\n"),d=_,_.match(/^\w+$/)||n.isNumber(_)||(a+="var "+(d=n.JavaScript.nameDB_.getDistinctName(c+"_end",n.VARIABLE_CATEGORY_NAME))+" = "+_+";\n"),a+="var "+(_=n.JavaScript.nameDB_.getDistinctName(c+"_inc",n.VARIABLE_CATEGORY_NAME))+" = ",a=(a=n.isNumber(y)?a+(Math.abs(y)+";\n"):a+"Math.abs("+y+");\n")+"if ("+x+" > "+d+") {\n"+(n.JavaScript.INDENT+_)+" = -"+_+";\n",a+="}\n",a+="for ("+c+" = "+x+"; "+_+" >= 0 ? "+c+" <= "+d+" : "+c+" >= "+d+"; "+c+" += "+_+") {\n"+R+"}\n";return a},n.JavaScript.controls_forEach=function(a){var c=n.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME),d=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_ASSIGNMENT)||"[]",_=n.JavaScript.statementToCode(a,"DO");_=n.JavaScript.addLoopTrap(_,a),a="";var y=d;return d.match(/^\w+$/)||(a+="var "+(y=n.JavaScript.nameDB_.getDistinctName(c+"_list",n.VARIABLE_CATEGORY_NAME))+" = "+d+";\n"),a+"for (var "+(d=n.JavaScript.nameDB_.getDistinctName(c+"_index",n.VARIABLE_CATEGORY_NAME))+" in "+y+") {\n"+(_=n.JavaScript.INDENT+c+" = "+y+"["+d+"];\n"+_)+"}\n"},n.JavaScript.controls_flow_statements=function(a){var c="";if(n.JavaScript.STATEMENT_PREFIX&&(c+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,a)),n.JavaScript.STATEMENT_SUFFIX&&(c+=n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,a)),n.JavaScript.STATEMENT_PREFIX){var d=n.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(a);d&&!d.suppressPrefixSuffix&&(c+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,d))}switch(a.getFieldValue("FLOW")){case"BREAK":return c+"break;\n";case"CONTINUE":return c+"continue;\n"}throw Error("Unknown flow statement.")},n.JavaScript.math={},n.JavaScript.math_number=function(a){return[a=Number(a.getFieldValue("NUM")),0<=a?n.JavaScript.ORDER_ATOMIC:n.JavaScript.ORDER_UNARY_NEGATION]},n.JavaScript.math_arithmetic=function(a){var c={ADD:[" + ",n.JavaScript.ORDER_ADDITION],MINUS:[" - ",n.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",n.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",n.JavaScript.ORDER_DIVISION],POWER:[null,n.JavaScript.ORDER_NONE]}[a.getFieldValue("OP")],d=c[0],_=n.JavaScript.valueToCode(a,"A",c=c[1])||"0";return a=n.JavaScript.valueToCode(a,"B",c)||"0",d?[_+d+a,c]:["Math.pow("+_+", "+a+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_single=function(a){var c=a.getFieldValue("OP");if("NEG"==c)return"-"==(a=n.JavaScript.valueToCode(a,"NUM",n.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(a=" "+a),["-"+a,n.JavaScript.ORDER_UNARY_NEGATION];switch(a="SIN"==c||"COS"==c||"TAN"==c?n.JavaScript.valueToCode(a,"NUM",n.JavaScript.ORDER_DIVISION)||"0":n.JavaScript.valueToCode(a,"NUM",n.JavaScript.ORDER_NONE)||"0",c){case"ABS":var d="Math.abs("+a+")";break;case"ROOT":d="Math.sqrt("+a+")";break;case"LN":d="Math.log("+a+")";break;case"EXP":d="Math.exp("+a+")";break;case"POW10":d="Math.pow(10,"+a+")";break;case"ROUND":d="Math.round("+a+")";break;case"ROUNDUP":d="Math.ceil("+a+")";break;case"ROUNDDOWN":d="Math.floor("+a+")";break;case"SIN":d="Math.sin("+a+" / 180 * Math.PI)";break;case"COS":d="Math.cos("+a+" / 180 * Math.PI)";break;case"TAN":d="Math.tan("+a+" / 180 * Math.PI)"}if(d)return[d,n.JavaScript.ORDER_FUNCTION_CALL];switch(c){case"LOG10":d="Math.log("+a+") / Math.log(10)";break;case"ASIN":d="Math.asin("+a+") / Math.PI * 180";break;case"ACOS":d="Math.acos("+a+") / Math.PI * 180";break;case"ATAN":d="Math.atan("+a+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+c)}return[d,n.JavaScript.ORDER_DIVISION]},n.JavaScript.math_constant=function(a){return{PI:["Math.PI",n.JavaScript.ORDER_MEMBER],E:["Math.E",n.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",n.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",n.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",n.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",n.JavaScript.ORDER_ATOMIC]}[a.getFieldValue("CONSTANT")]},n.JavaScript.math_number_property=function(a){var c=n.JavaScript.valueToCode(a,"NUMBER_TO_CHECK",n.JavaScript.ORDER_MODULUS)||"0",d=a.getFieldValue("PROPERTY");if("PRIME"==d)return[n.JavaScript.provideFunction_("mathIsPrime",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+c+")",n.JavaScript.ORDER_FUNCTION_CALL];switch(d){case"EVEN":var _=c+" % 2 == 0";break;case"ODD":_=c+" % 2 == 1";break;case"WHOLE":_=c+" % 1 == 0";break;case"POSITIVE":_=c+" > 0";break;case"NEGATIVE":_=c+" < 0";break;case"DIVISIBLE_BY":_=c+" % "+(a=n.JavaScript.valueToCode(a,"DIVISOR",n.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[_,n.JavaScript.ORDER_EQUALITY]},n.JavaScript.math_change=function(a){var c=n.JavaScript.valueToCode(a,"DELTA",n.JavaScript.ORDER_ADDITION)||"0";return(a=n.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME))+" = (typeof "+a+" == 'number' ? "+a+" : 0) + "+c+";\n"},n.JavaScript.math_round=n.JavaScript.math_single,n.JavaScript.math_trig=n.JavaScript.math_single,n.JavaScript.math_on_list=function(a){var c=a.getFieldValue("OP");switch(c){case"SUM":a=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_MEMBER)||"[]",a+=".reduce(function(x, y) {return x + y;})";break;case"MIN":a="Math.min.apply(null, "+(a=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":a="Math.max.apply(null, "+(a=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":a=(c=n.JavaScript.provideFunction_("mathMean",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(a=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":a=(c=n.JavaScript.provideFunction_("mathMedian",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(a=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":a=(c=n.JavaScript.provideFunction_("mathModes",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(a=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":a=(c=n.JavaScript.provideFunction_("mathStandardDeviation",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(a=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":a=(c=n.JavaScript.provideFunction_("mathRandomList",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(a=n.JavaScript.valueToCode(a,"LIST",n.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+c)}return[a,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_modulo=function(a){return[(n.JavaScript.valueToCode(a,"DIVIDEND",n.JavaScript.ORDER_MODULUS)||"0")+" % "+(a=n.JavaScript.valueToCode(a,"DIVISOR",n.JavaScript.ORDER_MODULUS)||"0"),n.JavaScript.ORDER_MODULUS]},n.JavaScript.math_constrain=function(a){return["Math.min(Math.max("+(n.JavaScript.valueToCode(a,"VALUE",n.JavaScript.ORDER_NONE)||"0")+", "+(n.JavaScript.valueToCode(a,"LOW",n.JavaScript.ORDER_NONE)||"0")+"), "+(a=n.JavaScript.valueToCode(a,"HIGH",n.JavaScript.ORDER_NONE)||"Infinity")+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_random_int=function(a){var c=n.JavaScript.valueToCode(a,"FROM",n.JavaScript.ORDER_NONE)||"0";return a=n.JavaScript.valueToCode(a,"TO",n.JavaScript.ORDER_NONE)||"0",[n.JavaScript.provideFunction_("mathRandomInt",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+c+", "+a+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_random_float=function(a){return["Math.random()",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.math_atan2=function(a){var c=n.JavaScript.valueToCode(a,"X",n.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(n.JavaScript.valueToCode(a,"Y",n.JavaScript.ORDER_NONE)||"0")+", "+c+") / Math.PI * 180",n.JavaScript.ORDER_DIVISION]},n.JavaScript.procedures={},n.JavaScript.procedures_defreturn=function(a){var c=n.JavaScript.nameDB_.getName(a.getFieldValue("NAME"),n.PROCEDURE_CATEGORY_NAME),d="";n.JavaScript.STATEMENT_PREFIX&&(d+=n.JavaScript.injectId(n.JavaScript.STATEMENT_PREFIX,a)),n.JavaScript.STATEMENT_SUFFIX&&(d+=n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,a)),d&&(d=n.JavaScript.prefixLines(d,n.JavaScript.INDENT));var _="";n.JavaScript.INFINITE_LOOP_TRAP&&(_=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.INFINITE_LOOP_TRAP,a),n.JavaScript.INDENT));var y=n.JavaScript.statementToCode(a,"STACK"),R=n.JavaScript.valueToCode(a,"RETURN",n.JavaScript.ORDER_NONE)||"",x="";y&&R&&(x=d),R&&(R=n.JavaScript.INDENT+"return "+R+";\n");for(var B=[],H=a.getVars(),F=0;F<H.length;F++)B[F]=n.JavaScript.nameDB_.getName(H[F],n.VARIABLE_CATEGORY_NAME);return d="function "+c+"("+B.join(", ")+") {\n"+d+_+y+x+R+"}",d=n.JavaScript.scrub_(a,d),n.JavaScript.definitions_["%"+c]=d,null},n.JavaScript.procedures_defnoreturn=n.JavaScript.procedures_defreturn,n.JavaScript.procedures_callreturn=function(a){for(var c=n.JavaScript.nameDB_.getName(a.getFieldValue("NAME"),n.PROCEDURE_CATEGORY_NAME),d=[],_=a.getVars(),y=0;y<_.length;y++)d[y]=n.JavaScript.valueToCode(a,"ARG"+y,n.JavaScript.ORDER_NONE)||"null";return[c+"("+d.join(", ")+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.procedures_callnoreturn=function(a){return n.JavaScript.procedures_callreturn(a)[0]+";\n"},n.JavaScript.procedures_ifreturn=function(a){var c="if ("+(n.JavaScript.valueToCode(a,"CONDITION",n.JavaScript.ORDER_NONE)||"false")+") {\n";return n.JavaScript.STATEMENT_SUFFIX&&(c+=n.JavaScript.prefixLines(n.JavaScript.injectId(n.JavaScript.STATEMENT_SUFFIX,a),n.JavaScript.INDENT)),a.hasReturnValue_?(a=n.JavaScript.valueToCode(a,"VALUE",n.JavaScript.ORDER_NONE)||"null",c+=n.JavaScript.INDENT+"return "+a+";\n"):c+=n.JavaScript.INDENT+"return;\n",c+"}\n"},n.JavaScript.texts={},n.JavaScript.text=function(a){return[n.JavaScript.quote_(a.getFieldValue("TEXT")),n.JavaScript.ORDER_ATOMIC]},n.JavaScript.text_multiline=function(a){var c=-1!=(a=n.JavaScript.multiline_quote_(a.getFieldValue("TEXT"))).indexOf("+")?n.JavaScript.ORDER_ADDITION:n.JavaScript.ORDER_ATOMIC;return[a,c]},n.JavaScript.text.forceString_=function(a){return n.JavaScript.text.forceString_.strRegExp.test(a)?[a,n.JavaScript.ORDER_ATOMIC]:["String("+a+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,n.JavaScript.text_join=function(a){switch(a.itemCount_){case 0:return["''",n.JavaScript.ORDER_ATOMIC];case 1:return a=n.JavaScript.valueToCode(a,"ADD0",n.JavaScript.ORDER_NONE)||"''",n.JavaScript.text.forceString_(a);case 2:var c=n.JavaScript.valueToCode(a,"ADD0",n.JavaScript.ORDER_NONE)||"''";return a=n.JavaScript.valueToCode(a,"ADD1",n.JavaScript.ORDER_NONE)||"''",[a=n.JavaScript.text.forceString_(c)[0]+" + "+n.JavaScript.text.forceString_(a)[0],n.JavaScript.ORDER_ADDITION];default:c=Array(a.itemCount_);for(var d=0;d<a.itemCount_;d++)c[d]=n.JavaScript.valueToCode(a,"ADD"+d,n.JavaScript.ORDER_NONE)||"''";return[a="["+c.join(",")+"].join('')",n.JavaScript.ORDER_FUNCTION_CALL]}},n.JavaScript.text_append=function(a){var c=n.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME);return a=n.JavaScript.valueToCode(a,"TEXT",n.JavaScript.ORDER_NONE)||"''",c+" += "+n.JavaScript.text.forceString_(a)[0]+";\n"},n.JavaScript.text_length=function(a){return[(n.JavaScript.valueToCode(a,"VALUE",n.JavaScript.ORDER_MEMBER)||"''")+".length",n.JavaScript.ORDER_MEMBER]},n.JavaScript.text_isEmpty=function(a){return["!"+(n.JavaScript.valueToCode(a,"VALUE",n.JavaScript.ORDER_MEMBER)||"''")+".length",n.JavaScript.ORDER_LOGICAL_NOT]},n.JavaScript.text_indexOf=function(a){var c="FIRST"==a.getFieldValue("END")?"indexOf":"lastIndexOf",d=n.JavaScript.valueToCode(a,"FIND",n.JavaScript.ORDER_NONE)||"''";return c=(n.JavaScript.valueToCode(a,"VALUE",n.JavaScript.ORDER_MEMBER)||"''")+"."+c+"("+d+")",a.workspace.options.oneBasedIndex?[c+" + 1",n.JavaScript.ORDER_ADDITION]:[c,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_charAt=function(a){var c=a.getFieldValue("WHERE")||"FROM_START",d=n.JavaScript.valueToCode(a,"VALUE","RANDOM"==c?n.JavaScript.ORDER_NONE:n.JavaScript.ORDER_MEMBER)||"''";switch(c){case"FIRST":return[d+".charAt(0)",n.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[d+".slice(-1)",n.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[d+".charAt("+(a=n.JavaScript.getAdjusted(a,"AT"))+")",n.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[d+".slice("+(a=n.JavaScript.getAdjusted(a,"AT",1,!0))+").charAt(0)",n.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[n.JavaScript.provideFunction_("textRandomLetter",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+d+")",n.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},n.JavaScript.text.getIndex_=function(a,c,d){return"FIRST"==c?"0":"FROM_END"==c?a+".length - 1 - "+d:"LAST"==c?a+".length - 1":d},n.JavaScript.text_getSubstring=function(a){var c=a.getFieldValue("WHERE1"),d=a.getFieldValue("WHERE2"),_="FROM_END"!=c&&"LAST"!=c&&"FROM_END"!=d&&"LAST"!=d,y=n.JavaScript.valueToCode(a,"STRING",_?n.JavaScript.ORDER_MEMBER:n.JavaScript.ORDER_NONE)||"''";if("FIRST"==c&&"LAST"==d)return[y,n.JavaScript.ORDER_NONE];if(y.match(/^'?\w+'?$/)||_){switch(c){case"FROM_START":_=n.JavaScript.getAdjusted(a,"AT1");break;case"FROM_END":_=y+".length - "+(_=n.JavaScript.getAdjusted(a,"AT1",1,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":_="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(d){case"FROM_START":a=n.JavaScript.getAdjusted(a,"AT2",1);break;case"FROM_END":a=y+".length - "+(a=n.JavaScript.getAdjusted(a,"AT2",0,!1,n.JavaScript.ORDER_SUBTRACTION));break;case"LAST":a=y+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}c=y+".slice("+_+", "+a+")"}else{_=n.JavaScript.getAdjusted(a,"AT1"),a=n.JavaScript.getAdjusted(a,"AT2");var R=n.JavaScript.text.getIndex_,x={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};c=n.JavaScript.provideFunction_("subsequence"+x[c]+x[d],["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==c||"FROM_START"==c?", at1":"")+("FROM_END"==d||"FROM_START"==d?", at2":"")+") {","  var start = "+R("sequence",c,"at1")+";","  var end = "+R("sequence",d,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+y+("FROM_END"==c||"FROM_START"==c?", "+_:"")+("FROM_END"==d||"FROM_START"==d?", "+a:"")+")"}return[c,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_changeCase=function(a){var c={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[a.getFieldValue("CASE")];return a=n.JavaScript.valueToCode(a,"TEXT",c?n.JavaScript.ORDER_MEMBER:n.JavaScript.ORDER_NONE)||"''",[c?a+c:n.JavaScript.provideFunction_("textToTitleCase",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+a+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_trim=function(a){var c={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[a.getFieldValue("MODE")];return[(n.JavaScript.valueToCode(a,"TEXT",n.JavaScript.ORDER_MEMBER)||"''")+c,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_print=function(a){return"window.alert("+(n.JavaScript.valueToCode(a,"TEXT",n.JavaScript.ORDER_NONE)||"''")+");\n"},n.JavaScript.text_prompt_ext=function(a){var c="window.prompt("+(a.getField("TEXT")?n.JavaScript.quote_(a.getFieldValue("TEXT")):n.JavaScript.valueToCode(a,"TEXT",n.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==a.getFieldValue("TYPE")&&(c="Number("+c+")"),[c,n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_prompt=n.JavaScript.text_prompt_ext,n.JavaScript.text_count=function(a){var c=n.JavaScript.valueToCode(a,"TEXT",n.JavaScript.ORDER_NONE)||"''";return a=n.JavaScript.valueToCode(a,"SUB",n.JavaScript.ORDER_NONE)||"''",[n.JavaScript.provideFunction_("textCount",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+c+", "+a+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_replace=function(a){var c=n.JavaScript.valueToCode(a,"TEXT",n.JavaScript.ORDER_NONE)||"''",d=n.JavaScript.valueToCode(a,"FROM",n.JavaScript.ORDER_NONE)||"''";return a=n.JavaScript.valueToCode(a,"TO",n.JavaScript.ORDER_NONE)||"''",[n.JavaScript.provideFunction_("textReplace",["function "+n.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+c+", "+d+", "+a+")",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.text_reverse=function(a){return[(n.JavaScript.valueToCode(a,"TEXT",n.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",n.JavaScript.ORDER_FUNCTION_CALL]},n.JavaScript.variables={},n.JavaScript.variables_get=function(a){return[n.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME),n.JavaScript.ORDER_ATOMIC]},n.JavaScript.variables_set=function(a){var c=n.JavaScript.valueToCode(a,"VALUE",n.JavaScript.ORDER_ASSIGNMENT)||"0";return n.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),n.VARIABLE_CATEGORY_NAME)+" = "+c+";\n"},n.JavaScript.variablesDynamic={},n.JavaScript.variables_get_dynamic=n.JavaScript.variables_get,n.JavaScript.variables_set_dynamic=n.JavaScript.variables_set,n.JavaScript}.apply(A,w))&&(C.exports=o)},79841:function(C,A,g){var w,o;w=[g(82215)],void 0!==(o=function(n){return(n={Msg:{}}).Msg.ADD_COMMENT="Add Comment",n.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",n.Msg.CHANGE_VALUE_TITLE="Change value:",n.Msg.CLEAN_UP="Clean up Blocks",n.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",n.Msg.COLLAPSE_ALL="Collapse Blocks",n.Msg.COLLAPSE_BLOCK="Collapse Block",n.Msg.COLOUR_BLEND_COLOUR1="colour 1",n.Msg.COLOUR_BLEND_COLOUR2="colour 2",n.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",n.Msg.COLOUR_BLEND_RATIO="ratio",n.Msg.COLOUR_BLEND_TITLE="blend",n.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",n.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",n.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",n.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",n.Msg.COLOUR_RANDOM_TITLE="random colour",n.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",n.Msg.COLOUR_RGB_BLUE="blue",n.Msg.COLOUR_RGB_GREEN="green",n.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",n.Msg.COLOUR_RGB_RED="red",n.Msg.COLOUR_RGB_TITLE="colour with",n.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",n.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",n.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",n.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",n.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",n.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",n.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",n.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",n.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",n.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",n.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",n.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",n.Msg.CONTROLS_IF_MSG_ELSE="else",n.Msg.CONTROLS_IF_MSG_ELSEIF="else if",n.Msg.CONTROLS_IF_MSG_IF="if",n.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",n.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",n.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",n.Msg.CONTROLS_REPEAT_INPUT_DO="do",n.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",n.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",n.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",n.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",n.Msg.DELETE_BLOCK="Delete Block",n.Msg.DELETE_VARIABLE="Delete the '%1' variable",n.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",n.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",n.Msg.DISABLE_BLOCK="Disable Block",n.Msg.DUPLICATE_BLOCK="Duplicate",n.Msg.DUPLICATE_COMMENT="Duplicate Comment",n.Msg.ENABLE_BLOCK="Enable Block",n.Msg.EXPAND_ALL="Expand Blocks",n.Msg.EXPAND_BLOCK="Expand Block",n.Msg.EXTERNAL_INPUTS="External Inputs",n.Msg.HELP="Help",n.Msg.INLINE_INPUTS="Inline Inputs",n.Msg.IOS_CANCEL="Cancel",n.Msg.IOS_ERROR="Error",n.Msg.IOS_OK="OK",n.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",n.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",n.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",n.Msg.IOS_PROCEDURES_INPUTS="INPUTS",n.Msg.IOS_VARIABLES_ADD_BUTTON="Add",n.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",n.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",n.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",n.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",n.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",n.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",n.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",n.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",n.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",n.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",n.Msg.LISTS_GET_INDEX_FIRST="first",n.Msg.LISTS_GET_INDEX_FROM_END="# from end",n.Msg.LISTS_GET_INDEX_FROM_START="#",n.Msg.LISTS_GET_INDEX_GET="get",n.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",n.Msg.LISTS_GET_INDEX_LAST="last",n.Msg.LISTS_GET_INDEX_RANDOM="random",n.Msg.LISTS_GET_INDEX_REMOVE="remove",n.Msg.LISTS_GET_INDEX_TAIL="",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",n.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",n.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",n.Msg.LISTS_GET_SUBLIST_END_LAST="to last",n.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",n.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",n.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",n.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",n.Msg.LISTS_GET_SUBLIST_TAIL="",n.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",n.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",n.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",n.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",n.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",n.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",n.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",n.Msg.LISTS_INLIST="in list",n.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",n.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",n.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",n.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",n.Msg.LISTS_LENGTH_TITLE="length of %1",n.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",n.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",n.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",n.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",n.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",n.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",n.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",n.Msg.LISTS_SET_INDEX_INPUT_TO="as",n.Msg.LISTS_SET_INDEX_INSERT="insert at",n.Msg.LISTS_SET_INDEX_SET="set",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",n.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",n.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",n.Msg.LISTS_SORT_ORDER_DESCENDING="descending",n.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",n.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",n.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",n.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",n.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",n.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",n.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",n.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",n.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",n.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",n.Msg.LOGIC_BOOLEAN_FALSE="false",n.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",n.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",n.Msg.LOGIC_BOOLEAN_TRUE="true",n.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",n.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",n.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",n.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",n.Msg.LOGIC_NEGATE_TITLE="not %1",n.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",n.Msg.LOGIC_NULL="null",n.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",n.Msg.LOGIC_NULL_TOOLTIP="Returns null.",n.Msg.LOGIC_OPERATION_AND="and",n.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",n.Msg.LOGIC_OPERATION_OR="or",n.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",n.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",n.Msg.LOGIC_TERNARY_CONDITION="test",n.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",n.Msg.LOGIC_TERNARY_IF_FALSE="if false",n.Msg.LOGIC_TERNARY_IF_TRUE="if true",n.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",n.Msg.MATH_ADDITION_SYMBOL="+",n.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",n.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",n.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",n.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",n.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",n.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",n.Msg.MATH_CHANGE_TITLE="change %1 by %2",n.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",n.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",n.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",n.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",n.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",n.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",n.Msg.MATH_DIVISION_SYMBOL="\xf7",n.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",n.Msg.MATH_IS_EVEN="is even",n.Msg.MATH_IS_NEGATIVE="is negative",n.Msg.MATH_IS_ODD="is odd",n.Msg.MATH_IS_POSITIVE="is positive",n.Msg.MATH_IS_PRIME="is prime",n.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",n.Msg.MATH_IS_WHOLE="is whole",n.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",n.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",n.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",n.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",n.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",n.Msg.MATH_NUMBER_TOOLTIP="A number.",n.Msg.MATH_ONLIST_HELPURL="",n.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",n.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",n.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",n.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",n.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",n.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",n.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",n.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",n.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",n.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",n.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",n.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",n.Msg.MATH_POWER_SYMBOL="^",n.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",n.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",n.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",n.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",n.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",n.Msg.MATH_ROUND_OPERATOR_ROUND="round",n.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",n.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",n.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",n.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",n.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",n.Msg.MATH_SINGLE_OP_ROOT="square root",n.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",n.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",n.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",n.Msg.MATH_SUBTRACTION_SYMBOL="-",n.Msg.MATH_TRIG_ACOS="acos",n.Msg.MATH_TRIG_ASIN="asin",n.Msg.MATH_TRIG_ATAN="atan",n.Msg.MATH_TRIG_COS="cos",n.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",n.Msg.MATH_TRIG_SIN="sin",n.Msg.MATH_TRIG_TAN="tan",n.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",n.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",n.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",n.Msg.NEW_NUMBER_VARIABLE="Create number variable...",n.Msg.NEW_STRING_VARIABLE="Create string variable...",n.Msg.NEW_VARIABLE="Create variable...",n.Msg.NEW_VARIABLE_TITLE="New variable name:",n.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",n.Msg.ORDINAL_NUMBER_SUFFIX="",n.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",n.Msg.PROCEDURES_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",n.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",n.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CREATE_DO="Create '%1'",n.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",n.Msg.PROCEDURES_DEFNORETURN_DO="",n.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",n.Msg.PROCEDURES_DEFNORETURN_TITLE="to",n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",n.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFRETURN_RETURN="return",n.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",n.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",n.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",n.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",n.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",n.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",n.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",n.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",n.Msg.REDO="Redo",n.Msg.REMOVE_COMMENT="Remove Comment",n.Msg.RENAME_VARIABLE="Rename variable...",n.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",n.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_APPEND_TITLE="to %1 append text %2",n.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",n.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",n.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",n.Msg.TEXT_CHARAT_FIRST="get first letter",n.Msg.TEXT_CHARAT_FROM_END="get letter # from end",n.Msg.TEXT_CHARAT_FROM_START="get letter #",n.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",n.Msg.TEXT_CHARAT_LAST="get last letter",n.Msg.TEXT_CHARAT_RANDOM="get random letter",n.Msg.TEXT_CHARAT_TAIL="",n.Msg.TEXT_CHARAT_TITLE="in text %1 %2",n.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",n.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",n.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",n.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",n.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",n.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",n.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",n.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",n.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",n.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",n.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",n.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",n.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",n.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",n.Msg.TEXT_GET_SUBSTRING_TAIL="",n.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",n.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",n.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",n.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",n.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",n.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",n.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",n.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",n.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",n.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",n.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",n.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",n.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_LENGTH_TITLE="length of %1",n.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",n.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",n.Msg.TEXT_PRINT_TITLE="print %1",n.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",n.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",n.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",n.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",n.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",n.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",n.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",n.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",n.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",n.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",n.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",n.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",n.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",n.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",n.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",n.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",n.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",n.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",n.Msg.TODAY="Today",n.Msg.UNDO="Undo",n.Msg.UNNAMED_KEY="unnamed",n.Msg.VARIABLES_DEFAULT_NAME="item",n.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",n.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",n.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",n.Msg.VARIABLES_SET="set %1 to %2",n.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",n.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",n.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",n.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",n.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",n.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",n.Msg.CONTROLS_FOREACH_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_FOR_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=n.Msg.CONTROLS_IF_MSG_ELSEIF,n.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=n.Msg.CONTROLS_IF_MSG_ELSE,n.Msg.CONTROLS_IF_IF_TITLE_IF=n.Msg.CONTROLS_IF_MSG_IF,n.Msg.CONTROLS_IF_MSG_THEN=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.LISTS_CREATE_WITH_ITEM_TITLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.LISTS_GET_INDEX_HELPURL=n.Msg.LISTS_INDEX_OF_HELPURL,n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.MATH_CHANGE_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.PROCEDURES_DEFRETURN_COMMENT=n.Msg.PROCEDURES_DEFNORETURN_COMMENT,n.Msg.PROCEDURES_DEFRETURN_DO=n.Msg.PROCEDURES_DEFNORETURN_DO,n.Msg.PROCEDURES_DEFRETURN_PROCEDURE=n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,n.Msg.PROCEDURES_DEFRETURN_TITLE=n.Msg.PROCEDURES_DEFNORETURN_TITLE,n.Msg.TEXT_APPEND_VARIABLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.MATH_HUE="230",n.Msg.LOOPS_HUE="120",n.Msg.LISTS_HUE="260",n.Msg.LOGIC_HUE="210",n.Msg.VARIABLES_HUE="330",n.Msg.TEXTS_HUE="160",n.Msg.PROCEDURES_HUE="290",n.Msg.COLOUR_HUE="20",n.Msg.VARIABLES_DYNAMIC_HUE="310",n.Msg}.apply(A,w))&&(C.exports=o)},8309:(C,A,g)=>{"use strict";function b(r){return"function"==typeof r}function w(r){const e=r(s=>{Error.call(s),s.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const o=w(r=>function(e){r(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((s,l)=>`${l+1}) ${s.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function n(r,t){if(r){const e=r.indexOf(t);0<=e&&r.splice(e,1)}}class a{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const u of e)u.remove(this);else e.remove(this);const{initialTeardown:s}=this;if(b(s))try{s()}catch(u){t=u instanceof o?u.errors:[u]}const{_teardowns:l}=this;if(l){this._teardowns=null;for(const u of l)try{_(u)}catch(h){t=null!=t?t:[],h instanceof o?t=[...t,...h.errors]:t.push(h)}}if(t)throw new o(t)}}add(t){var e;if(t&&t!==this)if(this.closed)_(t);else{if(t instanceof a){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(e=this._teardowns)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&n(e,t)}remove(t){const{_teardowns:e}=this;e&&n(e,t),t instanceof a&&t._removeParent(this)}}a.EMPTY=(()=>{const r=new a;return r.closed=!0,r})();const c=a.EMPTY;function d(r){return r instanceof a||r&&"closed"in r&&b(r.remove)&&b(r.add)&&b(r.unsubscribe)}function _(r){b(r)?r():r.unsubscribe()}const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},R={setTimeout(...r){const{delegate:t}=R;return((null==t?void 0:t.setTimeout)||setTimeout)(...r)},clearTimeout(r){const{delegate:t}=R;return((null==t?void 0:t.clearTimeout)||clearTimeout)(r)},delegate:void 0};function x(r){R.setTimeout(()=>{const{onUnhandledError:t}=y;if(!t)throw r;t(r)})}function B(){}const H=z("C",void 0,void 0);function z(r,t,e){return{kind:r,value:t,error:e}}let G=null;function ie(r){if(y.useDeprecatedSynchronousErrorHandling){const t=!G;if(t&&(G={errorThrown:!1,error:null}),r(),t){const{errorThrown:e,error:s}=G;if(G=null,e)throw s}}else r()}class re extends a{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,d(t)&&t.add(this)):this.destination=k}static create(t,e,s){return new $(t,e,s)}next(t){this.isStopped?j(z("N",t,void 0),this):this._next(t)}error(t){this.isStopped?j(z("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?j(H,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class $ extends re{constructor(t,e,s){let l;if(super(),b(t))l=t;else if(t){let u;({next:l,error:e,complete:s}=t),this&&y.useDeprecatedNextContext?(u=Object.create(t),u.unsubscribe=()=>this.unsubscribe()):u=t,l=null==l?void 0:l.bind(u),e=null==e?void 0:e.bind(u),s=null==s?void 0:s.bind(u)}this.destination={next:l?ae(l):B,error:ae(null!=e?e:K),complete:s?ae(s):B}}}function ae(r,t){return(...e)=>{try{r(...e)}catch(s){y.useDeprecatedSynchronousErrorHandling?function(r){y.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=r)}(s):x(s)}}}function K(r){throw r}function j(r,t){const{onStoppedNotification:e}=y;e&&R.setTimeout(()=>e(r,t))}const k={closed:!0,next:B,error:K,complete:B},oe="function"==typeof Symbol&&Symbol.observable||"@@observable";function W(r){return r}let ee=(()=>{class r{constructor(e){e&&(this._subscribe=e)}lift(e){const s=new r;return s.source=this,s.operator=e,s}subscribe(e,s,l){const u=function(r){return r&&r instanceof re||function(r){return r&&b(r.next)&&b(r.error)&&b(r.complete)}(r)&&d(r)}(e)?e:new $(e,s,l);return ie(()=>{const{operator:h,source:p}=this;u.add(h?h.call(u,p):p?this._subscribe(u):this._trySubscribe(u))}),u}_trySubscribe(e){try{return this._subscribe(e)}catch(s){e.error(s)}}forEach(e,s){return new(s=me(s))((l,u)=>{let h;h=this.subscribe(p=>{try{e(p)}catch(m){u(m),null==h||h.unsubscribe()}},u,l)})}_subscribe(e){var s;return null===(s=this.source)||void 0===s?void 0:s.subscribe(e)}[oe](){return this}pipe(...e){return function(r){return 0===r.length?W:1===r.length?r[0]:function(e){return r.reduce((s,l)=>l(s),e)}}(e)(this)}toPromise(e){return new(e=me(e))((s,l)=>{let u;this.subscribe(h=>u=h,h=>l(h),()=>s(u))})}}return r.create=t=>new r(t),r})();function me(r){var t;return null!==(t=null!=r?r:y.Promise)&&void 0!==t?t:Promise}const Ee=w(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let we=(()=>{class r extends ee{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const s=new fe(this,this);return s.operator=e,s}_throwIfClosed(){if(this.closed)throw new Ee}next(e){ie(()=>{if(this._throwIfClosed(),!this.isStopped){const s=this.observers.slice();for(const l of s)l.next(e)}})}error(e){ie(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:s}=this;for(;s.length;)s.shift().error(e)}})}complete(){ie(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:s,isStopped:l,observers:u}=this;return s||l?c:(u.push(e),new a(()=>n(u,e)))}_checkFinalizedStatuses(e){const{hasError:s,thrownError:l,isStopped:u}=this;s?e.error(l):u&&e.complete()}asObservable(){const e=new ee;return e.source=this,e}}return r.create=(t,e)=>new fe(t,e),r})();class fe extends we{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===s||s.call(e,t)}error(t){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===s||s.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,s;return null!==(s=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==s?s:c}}function Re(r){return b(null==r?void 0:r.lift)}function Te(r){return t=>{if(Re(t))return t.lift(function(e){try{return r(e,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}class Ie extends re{constructor(t,e,s,l,u){super(t),this.onFinalize=u,this._next=e?function(h){try{e(h)}catch(p){t.error(p)}}:super._next,this._error=l?function(h){try{l(h)}catch(p){t.error(p)}finally{this.unsubscribe()}}:super._error,this._complete=s?function(){try{s()}catch(h){t.error(h)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function xe(r,t){return Te((e,s)=>{let l=0;e.subscribe(new Ie(s,u=>{s.next(r.call(t,u,l++))}))})}function Pn(r){return this instanceof Pn?(this.v=r,this):new Pn(r)}function Qn(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,s=e.apply(r,t||[]),u=[];return l={},h("next"),h("throw"),h("return"),l[Symbol.asyncIterator]=function(){return this},l;function h(O){s[O]&&(l[O]=function(N){return new Promise(function(V,Q){u.push([O,N,V,Q])>1||p(O,N)})})}function p(O,N){try{!function(O){O.value instanceof Pn?Promise.resolve(O.value.v).then(v,T):I(u[0][2],O)}(s[O](N))}catch(V){I(u[0][3],V)}}function v(O){p("next",O)}function T(O){p("throw",O)}function I(O,N){O(N),u.shift(),u.length&&p(u[0][0],u[0][1])}}function ve(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=r[Symbol.asyncIterator];return t?t.call(r):(r=function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],s=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(u){e[u]=r[u]&&function(h){return new Promise(function(p,m){!function(u,h,p,m){Promise.resolve(m).then(function(v){u({value:v,done:p})},h)}(p,m,(h=r[u](h)).done,h.value)})}}}const Mt=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function We(r){return b(null==r?void 0:r.then)}function ze(r){return b(r[oe])}function Ce(r){return Symbol.asyncIterator&&b(null==r?void 0:r[Symbol.asyncIterator])}function Ve(r){return new TypeError(`You provided ${null!==r&&"object"==typeof r?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ye="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Be(r){return b(null==r?void 0:r[ye])}function je(r){return Qn(this,arguments,function*(){const e=r.getReader();try{for(;;){const{value:s,done:l}=yield Pn(e.read());if(l)return yield Pn(void 0);yield yield Pn(s)}}finally{e.releaseLock()}})}function zt(r){return b(null==r?void 0:r.getReader)}function Xe(r){if(r instanceof ee)return r;if(null!=r){if(ze(r))return function(r){return new ee(t=>{const e=r[oe]();if(b(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(r);if(Mt(r))return function(r){return new ee(t=>{for(let e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}(r);if(We(r))return function(r){return new ee(t=>{r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,x)})}(r);if(Ce(r))return kn(r);if(Be(r))return function(r){return new ee(t=>{for(const e of r)if(t.next(e),t.closed)return;t.complete()})}(r);if(zt(r))return function(r){return kn(je(r))}(r)}throw Ve(r)}function kn(r){return new ee(t=>{(function(r,t){var e,s,l,u;return function(r,t,e,s){return new(e||(e=Promise))(function(u,h){function p(T){try{v(s.next(T))}catch(I){h(I)}}function m(T){try{v(s.throw(T))}catch(I){h(I)}}function v(T){T.done?u(T.value):function(u){return u instanceof e?u:new e(function(h){h(u)})}(T.value).then(p,m)}v((s=s.apply(r,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=ve(r);!(s=yield e.next()).done;)if(t.next(s.value),t.closed)return}catch(h){l={error:h}}finally{try{s&&!s.done&&(u=e.return)&&(yield u.call(e))}finally{if(l)throw l.error}}t.complete()})})(r,t).catch(e=>t.error(e))})}function Ti(r,t,e,s=0,l=!1){const u=t.schedule(function(){e(),l?r.add(this.schedule(null,s)):this.unsubscribe()},s);if(r.add(u),!l)return u}function Fn(r,t,e=1/0){return b(t)?Fn((s,l)=>xe((u,h)=>t(s,u,l,h))(Xe(r(s,l))),e):("number"==typeof t&&(e=t),Te((s,l)=>function(r,t,e,s,l,u,h,p){const m=[];let v=0,T=0,I=!1;const O=()=>{I&&!m.length&&!v&&t.complete()},N=Q=>v<s?V(Q):m.push(Q),V=Q=>{v++;let X=!1;Xe(e(Q,T++)).subscribe(new Ie(t,ue=>{t.next(ue)},()=>{X=!0},void 0,()=>{if(X)try{for(v--;m.length&&v<s;){const ue=m.shift();V(ue)}O()}catch(ue){t.error(ue)}}))};return r.subscribe(new Ie(t,N,()=>{I=!0,O()})),()=>{}}(s,l,r,e)))}function io(r=1/0){return Fn(W,r)}const Pr=new ee(r=>r.complete());function pc(r){return r&&b(r.schedule)}function fc(r){return r[r.length-1]}function Sd(r){return b(fc(r))?r.pop():void 0}function Ma(r){return pc(fc(r))?r.pop():void 0}function Rd(r,t=0){return Te((e,s)=>{e.subscribe(new Ie(s,l=>Ti(s,r,()=>s.next(l),t),()=>Ti(s,r,()=>s.complete(),t),l=>Ti(s,r,()=>s.error(l),t)))})}function Id(r,t=0){return Te((e,s)=>{s.add(r.schedule(()=>e.subscribe(s),t))})}function Ad(r,t){if(!r)throw new Error("Iterable cannot be null");return new ee(e=>{Ti(e,t,()=>{const s=r[Symbol.asyncIterator]();Ti(e,t,()=>{s.next().then(l=>{l.done?e.complete():e.next(l.value)})},0,!0)})})}function pi(r,t){return t?function(r,t){if(null!=r){if(ze(r))return function(r,t){return Xe(r).pipe(Id(t),Rd(t))}(r,t);if(Mt(r))return function(r,t){return new ee(e=>{let s=0;return t.schedule(function(){s===r.length?e.complete():(e.next(r[s++]),e.closed||this.schedule())})})}(r,t);if(We(r))return function(r,t){return Xe(r).pipe(Id(t),Rd(t))}(r,t);if(Ce(r))return Ad(r,t);if(Be(r))return function(r,t){return new ee(e=>{let s;return Ti(e,t,()=>{s=r[ye](),Ti(e,t,()=>{let l,u;try{({value:l,done:u}=s.next())}catch(h){return void e.error(h)}u?e.complete():e.next(l)},0,!0)}),()=>b(null==s?void 0:s.return)&&s.return()})}(r,t);if(zt(r))return function(r,t){return Ad(je(r),t)}(r,t)}throw Ve(r)}(r,t):Xe(r)}function Ws(...r){const t=Ma(r),e=function(r,t){return"number"==typeof fc(r)?r.pop():1/0}(r),s=r;return s.length?1===s.length?Xe(s[0]):io(e)(pi(s,t)):Pr}function Fr(r){return r<=0?()=>Pr:Te((t,e)=>{let s=0;t.subscribe(new Ie(e,l=>{++s<=r&&(e.next(l),r<=s&&e.complete())}))})}function gc(r,t,...e){return!0===t?(r(),null):!1===t?null:t(...e).pipe(Fr(1)).subscribe(()=>r())}function pn(r){for(let t in r)if(r[t]===pn)return t;throw Error("Could not find renamed property on target object.")}function mc(r,t){for(const e in t)t.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=t[e])}function Vt(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Vt).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Al(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const Od=pn({__forward_ref__:pn});function bn(r){return r.__forward_ref__=bn,r.toString=function(){return Vt(this())},r}function dt(r){return _c(r)?r():r}function _c(r){return"function"==typeof r&&r.hasOwnProperty(Od)&&r.__forward_ref__===bn}class as extends Error{constructor(t,e){super(function(r,t){return`${r?`NG0${r}: `:""}${t}`}(t,e)),this.code=t}}function Rt(r){return"string"==typeof r?r:null==r?"":String(r)}function Ri(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Rt(r)}function Ml(r,t){const e=t?` in ${t}`:"";throw new as("201",`No provider for ${Ri(r)} found${e}`)}function ir(r,t){null==r&&function(r,t,e,s){throw new Error(`ASSERTION ERROR: ${r}`+(null==s?"":` [Expected=> ${e} ${s} ${t} <=Actual]`))}(t,r,null,"!=")}function st(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function fn(r){return{providers:r.providers||[],imports:r.imports||[]}}function Sr(r){return xd(r,xl)||xd(r,bc)}function xd(r,t){return r.hasOwnProperty(t)?r[t]:null}function kd(r){return r&&(r.hasOwnProperty(Nl)||r.hasOwnProperty(Ld))?r[Nl]:null}const xl=pn({\u0275prov:pn}),Nl=pn({\u0275inj:pn}),bc=pn({ngInjectableDef:pn}),Ld=pn({ngInjectorDef:pn});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let oo;function rr(r){const t=oo;return oo=r,t}function Pd(r,t,e){const s=Sr(r);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:e&at.Optional?null:void 0!==t?t:void Ml(Vt(r),"Injector")}function ko(r){return{toString:r}.toString()}var or=(()=>((or=or||{})[or.OnPush=0]="OnPush",or[or.Default=1]="Default",or))(),Li=(()=>{return(r=Li||(Li={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",Li;var r})();const js="undefined"!=typeof globalThis&&globalThis,hm="undefined"!=typeof window&&window,Fd="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,tn=js||"undefined"!=typeof global&&global||hm||Fd,cs={},nn=[],zs=pn({\u0275cmp:pn}),Kn=pn({\u0275dir:pn}),Xs=pn({\u0275pipe:pn}),kl=pn({\u0275mod:pn}),so=pn({\u0275fac:pn}),xa=pn({__NG_ELEMENT_ID__:pn});let pm=0;function Br(r){return ko(()=>{const e={},s={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===or.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||nn,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Li.Emulated,id:"c",styles:r.styles||nn,_:null,setInput:null,schemas:r.schemas||null,tView:null},l=r.directives,u=r.features,h=r.pipes;return s.id+=pm++,s.inputs=hs(r.inputs,e),s.outputs=hs(r.outputs),u&&u.forEach(p=>p(s)),s.directiveDefs=l?()=>("function"==typeof l?l():l).map(Ec):null,s.pipeDefs=h?()=>("function"==typeof h?h():h).map(Bd):null,s})}function Ec(r){return Ii(r)||function(r){return r[Kn]||null}(r)}function Bd(r){return function(r){return r[Xs]||null}(r)}const Vd={};function Bn(r){return ko(()=>{const t={type:r.type,bootstrap:r.bootstrap||nn,declarations:r.declarations||nn,imports:r.imports||nn,exports:r.exports||nn,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(Vd[r.id]=r.type),t})}function hs(r,t){if(null==r)return cs;const e={};for(const s in r)if(r.hasOwnProperty(s)){let l=r[s],u=l;Array.isArray(l)&&(u=l[1],l=l[0]),e[l]=s,t&&(t[l]=u)}return e}const _t=Br;function Pi(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Ii(r){return r[zs]||null}function fr(r,t){const e=r[kl]||null;if(!e&&!0===t)throw new Error(`Type ${Vt(r)} does not have '\u0275mod' property.`);return e}function Vr(r){return Array.isArray(r)&&"object"==typeof r[1]}function Ir(r){return Array.isArray(r)&&!0===r[1]}function Sc(r){return 0!=(8&r.flags)}function Fl(r){return 2==(2&r.flags)}function Vo(r){return 1==(1&r.flags)}function Dr(r){return null!==r.template}function Ud(r){return 0!=(512&r[2])}function gs(r,t){return r.hasOwnProperty(so)?r[so]:null}class Rc{constructor(t,e,s){this.previousValue=t,this.currentValue=e,this.firstChange=s}isFirstChange(){return this.firstChange}}function Di(){return jd}function jd(r){return r.type.prototype.ngOnChanges&&(r.setInput=ao),zd}function zd(){const r=Gl(this),t=null==r?void 0:r.current;if(t){const e=r.previous;if(e===cs)r.previous=t;else for(let s in t)e[s]=t[s];r.current=null,this.ngOnChanges(t)}}function ao(r,t,e,s){const l=Gl(r)||function(r,t){return r[Xd]=t}(r,{previous:cs,current:null}),u=l.current||(l.current={}),h=l.previous,p=this.declaredInputs[e],m=h[p];u[p]=new Rc(m&&m.currentValue,t,h===cs),r[s]=t}Di.ngInherit=!0;const Xd="__ngSimpleChanges__";function Gl(r){return r[Xd]||null}const Kd="http://www.w3.org/2000/svg";let Dc;function Yn(r){return!!r.listen}const $d={createRenderer:(r,t)=>void 0!==Dc?Dc:"undefined"!=typeof document?document:void 0};function ri(r){for(;Array.isArray(r);)r=r[0];return r}function Wl(r,t){return ri(t[r])}function gr(r,t){return ri(t[r.index])}function jl(r,t){return r.data[t]}function Js(r,t){return r[t]}function Xi(r,t){const e=t[r];return Vr(e)?e:e[0]}function Pa(r){return 4==(4&r[2])}function zl(r){return 128==(128&r[2])}function Ho(r,t){return null==t?null:r[t]}function Jd(r){r[18]=0}function lo(r,t){r[5]+=t;let e=r,s=r[3];for(;null!==s&&(1===t&&1===e[5]||-1===t&&0===e[5]);)s[5]+=t,e=s,s=s[3]}const Tt={lFrame:np(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Xl(){return Tt.bindingsEnabled}function Pe(){return Tt.lFrame.lView}function Zt(){return Tt.lFrame.tView}function Zs(r){return Tt.lFrame.contextLView=r,r[8]}function qn(){let r=Fa();for(;null!==r&&64===r.type;)r=r.parent;return r}function Fa(){return Tt.lFrame.currentTNode}function Ur(r,t){const e=Tt.lFrame;e.currentTNode=r,e.isParent=t}function Oc(){return Tt.lFrame.isParent}function Kl(){Tt.lFrame.isParent=!1}function qs(){return Tt.isInCheckNoChangesMode}function Ba(r){Tt.isInCheckNoChangesMode=r}function Fi(){const r=Tt.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}function uo(){return Tt.lFrame.bindingIndex}function _s(){return Tt.lFrame.bindingIndex++}function co(r){const t=Tt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function Fm(r,t){const e=Tt.lFrame;e.bindingIndex=e.bindingRootIndex=r,Yl(t)}function Yl(r){Tt.lFrame.currentDirectiveIndex=r}function ep(){return Tt.lFrame.currentQueryIndex}function Nc(r){Tt.lFrame.currentQueryIndex=r}function Bm(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function Uo(r,t,e){if(e&at.SkipSelf){let l=t,u=r;for(;!(l=l.parent,null!==l||e&at.Host||(l=Bm(u),null===l||(u=u[15],10&l.type))););if(null===l)return!1;t=l,r=u}const s=Tt.lFrame=tp();return s.currentTNode=t,s.lView=r,!0}function Jl(r){const t=tp(),e=r[1];Tt.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function tp(){const r=Tt.lFrame,t=null===r?null:r.child;return null===t?np(r):t}function np(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function ip(){const r=Tt.lFrame;return Tt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Va=ip;function ea(){const r=ip();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Wn(){return Tt.lFrame.selectedIndex}function ho(r){Tt.lFrame.selectedIndex=r}function jn(){const r=Tt.lFrame;return jl(r.tView,r.selectedIndex)}function po(r,t){for(let e=t.directiveStart,s=t.directiveEnd;e<s;e++){const u=r.data[e].type.prototype,{ngAfterContentInit:h,ngAfterContentChecked:p,ngAfterViewInit:m,ngAfterViewChecked:v,ngOnDestroy:T}=u;h&&(r.contentHooks||(r.contentHooks=[])).push(-e,h),p&&((r.contentHooks||(r.contentHooks=[])).push(e,p),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(e,p)),m&&(r.viewHooks||(r.viewHooks=[])).push(-e,m),v&&((r.viewHooks||(r.viewHooks=[])).push(e,v),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(e,v)),null!=T&&(r.destroyHooks||(r.destroyHooks=[])).push(e,T)}}function Ql(r,t,e){Wo(r,t,3,e)}function Go(r,t,e,s){(3&r[2])===e&&Wo(r,t,e,s)}function fo(r,t){let e=r[2];(3&e)===t&&(e&=2047,e+=1,r[2]=e)}function Wo(r,t,e,s){const u=null!=s?s:-1,h=t.length-1;let p=0;for(let m=void 0!==s?65535&r[18]:0;m<h;m++)if("number"==typeof t[m+1]){if(p=t[m],null!=s&&p>=s)break}else t[m]<0&&(r[18]+=65536),(p<u||-1==u)&&(Um(r,e,t,m),r[18]=(4294901760&r[18])+m+2),m++}function Um(r,t,e,s){const l=e[s]<0,u=e[s+1],p=r[l?-e[s]:e[s]];if(l){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{u.call(p)}finally{}}}else try{u.call(p)}finally{}}class ta{constructor(t,e,s){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=s}}function Zl(r,t,e){const s=Yn(r);let l=0;for(;l<e.length;){const u=e[l];if("number"==typeof u){if(0!==u)break;l++;const h=e[l++],p=e[l++],m=e[l++];s?r.setAttribute(t,p,m,h):t.setAttributeNS(h,p,m)}else{const h=u,p=e[++l];Ga(h)?s&&r.setProperty(t,h,p):s?r.setAttribute(t,h,p):t.setAttribute(h,p),l++}}return l}function ql(r){return 3===r||4===r||6===r}function Ga(r){return 64===r.charCodeAt(0)}function eu(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let e=-1;for(let s=0;s<t.length;s++){const l=t[s];"number"==typeof l?e=l:0===e||jm(r,e,l,null,-1===e||2===e?t[++s]:null)}}return r}function jm(r,t,e,s,l){let u=0,h=r.length;if(-1===t)h=-1;else for(;u<r.length;){const p=r[u++];if("number"==typeof p){if(p===t){h=-1;break}if(p>t){h=u-1;break}}}for(;u<r.length;){const p=r[u];if("number"==typeof p)break;if(p===e){if(null===s)return void(null!==l&&(r[u+1]=l));if(s===r[u+1])return void(r[u+2]=l)}u++,null!==s&&u++,null!==l&&u++}-1!==h&&(r.splice(h,0,t),u=h+1),r.splice(u++,0,e),null!==s&&r.splice(u++,0,s),null!==l&&r.splice(u++,0,l)}function sp(r){return-1!==r}function na(r){return 32767&r}function ia(r,t){let e=function(r){return r>>16}(r),s=t;for(;e>0;)s=s[15],e--;return s}let an=!0;function tu(r){const t=an;return an=r,t}let Km=0;function Wa(r,t){const e=Vc(r,t);if(-1!==e)return e;const s=t[1];s.firstCreatePass&&(r.injectorIndex=t.length,Bc(s.data,r),Bc(t,null),Bc(s.blueprint,null));const l=iu(r,t),u=r.injectorIndex;if(sp(l)){const h=na(l),p=ia(l,t),m=p[1].data;for(let v=0;v<8;v++)t[u+v]=p[h+v]|m[h+v]}return t[u+8]=l,u}function Bc(r,t){r.push(0,0,0,0,0,0,0,0,t)}function Vc(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function iu(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let e=0,s=null,l=t;for(;null!==l;){const u=l[1],h=u.type;if(s=2===h?u.declTNode:1===h?l[6]:null,null===s)return-1;if(e++,l=l[15],-1!==s.injectorIndex)return s.injectorIndex|e<<16}return-1}function ja(r,t,e){!function(r,t,e){let s;"string"==typeof e?s=e.charCodeAt(0)||0:e.hasOwnProperty(xa)&&(s=e[xa]),null==s&&(s=e[xa]=Km++);const l=255&s;t.data[r+(l>>5)]|=1<<l}(r,t,e)}function ru(r,t,e){if(e&at.Optional)return r;Ml(t,"NodeInjector")}function lp(r,t,e,s){if(e&at.Optional&&void 0===s&&(s=null),0==(e&(at.Self|at.Host))){const l=r[9],u=rr(void 0);try{return l?l.get(t,s,e&at.Optional):Pd(t,s,e&at.Optional)}finally{rr(u)}}return ru(s,t,e)}function up(r,t,e,s=at.Default,l){if(null!==r){const u=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(xa)?r[xa]:void 0;return"number"==typeof t?t>=0?255&t:hp:t}(e);if("function"==typeof u){if(!Uo(t,r,s))return s&at.Host?ru(l,e,s):lp(t,e,s,l);try{const h=u(s);if(null!=h||s&at.Optional)return h;Ml(e)}finally{Va()}}else if("number"==typeof u){let h=null,p=Vc(r,t),m=-1,v=s&at.Host?t[16][6]:null;for((-1===p||s&at.SkipSelf)&&(m=-1===p?iu(r,t):t[p+8],-1!==m&&dp(s,!1)?(h=t[1],p=na(m),t=ia(m,t)):p=-1);-1!==p;){const T=t[1];if(Uc(u,p,T.data)){const I=za(p,t,e,h,s,v);if(I!==cp)return I}m=t[p+8],-1!==m&&dp(s,t[1].data[p+8]===v)&&Uc(u,p,t)?(h=T,p=na(m),t=ia(m,t)):p=-1}}}return lp(t,e,s,l)}const cp={};function hp(){return new vs(qn(),Pe())}function za(r,t,e,s,l,u){const h=t[1],p=h.data[r+8],T=Xa(p,h,e,null==s?Fl(p)&&an:s!=h&&0!=(3&p.type),l&at.Host&&u===p);return null!==T?mr(t,h,T,p):cp}function Xa(r,t,e,s,l){const u=r.providerIndexes,h=t.data,p=1048575&u,m=r.directiveStart,T=u>>20,O=l?p+T:r.directiveEnd;for(let N=s?p:p+T;N<O;N++){const V=h[N];if(N<m&&e===V||N>=m&&V.type===e)return N}if(l){const N=h[m];if(N&&Dr(N)&&N.type===e)return m}return null}function mr(r,t,e,s){let l=r[e];const u=t.data;if(function(r){return r instanceof ta}(l)){const h=l;h.resolving&&function(r,t){throw new as("200",`Circular dependency in DI detected for ${r}`)}(Ri(u[e]));const p=tu(h.canSeeViewProviders);h.resolving=!0;const m=h.injectImpl?rr(h.injectImpl):null;Uo(r,s,at.Default);try{l=r[e]=h.factory(void 0,u,r,s),t.firstCreatePass&&e>=s.directiveStart&&function(r,t,e){const{ngOnChanges:s,ngOnInit:l,ngDoCheck:u}=t.type.prototype;if(s){const h=jd(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(r,h),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,h)}l&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-r,l),u&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r,u),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,u))}(e,u[e],t)}finally{null!==m&&rr(m),tu(p),h.resolving=!1,Va()}}return l}function Uc(r,t,e){return!!(e[t+(r>>5)]&1<<r)}function dp(r,t){return!(r&at.Self||r&at.Host&&t)}class vs{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,s){return up(this._tNode,this._lView,t,s,e)}}function _r(r){return ko(()=>{const t=r.prototype.constructor,e=t[so]||ou(t),s=Object.prototype;let l=Object.getPrototypeOf(r.prototype).constructor;for(;l&&l!==s;){const u=l[so]||ou(l);if(u&&u!==e)return u;l=Object.getPrototypeOf(l)}return u=>new u})}function ou(r){return _c(r)?()=>{const t=ou(dt(r));return t&&t()}:gs(r)}const mo="__parameters__";function ys(r,t,e){return ko(()=>{const s=function(r){return function(...e){if(r){const s=r(...e);for(const l in s)this[l]=s[l]}}}(t);function l(...u){if(this instanceof l)return s.apply(this,u),this;const h=new l(...u);return p.annotation=h,p;function p(m,v,T){const I=m.hasOwnProperty(mo)?m[mo]:Object.defineProperty(m,mo,{value:[]})[mo];for(;I.length<=T;)I.push(null);return(I[T]=I[T]||[]).push(h),m}}return e&&(l.prototype=Object.create(e.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}class lt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=st({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const e_=new lt("AnalyzeForEntryComponents");function vr(r,t){void 0===t&&(t=r);for(let e=0;e<r.length;e++){let s=r[e];Array.isArray(s)?(t===r&&(t=r.slice(0,e)),vr(s,t)):t!==r&&t.push(s)}return t}function Or(r,t){r.forEach(e=>Array.isArray(e)?Or(e,t):t(e))}function oa(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function Xo(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function _o(r,t){const e=[];for(let s=0;s<r;s++)e.push(t);return e}function Ki(r,t,e){let s=sa(r,t);return s>=0?r[1|s]=e:(s=~s,function(r,t,e,s){let l=r.length;if(l==t)r.push(e,s);else if(1===l)r.push(s,r[0]),r[0]=e;else{for(l--,r.push(r[l-1],r[l]);l>t;)r[l]=r[l-2],l--;r[t]=e,r[t+1]=s}}(r,s,t,e)),s}function zc(r,t){const e=sa(r,t);if(e>=0)return r[1|e]}function sa(r,t){return function(r,t,e){let s=0,l=r.length>>e;for(;l!==s;){const u=s+(l-s>>1),h=r[u<<e];if(t===h)return u<<e;h>t?l=u:s=u+1}return~(l<<e)}(r,t,1)}const la={},su="__NG_DI_FLAG__",ua="ngTempTokenPath",bs=/\n/gm,au="__source",lu=pn({provide:String,useValue:pn});let ca;function Es(r){const t=ca;return ca=r,t}function zT(r,t=at.Default){if(void 0===ca)throw new Error("inject() must be called from an injection context");return null===ca?Pd(r,void 0,t):ca.get(r,t&at.Optional?null:void 0,t)}function De(r,t=at.Default){return(oo||zT)(dt(r),t)}const Yc=De;function Ts(r){const t=[];for(let e=0;e<r.length;e++){const s=dt(r[e]);if(Array.isArray(s)){if(0===s.length)throw new Error("Arguments array must have arguments.");let l,u=at.Default;for(let h=0;h<s.length;h++){const p=s[h],m=Tp(p);"number"==typeof m?-1===m?l=p.token:u|=m:l=p}t.push(De(l,u))}else t.push(De(s))}return t}function Ja(r,t){return r[su]=t,r.prototype[su]=t,r}function Tp(r){return r[su]}function $c(r,t,e,s){const l=r[ua];throw t[au]&&l.unshift(t[au]),r.message=function(r,t,e,s=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let l=Vt(t);if(Array.isArray(t))l=t.map(Vt).join(" -> ");else if("object"==typeof t){let u=[];for(let h in t)if(t.hasOwnProperty(h)){let p=t[h];u.push(h+":"+("string"==typeof p?JSON.stringify(p):Vt(p)))}l=`{${u.join(", ")}}`}return`${e}${s?"("+s+")":""}[${l}]: ${r.replace(bs,"\n  ")}`}("\n"+r.message,l,e,s),r.ngTokenPath=l,r[ua]=null,r}const ha=Ja(ys("Inject",r=>({token:r})),-1),Bi=Ja(ys("Optional"),8),yr=Ja(ys("SkipSelf"),4);class Ko{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Yi(r){return r instanceof Ko?r.changingThisBreaksApplicationSecurity:r}function Wr(r,t){const e=function(r){return r instanceof Ko&&r.getTypeName()||null}(r);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}const O_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,M_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Nt=(()=>((Nt=Nt||{})[Nt.NONE=0]="NONE",Nt[Nt.HTML=1]="HTML",Nt[Nt.STYLE=2]="STYLE",Nt[Nt.SCRIPT=3]="SCRIPT",Nt[Nt.URL=4]="URL",Nt[Nt.RESOURCE_URL=5]="RESOURCE_URL",Nt))();function ti(r){const t=function(){const r=Pe();return r&&r[12]}();return t?t.sanitize(Nt.URL,r)||"":Wr(r,"URL")?Yi(r):function(r){return(r=String(r)).match(O_)||r.match(M_)?r:"unsafe:"+r}(Rt(r))}const $T="__ngContext__";function Ji(r,t){r[$T]=t}function N_(r){const t=function(r){return r[$T]||null}(r);return t?Array.isArray(t)?t:t.lView:null}function xp(r){return r.ngOriginalError}function xx(r,...t){r.error(...t)}class tl{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),s=this._findContext(t),l=(r=t)&&r.ngErrorLogger||xx;var r;l(this._console,"ERROR",t),e&&l(this._console,"ORIGINAL ERROR",e),s&&l(this._console,"ERROR CONTEXT",s)}_findContext(t){return t?t.ngDebugContext||this._findContext(xp(t)):null}_findOriginalError(t){let e=t&&xp(t);for(;e&&xp(e);)e=xp(e);return e||null}}const rC=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(tn))();function $o(r){return r instanceof Function?r():r}var Mr=(()=>((Mr=Mr||{})[Mr.Important=1]="Important",Mr[Mr.DashCase=2]="DashCase",Mr))();function P_(r,t){return undefined(r,t)}function ih(r){const t=r[3];return Ir(t)?t[3]:t}function F_(r){return uC(r[13])}function B_(r){return uC(r[4])}function uC(r){for(;null!==r&&!Ir(r);)r=r[4];return r}function mu(r,t,e,s,l){if(null!=s){let u,h=!1;Ir(s)?u=s:Vr(s)&&(h=!0,s=s[0]);const p=ri(s);0===r&&null!==e?null==l?gC(t,e,p):nl(t,e,p,l||null,!0):1===r&&null!==e?nl(t,e,p,l||null,!0):2===r?function(r,t,e){const s=kp(r,t);s&&function(r,t,e,s){Yn(r)?r.removeChild(t,e,s):t.removeChild(e)}(r,s,t,e)}(t,p,h):3===r&&t.destroyNode(p),null!=u&&function(r,t,e,s,l){const u=e[7];u!==ri(e)&&mu(t,r,s,u,l);for(let p=10;p<e.length;p++){const m=e[p];rh(m[1],m,r,t,s,u)}}(t,r,u,e,l)}}function H_(r,t,e){return Yn(r)?r.createElement(t,e):null===e?r.createElement(t):r.createElementNS(e,t)}function hC(r,t){const e=r[9],s=e.indexOf(t),l=t[3];1024&t[2]&&(t[2]&=-1025,lo(l,-1)),e.splice(s,1)}function U_(r,t){if(r.length<=10)return;const e=10+t,s=r[e];if(s){const l=s[17];null!==l&&l!==r&&hC(l,s),t>0&&(r[e-1][4]=s[4]);const u=Xo(r,10+t);!function(r,t){rh(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(s[1],s);const h=u[19];null!==h&&h.detachView(u[1]),s[3]=null,s[4]=null,s[2]&=-129}return s}function dC(r,t){if(!(256&t[2])){const e=t[11];Yn(e)&&e.destroyNode&&rh(r,t,e,3,null,null),function(r){let t=r[13];if(!t)return G_(r[1],r);for(;t;){let e=null;if(Vr(t))e=t[13];else{const s=t[10];s&&(e=s)}if(!e){for(;t&&!t[4]&&t!==r;)Vr(t)&&G_(t[1],t),t=t[3];null===t&&(t=r),Vr(t)&&G_(t[1],t),e=t&&t[4]}t=e}}(t)}}function G_(r,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(r,t){let e;if(null!=r&&null!=(e=r.destroyHooks))for(let s=0;s<e.length;s+=2){const l=t[e[s]];if(!(l instanceof ta)){const u=e[s+1];if(Array.isArray(u))for(let h=0;h<u.length;h+=2){const p=l[u[h]],m=u[h+1];try{m.call(p)}finally{}}else try{u.call(l)}finally{}}}}(r,t),function(r,t){const e=r.cleanup,s=t[7];let l=-1;if(null!==e)for(let u=0;u<e.length-1;u+=2)if("string"==typeof e[u]){const h=e[u+1],p="function"==typeof h?h(t):ri(t[h]),m=s[l=e[u+2]],v=e[u+3];"boolean"==typeof v?p.removeEventListener(e[u],m,v):v>=0?s[l=v]():s[l=-v].unsubscribe(),u+=2}else{const h=s[l=e[u+1]];e[u].call(h)}if(null!==s){for(let u=l+1;u<s.length;u++)s[u]();t[7]=null}}(r,t),1===t[1].type&&Yn(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&Ir(t[3])){e!==t[3]&&hC(e,t);const s=t[19];null!==s&&s.detachView(r)}}}function pC(r,t,e){return function(r,t,e){let s=t;for(;null!==s&&40&s.type;)s=(t=s).parent;if(null===s)return e[0];if(2&s.flags){const l=r.data[s.directiveStart].encapsulation;if(l===Li.None||l===Li.Emulated)return null}return gr(s,e)}(r,t.parent,e)}function nl(r,t,e,s,l){Yn(r)?r.insertBefore(t,e,s,l):t.insertBefore(e,s,l)}function gC(r,t,e){Yn(r)?r.appendChild(t,e):t.appendChild(e)}function mC(r,t,e,s,l){null!==s?nl(r,t,e,s,l):gC(r,t,e)}function kp(r,t){return Yn(r)?r.parentNode(t):t.parentNode}function _C(r,t,e){return yC(r,t,e)}let yC=function(r,t,e){return 40&r.type?gr(r,e):null};function Lp(r,t,e,s){const l=pC(r,s,t),u=t[11],p=_C(s.parent||t[6],s,t);if(null!=l)if(Array.isArray(e))for(let m=0;m<e.length;m++)mC(u,l,e[m],p,!1);else mC(u,l,e,p,!1)}function Pp(r,t){if(null!==t){const e=t.type;if(3&e)return gr(t,r);if(4&e)return j_(-1,r[t.index]);if(8&e){const s=t.child;if(null!==s)return Pp(r,s);{const l=r[t.index];return Ir(l)?j_(-1,l):ri(l)}}if(32&e)return P_(t,r)()||ri(r[t.index]);{const s=EC(r,t);return null!==s?Array.isArray(s)?s[0]:Pp(ih(r[16]),s):Pp(r,t.next)}}return null}function EC(r,t){return null!==t?r[16][6].projection[t.projection]:null}function j_(r,t){const e=10+r+1;if(e<t.length){const s=t[e],l=s[1].firstChild;if(null!==l)return Pp(s,l)}return t[7]}function z_(r,t,e,s,l,u,h){for(;null!=e;){const p=s[e.index],m=e.type;if(h&&0===t&&(p&&Ji(ri(p),s),e.flags|=4),64!=(64&e.flags))if(8&m)z_(r,t,e.child,s,l,u,!1),mu(t,r,l,p,u);else if(32&m){const v=P_(e,s);let T;for(;T=v();)mu(t,r,l,T,u);mu(t,r,l,p,u)}else 16&m?CC(r,t,s,e,l,u):mu(t,r,l,p,u);e=h?e.projectionNext:e.next}}function rh(r,t,e,s,l,u){z_(e,s,r.firstChild,t,l,u,!1)}function CC(r,t,e,s,l,u){const h=e[16],m=h[6].projection[s.projection];if(Array.isArray(m))for(let v=0;v<m.length;v++)mu(t,r,l,m[v],u);else z_(r,t,m,h[3],l,u,!0)}function SC(r,t,e){Yn(r)?r.setAttribute(t,"style",e):t.style.cssText=e}function X_(r,t,e){Yn(r)?""===e?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e):t.className=e}function wC(r,t,e){let s=r.length;for(;;){const l=r.indexOf(t,e);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const u=t.length;if(l+u===s||r.charCodeAt(l+u)<=32)return l}e=l+1}}const RC="ng-template";function rN(r,t,e){let s=0;for(;s<r.length;){let l=r[s++];if(e&&"class"===l){if(l=r[s],-1!==wC(l.toLowerCase(),t,0))return!0}else if(1===l){for(;s<r.length&&"string"==typeof(l=r[s++]);)if(l.toLowerCase()===t)return!0;return!1}}return!1}function IC(r){return 4===r.type&&r.value!==RC}function oN(r,t,e){return t===(4!==r.type||e?r.value:RC)}function sN(r,t,e){let s=4;const l=r.attrs||[],u=function(r){for(let t=0;t<r.length;t++)if(ql(r[t]))return t;return r.length}(l);let h=!1;for(let p=0;p<t.length;p++){const m=t[p];if("number"!=typeof m){if(!h)if(4&s){if(s=2|1&s,""!==m&&!oN(r,m,e)||""===m&&1===t.length){if(vo(s))return!1;h=!0}}else{const v=8&s?m:t[++p];if(8&s&&null!==r.attrs){if(!rN(r.attrs,v,e)){if(vo(s))return!1;h=!0}continue}const I=aN(8&s?"class":m,l,IC(r),e);if(-1===I){if(vo(s))return!1;h=!0;continue}if(""!==v){let O;O=I>u?"":l[I+1].toLowerCase();const N=8&s?O:null;if(N&&-1!==wC(N,v,0)||2&s&&v!==O){if(vo(s))return!1;h=!0}}}}else{if(!h&&!vo(s)&&!vo(m))return!1;if(h&&vo(m))continue;h=!1,s=m|1&s}}return vo(s)||h}function vo(r){return 0==(1&r)}function aN(r,t,e,s){if(null===t)return-1;let l=0;if(s||!e){let u=!1;for(;l<t.length;){const h=t[l];if(h===r)return l;if(3===h||6===h)u=!0;else{if(1===h||2===h){let p=t[++l];for(;"string"==typeof p;)p=t[++l];continue}if(4===h)break;if(0===h){l+=4;continue}}l+=u?1:2}return-1}return function(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){const s=r[e];if("number"==typeof s)return-1;if(s===t)return e;e++}return-1}(t,r)}function DC(r,t,e=!1){for(let s=0;s<t.length;s++)if(sN(r,t[s],e))return!0;return!1}function hN(r,t){e:for(let e=0;e<t.length;e++){const s=t[e];if(r.length===s.length){for(let l=0;l<r.length;l++)if(r[l]!==s[l])continue e;return!0}}return!1}function AC(r,t){return r?":not("+t.trim()+")":t}function dN(r){let t=r[0],e=1,s=2,l="",u=!1;for(;e<r.length;){let h=r[e];if("string"==typeof h)if(2&s){const p=r[++e];l+="["+h+(p.length>0?'="'+p+'"':"")+"]"}else 8&s?l+="."+h:4&s&&(l+=" "+h);else""!==l&&!vo(h)&&(t+=AC(u,l),l=""),s=h,u=u||!vo(s);e++}return""!==l&&(t+=AC(u,l)),t}const kt={};function ci(r){OC(Zt(),Pe(),Wn()+r,qs())}function OC(r,t,e,s){if(!s)if(3==(3&t[2])){const u=r.preOrderCheckHooks;null!==u&&Ql(t,u,e)}else{const u=r.preOrderHooks;null!==u&&Go(t,u,0,e)}ho(e)}function Fp(r,t){return r<<17|t<<2}function yo(r){return r>>17&32767}function K_(r){return 2|r}function Ss(r){return(131068&r)>>2}function Y_(r,t){return-131069&r|t<<2}function $_(r){return 1|r}function HC(r,t){const e=r.contentQueries;if(null!==e)for(let s=0;s<e.length;s+=2){const l=e[s],u=e[s+1];if(-1!==u){const h=r.data[u];Nc(l),h.contentQueries(2,t[u],u)}}}function oh(r,t,e,s,l,u,h,p,m,v){const T=t.blueprint.slice();return T[0]=l,T[2]=140|s,Jd(T),T[3]=T[15]=r,T[8]=e,T[10]=h||r&&r[10],T[11]=p||r&&r[11],T[12]=m||r&&r[12]||null,T[9]=v||r&&r[9]||null,T[6]=u,T[16]=2==t.type?r[16]:T,T}function _u(r,t,e,s,l){let u=r.data[t];if(null===u)u=function(r,t,e,s,l){const u=Fa(),h=Oc(),m=r.data[t]=function(r,t,e,s,l,u){return{type:e,index:s,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:u,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,h?u:u&&u.parent,e,t,s,l);return null===r.firstChild&&(r.firstChild=m),null!==u&&(h?null==u.child&&null!==m.parent&&(u.child=m):null===u.next&&(u.next=m)),m}(r,t,e,s,l),Tt.lFrame.inI18n&&(u.flags|=64);else if(64&u.type){u.type=e,u.value=s,u.attrs=l;const h=function(){const r=Tt.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();u.injectorIndex=null===h?-1:h.injectorIndex}return Ur(u,!0),u}function vu(r,t,e,s){if(0===e)return-1;const l=t.length;for(let u=0;u<e;u++)t.push(s),r.blueprint.push(s),r.data.push(null);return l}function sh(r,t,e){Jl(t);try{const s=r.viewQuery;null!==s&&hv(1,s,e);const l=r.template;null!==l&&UC(r,t,l,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&HC(r,t),r.staticViewQueries&&hv(2,r.viewQuery,e);const u=r.components;null!==u&&function(r,t){for(let e=0;e<t.length;e++)zN(r,t[e])}(t,u)}catch(s){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),s}finally{t[2]&=-5,ea()}}function yu(r,t,e,s){const l=t[2];if(256==(256&l))return;Jl(t);const u=qs();try{Jd(t),function(r){Tt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==e&&UC(r,t,e,2,s);const h=3==(3&l);if(!u)if(h){const v=r.preOrderCheckHooks;null!==v&&Ql(t,v,null)}else{const v=r.preOrderHooks;null!==v&&Go(t,v,0,null),fo(t,0)}if(function(r){for(let t=F_(r);null!==t;t=B_(t)){if(!t[2])continue;const e=t[9];for(let s=0;s<e.length;s++){const l=e[s],u=l[3];0==(1024&l[2])&&lo(u,1),l[2]|=1024}}}(t),function(r){for(let t=F_(r);null!==t;t=B_(t))for(let e=10;e<t.length;e++){const s=t[e],l=s[1];zl(s)&&yu(l,s,l.template,s[8])}}(t),null!==r.contentQueries&&HC(r,t),!u)if(h){const v=r.contentCheckHooks;null!==v&&Ql(t,v)}else{const v=r.contentHooks;null!==v&&Go(t,v,1),fo(t,1)}!function(r,t){const e=r.hostBindingOpCodes;if(null!==e)try{for(let s=0;s<e.length;s++){const l=e[s];if(l<0)ho(~l);else{const u=l,h=e[++s],p=e[++s];Fm(h,u),p(2,t[u])}}}finally{ho(-1)}}(r,t);const p=r.components;null!==p&&function(r,t){for(let e=0;e<t.length;e++)jN(r,t[e])}(t,p);const m=r.viewQuery;if(null!==m&&hv(2,m,s),!u)if(h){const v=r.viewCheckHooks;null!==v&&Ql(t,v)}else{const v=r.viewHooks;null!==v&&Go(t,v,2),fo(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),u||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,lo(t[3],-1))}finally{ea()}}function wN(r,t,e,s){const l=t[10],u=!qs(),h=Pa(t);try{u&&!h&&l.begin&&l.begin(),h&&sh(r,t,s),yu(r,t,e,s)}finally{u&&!h&&l.end&&l.end()}}function UC(r,t,e,s,l){const u=Wn(),h=2&s;try{ho(-1),h&&t.length>20&&OC(r,t,20,qs()),e(s,l)}finally{ho(u)}}function iv(r,t,e){!Xl()||(function(r,t,e,s){const l=e.directiveStart,u=e.directiveEnd;r.firstCreatePass||Wa(e,t),Ji(s,t);const h=e.initialInputs;for(let p=l;p<u;p++){const m=r.data[p],v=Dr(m);v&&VN(t,e,m);const T=mr(t,r,p,e);Ji(T,t),null!==h&&HN(0,p-l,T,m,0,h),v&&(Xi(e.index,t)[8]=T)}}(r,t,e,gr(e,t)),128==(128&e.flags)&&function(r,t,e){const s=e.directiveStart,l=e.directiveEnd,h=e.index,p=Tt.lFrame.currentDirectiveIndex;try{ho(h);for(let m=s;m<l;m++){const v=r.data[m],T=t[m];Yl(m),(null!==v.hostBindings||0!==v.hostVars||null!==v.hostAttrs)&&JC(v,T)}}finally{ho(-1),Yl(p)}}(r,t,e))}function rv(r,t,e=gr){const s=t.localNames;if(null!==s){let l=t.index+1;for(let u=0;u<s.length;u+=2){const h=s[u+1],p=-1===h?e(t,r):r[h];r[l++]=p}}}function WC(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=Hp(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function Hp(r,t,e,s,l,u,h,p,m,v){const T=20+s,I=T+l,O=function(r,t){const e=[];for(let s=0;s<t;s++)e.push(s<r?null:kt);return e}(T,I),N="function"==typeof v?v():v;return O[1]={type:r,blueprint:O,template:e,queries:null,viewQuery:p,declTNode:t,data:O.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof u?u():u,pipeRegistry:"function"==typeof h?h():h,firstChild:null,schemas:m,consts:N,incompleteFirstPass:!1}}function XC(r,t,e,s){const l=nS(t);null===e?l.push(s):(l.push(e),r.firstCreatePass&&iS(r).push(s,l.length-1))}function KC(r,t,e){for(let s in r)if(r.hasOwnProperty(s)){const l=r[s];(e=null===e?{}:e).hasOwnProperty(s)?e[s].push(t,l):e[s]=[t,l]}return e}function ov(r,t,e,s){let l=!1;if(Xl()){const u=function(r,t,e){const s=r.directiveRegistry;let l=null;if(s)for(let u=0;u<s.length;u++){const h=s[u];DC(e,h.selectors,!1)&&(l||(l=[]),ja(Wa(e,t),r,h.type),Dr(h)?(QC(r,e),l.unshift(h)):l.push(h))}return l}(r,t,e),h=null===s?null:{"":-1};if(null!==u){l=!0,ZC(e,r.data.length,u.length);for(let T=0;T<u.length;T++){const I=u[T];I.providersResolver&&I.providersResolver(I)}let p=!1,m=!1,v=vu(r,t,u.length,null);for(let T=0;T<u.length;T++){const I=u[T];e.mergedAttrs=eu(e.mergedAttrs,I.hostAttrs),qC(r,e,t,v,I),BN(v,I,h),null!==I.contentQueries&&(e.flags|=8),(null!==I.hostBindings||null!==I.hostAttrs||0!==I.hostVars)&&(e.flags|=128);const O=I.type.prototype;!p&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e.index),p=!0),!m&&(O.ngOnChanges||O.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e.index),m=!0),v++}!function(r,t){const s=t.directiveEnd,l=r.data,u=t.attrs,h=[];let p=null,m=null;for(let v=t.directiveStart;v<s;v++){const T=l[v],I=T.inputs,O=null===u||IC(t)?null:UN(I,u);h.push(O),p=KC(I,v,p),m=KC(T.outputs,v,m)}null!==p&&(p.hasOwnProperty("class")&&(t.flags|=16),p.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=h,t.inputs=p,t.outputs=m}(r,e)}h&&function(r,t,e){if(t){const s=r.localNames=[];for(let l=0;l<t.length;l+=2){const u=e[t[l+1]];if(null==u)throw new as("301",`Export of name '${t[l+1]}' not found!`);s.push(t[l],u)}}}(e,s,h)}return e.mergedAttrs=eu(e.mergedAttrs,e.attrs),l}function $C(r,t,e,s,l,u){const h=u.hostBindings;if(h){let p=r.hostBindingOpCodes;null===p&&(p=r.hostBindingOpCodes=[]);const m=~t.index;(function(r){let t=r.length;for(;t>0;){const e=r[--t];if("number"==typeof e&&e<0)return e}return 0})(p)!=m&&p.push(m),p.push(s,l,h)}}function JC(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function QC(r,t){t.flags|=2,(r.components||(r.components=[])).push(t.index)}function BN(r,t,e){if(e){if(t.exportAs)for(let s=0;s<t.exportAs.length;s++)e[t.exportAs[s]]=r;Dr(t)&&(e[""]=r)}}function ZC(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}function qC(r,t,e,s,l){r.data[s]=l;const u=l.factory||(l.factory=gs(l.type)),h=new ta(u,Dr(l),null);r.blueprint[s]=h,e[s]=h,$C(r,t,0,s,vu(r,e,l.hostVars,kt),l)}function VN(r,t,e){const s=gr(t,r),l=WC(e),u=r[10],h=Up(r,oh(r,l,null,e.onPush?64:16,s,t,u,u.createRenderer(s,e),null,null));r[t.index]=h}function Jo(r,t,e,s,l,u){const h=gr(r,t);!function(r,t,e,s,l,u,h){if(null==u)Yn(r)?r.removeAttribute(t,l,e):t.removeAttribute(l);else{const p=null==h?Rt(u):h(u,s||"",l);Yn(r)?r.setAttribute(t,l,p,e):e?t.setAttributeNS(e,l,p):t.setAttribute(l,p)}}(t[11],h,u,r.value,e,s,l)}function HN(r,t,e,s,l,u){const h=u[t];if(null!==h){const p=s.setInput;for(let m=0;m<h.length;){const v=h[m++],T=h[m++],I=h[m++];null!==p?s.setInput(e,I,v,T):e[T]=I}}}function UN(r,t){let e=null,s=0;for(;s<t.length;){const l=t[s];if(0!==l)if(5!==l){if("number"==typeof l)break;r.hasOwnProperty(l)&&(null===e&&(e=[]),e.push(l,r[l],t[s+1])),s+=2}else s+=2;else s+=4}return e}function eS(r,t,e,s){return new Array(r,!0,!1,t,null,0,s,e,null,null)}function jN(r,t){const e=Xi(t,r);if(zl(e)){const s=e[1];80&e[2]?yu(s,e,s.template,e[8]):e[5]>0&&av(e)}}function av(r){for(let s=F_(r);null!==s;s=B_(s))for(let l=10;l<s.length;l++){const u=s[l];if(1024&u[2]){const h=u[1];yu(h,u,h.template,u[8])}else u[5]>0&&av(u)}const e=r[1].components;if(null!==e)for(let s=0;s<e.length;s++){const l=Xi(e[s],r);zl(l)&&l[5]>0&&av(l)}}function zN(r,t){const e=Xi(t,r),s=e[1];(function(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])})(s,e),sh(s,e,e[8])}function Up(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function lv(r){for(;r;){r[2]|=64;const t=ih(r);if(Ud(r)&&!t)return r;r=t}return null}function cv(r,t,e){const s=t[10];s.begin&&s.begin();try{yu(r,t,r.template,e)}catch(l){throw oS(t,l),l}finally{s.end&&s.end()}}function tS(r){!function(r){for(let t=0;t<r.components.length;t++){const e=r.components[t],s=N_(e),l=s[1];wN(l,s,l.template,e)}}(r[8])}function hv(r,t,e){Nc(0),t(r,e)}const JN=(()=>Promise.resolve(null))();function nS(r){return r[7]||(r[7]=[])}function iS(r){return r.cleanup||(r.cleanup=[])}function oS(r,t){const e=r[9],s=e?e.get(tl,null):null;s&&s.handleError(t)}function sS(r,t,e,s,l){for(let u=0;u<e.length;){const h=e[u++],p=e[u++],m=t[h],v=r.data[h];null!==v.setInput?v.setInput(m,l,s,p):m[p]=l}}function Rs(r,t,e){const s=Wl(t,r);!function(r,t,e){Yn(r)?r.setValue(t,e):t.textContent=e}(r[11],s,e)}function Gp(r,t,e){let s=e?r.styles:null,l=e?r.classes:null,u=0;if(null!==t)for(let h=0;h<t.length;h++){const p=t[h];"number"==typeof p?u=p:1==u?l=Al(l,p):2==u&&(s=Al(s,p+": "+t[++h]+";"))}e?r.styles=s:r.stylesWithoutHost=s,e?r.classes=l:r.classesWithoutHost=l}const ah=new lt("INJECTOR",-1);class aS{get(t,e=la){if(e===la){const s=new Error(`NullInjectorError: No provider for ${Vt(t)}!`);throw s.name="NullInjectorError",s}return e}}const lh=new lt("Set Injector scope."),uh={},qN={};let dv;function lS(){return void 0===dv&&(dv=new aS),dv}function uS(r,t=null,e=null,s){return new tk(r,e,t||lS(),s)}class tk{constructor(t,e,s,l=null){this.parent=s,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const u=[];e&&Or(e,p=>this.processProvider(p,t,e)),Or([t],p=>this.processInjectorType(p,[],u)),this.records.set(ah,bu(void 0,this));const h=this.records.get(lh);this.scope=null!=h?h.value:null,this.source=l||("object"==typeof t?null:Vt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=la,s=at.Default){this.assertNotDestroyed();const l=Es(this),u=rr(void 0);try{if(!(s&at.SkipSelf)){let p=this.records.get(t);if(void 0===p){const m=("function"==typeof(r=t)||"object"==typeof r&&r instanceof lt)&&Sr(t);p=m&&this.injectableDefInScope(m)?bu(pv(t),uh):null,this.records.set(t,p)}if(null!=p)return this.hydrate(t,p)}return(s&at.Self?lS():this.parent).get(t,e=s&at.Optional&&e===la?null:e)}catch(h){if("NullInjectorError"===h.name){if((h[ua]=h[ua]||[]).unshift(Vt(t)),l)throw h;return $c(h,t,"R3InjectorError",this.source)}throw h}finally{rr(u),Es(l)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((s,l)=>t.push(Vt(l))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,s){if(!(t=dt(t)))return!1;let l=kd(t);const u=null==l&&t.ngModule||void 0,h=void 0===u?t:u,p=-1!==s.indexOf(h);if(void 0!==u&&(l=kd(u)),null==l)return!1;if(null!=l.imports&&!p){let T;s.push(h);try{Or(l.imports,I=>{this.processInjectorType(I,e,s)&&(void 0===T&&(T=[]),T.push(I))})}finally{}if(void 0!==T)for(let I=0;I<T.length;I++){const{ngModule:O,providers:N}=T[I];Or(N,V=>this.processProvider(V,O,N||nn))}}this.injectorDefTypes.add(h);const m=gs(h)||(()=>new h);this.records.set(h,bu(m,uh));const v=l.providers;if(null!=v&&!p){const T=t;Or(v,I=>this.processProvider(I,T,v))}return void 0!==u&&void 0!==t.providers}processProvider(t,e,s){let l=Eu(t=dt(t))?t:dt(t&&t.provide);const u=(r=t,hS(r)?bu(void 0,r.useValue):bu(cS(r),uh));var r;if(Eu(t)||!0!==t.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=bu(void 0,uh,!0),h.factory=()=>Ts(h.multi),this.records.set(l,h)),l=t,h.multi.push(t)}this.records.set(l,u)}hydrate(t,e){return e.value===uh&&(e.value=qN,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(r=e.value)&&"object"==typeof r&&"function"==typeof r.ngOnDestroy&&this.onDestroy.add(e.value),e.value;var r}injectableDefInScope(t){if(!t.providedIn)return!1;const e=dt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function pv(r){const t=Sr(r),e=null!==t?t.factory:gs(r);if(null!==e)return e;if(r instanceof lt)throw new Error(`Token ${Vt(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const t=r.length;if(t>0){const s=_o(t,"?");throw new Error(`Can't resolve all parameters for ${Vt(r)}: (${s.join(", ")}).`)}const e=function(r){const t=r&&(r[xl]||r[bc]);if(t){const e=function(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(r);return null!==e?()=>e.factory(r):()=>new r}(r);throw new Error("unreachable")}function cS(r,t,e){let s;if(Eu(r)){const l=dt(r);return gs(l)||pv(l)}if(hS(r))s=()=>dt(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))s=()=>r.useFactory(...Ts(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))s=()=>De(dt(r.useExisting));else{const l=dt(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return gs(l)||pv(l);s=()=>new l(...Ts(r.deps))}return s}function bu(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function hS(r){return null!==r&&"object"==typeof r&&lu in r}function Eu(r){return"function"==typeof r}const dS=function(r,t,e){return function(r,t=null,e=null,s){const l=uS(r,t,e,s);return l._resolveInjectorDefTypes(),l}({name:e},t,r,e)};let mn=(()=>{class r{static create(e,s){return Array.isArray(e)?dS(e,s,""):dS(e.providers,e.parent,e.name||"")}}return r.THROW_IF_NOT_FOUND=la,r.NULL=new aS,r.\u0275prov=st({token:r,providedIn:"any",factory:()=>De(ah)}),r.__NG_ELEMENT_ID__=-1,r})();function Tk(r,t){po(N_(r)[1],qn())}function Tn(r){let t=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),e=!0;const s=[r];for(;t;){let l;if(Dr(r))l=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");l=t.\u0275dir}if(l){if(e){s.push(l);const h=r;h.inputs=yv(r.inputs),h.declaredInputs=yv(r.declaredInputs),h.outputs=yv(r.outputs);const p=l.hostBindings;p&&Rk(r,p);const m=l.viewQuery,v=l.contentQueries;if(m&&Sk(r,m),v&&wk(r,v),mc(r.inputs,l.inputs),mc(r.declaredInputs,l.declaredInputs),mc(r.outputs,l.outputs),Dr(l)&&l.data.animation){const T=r.data;T.animation=(T.animation||[]).concat(l.data.animation)}}const u=l.features;if(u)for(let h=0;h<u.length;h++){const p=u[h];p&&p.ngInherit&&p(r),p===Tn&&(e=!1)}}t=Object.getPrototypeOf(t)}!function(r){let t=0,e=null;for(let s=r.length-1;s>=0;s--){const l=r[s];l.hostVars=t+=l.hostVars,l.hostAttrs=eu(l.hostAttrs,e=eu(e,l.hostAttrs))}}(s)}function yv(r){return r===cs?{}:r===nn?[]:r}function Sk(r,t){const e=r.viewQuery;r.viewQuery=e?(s,l)=>{t(s,l),e(s,l)}:t}function wk(r,t){const e=r.contentQueries;r.contentQueries=e?(s,l,u)=>{t(s,l,u),e(s,l,u)}:t}function Rk(r,t){const e=r.hostBindings;r.hostBindings=e?(s,l)=>{t(s,l),e(s,l)}:t}let Wp=null;function Tu(){if(!Wp){const r=tn.Symbol;if(r&&r.iterator)Wp=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const s=t[e];"entries"!==s&&"size"!==s&&Map.prototype[s]===Map.prototype.entries&&(Wp=s)}}}return Wp}function hh(r){return!!bv(r)&&(Array.isArray(r)||!(r instanceof Map)&&Tu()in r)}function bv(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Qi(r,t,e){return!Object.is(r[t],e)&&(r[t]=e,!0)}function il(r,t,e,s){const l=Qi(r,t,e);return Qi(r,t+1,s)||l}function Vi(r,t,e,s){const l=Pe();return Qi(l,_s(),t)&&(Zt(),Jo(jn(),l,r,t,e,s)),Vi}function Ru(r,t,e,s,l,u,h,p){const v=function(r,t,e,s,l){const u=il(r,t,e,s);return Qi(r,t+2,l)||u}(r,uo(),e,l,h);return co(3),v?t+Rt(e)+s+Rt(l)+u+Rt(h)+p:kt}function rl(r,t,e,s,l,u,h,p){const m=Pe(),v=Zt(),T=r+20,I=v.firstCreatePass?function(r,t,e,s,l,u,h,p,m){const v=t.consts,T=_u(t,r,4,h||null,Ho(v,p));ov(t,e,T,Ho(v,m)),po(t,T);const I=T.tViews=Hp(2,T,s,l,u,t.directiveRegistry,t.pipeRegistry,null,t.schemas,v);return null!==t.queries&&(t.queries.template(t,T),I.queries=t.queries.embeddedTView(T)),T}(T,v,m,t,e,s,l,u,h):v.data[T];Ur(I,!1);const O=m[11].createComment("");Lp(v,m,O,I),Ji(O,m),Up(m,m[T]=eS(O,m,O,I)),Vo(I)&&iv(v,m,I),null!=h&&rv(m,I,p)}function Ev(r){return Js(Tt.lFrame.contextLView,20+r)}function Se(r,t=at.Default){const e=Pe();return null===e?De(r,t):up(qn(),e,dt(r),t)}function Rv(){throw new Error("invalid")}function gi(r,t,e){const s=Pe();return Qi(s,_s(),t)&&function(r,t,e,s,l,u,h,p){const m=gr(t,e);let T,v=t.inputs;!p&&null!=v&&(T=v[s])?(sS(r,e,T,s,l),Fl(t)&&function(r,t){const e=Xi(t,r);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(s=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(s),l=null!=h?h(l,t.value||"",s):l,Yn(u)?u.setProperty(m,s,l):Ga(s)||(m.setProperty?m.setProperty(s,l):m[s]=l))}(Zt(),jn(),s,r,t,s[11],e,!1),gi}function Iv(r,t,e,s,l){const h=l?"class":"style";sS(r,e,t.inputs[h],h,s)}function xn(r,t,e,s){const l=Pe(),u=Zt(),h=20+r,p=l[11],m=l[h]=H_(p,t,Tt.lFrame.currentNamespace),v=u.firstCreatePass?function(r,t,e,s,l,u,h){const p=t.consts,v=_u(t,r,2,l,Ho(p,u));return ov(t,e,v,Ho(p,h)),null!==v.attrs&&Gp(v,v.attrs,!1),null!==v.mergedAttrs&&Gp(v,v.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,v),v}(h,u,l,0,t,e,s):u.data[h];Ur(v,!0);const T=v.mergedAttrs;null!==T&&Zl(p,m,T);const I=v.classes;null!==I&&X_(p,m,I);const O=v.styles;null!==O&&SC(p,m,O),64!=(64&v.flags)&&Lp(u,l,m,v),0===Tt.lFrame.elementDepthCount&&Ji(m,l),Tt.lFrame.elementDepthCount++,Vo(v)&&(iv(u,l,v),function(r,t,e){if(Sc(t)){const l=t.directiveEnd;for(let u=t.directiveStart;u<l;u++){const h=r.data[u];h.contentQueries&&h.contentQueries(1,e[u],u)}}}(u,v,l)),null!==s&&rv(l,v)}function Nn(){let r=qn();Oc()?Kl():(r=r.parent,Ur(r,!1));const t=r;Tt.lFrame.elementDepthCount--;const e=Zt();e.firstCreatePass&&(po(e,r),Sc(r)&&e.queries.elementEnd(r)),null!=t.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(t)&&Iv(e,t,Pe(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(t)&&Iv(e,t,Pe(),t.stylesWithoutHost,!1)}function Zi(r,t,e,s){xn(r,t,e,s),Nn()}function Dv(){return Pe()}function ph(r){return!!r&&"function"==typeof r.then}const Xp=function(r){return!!r&&"function"==typeof r.subscribe};function Vn(r,t,e,s){const l=Pe(),u=Zt(),h=qn();return function(r,t,e,s,l,u,h,p){const m=Vo(s),T=r.firstCreatePass&&iS(r),I=t[8],O=nS(t);let N=!0;if(3&s.type||p){const X=gr(s,t),ue=p?p(X):X,ce=O.length,ke=p?Ue=>p(ri(Ue[s.index])):s.index;if(Yn(e)){let Ue=null;if(!p&&m&&(Ue=function(r,t,e,s){const l=r.cleanup;if(null!=l)for(let u=0;u<l.length-1;u+=2){const h=l[u];if(h===e&&l[u+1]===s){const p=t[7],m=l[u+2];return p.length>m?p[m]:null}"string"==typeof h&&(u+=2)}return null}(r,t,l,s.index)),null!==Ue)(Ue.__ngLastListenerFn__||Ue).__ngNextListenerFn__=u,Ue.__ngLastListenerFn__=u,N=!1;else{u=Av(s,t,I,u,!1);const ct=e.listen(ue,l,u);O.push(u,ct),T&&T.push(l,ke,ce,ce+1)}}else u=Av(s,t,I,u,!0),ue.addEventListener(l,u,h),O.push(u),T&&T.push(l,ke,ce,h)}else u=Av(s,t,I,u,!1);const V=s.outputs;let Q;if(N&&null!==V&&(Q=V[l])){const X=Q.length;if(X)for(let ue=0;ue<X;ue+=2){const Ft=t[Q[ue]][Q[ue+1]].subscribe(u),Xt=O.length;O.push(u,Ft),T&&T.push(l,s.index,Xt,-(Xt+1))}}}(u,l,l[11],h,r,t,!!e,s),Vn}function tw(r,t,e,s){try{return!1!==e(s)}catch(l){return oS(r,l),!1}}function Av(r,t,e,s,l){return function u(h){if(h===Function)return s;const p=2&r.flags?Xi(r.index,t):t;0==(32&t[2])&&lv(p);let m=tw(t,0,s,h),v=u.__ngNextListenerFn__;for(;v;)m=tw(t,0,v,h)&&m,v=v.__ngNextListenerFn__;return l&&!1===m&&(h.preventDefault(),h.returnValue=!1),m}}function ma(r=1){return function(r){return(Tt.lFrame.contextLView=function(r,t){for(;r>0;)t=t[15],r--;return t}(r,Tt.lFrame.contextLView))[8]}(r)}function sL(r,t){let e=null;const s=function(r){const t=r.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(r);for(let l=0;l<t.length;l++){const u=t[l];if("*"!==u){if(null===s?DC(r,u,!0):hN(s,u))return l}else e=l}return e}function fh(r){const t=Pe()[16][6];if(!t.projection){const s=t.projection=_o(r?r.length:1,null),l=s.slice();let u=t.child;for(;null!==u;){const h=r?sL(u,r):0;null!==h&&(l[h]?l[h].projectionNext=u:s[h]=u,l[h]=u),u=u.next}}}function gh(r,t=0,e){const s=Pe(),l=Zt(),u=_u(l,20+r,16,null,e||null);null===u.projection&&(u.projection=t),Kl(),64!=(64&u.flags)&&function(r,t,e){CC(t[11],0,t,e,pC(r,e,t),_C(e.parent||t[6],e,t))}(l,s,u)}function hw(r,t,e,s,l){const u=r[e+1],h=null===t;let p=s?yo(u):Ss(u),m=!1;for(;0!==p&&(!1===m||h);){const T=r[p+1];uL(r[p],t)&&(m=!0,r[p+1]=s?$_(T):K_(T)),p=s?yo(T):Ss(T)}m&&(r[e+1]=s?K_(u):$_(u))}function uL(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&sa(r,t)>=0}function Eo(r,t){return function(r,t,e,s){const l=Pe(),u=Zt(),h=co(2);u.firstUpdatePass&&function(r,t,e,s){const l=r.data;if(null===l[e+1]){const u=l[Wn()],h=function(r,t){return t>=r.expandoStartIndex}(r,e);(function(r,t){return 0!=(r.flags&(t?16:32))})(u,s)&&null===t&&!h&&(t=!1),t=function(r,t,e,s){const l=function(r){const t=Tt.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}(r);let u=s?t.residualClasses:t.residualStyles;if(null===l)0===(s?t.classBindings:t.styleBindings)&&(e=mh(e=Mv(null,r,t,e,s),t.attrs,s),u=null);else{const h=t.directiveStylingLast;if(-1===h||r[h]!==l)if(e=Mv(l,r,t,e,s),null===u){let m=function(r,t,e){const s=e?t.classBindings:t.styleBindings;if(0!==Ss(s))return r[yo(s)]}(r,t,s);void 0!==m&&Array.isArray(m)&&(m=Mv(null,r,t,m[1],s),m=mh(m,t.attrs,s),function(r,t,e,s){r[yo(e?t.classBindings:t.styleBindings)]=s}(r,t,s,m))}else u=function(r,t,e){let s;const l=t.directiveEnd;for(let u=1+t.directiveStylingLast;u<l;u++)s=mh(s,r[u].hostAttrs,e);return mh(s,t.attrs,e)}(r,t,s)}return void 0!==u&&(s?t.residualClasses=u:t.residualStyles=u),e}(l,u,t,s),function(r,t,e,s,l,u){let h=u?t.classBindings:t.styleBindings,p=yo(h),m=Ss(h);r[s]=e;let T,v=!1;if(Array.isArray(e)){const I=e;T=I[1],(null===T||sa(I,T)>0)&&(v=!0)}else T=e;if(l)if(0!==m){const O=yo(r[p+1]);r[s+1]=Fp(O,p),0!==O&&(r[O+1]=Y_(r[O+1],s)),r[p+1]=function(r,t){return 131071&r|t<<17}(r[p+1],s)}else r[s+1]=Fp(p,0),0!==p&&(r[p+1]=Y_(r[p+1],s)),p=s;else r[s+1]=Fp(m,0),0===p?p=s:r[m+1]=Y_(r[m+1],s),m=s;v&&(r[s+1]=K_(r[s+1])),hw(r,T,s,!0),hw(r,T,s,!1),function(r,t,e,s,l){const u=l?r.residualClasses:r.residualStyles;null!=u&&"string"==typeof t&&sa(u,t)>=0&&(e[s+1]=$_(e[s+1]))}(t,T,r,s,u),h=Fp(p,m),u?t.classBindings=h:t.styleBindings=h}(l,u,t,e,h,s)}}(u,r,h,s),t!==kt&&Qi(l,h,t)&&function(r,t,e,s,l,u,h,p){if(!(3&t.type))return;const m=r.data,v=m[p+1];Kp(function(r){return 1==(1&r)}(v)?Cw(m,t,e,l,Ss(v),h):void 0)||(Kp(u)||function(r){return 2==(2&r)}(v)&&(u=Cw(m,null,e,l,p,h)),function(r,t,e,s,l){const u=Yn(r);if(t)l?u?r.addClass(e,s):e.classList.add(s):u?r.removeClass(e,s):e.classList.remove(s);else{let h=-1===s.indexOf("-")?void 0:Mr.DashCase;if(null==l)u?r.removeStyle(e,s,h):e.style.removeProperty(s);else{const p="string"==typeof l&&l.endsWith("!important");p&&(l=l.slice(0,-10),h|=Mr.Important),u?r.setStyle(e,s,l,h):e.style.setProperty(s,l,p?"important":"")}}}(s,h,Wl(Wn(),e),l,u))}(u,u.data[Wn()],l,l[11],r,l[h+1]=function(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=Vt(Yi(r)))),r}(t,e),s,h)}(r,t,null,!0),Eo}function Mv(r,t,e,s,l){let u=null;const h=e.directiveEnd;let p=e.directiveStylingLast;for(-1===p?p=e.directiveStart:p++;p<h&&(u=t[p],s=mh(s,u.hostAttrs,l),u!==r);)p++;return null!==r&&(e.directiveStylingLast=p),s}function mh(r,t,e){const s=e?1:2;let l=-1;if(null!==t)for(let u=0;u<t.length;u++){const h=t[u];"number"==typeof h?l=h:l===s&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Ki(r,h,!!e||t[++u]))}return void 0===r?null:r}function Cw(r,t,e,s,l,u){const h=null===t;let p;for(;l>0;){const m=r[l],v=Array.isArray(m),T=v?m[1]:m,I=null===T;let O=e[l+1];O===kt&&(O=I?nn:void 0);let N=I?zc(O,s):T===s?O:void 0;if(v&&!Kp(N)&&(N=zc(m,s)),Kp(N)&&(p=N,h))return p;const V=r[l+1];l=h?yo(V):Ss(V)}if(null!==t){let m=u?t.residualClasses:t.residualStyles;null!=m&&(p=zc(m,s))}return p}function Kp(r){return void 0!==r}function Mi(r,t=""){const e=Pe(),s=Zt(),l=r+20,u=s.firstCreatePass?_u(s,l,1,t,null):s.data[l],h=e[l]=function(r,t){return Yn(r)?r.createText(t):r.createTextNode(t)}(e[11],t);Lp(s,e,h,u),Ur(u,!1)}function _h(r,t,e){const s=Pe(),l=function(r,t,e,s){return Qi(r,_s(),e)?t+Rt(e)+s:kt}(s,r,t,e);return l!==kt&&Rs(s,Wn(),l),_h}function Nv(r,t,e,s,l){const u=Pe(),h=function(r,t,e,s,l,u){const p=il(r,uo(),e,l);return co(2),p?t+Rt(e)+s+Rt(l)+u:kt}(u,r,t,e,s,l);return h!==kt&&Rs(u,Wn(),h),Nv}function kv(r,t,e,s,l,u,h){const p=Pe(),m=Ru(p,r,t,e,s,l,u,h);return m!==kt&&Rs(p,Wn(),m),kv}const ol=void 0;var jL=["en",[["a","p"],["AM","PM"],ol],[["AM","PM"],ol,ol],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ol,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ol,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ol,"{1} 'at' {0}",ol],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const e=Math.floor(Math.abs(r)),s=r.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===s?1:5}];let ku={};function Gw(r){return r in ku||(ku[r]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[r]),ku[r]}var tt=(()=>((tt=tt||{})[tt.LocaleId=0]="LocaleId",tt[tt.DayPeriodsFormat=1]="DayPeriodsFormat",tt[tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",tt[tt.DaysFormat=3]="DaysFormat",tt[tt.DaysStandalone=4]="DaysStandalone",tt[tt.MonthsFormat=5]="MonthsFormat",tt[tt.MonthsStandalone=6]="MonthsStandalone",tt[tt.Eras=7]="Eras",tt[tt.FirstDayOfWeek=8]="FirstDayOfWeek",tt[tt.WeekendRange=9]="WeekendRange",tt[tt.DateFormat=10]="DateFormat",tt[tt.TimeFormat=11]="TimeFormat",tt[tt.DateTimeFormat=12]="DateTimeFormat",tt[tt.NumberSymbols=13]="NumberSymbols",tt[tt.NumberFormats=14]="NumberFormats",tt[tt.CurrencyCode=15]="CurrencyCode",tt[tt.CurrencySymbol=16]="CurrencySymbol",tt[tt.CurrencyName=17]="CurrencyName",tt[tt.Currencies=18]="Currencies",tt[tt.Directionality=19]="Directionality",tt[tt.PluralCase=20]="PluralCase",tt[tt.ExtraData=21]="ExtraData",tt))();const Yp="en-US";let Ww=Yp;function Bv(r,t,e,s,l){if(r=dt(r),Array.isArray(r))for(let u=0;u<r.length;u++)Bv(r[u],t,e,s,l);else{const u=Zt(),h=Pe();let p=Eu(r)?r:dt(r.provide),m=cS(r);const v=qn(),T=1048575&v.providerIndexes,I=v.directiveStart,O=v.providerIndexes>>20;if(Eu(r)||!r.multi){const N=new ta(m,l,Se),V=Hv(p,t,l?T:T+O,I);-1===V?(ja(Wa(v,h),u,p),Vv(u,r,t.length),t.push(p),v.directiveStart++,v.directiveEnd++,l&&(v.providerIndexes+=1048576),e.push(N),h.push(N)):(e[V]=N,h[V]=N)}else{const N=Hv(p,t,T+O,I),V=Hv(p,t,T,T+O),Q=N>=0&&e[N],X=V>=0&&e[V];if(l&&!X||!l&&!Q){ja(Wa(v,h),u,p);const ue=function(r,t,e,s,l){const u=new ta(r,e,Se);return u.multi=[],u.index=t,u.componentProviders=0,pR(u,l,s&&!e),u}(l?GP:UP,e.length,l,s,m);!l&&X&&(e[V].providerFactory=ue),Vv(u,r,t.length,0),t.push(p),v.directiveStart++,v.directiveEnd++,l&&(v.providerIndexes+=1048576),e.push(ue),h.push(ue)}else Vv(u,r,N>-1?N:V,pR(e[l?V:N],m,!l&&s));!l&&s&&X&&e[V].componentProviders++}}}function Vv(r,t,e,s){const l=Eu(t);if(l||function(r){return!!r.useClass}(t)){const h=(t.useClass||t).prototype.ngOnDestroy;if(h){const p=r.destroyHooks||(r.destroyHooks=[]);if(!l&&t.multi){const m=p.indexOf(e);-1===m?p.push(e,[s,h]):p[m+1].push(s,h)}else p.push(e,h)}}}function pR(r,t,e){return e&&r.componentProviders++,r.multi.push(t)-1}function Hv(r,t,e,s){for(let l=e;l<s;l++)if(t[l]===r)return l;return-1}function UP(r,t,e,s){return Uv(this.multi,[])}function GP(r,t,e,s){const l=this.multi;let u;if(this.providerFactory){const h=this.providerFactory.componentProviders,p=mr(e,e[1],this.providerFactory.index,s);u=p.slice(0,h),Uv(l,u);for(let m=h;m<p.length;m++)u.push(p[m])}else u=[],Uv(l,u);return u}function Uv(r,t){for(let e=0;e<r.length;e++)t.push((0,r[e])());return t}function Hn(r,t=[]){return e=>{e.providersResolver=(s,l)=>function(r,t,e){const s=Zt();if(s.firstCreatePass){const l=Dr(r);Bv(e,s.data,s.blueprint,l,!0),Bv(t,s.data,s.blueprint,l,!1)}}(s,l?l(r):r,t)}}class fR{}const mR="ngComponent";class zP{resolveComponentFactory(t){throw function(r){const t=Error(`No component factory found for ${Vt(r)}. Did you add it to @NgModule.entryComponents?`);return t[mR]=r,t}(t)}}let _a=(()=>{class r{}return r.NULL=new zP,r})();function qp(...r){}function Pu(r,t){return new wn(gr(r,t))}const YP=function(){return Pu(qn(),Pe())};let wn=(()=>{class r{constructor(e){this.nativeElement=e}}return r.__NG_ELEMENT_ID__=YP,r})();function _R(r){return r instanceof wn?r.nativeElement:r}class sl{}let Ds=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>JP(),r})();const JP=function(){const r=Pe(),e=Xi(qn().index,r);return function(r){return r[11]}(Vr(e)?e:r)};let Wv=(()=>{class r{}return r.\u0275prov=st({token:r,providedIn:"root",factory:()=>null}),r})();class va{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const vR=new va("13.0.0"),Fu={};function ef(r,t,e,s,l=!1){for(;null!==e;){const u=t[e.index];if(null!==u&&s.push(ri(u)),Ir(u))for(let p=10;p<u.length;p++){const m=u[p],v=m[1].firstChild;null!==v&&ef(m[1],m,v,s)}const h=e.type;if(8&h)ef(r,t,e.child,s);else if(32&h){const p=P_(e,t);let m;for(;m=p();)s.push(m)}else if(16&h){const p=EC(t,e);if(Array.isArray(p))s.push(...p);else{const m=ih(t[16]);ef(m[1],m,p,s,!0)}}e=l?e.projectionNext:e.next}return s}class Th{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ef(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Ir(t)){const e=t[8],s=e?e.indexOf(this):-1;s>-1&&(U_(t,s),Xo(e,s))}this._attachedToViewContainer=!1}dC(this._lView[1],this._lView)}onDestroy(t){XC(this._lView[1],this._lView,null,t)}markForCheck(){lv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){cv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,t,e){Ba(!0);try{cv(r,t,e)}finally{Ba(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,rh(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class qP extends Th{constructor(t){super(t),this._view=t}detectChanges(){tS(this._view)}checkNoChanges(){!function(r){Ba(!0);try{tS(r)}finally{Ba(!1)}}(this._view)}get context(){return null}}class yR extends _a{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ii(t);return new jv(e,this.ngModule)}}function bR(r){const t=[];for(let e in r)r.hasOwnProperty(e)&&t.push({propName:r[e],templateName:e});return t}const t1=new lt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>rC});class jv extends fR{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(dN).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return bR(this.componentDef.inputs)}get outputs(){return bR(this.componentDef.outputs)}create(t,e,s,l){const u=(l=l||this.ngModule)?function(r,t){return{get:(e,s,l)=>{const u=r.get(e,Fu,l);return u!==Fu||s===Fu?u:t.get(e,s,l)}}}(t,l.injector):t,h=u.get(sl,$d),p=u.get(Wv,null),m=h.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",T=s?function(r,t,e){if(Yn(r))return r.selectRootElement(t,e===Li.ShadowDom);let s="string"==typeof t?r.querySelector(t):t;return s.textContent="",s}(m,s,this.componentDef.encapsulation):H_(h.createRenderer(null,this.componentDef),v,function(r){const t=r.toLowerCase();return"svg"===t?Kd:"math"===t?"http://www.w3.org/1998/MathML/":null}(v)),I=this.componentDef.onPush?576:528,O=function(r,t){return{components:[],scheduler:r||rC,clean:JN,playerHandler:t||null,flags:0}}(),N=Hp(0,null,null,1,0,null,null,null,null,null),V=oh(null,N,O,I,null,null,h,m,p,u);let Q,X;Jl(V);try{const ue=function(r,t,e,s,l,u){const h=e[1];e[20]=r;const m=_u(h,20,2,"#host",null),v=m.mergedAttrs=t.hostAttrs;null!==v&&(Gp(m,v,!0),null!==r&&(Zl(l,r,v),null!==m.classes&&X_(l,r,m.classes),null!==m.styles&&SC(l,r,m.styles)));const T=s.createRenderer(r,t),I=oh(e,WC(t),null,t.onPush?64:16,e[20],m,s,T,u||null,null);return h.firstCreatePass&&(ja(Wa(m,e),h,t.type),QC(h,m),ZC(m,e.length,1)),Up(e,I),e[20]=I}(T,this.componentDef,V,h,m);if(T)if(s)Zl(m,T,["ng-version",vR.full]);else{const{attrs:ce,classes:ke}=function(r){const t=[],e=[];let s=1,l=2;for(;s<r.length;){let u=r[s];if("string"==typeof u)2===l?""!==u&&t.push(u,r[++s]):8===l&&e.push(u);else{if(!vo(l))break;l=u}s++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);ce&&Zl(m,T,ce),ke&&ke.length>0&&X_(m,T,ke.join(" "))}if(X=jl(N,20),void 0!==e){const ce=X.projection=[];for(let ke=0;ke<this.ngContentSelectors.length;ke++){const Ue=e[ke];ce.push(null!=Ue?Array.from(Ue):null)}}Q=function(r,t,e,s,l){const u=e[1],h=function(r,t,e){const s=qn();r.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),qC(r,s,t,vu(r,t,1,null),e));const l=mr(t,r,s.directiveStart,s);Ji(l,t);const u=gr(s,t);return u&&Ji(u,t),l}(u,e,t);if(s.components.push(h),r[8]=h,l&&l.forEach(m=>m(h,t)),t.contentQueries){const m=qn();t.contentQueries(1,h,m.directiveStart)}const p=qn();return!u.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(ho(p.index),$C(e[1],p,0,p.directiveStart,p.directiveEnd,t),JC(t,h)),h}(ue,this.componentDef,V,O,[Tk]),sh(N,V,null)}finally{ea()}return new o1(this.componentType,Q,Pu(X,V),V,X)}}class o1 extends class{}{constructor(t,e,s,l,u){super(),this.location=s,this._rootLView=l,this._tNode=u,this.instance=e,this.hostView=this.changeDetectorRef=new qP(l),this.componentType=t}get injector(){return new vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class es{}class ER{}const Bu=new Map;class CR extends es{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new yR(this);const s=fr(t);this._bootstrapComponents=$o(s.bootstrap),this._r3Injector=uS(t,e,[{provide:es,useValue:this},{provide:_a,useValue:this.componentFactoryResolver}],Vt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=mn.THROW_IF_NOT_FOUND,s=at.Default){return t===mn||t===es||t===ah?this:this._r3Injector.get(t,e,s)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Xv extends ER{constructor(t){super(),this.moduleType=t,null!==fr(t)&&function(r){const t=new Set;!function e(s){const l=fr(s,!0),u=l.id;null!==u&&(function(r,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${r} - ${Vt(t)} vs ${Vt(t.name)}`)}(u,Bu.get(u),s),Bu.set(u,s));const h=$o(l.imports);for(const p of h)t.has(p)||(t.add(p),e(p))}(r)}(t)}create(t){return new CR(this.moduleType,t)}}function wR(r,t,e,s,l,u){const h=t+e;return Qi(r,h,l)?function(r,t,e){return r[t]=e}(r,h+1,u?s.call(u,l):s(l)):function(r,t){const e=r[t];return e===kt?void 0:e}(r,h+1)}function Kv(r){return t=>{setTimeout(r,void 0,t)}}const Rn=class extends we{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,s){var m,v,T;let l=t,u=e||(()=>null),h=s;if(t&&"object"==typeof t){const I=t;l=null==(m=I.next)?void 0:m.bind(I),u=null==(v=I.error)?void 0:v.bind(I),h=null==(T=I.complete)?void 0:T.bind(I)}this.__isAsync&&(u=Kv(u),l&&(l=Kv(l)),h&&(h=Kv(h)));const p=super.subscribe({next:l,error:u,complete:h});return t instanceof a&&t.add(p),p}};function C1(){return this._results[Tu()]()}class al{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Tu(),s=al.prototype;s[e]||(s[e]=C1)}get changes(){return this._changes||(this._changes=new Rn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const s=this;s.dirty=!1;const l=vr(t);(this._changesDetected=!function(r,t,e){if(r.length!==t.length)return!1;for(let s=0;s<r.length;s++){let l=r[s],u=t[s];if(e&&(l=e(l),u=e(u)),u!==l)return!1}return!0}(s._results,l,e))&&(s._results=l,s.length=l.length,s.last=l[this.length-1],s.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;const w1=function(){return tf(qn(),Pe())};let ts=(()=>{class r{}return r.__NG_ELEMENT_ID__=w1,r})();const R1=ts,I1=class extends R1{constructor(t,e,s){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=s}createEmbeddedView(t){const e=this._declarationTContainer.tViews,s=oh(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);s[17]=this._declarationLView[this._declarationTContainer.index];const u=this._declarationLView[19];return null!==u&&(s[19]=u.createEmbeddedView(e)),sh(e,s,t),new Th(s)}};function tf(r,t){return 4&r.type?new I1(t,r,Pu(r,t)):null}const O1=function(){return kR(qn(),Pe())};let Kr=(()=>{class r{}return r.__NG_ELEMENT_ID__=O1,r})();const x1=Kr,xR=class extends x1{constructor(t,e,s){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=s}get element(){return Pu(this._hostTNode,this._hostLView)}get injector(){return new vs(this._hostTNode,this._hostLView)}get parentInjector(){const t=iu(this._hostTNode,this._hostLView);if(sp(t)){const e=ia(t,this._hostLView),s=na(t);return new vs(e[1].data[s+8],e)}return new vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=NR(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,s){const l=t.createEmbeddedView(e||{});return this.insert(l,s),l}createComponent(t,e,s,l,u){const h=t&&!("function"==typeof t);let p;if(h)p=e;else{const I=e||{};p=I.index,s=I.injector,l=I.projectableNodes,u=I.ngModuleRef}const m=h?t:new jv(Ii(t)),v=s||this.parentInjector;if(!u&&null==m.ngModule&&v){const I=v.get(es,null);I&&(u=I)}const T=m.create(v,l,void 0,u);return this.insert(T.hostView,p),T}insert(t,e){const s=t._lView,l=s[1];if(Ir(s[3])){const T=this.indexOf(t);if(-1!==T)this.detach(T);else{const I=s[3],O=new xR(I,I[6],I[3]);O.detach(O.indexOf(t))}}const u=this._adjustIndex(e),h=this._lContainer;!function(r,t,e,s){const l=10+s,u=e.length;s>0&&(e[l-1][4]=t),s<u-10?(t[4]=e[l],oa(e,10+s,t)):(e.push(t),t[4]=null),t[3]=e;const h=t[17];null!==h&&e!==h&&function(r,t){const e=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===e?r[9]=[t]:e.push(t)}(h,t);const p=t[19];null!==p&&p.insertView(r),t[2]|=128}(l,s,h,u);const p=j_(u,h),m=s[11],v=kp(m,h[7]);return null!==v&&function(r,t,e,s,l,u){s[0]=l,s[6]=t,rh(r,s,e,1,l,u)}(l,h[6],m,s,v,p),t.attachToViewContainerRef(),oa(Yv(h),u,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=NR(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),s=U_(this._lContainer,e);s&&(Xo(Yv(this._lContainer),e),dC(s[1],s))}detach(t){const e=this._adjustIndex(t,-1),s=U_(this._lContainer,e);return s&&null!=Xo(Yv(this._lContainer),e)?new Th(s):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function NR(r){return r[8]}function Yv(r){return r[8]||(r[8]=[])}function kR(r,t){let e;const s=t[r.index];if(Ir(s))e=s;else{let l;if(8&r.type)l=ri(s);else{const u=t[11];l=u.createComment("");const h=gr(r,t);nl(u,kp(u,h),l,function(r,t){return Yn(r)?r.nextSibling(t):t.nextSibling}(u,h),!1)}t[r.index]=e=eS(s,t,l,r),Up(t,e)}return new xR(e,r,t)}class $v{constructor(t){this.queryList=t,this.matches=null}clone(){return new $v(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jv{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const s=null!==t.contentQueries?t.contentQueries[0]:e.length,l=[];for(let u=0;u<s;u++){const h=e.getByIndex(u);l.push(this.queries[h.indexInDeclarationView].clone())}return new Jv(l)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==VR(t,e).matches&&this.queries[e].setDirty()}}class LR{constructor(t,e,s=null){this.predicate=t,this.flags=e,this.read=s}}class Qv{constructor(t=[]){this.queries=t}elementStart(t,e){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let s=0;s<this.length;s++){const l=null!==e?e.length:0,u=this.getByIndex(s).embeddedTView(t,l);u&&(u.indexInDeclarationView=s,null!==e?e.push(u):e=[u])}return null!==e?new Qv(e):null}template(t,e){for(let s=0;s<this.queries.length;s++)this.queries[s].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Zv{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Zv(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let s=t.parent;for(;null!==s&&8&s.type&&s.index!==e;)s=s.parent;return e===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const s=this.metadata.predicate;if(Array.isArray(s))for(let l=0;l<s.length;l++){const u=s[l];this.matchTNodeWithReadOption(t,e,L1(e,u)),this.matchTNodeWithReadOption(t,e,Xa(e,t,u,!1,!1))}else s===ts?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Xa(e,t,s,!1,!1))}matchTNodeWithReadOption(t,e,s){if(null!==s){const l=this.metadata.read;if(null!==l)if(l===wn||l===Kr||l===ts&&4&e.type)this.addMatch(e.index,-2);else{const u=Xa(e,t,l,!1,!1);null!==u&&this.addMatch(e.index,u)}else this.addMatch(e.index,s)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function L1(r,t){const e=r.localNames;if(null!==e)for(let s=0;s<e.length;s+=2)if(e[s]===t)return e[s+1];return null}function F1(r,t,e,s){return-1===e?function(r,t){return 11&r.type?Pu(r,t):4&r.type?tf(r,t):null}(t,r):-2===e?function(r,t,e){return e===wn?Pu(t,r):e===ts?tf(t,r):e===Kr?kR(t,r):void 0}(r,t,s):mr(r,r[1],e,t)}function PR(r,t,e,s){const l=t[19].queries[s];if(null===l.matches){const u=r.data,h=e.matches,p=[];for(let m=0;m<h.length;m+=2){const v=h[m];p.push(v<0?null:F1(t,u[v],h[m+1],e.metadata.read))}l.matches=p}return l.matches}function qv(r,t,e,s){const l=r.queries.getByIndex(e),u=l.matches;if(null!==u){const h=PR(r,t,l,e);for(let p=0;p<u.length;p+=2){const m=u[p];if(m>0)s.push(h[p/2]);else{const v=u[p+1],T=t[-m];for(let I=10;I<T.length;I++){const O=T[I];O[17]===O[3]&&qv(O[1],O,v,s)}if(null!==T[9]){const I=T[9];for(let O=0;O<I.length;O++){const N=I[O];qv(N[1],N,v,s)}}}}}return s}function As(r){const t=Pe(),e=Zt(),s=ep();Nc(s+1);const l=VR(e,s);if(r.dirty&&Pa(t)===(2==(2&l.metadata.flags))){if(null===l.matches)r.reset([]);else{const u=l.crossesNgTemplate?qv(e,t,s,[]):PR(e,t,l,s);r.reset(u,_R),r.notifyOnChanges()}return!0}return!1}function nf(r,t,e){const s=Zt();s.firstCreatePass&&(BR(s,new LR(r,t,e),-1),2==(2&t)&&(s.staticViewQueries=!0)),FR(s,Pe(),t)}function Vu(r,t,e,s){const l=Zt();if(l.firstCreatePass){const u=qn();BR(l,new LR(t,e,s),u.index),function(r,t){const e=r.contentQueries||(r.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(r.queries.length-1,t)}(l,r),2==(2&e)&&(l.staticContentQueries=!0)}FR(l,Pe(),e)}function Os(){return r=Pe(),t=ep(),r[19].queries[t].queryList;var r,t}function FR(r,t,e){const s=new al(4==(4&e));XC(r,t,s,s.destroy),null===t[19]&&(t[19]=new Jv),t[19].queries.push(new $v(s))}function BR(r,t,e){null===r.queries&&(r.queries=new Qv),r.queries.track(new Zv(t,e))}function VR(r,t){return r.queries.getByIndex(t)}const Rh=new lt("Application Initializer");let Uu=(()=>{class r{constructor(e){this.appInits=e,this.resolve=qp,this.reject=qp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,l)=>{this.resolve=s,this.reject=l})}runInitializers(){if(this.initialized)return;const e=[],s=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const u=this.appInits[l]();if(ph(u))e.push(u);else if(Xp(u)){const h=new Promise((p,m)=>{u.subscribe({complete:p,error:m})});e.push(h)}}Promise.all(e).then(()=>{s()}).catch(l=>{this.reject(l)}),0===e.length&&s(),this.initialized=!0}}return r.\u0275fac=function(e){return new(e||r)(De(Rh,8))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const Ih=new lt("AppId"),fF={provide:Ih,useFactory:function(){return`${oy()}${oy()}${oy()}`},deps:[]};function oy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iI=new lt("Platform Initializer"),Dh=new lt("Platform ID"),rI=new lt("appBootstrapListener");let af=(()=>{class r{log(e){console.log(e)}warn(e){console.warn(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const Ms=new lt("LocaleId"),oI=new lt("DefaultCurrencyCode");class mF{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const sy=function(r){return new Xv(r)},_F=sy,vF=function(r){return Promise.resolve(sy(r))},aI=function(r){const t=sy(r),s=$o(fr(r).declarations).reduce((l,u)=>{const h=Ii(u);return h&&l.push(new jv(h)),l},[]);return new mF(t,s)},yF=aI,bF=function(r){return Promise.resolve(aI(r))};let lf=(()=>{class r{constructor(){this.compileModuleSync=_F,this.compileModuleAsync=vF,this.compileModuleAndAllComponentsSync=yF,this.compileModuleAndAllComponentsAsync=bF}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const CF=(()=>Promise.resolve(0))();function ay(r){"undefined"==typeof Zone?CF.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class cn{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rn(!1),this.onMicrotaskEmpty=new Rn(!1),this.onStable=new Rn(!1),this.onError=new Rn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!s&&e,l.shouldCoalesceRunChangeDetection=s,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function(){let r=tn.requestAnimationFrame,t=tn.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&t){const e=r[Zone.__symbol__("OriginalDelegate")];e&&(r=e);const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(r){const t=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(tn,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,uy(r),r.isCheckStableRunning=!0,ly(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),uy(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,s,l,u,h,p)=>{try{return lI(r),e.invokeTask(l,u,h,p)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===u.type||r.shouldCoalesceRunChangeDetection)&&t(),uI(r)}},onInvoke:(e,s,l,u,h,p,m)=>{try{return lI(r),e.invoke(l,u,h,p,m)}finally{r.shouldCoalesceRunChangeDetection&&t(),uI(r)}},onHasTask:(e,s,l,u)=>{e.hasTask(l,u),s===l&&("microTask"==u.change?(r._hasPendingMicrotasks=u.microTask,uy(r),ly(r)):"macroTask"==u.change&&(r.hasPendingMacrotasks=u.macroTask))},onHandleError:(e,s,l,u)=>(e.handleError(l,u),r.runOutsideAngular(()=>r.onError.emit(u)),!1)})}(l)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(cn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,s){return this._inner.run(t,e,s)}runTask(t,e,s,l){const u=this._inner,h=u.scheduleEventTask("NgZoneEvent: "+l,t,wF,qp,qp);try{return u.runTask(h,e,s)}finally{u.cancelTask(h)}}runGuarded(t,e,s){return this._inner.runGuarded(t,e,s)}runOutsideAngular(t){return this._outer.run(t)}}const wF={};function ly(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function uy(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function lI(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function uI(r){r._nesting--,ly(r)}class DF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rn,this.onMicrotaskEmpty=new Rn,this.onStable=new Rn,this.onError=new Rn}run(t,e,s){return t.apply(e,s)}runGuarded(t,e,s){return t.apply(e,s)}runOutsideAngular(t){return t()}runTask(t,e,s,l){return t.apply(e,s)}}let cy=(()=>{class r{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cn.assertNotInAngularZone(),ay(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ay(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(e)||(clearTimeout(s.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,s,l){let u=-1;s&&s>0&&(u=setTimeout(()=>{this._callbacks=this._callbacks.filter(h=>h.timeoutId!==u),e(this._didWork,this.getPendingTasks())},s)),this._callbacks.push({doneCb:e,timeoutId:u,updateCb:l})}whenStable(e,s,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,s,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,s,l){return[]}}return r.\u0275fac=function(e){return new(e||r)(De(cn))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})(),cI=(()=>{class r{constructor(){this._applications=new Map,hy.addToWindow(this)}registerApplication(e,s){this._applications.set(e,s)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,s=!0){return hy.findTestabilityInTree(this,e,s)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();class AF{addToWindow(t){}findTestabilityInTree(t,e,s){return null}}let hy=new AF,hI=!0,dI=!1;function dy(){return dI=!0,hI}let So;const pI=new lt("AllowMultipleToken");class py{constructor(t,e){this.name=t,this.token=e}}function fI(r,t,e=[]){const s=`Platform: ${t}`,l=new lt(s);return(u=[])=>{let h=gI();if(!h||h.injector.get(pI,!1))if(r)r(e.concat(u).concat({provide:l,useValue:!0}));else{const p=e.concat(u).concat({provide:l,useValue:!0},{provide:lh,useValue:"platform"});!function(r){if(So&&!So.destroyed&&!So.injector.get(pI,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");So=r.get(mI);const t=r.get(iI,null);t&&t.forEach(e=>e())}(mn.create({providers:p,name:s}))}return function(r){const t=gI();if(!t)throw new Error("No platform exists!");if(!t.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(l)}}function gI(){return So&&!So.destroyed?So:null}let mI=(()=>{class r{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,s){const p=function(r,t){let e;return e="noop"===r?new DF:("zone.js"===r?void 0:r)||new cn({enableLongStackTrace:dy(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(s?s.ngZone:void 0,{ngZoneEventCoalescing:s&&s.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:s&&s.ngZoneRunCoalescing||!1}),m=[{provide:cn,useValue:p}];return p.run(()=>{const v=mn.create({providers:m,parent:this.injector,name:e.moduleType.name}),T=e.create(v),I=T.injector.get(tl,null);if(!I)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return p.runOutsideAngular(()=>{const O=p.onError.subscribe({next:N=>{I.handleError(N)}});T.onDestroy(()=>{fy(this._modules,T),O.unsubscribe()})}),function(r,t,e){try{const s=e();return ph(s)?s.catch(l=>{throw t.runOutsideAngular(()=>r.handleError(l)),l}):s}catch(s){throw t.runOutsideAngular(()=>r.handleError(s)),s}}(I,p,()=>{const O=T.injector.get(Uu);return O.runInitializers(),O.donePromise.then(()=>(function(r){ir(r,"Expected localeId to be defined"),"string"==typeof r&&(Ww=r.toLowerCase().replace(/_/g,"-"))}(T.injector.get(Ms,Yp)||Yp),this._moduleDoBootstrap(T),T))})})}bootstrapModule(e,s=[]){const l=_I({},s);return function(r,t,e){const s=new Xv(e);return Promise.resolve(s)}(0,0,e).then(u=>this.bootstrapModuleFactory(u,l))}_moduleDoBootstrap(e){const s=e.injector.get(ll);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(l=>s.bootstrap(l));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${Vt(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(s)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(e){return new(e||r)(De(mn))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();function _I(r,t){return Array.isArray(t)?t.reduce(_I,r):Je(Je({},r),t)}let ll=(()=>{class r{constructor(e,s,l,u,h){this._zone=e,this._injector=s,this._exceptionHandler=l,this._componentFactoryResolver=u,this._initStatus=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new ee(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),m=new ee(v=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{cn.assertNotInAngularZone(),ay(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const I=this._zone.onUnstable.subscribe(()=>{cn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{T.unsubscribe(),I.unsubscribe()}});this.isStable=Ws(p,m.pipe(function(r={}){const{connector:t=(()=>new we),resetOnError:e=!0,resetOnComplete:s=!0,resetOnRefCountZero:l=!0}=r;return u=>{let h=null,p=null,m=null,v=0,T=!1,I=!1;const O=()=>{null==p||p.unsubscribe(),p=null},N=()=>{O(),h=m=null,T=I=!1},V=()=>{const Q=h;N(),null==Q||Q.unsubscribe()};return Te((Q,X)=>{v++,!I&&!T&&O();const ue=m=null!=m?m:t();X.add(()=>{v--,0===v&&!I&&!T&&(p=gc(V,l))}),ue.subscribe(X),h||(h=new $({next:ce=>ue.next(ce),error:ce=>{I=!0,O(),p=gc(N,e,ce),ue.error(ce)},complete:()=>{T=!0,O(),p=gc(N,s),ue.complete()}}),pi(Q).subscribe(h))})(u)}}()))}bootstrap(e,s){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let l;l=e instanceof fR?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(l.componentType);const u=function(r){return r.isBoundToModule}(l)?void 0:this._injector.get(es),p=l.create(mn.NULL,[],s||l.selector,u),m=p.location.nativeElement,v=p.injector.get(cy,null),T=v&&p.injector.get(cI);return v&&T&&T.registerApplication(m,v),p.onDestroy(()=>{this.detachView(p.hostView),fy(this.components,p),T&&T.unregisterApplication(m)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const s=e;this._views.push(s),s.attachToAppRef(this)}detachView(e){const s=e;fy(this._views,s),s.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(rI,[]).concat(this._bootstrapListeners).forEach(l=>l(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(e){return new(e||r)(De(cn),De(mn),De(tl),De(_a),De(Uu))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();function fy(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}const jF=function(r){return function(r,t,e){if(Fl(r)&&!e){const s=Xi(r.index,t);return new Th(s,s)}return 47&r.type?new Th(t[16],t):null}(qn(),Pe(),16==(16&r))};let Ah=(()=>{class r{}return r.__NG_ELEMENT_ID__=jF,r})();class SI{constructor(){}supports(t){return hh(t)}create(t){return new iB(t)}}const nB=(r,t)=>t;class iB{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||nB}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,s=this._removalsHead,l=0,u=null;for(;e||s;){const h=!s||e&&e.currentIndex<RI(s,l,u)?e:s,p=RI(h,l,u),m=h.currentIndex;if(h===s)l--,s=s._nextRemoved;else if(e=e._next,null==h.previousIndex)l++;else{u||(u=[]);const v=p-l,T=m-l;if(v!=T){for(let O=0;O<v;O++){const N=O<u.length?u[O]:u[O]=0,V=N+O;T<=V&&V<v&&(u[O]=N+1)}u[h.previousIndex]=T-v}}p!==m&&t(h,p,m)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!hh(t))throw new Error(`Error trying to diff '${Vt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let l,u,h,e=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let p=0;p<this.length;p++)u=t[p],h=this._trackByFn(p,u),null!==e&&Object.is(e.trackById,h)?(s&&(e=this._verifyReinsertion(e,u,h,p)),Object.is(e.item,u)||this._addIdentityChange(e,u)):(e=this._mismatch(e,u,h,p),s=!0),e=e._next}else l=0,function(r,t){if(Array.isArray(r))for(let e=0;e<r.length;e++)t(r[e]);else{const e=r[Tu()]();let s;for(;!(s=e.next()).done;)t(s.value)}}(t,p=>{h=this._trackByFn(l,p),null!==e&&Object.is(e.trackById,h)?(s&&(e=this._verifyReinsertion(e,p,h,l)),Object.is(e.item,p)||this._addIdentityChange(e,p)):(e=this._mismatch(e,p,h,l),s=!0),e=e._next,l++}),this.length=l;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,s,l){let u;return null===t?u=this._itTail:(u=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,u,l)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(s,l))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,u,l)):t=this._addAfter(new rB(e,s),u,l),t}_verifyReinsertion(t,e,s,l){let u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==u?t=this._reinsertAfter(u,t._prev,l):t.currentIndex!=l&&(t.currentIndex=l,this._addToMoves(t,l)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const l=t._prevRemoved,u=t._nextRemoved;return null===l?this._removalsHead=u:l._nextRemoved=u,null===u?this._removalsTail=l:u._prevRemoved=l,this._insertAfter(t,e,s),this._addToMoves(t,s),t}_moveAfter(t,e,s){return this._unlink(t),this._insertAfter(t,e,s),this._addToMoves(t,s),t}_addAfter(t,e,s){return this._insertAfter(t,e,s),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,s){const l=null===e?this._itHead:e._next;return t._next=l,t._prev=e,null===l?this._itTail=t:l._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new wI),this._linkedRecords.put(t),t.currentIndex=s,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,s=t._next;return null===e?this._itHead=s:e._next=s,null===s?this._itTail=e:s._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wI),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class rB{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oB{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===e||e<=s.currentIndex)&&Object.is(s.trackById,t))return s;return null}remove(t){const e=t._prevDup,s=t._nextDup;return null===e?this._head=s:e._nextDup=s,null===s?this._tail=e:s._prevDup=e,null===this._head}}class wI{constructor(){this.map=new Map}put(t){const e=t.trackById;let s=this.map.get(e);s||(s=new oB,this.map.set(e,s)),s.add(t)}get(t,e){const l=this.map.get(t);return l?l.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function RI(r,t,e){const s=r.previousIndex;if(null===s)return s;let l=0;return e&&s<e.length&&(l=e[s]),s+t+l}class II{constructor(){}supports(t){return t instanceof Map||bv(t)}create(){return new sB}}class sB{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||bv(t)))throw new Error(`Error trying to diff '${Vt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(s,l)=>{if(e&&e.key===l)this._maybeAddToChanges(e,s),this._appendAfter=e,e=e._next;else{const u=this._getOrCreateRecordForKey(l,s);e=this._insertBeforeOrAppend(e,u)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let s=e;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const s=t._prev;return e._next=t,e._prev=s,t._prev=e,s&&(s._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const l=this._records.get(t);this._maybeAddToChanges(l,e);const u=l._prev,h=l._next;return u&&(u._next=h),h&&(h._prev=u),l._next=null,l._prev=null,l}const s=new aB(t);return this._records.set(t,s),s.currentValue=e,this._addToAdditions(s),s}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(s=>e(t[s],s))}}class aB{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function DI(){return new Oh([new SI])}let Oh=(()=>{class r{constructor(e){this.factories=e}static create(e,s){if(null!=s){const l=s.factories.slice();e=e.concat(l)}return new r(e)}static extend(e){return{provide:r,useFactory:s=>r.create(e,s||DI()),deps:[[r,new yr,new Bi]]}}find(e){const s=this.factories.find(l=>l.supports(e));if(null!=s)return s;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(r){return r.name||typeof r}(e)}'`)}}return r.\u0275prov=st({token:r,providedIn:"root",factory:DI}),r})();function AI(){return new Gu([new II])}let Gu=(()=>{class r{constructor(e){this.factories=e}static create(e,s){if(s){const l=s.factories.slice();e=e.concat(l)}return new r(e)}static extend(e){return{provide:r,useFactory:s=>r.create(e,s||AI()),deps:[[r,new yr,new Bi]]}}find(e){const s=this.factories.find(l=>l.supports(e));if(s)return s;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return r.\u0275prov=st({token:r,providedIn:"root",factory:AI}),r})();const uB=[new II],hB=new Oh([new SI]),dB=new Gu(uB),pB=fI(null,"core",[{provide:Dh,useValue:"unknown"},{provide:mI,deps:[mn]},{provide:cI,deps:[]},{provide:af,deps:[]}]),vB=[{provide:ll,useClass:ll,deps:[cn,mn,tl,_a,Uu]},{provide:t1,deps:[cn],useFactory:function(r){let t=[];return r.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Uu,useClass:Uu,deps:[[new Bi,Rh]]},{provide:lf,useClass:lf,deps:[]},fF,{provide:Oh,useFactory:function(){return hB},deps:[]},{provide:Gu,useFactory:function(){return dB},deps:[]},{provide:Ms,useFactory:function(r){return r||"undefined"!=typeof $localize&&$localize.locale||Yp},deps:[[new ha(Ms),new Bi,new yr]]},{provide:oI,useValue:"USD"}];let bB=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(De(ll))},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({providers:vB}),r})(),Tf=null;function ns(){return Tf}const qt=new lt("DocumentToken");let pl=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=st({token:r,factory:function(){return De(pD)},providedIn:"platform"}),r})();const fH=new lt("Location Initialized");let pD=(()=>{class r extends pl{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ns().getBaseHref(this._doc)}onPopState(e){const s=ns().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",e,!1),()=>s.removeEventListener("popstate",e)}onHashChange(e){const s=ns().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",e,!1),()=>s.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,s,l){fD()?this._history.pushState(e,s,l):this.location.hash=l}replaceState(e,s,l){fD()?this._history.replaceState(e,s,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(De(qt))},r.\u0275prov=st({token:r,factory:function(){return new pD(De(qt))},providedIn:"platform"}),r})();function fD(){return!!window.history.pushState}function Gy(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function gD(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function Ns(r){return r&&"?"!==r[0]?"?"+r:r}let Yu=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=st({token:r,factory:function(){return function(r){const t=De(qt).location;return new mD(De(pl),t&&t.origin||"")}()},providedIn:"root"}),r})();const Wy=new lt("appBaseHref");let mD=(()=>{class r extends Yu{constructor(e,s){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==s&&(s=this._platformLocation.getBaseHrefFromDOM()),null==s)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=s}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Gy(this._baseHref,e)}path(e=!1){const s=this._platformLocation.pathname+Ns(this._platformLocation.search),l=this._platformLocation.hash;return l&&e?`${s}${l}`:s}pushState(e,s,l,u){const h=this.prepareExternalUrl(l+Ns(u));this._platformLocation.pushState(e,s,h)}replaceState(e,s,l,u){const h=this.prepareExternalUrl(l+Ns(u));this._platformLocation.replaceState(e,s,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var s,l;null==(l=(s=this._platformLocation).historyGo)||l.call(s,e)}}return r.\u0275fac=function(e){return new(e||r)(De(pl),De(Wy,8))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})(),_H=(()=>{class r extends Yu{constructor(e,s){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(e){const s=Gy(this._baseHref,e);return s.length>0?"#"+s:s}pushState(e,s,l,u){let h=this.prepareExternalUrl(l+Ns(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(e,s,h)}replaceState(e,s,l,u){let h=this.prepareExternalUrl(l+Ns(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(e,s,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var s,l;null==(l=(s=this._platformLocation).historyGo)||l.call(s,e)}}return r.\u0275fac=function(e){return new(e||r)(De(pl),De(Wy,8))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})(),Cf=(()=>{class r{constructor(e,s){this._subject=new Rn,this._urlChangeListeners=[],this._platformStrategy=e;const l=this._platformStrategy.getBaseHref();this._platformLocation=s,this._baseHref=gD(_D(l)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,s=""){return this.path()==this.normalize(e+Ns(s))}normalize(e){return r.stripTrailingSlash(function(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,_D(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,s="",l=null){this._platformStrategy.pushState(l,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ns(s)),l)}replaceState(e,s="",l=null){this._platformStrategy.replaceState(l,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ns(s)),l)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var s,l;null==(l=(s=this._platformStrategy).historyGo)||l.call(s,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}))}_notifyUrlChangeListeners(e="",s){this._urlChangeListeners.forEach(l=>l(e,s))}subscribe(e,s,l){return this._subject.subscribe({next:e,error:s,complete:l})}}return r.normalizeQueryParams=Ns,r.joinWithSlash=Gy,r.stripTrailingSlash=gD,r.\u0275fac=function(e){return new(e||r)(De(Yu),De(pl))},r.\u0275prov=st({token:r,factory:function(){return new Cf(De(Yu),De(pl))},providedIn:"root"}),r})();function _D(r){return r.replace(/\/index.html$/,"")}var mi=(()=>((mi=mi||{})[mi.Zero=0]="Zero",mi[mi.One=1]="One",mi[mi.Two=2]="Two",mi[mi.Few=3]="Few",mi[mi.Many=4]="Many",mi[mi.Other=5]="Other",mi))();const RH=function(r){return function(r){const t=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let e=Gw(t);if(e)return e;const s=t.split("-")[0];if(e=Gw(s),e)return e;if("en"===s)return jL;throw new Error(`Missing locale data for the locale "${r}".`)}(r)[tt.PluralCase]};class Nf{}let t2=(()=>{class r extends Nf{constructor(e){super(),this.locale=e}getPluralCategory(e,s){switch(RH(s||this.locale)(e)){case mi.Zero:return"zero";case mi.One:return"one";case mi.Two:return"two";case mi.Few:return"few";case mi.Many:return"many";default:return"other"}}}return r.\u0275fac=function(e){return new(e||r)(De(Ms))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();function RD(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const s=e.indexOf("="),[l,u]=-1==s?[e,""]:[e.slice(0,s),e.slice(s+1)];if(l.trim()===t)return decodeURIComponent(u)}return null}let ID=(()=>{class r{constructor(e,s,l,u){this._iterableDiffers=e,this._keyValueDiffers=s,this._ngEl=l,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(hh(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachChangedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachRemovedItem(s=>{s.previousValue&&this._toggleClass(s.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(s=>{if("string"!=typeof s.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Vt(s.item)}`);this._toggleClass(s.item,!0)}),e.forEachRemovedItem(s=>this._toggleClass(s.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!0)):Object.keys(e).forEach(s=>this._toggleClass(s,!!e[s])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!1)):Object.keys(e).forEach(s=>this._toggleClass(s,!1)))}_toggleClass(e,s){(e=e.trim())&&e.split(/\s+/g).forEach(l=>{s?this._renderer.addClass(this._ngEl.nativeElement,l):this._renderer.removeClass(this._ngEl.nativeElement,l)})}}return r.\u0275fac=function(e){return new(e||r)(Se(Oh),Se(Gu),Se(wn),Se(Ds))},r.\u0275dir=_t({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),r})();class r2{constructor(t,e,s,l){this.$implicit=t,this.ngForOf=e,this.index=s,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let DD=(()=>{class r{constructor(e,s,l){this._viewContainer=e,this._template=s,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(s){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(r){return r.name||typeof r}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const s=[];e.forEachOperation((l,u,h)=>{if(null==l.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new r2(null,this._ngForOf,-1,-1),null===h?void 0:h),m=new AD(l,p);s.push(m)}else if(null==h)this._viewContainer.remove(null===u?void 0:u);else if(null!==u){const p=this._viewContainer.get(u);this._viewContainer.move(p,h);const m=new AD(l,p);s.push(m)}});for(let l=0;l<s.length;l++)this._perViewChange(s[l].view,s[l].record);for(let l=0,u=this._viewContainer.length;l<u;l++){const h=this._viewContainer.get(l);h.context.index=l,h.context.count=u,h.context.ngForOf=this._ngForOf}e.forEachIdentityChange(l=>{this._viewContainer.get(l.currentIndex).context.$implicit=l.item})}_perViewChange(e,s){e.context.$implicit=s.item}static ngTemplateContextGuard(e,s){return!0}}return r.\u0275fac=function(e){return new(e||r)(Se(Kr),Se(ts),Se(Oh))},r.\u0275dir=_t({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),r})();class AD{constructor(t,e){this.record=t,this.view=e}}let Zy=(()=>{class r{constructor(e,s){this._viewContainer=e,this._context=new s2,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){OD("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){OD("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,s){return!0}}return r.\u0275fac=function(e){return new(e||r)(Se(Kr),Se(ts))},r.\u0275dir=_t({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class s2{constructor(){this.$implicit=null,this.ngIf=null}}function OD(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${Vt(t)}'.`)}let ND=(()=>{class r{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=kD}transform(e,s=kD){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const l=this.differ.diff(e),u=s!==this.compareFn;return l&&(this.keyValues=[],l.forEachItem(h=>{this.keyValues.push(function(r,t){return{key:r,value:t}}(h.key,h.currentValue))})),(l||u)&&(this.keyValues.sort(s),this.compareFn=s),this.keyValues}}return r.\u0275fac=function(e){return new(e||r)(Se(Gu,16))},r.\u0275pipe=Pi({name:"keyvalue",type:r,pure:!1}),r})();function kD(r,t){const e=r.key,s=t.key;if(e===s)return 0;if(void 0===e)return 1;if(void 0===s)return-1;if(null===e)return 1;if(null===s)return-1;if("string"==typeof e&&"string"==typeof s)return e<s?-1:1;if("number"==typeof e&&"number"==typeof s)return e-s;if("boolean"==typeof e&&"boolean"==typeof s)return e<s?-1:1;const l=String(e),u=String(s);return l==u?0:l<u?-1:1}let ib=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({providers:[{provide:Nf,useClass:t2}]}),r})();const LD="browser";let L2=(()=>{class r{}return r.\u0275prov=st({token:r,providedIn:"root",factory:()=>new P2(De(qt),window)}),r})();class P2{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(r,t){const e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const s=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let l=s.currentNode;for(;l;){const u=l.shadowRoot;if(u){const h=u.getElementById(t)||u.querySelector(`[name="${t}"]`);if(h)return h}l=s.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),s=e.left+this.window.pageXOffset,l=e.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(s-u[0],l-u[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=PD(this.window.history)||PD(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function PD(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class FD{}class rb extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var r;r=new rb,Tf||(Tf=r)}onAndCancel(t,e,s){return t.addEventListener(e,s,!1),()=>{t.removeEventListener(e,s,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(jh=jh||document.querySelector("base"),jh?jh.getAttribute("href"):null);return null==e?null:function(r){kf=kf||document.createElement("a"),kf.setAttribute("href",r);const t=kf.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){jh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return RD(document.cookie,t)}}let kf,jh=null;const BD=new lt("TRANSITION_ID"),G2=[{provide:Rh,useFactory:function(r,t,e){return()=>{e.get(Uu).donePromise.then(()=>{const s=ns(),l=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let u=0;u<l.length;u++)s.remove(l[u])})}},deps:[BD,qt,mn],multi:!0}];class ob{static init(){var r;r=new ob,hy=r}addToWindow(t){tn.getAngularTestability=(s,l=!0)=>{const u=t.findTestabilityInTree(s,l);if(null==u)throw new Error("Could not find testability for element.");return u},tn.getAllAngularTestabilities=()=>t.getAllTestabilities(),tn.getAllAngularRootElements=()=>t.getAllRootElements(),tn.frameworkStabilizers||(tn.frameworkStabilizers=[]),tn.frameworkStabilizers.push(s=>{const l=tn.getAllAngularTestabilities();let u=l.length,h=!1;const p=function(m){h=h||m,u--,0==u&&s(h)};l.forEach(function(m){m.whenStable(p)})})}findTestabilityInTree(t,e,s){if(null==e)return null;const l=t.getTestability(e);return null!=l?l:s?ns().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let W2=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const zh=new lt("EventManagerPlugins");let Pf=(()=>{class r{constructor(e,s){this._zone=s,this._eventNameToPlugin=new Map,e.forEach(l=>l.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,s,l){return this._findPluginFor(s).addEventListener(e,s,l)}addGlobalEventListener(e,s,l){return this._findPluginFor(s).addGlobalEventListener(e,s,l)}getZone(){return this._zone}_findPluginFor(e){const s=this._eventNameToPlugin.get(e);if(s)return s;const l=this._plugins;for(let u=0;u<l.length;u++){const h=l[u];if(h.supports(e))return this._eventNameToPlugin.set(e,h),h}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(De(zh),De(cn))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();class sb{constructor(t){this._doc=t}addGlobalEventListener(t,e,s){const l=ns().getGlobalEventTarget(this._doc,t);if(!l)throw new Error(`Unsupported event target ${l} for event ${e}`);return this.addEventListener(l,e,s)}}let HD=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const s=new Set;e.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),s.add(l))}),this.onStylesAdded(s)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})(),Xh=(()=>{class r extends HD{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,s,l){e.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,l.push(s.appendChild(h))})}addHost(e){const s=[];this._addStylesToHost(this._stylesSet,e,s),this._hostNodes.set(e,s)}removeHost(e){const s=this._hostNodes.get(e);s&&s.forEach(UD),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((s,l)=>{this._addStylesToHost(e,l,s)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(UD))}}return r.\u0275fac=function(e){return new(e||r)(De(qt))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();function UD(r){ns().remove(r)}const ab={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lb=/%COMP%/g;function Ff(r,t,e){for(let s=0;s<t.length;s++){let l=t[s];Array.isArray(l)?Ff(r,l,e):(l=l.replace(lb,r),e.push(l))}return e}function jD(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let Bf=(()=>{class r{constructor(e,s,l){this.eventManager=e,this.sharedStylesHost=s,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new ub(e)}createRenderer(e,s){if(!e||!s)return this.defaultRenderer;switch(s.encapsulation){case Li.Emulated:{let l=this.rendererByCompId.get(s.id);return l||(l=new rU(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,l)),l.applyToHost(e),l}case 1:case Li.ShadowDom:return new oU(this.eventManager,this.sharedStylesHost,e,s);default:if(!this.rendererByCompId.has(s.id)){const l=Ff(s.id,s.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(De(Pf),De(Xh),De(Ih))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();class ub{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(ab[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,s){t&&t.insertBefore(e,s)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let s="string"==typeof t?document.querySelector(t):t;if(!s)throw new Error(`The selector "${t}" did not match any elements`);return e||(s.textContent=""),s}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,s,l){if(l){e=l+":"+e;const u=ab[l];u?t.setAttributeNS(u,e,s):t.setAttribute(e,s)}else t.setAttribute(e,s)}removeAttribute(t,e,s){if(s){const l=ab[s];l?t.removeAttributeNS(l,e):t.removeAttribute(`${s}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,s,l){l&(Mr.DashCase|Mr.Important)?t.style.setProperty(e,s,l&Mr.Important?"important":""):t.style[e]=s}removeStyle(t,e,s){s&Mr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,s){t[e]=s}setValue(t,e){t.nodeValue=e}listen(t,e,s){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,jD(s)):this.eventManager.addEventListener(t,e,jD(s))}}class rU extends ub{constructor(t,e,s,l){super(t),this.component=s;const u=Ff(l+"-"+s.id,s.styles,[]);e.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(lb,l+"-"+s.id),this.hostAttr="_nghost-%COMP%".replace(lb,l+"-"+s.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const s=super.createElement(t,e);return super.setAttribute(s,this.contentAttr,""),s}}class oU extends ub{constructor(t,e,s,l){super(t),this.sharedStylesHost=e,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ff(l.id,l.styles,[]);for(let h=0;h<u.length;h++){const p=document.createElement("style");p.textContent=u[h],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,s){return super.insertBefore(this.nodeOrShadowRoot(t),e,s)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let sU=(()=>{class r extends sb{constructor(e){super(e)}supports(e){return!0}addEventListener(e,s,l){return e.addEventListener(s,l,!1),()=>this.removeEventListener(e,s,l)}removeEventListener(e,s,l){return e.removeEventListener(s,l)}}return r.\u0275fac=function(e){return new(e||r)(De(qt))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const KD=["alt","control","meta","shift"],pU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},YD={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},fU={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let gU=(()=>{class r extends sb{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,s,l){const u=r.parseEventName(s),h=r.eventCallback(u.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ns().onAndCancel(e,u.domEventName,h))}static parseEventName(e){const s=e.toLowerCase().split("."),l=s.shift();if(0===s.length||"keydown"!==l&&"keyup"!==l)return null;const u=r._normalizeKey(s.pop());let h="";if(KD.forEach(m=>{const v=s.indexOf(m);v>-1&&(s.splice(v,1),h+=m+".")}),h+=u,0!=s.length||0===u.length)return null;const p={};return p.domEventName=l,p.fullKey=h,p}static getEventFullKey(e){let s="",l=function(r){let t=r.key;if(null==t){if(t=r.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===r.location&&YD.hasOwnProperty(t)&&(t=YD[t]))}return pU[t]||t}(e);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),KD.forEach(u=>{u!=l&&fU[u](e)&&(s+=u+".")}),s+=l,s}static eventCallback(e,s,l){return u=>{r.getEventFullKey(u)===e&&l.runGuarded(()=>s(u))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(De(qt))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const CU=fI(pB,"browser",[{provide:Dh,useValue:LD},{provide:iI,useValue:function(){rb.makeCurrent(),ob.init()},multi:!0},{provide:qt,useFactory:function(){return r=document,Dc=r,document;var r},deps:[]}]),SU=[[],{provide:lh,useValue:"root"},{provide:tl,useFactory:function(){return new tl},deps:[]},{provide:zh,useClass:sU,multi:!0,deps:[qt,cn,Dh]},{provide:zh,useClass:gU,multi:!0,deps:[qt]},[],{provide:Bf,useClass:Bf,deps:[Pf,Xh,Ih]},{provide:sl,useExisting:Bf},{provide:HD,useExisting:Xh},{provide:Xh,useClass:Xh,deps:[qt]},{provide:cy,useClass:cy,deps:[cn]},{provide:Pf,useClass:Pf,deps:[zh,cn]},{provide:FD,useClass:W2,deps:[]},[]];let $D=(()=>{class r{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:r,providers:[{provide:Ih,useValue:e.appId},{provide:BD,useExisting:Ih},G2]}}}return r.\u0275fac=function(e){return new(e||r)(De(r,12))},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({providers:SU,imports:[ib,bB]}),r})();"undefined"!=typeof window&&window;const{isArray:xU}=Array,{getPrototypeOf:NU,prototype:kU,keys:LU}=Object;function QD(r){if(1===r.length){const t=r[0];if(xU(t))return{args:t,keys:null};if(function(r){return r&&"object"==typeof r&&NU(r)===kU}(t)){const e=LU(t);return{args:e.map(s=>t[s]),keys:e}}}return{args:r,keys:null}}const{isArray:FU}=Array;function fb(r){return xe(t=>function(r,t){return FU(t)?r(...t):r(t)}(r,t))}function ZD(r,t){return r.reduce((e,s,l)=>(e[s]=t[l],e),{})}let qD=(()=>{class r{constructor(e,s){this._renderer=e,this._elementRef=s,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(e,s){this._renderer.setProperty(this._elementRef.nativeElement,e,s)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(Se(Ds),Se(wn))},r.\u0275dir=_t({type:r}),r})(),fl=(()=>{class r extends qD{}return r.\u0275fac=function(){let t;return function(s){return(t||(t=_r(r)))(s||r)}}(),r.\u0275dir=_t({type:r,features:[Tn]}),r})();const Mo=new lt("NgValueAccessor"),UU={provide:Mo,useExisting:bn(()=>Vf),multi:!0},WU=new lt("CompositionEventMode");let Vf=(()=>{class r extends qD{constructor(e,s,l){super(e,s),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=ns()?ns().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(Se(Ds),Se(wn),Se(WU,8))},r.\u0275dir=_t({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,s){1&e&&Vn("input",function(u){return s._handleInput(u.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(u){return s._compositionEnd(u.target.value)})},features:[Hn([UU]),Tn]}),r})();const tr=new lt("NgValidators"),Ca=new lt("NgAsyncValidators");function cA(r){return null!=r}function hA(r){const t=ph(r)?pi(r):r;return Xp(t),t}function dA(r){let t={};return r.forEach(e=>{t=null!=e?Je(Je({},t),e):t}),0===Object.keys(t).length?null:t}function pA(r,t){return t.map(e=>e(r))}function fA(r){return r.map(t=>function(r){return!r.validate}(t)?t:e=>t.validate(e))}function gb(r){return null!=r?function(r){if(!r)return null;const t=r.filter(cA);return 0==t.length?null:function(e){return dA(pA(e,t))}}(fA(r)):null}function mb(r){return null!=r?function(r){if(!r)return null;const t=r.filter(cA);return 0==t.length?null:function(e){return function(...r){const t=Sd(r),{args:e,keys:s}=QD(r),l=new ee(u=>{const{length:h}=e;if(!h)return void u.complete();const p=new Array(h);let m=h,v=h;for(let T=0;T<h;T++){let I=!1;Xe(e[T]).subscribe(new Ie(u,O=>{I||(I=!0,v--),p[T]=O},()=>m--,void 0,()=>{(!m||!I)&&(v||u.next(s?ZD(s,p):p),u.complete())}))}});return t?l.pipe(fb(t)):l}(pA(e,t).map(hA)).pipe(xe(dA))}}(fA(r)):null}function _A(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function _b(r){return r?Array.isArray(r)?r:[r]:[]}function Hf(r,t){return Array.isArray(r)?r.includes(t):r===t}function bA(r,t){const e=_b(t);return _b(r).forEach(l=>{Hf(e,l)||e.push(l)}),e}function EA(r,t){return _b(t).filter(e=>!Hf(r,e))}class TA{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=gb(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=mb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class dr extends TA{get formDirective(){return null}get path(){return null}}class Sa extends TA{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let SA=(()=>{class r extends class{constructor(t){this._cd=t}is(t){var e,s,l;return"submitted"===t?!!(null==(e=this._cd)?void 0:e.submitted):!!(null==(l=null==(s=this._cd)?void 0:s.control)?void 0:l[t])}}{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(Se(Sa,2))},r.\u0275dir=_t({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,s){2&e&&Eo("ng-untouched",s.is("untouched"))("ng-touched",s.is("touched"))("ng-pristine",s.is("pristine"))("ng-dirty",s.is("dirty"))("ng-valid",s.is("valid"))("ng-invalid",s.is("invalid"))("ng-pending",s.is("pending"))},features:[Tn]}),r})();function Kh(r,t){(function(r,t){const e=function(r){return r._rawValidators}(r);null!==t.validator?r.setValidators(_A(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const s=function(r){return r._rawAsyncValidators}(r);null!==t.asyncValidator?r.setAsyncValidators(_A(s,t.asyncValidator)):"function"==typeof s&&r.setAsyncValidators([s]);const l=()=>r.updateValueAndValidity();jf(t._rawValidators,l),jf(t._rawAsyncValidators,l)})(r,t),t.valueAccessor.writeValue(r.value),function(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&wA(r,t)})}(r,t),function(r,t){const e=(s,l)=>{t.valueAccessor.writeValue(s),l&&t.viewToModelUpdate(s)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&wA(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function(r,t){if(t.valueAccessor.setDisabledState){const e=s=>{t.valueAccessor.setDisabledState(s)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function jf(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function wA(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function Xf(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}const Yh="VALID",Kf="INVALID",$u="PENDING",$h="DISABLED";function Cb(r){return(wb(r)?r.validators:r)||null}function DA(r){return Array.isArray(r)?gb(r):r||null}function Sb(r,t){return(wb(t)?t.asyncValidators:r)||null}function AA(r){return Array.isArray(r)?mb(r):r||null}function wb(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class Rb{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=DA(this._rawValidators),this._composedAsyncValidatorFn=AA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Yh}get invalid(){return this.status===Kf}get pending(){return this.status==$u}get disabled(){return this.status===$h}get enabled(){return this.status!==$h}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=DA(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=AA(t)}addValidators(t){this.setValidators(bA(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(bA(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(EA(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(EA(t,this._rawAsyncValidators))}hasValidator(t){return Hf(this._rawValidators,t)}hasAsyncValidator(t){return Hf(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=$u,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=$h,this.errors=null,this._forEachChild(s=>{s.disable(wi(Je({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(wi(Je({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Yh,this._forEachChild(s=>{s.enable(wi(Je({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(wi(Je({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yh||this.status===$u)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$h:Yh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=$u,this._hasOwnPendingAsyncValidator=!0;const e=hA(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(r,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let s=r;return t.forEach(l=>{s=s instanceof Ib?s.controls.hasOwnProperty(l)?s.controls[l]:null:s instanceof rG&&s.at(l)||null}),s}(this,t)}getError(t,e){const s=e?this.get(e):this;return s&&s.errors?s.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Rn,this.statusChanges=new Rn}_calculateStatus(){return this._allControlsDisabled()?$h:this.errors?Kf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($u)?$u:this._anyControlsHaveStatus(Kf)?Kf:Yh}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){wb(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Yf extends Rb{constructor(t=null,e,s){super(Cb(e),Sb(s,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Xf(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Xf(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ib extends Rb{constructor(t,e,s){super(Cb(e),Sb(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,s={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(s=>{this._throwIfControlMissing(s),this.controls[s].setValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(s=>{this.controls[s]&&this.controls[s].patchValue(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((s,l)=>{s.reset(t[l],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,s)=>(t[s]=e instanceof Yf?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,s)=>!!s._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const s=this.controls[e];s&&t(s,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const s=this.controls[e];if(this.contains(e)&&t(s))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,s)=>((e.enabled||this.disabled)&&(t[s]=e.value),t))}_reduceChildren(t,e){let s=t;return this._forEachChild((l,u)=>{s=e(s,l,u)}),s}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,s)=>{if(void 0===t[s])throw new Error(`Must supply a value for form control with name: '${s}'.`)})}}class rG extends Rb{constructor(t,e,s){super(Cb(e),Sb(s,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,s={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:s.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,s={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((s,l)=>{this._throwIfControlMissing(l),this.at(l).setValue(s,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((s,l)=>{this.at(l)&&this.at(l).patchValue(s,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((s,l)=>{s.reset(t[l],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Yf?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,s)=>!!s._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,s)=>{t(e,s)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,s)=>{if(void 0===t[s])throw new Error(`Must supply a value for form control at index: ${s}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const aG={provide:Sa,useExisting:bn(()=>Ab)},xA=(()=>Promise.resolve(null))();let Ab=(()=>{class r extends Sa{constructor(e,s,l,u){super(),this.control=new Yf,this._registered=!1,this.update=new Rn,this._parent=e,this._setValidators(s),this._setAsyncValidators(l),this.valueAccessor=function(r,t){if(!t)return null;let e,s,l;return Array.isArray(t),t.forEach(u=>{u.constructor===Vf?e=u:function(r){return Object.getPrototypeOf(r.constructor)===fl}(u)?s=u:l=u}),l||s||e||null}(0,u)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(r,t){return[...t.path,r]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Kh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){xA.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const s=e.isDisabled.currentValue,l=""===s||s&&"false"!==s;xA.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable()})}}return r.\u0275fac=function(e){return new(e||r)(Se(dr,9),Se(tr,10),Se(Ca,10),Se(Mo,10))},r.\u0275dir=_t({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Hn([aG]),Tn,Di]}),r})(),kA=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({}),r})(),xG=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({imports:[[kA]]}),r})(),NG=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({imports:[xG]}),r})();function wt(...r){return pi(r,Ma(r))}class Zr extends we{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:s}=this;if(t)throw e;return this._throwIfClosed(),s}next(t){super.next(this._value=t)}}function qA(r,t,e){r?Ti(e,r,t):t()}const Qh=w(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function $f(...r){return io(1)(pi(r,Ma(r)))}function eO(r){return new ee(t=>{Xe(r()).subscribe(t)})}function tO(){return Te((r,t)=>{let e=null;r._refCount++;const s=new Ie(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(e=null);const l=r._connection,u=e;e=null,l&&(!u||l===u)&&l.unsubscribe(),t.unsubscribe()});r.subscribe(s),s.closed||(e=r.connect())})}class FG extends ee{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,Re(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new a;const e=this.getSubject();t.add(this.source.subscribe(new Ie(e,void 0,()=>{this._teardown(),e.complete()},s=>{this._teardown(),e.error(s)},()=>this._teardown()))),t.closed&&(this._connection=null,t=a.EMPTY)}return t}refCount(){return tO()(this)}}function Ps(r,t){return Te((e,s)=>{let l=null,u=0,h=!1;const p=()=>h&&!l&&s.complete();e.subscribe(new Ie(s,m=>{null==l||l.unsubscribe();let v=0;const T=u++;Xe(r(m,T)).subscribe(l=new Ie(s,I=>s.next(t?t(m,I,T,v++):I),()=>{l=null,p()}))},()=>{h=!0,p()}))})}function Jf(...r){const t=Ma(r);return Te((e,s)=>{(t?$f(r,e,t):$f(r,e)).subscribe(s)})}function BG(r,t,e,s,l){return(u,h)=>{let p=e,m=t,v=0;u.subscribe(new Ie(h,T=>{const I=v++;m=p?r(m,T,I):(p=!0,T),s&&h.next(m)},l&&(()=>{p&&h.next(m),h.complete()})))}}function nO(r,t){return Te(BG(r,t,arguments.length>=2,!0))}function Er(r,t){return Te((e,s)=>{let l=0;e.subscribe(new Ie(s,u=>r.call(t,u,l++)&&s.next(u)))})}function wa(r){return Te((t,e)=>{let u,s=null,l=!1;s=t.subscribe(new Ie(e,void 0,void 0,h=>{u=Xe(r(h,wa(r)(t))),s?(s.unsubscribe(),s=null,u.subscribe(e)):l=!0})),l&&(s.unsubscribe(),s=null,u.subscribe(e))})}function Ju(r,t){return b(t)?Fn(r,t,1):Fn(r,1)}function Pb(r){return r<=0?()=>Pr:Te((t,e)=>{let s=[];t.subscribe(new Ie(e,l=>{s.push(l),r<s.length&&s.shift()},()=>{for(const l of s)e.next(l);e.complete()},void 0,()=>{s=null}))})}function iO(r=VG){return Te((t,e)=>{let s=!1;t.subscribe(new Ie(e,l=>{s=!0,e.next(l)},()=>s?e.complete():e.error(r())))})}function VG(){return new Qh}function rO(r){return Te((t,e)=>{let s=!1;t.subscribe(new Ie(e,l=>{s=!0,e.next(l)},()=>{s||e.next(r),e.complete()}))})}function Qu(r,t){const e=arguments.length>=2;return s=>s.pipe(r?Er((l,u)=>r(l,u,s)):W,Fr(1),e?rO(t):iO(()=>new Qh))}function pr(r,t,e){const s=b(r)||t||e?{next:r,error:t,complete:e}:r;return s?Te((l,u)=>{var h;null===(h=s.subscribe)||void 0===h||h.call(s);let p=!0;l.subscribe(new Ie(u,m=>{var v;null===(v=s.next)||void 0===v||v.call(s,m),u.next(m)},()=>{var m;p=!1,null===(m=s.complete)||void 0===m||m.call(s),u.complete()},m=>{var v;p=!1,null===(v=s.error)||void 0===v||v.call(s,m),u.error(m)},()=>{var m,v;p&&(null===(m=s.unsubscribe)||void 0===m||m.call(s)),null===(v=s.finalize)||void 0===v||v.call(s)}))}):W}class Fs{constructor(t,e){this.id=t,this.url=e}}class Fb extends Fs{constructor(t,e,s="imperative",l=null){super(t,e),this.navigationTrigger=s,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zh extends Fs{constructor(t,e,s){super(t,e),this.urlAfterRedirects=s}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class oO extends Fs{constructor(t,e,s){super(t,e),this.reason=s}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class GG extends Fs{constructor(t,e,s){super(t,e),this.error=s}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class WG extends Fs{constructor(t,e,s,l){super(t,e),this.urlAfterRedirects=s,this.state=l}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jG extends Fs{constructor(t,e,s,l){super(t,e),this.urlAfterRedirects=s,this.state=l}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zG extends Fs{constructor(t,e,s,l,u){super(t,e),this.urlAfterRedirects=s,this.state=l,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class XG extends Fs{constructor(t,e,s,l){super(t,e),this.urlAfterRedirects=s,this.state=l}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KG extends Fs{constructor(t,e,s,l){super(t,e),this.urlAfterRedirects=s,this.state=l}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sO{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class aO{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class YG{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $G{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JG{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QG{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lO{constructor(t,e,s){this.routerEvent=t,this.position=e,this.anchor=s}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $t="primary";class ZG{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Zu(r){return new ZG(r)}const uO="ngNavigationCancelingError";function Bb(r){const t=Error("NavigationCancelingError: "+r);return t[uO]=!0,t}function eW(r,t,e){const s=e.path.split("/");if(s.length>r.length||"full"===e.pathMatch&&(t.hasChildren()||s.length<r.length))return null;const l={};for(let u=0;u<s.length;u++){const h=s[u],p=r[u];if(h.startsWith(":"))l[h.substring(1)]=p;else if(h!==p.path)return null}return{consumed:r.slice(0,s.length),posParams:l}}function is(r,t){const e=r?Object.keys(r):void 0,s=t?Object.keys(t):void 0;if(!e||!s||e.length!=s.length)return!1;let l;for(let u=0;u<e.length;u++)if(l=e[u],!cO(r[l],t[l]))return!1;return!0}function cO(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const e=[...r].sort(),s=[...t].sort();return e.every((l,u)=>s[u]===l)}return r===t}function hO(r){return Array.prototype.concat.apply([],r)}function dO(r){return r.length>0?r[r.length-1]:null}function Hi(r,t){for(const e in r)r.hasOwnProperty(e)&&t(r[e],e)}function rs(r){return Xp(r)?r:ph(r)?pi(Promise.resolve(r)):wt(r)}const iW={exact:function gO(r,t,e){if(!ml(r.segments,t.segments)||!Qf(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const s in t.children)if(!r.children[s]||!gO(r.children[s],t.children[s],e))return!1;return!0},subset:mO},pO={exact:function(r,t){return is(r,t)},subset:function(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>cO(r[e],t[e]))},ignored:()=>!0};function fO(r,t,e){return iW[e.paths](r.root,t.root,e.matrixParams)&&pO[e.queryParams](r.queryParams,t.queryParams)&&!("exact"===e.fragment&&r.fragment!==t.fragment)}function mO(r,t,e){return _O(r,t,t.segments,e)}function _O(r,t,e,s){if(r.segments.length>e.length){const l=r.segments.slice(0,e.length);return!(!ml(l,e)||t.hasChildren()||!Qf(l,e,s))}if(r.segments.length===e.length){if(!ml(r.segments,e)||!Qf(r.segments,e,s))return!1;for(const l in t.children)if(!r.children[l]||!mO(r.children[l],t.children[l],s))return!1;return!0}{const l=e.slice(0,r.segments.length),u=e.slice(r.segments.length);return!!(ml(r.segments,l)&&Qf(r.segments,l,s)&&r.children[$t])&&_O(r.children[$t],t,u,s)}}function Qf(r,t,e){return t.every((s,l)=>pO[e](r[l].parameters,s.parameters))}class gl{constructor(t,e,s){this.root=t,this.queryParams=e,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zu(this.queryParams)),this._queryParamMap}toString(){return lW.serialize(this)}}class en{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Hi(e,(s,l)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zf(this)}}class qh{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Zu(this.parameters)),this._parameterMap}toString(){return TO(this)}}function ml(r,t){return r.length===t.length&&r.every((e,s)=>e.path===t[s].path)}class vO{}class yO{parse(t){const e=new _W(t);return new gl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${ed(t.root,!0)}`,s=function(r){const t=Object.keys(r).map(e=>{const s=r[e];return Array.isArray(s)?s.map(l=>`${qf(e)}=${qf(l)}`).join("&"):`${qf(e)}=${qf(s)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);var r;return`${e}${s}${"string"==typeof t.fragment?`#${r=t.fragment,encodeURI(r)}`:""}`}}const lW=new yO;function Zf(r){return r.segments.map(t=>TO(t)).join("/")}function ed(r,t){if(!r.hasChildren())return Zf(r);if(t){const e=r.children[$t]?ed(r.children[$t],!1):"",s=[];return Hi(r.children,(l,u)=>{u!==$t&&s.push(`${u}:${ed(l,!1)}`)}),s.length>0?`${e}(${s.join("//")})`:e}{const e=function(r,t){let e=[];return Hi(r.children,(s,l)=>{l===$t&&(e=e.concat(t(s,l)))}),Hi(r.children,(s,l)=>{l!==$t&&(e=e.concat(t(s,l)))}),e}(r,(s,l)=>l===$t?[ed(r.children[$t],!1)]:[`${l}:${ed(s,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[$t]?`${Zf(r)}/${e[0]}`:`${Zf(r)}/(${e.join("//")})`}}function bO(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qf(r){return bO(r).replace(/%3B/gi,";")}function Vb(r){return bO(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eg(r){return decodeURIComponent(r)}function EO(r){return eg(r.replace(/\+/g,"%20"))}function TO(r){return`${Vb(r.path)}${function(r){return Object.keys(r).map(t=>`;${Vb(t)}=${Vb(r[t])}`).join("")}(r.parameters)}`}const dW=/^[^\/()?;=#]+/;function tg(r){const t=r.match(dW);return t?t[0]:""}const pW=/^[^=?&#]+/,gW=/^[^&#]+/;class _W{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(s[$t]=new en(t,e)),s}parseSegment(){const t=tg(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new qh(eg(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=tg(this.remaining);if(!e)return;this.capture(e);let s="";if(this.consumeOptional("=")){const l=tg(this.remaining);l&&(s=l,this.capture(s))}t[eg(e)]=eg(s)}parseQueryParam(t){const e=function(r){const t=r.match(pW);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let s="";if(this.consumeOptional("=")){const h=function(r){const t=r.match(gW);return t?t[0]:""}(this.remaining);h&&(s=h,this.capture(s))}const l=EO(e),u=EO(s);if(t.hasOwnProperty(l)){let h=t[l];Array.isArray(h)||(h=[h],t[l]=h),h.push(u)}else t[l]=u}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=tg(this.remaining),l=this.remaining[s.length];if("/"!==l&&")"!==l&&";"!==l)throw new Error(`Cannot parse url '${this.url}'`);let u;s.indexOf(":")>-1?(u=s.substr(0,s.indexOf(":")),this.capture(u),this.capture(":")):t&&(u=$t);const h=this.parseChildren();e[u]=1===Object.keys(h).length?h[$t]:new en([],h),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class CO{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Hb(t,this._root);return e?e.children.map(s=>s.value):[]}firstChild(t){const e=Hb(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Ub(t,this._root);return e.length<2?[]:e[e.length-2].children.map(l=>l.value).filter(l=>l!==t)}pathFromRoot(t){return Ub(t,this._root).map(e=>e.value)}}function Hb(r,t){if(r===t.value)return t;for(const e of t.children){const s=Hb(r,e);if(s)return s}return null}function Ub(r,t){if(r===t.value)return[t];for(const e of t.children){const s=Ub(r,e);if(s.length)return s.unshift(t),s}return[]}class Bs{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function qu(r){const t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}class SO extends CO{constructor(t,e){super(t),this.snapshot=e,Gb(this,t)}toString(){return this.snapshot.toString()}}function wO(r,t){const e=function(r,t){const h=new ng([],{},{},"",{},$t,t,null,r.root,-1,{});return new IO("",new Bs(h,[]))}(r,t),s=new Zr([new qh("",{})]),l=new Zr({}),u=new Zr({}),h=new Zr({}),p=new Zr(""),m=new _l(s,l,h,p,u,$t,t,e.root);return m.snapshot=e.root,new SO(new Bs(m,[]),e)}class _l{constructor(t,e,s,l,u,h,p,m){this.url=t,this.params=e,this.queryParams=s,this.fragment=l,this.data=u,this.outlet=h,this.component=p,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(xe(t=>Zu(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(xe(t=>Zu(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function RO(r,t="emptyOnly"){const e=r.pathFromRoot;let s=0;if("always"!==t)for(s=e.length-1;s>=1;){const l=e[s],u=e[s-1];if(l.routeConfig&&""===l.routeConfig.path)s--;else{if(u.component)break;s--}}return function(r){return r.reduce((t,e)=>({params:Je(Je({},t.params),e.params),data:Je(Je({},t.data),e.data),resolve:Je(Je({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(s))}class ng{constructor(t,e,s,l,u,h,p,m,v,T,I){this.url=t,this.params=e,this.queryParams=s,this.fragment=l,this.data=u,this.outlet=h,this.component=p,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=T,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class IO extends CO{constructor(t,e){super(e),this.url=t,Gb(this,e)}toString(){return DO(this._root)}}function Gb(r,t){t.value._routerState=r,t.children.forEach(e=>Gb(r,e))}function DO(r){const t=r.children.length>0?` { ${r.children.map(DO).join(", ")} } `:"";return`${r.value}${t}`}function Wb(r){if(r.snapshot){const t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,is(t.queryParams,e.queryParams)||r.queryParams.next(e.queryParams),t.fragment!==e.fragment&&r.fragment.next(e.fragment),is(t.params,e.params)||r.params.next(e.params),function(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!is(r[e],t[e]))return!1;return!0}(t.url,e.url)||r.url.next(e.url),is(t.data,e.data)||r.data.next(e.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function jb(r,t){const e=is(r.params,t.params)&&function(r,t){return ml(r,t)&&r.every((e,s)=>is(e.parameters,t[s].parameters))}(r.url,t.url);return e&&!(!r.parent!=!t.parent)&&(!r.parent||jb(r.parent,t.parent))}function td(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){const s=e.value;s._futureSnapshot=t.value;const l=function(r,t,e){return t.children.map(s=>{for(const l of e.children)if(r.shouldReuseRoute(s.value,l.value.snapshot))return td(r,s,l);return td(r,s)})}(r,t,e);return new Bs(s,l)}{if(r.shouldAttach(t.value)){const u=r.retrieve(t.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=t.value,h.children=t.children.map(p=>td(r,p)),h}}const s=function(r){return new _l(new Zr(r.url),new Zr(r.params),new Zr(r.queryParams),new Zr(r.fragment),new Zr(r.data),r.outlet,r.component,r)}(t.value),l=t.children.map(u=>td(r,u));return new Bs(s,l)}}function ig(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function nd(r){return"object"==typeof r&&null!=r&&r.outlets}function zb(r,t,e,s,l){let u={};return s&&Hi(s,(h,p)=>{u[p]=Array.isArray(h)?h.map(m=>`${m}`):`${h}`}),new gl(e.root===r?t:AO(e.root,r,t),u,l)}function AO(r,t,e){const s={};return Hi(r.children,(l,u)=>{s[u]=l===t?e:AO(l,t,e)}),new en(r.segments,s)}class OO{constructor(t,e,s){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=s,t&&s.length>0&&ig(s[0]))throw new Error("Root segment cannot have matrix parameters");const l=s.find(nd);if(l&&l!==dO(s))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xb{constructor(t,e,s){this.segmentGroup=t,this.processChildren=e,this.index=s}}function MO(r,t,e){if(r||(r=new en([],{})),0===r.segments.length&&r.hasChildren())return rg(r,t,e);const s=function(r,t,e){let s=0,l=t;const u={match:!1,pathIndex:0,commandIndex:0};for(;l<r.segments.length;){if(s>=e.length)return u;const h=r.segments[l],p=e[s];if(nd(p))break;const m=`${p}`,v=s<e.length-1?e[s+1]:null;if(l>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!NO(m,v,h))return u;s+=2}else{if(!NO(m,{},h))return u;s++}l++}return{match:!0,pathIndex:l,commandIndex:s}}(r,t,e),l=e.slice(s.commandIndex);if(s.match&&s.pathIndex<r.segments.length){const u=new en(r.segments.slice(0,s.pathIndex),{});return u.children[$t]=new en(r.segments.slice(s.pathIndex),r.children),rg(u,0,l)}return s.match&&0===l.length?new en(r.segments,{}):s.match&&!r.hasChildren()?Kb(r,t,e):s.match?rg(r,0,l):Kb(r,t,e)}function rg(r,t,e){if(0===e.length)return new en(r.segments,{});{const s=function(r){return nd(r[0])?r[0].outlets:{[$t]:r}}(e),l={};return Hi(s,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(l[h]=MO(r.children[h],t,u))}),Hi(r.children,(u,h)=>{void 0===s[h]&&(l[h]=u)}),new en(r.segments,l)}}function Kb(r,t,e){const s=r.segments.slice(0,t);let l=0;for(;l<e.length;){const u=e[l];if(nd(u)){const m=AW(u.outlets);return new en(s,m)}if(0===l&&ig(e[0])){s.push(new qh(r.segments[t].path,xO(e[0]))),l++;continue}const h=nd(u)?u.outlets[$t]:`${u}`,p=l<e.length-1?e[l+1]:null;h&&p&&ig(p)?(s.push(new qh(h,xO(p))),l+=2):(s.push(new qh(h,{})),l++)}return new en(s,{})}function AW(r){const t={};return Hi(r,(e,s)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[s]=Kb(new en([],{}),0,e))}),t}function xO(r){const t={};return Hi(r,(e,s)=>t[s]=`${e}`),t}function NO(r,t,e){return r==e.path&&is(t,e.parameters)}class MW{constructor(t,e,s,l){this.routeReuseStrategy=t,this.futureState=e,this.currState=s,this.forwardEvent=l}activate(t){const e=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,s,t),Wb(this.futureState.root),this.activateChildRoutes(e,s,t)}deactivateChildRoutes(t,e,s){const l=qu(e);t.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,l[h],s),delete l[h]}),Hi(l,(u,h)=>{this.deactivateRouteAndItsChildren(u,s)})}deactivateRoutes(t,e,s){const l=t.value,u=e?e.value:null;if(l===u)if(l.component){const h=s.getContext(l.outlet);h&&this.deactivateChildRoutes(t,e,h.children)}else this.deactivateChildRoutes(t,e,s);else u&&this.deactivateRouteAndItsChildren(e,s)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const s=e.getContext(t.value.outlet),l=s&&t.value.component?s.children:e,u=qu(t);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],l);if(s&&s.outlet){const h=s.outlet.detach(),p=s.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:h,route:t,contexts:p})}}deactivateRouteAndOutlet(t,e){const s=e.getContext(t.value.outlet),l=s&&t.value.component?s.children:e,u=qu(t);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],l);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(t,e,s){const l=qu(e);t.children.forEach(u=>{this.activateRoutes(u,l[u.value.outlet],s),this.forwardEvent(new QG(u.value.snapshot))}),t.children.length&&this.forwardEvent(new $G(t.value.snapshot))}activateRoutes(t,e,s){const l=t.value,u=e?e.value:null;if(Wb(l),l===u)if(l.component){const h=s.getOrCreateContext(l.outlet);this.activateChildRoutes(t,e,h.children)}else this.activateChildRoutes(t,e,s);else if(l.component){const h=s.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const p=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),h.children.onOutletReAttached(p.contexts),h.attachRef=p.componentRef,h.route=p.route.value,h.outlet&&h.outlet.attach(p.componentRef,p.route.value),Wb(p.route.value),this.activateChildRoutes(t,null,h.children)}else{const p=function(r){for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(l.snapshot),m=p?p.module.componentFactoryResolver:null;h.attachRef=null,h.route=l,h.resolver=m,h.outlet&&h.outlet.activateWith(l,m),this.activateChildRoutes(t,null,h.children)}}else this.activateChildRoutes(t,null,s)}}class Yb{constructor(t,e){this.routes=t,this.module=e}}function Ra(r){return"function"==typeof r}function vl(r){return r instanceof gl}const id=Symbol("INITIAL_VALUE");function rd(){return Ps(r=>function(...r){const t=Ma(r),e=Sd(r),{args:s,keys:l}=QD(r);if(0===s.length)return pi([],t);const u=new ee(function(r,t,e=W){return s=>{qA(t,()=>{const{length:l}=r,u=new Array(l);let h=l,p=l;for(let m=0;m<l;m++)qA(t,()=>{const v=pi(r[m],t);let T=!1;v.subscribe(new Ie(s,I=>{u[m]=I,T||(T=!0,p--),p||s.next(e(u.slice()))},()=>{--h||s.complete()}))},s)},s)}}(s,t,l?h=>ZD(l,h):W));return e?u.pipe(fb(e)):u}(r.map(t=>t.pipe(Fr(1),Jf(id)))).pipe(nO((t,e)=>{let s=!1;return e.reduce((l,u,h)=>l!==id?l:(u===id&&(s=!0),s||!1!==u&&h!==e.length-1&&!vl(u)?l:u),t)},id),Er(t=>t!==id),xe(t=>vl(t)?t:!0===t),Fr(1)))}class BW{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new od,this.attachRef=null}}class od{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const s=this.getOrCreateContext(t);s.outlet=e,this.contexts.set(t,s)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new BW,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let $b=(()=>{class r{constructor(e,s,l,u,h){this.parentContexts=e,this.location=s,this.resolver=l,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new Rn,this.deactivateEvents=new Rn,this.attachEvents=new Rn,this.detachEvents=new Rn,this.name=u||$t,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,s){this.activated=e,this._activatedRoute=s,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,s){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const h=(s=s||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,m=new VW(e,p,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(e){return new(e||r)(Se(od),Se(Kr),Se(_a),function(r){return function(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const e=r.attrs;if(e){const s=e.length;let l=0;for(;l<s;){const u=e[l];if(ql(u))break;if(0===u)l+=2;else if("number"==typeof u)for(l++;l<s&&"string"==typeof e[l];)l++;else{if(u===t)return e[l+1];l+=2}}}return null}(qn(),r)}("name"),Se(Ah))},r.\u0275dir=_t({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),r})();class VW{constructor(t,e,s){this.route=t,this.childContexts=e,this.parent=s}get(t,e){return t===_l?this.route:t===od?this.childContexts:this.parent.get(t,e)}}let kO=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=Br({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,s){1&e&&Zi(0,"router-outlet")},directives:[$b],encapsulation:2}),r})();function LO(r,t=""){for(let e=0;e<r.length;e++){const s=r[e];HW(s,UW(t,s))}}function HW(r,t){r.children&&LO(r.children,t)}function UW(r,t){return t?r||t.path?r&&!t.path?`${r}/`:!r&&t.path?t.path:`${r}/${t.path}`:"":r}function Jb(r){const t=r.children&&r.children.map(Jb),e=t?wi(Je({},r),{children:t}):Je({},r);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==$t&&(e.component=kO),e}function qr(r){return r.outlet||$t}function PO(r,t){const e=r.filter(s=>qr(s)===t);return e.push(...r.filter(s=>qr(s)!==t)),e}const FO={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function og(r,t,e){var p;if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||e.length>0)?Je({},FO):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(t.matcher||eW)(e,r,t);if(!l)return Je({},FO);const u={};Hi(l.posParams,(m,v)=>{u[v]=m.path});const h=l.consumed.length>0?Je(Je({},u),l.consumed[l.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:h,positionalParamSegments:null!=(p=l.posParams)?p:{}}}function sg(r,t,e,s,l="corrected"){if(e.length>0&&function(r,t,e){return e.some(s=>ag(r,t,s)&&qr(s)!==$t)}(r,e,s)){const h=new en(t,function(r,t,e,s){const l={};l[$t]=s,s._sourceSegment=r,s._segmentIndexShift=t.length;for(const u of e)if(""===u.path&&qr(u)!==$t){const h=new en([],{});h._sourceSegment=r,h._segmentIndexShift=t.length,l[qr(u)]=h}return l}(r,t,s,new en(e,r.children)));return h._sourceSegment=r,h._segmentIndexShift=t.length,{segmentGroup:h,slicedSegments:[]}}if(0===e.length&&function(r,t,e){return e.some(s=>ag(r,t,s))}(r,e,s)){const h=new en(r.segments,function(r,t,e,s,l,u){const h={};for(const p of s)if(ag(r,e,p)&&!l[qr(p)]){const m=new en([],{});m._sourceSegment=r,m._segmentIndexShift="legacy"===u?r.segments.length:t.length,h[qr(p)]=m}return Je(Je({},l),h)}(r,t,e,s,r.children,l));return h._sourceSegment=r,h._segmentIndexShift=t.length,{segmentGroup:h,slicedSegments:e}}const u=new en(r.segments,r.children);return u._sourceSegment=r,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:e}}function ag(r,t,e){return(!(r.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function BO(r,t,e,s){return!!(qr(r)===s||s!==$t&&ag(t,e,r))&&("**"===r.path||og(t,r,e).matched)}function VO(r,t,e){return 0===t.length&&!r.children[e]}class sd{constructor(t){this.segmentGroup=t||null}}class HO{constructor(t){this.urlTree=t}}function lg(r){return new ee(t=>t.error(new sd(r)))}function UO(r){return new ee(t=>t.error(new HO(r)))}function XW(r){return new ee(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r}'`)))}class $W{constructor(t,e,s,l,u){this.configLoader=e,this.urlSerializer=s,this.urlTree=l,this.config=u,this.allowRedirects=!0,this.ngModule=t.get(es)}apply(){const t=sg(this.urlTree.root,[],[],this.config).segmentGroup,e=new en(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,$t).pipe(xe(u=>this.createUrlTree(Qb(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(wa(u=>{if(u instanceof HO)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof sd?this.noMatchError(u):u}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,$t).pipe(xe(l=>this.createUrlTree(Qb(l),t.queryParams,t.fragment))).pipe(wa(l=>{throw l instanceof sd?this.noMatchError(l):l}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,s){const l=t.segments.length>0?new en([],{[$t]:t}):t;return new gl(l,e,s)}expandSegmentGroup(t,e,s,l){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(t,e,s).pipe(xe(u=>new en([],u))):this.expandSegment(t,s,e,s.segments,l,!0)}expandChildren(t,e,s){const l=[];for(const u of Object.keys(s.children))"primary"===u?l.unshift(u):l.push(u);return pi(l).pipe(Ju(u=>{const h=s.children[u],p=PO(e,u);return this.expandSegmentGroup(t,p,h,u).pipe(xe(m=>({segment:m,outlet:u})))}),nO((u,h)=>(u[h.outlet]=h.segment,u),{}),function(r,t){const e=arguments.length>=2;return s=>s.pipe(r?Er((l,u)=>r(l,u,s)):W,Pb(1),e?rO(t):iO(()=>new Qh))}())}expandSegment(t,e,s,l,u,h){return pi(s).pipe(Ju(p=>this.expandSegmentAgainstRoute(t,e,s,p,l,u,h).pipe(wa(v=>{if(v instanceof sd)return wt(null);throw v}))),Qu(p=>!!p),wa((p,m)=>{if(p instanceof Qh||"EmptyError"===p.name){if(VO(e,l,u))return wt(new en([],{}));throw new sd(e)}throw p}))}expandSegmentAgainstRoute(t,e,s,l,u,h,p){return BO(l,e,u,h)?void 0===l.redirectTo?this.matchSegmentAgainstRoute(t,e,l,u,h):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,s,l,u,h):lg(e):lg(e)}expandSegmentAgainstRouteUsingRedirect(t,e,s,l,u,h){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,s,l,h):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,s,l,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,s,l){const u=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?UO(u):this.lineralizeSegments(s,u).pipe(Fn(h=>{const p=new en(h,{});return this.expandSegment(t,p,e,h,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,s,l,u,h){const{matched:p,consumedSegments:m,lastChild:v,positionalParamSegments:T}=og(e,l,u);if(!p)return lg(e);const I=this.applyRedirectCommands(m,l.redirectTo,T);return l.redirectTo.startsWith("/")?UO(I):this.lineralizeSegments(l,I).pipe(Fn(O=>this.expandSegment(t,e,s,O.concat(u.slice(v)),h,!1)))}matchSegmentAgainstRoute(t,e,s,l,u){if("**"===s.path)return s.loadChildren?(s._loadedConfig?wt(s._loadedConfig):this.configLoader.load(t.injector,s)).pipe(xe(O=>(s._loadedConfig=O,new en(l,{})))):wt(new en(l,{}));const{matched:h,consumedSegments:p,lastChild:m}=og(e,s,l);if(!h)return lg(e);const v=l.slice(m);return this.getChildConfig(t,s,l).pipe(Fn(I=>{const O=I.module,N=I.routes,{segmentGroup:V,slicedSegments:Q}=sg(e,p,v,N),X=new en(V.segments,V.children);if(0===Q.length&&X.hasChildren())return this.expandChildren(O,N,X).pipe(xe(Ue=>new en(p,Ue)));if(0===N.length&&0===Q.length)return wt(new en(p,{}));const ue=qr(s)===u;return this.expandSegment(O,X,N,Q,ue?$t:u,!0).pipe(xe(ke=>new en(p.concat(ke.segments),ke.children)))}))}getChildConfig(t,e,s){return e.children?wt(new Yb(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?wt(e._loadedConfig):this.runCanLoadGuards(t.injector,e,s).pipe(Fn(l=>{return l?this.configLoader.load(t.injector,e).pipe(xe(u=>(e._loadedConfig=u,u))):(r=e,new ee(t=>t.error(Bb(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`))));var r})):wt(new Yb([],t))}runCanLoadGuards(t,e,s){const l=e.canLoad;return l&&0!==l.length?wt(l.map(h=>{const p=t.get(h);let m;if((r=p)&&Ra(r.canLoad))m=p.canLoad(e,s);else{if(!Ra(p))throw new Error("Invalid CanLoad guard");m=p(e,s)}var r;return rs(m)})).pipe(rd(),pr(h=>{if(!vl(h))return;const p=Bb(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw p.url=h,p}),xe(h=>!0===h)):wt(!0)}lineralizeSegments(t,e){let s=[],l=e.root;for(;;){if(s=s.concat(l.segments),0===l.numberOfChildren)return wt(s);if(l.numberOfChildren>1||!l.children[$t])return XW(t.redirectTo);l=l.children[$t]}}applyRedirectCommands(t,e,s){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,s)}applyRedirectCreatreUrlTree(t,e,s,l){const u=this.createSegmentGroup(t,e.root,s,l);return new gl(u,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const s={};return Hi(t,(l,u)=>{if("string"==typeof l&&l.startsWith(":")){const p=l.substring(1);s[u]=e[p]}else s[u]=l}),s}createSegmentGroup(t,e,s,l){const u=this.createSegments(t,e.segments,s,l);let h={};return Hi(e.children,(p,m)=>{h[m]=this.createSegmentGroup(t,p,s,l)}),new en(u,h)}createSegments(t,e,s,l){return e.map(u=>u.path.startsWith(":")?this.findPosParam(t,u,l):this.findOrReturn(u,s))}findPosParam(t,e,s){const l=s[e.path.substring(1)];if(!l)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return l}findOrReturn(t,e){let s=0;for(const l of e){if(l.path===t.path)return e.splice(s),l;s++}return t}}function Qb(r){const t={};for(const s of Object.keys(r.children)){const u=Qb(r.children[s]);(u.segments.length>0||u.hasChildren())&&(t[s]=u)}return function(r){if(1===r.numberOfChildren&&r.children[$t]){const t=r.children[$t];return new en(r.segments.concat(t.segments),t.children)}return r}(new en(r.segments,t))}class GO{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ug{constructor(t,e){this.component=t,this.route=e}}function ZW(r,t,e){const s=r._root;return ad(s,t?t._root:null,e,[s.value])}function cg(r,t,e){const s=function(r){if(!r)return null;for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(s?s.module.injector:e).get(r)}function ad(r,t,e,s,l={canDeactivateChecks:[],canActivateChecks:[]}){const u=qu(t);return r.children.forEach(h=>{(function(r,t,e,s,l={canDeactivateChecks:[],canActivateChecks:[]}){const u=r.value,h=t?t.value:null,p=e?e.getContext(r.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const m=function(r,t,e){if("function"==typeof e)return e(r,t);switch(e){case"pathParamsChange":return!ml(r.url,t.url);case"pathParamsOrQueryParamsChange":return!ml(r.url,t.url)||!is(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jb(r,t)||!is(r.queryParams,t.queryParams);default:return!jb(r,t)}}(h,u,u.routeConfig.runGuardsAndResolvers);m?l.canActivateChecks.push(new GO(s)):(u.data=h.data,u._resolvedData=h._resolvedData),ad(r,t,u.component?p?p.children:null:e,s,l),m&&p&&p.outlet&&p.outlet.isActivated&&l.canDeactivateChecks.push(new ug(p.outlet.component,h))}else h&&ld(t,p,l),l.canActivateChecks.push(new GO(s)),ad(r,null,u.component?p?p.children:null:e,s,l)})(h,u[h.value.outlet],e,s.concat([h.value]),l),delete u[h.value.outlet]}),Hi(u,(h,p)=>ld(h,e.getContext(p),l)),l}function ld(r,t,e){const s=qu(r),l=r.value;Hi(s,(u,h)=>{ld(u,l.component?t?t.children.getContext(h):null:t,e)}),e.canDeactivateChecks.push(new ug(l.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,l))}class d3{}function WO(r){return new ee(t=>t.error(r))}class f3{constructor(t,e,s,l,u,h){this.rootComponentType=t,this.config=e,this.urlTree=s,this.url=l,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const t=sg(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,$t);if(null===e)return null;const s=new ng([],Object.freeze({}),Object.freeze(Je({},this.urlTree.queryParams)),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new Bs(s,e),u=new IO(this.url,l);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(t){const e=t.value,s=RO(e,this.paramsInheritanceStrategy);e.params=Object.freeze(s.params),e.data=Object.freeze(s.data),t.children.forEach(l=>this.inheritParamsAndData(l))}processSegmentGroup(t,e,s){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,s)}processChildren(t,e){const s=[];for(const u of Object.keys(e.children)){const h=e.children[u],p=PO(t,u),m=this.processSegmentGroup(p,h,u);if(null===m)return null;s.push(...m)}const l=jO(s);return l.sort((t,e)=>t.value.outlet===$t?-1:e.value.outlet===$t?1:t.value.outlet.localeCompare(e.value.outlet)),l}processSegment(t,e,s,l){for(const u of t){const h=this.processSegmentAgainstRoute(u,e,s,l);if(null!==h)return h}return VO(e,s,l)?[]:null}processSegmentAgainstRoute(t,e,s,l){if(t.redirectTo||!BO(t,e,s,l))return null;let u,h=[],p=[];if("**"===t.path){const N=s.length>0?dO(s).parameters:{};u=new ng(s,N,Object.freeze(Je({},this.urlTree.queryParams)),this.urlTree.fragment,KO(t),qr(t),t.component,t,zO(e),XO(e)+s.length,YO(t))}else{const N=og(e,t,s);if(!N.matched)return null;h=N.consumedSegments,p=s.slice(N.lastChild),u=new ng(h,N.parameters,Object.freeze(Je({},this.urlTree.queryParams)),this.urlTree.fragment,KO(t),qr(t),t.component,t,zO(e),XO(e)+h.length,YO(t))}const m=(r=t).children?r.children:r.loadChildren?r._loadedConfig.routes:[],{segmentGroup:v,slicedSegments:T}=sg(e,h,p,m.filter(N=>void 0===N.redirectTo),this.relativeLinkResolution);var r;if(0===T.length&&v.hasChildren()){const N=this.processChildren(m,v);return null===N?null:[new Bs(u,N)]}if(0===m.length&&0===T.length)return[new Bs(u,[])];const I=qr(t)===l,O=this.processSegment(m,v,T,I?$t:l);return null===O?null:[new Bs(u,O)]}}function _3(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function jO(r){const t=[],e=new Set;for(const s of r){if(!_3(s)){t.push(s);continue}const l=t.find(u=>s.value.routeConfig===u.value.routeConfig);void 0!==l?(l.children.push(...s.children),e.add(l)):t.push(s)}for(const s of e){const l=jO(s.children);t.push(new Bs(s.value,l))}return t.filter(s=>!e.has(s))}function zO(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function XO(r){let t=r,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function KO(r){return r.data||{}}function YO(r){return r.resolve||{}}function Zb(r){return Ps(t=>{const e=r(t);return e?pi(e).pipe(xe(()=>t)):wt(t)})}class w3 extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const qb=new lt("ROUTES");class $O{constructor(t,e,s,l){this.injector=t,this.compiler=e,this.onLoadStartListener=s,this.onLoadEndListener=l}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const l=this.loadModuleFactory(e.loadChildren).pipe(xe(u=>{this.onLoadEndListener&&this.onLoadEndListener(e);const h=u.create(t);return new Yb(hO(h.injector.get(qb,void 0,at.Self|at.Optional)).map(Jb),h)}),wa(u=>{throw e._loader$=void 0,u}));return e._loader$=new FG(l,()=>new we).pipe(tO()),e._loader$}loadModuleFactory(t){return rs(t()).pipe(Fn(e=>e instanceof ER?wt(e):pi(this.compiler.compileModuleAsync(e))))}}class I3{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function D3(r){throw r}function A3(r,t,e){return t.parse("/")}function JO(r,t){return wt(null)}const O3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},M3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nr=(()=>{class r{constructor(e,s,l,u,h,p,m){this.rootComponentType=e,this.urlSerializer=s,this.rootContexts=l,this.location=u,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new we,this.errorHandler=D3,this.malformedUriErrorHandler=A3,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:JO,afterPreactivation:JO},this.urlHandlingStrategy=new I3,this.routeReuseStrategy=new w3,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(es),this.console=h.get(af);const I=h.get(cn);this.isNgZoneEnabled=I instanceof cn&&cn.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=new gl(new en([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $O(h,p,O=>this.triggerEvent(new sO(O)),O=>this.triggerEvent(new aO(O))),this.routerState=wO(this.currentUrlTree,this.rootComponentType),this.transitions=new Zr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null==(e=this.location.getState())?void 0:e.\u0275routerPageId}setupNavigations(e){const s=this.events;return e.pipe(Er(l=>0!==l.id),xe(l=>wi(Je({},l),{extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),Ps(l=>{let u=!1,h=!1;return wt(l).pipe(pr(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?wi(Je({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ps(p=>{const m=this.browserUrlTree.toString(),v=!this.navigated||p.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return hg(p.source)&&(this.browserUrlTree=p.extractedUrl),wt(p).pipe(Ps(I=>{const O=this.transitions.getValue();return s.next(new Fb(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),O!==this.transitions.getValue()?Pr:Promise.resolve(I)}),function(r,t,e,s){return Ps(l=>function(r,t,e,s,l){return new $W(r,t,e,s,l).apply()}(r,t,e,l.extractedUrl,s).pipe(xe(u=>wi(Je({},l),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),pr(I=>{this.currentNavigation=wi(Je({},this.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function(r,t,e,s,l){return Fn(u=>function(r,t,e,s,l="emptyOnly",u="legacy"){try{const h=new f3(r,t,e,s,l,u).recognize();return null===h?WO(new d3):wt(h)}catch(h){return WO(h)}}(r,t,u.urlAfterRedirects,e(u.urlAfterRedirects),s,l).pipe(xe(h=>wi(Je({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,I=>this.serializeUrl(I),this.paramsInheritanceStrategy,this.relativeLinkResolution),pr(I=>{if("eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(N,I)}this.browserUrlTree=I.urlAfterRedirects}const O=new WG(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);s.next(O)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:N,source:V,restoredState:Q,extras:X}=p,ue=new Fb(O,this.serializeUrl(N),V,Q);s.next(ue);const ce=wO(N,this.rootComponentType).snapshot;return wt(wi(Je({},p),{targetSnapshot:ce,urlAfterRedirects:N,extras:wi(Je({},X),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Pr}),Zb(p=>{const{targetSnapshot:m,id:v,extractedUrl:T,rawUrl:I,extras:{skipLocationChange:O,replaceUrl:N}}=p;return this.hooks.beforePreactivation(m,{navigationId:v,appliedUrlTree:T,rawUrlTree:I,skipLocationChange:!!O,replaceUrl:!!N})}),pr(p=>{const m=new jG(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(m)}),xe(p=>wi(Je({},p),{guards:ZW(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(r,t){return Fn(e=>{const{targetSnapshot:s,currentSnapshot:l,guards:{canActivateChecks:u,canDeactivateChecks:h}}=e;return 0===h.length&&0===u.length?wt(wi(Je({},e),{guardsResult:!0})):function(r,t,e,s){return pi(r).pipe(Fn(l=>function(r,t,e,s,l){const u=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return u&&0!==u.length?wt(u.map(p=>{const m=cg(p,t,l);let v;if(function(r){return r&&Ra(r.canDeactivate)}(m))v=rs(m.canDeactivate(r,t,e,s));else{if(!Ra(m))throw new Error("Invalid CanDeactivate guard");v=rs(m(r,t,e,s))}return v.pipe(Qu())})).pipe(rd()):wt(!0)}(l.component,l.route,e,t,s)),Qu(l=>!0!==l,!0))}(h,s,l,r).pipe(Fn(p=>p&&function(r){return"boolean"==typeof r}(p)?function(r,t,e,s){return pi(t).pipe(Ju(l=>$f(function(r,t){return null!==r&&t&&t(new YG(r)),wt(!0)}(l.route.parent,s),function(r,t){return null!==r&&t&&t(new JG(r)),wt(!0)}(l.route,s),function(r,t,e){const s=t[t.length-1],u=t.slice(0,t.length-1).reverse().map(h=>function(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(h)).filter(h=>null!==h).map(h=>eO(()=>wt(h.guards.map(m=>{const v=cg(m,h.node,e);let T;if(function(r){return r&&Ra(r.canActivateChild)}(v))T=rs(v.canActivateChild(s,r));else{if(!Ra(v))throw new Error("Invalid CanActivateChild guard");T=rs(v(s,r))}return T.pipe(Qu())})).pipe(rd())));return wt(u).pipe(rd())}(r,l.path,e),function(r,t,e){const s=t.routeConfig?t.routeConfig.canActivate:null;if(!s||0===s.length)return wt(!0);const l=s.map(u=>eO(()=>{const h=cg(u,t,e);let p;if(function(r){return r&&Ra(r.canActivate)}(h))p=rs(h.canActivate(t,r));else{if(!Ra(h))throw new Error("Invalid CanActivate guard");p=rs(h(t,r))}return p.pipe(Qu())}));return wt(l).pipe(rd())}(r,l.route,e))),Qu(l=>!0!==l,!0))}(s,u,r,t):wt(p)),xe(p=>wi(Je({},e),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),pr(p=>{if(vl(p.guardsResult)){const v=Bb(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw v.url=p.guardsResult,v}const m=new zG(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(m)}),Er(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),Zb(p=>{if(p.guards.canActivateChecks.length)return wt(p).pipe(pr(m=>{const v=new XG(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Ps(m=>{let v=!1;return wt(m).pipe(function(r,t){return Fn(e=>{const{targetSnapshot:s,guards:{canActivateChecks:l}}=e;if(!l.length)return wt(e);let u=0;return pi(l).pipe(Ju(h=>function(r,t,e,s){return function(r,t,e,s){const l=Object.keys(r);if(0===l.length)return wt({});const u={};return pi(l).pipe(Fn(h=>function(r,t,e,s){const l=cg(r,t,s);return rs(l.resolve?l.resolve(t,e):l(t,e))}(r[h],t,e,s).pipe(pr(p=>{u[h]=p}))),Pb(1),Fn(()=>Object.keys(u).length===l.length?wt(u):Pr))}(r._resolve,r,t,s).pipe(xe(u=>(r._resolvedData=u,r.data=Je(Je({},r.data),RO(r,e).resolve),null)))}(h.route,s,r,t)),pr(()=>u++),Pb(1),Fn(h=>u===l.length?wt(e):Pr))})}(this.paramsInheritanceStrategy,this.ngModule.injector),pr({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),pr(m=>{const v=new KG(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),Zb(p=>{const{targetSnapshot:m,id:v,extractedUrl:T,rawUrl:I,extras:{skipLocationChange:O,replaceUrl:N}}=p;return this.hooks.afterPreactivation(m,{navigationId:v,appliedUrlTree:T,rawUrlTree:I,skipLocationChange:!!O,replaceUrl:!!N})}),xe(p=>{const m=function(r,t,e){const s=td(r,t._root,e?e._root:void 0);return new SO(s,t)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return wi(Je({},p),{targetRouterState:m})}),pr(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((r,t,e)=>xe(s=>(new MW(t,s.targetRouterState,s.currentRouterState,e).activate(r),s)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),pr({next(){u=!0},complete(){u=!0}}),function(r){return Te((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}(()=>{var p;u||h||this.cancelNavigationTransition(l,`Navigation ID ${l.id} is not equal to the current navigation id ${this.navigationId}`),(null==(p=this.currentNavigation)?void 0:p.id)===l.id&&(this.currentNavigation=null)}),wa(p=>{if(h=!0,function(r){return r&&r[uO]}(p)){const m=vl(p.url);m||(this.navigated=!0,this.restoreHistory(l,!0));const v=new oO(l.id,this.serializeUrl(l.extractedUrl),p.message);s.next(v),m?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),I={skipLocationChange:l.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hg(l.source)};this.scheduleNavigation(T,"imperative",null,I,{resolve:l.resolve,reject:l.reject,promise:l.promise})},0):l.resolve(!1)}else{this.restoreHistory(l,!0);const m=new GG(l.id,this.serializeUrl(l.extractedUrl),p);s.next(m);try{l.resolve(this.errorHandler(p))}catch(v){l.reject(v)}}return Pr}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Je(Je({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const s="popstate"===e.type?"popstate":"hashchange";"popstate"===s&&setTimeout(()=>{var p;const l={replaceUrl:!0},u=(null==(p=e.state)?void 0:p.navigationId)?e.state:null;if(u){const m=Je({},u);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(l.state=m)}const h=this.parseUrl(e.url);this.scheduleNavigation(h,s,u,l)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){LO(e),this.config=e.map(Jb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,s={}){const{relativeTo:l,queryParams:u,fragment:h,queryParamsHandling:p,preserveFragment:m}=s,v=l||this.routerState.root,T=m?this.currentUrlTree.fragment:h;let I=null;switch(p){case"merge":I=Je(Je({},this.currentUrlTree.queryParams),u);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=u||null}return null!==I&&(I=this.removeEmptyProps(I)),function(r,t,e,s,l){if(0===e.length)return zb(t.root,t.root,t,s,l);const u=function(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new OO(!0,0,r);let t=0,e=!1;const s=r.reduce((l,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Hi(u.outlets,(m,v)=>{p[v]="string"==typeof m?m.split("/"):m}),[...l,{outlets:p}]}if(u.segmentPath)return[...l,u.segmentPath]}return"string"!=typeof u?[...l,u]:0===h?(u.split("/").forEach((p,m)=>{0==m&&"."===p||(0==m&&""===p?e=!0:".."===p?t++:""!=p&&l.push(p))}),l):[...l,u]},[]);return new OO(e,t,s)}(e);if(u.toRoot())return zb(t.root,new en([],{}),t,s,l);const h=function(r,t,e){if(r.isAbsolute)return new Xb(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const u=e.snapshot._urlSegment;return new Xb(u,u===t.root,0)}const s=ig(r.commands[0])?0:1;return function(r,t,e){let s=r,l=t,u=e;for(;u>l;){if(u-=l,s=s.parent,!s)throw new Error("Invalid number of '../'");l=s.segments.length}return new Xb(s,!1,l-u)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+s,r.numberOfDoubleDots)}(u,t,r),p=h.processChildren?rg(h.segmentGroup,h.index,u.commands):MO(h.segmentGroup,h.index,u.commands);return zb(h.segmentGroup,p,t,s,l)}(v,this.currentUrlTree,e,I,null!=T?T:null)}navigateByUrl(e,s={skipLocationChange:!1}){const l=vl(e)?e:this.parseUrl(e),u=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,s)}navigate(e,s={skipLocationChange:!1}){return function(r){for(let t=0;t<r.length;t++){const e=r[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,s),s)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let s;try{s=this.urlSerializer.parse(e)}catch(l){s=this.malformedUriErrorHandler(l,this.urlSerializer,e)}return s}isActive(e,s){let l;if(l=!0===s?Je({},O3):!1===s?Je({},M3):s,vl(e))return fO(this.currentUrlTree,e,l);const u=this.parseUrl(e);return fO(this.currentUrlTree,u,l)}removeEmptyProps(e){return Object.keys(e).reduce((s,l)=>{const u=e[l];return null!=u&&(s[l]=u),s},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Zh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,s,l,u,h){var ue,ce,ke;if(this.disposed)return Promise.resolve(!1);const p=this.transitions.value,m=hg(s)&&p&&!hg(p.source),v=p.rawUrl.toString()===e.toString(),T=p.id===(null==(ue=this.currentNavigation)?void 0:ue.id);if(m&&v&&T)return Promise.resolve(!0);let O,N,V;h?(O=h.resolve,N=h.reject,V=h.promise):V=new Promise((Ue,ct)=>{O=Ue,N=ct});const Q=++this.navigationId;let X;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(l=this.location.getState()),X=l&&l.\u0275routerPageId?l.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!=(ce=this.browserPageId)?ce:0:(null!=(ke=this.browserPageId)?ke:0)+1):X=0,this.setTransition({id:Q,targetPageId:X,source:s,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:u,resolve:O,reject:N,promise:V,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),V.catch(Ue=>Promise.reject(Ue))}setBrowserUrl(e,s){const l=this.urlSerializer.serialize(e),u=Je(Je({},s.extras.state),this.generateNgRouterState(s.id,s.targetPageId));this.location.isCurrentPathEqualTo(l)||s.extras.replaceUrl?this.location.replaceState(l,"",u):this.location.go(l,"",u)}restoreHistory(e,s=!1){var l,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(l=this.currentNavigation)?void 0:l.finalUrl)||0===h?this.currentUrlTree===(null==(u=this.currentNavigation)?void 0:u.finalUrl)&&0===h&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,s){const l=new oO(e.id,this.serializeUrl(e.extractedUrl),s);this.triggerEvent(l),e.resolve(!1)}generateNgRouterState(e,s){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:s}:{navigationId:e}}}return r.\u0275fac=function(e){Rv()},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();function hg(r){return"imperative"!==r}let dg=(()=>{class r{constructor(e,s,l){this.router=e,this.route=s,this.locationStrategy=l,this.commands=null,this.href=null,this.onChanges=new we,this.subscription=e.events.subscribe(u=>{u instanceof Zh&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,s,l,u,h){if(0!==e||s||l||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:ec(this.skipLocationChange),replaceUrl:ec(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ec(this.preserveFragment)})}}return r.\u0275fac=function(e){return new(e||r)(Se(Nr),Se(_l),Se(Yu))},r.\u0275dir=_t({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,s){1&e&&Vn("click",function(u){return s.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&e&&Vi("target",s.target)("href",s.href,ti)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Di]}),r})();function ec(r){return""===r||!!r}class QO{}class ZO{preload(t,e){return wt(null)}}let qO=(()=>{class r{constructor(e,s,l,u){this.router=e,this.injector=l,this.preloadingStrategy=u,this.loader=new $O(l,s,m=>e.triggerEvent(new sO(m)),m=>e.triggerEvent(new aO(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(Er(e=>e instanceof Zh),Ju(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(es);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,s){const l=[];for(const u of s)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;l.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?l.push(this.preloadConfig(e,u)):u.children&&l.push(this.processRoutes(e,u.children));return pi(l).pipe(io(),xe(u=>{}))}preloadConfig(e,s){return this.preloadingStrategy.preload(s,()=>(s._loadedConfig?wt(s._loadedConfig):this.loader.load(e.injector,s)).pipe(Fn(u=>(s._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return r.\u0275fac=function(e){return new(e||r)(De(Nr),De(lf),De(mn),De(QO))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})(),tE=(()=>{class r{constructor(e,s,l={}){this.router=e,this.viewportScroller=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Fb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Zh&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof lO&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,s){this.router.triggerEvent(new lO(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(e){Rv()},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const yl=new lt("ROUTER_CONFIGURATION"),e0=new lt("ROUTER_FORROOT_GUARD"),P3=[Cf,{provide:vO,useClass:yO},{provide:Nr,useFactory:function(r,t,e,s,l,u,h={},p,m){const v=new Nr(null,r,t,e,s,l,hO(u));return p&&(v.urlHandlingStrategy=p),m&&(v.routeReuseStrategy=m),function(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(t.canceledNavigationResolution=r.canceledNavigationResolution)}(h,v),h.enableTracing&&v.events.subscribe(T=>{var I,O;null==(I=console.group)||I.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null==(O=console.groupEnd)||O.call(console)}),v},deps:[vO,od,Cf,mn,lf,qb,yl,[class{},new Bi],[class{},new Bi]]},od,{provide:_l,useFactory:function(r){return r.routerState.root},deps:[Nr]},qO,ZO,class{preload(t,e){return e().pipe(wa(()=>wt(null)))}},{provide:yl,useValue:{enableTracing:!1}}];function F3(){return new py("Router",Nr)}let t0=(()=>{class r{constructor(e,s){}static forRoot(e,s){return{ngModule:r,providers:[P3,n0(e),{provide:e0,useFactory:H3,deps:[[Nr,new Bi,new yr]]},{provide:yl,useValue:s||{}},{provide:Yu,useFactory:V3,deps:[pl,[new ha(Wy),new Bi],yl]},{provide:tE,useFactory:B3,deps:[Nr,L2,yl]},{provide:QO,useExisting:s&&s.preloadingStrategy?s.preloadingStrategy:ZO},{provide:py,multi:!0,useFactory:F3},[nE,{provide:Rh,multi:!0,useFactory:j3,deps:[nE]},{provide:r0,useFactory:z3,deps:[nE]},{provide:rI,multi:!0,useExisting:r0}]]}}static forChild(e){return{ngModule:r,providers:[n0(e)]}}}return r.\u0275fac=function(e){return new(e||r)(De(e0,8),De(Nr,8))},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({}),r})();function B3(r,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new tE(r,t,e)}function V3(r,t,e={}){return e.useHash?new _H(r,t):new mD(r,t)}function H3(r){return"guarded"}function n0(r){return[{provide:e_,multi:!0,useValue:r},{provide:qb,multi:!0,useValue:r}]}let nE=(()=>{class r{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new we}appInitializer(){return this.injector.get(fH,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let s=null;const l=new Promise(p=>s=p),u=this.injector.get(Nr),h=this.injector.get(yl);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),s(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?wt(null):(this.initNavigation=!0,s(!0),this.resultOfPreactivationDone),u.initialNavigation()):s(!0),l})}bootstrapListener(e){const s=this.injector.get(yl),l=this.injector.get(qO),u=this.injector.get(tE),h=this.injector.get(Nr),p=this.injector.get(ll);e===p.components[0]&&(("enabledNonBlocking"===s.initialNavigation||void 0===s.initialNavigation)&&h.initialNavigation(),l.setUpPreloading(),u.init(),h.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(e){return new(e||r)(De(mn))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();function j3(r){return r.appInitializer.bind(r)}function z3(r){return r.bootstrapListener.bind(r)}const r0=new lt("Router Initializer");function o0(r,t,e,s,l,u,h){try{var p=r[u](h),m=p.value}catch(v){return void e(v)}p.done?t(m):Promise.resolve(m).then(s,l)}function iE(r){return function(){var t=this,e=arguments;return new Promise(function(s,l){var u=r.apply(t,e);function h(m){o0(u,s,l,h,p,"next",m)}function p(m){o0(u,s,l,h,p,"throw",m)}h(void 0)})}}var rn=g(5389),Ui=g(75610),Ln=g(78011),tc=g(84575),K3=g(80184);class xo{constructor(t){this.table=t}reloadData(t,e){return this.table.dataLoader.load(t,void 0,void 0,void 0,e)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(t){return this.table.eventBus.subscribed(t)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(t){return this.table.externalEvents.subscribed(t)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}setOption(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}module(t){return this.table.module(t)}}class on extends xo{constructor(t,e){super(t),this._handler=null}initialize(){}registerTableOption(t,e){this.table.optionsList.register(t,e)}registerColumnOption(t,e){this.table.columnManager.optionsList.register(t,e)}registerTableFunction(t,e){void 0===this.table[t]?this.table[t]=e:console.warn("Unable to bind table function, name already in use",t)}registerComponentFunction(t,e,s){return this.table.componentFunctionBinder.bind(t,e,s)}registerDataHandler(t,e){this.table.rowManager.registerDataPipelineHandler(t,e),this._handler=t}registerDisplayHandler(t,e){this.table.rowManager.registerDisplayPipelineHandler(t,e),this._handler=t}refreshData(t,e){e||(e=this._handler),e&&this.table.rowManager.refreshActiveData(e,!1,t)}}class Jn{static elVisible(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)}static elOffset(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(t,e,s=[]){var l={}.__proto__,u=[].__proto__;for(var h in e||(e=Object.assign(Array.isArray(t)?[]:{},t)),t){let m,v,p=t[h];null!=p&&"object"==typeof p&&(p.__proto__===l||p.__proto__===u)&&(m=s.findIndex(T=>T.subject===p),m>-1?e[h]=s[m].copy:(v=Object.assign(Array.isArray(p)?[]:{},p),s.unshift({subject:p,copy:v}),e[h]=this.deepClone(p,v,s)))}return e}}var $3={};let J3=(()=>{class r extends on{constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var s=!1,l={};this.allowedTypes.forEach(u=>{var p,h="accessor"+(u.charAt(0).toUpperCase()+u.slice(1));e.definition[h]&&(p=this.lookupAccessor(e.definition[h]))&&(s=!0,l[h]={accessor:p,params:e.definition[h+"Params"]||{}})}),s&&(e.modules.accessor=l)}lookupAccessor(e){var s=!1;switch(typeof e){case"string":r.accessors[e]?s=r.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":s=e}return s}transformRow(e,s){var l="accessor"+(s.charAt(0).toUpperCase()+s.slice(1)),u=e.getComponent(),h=Jn.deepClone(e.data||{});return this.table.columnManager.traverse(function(p){var m,v,T,I;p.modules.accessor&&(v=p.modules.accessor[l]||p.modules.accessor.accessor||!1)&&"undefined"!=(m=p.getFieldValue(h))&&(I=p.getComponent(),T="function"==typeof v.params?v.params(m,h,s,I,u):v.params,p.setFieldValue(h,v.accessor(m,h,s,T,I,u)))}),h}}return r.moduleName="accessor",r.accessors=$3,r})();var Q3={method:"GET"};function rE(r,t){var e=[];if(t=t||"",Array.isArray(r))r.forEach((l,u)=>{e=e.concat(rE(l,t?t+"["+u+"]":u))});else if("object"==typeof r)for(var s in r)e=e.concat(rE(r[s],t?t+"["+s+"]":s));else e.push({key:t,value:r});return e}function Z3(r){var t=rE(r),e=[];return t.forEach(function(s){e.push(encodeURIComponent(s.key)+"="+encodeURIComponent(s.value))}),e.join("&")}function q3(r,t,e){return r&&e&&Object.keys(e).length&&(!t.method||"get"==t.method.toLowerCase())&&(t.method="get",r+=(r.includes("?")?"&":"?")+Z3(e)),r}function ej(r,t,e){var s;return new Promise((l,u)=>{if(r=this.urlGenerator.call(this.table,r,t,e),"GET"!=t.method.toUpperCase())if(s="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var h in s.headers)t.headers||(t.headers={}),void 0===t.headers[h]&&(t.headers[h]=s.headers[h]);t.body=s.body.call(this,r,t,e)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);r?(void 0===t.headers&&(t.headers={}),void 0===t.headers.Accept&&(t.headers.Accept="application/json"),void 0===t.headers["X-Requested-With"]&&(t.headers["X-Requested-With"]="XMLHttpRequest"),void 0===t.mode&&(t.mode="cors"),"cors"==t.mode?(void 0===t.headers.Origin&&(t.headers.Origin=window.location.origin),void 0===t.credentials&&(t.credentials="same-origin")):void 0===t.credentials&&(t.credentials="include"),fetch(r,t).then(p=>{p.ok?p.json().then(m=>{l(m)}).catch(m=>{u(m),console.warn("Ajax Load Error - Invalid JSON returned",m)}):(console.error("Ajax Load Error - Connection Error: "+p.status,p.statusText),u(p))}).catch(p=>{console.error("Ajax Load Error - Connection Error: ",p),u(p)})):(console.warn("Ajax Load Error - No URL Set"),l([]))})}function oE(r,t){var e=[];if(t=t||"",Array.isArray(r))r.forEach((l,u)=>{e=e.concat(oE(l,t?t+"["+u+"]":u))});else if("object"==typeof r)for(var s in r)e=e.concat(oE(r[s],t?t+"["+s+"]":s));else e.push({key:t,value:r});return e}var tj={json:{headers:{"Content-Type":"application/json"},body:function(r,t,e){return JSON.stringify(e)}},form:{headers:{},body:function(r,t,e){var s=oE(e),l=new FormData;return s.forEach(function(u){l.append(u.key,u.value)}),l}}};let nj=(()=>{class r extends on{constructor(e){super(e),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=r.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||r.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||r.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(e,s,l,u){return!((e||!this.url)&&"string"!=typeof e)}requestData(e,s,l,u,h){return this.requestDataCheck(e)?(e&&this.setUrl(e),s&&this.setParams(s,!0),l&&this.setConfig(l),this.sendRequest()):h}setParams(e,s){if(s){this.params=this.params||{};for(let l in e)this.params[l]=e[l]}else this.params=e}getParams(){return this.params||{}}setConfig(e){if(this._loadDefaultConfig(),"string"==typeof e)this.config.method=e;else for(let s in e)this.config[s]=e[s]}_loadDefaultConfig(e){if(!this.config||e){this.config={};for(let s in r.defaultConfig)this.config[s]=r.defaultConfig[s]}}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e){var s=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(s,this.config,this.params).then(l=>(this.table.options.ajaxResponse&&(l=this.table.options.ajaxResponse.call(this.table,this.url,this.params,l)),l)):Promise.reject()}}return r.moduleName="ajax",r.defaultConfig=Q3,r.defaultURLGenerator=q3,r.defaultLoaderPromise=ej,r.contentTypeFormatters=tj,r})();var ij={replace:function(r){return this.table.setData(r)},update:function(r){return this.table.updateOrAddData(r)},insert:function(r){return this.table.addData(r)}},rj={table:function(r){var t=[],e=!0,s=this.table.columnManager.columns,l=[],u=[];return(r=r.split("\n")).forEach(function(h){t.push(h.split("\t"))}),!(!t.length||1===t.length&&t[0].length<2)&&(t[0].forEach(function(h){var p=s.find(function(m){return h&&m.definition.title&&h.trim()&&m.definition.title.trim()===h.trim()});p?l.push(p):e=!1}),e||(e=!0,l=[],t[0].forEach(function(h){var p=s.find(function(m){return h&&m.field&&h.trim()&&m.field.trim()===h.trim()});p?l.push(p):e=!1}),e||(l=this.table.columnManager.columnsByIndex)),e&&t.shift(),t.forEach(function(h){var p={};h.forEach(function(m,v){l[v]&&(p[l[v].field]=m)}),u.push(p)}),u)}};let oj=(()=>{class r extends on{constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",e=>{var s,l;if(!this.blocked){if(e.preventDefault(),this.customSelection)s=this.customSelection,this.table.options.clipboardCopyFormatter&&(s=this.table.options.clipboardCopyFormatter("plain",s));else{var u=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");s=(l=this.table.modules.export.genereateHTMLTable(u))?this.generatePlainContent(u):"",this.table.options.clipboardCopyFormatter&&(s=this.table.options.clipboardCopyFormatter("plain",s),l=this.table.options.clipboardCopyFormatter("html",l))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",s):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",s),l&&e.clipboardData.setData("text/html",l)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",s),l&&e.originalEvent.clipboardData.setData("text/html",l)),this.dispatchExternal("clipboardCopied",s,l),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var s=[];return e.forEach(l=>{var u=[];l.columns.forEach(h=>{var p="";if(h)if("group"===l.type&&(h.value=h.component.getKey()),null===h.value)p="";else switch(typeof h.value){case"object":p=JSON.stringify(h.value);break;case"undefined":p="";break;default:p=h.value}u.push(p)}),s.push(u.join("\t"))}),s.join("\n")}copy(e,s){var l,u;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((e=document.createRange()).selectNodeContents(this.table.element),(l=window.getSelection()).toString()&&s&&(this.customSelection=l.toString()),l.removeAllRanges(),l.addRange(e)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((u=document.body.createTextRange()).moveToElementText(this.table.element),u.select()),document.execCommand("copy"),l&&l.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=r.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=r.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e}}paste(e){var s,l,u;this.checkPaseOrigin(e)&&(s=this.getPasteData(e),(l=this.pasteParser.call(this,s))?(e.preventDefault(),this.table.modExists("mutator")&&(l=this.mutateData(l)),u=this.pasteAction.call(this,l),this.dispatchExternal("clipboardPasted",s,l,u)):this.dispatchExternal("clipboardPasteError",s))}mutateData(e){var s=[];return Array.isArray(e)?e.forEach(l=>{s.push(this.table.modules.mutator.transformRow(l,"clipboard"))}):s=e,s}checkPaseOrigin(e){var s=!0;return("DIV"!=e.target.tagName||this.table.modules.edit.currentCell)&&(s=!1),s}getPasteData(e){var s;return window.clipboardData&&window.clipboardData.getData?s=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?s=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(s=e.originalEvent.clipboardData.getData("text/plain")),s}}return r.moduleName="clipboard",r.pasteActions=ij,r.pasteParsers=rj,r})();class sj{constructor(t){return this._row=t,new Proxy(this,{get:function(e,s,l){return void 0!==e[s]?e[s]:e._row.table.componentFunctionBinder.handle("row",e._row,s)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}_getSelf(){return this._row}}class s0{constructor(t){return this._cell=t,new Proxy(this,{get:function(e,s,l){return void 0!==e[s]?e[s]:e._cell.table.componentFunctionBinder.handle("cell",e._cell,s)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(t,e){void 0===e&&(e=!0),this._cell.setValue(t,e)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class pg extends xo{constructor(t,e){super(t.table),this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var t=this.element,e=this.column.getField();t.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(t.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),e&&t.setAttribute("tabulator-field",e),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(h=>{t.classList.add(h)}),"hover"===this.table.options.tooltipGenerationMode&&t.addEventListener("mouseenter",h=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var t;switch(typeof(t=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",null!=t&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var t=this.column.tooltip;t?(!0===t?t=this.value:"function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),void 0===t&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")}getElement(t){return this.loaded||(this.loaded=!0,t||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(t,e){this.setValueProcessData(t,e)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(t,e){var s=!1;return this.value!=t&&(s=!0,e&&(t=this.chain("cell-value-changing",[this,t],null,t))),this.setValueActual(t),s&&this.dispatch("cell-value-changed",this),s}setValueActual(t){this.oldValue=this.value,this.value=t,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,t),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new s0(this)),this.component}}class a0{constructor(t){return this._column=t,this.type="ColumnComponent",new Proxy(this,{get:function(e,s,l){return void 0!==e[s]?e[s]:e._column.table.componentFunctionBinder.handle("column",e._column,s)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var t=[];return this._column.cells.forEach(function(e){t.push(e.getComponent())}),t}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var t=[];return this._column.columns.length&&this._column.columns.forEach(function(e){t.push(e.getComponent())}),t}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(t,e){var s=this._column.table.columnManager.findColumn(t);s?this._column.table.columnManager.moveColumn(this._column,s,e):console.warn("Move Error - No matching column found:",s)}getNextColumn(){var t=this._column.nextColumn();return!!t&&t.getComponent()}getPrevColumn(){var t=this._column.prevColumn();return!!t&&t.getComponent()}updateDefinition(t){return this._column.updateDefinition(t)}getWidth(){return this._column.getWidth()}setWidth(t){var e;return e=!0===t?this._column.reinitializeWidth(!0):this._column.setWidth(t),this._column.table.columnManager.renderer.rerenderColumns(!0),e}}var aj={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let ud=(()=>{class r extends xo{constructor(e,s){super(s.table),this.definition=e,this.parent=s,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((l,u)=>{var h=new r(l,this);this.attachColumn(h)}),this.checkColumnVisibility()):s.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let s in e)void 0===this.definition[s]&&(this.definition[s]=e[s]);this.definition=this.table.columnManager.optionsList.generate(r.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{-1===r.defaultOptionList.indexOf(e)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var e=this.definition,s=void 0===e.headerTooltip?e.tooltip:e.headerTooltip;s?!0===s?e.field?this.langBind("columns|"+e.field,l=>{this.element.setAttribute("title",l||e.title)}):this.element.setAttribute("title",e.title):("function"==typeof s&&!1===(s=s(this.getComponent()))&&(s=""),this.element.setAttribute("title",s)):this.element.setAttribute("title","")}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===e.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",s=>{this.setTooltip()})}_bindEvents(){var s,l,u,e=this.definition;"function"==typeof e.headerClick&&this.element.addEventListener("click",h=>{e.headerClick(h,this.getComponent())}),"function"==typeof e.headerDblClick&&this.element.addEventListener("dblclick",h=>{e.headerDblClick(h,this.getComponent())}),"function"==typeof e.headerContext&&this.element.addEventListener("contextmenu",h=>{e.headerContext(h,this.getComponent())}),"function"==typeof e.headerTap&&(u=!1,this.element.addEventListener("touchstart",h=>{u=!0},{passive:!0}),this.element.addEventListener("touchend",h=>{u&&e.headerTap(h,this.getComponent()),u=!1})),"function"==typeof e.headerDblTap&&(s=null,this.element.addEventListener("touchend",h=>{s?(clearTimeout(s),s=null,e.headerDblTap(h,this.getComponent())):s=setTimeout(()=>{clearTimeout(s),s=null},300)})),"function"==typeof e.headerTapHold&&(l=null,this.element.addEventListener("touchstart",h=>{clearTimeout(l),l=setTimeout(function(){clearTimeout(l),l=null,u=!1,e.headerTapHold(h,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",h=>{clearTimeout(l),l=null}))}_buildColumnHeader(){var e=this.definition;this.dispatch("column-layout",this),void 0!==e.visible&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass&&e.cssClass.split(" ").forEach(u=>{this.element.classList.add(u)}),e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var l=document.createElement("div");return l.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),l.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),l}_buildColumnHeaderTitle(){var e=this.definition,s=document.createElement("div");if(s.classList.add("tabulator-col-title"),e.editableTitle){var l=document.createElement("input");l.classList.add("tabulator-title-editor"),l.addEventListener("click",u=>{u.stopPropagation(),l.focus()}),l.addEventListener("change",()=>{e.title=l.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),s.appendChild(l),e.field?this.langBind("columns|"+e.field,u=>{l.value=u||e.title||"&nbsp;"}):l.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,u=>{this._formatColumnHeaderTitle(s,u||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(s,e.title||"&nbsp;");return s}_formatColumnHeaderTitle(e,s){var l=this.chain("column-format",[this,s,e],null,()=>s);switch(typeof l){case"object":l instanceof Node?e.appendChild(l):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",l));break;case"undefined":case"null":e.innerHTML="";break;default:e.innerHTML=l}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(s=>{this.element.classList.add(s)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var h,s=e,l=this.fieldStructure,u=l.length;for(let p=0;p<u&&(h=s=s[l[p]],s);p++);return h}_setFlatData(e,s){this.field&&(e[this.field]=s)}_setNestedData(e,s){var l=e,u=this.fieldStructure,h=u.length;for(let p=0;p<h;p++)if(p==h-1)l[u[p]]=s;else{if(!l[u[p]]){if(void 0===s)break;l[u[p]]={}}l=l[u[p]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,s){var l=this.parent.isGroup?this.parent.getGroupElement().clientHeight:s||this.parent.getHeadersElement().clientHeight;this.element.style.height=l+"px",this.isGroup&&(this.groupElement.style.minHeight=l-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==e&&(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(u){u.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var s=[];return this.isGroup&&e&&(this.columns.forEach(function(l){s.push(l.getDefinition(!0))}),this.definition.columns=s),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(s){s.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,s){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(l){l.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,s),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(e,s){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(l){l.hide()}),this.dispatch("column-hide",this),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(s){s.visible&&(e+=s.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var s=this.columns.indexOf(e);s>-1&&this.columns.splice(s,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(s){s.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var e=[];this.cells.forEach(function(s){s.row.heightInitialized&&(null!==s.row.getElement().offsetParent?(e.push(s.row),s.row.clearCellHeight()):s.row.heightInitialized=!1)}),e.forEach(function(s){s.calcHeight()}),e.forEach(function(s){s.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(s){s.visible&&(e+=s.getWidth())}):e=this.width,e}getHeight(){return this.element.offsetHeight}setMinWidth(e){this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(s){s.setMinWidth()})}setMaxWidth(e){this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(s){s.setMaxWidth()})}delete(){return new Promise((e,s)=>{this.isGroup&&this.columns.forEach(function(u){u.delete()}),this.dispatch("column-delete",this);var l=this.cells.length;for(let u=0;u<l;u++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(e){var s=new pg(this,e);return this.cells.push(s),s}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._nextVisibleColumn(e+1)}_nextVisibleColumn(e){var s=this.table.columnManager.getColumnByIndex(e);return!s||s.visible?s:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._prevVisibleColumn(e-1)}_prevVisibleColumn(e){var s=this.table.columnManager.getColumnByIndex(e);return!s||s.visible?s:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,void 0!==this.definition.width&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(s=>{s.clearWidth()}));var e=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(s=>{var l=s.getWidth();l>e&&(e=l)}),e&&this.setWidthActual(e+1))}}updateDefinition(e){var s;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(s=Object.assign({},this.getDefinition()),s=Object.assign(s,e),this.table.columnManager.addColumn(s,!1,this).then(l=>(s.field==this.field&&(this.field=!1),this.delete().then(()=>l.getComponent()))))}deleteCell(e){var s=this.cells.indexOf(e);s>-1&&this.cells.splice(s,1)}getComponent(){return this.component||(this.component=new a0(this)),this.component}}return r.defaultOptionList=aj,r})();class sE{constructor(t){return this._row=t,new Proxy(this,{get:function(e,s,l){return void 0!==e[s]?e[s]:e._row.table.componentFunctionBinder.handle("row",e._row,s)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(t){return this._row.table.rowManager.getRowPosition(this._row,t)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(t,e){this._row.moveToRow(t,e)}update(t){return this._row.updateData(t)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var t=this._row.nextRow();return t&&t.getComponent()}getPrevRow(){var t=this._row.prevRow();return t&&t.getComponent()}}class Tr extends xo{constructor(t,e,s="row"){super(e.table),this.parent=e,this.data={},this.type=s,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(t)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var t=document.createElement("div");t.classList.add("tabulator-row"),t.setAttribute("role","row"),this.element=t}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(t){if(this.create(),!this.initialized||t){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),t&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(t){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(t){var e=0,s=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(l){var u=l.getHeight();u>e&&(e=u)}),this.height=t?Math.max(e,s):this.manualHeight?this.height:Math.max(e,s),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(t){t.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(t){t.clearHeight()})}normalizeHeight(t){t&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()}setHeight(t,e){(this.height!=t||e)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}setData(t){this.data=this.chain("row-data-init-before",[this,t],void 0,t),this.dispatch("row-data-init-after",this)}updateData(t){var l,e=this.element&&Jn.elVisible(this.element),s={};return new Promise((u,h)=>{for(var p in"string"==typeof t&&(t=JSON.parse(t)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(s=Object.assign(s,this.data),s=Object.assign(s,t)),l=this.chain("row-data-changing",[this,s,t],null,t))this.data[p]=l[p];for(var p in this.dispatch("row-data-save-after",this),t)this.table.columnManager.getColumnsByFieldRoot(p).forEach(T=>{let I=this.getCell(T.getField());if(I){let O=T.getFieldValue(l);I.getValue()!=O&&(I.setValueProcessData(O),e&&I.cellRendered())}});e?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,e,t),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),u()})}getData(t){return t?this.chain("row-data-retrieve",[this,t],null,this.data):this.data}getCell(t){return t=this.table.columnManager.findColumn(t),this.initialized||this.generateCells(),this.cells.find(function(s){return s.column===t})}getCellIndex(t){return this.cells.findIndex(function(e){return e===t})}findCell(t){return this.cells.find(e=>e.element===t)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(t,e){var s=this.table.rowManager.findRow(t);s?(this.table.rowManager.moveRowActual(this,s,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(t){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var t=this.cells.length;for(let e=0;e<t;e++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new sE(this)),this.component}}var lj={avg:function(r,t,e){var s=0,l=void 0!==e.precision?e.precision:2;return r.length&&(s=r.reduce(function(u,h){return Number(u)+Number(h)}),s/=r.length,s=!1!==l?s.toFixed(l):s),parseFloat(s).toString()},max:function(r,t,e){var s=null,l=void 0!==e.precision&&e.precision;return r.forEach(function(u){((u=Number(u))>s||null===s)&&(s=u)}),null!==s?!1!==l?s.toFixed(l):s:""},min:function(r,t,e){var s=null,l=void 0!==e.precision&&e.precision;return r.forEach(function(u){((u=Number(u))<s||null===s)&&(s=u)}),null!==s?!1!==l?s.toFixed(l):s:""},sum:function(r,t,e){var s=0,l=void 0!==e.precision&&e.precision;return r.length&&r.forEach(function(u){u=Number(u),s+=isNaN(u)?0:Number(u)}),!1!==l?s.toFixed(l):s},concat:function(r,t,e){var s=0;return r.length&&(s=r.reduce(function(l,u){return String(l)+String(u)})),s},count:function(r,t,e){var s=0;return r.length&&r.forEach(function(l){l&&s++}),s}};let uj=(()=>{class r extends on{constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new ud({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var s=e.definition,l={topCalcParams:s.topCalcParams||{},botCalcParams:s.bottomCalcParams||{}};if(s.topCalc){switch(typeof s.topCalc){case"string":r.calculations[s.topCalc]?l.topCalc=r.calculations[s.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",s.topCalc);break;case"function":l.topCalc=s.topCalc}l.topCalc&&(e.modules.columnCalcs=l,this.topCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(s.bottomCalc){switch(typeof s.bottomCalc){case"string":r.calculations[s.bottomCalc]?l.botCalc=r.calculations[s.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",s.bottomCalc);break;case"function":l.botCalc=s.bottomCalc}l.botCalc&&(e.modules.columnCalcs=l,this.botCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-e+"px")}recalc(e){var s;if(this.topInitialized||this.botInitialized){if(this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),s=this.generateRow("top",this.rowsToData(e)),this.topRow=s;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(s.getElement()),s.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),s=this.generateRow("bottom",this.rowsToData(e)),this.botRow=s;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(s.getElement()),s.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(s=>{this.recalcGroup(s)})}recalcGroup(e){var s,l;e&&e.calcs&&(e.calcs.bottom&&(s=this.rowsToData(e.rows),l=this.generateRowData("bottom",s),e.calcs.bottom.updateData(l),e.calcs.bottom.reinitialize()),e.calcs.top&&(s=this.rowsToData(e.rows),l=this.generateRowData("top",s),e.calcs.top.updateData(l),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var s=[];return e.forEach(l=>{if(s.push(l.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&l.modules.dataTree.open){var u=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(l));s=s.concat(u)}}),s}generateRow(e,s){var u,l=this.generateRowData(e,s);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),u=new Tr(l,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),u.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),u.component=!1,u.getComponent=()=>(u.component||(u.component=new sj(this)),u.component),u.generateCells=()=>{var h=[];this.table.columnManager.columnsByIndex.forEach(p=>{this.genColumn.setField(p.getField()),this.genColumn.hozAlign=p.hozAlign,this.genColumn.modules.format=p.definition[e+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(p.definition[e+"CalcFormatter"]),params:p.definition[e+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=p.definition.cssClass;var m=new pg(this.genColumn,u);m.getElement(),m.column=p,m.setWidth(),p.cells.push(m),h.push(m),p.visible||m.hide()}),u.cells=h},u}generateRowData(e,s){var p,m,l={},h="top"==e?"topCalc":"botCalc";return("top"==e?this.topCalcs:this.botCalcs).forEach(function(v){var T=[];v.modules.columnCalcs&&v.modules.columnCalcs[h]&&(s.forEach(function(I){T.push(v.getFieldValue(I))}),p="function"==typeof v.modules.columnCalcs[m=h+"Params"]?v.modules.columnCalcs[m](T,s):v.modules.columnCalcs[m],v.setFieldValue(l,v.modules.columnCalcs[h](T,s,p)))}),l}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(l=>{e[l.getKey()]=this.getGroupResults(l)}):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var s=e._getSelf(),l=e.getSubGroups(),u={};return l.forEach(p=>{u[p.getKey()]=this.getGroupResults(p)}),{top:s.calcs.top?s.calcs.top.getData():{},bottom:s.calcs.bottom?s.calcs.bottom.getData():{},groups:u}}}return r.moduleName="columnCalcs",r.calculations=lj,r})(),cj=(()=>{class r extends on{constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,s=this.table.columnManager.getFirstVisibileColumn(),l=this.table.options;switch(this.field=l.dataTreeChildField,this.indent=l.dataTreeChildIndent,this.elementField=l.dataTreeElementColumn||!!s&&s.field,l.dataTreeBranchElement&&(!0===l.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof l.dataTreeBranchElement?((e=document.createElement("div")).innerHTML=l.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=l.dataTreeBranchElement),l.dataTreeCollapseElement?"string"==typeof l.dataTreeCollapseElement?((e=document.createElement("div")).innerHTML=l.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=l.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),l.dataTreeExpandElement?"string"==typeof l.dataTreeExpandElement?((e=document.createElement("div")).innerHTML=l.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=l.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof l.dataTreeStartExpanded){case"boolean":this.startOpen=function(u,h){return l.dataTreeStartExpanded};break;case"function":this.startOpen=l.dataTreeStartExpanded;break;default:this.startOpen=function(u,h){return l.dataTreeStartExpanded[h]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(s=>{e=e.concat(this.getTreeChildren(s,!1,!0))}),e}rowDataChanged(e,s,l){this.redrawNeeded(l)&&(this.initializeRow(e),s&&(this.layoutRow(e),this.refreshData(!0)))}initializeRow(e){var s=e.getData()[this.field],l=Array.isArray(s),u=l||!l&&"object"==typeof s&&null!==s;!u&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!u&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:!!u&&(e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0)),controlEl:!(!e.modules.dataTree||!u)&&e.modules.dataTree.controlEl,branchEl:!(!e.modules.dataTree||!u)&&e.modules.dataTree.branchEl,parent:!!e.modules.dataTree&&e.modules.dataTree.parent,children:u}}reinitializeRowChildren(e){this.getTreeChildren(e,!1,!0).forEach(function(l){l.reinitialize(!0)})}layoutRow(e){var l=(this.elementField?e.getCell(this.elementField):e.getCells()[0]).getElement(),u=e.modules.dataTree;u.branchEl&&(u.branchEl.parentNode&&u.branchEl.parentNode.removeChild(u.branchEl),u.branchEl=!1),u.controlEl&&(u.controlEl.parentNode&&u.controlEl.parentNode.removeChild(u.controlEl),u.controlEl=!1),this.generateControlElement(e,l),e.getElement().classList.add("tabulator-tree-level-"+u.index),u.index&&(this.branchEl?(u.branchEl=this.branchEl.cloneNode(!0),l.insertBefore(u.branchEl,l.firstChild),this.table.rtl?u.branchEl.style.marginRight=(u.branchEl.offsetWidth+u.branchEl.style.marginLeft)*(u.index-1)+u.index*this.indent+"px":u.branchEl.style.marginLeft=(u.branchEl.offsetWidth+u.branchEl.style.marginRight)*(u.index-1)+u.index*this.indent+"px"):this.table.rtl?l.style.paddingRight=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-right"))+u.index*this.indent+"px":l.style.paddingLeft=parseInt(window.getComputedStyle(l,null).getPropertyValue("padding-left"))+u.index*this.indent+"px")}generateControlElement(e,s){var l=e.modules.dataTree,u=(s=s||e.getCells()[0].getElement(),l.controlEl);!1!==l.children&&(l.open?(l.controlEl=this.collapseEl.cloneNode(!0),l.controlEl.addEventListener("click",h=>{h.stopPropagation(),this.collapseRow(e)})):(l.controlEl=this.expandEl.cloneNode(!0),l.controlEl.addEventListener("click",h=>{h.stopPropagation(),this.expandRow(e)})),l.controlEl.addEventListener("mousedown",h=>{h.stopPropagation()}),u&&u.parentNode===s?u.parentNode.replaceChild(l.controlEl,u):s.insertBefore(l.controlEl,s.firstChild))}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){var s=[];return e.forEach((l,u)=>{var h;s.push(l),l instanceof Tr&&(l.create(),!(h=l.modules.dataTree.children).index&&!1!==h.children&&this.getChildren(l).forEach(m=>{m.create(),s.push(m)}))}),s}getChildren(e,s){var l=e.modules.dataTree,u=[],h=[];return!1!==l.children&&(l.open||s)&&(Array.isArray(l.children)||(l.children=this.generateChildren(e)),u=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(l.children):l.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(u),u.forEach(p=>{h.push(p),this.getChildren(p).forEach(v=>{h.push(v)})})),h}generateChildren(e){var s=[],l=e.getData()[this.field];return Array.isArray(l)||(l=[l]),l.forEach(u=>{var h=new Tr(u||{},this.table.rowManager);h.create(),h.modules.dataTree.index=e.modules.dataTree.index+1,h.modules.dataTree.parent=e,h.modules.dataTree.children&&(h.modules.dataTree.open=this.startOpen(h.getComponent(),h.modules.dataTree.index)),s.push(h)}),s}expandRow(e,s){var l=e.modules.dataTree;!1!==l.children&&(l.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var s=e.modules.dataTree;!1!==s.children&&(s.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var s=e.modules.dataTree;!1!==s.children&&(s.open?this.collapseRow(e):this.expandRow(e))}getTreeParent(e){return!!e.modules.dataTree.parent&&e.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(e){var s=e.modules.dataTree,l=[];return s.children&&(Array.isArray(s.children)||(s.children=this.generateChildren(e)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(s.children):s.children).forEach(h=>{h instanceof Tr&&l.push(h)})),l}rowDelete(e){var l,s=e.modules.dataTree.parent;s&&(!1!==(l=this.findChildIndex(e,s))&&s.data[this.field].splice(l,1),s.data[this.field].length||delete s.data[this.field],this.initializeRow(s),this.layoutRow(s)),this.refreshData(!0)}addTreeChildRow(e,s,l,u){var h=!1;"string"==typeof s&&(s=JSON.parse(s)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),void 0!==u&&!1!==(h=this.findChildIndex(u,e))&&e.data[this.field].splice(l?h:h+1,0,s),!1===h&&(l?e.data[this.field].unshift(s):e.data[this.field].push(s)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,s){var l=!1;return"object"==typeof e?e instanceof Tr?l=e.data:e instanceof RowComponent?l=e._getSelf().data:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&s.modules.dataTree&&(l=s.modules.dataTree.children.find(u=>u instanceof Tr&&u.element===e))&&(l=l.data):l=null!=e&&s.data[this.field].find(u=>u.data[this.table.options.index]==e),l&&(Array.isArray(s.data[this.field])&&(l=s.data[this.field].indexOf(l)),-1==l&&(l=!1)),l}getTreeChildren(e,s,l){var u=e.modules.dataTree,h=[];return u.children&&(Array.isArray(u.children)||(u.children=this.generateChildren(e)),u.children.forEach(p=>{p instanceof Tr&&(h.push(s?p.getComponent():p),l&&(h=h.concat(this.getTreeChildren(p,s,l))))})),h}checkForRestyle(e){e.row.cells.indexOf(e)||this.layoutRow(e.row)}getChildField(){return this.field}redrawNeeded(e){return!!this.field&&void 0!==e[this.field]||!!this.elementField&&void 0!==e[this.elementField]}}return r.moduleName="dataTree",r})();var mj={csv:function(r,t,e){var s=t&&t.delimiter?t.delimiter:",",l=[],u=[];r.forEach(h=>{var p=[];switch(h.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":h.columns.forEach((m,v)=>{m&&1===m.depth&&(u[v]=null==m.value?"":'"'+String(m.value).split('"').join('""')+'"')});break;case"row":h.columns.forEach(m=>{if(m){switch(typeof m.value){case"object":m.value=JSON.stringify(m.value);break;case"undefined":case"null":m.value=""}p.push('"'+String(m.value).split('"').join('""')+'"')}}),l.push(p.join(s))}}),u.length&&l.unshift(u.join(s)),l=l.join("\n"),t.bom&&(l="\ufeff"+l),e(l,"text/csv")},json:function(r,t,e){var s=[];r.forEach(l=>{var u={};switch(l.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":l.columns.forEach(h=>{h&&(u[h.component.getField()]=h.value)}),s.push(u)}}),e(s=JSON.stringify(s,null,"\t"),"application/json")},pdf:function(r,t,e){var s=[],l=[],u={},h=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},p=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},m=t.jsPDF||{},v=t&&t.title?t.title:"";function T(O,N){var V=[];return O.columns.forEach(Q=>{var X;if(Q){switch(typeof Q.value){case"object":Q.value=JSON.stringify(Q.value);break;case"undefined":case"null":Q.value=""}X={content:Q.value,colSpan:Q.width,rowSpan:Q.height},N&&(X.styles=N),V.push(X)}else V.push("")}),V}m.orientation||(m.orientation=t.orientation||"landscape"),m.unit||(m.unit="pt"),r.forEach(O=>{switch(O.type){case"header":s.push(T(O));break;case"group":l.push(T(O,h));break;case"calc":l.push(T(O,p));break;case"row":l.push(T(O))}});var I=new jspdf.jsPDF(m);t&&t.autoTable&&(u="function"==typeof t.autoTable?t.autoTable(I)||{}:t.autoTable),v&&(u.didDrawPage=function(O){I.text(v,40,30)}),u.head=s,u.body=l,I.autoTable(u),t&&t.documentProcessing&&t.documentProcessing(I),e(I.output("arraybuffer"),"application/pdf")},xlsx:function(r,t,e){var l=t.sheetName||"Sheet1",u=XLSX.utils.book_new(),h=new xo(this);function m(){var I=[],O=[],N={},V={s:{c:0,r:0},e:{c:r[0]?r[0].columns.reduce((Q,X)=>Q+(X&&X.width?X.width:1),0):0,r:r.length}};return r.forEach((Q,X)=>{var ue=[];Q.columns.forEach(function(ce,ke){ce?(ue.push(ce.value instanceof Date||"object"!=typeof ce.value?ce.value:JSON.stringify(ce.value)),(ce.width>1||ce.height>-1)&&O.push({s:{r:X,c:ke},e:{r:X+ce.height-1,c:ke+ce.width-1}})):ue.push("")}),I.push(ue)}),XLSX.utils.sheet_add_aoa(N,I),N["!ref"]=XLSX.utils.encode_range(V),O.length&&(N["!merges"]=O),N}if(u.SheetNames=[],u.Sheets={},t.sheetOnly)e(m());else{if(t.sheets)for(var v in t.sheets)!0===t.sheets[v]?(u.SheetNames.push(v),u.Sheets[v]=m()):(u.SheetNames.push(v),h.commsSend(t.sheets[v],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(I){u.Sheets[v]=I}}));else u.SheetNames.push(l),u.Sheets[l]=m();t.documentProcessing&&(u=t.documentProcessing(u)),e(function(I){for(var O=new ArrayBuffer(I.length),N=new Uint8Array(O),V=0;V!=I.length;++V)N[V]=255&I.charCodeAt(V);return O}(XLSX.write(u,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(r,t,e){this.modExists("export",!0)&&e(this.modules.export.genereateHTMLTable(r),"text/html")}};let _j=(()=>{class r extends on{constructor(e){super(e),this.registerTableOption("downloadReady",function(s,l){return l}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(e,s,l,u){this.download(e,s,l,u,!0)}download(e,s,l,u,h){var p=!1;if("function"==typeof e?p=e:r.downloaders[e]?p=r.downloaders[e]:console.warn("Download Error - No such download type found: ",e),p){var v=this.generateExportList(u);p.call(this.table,v,l||{},function(T,I){h?!0===h?this.triggerDownload(T,I,e,s,!0):h(T):this.triggerDownload(T,I,e,s)}.bind(this))}}generateExportList(e){var s=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),l=this.table.options.groupHeaderDownload;return l&&!Array.isArray(l)&&(l=[l]),s.forEach(u=>{var h;"group"===u.type&&(h=u.columns[0],l&&l[u.indent]&&(h.value=l[u.indent](h.value,u.component._group.getRowCount(),u.component._group.getData(),u.component)))}),s}triggerDownload(e,s,l,u,h){var p=document.createElement("a"),m=new Blob([e],{type:s});u=u||"Tabulator."+("function"==typeof l?"txt":l),(m=this.table.options.downloadReady(e,m))&&(h?window.open(window.URL.createObjectURL(m)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(m,u):(p.setAttribute("href",window.URL.createObjectURL(m)),p.setAttribute("download",u),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p)),this.dispatchExternal("downloadComplete"))}commsReceived(e,s,l){"intercept"===s&&this.download(l.type,"",l.options,l.active,l.intercept)}}return r.moduleName="download",r.downloaders=mj,r})();function fg(r,t){var e=t.mask,s=void 0!==t.maskLetterChar?t.maskLetterChar:"A",l=void 0!==t.maskNumberChar?t.maskNumberChar:"9",u=void 0!==t.maskWildcardChar?t.maskWildcardChar:"*";function h(p){var m=e[p];void 0!==m&&m!==u&&m!==s&&m!==l&&(r.value=r.value+""+m,h(p+1))}r.addEventListener("keydown",p=>{var m=r.value.length,v=p.key;if(p.keyCode>46){if(m>=e.length)return p.preventDefault(),p.stopPropagation(),!1;switch(e[m]){case s:if(v.toUpperCase()==v.toLowerCase())return p.preventDefault(),p.stopPropagation(),!1;break;case l:if(isNaN(v))return p.preventDefault(),p.stopPropagation(),!1;break;case u:break;default:if(v!==e[m])return p.preventDefault(),p.stopPropagation(),!1}}}),r.addEventListener("keyup",p=>{p.keyCode>46&&t.maskAutoFill&&h(r.value.length)}),r.placeholder||(r.placeholder=e),t.maskAutoFill&&h(r.value.length)}var Ij={input:function(r,t,e,s,l){var u=r.getValue(),h=document.createElement("input");if(h.setAttribute("type",l.search?"search":"text"),h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let m in l.elementAttributes)"+"==m.charAt(0)?(m=m.slice(1),h.setAttribute(m,h.getAttribute(m)+l.elementAttributes["+"+m])):h.setAttribute(m,l.elementAttributes[m]);function p(m){null==u&&""!==h.value||h.value!==u?e(h.value)&&(u=h.value):s()}return h.value=void 0!==u?u:"",t(function(){h.focus({preventScroll:!0}),h.style.height="100%"}),h.addEventListener("change",p),h.addEventListener("blur",p),h.addEventListener("keydown",function(m){switch(m.keyCode){case 13:p();break;case 27:s();break;case 35:case 36:m.stopPropagation()}}),l.mask&&fg(h,l),h},textarea:function(r,t,e,s,l){var u=r.getValue(),h=l.verticalNavigation||"hybrid",p=String(null!=u?u:""),v=(p.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),T=0;if(v.style.display="block",v.style.padding="2px",v.style.height="100%",v.style.width="100%",v.style.boxSizing="border-box",v.style.whiteSpace="pre-wrap",v.style.resize="none",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let O in l.elementAttributes)"+"==O.charAt(0)?(O=O.slice(1),v.setAttribute(O,v.getAttribute(O)+l.elementAttributes["+"+O])):v.setAttribute(O,l.elementAttributes[O]);function I(O){null==u&&""!==v.value||v.value!==u?(e(v.value)&&(u=v.value),setTimeout(function(){r.getRow().normalizeHeight()},300)):s()}return v.value=p,t(function(){v.focus({preventScroll:!0}),v.style.height="100%",v.style.height=v.scrollHeight+"px",r.getRow().normalizeHeight()}),v.addEventListener("change",I),v.addEventListener("blur",I),v.addEventListener("keyup",function(){v.style.height="";var O=v.scrollHeight;v.style.height=O+"px",O!=T&&(T=O,r.getRow().normalizeHeight())}),v.addEventListener("keydown",function(O){switch(O.keyCode){case 27:s();break;case 38:("editor"==h||"hybrid"==h&&v.selectionStart)&&(O.stopImmediatePropagation(),O.stopPropagation());break;case 40:("editor"==h||"hybrid"==h&&v.selectionStart!==v.value.length)&&(O.stopImmediatePropagation(),O.stopPropagation());break;case 35:case 36:O.stopPropagation()}}),l.mask&&fg(v,l),v},number:function(r,t,e,s,l){var u=r.getValue(),h=l.verticalNavigation||"editor",p=document.createElement("input");if(p.setAttribute("type","number"),void 0!==l.max&&p.setAttribute("max",l.max),void 0!==l.min&&p.setAttribute("min",l.min),void 0!==l.step&&p.setAttribute("step",l.step),p.style.padding="4px",p.style.width="100%",p.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let T in l.elementAttributes)"+"==T.charAt(0)?(T=T.slice(1),p.setAttribute(T,p.getAttribute(T)+l.elementAttributes["+"+T])):p.setAttribute(T,l.elementAttributes[T]);p.value=u;var m=function(T){v()};function v(){var T=p.value;!isNaN(T)&&""!==T&&(T=Number(T)),T!==u?e(T)&&(u=T):s()}return t(function(){p.removeEventListener("blur",m),p.focus({preventScroll:!0}),p.style.height="100%",p.addEventListener("blur",m)}),p.addEventListener("keydown",function(T){switch(T.keyCode){case 13:v();break;case 27:s();break;case 38:case 40:"editor"==h&&(T.stopImmediatePropagation(),T.stopPropagation());break;case 35:case 36:T.stopPropagation()}}),l.mask&&fg(p,l),p},range:function(r,t,e,s,l){var u=r.getValue(),h=document.createElement("input");if(h.setAttribute("type","range"),void 0!==l.max&&h.setAttribute("max",l.max),void 0!==l.min&&h.setAttribute("min",l.min),void 0!==l.step&&h.setAttribute("step",l.step),h.style.padding="4px",h.style.width="100%",h.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let m in l.elementAttributes)"+"==m.charAt(0)?(m=m.slice(1),h.setAttribute(m,h.getAttribute(m)+l.elementAttributes["+"+m])):h.setAttribute(m,l.elementAttributes[m]);function p(){var m=h.value;!isNaN(m)&&""!==m&&(m=Number(m)),m!=u?e(m)&&(u=m):s()}return h.value=u,t(function(){h.focus({preventScroll:!0}),h.style.height="100%"}),h.addEventListener("blur",function(m){p()}),h.addEventListener("keydown",function(m){switch(m.keyCode){case 13:p();break;case 27:s()}}),h},select:function(r,t,e,s,l){var u=this,h=r.getElement(),p=r.getValue(),m=l.verticalNavigation||"editor",v=void 0!==p||null===p?Array.isArray(p)?p:[p]:void 0!==l.defaultValue?l.defaultValue:[],T=document.createElement("input"),I=document.createElement("div"),O=l.multiselect,N=[],V={},Q=[],X=[],ue=!0,ce=!1,ke="",Ue=null;function ct(Ne){var Jt,rt={},_n=u.table.getData();return(Jt=Ne?u.table.columnManager.getColumnByField(Ne):r.getColumn()._getSelf())?_n.forEach(function(dc){var ki=Jt.getFieldValue(dc);null!=ki&&""!==ki&&(rt[ki]=!0)}):console.warn("unable to find matching column to create select lookup list:",Ne),Object.keys(rt)}function In(Ne,rt){!O&&V&&V.element&&V.element.classList.remove("active"),V&&V.element&&V.element.classList.remove("focused"),V=Ne,Ne.element&&(Ne.element.classList.add("focused"),rt&&Ne.element.classList.add("active")),Ne&&Ne.element&&Ne.element.scrollIntoView&&Ne.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Gn(Ne){-1==X.indexOf(Ne)&&(X.push(Ne),In(Ne,!0)),nt()}function Sn(Ne){var rt=X[Ne];Ne>-1&&(X.splice(Ne,1),rt.element&&rt.element.classList.remove("active"))}function Ot(Ne){Ne||(Ne=V);var rt=X.indexOf(Ne);rt>-1?Sn(rt):(!0!==O&&X.length>=O&&Sn(0),Gn(Ne)),nt()}function Gi(Ne){$e(),Ne||(Ne=V),Ne&&(T.value=Ne.label,e(Ne.value)),v=[Ne.value]}function bi(Ne){Ne||$e();var rt=[];X.forEach(_n=>{rt.push(_n.value)}),v=rt,e(rt)}function nt(){var Ne=[];X.forEach(rt=>{Ne.push(rt.label)}),T.value=Ne.join(", "),!1===u.currentCell&&bi(!0)}function Ge(){$e(),s()}function $e(){I.parentNode&&I.parentNode.removeChild(I),u.table.rowManager.element.removeEventListener("scroll",Ge)}if((Array.isArray(l)||!Array.isArray(l)&&"object"==typeof l&&!l.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),l={values:l}),T.setAttribute("type","text"),T.style.padding="4px",T.style.width="100%",T.style.boxSizing="border-box",T.style.cursor="default",T.readOnly=0!=this.currentCell,l.elementAttributes&&"object"==typeof l.elementAttributes)for(let Ne in l.elementAttributes)"+"==Ne.charAt(0)?(Ne=Ne.slice(1),T.setAttribute(Ne,T.getAttribute(Ne)+l.elementAttributes["+"+Ne])):T.setAttribute(Ne,l.elementAttributes[Ne]);return T.value=void 0!==p||null===p?p:"",T.addEventListener("search",function(Ne){T.value||(function(){var Ne=X.length;for(let rt=0;rt<Ne;rt++)Sn(0)}(),bi())}),T.addEventListener("keydown",function(Ne){var rt;switch(Ne.keyCode){case 38:rt=N.indexOf(V),("editor"==m||"hybrid"==m&&rt)&&(Ne.stopImmediatePropagation(),Ne.stopPropagation(),Ne.preventDefault(),rt>0&&In(N[rt-1],!O));break;case 40:rt=N.indexOf(V),("editor"==m||"hybrid"==m&&rt<N.length-1)&&(Ne.stopImmediatePropagation(),Ne.stopPropagation(),Ne.preventDefault(),rt<N.length-1&&In(-1==rt?N[0]:N[rt+1],!O));break;case 37:case 39:Ne.stopImmediatePropagation(),Ne.stopPropagation(),Ne.preventDefault();break;case 13:O?Ot():Gi();break;case 27:Ge();break;case 9:break;default:!1===u.currentCell&&Ne.preventDefault(),Ne.keyCode>=38&&Ne.keyCode<=90&&function(Ne){clearTimeout(Ue);var rt=String.fromCharCode(event.keyCode).toLowerCase();ke+=rt.toLowerCase();var _n=N.find(Jt=>void 0!==Jt.label&&Jt.label.toLowerCase().startsWith(ke));_n&&In(_n,!O),Ue=setTimeout(()=>{ke=""},800)}()}}),T.addEventListener("blur",function(Ne){ue&&(O?bi():Ge())}),T.addEventListener("focus",function(Ne){ce||function(){if(X=[],!I.parentNode){!function(Ne,rt){var _n=[],Jt=[];function dc(vn){return rt.indexOf((vn={label:vn.label,value:vn.value,itemParams:vn.itemParams,elementAttributes:vn.elementAttributes,element:!1}).value)>-1&&Gn(vn),_n.push(vn),Jt.push(vn),vn}if("function"==typeof Ne&&(Ne=Ne(r)),Array.isArray(Ne))Ne.forEach(function(vn){var di;"object"==typeof vn?vn.options?(Jt.push(di={label:vn.label,group:!0,itemParams:vn.itemParams,elementAttributes:vn.elementAttributes,element:!1}),vn.options.forEach(function(Td){dc(Td)})):dc(vn):(rt.indexOf((di={label:vn,value:vn,element:!1}).value)>-1&&Gn(di),_n.push(di),Jt.push(di))});else for(var ki in Ne){var ss={label:Ne[ki],value:ki,element:!1};rt.indexOf(ss.value)>-1&&Gn(ss),_n.push(ss),Jt.push(ss)}l.sortValuesList&&(_n.sort((vn,di)=>vn.label<di.label?-1:vn.label>di.label?1:0),Jt.sort((vn,di)=>vn.label<di.label?-1:vn.label>di.label?1:0),"asc"!==l.sortValuesList&&(_n.reverse(),Jt.reverse())),N=_n,Q=Jt,function(){for(;I.firstChild;)I.removeChild(I.firstChild);Q.forEach(function(Ne){var rt=Ne.element;if(!rt){if(rt=document.createElement("div"),Ne.label=l.listItemFormatter?l.listItemFormatter(Ne.value,Ne.label,r,rt,Ne.itemParams):Ne.label,Ne.group?(rt.classList.add("tabulator-edit-select-list-group"),rt.tabIndex=0,rt.innerHTML=""===Ne.label?"&nbsp;":Ne.label):(rt.classList.add("tabulator-edit-select-list-item"),rt.tabIndex=0,rt.innerHTML=""===Ne.label?"&nbsp;":Ne.label,rt.addEventListener("click",function(){ce=!0,setTimeout(()=>{ce=!1},10),O?(Ot(Ne),T.focus()):Gi(Ne)}),X.indexOf(Ne)>-1&&rt.classList.add("active")),Ne.elementAttributes&&"object"==typeof Ne.elementAttributes)for(let _n in Ne.elementAttributes)"+"==_n.charAt(0)?(_n=_n.slice(1),rt.setAttribute(_n,T.getAttribute(_n)+Ne.elementAttributes["+"+_n])):rt.setAttribute(_n,Ne.elementAttributes[_n]);rt.addEventListener("mousedown",function(){ue=!1,setTimeout(function(){ue=!0},10)}),Ne.element=rt}I.appendChild(rt)})}()}(!0===l.values?ct():"string"==typeof l.values?ct(l.values):l.values||[],v);var Ne=Jn.elOffset(h);I.style.minWidth=h.offsetWidth+"px",I.style.top=Ne.top+h.offsetHeight+"px",I.style.left=Ne.left+"px",I.addEventListener("mousedown",function(rt){ue=!1,setTimeout(function(){ue=!0},10)}),document.body.appendChild(I)}}()}),(I=document.createElement("div")).classList.add("tabulator-edit-select-list"),t(function(){T.style.height="100%",T.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Ge)},10),T},autocomplete:function(r,t,e,s,l){var u=this,h=r.getElement(),p=r.getValue(),m=l.verticalNavigation||"editor",v=void 0!==p||null===p?p:void 0!==l.defaultValue?l.defaultValue:"",T=document.createElement("input"),I=document.createElement("div"),O=[],N=!1,V=!0,Q=!1;if(T.setAttribute("type","search"),T.style.padding="4px",T.style.width="100%",T.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let nt in l.elementAttributes)"+"==nt.charAt(0)?(nt=nt.slice(1),T.setAttribute(nt,T.getAttribute(nt)+l.elementAttributes["+"+nt])):T.setAttribute(nt,l.elementAttributes[nt]);function X(){!0===l.values?Q=ue():"string"==typeof l.values&&(Q=ue(l.values))}function ue(nt){var Ke,Et={},Ge=u.table.getData();return(Ke=nt?u.table.columnManager.getColumnByField(nt):r.getColumn()._getSelf())?(Ge.forEach(function($e){var pt=Ke.getFieldValue($e);null!=pt&&""!==pt&&(Et[pt]=!0)}),Et=l.sortValuesList?"asc"==l.sortValuesList?Object.keys(Et).sort():Object.keys(Et).sort().reverse():Object.keys(Et)):console.warn("unable to find matching column to create autocomplete lookup list:",nt),Et}function ce(nt,Et){var Ke,$e,Ge=[];Ke=Q||l.values||[],l.searchFunc?(Ge=l.searchFunc(nt,Ke))instanceof Promise?(ke(void 0!==l.searchingPlaceholder?l.searchingPlaceholder:"Searching..."),Ge.then(pt=>{Ft(Ue(pt),Et)}).catch(pt=>{console.err("error in autocomplete search promise:",pt)})):Ft(Ue(Ge),Et):($e=Ue(Ke),""===nt?l.showListOnEmpty&&(Ge=$e):$e.forEach(function(pt){(null!==pt.value||void 0!==pt.value)&&(String(pt.value).toLowerCase().indexOf(String(nt).toLowerCase())>-1||String(pt.title).toLowerCase().indexOf(String(nt).toLowerCase())>-1)&&Ge.push(pt)}),Ft(Ge,Et))}function ke(nt){var Et=document.createElement("div");ct(),!1!==nt&&(Et.classList.add("tabulator-edit-select-list-notice"),Et.tabIndex=0,nt instanceof Node?Et.appendChild(nt):Et.innerHTML=nt,I.appendChild(Et))}function Ue(nt){var Et=[];if(Array.isArray(nt))nt.forEach(function($e){var pt={};"object"==typeof $e?(pt.title=l.listItemFormatter?l.listItemFormatter($e.value,$e.label):$e.label,pt.value=$e.value):(pt.title=l.listItemFormatter?l.listItemFormatter($e,$e):$e,pt.value=$e),Et.push(pt)});else for(var Ge in nt){var Ke={title:l.listItemFormatter?l.listItemFormatter(Ge,nt[Ge]):nt[Ge],value:Ge};Et.push(Ke)}return Et}function ct(){for(;I.firstChild;)I.removeChild(I.firstChild)}function Ft(nt,Et){nt.length?function(nt,Et){var Ge=!1;ct(),(O=nt).forEach(function(Ke){var $e=Ke.element;$e||(($e=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),$e.tabIndex=0,$e.innerHTML=Ke.title,$e.addEventListener("click",function(pt){Sn(Ke),In()}),$e.addEventListener("mousedown",function(pt){V=!1,setTimeout(function(){V=!0},10)}),Ke.element=$e,Et&&Ke.value==p&&(T.value=Ke.title,Ke.element.classList.add("active"),Ge=!0),Ke===N&&(Ke.element.classList.add("active"),Ge=!0)),I.appendChild($e)}),Ge||Sn(!1)}(nt,Et):l.emptyPlaceholder&&ke(l.emptyPlaceholder)}function In(){Ot(),N?p!==N.value?(p=N.value,T.value=N.title,e(N.value)):s():l.freetext||l.allowEmpty&&""===T.value?(p=T.value,e(T.value)):s()}function Sn(nt,Et){N&&N.element&&N.element.classList.remove("active"),N=nt,nt&&nt.element&&nt.element.classList.add("active"),nt&&nt.element&&nt.element.scrollIntoView&&nt.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Ot(){I.parentNode&&I.parentNode.removeChild(I),u.table.rowManager.element.removeEventListener("scroll",Gi)}function Gi(){Ot(),s()}return I.classList.add("tabulator-edit-select-list"),I.addEventListener("mousedown",function(nt){V=!1,setTimeout(function(){V=!0},10)}),T.addEventListener("keydown",function(nt){var Et;switch(nt.keyCode){case 38:Et=O.indexOf(N),("editor"==m||"hybrid"==m&&Et)&&(nt.stopImmediatePropagation(),nt.stopPropagation(),nt.preventDefault(),Sn(Et>0&&O[Et-1]));break;case 40:Et=O.indexOf(N),("editor"==m||"hybrid"==m&&Et<O.length-1)&&(nt.stopImmediatePropagation(),nt.stopPropagation(),nt.preventDefault(),Et<O.length-1&&Sn(-1==Et?O[0]:O[Et+1]));break;case 37:case 39:nt.stopImmediatePropagation(),nt.stopPropagation();break;case 13:In();break;case 27:Gi();break;case 36:case 35:nt.stopImmediatePropagation()}}),T.addEventListener("keyup",function(nt){switch(nt.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:ce(T.value)}}),T.addEventListener("search",function(nt){ce(T.value)}),T.addEventListener("blur",function(nt){V&&In()}),T.addEventListener("focus",function(nt){var Et=v;X(),function(){if(!I.parentNode){for(;I.firstChild;)I.removeChild(I.firstChild);var nt=Jn.elOffset(h);I.style.minWidth=h.offsetWidth+"px",I.style.top=nt.top+h.offsetHeight+"px",I.style.left=nt.left+"px",document.body.appendChild(I)}}(),T.value=Et,ce(Et,!0)}),t(function(){T.style.height="100%",T.focus({preventScroll:!0})}),l.mask&&fg(T,l),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Gi)},10),X(),T.value=v,ce(v,!0),T},star:function(r,t,e,s,l){var u=this,h=r.getElement(),p=r.getValue(),m=h.getElementsByTagName("svg").length||5,v=h.getElementsByTagName("svg")[0]?h.getElementsByTagName("svg")[0].getAttribute("width"):14,T=[],I=document.createElement("div"),O=document.createElementNS("http://www.w3.org/2000/svg","svg");function N(ue){T.forEach(function(ce,ke){ke<ue?("ie"==u.table.browser?ce.setAttribute("class","tabulator-star-active"):ce.classList.replace("tabulator-star-inactive","tabulator-star-active"),ce.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==u.table.browser?ce.setAttribute("class","tabulator-star-inactive"):ce.classList.replace("tabulator-star-active","tabulator-star-inactive"),ce.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function V(ue){var ce=document.createElement("span"),ke=O.cloneNode(!0);T.push(ke),ce.addEventListener("mouseenter",function(Ue){Ue.stopPropagation(),Ue.stopImmediatePropagation(),N(ue)}),ce.addEventListener("mousemove",function(Ue){Ue.stopPropagation(),Ue.stopImmediatePropagation()}),ce.addEventListener("click",function(Ue){Ue.stopPropagation(),Ue.stopImmediatePropagation(),e(ue),h.blur()}),ce.appendChild(ke),I.appendChild(ce)}function Q(ue){p=ue,N(ue)}if(h.style.whiteSpace="nowrap",h.style.overflow="hidden",h.style.textOverflow="ellipsis",I.style.verticalAlign="middle",I.style.display="inline-block",I.style.padding="4px",O.setAttribute("width",v),O.setAttribute("height",v),O.setAttribute("viewBox","0 0 512 512"),O.setAttribute("xml:space","preserve"),O.style.padding="0 1px",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let ue in l.elementAttributes)"+"==ue.charAt(0)?(ue=ue.slice(1),I.setAttribute(ue,I.getAttribute(ue)+l.elementAttributes["+"+ue])):I.setAttribute(ue,l.elementAttributes[ue]);for(var X=1;X<=m;X++)V(X);return N(p=Math.min(parseInt(p),m)),I.addEventListener("mousemove",function(ue){N(0)}),I.addEventListener("click",function(ue){e(0)}),h.addEventListener("blur",function(ue){s()}),h.addEventListener("keydown",function(ue){switch(ue.keyCode){case 39:Q(p+1);break;case 37:Q(p-1);break;case 13:e(p);break;case 27:s()}}),I},progress:function(r,t,e,s,l){var Q,X,O,N,u=r.getElement(),h=void 0===l.max?(null==(Q=u.getElementsByTagName("div")[0])?void 0:Q.getAttribute("max"))||100:l.max,p=void 0===l.min?(null==(X=u.getElementsByTagName("div")[0])?void 0:X.getAttribute("min"))||0:l.min,m=(h-p)/100,v=r.getValue()||0,T=document.createElement("div"),I=document.createElement("div");function V(){var ue=window.getComputedStyle(u,null),ce=m*Math.round(I.offsetWidth/((u.clientWidth-parseInt(ue.getPropertyValue("padding-left"))-parseInt(ue.getPropertyValue("padding-right")))/100))+p;e(ce),u.setAttribute("aria-valuenow",ce),u.setAttribute("aria-label",v)}if(T.style.position="absolute",T.style.right="0",T.style.top="0",T.style.bottom="0",T.style.width="5px",T.classList.add("tabulator-progress-handle"),I.style.display="inline-block",I.style.position="relative",I.style.height="100%",I.style.backgroundColor="#488CE9",I.style.maxWidth="100%",I.style.minWidth="0%",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let ue in l.elementAttributes)"+"==ue.charAt(0)?(ue=ue.slice(1),I.setAttribute(ue,I.getAttribute(ue)+l.elementAttributes["+"+ue])):I.setAttribute(ue,l.elementAttributes[ue]);return u.style.padding="4px 4px",v=Math.min(parseFloat(v),h),v=Math.max(parseFloat(v),p),v=Math.round((v-p)/m),I.style.width=v+"%",u.setAttribute("aria-valuemin",p),u.setAttribute("aria-valuemax",h),I.appendChild(T),T.addEventListener("mousedown",function(ue){O=ue.screenX,N=I.offsetWidth}),T.addEventListener("mouseover",function(){T.style.cursor="ew-resize"}),u.addEventListener("mousemove",function(ue){O&&(I.style.width=N+ue.screenX-O+"px")}),u.addEventListener("mouseup",function(ue){O&&(ue.stopPropagation(),ue.stopImmediatePropagation(),O=!1,N=!1,V())}),u.addEventListener("keydown",function(ue){switch(ue.keyCode){case 39:ue.preventDefault(),I.style.width=I.clientWidth+u.clientWidth/100+"px";break;case 37:ue.preventDefault(),I.style.width=I.clientWidth-u.clientWidth/100+"px";break;case 9:case 13:V();break;case 27:s()}}),u.addEventListener("blur",function(){s()}),I},tickCross:function(r,t,e,s,l){var u=r.getValue(),h=document.createElement("input"),p=l.tristate,m=void 0===l.indeterminateValue?null:l.indeterminateValue,v=!1;if(h.setAttribute("type","checkbox"),h.style.marginTop="5px",h.style.boxSizing="border-box",l.elementAttributes&&"object"==typeof l.elementAttributes)for(let I in l.elementAttributes)"+"==I.charAt(0)?(I=I.slice(1),h.setAttribute(I,h.getAttribute(I)+l.elementAttributes["+"+I])):h.setAttribute(I,l.elementAttributes[I]);function T(I){return p?I?v?m:h.checked:h.checked&&!v?(h.checked=!1,h.indeterminate=!0,v=!0,m):(v=!1,h.checked):h.checked}return h.value=u,p&&(void 0===u||u===m||""===u)&&(v=!0,h.indeterminate=!0),"firefox"!=this.table.browser&&t(function(){h.focus({preventScroll:!0})}),h.checked=!0===u||"true"===u||"True"===u||1===u,t(function(){h.focus()}),h.addEventListener("change",function(I){e(T())}),h.addEventListener("blur",function(I){e(T(!0))}),h.addEventListener("keydown",function(I){13==I.keyCode&&e(T()),27==I.keyCode&&s()}),h}};let Dj=(()=>{class r extends on{constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=r.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(e){var s=this.currentCell,l=this.options("tabEndNewRow");s&&(this.navigateNext(e)||l&&(s.getElement().firstChild.blur(),(l=this.table.addRow(!0===l?{}:"function"==typeof l?l(s.row.getComponent()):Object.assign({},l))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(e){e||(e=this.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(s=>{this.modules.edit.clearEdited(s._getSelf())})}navigatePrev(e){var l,u,s=this.currentCell;if(s){if(e&&e.preventDefault(),l=this.navigateLeft())return!0;if((u=this.table.rowManager.prevDisplayRow(s.row,!0))&&(l=this.findNextEditableCell(u,u.cells.length)))return l.getComponent().edit(),!0}return!1}navigateNext(e){var l,u,s=this.currentCell;if(s){if(e&&e.preventDefault(),l=this.navigateRight())return!0;if((u=this.table.rowManager.nextDisplayRow(s.row,!0))&&(l=this.findNextEditableCell(u,-1)))return l.getComponent().edit(),!0}return!1}navigateLeft(e){var l,u,s=this.currentCell;return!(!s||(e&&e.preventDefault(),l=s.getIndex(),u=this.findPrevEditableCell(s.row,l),!u)||(u.getComponent().edit(),0))}navigateRight(e){var l,u,s=this.currentCell;return!(!s||(e&&e.preventDefault(),l=s.getIndex(),u=this.findNextEditableCell(s.row,l),!u)||(u.getComponent().edit(),0))}navigateUp(e){var l,u,s=this.currentCell;return!(!s||(e&&e.preventDefault(),l=s.getIndex(),u=this.table.rowManager.prevDisplayRow(s.row,!0),!u)||(u.cells[l].getComponent().edit(),0))}navigateDown(e){var l,u,s=this.currentCell;return!(!s||(e&&e.preventDefault(),l=s.getIndex(),u=this.table.rowManager.nextDisplayRow(s.row,!0),!u)||(u.cells[l].getComponent().edit(),0))}findNextEditableCell(e,s){var l=!1;if(s<e.cells.length-1)for(var u=s+1;u<e.cells.length;u++){let h=e.cells[u];if(h.column.modules.edit&&Jn.elVisible(h.getElement())){let p=!0;if("function"==typeof h.column.modules.edit.check&&(p=h.column.modules.edit.check(h.getComponent())),p){l=h;break}}}return l}findPrevEditableCell(e,s){var l=!1;if(s>0)for(var u=s-1;u>=0;u--){let h=e.cells[u],p=!0;if(h.column.modules.edit&&Jn.elVisible(h.getElement())&&("function"==typeof h.column.modules.edit.check&&(p=h.column.modules.edit.check(h.getComponent())),p)){l=h;break}}return l}initializeColumnCheck(e){void 0!==e.definition.editor&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}initializeColumn(e){var s={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{}};switch(typeof e.definition.editor){case"string":this.editors[e.definition.editor]?s.editor=this.editors[e.definition.editor]:console.warn("Editor Error - No such editor found: ",e.definition.editor);break;case"function":s.editor=e.definition.editor;break;case"boolean":!0===e.definition.editor&&("function"!=typeof e.definition.formatter?s.editor=this.editors[e.definition.formatter]?this.editors[e.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",e.definition.formatter))}s.editor&&(e.modules.edit=s)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(e){var l,s=this.currentCell;if(this.invalidEdit=!1,s){for(this.currentCell=!1,l=s.getElement(),e?s.validate&&s.validate():l.classList.remove("tabulator-validation-fail"),l.classList.remove("tabulator-editing");l.firstChild;)l.removeChild(l.firstChild);s.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,s=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),("textarea"==e.column.definition.editor||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,s),this.dispatchExternal("cellEditCancelled",s)}}bindEditor(e){if(e.column.modules.edit){var s=this,l=e.getElement(!0);l.setAttribute("tabindex",0),l.addEventListener("click",function(u){l.classList.contains("tabulator-editing")||l.focus({preventScroll:!0})}),l.addEventListener("mousedown",function(u){2===u.button?u.preventDefault():s.mouseClick=!0}),l.addEventListener("focus",function(u){s.recursionBlock||s.edit(e,u,!1)})}}focusCellNoEvent(e,s){this.recursionBlock=!0,s&&"ie"===this.table.browser||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,s){this.focusCellNoEvent(e),this.edit(e,!1,s)}focusScrollAdjust(e){if("virtual"==this.table.rowManager.getRenderMode()){var s=this.table.rowManager.element.scrollTop,l=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,u=e.row.getElement();u.offsetTop<s?this.table.rowManager.element.scrollTop-=s-u.offsetTop:u.offsetTop+u.offsetHeight>l&&(this.table.rowManager.element.scrollTop+=u.offsetTop+u.offsetHeight-l);var p=this.table.rowManager.element.scrollLeft,m=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,v=e.getElement();this.table.modExists("frozenColumns")&&(p+=parseInt(this.table.modules.frozenColumns.leftMargin),m-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(p-=parseInt(this.table.columnManager.renderer.vDomPadLeft),m-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),v.offsetLeft<p?this.table.rowManager.element.scrollLeft-=p-v.offsetLeft:v.offsetLeft+v.offsetWidth>m&&(this.table.rowManager.element.scrollLeft+=v.offsetLeft+v.offsetWidth-m)}}edit(e,s,l){var v,T,I,u=this,h=!0,p=function(){},m=e.getElement();if(!this.currentCell){if(e.column.modules.edit.blocked)return this.mouseClick=!1,m.blur(),!1;switch(s&&s.stopPropagation(),typeof e.column.modules.edit.check){case"function":h=e.column.modules.edit.check(e.getComponent());break;case"boolean":h=e.column.modules.edit.check}if(h||l){if(u.cancelEdit(),u.currentCell=e,this.focusScrollAdjust(e),T=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,s,T)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,T),this.dispatchExternal("cellEditing",T),I="function"==typeof e.column.modules.edit.params?e.column.modules.edit.params(T):e.column.modules.edit.params,!1===(v=e.column.modules.edit.editor.call(u,T,function(ue){p=ue},function(ue){if(u.currentCell===e){var ce=!0;return e.column.modules.validate&&u.table.modExists("validate")&&"manual"!=u.table.options.validationMode&&(ce=u.table.modules.validate.validate(e.column.modules.validate,e,ue)),!0===ce||"highlight"===u.table.options.validationMode?(u.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,-1==u.editedCells.indexOf(e)&&u.editedCells.push(e),e.setValue(ue,!0),u.table.options.dataTree&&u.table.modExists("dataTree")&&u.table.modules.dataTree.checkForRestyle(e),!0===ce||(m.classList.add("tabulator-validation-fail"),u.table.externalEvents.dispatch("validationFailed",e.getComponent(),ue,ce),!1)):(u.invalidEdit=!0,m.classList.add("tabulator-validation-fail"),u.focusCellNoEvent(e,!0),p(),u.table.externalEvents.dispatch("validationFailed",e.getComponent(),ue,ce),!1)}},function(){u.currentCell===e&&(u.cancelEdit(),u.table.options.dataTree&&u.table.modExists("dataTree")&&u.table.modules.dataTree.checkForRestyle(e))},I)))return m.blur(),!1;if(!(v instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",v),m.blur(),!1;for(m.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-row-editing");m.firstChild;)m.removeChild(m.firstChild);m.appendChild(v),p();for(var Q=m.children,X=0;X<Q.length;X++)Q[X].addEventListener("click",function(ue){ue.stopPropagation()});return!0}return this.mouseClick=!1,m.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var e=[];return this.editedCells.forEach(s=>{e.push(s.getComponent())}),e}clearEdited(e){var s;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,e.modules.validate&&(e.modules.validate.invalid=!1)),(s=this.editedCells.indexOf(e))>-1&&this.editedCells.splice(s,1)}}return r.moduleName="edit",r.editors=Ij,r})();class l0{constructor(t,e,s,l){this.type=t,this.columns=e,this.component=s||!1,this.indent=l||0}}class aE{constructor(t,e,s,l,u){this.value=t,this.component=e||!1,this.width=s,this.height=l,this.depth=u}}let Aj=(()=>{class r extends on{constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,s,l,u){this.cloneTableStyle=s,this.config=e||{},this.colVisProp=u;var h=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],p=this.bodyToExportRows(this.rowLookup(l));return h.concat(p)}genereateTable(e,s,l,u){var h=this.generateExportList(e,s,l,u);return this.genereateTableElement(h)}rowLookup(e){var s=[];if("function"==typeof e)e.call(this.table).forEach(l=>{(l=this.table.rowManager.findRow(l))&&s.push(l)});else switch(e){case!0:case"visible":s=this.table.rowManager.getVisibleRows(!0);break;case"all":s=this.table.rowManager.rows;break;case"selected":s=this.table.modules.selectRow.selectedRows;break;default:s=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],s)}generateColumnGroupHeaders(){var e=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(l=>{var u=this.processColumnGroup(l);u&&e.push(u)}),e}processColumnGroup(e){var s=e.columns,l=0,h={title:e.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||e.definition.title,column:e,depth:1};if(s.length){if(h.subGroups=[],h.width=0,s.forEach(p=>{var m=this.processColumnGroup(p);m&&(h.width+=m.width,h.subGroups.push(m),m.depth>l&&(l=m.depth))}),h.depth+=l,!h.width)return!1}else{if(!this.columnVisCheck(e))return!1;h.width=1}return h}columnVisCheck(e){return!1!==e.definition[this.colVisProp]&&(e.visible||!e.visible&&e.definition[this.colVisProp])}headersToExportRows(e){var s=[],l=0,u=[];function h(p,m){var v=l-m;if(void 0===s[m]&&(s[m]=[]),p.height=p.subGroups?1:v-p.depth+1,s[m].push(p),p.height>1)for(let T=1;T<p.height;T++)void 0===s[m+T]&&(s[m+T]=[]),s[m+T].push(!1);if(p.width>1)for(let T=1;T<p.width;T++)s[m].push(!1);p.subGroups&&p.subGroups.forEach(function(T){h(T,m+1)})}return e.forEach(function(p){p.depth>l&&(l=p.depth)}),e.forEach(function(p){h(p,0)}),s.forEach(p=>{var m=[];p.forEach(v=>{m.push(v?new aE(v.title,v.column.getComponent(),v.width,v.height,v.depth):null)}),u.push(new l0("header",m))}),u}bodyToExportRows(e){var s=[],l=[];return this.table.columnManager.columnsByIndex.forEach(u=>{this.columnVisCheck(u)&&s.push(u.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),(e=e.filter(u=>{switch(u.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&u.modules.dataTree.parent)}return!0})).forEach((u,h)=>{var p=u.getData(this.colVisProp),m=[],v=0;switch(u.type){case"group":v=u.level,m.push(new aE(u.key,u.getComponent(),s.length,1));break;case"calc":case"row":s.forEach(T=>{m.push(new aE(T._column.getFieldValue(p),T,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(v=u.modules.dataTree.index)}l.push(new l0(u.type,m,u.getComponent(),v))}),l}genereateTableElement(e){var s=document.createElement("table"),l=document.createElement("thead"),u=document.createElement("tbody"),h=this.lookupTableStyles(),p=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],m={};return m.rowFormatter=null!==p?p:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(m.treeElementField=this.table.modules.dataTree.elementField),m.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],m.groupHeader&&!Array.isArray(m.groupHeader)&&(m.groupHeader=[m.groupHeader]),s.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),l,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((v,T)=>{switch(v.type){case"header":l.appendChild(this.genereateHeaderElement(v,m,h));break;case"group":u.appendChild(this.genereateGroupElement(v,m,h));break;case"calc":u.appendChild(this.genereateCalcElement(v,m,h));break;case"row":let I=this.genereateRowElement(v,m,h);this.mapElementStyles(T%2&&h.evenRow?h.evenRow:h.oddRow,I,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),u.appendChild(I)}}),l.innerHTML&&s.appendChild(l),s.appendChild(u),this.mapElementStyles(this.table.element,s,["border-top","border-left","border-right","border-bottom"]),s}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}genereateHeaderElement(e,s,l){var u=document.createElement("tr");return e.columns.forEach(h=>{if(h){var p=document.createElement("th"),m=h.component._column.definition.cssClass?h.component._column.definition.cssClass.split(" "):[];p.colSpan=h.width,p.rowSpan=h.height,p.innerHTML=h.value,this.cloneTableStyle&&(p.style.boxSizing="border-box"),m.forEach(function(v){p.classList.add(v)}),this.mapElementStyles(h.component.getElement(),p,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(h.component._column.contentElement,p,["padding-top","padding-left","padding-right","padding-bottom"]),h.component._column.visible?this.mapElementStyles(h.component.getElement(),p,["width"]):h.component._column.definition.width&&(p.style.width=h.component._column.definition.width+"px"),h.component._column.parent&&this.mapElementStyles(h.component._column.parent.groupElement,p,["border-top"]),u.appendChild(p)}}),u}genereateGroupElement(e,s,l){var u=document.createElement("tr"),h=document.createElement("td"),p=e.columns[0];return u.classList.add("tabulator-print-table-row"),p.value=s.groupHeader&&s.groupHeader[e.indent]?s.groupHeader[e.indent](p.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):!1===s.groupHeader?p.value:e.component._group.generator(p.value,e.component._group.getRowCount(),e.component._group.getData(),e.component),h.colSpan=p.width,h.innerHTML=p.value,u.classList.add("tabulator-print-table-group"),u.classList.add("tabulator-group-level-"+e.indent),p.component.isVisible()&&u.classList.add("tabulator-group-visible"),this.mapElementStyles(l.firstGroup,u,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(l.firstGroup,h,["padding-top","padding-left","padding-right","padding-bottom"]),u.appendChild(h),u}genereateCalcElement(e,s,l){var u=this.genereateRowElement(e,s,l);return u.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(l.calcRow,u,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),u}genereateRowElement(e,s,l){var u=document.createElement("tr");return u.classList.add("tabulator-print-table-row"),e.columns.forEach(h=>{if(h){var p=document.createElement("td"),m=h.component._column,v=h.value,T={modules:{},getValue:function(){return v},getField:function(){return m.definition.field},getElement:function(){return p},getColumn:function(){return m.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getComponent:function(){return T},column:m};if((m.definition.cssClass?m.definition.cssClass.split(" "):[]).forEach(function(O){p.classList.add(O)}),this.table.modExists("format")&&!1!==this.config.formatCells)v=this.table.modules.format.formatExportValue(T,this.colVisProp);else switch(typeof v){case"object":v=JSON.stringify(v);break;case"undefined":case"null":v="";break;default:v=v}v instanceof Node?p.appendChild(v):p.innerHTML=v,l.firstCell&&(this.mapElementStyles(l.firstCell,p,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),m.definition.align&&(p.style.textAlign=m.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(s.treeElementField&&s.treeElementField==m.field||!s.treeElementField&&0==i)&&(e.component._row.modules.dataTree.controlEl&&p.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),p.firstChild),e.component._row.modules.dataTree.branchEl&&p.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),p.firstChild)),u.appendChild(p),T.modules.format&&T.modules.format.renderedCallback&&T.modules.format.renderedCallback(),s.rowFormatter&&!1!==this.config.formatCells&&s.rowFormatter(e.component)}}),u}genereateHTMLTable(e){var s=document.createElement("div");return s.appendChild(this.genereateTableElement(e)),s.innerHTML}getHtml(e,s,l,u){var h=this.generateExportList(l||this.table.options.htmlOutputConfig,s,e,u||"htmlOutput");return this.genereateHTMLTable(h)}mapElementStyles(e,s,l){if(this.cloneTableStyle&&e&&s){var u={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var h=window.getComputedStyle(e);l.forEach(function(p){s.style[u[p]]=h.getPropertyValue(p)})}}}}return r.moduleName="export",r})();var Oj={"=":function(r,t,e,s){return t==r},"<":function(r,t,e,s){return t<r},"<=":function(r,t,e,s){return t<=r},">":function(r,t,e,s){return t>r},">=":function(r,t,e,s){return t>=r},"!=":function(r,t,e,s){return t!=r},regex:function(r,t,e,s){return"string"==typeof r&&(r=new RegExp(r)),r.test(t)},like:function(r,t,e,s){return null==r?t===r:null!=t&&String(t).toLowerCase().indexOf(r.toLowerCase())>-1},keywords:function(r,t,e,s){var l=r.toLowerCase().split(void 0===s.separator?" ":s.separator),u=String(null==t?"":t).toLowerCase(),h=[];return l.forEach(p=>{u.includes(p)&&h.push(!0)}),s.matchAll?h.length===l.length:!!h.length},starts:function(r,t,e,s){return null==r?t===r:null!=t&&String(t).toLowerCase().startsWith(r.toLowerCase())},ends:function(r,t,e,s){return null==r?t===r:null!=t&&String(t).toLowerCase().endsWith(r.toLowerCase())},in:function(r,t,e,s){return Array.isArray(r)?!r.length||r.indexOf(t)>-1:(console.warn("Filter Error - filter value is not an array:",r),!1)}};let Mj=(()=>{class r extends on{constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var s=this.table.columnManager.findColumn(e.field);if(!s)return console.warn("Column Filter Error - No matching column found:",e.field),!1;this.setHeaderFilterValue(s,e.value)}),this.tableInitialized=!0}remoteFilterParams(e,s,l,u){return u.filter=this.getFilters(!0,!0),u}userSetFilter(e,s,l,u){this.setFilter(e,s,l,u),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,s,l,u){this.addFilter(e,s,l,u),this.refreshFilter()}userSetHeaderFilterFocus(e){var s=this.table.columnManager.findColumn(e);if(!s)return console.warn("Column Filter Focus Error - No matching column found:",e),!1;this.setHeaderFilterFocus(s)}userGetHeaderFilterValue(e){var s=this.table.columnManager.findColumn(e);if(s)return this.getHeaderFilterValue(s);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,s){var l=this.table.columnManager.findColumn(e);if(!l)return console.warn("Column Filter Error - No matching column found:",e),!1;this.setHeaderFilterValue(l,s)}userRemoveFilter(e,s,l){this.removeFilter(e,s,l),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,s,l){return this.search("rows",e,s,l)}searchData(e,s,l){return this.search("data",e,s,l)}initializeColumnHeaderFilter(e){var s=e.definition;s.headerFilter&&(void 0!==s.headerFilterPlaceholder&&s.field&&this.module("localize").setHeaderFilterColumnPlaceholder(s.field,s.headerFilterPlaceholder),this.initializeColumn(e))}initializeColumn(e,s){var l=this,u=e.getField();e.modules.filter={success:function(p){var I,m="input"==e.modules.filter.tagType&&"text"==e.modules.filter.attrType||"textarea"==e.modules.filter.tagType?"partial":"match",v="",T="";if(void 0===e.modules.filter.prevSuccess||e.modules.filter.prevSuccess!==p){if(e.modules.filter.prevSuccess=p,e.modules.filter.emptyFunc(p))delete l.headerFilters[u];else{switch(e.modules.filter.value=p,typeof e.definition.headerFilterFunc){case"string":r.filters[e.definition.headerFilterFunc]?(v=e.definition.headerFilterFunc,I=function(O){var N=e.definition.headerFilterFuncParams||{},V=e.getFieldValue(O);return N="function"==typeof N?N(p,V,O):N,r.filters[e.definition.headerFilterFunc](p,V,O,N)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":v=I=function(O){var N=e.definition.headerFilterFuncParams||{},V=e.getFieldValue(O);return N="function"==typeof N?N(p,V,O):N,e.definition.headerFilterFunc(p,V,O,N)}}I||("partial"===m?(I=function(O){var N=e.getFieldValue(O);return null!=N&&String(N).toLowerCase().indexOf(String(p).toLowerCase())>-1},v="like"):(I=function(O){return e.getFieldValue(O)==p},v="=")),l.headerFilters[u]={value:p,func:I,type:v,params:{}}}T=JSON.stringify(l.headerFilters),l.prevHeaderFilterChangeCheck!==T&&(l.prevHeaderFilterChangeCheck=T,l.trackChanges(),l.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,s,l){var m,v,T,I,O,N,V,u=this,h=e.modules.filter.success,p=e.getField();if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),p){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(X){return!X&&"0"!==X&&0!==X},(m=document.createElement("div")).classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":u.table.modules.edit.editors[e.definition.headerFilter]?(v=u.table.modules.edit.editors[e.definition.headerFilter],("tick"===e.definition.headerFilter||"tickCross"===e.definition.headerFilter)&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(X){return!0!==X&&!1!==X})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":v=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?v=e.modules.edit.editor:e.definition.formatter&&u.table.modules.edit.editors[e.definition.formatter]?(v=u.table.modules.edit.editors[e.definition.formatter],("tick"===e.definition.formatter||"tickCross"===e.definition.formatter)&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(X){return!0!==X&&!1!==X})):v=u.table.modules.edit.editors.input}if(v){if(I={getValue:function(){return void 0!==s?s:""},getField:function(){return e.definition.field},getElement:function(){return m},getColumn:function(){return e.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},V="function"==typeof(V=e.definition.headerFilterParams||{})?V.call(u.table):V,!(T=v.call(this.table.modules.edit,I,function(){},h,function(){},V)))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor returned a value of false");if(!(T instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor should return an instance of Node, the editor returned:",T);p?u.langBind("headerFilters|columns|"+e.definition.field,function(X){T.setAttribute("placeholder",void 0!==X&&X?X:u.langText("headerFilters|default"))}):u.langBind("headerFilters|default",function(X){T.setAttribute("placeholder",X)}),T.addEventListener("click",function(X){X.stopPropagation(),T.focus()}),T.addEventListener("focus",X=>{var ue=this.table.columnManager.element.scrollLeft;ue!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(ue),this.table.columnManager.scrollHorizontal(ue))}),O=!1,N=function(X){O&&clearTimeout(O),O=setTimeout(function(){h(T.value)},u.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=T,e.modules.filter.attrType=T.hasAttribute("type")?T.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=T.tagName.toLowerCase(),!1!==e.definition.headerFilterLiveFilter&&("autocomplete"===e.definition.headerFilter||"tickCross"===e.definition.headerFilter||("autocomplete"===e.definition.editor||"tickCross"===e.definition.editor)&&!0===e.definition.headerFilter||(T.addEventListener("keyup",N),T.addEventListener("search",N),"number"==e.modules.filter.attrType&&T.addEventListener("change",function(X){h(T.value)}),"text"==e.modules.filter.attrType&&"ie"!==this.table.browser&&T.setAttribute("type","search")),("input"==e.modules.filter.tagType||"select"==e.modules.filter.tagType||"textarea"==e.modules.filter.tagType)&&T.addEventListener("mousedown",function(X){X.stopPropagation()})),m.appendChild(T),e.contentElement.appendChild(m),l||u.headerFilterColumns.push(e)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,s){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,s,!0),e.modules.filter.success(s)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,s,l,u){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:s,value:l,params:u}]),this.addFilter(e)}addFilter(e,s,l,u){Array.isArray(e)||(e=[{field:e,type:s,value:l,params:u}]),e.forEach(h=>{(h=this.findFilter(h))&&(this.filterList.push(h),this.changed=!0)})}findFilter(e){var s;if(Array.isArray(e))return this.findSubFilters(e);var l=!1;return"function"==typeof e.field?l=function(u){return e.field(u,e.type||{})}:r.filters[e.type]?l=(s=this.table.columnManager.getColumnByField(e.field))?function(u){return r.filters[e.type](e.value,s.getFieldValue(u),u,e.params||{})}:function(u){return r.filters[e.type](e.value,u[e.field],u,e.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=l,!!e.func&&e}findSubFilters(e){var s=[];return e.forEach(l=>{(l=this.findFilter(l))&&s.push(l)}),!!s.length&&s}getFilters(e,s){var l=[];return e&&(l=this.getHeaderFilters()),s&&l.forEach(function(u){"function"==typeof u.type&&(u.type="function")}),l.concat(this.filtersToArray(this.filterList,s))}filtersToArray(e,s){var l=[];return e.forEach(u=>{var h;Array.isArray(u)?l.push(this.filtersToArray(u,s)):(h={field:u.field,type:u.type,value:u.value},s&&"function"==typeof h.type&&(h.type="function"),l.push(h))}),l}getHeaderFilters(){var e=[];for(var s in this.headerFilters)e.push({field:s,type:this.headerFilters[s].type,value:this.headerFilters[s].value});return e}removeFilter(e,s,l){Array.isArray(e)||(e=[{field:e,type:s,value:l}]),e.forEach(u=>{var h;(h=this.filterList.findIndex("object"==typeof u.field?p=>u===p:p=>u.field===p.field&&u.type===p.type&&u.value===p.value))>-1?this.filterList.splice(h,1):console.warn("Filter Error - No matching filter type found, ignoring: ",u.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{void 0!==e.modules.filter.value&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,s,l,u){var h=[],p=[];return Array.isArray(s)||(s=[{field:s,type:l,value:u}]),s.forEach(m=>{(m=this.findFilter(m))&&p.push(m)}),this.table.rowManager.rows.forEach(m=>{var v=!0;p.forEach(T=>{this.filterRecurse(T,m.getData())||(v=!1)}),v&&h.push("data"===e?m.getData("data"):m.getComponent())}),h}filter(e,s){var l=[],u=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(h=>{this.filterRow(h)&&l.push(h)}):l=e.slice(0),this.subscribedExternal("dataFiltered")&&(l.forEach(h=>{u.push(h.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),u)),l}filterRow(e,s){var l=!0,u=e.getData();for(var h in this.filterList.forEach(p=>{this.filterRecurse(p,u)||(l=!1)}),this.headerFilters)this.headerFilters[h].func(u)||(l=!1);return l}filterRecurse(e,s){var l=!1;return Array.isArray(e)?e.forEach(u=>{this.filterRecurse(u,s)&&(l=!0)}):l=e.func(s),l}}return r.moduleName="filter",r.filters=Oj,r})();var Zj={plaintext:function(r,t,e){return this.emptyToSpace(this.sanitizeHTML(r.getValue()))},html:function(r,t,e){return r.getValue()},textarea:function(r,t,e){return r.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(r.getValue()))},money:function(r,t,e){var u,h,p,m,s=parseFloat(r.getValue()),l="",v=t.decimal||".",T=t.thousand||",",I=t.negativeSign||"-",O=t.symbol||"",N=!!t.symbolAfter,V=void 0!==t.precision?t.precision:2;if(isNaN(s))return this.emptyToSpace(this.sanitizeHTML(r.getValue()));for(s<0&&(s=Math.abs(s),l=I),u=!1!==V?s.toFixed(V):s,h=(u=String(u).split("."))[0],p=u.length>1?v+u[1]:"",m=/(\d+)(\d{3})/;m.test(h);)h=h.replace(m,"$1"+T+"$2");return N?l+h+p+O:l+O+h+p},link:function(r,t,e){var s=r.getValue(),l=t.urlPrefix||"",u=t.download,h=s,p=document.createElement("a");if(t.labelField&&(h=r.getData()[t.labelField]),t.label)switch(typeof t.label){case"string":h=t.label;break;case"function":h=t.label(r)}if(h){if(t.urlField&&(s=r.getData()[t.urlField]),t.url)switch(typeof t.url){case"string":s=t.url;break;case"function":s=t.url(r)}return p.setAttribute("href",l+s),t.target&&p.setAttribute("target",t.target),t.download&&(u="function"==typeof u?u(r):!0===u?"":u,p.setAttribute("download",u)),p.innerHTML=this.emptyToSpace(this.sanitizeHTML(h)),p}return"&nbsp;"},image:function(r,t,e){var s=document.createElement("img"),l=r.getValue();switch(t.urlPrefix&&(l=t.urlPrefix+r.getValue()),t.urlSuffix&&(l+=t.urlSuffix),s.setAttribute("src",l),typeof t.height){case"number":s.style.height=t.height+"px";break;case"string":s.style.height=t.height}switch(typeof t.width){case"number":s.style.width=t.width+"px";break;case"string":s.style.width=t.width}return s.addEventListener("load",function(){r.getRow().normalizeHeight()}),s},tickCross:function(r,t,e){var s=r.getValue(),l=r.getElement(),u=t.allowEmpty,p=void 0!==t.tickElement?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',m=void 0!==t.crossElement?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return t.allowTruthy&&s||!0===s||"true"===s||"True"===s||1===s||"1"===s?(l.setAttribute("aria-checked",!0),p||""):!u||"null"!==s&&""!==s&&null!=s?(l.setAttribute("aria-checked",!1),m||""):(l.setAttribute("aria-checked","mixed"),"")},datetime:function(r,t,e){var s=window.DateTime||luxon.DateTime,l=t.inputFormat||"yyyy-MM-dd HH:mm:ss",u=t.outputFormat||"dd/MM/yyyy HH:mm:ss",h=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",p=r.getValue();if(void 0!==s){var m=(window.DateTime||luxon.DateTime).fromFormat(p,l);return m.isValid?(t.timezone&&(m=m.shiftTimezone(t.timezone)),m.toFormat(u)):!0===h?p:"function"==typeof h?h(p):h}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(r,t,e){var s=window.DateTime||luxon.DateTime,l=t.inputFormat||"yyyy-MM-dd HH:mm:ss",u=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",h=void 0!==t.suffix&&t.suffix,p=void 0!==t.unit?t.unit:"days",m=void 0!==t.humanize&&t.humanize,v=void 0!==t.date?t.date:s.now(),T=r.getValue();if(void 0!==s){var I=s.fromFormat(T,l);if(!I.isValid)return!0===u?T:"function"==typeof u?u(T):u;if(!m)return parseInt(I.diff(v,p)[p])+(h?" "+h:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(r,t,e){var s=r.getValue();return void 0===t[s]?(console.warn("Missing display value for "+s),s):t[s]},star:function(r,t,e){var s=r.getValue(),l=r.getElement(),u=t&&t.stars?t.stars:5,h=document.createElement("span"),p=document.createElementNS("http://www.w3.org/2000/svg","svg");h.style.verticalAlign="middle",p.setAttribute("width","14"),p.setAttribute("height","14"),p.setAttribute("viewBox","0 0 512 512"),p.setAttribute("xml:space","preserve"),p.style.padding="0 1px",s=s&&!isNaN(s)?parseInt(s):0,s=Math.max(0,Math.min(s,u));for(var T=1;T<=u;T++){var I=p.cloneNode(!0);I.innerHTML=T<=s?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',h.appendChild(I)}return l.style.whiteSpace="nowrap",l.style.overflow="hidden",l.style.textOverflow="ellipsis",l.setAttribute("aria-label",s),h},traffic:function(r,t,e){var T,s=this.sanitizeHTML(r.getValue())||0,l=document.createElement("span"),u=t&&t.max?t.max:100,h=t&&t.min?t.min:0,p=t&&void 0!==t.color?t.color:["red","orange","green"],m="#666666";if(!isNaN(s)&&void 0!==r.getValue()){switch(l.classList.add("tabulator-traffic-light"),T=parseFloat(s)<=u?parseFloat(s):u,T=parseFloat(T)>=h?parseFloat(T):h,T=Math.round((T-h)/((u-h)/100)),typeof p){case"string":m=p;break;case"function":m=p(s);break;case"object":if(Array.isArray(p)){var O=Math.floor(T/(100/p.length));O=Math.min(O,p.length-1),m=p[O=Math.max(O,0)];break}}return l.style.backgroundColor=m,l}},progress:function(r,t,e){var v,T,I,O,s=this.sanitizeHTML(r.getValue())||0,l=r.getElement(),u=t&&t.max?t.max:100,h=t&&t.min?t.min:0,p=t&&t.legendAlign?t.legendAlign:"center";switch(v=parseFloat(s)<=u?parseFloat(s):u,v=parseFloat(v)>=h?parseFloat(v):h,v=Math.round((v-h)/((u-h)/100)),typeof t.color){case"string":T=t.color;break;case"function":T=t.color(s);break;case"object":if(Array.isArray(t.color)){var N=100/t.color.length,V=Math.floor(v/N);V=Math.min(V,t.color.length-1),V=Math.max(V,0),T=t.color[V];break}default:T="#2DC214"}switch(typeof t.legend){case"string":I=t.legend;break;case"function":I=t.legend(s);break;case"boolean":I=s;break;default:I=!1}switch(typeof t.legendColor){case"string":O=t.legendColor;break;case"function":O=t.legendColor(s);break;case"object":Array.isArray(t.legendColor)&&(N=100/t.legendColor.length,V=Math.floor(v/N),V=Math.min(V,t.legendColor.length-1),V=Math.max(V,0),O=t.legendColor[V]);break;default:O="#000"}l.style.minWidth="30px",l.style.position="relative",l.setAttribute("aria-label",v);var Q=document.createElement("div");Q.style.display="inline-block",Q.style.position="absolute",Q.style.width=v+"%",Q.style.backgroundColor=T,Q.style.height="100%",Q.setAttribute("data-max",u),Q.setAttribute("data-min",h);var X=document.createElement("div");if(X.style.position="relative",X.style.width="100%",X.style.height="100%",I){var ue=document.createElement("div");ue.style.position="absolute",ue.style.top=0,ue.style.left=0,ue.style.textAlign=p,ue.style.width="100%",ue.style.color=O,ue.innerHTML=I}return e(function(){if(!(r instanceof s0)){var ce=document.createElement("div");ce.style.position="absolute",ce.style.top="4px",ce.style.bottom="4px",ce.style.left="4px",ce.style.right="4px",l.appendChild(ce),l=ce}l.appendChild(X),X.appendChild(Q),I&&X.appendChild(ue)}),""},color:function(r,t,e){return r.getElement().style.backgroundColor=this.sanitizeHTML(r.getValue()),""},buttonTick:function(r,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(r,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(r,t,e){return this.table.rowManager.activeRows.indexOf(r.getRow()._getSelf())+1},handle:function(r,t,e){return r.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(r,t,e){var s=document.createElement("div"),l=r.getRow()._row.modules.responsiveLayout;function u(h){var p=l.element;l.open=h,p&&(l.open?(s.classList.add("open"),p.style.display=""):(s.classList.remove("open"),p.style.display="none"))}return s.classList.add("tabulator-responsive-collapse-toggle"),s.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",r.getElement().classList.add("tabulator-row-handle"),s.addEventListener("click",function(h){h.stopImmediatePropagation(),u(!l.open)}),u(l.open),s},rowSelection:function(r,t,e){var s=document.createElement("input");if(s.type="checkbox",this.table.modExists("selectRow",!0))if(s.addEventListener("click",u=>{u.stopPropagation()}),"function"==typeof r.getRow){var l=r.getRow();l instanceof sE?(s.addEventListener("change",u=>{l.toggleSelect()}),s.checked=l.isSelected&&l.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(l,s)):s=""}else s.addEventListener("change",u=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(t.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(s);return s}};let qj=(()=>{class r extends on{constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupFormatter(e,""),void 0!==e.definition.formatterPrint&&(e.modules.format.print=this.lookupFormatter(e,"Print")),void 0!==e.definition.formatterClipboard&&(e.modules.format.clipboard=this.lookupFormatter(e,"Clipboard")),void 0!==e.definition.formatterHtmlOutput&&(e.modules.format.htmlOutput=this.lookupFormatter(e,"HtmlOutput"))}lookupFormatter(e,s){var l={params:e.definition["formatter"+s+"Params"]||{}},u=e.definition["formatter"+s];switch(typeof u){case"string":r.formatters[u]?l.formatter=r.formatters[u]:(console.warn("Formatter Error - No such formatter found: ",u),l.formatter=r.formatters.plaintext);break;case"function":l.formatter=u;break;default:l.formatter=r.formatters.plaintext}return l}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,s,l){var u,h,p,m;return e.definition.titleFormatter?(u=this.getFormatter(e.definition.titleFormatter),p=v=>{e.titleFormatterRendered=v},m={getValue:function(){return s},getElement:function(){return l}},h="function"==typeof(h=e.definition.titleFormatterParams||{})?h():h,u.call(this,m,h,p)):s}formatValue(e){var s=e.getComponent(),l="function"==typeof e.column.modules.format.params?e.column.modules.format.params(s):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,s,l,function(h){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=h,e.modules.format.rendered=!1})}formatExportValue(e,s){var u,l=e.column.modules.format[s];if(l){let h=function(p){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=p,e.modules.format.rendered=!1};return u="function"==typeof l.params?l.params(component):l.params,l.formatter.call(this,e.getComponent(),u,h)}return this.formatValue(e)}sanitizeHTML(e){if(e){var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(l){return s[l]})}return e}emptyToSpace(e){return null==e||""===e?"&nbsp;":e}getFormatter(e){switch(typeof e){case"string":r.formatters[e]?e=r.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),e=r.formatters.plaintext);break;case"function":e=e;break;default:e=r.formatters.plaintext}return e}}return r.moduleName="format",r.formatters=Zj,r})(),e8=(()=>{class r extends on{constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(e){this.layoutElement(e.element,e.column)}initializeColumn(e){var s={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(s.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=s):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}scrollHorizontal(){var e;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),e=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),e.forEach(s=>{"row"===s.type&&this.layoutRow(s)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(s=>{s.calcs.top&&this.layoutRow(s.calcs.top),s.calcs.bottom&&this.layoutRow(s.calcs.bottom),s.groupList&&s.groupList.length&&this.layoutGroupCalcs(s.groupList&&s.groupList)})}layoutColumnPosition(e){var s=[];this.leftColumns.forEach((l,u)=>{if(l.modules.frozen.margin=this._calcSpace(this.leftColumns,u)+this.table.columnManager.scrollLeft+"px",l.modules.frozen.edge=u==this.leftColumns.length-1,l.parent.isGroup){var h=this.getColGroupParentElement(l);s.includes(h)||(this.layoutElement(h,l),s.push(h)),l.modules.frozen.edge&&h.classList.add("tabulator-frozen-"+l.modules.frozen.position)}else this.layoutElement(l.getElement(),l);e&&l.cells.forEach(p=>{this.layoutElement(p.getElement(!0),l)})}),this.rightColumns.forEach((l,u)=>{l.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,u+1)+"px",l.modules.frozen.edge=u==this.rightColumns.length-1,this.layoutElement(l.parent.isGroup?this.getColGroupParentElement(l):l.getElement(),l),e&&l.cells.forEach(h=>{this.layoutElement(h.getElement(!0),l)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(e=>{"row"===e.type&&this.layoutRow(e)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(e){e.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(l=>{var u=e.getCell(l);u&&this.layoutElement(u.getElement(!0),l)}),this.rightColumns.forEach(l=>{var u=e.getCell(l);u&&this.layoutElement(u.getElement(!0),l)})}layoutElement(e,s){s.modules.frozen&&(e.style.position="absolute",e.style.left=s.modules.frozen.margin,e.classList.add("tabulator-frozen"),s.modules.frozen.edge&&e.classList.add("tabulator-frozen-"+s.modules.frozen.position))}_calcSpace(e,s){var l=0;for(let u=0;u<s;u++)e[u].visible&&(l+=e[u].getWidth());return l}}return r.moduleName="frozenColumns",r})(),t8=(()=>{class r extends on{constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(e){return this.rows.indexOf(e)>-1}isFrozen(){return!!this.rows.length}getRows(e){var s=e.slice(0);return this.rows.forEach(function(l){var u=s.indexOf(l);u>-1&&s.splice(u,1)}),s}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(e),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(e){this.rows.indexOf(e),e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var s=this.rows.indexOf(e);if(s>-1){var l=e.getElement();l.parentNode&&l.parentNode.removeChild(l),this.rows.splice(s,1)}}styleRows(e){this.rows.forEach((s,l)=>{this.table.rowManager.styleRow(s,l)})}}return r.moduleName="frozenRows",r})();class n8{constructor(t){return this._group=t,this.type="GroupComponent",new Proxy(this,{get:function(e,s,l){return void 0!==e[s]?e[s]:e._group.table.componentFunctionBinder.handle("row",e._group,s)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class nc{constructor(t,e,s,l,u,h,p){this.groupManager=t,this.parent=e,this.key=l,this.level=s,this.field=u,this.hasSubGroups=s<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=p,this.rows=[],this.groups=[],this.groupList=[],this.generator=h,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=p?p.visible:void 0!==t.startOpen[s]?t.startOpen[s]:t.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(t){t.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach(e=>{this._createGroup(e,t)})}addBindings(){var t,e,s;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(s=!1,this.element.addEventListener("touchstart",u=>{s=!0},{passive:!0}),this.element.addEventListener("touchend",u=>{s&&this.groupManager.table.options.groupTap(u,this.getComponent()),s=!1})),this.groupManager.table.options.groupDblTap&&(t=null,this.element.addEventListener("touchend",u=>{t?(clearTimeout(t),t=null,this.groupManager.table.options.groupDblTap(u,this.getComponent())):t=setTimeout(()=>{clearTimeout(t),t=null},300)})),this.groupManager.table.options.groupTapHold&&(e=null,this.element.addEventListener("touchstart",u=>{clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),e=null,s=!1,this.groupManager.table.options.groupTapHold(u,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",u=>{clearTimeout(e),e=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",u=>{u.stopPropagation(),u.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(t,e){var s=e+"_"+t,l=new nc(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[s]);this.groups[s]=l,this.groupList.push(l)}_addRowToGroup(t){var e=this.level+1;if(this.hasSubGroups){var s=this.groupManager.groupIDLookups[e].func(t.getData()),l=e+"_"+s;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[l]&&this.groups[l].addRow(t):(this.groups[l]||this._createGroup(s,e),this.groups[l].addRow(t))}}_addRow(t){this.rows.push(t),t.modules.group=this}insertRow(t,e,s){var l=this.conformRowData({});t.updateData(l);var u=this.rows.indexOf(e);u>-1?this.rows.splice(s?u+1:u,0,t):s?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(t){this.arrowElement.style.marginLeft=t,this.groupList.forEach(function(e){e.scrollHeader(t)})}getRowIndex(t){}conformRowData(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t}removeRow(t){var e=this.rows.indexOf(t),s=t.getElement();e>-1&&this.rows.splice(e,1),this.groupManager.table.options.groupValues||this.rows.length?(s.parentNode&&s.parentNode.removeChild(s),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(t){var s,e=t.level+"_"+t.key;this.groups[e]&&(delete this.groups[e],(s=this.groupList.indexOf(t))>-1&&this.groupList.splice(s,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(t){var e=[];return e.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(s){e=e.concat(s.getHeadersAndRows(t))}):(!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!t&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top))),!t&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom)))),e}getData(t,e){var s=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(l=>{s.push(l.getData(e||"data"))}),s}getRowCount(){var t=0;return this.groupList.length?this.groupList.forEach(e=>{t+=e.getRowCount()}):t=this.rows.length,t}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(t=>{t.getHeadersAndRows().forEach(s=>{s.detachElement()})}):this.rows.forEach(t=>{var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var t=this.getElement();this.groupList.length?this.groupList.forEach(e=>{e.getHeadersAndRows().forEach(l=>{var u=l.getElement();t.parentNode.insertBefore(u,t.nextSibling),l.initialize(),t=u})}):this.rows.forEach(e=>{var s=e.getElement();t.parentNode.insertBefore(s,t.nextSibling),e.initialize(),t=s}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var t=[];"function"==typeof this.visible&&(this.rows.forEach(function(e){t.push(e.getData())}),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))}getRowGroup(t){var e=!1;return this.groupList.length?this.groupList.forEach(function(s){var l=s.getRowGroup(t);l&&(e=l)}):this.rows.find(function(s){return s===t})&&(e=this),e}getSubGroups(t){var e=[];return this.groupList.forEach(function(s){e.push(t?s.getComponent():s)}),e}getRows(t){var e=[];return this.rows.forEach(function(s){e.push(t?s.getComponent():s)}),e}generateGroupHeaderContents(){var t=[];for(this.rows.forEach(function(e){t.push(e.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(t=[]){return t.unshift(this.key),this.parent&&this.parent.getPath(t),t}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(t){(!this.initialized||t)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,Jn.elVisible(this.element)&&this.initialize(!0)}setHeight(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new n8(this)),this.component}}let i8=(()=>{class r extends on{constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,s=this.table.options.groupStartOpen,l=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(l)&&e.length>l.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(h,p)=>{this.headerGenerator[0]=(m,v,T)=>(void 0===m?"":m)+"<span>("+v+" "+(1===v?h:p.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(e)||e?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(h=>{h.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),h.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(e)||(e=[e]),e.forEach((h,p)=>{var m,v;m="function"==typeof h?h:(v=this.table.columnManager.getColumnByField(h))?function(T){return v.getFieldValue(T)}:function(T){return T[h]},this.groupIDLookups.push({field:"function"!=typeof h&&h,func:m,values:!!this.allowedValues&&this.allowedValues[p]})}),s&&(Array.isArray(s)||(s=[s]),s.forEach(h=>{}),this.startOpen=s),l&&(this.headerGenerator=Array.isArray(l)?l:[l])}}rowSample(e,s){var l=this.getGroups(!1)[0];return s.push(l.getRows(!1)[0]),s}virtualRenderFill(){var e=this.table.rowManager.tableElement,s=this.table.rowManager.getVisibleRows();s=s.filter(l=>"group"!==l.type),e.style.minWidth=s.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(e,s,l){this.assignRowToGroup(e);var u=e.modules.group.rows;return u.length>1&&(!s||s&&-1==u.indexOf(s)?l?u[0]!==e&&this.table.rowManager.moveRowInArray(e.modules.group.rows,e,s=u[0],!l):u[u.length-1]!==e&&this.table.rowManager.moveRowInArray(e.modules.group.rows,e,s=u[u.length-1],!l):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,s,!l)),s}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return!!e.modules.group&&e.modules.group.getComponent()}rowMoving(e,s,l){!l&&s instanceof nc&&(s=this.table.rowManager.prevDisplayRow(e)||s);var u=s instanceof nc?s:s.modules.group,h=e instanceof nc?e:e.modules.group;u===h?this.table.rowManager.moveRowInArray(u.rows,e,s,l):(h&&h.removeRow(e),u.insertRow(e,s,l))}rowDeleting(e){e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.updateGroupRows(!0)}cellUpdated(e){this.reassignRowToGroup(e.row)}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var s=[];return this.groupList.forEach(function(l){s.push(e?l.getComponent():l)}),s}getChildGroups(e){var s=[];return e||(e=this),e.groupList.forEach(l=>{l.groupList.length?s=s.concat(this.getChildGroups(l)):s.push(l)}),s}wipe(){this.groupList.forEach(function(e){e.wipe()})}pullGroupListData(e){var s=[];return e.forEach(l=>{var u={level:0,rowCount:0,headerContent:""},h=[];l.hasSubGroups?(h=this.pullGroupListData(l.groupList),u.level=l.level,u.rowCount=h.length-l.groupList.length,u.headerContent=l.generator(l.key,u.rowCount,l.rows,l),s.push(u),s=s.concat(h)):(u.level=l.level,u.headerContent=l.generator(l.key,l.rows.length,l.rows,l),u.rowCount=l.getRows().length,s.push(u),l.getRows().forEach(p=>{s.push(p.getData("data"))}))}),s}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var s=!1;return this.groupList.forEach(l=>{var u=l.getRowGroup(e);u&&(s=u)}),s}countGroups(){return this.groupList.length}generateGroups(e){var s=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(l=>{this.createGroup(l,0,s)}),e.forEach(l=>{this.assignRowToExistingGroup(l,s)})):e.forEach(l=>{this.assignRowToGroup(l,s)})}createGroup(e,s,l){var h,u=s+"_"+e;h=new nc(this,!1,s,e,this.groupIDLookups[0].field,this.headerGenerator[0],(l=l||[])[u]),this.groups[u]=h,this.groupList.push(h)}assignRowToExistingGroup(e,s){var u="0_"+this.groupIDLookups[0].func(e.getData());this.groups[u]&&this.groups[u].addRow(e)}assignRowToGroup(e,s){var l=this.groupIDLookups[0].func(e.getData()),u=!this.groups["0_"+l];return u&&this.createGroup(l,0,s),this.groups["0_"+l].addRow(e),!u}reassignRowToGroup(e){if("row"===e.type){var s=e.modules.group,l=s.getPath(),u=this.getExpectedPath(e);l.length==u.length&&l.every((p,m)=>p===u[m])||(s.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var s=[],l=e.getData();return this.groupIDLookups.forEach(u=>{s.push(u.func(l))}),s}updateGroupRows(e){var s=[];return this.groupList.forEach(l=>{s=s.concat(l.getHeadersAndRows())}),e&&this.refreshData(!0,this.displayHandler),s}scrollHeaders(e){"virtual"===this.table.options.renderHorizontal&&(e-=this.table.columnManager.renderer.vDomPadLeft),e+="px",this.groupList.forEach(s=>{s.scrollHeader(e)})}removeGroup(e){var l,s=e.level+"_"+e.key;this.groups[s]&&(delete this.groups[s],(l=this.groupList.indexOf(e))>-1&&this.groupList.splice(l,1))}}return r.moduleName="groupRows",r})();var r8={cellEdit:function(r){r.component.setValueProcessData(r.data.oldValue),r.component.cellRendered()},rowAdd:function(r){r.component.deleteActual()},rowDelete:function(r){var t=this.table.rowManager.addRowActual(r.data.data,r.data.pos,r.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(r.component,t)},rowMove:function(r){this.table.rowManager.moveRowActual(r.component,this.table.rowManager.rows[r.data.posFrom],!r.data.after),this.table.rowManager.redraw()}},o8={cellEdit:function(r){r.component.setValueProcessData(r.data.newValue),r.component.cellRendered()},rowAdd:function(r){var t=this.table.rowManager.addRowActual(r.data.data,r.data.pos,r.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(r.component,t)},rowDelete:function(r){r.component.deleteActual()},rowMove:function(r){this.table.rowManager.moveRowActual(r.component,this.table.rowManager.rows[r.data.posTo],r.data.after),this.table.rowManager.redraw()}};let s8=(()=>{class r extends on{constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,s,l){this.action("rowMove",e,{posFrom:this.table.rowManager.getRowPosition(e),posTo:this.table.rowManager.getRowPosition(s),to:s,after:l})}rowAdded(e,s,l,u){this.action("rowAdd",e,{data:s,pos:l,index:u})}rowDeleted(e){var s,l;this.table.options.groupBy?(s=(l=e.getComponent().getGroup().rows).indexOf(e))&&(s=l[s-1]):(s=e.table.rowManager.getRowIndex(e))&&(s=e.table.rowManager.rows[s-1]),this.action("rowDelete",e,{data:e.getData(),pos:!s,index:s})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,s,l){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:s,data:l}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var s=this.history.findIndex(function(l){return l.component===e});s>-1&&(this.history.splice(s,1),s<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return r.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return r.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(e,s){this.history.forEach(function(l){if(l.component instanceof Tr)l.component===e&&(l.component=s);else if(l.component instanceof pg&&l.component.row===e){var u=l.component.column.getField();u&&(l.component=s.getCell(u))}})}}return r.moduleName="history",r.undoers=r8,r.redoers=o8,r})(),a8=(()=>{class r extends on{constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var e=this.table.originalElement,s=this.table.options,u=e.getElementsByTagName("th"),h=e.getElementsByTagName("tbody")[0],p=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),h=h?h.getElementsByTagName("tr"):[],this._extractOptions(e,s),u.length?this._extractHeaders(u,h):this._generateBlankHeaders(u,h);for(var m=0;m<h.length;m++){var T=h[m].getElementsByTagName("td"),I={};this.hasIndex||(I[s.index]=m);for(var O=0;O<T.length;O++)void 0!==this.fieldIndex[O]&&(I[this.fieldIndex[O]]=T[O].innerHTML);p.push(I)}s.data=p,this.dispatchExternal("htmlImported")}_extractOptions(e,s,l){var u=e.attributes,h=l?Object.assign([],l):Object.keys(s),p={};for(var m in h.forEach(I=>{p[I.toLowerCase()]=I}),u){var T,v=u[m];v&&"object"==typeof v&&v.name&&0===v.name.indexOf("tabulator-")&&(T=v.name.replace("tabulator-",""),void 0!==p[T]&&(s[p[T]]=this._attribValue(v.value)))}}_attribValue(e){return"true"===e||"false"!==e&&e}_findCol(e){return this.table.options.columns.find(l=>l.title===e)||!1}_extractHeaders(e,s){for(var l=0;l<e.length;l++){var m,u=e[l],h=!1,p=this._findCol(u.textContent);p?h=!0:p={title:u.textContent.trim()},p.field||(p.field=u.textContent.trim().toLowerCase().replace(" ","_")),(m=u.getAttribute("width"))&&!p.width&&(p.width=m),this._extractOptions(u,p,ud.prototype.defaultOptionList),this.fieldIndex[l]=p.field,p.field==this.table.options.index&&(this.hasIndex=!0),h||this.table.options.columns.push(p)}}_generateBlankHeaders(e,s){for(var l=0;l<e.length;l++){var u=e[l],h={title:"",field:"col"+l};this.fieldIndex[l]=h.field;var p=u.getAttribute("width");p&&(h.width=p),this.table.options.columns.push(h)}}}return r.moduleName="htmlTableImport",r})(),l8=(()=>{class r extends on{constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(e,s){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){e.preventDefault();try{if(document.selection)(l=document.body.createTextRange()).moveToElementText(this.element),l.select();else if(window.getSelection){var l;(l=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(l)}}catch(u){}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,s){s?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var s=this.eventMap[e];this.touchSubscribers[s+"-touchstart"]||(this.touchSubscribers[s+"-touchstart"]=this.handleTouch.bind(this,s,"start"),this.touchSubscribers[s+"-touchend"]=this.handleTouch.bind(this,s,"end"),this.subscribe(s+"-touchstart",this.touchSubscribers[s+"-touchstart"]),this.subscribe(s+"-touchend",this.touchSubscribers[s+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var s=!0,l=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let u in this.eventMap)this.eventMap[u]===l&&this.subscribers[u]&&(s=!1);s&&(this.unsubscribe(l+"-touchstart",this.touchSubscribers[l+"-touchstart"]),this.unsubscribe(l+"-touchend",this.touchSubscribers[l+"-touchend"]),delete this.touchSubscribers[l+"-touchstart"],delete this.touchSubscribers[l+"-touchend"])}}initializeColumn(e){var s=e.definition;for(let l in this.eventMap)s[l]&&(this.subscriptionChanged(l,!0),this.columnSubscribers[l]||(this.columnSubscribers[l]=[]),this.columnSubscribers[l].push(e))}handle(e,s,l){this.dispatchEvent(e,s,l)}handleTouch(e,s,l,u){var h=this.touchWatchers[e];switch("column"===e&&(e="header"),s){case"start":h.tap=!0,clearTimeout(h.tapHold),h.tapHold=setTimeout(()=>{clearTimeout(h.tapHold),h.tapHold=null,h.tap=null,clearTimeout(h.tapDbl),h.tapDbl=null,this.dispatchEvent(e+"TapHold",l,u)},1e3);break;case"end":h.tap&&(h.tap=null,this.dispatchEvent(e+"Tap",l,u)),h.tapDbl?(clearTimeout(h.tapDbl),h.tapDbl=null,this.dispatchEvent(e+"DblTap",l,u)):h.tapDbl=setTimeout(()=>{clearTimeout(h.tapDbl),h.tapDbl=null},300),clearTimeout(h.tapHold),h.tapHold=null}}dispatchEvent(e,s,l){var h,u=l.getComponent();this.columnSubscribers[e]&&(l instanceof pg?h=l.column.definition[e]:l instanceof ud&&(h=l.definition[e]),h&&h(s,u)),this.dispatchExternal(e,s,u)}}return r.moduleName="interaction",r})();var u8={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},c8={keyBlock:function(r){r.stopPropagation(),r.preventDefault()},scrollPageUp:function(r){var t=this.table.rowManager,e=t.scrollTop-t.element.clientHeight;r.preventDefault(),t.displayRowsCount&&(e>=0?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(r){var t=this.table.rowManager,e=t.scrollTop+t.element.clientHeight,s=t.element.scrollHeight;r.preventDefault(),t.displayRowsCount&&(e<=s?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(r){var t=this.table.rowManager;r.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(r){var t=this.table.rowManager;r.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(r){this.dispatch("keybinding-nav-prev",r)},navNext:function(r){this.dispatch("keybinding-nav-next",r)},navLeft:function(r){this.dispatch("keybinding-nav-left",r)},navRight:function(r){this.dispatch("keybinding-nav-right",r)},navUp:function(r){this.dispatch("keybinding-nav-up",r)},navDown:function(r){this.dispatch("keybinding-nav-down",r)},undo:function(r){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(r.preventDefault(),this.table.modules.history.undo()))},redo:function(r){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(r.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(r){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let h8=(()=>{class r extends on{constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,s={};if(this.watchKeys={},this.pressedKeys=[],!1!==e){for(let l in r.bindings)s[l]=r.bindings[l];if(Object.keys(e).length)for(let l in e)s[l]=e[l];this.mapBindings(s),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let s in e)r.actions[s]?e[s]&&("object"!=typeof e[s]&&(e[s]=[e[s]]),e[s].forEach(l=>{this.mapBinding(s,l)})):console.warn("Key Binding Error - no such action:",s)}mapBinding(e,s){var l={action:r.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1};s.toString().toLowerCase().split(" ").join("").split("+").forEach(h=>{switch(h){case"ctrl":l.ctrl=!0;break;case"shift":l.shift=!0;break;case"meta":l.meta=!0;break;default:h=parseInt(h),l.keys.push(h),this.watchKeys[h]||(this.watchKeys[h]=[]),this.watchKeys[h].push(l)}})}bindEvents(){var e=this;this.keyupBinding=function(s){var l=s.keyCode,u=e.watchKeys[l];u&&(e.pressedKeys.push(l),u.forEach(function(h){e.checkBinding(s,h)}))},this.keydownBinding=function(s){var l=s.keyCode;if(e.watchKeys[l]){var h=e.pressedKeys.indexOf(l);h>-1&&e.pressedKeys.splice(h,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,s){var l=!0;return e.ctrlKey==s.ctrl&&e.shiftKey==s.shift&&e.metaKey==s.meta&&(s.keys.forEach(u=>{-1==this.pressedKeys.indexOf(u)&&(l=!1)}),l&&s.action.call(this,e),!0)}}return r.moduleName="keybindings",r.bindings=u8,r.actions=c8,r})(),d8=(()=>{class r extends on{constructor(e){super(e),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(e){(e.column.definition.contextMenu||e.column.definition.clickMenu)&&this.initializeCell(e)}initializeColumn(e){var s=e.definition;(s.headerContextMenu||s.headerClickMenu||s.headerMenu)&&this.initializeColumnHeader(e)}initializeColumnHeader(e){var s;e.definition.headerContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.definition.headerContextMenu)),this.tapHold(e,e.definition.headerContextMenu)),e.definition.headerMenu&&((s=document.createElement("span")).classList.add("tabulator-header-menu-button"),s.innerHTML="&vellip;",s.addEventListener("click",l=>{l.stopPropagation(),l.preventDefault(),this.LoadMenuEvent(e,e.definition.headerMenu,l)}),e.titleElement.insertBefore(s,e.titleElement.firstChild))}LoadMenuEvent(e,s,l){s="function"==typeof s?s.call(this.table,e.getComponent(),l):s,this.loadMenu(l,e,s)}tapHold(e,s){var l=e.getElement(),u=null,h=!1;l.addEventListener("touchstart",p=>{clearTimeout(u),h=!1,u=setTimeout(()=>{clearTimeout(u),u=null,h=!0,this.LoadMenuEvent(e,s,p)},1e3)},{passive:!0}),l.addEventListener("touchend",p=>{clearTimeout(u),u=null,h&&p.preventDefault()})}initializeCell(e){e.column.definition.contextMenu&&(e.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.column.definition.contextMenu)),this.tapHold(e,e.column.definition.contextMenu)),e.column.definition.clickMenu&&e.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,e,e.column.definition.clickMenu))}initializeRow(e){this.table.options.rowContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.rowContextMenu)),this.tapHold(e,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.rowClickMenu))}initializeGroup(e){this.table.options.groupContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.groupContextMenu)),this.tapHold(e,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.groupClickMenu))}loadMenu(e,s,l,u){var h=!(e instanceof MouseEvent),p=document.createElement("div");if(p.classList.add("tabulator-menu"),h||e.preventDefault(),l&&l.length){if(!u){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}l.forEach(m=>{var v=document.createElement("div"),T=m.label,I=m.disabled;m.separator?v.classList.add("tabulator-menu-separator"):(v.classList.add("tabulator-menu-item"),"function"==typeof T&&(T=T.call(this.table,s.getComponent())),T instanceof Node?v.appendChild(T):v.innerHTML=T,"function"==typeof I&&(I=I.call(this.table,s.getComponent())),I?(v.classList.add("tabulator-menu-item-disabled"),v.addEventListener("click",O=>{O.stopPropagation()})):m.menu&&m.menu.length?v.addEventListener("click",O=>{O.stopPropagation(),this.hideOldSubMenus(p),this.loadMenu(O,s,m.menu,v)}):m.action&&v.addEventListener("click",O=>{m.action(O,s.getComponent())}),m.menu&&m.menu.length&&v.classList.add("tabulator-menu-item-submenu")),p.appendChild(v)}),p.addEventListener("click",m=>{this.hideMenu()}),this.menuElements.push(p),this.positionMenu(p,u,h,e)}}hideOldSubMenus(e){var s=this.menuElements.indexOf(e);if(s>-1)for(let u=this.menuElements.length-1;u>s;u--){var l=this.menuElements[u];l.parentNode&&l.parentNode.removeChild(l),this.menuElements.pop()}}positionMenu(e,s,l,u){var p,m,v,h=Math.max(document.body.offsetHeight,window.innerHeight);s?(p=(v=Jn.elOffset(s)).left+s.offsetWidth,m=v.top-1):(p=l?u.touches[0].pageX:u.pageX,m=l?u.touches[0].pageY:u.pageY,this.positionReversedX=!1),e.style.top=m+"px",e.style.left=p+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(e),m+e.offsetHeight>=h&&(e.style.top="",e.style.bottom=s?h-v.top-s.offsetHeight-1+"px":h-m+"px"),(p+e.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(e.style.left="",e.style.right=s?document.documentElement.offsetWidth-v.left+"px":document.documentElement.offsetWidth-p+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(e){27==e.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return r.moduleName="menu",r})(),p8=(()=>{class r extends on{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){var u,s=this,l={};e.modules.frozen||(u=e.getElement(),l.mousemove=function(h){e.parent===s.moving.parent&&((s.touchMove?h.touches[0].pageX:h.pageX)-Jn.elOffset(u).left+s.table.columnManager.element.scrollLeft>e.getWidth()/2?(s.toCol!==e||!s.toColAfter)&&(u.parentNode.insertBefore(s.placeholderElement,u.nextSibling),s.moveColumn(e,!0)):(s.toCol!==e||s.toColAfter)&&(u.parentNode.insertBefore(s.placeholderElement,u),s.moveColumn(e,!1)))}.bind(s),u.addEventListener("mousedown",function(h){s.touchMove=!1,1===h.which&&(s.checkTimeout=setTimeout(function(){s.startMove(h,e)},s.checkPeriod))}),u.addEventListener("mouseup",function(h){1===h.which&&s.checkTimeout&&clearTimeout(s.checkTimeout)}),s.bindTouchEvents(e)),e.modules.moveColumn=l}bindTouchEvents(e){var u,h,p,m,v,T,s=e.getElement(),l=!1;s.addEventListener("touchstart",I=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,u=e.nextColumn(),p=u?u.getWidth()/2:0,h=e.prevColumn(),m=h?h.getWidth()/2:0,v=0,T=0,l=!1,this.startMove(I,e)},this.checkPeriod)},{passive:!0}),s.addEventListener("touchmove",I=>{var O,N;this.moving&&(this.moveHover(I),l||(l=I.touches[0].pageX),(O=I.touches[0].pageX-l)>0?u&&O-v>p&&(N=u)!==e&&(l=I.touches[0].pageX,N.getElement().parentNode.insertBefore(this.placeholderElement,N.getElement().nextSibling),this.moveColumn(N,!0)):h&&-O-T>m&&(N=h)!==e&&(l=I.touches[0].pageX,N.getElement().parentNode.insertBefore(this.placeholderElement,N.getElement()),this.moveColumn(N,!1)),N&&(u=N.nextColumn(),v=p,p=u?u.getWidth()/2:0,h=N.prevColumn(),T=m,m=h?h.getWidth()/2:0))},{passive:!0}),s.addEventListener("touchend",I=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(I)})}startMove(e,s){var l=s.getElement(),u=this.table.columnManager.getElement(),h=this.table.columnManager.getHeadersElement();this.moving=s,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-Jn.elOffset(l).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=s.getWidth()+"px",this.placeholderElement.style.height=s.getHeight()+"px",l.parentNode.insertBefore(this.placeholderElement,l),l.parentNode.removeChild(l),this.hoverElement=l.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=u.clientHeight-h.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,s){var l=this.moving.getCells();this.toCol=e,this.toColAfter=s,s?e.getCells().forEach(function(u,h){var p=u.getElement(!0);p.parentNode&&l[h]&&p.parentNode.insertBefore(l[h].getElement(),p.nextSibling)}):e.getCells().forEach(function(u,h){var p=u.getElement(!0);p.parentNode&&l[h]&&p.parentNode.insertBefore(l[h].getElement(),p)})}endMove(e){(1===e.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var h,s=this.table.columnManager.getElement(),l=s.scrollLeft,u=(this.touchMove?e.touches[0].pageX:e.pageX)-Jn.elOffset(s).left+l;this.hoverElement.style.left=u-this.startX+"px",u-l<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{h=Math.max(0,l-5),this.table.rowManager.getElement().scrollLeft=h,this.autoScrollTimeout=!1},1))),l+s.clientWidth-u<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{h=Math.min(s.clientWidth,l+5),this.table.rowManager.getElement().scrollLeft=h,this.autoScrollTimeout=!1},1)))}}return r.moduleName="moveColumn",r})();class gg extends on{constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(t){var e=this,s={};s.mouseup=function(l){e.tableRowDrop(l,row)}.bind(e),s.mousemove=function(l){if(l.pageY-Jn.elOffset(t.element).top+e.table.rowManager.element.scrollTop>t.getHeight()/2)e.toRow===t&&e.toRowAfter||((u=t.getElement()).parentNode.insertBefore(e.placeholderElement,u.nextSibling),e.moveRow(t,!0));else if(e.toRow!==t||e.toRowAfter){var u;(u=t.getElement()).previousSibling&&(u.parentNode.insertBefore(e.placeholderElement,u),e.moveRow(t,!1))}}.bind(e),t.modules.moveRow=s}initializeRow(t){var l,e=this,s={};s.mouseup=function(u){e.tableRowDrop(u,t)}.bind(e),s.mousemove=function(u){var h=t.getElement();u.pageY-Jn.elOffset(h).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?(e.toRow!==t||!e.toRowAfter)&&(h.parentNode.insertBefore(e.placeholderElement,h.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(h.parentNode.insertBefore(e.placeholderElement,h),e.moveRow(t,!1))}.bind(e),this.hasHandle||((l=t.getElement()).addEventListener("mousedown",function(u){1===u.which&&(e.checkTimeout=setTimeout(function(){e.startMove(u,t)},e.checkPeriod))}),l.addEventListener("mouseup",function(u){1===u.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t,t.getElement())),t.modules.moveRow=s}initializeColumn(t){t.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(t){if(t.column.definition.rowHandle&&!1!==this.table.options.movableRows){var e=this,s=t.getElement(!0);s.addEventListener("mousedown",function(l){1===l.which&&(e.checkTimeout=setTimeout(function(){e.startMove(l,t.row)},e.checkPeriod))}),s.addEventListener("mouseup",function(l){1===l.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t.row,s)}}bindTouchEvents(t,e){var l,u,h,p,m,v,s=!1;e.addEventListener("touchstart",T=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,l=t.nextRow(),h=l?l.getHeight()/2:0,u=t.prevRow(),p=u?u.getHeight()/2:0,m=0,v=0,s=!1,this.startMove(T,t)},this.checkPeriod)},{passive:!0}),e.addEventListener("touchmove",T=>{var I,O;this.moving&&(T.preventDefault(),this.moveHover(T),s||(s=T.touches[0].pageY),(I=T.touches[0].pageY-s)>0?l&&I-m>h&&(O=l)!==t&&(s=T.touches[0].pageY,O.getElement().parentNode.insertBefore(this.placeholderElement,O.getElement().nextSibling),this.moveRow(O,!0)):u&&-I-v>p&&(O=u)!==t&&(s=T.touches[0].pageY,O.getElement().parentNode.insertBefore(this.placeholderElement,O.getElement()),this.moveRow(O,!1)),O&&(l=O.nextRow(),m=h,h=l?l.getHeight()/2:0,u=O.prevRow(),v=p,p=u?u.getHeight()/2:0))}),e.addEventListener("touchend",T=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(T),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)})}startMove(t,e){var s=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(s.parentNode.insertBefore(this.placeholderElement,s),s.parentNode.removeChild(s)),this.hoverElement=s.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)}setStartPosition(t,e){var u,h,s=this.touchMove?t.touches[0].pageX:t.pageX,l=this.touchMove?t.touches[0].pageY:t.pageY;u=e.getElement(),this.connection?(h=u.getBoundingClientRect(),this.startX=h.left-s+window.pageXOffset,this.startY=h.top-l+window.pageYOffset):this.startY=l-u.getBoundingClientRect().top}endMove(t){(!t||1===t.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(t,e){this.toRow=t,this.toRowAfter=e}moveHover(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)}moveHoverTable(t){var e=this.table.rowManager.getElement(),s=e.scrollTop,l=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+s;this.hoverElement.style.top=l-this.startY+"px"}moveHoverConnections(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"}elementRowDrop(t,e,s){this.dispatchExternal("movableRowsElementDrop",t,e,!!s&&s.getComponent())}connectToTables(t){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",e),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:t})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(s=>{"string"==typeof s?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(s))):this.connectionElements.push(s)}),this.connectionElements.forEach(s=>{var l=u=>{this.elementRowDrop(u,s,this.moving)};s.addEventListener("mouseup",l),s.tabulatorElementDropEvent=l,s.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var t;this.connectionSelectorsTables&&(t=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",t),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(e=>{e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent})}connect(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(s=>{"row"===s.type&&s.modules.moveRow&&s.modules.moveRow.mouseup&&s.getElement().addEventListener("mouseup",s.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",e,t),!0)}disconnect(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(e=>{"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",t)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(t,e,s){var l=!1;if(s){switch(typeof this.table.options.movableRowsSender){case"string":l=this.senders[this.table.options.movableRowsSender];break;case"function":l=this.table.options.movableRowsSender}l?l.call(this,this.moving.getComponent(),e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()}tableRowDrop(t,e){var s=!1,l=!1;switch(t.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":s=this.receivers[this.table.options.movableRowsReceiver];break;case"function":s=this.table.options.movableRowsReceiver}s?l=s.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(l?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:e,success:l})}commsReceived(t,e,s){switch(e){case"connect":return this.connect(t,s.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,s.row,s.success)}}}gg.prototype.receivers={insert:function(r,t,e){return this.table.addRow(r.getData(),void 0,t),!0},add:function(r,t,e){return this.table.addRow(r.getData()),!0},update:function(r,t,e){return!!t&&(t.update(r.getData()),!0)},replace:function(r,t,e){return!!t&&(this.table.addRow(r.getData(),void 0,t),t.delete(),!0)}},gg.prototype.senders={delete:function(r,t,e){r.delete()}},gg.moduleName="moveRow";var f8={};let g8=(()=>{class r extends on{constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,s,l){return this.transformRow(s,"data",l)}initializeColumn(e){var s=!1,l={};this.allowedTypes.forEach(u=>{var p,h="mutator"+(u.charAt(0).toUpperCase()+u.slice(1));e.definition[h]&&(p=this.lookupMutator(e.definition[h]))&&(s=!0,l[h]={mutator:p,params:e.definition[h+"Params"]||{}})}),s&&(e.modules.mutate=l)}lookupMutator(e){var s=!1;switch(typeof e){case"string":r.mutators[e]?s=r.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":s=e}return s}transformRow(e,s,l){var h,u="mutator"+(s.charAt(0).toUpperCase()+s.slice(1));return this.enabled&&this.table.columnManager.traverse(p=>{var m,v,T;p.modules.mutate&&(m=p.modules.mutate[u]||p.modules.mutate.mutator||!1)&&(h=p.getFieldValue(void 0!==l?l:e),("data"==s||void 0!==h)&&(T=p.getComponent(),v="function"==typeof m.params?m.params(h,e,s,T):m.params,p.setFieldValue(e,m.mutator(h,e,s,v,T))))}),e}transformCell(e,s){if(e.column.modules.mutate){var l=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,u={};if(l)return u=Object.assign(u,e.row.getData()),e.column.setFieldValue(u,s),l.mutator(s,u,"edit",l.params,e.getComponent())}return s}enable(){this.enabled=!0}disable(){this.enabled=!1}}return r.moduleName="mutator",r.mutators=f8,r})(),m8=(()=>{class r extends on{constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,s){var h,l=this.table.rowManager,u=l.getDisplayRows();return s?u.length?h=u[0]:l.activeRows.length&&(h=l.activeRows[l.activeRows.length-1],s=!1):u.length&&(h=u[u.length-1],s=!(u.length<this.size)),{index:h,top:s}}calculatePageSizes(){var e,s;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((e=document.createElement("div")).classList.add("tabulator-row"),e.style.visibility="hidden",(s=document.createElement("div")).classList.add("tabulator-cell"),s.innerHTML="Page Row Test",e.appendChild(s),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,s,l,u){return this.initialLoad||(this.progressiveLoad&&!l||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),u.page=this.page,this.size&&(u.size=this.size),u}userSetPageToRow(e){return this.table.options.pagination&&(e=this.rowManager.findRow(e))?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return!!this.table.options.pagination&&(this.setPageSize(e),this.setPage(1))}scrollVertical(e,s){var l;!s&&!this.table.dataLoader.loading&&(l=this.table.rowManager.getElement()).scrollHeight-l.clientHeight-e<(this.table.options.progressiveLoadScrollMargin||2*l.clientHeight)&&this.nextPage()}restOnRenderBefore(e,s){return s||"local"===this.mode&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(e=document.createElement("button")).classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=e=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&e.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){e=[];for(let s=1;s<5;s++)e.push(this.size*s);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(s=>{var l=document.createElement("option");l.value=s,!0===s?this.langBind("pagination|all",function(u){l.innerHTML=u}):l.innerHTML=s,this.pageSizeSelect.appendChild(l)}),this.pageSizeSelect.value=this.size}}initializePaginator(e){var s;e||(this.langBind("pagination|first",l=>{this.firstBut.innerHTML=l}),this.langBind("pagination|first_title",l=>{this.firstBut.setAttribute("aria-label",l),this.firstBut.setAttribute("title",l)}),this.langBind("pagination|prev",l=>{this.prevBut.innerHTML=l}),this.langBind("pagination|prev_title",l=>{this.prevBut.setAttribute("aria-label",l),this.prevBut.setAttribute("title",l)}),this.langBind("pagination|next",l=>{this.nextBut.innerHTML=l}),this.langBind("pagination|next_title",l=>{this.nextBut.setAttribute("aria-label",l),this.nextBut.setAttribute("title",l)}),this.langBind("pagination|last",l=>{this.lastBut.innerHTML=l}),this.langBind("pagination|last_title",l=>{this.lastBut.setAttribute("aria-label",l),this.lastBut.setAttribute("title",l)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(s=document.createElement("label"),this.langBind("pagination|page_size",l=>{this.pageSizeSelect.setAttribute("aria-label",l),this.pageSizeSelect.setAttribute("title",l),s.innerHTML=l}),this.element.appendChild(s),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",l=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!e&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}setMaxRows(e){this.max=e?!0===this.size?1:Math.ceil(e/this.size):1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||("local"==this.mode||e)&&(this.page=1)}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(e=parseInt(e))>0&&e<=this.max||"local"!==this.mode?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var l=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(e);if(l>-1){var u=!0===this.size?1:Math.ceil((l+1)/this.size);return this.setPage(u)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){!0!==e&&(e=parseInt(e)),e>0&&(this.size=e),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let e=Math.floor((this.count-1)/2),s=Math.ceil((this.count-1)/2),l=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),u=this.page<=s?Math.min(this.count,this.max):Math.min(this.page+s,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let h=l;h<=u;h++)h>0&&h<=this.max&&this.pagesElement.appendChild(this._generatePageButton(h));this.footerRedraw()}_generatePageButton(e){var s=document.createElement("button");return s.classList.add("tabulator-page"),e==this.page&&s.classList.add("active"),s.setAttribute("type","button"),s.setAttribute("role","button"),this.langBind("pagination|page_title",l=>{s.setAttribute("aria-label",l+" "+e),s.setAttribute("title",l+" "+e)}),s.setAttribute("data-page",e),s.textContent=e,s.addEventListener("click",l=>{this.setPage(e)}),s}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var s,l,u;if("local"==this.mode){s=[],this.setMaxRows(e.length),!0===this.size?(l=0,u=e.length):u=(l=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let h=l;h<u;h++)e[h]&&s.push(e[h]);return s}return this._setPageButtons(),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){if(void 0===e.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),e.data){if(this.max=parseInt(e.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(e.data,!1,1==this.page):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.element;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return r.moduleName="page",r})();var _8={local:function(r,t){var e=localStorage.getItem(r+"-"+t);return!!e&&JSON.parse(e)},cookie:function(r,t){var u,h,e=document.cookie,s=r+"-"+t,l=e.indexOf(s+"=");return l>-1&&((u=(e=e.substr(l)).indexOf(";"))>-1&&(e=e.substr(0,u)),h=e.replace(s+"=","")),!!h&&JSON.parse(h)}},v8={local:function(r,t,e){localStorage.setItem(r+"-"+t,JSON.stringify(e))},cookie:function(r,t,e){var s=new Date;s.setDate(s.getDate()+1e4),document.cookie=r+"-"+t+"="+JSON.stringify(e)+"; expires="+s.toUTCString()}};let y8=(()=>{class r extends on{constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(s){return!1}}initialize(){if(this.table.options.persistence){var l,e=this.table.options.persistenceMode,s=this.table.options.persistenceID;this.mode=!0!==e?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:r.readers[this.table.options.persistenceReaderFunc]?this.readFunc=r.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):r.readers[this.mode]?this.readFunc=r.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:r.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=r.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):r.writers[this.mode]?this.writeFunc=r.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(s||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(l=this.retreiveData("page"))&&(void 0!==l.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=l.paginationSize),void 0!==l.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=l.paginationInitialPage)),this.config.group&&(l=this.retreiveData("group"))&&(void 0!==l.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=l.groupBy),void 0!==l.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=l.groupStartOpen),void 0!==l.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=l.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var s,l;this.config.sort&&(s=this.load("sort"))&&(this.table.initialSort=s),this.config.filter&&(l=this.load("filter"))&&(this.table.initialFilter=l)}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e)),!0}initializeColumn(e){var s;this.config.columns&&(this.defWatcherBlock=!0,s=e.getDefinition(),(!0===this.config.columns?Object.keys(s):this.config.columns).forEach(u=>{var h=Object.getOwnPropertyDescriptor(s,u),p=s[u];h&&Object.defineProperty(s,u,{set:function(m){p=m,this.defWatcherBlock||this.save("columns"),h.set&&h.set(m)},get:function(){return h.get&&h.get(),p}})}),this.defWatcherBlock=!1)}load(e,s){var l=this.retreiveData(e);return s&&(l=l?this.mergeDefinition(s,l):s),l}retreiveData(e){return!!this.readFunc&&this.readFunc(this.id,e)}mergeDefinition(e,s){var l=[];return(s=s||[]).forEach((u,h)=>{var m,p=this._findColumn(e,u);p&&(!0===this.config.columns||null==this.config.columns?(m=Object.keys(p)).push("width"):m=this.config.columns,m.forEach(v=>{"columns"!==v&&void 0!==u[v]&&(p[v]=u[v])}),p.columns&&(p.columns=this.mergeDefinition(p.columns,u.columns)),l.push(p))}),e.forEach((u,h)=>{this._findColumn(s,u)||(l.length>h?l.splice(h,0,u):l.push(u))}),l}_findColumn(e,s){var l=s.columns?"group":s.field?"field":"object";return e.find(function(u){switch(l){case"group":return u.title===s.title&&u.columns.length===s.columns.length;case"field":return u.field===s.field;case"object":return u===s}})}save(e){var s={};switch(e){case"columns":s=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":s=this.table.modules.filter.getFilters();break;case"sort":s=this.validateSorters(this.table.modules.sort.getSort());break;case"group":s=this.getGroupConfig();break;case"page":s=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,e,s)}validateSorters(e){return e.forEach(function(s){s.column=s.field,delete s.field}),e}getGroupConfig(){var e={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var s=[],l=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(u=>{var m,h={},p=u.getDefinition();u.isGroup?(h.title=p.title,h.columns=this.parseColumns(u.getColumns())):(h.field=u.getField(),!0===this.config.columns||null==this.config.columns?(m=Object.keys(p)).push("width"):m=this.config.columns,m.forEach(v=>{switch(v){case"width":h.width=u.getWidth();break;case"visible":h.visible=u.visible;break;default:"function"!=typeof p[v]&&-1===l.indexOf(v)&&(h[v]=p[v])}})),s.push(h)}),s}}return r.moduleName="persistence",r.readers=_8,r.writers=v8,r})(),b8=(()=>{class r extends on{constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,s,l){var T,I,u=window.scrollX,h=window.scrollY,p=document.createElement("div"),m=document.createElement("div"),v=this.table.modules.export.genereateTable(void 0!==l?l:this.table.options.printConfig,void 0!==s?s:this.table.options.printStyled,e||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(p.classList.add("tabulator-print-header"),"string"==typeof(T="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?p.innerHTML=T:p.appendChild(T),this.element.appendChild(p)),this.element.appendChild(v),this.table.options.printFooter&&(m.classList.add("tabulator-print-footer"),"string"==typeof(I="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?m.innerHTML=I:m.appendChild(I),this.element.appendChild(m)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,v),window.print(),this.cleanup(),window.scrollTo(u,h),this.manualBlock=!1}}return r.moduleName="print",r})(),E8=(()=>{class r extends on{constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var l,s=this;this.currentVersion++,l=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var u=Array.from(arguments);return!s.blocked&&l===s.currentVersion&&u.forEach(h=>{s.table.rowManager.addRowActual(h,!1)}),s.origFuncs.push.apply(e,arguments)}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var u=Array.from(arguments);return!s.blocked&&l===s.currentVersion&&u.forEach(h=>{s.table.rowManager.addRowActual(h,!0)}),s.origFuncs.unshift.apply(e,arguments)}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var u;return!s.blocked&&l===s.currentVersion&&s.data.length&&(u=s.table.rowManager.getRowFromDataObject(s.data[0]))&&u.deleteActual(),s.origFuncs.shift.call(e)}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var u;return!s.blocked&&l===s.currentVersion&&s.data.length&&(u=s.table.rowManager.getRowFromDataObject(s.data[s.data.length-1]))&&u.deleteActual(),s.origFuncs.pop.call(e)}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var v,u=Array.from(arguments),h=u[0]<0?e.length+u[0]:u[0],p=u[1],m=!!u[2]&&u.slice(2);if(!s.blocked&&l===s.currentVersion){if(m&&((v=!!e[h]&&s.table.rowManager.getRowFromDataObject(e[h]))?m.forEach(I=>{s.table.rowManager.addRowActual(I,!0,v,!0)}):(m=m.slice().reverse()).forEach(I=>{s.table.rowManager.addRowActual(I,!0,!1,!0)})),0!==p){var T=e.slice(h,void 0===u[1]?u[1]:h+p);T.forEach((I,O)=>{var N=s.table.rowManager.getRowFromDataObject(I);N&&N.deleteActual(O!==T.length-1)})}(m||0!==p)&&s.table.rowManager.reRenderInPosition()}return s.origFuncs.splice.apply(e,arguments)}})}unwatchData(){if(!1!==this.data)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var s=e.getData();for(var l in this.blocked=!0,s)this.watchKey(e,s,l);this.table.options.dataTree&&this.watchTreeChildren(e),this.blocked=!1}watchTreeChildren(e){var s=e.getData()[this.table.options.dataTreeChildField],l={};function u(){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}s&&(l.push=s.push,Object.defineProperty(s,"push",{enumerable:!1,configurable:!0,value:()=>{var h=l.push.apply(s,arguments);return u(),h}}),l.unshift=s.unshift,Object.defineProperty(s,"unshift",{enumerable:!1,configurable:!0,value:()=>{var h=l.unshift.apply(s,arguments);return u(),h}}),l.shift=s.shift,Object.defineProperty(s,"shift",{enumerable:!1,configurable:!0,value:()=>{var h=l.shift.call(s);return u(),h}}),l.pop=s.pop,Object.defineProperty(s,"pop",{enumerable:!1,configurable:!0,value:()=>{var h=l.pop.call(s);return u(),h}}),l.splice=s.splice,Object.defineProperty(s,"splice",{enumerable:!1,configurable:!0,value:()=>{var h=l.splice.apply(s,arguments);return u(),h}}))}watchKey(e,s,l){var u=Object.getOwnPropertyDescriptor(s,l),h=s[l],p=this.currentVersion;Object.defineProperty(s,l,{set:m=>{if(h=m,!this.blocked&&p===this.currentVersion){var v={};v[l]=m,e.updateData(v)}u.set&&u.set(m)},get:()=>(u.get&&u.get(),h)})}unwatchRow(e){var s=e.getData();for(var l in s)Object.defineProperty(s,l,{value:s[l]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return r.moduleName="reactiveData",r})(),T8=(()=>{class r extends on{constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(e){"row"===e.row.type&&this.initializeColumn("cell",e.column,e.element)}layoutColumnHeader(e){this.initializeColumn("header",e,e.element)}initializeColumn(e,s,l){var u=this,p=s.definition.resizable;if("header"===e&&(s.modules.resize={variableHeight:"textarea"==s.definition.formatter||s.definition.variableHeight}),!0===p||p==e){var m=document.createElement("div");m.className="tabulator-col-resize-handle";var v=document.createElement("div");v.className="tabulator-col-resize-handle prev",m.addEventListener("click",function(O){O.stopPropagation()});var T=function(O){var N=s.getLastColumn();N&&u._checkResizability(N)&&(u.startColumn=s,u._mouseDown(O,N,m))};m.addEventListener("mousedown",T),m.addEventListener("touchstart",T,{passive:!0}),m.addEventListener("dblclick",function(O){var N=s.getLastColumn();N&&u._checkResizability(N)&&(O.stopPropagation(),N.reinitializeWidth(!0))}),v.addEventListener("click",function(O){O.stopPropagation()});var I=function(O){var N,V,Q;(N=s.getFirstColumn())&&(Q=(V=u.table.columnManager.findColumnIndex(N))>0&&u.table.columnManager.getColumnByIndex(V-1))&&u._checkResizability(Q)&&(u.startColumn=s,u._mouseDown(O,Q,v))};v.addEventListener("mousedown",I),v.addEventListener("touchstart",I,{passive:!0}),v.addEventListener("dblclick",function(O){var N,V,Q;(N=s.getFirstColumn())&&(Q=(V=u.table.columnManager.findColumnIndex(N))>0&&u.table.columnManager.getColumnByIndex(V-1))&&u._checkResizability(Q)&&(O.stopPropagation(),Q.reinitializeWidth(!0))}),l.appendChild(m),l.appendChild(v)}}_checkResizability(e){return e.definition.resizable}_mouseDown(e,s,l){var u=this;function h(m){s.setWidth(u.table.rtl?u.startWidth-((void 0===m.screenX?m.touches[0].screenX:m.screenX)-u.startX):u.startWidth+((void 0===m.screenX?m.touches[0].screenX:m.screenX)-u.startX)),u.table.columnManager.renderer.rerenderColumns(!0),!u.table.browserSlow&&s.modules.resize&&s.modules.resize.variableHeight&&s.checkCellHeights()}function p(m){u.startColumn.modules.edit&&(u.startColumn.modules.edit.blocked=!1),u.table.browserSlow&&s.modules.resize&&s.modules.resize.variableHeight&&s.checkCellHeights(),document.body.removeEventListener("mouseup",p),document.body.removeEventListener("mousemove",h),l.removeEventListener("touchmove",h),l.removeEventListener("touchend",p),u.table.element.classList.remove("tabulator-block-select"),u.dispatch("column-resized",s),u.table.externalEvents.dispatch("columnResized",s.getComponent())}u.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),u.startColumn.modules.edit&&(u.startColumn.modules.edit.blocked=!0),u.startX=void 0===e.screenX?e.touches[0].screenX:e.screenX,u.startWidth=s.getWidth(),document.body.addEventListener("mousemove",h),document.body.addEventListener("mouseup",p),l.addEventListener("touchmove",h,{passive:!0}),l.addEventListener("touchend",p)}}return r.moduleName="resizeColumns",r})(),C8=(()=>{class r extends on{constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var s=this,l=e.getElement(),u=document.createElement("div");u.className="tabulator-row-resize-handle";var h=document.createElement("div");h.className="tabulator-row-resize-handle prev",u.addEventListener("click",function(v){v.stopPropagation()});var p=function(v){s.startRow=e,s._mouseDown(v,e,u)};u.addEventListener("mousedown",p),u.addEventListener("touchstart",p,{passive:!0}),h.addEventListener("click",function(v){v.stopPropagation()});var m=function(v){var T=s.table.rowManager.prevDisplayRow(e);T&&(s.startRow=T,s._mouseDown(v,T,h))};h.addEventListener("mousedown",m),h.addEventListener("touchstart",m,{passive:!0}),l.appendChild(u),l.appendChild(h)}_mouseDown(e,s,l){var u=this;function h(m){s.setHeight(u.startHeight+((void 0===m.screenY?m.touches[0].screenY:m.screenY)-u.startY))}function p(m){document.body.removeEventListener("mouseup",h),document.body.removeEventListener("mousemove",h),l.removeEventListener("touchmove",h),l.removeEventListener("touchend",p),u.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",s.getComponent())}u.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),u.startY=void 0===e.screenY?e.touches[0].screenY:e.screenY,u.startHeight=s.getHeight(),document.body.addEventListener("mousemove",h),document.body.addEventListener("mouseup",p),l.addEventListener("touchmove",h,{passive:!0}),l.addEventListener("touchend",p)}}return r.moduleName="resizeRows",r})(),S8=(()=>{class r extends on{constructor(e){super(e),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var s,e=this.table;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===e.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(l=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var u=Math.floor(l[0].contentRect.height),h=Math.floor(l[0].contentRect.width);(this.tableHeight!=u||this.tableWidth!=h)&&(this.tableHeight=u,this.tableWidth=h,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),e.redraw())}}),this.observer.observe(e.element),s=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(s.getPropertyValue("max-height")||s.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(l=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var u=Math.floor(l[0].contentRect.height),h=Math.floor(l[0].contentRect.width);(this.containerHeight!=u||this.containerWidth!=h)&&(this.containerHeight=u,this.containerWidth=h,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),e.columnManager.renderer.rerenderColumns(!0),e.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell)&&(e.columnManager.renderer.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return r.moduleName="resizeTable",r})(),w8=(()=>{class r extends on{constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(s,l){s.modules.responsive&&s.modules.responsive.order&&s.modules.responsive.visible&&(s.modules.responsive.index=l,e.push(s),!s.visible&&"collapse"===self.mode&&self.hiddenColumns.push(s))}),e=(e=e.reverse()).sort(function(s,l){return l.modules.responsive.order-s.modules.responsive.order||l.modules.responsive.index-s.modules.responsive.index}),this.columns=e,"collapse"===this.mode&&this.generateCollapsedContent();for(let s of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==s.definition.formatter){this.collapseHandleColumn=s;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var s=e.getDefinition();e.modules.responsive={order:void 0===s.responsive?1:s.responsive,visible:!1!==s.visible}}initializeRow(e){var s;"calc"!==e.type&&((s=document.createElement("div")).classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:s,open:this.collapseStartOpen},this.collapseStartOpen||(s.style.display="none"))}layoutRow(e){var s=e.getElement();e.modules.responsiveLayout&&(s.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,s){!s&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initialize())}hideColumn(e){var s=this.hiddenColumns.length;e.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!s&&this.collapseHandleColumn.show())}showColumn(e){var s;e.show(!1,!0),e.setWidth(e.getWidth()),"collapse"===this.mode&&((s=this.hiddenColumns.indexOf(e))>-1&&this.hiddenColumns.splice(s,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=this,s=!0;s;){let l="fitColumns"==e.table.modules.layout.getMode()?e.table.columnManager.getFlexBaseWidth():e.table.columnManager.getWidth(),u=(e.table.options.headerVisible?e.table.columnManager.element.clientWidth:e.table.element.clientWidth)-l;if(u<0){let h=e.columns[e.index];h?(e.hideColumn(h),e.index++):s=!1}else{let h=e.columns[e.index-1];h&&u>0&&u>=h.getWidth()?(e.showColumn(h),e.index--):s=!1}e.table.rowManager.activeRowsCount||e.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this;this.table.rowManager.getDisplayRows().forEach(function(l){e.generateCollapsedRowContent(l)})}generateCollapsedRowContent(e){var s,l;if(e.modules.responsiveLayout){for(s=e.modules.responsiveLayout.element;s.firstChild;)s.removeChild(s.firstChild);(l=this.collapseFormatter(this.generateCollapsedRowData(e)))&&s.appendChild(l)}}generateCollapsedRowData(e){var h,s=this,l=e.getData(),u=[];return this.hiddenColumns.forEach(function(p){var m=p.getFieldValue(l);p.definition.title&&p.field&&(p.modules.format&&s.table.options.responsiveLayoutCollapseUseFormatters?(h={value:!1,data:{},getValue:function(){return m},getData:function(){return l},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return p.getComponent()}},u.push({field:p.field,title:p.definition.title,value:p.modules.format.formatter.call(s.table.modules.format,h,p.modules.format.params,function(T){T()})})):u.push({field:p.field,title:p.definition.title,value:m}))}),u}formatCollapsedData(e){var s=document.createElement("table");return e.forEach(function(l){var m,u=document.createElement("tr"),h=document.createElement("td"),p=document.createElement("td"),v=document.createElement("strong");h.appendChild(v),this.langBind("columns|"+l.field,function(T){v.innerText=T||l.title}),l.value instanceof Node?((m=document.createElement("div")).appendChild(l.value),p.appendChild(m)):p.innerHTML=l.value,u.appendChild(h),u.appendChild(p),s.appendChild(u)},this),Object.keys(e).length?s:""}}return r.moduleName="responsiveLayout",r})();function lE(r,t,e,s,l,u,h){var p=window.DateTime||luxon.DateTime,m=h.format||"dd/MM/yyyy HH:mm:ss",v=h.alignEmptyValues,T=0;if(void 0!==p){if(r=p.fromFormat(r,m),t=p.fromFormat(t,m),r.isValid){if(t.isValid)return r-t;T=1}else T=t.isValid?-1:0;return("top"===v&&"desc"===u||"bottom"===v&&"asc"===u)&&(T*=-1),T}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var L8={number:function(r,t,e,s,l,u,h){var p=h.alignEmptyValues,m=h.decimalSeparator,v=h.thousandSeparator,T=0;if(r=String(r),t=String(t),v&&(r=r.split(v).join(""),t=t.split(v).join("")),m&&(r=r.split(m).join("."),t=t.split(m).join(".")),r=parseFloat(r),t=parseFloat(t),isNaN(r))T=isNaN(t)?0:-1;else{if(!isNaN(t))return r-t;T=1}return("top"===p&&"desc"===u||"bottom"===p&&"asc"===u)&&(T*=-1),T},string:function(r,t,e,s,l,u,h){var v,p=h.alignEmptyValues,m=0;if(r){if(t){switch(typeof h.locale){case"boolean":h.locale&&(v=this.langLocale());break;case"string":v=h.locale}return String(r).toLowerCase().localeCompare(String(t).toLowerCase(),v)}m=1}else m=t?-1:0;return("top"===p&&"desc"===u||"bottom"===p&&"asc"===u)&&(m*=-1),m},date:function(r,t,e,s,l,u,h){return h.format||(h.format="dd/MM/yyyy"),lE.call(this,r,t,e,s,l,u,h)},time:function(r,t,e,s,l,u,h){return h.format||(h.format="HH:mm"),lE.call(this,r,t,e,s,l,u,h)},datetime:lE,boolean:function(r,t,e,s,l,u,h){return(!0===r||"true"===r||"True"===r||1===r?1:0)-(!0===t||"true"===t||"True"===t||1===t?1:0)},array:function(r,t,e,s,l,u,h){var v=h.type||"length",T=h.alignEmptyValues,I=0;function O(N){switch(v){case"length":return N.length;case"sum":return N.reduce(function(V,Q){return V+Q});case"max":return Math.max.apply(null,N);case"min":return Math.min.apply(null,N);case"avg":return N.reduce(function(V,Q){return V+Q})/N.length}}if(Array.isArray(r)){if(Array.isArray(t))return(r?O(r):0)-(t?O(t):0);T=1}else T=Array.isArray(t)?-1:0;return("top"===T&&"desc"===u||"bottom"===T&&"asc"===u)&&(I*=-1),I},exists:function(r,t,e,s,l,u,h){return(void 0===r?0:1)-(void 0===t?0:1)},alphanum:function(r,t,e,s,l,u,h){var p,m,v,T,O,I=0,N=/(\d+)|(\D+)/g,V=/\d/,Q=h.alignEmptyValues,X=0;if(r||0===r){if(t||0===t){if(isFinite(r)&&isFinite(t))return r-t;if((p=String(r).toLowerCase())===(m=String(t).toLowerCase()))return 0;if(!V.test(p)||!V.test(m))return p>m?1:-1;for(p=p.match(N),m=m.match(N),O=p.length>m.length?m.length:p.length;I<O;)if((v=p[I])!==(T=m[I++]))return isFinite(v)&&isFinite(T)?("0"===v.charAt(0)&&(v="."+v),"0"===T.charAt(0)&&(T="."+T),v-T):v>T?1:-1;return p.length>m.length}X=1}else X=t||0===t?-1:0;return("top"===Q&&"desc"===u||"bottom"===Q&&"asc"===u)&&(X*=-1),X}},F8={integer:function(r,t,e){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&Math.floor(t)===t},float:function(r,t,e){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&t%1!=0},numeric:function(r,t,e){return""===t||null==t||!isNaN(t)},string:function(r,t,e){return""===t||null==t||isNaN(t)},max:function(r,t,e){return""===t||null==t||parseFloat(t)<=e},min:function(r,t,e){return""===t||null==t||parseFloat(t)>=e},starts:function(r,t,e){return""===t||null==t||String(t).toLowerCase().startsWith(String(e).toLowerCase())},ends:function(r,t,e){return""===t||null==t||String(t).toLowerCase().endsWith(String(e).toLowerCase())},minLength:function(r,t,e){return""===t||null==t||String(t).length>=e},maxLength:function(r,t,e){return""===t||null==t||String(t).length<=e},in:function(r,t,e){return""===t||null==t||("string"==typeof e&&(e=e.split("|")),""===t||e.indexOf(t)>-1)},regex:function(r,t,e){return""===t||null==t||new RegExp(e).test(t)},unique:function(r,t,e){if(""===t||null==t)return!0;var s=!0,l=r.getData(),u=r.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(h){var p=h.getData();p!==l&&t==u.getFieldValue(p)&&(s=!1)}),s},required:function(r,t,e){return""!==t&&null!=t}},B8=Object.freeze({__proto__:null,AccessorModule:J3,AjaxModule:nj,ClipboardModule:oj,ColumnCalcsModule:uj,DataTreeModule:cj,DownloadModule:_j,EditModule:Dj,ExportModule:Aj,FilterModule:Mj,FormatModule:qj,FrozenColumnsModule:e8,FrozenRowsModule:t8,GroupRowsModule:i8,HistoryModule:s8,HtmlTableImportModule:a8,InteractionModule:l8,KeybindingsModule:h8,MenuModule:d8,MoveColumnsModule:p8,MoveRowsModule:gg,MutatorModule:g8,PageModule:m8,PersistenceModule:y8,PrintModule:b8,ReactiveDataModule:E8,ResizeColumnsModule:T8,ResizeRowsModule:C8,ResizeTableModule:S8,ResponsiveLayoutModule:w8,SelectRowModule:(()=>{class r extends on{constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(s,l){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(e,s){return"selected"===e?this.selectedRows:s}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==e&&this._rowSelectionChanged()}initializeRow(e){var s=this,l=e.getElement(),u=function(){setTimeout(function(){s.selecting=!1},50),document.body.removeEventListener("mouseup",u)};e.modules.select={selected:!1},s.table.options.selectableCheck.call(this.table,e.getComponent())?(l.classList.add("tabulator-selectable"),l.classList.remove("tabulator-unselectable"),s.table.options.selectable&&"highlight"!=s.table.options.selectable&&("click"===s.table.options.selectableRangeMode?l.addEventListener("click",function(h){if(h.shiftKey){s.table._clearSelection(),s.lastClickedRow=s.lastClickedRow||e;var p=s.table.rowManager.getDisplayRowIndex(s.lastClickedRow),m=s.table.rowManager.getDisplayRowIndex(e),v=p<=m?p:m,T=p>=m?p:m,O=s.table.rowManager.getDisplayRows().slice(0).splice(v,T-v+1);h.ctrlKey||h.metaKey?(O.forEach(function(N){N!==s.lastClickedRow&&(!0===s.table.options.selectable||s.isRowSelected(e)||s.selectedRows.length<s.table.options.selectable)&&s.toggleRow(N)}),s.lastClickedRow=e):(s.deselectRows(void 0,!0),!0!==s.table.options.selectable&&O.length>s.table.options.selectable&&(O=O.slice(0,s.table.options.selectable)),s.selectRows(O)),s.table._clearSelection()}else h.ctrlKey||h.metaKey?(s.toggleRow(e),s.lastClickedRow=e):(s.deselectRows(void 0,!0),s.selectRows(e),s.lastClickedRow=e)}):(l.addEventListener("click",function(h){(!s.table.modExists("edit")||!s.table.modules.edit.getCurrentCell())&&s.table._clearSelection(),s.selecting||s.toggleRow(e)}),l.addEventListener("mousedown",function(h){if(h.shiftKey)return s.table._clearSelection(),s.selecting=!0,s.selectPrev=[],document.body.addEventListener("mouseup",u),document.body.addEventListener("keyup",u),s.toggleRow(e),!1}),l.addEventListener("mouseenter",function(h){s.selecting&&(s.table._clearSelection(),s.toggleRow(e),s.selectPrev[1]==e&&s.toggleRow(s.selectPrev[0]))}),l.addEventListener("mouseout",function(h){s.selecting&&(s.table._clearSelection(),s.selectPrev.unshift(e))})))):(l.classList.add("tabulator-unselectable"),l.classList.remove("tabulator-selectable"))}toggleRow(e){this.table.options.selectableCheck.call(this.table,e.getComponent())&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var s;switch(typeof e){case"undefined":this.table.rowManager.rows.forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged();break;case"string":(s=this.table.rowManager.findRow(e))?this._selectRow(s,!0,!0):this.table.rowManager.getRows(e).forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(e)?(e.forEach(l=>{this._selectRow(l,!0,!0)}),this._rowSelectionChanged()):this._selectRow(e,!1,!0)}}_selectRow(e,s,l){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!l&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var u=this.table.rowManager.findRow(e);u?-1==this.selectedRows.indexOf(u)&&(u.getElement().classList.add("tabulator-selected"),u.modules.select||(u.modules.select={}),u.modules.select.selected=!0,u.modules.select.checkboxEl&&(u.modules.select.checkboxEl.checked=!0),this.selectedRows.push(u),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(u,!0),s||this.dispatchExternal("rowSelected",u.getComponent()),this._rowSelectionChanged(s)):s||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return-1!==this.selectedRows.indexOf(e)}deselectRows(e,s){var u,l=this;if(void 0===e){u=l.selectedRows.length;for(let h=0;h<u;h++)l._deselectRow(l.selectedRows[0],!0);l._rowSelectionChanged(s)}else Array.isArray(e)?(e.forEach(function(h){l._deselectRow(h,!0)}),l._rowSelectionChanged(s)):l._deselectRow(e,s)}_deselectRow(e,s){var h,l=this,u=l.table.rowManager.findRow(e);u?(h=l.selectedRows.findIndex(function(p){return p==u}))>-1&&(u.getElement().classList.remove("tabulator-selected"),u.modules.select||(u.modules.select={}),u.modules.select.selected=!1,u.modules.select.checkboxEl&&(u.modules.select.checkboxEl.checked=!1),l.selectedRows.splice(h,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(u,!1),s||this.dispatchExternal("rowDeselected",u.getComponent()),l._rowSelectionChanged(s)):s||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(s){e.push(s.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(s){e.push(s.getComponent())}),e}_rowSelectionChanged(e){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(e,s){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=s}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,s){var l=this.table.modules.dataTree.getChildren(e,!0);if(s)for(let u of l)this._selectRow(u,!0);else for(let u of l)this._deselectRow(u,!0)}}return r.moduleName="selectRow",r})(),SortModule:(()=>{class r extends on{constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,s,l,u){var h=this.getSort();return h.forEach(p=>{delete p.column}),u.sort=h,u}userSetSort(e,s){this.setSort(e,s),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var l,u,s=!1;switch(typeof e.definition.sorter){case"string":r.sorters[e.definition.sorter]?s=r.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":s=e.definition.sorter}e.modules.sort={sorter:s,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},!1!==e.definition.headerSort&&((l=e.getElement()).classList.add("tabulator-sortable"),(u=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?u.appendChild(this.table.options.headerSortElement):u.innerHTML=this.table.options.headerSortElement,e.titleHolderElement.appendChild(u),e.modules.sort.element=u,l.addEventListener("click",h=>{var p="",m=[],v=!1;if(e.modules.sort){if(e.modules.sort.tristate)p="none"==e.modules.sort.dir?e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?"asc"==e.modules.sort.dir?"desc":"asc":"none";else switch(e.modules.sort.dir){case"asc":p="desc";break;case"desc":p="asc";break;default:p=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(h.shiftKey||h.ctrlKey)?((v=(m=this.getSort()).findIndex(T=>T.field===e.getField()))>-1?(m[v].dir=p,v!=m.length-1&&(v=m.splice(v,1)[0],"none"!=p&&m.push(v))):"none"!=p&&m.push({column:e,dir:p}),this.setSort(m)):"none"==p?this.clear():this.setSort(e,p),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var s=[];return this.sortList.forEach(function(l){l.column&&s.push({column:l.column.getComponent(),field:l.column.getField(),dir:l.dir})}),s}setSort(e,s){var l=this,u=[];Array.isArray(e)||(e=[{column:e,dir:s}]),e.forEach(function(h){var p;(p=l.table.columnManager.findColumn(h.column))?(h.column=p,u.push(h),l.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",h.column)}),l.sortList=u,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var h,s=this.table.rowManager.activeRows[0],l="string";if(s&&(s=s.getData(),e.getField()))switch(h=e.getFieldValue(s),typeof h){case"undefined":l="string";break;case"boolean":l="boolean";break;default:isNaN(h)||""===h?h.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(l="alphanum"):l="number"}return r.sorters[l]}sort(e){var s=this,l=this.table.options.sortOrderReverse?s.sortList.slice().reverse():s.sortList,u=[],h=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",s.getSort()),s.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(l.forEach(function(p,m){var v=p.column.modules.sort;p.column&&v&&(v.sorter||(v.sorter=s.findSorter(p.column)),p.params="function"==typeof v.params?v.params(p.column.getComponent(),p.dir):v.params,u.push(p)),s.setColumnHeader(p.column,p.dir)}),u.length&&s._sortItems(e,u)):l.forEach(function(p,m){s.setColumnHeader(p.column,p.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(p=>{h.push(p.getComponent())}),this.dispatchExternal("dataSorted",s.getSort(),h)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(e){e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(e,s){e.modules.sort.dir=s,e.getElement().setAttribute("aria-sort",s)}_sortItems(e,s){var l=s.length-1;e.sort((u,h)=>{for(var p,m=l;m>=0;m--){let v=s[m];if(0!==(p=this._sortRow(u,h,v.column,v.dir,v.params)))break}return p})}_sortRow(e,s,l,u,h){var p,m,v="asc"==u?e:s,T="asc"==u?s:e;return e=void 0!==(e=l.getFieldValue(v.getData()))?e:"",s=void 0!==(s=l.getFieldValue(T.getData()))?s:"",p=v.getComponent(),m=T.getComponent(),l.modules.sort.sorter.call(this,e,s,p,m,l.getComponent(),u,h)}}return r.moduleName="sort",r.sorters=L8,r})(),ValidateModule:(()=>{class r extends on{constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(e){return!e.modules.validate||!e.modules.validate.invalid}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var s=[];return e.cells.forEach(function(l){this.cellValidate(l)||s.push(l.getComponent())}),!s.length||s}rowValidate(e){var s=[];return e.cells.forEach(function(l){this.cellValidate(l)||s.push(l.getComponent())}),!s.length||s}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(s=>{this.clearValidation(s._getSelf())})}userValidate(e){var s=[];return this.table.rowManager.rows.forEach(function(l){var u=l.validate();!0!==u&&(s=s.concat(u))}),!s.length||s}initializeColumnCheck(e){void 0!==e.definition.validator&&this.initializeColumn(e)}initializeColumn(e){var u,s=this,l=[];e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(function(h){(u=s._extractValidator(h))&&l.push(u)}):(u=this._extractValidator(e.definition.validator))&&l.push(u),e.modules.validate=!!l.length&&l)}_extractValidator(e){var s,l,u;switch(typeof e){case"string":return(u=e.indexOf(":"))>-1?(s=e.substring(0,u),l=e.substring(u+1)):s=e,this._buildValidator(s,l);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,s){var l="function"==typeof e?e:r.validators[e];return l?{type:"function"==typeof e?"function":e,func:l,params:s}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,s,l){var u=this,h=[],p=this.invalidCells.indexOf(s);return e&&e.forEach(function(m){m.func.call(u,s.getComponent(),l,m.params)||h.push({type:m.type,parameters:m.params})}),h=!h.length||h,s.modules.validate||(s.modules.validate={}),!0===h?(s.modules.validate.invalid=!1,s.getElement().classList.remove("tabulator-validation-fail"),p>-1&&this.invalidCells.splice(p,1)):(s.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&s.getElement().classList.add("tabulator-validation-fail"),-1==p&&this.invalidCells.push(s)),h}getInvalidCells(){var e=[];return this.invalidCells.forEach(s=>{e.push(s.getComponent())}),e}clearValidation(e){var s;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,(s=this.invalidCells.indexOf(e))>-1&&this.invalidCells.splice(s,1))}}return r.moduleName="validate",r.validators=F8,r})()}),V8={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class u0{constructor(t,e){this.table=t,this.msgType=e,this.registeredDefaults={}}register(t,e){this.registeredDefaults[t]=e}generate(t,e={}){var s=Object.assign({},this.registeredDefaults);if(Object.assign(s,t),!1!==e.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var l in e)s.hasOwnProperty(l)||console.warn("Invalid "+this.msgType+" option:",l);for(var l in s)l in e?s[l]=e[l]:Array.isArray(s[l])?s[l]=Object.assign([],s[l]):"object"==typeof s[l]&&null!==s[l]?s[l]=Object.assign({},s[l]):void 0===s[l]&&delete s[l];return s}}class mg extends xo{constructor(t){super(t),this.elementVertical=t.rowManager.element,this.elementHorizontal=t.columnManager.element,this.tableElement=t.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(t){}renderRows(){}renderColumns(){}rerenderRows(t){t&&t()}rerenderColumns(t,e){}renderRowCells(t){}rerenderRowCells(t,e){}scrollColumns(t,e){}scrollRows(t,e){}resize(){}scrollToRow(t){}scrollToRowNearestTop(t){}visibleRows(t){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(t,e){var s=t.getElement();e%2?(s.classList.add("tabulator-row-even"),s.classList.remove("tabulator-row-odd")):(s.classList.add("tabulator-row-odd"),s.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(t){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(t,e,s){var l=this.rows().indexOf(t),u=t.getElement(),h=0;return new Promise((p,m)=>{if(l>-1){if(void 0===s&&(s=this.table.options.scrollToRowIfVisible),!s&&Jn.elVisible(u)&&(h=Jn.elOffset(u).top-Jn.elOffset(this.elementVertical).top)>0&&h<this.elementVertical.clientHeight-u.offsetHeight)return!1;switch(void 0===e&&(e=this.table.options.scrollToRowPosition),"nearest"===e&&(e=this.scrollToRowNearestTop(t)?"top":"bottom"),this.scrollToRow(t),e){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(u.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-u.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-u.offsetTop)+u.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+u.offsetHeight}p()}else console.warn("Scroll Error - Row not visible"),m("Scroll Error - Row not visible")})}}class H8 extends mg{constructor(t){super(t)}renderRowCells(t){t.cells.forEach(e=>{t.element.appendChild(e.getElement()),e.cellRendered()})}reinitializeColumnWidths(t){t.forEach(function(e){e.reinitializeWidth()})}}class U8 extends mg{constructor(t){super(t),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var t=this.options("columns"),s=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),s=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),s=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),s=!1),t&&t.find(l=>l.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),s=!1),s}renderColumns(t,e){this.dataChange()}scrollColumns(t,e){this.scrollLeft!=t&&(this.scrollLeft=t,this.scroll(t-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(t,e){var s={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!t||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var l=0;this.table.columnManager.columnsByIndex.forEach(u=>{var h={};if(u.visible){var p=u.getWidth();h.leftPos=l,h.rightPos=l+p,h.width=p,"fitData"===this.options("layout")&&(h.fitDataCheck=!0),l+p>this.vDomScrollPosLeft&&l<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=l),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=p),this.columns.push(u),u.modules.vdomHoz=h,l+=p}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,e||(!t||this.reinitChanged(s))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(t){this.initialized?this.initializeRow(t):t.cells.forEach(e=>{t.element.appendChild(e.getElement()),e.cellRendered()})}rerenderRowCells(t,e){this.reinitializeRow(t,e)}reinitializeColumnWidths(t){for(let e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var u,l,t=!1,e=0,s=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(h=>{!h.definition.width&&h.visible&&(t=!0)}),t&&t&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,l=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(u=l.getElement(),l.generateCells(),this.tableElement.appendChild(u),s=0;s<l.cells.length;s++){let m=l.cells[s];if(u.appendChild(m.getElement()),m.column.reinitializeWidth(),(e+=m.column.getWidth())>this.vDomScrollPosRight)break}for(u.parentNode.removeChild(u),this.fitDataColAvg=Math.floor(e/(s+1));s<this.table.columnManager.columnsByIndex.length;s++)this.table.columnManager.columnsByIndex[s].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(t){var e=!0;return t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol||(t.cols.forEach((s,l)=>{s!==this.columns[l]&&(e=!1)}),!e)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(e=>{this.reinitializeRow(e,!0)})}scroll(t){this.vDomScrollPosLeft+=t,this.vDomScrollPosRight+=t,t>.8*this.elementVertical.clientWidth?this.rerenderColumns():t>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(t,e,s){for(let l=t;l<e;l++){let u=this.columns[l];u.modules.vdomHoz.leftPos+=s,u.modules.vdomHoz.rightPos+=s}}addColRight(){var t=this.columns[this.rightCol+1];t&&t.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(s=>{if("group"!==s.type){var l=s.getCell(t);s.getElement().appendChild(l.getElement()),l.cellRendered()}}),this.fitDataColActualWidthCheck(t),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var t=this.columns[this.leftCol-1];t&&t.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(l=>{if("group"!==l.type){var u=l.getCell(t);l.getElement().prepend(u.getElement()),u.cellRendered()}}),this.fitDataColActualWidthCheck(t),this.leftCol?this.vDomPadLeft-=t.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(t){var e;(t=this.columns[this.rightCol])&&t.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(e=this.table.rowManager.getVisibleRows(),t.modules.vdomHoz.visible=!1,e.forEach(s=>{if("group"!==s.type){var l=s.getCell(t);s.getElement().removeChild(l.getElement())}}),this.vDomPadRight+=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var t=this.columns[this.leftCol];t&&t.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(s=>{if("group"!==s.type){var l=s.getCell(t);l.parentNode&&s.getElement().removeChild(l.getElement())}}),this.vDomPadLeft+=t.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(t){var e,s;t.modules.vdomHoz.fitDataCheck&&(t.reinitializeWidth(),(s=(e=t.getWidth())-t.modules.vdomHoz.width)&&(t.modules.vdomHoz.rightPos+=s,t.modules.vdomHoz.width=e,this.colPositionAdjust(this.rightCol+2,this.columns.length,s)),t.modules.vdomHoz.fitDataCheck=!1)}initializeRow(t){if("group"!==t.type){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let e=this.leftCol;e<=this.rightCol;e++){let s=this.columns[e];if(s&&s.visible){let l=t.getCell(s);t.getElement().appendChild(l.getElement()),l.cellRendered()}}}}reinitializeRow(t,e){if("group"!==t.type&&(e||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol)){for(var s=t.getElement();s.firstChild;)s.removeChild(s.firstChild);this.initializeRow(t)}}}class G8 extends xo{constructor(t){super(t),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new u0(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var t;(t="string"==typeof this.table.options.renderHorizontal?{virtual:U8,basic:H8}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t.setAttribute("role","row"),t}createHeaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t.setAttribute("role","rowgroup"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(t){var s=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t,this.element.style.marginLeft=t>s?-(t-s)+"px":0,this.scrollLeft=t,this.renderer.scrollColumns(t)}generateColumnsFromRowData(t){var l,u,e=[],s=this.table.options.autoColumnsDefinitions;if(t&&t.length){for(var h in l=t[0]){let p={field:h,title:h},m=l[h];switch(typeof m){case"undefined":u="string";break;case"boolean":u="boolean";break;case"object":u=Array.isArray(m)?"array":"string";break;default:u=isNaN(m)||""===m?m.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}p.sorter=u,e.push(p)}if(s)switch(typeof s){case"function":this.table.options.columns=s.call(this.table,e);break;case"object":Array.isArray(s)?e.forEach(p=>{var m=s.find(v=>v.field===p.field);m&&Object.assign(p,m)}):e.forEach(p=>{s[p.field]&&Object.assign(p,s[p.field])}),this.table.options.columns=e}else this.table.options.columns=e;this.setColumns(this.table.options.columns)}}setColumns(t,e){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),t.forEach((s,l)=>{this._addColumn(s)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(t,e,s){var l=new ud(t,this),u=l.getElement(),h=s&&this.findColumnIndex(s);if(s&&h>-1){var p=s.getTopColumn(),m=this.columns.indexOf(p),v=p.getElement();e?(this.columns.splice(m,0,l),v.parentNode.insertBefore(u,v)):(this.columns.splice(m+1,0,l),v.parentNode.insertBefore(u,v.nextSibling))}else e?(this.columns.unshift(l),this.headersElement.insertBefore(l.getElement(),this.headersElement.firstChild)):(this.columns.push(l),this.headersElement.appendChild(l.getElement()));return l.columnRendered(),l}registerColumnField(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)}registerColumnPosition(t){this.columnsByIndex.push(t)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})}verticalAlignHeaders(){var t=0;this.columns.forEach(e=>{var s;e.clearVerticalAlign(),(s=e.getHeight())>t&&(t=s)}),this.columns.forEach(e=>{e.verticalAlign(this.table.options.columnHeaderVertAlign,t)}),this.table.rowManager.adjustTableSize()}findColumn(t){return"object"!=typeof t?this.columnsByField[t]||!1:t instanceof ud?t:t instanceof a0?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.columns.find(s=>s.element===t)||!1}getColumnByField(t){return this.columnsByField[t]}getColumnsByFieldRoot(t){var e=[];return Object.keys(this.columnsByField).forEach(s=>{s.split(".")[0]===t&&e.push(this.columnsByField[s])}),e}getColumnByIndex(t){return this.columnsByIndex[t]}getFirstVisibileColumn(t){return(t=this.columnsByIndex.findIndex(e=>e.visible))>-1&&this.columnsByIndex[t]}getColumns(){return this.columns}findColumnIndex(t){return this.columnsByIndex.findIndex(e=>t===e)}getRealColumns(){return this.columnsByIndex}traverse(t){this.columnsByIndex.forEach((e,s)=>{t(e,s)})}getDefinitions(t){var e=[];return this.columnsByIndex.forEach(s=>{(!t||t&&s.visible)&&e.push(s.getDefinition())}),e}getDefinitionTree(){var t=[];return this.columns.forEach(e=>{t.push(e.getDefinition(!0))}),t}getComponents(t){var e=[];return(t?this.columns:this.columnsByIndex).forEach(l=>{e.push(l.getComponent())}),e}getWidth(){var t=0;return this.columnsByIndex.forEach(e=>{e.visible&&(t+=e.getWidth())}),t}moveColumn(t,e,s){this.moveColumnActual(t,e,s),e.element.parentNode.insertBefore(t.element,e.element),s&&e.element.parentNode.insertBefore(e.element,t.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(t,e,s){this._moveColumnInArray(t.parent.isGroup?t.parent.columns:this.columns,t,e,s),this._moveColumnInArray(this.columnsByIndex,t,e,s,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",t,e,s),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",t.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(t,e,s,l,u){var p,h=t.indexOf(e);h>-1&&(t.splice(h,1),(p=t.indexOf(s))>-1?l&&(p+=1):p=h,t.splice(p,0,e),u&&(this.chain("column-moving-rows",[e,s,l],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(v){if(v.cells.length){var T=v.cells.splice(h,1)[0];v.cells.splice(p,0,T)}}))}scrollToColumn(t,e,s){var l=0,u=0,h=0,p=t.getElement();return new Promise((m,v)=>{if(void 0===e&&(e=this.table.options.scrollToColumnPosition),void 0===s&&(s=this.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":h=-this.element.clientWidth/2;break;case"right":h=p.clientWidth-this.headersElement.clientWidth}if(!s&&(u=p.offsetLeft)>0&&u+p.offsetWidth<this.element.clientWidth)return!1;l=p.offsetLeft+h,l=Math.max(Math.min(l,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(l),this.scrollHorizontal(l),m()}else console.warn("Scroll Error - Column not visible"),v("Scroll Error - Column not visible")})}generateCells(t){var e=[];return this.columnsByIndex.forEach(s=>{e.push(s.generateCell(t))}),e}getFlexBaseWidth(){var t=this.table.element.clientWidth,e=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(s){var l,u,h;s.visible&&(l=s.definition.width||0,u=parseInt(s.minWidth),h="string"==typeof l?l.indexOf("%")>-1?t/100*parseInt(l):parseInt(l):l,e+=h>u?h:u)}),e}addColumn(t,e,s){return new Promise((l,u)=>{var h=this._addColumn(t,e,s);this._reIndexColumns(),this.dispatch("column-add",t,e,s),"fitColumns"!=this.layoutMode()&&h.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),l(h)})}deregisterColumn(t){var s,e=t.getField();e&&delete this.columnsByField[e],(s=this.columnsByIndex.indexOf(t))>-1&&this.columnsByIndex.splice(s,1),(s=this.columns.indexOf(t))>-1&&this.columns.splice(s,1),this.verticalAlignHeaders(),this.redraw()}redraw(t){Jn.elVisible(this.element)&&this.verticalAlignHeaders(),t&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",t)||this.layoutRefresh(),this.dispatch("table-redraw",t),this.table.footerManager.redraw()}}class W8 extends mg{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.scrollTop=0,t.scrollLeft=0,t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility=""}renderRows(){var t=this.tableElement,e=!0;this.rows().forEach((s,l)=>{this.styleRow(s,l),t.appendChild(s.getElement()),s.initialize(!0),"group"!==s.type&&(e=!1)}),t.style.minWidth=e?this.table.columnManager.getWidth()+"px":""}rerenderRows(t){this.render(),t&&t()}scrollToRowNearestTop(t){var e=Jn.elOffset(t.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-e)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-e))}scrollToRow(t){var e=t.getElement();this.elementVertical.scrollTop=Jn.elOffset(e).top-Jn.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(t){return this.rows()}}class j8 extends mg{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(t){for(var e=this.elementVertical.scrollTop,s=!1,l=!1,u=this.table.rowManager.scrollLeft,h=this.rows(),p=this.vDomTop;p<=this.vDomBottom;p++)if(h[p]){var m=e-h[p].getElement().offsetTop;if(!(!1===l||Math.abs(m)<l))break;l=m,s=p}h.forEach(v=>{v.deinitializeHeight()}),t&&t(),this._virtualRenderFill(!1===s?this.rows.length-1:s,!0,l||0),this.scrollColumns(u)}scrollColumns(t){this.table.rowManager.scrollHorizontal(t)}scrollRows(t,e){var s=t-this.vDomScrollPosTop,l=t-this.vDomScrollPosBottom,u=2*this.vDomWindowBuffer,h=this.rows();if(this.scrollTop=t,-s>u||l>u){var p=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*h.length)),this.scrollColumns(p)}else e?(s<0&&this._addTopRow(h,-s),l<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(h,-l):this.vDomScrollPosBottom=this.scrollTop)):(l>=0&&this._addBottomRow(h,l),s>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(h,s):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(t){var e=this.rows().indexOf(t);return!(Math.abs(this.vDomTop-e)>Math.abs(this.vDomBottom-e))}scrollToRow(t){var e=this.rows().indexOf(t);e>-1&&this._virtualRenderFill(e,!0)}visibleRows(t){var e=this.elementVertical.scrollTop,s=this.elementVertical.clientHeight+e,l=!1,u=0,h=0,p=this.rows();if(t)u=this.vDomTop,h=this.vDomBottom;else for(var m=this.vDomTop;m<=this.vDomBottom;m++)if(p[m])if(l){if(!(s-p[m].getElement().offsetTop>=0))break;h=m}else if(e-p[m].getElement().offsetTop>=0)u=m;else{if(l=!0,!(s-p[m].getElement().offsetTop>=0))break;h=m}return p.slice(u,h+1)}_virtualRenderFill(t,e,s){var l=this.tableElement,u=this.elementVertical,h=0,p=0,m=0,v=0,T=0,I=this.rows(),O=I.length,N=this.elementVertical.clientHeight;if(s=s||0,t=t||0){for(;l.firstChild;)l.removeChild(l.firstChild);(m=(O-t+1)*this.vDomRowHeight)<N&&(t-=Math.ceil((N-m)/this.vDomRowHeight))<0&&(t=0),t-=h=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t)}else this.clear();if(O&&Jn.elVisible(this.elementVertical)){for(this.vDomTop=t,this.vDomBottom=t-1;(p<=N+this.vDomWindowBuffer||T<this.vDomWindowMinTotalRows)&&this.vDomBottom<O-1;){var X,V=this.vDomBottom+1,Q=I[V];this.styleRow(Q,V),l.appendChild(Q.getElement()),Q.initialize(),Q.heightInitialized||Q.normalizeHeight(!0),X=Q.getHeight(),T<h?v+=X:p+=X,X>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*X),this.vDomBottom++,T++}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+s:this.scrollTop-v,this.vDomBottomPad=this.vDomBottom==O-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-p-v,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((p+v)/T),this.vDomBottomPad=this.vDomRowHeight*(O-this.vDomBottom-1),this.vDomScrollHeight=v+p+this.vDomBottomPad-N),l.style.paddingTop=this.vDomTopPad+"px",l.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+v+s-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-N:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-N),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&e&&(this.scrollTop+=this.elementVertical.offsetHeight-N),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,u.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(t,e){for(var s=this.tableElement,l=[],u=0,h=this.vDomTop-1,p=0;this.vDomTop;){let v,T,m=t[h];if(!(m&&p<this.vDomMaxRenderChain))break;if(v=m.getHeight()||this.vDomRowHeight,T=m.initialized,!(e>=v))break;this.styleRow(m,h),s.insertBefore(m.getElement(),s.firstChild),(!m.initialized||!m.heightInitialized)&&l.push(m),m.initialize(),T||(v=m.getElement().offsetHeight,v>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*v)),e-=v,u+=v,this.vDomTop--,h--,p++}for(let m of l)m.clearCellHeight();this._quickNormalizeRowHeight(l),u&&(this.vDomTopPad-=u,this.vDomTopPad<0&&(this.vDomTopPad=h*this.vDomRowHeight),h<1&&(this.vDomTopPad=0),s.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=u)}_removeTopRow(t,e){for(var s=[],l=0,u=0;;){let p,h=t[this.vDomTop];if(!(h&&u<this.vDomMaxRenderChain))break;if(p=h.getHeight()||this.vDomRowHeight,!(e>=p))break;this.vDomTop++,e-=p,l+=p,s.push(h),u++}for(let h of s){let p=h.getElement();p.parentNode&&p.parentNode.removeChild(p)}l&&(this.vDomTopPad+=l,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?l:l+this.vDomWindowBuffer)}_addBottomRow(t,e){for(var s=this.tableElement,l=[],u=0,h=this.vDomBottom+1,p=0;;){let v,T,m=t[h];if(!(m&&p<this.vDomMaxRenderChain))break;if(v=m.getHeight()||this.vDomRowHeight,T=m.initialized,!(e>=v))break;this.styleRow(m,h),s.appendChild(m.getElement()),(!m.initialized||!m.heightInitialized)&&l.push(m),m.initialize(),T||(v=m.getElement().offsetHeight,v>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*v)),e-=v,u+=v,this.vDomBottom++,h++,p++}for(let m of l)m.clearCellHeight();this._quickNormalizeRowHeight(l),u&&(this.vDomBottomPad-=u,(this.vDomBottomPad<0||h==t.length-1)&&(this.vDomBottomPad=0),s.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=u)}_removeBottomRow(t,e){for(var s=[],l=0,u=0;;){let p,h=t[this.vDomBottom];if(!(h&&u<this.vDomMaxRenderChain))break;if(p=h.getHeight()||this.vDomRowHeight,!(e>=p))break;this.vDomBottom--,e-=p,l+=p,s.push(h),u++}for(let h of s){let p=h.getElement();p.parentNode&&p.parentNode.removeChild(p)}l&&(this.vDomBottomPad+=l,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=l)}_quickNormalizeRowHeight(t){for(let e of t)e.calcHeight();for(let e of t)e.setCellHeight()}}class z8 extends xo{constructor(t){super(t),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var t=document.createElement("div");return t.classList.add("tabulator-tableholder"),t.setAttribute("tabindex",0),t.setAttribute("role","rowgroup"),t}createTableElement(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t.setAttribute("role","rowgroup"),t}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(t,e){return e?this.activeRows.indexOf(t):this.rows.indexOf(t)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var t=this.element.scrollLeft,e=this.scrollLeft>t,s=this.element.scrollTop,l=this.scrollTop>s;this.scrollLeft!=t&&(this.scrollLeft=t,this.dispatch("scroll-horizontal",t,e),this.dispatchExternal("scrollHorizontal",t,e)),this.scrollTop!=s&&(this.scrollTop=s,this.renderer.scrollRows(s,l),this.dispatch("scroll-vertical",s,l),this.dispatchExternal("scrollVertical",s,l))})}findRow(t){return"object"!=typeof t?null!=t&&(this.rows.find(s=>s.data[this.table.options.index]==t)||!1):t instanceof Tr?t:t instanceof sE?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.rows.find(s=>s.getElement()===t)||!1}getRowFromDataObject(t){return this.rows.find(s=>s.data===t)||!1}getRowFromPosition(t,e){return e?this.activeRows[t]:this.rows[t]}scrollToRow(t,e,s){return this.renderer.scrollToRowPosition(t,e,s)}setData(t,e,s){return new Promise((l,u)=>{e&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(t,!0):this.reRenderInPosition(()=>{this._setDataActual(t)}):(this.table.options.autoColumns&&s&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(t),this.resetScroll(),this._setDataActual(t)),l()})}_setDataActual(t,e){this.dispatchExternal("dataProcessing",t),this._wipeElements(),Array.isArray(t)?(this.dispatch("data-processing",t),t.forEach((s,l)=>{if(s&&"object"==typeof s){var u=new Tr(s,this);this.rows.push(u)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",s)}),this.refreshActiveData(!1,!1,e),this.dispatch("data-processed",t),this.dispatchExternal("dataProcessed",t)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof t,"\nData:     ",t)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(t=>{t.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(t,e){var s=this.rows.indexOf(t),l=this.activeRows.indexOf(t);l>-1&&this.activeRows.splice(l,1),s>-1&&this.rows.splice(s,1),this.setActiveRows(this.activeRows),this.displayRowIterator(u=>{var h=u.indexOf(t);h>-1&&u.splice(h,1)}),e||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",t.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(t,e,s,l){var u=this.addRowActual(t,e,s,l);return this.dispatch("row-added",u,t,e,s),u}addRows(t,e,s){var l=[];return new Promise((u,h)=>{e=this.findAddRowPos(e),Array.isArray(t)||(t=[t]),(void 0===s&&e||void 0!==s&&!e)&&t.reverse(),t.forEach((p,m)=>{var v=this.addRow(p,e,s,!0);l.push(v),this.dispatch("row-added",v,t,e,s)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),l.length&&this._clearPlaceholder(),u(l)})}findAddRowPos(t){return void 0===t&&(t=this.table.options.addRowPos),"pos"===t&&(t=!0),"bottom"===t&&(t=!1),t}addRowActual(t,e,s,l){var m,v,u=t instanceof Tr?t:new Tr(t||{},this),h=this.findAddRowPos(e),p=-1;return s||(v=this.chain("row-adding-position",[u,h],null,{index:s,top:h}),s=v.index,h=v.top),void 0!==s&&(s=this.findRow(s)),(s=this.chain("row-adding-index",[u,s,h],null,s))&&(p=this.rows.indexOf(s)),s&&p>-1?(m=this.activeRows.indexOf(s),this.displayRowIterator(function(T){var I=T.indexOf(s);I>-1&&T.splice(h?I:I+1,0,u)}),m>-1&&this.activeRows.splice(h?m:m+1,0,u),this.rows.splice(h?p:p+1,0,u)):h?(this.displayRowIterator(function(T){T.unshift(u)}),this.activeRows.unshift(u),this.rows.unshift(u)):(this.displayRowIterator(function(T){T.push(u)}),this.activeRows.push(u),this.rows.push(u)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",u.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),l||this.reRenderInPosition(),u}moveRow(t,e,s){this.dispatch("row-move",t,e,s),this.moveRowActual(t,e,s),this.regenerateRowNumbers(),this.dispatch("row-moved",t,e,s),this.dispatchExternal("rowMoved",t.getComponent())}moveRowActual(t,e,s){this.moveRowInArray(this.rows,t,e,s),this.moveRowInArray(this.activeRows,t,e,s),this.displayRowIterator(l=>{this.moveRowInArray(l,t,e,s)}),this.dispatch("row-moving",t,e,s)}moveRowInArray(t,e,s,l){var u,h,m;if(e!==s&&((u=t.indexOf(e))>-1&&(t.splice(u,1),h=t.indexOf(s),t.splice(h>-1?l?h+1:h:u,0,e)),t===this.getDisplayRows())){m=h>u?h:u+1;for(let v=u<h?u:h;v<=m;v++)t[v]&&this.styleRow(t[v],v)}}clearData(){this.setData([])}getRowIndex(t){return this.findRowIndex(t,this.rows)}getDisplayRowIndex(t){var e=this.getDisplayRows().indexOf(t);return e>-1&&e}nextDisplayRow(t,e){var s=this.getDisplayRowIndex(t),l=!1;return!1!==s&&s<this.displayRowsCount-1&&(l=this.getDisplayRows()[s+1]),!l||l instanceof Tr&&"row"==l.type?l:this.nextDisplayRow(l,e)}prevDisplayRow(t,e){var s=this.getDisplayRowIndex(t),l=!1;return s&&(l=this.getDisplayRows()[s-1]),!e||!l||l instanceof Tr&&"row"==l.type?l:this.prevDisplayRow(l,e)}findRowIndex(t,e){var s;return!!((t=this.findRow(t))&&(s=e.indexOf(t),s>-1))&&s}getData(t,e){var s=[];return this.getRows(t).forEach(function(u){"row"==u.type&&s.push(u.getData(e||"data"))}),s}getComponents(t){var e=[];return this.getRows(t).forEach(function(l){e.push(l.getComponent())}),e}getDataCount(t){return this.getRows(t).length}scrollHorizontal(t){this.scrollLeft=t,this.element.scrollLeft=t,this.dispatch("scroll-horizontal",t)}registerDataPipelineHandler(t,e){void 0!==e?(this.dataPipeline.push({handler:t,priority:e}),this.dataPipeline.sort((s,l)=>s.priority-l.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(t,e){void 0!==e?(this.displayPipeline.push({handler:t,priority:e}),this.displayPipeline.sort((s,l)=>s.priority-l.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(t,e,s){var l=this.table,u="",h=0,p=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof t)if((h=this.dataPipeline.findIndex(m=>m.handler===t))>-1)u="dataPipeline",e&&(h==this.dataPipeline.length-1?u="display":h++);else{if(!((h=this.displayPipeline.findIndex(m=>m.handler===t))>-1))return void console.error("Unable to refresh data, invalid handler provided",t);u="displayPipeline",e&&(h==this.displayPipeline.length-1?u="end":h++)}else u=t||"all",h=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===u&&h<this.redrawBlockRestoreConfig.index||p.indexOf(u)<p.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:t,skipStage:e,renderInPosition:s,stage:u,index:h});else{switch(this.dispatch("data-refeshing"),t||(this.activeRowsPipeline[0]=this.rows.slice(0)),u){case"all":case"dataPipeline":for(let m=h;m<this.dataPipeline.length;m++){let v=this.dataPipeline[m].handler(this.activeRowsPipeline[m].slice(0));this.activeRowsPipeline[m+1]=v||this.activeRowsPipeline[m].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":h=0,this.resetDisplayRows();case"displayPipeline":for(let m=h;m<this.displayPipeline.length;m++){let v=this.displayPipeline[m].handler((m?this.getDisplayRows(m-1):this.activeRows).slice(0),s);this.setDisplayRows(v||this.getDisplayRows(m-1).slice(0),m)}}Jn.elVisible(this.element)&&(s?this.reRenderInPosition():(t||this.table.columnManager.renderer.renderColumns(),this.renderTable(),l.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(t=>{var e=t.getCell(this.rowNumColumn);e&&e._generateContents()})}setActiveRows(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(t,e){var s=!0;return e&&void 0!==this.displayRows[e]?(this.displayRows[e]=t,s=!0):(this.displayRows.push(t),s=e=this.displayRows.length-1),e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),s}getDisplayRows(t){return void 0===t?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]}getVisibleRows(t){return this.renderer.visibleRows(!t)}displayRowIterator(t){this.activeRowsPipeline.forEach(t),this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(t){var e;switch(t){case"active":e=this.activeRows;break;case"display":e=this.table.rowManager.getDisplayRows();break;case"visible":e=this.getVisibleRows(!0);break;default:e=this.chain("rows-retrieve",t,null,this.rows)||this.rows}return e}reRenderInPosition(t){this.redrawBlock?t?t():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(t)}initializeRenderer(){var t;(t="string"==typeof this.table.options.renderVertical?{virtual:j8,basic:W8}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(t,e){var s=t.getElement();e%2?(s.classList.add("tabulator-row-even"),s.classList.remove("tabulator-row-odd")):(s.classList.add("tabulator-row-odd"),s.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(t){t.normalizeHeight()})}adjustTableSize(){var t=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let e=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+e+"px)",this.element.style.height="calc(100% - "+e+"px)",this.element.style.maxHeight="calc(100% - "+e+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-e+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&t!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(t){t.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(t){var e=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(e),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))}}class X8 extends xo{constructor(t){super(t),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t}initializeElement(){this.table.options.footerElement&&("string"==typeof this.table.options.footerElement?"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement)):this.element=this.table.options.footerElement)}getElement(){return this.element}append(t,e){this.activate(e),this.element.appendChild(t),this.table.rowManager.adjustTableSize()}prepend(t,e){this.activate(e),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(t){t.parentNode.removeChild(t),this.deactivate()}deactivate(t){(!this.element.firstChild||t)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(t){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),t&&this.links.push(t)}redraw(){this.links.forEach(function(t){t.footerRedraw()})}}class K8 extends xo{constructor(t){super(t),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var t={};this.listeners.forEach(e=>{t[e]={handler:null,components:[]}}),this.listeners=t}bindSubscriptionWatchers(){var t=Object.keys(this.listeners),e=Object.values(this.componentMap);for(let s of e)for(let l of t)this.subscriptionChange(s+"-"+l,this.subscriptionChanged.bind(this,s,l))}subscriptionChanged(t,e,s){var l=this.listeners[e].components,u=l.indexOf(t),h=!1;s?-1===u&&(l.push(t),h=!0):this.subscribed(t+"-"+e)||u>-1&&(l.splice(u,1),h=!0),h&&this.updateEventListeners()}updateEventListeners(){for(let t in this.listeners){let e=this.listeners[t];e.components.length?e.handler||(e.handler=this.track.bind(this,t),this.el.addEventListener(t,e.handler)):e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}track(t,e){var s=e.composedPath&&e.composedPath()||e.path,l=this.findTargets(s);l=this.bindComponents(t,l),this.triggerEvents(t,e,l)}findTargets(t){var e={};let s=Object.keys(this.componentMap);for(let l of t){let u=l.classList?[...l.classList]:[];if(u.filter(m=>this.abortClasses.includes(m)).length)break;let p=u.filter(m=>s.includes(m));for(let m of p)e[this.componentMap[m]]=l}return e.group&&e.group===e.row&&delete e.row,e}bindComponents(t,e){var s=Object.keys(e).reverse(),l=this.listeners[t],u={};for(let h of s){let p,m=e[h],v=this.previousTargets[h];if(v&&v.target===m)p=v.component;else switch(h){case"row":case"group":(l.components.includes("row")||l.components.includes("cell"))&&(p=this.table.rowManager.getVisibleRows().find(I=>I.getElement()===m));break;case"column":l.components.includes("column")&&(p=this.table.columnManager.findColumn(m));break;case"cell":l.components.includes("cell")&&(p=e.row.findCell(m))}p&&(e[h]=p,u[h]={target:m,component:p})}return this.previousTargets=u,e}triggerEvents(t,e,s){var l=this.listeners[t];for(let u in s)s[u]&&l.components.includes(u)&&this.dispatch(u+"-"+t,e,s[u])}}class Y8{constructor(t){this.table=t,this.bindings={}}bind(t,e,s){this.bindings[t]||(this.bindings[t]={}),this.bindings[t][e]?console.warn("Unable to bind component handler, a matching function name is already bound",t,e,hanlder):this.bindings[t][e]=s}handle(t,e,s){if(this.bindings[t]&&this.bindings[t][s])return this.bindings[t][s].bind(null,e);"then"!==s&&"string"==typeof s&&!s.startsWith("_")&&console.error("The "+t+" component does not have a "+s+" function, have you checked that you have the correct Tabulator module installed?")}}class $8 extends xo{constructor(t){super(t),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var t;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=t.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=t.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader"),t}createMsgElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader-msg"),t.setAttribute("role","alert"),t}load(t,e,s,l,u){var h=++this.requestOrder;return this.dispatchExternal("dataLoading",t),t&&(0==t.indexOf("{")||0==t.indexOf("["))&&(t=JSON.parse(t)),this.confirm("data-loading",t,e,s,u)?(this.loading=!0,u||this.showLoader(),e=this.chain("data-params",[t,s,u],e||{},{}),e=this.mapParams(e,this.table.options.dataSendParams),this.chain("data-load",[t,e,s,u],Promise.resolve([])).then(v=>{!Array.isArray(v)&&"object"==typeof v&&(v=this.mapParams(v,this.objectInvert(this.table.options.dataReceiveParams)));var T=this.chain("data-loaded",v,null,v);h==this.requestOrder?(this.hideLoader(),!1!==T&&(this.dispatchExternal("dataLoaded",T),this.table.rowManager.setData(T,l,!l))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(v=>{console.error("Data Load Error: ",v),this.dispatchExternal("dataLoadError",v),u||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",t),t||(t=[]),this.table.rowManager.setData(t,l,!l),Promise.resolve())}mapParams(t,e){var s={};for(let l in t)s[e.hasOwnProperty(l)?e[l]:l]=t[l];return s}objectInvert(t){var e={};for(let s in t)e[t[s]]=s;return e}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class J8{constructor(t,e,s){this.table=t,this.events={},this.optionsList=e||{},this.subscriptionNotifiers={},this.dispatch=s?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=s}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var s;if(this.events[t]){if(e){if(!((s=this.events[t].findIndex(l=>l===e))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(s,1)}else delete this.events[t];this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_notifiySubscriptionChange(t,e){var s=this.subscriptionNotifiers[t];s&&s.forEach(l=>{l(e)})}_dispatch(){var s,t=Array.from(arguments),e=t.shift();return this.events[e]&&this.events[e].forEach((l,u)=>{let h=l.apply(this.table,t);u||(s=h)}),s}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="ExternalEvent:"+t[0],(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}}class Q8{constructor(t){this.events={},this.subscriptionNotifiers={},this.dispatch=t?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=t?this._debugChain.bind(this):this._chain.bind(this),this.confirm=t?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=t}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e,s=1e4){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,priority:s}),this.events[t].sort((l,u)=>l.priority-u.priority),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var s;if(this.events[t]){if(e){if(!((s=this.events[t].findIndex(l=>l.callback===e))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(s,1)}this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_chain(t,e,s,l){var u=s;return Array.isArray(e)||(e=[e]),this.subscribed(t)?(this.events[t].forEach((h,p)=>{u=h.callback.apply(this,e.concat([u]))}),u):"function"==typeof l?l():l}_confirm(t,e){var s=!1;return Array.isArray(e)||(e=[e]),this.subscribed(t)&&this.events[t].forEach((l,u)=>{l.callback.apply(this,e)&&(s=!0)}),s}_notifiySubscriptionChange(t,e){var s=this.subscriptionNotifiers[t];s&&s.forEach(l=>{l(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift();this.events[e]&&this.events[e].forEach(s=>{s.callback.apply(this,t)})}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}_debugChain(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._chain(...arguments)}_debugConfirm(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._confirm(...arguments)}}let _g=(()=>{class r{static register(e){r.tables.push(e)}static deregister(e){var s=r.tables.indexOf(e);s>-1&&r.tables.splice(s,1)}static lookupTable(e,s){var u,h,l=[];if("string"==typeof e){if((u=document.querySelectorAll(e)).length)for(var p=0;p<u.length;p++)(h=r.matchElement(u[p]))&&l.push(h)}else"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e instanceof ic?(h=r.matchElement(e))&&l.push(h):Array.isArray(e)?e.forEach(function(m){l=l.concat(r.lookupTable(m))}):s||console.warn("Table Connection Error - Invalid Selector",e);return l}static matchElement(e){return r.tables.find(function(s){return e instanceof ic?s===e:s.element===e})}}return r.tables=[],r})();function c0(r){r.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var tz={fitData:function(r){this.table.columnManager.renderer.reinitializeColumnWidths(r),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:c0,fitDataTable:c0,fitDataStretch:function(r){var t=0,e=this.table.rowManager.element.clientWidth,s=0,l=!1;r.forEach((u,h)=>{u.widthFixed||u.reinitializeWidth(),(this.table.options.responsiveLayout?u.modules.responsive.visible:u.visible)&&(l=u),u.visible&&(t+=u.getWidth())}),l?(s=e-t+l.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(l.setWidth(0),this.table.modules.responsiveLayout.update()),s>0?l.setWidth(s):l.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(r){var u,v,t=this.table.element.clientWidth,e=0,s=0,l=0,h=[],p=[],m=0,T=0;function I(N){return"string"==typeof N?N.indexOf("%")>-1?t/100*parseInt(N):parseInt(N):N}function O(N,V,Q,X){var ue=[],ce=0,ke=0,Ue=0,ct=l,Ft=0,Xt=0,In=[];function Gn(Ot){return Q*(Ot.column.definition.widthGrow||1)}function Sn(Ot){return I(Ot.width)-Q*(Ot.column.definition.widthShrink||0)}return N.forEach(function(Ot,Gi){var bi=X?Sn(Ot):Gn(Ot);Ot.column.minWidth>=bi?ue.push(Ot):Ot.column.maxWidth&&Ot.column.maxWidth<bi?(Ot.width=Ot.column.maxWidth,V-=Ot.column.maxWidth,(ct-=X?Ot.column.definition.widthShrink||1:Ot.column.definition.widthGrow||1)&&(Q=Math.floor(V/ct))):(In.push(Ot),Xt+=X?Ot.column.definition.widthShrink||1:Ot.column.definition.widthGrow||1)}),ue.length?(ue.forEach(function(Ot){ce+=X?Ot.width-Ot.column.minWidth:Ot.column.minWidth,Ot.width=Ot.column.minWidth}),Ft=(ke=V-ce)-(Ue=Xt?Math.floor(ke/Xt):ke)*Xt,Ft+=O(In,ke,Ue,X)):(Ft=Xt?V-Math.floor(V/Xt)*Xt:V,In.forEach(function(Ot){Ot.width=X?Sn(Ot):Gn(Ot)})),Ft}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),r.forEach(function(N){var V,Q,X;N.visible&&(V=N.definition.width,Q=parseInt(N.minWidth),V?(X=I(V),e+=X>Q?X:Q,N.definition.widthShrink&&(p.push({column:N,width:X>Q?X:Q}),m+=N.definition.widthShrink)):(h.push({column:N,width:0}),l+=N.definition.widthGrow||1))}),s=t-e,u=Math.floor(s/l),T=O(h,s,u,!1),h.length&&T>0&&(h[h.length-1].width+=+T),h.forEach(function(N){s-=N.width}),(v=Math.abs(T)+s)>0&&m&&(T=O(p,v,Math.floor(v/m),!0)),p.length&&(p[p.length-1].width-=T),h.forEach(function(N){N.column.setWidth(N.width)}),p.forEach(function(N){N.column.setWidth(N.width)})}},iz={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},rz=Object.freeze({__proto__:null,LayoutModule:(()=>{class r extends on{constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;r.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){r.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return r.moduleName="layout",r.modes=tz,r})(),LocalizeModule:(()=>{class r extends on{constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=Jn.deepClone(r.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}setHeaderFilterColumnPlaceholder(e,s){this.langList.default.headerFilters.columns[e]=s,this.lang&&!this.lang.headerFilters.columns[e]&&(this.lang.headerFilters.columns[e]=s)}installLang(e,s){this.langList[e]?this._setLangProp(this.langList[e],s):this.langList[e]=s}_setLangProp(e,s){for(let l in s)e[l]&&"object"==typeof e[l]?this._setLangProp(e[l],s[l]):e[l]=s[l]}setLocale(e){if(!0===(e=e||"default")&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let l=e.split("-")[0];this.langList[l]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,l),e=l):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=Jn.deepClone(this.langList.default||{}),"default"!=e&&function s(l,u){for(var h in l)"object"==typeof l[h]?(u[h]||(u[h]={}),s(l[h],u[h])):u[h]=l[h]}(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,s){var l=(e=s?e+"|"+s:e).split("|");return this._getLangElement(l,this.locale)||""}_getLangElement(e,s){var l=this.lang;return e.forEach(function(u){var h;l&&(l=void 0!==(h=l[u])&&h)}),l}bind(e,s){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(s),s(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(s=>{s(this.getText(e),this.lang)})}}return r.moduleName="localize",r.langs=iz,r})(),CommsModule:(()=>{class r extends on{constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var s=[];return _g.lookupTable(e).forEach(u=>{this.table!==u&&s.push(u)}),s}send(e,s,l,u){var h=this.getConnections(e);h.forEach(p=>{p.tableComms(this.table.element,s,l,u)}),!h.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,s,l,u){if(this.table.modExists(s))return this.table.modules[s].commsReceived(e,l,u);console.warn("Inter-table Comms Error - no such module:",s)}}return r.moduleName="comms",r})()});class h0{constructor(t,e){this.bindStaticFuctionality(t),this.bindModules(t,rz,!0),e&&this.bindModules(t,e)}bindStaticFuctionality(t){t.moduleBindings={},t.extendModule=function(e,s,l){if(t.moduleBindings[e]){var u=t.moduleBindings[e][s];if(u)if("object"==typeof l)for(let h in l)u[h]=l[h];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",s)}else console.warn("Module Error - module does not exist:",e)},t.registerModule=function(e){Array.isArray(e)||(e=[e]),e.forEach(s=>{t.registerModuleBinding(s)})},t.registerModuleBinding=function(e){t.moduleBindings[e.moduleName]=e},t.findTable=function(e){var s=_g.lookupTable(e,!0);return!(Array.isArray(s)&&!s.length)&&s},t.prototype.bindModules=function(){for(var e in this.modules={},t.moduleBindings){let s=t.moduleBindings[e];this.modules[e]=new s(this),s.prototype.moduleCore?this.modulesCore[e]=this.modules[e]:this.modulesRegular[e]=this.modules[e]}}}bindModules(t,e,s){var l=Object.values(e);s&&l.forEach(u=>{u.prototype.moduleCore=!0}),t.registerModule(l)}}let ic=(()=>{class r{constructor(e,s){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new Y8(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new u0(this,"table constructor"),this.initialized=!1,this.initializeElement(e)&&(this.initialzeCoreSystems(s),setTimeout(()=>{this._create()})),_g.register(this)}initializeElement(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement?(this.element=e,!0):"string"==typeof e?(this.element=document.querySelector(e),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initialzeCoreSystems(e){this.columnManager=new G8(this),this.rowManager=new z8(this),this.footerManager=new X8(this),this.dataLoader=new $8(this),this.bindModules(),this.options=this.optionsList.generate(r.defaultOptions,e),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new J8(this,this.options,this.options.debugEventsExternal),this.eventBus=new Q8(this.options.debugEventsInternal),this.interactionMonitor=new K8(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==e.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var l,e=this.element,s=this.options;if("TABLE"===e.tagName){this.originalElement=this.element,l=document.createElement("div");var u=e.attributes;for(var h in u)"object"==typeof u[h]&&l.setAttribute(u[h].name,u[h].value);e.parentNode.replaceChild(l,e),this.element=e=l}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);s.height&&(s.height=isNaN(s.height)?s.height:s.height+"px",e.style.height=s.height),!1!==s.minHeight&&(s.minHeight=isNaN(s.minHeight)?s.minHeight:s.minHeight+"px",e.style.minHeight=s.minHeight),!1!==s.maxHeight&&(s.maxHeight=isNaN(s.maxHeight)?s.maxHeight:s.maxHeight+"px",e.style.maxHeight=s.maxHeight)}_initializeTable(){var e=this.element,s=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let h in this.modulesCore)this.modulesCore[h].initialize();if("string"==typeof s.placeholder){var l=document.createElement("div");l.classList.add("tabulator-placeholder");var u=document.createElement("span");u.innerHTML=s.placeholder,l.appendChild(u),s.placeholder=l}e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),s.footerElement&&this.footerManager.activate(),s.autoColumns&&s.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let h in this.modulesRegular)this.modulesRegular[h].initialize();this.columnManager.setColumns(s.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var e=this.element;for(_g.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(s){s.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(e){return new Promise((s,l)=>{var u=document.createElement("input");u.type="file",u.accept=e||".json,application/json",u.addEventListener("change",h=>{var v,p=u.files[0],m=new FileReader;m.readAsText(p),m.onload=T=>{try{v=JSON.parse(m.result)}catch(I){return console.warn("File Load Error - File contents is invalid JSON",I),void l(I)}this.setData(v).then(I=>{s(I)}).catch(I=>{s(I)})},m.onerror=T=>{console.warn("File Load Error - Unable to read file"),l()}}),u.click()})}setData(e,s,l){if(this.initialized)return this.dataLoader.load(e,s,l,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,s,l){if(this.initialized)return this.dataLoader.load(e,s,l,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(e){var s=0;if(this.initialized)return new Promise((l,u)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(h=>{var p=this.rowManager.findRow(h[this.options.index]);p&&(s++,p.updateData(h).then(()=>{--s||l()}))}):(console.warn("Update Error - No data provided"),u("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(e,s,l){if(this.initialized)return new Promise((u,h)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,s,l).then(p=>{var m=[];p.forEach(function(v){m.push(v.getComponent())}),u(m)}):(console.warn("Update Error - No data provided"),h("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(e){var s=[],l=0;if(this.initialized)return new Promise((u,h)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(p=>{var m=this.rowManager.findRow(p[this.options.index]);l++,m?m.updateData(p).then(()=>{l--,s.push(m.getComponent()),l||u(s)}):this.rowManager.addRows(p).then(v=>{l--,s.push(v[0].getComponent()),l||u(s)})}):(console.warn("Update Error - No data provided"),h("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(e){var s=this.rowManager.findRow(e);return s?s.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e,s){var l=this.rowManager.getRowFromPosition(e,s);return l?l.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var s=[];Array.isArray(e)||(e=[e]);for(let l of e){let u=this.rowManager.findRow(l,!0);if(!u)return console.error("Delete Error - No matching row found:",l),Promise.reject("Delete Error - No matching row found");s.push(u)}return s.sort((l,u)=>this.rowManager.rows.indexOf(l)>this.rowManager.rows.indexOf(u)?1:-1),s.forEach(l=>{l.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,s,l){if(this.initialized)return"string"==typeof e&&(e=JSON.parse(e)),this.rowManager.addRows(e,s,l).then(u=>u[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(e,s){var l=this.rowManager.findRow(e);return"string"==typeof s&&(s=JSON.parse(s)),l?l.updateData(s).then(()=>l.getComponent()):this.rowManager.addRows(s).then(u=>u[0].getComponent())}updateRow(e,s){var l=this.rowManager.findRow(e);return"string"==typeof s&&(s=JSON.parse(s)),l?l.updateData(s).then(()=>{resolve(l.getComponent())}):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,s,l){var u=this.rowManager.findRow(e);return u?this.rowManager.scrollToRow(u,s,l):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,s,l){var u=this.rowManager.findRow(e);u?u.moveToRow(s,l):console.warn("Move Error - No matching row found:",e)}getRows(e){if(this.initialized)return this.rowManager.getComponents(e);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(e,s){var l=this.rowManager.findRow(e);return l?this.rowManager.getRowPosition(l,s):(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initialized?this.columnManager.setColumns(e):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var s=this.columnManager.findColumn(e);return s?s.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var s=this.columnManager.findColumn(e);if(!s)return console.warn("Column Show Error - No matching column found:",e),!1;s.show()}hideColumn(e){var s=this.columnManager.findColumn(e);if(!s)return console.warn("Column Hide Error - No matching column found:",e),!1;s.hide()}toggleColumn(e){var s=this.columnManager.findColumn(e);if(!s)return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1;s.visible?s.hide():s.show()}addColumn(e,s,l){var u=this.columnManager.findColumn(l);return this.columnManager.addColumn(e,s,u).then(h=>h.getComponent())}deleteColumn(e){var s=this.columnManager.findColumn(e);return s?s.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,s){var l=this.columnManager.findColumn(e);return l?l.updateDefinition(s):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,s,l){var u=this.columnManager.findColumn(e),h=this.columnManager.findColumn(s);u?h?this.columnManager.moveColumn(u,h,l):console.warn("Move Error - No matching column found:",h):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,s,l){return new Promise((u,h)=>{var p=this.columnManager.findColumn(e);return p?this.columnManager.scrollToColumn(p,s,l):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initialized?(this.columnManager.redraw(e),this.rowManager.redraw(e)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(e,s){this.externalEvents.subscribe(e,s)}off(e,s){this.externalEvents.unsubscribe(e,s)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(e,s){return!!this.modules[e]||(s&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var s=this.modules[e];return s||console.error("Tabulator module not installed: "+e),s}}return r.defaultOptions=V8,r})();new h0(ic),new h0(class extends ic{},B8);let sz=(()=>{class r{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(e){this.hotInstance=new ic(e,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",footerElement:'<div>\n        \x3c!-- <a href="javascript:copyClip()">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href="javascript:copyCSV()">CSV</a>\n        --\x3e\n    </div>',placeholder:"please press execute button"}),this.hot.replaceData([]),this.hot.redraw(!0)}AddStringToGrid(e){if(e.startsWith("{")&&e.endsWith("}"))try{var s=JSON.parse(e);return void this.objectsForGrid.push(s)}catch(h){}if(e.startsWith("[")&&e.endsWith("]"))try{for(var l=JSON.parse(e),u=0;u<l.length;u++)this.objectsForGrid.push(l[u]);return}catch(h){}this.stringsForGrid.push(e)}AddDataToGrid(e){this.dataObject.push([e]),this.AddStringToGrid("string"!=typeof e?"object"!=typeof e?e.toString():JSON.stringify(e):e)}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(e,s){return null!=e&&e.hasOwnProperty(s)}AddObjectToFinishGrid(){for(var e=[],s=this.objectsForGrid,l=0;l<s.length;l++)"string"==typeof(u=s[l])?e.push("_"):e.push(...Object.keys(u));var h=new Set(e);e=Array.from(h);var p=[...e],m=[];for(l=0;l<s.length;l++){for(var u=s[l],v={Nr:l+1},T=0;T<e.length;T++){var I=e[T],O=this.goodNameForKey(I);if(u&&this.hasOwnProperty(u,I)){var N=u[I];v[O]="object"==typeof N?JSON.stringify(N):N}else v[O]="string"==typeof u&&0===T?u:""}m.push(v)}e.splice(0,0,"Nr"),p.splice(0,0,"Nr");var V=this.Headers(p);this.hot.setColumns(V),this.hot.replaceData(m)}Headers(e){return e.map(s=>({cellClick:function(l,u){var h=u.getRow().getData().Nr;u.getColumn().getField(),alert(`The row at : ${h} , col: ${h} has value :\n `+u.getValue())},title:s,field:this.goodNameForKey(s),headerFilter:!0,formatter:function(l,u,h){try{var p=l.getValue().toString();if(p.length<2)return p;if(p.startsWith("[")&&p.endsWith("]"))try{var m=JSON.parse(p),v=l.getRow().getData().Nr,I=l.getColumn().getField()+"_"+v;return h(function(){new ic("#"+I,{data:m,autoColumns:!0,layout:"fitDataFill",headerSort:!1})}),"<div id='"+I+"'>"+p+"</div>"}catch(O){return p}}catch(O){return p}return l.getValue()}}))}AddStringToFinishGrid(){for(var e=[],s=0;s<this.stringsForGrid.length;s++)e.push({Nr:s+1,Text:this.stringsForGrid[s]});var u=this.Headers(["Nr","Text"]);this.hot.setColumns(u),this.hot.replaceData(e)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(e){var s=e;return s.replace(".","_")}copyClip(){this.hot.copyToClipboard("all")}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class d0{}class p0{}class Vs{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const s=e.indexOf(":");if(s>0){const l=e.slice(0,s),u=l.toLowerCase(),h=e.slice(s+1).trim();this.maybeSetNormalizedName(l,u),this.headers.has(u)?this.headers.get(u).push(h):this.headers.set(u,[h])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let s=t[e];const l=e.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(l,s),this.maybeSetNormalizedName(e,l))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Vs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Vs;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Vs?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let s=t.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(t.name,e);const l=("a"===t.op?this.headers.get(e):void 0)||[];l.push(...s),this.headers.set(e,l);break;case"d":const u=t.value;if(u){let h=this.headers.get(e);if(!h)return;h=h.filter(p=>-1===u.indexOf(p)),0===h.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,h)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class az{encodeKey(t){return f0(t)}encodeValue(t){return f0(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const uz=/%(\d[a-f0-9])/gi,cz={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function f0(r){return encodeURIComponent(r).replace(uz,(t,e)=>{var s;return null!=(s=cz[e])?s:t})}function g0(r){return`${r}`}class Ia{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new az,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(l=>{const u=l.indexOf("="),[h,p]=-1==u?[t.decodeKey(l),""]:[t.decodeKey(l.slice(0,u)),t.decodeValue(l.slice(u+1))],m=e.get(h)||[];m.push(p),e.set(h,m)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const s=t.fromObject[e];this.map.set(e,Array.isArray(s)?s:[s])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(s=>{const l=t[s];Array.isArray(l)?l.forEach(u=>{e.push({param:s,value:u,op:"a"})}):e.push({param:s,value:l,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(s=>e+"="+this.encoder.encodeValue(s)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Ia({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(g0(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let s=this.map.get(t.param)||[];const l=s.indexOf(g0(t.value));-1!==l&&s.splice(l,1),s.length>0?this.map.set(t.param,s):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class hz{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function m0(r){return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer}function _0(r){return"undefined"!=typeof Blob&&r instanceof Blob}function v0(r){return"undefined"!=typeof FormData&&r instanceof FormData}class cd{constructor(t,e,s,l){let u;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||l?(this.body=void 0!==s?s:null,u=l):u=s,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Vs),this.context||(this.context=new hz),this.params){const h=this.params.toString();if(0===h.length)this.urlWithParams=e;else{const p=e.indexOf("?");this.urlWithParams=e+(-1===p?"?":p<e.length-1?"&":"")+h}}else this.params=new Ia,this.urlWithParams=e}serializeBody(){return null===this.body?null:m0(this.body)||_0(this.body)||v0(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Ia?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||v0(this.body)?null:_0(this.body)?this.body.type||null:m0(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ia?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var I;const e=t.method||this.method,s=t.url||this.url,l=t.responseType||this.responseType,u=void 0!==t.body?t.body:this.body,h=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,p=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let m=t.headers||this.headers,v=t.params||this.params;const T=null!=(I=t.context)?I:this.context;return void 0!==t.setHeaders&&(m=Object.keys(t.setHeaders).reduce((O,N)=>O.set(N,t.setHeaders[N]),m)),t.setParams&&(v=Object.keys(t.setParams).reduce((O,N)=>O.set(N,t.setParams[N]),v)),new cd(e,s,u,{params:v,headers:m,context:T,reportProgress:p,responseType:l,withCredentials:h})}}var vi=(()=>((vi=vi||{})[vi.Sent=0]="Sent",vi[vi.UploadProgress=1]="UploadProgress",vi[vi.ResponseHeader=2]="ResponseHeader",vi[vi.DownloadProgress=3]="DownloadProgress",vi[vi.Response=4]="Response",vi[vi.User=5]="User",vi))();class uE{constructor(t,e=200,s="OK"){this.headers=t.headers||new Vs,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||s,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class cE extends uE{constructor(t={}){super(t),this.type=vi.ResponseHeader}clone(t={}){return new cE({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class vg extends uE{constructor(t={}){super(t),this.type=vi.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new vg({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class y0 extends uE{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function hE(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let b0=(()=>{class r{constructor(e){this.handler=e}request(e,s,l={}){let u;if(e instanceof cd)u=e;else{let m,v;m=l.headers instanceof Vs?l.headers:new Vs(l.headers),l.params&&(v=l.params instanceof Ia?l.params:new Ia({fromObject:l.params})),u=new cd(e,s,void 0!==l.body?l.body:null,{headers:m,context:l.context,params:v,reportProgress:l.reportProgress,responseType:l.responseType||"json",withCredentials:l.withCredentials})}const h=wt(u).pipe(Ju(m=>this.handler.handle(m)));if(e instanceof cd||"events"===l.observe)return h;const p=h.pipe(Er(m=>m instanceof vg));switch(l.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe(xe(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return p.pipe(xe(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return p.pipe(xe(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return p.pipe(xe(m=>m.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${l.observe}}`)}}delete(e,s={}){return this.request("DELETE",e,s)}get(e,s={}){return this.request("GET",e,s)}head(e,s={}){return this.request("HEAD",e,s)}jsonp(e,s){return this.request("JSONP",e,{params:(new Ia).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,s={}){return this.request("OPTIONS",e,s)}patch(e,s,l={}){return this.request("PATCH",e,hE(l,s))}post(e,s,l={}){return this.request("POST",e,hE(l,s))}put(e,s,l={}){return this.request("PUT",e,hE(l,s))}}return r.\u0275fac=function(e){return new(e||r)(De(d0))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();class E0{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const T0=new lt("HTTP_INTERCEPTORS");let fz=(()=>{class r{intercept(e,s){return s.handle(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const gz=/^\)\]\}',?\n/;let C0=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ee(s=>{const l=this.xhrFactory.build();if(l.open(e.method,e.urlWithParams),e.withCredentials&&(l.withCredentials=!0),e.headers.forEach((N,V)=>l.setRequestHeader(N,V.join(","))),e.headers.has("Accept")||l.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const N=e.detectContentTypeHeader();null!==N&&l.setRequestHeader("Content-Type",N)}if(e.responseType){const N=e.responseType.toLowerCase();l.responseType="json"!==N?N:"text"}const u=e.serializeBody();let h=null;const p=()=>{if(null!==h)return h;const N=1223===l.status?204:l.status,V=l.statusText||"OK",Q=new Vs(l.getAllResponseHeaders()),X=function(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(l)||e.url;return h=new cE({headers:Q,status:N,statusText:V,url:X}),h},m=()=>{let{headers:N,status:V,statusText:Q,url:X}=p(),ue=null;204!==V&&(ue=void 0===l.response?l.responseText:l.response),0===V&&(V=ue?200:0);let ce=V>=200&&V<300;if("json"===e.responseType&&"string"==typeof ue){const ke=ue;ue=ue.replace(gz,"");try{ue=""!==ue?JSON.parse(ue):null}catch(Ue){ue=ke,ce&&(ce=!1,ue={error:Ue,text:ue})}}ce?(s.next(new vg({body:ue,headers:N,status:V,statusText:Q,url:X||void 0})),s.complete()):s.error(new y0({error:ue,headers:N,status:V,statusText:Q,url:X||void 0}))},v=N=>{const{url:V}=p(),Q=new y0({error:N,status:l.status||0,statusText:l.statusText||"Unknown Error",url:V||void 0});s.error(Q)};let T=!1;const I=N=>{T||(s.next(p()),T=!0);let V={type:vi.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(V.total=N.total),"text"===e.responseType&&!!l.responseText&&(V.partialText=l.responseText),s.next(V)},O=N=>{let V={type:vi.UploadProgress,loaded:N.loaded};N.lengthComputable&&(V.total=N.total),s.next(V)};return l.addEventListener("load",m),l.addEventListener("error",v),l.addEventListener("timeout",v),l.addEventListener("abort",v),e.reportProgress&&(l.addEventListener("progress",I),null!==u&&l.upload&&l.upload.addEventListener("progress",O)),l.send(u),s.next({type:vi.Sent}),()=>{l.removeEventListener("error",v),l.removeEventListener("abort",v),l.removeEventListener("load",m),l.removeEventListener("timeout",v),e.reportProgress&&(l.removeEventListener("progress",I),null!==u&&l.upload&&l.upload.removeEventListener("progress",O)),l.readyState!==l.DONE&&l.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(De(FD))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const dE=new lt("XSRF_COOKIE_NAME"),pE=new lt("XSRF_HEADER_NAME");class S0{}let _z=(()=>{class r{constructor(e,s,l){this.doc=e,this.platform=s,this.cookieName=l,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=RD(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(De(qt),De(Dh),De(dE))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})(),fE=(()=>{class r{constructor(e,s){this.tokenService=e,this.headerName=s}intercept(e,s){const l=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||l.startsWith("http://")||l.startsWith("https://"))return s.handle(e);const u=this.tokenService.getToken();return null!==u&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,u)})),s.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(De(S0),De(pE))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})(),vz=(()=>{class r{constructor(e,s){this.backend=e,this.injector=s,this.chain=null}handle(e){if(null===this.chain){const s=this.injector.get(T0,[]);this.chain=s.reduceRight((l,u)=>new E0(l,u),this.backend)}return this.chain.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(De(p0),De(mn))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})(),yz=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:fE,useClass:fz}]}}static withOptions(e={}){return{ngModule:r,providers:[e.cookieName?{provide:dE,useValue:e.cookieName}:[],e.headerName?{provide:pE,useValue:e.headerName}:[]]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({providers:[fE,{provide:T0,useExisting:fE,multi:!0},{provide:S0,useClass:_z},{provide:dE,useValue:"XSRF-TOKEN"},{provide:pE,useValue:"X-XSRF-TOKEN"}]}),r})(),bz=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({providers:[b0,{provide:d0,useClass:vz},C0,{provide:p0,useExisting:C0}],imports:[[yz.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),r})(),Ez=(()=>{class r{constructor(e){this.http=e}getDemoBlocks(){return this.http.get("assets/showUsage/demoBlocks/all.txt",{responseType:"text"}).pipe(xe(e=>JSON.parse(e)))}getSwaggerLinks(){return this.http.get("assets/loadAtStartup/swaggers.json",{responseType:"text"}).pipe(xe(e=>JSON.parse(e)))}getDemoBlock(e){return this.http.get(`assets/showUsage/demoBlocks/${e}.txt`,{responseType:"text"}).pipe(pr(l=>{}),xe(l=>l.toString()))}}return r.\u0275fac=function(e){return new(e||r)(De(b0))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function _E(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}class Fz extends a{constructor(t,e){super()}schedule(t,e=0){return this}}const Eg={setInterval(...r){const{delegate:t}=Eg;return((null==t?void 0:t.setInterval)||setInterval)(...r)},clearInterval(r){const{delegate:t}=Eg;return((null==t?void 0:t.clearInterval)||clearInterval)(r)},delegate:void 0};class vE extends Fz{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const s=this.id,l=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(l,s,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(l,this.id,e),this}requestAsyncId(t,e,s=0){return Eg.setInterval(t.flush.bind(t,this),s)}recycleAsyncId(t,e,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return e;Eg.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(t,e);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let l,s=!1;try{this.work(t)}catch(u){s=!0,l=u||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),l}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:s}=e;this.work=this.state=this.scheduler=null,this.pending=!1,n(s,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const I0={now:()=>(I0.delegate||Date).now(),delegate:void 0};class hd{constructor(t,e=hd.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,s){return new this.schedulerActionCtor(this,t).schedule(s,e)}}hd.now=I0.now;class yE extends hd{constructor(t,e=hd.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let s;this._active=!0;do{if(s=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,s){for(;t=e.shift();)t.unsubscribe();throw s}}}const bE=new yE(vE),D0=bE;function Uz(r,t){return r===t}function Tg(r){return Te((t,e)=>{Xe(r).subscribe(new Ie(e,()=>e.complete(),B)),!e.closed&&t.subscribe(e)})}function bl(r){return null!=r&&"false"!=`${r}`}function A0(r){return Array.isArray(r)?r:[r]}function yi(r){return null==r?"":"string"==typeof r?r:`${r}px`}function oc(r){return r instanceof wn?r.nativeElement:r}let EE;try{EE="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(r){EE=!1}let dd,El,TE,Hs=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function(r){return r===LD}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!EE)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(e){return new(e||r)(De(Dh))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),O0=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({}),r})();function pd(r){return function(){if(null==dd&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>dd=!0}))}finally{dd=dd||!1}return dd}()?r:!!r.capture}function jz(){if(null==El){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return El=!1,El;if("scrollBehavior"in document.documentElement.style)El=!0;else{const r=Element.prototype.scrollTo;El=!!r&&!/\{\s*\[native code\]\s*\}/.test(r.toString())}}return El}function Tl(r){return r.composedPath?r.composedPath()[0]:r.target}function CE(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}class Jz extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new we,this._typeaheadSubscription=a.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new we,this.change=new we,t instanceof al&&t.changes.subscribe(e=>{if(this._activeItem){const l=e.toArray().indexOf(this._activeItem);l>-1&&l!==this._activeItemIndex&&(this._activeItemIndex=l)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(pr(e=>this._pressedLetters.push(e)),function(r,t=bE){return Te((e,s)=>{let l=null,u=null,h=null;const p=()=>{if(l){l.unsubscribe(),l=null;const v=u;u=null,s.next(v)}};function m(){const v=h+r,T=t.now();if(T<v)return l=this.schedule(void 0,v-T),void s.add(l);p()}e.subscribe(new Ie(s,v=>{u=v,h=t.now(),l||(l=t.schedule(m,r),s.add(l))},()=>{p(),s.complete()},void 0,()=>{u=l=null}))})}(t),Er(()=>this._pressedLetters.length>0),xe(()=>this._pressedLetters.join(""))).subscribe(e=>{const s=this._getItemsArray();for(let l=1;l<s.length+1;l++){const u=(this._activeItemIndex+l)%s.length,h=s[u];if(!this._skipPredicateFn(h)&&0===h.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(u);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,l=["altKey","ctrlKey","metaKey","shiftKey"].every(u=>!t[u]||this._allowedModifierKeys.indexOf(u)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&l){this.setNextItemActive();break}return;case 38:if(this._vertical&&l){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&l){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&l){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&l){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&l){this.setLastItemActive();break}return;default:return void((l||_E(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),s="number"==typeof t?t:e.indexOf(t),l=e[s];this._activeItem=null==l?null:l,this._activeItemIndex=s}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let s=1;s<=e.length;s++){const l=(this._activeItemIndex+t*s+e.length)%e.length;if(!this._skipPredicateFn(e[l]))return void this.setActiveItem(l)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const s=this._getItemsArray();if(s[t]){for(;this._skipPredicateFn(s[t]);)if(!s[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof al?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}function SE(r){return 0===r.offsetX&&0===r.offsetY}function wE(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const n6=new lt("cdk-input-modality-detector-options"),i6={ignoreKeys:[18,17,224,91,16]},ac=pd({passive:!0,capture:!0});let r6=(()=>{class r{constructor(e,s,l,u){this._platform=e,this._mostRecentTarget=null,this._modality=new Zr(null),this._lastTouchMs=0,this._onKeydown=h=>{var p,m;(null==(m=null==(p=this._options)?void 0:p.ignoreKeys)?void 0:m.some(v=>v===h.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Tl(h))},this._onMousedown=h=>{Date.now()-this._lastTouchMs<650||(this._modality.next(SE(h)?"keyboard":"mouse"),this._mostRecentTarget=Tl(h))},this._onTouchstart=h=>{wE(h)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Tl(h))},this._options=Je(Je({},i6),u),this.modalityDetected=this._modality.pipe(Er((t,e)=>1<=e)),this.modalityChanged=this.modalityDetected.pipe(function(r,t=W){return r=null!=r?r:Uz,Te((e,s)=>{let l,u=!0;e.subscribe(new Ie(s,h=>{const p=t(h);(u||!r(l,p))&&(u=!1,l=p,s.next(h))}))})}()),e.isBrowser&&s.runOutsideAngular(()=>{l.addEventListener("keydown",this._onKeydown,ac),l.addEventListener("mousedown",this._onMousedown,ac),l.addEventListener("touchstart",this._onTouchstart,ac)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ac),document.removeEventListener("mousedown",this._onMousedown,ac),document.removeEventListener("touchstart",this._onTouchstart,ac))}}return r.\u0275fac=function(e){return new(e||r)(De(Hs),De(cn),De(qt),De(n6,8))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const s6=new lt("cdk-focus-monitor-default-options"),Sg=pd({passive:!0,capture:!0});let fd=(()=>{class r{constructor(e,s,l,u,h){this._ngZone=e,this._platform=s,this._inputModalityDetector=l,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new we,this._rootNodeFocusAndBlurListener=p=>{const m=Tl(p),v="focus"===p.type?this._onFocus:this._onBlur;for(let T=m;T;T=T.parentElement)v.call(this,p,T)},this._document=u,this._detectionMode=(null==h?void 0:h.detectionMode)||0}monitor(e,s=!1){const l=oc(e);if(!this._platform.isBrowser||1!==l.nodeType)return wt(null);const u=function(r){if(function(){if(null==TE){const r="undefined"!=typeof document?document.head:null;TE=!(!r||!r.createShadowRoot&&!r.attachShadow)}return TE}()){const t=r.getRootNode?r.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(l)||this._getDocument(),h=this._elementInfo.get(l);if(h)return s&&(h.checkChildren=!0),h.subject;const p={checkChildren:s,subject:new we,rootNode:u};return this._elementInfo.set(l,p),this._registerGlobalListeners(p),p.subject}stopMonitoring(e){const s=oc(e),l=this._elementInfo.get(s);l&&(l.subject.complete(),this._setClasses(s),this._elementInfo.delete(s),this._removeGlobalListeners(l))}focusVia(e,s,l){const u=oc(e);u===this._getDocument().activeElement?this._getClosestElementsInfo(u).forEach(([p,m])=>this._originChanged(p,s,m)):(this._setOrigin(s),"function"==typeof u.focus&&u.focus(l))}ngOnDestroy(){this._elementInfo.forEach((e,s)=>this.stopMonitoring(s))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,s){e.classList.toggle("cdk-focused",!!s),e.classList.toggle("cdk-touch-focused","touch"===s),e.classList.toggle("cdk-keyboard-focused","keyboard"===s),e.classList.toggle("cdk-mouse-focused","mouse"===s),e.classList.toggle("cdk-program-focused","program"===s)}_setOrigin(e,s=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&s,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,s){const l=this._elementInfo.get(s),u=Tl(e);!l||!l.checkChildren&&s!==u||this._originChanged(s,this._getFocusOrigin(u),l)}_onBlur(e,s){const l=this._elementInfo.get(s);!l||l.checkChildren&&e.relatedTarget instanceof Node&&s.contains(e.relatedTarget)||(this._setClasses(s),this._emitOrigin(l.subject,null))}_emitOrigin(e,s){this._ngZone.run(()=>e.next(s))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const s=e.rootNode,l=this._rootNodeFocusListenerCount.get(s)||0;l||this._ngZone.runOutsideAngular(()=>{s.addEventListener("focus",this._rootNodeFocusAndBlurListener,Sg),s.addEventListener("blur",this._rootNodeFocusAndBlurListener,Sg)}),this._rootNodeFocusListenerCount.set(s,l+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Tg(this._stopInputModalityDetector)).subscribe(u=>{this._setOrigin(u,!0)}))}_removeGlobalListeners(e){const s=e.rootNode;if(this._rootNodeFocusListenerCount.has(s)){const l=this._rootNodeFocusListenerCount.get(s);l>1?this._rootNodeFocusListenerCount.set(s,l-1):(s.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Sg),s.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Sg),this._rootNodeFocusListenerCount.delete(s))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,s,l){this._setClasses(e,s),this._emitOrigin(l.subject,s),this._lastFocusOrigin=s}_getClosestElementsInfo(e){const s=[];return this._elementInfo.forEach((l,u)=>{(u===e||l.checkChildren&&u.contains(e))&&s.push([u,l])}),s}}return r.\u0275fac=function(e){return new(e||r)(De(cn),De(Hs),De(r6),De(qt,8),De(s6,8))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const P0="cdk-high-contrast-black-on-white",F0="cdk-high-contrast-white-on-black",RE="cdk-high-contrast-active";let a6=(()=>{class r{constructor(e,s){this._platform=e,this._document=s}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const s=this._document.defaultView||window,l=s&&s.getComputedStyle?s.getComputedStyle(e):null,u=(l&&l.backgroundColor||"").replace(/ /g,"");switch(e.remove(),u){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(RE),e.remove(P0),e.remove(F0),this._hasCheckedHighContrastMode=!0;const s=this.getHighContrastMode();1===s?(e.add(RE),e.add(P0)):2===s&&(e.add(RE),e.add(F0))}}}return r.\u0275fac=function(e){return new(e||r)(De(Hs),De(qt))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const l6=new lt("cdk-dir-doc",{providedIn:"root",factory:function(){return Yc(qt)}});let IE=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new Rn,e){const l=e.documentElement?e.documentElement.dir:null,u=(e.body?e.body.dir:null)||l;this.value="ltr"===u||"rtl"===u?u:"ltr"}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(e){return new(e||r)(De(l6,8))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),gd=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({}),r})();const B0=new va("13.0.1");class V0{}const Us="*";function H0(r,t){return{type:7,name:r,definitions:t,options:{}}}function DE(r,t=null){return{type:4,styles:t,timings:r}}function U0(r,t=null){return{type:2,steps:r,options:t}}function Cl(r){return{type:6,styles:r,offset:null}}function G0(r,t,e){return{type:0,name:r,styles:t,options:e}}function AE(r,t,e=null){return{type:1,expr:r,animation:t,options:e}}function W0(r){Promise.resolve(null).then(r)}class lc{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){W0(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class j0{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,s=0,l=0;const u=this.players.length;0==u?W0(()=>this._onFinish()):this.players.forEach(h=>{h.onDone(()=>{++e==u&&this._onFinish()}),h.onDestroy(()=>{++s==u&&this._onDestroy()}),h.onStart(()=>{++l==u&&this._onStart()})}),this.totalTime=this.players.reduce((h,p)=>Math.max(h,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(s=>{const l=s.totalTime?Math.min(1,e/s.totalTime):1;s.setPosition(l)})}getPosition(){const t=this.players.reduce((e,s)=>null===e||s.totalTime>e.totalTime?s:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}function z0(){return"undefined"!=typeof window&&void 0!==window.document}function ME(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Da(r){switch(r.length){case 0:return new lc;case 1:return r[0];default:return new j0(r)}}function X0(r,t,e,s,l={},u={}){const h=[],p=[];let m=-1,v=null;if(s.forEach(T=>{const I=T.offset,O=I==m,N=O&&v||{};Object.keys(T).forEach(V=>{let Q=V,X=T[V];if("offset"!==V)switch(Q=t.normalizePropertyName(Q,h),X){case"!":X=l[V];break;case Us:X=u[V];break;default:X=t.normalizeStyleValue(V,Q,X,h)}N[Q]=X}),O||p.push(N),v=N,m=I}),h.length){const T="\n - ";throw new Error(`Unable to animate due to the following errors:${T}${h.join(T)}`)}return p}function xE(r,t,e,s){switch(t){case"start":r.onStart(()=>s(e&&NE(e,"start",r)));break;case"done":r.onDone(()=>s(e&&NE(e,"done",r)));break;case"destroy":r.onDestroy(()=>s(e&&NE(e,"destroy",r)))}}function NE(r,t,e){const s=e.totalTime,u=kE(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,null==s?r.totalTime:s,!!e.disabled),h=r._data;return null!=h&&(u._data=h),u}function kE(r,t,e,s,l="",u=0,h){return{element:r,triggerName:t,fromState:e,toState:s,phaseName:l,totalTime:u,disabled:!!h}}function kr(r,t,e){let s;return r instanceof Map?(s=r.get(t),s||r.set(t,s=e)):(s=r[t],s||(s=r[t]=e)),s}function K0(r){const t=r.indexOf(":");return[r.substring(1,t),r.substr(t+1)]}let LE=(r,t)=>!1,PE=(r,t)=>!1,Y0=(r,t,e)=>[];const $0=ME();($0||"undefined"!=typeof Element)&&(LE=z0()?(r,t)=>{for(;t&&t!==document.documentElement;){if(t===r)return!0;t=t.parentNode||t.host}return!1}:(r,t)=>r.contains(t),PE=(()=>{if($0||Element.prototype.matches)return(r,t)=>r.matches(t);{const r=Element.prototype,t=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector;return t?(e,s)=>t.apply(e,[s]):PE}})(),Y0=(r,t,e)=>{let s=[];if(e){const l=r.querySelectorAll(t);for(let u=0;u<l.length;u++)s.push(l[u])}else{const l=r.querySelector(t);l&&s.push(l)}return s});let Sl=null,J0=!1;function FE(r){Sl||(Sl=("undefined"!=typeof document?document.body:null)||{},J0=!!Sl.style&&"WebkitAppearance"in Sl.style);let t=!0;return Sl.style&&!function(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in Sl.style,!t&&J0&&(t="Webkit"+r.charAt(0).toUpperCase()+r.substr(1)in Sl.style)),t}const BE=PE,VE=LE,HE=Y0;function Q0(r){const t={};return Object.keys(r).forEach(e=>{const s=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[s]=r[e]}),t}let Z0=(()=>{class r{validateStyleProperty(e){return FE(e)}matchesElement(e,s){return BE(e,s)}containsElement(e,s){return VE(e,s)}query(e,s,l){return HE(e,s,l)}computeStyle(e,s,l){return l||""}animate(e,s,l,u,h,p=[],m){return new lc(l,u)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})(),UE=(()=>{class r{}return r.NOOP=new Z0,r})();const GE="ng-enter",wg="ng-leave",Rg="ng-trigger",Ig=".ng-trigger",eM="ng-animating",WE=".ng-animating";function wl(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:jE(parseFloat(t[1]),t[2])}function jE(r,t){return"s"===t?1e3*r:r}function Dg(r,t,e){return r.hasOwnProperty("duration")?r:function(r,t,e){let l,u=0,h="";if("string"==typeof r){const p=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return t.push(`The provided timing value "${r}" is invalid.`),{duration:0,delay:0,easing:""};l=jE(parseFloat(p[1]),p[2]);const m=p[3];null!=m&&(u=jE(parseFloat(m),p[4]));const v=p[5];v&&(h=v)}else l=r;if(!e){let p=!1,m=t.length;l<0&&(t.push("Duration values below 0 are not allowed for this animation step."),p=!0),u<0&&(t.push("Delay values below 0 are not allowed for this animation step."),p=!0),p&&t.splice(m,0,`The provided timing value "${r}" is invalid.`)}return{duration:l,delay:u,easing:h}}(r,t,e)}function uc(r,t={}){return Object.keys(r).forEach(e=>{t[e]=r[e]}),t}function Aa(r,t,e={}){if(t)for(let s in r)e[s]=r[s];else uc(r,e);return e}function nM(r,t,e){return e?t+":"+e+";":""}function iM(r){let t="";for(let e=0;e<r.style.length;e++){const s=r.style.item(e);t+=nM(0,s,r.style.getPropertyValue(s))}for(const e in r.style)r.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=nM(0,v6(e),r.style[e]));r.setAttribute("style",t)}function os(r,t,e){r.style&&(Object.keys(t).forEach(s=>{const l=XE(s);e&&!e.hasOwnProperty(s)&&(e[s]=r.style[l]),r.style[l]=t[s]}),ME()&&iM(r))}function Rl(r,t){r.style&&(Object.keys(t).forEach(e=>{const s=XE(e);r.style[s]=""}),ME()&&iM(r))}function md(r){return Array.isArray(r)?1==r.length?r[0]:U0(r):r}const zE=new RegExp("{{\\s*(.+?)\\s*}}","g");function rM(r){let t=[];if("string"==typeof r){let e;for(;e=zE.exec(r);)t.push(e[1]);zE.lastIndex=0}return t}function Ag(r,t,e){const s=r.toString(),l=s.replace(zE,(u,h)=>{let p=t[h];return t.hasOwnProperty(h)||(e.push(`Please provide a value for the animation param ${h}`),p=""),p.toString()});return l==s?r:l}function Og(r){const t=[];let e=r.next();for(;!e.done;)t.push(e.value),e=r.next();return t}const _6=/-+([a-z0-9])/g;function XE(r){return r.replace(_6,(...t)=>t[1].toUpperCase())}function v6(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function oM(r,t){return 0===r||0===t}function sM(r,t,e){const s=Object.keys(e);if(s.length&&t.length){let u=t[0],h=[];if(s.forEach(p=>{u.hasOwnProperty(p)||h.push(p),u[p]=e[p]}),h.length)for(var l=1;l<t.length;l++){let p=t[l];h.forEach(function(m){p[m]=KE(r,m)})}}return t}function Lr(r,t,e){switch(t.type){case 7:return r.visitTrigger(t,e);case 0:return r.visitState(t,e);case 1:return r.visitTransition(t,e);case 2:return r.visitSequence(t,e);case 3:return r.visitGroup(t,e);case 4:return r.visitAnimate(t,e);case 5:return r.visitKeyframes(t,e);case 6:return r.visitStyle(t,e);case 8:return r.visitReference(t,e);case 9:return r.visitAnimateChild(t,e);case 10:return r.visitAnimateRef(t,e);case 11:return r.visitQuery(t,e);case 12:return r.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function KE(r,t){return window.getComputedStyle(r)[t]}function y6(r,t){const e=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(s=>function(r,t,e){if(":"==r[0]){const m=function(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,s)=>parseFloat(s)>parseFloat(e);case":decrement":return(e,s)=>parseFloat(s)<parseFloat(e);default:return t.push(`The transition alias value "${r}" is not supported`),"* => *"}}(r,e);if("function"==typeof m)return void t.push(m);r=m}const s=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==s||s.length<4)return e.push(`The provided transition expression "${r}" is not supported`),t;const l=s[1],u=s[2],h=s[3];t.push(aM(l,h));"<"==u[0]&&!("*"==l&&"*"==h)&&t.push(aM(h,l))}(s,e,t)):e.push(r),e}const xg=new Set(["true","1"]),Ng=new Set(["false","0"]);function aM(r,t){const e=xg.has(r)||Ng.has(r),s=xg.has(t)||Ng.has(t);return(l,u)=>{let h="*"==r||r==l,p="*"==t||t==u;return!h&&e&&"boolean"==typeof l&&(h=l?xg.has(r):Ng.has(r)),!p&&s&&"boolean"==typeof u&&(p=u?xg.has(t):Ng.has(t)),h&&p}}const T6=new RegExp("s*:selfs*,?","g");function YE(r,t,e){return new C6(r).build(t,e)}class C6{constructor(t){this._driver=t}build(t,e){const s=new R6(e);return this._resetContextStyleTimingState(s),Lr(this,md(t),s)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let s=e.queryCount=0,l=e.depCount=0;const u=[],h=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(p=>{if(this._resetContextStyleTimingState(e),0==p.type){const m=p,v=m.name;v.toString().split(/\s*,\s*/).forEach(T=>{m.name=T,u.push(this.visitState(m,e))}),m.name=v}else if(1==p.type){const m=this.visitTransition(p,e);s+=m.queryCount,l+=m.depCount,h.push(m)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:u,transitions:h,queryCount:s,depCount:l,options:null}}visitState(t,e){const s=this.visitStyle(t.styles,e),l=t.options&&t.options.params||null;if(s.containsDynamicStyles){const u=new Set,h=l||{};if(s.styles.forEach(p=>{if(kg(p)){const m=p;Object.keys(m).forEach(v=>{rM(m[v]).forEach(T=>{h.hasOwnProperty(T)||u.add(T)})})}}),u.size){const p=Og(u.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${p.join(", ")}`)}}return{type:0,name:t.name,style:s,options:l?{params:l}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const s=Lr(this,md(t.animation),e);return{type:1,matchers:y6(t.expr,e.errors),animation:s,queryCount:e.queryCount,depCount:e.depCount,options:Il(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(s=>Lr(this,s,e)),options:Il(t.options)}}visitGroup(t,e){const s=e.currentTime;let l=0;const u=t.steps.map(h=>{e.currentTime=s;const p=Lr(this,h,e);return l=Math.max(l,e.currentTime),p});return e.currentTime=l,{type:3,steps:u,options:Il(t.options)}}visitAnimate(t,e){const s=function(r,t){let e=null;if(r.hasOwnProperty("duration"))e=r;else if("number"==typeof r)return $E(Dg(r,t).duration,0,"");const s=r;if(s.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=$E(0,0,"");return u.dynamic=!0,u.strValue=s,u}return e=e||Dg(s,t),$E(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=s;let l,u=t.styles?t.styles:Cl({});if(5==u.type)l=this.visitKeyframes(u,e);else{let h=t.styles,p=!1;if(!h){p=!0;const v={};s.easing&&(v.easing=s.easing),h=Cl(v)}e.currentTime+=s.duration+s.delay;const m=this.visitStyle(h,e);m.isEmptyStep=p,l=m}return e.currentAnimateTimings=null,{type:4,timings:s,style:l,options:null}}visitStyle(t,e){const s=this._makeStyleAst(t,e);return this._validateStyleAst(s,e),s}_makeStyleAst(t,e){const s=[];Array.isArray(t.styles)?t.styles.forEach(h=>{"string"==typeof h?h==Us?s.push(h):e.errors.push(`The provided style string value ${h} is not allowed.`):s.push(h)}):s.push(t.styles);let l=!1,u=null;return s.forEach(h=>{if(kg(h)){const p=h,m=p.easing;if(m&&(u=m,delete p.easing),!l)for(let v in p)if(p[v].toString().indexOf("{{")>=0){l=!0;break}}}),{type:6,styles:s,easing:u,offset:t.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(t,e){const s=e.currentAnimateTimings;let l=e.currentTime,u=e.currentTime;s&&u>0&&(u-=s.duration+s.delay),t.styles.forEach(h=>{"string"!=typeof h&&Object.keys(h).forEach(p=>{if(!this._driver.validateStyleProperty(p))return void e.errors.push(`The provided animation property "${p}" is not a supported CSS property for animations`);const m=e.collectedStyles[e.currentQuerySelector],v=m[p];let T=!0;v&&(u!=l&&u>=v.startTime&&l<=v.endTime&&(e.errors.push(`The CSS property "${p}" that exists between the times of "${v.startTime}ms" and "${v.endTime}ms" is also being animated in a parallel animation between the times of "${u}ms" and "${l}ms"`),T=!1),u=v.startTime),T&&(m[p]={startTime:u,endTime:l}),e.options&&function(r,t,e){const s=t.params||{},l=rM(r);l.length&&l.forEach(u=>{s.hasOwnProperty(u)||e.push(`Unable to resolve the local animation param ${u} in the given list of values`)})}(h[p],e.options,e.errors)})})}visitKeyframes(t,e){const s={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),s;let u=0;const h=[];let p=!1,m=!1,v=0;const T=t.steps.map(ue=>{const ce=this._makeStyleAst(ue,e);let ke=null!=ce.offset?ce.offset:function(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(kg(e)&&e.hasOwnProperty("offset")){const s=e;t=parseFloat(s.offset),delete s.offset}});else if(kg(r)&&r.hasOwnProperty("offset")){const e=r;t=parseFloat(e.offset),delete e.offset}return t}(ce.styles),Ue=0;return null!=ke&&(u++,Ue=ce.offset=ke),m=m||Ue<0||Ue>1,p=p||Ue<v,v=Ue,h.push(Ue),ce});m&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),p&&e.errors.push("Please ensure that all keyframe offsets are in order");const I=t.steps.length;let O=0;u>0&&u<I?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==u&&(O=1/(I-1));const N=I-1,V=e.currentTime,Q=e.currentAnimateTimings,X=Q.duration;return T.forEach((ue,ce)=>{const ke=O>0?ce==N?1:O*ce:h[ce],Ue=ke*X;e.currentTime=V+Q.delay+Ue,Q.duration=Ue,this._validateStyleAst(ue,e),ue.offset=ke,s.styles.push(ue)}),s}visitReference(t,e){return{type:8,animation:Lr(this,md(t.animation),e),options:Il(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Il(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Il(t.options)}}visitQuery(t,e){const s=e.currentQuerySelector,l=t.options||{};e.queryCount++,e.currentQuery=t;const[u,h]=function(r){const t=!!r.split(/\s*,\s*/).find(e=>":self"==e);return t&&(r=r.replace(T6,"")),r=r.replace(/@\*/g,Ig).replace(/@\w+/g,e=>Ig+"-"+e.substr(1)).replace(/:animating/g,WE),[r,t]}(t.selector);e.currentQuerySelector=s.length?s+" "+u:u,kr(e.collectedStyles,e.currentQuerySelector,{});const p=Lr(this,md(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=s,{type:11,selector:u,limit:l.limit||0,optional:!!l.optional,includeSelf:h,animation:p,originalSelector:t.selector,options:Il(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const s="full"===t.timings?{duration:0,delay:0,easing:"full"}:Dg(t.timings,e.errors,!0);return{type:12,animation:Lr(this,md(t.animation),e),timings:s,options:null}}}class R6{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function kg(r){return!Array.isArray(r)&&"object"==typeof r}function Il(r){return r?(r=uc(r)).params&&(r.params=function(r){return r?uc(r):null}(r.params)):r={},r}function $E(r,t,e){return{duration:r,delay:t,easing:e}}function JE(r,t,e,s,l,u,h=null,p=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:s,duration:l,delay:u,totalTime:l+u,easing:h,subTimeline:p}}class Lg{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let s=this._map.get(t);s||this._map.set(t,s=[]),s.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const M6=new RegExp(":enter","g"),N6=new RegExp(":leave","g");function QE(r,t,e,s,l,u={},h={},p,m,v=[]){return(new k6).buildKeyframes(r,t,e,s,l,u,h,p,m,v)}class k6{buildKeyframes(t,e,s,l,u,h,p,m,v,T=[]){v=v||new Lg;const I=new ZE(t,e,v,l,u,T,[]);I.options=m,I.currentTimeline.setStyles([h],null,I.errors,m),Lr(this,s,I);const O=I.timelines.filter(N=>N.containsAnimation());if(O.length&&Object.keys(p).length){const N=O[O.length-1];N.allowOnlyTimelineStyles()||N.setStyles([p],null,I.errors,m)}return O.length?O.map(N=>N.buildKeyframes()):[JE(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const s=e.subInstructions.consume(e.element);if(s){const l=e.createSubContext(t.options),u=e.currentTimeline.currentTime,h=this._visitSubInstructions(s,l,l.options);u!=h&&e.transformIntoNewTimeline(h)}e.previousNode=t}visitAnimateRef(t,e){const s=e.createSubContext(t.options);s.transformIntoNewTimeline(),this.visitReference(t.animation,s),e.transformIntoNewTimeline(s.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,s){let u=e.currentTimeline.currentTime;const h=null!=s.duration?wl(s.duration):null,p=null!=s.delay?wl(s.delay):null;return 0!==h&&t.forEach(m=>{const v=e.appendInstructionToTimeline(m,h,p);u=Math.max(u,v.duration+v.delay)}),u}visitReference(t,e){e.updateOptions(t.options,!0),Lr(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const s=e.subContextCount;let l=e;const u=t.options;if(u&&(u.params||u.delay)&&(l=e.createSubContext(u),l.transformIntoNewTimeline(),null!=u.delay)){6==l.previousNode.type&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=Pg);const h=wl(u.delay);l.delayNextStep(h)}t.steps.length&&(t.steps.forEach(h=>Lr(this,h,l)),l.currentTimeline.applyStylesToKeyframe(),l.subContextCount>s&&l.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const s=[];let l=e.currentTimeline.currentTime;const u=t.options&&t.options.delay?wl(t.options.delay):0;t.steps.forEach(h=>{const p=e.createSubContext(t.options);u&&p.delayNextStep(u),Lr(this,h,p),l=Math.max(l,p.currentTimeline.currentTime),s.push(p.currentTimeline)}),s.forEach(h=>e.currentTimeline.mergeTimelineCollectedStyles(h)),e.transformIntoNewTimeline(l),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const s=t.strValue;return Dg(e.params?Ag(s,e.params,e.errors):s,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const s=e.currentAnimateTimings=this._visitTiming(t.timings,e),l=e.currentTimeline;s.delay&&(e.incrementTime(s.delay),l.snapshotCurrentStyles());const u=t.style;5==u.type?this.visitKeyframes(u,e):(e.incrementTime(s.duration),this.visitStyle(u,e),l.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const s=e.currentTimeline,l=e.currentAnimateTimings;!l&&s.getCurrentStyleProperties().length&&s.forwardFrame();const u=l&&l.easing||t.easing;t.isEmptyStep?s.applyEmptyStep(u):s.setStyles(t.styles,u,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const s=e.currentAnimateTimings,l=e.currentTimeline.duration,u=s.duration,p=e.createSubContext().currentTimeline;p.easing=s.easing,t.styles.forEach(m=>{p.forwardTime((m.offset||0)*u),p.setStyles(m.styles,m.easing,e.errors,e.options),p.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(p),e.transformIntoNewTimeline(l+u),e.previousNode=t}visitQuery(t,e){const s=e.currentTimeline.currentTime,l=t.options||{},u=l.delay?wl(l.delay):0;u&&(6===e.previousNode.type||0==s&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Pg);let h=s;const p=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!l.optional,e.errors);e.currentQueryTotal=p.length;let m=null;p.forEach((v,T)=>{e.currentQueryIndex=T;const I=e.createSubContext(t.options,v);u&&I.delayNextStep(u),v===e.element&&(m=I.currentTimeline),Lr(this,t.animation,I),I.currentTimeline.applyStylesToKeyframe(),h=Math.max(h,I.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(h),m&&(e.currentTimeline.mergeTimelineCollectedStyles(m),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const s=e.parentContext,l=e.currentTimeline,u=t.timings,h=Math.abs(u.duration),p=h*(e.currentQueryTotal-1);let m=h*e.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":m=p-m;break;case"full":m=s.currentStaggerTime}const T=e.currentTimeline;m&&T.delayNextStep(m);const I=T.currentTime;Lr(this,t.animation,e),e.previousNode=t,s.currentStaggerTime=l.currentTime-I+(l.startTime-s.currentTimeline.startTime)}}const Pg={};class ZE{constructor(t,e,s,l,u,h,p,m){this._driver=t,this.element=e,this.subInstructions=s,this._enterClassName=l,this._leaveClassName=u,this.errors=h,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Pg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new Fg(this._driver,e,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const s=t;let l=this.options;null!=s.duration&&(l.duration=wl(s.duration)),null!=s.delay&&(l.delay=wl(s.delay));const u=s.params;if(u){let h=l.params;h||(h=this.options.params={}),Object.keys(u).forEach(p=>{(!e||!h.hasOwnProperty(p))&&(h[p]=Ag(u[p],h,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const s=t.params={};Object.keys(e).forEach(l=>{s[l]=e[l]})}}return t}createSubContext(t=null,e,s){const l=e||this.element,u=new ZE(this._driver,l,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(l,s||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(t),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(t){return this.previousNode=Pg,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,s){const l={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=s?s:0)+t.delay,easing:""},u=new L6(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,l,t.stretchStartingKeyframe);return this.timelines.push(u),l}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,s,l,u,h){let p=[];if(l&&p.push(this.element),t.length>0){t=(t=t.replace(M6,"."+this._enterClassName)).replace(N6,"."+this._leaveClassName);let v=this._driver.query(this.element,t,1!=s);0!==s&&(v=s<0?v.slice(v.length+s,v.length):v.slice(0,s)),p.push(...v)}return!u&&0==p.length&&h.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),p}}class Fg{constructor(t,e,s,l){this._driver=t,this.element=e,this.startTime=s,this._elementTimelineStylesLookup=l,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Fg(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Us,this._currentKeyframe[e]=Us}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,s,l){e&&(this._previousKeyframe.easing=e);const u=l&&l.params||{},h=function(r,t){const e={};let s;return r.forEach(l=>{"*"===l?(s=s||Object.keys(t),s.forEach(u=>{e[u]=Us})):Aa(l,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(h).forEach(p=>{const m=Ag(h[p],u,s);this._pendingStyles[p]=m,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:Us),this._updateStyle(p,m)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(s=>{this._currentKeyframe[s]=t[s]}),Object.keys(this._localTimelineStyles).forEach(s=>{this._currentKeyframe.hasOwnProperty(s)||(this._currentKeyframe[s]=this._localTimelineStyles[s])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const s=this._styleSummary[e],l=t._styleSummary[e];(!s||l.time>s.time)&&this._updateStyle(e,l.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,s=1===this._keyframes.size&&0===this.duration;let l=[];this._keyframes.forEach((p,m)=>{const v=Aa(p,!0);Object.keys(v).forEach(T=>{const I=v[T];"!"==I?t.add(T):I==Us&&e.add(T)}),s||(v.offset=m/this.duration),l.push(v)});const u=t.size?Og(t.values()):[],h=e.size?Og(e.values()):[];if(s){const p=l[0],m=uc(p);p.offset=0,m.offset=1,l=[p,m]}return JE(this.element,l,u,h,this.duration,this.startTime,this.easing,!1)}}class L6 extends Fg{constructor(t,e,s,l,u,h,p=!1){super(t,e,h.delay),this.keyframes=s,this.preStyleProps=l,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:h.duration,delay:h.delay,easing:h.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:s,easing:l}=this.timings;if(this._stretchStartingKeyframe&&e){const u=[],h=s+e,p=e/h,m=Aa(t[0],!1);m.offset=0,u.push(m);const v=Aa(t[0],!1);v.offset=cM(p),u.push(v);const T=t.length-1;for(let I=1;I<=T;I++){let O=Aa(t[I],!1);O.offset=cM((e+O.offset*s)/h),u.push(O)}s=h,e=0,l="",t=u}return JE(this.element,t,this.preStyleProps,this.postStyleProps,s,e,l,!0)}}function cM(r,t=3){const e=Math.pow(10,t-1);return Math.round(r*e)/e}class qE{}class F6 extends qE{normalizePropertyName(t,e){return XE(t)}normalizeStyleValue(t,e,s,l){let u="";const h=s.toString().trim();if(B6[e]&&0!==s&&"0"!==s)if("number"==typeof s)u="px";else{const p=s.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&l.push(`Please provide a CSS unit value for ${t}:${s}`)}return h+u}}const B6=(()=>function(r){const t={};return r.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function hM(r,t,e,s,l,u,h,p,m,v,T,I,O){return{type:0,element:r,triggerName:t,isRemovalTransition:l,fromState:e,fromStyles:u,toState:s,toStyles:h,timelines:p,queriedElements:m,preStyleProps:v,postStyleProps:T,totalTime:I,errors:O}}const eT={};class dM{constructor(t,e,s){this._triggerName=t,this.ast=e,this._stateStyles=s}match(t,e,s,l){return function(r,t,e,s,l){return r.some(u=>u(t,e,s,l))}(this.ast.matchers,t,e,s,l)}buildStyles(t,e,s){const l=this._stateStyles["*"],u=this._stateStyles[t],h=l?l.buildStyles(e,s):{};return u?u.buildStyles(e,s):h}build(t,e,s,l,u,h,p,m,v,T){const I=[],O=this.ast.options&&this.ast.options.params||eT,V=this.buildStyles(s,p&&p.params||eT,I),Q=m&&m.params||eT,X=this.buildStyles(l,Q,I),ue=new Set,ce=new Map,ke=new Map,Ue="void"===l,ct={params:Je(Je({},O),Q)},Ft=T?[]:QE(t,e,this.ast.animation,u,h,V,X,ct,v,I);let Xt=0;if(Ft.forEach(Gn=>{Xt=Math.max(Gn.duration+Gn.delay,Xt)}),I.length)return hM(e,this._triggerName,s,l,Ue,V,X,[],[],ce,ke,Xt,I);Ft.forEach(Gn=>{const Sn=Gn.element,Ot=kr(ce,Sn,{});Gn.preStyleProps.forEach(bi=>Ot[bi]=!0);const Gi=kr(ke,Sn,{});Gn.postStyleProps.forEach(bi=>Gi[bi]=!0),Sn!==e&&ue.add(Sn)});const In=Og(ue.values());return hM(e,this._triggerName,s,l,Ue,V,X,Ft,In,ce,ke,Xt)}}class U6{constructor(t,e,s){this.styles=t,this.defaultParams=e,this.normalizer=s}buildStyles(t,e){const s={},l=uc(this.defaultParams);return Object.keys(t).forEach(u=>{const h=t[u];null!=h&&(l[u]=h)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const h=u;Object.keys(h).forEach(p=>{let m=h[p];m.length>1&&(m=Ag(m,l,e));const v=this.normalizer.normalizePropertyName(p,e);m=this.normalizer.normalizeStyleValue(p,v,m,e),s[v]=m})}}),s}}class W6{constructor(t,e,s){this.name=t,this.ast=e,this._normalizer=s,this.transitionFactories=[],this.states={},e.states.forEach(l=>{this.states[l.name]=new U6(l.style,l.options&&l.options.params||{},s)}),pM(this.states,"true","1"),pM(this.states,"false","0"),e.transitions.forEach(l=>{this.transitionFactories.push(new dM(t,l,this.states))}),this.fallbackTransition=function(r,t,e){return new dM(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(h,p)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,s,l){return this.transitionFactories.find(h=>h.match(t,e,s,l))||null}matchStyles(t,e,s){return this.fallbackTransition.buildStyles(t,e,s)}}function pM(r,t,e){r.hasOwnProperty(t)?r.hasOwnProperty(e)||(r[e]=r[t]):r.hasOwnProperty(e)&&(r[t]=r[e])}const z6=new Lg;class X6{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._animations={},this._playersById={},this.players=[]}register(t,e){const s=[],l=YE(this._driver,e,s);if(s.length)throw new Error(`Unable to build the animation due to the following errors: ${s.join("\n")}`);this._animations[t]=l}_buildPlayer(t,e,s){const l=t.element,u=X0(0,this._normalizer,0,t.keyframes,e,s);return this._driver.animate(l,u,t.duration,t.delay,t.easing,[],!0)}create(t,e,s={}){const l=[],u=this._animations[t];let h;const p=new Map;if(u?(h=QE(this._driver,e,u,GE,wg,{},{},s,z6,l),h.forEach(T=>{const I=kr(p,T.element,{});T.postStyleProps.forEach(O=>I[O]=null)})):(l.push("The requested animation doesn't exist or has already been destroyed"),h=[]),l.length)throw new Error(`Unable to create the animation due to the following errors: ${l.join("\n")}`);p.forEach((T,I)=>{Object.keys(T).forEach(O=>{T[O]=this._driver.computeStyle(I,O,Us)})});const v=Da(h.map(T=>{const I=p.get(T.element);return this._buildPlayer(T,{},I)}));return this._playersById[t]=v,v.onDestroy(()=>this.destroy(t)),this.players.push(v),v}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const s=this.players.indexOf(e);s>=0&&this.players.splice(s,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,s,l){const u=kE(e,"","","");return xE(this._getPlayer(t),s,u,l),()=>{}}command(t,e,s,l){if("register"==s)return void this.register(t,l[0]);if("create"==s)return void this.create(t,e,l[0]||{});const u=this._getPlayer(t);switch(s){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(l[0]));break;case"destroy":this.destroy(t)}}}const fM="ng-animate-queued",gM="ng-animate-disabled",mM=".ng-animate-disabled",J6=[],_M={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Q6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},eo="__ng_removed";class tT{constructor(t,e=""){this.namespaceId=e;const s=t&&t.hasOwnProperty("value");if(this.value=null!=(r=s?t.value:t)?r:null,s){const u=uc(t);delete u.value,this.options=u}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const s=this.options.params;Object.keys(e).forEach(l=>{null==s[l]&&(s[l]=e[l])})}}}const _d="void",nT=new tT(_d);class Z6{constructor(t,e,s){this.id=t,this.hostElement=e,this._engine=s,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,to(e,this._hostClassName)}listen(t,e,s,l){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${s}" because the animation trigger "${e}" doesn't exist!`);if(null==s||0==s.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=s)&&"done"!=r)throw new Error(`The provided animation trigger event "${s}" for the animation trigger "${e}" is not supported!`);var r;const u=kr(this._elementListeners,t,[]),h={name:e,phase:s,callback:l};u.push(h);const p=kr(this._engine.statesByElement,t,{});return p.hasOwnProperty(e)||(to(t,Rg),to(t,Rg+"-"+e),p[e]=nT),()=>{this._engine.afterFlush(()=>{const m=u.indexOf(h);m>=0&&u.splice(m,1),this._triggers[e]||delete p[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,s,l=!0){const u=this._getTrigger(e),h=new iT(this.id,e,t);let p=this._engine.statesByElement.get(t);p||(to(t,Rg),to(t,Rg+"-"+e),this._engine.statesByElement.set(t,p={}));let m=p[e];const v=new tT(s,this.id);if(!(s&&s.hasOwnProperty("value"))&&m&&v.absorbOptions(m.options),p[e]=v,m||(m=nT),v.value!==_d&&m.value===v.value){if(!function(r,t){const e=Object.keys(r),s=Object.keys(t);if(e.length!=s.length)return!1;for(let l=0;l<e.length;l++){const u=e[l];if(!t.hasOwnProperty(u)||r[u]!==t[u])return!1}return!0}(m.params,v.params)){const Q=[],X=u.matchStyles(m.value,m.params,Q),ue=u.matchStyles(v.value,v.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{Rl(t,X),os(t,ue)})}return}const O=kr(this._engine.playersByElement,t,[]);O.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==e&&Q.queued&&Q.destroy()});let N=u.matchTransition(m.value,v.value,t,v.params),V=!1;if(!N){if(!l)return;N=u.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:N,fromState:m,toState:v,player:h,isFallbackTransition:V}),V||(to(t,fM),h.onStart(()=>{cc(t,fM)})),h.onDone(()=>{let Q=this.players.indexOf(h);Q>=0&&this.players.splice(Q,1);const X=this._engine.playersByElement.get(t);if(X){let ue=X.indexOf(h);ue>=0&&X.splice(ue,1)}}),this.players.push(h),O.push(h),h}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,s)=>{delete e[t]}),this._elementListeners.forEach((e,s)=>{this._elementListeners.set(s,e.filter(l=>l.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(s=>s.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const s=this._engine.driver.query(t,Ig,!0);s.forEach(l=>{if(l[eo])return;const u=this._engine.fetchNamespacesByElement(l);u.size?u.forEach(h=>h.triggerLeaveAnimation(l,e,!1,!0)):this.clearElementCache(l)}),this._engine.afterFlushAnimationsDone(()=>s.forEach(l=>this.clearElementCache(l)))}triggerLeaveAnimation(t,e,s,l){const u=this._engine.statesByElement.get(t);if(u){const h=[];if(Object.keys(u).forEach(p=>{if(this._triggers[p]){const m=this.trigger(t,p,_d,l);m&&h.push(m)}}),h.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),s&&Da(h).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),s=this._engine.statesByElement.get(t);if(e&&s){const l=new Set;e.forEach(u=>{const h=u.name;if(l.has(h))return;l.add(h);const m=this._triggers[h].fallbackTransition,v=s[h]||nT,T=new tT(_d),I=new iT(this.id,h,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:h,transition:m,fromState:v,toState:T,player:I,isFallbackTransition:!0})})}}removeNode(t,e){const s=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let l=!1;if(s.totalAnimations){const u=s.players.length?s.playersByQueriedElement.get(t):[];if(u&&u.length)l=!0;else{let h=t;for(;h=h.parentNode;)if(s.statesByElement.get(h)){l=!0;break}}}if(this.prepareLeaveAnimationListeners(t),l)s.markElementAsRemoved(this.id,t,!1,e);else{const u=t[eo];(!u||u===_M)&&(s.afterFlush(()=>this.clearElementCache(t)),s.destroyInnerAnimations(t),s._onRemovalComplete(t,e))}}insertNode(t,e){to(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(s=>{const l=s.player;if(l.destroyed)return;const u=s.element,h=this._elementListeners.get(u);h&&h.forEach(p=>{if(p.name==s.triggerName){const m=kE(u,s.triggerName,s.fromState.value,s.toState.value);m._data=t,xE(s.player,p.phase,m,p.callback)}}),l.markedForDestroy?this._engine.afterFlush(()=>{l.destroy()}):e.push(s)}),this._queue=[],e.sort((s,l)=>{const u=s.transition.ast.depCount,h=l.transition.ast.depCount;return 0==u||0==h?u-h:this._engine.driver.containsElement(s.element,l.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(s=>s.element===t)||e,e}}class q6{constructor(t,e,s){this.bodyNode=t,this.driver=e,this._normalizer=s,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(l,u)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(s=>{s.queued&&t.push(s)})}),t}createNamespace(t,e){const s=new Z6(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(s,e):(this.newHostElements.set(e,s),this.collectEnterElement(e)),this._namespaceLookup[t]=s}_balanceNamespaceList(t,e){const s=this._namespaceList.length-1;if(s>=0){let l=!1;for(let u=s;u>=0;u--)if(this.driver.containsElement(this._namespaceList[u].hostElement,e)){this._namespaceList.splice(u+1,0,t),l=!0;break}l||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let s=this._namespaceLookup[t];return s||(s=this.createNamespace(t,e)),s}registerTrigger(t,e,s){let l=this._namespaceLookup[t];l&&l.register(e,s)&&this.totalAnimations++}destroy(t,e){if(!t)return;const s=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(s.hostElement),delete this._namespaceLookup[t];const l=this._namespaceList.indexOf(s);l>=0&&this._namespaceList.splice(l,1)}),this.afterFlushAnimationsDone(()=>s.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,s=this.statesByElement.get(t);if(s){const l=Object.keys(s);for(let u=0;u<l.length;u++){const h=s[l[u]].namespaceId;if(h){const p=this._fetchNamespace(h);p&&e.add(p)}}}return e}trigger(t,e,s,l){if(Bg(e)){const u=this._fetchNamespace(t);if(u)return u.trigger(e,s,l),!0}return!1}insertNode(t,e,s,l){if(!Bg(e))return;const u=e[eo];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const h=this.collectedLeaveElements.indexOf(e);h>=0&&this.collectedLeaveElements.splice(h,1)}if(t){const h=this._fetchNamespace(t);h&&h.insertNode(e,s)}l&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),to(t,gM)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),cc(t,gM))}removeNode(t,e,s,l){if(Bg(e)){const u=t?this._fetchNamespace(t):null;if(u?u.removeNode(e,l):this.markElementAsRemoved(t,e,!1,l),s){const h=this.namespacesByHostElement.get(e);h&&h.id!==t&&h.removeNode(e,l)}}else this._onRemovalComplete(e,l)}markElementAsRemoved(t,e,s,l){this.collectedLeaveElements.push(e),e[eo]={namespaceId:t,setForRemoval:l,hasAnimation:s,removedBeforeQueried:!1}}listen(t,e,s,l,u){return Bg(e)?this._fetchNamespace(t).listen(e,s,l,u):()=>{}}_buildInstruction(t,e,s,l,u){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,s,l,t.fromState.options,t.toState.options,e,u)}destroyInnerAnimations(t){let e=this.driver.query(t,Ig,!0);e.forEach(s=>this.destroyActiveAnimationsForElement(s)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,WE,!0),e.forEach(s=>this.finishActiveQueriedAnimationOnElement(s)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(s=>{s.queued?s.markedForDestroy=!0:s.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(s=>s.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Da(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[eo];if(e&&e.setForRemoval){if(t[eo]=_M,e.namespaceId){this.destroyInnerAnimations(t);const s=this._fetchNamespace(e.namespaceId);s&&s.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,mM)&&this.markElementAsDisabled(t,!1),this.driver.query(t,mM,!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((s,l)=>this._balanceNamespaceList(s,l)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let s=0;s<this.collectedEnterElements.length;s++)to(this.collectedEnterElements[s],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const s=[];try{e=this._flushAnimations(s,t)}finally{for(let l=0;l<s.length;l++)s[l]()}}else for(let s=0;s<this.collectedLeaveElements.length;s++)this.processLeaveNode(this.collectedLeaveElements[s]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(s=>s()),this._flushFns=[],this._whenQuietFns.length){const s=this._whenQuietFns;this._whenQuietFns=[],e.length?Da(e).onDone(()=>{s.forEach(l=>l())}):s.forEach(l=>l())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const s=new Lg,l=[],u=new Map,h=[],p=new Map,m=new Map,v=new Map,T=new Set;this.disabledNodes.forEach(Ge=>{T.add(Ge);const Ke=this.driver.query(Ge,".ng-animate-queued",!0);for(let $e=0;$e<Ke.length;$e++)T.add(Ke[$e])});const I=this.bodyNode,O=Array.from(this.statesByElement.keys()),N=bM(O,this.collectedEnterElements),V=new Map;let Q=0;N.forEach((Ge,Ke)=>{const $e=GE+Q++;V.set(Ke,$e),Ge.forEach(pt=>to(pt,$e))});const X=[],ue=new Set,ce=new Set;for(let Ge=0;Ge<this.collectedLeaveElements.length;Ge++){const Ke=this.collectedLeaveElements[Ge],$e=Ke[eo];$e&&$e.setForRemoval&&(X.push(Ke),ue.add(Ke),$e.hasAnimation?this.driver.query(Ke,".ng-star-inserted",!0).forEach(pt=>ue.add(pt)):ce.add(Ke))}const ke=new Map,Ue=bM(O,Array.from(ue));Ue.forEach((Ge,Ke)=>{const $e=wg+Q++;ke.set(Ke,$e),Ge.forEach(pt=>to(pt,$e))}),t.push(()=>{N.forEach((Ge,Ke)=>{const $e=V.get(Ke);Ge.forEach(pt=>cc(pt,$e))}),Ue.forEach((Ge,Ke)=>{const $e=ke.get(Ke);Ge.forEach(pt=>cc(pt,$e))}),X.forEach(Ge=>{this.processLeaveNode(Ge)})});const ct=[],Ft=[];for(let Ge=this._namespaceList.length-1;Ge>=0;Ge--)this._namespaceList[Ge].drainQueuedTransitions(e).forEach($e=>{const pt=$e.player,Ei=$e.element;if(ct.push(pt),this.collectedEnterElements.length){const ki=Ei[eo];if(ki&&ki.setForMove)return void pt.destroy()}const Ne=!I||!this.driver.containsElement(I,Ei),rt=ke.get(Ei),_n=V.get(Ei),Jt=this._buildInstruction($e,s,_n,rt,Ne);if(Jt.errors&&Jt.errors.length)Ft.push(Jt);else{if(Ne)return pt.onStart(()=>Rl(Ei,Jt.fromStyles)),pt.onDestroy(()=>os(Ei,Jt.toStyles)),void l.push(pt);if($e.isFallbackTransition)return pt.onStart(()=>Rl(Ei,Jt.fromStyles)),pt.onDestroy(()=>os(Ei,Jt.toStyles)),void l.push(pt);Jt.timelines.forEach(ki=>ki.stretchStartingKeyframe=!0),s.append(Ei,Jt.timelines),h.push({instruction:Jt,player:pt,element:Ei}),Jt.queriedElements.forEach(ki=>kr(p,ki,[]).push(pt)),Jt.preStyleProps.forEach((ki,ss)=>{const vn=Object.keys(ki);if(vn.length){let di=m.get(ss);di||m.set(ss,di=new Set),vn.forEach(Td=>di.add(Td))}}),Jt.postStyleProps.forEach((ki,ss)=>{const vn=Object.keys(ki);let di=v.get(ss);di||v.set(ss,di=new Set),vn.forEach(Td=>di.add(Td))})}});if(Ft.length){const Ge=[];Ft.forEach(Ke=>{Ge.push(`@${Ke.triggerName} has failed due to:\n`),Ke.errors.forEach($e=>Ge.push(`- ${$e}\n`))}),ct.forEach(Ke=>Ke.destroy()),this.reportError(Ge)}const Xt=new Map,In=new Map;h.forEach(Ge=>{const Ke=Ge.element;s.has(Ke)&&(In.set(Ke,Ke),this._beforeAnimationBuild(Ge.player.namespaceId,Ge.instruction,Xt))}),l.forEach(Ge=>{const Ke=Ge.element;this._getPreviousPlayers(Ke,!1,Ge.namespaceId,Ge.triggerName,null).forEach(pt=>{kr(Xt,Ke,[]).push(pt),pt.destroy()})});const Gn=X.filter(Ge=>TM(Ge,m,v)),Sn=new Map;yM(Sn,this.driver,ce,v,Us).forEach(Ge=>{TM(Ge,m,v)&&Gn.push(Ge)});const Gi=new Map;N.forEach((Ge,Ke)=>{yM(Gi,this.driver,new Set(Ge),m,"!")}),Gn.forEach(Ge=>{const Ke=Sn.get(Ge),$e=Gi.get(Ge);Sn.set(Ge,Je(Je({},Ke),$e))});const bi=[],nt=[],Et={};h.forEach(Ge=>{const{element:Ke,player:$e,instruction:pt}=Ge;if(s.has(Ke)){if(T.has(Ke))return $e.onDestroy(()=>os(Ke,pt.toStyles)),$e.disabled=!0,$e.overrideTotalTime(pt.totalTime),void l.push($e);let Ei=Et;if(In.size>1){let rt=Ke;const _n=[];for(;rt=rt.parentNode;){const Jt=In.get(rt);if(Jt){Ei=Jt;break}_n.push(rt)}_n.forEach(Jt=>In.set(Jt,Ei))}const Ne=this._buildAnimation($e.namespaceId,pt,Xt,u,Gi,Sn);if($e.setRealPlayer(Ne),Ei===Et)bi.push($e);else{const rt=this.playersByElement.get(Ei);rt&&rt.length&&($e.parentPlayer=Da(rt)),l.push($e)}}else Rl(Ke,pt.fromStyles),$e.onDestroy(()=>os(Ke,pt.toStyles)),nt.push($e),T.has(Ke)&&l.push($e)}),nt.forEach(Ge=>{const Ke=u.get(Ge.element);if(Ke&&Ke.length){const $e=Da(Ke);Ge.setRealPlayer($e)}}),l.forEach(Ge=>{Ge.parentPlayer?Ge.syncPlayerEvents(Ge.parentPlayer):Ge.destroy()});for(let Ge=0;Ge<X.length;Ge++){const Ke=X[Ge],$e=Ke[eo];if(cc(Ke,wg),$e&&$e.hasAnimation)continue;let pt=[];if(p.size){let Ne=p.get(Ke);Ne&&Ne.length&&pt.push(...Ne);let rt=this.driver.query(Ke,WE,!0);for(let _n=0;_n<rt.length;_n++){let Jt=p.get(rt[_n]);Jt&&Jt.length&&pt.push(...Jt)}}const Ei=pt.filter(Ne=>!Ne.destroyed);Ei.length?i4(this,Ke,Ei):this.processLeaveNode(Ke)}return X.length=0,bi.forEach(Ge=>{this.players.push(Ge),Ge.onDone(()=>{Ge.destroy();const Ke=this.players.indexOf(Ge);this.players.splice(Ke,1)}),Ge.play()}),bi}elementContainsData(t,e){let s=!1;const l=e[eo];return l&&l.setForRemoval&&(s=!0),this.playersByElement.has(e)&&(s=!0),this.playersByQueriedElement.has(e)&&(s=!0),this.statesByElement.has(e)&&(s=!0),this._fetchNamespace(t).elementContainsData(e)||s}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,s,l,u){let h=[];if(e){const p=this.playersByQueriedElement.get(t);p&&(h=p)}else{const p=this.playersByElement.get(t);if(p){const m=!u||u==_d;p.forEach(v=>{v.queued||!m&&v.triggerName!=l||h.push(v)})}}return(s||l)&&(h=h.filter(p=>!(s&&s!=p.namespaceId||l&&l!=p.triggerName))),h}_beforeAnimationBuild(t,e,s){const u=e.element,h=e.isRemovalTransition?void 0:t,p=e.isRemovalTransition?void 0:e.triggerName;for(const m of e.timelines){const v=m.element,T=v!==u,I=kr(s,v,[]);this._getPreviousPlayers(v,T,h,p,e.toState).forEach(N=>{const V=N.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),N.destroy(),I.push(N)})}Rl(u,e.fromStyles)}_buildAnimation(t,e,s,l,u,h){const p=e.triggerName,m=e.element,v=[],T=new Set,I=new Set,O=e.timelines.map(V=>{const Q=V.element;T.add(Q);const X=Q[eo];if(X&&X.removedBeforeQueried)return new lc(V.duration,V.delay);const ue=Q!==m,ce=function(r){const t=[];return EM(r,t),t}((s.get(Q)||J6).map(Xt=>Xt.getRealPlayer())).filter(Xt=>!!Xt.element&&Xt.element===Q),ke=u.get(Q),Ue=h.get(Q),ct=X0(0,this._normalizer,0,V.keyframes,ke,Ue),Ft=this._buildPlayer(V,ct,ce);if(V.subTimeline&&l&&I.add(Q),ue){const Xt=new iT(t,p,Q);Xt.setRealPlayer(Ft),v.push(Xt)}return Ft});v.forEach(V=>{kr(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>function(r,t,e){let s;if(r instanceof Map){if(s=r.get(t),s){if(s.length){const l=s.indexOf(e);s.splice(l,1)}0==s.length&&r.delete(t)}}else if(s=r[t],s){if(s.length){const l=s.indexOf(e);s.splice(l,1)}0==s.length&&delete r[t]}return s}(this.playersByQueriedElement,V.element,V))}),T.forEach(V=>to(V,eM));const N=Da(O);return N.onDestroy(()=>{T.forEach(V=>cc(V,eM)),os(m,e.toStyles)}),I.forEach(V=>{kr(l,V,[]).push(N)}),N}_buildPlayer(t,e,s){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,s):new lc(t.duration,t.delay)}}class iT{constructor(t,e,s){this.namespaceId=t,this.triggerName=e,this.element=s,this._player=new lc,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(s=>xE(t,e,void 0,s))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){kr(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Bg(r){return r&&1===r.nodeType}function vM(r,t){const e=r.style.display;return r.style.display=null!=t?t:"none",e}function yM(r,t,e,s,l){const u=[];e.forEach(m=>u.push(vM(m)));const h=[];s.forEach((m,v)=>{const T={};m.forEach(I=>{const O=T[I]=t.computeStyle(v,I,l);(!O||0==O.length)&&(v[eo]=Q6,h.push(v))}),r.set(v,T)});let p=0;return e.forEach(m=>vM(m,u[p++])),h}function bM(r,t){const e=new Map;if(r.forEach(p=>e.set(p,[])),0==t.length)return e;const l=new Set(t),u=new Map;function h(p){if(!p)return 1;let m=u.get(p);if(m)return m;const v=p.parentNode;return m=e.has(v)?v:l.has(v)?1:h(v),u.set(p,m),m}return t.forEach(p=>{const m=h(p);1!==m&&e.get(m).push(p)}),e}const Vg="$$classes";function to(r,t){if(r.classList)r.classList.add(t);else{let e=r[Vg];e||(e=r[Vg]={}),e[t]=!0}}function cc(r,t){if(r.classList)r.classList.remove(t);else{let e=r[Vg];e&&delete e[t]}}function i4(r,t,e){Da(e).onDone(()=>r.processLeaveNode(t))}function EM(r,t){for(let e=0;e<r.length;e++){const s=r[e];s instanceof j0?EM(s.players,t):t.push(s)}}function TM(r,t,e){const s=e.get(r);if(!s)return!1;let l=t.get(r);return l?s.forEach(u=>l.add(u)):t.set(r,s),e.delete(r),!0}class Hg{constructor(t,e,s){this.bodyNode=t,this._driver=e,this._normalizer=s,this._triggerCache={},this.onRemovalComplete=(l,u)=>{},this._transitionEngine=new q6(t,e,s),this._timelineEngine=new X6(t,e,s),this._transitionEngine.onRemovalComplete=(l,u)=>this.onRemovalComplete(l,u)}registerTrigger(t,e,s,l,u){const h=t+"-"+l;let p=this._triggerCache[h];if(!p){const m=[],v=YE(this._driver,u,m);if(m.length)throw new Error(`The animation trigger "${l}" has failed to build due to the following errors:\n - ${m.join("\n - ")}`);p=function(r,t,e){return new W6(r,t,e)}(l,v,this._normalizer),this._triggerCache[h]=p}this._transitionEngine.registerTrigger(e,l,p)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,s,l){this._transitionEngine.insertNode(t,e,s,l)}onRemove(t,e,s,l){this._transitionEngine.removeNode(t,e,l||!1,s)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,s,l){if("@"==s.charAt(0)){const[u,h]=K0(s);this._timelineEngine.command(u,e,h,l)}else this._transitionEngine.trigger(t,e,s,l)}listen(t,e,s,l,u){if("@"==s.charAt(0)){const[h,p]=K0(s);return this._timelineEngine.listen(h,e,p,u)}return this._transitionEngine.listen(t,e,s,l,u)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function CM(r,t){let e=null,s=null;return Array.isArray(t)&&t.length?(e=rT(t[0]),t.length>1&&(s=rT(t[t.length-1]))):t&&(e=rT(t)),e||s?new s4(r,e,s):null}let s4=(()=>{class r{constructor(e,s,l){this._element=e,this._startStyles=s,this._endStyles=l,this._state=0;let u=r.initialStylesByElement.get(e);u||r.initialStylesByElement.set(e,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&os(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(os(this._element,this._initialStyles),this._endStyles&&(os(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(Rl(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rl(this._element,this._endStyles),this._endStyles=null),os(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function rT(r){let t=null;const e=Object.keys(r);for(let s=0;s<e.length;s++){const l=e[s];a4(l)&&(t=t||{},t[l]=r[l])}return t}function a4(r){return"display"===r||"position"===r}const SM="animation",wM="animationend";class c4{constructor(t,e,s,l,u,h,p){this._element=t,this._name=e,this._duration=s,this._delay=l,this._easing=u,this._fillMode=h,this._onDoneFn=p,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=m=>this._handleCallback(m)}apply(){(function(r,t){const e=sT(r,"").trim();let s=0;e.length&&(function(r,t){let e=0;for(let s=0;s<r.length;s++)","===r.charAt(s)&&e++;return e}(e)+1,t=`${e}, ${t}`),Ug(r,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),DM(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){RM(this._element,this._name,"paused")}resume(){RM(this._element,this._name,"running")}setPosition(t){const e=IM(this._element,this._name);this._position=t*this._duration,Ug(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),s=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&s>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),DM(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(r,t){const s=sT(r,"").split(","),l=oT(s,t);l>=0&&(s.splice(l,1),Ug(r,"",s.join(",")))}(this._element,this._name))}}function RM(r,t,e){Ug(r,"PlayState",e,IM(r,t))}function IM(r,t){const e=sT(r,"");return e.indexOf(",")>0?oT(e.split(","),t):oT([e],t)}function oT(r,t){for(let e=0;e<r.length;e++)if(r[e].indexOf(t)>=0)return e;return-1}function DM(r,t,e){e?r.removeEventListener(wM,t):r.addEventListener(wM,t)}function Ug(r,t,e,s){const l=SM+t;if(null!=s){const u=r.style[l];if(u.length){const h=u.split(",");h[s]=e,e=h.join(",")}}r.style[l]=e}function sT(r,t){return r.style[SM+t]||""}class AM{constructor(t,e,s,l,u,h,p,m){this.element=t,this.keyframes=e,this.animationName=s,this._duration=l,this._delay=u,this._finalStyles=p,this._specialStyles=m,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=h||"linear",this.totalTime=l+u,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new c4(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(s=>{"offset"!=s&&(t[s]=e?this._finalStyles[s]:KE(this.element,s))})}this.currentSnapshot=t}}class m4 extends lc{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Q0(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class MM{constructor(){this._count=0}validateStyleProperty(t){return FE(t)}matchesElement(t,e){return BE(t,e)}containsElement(t,e){return VE(t,e)}query(t,e,s){return HE(t,e,s)}computeStyle(t,e,s){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,s){s=s.map(p=>Q0(p));let l=`@keyframes ${e} {\n`,u="";s.forEach(p=>{u=" ";const m=parseFloat(p.offset);l+=`${u}${100*m}% {\n`,u+=" ",Object.keys(p).forEach(v=>{const T=p[v];switch(v){case"offset":return;case"easing":return void(T&&(l+=`${u}animation-timing-function: ${T};\n`));default:return void(l+=`${u}${v}: ${T};\n`)}}),l+=`${u}}\n`}),l+="}\n";const h=document.createElement("style");return h.textContent=l,h}animate(t,e,s,l,u,h=[],p){const m=h.filter(X=>X instanceof AM),v={};oM(s,l)&&m.forEach(X=>{let ue=X.currentSnapshot;Object.keys(ue).forEach(ce=>v[ce]=ue[ce])});const T=function(r){let t={};return r&&(Array.isArray(r)?r:[r]).forEach(s=>{Object.keys(s).forEach(l=>{"offset"==l||"easing"==l||(t[l]=s[l])})}),t}(e=sM(t,e,v));if(0==s)return new m4(t,T);const I="gen_css_kf_"+this._count++,O=this.buildKeyframeElement(t,I,e);(function(r){var e;const t=null==(e=r.getRootNode)?void 0:e.call(r);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(t).appendChild(O);const V=CM(t,e),Q=new AM(t,e,I,s,l,u,T,V);return Q.onDestroy(()=>{var r;(r=O).parentNode.removeChild(r)}),Q}}class NM{constructor(t,e,s,l){this.element=t,this.keyframes=e,this.options=s,this._specialStyles=l,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=s.duration,this._delay=s.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,s){return t.animate(e,s)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:KE(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(s=>s()),e.length=0}}class E4{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(kM().toString()),this._cssKeyframesDriver=new MM}validateStyleProperty(t){return FE(t)}matchesElement(t,e){return BE(t,e)}containsElement(t,e){return VE(t,e)}query(t,e,s){return HE(t,e,s)}computeStyle(t,e,s){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,s,l,u,h=[],p){if(!p&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,s,l,u,h);const T={duration:s,delay:l,fill:0==l?"both":"forwards"};u&&(T.easing=u);const I={},O=h.filter(V=>V instanceof NM);oM(s,l)&&O.forEach(V=>{let Q=V.currentSnapshot;Object.keys(Q).forEach(X=>I[X]=Q[X])});const N=CM(t,e=sM(t,e=e.map(V=>Aa(V,!1)),I));return new NM(t,e,T,N)}}function kM(){return z0()&&Element.prototype.animate||{}}let C4=(()=>{class r extends V0{constructor(e,s){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(s.body,{id:"0",encapsulation:Li.None,styles:[],data:{animation:[]}})}build(e){const s=this._nextAnimationId.toString();this._nextAnimationId++;const l=Array.isArray(e)?U0(e):e;return LM(this._renderer,null,s,"register",[l]),new S4(s,this._renderer)}}return r.\u0275fac=function(e){return new(e||r)(De(sl),De(qt))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();class S4 extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new w4(this._id,t,e||{},this._renderer)}}class w4{constructor(t,e,s,l){this.id=t,this.element=e,this._renderer=l,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",s)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return LM(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!=(e=null==(t=this._renderer.engine.players[+this.id])?void 0:t.getPosition())?e:0}}function LM(r,t,e,s,l){return r.setProperty(t,`@@${e}:${s}`,l)}const PM="@.disabled";let R4=(()=>{class r{constructor(e,s,l){this.delegate=e,this.engine=s,this._zone=l,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),s.onRemovalComplete=(u,h)=>{h&&h.parentNode(u)&&h.removeChild(u.parentNode,u)}}createRenderer(e,s){const u=this.delegate.createRenderer(e,s);if(!(e&&s&&s.data&&s.data.animation)){let T=this._rendererCache.get(u);return T||(T=new FM("",u,this.engine),this._rendererCache.set(u,T)),T}const h=s.id,p=s.id+"-"+this._currentId;this._currentId++,this.engine.register(p,e);const m=T=>{Array.isArray(T)?T.forEach(m):this.engine.registerTrigger(h,p,e,T.name,T)};return s.data.animation.forEach(m),new I4(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,s,l){e>=0&&e<this._microtaskId?this._zone.run(()=>s(l)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[h,p]=u;h(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([s,l]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(e){return new(e||r)(De(sl),De(Hg),De(cn))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();class FM{constructor(t,e,s){this.namespaceId=t,this.delegate=e,this.engine=s,this.destroyNode=this.delegate.destroyNode?l=>e.destroyNode(l):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,s,l=!0){this.delegate.insertBefore(t,e,s),this.engine.onInsert(this.namespaceId,e,t,l)}removeChild(t,e,s){this.engine.onRemove(this.namespaceId,e,this.delegate,s)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,s,l){this.delegate.setAttribute(t,e,s,l)}removeAttribute(t,e,s){this.delegate.removeAttribute(t,e,s)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,s,l){this.delegate.setStyle(t,e,s,l)}removeStyle(t,e,s){this.delegate.removeStyle(t,e,s)}setProperty(t,e,s){"@"==e.charAt(0)&&e==PM?this.disableAnimations(t,!!s):this.delegate.setProperty(t,e,s)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,s){return this.delegate.listen(t,e,s)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class I4 extends FM{constructor(t,e,s,l){super(e,s,l),this.factory=t,this.namespaceId=e}setProperty(t,e,s){"@"==e.charAt(0)?"."==e.charAt(1)&&e==PM?this.disableAnimations(t,s=void 0===s||!!s):this.engine.process(this.namespaceId,t,e.substr(1),s):this.delegate.setProperty(t,e,s)}listen(t,e,s){if("@"==e.charAt(0)){const l=function(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let u=e.substr(1),h="";return"@"!=u.charAt(0)&&([u,h]=function(r){const t=r.indexOf(".");return[r.substring(0,t),r.substr(t+1)]}(u)),this.engine.listen(this.namespaceId,l,u,h,p=>{this.factory.scheduleListenerCallback(p._data||-1,s,p)})}return this.delegate.listen(t,e,s)}}let O4=(()=>{class r extends Hg{constructor(e,s,l){super(e.body,s,l)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(e){return new(e||r)(De(qt),De(UE),De(qE))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const hc=new lt("AnimationModuleType"),BM=[{provide:V0,useClass:C4},{provide:qE,useFactory:function(){return new F6}},{provide:Hg,useClass:O4},{provide:sl,useFactory:function(r,t,e){return new R4(r,t,e)},deps:[Bf,Hg,cn]}],VM=[{provide:UE,useFactory:function(){return"function"==typeof kM()?new E4:new MM}},{provide:hc,useValue:"BrowserAnimations"},...BM],k4=[{provide:UE,useClass:Z0},{provide:hc,useValue:"NoopAnimations"},...BM];let L4=(()=>{class r{static withConfig(e){return{ngModule:r,providers:e.disableAnimations?k4:VM}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({providers:VM,imports:[$D]}),r})();const HM=new va("13.0.1"),F4=new lt("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Oa=(()=>{class r{constructor(e,s,l){this._hasDoneGlobalChecks=!1,this._document=l,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=s,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(!dy()||CE())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const s=getComputedStyle(e);s&&"none"!==s.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),e.remove()}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&HM.full!==B0.full&&console.warn("The Angular Material version ("+HM.full+") does not match the Angular CDK version ("+B0.full+").\nPlease ensure the versions of these two packages exactly match.")}}return r.\u0275fac=function(e){return new(e||r)(De(a6),De(F4,8),De(qt))},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({imports:[[gd],gd]}),r})();function aT(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=bl(t)}}}function UM(r,t){return class extends r{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const s=e||this.defaultColor;s!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),s&&this._elementRef.nativeElement.classList.add(`mat-${s}`),this._color=s)}}}function GM(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=bl(t)}}}class H4{constructor(t,e,s){this._renderer=t,this.element=e,this.config=s,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const WM={enterDuration:225,exitDuration:150},lT=pd({passive:!0}),jM=["mousedown","touchstart"],zM=["mouseup","mouseleave","touchend","touchcancel"];class G4{constructor(t,e,s,l){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,l.isBrowser&&(this._containerElement=oc(s))}fadeInRipple(t,e,s={}){const l=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),u=Je(Je({},WM),s.animation);s.centered&&(t=l.left+l.width/2,e=l.top+l.height/2);const h=s.radius||function(r,t,e){const s=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),l=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(s*s+l*l)}(t,e,l),p=t-l.left,m=e-l.top,v=u.enterDuration,T=document.createElement("div");T.classList.add("mat-ripple-element"),T.style.left=p-h+"px",T.style.top=m-h+"px",T.style.height=2*h+"px",T.style.width=2*h+"px",null!=s.color&&(T.style.backgroundColor=s.color),T.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(T),window.getComputedStyle(T).getPropertyValue("opacity"),T.style.transform="scale(1)";const I=new H4(this,T,s);return I.state=0,this._activeRipples.add(I),s.persistent||(this._mostRecentTransientRipple=I),this._runTimeoutOutsideZone(()=>{const O=I===this._mostRecentTransientRipple;I.state=1,!s.persistent&&(!O||!this._isPointerDown)&&I.fadeOut()},v),I}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const s=t.element,l=Je(Je({},WM),t.config.animation);s.style.transitionDuration=`${l.exitDuration}ms`,s.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,s.remove()},l.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=oc(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(jM))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(zM),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=SE(t),s=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!s&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!wE(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let s=0;s<e.length;s++)this.fadeInRipple(e[s].clientX,e[s].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,lT)})})}_removeTriggerEvents(){this._triggerElement&&(jM.forEach(t=>{this._triggerElement.removeEventListener(t,this,lT)}),this._pointerUpEventsRegistered&&zM.forEach(t=>{this._triggerElement.removeEventListener(t,this,lT)}))}}const z4=new lt("mat-ripple-global-options");let Wg=(()=>{class r{constructor(e,s,l,u,h){this._elementRef=e,this._animationMode=h,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=u||{},this._rippleRenderer=new G4(this,s,e,l)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Je(Je(Je({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,s=0,l){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,s,Je(Je({},this.rippleConfig),l)):this._rippleRenderer.fadeInRipple(0,0,Je(Je({},this.rippleConfig),e))}}return r.\u0275fac=function(e){return new(e||r)(Se(wn),Se(cn),Se(Hs),Se(z4,8),Se(hc,8))},r.\u0275dir=_t({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,s){2&e&&Eo("mat-ripple-unbounded",s.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),r})(),XM=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({imports:[[Oa,O0],Oa]}),r})();const KM=["mat-button",""],YM=["*"],Y4=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],$4=UM(aT(GM(class{constructor(r){this._elementRef=r}})));let uT,$M=(()=>{class r extends $4{constructor(e,s,l){super(e),this._focusMonitor=s,this._animationMode=l,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const u of Y4)this._hasHostAttributes(u)&&this._getHostElement().classList.add(u);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,s){e?this._focusMonitor.focusVia(this._getHostElement(),e,s):this._getHostElement().focus(s)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(s=>this._getHostElement().hasAttribute(s))}}return r.\u0275fac=function(e){return new(e||r)(Se(wn),Se(fd),Se(hc,8))},r.\u0275cmp=Br({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,s){if(1&e&&nf(Wg,5),2&e){let l;As(l=Os())&&(s.ripple=l.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,s){2&e&&(Vi("disabled",s.disabled||null),Eo("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-button-disabled",s.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Tn],attrs:KM,ngContentSelectors:YM,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,s){1&e&&(fh(),xn(0,"span",0),gh(1),Nn(),Zi(2,"span",1),Zi(3,"span",2)),2&e&&(ci(2),Eo("mat-button-ripple-round",s.isRoundButton||s.isIconButton),gi("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",s.isIconButton)("matRippleTrigger",s._getHostElement()))},directives:[Wg],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),r})(),J4=(()=>{class r extends $M{constructor(e,s,l){super(s,e,l)}_haltDisabledEvents(e){this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}}return r.\u0275fac=function(e){return new(e||r)(Se(fd),Se(wn),Se(hc,8))},r.\u0275cmp=Br({type:r,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(e,s){1&e&&Vn("click",function(u){return s._haltDisabledEvents(u)}),2&e&&(Vi("tabindex",s.disabled?-1:s.tabIndex||0)("disabled",s.disabled||null)("aria-disabled",s.disabled.toString()),Eo("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-button-disabled",s.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[Tn],attrs:KM,ngContentSelectors:YM,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,s){1&e&&(fh(),xn(0,"span",0),gh(1),Nn(),Zi(2,"span",1),Zi(3,"span",2)),2&e&&(ci(2),Eo("mat-button-ripple-round",s.isRoundButton||s.isIconButton),gi("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",s.isIconButton)("matRippleTrigger",s._getHostElement()))},directives:[Wg],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),r})(),Q4=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({imports:[[XM,Oa],Oa]}),r})(),Z4=1;const jg={};function JM(r){return r in jg&&(delete jg[r],!0)}const q4={setImmediate(r){const t=Z4++;return jg[t]=!0,uT||(uT=Promise.resolve()),uT.then(()=>JM(t)&&r()),t},clearImmediate(r){JM(r)}},{setImmediate:e5,clearImmediate:t5}=q4,zg={setImmediate(...r){const{delegate:t}=zg;return((null==t?void 0:t.setImmediate)||e5)(...r)},clearImmediate(r){const{delegate:t}=zg;return((null==t?void 0:t.clearImmediate)||t5)(r)},delegate:void 0},cT=new class extends yE{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let s,l=-1;t=t||e.shift();const u=e.length;do{if(s=t.execute(t.state,t.delay))break}while(++l<u&&(t=e.shift()));if(this._active=!1,s){for(;++l<u&&(t=e.shift());)t.unsubscribe();throw s}}}(class extends vE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t._scheduled||(t._scheduled=zg.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(t,e,s);0===t.actions.length&&(zg.clearImmediate(e),t._scheduled=void 0)}});function QM(r,t){return t?e=>$f(t.pipe(Fr(1),Te((r,t)=>{r.subscribe(new Ie(t,B))})),e.pipe(QM(r))):Fn((e,s)=>r(e,s).pipe(Fr(1),function(r){return xe(()=>r)}(e)))}function ZM(r=0,t,e=D0){let s=-1;return null!=t&&(pc(t)?e=t:s=t),new ee(l=>{let u=function(r){return r instanceof Date&&!isNaN(r)}(r)?+r-e.now():r;u<0&&(u=0);let h=0;return e.schedule(function(){l.closed||(l.next(h++),0<=s?this.schedule(void 0,s):l.complete())},u)})}function qM(r,t=bE){const e=ZM(r,t);return QM(()=>e)}class hT{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class l5 extends hT{constructor(t,e,s,l){super(),this.component=t,this.viewContainerRef=e,this.injector=s,this.componentFactoryResolver=l}}class ex extends hT{constructor(t,e,s){super(),this.templateRef=t,this.viewContainerRef=e,this.context=s}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class u5 extends hT{constructor(t){super(),this.element=t instanceof wn?t.nativeElement:t}}class h5 extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof l5?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof ex?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof u5?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,s,l,u){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=s,this._defaultInjector=l,this.attachDomPortal=h=>{const p=h.element,m=this._document.createComment("dom-portal");p.parentNode.insertBefore(m,p),this.outletElement.appendChild(p),this._attachedPortal=h,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(p,m)})},this._document=u}attachComponentPortal(t){const s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let l;return t.viewContainerRef?(l=t.viewContainerRef.createComponent(s,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>l.destroy())):(l=s.create(t.injector||this._defaultInjector),this._appRef.attachView(l.hostView),this.setDisposeFn(()=>{this._appRef.detachView(l.hostView),l.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(l)),this._attachedPortal=t,l}attachTemplatePortal(t){let e=t.viewContainerRef,s=e.createEmbeddedView(t.templateRef,t.context);return s.rootNodes.forEach(l=>this.outletElement.appendChild(l)),s.detectChanges(),this.setDisposeFn(()=>{let l=e.indexOf(s);-1!==l&&e.remove(l)}),this._attachedPortal=t,s}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let d5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({}),r})();const p5=["addListener","removeListener"],f5=["addEventListener","removeEventListener"],g5=["on","off"];function dT(r,t,e,s){if(b(e)&&(s=e,e=void 0),s)return dT(r,t,e).pipe(fb(s));const[l,u]=function(r){return b(r.addEventListener)&&b(r.removeEventListener)}(r)?f5.map(h=>p=>r[h](t,p,e)):function(r){return b(r.addListener)&&b(r.removeListener)}(r)?p5.map(tx(r,t)):function(r){return b(r.on)&&b(r.off)}(r)?g5.map(tx(r,t)):[];if(!l&&Mt(r))return Fn(h=>dT(h,t,e))(Xe(r));if(!l)throw new TypeError("Invalid event target");return new ee(h=>{const p=(...m)=>h.next(1<m.length?m:m[0]);return l(p),()=>u(p)})}function tx(r,t){return e=>s=>r[e](t,s)}const yd={schedule(r){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:s}=yd;s&&(t=s.requestAnimationFrame,e=s.cancelAnimationFrame);const l=t(u=>{e=void 0,r(u)});return new a(()=>null==e?void 0:e(l))},requestAnimationFrame(...r){const{delegate:t}=yd;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...r)},cancelAnimationFrame(...r){const{delegate:t}=yd;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...r)},delegate:void 0};new class extends yE{flush(t){this._active=!0,this._scheduled=void 0;const{actions:e}=this;let s,l=-1;t=t||e.shift();const u=e.length;do{if(s=t.execute(t.state,t.delay))break}while(++l<u&&(t=e.shift()));if(this._active=!1,s){for(;++l<u&&(t=e.shift());)t.unsubscribe();throw s}}}(class extends vE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,s=0){return null!==s&&s>0?super.requestAsyncId(t,e,s):(t.actions.push(this),t._scheduled||(t._scheduled=yd.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,s=0){if(null!=s&&s>0||null==s&&this.delay>0)return super.recycleAsyncId(t,e,s);0===t.actions.length&&(yd.cancelAnimationFrame(e),t._scheduled=void 0)}});function nx(r,t=D0){return function(r){return Te((t,e)=>{let s=!1,l=null,u=null,h=!1;const p=()=>{if(null==u||u.unsubscribe(),u=null,s){s=!1;const v=l;l=null,e.next(v)}h&&e.complete()},m=()=>{u=null,h&&e.complete()};t.subscribe(new Ie(e,v=>{s=!0,l=v,u||Xe(r()).subscribe(u=new Ie(e,p,m))},()=>{h=!0,(!s||!u||u.closed)&&e.complete()}))})}(()=>ZM(r,t))}let S5=(()=>{class r{constructor(e,s,l){this._ngZone=e,this._platform=s,this._scrolled=new we,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=l}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const s=this.scrollContainers.get(e);s&&(s.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ee(s=>{this._globalSubscription||this._addGlobalListener();const l=e>0?this._scrolled.pipe(nx(e)).subscribe(s):this._scrolled.subscribe(s);return this._scrolledCount++,()=>{l.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):wt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,s)=>this.deregister(s)),this._scrolled.complete()}ancestorScrolled(e,s){const l=this.getAncestorScrollContainers(e);return this.scrolled(s).pipe(Er(u=>!u||l.indexOf(u)>-1))}getAncestorScrollContainers(e){const s=[];return this.scrollContainers.forEach((l,u)=>{this._scrollableContainsElement(u,e)&&s.push(u)}),s}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,s){let l=oc(s),u=e.getElementRef().nativeElement;do{if(l==u)return!0}while(l=l.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>dT(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(e){return new(e||r)(De(cn),De(Hs),De(qt,8))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ix=(()=>{class r{constructor(e,s,l){this._platform=e,this._change=new we,this._changeListener=u=>{this._change.next(u)},this._document=l,s.runOutsideAngular(()=>{if(e.isBrowser){const u=this._getWindow();u.addEventListener("resize",this._changeListener),u.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:s,height:l}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+l,right:e.left+s,height:l,width:s}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,s=this._getWindow(),l=e.documentElement,u=l.getBoundingClientRect();return{top:-u.top||e.body.scrollTop||s.scrollY||l.scrollTop||0,left:-u.left||e.body.scrollLeft||s.scrollX||l.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(nx(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(e){return new(e||r)(De(Hs),De(cn),De(qt,8))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),pT=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({}),r})(),rx=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({imports:[[gd,O0,pT],gd,pT]}),r})();const ox=jz();class R5{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=yi(-this._previousScrollPosition.left),t.style.top=yi(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,s=t.style,l=this._document.body.style,u=s.scrollBehavior||"",h=l.scrollBehavior||"";this._isEnabled=!1,s.left=this._previousHTMLStyles.left,s.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),ox&&(s.scrollBehavior=l.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ox&&(s.scrollBehavior=u,l.scrollBehavior=h)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,s=this._viewportRuler.getViewportSize();return e.scrollHeight>s.height||e.scrollWidth>s.width}}class I5{constructor(t,e,s,l){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=s,this._config=l,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class sx{enable(){}disable(){}attach(){}}function fT(r,t){return t.some(e=>r.bottom<e.top||r.top>e.bottom||r.right<e.left||r.left>e.right)}function ax(r,t){return t.some(e=>r.top<e.top||r.bottom>e.bottom||r.left<e.left||r.right>e.right)}class D5{constructor(t,e,s,l){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=s,this._config=l,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:s,height:l}=this._viewportRuler.getViewportSize();fT(e,[{width:s,height:l,bottom:l,right:s,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let A5=(()=>{class r{constructor(e,s,l,u){this._scrollDispatcher=e,this._viewportRuler=s,this._ngZone=l,this.noop=()=>new sx,this.close=h=>new I5(this._scrollDispatcher,this._ngZone,this._viewportRuler,h),this.block=()=>new R5(this._viewportRuler,this._document),this.reposition=h=>new D5(this._scrollDispatcher,this._viewportRuler,this._ngZone,h),this._document=u}}return r.\u0275fac=function(e){return new(e||r)(De(S5),De(ix),De(cn),De(qt))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class lx{constructor(t){if(this.scrollStrategy=new sx,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const s of e)void 0!==t[s]&&(this[s]=t[s])}}}class O5{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let ux=(()=>{class r{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const s=this._attachedOverlays.indexOf(e);s>-1&&this._attachedOverlays.splice(s,1),0===this._attachedOverlays.length&&this.detach()}}return r.\u0275fac=function(e){return new(e||r)(De(qt))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),M5=(()=>{class r extends ux{constructor(e){super(e),this._keydownListener=s=>{const l=this._attachedOverlays;for(let u=l.length-1;u>-1;u--)if(l[u]._keydownEvents.observers.length>0){l[u]._keydownEvents.next(s);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return r.\u0275fac=function(e){return new(e||r)(De(qt))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),x5=(()=>{class r extends ux{constructor(e,s){super(e),this._platform=s,this._cursorStyleIsSet=!1,this._pointerDownListener=l=>{this._pointerDownEventTarget=Tl(l)},this._clickListener=l=>{const u=Tl(l),h="click"===l.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let m=p.length-1;m>-1;m--){const v=p[m];if(!(v._outsidePointerEvents.observers.length<1)&&v.hasAttached()){if(v.overlayElement.contains(u)||v.overlayElement.contains(h))break;v._outsidePointerEvents.next(l)}}}}add(e){if(super.add(e),!this._isAttached){const s=this._document.body;s.addEventListener("pointerdown",this._pointerDownListener,!0),s.addEventListener("click",this._clickListener,!0),s.addEventListener("auxclick",this._clickListener,!0),s.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=s.style.cursor,s.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return r.\u0275fac=function(e){return new(e||r)(De(qt),De(Hs))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),cx=(()=>{class r{constructor(e,s){this._platform=s,this._document=e}ngOnDestroy(){var e;null==(e=this._containerElement)||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||CE()){const l=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let u=0;u<l.length;u++)l[u].remove()}const s=this._document.createElement("div");s.classList.add(e),CE()?s.setAttribute("platform","test"):this._platform.isBrowser||s.setAttribute("platform","server"),this._document.body.appendChild(s),this._containerElement=s}}return r.\u0275fac=function(e){return new(e||r)(De(qt),De(Hs))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class N5{constructor(t,e,s,l,u,h,p,m,v){this._portalOutlet=t,this._host=e,this._pane=s,this._config=l,this._ngZone=u,this._keyboardDispatcher=h,this._document=p,this._location=m,this._outsideClickDispatcher=v,this._backdropElement=null,this._backdropClick=new we,this._attachments=new we,this._detachments=new we,this._locationChanges=a.EMPTY,this._backdropClickHandler=T=>this._backdropClick.next(T),this._keydownEvents=new we,this._outsidePointerEvents=new we,l.scrollStrategy&&(this._scrollStrategy=l.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=l.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Fr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null==(e=this._host)||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Je(Je({},this._config),t),this._updateElementSize()}setDirection(t){this._config=wi(Je({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=yi(this._config.width),t.height=yi(this._config.height),t.minWidth=yi(this._config.minWidth),t.minHeight=yi(this._config.minHeight),t.maxWidth=yi(this._config.maxWidth),t.maxHeight=yi(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const s=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",s),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",s)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(s,500))}_toggleClasses(t,e,s){const l=A0(e||[]).filter(u=>!!u);l.length&&(s?t.classList.add(...l):t.classList.remove(...l))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Tg(Ws(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.remove(),this._backdropElement===t&&(this._backdropElement=null))}}const hx="cdk-overlay-connected-position-bounding-box",k5=/([A-Za-z%]+)$/;class L5{constructor(t,e,s,l,u){this._viewportRuler=e,this._document=s,this._platform=l,this._overlayContainer=u,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new we,this._resizeSubscription=a.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(hx),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,s=this._viewportRect,l=[];let u;for(let h of this._preferredPositions){let p=this._getOriginPoint(t,h),m=this._getOverlayPoint(p,e,h),v=this._getOverlayFit(m,e,s,h);if(v.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(v,m,s)?l.push({position:h,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!u||u.overlayFit.visibleArea<v.visibleArea)&&(u={overlayFit:v,overlayPoint:m,originPoint:p,position:h,overlayRect:e})}if(l.length){let h=null,p=-1;for(const m of l){const v=m.boundingBoxRect.width*m.boundingBoxRect.height*(m.position.weight||1);v>p&&(p=v,h=m)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Dl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(hx),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let s,l;if("center"==e.originX)s=t.left+t.width/2;else{const u=this._isRtl()?t.right:t.left,h=this._isRtl()?t.left:t.right;s="start"==e.originX?u:h}return l="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:s,y:l}}_getOverlayPoint(t,e,s){let l,u;return l="center"==s.overlayX?-e.width/2:"start"===s.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,u="center"==s.overlayY?-e.height/2:"top"==s.overlayY?0:-e.height,{x:t.x+l,y:t.y+u}}_getOverlayFit(t,e,s,l){const u=px(e);let{x:h,y:p}=t,m=this._getOffset(l,"x"),v=this._getOffset(l,"y");m&&(h+=m),v&&(p+=v);let O=0-p,N=p+u.height-s.height,V=this._subtractOverflows(u.width,0-h,h+u.width-s.width),Q=this._subtractOverflows(u.height,O,N),X=V*Q;return{visibleArea:X,isCompletelyWithinViewport:u.width*u.height===X,fitsInViewportVertically:Q===u.height,fitsInViewportHorizontally:V==u.width}}_canFitWithFlexibleDimensions(t,e,s){if(this._hasFlexibleDimensions){const l=s.bottom-e.y,u=s.right-e.x,h=dx(this._overlayRef.getConfig().minHeight),p=dx(this._overlayRef.getConfig().minWidth),v=t.fitsInViewportHorizontally||null!=p&&p<=u;return(t.fitsInViewportVertically||null!=h&&h<=l)&&v}return!1}_pushOverlayOnScreen(t,e,s){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const l=px(e),u=this._viewportRect,h=Math.max(t.x+l.width-u.width,0),p=Math.max(t.y+l.height-u.height,0),m=Math.max(u.top-s.top-t.y,0),v=Math.max(u.left-s.left-t.x,0);let T=0,I=0;return T=l.width<=u.width?v||-h:t.x<this._viewportMargin?u.left-s.left-t.x:0,I=l.height<=u.height?m||-p:t.y<this._viewportMargin?u.top-s.top-t.y:0,this._previousPushAmount={x:T,y:I},{x:t.x+T,y:t.y+I}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const s=this._getScrollVisibility(),l=new O5(t,s);this._positionChanges.next(l)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let s,l=t.overlayY;s="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let u=0;u<e.length;u++)e[u].style.transformOrigin=`${s} ${l}`}_calculateBoundingBoxRect(t,e){const s=this._viewportRect,l=this._isRtl();let u,h,p,T,I,O;if("top"===e.overlayY)h=t.y,u=s.height-h+this._viewportMargin;else if("bottom"===e.overlayY)p=s.height-t.y+2*this._viewportMargin,u=s.height-p+this._viewportMargin;else{const N=Math.min(s.bottom-t.y+s.top,t.y),V=this._lastBoundingBoxSize.height;u=2*N,h=t.y-N,u>V&&!this._isInitialRender&&!this._growAfterOpen&&(h=t.y-V/2)}if("end"===e.overlayX&&!l||"start"===e.overlayX&&l)O=s.width-t.x+this._viewportMargin,T=t.x-this._viewportMargin;else if("start"===e.overlayX&&!l||"end"===e.overlayX&&l)I=t.x,T=s.right-t.x;else{const N=Math.min(s.right-t.x+s.left,t.x),V=this._lastBoundingBoxSize.width;T=2*N,I=t.x-N,T>V&&!this._isInitialRender&&!this._growAfterOpen&&(I=t.x-V/2)}return{top:h,left:I,bottom:p,right:O,width:T,height:u}}_setBoundingBoxStyles(t,e){const s=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(s.height=Math.min(s.height,this._lastBoundingBoxSize.height),s.width=Math.min(s.width,this._lastBoundingBoxSize.width));const l={};if(this._hasExactPosition())l.top=l.left="0",l.bottom=l.right=l.maxHeight=l.maxWidth="",l.width=l.height="100%";else{const u=this._overlayRef.getConfig().maxHeight,h=this._overlayRef.getConfig().maxWidth;l.height=yi(s.height),l.top=yi(s.top),l.bottom=yi(s.bottom),l.width=yi(s.width),l.left=yi(s.left),l.right=yi(s.right),l.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",l.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",u&&(l.maxHeight=yi(u)),h&&(l.maxWidth=yi(h))}this._lastBoundingBoxSize=s,Dl(this._boundingBox.style,l)}_resetBoundingBoxStyles(){Dl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Dl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const s={},l=this._hasExactPosition(),u=this._hasFlexibleDimensions,h=this._overlayRef.getConfig();if(l){const T=this._viewportRuler.getViewportScrollPosition();Dl(s,this._getExactOverlayY(e,t,T)),Dl(s,this._getExactOverlayX(e,t,T))}else s.position="static";let p="",m=this._getOffset(e,"x"),v=this._getOffset(e,"y");m&&(p+=`translateX(${m}px) `),v&&(p+=`translateY(${v}px)`),s.transform=p.trim(),h.maxHeight&&(l?s.maxHeight=yi(h.maxHeight):u&&(s.maxHeight="")),h.maxWidth&&(l?s.maxWidth=yi(h.maxWidth):u&&(s.maxWidth="")),Dl(this._pane.style,s)}_getExactOverlayY(t,e,s){let l={top:"",bottom:""},u=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,s));let h=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return u.y-=h,"bottom"===t.overlayY?l.bottom=this._document.documentElement.clientHeight-(u.y+this._overlayRect.height)+"px":l.top=yi(u.y),l}_getExactOverlayX(t,e,s){let h,l={left:"",right:""},u=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,s)),h=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===h?l.right=this._document.documentElement.clientWidth-(u.x+this._overlayRect.width)+"px":l.left=yi(u.x),l}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),s=this._scrollables.map(l=>l.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ax(t,s),isOriginOutsideView:fT(t,s),isOverlayClipped:ax(e,s),isOverlayOutsideView:fT(e,s)}}_subtractOverflows(t,...e){return e.reduce((s,l)=>s-Math.max(l,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,s=this._viewportRuler.getViewportScrollPosition();return{top:s.top+this._viewportMargin,left:s.left+this._viewportMargin,right:s.left+t-this._viewportMargin,bottom:s.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&A0(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof wn)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,s=t.height||0;return{top:t.y,bottom:t.y+s,left:t.x,right:t.x+e,height:s,width:e}}}function Dl(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function dx(r){if("number"!=typeof r&&null!=r){const[t,e]=r.split(k5);return e&&"px"!==e?null:parseFloat(t)}return r||null}function px(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}const fx="cdk-global-overlay-wrapper";class P5{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(fx),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,s=this._overlayRef.getConfig(),{width:l,height:u,maxWidth:h,maxHeight:p}=s,m=!("100%"!==l&&"100vw"!==l||h&&"100%"!==h&&"100vw"!==h),v=!("100%"!==u&&"100vh"!==u||p&&"100%"!==p&&"100vh"!==p);t.position=this._cssPosition,t.marginLeft=m?"0":this._leftOffset,t.marginTop=v?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,m?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=v?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,s=e.style;e.classList.remove(fx),s.justifyContent=s.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let F5=(()=>{class r{constructor(e,s,l,u){this._viewportRuler=e,this._document=s,this._platform=l,this._overlayContainer=u}global(){return new P5}flexibleConnectedTo(e){return new L5(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return r.\u0275fac=function(e){return new(e||r)(De(ix),De(qt),De(Hs),De(cx))},r.\u0275prov=st({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),B5=0,Xg=(()=>{class r{constructor(e,s,l,u,h,p,m,v,T,I,O){this.scrollStrategies=e,this._overlayContainer=s,this._componentFactoryResolver=l,this._positionBuilder=u,this._keyboardDispatcher=h,this._injector=p,this._ngZone=m,this._document=v,this._directionality=T,this._location=I,this._outsideClickDispatcher=O}create(e){const s=this._createHostElement(),l=this._createPaneElement(s),u=this._createPortalOutlet(l),h=new lx(e);return h.direction=h.direction||this._directionality.value,new N5(u,s,l,h,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const s=this._document.createElement("div");return s.id="cdk-overlay-"+B5++,s.classList.add("cdk-overlay-pane"),e.appendChild(s),s}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(ll)),new h5(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return r.\u0275fac=function(e){return new(e||r)(De(A5),De(cx),De(_a),De(F5),De(M5),De(mn),De(cn),De(qt),De(IE),De(Cf),De(x5))},r.\u0275prov=st({token:r,factory:r.\u0275fac}),r})();const U5={provide:new lt("cdk-connected-overlay-scroll-strategy"),deps:[Xg],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let G5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({providers:[Xg,U5],imports:[[gd,d5,rx],rx]}),r})();const W5=["mat-menu-item",""];function j5(r,t){1&r&&(Tt.lFrame.currentNamespace=Kd,xn(0,"svg",2),Zi(1,"polygon",3),Nn())}const gx=["*"];function z5(r,t){if(1&r){const e=Dv();xn(0,"div",0),Vn("keydown",function(l){return Zs(e),ma()._handleKeydown(l)})("click",function(){return Zs(e),ma().closed.emit("click")})("@transformMenu.start",function(l){return Zs(e),ma()._onAnimationStart(l)})("@transformMenu.done",function(l){return Zs(e),ma()._onAnimationDone(l)}),xn(1,"div",1),gh(2),Nn(),Nn()}if(2&r){const e=ma();gi("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),Vi("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const Kg={transformMenu:H0("transformMenu",[G0("void",Cl({opacity:0,transform:"scale(0.8)"})),AE("void => enter",DE("120ms cubic-bezier(0, 0, 0.2, 1)",Cl({opacity:1,transform:"scale(1)"}))),AE("* => void",DE("100ms 25ms linear",Cl({opacity:0})))]),fadeInItems:H0("fadeInItems",[G0("showing",Cl({opacity:1})),AE("void => *",[Cl({opacity:0}),DE("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},X5=new lt("MatMenuContent"),gT=new lt("MAT_MENU_PANEL"),K5=GM(aT(class{}));let Yg=(()=>{class r extends K5{constructor(e,s,l,u,h){super(),this._elementRef=e,this._focusMonitor=l,this._parentMenu=u,this._changeDetectorRef=h,this.role="menuitem",this._hovered=new we,this._focused=new we,this._highlighted=!1,this._triggersSubmenu=!1,u&&u.addItem&&u.addItem(this)}focus(e,s){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,s):this._getHostElement().focus(s),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var l;const e=this._elementRef.nativeElement.cloneNode(!0),s=e.querySelectorAll("mat-icon, .material-icons");for(let u=0;u<s.length;u++)s[u].remove();return(null==(l=e.textContent)?void 0:l.trim())||""}_setHighlighted(e){var s;this._highlighted=e,null==(s=this._changeDetectorRef)||s.markForCheck()}}return r.\u0275fac=function(e){return new(e||r)(Se(wn),Se(qt),Se(fd),Se(gT,8),Se(Ah))},r.\u0275cmp=Br({type:r,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,s){1&e&&Vn("click",function(u){return s._checkDisabled(u)})("mouseenter",function(){return s._handleMouseEnter()}),2&e&&(Vi("role",s.role)("tabindex",s._getTabIndex())("aria-disabled",s.disabled.toString())("disabled",s.disabled||null),Eo("mat-menu-item",!0)("mat-menu-item-highlighted",s._highlighted)("mat-menu-item-submenu-trigger",s._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Tn],attrs:W5,ngContentSelectors:gx,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,s){1&e&&(fh(),gh(0),Zi(1,"div",0),rl(2,j5,2,0,"svg",1)),2&e&&(ci(1),gi("matRippleDisabled",s.disableRipple||s.disabled)("matRippleTrigger",s._getHostElement()),ci(1),gi("ngIf",s._triggersSubmenu))},directives:[Wg,Zy],encapsulation:2,changeDetection:0}),r})();const mx=new lt("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let $5=0,bd=(()=>{class r{constructor(e,s,l){this._elementRef=e,this._ngZone=s,this._defaultOptions=l,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new al,this._tabSubscription=a.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new we,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Rn,this.close=this.closed,this.panelId="mat-menu-panel-"+$5++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=bl(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=bl(e)}set panelClass(e){const s=this._previousPanelClass;s&&s.length&&s.split(" ").forEach(l=>{this._classList[l]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(l=>{this._classList[l]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new Jz(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Jf(this._directDescendantItems),Ps(e=>Ws(...e.map(s=>s._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Jf(this._directDescendantItems),Ps(s=>Ws(...s.map(l=>l._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const s=e.keyCode,l=this._keyManager;switch(s){case 27:_E(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(38===s||40===s)&&l.setFocusOrigin("keyboard"),l.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(Fr(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const s=this._keyManager;if(s.setFocusOrigin(e).setFirstItemActive(),!s.activeItem&&this._directDescendantItems.length){let l=this._directDescendantItems.first._getHostElement().parentElement;for(;l;){if("menu"===l.getAttribute("role")){l.focus();break}l=l.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const s=Math.min(this._baseElevation+e,24),l=`${this._elevationPrefix}${s}`,u=Object.keys(this._classList).find(h=>h.startsWith(this._elevationPrefix));(!u||u===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[l]=!0,this._previousElevation=l)}setPositionClasses(e=this.xPosition,s=this.yPosition){const l=this._classList;l["mat-menu-before"]="before"===e,l["mat-menu-after"]="after"===e,l["mat-menu-above"]="above"===s,l["mat-menu-below"]="below"===s}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Jf(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(s=>s._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return r.\u0275fac=function(e){return new(e||r)(Se(wn),Se(cn),Se(mx))},r.\u0275dir=_t({type:r,contentQueries:function(e,s,l){if(1&e&&(Vu(l,X5,5),Vu(l,Yg,5),Vu(l,Yg,4)),2&e){let u;As(u=Os())&&(s.lazyContent=u.first),As(u=Os())&&(s._allItems=u),As(u=Os())&&(s.items=u)}},viewQuery:function(e,s){if(1&e&&nf(ts,5),2&e){let l;As(l=Os())&&(s.templateRef=l.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),r})(),J5=(()=>{class r extends bd{constructor(e,s,l){super(e,s,l),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return r.\u0275fac=function(e){return new(e||r)(Se(wn),Se(cn),Se(mx))},r.\u0275cmp=Br({type:r,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,s){2&e&&Vi("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Hn([{provide:gT,useExisting:r}]),Tn],ngContentSelectors:gx,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,s){1&e&&(fh(),rl(0,z5,3,6,"ng-template"))},directives:[ID],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[Kg.transformMenu,Kg.fadeInItems]},changeDetection:0}),r})();const _x=new lt("mat-menu-scroll-strategy"),Z5={provide:_x,deps:[Xg],useFactory:function(r){return()=>r.scrollStrategies.reposition()}},yx=pd({passive:!0});let q5=(()=>{class r{constructor(e,s,l,u,h,p,m,v){this._overlay=e,this._element=s,this._viewContainerRef=l,this._menuItemInstance=p,this._dir=m,this._focusMonitor=v,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=a.EMPTY,this._hoverSubscription=a.EMPTY,this._menuCloseSubscription=a.EMPTY,this._handleTouchStart=T=>{wE(T)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Rn,this.onMenuOpen=this.menuOpened,this.menuClosed=new Rn,this.onMenuClose=this.menuClosed,this._scrollStrategy=u,this._parentMaterialMenu=h instanceof bd?h:void 0,s.nativeElement.addEventListener("touchstart",this._handleTouchStart,yx),p&&(p._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(s=>{this._destroyMenu(s),("click"===s||"tab"===s)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(s)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,yx),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),s=e.getConfig();this._setPosition(s.positionStrategy),s.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof bd&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,s){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,s):this._element.nativeElement.focus(s)}updatePosition(){var e;null==(e=this._overlayRef)||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const s=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,s instanceof bd?(s._resetAnimation(),s.lazyContent?s._animationDone.pipe(Er(l=>"void"===l.toState),Fr(1),Tg(s.lazyContent._attached)).subscribe({next:()=>s.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),s.lazyContent&&s.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,s=this.menu.parentMenu;for(;s;)e++,s=s.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new lx({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(s=>{this.menu.setPositionClasses("start"===s.connectionPair.overlayX?"after":"before","top"===s.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[s,l]="before"===this.menu.xPosition?["end","start"]:["start","end"],[u,h]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[p,m]=[u,h],[v,T]=[s,l],I=0;this.triggersSubmenu()?(T=s="before"===this.menu.xPosition?"start":"end",l=v="end"===s?"start":"end",I="bottom"===u?8:-8):this.menu.overlapTrigger||(p="top"===u?"bottom":"top",m="top"===h?"bottom":"top"),e.withPositions([{originX:s,originY:p,overlayX:v,overlayY:u,offsetY:I},{originX:l,originY:p,overlayX:T,overlayY:u,offsetY:I},{originX:s,originY:m,overlayX:v,overlayY:h,offsetY:-I},{originX:l,originY:m,overlayX:T,overlayY:h,offsetY:-I}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),s=this._overlayRef.detachments();return Ws(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:wt(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Er(h=>h!==this._menuItemInstance),Er(()=>this._menuOpen)):wt(),s)}_handleMousedown(e){SE(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const s=e.keyCode;(13===s||32===s)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===s&&"ltr"===this.dir||37===s&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Er(e=>e===this._menuItemInstance&&!e.disabled),qM(0,cT)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof bd&&this.menu._isAnimating?this.menu._animationDone.pipe(Fr(1),qM(0,cT),Tg(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new ex(this.menu.templateRef,this._viewContainerRef)),this._portal}}return r.\u0275fac=function(e){return new(e||r)(Se(Xg),Se(wn),Se(Kr),Se(_x),Se(gT,8),Se(Yg,10),Se(IE,8),Se(fd))},r.\u0275dir=_t({type:r,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(e,s){1&e&&Vn("click",function(u){return s._handleClick(u)})("mousedown",function(u){return s._handleMousedown(u)})("keydown",function(u){return s._handleKeydown(u)}),2&e&&Vi("aria-expanded",s.menuOpen||null)("aria-controls",s.menuOpen?s.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),r})(),e9=(()=>{class r extends q5{}return r.\u0275fac=function(){let t;return function(s){return(t||(t=_r(r)))(s||r)}}(),r.\u0275dir=_t({type:r,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[Tn]}),r})(),t9=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({providers:[Z5],imports:[[ib,Oa,XM,G5],pT,Oa]}),r})();function n9(r,t){if(1&r){const e=Dv();xn(0,"button",12),Vn("click",function(){const u=Zs(e).$implicit;return ma(2).ShowDemo(u.id)}),Mi(1),Nn()}if(2&r){const e=t.$implicit,s=t.index;ci(1),Nv("",s+1," ",e.description,"")}}function i9(r,t){if(1&r&&(xn(0,"button",11),Mi(1),Nn(),xn(2,"mat-menu",null,3),rl(4,n9,2,2,"ng-template",4),Nn()),2&r){const e=t.$implicit,s=t.index;gi("matMenuTriggerFor",Ev(3)),ci(1),kv("",s+1," ",e.key," (",e.value.length,")"),ci(3),gi("ngForOf",e.value)}}const r9=function(r){return["/","automation","loadexample",r]};function o9(r,t){if(1&r&&(xn(0,"a",13),Mi(1),Nn()),2&r){const e=ma();gi("routerLink",function(r,t,e,s){return wR(Pe(),Fi(),r,t,e,s)}(2,r9,e.mustLoadDemoBlock)),ci(1),_h("Direct link ",e.mustLoadDemoBlock,"")}}function s9(r,t){1&r&&(xn(0,"span"),Mi(1,"Loading"),Nn())}let bx=(()=>{class r{constructor(e,s,l){this.tabulator=e,this.loadDemo=s,this.ar=l,this.swaggerLoaded=0,this.demoWorkspace=null,this.demos=[],this.demosCategories=new Map,this.mustLoadDemoBlock="",this.directLinkDemo="",this.step=0,this.swaggerData=[],this.showInner="",this.toolboxXML="",this.ar.paramMap.subscribe(u=>{this.mustLoadDemoBlock=u.get("demoblock")})}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid()}RunCode(){var e;this.run=tc.interpreterHelper.createInterpreter(this.demoWorkspace,Ui),this.clearOutput(),this.showInner="start program",e=this,this.run.runCode((l,u)=>{try{return new Interpreter(this.run.latestCode,u)}catch(h){e.ShowInnerWorkings(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(h))}},l=>{e.step++,e.showInner+=`\n ${e.step} : ${l}`,this.tabulator.AddDataToGrid(l)},()=>{e.showInner+="\n program executed",this.tabulator.FinishGrid()})}ShowDemo(e){this.mustLoadDemoBlock=e,this.loadDemo.getDemoBlock(e).subscribe(s=>{var l=rn.Xml.textToDom(s);null!=this.demoWorkspace&&(rn.Xml.clearWorkspaceAndLoadFromXml(l,this.demoWorkspace),window.alert("please press run code button"))})}registerSwaggerBlocksObjects(e,s){return s.fieldXMLObjects.map(u=>rn.Xml.textToDom(u))}registerSwaggerBlocksAPIControllers(e,s,l){var h=s.operations.filter(p=>p.controller==l);return s.fieldXMLFunctions.filter(p=>{if(""==p.id)return!0;var m=p.id+"/",v=!1;return h.forEach(T=>{m.startsWith(T.id)&&(v=!0)}),v}).map(p=>rn.Xml.textToDom(p.gui))}registerSwaggerBlocksAPI(e,s){return s.fieldXMLFunctions.map(u=>rn.Xml.textToDom(u.gui))}ngOnInit(){this.StartRegister()}LoadSwagger(){var e=window.prompt("Swagger url? ","https://swagger-tax-calc-api.herokuapp.com/api-docs");if(e){if(e.endsWith(".html")||e.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");this.LoadSwaggerFromUrl(e).then(s=>{this.afterTimeout(this,this.toolboxXML),window.alert("done")})}}LoadSwaggerFromUrl(e,s){var l=this;return iE(function*(){var u=new K3.parseData(e),h=yield u.ParseSwagger();h.name=s||e,l.swaggerData.push(h);for(var p=0;p<h.GenerateBlocks.length;p++)(0,h.GenerateBlocks[p])(rn.Blocks,Ui,T=>new rn.FieldDropdown(T));for(p=0;p<h.GenerateFunctions.length;p++)(0,h.GenerateFunctions[p])(rn.Blocks,Ui,function(O){return new rn.FieldImage(`assets/httpImages/${O}.png`,90,20,O)});return h})()}StartRegister(){var e=this;return iE(function*(){var s=yield function(r,t){return new Promise((s,l)=>{const u=new $({next:h=>{s(h),u.unsubscribe()},error:l,complete:()=>{l(new Qh)}});r.subscribe(u)})}(e.loadDemo.getSwaggerLinks()),l=new Map;s.forEach(function(){var m=iE(function*(v){l.set(v.id,yield e.LoadSwaggerFromUrl(v.link,v.id))});return function(v){return m.apply(this,arguments)}}());var u=[...Array(10).keys()].map(m=>e.CategorySwaggerHidden(m));e.loadDemo.getDemoBlocks().subscribe(m=>{e.demos=m.sort((T,I)=>T.description.localeCompare(I.description));var v=m.map(T=>T.categories).filter(T=>(null==T?void 0:T.length)>0).flatMap(T=>T.split(";")).filter(T=>(null==T?void 0:T.length)>0);e.demosCategories.set("All",e.demos),v.forEach(T=>{e.demosCategories.set(T,m.filter(I=>{var O;return(null===(O=I.categories)||void 0===O?void 0:O.length)>0}).filter(I=>(";"+I.categories+";").indexOf(";"+T+";")>-1))})});const h=document.getElementById("steps");if(null!=h){e.tabulator.initGrid(h),Ln.filterBlocks.definitionBlocks(rn.Blocks,Ui),Ln.waitBlocks.definitionBlocks(rn.defineBlocksWithJsonArray,Ui),Ln.xhrBlocks.definitionBlocks(rn.Blocks,Ui,function(m){return new rn.FieldDropdown(m)}),Ln.propBlocks.definitionBlocks(rn.Blocks,Ui,function(m){return new rn.FieldLabelSerializable(m)}),Ln.guiBlocks.definitionBlocks(rn.Blocks,Ui),Ln.convertersBlocks.definitionBlocks(rn.Blocks,Ui),Ln.exportFileBlock.definitionBlocks(rn.Blocks,Ui),Ln.createObjectBlocks.definitionBlocks(rn.Blocks,Ui,rn.Extensions,m=>new rn.FieldTextInput(m)),Ln.currentDateBlock.definitionBlocks(rn.Blocks,Ui,function(m){return new rn.FieldDropdown(m)}),Ln.dateFromTextBlock.definitionBlocks(rn.Blocks,Ui),Ln.waitBlocks.definitionBlocks(rn.Blocks,Ui),Ln.commentBlock.definitionBlocks(rn.Blocks,Ui,m=>new rn.FieldLabelSerializable(m)),Ln.auth0Blocks.definitionBlocks(rn.Blocks,Ui);var p=[Ln.defaultBlocks.generalBlocks(),`    \n            ${Ln.filterBlocks.fieldXML()}\n            ${Ln.xhrBlocks.fieldXML()}\n            \n            ${Ln.propBlocks.fieldXML()}\n            <category id="catGUI" name="GUI">\n            ${Ln.guiBlocks.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${Ln.waitBlocks.fieldXML()}\n        </category>`,`<category id="catConverters"  name="Converters">\n          ${Ln.convertersBlocks.fieldXML()}\n        </category>`,`<category id="catExporter"  name="Exporter">\n          ${Ln.exportFileBlock.fieldXML()}\n        </category>`,`<category id="catDates"  name="Dates">\n          ${Ln.currentDateBlock.fieldXML()}\n          ${Ln.dateFromTextBlock.fieldXML()}\n          ${Ln.waitBlocks.fieldXML()}\n        </category>`,`${Ln.commentBlock.fieldXML()}`,`${Ln.createObjectBlocks.fieldXML()}`,`${Ln.auth0Blocks.fieldXML()}`,`<category name="Swagger" id="catSwagger" expanded='true' >          \n          ${u}\n        </category> `];e.initialize(p)}else window.alert("gridElement is null")})()}SaveBlocks(){tc.saveBlocksUrl.saveState(rn.Xml,this.demoWorkspace)}ShowInnerWorkings(){if(null!=this.demoWorkspace){var e=rn.Xml.workspaceToDom(this.demoWorkspace,!0),s=rn.Xml.domToPrettyText(e);this.showInner=`\n            ${this.run.latestCode}\n            ========\n            ${s}\n            ========\n           \n            `}else window.alert("demoWorkspace is null")}Download(){var e=window.prompt("Name?","blocks.txt");null!=e&&tc.saveLoad.DownloadBlocks(rn.Xml,this.demoWorkspace,e)}changeListener(e){this.readThis(e.target)}readThis(e){var s=e.files[0],l=new FileReader,u=this;l.onloadend=function(h){tc.saveLoad.LoadFile(rn.Xml,u.demoWorkspace,l.result),u.run.resetInterpreter()},l.readAsText(s)}CategorySwaggerHidden(e){return`<category name='swagger_hidden_${e}' hidden='true' >${e}</category>`}initialize(e){const s=document.getElementById("blocklyDiv");if(null!=s){var l=e.map(h=>`<sep></sep>${h}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">\n    ${l}\n    </xml>`,this.demoWorkspace=rn.inject(s,{readOnly:!1,media:"media/",trashcan:!0,move:{scrollbars:!0,drag:!0,wheel:!0},toolbox:this.toolboxXML});var u=this;window.setTimeout(u.afterTimeout,2e3,this,this.toolboxXML),this.run=tc.interpreterHelper.createInterpreter(this.demoWorkspace,Ui),u=this,this.demoWorkspace.addChangeListener(function(h){h.isUiEvent||(u.run.resetInterpreter(),u.run.generateCodeAndLoadIntoInterpreter(),u.ShowInnerWorkings())})}else window.alert("blocklyDiv is null")}restoreBlocks(){tc.saveBlocksUrl.restoreState(rn.Xml,this.demoWorkspace)}afterTimeout(e,s){var l,u;null!=(null==e?void 0:e.mustLoadDemoBlock)&&e.ShowDemo(null==e?void 0:e.mustLoadDemoBlock),null!=(null==e?void 0:e.swaggerData)&&(s=s.replace("Swagger",`Swagger(${e.swaggerData.length})`),e.swaggerData.forEach(m=>{var v=m.findCategSwaggerFromPaths().map(I=>`<category name='${I}' custom='func_${m.name}_${I}'></category>`).join("\n"),T=(null==e?void 0:e.CategorySwaggerHidden(null==e?void 0:e.swaggerLoaded))||"";s=s.replace(T,`<category name='${m.name}'>\n      <category name='API' id='func_${m.name}'>\n      ${v}\n      </category>\n      ${m.categSwagger()}\n      </category>\n    `),e.swaggerLoaded++}),null===(l=null==e?void 0:e.demoWorkspace)||void 0===l||l.updateToolbox(s),null===(u=null==e?void 0:e.swaggerData)||void 0===u||u.forEach(m=>{if(null!=(null==e?void 0:e.demoWorkspace)){var T="objects_"+m.nameCategSwagger(),I="api_"+m.nameCategSwagger();e.demoWorkspace.registerToolboxCategoryCallback(T,O=>e.registerSwaggerBlocksObjects(O,m)),e.demoWorkspace.registerToolboxCategoryCallback(I,O=>e.registerSwaggerBlocksAPI(O,m)),m.findCategSwaggerFromPaths().forEach(O=>{var N;null===(N=null==e?void 0:e.demoWorkspace)||void 0===N||N.registerToolboxCategoryCallback(`func_${m.name}_${O}`,V=>e.registerSwaggerBlocksAPIControllers(V,m,O))})}}),e.restoreBlocks())}}return r.\u0275fac=function(e){return new(e||r)(Se(sz),Se(Ez),Se(_l))},r.\u0275cmp=Br({type:r,selectors:[["app-display-blockly"]],decls:28,vars:8,consts:[["mat-raised-button","","color","primary",3,"click"],["type","file",3,"change"],["mat-raised-button","","color","primary",3,"matMenuTriggerFor"],["menu","matMenu"],["ngFor","",3,"ngForOf"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[4,"ngIf"],[2,"width","100%"],["id","blocklyDiv",2,"display","inline-block","height","750px","width","58%"],["id","output","disabled","disabled",2,"display","inline-block","height","750px","width","38%",3,"ngModel","ngModelChange"],["id","steps",2,"display","inline-block","width","96%"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"]],template:function(e,s){if(1&e&&(xn(0,"button",0),Vn("click",function(){return s.LoadSwagger()}),Mi(1,"Load Swagger"),Nn(),xn(2,"button",0),Vn("click",function(){return s.ShowInnerWorkings()}),Mi(3,"Show blocks"),Nn(),Mi(4," \xa0 "),xn(5,"button",0),Vn("click",function(){return s.SaveBlocks()}),Mi(6,"Persist in browser"),Nn(),Mi(7," \xa0 "),xn(8,"button",0),Vn("click",function(){return s.RunCode()}),Mi(9,"Run Code"),Nn(),Mi(10," \xa0 "),xn(11,"button",0),Vn("click",function(){return s.Download()}),Mi(12,"Download blocks"),Nn(),Mi(13," \xa0 "),xn(14,"input",1),Vn("change",function(u){return s.changeListener(u)}),Nn(),xn(15,"button",2),Mi(16),Nn(),xn(17,"mat-menu",null,3),rl(19,i9,5,5,"ng-template",4),function(r,t){const e=Zt();let s;const l=r+20;e.firstCreatePass?(s=function(r,t){if(t)for(let e=t.length-1;e>=0;e--){const s=t[e];if(r===s.name)return s}throw new as("302",`The pipe '${r}' could not be found!`)}(t,e.pipeRegistry),e.data[l]=s,s.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(l,s.onDestroy)):s=e.data[l];const u=s.factory||(s.factory=gs(s.type)),h=rr(Se);try{const p=tu(!1),m=u();tu(p),function(r,t,e,s){e>=r.data.length&&(r.data[e]=null,r.blueprint[e]=null),t[e]=s}(e,Pe(),l,m)}finally{rr(h)}}(20,"keyvalue"),Nn(),rl(21,o9,2,4,"a",5),rl(22,s9,2,0,"span",6),xn(23,"div",7),Zi(24,"div",8),xn(25,"textarea",9),Vn("ngModelChange",function(u){return s.showInner=u}),Mi(26,"    "),Nn(),Nn(),Zi(27,"div",10)),2&e){const l=Ev(18);ci(15),gi("matMenuTriggerFor",l),ci(1),_h("Demos (",s.demos.length,")"),ci(3),gi("ngForOf",function(r,t,e){const s=r+20,l=Pe(),u=Js(l,s);return function(r,t){return r[1].data[t].pure}(l,s)?wR(l,Fi(),t,u.transform,e,u):u.transform(e)}(20,6,s.demosCategories)),ci(2),gi("ngIf",null==s.mustLoadDemoBlock?null:s.mustLoadDemoBlock.length),ci(1),gi("ngIf",null==s.demoWorkspace),ci(3),gi("ngModel",s.showInner)}},directives:[$M,e9,J5,DD,Zy,Vf,SA,Ab,Yg,J4,dg],pipes:[ND],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:normal;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),r})();const a9=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:bx},{path:"automation/loadexample/:demoblock",component:bx}];let l9=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({imports:[[t0.forRoot(a9)],t0]}),r})(),u9=(()=>{class r{constructor(){this.title="AutoBlocklyApp"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=Br({type:r,selectors:[["app-root"]],decls:2,vars:0,template:function(e,s){1&e&&(Mi(0,"This is blockly automation "),Zi(1,"router-outlet"))},directives:[$b],styles:[""]}),r})(),b9=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r}),r.\u0275inj=fn({imports:[[ib,Oa],Oa]}),r})(),E9=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Bn({type:r,bootstrap:[u9]}),r.\u0275inj=fn({providers:[],imports:[[$D,l9,NG,L4,b9,Q4,bz,t9]]}),r})();(function(){if(dI)throw new Error("Cannot enable prod mode after platform setup.");hI=!1})(),CU().bootstrapModule(E9).catch(r=>console.error(r))},84575:(C,A,g)=>{C.exports={interpreterHelper:g(19203),saveBlocksUrl:g(83435),saveLoad:g(82008)}},19203:(C,A,g)=>{A.createInterpreter=function(b,w){return{latestCode:"",workspace:b,BlocklyJavaScript:w,step:0,highlightPause:!1,myInterpreter:null,runner:null,generateCodeAndLoadIntoInterpreter:function(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(b),this.resetStepUi(!0)},resetStepUi:function(o){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1},resetInterpreter:function(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)},highlightBlock:function(o){this.workspace.highlightBlock(o),highlightPause=!0},runCode:function(o,n,a){this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var c=this;setTimeout(function(){this.highlightPause=!1,c.myInterpreter=o(c.latestCode,(d,_)=>c.initApiJS(d,_,c,n,a)),c.runner=function(){c.myInterpreter&&(c.myInterpreter.run()?setTimeout(c.runner,10):(a?a():console.log("\n\n<< Program complete >>"),c.resetInterpreter(),c.resetStepUi(!1)))},c.runner&&c.runner()},100)},initInterpreterWaitForSeconds:function(o,n){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var a=o.createAsyncFunction(function(c,d){setTimeout(d,1e3*c)});o.setProperty(n,"waitForSeconds",a)},doGet:function(o,n,a){console.log(o,n);let c=new XMLHttpRequest;if(c.open("GET",o,!0),a&&a.length>0)for(var d=0;d<a.length;d++){var _=a[d];c.setRequestHeader(_.name,_.value)}c.onreadystatechange=function(){if(4==c.readyState){if(c.status>=200&&c.status<300){var y=JSON.stringify({origHref:o,objectToSend:"",status:c.status,statusOK:!0,text:c.responseText});return n(y)}return y=JSON.stringify({origHref:o,objectToSend:"",status:c.status,statusOK:!1,text:c.responseText}),n(y)}},c.send(null)},exportToFile:function(o,n,a){var d,c=g(48086);return d=a?this.b64toBlob(n):new Blob([n],{type:"text/plain;charset=utf-8"}),c.saveAs(d,o),o},b64toBlob:function(o,n="",a=512){const c=atob(o),d=[];for(let y=0;y<c.length;y+=a){const R=c.slice(y,y+a),x=new Array(R.length);for(let H=0;H<R.length;H++)x[H]=R.charCodeAt(H);const B=new Uint8Array(x);d.push(B)}return new Blob(d,{type:n})},displayDateCurrentAsHuman:function(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},displayDateCurrentAsIso:function(){return(new Date).toISOString()},displayDateCurrentAsUnix:function(){return Date.now()},displayDateFormatted:function(o){switch(o){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:console.log("Date time format not suported")}},doPut:(o,n,a)=>{let c=n,d=new XMLHttpRequest;d.open("PUT",o,!0),d.setRequestHeader("Content-Type","application/json;charset=UTF-8"),d.onreadystatechange=function(){if(4==d.readyState){if(d.status>=200&&d.status<300){var _=JSON.stringify({origHref:o,objectToSend:n,status:d.status,statusOK:!0,text:d.responseText});return a(_)}return _=JSON.stringify({origHref:o,objectToSend:n,status:d.status,statusOK:!1,text:d.responseText}),a(_)}},d.send(c)},doDelete:(o,n)=>{var a=new XMLHttpRequest;a.open("DELETE",o,!0),a.onreadystatechange=function(){if(4==a.readyState){if(a.status>=200&&a.status<300){var c=JSON.stringify({origHref:o,objectToSend:"",status:a.status,statusOK:!0,text:a.responseText});return n(c)}return c=JSON.stringify({origHref:o,objectToSend:"",status:a.status,statusOK:!1,text:a.responseText}),n(c)}},a.send(null)},doPost:function(o,n,a){let c=n,d=new XMLHttpRequest;d.open("POST",o,!0),d.setRequestHeader("Content-Type","application/json;charset=UTF-8"),d.onreadystatechange=function(){if(4==d.readyState){if(d.status>=200&&d.status<300){var _=JSON.stringify({origHref:o,objectToSend:n,status:d.status,statusOK:!0,text:d.responseText});return a(_)}return _=JSON.stringify({origHref:o,objectToSend:n,status:d.status,statusOK:!1,text:d.responseText}),a(_)}},d.send(c)},initApiJS:function(o,n,a,c,d){o.setProperty(n,"errHandler",o.createNativeFunction(_=R=>{c?c("\n error --\n"+R+"\n error --"):console.log(R)}));var y=o.nativeToPseudo({"(localSite)":[]});o.setProperty(n,"headersForDomain",y),o.setProperty(n,"alert",o.createNativeFunction(_=function(R){R=R?R.toString():"",c?c(R):console.log(R)})),o.setProperty(n,"waitTime",o.createAsyncFunction(_=(R,x)=>{console.log(`waiting seconds ${R}`),setTimeout(x,1e3*R)})),o.setProperty(n,"displayDateFormatted",o.createNativeFunction(_=R=>a.displayDateFormatted(R))),o.setProperty(n,"exportToFile",o.createNativeFunction(_=(R,x,B)=>a.exportToFile(R,x,B))),o.setProperty(n,"convertToCSV",o.createNativeFunction(_=R=>{let x="object"!=typeof R?JSON.parse(R):{};return x=[Object.keys(x[0])].concat(x),x.map(H=>Object.values(H).toString()).join("\n")})),o.setProperty(n,"open",o.createNativeFunction(_=function(R){window.open(R)}));var _=function(R){return R=R?R.toString():"",o.createPrimitive(prompt(R))};o.setProperty(n,"prompt",o.createNativeFunction(_)),a.BlocklyJavaScript.addReservedWords("waitForSeconds"),_=o.createAsyncFunction(function(R,x){setTimeout(x,1e3*R)}),o.setProperty(n,"waitForSeconds",_),_=(R,x)=>{var B=o.pseudoToNative(y),H="(localSite)";(R.startsWith("http://")||R.startsWith("https://"))&&(H=new URL(R).hostname);var F=[];return H in B&&(F=B[H]),a.doGet(R,x,F)},o.setProperty(n,"getXhr",o.createAsyncFunction(_)),_=(R,x,B)=>{try{o.pseudoToNative(y);(R.startsWith("http://")||R.startsWith("https://"))&&new URL(R).hostname,a.doPost(R,x,B)}catch(z){alert("is an error"+z)}},o.setProperty(n,"postXhr",o.createAsyncFunction(_)),_=(R,x)=>{try{o.pseudoToNative(y);(R.startsWith("http://")||R.startsWith("https://"))&&new URL(R).hostname,a.doDelete(R,x)}catch(Y){alert("is an error"+Y)}},o.setProperty(n,"deleteXhr",o.createAsyncFunction(_)),_=(R,x,B)=>{try{var H=o.pseudoToNative(y),F="(localSite)";(R.startsWith("http://")||R.startsWith("https://"))&&(F=new URL(R).hostname);var Y=[];F in H&&(Y=H[F]),a.doPut(R,x,B,Y,!1)}catch(G){alert("is an error"+G)}},o.setProperty(n,"putXhr",o.createAsyncFunction(_)),_=function(R){return R=R?R.toString():"",o.createPrimitive(a.highlightBlock(R))},o.setProperty(n,"highlightBlock",o.createNativeFunction(_))}}}},83435:(C,A)=>{A.saveState=function(w,o){var a=w.workspaceToDom(o,!0),c=w.domToPrettyText(a);window.localStorage.setItem("BlocklyState",c)},A.restoreState=function(w,o){var a=window.localStorage.getItem("BlocklyState");if(a){var c=w.textToDom(a);w.clearWorkspaceAndLoadFromXml(c,o)}return""}},82008:(C,A,g)=>{var b=g(48086);A.DownloadBlocks=function(w,o,n){var a=w.workspaceToDom(o,!0),c=w.domToPrettyText(a),d=new Blob([c],{type:"text/plain;charset=utf-16"});b.saveAs(d,n)},A.LoadFile=function(w,o,n){o.clear();var a=w.textToDom(n);w.domToWorkspace(a,o)}},85135:(C,A)=>{A.definitionBlocks=function(g,b){g.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},b.auth0webapidata=function(n){var y='{"client_id":'+b.valueToCode(n,"client_id",0);return y+=',"client_secret":'+b.valueToCode(n,"client_secret",0),y+=',"audience":'+b.valueToCode(n,"audience",0),y+=',"grant_type":'+b.valueToCode(n,"grant_type",0),[y+="}",99]}},A.fieldXML=function(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}},69570:(C,A)=>{A.definitionBlocks=function(g,b,w){g.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(w(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},b.comment=function(n){return"/*\n"+(b.valueToCode(n,"TEXT",0)||"''")+"\n*/;\n"}},A.fieldXML=function(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n'}},14147:(C,A)=>{A.definitionBlocks=function(g,b){g.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},b.converttojson=function(a){return["JSON.parse("+b.valueToCode(a,"ValueToConvert",0)+")",99]},g.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},b.converttostring=function(a){return["JSON.stringify("+b.valueToCode(a,"ValueToConvert",0)+")",99]},g.convertcsv={init:function(){this.appendDummyInput().appendField("Convert CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},b.convertcsv=function(a){return["convertToCSV("+b.valueToCode(a,"ArrayToConvert",b.ORDER_ATOMIC)+")",99]}},A.fieldXML=function(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}},52446:(C,A)=>{A.definitionBlocks=function(g,b,w,o){b.object_from_json=function(k){return[`JSON.parse(${b.valueToCode(k,"JSON",0)})`,99]},b.object_to_json=function(k){return[`JSON.stringify(${b.valueToCode(k,"object",0)})`,99]},b.object_get=function(k){const oe=k.getFieldValue("field_name");return[`${b.valueToCode(k,"object",0)}['${oe}']`,99]},b.object_set=function(k){const oe=k.getFieldValue("field_name");return`${b.valueToCode(k,"object_field",0)}['${oe}'] = ${b.valueToCode(k,"value_field",0)};\n`},b.object_create=function(k){if(!k.numFields)return["{}",99];let oe="";for(let J=1;J<=k.numFields;J++)oe+=`"${k.getFieldValue("field"+J)}": ${b.valueToCode(k,"field_input"+J,0)}, `;return[`{ ${oe} }`,99]};const H="object_field",F="object_create_mutator_top",Y="#F99EA3",z=(k,...oe)=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[k]),G={type:"object_from_json",message0:z("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:Y,tooltip:z("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};g.object_from_json={init:function(){this.jsonInit(G)}};const ie={type:"object_to_json",message0:z("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:Y,tooltip:z("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};g.object_to_json={init:function(){this.jsonInit(ie)}};const Z={type:"object_get",message0:z("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:Y,tooltip:z("object_get_json_tooltip"),helpUrl:""};g.object_get={init:function(){this.jsonInit(Z)}};const re={type:"object_set",message0:z("object_set_json"),args0:[{type:"field_input",name:"field_name",text:z("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Y,tooltip:z("object_set_json_tooltip"),helpUrl:""};g.object_set={init:function(){this.jsonInit(re)}};const $={type:"object_create",message0:z("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:z("object_create_tooltip"),helpUrl:""};g.object_create={init:function(){this.jsonInit($)}};const ae={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:z("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};g[H]={init:function(){this.jsonInit(ae)}};const K={type:"object_create_mutator",message0:z("object_create"),nextStatement:null,colour:15,tooltip:z("object_create_tooltip"),helpUrl:""};g[F]={init:function(){this.jsonInit(K)}},w.registerMutator("controls_create_mutator",{numFields:0,fields:[],domToMutation:function(k){this.fields=[];for(let W,oe=0;W=k.childNodes[oe];oe++)"field"==W.nodeName.toLowerCase()&&this.fields.push(W.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const k=document.createElement("mutation");k.setAttribute("num_fields",""+this.numFields);for(let oe=0;oe<this.fields.length;oe++){const W=document.createElement("field");W.setAttribute("name",this.fields[oe]),k.appendChild(W)}return k},compose:function(k){let oe=k.nextConnection&&k.nextConnection.targetBlock();this.numFields=0,this.fields=[];let W=[null];for(;oe;)this.fields.push(oe.getFieldValue("field_name")),this.numFields++,W.push(oe.savedConnection),oe=oe.nextConnection&&oe.nextConnection.targetBlock();this.updateShape();for(let J=1;J<=this.numFields;J++)Blockly.Mutator.reconnect(W[J],this,"field_input"+J)},decompose:function(k){const oe=k.newBlock(F);oe.initSvg();let W=oe.nextConnection;for(let J=0;J<this.fields.length;J++){const ne=k.newBlock(H);ne.initSvg(),ne.setFieldValue(this.fields[J],"field_name"),W.connect(ne.previousConnection),W=ne.nextConnection}return oe},saveConnections:function(k){let oe=k.nextConnection&&k.nextConnection.targetBlock(),W=1;for(;oe;){const J=this.getInput("field_input"+W);oe.savedConnection=J&&J.connection.targetConnection,oe.setFieldValue(this.getFieldValue("field"+W),"field_name"),W++,oe=oe.nextConnection&&oe.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let k=1;for(;this.getInput("field_input"+k);)this.removeInput("field_input"+k),k++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let oe=1;oe<=this.numFields;oe++){const W=this.fields[oe-1];this.appendValueInput("field_input"+oe).setCheck(null).setAlign(1).appendField(o(W),"field"+oe)}}},null,["object_field"])},A.fieldXML=function(){return'    <category name="Objects" id="Objects">\n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n</category>\n'}},70081:(C,A)=>{A.definitionBlocks=function(g,b,w){g.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new w([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};b.displayCurrentDate=a=>{let d="";switch(a.getFieldValue("dateFormat").toString()){case"human":d="displayDateFormatted('human')";break;case"iso":d="displayDateFormatted('iso')";break;case"unix":d="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[d,99]}},A.fieldXML=function(){return'<block type="displayCurrentDate"></block>'}},55126:(C,A)=>{A.definitionBlocks=function(g,b){g.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},b.DateFromText=o=>["Date.parse("+(b.valueToCode(o,"VALUE",b.ORDER_ATOMIC)||"")+")",99]},A.fieldXML=function(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}},41175:(C,A)=>{A.generalBlocks=function(){return'\n    \n    <category name="BlocklyCore=>">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}},54766:(C,A)=>{A.definitionBlocks=function(g,b){g.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},b.exportfile=function(n){return"exportToFile("+b.valueToCode(n,"fileName",0)+","+b.valueToCode(n,"contentFile",0)+","+b.valueToCode(n,"convertToByte",0)+");\n"}},A.fieldXML=function(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},41944:(C,A)=>{A.definitionBlocks=function(g,b){g.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},b.filterList=function(w){var o=b.valueToCode(w,"LIST",b.ORDER_MEMBER)||"[]",n=b.valueToCode(w,"Logic",b.ORDER_ATOMIC);"string"==typeof n&&(n=n.substr(1,n.length-2));var a="";return a+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+o+")).filter(function (item){ return "+n+";})",[a+="",b.ORDER_FUNCTION_CALL]},g.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},b.mapList=function(w){var o=b.valueToCode(w,"LIST",b.ORDER_MEMBER)||"[]",n=b.valueToCode(w,"Logic",b.ORDER_ATOMIC);"string"==typeof n&&(n=n.substr(1,n.length-2));var a="";return a+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+o+")).map(function (item){ return "+n+";})",[a+="",b.ORDER_FUNCTION_CALL]}},A.fieldXML=function(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n\n        </category>\n\n'}},50929:(C,A)=>{A.definitionBlocks=function(g,b){g.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},b.window_open=function(n){return"open("+(b.valueToCode(n,"TEXT",99)||"''")+");\n"},g.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},b.valuefromtext=function(n){return["getIDProp("+b.valueToCode(n,"IdOfText",0)+","+(b.valueToCode(n,"ValueToObtain",0)||'"value"')+")",99]}},A.fieldXML=function(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_prompt_ext">\n    </block>\n    '}},78011:(C,A,g)=>{C.exports={defaultBlocks:g(41175),filterBlocks:g(41944),waitBlocks:g(62851),xhrBlocks:g(76989),propBlocks:g(35958),guiBlocks:g(50929),convertersBlocks:g(14147),exportFileBlock:g(54766),createObjectBlocks:g(52446),currentDateBlock:g(70081),dateFromTextBlock:g(55126),waitBlocks:g(35999),commentBlock:g(69570),auth0Blocks:g(85135)}},35958:(C,A)=>{A.definitionBlocks=function(g,b,w){g.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(w("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(w(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(w("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},b.modifyproperty=function(d){return b.valueToCode(d,"ObjectToChange",0)+"["+b.valueToCode(d,"PropertyName",0)+"]="+b.valueToCode(d,"NewValue",0)+";"},g.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(w("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(w("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},b.getproperty=function(d){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+b.valueToCode(d,"ObjectToChange",0)+"))["+b.valueToCode(d,"PropertyName",0)+"]",99]}},A.fieldXML=function(){return'\n    <category name="Objects" id="Objects">\n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n</category>\n'}},35999:(C,A)=>{A.definitionBlocks=function(g,b){g.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},b.wait=function(o){return"waitTime("+(b.valueToCode(o,"VALUE",b.ORDER_ATOMIC)||"")+");"},g.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},b.wait_until=function(o){return"waitTime(("+(b.valueToCode(o,"VALUE",0)||"")+"-new Date())/1000);"}},A.fieldXML=function(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}},62851:(C,A)=>{A.definitionBlocks=function(g,b){g([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),b.wait_seconds=function(w){return"waitForSeconds("+Number(w.getFieldValue("SECONDS"))+");\n"}},A.fieldXML=function(){return'\n  <block type="wait_seconds"></block>\n'}},76989:(C,A)=>{A.definitionBlocks=function(g,b,w){g.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},b.headersbeforehttp=function(a){var c=b.valueToCode(a,"HttpDomain",0)||"(localSite)",y="\n";return y+="{\n",y+="if(!("+c+" in headersForDomain))\n",y+="{\n",y+="headersForDomain["+c+"]=[];\n",y+="};\n",y+="var arr = headersForDomain["+c+"];\n",y+="arr.push({name:"+b.valueToCode(a,"HeaderName",0)+", value:"+b.valueToCode(a,"HeaderValue",0)+"});\n",y+='//alert("a" + JSON.stringify(arr)+"a");\n',(y+='//alert("a" + JSON.stringify(headersForDomain['+c+'])+"a");\n')+"};\n"},g.httprequest={init:function(){this.appendDummyInput().appendField(w([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(w([["GET","GET"],["POST","POST"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},b.httprequest=function(a){var c=a.getFieldValue("TypeOutput"),d=a.getFieldValue("TypeRequest"),_=b.valueToCode(a,"TheUrl",0),y=b.valueToCode(a,"Data",0),R="";switch(d.toString()){case"GET":R="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_+") )";break;case"POST":R="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_+","+y+") )"}var x=R;return"JSON"===c&&(x="JSON.parse("+x+")"),[x,99]}},A.fieldXML=function(){return'\n    <category id="XHR" name="Request">\n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n    \n</block>\n\n</category>\n'}},22456:(C,A,g)=>{var b=g(38506).default;C.exports=class{constructor(n){No(this,"GenerateBlocks",[]),No(this,"GenerateFunctions",[]),No(this,"fieldXMLObjects",[]),No(this,"fieldXMLFunctions",[]),No(this,"hasError",!0),No(this,"paths",[]),No(this,"name",""),No(this,"operations",[]),No(this,"openApiDocument",null),No(this,"basePath",""),this.swaggerUrl=n}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}`}findCategSwaggerFromPaths(){var n=this.paths.filter(c=>c&&c.id&&c.id.length>0).map(c=>{var d=c.id.indexOf("{");return d>0&&(c.id=c.id.substring(0,d)),c}).map(c=>(c.id.lastIndexOf("/")!=c.id.length-1&&(c.id+="/"),c));this.operations=n.filter(c=>c.nrOps>1).map(c=>({arr:c.id.split("/").filter(_=>_.length>0),id:c.id})).map(c=>({controller:c.arr[c.arr.length-1],id:c.id}));var a=n.filter(c=>1==c.nrOps).map(c=>({arr:c.id.split("/").filter(d=>d.length>0),id:c.id})).map(c=>1==c.arr.length?{controller:c.arr[0],id:c.id}:{controller:c.arr[c.arr.length-2],id:c.id});return this.operations.push(...a),[...new Set(this.operations.map(c=>c.controller))]}categSwagger(){var n=this.findHostNameRegular();(n=n.replaceAll(".","")).length>5&&n.substring(0,5);var d=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+d+'"></category><category name="AllApi" custom="api_'+d+'"></category>'}findRootSite(){var n=this.swaggerUrl,a="";if(n.startsWith("http://")||n.startsWith("https://")){var c=new URL(n);a=c.protocol+"//"+c.hostname,c.port.length>0&&(a+=c.port)}return a}findHostNameRegular(){var _,n=this.swaggerUrl,a="(localSite)";if(n.startsWith("http://")||n.startsWith("https://")){var c=new URL(n),d=null!=(_=c.port)?_:80;a=c.hostname+d}return a.replaceAll(".","")}ParseSwagger(){var n=this;return b(function*(){var R,a=n;a.fieldXMLObjects.push(`<label text="${a.swaggerUrl}"></label>`),a.fieldXMLFunctions.push({id:"",gui:`<label text="${a.swaggerUrl}"></label>`});var c=null;try{c=(yield g(12763).default(n.swaggerUrl)).spec}catch(x){return console.error(`parseSwagger ${n.swaggerUrl}`,x),a.fieldXMLObjects.push("<label text='Error parsing!'></label>"),n}n.hasError=!1,n.basePath=c.basePath||"";var _=null==(R=c.components)?void 0:R.schemas;return(null==_||null==_)&&(_=c.definitions),_?Object.keys(_).sort().forEach(function(x){a.fieldXMLObjects.push(`<block type="${x}"></block>`),a.GenerateBlocks.push(a.GenerateBlock(_[x],x))}):console.log("_A",c),c.paths&&Object.keys(c.paths).forEach(function(x){var B=c.paths[x];a.paths.push({id:x,nrOps:Object.keys(B).length}),Object.keys(B).forEach(function(H){a.GenerateFunctions.push(a.GenerateFunction(B,x,B[H],H))})}),a.openApiDocument=c,a})()}findProperties(n){var a=[];return n.properties&&Object.keys(n.properties).forEach(c=>{a.push({key:c,value:n.properties[c]})}),a}GenerateNameFunction(n,a,c,d){return d+"_"+a.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateFunction(n,a,c,d){var _=this,y=_.GenerateNameFunction(n,a,c,d),x=c;return _.fieldXMLFunctions.push({id:a,gui:`<block type="${y}"></block>`}),function(B,H,F){B[y]={init:function(){var Y=a;Y.length>15&&(Y=Y.substring(0,25)+"..."),this.appendDummyInput().appendField(F(d)).appendField(`${d} ${Y}`);var z=_.findRootSite();if(x.parameters&&x.parameters.forEach(re=>{var $=re.name;if(re.required&&($+="*"),re.schema&&re.schema.type)if("object"==re.schema.type){var ae=re.schema.$$ref||"";ae.length>0&&($+=":"+(ae=ae.substring(ae.lastIndexOf("/")+1)))}else $+=":"+re.schema.type;this.appendValueInput(`val_${re.name}`).appendField($)}),x.requestBody){var G="";if(x.requestBody.content){var ie=x.requestBody.content["application/json"];if(ie&&ie.schema){var Z=ie.schema.$$ref;Z&&(G="=>"+Z.substring(Z.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+G).setCheck()}this.setTooltip(`${d} ${z}${a}`),this.setOutput(!0,"")}},H[y]=function(Y){var Z=_.openApiDocument.paths[a][d],re=[];"parameters"in Z&&(re=Z.parameters);var $=!1,ae=re.filter(se=>"body"==se.in).length>0;(ae||"requestBody"in Z)&&($=!0);var K={},j={};$&&(K.val_values=H.valueToCode(Y,"val_values",0),j.val_values=K.val_values),re.forEach(se=>{K[`val_${se.name}`]=H.valueToCode(Y,`val_${se.name}`,0)});var k=re.map(se=>se.name);$&!ae&&k.push("values"),k.push("extraData"),re.map(se=>`\${obj['val_${se.name}']},`);var W="function(";W+=k.join(","),W+="){\n",W+='var strUrl ="'+_.findRootSite()+_.basePath+a+'";\n';var J=re.filter(se=>"query"==se.in);if(J.length>0){W+='strUrl+="?";\n;';var ne=J.map(se=>`${se.name}={`+se.name+"}").join("&");W+='strUrl += "'+ne+'";\n;'}var ee=re.filter(se=>"path"==se.in||"query"==se.in).map(se=>`strUrl = strUrl.replace("{${se.name}}",${se.name});`);if(W+=ee.join("\n"),W+=`\n{var res= ${d}Xhr(strUrl`,$){var me="values";ae&&(me=re.filter(se=>"body"==se.in)[0].name),W+=`,JSON.stringify(${me})`}return W+=");\n",W+="var resJS=JSON.parse(res);\n",W+="if(resJS.statusOK) return resJS.text;\n",W+="errHandler(res);\n}\n",W+="}",W+="(",re.forEach(se=>{W+=K[`val_${se.name}`]+","}),$&!ae&&(W+=j.val_values+","),W+="1",[W+=")",99]}}}GenerateBlock(n,a){var c=this,d=a,y=c.findProperties(n);return function(R,x,B){R[d]={init:function(){var H=!1,F=[];n.enum&&(H=!0,F=Object.keys(n.enum).map(G=>[n.enum[G],G]));var z=this.appendDummyInput().appendField(a);H?z.appendField(B(F),`val_${a}`):y.forEach(G=>{var ae,ie=G.key;if(G.value.nullable&&0==G.value.nullable&&(ie+="*"),null==(ae=G.value)?void 0:ae.type){var Z=G.value.type||"";if("object"==Z){var re=G.value.$$ref||"";re.length>0&&(Z=re.substring(re.lastIndexOf("/")+1))}ie+=":"+Z}G.value.$ref&&(ie+="->"+G.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${G.key}`).appendField(`${ie}`)}),this.setOutput(!0,d)}},x[d]=function(H){{var F=!1;n.enum&&(F=!0);var Y=c.findProperties(n);const Z=99,re=0;var z="",G=[];return Y.forEach($=>{let ae=x.valueToCode(H,`val_${$.key}`,re);""===ae&&(ae="null"),null==ae&&(ae="null"),G.push(`"${$.key}":${ae}`)}),z="{ "+G.join(",")+" }",F&&(z=H.getFieldValue(`val_${a}`)),[z,Z]}}}}TranslateToBlocklyType(n){return"integer"==n?"Number":"string"==n?"String":"bool"==n?"Boolean":"array"==n?"Array":(console.error("not found TranslateToBlocklyType item"+n),"not found type"+n)}}},80184:(C,A,g)=>{C.exports={parseSwagger:g(44063),parseData:g(22456)}},44063:(C,A,g)=>{var b=g(38506).default;A.parseSwagger=function(){var n=b(function*(a){var B;new(g(22456))(a);var _=[],x=(yield g(50208).default(a)).response;return console.log(x.components.schemas),(null==(B=x.components)?void 0:B.schemas)&&Object.keys(x.components.schemas).forEach(function(H){_.push(function(n,a){var c=a;return n.properties&&Object.keys(n.properties).forEach(d=>{}),function(d,_){d[c]={init:function(){this.appendDummyInput().appendField(a),this.setOutput(!0,c)}}}}(x.components.schemas[H],H))}),_});return function(a){return n.apply(this,arguments)}}(),A.parseSwagger1=function(n){return g(50208).default(n)}},65612:(C,A,g)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Api=void 0;var b=g(16443);A.Api=function(n,a){void 0===a&&(a={}),this.entrypoint=n,b.assignSealed(this,a)}},97542:(C,A,g)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Field=void 0;var b=g(16443);A.Field=function(n,a){void 0===a&&(a={}),this.name=n,b.assignSealed(this,a)}},63039:(C,A,g)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Resource=void 0;var b=g(16443);A.Resource=function(n,a,c){void 0===c&&(c={}),this.name=n,this.url=a,b.assignSealed(this,c)}},36121:(C,A,g)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.removeTrailingSlash=void 0;var w=g(2805).__importDefault(g(41510)),o=g(97542),n=g(63039),a=g(8272);A.removeTrailingSlash=function(_){return _.endsWith("/")&&(_=_.slice(0,-1)),_},A.default=function(_,y){return a.getResources(_.paths).map(function(B){var H=B.replace("/",""),F=A.removeTrailingSlash(y)+B,Y=Object.keys(_.paths[B])[0],z=_.paths[B][Y];if(!z.tags)throw new Error;var G=z.tags[0];if(!_.components)throw new Error;if(!_.components.schemas)throw new Error;var Z=_.components.schemas[G].properties;if(!Z)throw new Error;var re=Object.keys(Z),$=w.default(_,["components","schemas",G,"required"],[]),ae=re.map(function(K){return new o.Field(K,{id:null,range:null,reference:null,required:!!$.find(function(j){return j===K}),description:w.default(Z[K],"description","")})});return new n.Resource(H,F,{id:null,title:G,fields:ae,readableFields:ae,writableFields:ae})})}},50208:(C,A,g)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});var b=g(2805),w=g(65612),o=b.__importStar(g(36121));A.default=function(a){return a=o.removeTrailingSlash(a),fetch(a).then(function(c){return Promise.all([c,c.json()])}).then(function(c){var d=c[0],_=c[1],y=_.info.title,R=o.default(_,a);return Promise.resolve({api:new w.Api(a,{title:y,resources:R}),response:_,status:d.status})},function(c){var d=c[0],_=c[1];return Promise.reject({api:new w.Api(a,{resources:[]}),response:_,status:d.status})})}},16443:(C,A)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.assignSealed=void 0,A.assignSealed=function(b,w){Object.keys(w).forEach(function(o){Object.defineProperty(b,o,{writable:!0,enumerable:!0,configurable:!1,value:w[o]})})}},8272:(C,A)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getResources=void 0,A.getResources=function(b){var w=[];return Object.keys(b).forEach(function(o){o.includes("/{id}")||w.find(function(n){return n.startsWith("/"+o.split("/")[1])})||w.push(o)}),w}},53112:C=>{!function(){"use strict";C.exports=function(g){return(g instanceof Buffer?g:Buffer.from(g.toString(),"binary")).toString("base64")}}()},4220:(C,A,g)=>{"use strict";var b=g(1326),w=g(35956),o=w(b("String.prototype.indexOf"));C.exports=function(a,c){var d=b(a,!!c);return"function"==typeof d&&o(a,".prototype.")>-1?w(d):d}},35956:(C,A,g)=>{"use strict";var b=g(11138),w=g(1326),o=w("%Function.prototype.apply%"),n=w("%Function.prototype.call%"),a=w("%Reflect.apply%",!0)||b.call(n,o),c=w("%Object.getOwnPropertyDescriptor%",!0),d=w("%Object.defineProperty%",!0),_=w("%Math.max%");if(d)try{d({},"a",{value:1})}catch(R){d=null}C.exports=function(x){var B=a(b,n,arguments);if(c&&d){var H=c(B,"length");H.configurable&&d(B,"length",{value:1+_(0,x.length-(arguments.length-1))})}return B};var y=function(){return a(b,o,arguments)};d?d(C.exports,"apply",{value:y}):C.exports.apply=y},32946:(C,A)=>{"use strict";A.parse=function(d,_){if("string"!=typeof d)throw new TypeError("argument str must be a string");for(var y={},R=_||{},x=d.split(w),B=R.decode||g,H=0;H<x.length;H++){var F=x[H],Y=F.indexOf("=");if(!(Y<0)){var z=F.substr(0,Y).trim(),G=F.substr(++Y,F.length).trim();'"'==G[0]&&(G=G.slice(1,-1)),null==y[z]&&(y[z]=c(G,B))}}return y},A.serialize=function(d,_,y){var R=y||{},x=R.encode||b;if("function"!=typeof x)throw new TypeError("option encode is invalid");if(!o.test(d))throw new TypeError("argument name is invalid");var B=x(_);if(B&&!o.test(B))throw new TypeError("argument val is invalid");var H=d+"="+B;if(null!=R.maxAge){var F=R.maxAge-0;if(isNaN(F)||!isFinite(F))throw new TypeError("option maxAge is invalid");H+="; Max-Age="+Math.floor(F)}if(R.domain){if(!o.test(R.domain))throw new TypeError("option domain is invalid");H+="; Domain="+R.domain}if(R.path){if(!o.test(R.path))throw new TypeError("option path is invalid");H+="; Path="+R.path}if(R.expires){if("function"!=typeof R.expires.toUTCString)throw new TypeError("option expires is invalid");H+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(H+="; HttpOnly"),R.secure&&(H+="; Secure"),R.sameSite)switch("string"==typeof R.sameSite?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return H};var g=decodeURIComponent,b=encodeURIComponent,w=/; */,o=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function c(d,_){try{return _(d)}catch(y){return d}}},28430:(C,A,g)=>{g(21446),g(13122);var b=g(35361);C.exports=b.Array.from},19117:(C,A,g)=>{g(90418);var b=g(35361);C.exports=b.Array.isArray},14149:(C,A,g)=>{g(80706);var b=g(27824);C.exports=b("Array").concat},37311:(C,A,g)=>{g(68905),g(94666);var b=g(27824);C.exports=b("Array").entries},96154:(C,A,g)=>{g(81136);var b=g(27824);C.exports=b("Array").filter},68592:(C,A,g)=>{g(89543);var b=g(27824);C.exports=b("Array").find},52535:(C,A,g)=>{g(46152);var b=g(27824);C.exports=b("Array").forEach},39457:(C,A,g)=>{g(96875);var b=g(27824);C.exports=b("Array").includes},7184:(C,A,g)=>{g(22616);var b=g(27824);C.exports=b("Array").indexOf},45218:(C,A,g)=>{g(36850);var b=g(27824);C.exports=b("Array").map},30705:(C,A,g)=>{g(62693);var b=g(27824);C.exports=b("Array").slice},22280:(C,A,g)=>{g(72101);var b=g(27824);C.exports=b("Array").splice},38615:(C,A,g)=>{g(68905),g(21446);var b=g(27556);C.exports=b},59597:(C,A,g)=>{var b=g(49778),w=g(14149),o=Array.prototype;C.exports=function(n){var a=n.concat;return n===o||b(o,n)&&a===o.concat?w:a}},46824:(C,A,g)=>{var b=g(49778),w=g(96154),o=Array.prototype;C.exports=function(n){var a=n.filter;return n===o||b(o,n)&&a===o.filter?w:a}},45600:(C,A,g)=>{var b=g(49778),w=g(68592),o=Array.prototype;C.exports=function(n){var a=n.find;return n===o||b(o,n)&&a===o.find?w:a}},85923:(C,A,g)=>{var b=g(49778),w=g(39457),o=g(48781),n=Array.prototype,a=String.prototype;C.exports=function(c){var d=c.includes;return c===n||b(n,c)&&d===n.includes?w:"string"==typeof c||c===a||b(a,c)&&d===a.includes?o:d}},77146:(C,A,g)=>{var b=g(49778),w=g(7184),o=Array.prototype;C.exports=function(n){var a=n.indexOf;return n===o||b(o,n)&&a===o.indexOf?w:a}},24773:(C,A,g)=>{var b=g(49778),w=g(45218),o=Array.prototype;C.exports=function(n){var a=n.map;return n===o||b(o,n)&&a===o.map?w:a}},58445:(C,A,g)=>{var b=g(49778),w=g(30705),o=Array.prototype;C.exports=function(n){var a=n.slice;return n===o||b(o,n)&&a===o.slice?w:a}},8138:(C,A,g)=>{var b=g(49778),w=g(22280),o=Array.prototype;C.exports=function(n){var a=n.splice;return n===o||b(o,n)&&a===o.splice?w:a}},41108:(C,A,g)=>{var b=g(49778),w=g(30566),o=String.prototype;C.exports=function(n){var a=n.startsWith;return"string"==typeof n||n===o||b(o,n)&&a===o.startsWith?w:a}},27615:(C,A,g)=>{g(39481);var b=g(35361),w=g(27549);b.JSON||(b.JSON={stringify:JSON.stringify}),C.exports=function(n,a,c){return w(b.JSON.stringify,null,arguments)}},92889:(C,A,g)=>{g(1476);var b=g(35361);C.exports=b.Object.assign},5318:(C,A,g)=>{g(63851);var w=g(35361).Object,o=C.exports=function(a,c){return w.defineProperties(a,c)};w.defineProperties.sham&&(o.sham=!0)},75634:(C,A,g)=>{g(23179);var w=g(35361).Object,o=C.exports=function(a,c,d){return w.defineProperty(a,c,d)};w.defineProperty.sham&&(o.sham=!0)},36669:(C,A,g)=>{g(69178);var b=g(35361);C.exports=b.Object.entries},88095:(C,A,g)=>{g(67827);var w=g(35361).Object,o=C.exports=function(a,c){return w.getOwnPropertyDescriptor(a,c)};w.getOwnPropertyDescriptor.sham&&(o.sham=!0)},89439:(C,A,g)=>{g(53603);var b=g(35361);C.exports=b.Object.getOwnPropertyDescriptors},13799:(C,A,g)=>{g(5001);var b=g(35361);C.exports=b.Object.getOwnPropertySymbols},33054:(C,A,g)=>{g(63596);var b=g(35361);C.exports=b.Object.keys},649:(C,A,g)=>{g(96476),g(68905),g(94666),g(47110),g(5823),g(78084),g(31296),g(21446);var b=g(35361);C.exports=b.Promise},48781:(C,A,g)=>{g(54840);var b=g(27824);C.exports=b("String").includes},30566:(C,A,g)=>{g(93784);var b=g(27824);C.exports=b("String").startsWith},67079:(C,A,g)=>{g(80706),g(94666),g(5001),g(55623),g(19060),g(43364),g(97447),g(70830),g(85873),g(5623),g(98499),g(81281),g(91348),g(25609),g(69538),g(64827),g(5256),g(897),g(6603),g(73609);var b=g(35361);C.exports=b.Symbol},41519:(C,A,g)=>{g(68905),g(94666),g(21446),g(70830);var b=g(12506);C.exports=b.f("iterator")},21643:(C,A,g)=>{g(68905),g(94666),g(58871);var b=g(35361);C.exports=b.WeakMap},15814:(C,A,g)=>{var b=g(16775);C.exports=b},80345:(C,A,g)=>{var b=g(4718);C.exports=b},90974:(C,A,g)=>{var b=g(81826);C.exports=b},23458:(C,A,g)=>{var b=g(40779);C.exports=b},75223:(C,A,g)=>{var b=g(48596);C.exports=b},31151:(C,A,g)=>{var b=g(35093);C.exports=b},31175:(C,A,g)=>{var b=g(71166);C.exports=b},60918:(C,A,g)=>{var b=g(71258);C.exports=b},68625:(C,A,g)=>{var b=g(72102);C.exports=b},58917:(C,A,g)=>{var b=g(87440);C.exports=b},2126:(C,A,g)=>{var b=g(48021);C.exports=b},93648:(C,A,g)=>{var b=g(4490);C.exports=b},58300:(C,A,g)=>{var b=g(16625);C.exports=b},7137:(C,A,g)=>{var b=g(95609);g(69797),g(24101),g(1127),g(96860),C.exports=b},24435:(C,A,g)=>{var b=g(35875);g(67924),g(27907),g(59331),g(97515),g(97601),g(61061),g(98377),C.exports=b},30218:(C,A,g)=>{var b=g(34542);C.exports=b},62057:(C,A,g)=>{var b=g(71186),w=g(89982),o=g(75885),n=b.TypeError;C.exports=function(a){if(w(a))return a;throw n(o(a)+" is not a function")}},12144:(C,A,g)=>{var b=g(71186),w=g(2043),o=g(75885),n=b.TypeError;C.exports=function(a){if(w(a))return a;throw n(o(a)+" is not a constructor")}},57690:(C,A,g)=>{var b=g(71186),w=g(89982),o=b.String,n=b.TypeError;C.exports=function(a){if("object"==typeof a||w(a))return a;throw n("Can't set "+o(a)+" as a prototype")}},81382:C=>{C.exports=function(){}},37368:(C,A,g)=>{var b=g(71186),w=g(49778),o=b.TypeError;C.exports=function(n,a){if(w(a,n))return n;throw o("Incorrect invocation")}},64808:(C,A,g)=>{var b=g(71186),w=g(4559),o=b.String,n=b.TypeError;C.exports=function(a){if(w(a))return a;throw n(o(a)+" is not an object")}},99844:(C,A,g)=>{var b=g(72194);C.exports=b(function(){if("function"==typeof ArrayBuffer){var w=new ArrayBuffer(8);Object.isExtensible(w)&&Object.defineProperty(w,"a",{value:8})}})},7330:(C,A,g)=>{"use strict";var b=g(32794).forEach,o=g(79444)("forEach");C.exports=o?[].forEach:function(a){return b(this,a,arguments.length>1?arguments[1]:void 0)}},96005:(C,A,g)=>{"use strict";var b=g(71186),w=g(56875),o=g(74217),n=g(12784),a=g(8025),c=g(23969),d=g(2043),_=g(50842),y=g(68140),R=g(80009),x=g(27556),B=b.Array;C.exports=function(F){var Y=n(F),z=d(this),G=arguments.length,ie=G>1?arguments[1]:void 0,Z=void 0!==ie;Z&&(ie=w(ie,G>2?arguments[2]:void 0));var ae,K,j,k,oe,W,re=x(Y),$=0;if(!re||this==B&&c(re))for(ae=_(Y),K=z?new this(ae):B(ae);ae>$;$++)W=Z?ie(Y[$],$):Y[$],y(K,$,W);else for(oe=(k=R(Y,re)).next,K=z?new this:[];!(j=o(oe,k)).done;$++)W=Z?a(k,ie,[j.value,$],!0):j.value,y(K,$,W);return K.length=$,K}},77118:(C,A,g)=>{var b=g(38611),w=g(40771),o=g(50842),n=function(a){return function(c,d,_){var B,y=b(c),R=o(y),x=w(_,R);if(a&&d!=d){for(;R>x;)if((B=y[x++])!=B)return!0}else for(;R>x;x++)if((a||x in y)&&y[x]===d)return a||x||0;return!a&&-1}};C.exports={includes:n(!0),indexOf:n(!1)}},32794:(C,A,g)=>{var b=g(56875),w=g(83232),o=g(28560),n=g(12784),a=g(50842),c=g(75458),d=w([].push),_=function(y){var R=1==y,x=2==y,B=3==y,H=4==y,F=6==y,Y=7==y,z=5==y||F;return function(G,ie,Z,re){for(var J,ne,$=n(G),ae=o($),K=b(ie,Z),j=a(ae),k=0,oe=re||c,W=R?oe(G,j):x||Y?oe(G,0):void 0;j>k;k++)if((z||k in ae)&&(ne=K(J=ae[k],k,$),y))if(R)W[k]=ne;else if(ne)switch(y){case 3:return!0;case 5:return J;case 6:return k;case 2:d(W,J)}else switch(y){case 4:return!1;case 7:d(W,J)}return F?-1:B||H?H:W}};C.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6),filterReject:_(7)}},63294:(C,A,g)=>{var b=g(72194),w=g(51227),o=g(47803),n=w("species");C.exports=function(a){return o>=51||!b(function(){var c=[];return(c.constructor={})[n]=function(){return{foo:1}},1!==c[a](Boolean).foo})}},79444:(C,A,g)=>{"use strict";var b=g(72194);C.exports=function(w,o){var n=[][w];return!!n&&b(function(){n.call(null,o||function(){throw 1},1)})}},60462:(C,A,g)=>{var b=g(83232);C.exports=b([].slice)},25278:(C,A,g)=>{var b=g(60462),w=Math.floor,o=function(c,d){var _=c.length,y=w(_/2);return _<8?n(c,d):a(c,o(b(c,0,y),d),o(b(c,y),d),d)},n=function(c,d){for(var R,x,_=c.length,y=1;y<_;){for(x=y,R=c[y];x&&d(c[x-1],R)>0;)c[x]=c[--x];x!==y++&&(c[x]=R)}return c},a=function(c,d,_,y){for(var R=d.length,x=_.length,B=0,H=0;B<R||H<x;)c[B+H]=B<R&&H<x?y(d[B],_[H])<=0?d[B++]:_[H++]:B<R?d[B++]:_[H++];return c};C.exports=o},55666:(C,A,g)=>{var b=g(71186),w=g(21284),o=g(2043),n=g(4559),c=g(51227)("species"),d=b.Array;C.exports=function(_){var y;return w(_)&&(o(y=_.constructor)&&(y===d||w(y.prototype))||n(y)&&null===(y=y[c]))&&(y=void 0),void 0===y?d:y}},75458:(C,A,g)=>{var b=g(55666);C.exports=function(w,o){return new(b(w))(0===o?0:o)}},8025:(C,A,g)=>{var b=g(64808),w=g(48508);C.exports=function(o,n,a,c){try{return c?n(b(a)[0],a[1]):n(a)}catch(d){w(o,"throw",d)}}},92807:(C,A,g)=>{var w=g(51227)("iterator"),o=!1;try{var n=0,a={next:function(){return{done:!!n++}},return:function(){o=!0}};a[w]=function(){return this},Array.from(a,function(){throw 2})}catch(c){}C.exports=function(c,d){if(!d&&!o)return!1;var _=!1;try{var y={};y[w]=function(){return{next:function(){return{done:_=!0}}}},c(y)}catch(R){}return _}},36166:(C,A,g)=>{var b=g(83232),w=b({}.toString),o=b("".slice);C.exports=function(n){return o(w(n),8,-1)}},36346:(C,A,g)=>{var b=g(71186),w=g(98086),o=g(89982),n=g(36166),c=g(51227)("toStringTag"),d=b.Object,_="Arguments"==n(function(){return arguments}());C.exports=w?n:function(R){var x,B,H;return void 0===R?"Undefined":null===R?"Null":"string"==typeof(B=function(R,x){try{return R[x]}catch(B){}}(x=d(R),c))?B:_?n(x):"Object"==(H=n(x))&&o(x.callee)?"Arguments":H}},84089:(C,A,g)=>{var b=g(83232),w=g(60462),o=b("".replace),n=b("".split),a=b([].join),c=String(Error("zxcasd").stack),d=/\n\s*at [^:]*:[^\n]*/,_=d.test(c),y=/@[^\n]*\n/.test(c)&&!/zxcasd/.test(c);C.exports=function(R,x){if("string"!=typeof R)return R;if(_)for(;x--;)R=o(R,d,"");else if(y)return a(w(n(R,"\n"),x),"\n");return R}},2387:(C,A,g)=>{"use strict";var b=g(83232),w=g(61306),o=g(77699).getWeakData,n=g(64808),a=g(4559),c=g(37368),d=g(64837),_=g(32794),y=g(63262),R=g(59066),x=R.set,B=R.getterFor,H=_.find,F=_.findIndex,Y=b([].splice),z=0,G=function(re){return re.frozen||(re.frozen=new ie)},ie=function(){this.entries=[]},Z=function(re,$){return H(re.entries,function(ae){return ae[0]===$})};ie.prototype={get:function(re){var $=Z(this,re);if($)return $[1]},has:function(re){return!!Z(this,re)},set:function(re,$){var ae=Z(this,re);ae?ae[1]=$:this.entries.push([re,$])},delete:function(re){var $=F(this.entries,function(ae){return ae[0]===re});return~$&&Y(this.entries,$,1),!!~$}},C.exports={getConstructor:function(re,$,ae,K){var j=re(function(J,ne){c(J,k),x(J,{type:$,id:z++,frozen:void 0}),null!=ne&&d(ne,J[K],{that:J,AS_ENTRIES:ae})}),k=j.prototype,oe=B($),W=function(J,ne,ee){var me=oe(J),se=o(n(ne),!0);return!0===se?G(me).set(ne,ee):se[me.id]=ee,J};return w(k,{delete:function(J){var ne=oe(this);if(!a(J))return!1;var ee=o(J);return!0===ee?G(ne).delete(J):ee&&y(ee,ne.id)&&delete ee[ne.id]},has:function(ne){var ee=oe(this);if(!a(ne))return!1;var me=o(ne);return!0===me?G(ee).has(ne):me&&y(me,ee.id)}}),w(k,ae?{get:function(ne){var ee=oe(this);if(a(ne)){var me=o(ne);return!0===me?G(ee).get(ne):me?me[ee.id]:void 0}},set:function(ne,ee){return W(this,ne,ee)}}:{add:function(ne){return W(this,ne,!0)}}),j}}},8394:(C,A,g)=>{"use strict";var b=g(47695),w=g(71186),o=g(77699),n=g(72194),a=g(30259),c=g(64837),d=g(37368),_=g(89982),y=g(4559),R=g(81488),x=g(38360).f,B=g(32794).forEach,H=g(93628),F=g(59066),Y=F.set,z=F.getterFor;C.exports=function(G,ie,Z){var oe,re=-1!==G.indexOf("Map"),$=-1!==G.indexOf("Weak"),ae=re?"set":"add",K=w[G],j=K&&K.prototype,k={};if(H&&_(K)&&($||j.forEach&&!n(function(){(new K).entries().next()}))){var W=(oe=ie(function(ne,ee){Y(d(ne,W),{type:G,collection:new K}),null!=ee&&c(ee,ne[ae],{that:ne,AS_ENTRIES:re})})).prototype,J=z(G);B(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(ne){var ee="add"==ne||"set"==ne;ne in j&&(!$||"clear"!=ne)&&a(W,ne,function(me,se){var de=J(this).collection;if(!ee&&$&&!y(me))return"get"==ne&&void 0;var Ee=de[ne](0===me?0:me,se);return ee?this:Ee})}),$||x(W,"size",{configurable:!0,get:function(){return J(this).collection.size}})}else oe=Z.getConstructor(ie,G,re,ae),o.enable();return R(oe,G,!1,!0),k[G]=oe,b({global:!0,forced:!0},k),$||Z.setStrong(oe,G,re),oe}},78356:(C,A,g)=>{var b=g(63262),w=g(69093),o=g(3182),n=g(38360);C.exports=function(a,c){for(var d=w(c),_=n.f,y=o.f,R=0;R<d.length;R++){var x=d[R];b(a,x)||_(a,x,y(c,x))}}},80736:(C,A,g)=>{var w=g(51227)("match");C.exports=function(o){var n=/./;try{"/./"[o](n)}catch(a){try{return n[w]=!1,"/./"[o](n)}catch(c){}}return!1}},65192:(C,A,g)=>{var b=g(72194);C.exports=!b(function(){function w(){}return w.prototype.constructor=null,Object.getPrototypeOf(new w)!==w.prototype})},68603:(C,A,g)=>{"use strict";var b=g(17518).IteratorPrototype,w=g(47579),o=g(79695),n=g(81488),a=g(57160),c=function(){return this};C.exports=function(d,_,y){var R=_+" Iterator";return d.prototype=w(b,{next:o(1,y)}),n(d,R,!1,!0),a[R]=c,d}},30259:(C,A,g)=>{var b=g(93628),w=g(38360),o=g(79695);C.exports=b?function(n,a,c){return w.f(n,a,o(1,c))}:function(n,a,c){return n[a]=c,n}},79695:C=>{C.exports=function(A,g){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:g}}},68140:(C,A,g)=>{"use strict";var b=g(66943),w=g(38360),o=g(79695);C.exports=function(n,a,c){var d=b(a);d in n?w.f(n,d,o(0,c)):n[d]=c}},8672:(C,A,g)=>{"use strict";var b=g(47695),w=g(74217),o=g(83546),n=g(88197),a=g(89982),c=g(68603),d=g(41340),_=g(86447),y=g(81488),R=g(30259),x=g(64519),B=g(51227),H=g(57160),F=g(17518),Y=n.PROPER,z=n.CONFIGURABLE,G=F.IteratorPrototype,ie=F.BUGGY_SAFARI_ITERATORS,Z=B("iterator"),$="values",ae="entries",K=function(){return this};C.exports=function(j,k,oe,W,J,ne,ee){c(oe,k,W);var Te,Ie,xe,me=function(Oe){if(Oe===J&&fe)return fe;if(!ie&&Oe in Ee)return Ee[Oe];switch(Oe){case"keys":case $:case ae:return function(){return new oe(this,Oe)}}return function(){return new oe(this)}},se=k+" Iterator",de=!1,Ee=j.prototype,we=Ee[Z]||Ee["@@iterator"]||J&&Ee[J],fe=!ie&&we||me(J),Re="Array"==k&&Ee.entries||we;if(Re&&(Te=d(Re.call(new j)))!==Object.prototype&&Te.next&&(!o&&d(Te)!==G&&(_?_(Te,G):a(Te[Z])||x(Te,Z,K)),y(Te,se,!0,!0),o&&(H[se]=K)),Y&&J==$&&we&&we.name!==$&&(!o&&z?R(Ee,"name",$):(de=!0,fe=function(){return w(we,this)})),J)if(Ie={values:me($),keys:ne?fe:me("keys"),entries:me(ae)},ee)for(xe in Ie)(ie||de||!(xe in Ee))&&x(Ee,xe,Ie[xe]);else b({target:k,proto:!0,forced:ie||de},Ie);return(!o||ee)&&Ee[Z]!==fe&&x(Ee,Z,fe,{name:J}),H[k]=fe,Ie}},35985:(C,A,g)=>{var b=g(35361),w=g(63262),o=g(12506),n=g(38360).f;C.exports=function(a){var c=b.Symbol||(b.Symbol={});w(c,a)||n(c,a,{value:o.f(a)})}},93628:(C,A,g)=>{var b=g(72194);C.exports=!b(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},67386:(C,A,g)=>{var b=g(71186),w=g(4559),o=b.document,n=w(o)&&w(o.createElement);C.exports=function(a){return n?o.createElement(a):{}}},27634:C=>{C.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},33700:C=>{C.exports="object"==typeof window},33763:(C,A,g)=>{var b=g(96535),w=g(71186);C.exports=/ipad|iphone|ipod/i.test(b)&&void 0!==w.Pebble},30346:(C,A,g)=>{var b=g(96535);C.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(b)},62151:(C,A,g)=>{var b=g(36166),w=g(71186);C.exports="process"==b(w.process)},145:(C,A,g)=>{var b=g(96535);C.exports=/web0s(?!.*chrome)/i.test(b)},96535:(C,A,g)=>{var b=g(31542);C.exports=b("navigator","userAgent")||""},47803:(C,A,g)=>{var d,_,b=g(71186),w=g(96535),o=b.process,n=b.Deno,a=o&&o.versions||n&&n.version,c=a&&a.v8;c&&(_=(d=c.split("."))[0]>0&&d[0]<4?1:+(d[0]+d[1])),!_&&w&&(!(d=w.match(/Edge\/(\d+)/))||d[1]>=74)&&(d=w.match(/Chrome\/(\d+)/))&&(_=+d[1]),C.exports=_},27824:(C,A,g)=>{var b=g(35361);C.exports=function(w){return b[w+"Prototype"]}},30412:C=>{C.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},59154:(C,A,g)=>{var b=g(72194),w=g(79695);C.exports=!b(function(){var o=Error("a");return!("stack"in o)||(Object.defineProperty(o,"stack",w(1,7)),7!==o.stack)})},47695:(C,A,g)=>{"use strict";var b=g(71186),w=g(27549),o=g(83232),n=g(89982),a=g(3182).f,c=g(33699),d=g(35361),_=g(56875),y=g(30259),R=g(63262),x=function(B){var H=function(F,Y,z){if(this instanceof H){switch(arguments.length){case 0:return new B;case 1:return new B(F);case 2:return new B(F,Y)}return new B(F,Y,z)}return w(B,this,arguments)};return H.prototype=B.prototype,H};C.exports=function(B,H){var ae,K,j,k,oe,W,J,ne,F=B.target,Y=B.global,z=B.stat,G=B.proto,ie=Y?b:z?b[F]:(b[F]||{}).prototype,Z=Y?d:d[F]||y(d,F,{})[F],re=Z.prototype;for(j in H)ae=!c(Y?j:F+(z?".":"#")+j,B.forced)&&ie&&R(ie,j),oe=Z[j],ae&&(W=B.noTargetGet?(ne=a(ie,j))&&ne.value:ie[j]),k=ae&&W?W:H[j],(!ae||typeof oe!=typeof k)&&(J=B.bind&&ae?_(k,b):B.wrap&&ae?x(k):G&&n(k)?o(k):k,(B.sham||k&&k.sham||oe&&oe.sham)&&y(J,"sham",!0),y(Z,j,J),G&&(R(d,K=F+"Prototype")||y(d,K,{}),y(d[K],j,k),B.real&&re&&!re[j]&&y(re,j,k)))}},72194:C=>{C.exports=function(A){try{return!!A()}catch(g){return!0}}},418:(C,A,g)=>{var b=g(72194);C.exports=!b(function(){return Object.isExtensible(Object.preventExtensions({}))})},27549:C=>{var A=Function.prototype,g=A.apply,w=A.call;C.exports="object"==typeof Reflect&&Reflect.apply||(A.bind?w.bind(g):function(){return w.apply(g,arguments)})},56875:(C,A,g)=>{var b=g(83232),w=g(62057),o=b(b.bind);C.exports=function(n,a){return w(n),void 0===a?n:o?o(n,a):function(){return n.apply(a,arguments)}}},74217:C=>{var A=Function.prototype.call;C.exports=A.bind?A.bind(A):function(){return A.apply(A,arguments)}},88197:(C,A,g)=>{var b=g(93628),w=g(63262),o=Function.prototype,n=b&&Object.getOwnPropertyDescriptor,a=w(o,"name"),c=a&&"something"===function(){}.name,d=a&&(!b||b&&n(o,"name").configurable);C.exports={EXISTS:a,PROPER:c,CONFIGURABLE:d}},83232:C=>{var A=Function.prototype,g=A.bind,b=A.call,w=g&&g.bind(b);C.exports=g?function(o){return o&&w(b,o)}:function(o){return o&&function(){return b.apply(o,arguments)}}},31542:(C,A,g)=>{var b=g(35361),w=g(71186),o=g(89982),n=function(a){return o(a)?a:void 0};C.exports=function(a,c){return arguments.length<2?n(b[a])||n(w[a]):b[a]&&b[a][c]||w[a]&&w[a][c]}},27556:(C,A,g)=>{var b=g(36346),w=g(82209),o=g(57160),a=g(51227)("iterator");C.exports=function(c){if(null!=c)return w(c,a)||w(c,"@@iterator")||o[b(c)]}},80009:(C,A,g)=>{var b=g(71186),w=g(74217),o=g(62057),n=g(64808),a=g(75885),c=g(27556),d=b.TypeError;C.exports=function(_,y){var R=arguments.length<2?c(_):y;if(o(R))return n(w(R,_));throw d(a(_)+" is not iterable")}},82209:(C,A,g)=>{var b=g(62057);C.exports=function(w,o){var n=w[o];return null==n?void 0:b(n)}},71186:C=>{var A=function(g){return g&&g.Math==Math&&g};C.exports=A("object"==typeof globalThis&&globalThis)||A("object"==typeof window&&window)||A("object"==typeof self&&self)||A("object"==typeof global&&global)||function(){return this}()||Function("return this")()},63262:(C,A,g)=>{var b=g(83232),w=g(12784),o=b({}.hasOwnProperty);C.exports=Object.hasOwn||function(a,c){return o(w(a),c)}},16998:C=>{C.exports={}},38478:(C,A,g)=>{var b=g(71186);C.exports=function(w,o){var n=b.console;n&&n.error&&(1==arguments.length?n.error(w):n.error(w,o))}},44737:(C,A,g)=>{var b=g(31542);C.exports=b("document","documentElement")},36546:(C,A,g)=>{var b=g(93628),w=g(72194),o=g(67386);C.exports=!b&&!w(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},28560:(C,A,g)=>{var b=g(71186),w=g(83232),o=g(72194),n=g(36166),a=b.Object,c=w("".split);C.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(d){return"String"==n(d)?c(d,""):a(d)}:a},96307:(C,A,g)=>{var b=g(83232),w=g(89982),o=g(85452),n=b(Function.toString);w(o.inspectSource)||(o.inspectSource=function(a){return n(a)}),C.exports=o.inspectSource},369:(C,A,g)=>{var b=g(4559),w=g(30259);C.exports=function(o,n){b(n)&&"cause"in n&&w(o,"cause",n.cause)}},77699:(C,A,g)=>{var b=g(47695),w=g(83232),o=g(16998),n=g(4559),a=g(63262),c=g(38360).f,d=g(80679),_=g(22690),y=g(67616),R=g(39900),x=g(418),B=!1,H=R("meta"),F=0,Y=function($){c($,H,{value:{objectID:"O"+F++,weakData:{}}})},re=C.exports={enable:function(){re.enable=function(){},B=!0;var $=d.f,ae=w([].splice),K={};K[H]=1,$(K).length&&(d.f=function(j){for(var k=$(j),oe=0,W=k.length;oe<W;oe++)if(k[oe]===H){ae(k,oe,1);break}return k},b({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:_.f}))},fastKey:function($,ae){if(!n($))return"symbol"==typeof $?$:("string"==typeof $?"S":"P")+$;if(!a($,H)){if(!y($))return"F";if(!ae)return"E";Y($)}return $[H].objectID},getWeakData:function($,ae){if(!a($,H)){if(!y($))return!0;if(!ae)return!1;Y($)}return $[H].weakData},onFreeze:function($){return x&&B&&y($)&&!a($,H)&&Y($),$}};o[H]=!0},59066:(C,A,g)=>{var H,F,Y,b=g(43491),w=g(71186),o=g(83232),n=g(4559),a=g(30259),c=g(63262),d=g(85452),_=g(71063),y=g(16998),R="Object already initialized",x=w.TypeError;if(b||d.state){var ie=d.state||(d.state=new(0,w.WeakMap)),Z=o(ie.get),re=o(ie.has),$=o(ie.set);H=function(K,j){if(re(ie,K))throw new x(R);return j.facade=K,$(ie,K,j),j},F=function(K){return Z(ie,K)||{}},Y=function(K){return re(ie,K)}}else{var ae=_("state");y[ae]=!0,H=function(K,j){if(c(K,ae))throw new x(R);return j.facade=K,a(K,ae,j),j},F=function(K){return c(K,ae)?K[ae]:{}},Y=function(K){return c(K,ae)}}C.exports={set:H,get:F,has:Y,enforce:function(K){return Y(K)?F(K):H(K,{})},getterFor:function(K){return function(j){var k;if(!n(j)||(k=F(j)).type!==K)throw x("Incompatible receiver, "+K+" required");return k}}}},23969:(C,A,g)=>{var b=g(51227),w=g(57160),o=b("iterator"),n=Array.prototype;C.exports=function(a){return void 0!==a&&(w.Array===a||n[o]===a)}},21284:(C,A,g)=>{var b=g(36166);C.exports=Array.isArray||function(o){return"Array"==b(o)}},89982:C=>{C.exports=function(A){return"function"==typeof A}},2043:(C,A,g)=>{var b=g(83232),w=g(72194),o=g(89982),n=g(36346),a=g(31542),c=g(96307),d=function(){},_=[],y=a("Reflect","construct"),R=/^\s*(?:class|function)\b/,x=b(R.exec),B=!R.exec(d),H=function(Y){if(!o(Y))return!1;try{return y(d,_,Y),!0}catch(z){return!1}};C.exports=!y||w(function(){var Y;return H(H.call)||!H(Object)||!H(function(){Y=!0})||Y})?function(Y){if(!o(Y))return!1;switch(n(Y)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return B||!!x(R,c(Y))}:H},33699:(C,A,g)=>{var b=g(72194),w=g(89982),o=/#|\.prototype\./,n=function(y,R){var x=c[a(y)];return x==_||x!=d&&(w(R)?b(R):!!R)},a=n.normalize=function(y){return String(y).replace(o,".").toLowerCase()},c=n.data={},d=n.NATIVE="N",_=n.POLYFILL="P";C.exports=n},4559:(C,A,g)=>{var b=g(89982);C.exports=function(w){return"object"==typeof w?null!==w:b(w)}},83546:C=>{C.exports=!0},9463:(C,A,g)=>{var b=g(4559),w=g(36166),n=g(51227)("match");C.exports=function(a){var c;return b(a)&&(void 0!==(c=a[n])?!!c:"RegExp"==w(a))}},92271:(C,A,g)=>{var b=g(71186),w=g(31542),o=g(89982),n=g(49778),a=g(43065),c=b.Object;C.exports=a?function(d){return"symbol"==typeof d}:function(d){var _=w("Symbol");return o(_)&&n(_.prototype,c(d))}},64837:(C,A,g)=>{var b=g(71186),w=g(56875),o=g(74217),n=g(64808),a=g(75885),c=g(23969),d=g(50842),_=g(49778),y=g(80009),R=g(27556),x=g(48508),B=b.TypeError,H=function(Y,z){this.stopped=Y,this.result=z},F=H.prototype;C.exports=function(Y,z,G){var K,j,k,oe,W,J,ne,Z=!(!G||!G.AS_ENTRIES),re=!(!G||!G.IS_ITERATOR),$=!(!G||!G.INTERRUPTED),ae=w(z,G&&G.that),ee=function(se){return K&&x(K,"normal",se),new H(!0,se)},me=function(se){return Z?(n(se),$?ae(se[0],se[1],ee):ae(se[0],se[1])):$?ae(se,ee):ae(se)};if(re)K=Y;else{if(!(j=R(Y)))throw B(a(Y)+" is not iterable");if(c(j)){for(k=0,oe=d(Y);oe>k;k++)if((W=me(Y[k]))&&_(F,W))return W;return new H(!1)}K=y(Y,j)}for(J=K.next;!(ne=o(J,K)).done;){try{W=me(ne.value)}catch(se){x(K,"throw",se)}if("object"==typeof W&&W&&_(F,W))return W}return new H(!1)}},48508:(C,A,g)=>{var b=g(74217),w=g(64808),o=g(82209);C.exports=function(n,a,c){var d,_;w(n);try{if(!(d=o(n,"return"))){if("throw"===a)throw c;return c}d=b(d,n)}catch(y){_=!0,d=y}if("throw"===a)throw c;if(_)throw d;return w(d),c}},17518:(C,A,g)=>{"use strict";var R,x,B,b=g(72194),w=g(89982),o=g(47579),n=g(41340),a=g(64519),c=g(51227),d=g(83546),_=c("iterator"),y=!1;[].keys&&("next"in(B=[].keys())?(x=n(n(B)))!==Object.prototype&&(R=x):y=!0),null==R||b(function(){var F={};return R[_].call(F)!==F})?R={}:d&&(R=o(R)),w(R[_])||a(R,_,function(){return this}),C.exports={IteratorPrototype:R,BUGGY_SAFARI_ITERATORS:y}},57160:C=>{C.exports={}},50842:(C,A,g)=>{var b=g(71673);C.exports=function(w){return b(w.length)}},84607:(C,A,g)=>{var Y,z,G,ie,Z,re,$,ae,b=g(71186),w=g(56875),o=g(3182).f,n=g(20284).set,a=g(30346),c=g(33763),d=g(145),_=g(62151),y=b.MutationObserver||b.WebKitMutationObserver,R=b.document,x=b.process,B=b.Promise,H=o(b,"queueMicrotask"),F=H&&H.value;F||(Y=function(){var K,j;for(_&&(K=x.domain)&&K.exit();z;){j=z.fn,z=z.next;try{j()}catch(k){throw z?ie():G=void 0,k}}G=void 0,K&&K.enter()},a||_||d||!y||!R?!c&&B&&B.resolve?(($=B.resolve(void 0)).constructor=B,ae=w($.then,$),ie=function(){ae(Y)}):_?ie=function(){x.nextTick(Y)}:(n=w(n,b),ie=function(){n(Y)}):(Z=!0,re=R.createTextNode(""),new y(Y).observe(re,{characterData:!0}),ie=function(){re.data=Z=!Z})),C.exports=F||function(K){var j={fn:K,next:void 0};G&&(G.next=j),z||(z=j,ie()),G=j}},98133:(C,A,g)=>{var b=g(71186);C.exports=b.Promise},96596:(C,A,g)=>{var b=g(47803),w=g(72194);C.exports=!!Object.getOwnPropertySymbols&&!w(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&b&&b<41})},20836:(C,A,g)=>{var b=g(72194),w=g(51227),o=g(83546),n=w("iterator");C.exports=!b(function(){var a=new URL("b?a=1&b=2&c=3","http://a"),c=a.searchParams,d="";return a.pathname="c%20d",c.forEach(function(_,y){c.delete("b"),d+=y+_}),o&&!a.toJSON||!c.sort||"http://a/c%20d?a=1&c=3"!==a.href||"3"!==c.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!c[n]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==d||"x"!==new URL("http://x",void 0).host})},43491:(C,A,g)=>{var b=g(71186),w=g(89982),o=g(96307),n=b.WeakMap;C.exports=w(n)&&/native code/.test(o(n))},86343:(C,A,g)=>{"use strict";var b=g(62057),w=function(o){var n,a;this.promise=new o(function(c,d){if(void 0!==n||void 0!==a)throw TypeError("Bad Promise constructor");n=c,a=d}),this.resolve=b(n),this.reject=b(a)};C.exports.f=function(o){return new w(o)}},23895:(C,A,g)=>{var b=g(40208);C.exports=function(w,o){return void 0===w?arguments.length<2?"":o:b(w)}},72566:(C,A,g)=>{var b=g(71186),w=g(9463),o=b.TypeError;C.exports=function(n){if(w(n))throw o("The method doesn't accept regular expressions");return n}},49855:(C,A,g)=>{"use strict";var b=g(93628),w=g(83232),o=g(74217),n=g(72194),a=g(44637),c=g(39557),d=g(52750),_=g(12784),y=g(28560),R=Object.assign,x=Object.defineProperty,B=w([].concat);C.exports=!R||n(function(){if(b&&1!==R({b:1},R(x({},"a",{enumerable:!0,get:function(){x(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var H={},F={},Y=Symbol(),z="abcdefghijklmnopqrst";return H[Y]=7,z.split("").forEach(function(G){F[G]=G}),7!=R({},H)[Y]||a(R({},F)).join("")!=z})?function(F,Y){for(var z=_(F),G=arguments.length,ie=1,Z=c.f,re=d.f;G>ie;)for(var k,$=y(arguments[ie++]),ae=Z?B(a($),Z($)):a($),K=ae.length,j=0;K>j;)k=ae[j++],(!b||o(re,$,k))&&(z[k]=$[k]);return z}:R},47579:(C,A,g)=>{var G,b=g(64808),w=g(8584),o=g(30412),n=g(16998),a=g(44737),c=g(67386),d=g(71063),R="prototype",x="script",B=d("IE_PROTO"),H=function(){},F=function(Z){return"<"+x+">"+Z+"</"+x+">"},Y=function(Z){Z.write(F("")),Z.close();var re=Z.parentWindow.Object;return Z=null,re},ie=function(){try{G=new ActiveXObject("htmlfile")}catch(re){}ie="undefined"!=typeof document?document.domain&&G?Y(G):function(){var $,Z=c("iframe");return Z.style.display="none",a.appendChild(Z),Z.src=String("javascript:"),($=Z.contentWindow.document).open(),$.write(F("document.F=Object")),$.close(),$.F}():Y(G);for(var Z=o.length;Z--;)delete ie[R][o[Z]];return ie()};n[B]=!0,C.exports=Object.create||function(re,$){var ae;return null!==re?(H[R]=b(re),ae=new H,H[R]=null,ae[B]=re):ae=ie(),void 0===$?ae:w(ae,$)}},8584:(C,A,g)=>{var b=g(93628),w=g(38360),o=g(64808),n=g(38611),a=g(44637);C.exports=b?Object.defineProperties:function(d,_){o(d);for(var H,y=n(_),R=a(_),x=R.length,B=0;x>B;)w.f(d,H=R[B++],y[H]);return d}},38360:(C,A,g)=>{var b=g(71186),w=g(93628),o=g(36546),n=g(64808),a=g(66943),c=b.TypeError,d=Object.defineProperty;A.f=w?d:function(y,R,x){if(n(y),R=a(R),n(x),o)try{return d(y,R,x)}catch(B){}if("get"in x||"set"in x)throw c("Accessors not supported");return"value"in x&&(y[R]=x.value),y}},3182:(C,A,g)=>{var b=g(93628),w=g(74217),o=g(52750),n=g(79695),a=g(38611),c=g(66943),d=g(63262),_=g(36546),y=Object.getOwnPropertyDescriptor;A.f=b?y:function(x,B){if(x=a(x),B=c(B),_)try{return y(x,B)}catch(H){}if(d(x,B))return n(!w(o.f,x,B),x[B])}},22690:(C,A,g)=>{var b=g(36166),w=g(38611),o=g(80679).f,n=g(60462),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];C.exports.f=function(_){return a&&"Window"==b(_)?function(d){try{return o(d)}catch(_){return n(a)}}(_):o(w(_))}},80679:(C,A,g)=>{var b=g(20552),o=g(30412).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(a){return b(a,o)}},39557:(C,A)=>{A.f=Object.getOwnPropertySymbols},41340:(C,A,g)=>{var b=g(71186),w=g(63262),o=g(89982),n=g(12784),a=g(71063),c=g(65192),d=a("IE_PROTO"),_=b.Object,y=_.prototype;C.exports=c?_.getPrototypeOf:function(R){var x=n(R);if(w(x,d))return x[d];var B=x.constructor;return o(B)&&x instanceof B?B.prototype:x instanceof _?y:null}},67616:(C,A,g)=>{var b=g(72194),w=g(4559),o=g(36166),n=g(99844),a=Object.isExtensible,c=b(function(){a(1)});C.exports=c||n?function(_){return!(!w(_)||n&&"ArrayBuffer"==o(_))&&(!a||a(_))}:a},49778:(C,A,g)=>{var b=g(83232);C.exports=b({}.isPrototypeOf)},20552:(C,A,g)=>{var b=g(83232),w=g(63262),o=g(38611),n=g(77118).indexOf,a=g(16998),c=b([].push);C.exports=function(d,_){var B,y=o(d),R=0,x=[];for(B in y)!w(a,B)&&w(y,B)&&c(x,B);for(;_.length>R;)w(y,B=_[R++])&&(~n(x,B)||c(x,B));return x}},44637:(C,A,g)=>{var b=g(20552),w=g(30412);C.exports=Object.keys||function(n){return b(n,w)}},52750:(C,A)=>{"use strict";var g={}.propertyIsEnumerable,b=Object.getOwnPropertyDescriptor,w=b&&!g.call({1:2},1);A.f=w?function(n){var a=b(this,n);return!!a&&a.enumerable}:g},86447:(C,A,g)=>{var b=g(83232),w=g(64808),o=g(57690);C.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c,n=!1,a={};try{(c=b(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(a,[]),n=a instanceof Array}catch(d){}return function(_,y){return w(_),o(y),n?c(_,y):_.__proto__=y,_}}():void 0)},94559:(C,A,g)=>{var b=g(93628),w=g(83232),o=g(44637),n=g(38611),c=w(g(52750).f),d=w([].push),_=function(y){return function(R){for(var z,x=n(R),B=o(x),H=B.length,F=0,Y=[];H>F;)z=B[F++],(!b||c(x,z))&&d(Y,y?[z,x[z]]:x[z]);return Y}};C.exports={entries:_(!0),values:_(!1)}},71470:(C,A,g)=>{"use strict";var b=g(98086),w=g(36346);C.exports=b?{}.toString:function(){return"[object "+w(this)+"]"}},91421:(C,A,g)=>{var b=g(71186),w=g(74217),o=g(89982),n=g(4559),a=b.TypeError;C.exports=function(c,d){var _,y;if("string"===d&&o(_=c.toString)&&!n(y=w(_,c))||o(_=c.valueOf)&&!n(y=w(_,c))||"string"!==d&&o(_=c.toString)&&!n(y=w(_,c)))return y;throw a("Can't convert object to primitive value")}},69093:(C,A,g)=>{var b=g(31542),w=g(83232),o=g(80679),n=g(39557),a=g(64808),c=w([].concat);C.exports=b("Reflect","ownKeys")||function(_){var y=o.f(a(_)),R=n.f;return R?c(y,R(_)):y}},35361:C=>{C.exports={}},83061:C=>{C.exports=function(A){try{return{error:!1,value:A()}}catch(g){return{error:!0,value:g}}}},93186:(C,A,g)=>{var b=g(64808),w=g(4559),o=g(86343);C.exports=function(n,a){if(b(n),w(a)&&a.constructor===n)return a;var c=o.f(n);return(0,c.resolve)(a),c.promise}},61306:(C,A,g)=>{var b=g(64519);C.exports=function(w,o,n){for(var a in o)n&&n.unsafe&&w[a]?w[a]=o[a]:b(w,a,o[a],n);return w}},64519:(C,A,g)=>{var b=g(30259);C.exports=function(w,o,n,a){a&&a.enumerable?w[o]=n:b(w,o,n)}},94087:(C,A,g)=>{var w=g(71186).TypeError;C.exports=function(o){if(null==o)throw w("Can't call method on "+o);return o}},56836:(C,A,g)=>{var b=g(71186),w=Object.defineProperty;C.exports=function(o,n){try{w(b,o,{value:n,configurable:!0,writable:!0})}catch(a){b[o]=n}return n}},36524:(C,A,g)=>{"use strict";var b=g(31542),w=g(38360),o=g(51227),n=g(93628),a=o("species");C.exports=function(c){var d=b(c);n&&d&&!d[a]&&(0,w.f)(d,a,{configurable:!0,get:function(){return this}})}},81488:(C,A,g)=>{var b=g(98086),w=g(38360).f,o=g(30259),n=g(63262),a=g(71470),d=g(51227)("toStringTag");C.exports=function(_,y,R,x){if(_){var B=R?_:_.prototype;n(B,d)||w(B,d,{configurable:!0,value:y}),x&&!b&&o(B,"toString",a)}}},71063:(C,A,g)=>{var b=g(22196),w=g(39900),o=b("keys");C.exports=function(n){return o[n]||(o[n]=w(n))}},85452:(C,A,g)=>{var b=g(71186),w=g(56836),o="__core-js_shared__",n=b[o]||w(o,{});C.exports=n},22196:(C,A,g)=>{var b=g(83546),w=g(85452);(C.exports=function(o,n){return w[o]||(w[o]=void 0!==n?n:{})})("versions",[]).push({version:"3.19.1",mode:b?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},21379:(C,A,g)=>{var b=g(64808),w=g(12144),n=g(51227)("species");C.exports=function(a,c){var _,d=b(a).constructor;return void 0===d||null==(_=b(d)[n])?c:w(_)}},12206:(C,A,g)=>{var b=g(83232),w=g(74518),o=g(40208),n=g(94087),a=b("".charAt),c=b("".charCodeAt),d=b("".slice),_=function(y){return function(R,x){var Y,z,B=o(n(R)),H=w(x),F=B.length;return H<0||H>=F?y?"":void 0:(Y=c(B,H))<55296||Y>56319||H+1===F||(z=c(B,H+1))<56320||z>57343?y?a(B,H):Y:y?d(B,H,H+2):z-56320+(Y-55296<<10)+65536}};C.exports={codeAt:_(!1),charAt:_(!0)}},20284:(C,A,g)=>{var ae,K,j,k,b=g(71186),w=g(27549),o=g(56875),n=g(89982),a=g(63262),c=g(72194),d=g(44737),_=g(60462),y=g(67386),R=g(30346),x=g(62151),B=b.setImmediate,H=b.clearImmediate,F=b.process,Y=b.Dispatch,z=b.Function,G=b.MessageChannel,ie=b.String,Z=0,re={},$="onreadystatechange";try{ae=b.location}catch(ee){}var oe=function(ee){if(a(re,ee)){var me=re[ee];delete re[ee],me()}},W=function(ee){return function(){oe(ee)}},J=function(ee){oe(ee.data)},ne=function(ee){b.postMessage(ie(ee),ae.protocol+"//"+ae.host)};(!B||!H)&&(B=function(me){var se=_(arguments,1);return re[++Z]=function(){w(n(me)?me:z(me),void 0,se)},K(Z),Z},H=function(me){delete re[me]},x?K=function(ee){F.nextTick(W(ee))}:Y&&Y.now?K=function(ee){Y.now(W(ee))}:G&&!R?(k=(j=new G).port2,j.port1.onmessage=J,K=o(k.postMessage,k)):b.addEventListener&&n(b.postMessage)&&!b.importScripts&&ae&&"file:"!==ae.protocol&&!c(ne)?(K=ne,b.addEventListener("message",J,!1)):K=$ in y("script")?function(ee){d.appendChild(y("script"))[$]=function(){d.removeChild(this),oe(ee)}}:function(ee){setTimeout(W(ee),0)}),C.exports={set:B,clear:H}},40771:(C,A,g)=>{var b=g(74518),w=Math.max,o=Math.min;C.exports=function(n,a){var c=b(n);return c<0?w(c+a,0):o(c,a)}},38611:(C,A,g)=>{var b=g(28560),w=g(94087);C.exports=function(o){return b(w(o))}},74518:C=>{var A=Math.ceil,g=Math.floor;C.exports=function(b){var w=+b;return w!=w||0===w?0:(w>0?g:A)(w)}},71673:(C,A,g)=>{var b=g(74518),w=Math.min;C.exports=function(o){return o>0?w(b(o),9007199254740991):0}},12784:(C,A,g)=>{var b=g(71186),w=g(94087),o=b.Object;C.exports=function(n){return o(w(n))}},11436:(C,A,g)=>{var b=g(71186),w=g(74217),o=g(4559),n=g(92271),a=g(82209),c=g(91421),d=g(51227),_=b.TypeError,y=d("toPrimitive");C.exports=function(R,x){if(!o(R)||n(R))return R;var H,B=a(R,y);if(B){if(void 0===x&&(x="default"),H=w(B,R,x),!o(H)||n(H))return H;throw _("Can't convert object to primitive value")}return void 0===x&&(x="number"),c(R,x)}},66943:(C,A,g)=>{var b=g(11436),w=g(92271);C.exports=function(o){var n=b(o,"string");return w(n)?n:n+""}},98086:(C,A,g)=>{var o={};o[g(51227)("toStringTag")]="z",C.exports="[object z]"===String(o)},40208:(C,A,g)=>{var b=g(71186),w=g(36346),o=b.String;C.exports=function(n){if("Symbol"===w(n))throw TypeError("Cannot convert a Symbol value to a string");return o(n)}},75885:(C,A,g)=>{var w=g(71186).String;C.exports=function(o){try{return w(o)}catch(n){return"Object"}}},39900:(C,A,g)=>{var b=g(83232),w=0,o=Math.random(),n=b(1..toString);C.exports=function(a){return"Symbol("+(void 0===a?"":a)+")_"+n(++w+o,36)}},43065:(C,A,g)=>{var b=g(96596);C.exports=b&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},12506:(C,A,g)=>{var b=g(51227);A.f=b},51227:(C,A,g)=>{var b=g(71186),w=g(22196),o=g(63262),n=g(39900),a=g(96596),c=g(43065),d=w("wks"),_=b.Symbol,y=_&&_.for,R=c?_:_&&_.withoutSetter||n;C.exports=function(x){if(!o(d,x)||!a&&"string"!=typeof d[x]){var B="Symbol."+x;d[x]=a&&o(_,x)?_[x]:c&&y?y(B):R(B)}return d[x]}},96476:(C,A,g)=>{"use strict";var b=g(47695),w=g(71186),o=g(49778),n=g(41340),a=g(86447),c=g(78356),d=g(47579),_=g(30259),y=g(79695),R=g(84089),x=g(369),B=g(64837),H=g(23895),F=g(51227),Y=g(59154),z=F("toStringTag"),G=w.Error,ie=[].push,Z=function(ae,K){var oe,j=arguments.length>2?arguments[2]:void 0,k=o(re,this);a?oe=a(new G(void 0),k?n(this):re):(oe=k?this:d(re),_(oe,z,"Error")),_(oe,"message",H(K,"")),Y&&_(oe,"stack",R(oe.stack,1)),x(oe,j);var W=[];return B(ae,ie,{that:W}),_(oe,"errors",W),oe};a?a(Z,G):c(Z,G);var re=Z.prototype=d(G.prototype,{constructor:y(1,Z),message:y(1,""),name:y(1,"AggregateError")});b({global:!0},{AggregateError:Z})},80706:(C,A,g)=>{"use strict";var b=g(47695),w=g(71186),o=g(72194),n=g(21284),a=g(4559),c=g(12784),d=g(50842),_=g(68140),y=g(75458),R=g(63294),x=g(51227),B=g(47803),H=x("isConcatSpreadable"),F=9007199254740991,Y="Maximum allowed index exceeded",z=w.TypeError,G=B>=51||!o(function(){var $=[];return $[H]=!1,$.concat()[0]!==$}),ie=R("concat"),Z=function($){if(!a($))return!1;var ae=$[H];return void 0!==ae?!!ae:n($)};b({target:"Array",proto:!0,forced:!G||!ie},{concat:function(ae){var oe,W,J,ne,ee,K=c(this),j=y(K,0),k=0;for(oe=-1,J=arguments.length;oe<J;oe++)if(Z(ee=-1===oe?K:arguments[oe])){if(k+(ne=d(ee))>F)throw z(Y);for(W=0;W<ne;W++,k++)W in ee&&_(j,k,ee[W])}else{if(k>=F)throw z(Y);_(j,k++,ee)}return j.length=k,j}})},81136:(C,A,g)=>{"use strict";var b=g(47695),w=g(32794).filter;b({target:"Array",proto:!0,forced:!g(63294)("filter")},{filter:function(c){return w(this,c,arguments.length>1?arguments[1]:void 0)}})},89543:(C,A,g)=>{"use strict";var b=g(47695),w=g(32794).find,o=g(81382),n="find",a=!0;n in[]&&Array(1)[n](function(){a=!1}),b({target:"Array",proto:!0,forced:a},{find:function(d){return w(this,d,arguments.length>1?arguments[1]:void 0)}}),o(n)},46152:(C,A,g)=>{"use strict";var b=g(47695),w=g(7330);b({target:"Array",proto:!0,forced:[].forEach!=w},{forEach:w})},13122:(C,A,g)=>{var b=g(47695),w=g(96005);b({target:"Array",stat:!0,forced:!g(92807)(function(a){Array.from(a)})},{from:w})},96875:(C,A,g)=>{"use strict";var b=g(47695),w=g(77118).includes,o=g(81382);b({target:"Array",proto:!0},{includes:function(a){return w(this,a,arguments.length>1?arguments[1]:void 0)}}),o("includes")},22616:(C,A,g)=>{"use strict";var b=g(47695),w=g(83232),o=g(77118).indexOf,n=g(79444),a=w([].indexOf),c=!!a&&1/a([1],1,-0)<0,d=n("indexOf");b({target:"Array",proto:!0,forced:c||!d},{indexOf:function(y){var R=arguments.length>1?arguments[1]:void 0;return c?a(this,y,R)||0:o(this,y,R)}})},90418:(C,A,g)=>{g(47695)({target:"Array",stat:!0},{isArray:g(21284)})},68905:(C,A,g)=>{"use strict";var b=g(38611),w=g(81382),o=g(57160),n=g(59066),a=g(8672),c="Array Iterator",d=n.set,_=n.getterFor(c);C.exports=a(Array,"Array",function(y,R){d(this,{type:c,target:b(y),index:0,kind:R})},function(){var y=_(this),R=y.target,x=y.kind,B=y.index++;return!R||B>=R.length?(y.target=void 0,{value:void 0,done:!0}):"keys"==x?{value:B,done:!1}:"values"==x?{value:R[B],done:!1}:{value:[B,R[B]],done:!1}},"values"),o.Arguments=o.Array,w("keys"),w("values"),w("entries")},36850:(C,A,g)=>{"use strict";var b=g(47695),w=g(32794).map;b({target:"Array",proto:!0,forced:!g(63294)("map")},{map:function(c){return w(this,c,arguments.length>1?arguments[1]:void 0)}})},62693:(C,A,g)=>{"use strict";var b=g(47695),w=g(71186),o=g(21284),n=g(2043),a=g(4559),c=g(40771),d=g(50842),_=g(38611),y=g(68140),R=g(51227),x=g(63294),B=g(60462),H=x("slice"),F=R("species"),Y=w.Array,z=Math.max;b({target:"Array",proto:!0,forced:!H},{slice:function(ie,Z){var j,k,oe,re=_(this),$=d(re),ae=c(ie,$),K=c(void 0===Z?$:Z,$);if(o(re)&&((n(j=re.constructor)&&(j===Y||o(j.prototype))||a(j)&&null===(j=j[F]))&&(j=void 0),j===Y||void 0===j))return B(re,ae,K);for(k=new(void 0===j?Y:j)(z(K-ae,0)),oe=0;ae<K;ae++,oe++)ae in re&&y(k,oe,re[ae]);return k.length=oe,k}})},72101:(C,A,g)=>{"use strict";var b=g(47695),w=g(71186),o=g(40771),n=g(74518),a=g(50842),c=g(12784),d=g(75458),_=g(68140),R=g(63294)("splice"),x=w.TypeError,B=Math.max,H=Math.min,F=9007199254740991,Y="Maximum allowed length exceeded";b({target:"Array",proto:!0,forced:!R},{splice:function(G,ie){var K,j,k,oe,W,J,Z=c(this),re=a(Z),$=o(G,re),ae=arguments.length;if(0===ae?K=j=0:1===ae?(K=0,j=re-$):(K=ae-2,j=H(B(n(ie),0),re-$)),re+K-j>F)throw x(Y);for(k=d(Z,j),oe=0;oe<j;oe++)(W=$+oe)in Z&&_(k,oe,Z[W]);if(k.length=j,K<j){for(oe=$;oe<re-j;oe++)J=oe+K,(W=oe+j)in Z?Z[J]=Z[W]:delete Z[J];for(oe=re;oe>re-j+K;oe--)delete Z[oe-1]}else if(K>j)for(oe=re-j;oe>$;oe--)J=oe+K-1,(W=oe+j-1)in Z?Z[J]=Z[W]:delete Z[J];for(oe=0;oe<K;oe++)Z[oe+$]=arguments[oe+2];return Z.length=re-j+K,k}})},39481:(C,A,g)=>{var b=g(47695),w=g(71186),o=g(31542),n=g(27549),a=g(83232),c=g(72194),d=w.Array,_=o("JSON","stringify"),y=a(/./.exec),R=a("".charAt),x=a("".charCodeAt),B=a("".replace),H=a(1..toString),F=/[\uD800-\uDFFF]/g,Y=/^[\uD800-\uDBFF]$/,z=/^[\uDC00-\uDFFF]$/,G=function(Z,re,$){var ae=R($,re-1),K=R($,re+1);return y(Y,Z)&&!y(z,K)||y(z,Z)&&!y(Y,ae)?"\\u"+H(x(Z,0),16):Z},ie=c(function(){return'"\\udf06\\ud834"'!==_("\udf06\ud834")||'"\\udead"'!==_("\udead")});_&&b({target:"JSON",stat:!0,forced:ie},{stringify:function(re,$,ae){for(var K=0,j=arguments.length,k=d(j);K<j;K++)k[K]=arguments[K];var oe=n(_,null,k);return"string"==typeof oe?B(oe,F,G):oe}})},897:(C,A,g)=>{var b=g(71186);g(81488)(b.JSON,"JSON",!0)},6603:()=>{},1476:(C,A,g)=>{var b=g(47695),w=g(49855);b({target:"Object",stat:!0,forced:Object.assign!==w},{assign:w})},63851:(C,A,g)=>{var b=g(47695),w=g(93628);b({target:"Object",stat:!0,forced:!w,sham:!w},{defineProperties:g(8584)})},23179:(C,A,g)=>{var b=g(47695),w=g(93628);b({target:"Object",stat:!0,forced:!w,sham:!w},{defineProperty:g(38360).f})},69178:(C,A,g)=>{var b=g(47695),w=g(94559).entries;b({target:"Object",stat:!0},{entries:function(n){return w(n)}})},67827:(C,A,g)=>{var b=g(47695),w=g(72194),o=g(38611),n=g(3182).f,a=g(93628),c=w(function(){n(1)});b({target:"Object",stat:!0,forced:!a||c,sham:!a},{getOwnPropertyDescriptor:function(y,R){return n(o(y),R)}})},53603:(C,A,g)=>{var b=g(47695),w=g(93628),o=g(69093),n=g(38611),a=g(3182),c=g(68140);b({target:"Object",stat:!0,sham:!w},{getOwnPropertyDescriptors:function(_){for(var F,Y,y=n(_),R=a.f,x=o(y),B={},H=0;x.length>H;)void 0!==(Y=R(y,F=x[H++]))&&c(B,F,Y);return B}})},63596:(C,A,g)=>{var b=g(47695),w=g(12784),o=g(44637);b({target:"Object",stat:!0,forced:g(72194)(function(){o(1)})},{keys:function(d){return o(w(d))}})},94666:()=>{},5823:(C,A,g)=>{"use strict";var b=g(47695),w=g(74217),o=g(62057),n=g(86343),a=g(83061),c=g(64837);b({target:"Promise",stat:!0},{allSettled:function(_){var y=this,R=n.f(y),x=R.resolve,B=R.reject,H=a(function(){var F=o(y.resolve),Y=[],z=0,G=1;c(_,function(ie){var Z=z++,re=!1;G++,w(F,y,ie).then(function($){re||(re=!0,Y[Z]={status:"fulfilled",value:$},--G||x(Y))},function($){re||(re=!0,Y[Z]={status:"rejected",reason:$},--G||x(Y))})}),--G||x(Y)});return H.error&&B(H.value),R.promise}})},78084:(C,A,g)=>{"use strict";var b=g(47695),w=g(62057),o=g(31542),n=g(74217),a=g(86343),c=g(83061),d=g(64837),_="No one promise resolved";b({target:"Promise",stat:!0},{any:function(R){var x=this,B=o("AggregateError"),H=a.f(x),F=H.resolve,Y=H.reject,z=c(function(){var G=w(x.resolve),ie=[],Z=0,re=1,$=!1;d(R,function(ae){var K=Z++,j=!1;re++,n(G,x,ae).then(function(k){j||$||($=!0,F(k))},function(k){j||$||(j=!0,ie[K]=k,--re||Y(new B(ie,_)))})}),--re||Y(new B(ie,_))});return z.error&&Y(z.value),H.promise}})},31296:(C,A,g)=>{"use strict";var b=g(47695),w=g(83546),o=g(98133),n=g(72194),a=g(31542),c=g(89982),d=g(21379),_=g(93186),y=g(64519);if(b({target:"Promise",proto:!0,real:!0,forced:!!o&&n(function(){o.prototype.finally.call({then:function(){}},function(){})})},{finally:function(B){var H=d(this,a("Promise")),F=c(B);return this.then(F?function(Y){return _(H,B()).then(function(){return Y})}:B,F?function(Y){return _(H,B()).then(function(){throw Y})}:B)}}),!w&&c(o)){var x=a("Promise").prototype.finally;o.prototype.finally!==x&&y(o.prototype,"finally",x,{unsafe:!0})}},47110:(C,A,g)=>{"use strict";var dn,Ut,Pn,Qn,b=g(47695),w=g(83546),o=g(71186),n=g(31542),a=g(74217),c=g(98133),d=g(64519),_=g(61306),y=g(86447),R=g(81488),x=g(36524),B=g(62057),H=g(89982),F=g(4559),Y=g(37368),z=g(96307),G=g(64837),ie=g(92807),Z=g(21379),re=g(20284).set,$=g(84607),ae=g(93186),K=g(38478),j=g(86343),k=g(83061),oe=g(59066),W=g(33699),J=g(51227),ne=g(33700),ee=g(62151),me=g(47803),se=J("species"),de="Promise",Ee=oe.get,we=oe.set,fe=oe.getterFor(de),Re=c&&c.prototype,Te=c,Ie=Re,xe=o.TypeError,Oe=o.document,ot=o.process,et=j.f,ht=et,Ht=!!(Oe&&Oe.createEvent&&o.dispatchEvent),sn=H(o.PromiseRejectionEvent),Bt="unhandledrejection",mt=!1,_e=W(de,function(){var Ce=z(Te),Ve=Ce!==String(Te);if(!Ve&&66===me||w&&!Ie.finally)return!0;if(me>=51&&/native code/.test(Ce))return!1;var le=new Te(function(je){je(1)}),ye=function(je){je(function(){},function(){})};return(le.constructor={})[se]=ye,!(mt=le.then(function(){})instanceof ye)||!Ve&&ne&&!sn}),ve=_e||!ie(function(Ce){Te.all(Ce).catch(function(){})}),vt=function(Ce){var Ve;return!(!F(Ce)||!H(Ve=Ce.then))&&Ve},Ct=function(Ce,Ve){if(!Ce.notified){Ce.notified=!0;var le=Ce.reactions;$(function(){for(var ye=Ce.value,Be=1==Ce.state,je=0;le.length>je;){var xt,kn,Cr,zt=le[je++],Xe=Be?zt.ok:zt.fail,Ze=zt.resolve,ut=zt.reject,gt=zt.domain;try{Xe?(Be||(2===Ce.rejection&&Xn(Ce),Ce.rejection=1),!0===Xe?xt=ye:(gt&&gt.enter(),xt=Xe(ye),gt&&(gt.exit(),Cr=!0)),xt===zt.promise?ut(xe("Promise-chain cycle")):(kn=vt(xt))?a(kn,xt,Ze,ut):Ze(xt)):ut(ye)}catch(un){gt&&!Cr&&gt.exit(),ut(un)}}Ce.reactions=[],Ce.notified=!1,Ve&&!Ce.rejection&&St(Ce)})}},jt=function(Ce,Ve,le){var ye,Be;Ht?((ye=Oe.createEvent("Event")).promise=Ve,ye.reason=le,ye.initEvent(Ce,!1,!0),o.dispatchEvent(ye)):ye={promise:Ve,reason:le},!sn&&(Be=o["on"+Ce])?Be(ye):Ce===Bt&&K("Unhandled promise rejection",le)},St=function(Ce){a(re,o,function(){var Be,Ve=Ce.facade,le=Ce.value;if(yn(Ce)&&(Be=k(function(){ee?ot.emit("unhandledRejection",le,Ve):jt(Bt,Ve,le)}),Ce.rejection=ee||yn(Ce)?2:1,Be.error))throw Be.value})},yn=function(Ce){return 1!==Ce.rejection&&!Ce.parent},Xn=function(Ce){a(re,o,function(){var Ve=Ce.facade;ee?ot.emit("rejectionHandled",Ve):jt("rejectionhandled",Ve,Ce.value)})},Mt=function(Ce,Ve,le){return function(ye){Ce(Ve,ye,le)}},We=function(Ce,Ve,le){Ce.done||(Ce.done=!0,le&&(Ce=le),Ce.value=Ve,Ce.state=2,Ct(Ce,!0))},ze=function(Ce,Ve,le){if(!Ce.done){Ce.done=!0,le&&(Ce=le);try{if(Ce.facade===Ve)throw xe("Promise can't be resolved itself");var ye=vt(Ve);ye?$(function(){var Be={done:!1};try{a(ye,Ve,Mt(ze,Be,Ce),Mt(We,Be,Ce))}catch(je){We(Be,je,Ce)}}):(Ce.value=Ve,Ce.state=1,Ct(Ce,!1))}catch(Be){We({done:!1},Be,Ce)}}};if(_e&&(Te=function(Ve){Y(this,Ie),B(Ve),a(dn,this);var le=Ee(this);try{Ve(Mt(ze,le),Mt(We,le))}catch(ye){We(le,ye)}},(dn=function(Ve){we(this,{type:de,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=_(Ie=Te.prototype,{then:function(Ve,le){var ye=fe(this),Be=ye.reactions,je=et(Z(this,Te));return je.ok=!H(Ve)||Ve,je.fail=H(le)&&le,je.domain=ee?ot.domain:void 0,ye.parent=!0,Be[Be.length]=je,0!=ye.state&&Ct(ye,!1),je.promise},catch:function(Ce){return this.then(void 0,Ce)}}),Ut=function(){var Ce=new dn,Ve=Ee(Ce);this.promise=Ce,this.resolve=Mt(ze,Ve),this.reject=Mt(We,Ve)},j.f=et=function(Ce){return Ce===Te||Ce===Pn?new Ut(Ce):ht(Ce)},!w&&H(c)&&Re!==Object.prototype)){Qn=Re.then,mt||(d(Re,"then",function(Ve,le){var ye=this;return new Te(function(Be,je){a(Qn,ye,Be,je)}).then(Ve,le)},{unsafe:!0}),d(Re,"catch",Ie.catch,{unsafe:!0}));try{delete Re.constructor}catch(Ce){}y&&y(Re,Ie)}b({global:!0,wrap:!0,forced:_e},{Promise:Te}),R(Te,de,!1,!0),x(de),Pn=n(de),b({target:de,stat:!0,forced:_e},{reject:function(Ve){var le=et(this);return a(le.reject,void 0,Ve),le.promise}}),b({target:de,stat:!0,forced:w||_e},{resolve:function(Ve){return ae(w&&this===Pn?Te:this,Ve)}}),b({target:de,stat:!0,forced:ve},{all:function(Ve){var le=this,ye=et(le),Be=ye.resolve,je=ye.reject,zt=k(function(){var Xe=B(le.resolve),Ze=[],ut=0,gt=1;G(Ve,function(xt){var kn=ut++,Cr=!1;gt++,a(Xe,le,xt).then(function(un){Cr||(Cr=!0,Ze[kn]=un,--gt||Be(Ze))},je)}),--gt||Be(Ze)});return zt.error&&je(zt.value),ye.promise},race:function(Ve){var le=this,ye=et(le),Be=ye.reject,je=k(function(){var zt=B(le.resolve);G(Ve,function(Xe){a(zt,le,Xe).then(ye.resolve,Be)})});return je.error&&Be(je.value),ye.promise}})},73609:()=>{},54840:(C,A,g)=>{"use strict";var b=g(47695),w=g(83232),o=g(72566),n=g(94087),a=g(40208),c=g(80736),d=w("".indexOf);b({target:"String",proto:!0,forced:!c("includes")},{includes:function(y){return!!~d(a(n(this)),a(o(y)),arguments.length>1?arguments[1]:void 0)}})},21446:(C,A,g)=>{"use strict";var b=g(12206).charAt,w=g(40208),o=g(59066),n=g(8672),a="String Iterator",c=o.set,d=o.getterFor(a);n(String,"String",function(_){c(this,{type:a,string:w(_),index:0})},function(){var B,y=d(this),R=y.string,x=y.index;return x>=R.length?{value:void 0,done:!0}:(B=b(R,x),y.index+=B.length,{value:B,done:!1})})},93784:(C,A,g)=>{"use strict";var Y,b=g(47695),w=g(83232),o=g(3182).f,n=g(71673),a=g(40208),c=g(72566),d=g(94087),_=g(80736),y=g(83546),R=w("".startsWith),x=w("".slice),B=Math.min,H=_("startsWith");b({target:"String",proto:!0,forced:!(!y&&!H&&(Y=o(String.prototype,"startsWith"),Y&&!Y.writable)||H)},{startsWith:function(z){var G=a(d(this));c(z);var ie=n(B(arguments.length>1?arguments[1]:void 0,G.length)),Z=a(z);return R?R(G,Z,ie):x(G,ie,ie+Z.length)===Z}})},55623:(C,A,g)=>{g(35985)("asyncIterator")},19060:()=>{},43364:(C,A,g)=>{g(35985)("hasInstance")},97447:(C,A,g)=>{g(35985)("isConcatSpreadable")},70830:(C,A,g)=>{g(35985)("iterator")},5001:(C,A,g)=>{"use strict";var b=g(47695),w=g(71186),o=g(31542),n=g(27549),a=g(74217),c=g(83232),d=g(83546),_=g(93628),y=g(96596),R=g(72194),x=g(63262),B=g(21284),H=g(89982),F=g(4559),Y=g(49778),z=g(92271),G=g(64808),ie=g(12784),Z=g(38611),re=g(66943),$=g(40208),ae=g(79695),K=g(47579),j=g(44637),k=g(80679),oe=g(22690),W=g(39557),J=g(3182),ne=g(38360),ee=g(52750),me=g(60462),se=g(64519),de=g(22196),Ee=g(71063),we=g(16998),fe=g(39900),Re=g(51227),Te=g(12506),Ie=g(35985),xe=g(81488),Oe=g(59066),ot=g(32794).forEach,et=Ee("hidden"),ht="Symbol",Ht="prototype",sn=Re("toPrimitive"),Bt=Oe.set,it=Oe.getterFor(ht),Dt=Object[Ht],Qe=w.Symbol,hn=Qe&&Qe[Ht],Me=w.TypeError,Dn=w.QObject,mt=o("JSON","stringify"),dn=J.f,Ut=ne.f,Pn=oe.f,Qn=ee.f,_e=c([].push),ve=de("symbols"),vt=de("op-symbols"),Ct=de("string-to-symbol-registry"),jt=de("symbol-to-string-registry"),St=de("wks"),yn=!Dn||!Dn[Ht]||!Dn[Ht].findChild,Xn=_&&R(function(){return 7!=K(Ut({},"a",{get:function(){return Ut(this,"a",{value:7}).a}})).a})?function(Xe,Ze,ut){var gt=dn(Dt,Ze);gt&&delete Dt[Ze],Ut(Xe,Ze,ut),gt&&Xe!==Dt&&Ut(Dt,Ze,gt)}:Ut,Mt=function(Xe,Ze){var ut=ve[Xe]=K(hn);return Bt(ut,{type:ht,tag:Xe,description:Ze}),_||(ut.description=Ze),ut},We=function(Ze,ut,gt){Ze===Dt&&We(vt,ut,gt),G(Ze);var xt=re(ut);return G(gt),x(ve,xt)?(gt.enumerable?(x(Ze,et)&&Ze[et][xt]&&(Ze[et][xt]=!1),gt=K(gt,{enumerable:ae(0,!1)})):(x(Ze,et)||Ut(Ze,et,ae(1,{})),Ze[et][xt]=!0),Xn(Ze,xt,gt)):Ut(Ze,xt,gt)},ze=function(Ze,ut){G(Ze);var gt=Z(ut),xt=j(gt).concat(Be(gt));return ot(xt,function(kn){(!_||a(Ve,gt,kn))&&We(Ze,kn,gt[kn])}),Ze},Ve=function(Ze){var ut=re(Ze),gt=a(Qn,this,ut);return!(this===Dt&&x(ve,ut)&&!x(vt,ut))&&(!(gt||!x(this,ut)||!x(ve,ut)||x(this,et)&&this[et][ut])||gt)},le=function(Ze,ut){var gt=Z(Ze),xt=re(ut);if(gt!==Dt||!x(ve,xt)||x(vt,xt)){var kn=dn(gt,xt);return kn&&x(ve,xt)&&!(x(gt,et)&&gt[et][xt])&&(kn.enumerable=!0),kn}},ye=function(Ze){var ut=Pn(Z(Ze)),gt=[];return ot(ut,function(xt){!x(ve,xt)&&!x(we,xt)&&_e(gt,xt)}),gt},Be=function(Ze){var ut=Ze===Dt,gt=Pn(ut?vt:Z(Ze)),xt=[];return ot(gt,function(kn){x(ve,kn)&&(!ut||x(Dt,kn))&&_e(xt,ve[kn])}),xt};if(y||(se(hn=(Qe=function(){if(Y(hn,this))throw Me("Symbol is not a constructor");var Ze=arguments.length&&void 0!==arguments[0]?$(arguments[0]):void 0,ut=fe(Ze),gt=function(xt){this===Dt&&a(gt,vt,xt),x(this,et)&&x(this[et],ut)&&(this[et][ut]=!1),Xn(this,ut,ae(1,xt))};return _&&yn&&Xn(Dt,ut,{configurable:!0,set:gt}),Mt(ut,Ze)})[Ht],"toString",function(){return it(this).tag}),se(Qe,"withoutSetter",function(Xe){return Mt(fe(Xe),Xe)}),ee.f=Ve,ne.f=We,J.f=le,k.f=oe.f=ye,W.f=Be,Te.f=function(Xe){return Mt(Re(Xe),Xe)},_&&(Ut(hn,"description",{configurable:!0,get:function(){return it(this).description}}),d||se(Dt,"propertyIsEnumerable",Ve,{unsafe:!0}))),b({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:Qe}),ot(j(St),function(Xe){Ie(Xe)}),b({target:ht,stat:!0,forced:!y},{for:function(Xe){var Ze=$(Xe);if(x(Ct,Ze))return Ct[Ze];var ut=Qe(Ze);return Ct[Ze]=ut,jt[ut]=Ze,ut},keyFor:function(Ze){if(!z(Ze))throw Me(Ze+" is not a symbol");if(x(jt,Ze))return jt[Ze]},useSetter:function(){yn=!0},useSimple:function(){yn=!1}}),b({target:"Object",stat:!0,forced:!y,sham:!_},{create:function(Ze,ut){return void 0===ut?K(Ze):ze(K(Ze),ut)},defineProperty:We,defineProperties:ze,getOwnPropertyDescriptor:le}),b({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:ye,getOwnPropertySymbols:Be}),b({target:"Object",stat:!0,forced:R(function(){W.f(1)})},{getOwnPropertySymbols:function(Ze){return W.f(ie(Ze))}}),mt&&b({target:"JSON",stat:!0,forced:!y||R(function(){var Xe=Qe();return"[null]"!=mt([Xe])||"{}"!=mt({a:Xe})||"{}"!=mt(Object(Xe))})},{stringify:function(Ze,ut,gt){var xt=me(arguments),kn=ut;if((F(ut)||void 0!==Ze)&&!z(Ze))return B(ut)||(ut=function(Cr,un){if(H(kn)&&(un=a(kn,this,Cr,un)),!z(un))return un}),xt[1]=ut,n(mt,null,xt)}}),!hn[sn]){var zt=hn.valueOf;se(hn,sn,function(Xe){return a(zt,this)})}xe(Qe,ht),we[et]=!0},5623:(C,A,g)=>{g(35985)("matchAll")},85873:(C,A,g)=>{g(35985)("match")},98499:(C,A,g)=>{g(35985)("replace")},81281:(C,A,g)=>{g(35985)("search")},91348:(C,A,g)=>{g(35985)("species")},25609:(C,A,g)=>{g(35985)("split")},69538:(C,A,g)=>{g(35985)("toPrimitive")},64827:(C,A,g)=>{g(35985)("toStringTag")},5256:(C,A,g)=>{g(35985)("unscopables")},58871:(C,A,g)=>{"use strict";var B,b=g(71186),w=g(83232),o=g(61306),n=g(77699),a=g(8394),c=g(2387),d=g(4559),_=g(67616),y=g(59066).enforce,R=g(43491),x=!b.ActiveXObject&&"ActiveXObject"in b,H=function(re){return function(){return re(this,arguments.length?arguments[0]:void 0)}},F=a("WeakMap",H,c);if(R&&x){B=c.getConstructor(H,"WeakMap",!0),n.enable();var Y=F.prototype,z=w(Y.delete),G=w(Y.has),ie=w(Y.get),Z=w(Y.set);o(Y,{delete:function(re){if(d(re)&&!_(re)){var $=y(this);return $.frozen||($.frozen=new B),z(this,re)||$.frozen.delete(re)}return z(this,re)},has:function($){if(d($)&&!_($)){var ae=y(this);return ae.frozen||(ae.frozen=new B),G(this,$)||ae.frozen.has($)}return G(this,$)},get:function($){if(d($)&&!_($)){var ae=y(this);return ae.frozen||(ae.frozen=new B),G(this,$)?ie(this,$):ae.frozen.get($)}return ie(this,$)},set:function($,ae){if(d($)&&!_($)){var K=y(this);K.frozen||(K.frozen=new B),G(this,$)?Z(this,$,ae):K.frozen.set($,ae)}else Z(this,$,ae);return this}})}},69797:(C,A,g)=>{g(96476)},24101:(C,A,g)=>{g(5823)},96860:(C,A,g)=>{g(78084)},1127:(C,A,g)=>{"use strict";var b=g(47695),w=g(86343),o=g(83061);b({target:"Promise",stat:!0},{try:function(n){var a=w.f(this),c=o(n);return(c.error?a.reject:a.resolve)(c.value),a.promise}})},67924:(C,A,g)=>{g(35985)("asyncDispose")},27907:(C,A,g)=>{g(35985)("dispose")},59331:(C,A,g)=>{g(35985)("matcher")},97515:(C,A,g)=>{g(35985)("metadata")},97601:(C,A,g)=>{g(35985)("observable")},61061:(C,A,g)=>{g(35985)("patternMatch")},98377:(C,A,g)=>{g(35985)("replaceAll")},33840:(C,A,g)=>{g(68905);var b=g(27634),w=g(71186),o=g(36346),n=g(30259),a=g(57160),d=g(51227)("toStringTag");for(var _ in b){var y=w[_],R=y&&y.prototype;R&&o(R)!==d&&n(R,d,_),a[_]=a.Array}},56269:(C,A,g)=>{"use strict";g(68905);var b=g(47695),w=g(71186),o=g(31542),n=g(74217),a=g(83232),c=g(20836),d=g(64519),_=g(61306),y=g(81488),R=g(68603),x=g(59066),B=g(37368),H=g(89982),F=g(63262),Y=g(56875),z=g(36346),G=g(64808),ie=g(4559),Z=g(40208),re=g(47579),$=g(79695),ae=g(80009),K=g(27556),j=g(51227),k=g(25278),oe=j("iterator"),W="URLSearchParams",J=W+"Iterator",ne=x.set,ee=x.getterFor(W),me=x.getterFor(J),se=o("fetch"),de=o("Request"),Ee=o("Headers"),we=de&&de.prototype,fe=Ee&&Ee.prototype,Re=w.RegExp,Te=w.TypeError,Ie=w.decodeURIComponent,xe=w.encodeURIComponent,Oe=a("".charAt),ot=a([].join),et=a([].push),ht=a("".replace),Ht=a([].shift),sn=a([].splice),Bt=a("".split),it=a("".slice),Dt=/\+/g,Qe=Array(4),hn=function(We){return Qe[We-1]||(Qe[We-1]=Re("((?:%[\\da-f]{2}){"+We+"})","gi"))},Me=function(We){try{return Ie(We)}catch(ze){return We}},Dn=function(We){var ze=ht(We,Dt," "),Ce=4;try{return Ie(ze)}catch(Ve){for(;Ce;)ze=ht(ze,hn(Ce--),Me);return ze}},mt=/[!'()~]|%20/g,dn={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Ut=function(We){return dn[We]},Pn=function(We){return ht(xe(We),mt,Ut)},Qn=function(We,ze){if(ze)for(var le,ye,Ce=Bt(ze,"&"),Ve=0;Ve<Ce.length;)(le=Ce[Ve++]).length&&(ye=Bt(le,"="),et(We,{key:Dn(Ht(ye)),value:Dn(ot(ye,"="))}))},_e=function(We){this.entries.length=0,Qn(this.entries,We)},ve=function(We,ze){if(We<ze)throw Te("Not enough arguments")},vt=R(function(ze,Ce){ne(this,{type:J,iterator:ae(ee(ze).entries),kind:Ce})},"Iterator",function(){var ze=me(this),Ce=ze.kind,Ve=ze.iterator.next(),le=Ve.value;return Ve.done||(Ve.value="keys"===Ce?le.key:"values"===Ce?le.value:[le.key,le.value]),Ve}),Ct=function(){B(this,jt);var le,ye,Be,je,zt,Xe,Ze,ut,gt,ze=arguments.length>0?arguments[0]:void 0,Ce=this,Ve=[];if(ne(Ce,{type:W,entries:Ve,updateURL:function(){},updateSearchParams:_e}),void 0!==ze)if(ie(ze))if(le=K(ze))for(Be=(ye=ae(ze,le)).next;!(je=n(Be,ye)).done;){if(zt=ae(G(je.value)),(Ze=n(Xe=zt.next,zt)).done||(ut=n(Xe,zt)).done||!n(Xe,zt).done)throw Te("Expected sequence with length 2");et(Ve,{key:Z(Ze.value),value:Z(ut.value)})}else for(gt in ze)F(ze,gt)&&et(Ve,{key:gt,value:Z(ze[gt])});else Qn(Ve,"string"==typeof ze?"?"===Oe(ze,0)?it(ze,1):ze:Z(ze))},jt=Ct.prototype;if(_(jt,{append:function(ze,Ce){ve(arguments.length,2);var Ve=ee(this);et(Ve.entries,{key:Z(ze),value:Z(Ce)}),Ve.updateURL()},delete:function(We){ve(arguments.length,1);for(var ze=ee(this),Ce=ze.entries,Ve=Z(We),le=0;le<Ce.length;)Ce[le].key===Ve?sn(Ce,le,1):le++;ze.updateURL()},get:function(ze){ve(arguments.length,1);for(var Ce=ee(this).entries,Ve=Z(ze),le=0;le<Ce.length;le++)if(Ce[le].key===Ve)return Ce[le].value;return null},getAll:function(ze){ve(arguments.length,1);for(var Ce=ee(this).entries,Ve=Z(ze),le=[],ye=0;ye<Ce.length;ye++)Ce[ye].key===Ve&&et(le,Ce[ye].value);return le},has:function(ze){ve(arguments.length,1);for(var Ce=ee(this).entries,Ve=Z(ze),le=0;le<Ce.length;)if(Ce[le++].key===Ve)return!0;return!1},set:function(ze,Ce){ve(arguments.length,1);for(var Xe,Ve=ee(this),le=Ve.entries,ye=!1,Be=Z(ze),je=Z(Ce),zt=0;zt<le.length;zt++)(Xe=le[zt]).key===Be&&(ye?sn(le,zt--,1):(ye=!0,Xe.value=je));ye||et(le,{key:Be,value:je}),Ve.updateURL()},sort:function(){var ze=ee(this);k(ze.entries,function(Ce,Ve){return Ce.key>Ve.key?1:-1}),ze.updateURL()},forEach:function(ze){for(var ye,Ce=ee(this).entries,Ve=Y(ze,arguments.length>1?arguments[1]:void 0),le=0;le<Ce.length;)Ve((ye=Ce[le++]).value,ye.key,this)},keys:function(){return new vt(this,"keys")},values:function(){return new vt(this,"values")},entries:function(){return new vt(this,"entries")}},{enumerable:!0}),d(jt,oe,jt.entries,{name:"entries"}),d(jt,"toString",function(){for(var le,ze=ee(this).entries,Ce=[],Ve=0;Ve<ze.length;)le=ze[Ve++],et(Ce,Pn(le.key)+"="+Pn(le.value));return ot(Ce,"&")},{enumerable:!0}),y(Ct,W),b({global:!0,forced:!c},{URLSearchParams:Ct}),!c&&H(Ee)){var St=a(fe.has),yn=a(fe.set),Xn=function(We){if(ie(We)){var Ce,ze=We.body;if(z(ze)===W)return Ce=We.headers?new Ee(We.headers):new Ee,St(Ce,"content-type")||yn(Ce,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),re(We,{body:$(0,Z(ze)),headers:$(0,Ce)})}return We};if(H(se)&&b({global:!0,enumerable:!0,forced:!0},{fetch:function(ze){return se(ze,arguments.length>1?Xn(arguments[1]):{})}}),H(de)){var Mt=function(ze){return B(this,we),new de(ze,arguments.length>1?Xn(arguments[1]):{})};we.constructor=Mt,Mt.prototype=we,b({global:!0,forced:!0},{Request:Mt})}}C.exports={URLSearchParams:Ct,getState:ee}},16775:(C,A,g)=>{var b=g(28430);C.exports=b},4718:(C,A,g)=>{var b=g(19117);C.exports=b},15593:(C,A,g)=>{var b=g(37311);C.exports=b},29568:(C,A,g)=>{var b=g(52535);C.exports=b},81826:(C,A,g)=>{var b=g(38615);g(33840),C.exports=b},29032:(C,A,g)=>{var b=g(59597);C.exports=b},93928:(C,A,g)=>{g(33840);var b=g(36346),w=g(63262),o=g(49778),n=g(15593),a=Array.prototype,c={DOMTokenList:!0,NodeList:!0};C.exports=function(d){var _=d.entries;return d===a||o(a,d)&&_===a.entries||w(c,b(d))?n:_}},40779:(C,A,g)=>{var b=g(46824);C.exports=b},88092:(C,A,g)=>{var b=g(45600);C.exports=b},48596:(C,A,g)=>{g(33840);var b=g(36346),w=g(63262),o=g(49778),n=g(29568),a=Array.prototype,c={DOMTokenList:!0,NodeList:!0};C.exports=function(d){var _=d.forEach;return d===a||o(a,d)&&_===a.forEach||w(c,b(d))?n:_}},43910:(C,A,g)=>{var b=g(85923);C.exports=b},35093:(C,A,g)=>{var b=g(77146);C.exports=b},89412:(C,A,g)=>{var b=g(24773);C.exports=b},71166:(C,A,g)=>{var b=g(58445);C.exports=b},14570:(C,A,g)=>{var b=g(8138);C.exports=b},68786:(C,A,g)=>{var b=g(41108);C.exports=b},94768:(C,A,g)=>{var b=g(27615);C.exports=b},5219:(C,A,g)=>{var b=g(92889);C.exports=b},71258:(C,A,g)=>{var b=g(5318);C.exports=b},72102:(C,A,g)=>{var b=g(75634);C.exports=b},47833:(C,A,g)=>{var b=g(36669);C.exports=b},87440:(C,A,g)=>{var b=g(88095);C.exports=b},48021:(C,A,g)=>{var b=g(89439);C.exports=b},4490:(C,A,g)=>{var b=g(13799);C.exports=b},16625:(C,A,g)=>{var b=g(33054);C.exports=b},95609:(C,A,g)=>{var b=g(649);g(33840),C.exports=b},35875:(C,A,g)=>{var b=g(67079);g(33840),C.exports=b},34542:(C,A,g)=>{var b=g(41519);g(33840),C.exports=b},56447:(C,A,g)=>{var b=g(84253);g(33840),C.exports=b},3024:(C,A,g)=>{var b=g(21643);g(33840),C.exports=b},84253:(C,A,g)=>{g(56269);var b=g(35361);C.exports=b.URLSearchParams},36316:function(){var C;C="undefined"!=typeof self?self:this,function(g){var b_searchParams="URLSearchParams"in C,b_iterable="Symbol"in C&&"iterator"in Symbol,b_blob="FileReader"in C&&"Blob"in C&&function(){try{return new Blob,!0}catch(j){return!1}}(),b_formData="FormData"in C,b_arrayBuffer="ArrayBuffer"in C;if(b_arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(j){return j&&o.indexOf(Object.prototype.toString.call(j))>-1};function a(j){if("string"!=typeof j&&(j=String(j)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(j))throw new TypeError("Invalid character in header field name");return j.toLowerCase()}function c(j){return"string"!=typeof j&&(j=String(j)),j}function d(j){var k={next:function(){var oe=j.shift();return{done:void 0===oe,value:oe}}};return b_iterable&&(k[Symbol.iterator]=function(){return k}),k}function _(j){this.map={},j instanceof _?j.forEach(function(k,oe){this.append(oe,k)},this):Array.isArray(j)?j.forEach(function(k){this.append(k[0],k[1])},this):j&&Object.getOwnPropertyNames(j).forEach(function(k){this.append(k,j[k])},this)}function y(j){if(j.bodyUsed)return Promise.reject(new TypeError("Already read"));j.bodyUsed=!0}function R(j){return new Promise(function(k,oe){j.onload=function(){k(j.result)},j.onerror=function(){oe(j.error)}})}function x(j){var k=new FileReader,oe=R(k);return k.readAsArrayBuffer(j),oe}function F(j){if(j.slice)return j.slice(0);var k=new Uint8Array(j.byteLength);return k.set(new Uint8Array(j)),k.buffer}function Y(){return this.bodyUsed=!1,this._initBody=function(j){this._bodyInit=j,j?"string"==typeof j?this._bodyText=j:b_blob&&Blob.prototype.isPrototypeOf(j)?this._bodyBlob=j:b_formData&&FormData.prototype.isPrototypeOf(j)?this._bodyFormData=j:b_searchParams&&URLSearchParams.prototype.isPrototypeOf(j)?this._bodyText=j.toString():b_arrayBuffer&&b_blob&&function(j){return j&&DataView.prototype.isPrototypeOf(j)}(j)?(this._bodyArrayBuffer=F(j.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):b_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(j)||n(j))?this._bodyArrayBuffer=F(j):this._bodyText=j=Object.prototype.toString.call(j):this._bodyText="",this.headers.get("content-type")||("string"==typeof j?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b_searchParams&&URLSearchParams.prototype.isPrototypeOf(j)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b_blob&&(this.blob=function(){var j=y(this);if(j)return j;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(x)}),this.text=function(){var j=y(this);if(j)return j;if(this._bodyBlob)return function(j){var k=new FileReader,oe=R(k);return k.readAsText(j),oe}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(j){for(var k=new Uint8Array(j),oe=new Array(k.length),W=0;W<k.length;W++)oe[W]=String.fromCharCode(k[W]);return oe.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b_formData&&(this.formData=function(){return this.text().then(Z)}),this.json=function(){return this.text().then(JSON.parse)},this}_.prototype.append=function(j,k){j=a(j),k=c(k);var oe=this.map[j];this.map[j]=oe?oe+", "+k:k},_.prototype.delete=function(j){delete this.map[a(j)]},_.prototype.get=function(j){return j=a(j),this.has(j)?this.map[j]:null},_.prototype.has=function(j){return this.map.hasOwnProperty(a(j))},_.prototype.set=function(j,k){this.map[a(j)]=c(k)},_.prototype.forEach=function(j,k){for(var oe in this.map)this.map.hasOwnProperty(oe)&&j.call(k,this.map[oe],oe,this)},_.prototype.keys=function(){var j=[];return this.forEach(function(k,oe){j.push(oe)}),d(j)},_.prototype.values=function(){var j=[];return this.forEach(function(k){j.push(k)}),d(j)},_.prototype.entries=function(){var j=[];return this.forEach(function(k,oe){j.push([oe,k])}),d(j)},b_iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);var z=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ie(j,k){var oe=(k=k||{}).body;if(j instanceof ie){if(j.bodyUsed)throw new TypeError("Already read");this.url=j.url,this.credentials=j.credentials,k.headers||(this.headers=new _(j.headers)),this.method=j.method,this.mode=j.mode,this.signal=j.signal,!oe&&null!=j._bodyInit&&(oe=j._bodyInit,j.bodyUsed=!0)}else this.url=String(j);if(this.credentials=k.credentials||this.credentials||"same-origin",(k.headers||!this.headers)&&(this.headers=new _(k.headers)),this.method=function(j){var k=j.toUpperCase();return z.indexOf(k)>-1?k:j}(k.method||this.method||"GET"),this.mode=k.mode||this.mode||null,this.signal=k.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&oe)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(oe)}function Z(j){var k=new FormData;return j.trim().split("&").forEach(function(oe){if(oe){var W=oe.split("="),J=W.shift().replace(/\+/g," "),ne=W.join("=").replace(/\+/g," ");k.append(decodeURIComponent(J),decodeURIComponent(ne))}}),k}function re(j){var k=new _;return j.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(W){var J=W.split(":"),ne=J.shift().trim();if(ne){var ee=J.join(":").trim();k.append(ne,ee)}}),k}function $(j,k){k||(k={}),this.type="default",this.status=void 0===k.status?200:k.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in k?k.statusText:"OK",this.headers=new _(k.headers),this.url=k.url||"",this._initBody(j)}ie.prototype.clone=function(){return new ie(this,{body:this._bodyInit})},Y.call(ie.prototype),Y.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},$.error=function(){var j=new $(null,{status:0,statusText:""});return j.type="error",j};var ae=[301,302,303,307,308];$.redirect=function(j,k){if(-1===ae.indexOf(k))throw new RangeError("Invalid status code");return new $(null,{status:k,headers:{location:j}})},g.DOMException=C.DOMException;try{new g.DOMException}catch(j){g.DOMException=function(k,oe){this.message=k,this.name=oe;var W=Error(k);this.stack=W.stack},g.DOMException.prototype=Object.create(Error.prototype),g.DOMException.prototype.constructor=g.DOMException}function K(j,k){return new Promise(function(oe,W){var J=new ie(j,k);if(J.signal&&J.signal.aborted)return W(new g.DOMException("Aborted","AbortError"));var ne=new XMLHttpRequest;function ee(){ne.abort()}ne.onload=function(){var me={status:ne.status,statusText:ne.statusText,headers:re(ne.getAllResponseHeaders()||"")};me.url="responseURL"in ne?ne.responseURL:me.headers.get("X-Request-URL"),oe(new $("response"in ne?ne.response:ne.responseText,me))},ne.onerror=function(){W(new TypeError("Network request failed"))},ne.ontimeout=function(){W(new TypeError("Network request failed"))},ne.onabort=function(){W(new g.DOMException("Aborted","AbortError"))},ne.open(J.method,J.url,!0),"include"===J.credentials?ne.withCredentials=!0:"omit"===J.credentials&&(ne.withCredentials=!1),"responseType"in ne&&b_blob&&(ne.responseType="blob"),J.headers.forEach(function(me,se){ne.setRequestHeader(se,me)}),J.signal&&(J.signal.addEventListener("abort",ee),ne.onreadystatechange=function(){4===ne.readyState&&J.signal.removeEventListener("abort",ee)}),ne.send(void 0===J._bodyInit?null:J._bodyInit)})}K.polyfill=!0,C.fetch||(C.fetch=K,C.Headers=_,C.Request=ie,C.Response=$),g.Headers=_,g.Request=ie,g.Response=$,g.fetch=K,Object.defineProperty(g,"__esModule",{value:!0})}({})},60910:C=>{"use strict";function A(n){return n instanceof Buffer||n instanceof Date||n instanceof RegExp}function g(n){if(n instanceof Buffer){var a=Buffer.alloc?Buffer.alloc(n.length):new Buffer(n.length);return n.copy(a),a}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp)return new RegExp(n);throw new Error("Unexpected situation")}function b(n){var a=[];return n.forEach(function(c,d){a[d]="object"==typeof c&&null!==c?Array.isArray(c)?b(c):A(c)?g(c):o({},c):c}),a}function w(n,a){return"__proto__"===a?void 0:n[a]}var o=C.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var c,d,n=arguments[0],a=Array.prototype.slice.call(arguments,1);return a.forEach(function(y){"object"!=typeof y||null===y||Array.isArray(y)||Object.keys(y).forEach(function(R){if(d=w(n,R),(c=w(y,R))!==n)return"object"!=typeof c||null===c?void(n[R]=c):Array.isArray(c)?void(n[R]=b(c)):A(c)?void(n[R]=g(c)):"object"!=typeof d||null===d||Array.isArray(d)?void(n[R]=o({},c)):void(n[R]=o(d,c))})}),n}},48086:function(C,A){var w;void 0!==(w=function(){"use strict";function n(R,x,B){var H=new XMLHttpRequest;H.open("GET",R),H.responseType="blob",H.onload=function(){y(H.response,x,B)},H.onerror=function(){console.error("could not download file")},H.send()}function a(R){var x=new XMLHttpRequest;x.open("HEAD",R,!1);try{x.send()}catch(B){}return 200<=x.status&&299>=x.status}function c(R){try{R.dispatchEvent(new MouseEvent("click"))}catch(B){var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),R.dispatchEvent(x)}}var d="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,_=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=d.saveAs||("object"!=typeof window||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(R,x,B){var H=d.URL||d.webkitURL,F=document.createElement("a");F.download=x=x||R.name||"download",F.rel="noopener","string"==typeof R?(F.href=R,F.origin===location.origin?c(F):a(F.href)?n(R,x,B):c(F,F.target="_blank")):(F.href=H.createObjectURL(R),setTimeout(function(){H.revokeObjectURL(F.href)},4e4),setTimeout(function(){c(F)},0))}:"msSaveOrOpenBlob"in navigator?function(R,x,B){if(x=x||R.name||"download","string"!=typeof R)navigator.msSaveOrOpenBlob(function(R,x){return void 0===x?x={autoBom:!1}:"object"!=typeof x&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(R.type)?new Blob(["\ufeff",R],{type:R.type}):R}(R,B),x);else if(a(R))n(R,x,B);else{var H=document.createElement("a");H.href=R,H.target="_blank",setTimeout(function(){c(H)})}}:function(R,x,B,H){if((H=H||open("","_blank"))&&(H.document.title=H.document.body.innerText="downloading..."),"string"==typeof R)return n(R,x,B);var F="application/octet-stream"===R.type,Y=/constructor/i.test(d.HTMLElement)||d.safari,z=/CriOS\/[\d]+/.test(navigator.userAgent);if((z||F&&Y||_)&&"undefined"!=typeof FileReader){var G=new FileReader;G.onloadend=function(){var re=G.result;re=z?re:re.replace(/^data:[^;]*;/,"data:attachment/file;"),H?H.location.href=re:location=re,H=null},G.readAsDataURL(R)}else{var ie=d.URL||d.webkitURL,Z=ie.createObjectURL(R);H?H.location=Z:location.href=Z,H=null,setTimeout(function(){ie.revokeObjectURL(Z)},4e4)}});d.saveAs=y.saveAs=y,C.exports=y}.apply(A,[]))&&(C.exports=w)},78953:C=>{"use strict";var A="Function.prototype.bind called on incompatible ",g=Array.prototype.slice,b=Object.prototype.toString,w="[object Function]";C.exports=function(n){var a=this;if("function"!=typeof a||b.call(a)!==w)throw new TypeError(A+a);for(var d,c=g.call(arguments,1),_=function(){if(this instanceof d){var H=a.apply(this,c.concat(g.call(arguments)));return Object(H)===H?H:this}return a.apply(n,c.concat(g.call(arguments)))},y=Math.max(0,a.length-c.length),R=[],x=0;x<y;x++)R.push("$"+x);if(d=Function("binder","return function ("+R.join(",")+"){ return binder.apply(this,arguments); }")(_),a.prototype){var B=function(){};B.prototype=a.prototype,d.prototype=new B,B.prototype=null}return d}},11138:(C,A,g)=>{"use strict";var b=g(78953);C.exports=Function.prototype.bind||b},1326:(C,A,g)=>{"use strict";var b,w=SyntaxError,o=Function,n=TypeError,a=function(oe){try{return o('"use strict"; return ('+oe+").constructor;")()}catch(W){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(oe){c=null}var d=function(){throw new n},_=c?function(){try{return d}catch(oe){try{return c(arguments,"callee").get}catch(W){return d}}}():d,y=g(18097)(),R=Object.getPrototypeOf||function(oe){return oe.__proto__},x={},B="undefined"==typeof Uint8Array?b:R(Uint8Array),H={"%AggregateError%":"undefined"==typeof AggregateError?b:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?b:ArrayBuffer,"%ArrayIteratorPrototype%":y?R([][Symbol.iterator]()):b,"%AsyncFromSyncIteratorPrototype%":b,"%AsyncFunction%":x,"%AsyncGenerator%":x,"%AsyncGeneratorFunction%":x,"%AsyncIteratorPrototype%":x,"%Atomics%":"undefined"==typeof Atomics?b:Atomics,"%BigInt%":"undefined"==typeof BigInt?b:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?b:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?b:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?b:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?b:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":x,"%Int8Array%":"undefined"==typeof Int8Array?b:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?b:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?b:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y?R(R([][Symbol.iterator]())):b,"%JSON%":"object"==typeof JSON?JSON:b,"%Map%":"undefined"==typeof Map?b:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&y?R((new Map)[Symbol.iterator]()):b,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?b:Promise,"%Proxy%":"undefined"==typeof Proxy?b:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?b:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?b:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&y?R((new Set)[Symbol.iterator]()):b,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?b:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y?R(""[Symbol.iterator]()):b,"%Symbol%":y?Symbol:b,"%SyntaxError%":w,"%ThrowTypeError%":_,"%TypedArray%":B,"%TypeError%":n,"%Uint8Array%":"undefined"==typeof Uint8Array?b:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?b:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?b:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?b:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?b:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?b:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?b:WeakSet},F=function oe(W){var J;if("%AsyncFunction%"===W)J=a("async function () {}");else if("%GeneratorFunction%"===W)J=a("function* () {}");else if("%AsyncGeneratorFunction%"===W)J=a("async function* () {}");else if("%AsyncGenerator%"===W){var ne=oe("%AsyncGeneratorFunction%");ne&&(J=ne.prototype)}else if("%AsyncIteratorPrototype%"===W){var ee=oe("%AsyncGenerator%");ee&&(J=R(ee.prototype))}return H[W]=J,J},Y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},z=g(11138),G=g(51142),ie=z.call(Function.call,Array.prototype.concat),Z=z.call(Function.apply,Array.prototype.splice),re=z.call(Function.call,String.prototype.replace),$=z.call(Function.call,String.prototype.slice),ae=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,K=/\\(\\)?/g,j=function(W){var J=$(W,0,1),ne=$(W,-1);if("%"===J&&"%"!==ne)throw new w("invalid intrinsic syntax, expected closing `%`");if("%"===ne&&"%"!==J)throw new w("invalid intrinsic syntax, expected opening `%`");var ee=[];return re(W,ae,function(me,se,de,Ee){ee[ee.length]=de?re(Ee,K,"$1"):se||me}),ee},k=function(W,J){var ee,ne=W;if(G(Y,ne)&&(ne="%"+(ee=Y[ne])[0]+"%"),G(H,ne)){var me=H[ne];if(me===x&&(me=F(ne)),void 0===me&&!J)throw new n("intrinsic "+W+" exists, but is not available. Please file an issue!");return{alias:ee,name:ne,value:me}}throw new w("intrinsic "+W+" does not exist!")};C.exports=function(W,J){if("string"!=typeof W||0===W.length)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof J)throw new n('"allowMissing" argument must be a boolean');var ne=j(W),ee=ne.length>0?ne[0]:"",me=k("%"+ee+"%",J),se=me.name,de=me.value,Ee=!1,we=me.alias;we&&(ee=we[0],Z(ne,ie([0,1],we)));for(var fe=1,Re=!0;fe<ne.length;fe+=1){var Te=ne[fe],Ie=$(Te,0,1),xe=$(Te,-1);if(('"'===Ie||"'"===Ie||"`"===Ie||'"'===xe||"'"===xe||"`"===xe)&&Ie!==xe)throw new w("property names with quotes must have matching quotes");if(("constructor"===Te||!Re)&&(Ee=!0),G(H,se="%"+(ee+="."+Te)+"%"))de=H[se];else if(null!=de){if(!(Te in de)){if(!J)throw new n("base intrinsic for "+W+" exists, but the property is not available.");return}if(c&&fe+1>=ne.length){var Oe=c(de,Te);de=(Re=!!Oe)&&"get"in Oe&&!("originalValue"in Oe.get)?Oe.get:de[Te]}else Re=G(de,Te),de=de[Te];Re&&!Ee&&(H[se]=de)}}return de}},18097:(C,A,g)=>{"use strict";var b="undefined"!=typeof Symbol&&Symbol,w=g(14933);C.exports=function(){return"function"==typeof b&&"function"==typeof Symbol&&"symbol"==typeof b("foo")&&"symbol"==typeof Symbol("bar")&&w()}},14933:C=>{"use strict";C.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var g={},b=Symbol("test"),w=Object(b);if("string"==typeof b||"[object Symbol]"!==Object.prototype.toString.call(b)||"[object Symbol]"!==Object.prototype.toString.call(w))return!1;for(b in g[b]=42,g)return!1;if("function"==typeof Object.keys&&0!==Object.keys(g).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(g).length)return!1;var n=Object.getOwnPropertySymbols(g);if(1!==n.length||n[0]!==b||!Object.prototype.propertyIsEnumerable.call(g,b))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(g,b);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},51142:(C,A,g)=>{"use strict";var b=g(11138);C.exports=b.call(Function.call,Object.prototype.hasOwnProperty)},41510:C=>{var le,g="__lodash_hash_undefined__",b=1/0,a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,d=/^\./,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R=/\\(\\)?/g,x=/^\[object .+?Constructor\]$/,B="object"==typeof global&&global&&global.Object===Object&&global,H="object"==typeof self&&self&&self.Object===Object&&self,F=B||H||Function("return this")(),G=Array.prototype,ie=Function.prototype,Z=Object.prototype,re=F["__core-js_shared__"],$=(le=/[^.]+$/.exec(re&&re.keys&&re.keys.IE_PROTO||""))?"Symbol(src)_1."+le:"",ae=ie.toString,K=Z.hasOwnProperty,j=Z.toString,k=RegExp("^"+ae.call(K).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=F.Symbol,W=G.splice,J=Ut(F,"Map"),ne=Ut(Object,"create"),ee=oe?oe.prototype:void 0,me=ee?ee.toString:void 0;function se(le){var ye=-1,Be=le?le.length:0;for(this.clear();++ye<Be;){var je=le[ye];this.set(je[0],je[1])}}function Te(le){var ye=-1,Be=le?le.length:0;for(this.clear();++ye<Be;){var je=le[ye];this.set(je[0],je[1])}}function ht(le){var ye=-1,Be=le?le.length:0;for(this.clear();++ye<Be;){var je=le[ye];this.set(je[0],je[1])}}function Qe(le,ye){for(var Be=le.length;Be--;)if(St(le[Be][0],ye))return Be;return-1}function dn(le,ye){var Be=le.__data__;return function(le){var ye=typeof le;return"string"==ye||"number"==ye||"symbol"==ye||"boolean"==ye?"__proto__"!==le:null===le}(ye)?Be["string"==typeof ye?"string":"hash"]:Be.map}function Ut(le,ye){var Be=function(le,ye){return null==le?void 0:le[ye]}(le,ye);return function(le){if(!Mt(le)||function(le){return!!$&&$ in le}(le))return!1;var ye=function(le){var ye=Mt(le)?j.call(le):"";return"[object Function]"==ye||"[object GeneratorFunction]"==ye}(le)||function(le){var ye=!1;if(null!=le&&"function"!=typeof le.toString)try{ye=!!(le+"")}catch(Be){}return ye}(le)?k:x;return ye.test(function(le){if(null!=le){try{return ae.call(le)}catch(ye){}try{return le+""}catch(ye){}}return""}(le))}(Be)?Be:void 0}se.prototype.clear=function(){this.__data__=ne?ne(null):{}},se.prototype.delete=function(le){return this.has(le)&&delete this.__data__[le]},se.prototype.get=function(le){var ye=this.__data__;if(ne){var Be=ye[le];return Be===g?void 0:Be}return K.call(ye,le)?ye[le]:void 0},se.prototype.has=function(le){var ye=this.__data__;return ne?void 0!==ye[le]:K.call(ye,le)},se.prototype.set=function(le,ye){return this.__data__[le]=ne&&void 0===ye?g:ye,this},Te.prototype.clear=function(){this.__data__=[]},Te.prototype.delete=function(le){var ye=this.__data__,Be=Qe(ye,le);return!(Be<0||(Be==ye.length-1?ye.pop():W.call(ye,Be,1),0))},Te.prototype.get=function(le){var ye=this.__data__,Be=Qe(ye,le);return Be<0?void 0:ye[Be][1]},Te.prototype.has=function(le){return Qe(this.__data__,le)>-1},Te.prototype.set=function(le,ye){var Be=this.__data__,je=Qe(Be,le);return je<0?Be.push([le,ye]):Be[je][1]=ye,this},ht.prototype.clear=function(){this.__data__={hash:new se,map:new(J||Te),string:new se}},ht.prototype.delete=function(le){return dn(this,le).delete(le)},ht.prototype.get=function(le){return dn(this,le).get(le)},ht.prototype.has=function(le){return dn(this,le).has(le)},ht.prototype.set=function(le,ye){return dn(this,le).set(le,ye),this};var ve=jt(function(le){le=function(le){return null==le?"":function(le){if("string"==typeof le)return le;if(ze(le))return me?me.call(le):"";var ye=le+"";return"0"==ye&&1/le==-b?"-0":ye}(le)}(le);var ye=[];return d.test(le)&&ye.push(""),le.replace(_,function(Be,je,zt,Xe){ye.push(zt?Xe.replace(R,"$1"):je||Be)}),ye});function vt(le){if("string"==typeof le||ze(le))return le;var ye=le+"";return"0"==ye&&1/le==-b?"-0":ye}function jt(le,ye){if("function"!=typeof le||ye&&"function"!=typeof ye)throw new TypeError("Expected a function");var Be=function(){var je=arguments,zt=ye?ye.apply(this,je):je[0],Xe=Be.cache;if(Xe.has(zt))return Xe.get(zt);var Ze=le.apply(this,je);return Be.cache=Xe.set(zt,Ze),Ze};return Be.cache=new(jt.Cache||ht),Be}function St(le,ye){return le===ye||le!=le&&ye!=ye}jt.Cache=ht;var yn=Array.isArray;function Mt(le){var ye=typeof le;return!!le&&("object"==ye||"function"==ye)}function ze(le){return"symbol"==typeof le||function(le){return!!le&&"object"==typeof le}(le)&&"[object Symbol]"==j.call(le)}C.exports=function(le,ye,Be){var je=null==le?void 0:function(le,ye){ye=function(le,ye){if(yn(le))return!1;var Be=typeof le;return!("number"!=Be&&"symbol"!=Be&&"boolean"!=Be&&null!=le&&!ze(le))||c.test(le)||!a.test(le)||null!=ye&&le in Object(ye)}(ye,le)?[ye]:function(le){return yn(le)?le:ve(le)}(ye);for(var Be=0,je=ye.length;null!=le&&Be<je;)le=le[vt(ye[Be++])];return Be&&Be==je?le:void 0}(le,ye);return void 0===je?Be:je}},92778:(C,A,g)=>{var o=g(30573)(g(13737),"DataView");C.exports=o},95581:(C,A,g)=>{var b=g(58529),w=g(95882),o=g(93067),n=g(28726),a=g(3609);function c(d){var _=-1,y=null==d?0:d.length;for(this.clear();++_<y;){var R=d[_];this.set(R[0],R[1])}}c.prototype.clear=b,c.prototype.delete=w,c.prototype.get=o,c.prototype.has=n,c.prototype.set=a,C.exports=c},55961:(C,A,g)=>{var b=g(82626),w=g(28471),o=g(39349),n=g(80268),a=g(36032);function c(d){var _=-1,y=null==d?0:d.length;for(this.clear();++_<y;){var R=d[_];this.set(R[0],R[1])}}c.prototype.clear=b,c.prototype.delete=w,c.prototype.get=o,c.prototype.has=n,c.prototype.set=a,C.exports=c},46741:(C,A,g)=>{var o=g(30573)(g(13737),"Map");C.exports=o},40281:(C,A,g)=>{var b=g(78176),w=g(48116),o=g(22679),n=g(22230),a=g(99766);function c(d){var _=-1,y=null==d?0:d.length;for(this.clear();++_<y;){var R=d[_];this.set(R[0],R[1])}}c.prototype.clear=b,c.prototype.delete=w,c.prototype.get=o,c.prototype.has=n,c.prototype.set=a,C.exports=c},96442:(C,A,g)=>{var o=g(30573)(g(13737),"Promise");C.exports=o},35435:(C,A,g)=>{var o=g(30573)(g(13737),"Set");C.exports=o},68366:(C,A,g)=>{var b=g(55961),w=g(38359),o=g(35987),n=g(40286),a=g(62709),c=g(92764);function d(_){var y=this.__data__=new b(_);this.size=y.size}d.prototype.clear=w,d.prototype.delete=o,d.prototype.get=n,d.prototype.has=a,d.prototype.set=c,C.exports=d},73555:(C,A,g)=>{var b=g(13737);C.exports=b.Symbol},7025:(C,A,g)=>{var b=g(13737);C.exports=b.Uint8Array},89885:(C,A,g)=>{var o=g(30573)(g(13737),"WeakMap");C.exports=o},8914:C=>{C.exports=function(g,b){for(var w=-1,o=null==g?0:g.length;++w<o&&!1!==b(g[w],w,g););return g}},71236:C=>{C.exports=function(g,b){for(var w=-1,o=null==g?0:g.length,n=0,a=[];++w<o;){var c=g[w];b(c,w,g)&&(a[n++]=c)}return a}},50185:(C,A,g)=>{var b=g(34110),w=g(12208),o=g(52092),n=g(44735),a=g(14846),c=g(83483),_=Object.prototype.hasOwnProperty;C.exports=function(R,x){var B=o(R),H=!B&&w(R),F=!B&&!H&&n(R),Y=!B&&!H&&!F&&c(R),z=B||H||F||Y,G=z?b(R.length,String):[],ie=G.length;for(var Z in R)(x||_.call(R,Z))&&(!z||!("length"==Z||F&&("offset"==Z||"parent"==Z)||Y&&("buffer"==Z||"byteLength"==Z||"byteOffset"==Z)||a(Z,ie)))&&G.push(Z);return G}},11981:C=>{C.exports=function(g,b){for(var w=-1,o=null==g?0:g.length,n=Array(o);++w<o;)n[w]=b(g[w],w,g);return n}},60583:C=>{C.exports=function(g,b){for(var w=-1,o=b.length,n=g.length;++w<o;)g[n+w]=b[w];return g}},30919:(C,A,g)=>{var b=g(20826),w=g(9412),n=Object.prototype.hasOwnProperty;C.exports=function(c,d,_){var y=c[d];(!n.call(c,d)||!w(y,_)||void 0===_&&!(d in c))&&b(c,d,_)}},58459:(C,A,g)=>{var b=g(9412);C.exports=function(o,n){for(var a=o.length;a--;)if(b(o[a][0],n))return a;return-1}},88244:(C,A,g)=>{var b=g(14976),w=g(5773);C.exports=function(n,a){return n&&b(a,w(a),n)}},91948:(C,A,g)=>{var b=g(14976),w=g(39754);C.exports=function(n,a){return n&&b(a,w(a),n)}},20826:(C,A,g)=>{var b=g(32062);C.exports=function(o,n,a){"__proto__"==n&&b?b(o,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):o[n]=a}},17584:(C,A,g)=>{var b=g(68366),w=g(8914),o=g(30919),n=g(88244),a=g(91948),c=g(59352),d=g(35004),_=g(67703),y=g(42058),R=g(12818),x=g(16233),B=g(96435),H=g(47176),F=g(53678),Y=g(80177),z=g(52092),G=g(44735),ie=g(56432),Z=g(27954),re=g(65871),$=g(5773),ae=g(39754),oe="[object Arguments]",me="[object Function]",we="[object Object]",Me={};Me[oe]=Me["[object Array]"]=Me["[object ArrayBuffer]"]=Me["[object DataView]"]=Me["[object Boolean]"]=Me["[object Date]"]=Me["[object Float32Array]"]=Me["[object Float64Array]"]=Me["[object Int8Array]"]=Me["[object Int16Array]"]=Me["[object Int32Array]"]=Me["[object Map]"]=Me["[object Number]"]=Me[we]=Me["[object RegExp]"]=Me["[object Set]"]=Me["[object String]"]=Me["[object Symbol]"]=Me["[object Uint8Array]"]=Me["[object Uint8ClampedArray]"]=Me["[object Uint16Array]"]=Me["[object Uint32Array]"]=!0,Me["[object Error]"]=Me[me]=Me["[object WeakMap]"]=!1,C.exports=function Dn(mt,dn,Ut,Pn,Qn,_e){var ve,vt=1&dn,Ct=2&dn,jt=4&dn;if(Ut&&(ve=Qn?Ut(mt,Pn,Qn,_e):Ut(mt)),void 0!==ve)return ve;if(!Z(mt))return mt;var St=z(mt);if(St){if(ve=H(mt),!vt)return d(mt,ve)}else{var yn=B(mt),Xn=yn==me||"[object GeneratorFunction]"==yn;if(G(mt))return c(mt,vt);if(yn==we||yn==oe||Xn&&!Qn){if(ve=Ct||Xn?{}:Y(mt),!vt)return Ct?y(mt,a(ve,mt)):_(mt,n(ve,mt))}else{if(!Me[yn])return Qn?mt:{};ve=F(mt,yn,vt)}}_e||(_e=new b);var Mt=_e.get(mt);if(Mt)return Mt;_e.set(mt,ve),re(mt)?mt.forEach(function(Ce){ve.add(Dn(Ce,dn,Ut,Ce,mt,_e))}):ie(mt)&&mt.forEach(function(Ce,Ve){ve.set(Ve,Dn(Ce,dn,Ut,Ve,mt,_e))});var ze=St?void 0:(jt?Ct?x:R:Ct?ae:$)(mt);return w(ze||mt,function(Ce,Ve){ze&&(Ce=mt[Ve=Ce]),o(ve,Ve,Dn(Ce,dn,Ut,Ve,mt,_e))}),ve}},30866:(C,A,g)=>{var b=g(27954),w=Object.create,o=function(){function n(){}return function(a){if(!b(a))return{};if(w)return w(a);n.prototype=a;var c=new n;return n.prototype=void 0,c}}();C.exports=o},80255:(C,A,g)=>{var b=g(52426),w=g(41162);C.exports=function(n,a){for(var c=0,d=(a=b(a,n)).length;null!=n&&c<d;)n=n[w(a[c++])];return c&&c==d?n:void 0}},20702:(C,A,g)=>{var b=g(60583),w=g(52092);C.exports=function(n,a,c){var d=a(n);return w(n)?d:b(d,c(n))}},15687:(C,A,g)=>{var b=g(73555),w=g(23531),o=g(98406),c=b?b.toStringTag:void 0;C.exports=function(_){return null==_?void 0===_?"[object Undefined]":"[object Null]":c&&c in Object(_)?w(_):o(_)}},11760:(C,A,g)=>{var b=g(15687),w=g(12142);C.exports=function(a){return w(a)&&"[object Arguments]"==b(a)}},54929:(C,A,g)=>{var b=g(96435),w=g(12142);C.exports=function(a){return w(a)&&"[object Map]"==b(a)}},67097:(C,A,g)=>{var b=g(27660),w=g(94996),o=g(27954),n=g(25850),c=/^\[object .+?Constructor\]$/,x=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");C.exports=function(H){return!(!o(H)||w(H))&&(b(H)?x:c).test(n(H))}},77480:(C,A,g)=>{var b=g(96435),w=g(12142);C.exports=function(a){return w(a)&&"[object Set]"==b(a)}},89638:(C,A,g)=>{var b=g(15687),w=g(85353),o=g(12142),J={};J["[object Float32Array]"]=J["[object Float64Array]"]=J["[object Int8Array]"]=J["[object Int16Array]"]=J["[object Int32Array]"]=J["[object Uint8Array]"]=J["[object Uint8ClampedArray]"]=J["[object Uint16Array]"]=J["[object Uint32Array]"]=!0,J["[object Arguments]"]=J["[object Array]"]=J["[object ArrayBuffer]"]=J["[object Boolean]"]=J["[object DataView]"]=J["[object Date]"]=J["[object Error]"]=J["[object Function]"]=J["[object Map]"]=J["[object Number]"]=J["[object Object]"]=J["[object RegExp]"]=J["[object Set]"]=J["[object String]"]=J["[object WeakMap]"]=!1,C.exports=function(ee){return o(ee)&&w(ee.length)&&!!J[b(ee)]}},85924:(C,A,g)=>{var b=g(21900),w=g(16585),n=Object.prototype.hasOwnProperty;C.exports=function(c){if(!b(c))return w(c);var d=[];for(var _ in Object(c))n.call(c,_)&&"constructor"!=_&&d.push(_);return d}},71300:(C,A,g)=>{var b=g(27954),w=g(21900),o=g(91355),a=Object.prototype.hasOwnProperty;C.exports=function(d){if(!b(d))return o(d);var _=w(d),y=[];for(var R in d)"constructor"==R&&(_||!a.call(d,R))||y.push(R);return y}},34110:C=>{C.exports=function(g,b){for(var w=-1,o=Array(g);++w<g;)o[w]=b(w);return o}},19917:(C,A,g)=>{var b=g(73555),w=g(11981),o=g(52092),n=g(23088),c=b?b.prototype:void 0,d=c?c.toString:void 0;C.exports=function _(y){if("string"==typeof y)return y;if(o(y))return w(y,_)+"";if(n(y))return d?d.call(y):"";var R=y+"";return"0"==R&&1/y==-1/0?"-0":R}},49613:C=>{C.exports=function(g){return function(b){return g(b)}}},52426:(C,A,g)=>{var b=g(52092),w=g(21056),o=g(55715),n=g(19169);C.exports=function(c,d){return b(c)?c:w(c,d)?[c]:o(n(c))}},70799:(C,A,g)=>{var b=g(7025);C.exports=function(o){var n=new o.constructor(o.byteLength);return new b(n).set(new b(o)),n}},59352:(C,A,g)=>{C=g.nmd(C);var b=g(13737),w=A&&!A.nodeType&&A,o=w&&C&&!C.nodeType&&C,a=o&&o.exports===w?b.Buffer:void 0,c=a?a.allocUnsafe:void 0;C.exports=function(_,y){if(y)return _.slice();var R=_.length,x=c?c(R):new _.constructor(R);return _.copy(x),x}},88752:(C,A,g)=>{var b=g(70799);C.exports=function(o,n){var a=n?b(o.buffer):o.buffer;return new o.constructor(a,o.byteOffset,o.byteLength)}},47366:C=>{var A=/\w*$/;C.exports=function(b){var w=new b.constructor(b.source,A.exec(b));return w.lastIndex=b.lastIndex,w}},45486:(C,A,g)=>{var b=g(73555),w=b?b.prototype:void 0,o=w?w.valueOf:void 0;C.exports=function(a){return o?Object(o.call(a)):{}}},83650:(C,A,g)=>{var b=g(70799);C.exports=function(o,n){var a=n?b(o.buffer):o.buffer;return new o.constructor(a,o.byteOffset,o.length)}},35004:C=>{C.exports=function(g,b){var w=-1,o=g.length;for(b||(b=Array(o));++w<o;)b[w]=g[w];return b}},14976:(C,A,g)=>{var b=g(30919),w=g(20826);C.exports=function(n,a,c,d){var _=!c;c||(c={});for(var y=-1,R=a.length;++y<R;){var x=a[y],B=d?d(c[x],n[x],x,c,n):void 0;void 0===B&&(B=n[x]),_?w(c,x,B):b(c,x,B)}return c}},67703:(C,A,g)=>{var b=g(14976),w=g(93003);C.exports=function(n,a){return b(n,w(n),a)}},42058:(C,A,g)=>{var b=g(14976),w=g(48871);C.exports=function(n,a){return b(n,w(n),a)}},96871:(C,A,g)=>{var b=g(13737);C.exports=b["__core-js_shared__"]},32062:(C,A,g)=>{var b=g(30573),w=function(){try{var o=b(Object,"defineProperty");return o({},"",{}),o}catch(n){}}();C.exports=w},35684:C=>{var A="object"==typeof global&&global&&global.Object===Object&&global;C.exports=A},12818:(C,A,g)=>{var b=g(20702),w=g(93003),o=g(5773);C.exports=function(a){return b(a,o,w)}},16233:(C,A,g)=>{var b=g(20702),w=g(48871),o=g(39754);C.exports=function(a){return b(a,o,w)}},53234:(C,A,g)=>{var b=g(38754);C.exports=function(o,n){var a=o.__data__;return b(n)?a["string"==typeof n?"string":"hash"]:a.map}},30573:(C,A,g)=>{var b=g(67097),w=g(19052);C.exports=function(n,a){var c=w(n,a);return b(c)?c:void 0}},79748:(C,A,g)=>{var w=g(1265)(Object.getPrototypeOf,Object);C.exports=w},23531:(C,A,g)=>{var b=g(73555),w=Object.prototype,o=w.hasOwnProperty,n=w.toString,a=b?b.toStringTag:void 0;C.exports=function(d){var _=o.call(d,a),y=d[a];try{d[a]=void 0;var R=!0}catch(B){}var x=n.call(d);return R&&(_?d[a]=y:delete d[a]),x}},93003:(C,A,g)=>{var b=g(71236),w=g(11186),n=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;C.exports=a?function(d){return null==d?[]:(d=Object(d),b(a(d),function(_){return n.call(d,_)}))}:w},48871:(C,A,g)=>{var b=g(60583),w=g(79748),o=g(93003),n=g(11186);C.exports=Object.getOwnPropertySymbols?function(d){for(var _=[];d;)b(_,o(d)),d=w(d);return _}:n},96435:(C,A,g)=>{var b=g(92778),w=g(46741),o=g(96442),n=g(35435),a=g(89885),c=g(15687),d=g(25850),_="[object Map]",R="[object Promise]",x="[object Set]",B="[object WeakMap]",H="[object DataView]",F=d(b),Y=d(w),z=d(o),G=d(n),ie=d(a),Z=c;(b&&Z(new b(new ArrayBuffer(1)))!=H||w&&Z(new w)!=_||o&&Z(o.resolve())!=R||n&&Z(new n)!=x||a&&Z(new a)!=B)&&(Z=function(re){var $=c(re),ae="[object Object]"==$?re.constructor:void 0,K=ae?d(ae):"";if(K)switch(K){case F:return H;case Y:return _;case z:return R;case G:return x;case ie:return B}return $}),C.exports=Z},19052:C=>{C.exports=function(g,b){return null==g?void 0:g[b]}},58529:(C,A,g)=>{var b=g(87642);C.exports=function(){this.__data__=b?b(null):{},this.size=0}},95882:C=>{C.exports=function(g){var b=this.has(g)&&delete this.__data__[g];return this.size-=b?1:0,b}},93067:(C,A,g)=>{var b=g(87642),n=Object.prototype.hasOwnProperty;C.exports=function(c){var d=this.__data__;if(b){var _=d[c];return"__lodash_hash_undefined__"===_?void 0:_}return n.call(d,c)?d[c]:void 0}},28726:(C,A,g)=>{var b=g(87642),o=Object.prototype.hasOwnProperty;C.exports=function(a){var c=this.__data__;return b?void 0!==c[a]:o.call(c,a)}},3609:(C,A,g)=>{var b=g(87642);C.exports=function(n,a){var c=this.__data__;return this.size+=this.has(n)?0:1,c[n]=b&&void 0===a?"__lodash_hash_undefined__":a,this}},47176:C=>{var g=Object.prototype.hasOwnProperty;C.exports=function(w){var o=w.length,n=new w.constructor(o);return o&&"string"==typeof w[0]&&g.call(w,"index")&&(n.index=w.index,n.input=w.input),n}},53678:(C,A,g)=>{var b=g(70799),w=g(88752),o=g(47366),n=g(45486),a=g(83650);C.exports=function(oe,W,J){var ne=oe.constructor;switch(W){case"[object ArrayBuffer]":return b(oe);case"[object Boolean]":case"[object Date]":return new ne(+oe);case"[object DataView]":return w(oe,J);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(oe,J);case"[object Map]":case"[object Set]":return new ne;case"[object Number]":case"[object String]":return new ne(oe);case"[object RegExp]":return o(oe);case"[object Symbol]":return n(oe)}}},80177:(C,A,g)=>{var b=g(30866),w=g(79748),o=g(21900);C.exports=function(a){return"function"!=typeof a.constructor||o(a)?{}:b(w(a))}},14846:C=>{var g=/^(?:0|[1-9]\d*)$/;C.exports=function(w,o){var n=typeof w;return!!(o=null==o?9007199254740991:o)&&("number"==n||"symbol"!=n&&g.test(w))&&w>-1&&w%1==0&&w<o}},21056:(C,A,g)=>{var b=g(52092),w=g(23088),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;C.exports=function(c,d){if(b(c))return!1;var _=typeof c;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=c&&!w(c))||n.test(c)||!o.test(c)||null!=d&&c in Object(d)}},38754:C=>{C.exports=function(g){var b=typeof g;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==g:null===g}},94996:(C,A,g)=>{var n,b=g(96871),w=(n=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";C.exports=function(n){return!!w&&w in n}},21900:C=>{var A=Object.prototype;C.exports=function(b){var w=b&&b.constructor;return b===("function"==typeof w&&w.prototype||A)}},82626:C=>{C.exports=function(){this.__data__=[],this.size=0}},28471:(C,A,g)=>{var b=g(58459),o=Array.prototype.splice;C.exports=function(a){var c=this.__data__,d=b(c,a);return!(d<0||(d==c.length-1?c.pop():o.call(c,d,1),--this.size,0))}},39349:(C,A,g)=>{var b=g(58459);C.exports=function(o){var n=this.__data__,a=b(n,o);return a<0?void 0:n[a][1]}},80268:(C,A,g)=>{var b=g(58459);C.exports=function(o){return b(this.__data__,o)>-1}},36032:(C,A,g)=>{var b=g(58459);C.exports=function(o,n){var a=this.__data__,c=b(a,o);return c<0?(++this.size,a.push([o,n])):a[c][1]=n,this}},78176:(C,A,g)=>{var b=g(95581),w=g(55961),o=g(46741);C.exports=function(){this.size=0,this.__data__={hash:new b,map:new(o||w),string:new b}}},48116:(C,A,g)=>{var b=g(53234);C.exports=function(o){var n=b(this,o).delete(o);return this.size-=n?1:0,n}},22679:(C,A,g)=>{var b=g(53234);C.exports=function(o){return b(this,o).get(o)}},22230:(C,A,g)=>{var b=g(53234);C.exports=function(o){return b(this,o).has(o)}},99766:(C,A,g)=>{var b=g(53234);C.exports=function(o,n){var a=b(this,o),c=a.size;return a.set(o,n),this.size+=a.size==c?0:1,this}},764:(C,A,g)=>{var b=g(84369);C.exports=function(n){var a=b(n,function(d){return 500===c.size&&c.clear(),d}),c=a.cache;return a}},87642:(C,A,g)=>{var w=g(30573)(Object,"create");C.exports=w},16585:(C,A,g)=>{var w=g(1265)(Object.keys,Object);C.exports=w},91355:C=>{C.exports=function(g){var b=[];if(null!=g)for(var w in Object(g))b.push(w);return b}},27447:(C,A,g)=>{C=g.nmd(C);var b=g(35684),w=A&&!A.nodeType&&A,o=w&&C&&!C.nodeType&&C,a=o&&o.exports===w&&b.process,c=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(_){}}();C.exports=c},98406:C=>{var g=Object.prototype.toString;C.exports=function(w){return g.call(w)}},1265:C=>{C.exports=function(g,b){return function(w){return g(b(w))}}},13737:(C,A,g)=>{var b=g(35684),w="object"==typeof self&&self&&self.Object===Object&&self,o=b||w||Function("return this")();C.exports=o},38359:(C,A,g)=>{var b=g(55961);C.exports=function(){this.__data__=new b,this.size=0}},35987:C=>{C.exports=function(g){var b=this.__data__,w=b.delete(g);return this.size=b.size,w}},40286:C=>{C.exports=function(g){return this.__data__.get(g)}},62709:C=>{C.exports=function(g){return this.__data__.has(g)}},92764:(C,A,g)=>{var b=g(55961),w=g(46741),o=g(40281);C.exports=function(c,d){var _=this.__data__;if(_ instanceof b){var y=_.__data__;if(!w||y.length<199)return y.push([c,d]),this.size=++_.size,this;_=this.__data__=new o(y)}return _.set(c,d),this.size=_.size,this}},55715:(C,A,g)=>{var b=g(764),w=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,n=b(function(a){var c=[];return 46===a.charCodeAt(0)&&c.push(""),a.replace(w,function(d,_,y,R){c.push(y?R.replace(o,"$1"):_||d)}),c});C.exports=n},41162:(C,A,g)=>{var b=g(23088);C.exports=function(n){if("string"==typeof n||b(n))return n;var a=n+"";return"0"==a&&1/n==-1/0?"-0":a}},25850:C=>{var g=Function.prototype.toString;C.exports=function(w){if(null!=w){try{return g.call(w)}catch(o){}try{return w+""}catch(o){}}return""}},32005:(C,A,g)=>{var b=g(17584);C.exports=function(a){return b(a,5)}},9412:C=>{C.exports=function(g,b){return g===b||g!=g&&b!=b}},87578:(C,A,g)=>{var b=g(80255);C.exports=function(o,n,a){var c=null==o?void 0:b(o,n);return void 0===c?a:c}},12208:(C,A,g)=>{var b=g(11760),w=g(12142),o=Object.prototype,n=o.hasOwnProperty,a=o.propertyIsEnumerable,c=b(function(){return arguments}())?b:function(d){return w(d)&&n.call(d,"callee")&&!a.call(d,"callee")};C.exports=c},52092:C=>{C.exports=Array.isArray},54528:(C,A,g)=>{var b=g(27660),w=g(85353);C.exports=function(n){return null!=n&&w(n.length)&&!b(n)}},44735:(C,A,g)=>{C=g.nmd(C);var b=g(13737),w=g(96585),o=A&&!A.nodeType&&A,n=o&&C&&!C.nodeType&&C,c=n&&n.exports===o?b.Buffer:void 0;C.exports=(c?c.isBuffer:void 0)||w},36593:(C,A,g)=>{var b=g(85924),w=g(96435),o=g(12208),n=g(52092),a=g(54528),c=g(44735),d=g(21900),_=g(83483),B=Object.prototype.hasOwnProperty;C.exports=function(F){if(null==F)return!0;if(a(F)&&(n(F)||"string"==typeof F||"function"==typeof F.splice||c(F)||_(F)||o(F)))return!F.length;var Y=w(F);if("[object Map]"==Y||"[object Set]"==Y)return!F.size;if(d(F))return!b(F).length;for(var z in F)if(B.call(F,z))return!1;return!0}},27660:(C,A,g)=>{var b=g(15687),w=g(27954);C.exports=function(_){if(!w(_))return!1;var y=b(_);return"[object Function]"==y||"[object GeneratorFunction]"==y||"[object AsyncFunction]"==y||"[object Proxy]"==y}},85353:C=>{C.exports=function(b){return"number"==typeof b&&b>-1&&b%1==0&&b<=9007199254740991}},56432:(C,A,g)=>{var b=g(54929),w=g(49613),o=g(27447),n=o&&o.isMap,a=n?w(n):b;C.exports=a},27954:C=>{C.exports=function(g){var b=typeof g;return null!=g&&("object"==b||"function"==b)}},12142:C=>{C.exports=function(g){return null!=g&&"object"==typeof g}},1794:(C,A,g)=>{var b=g(15687),w=g(79748),o=g(12142),d=Function.prototype.toString,_=Object.prototype.hasOwnProperty,y=d.call(Object);C.exports=function(x){if(!o(x)||"[object Object]"!=b(x))return!1;var B=w(x);if(null===B)return!0;var H=_.call(B,"constructor")&&B.constructor;return"function"==typeof H&&H instanceof H&&d.call(H)==y}},65871:(C,A,g)=>{var b=g(77480),w=g(49613),o=g(27447),n=o&&o.isSet,a=n?w(n):b;C.exports=a},23088:(C,A,g)=>{var b=g(15687),w=g(12142);C.exports=function(a){return"symbol"==typeof a||w(a)&&"[object Symbol]"==b(a)}},83483:(C,A,g)=>{var b=g(89638),w=g(49613),o=g(27447),n=o&&o.isTypedArray,a=n?w(n):b;C.exports=a},5773:(C,A,g)=>{var b=g(50185),w=g(85924),o=g(54528);C.exports=function(a){return o(a)?b(a):w(a)}},39754:(C,A,g)=>{var b=g(50185),w=g(71300),o=g(54528);C.exports=function(a){return o(a)?b(a,!0):w(a)}},84369:(C,A,g)=>{var b=g(40281);function o(n,a){if("function"!=typeof n||null!=a&&"function"!=typeof a)throw new TypeError("Expected a function");var c=function(){var d=arguments,_=a?a.apply(this,d):d[0],y=c.cache;if(y.has(_))return y.get(_);var R=n.apply(this,d);return c.cache=y.set(_,R)||y,R};return c.cache=new(o.Cache||b),c}o.Cache=b,C.exports=o},11186:C=>{C.exports=function(){return[]}},96585:C=>{C.exports=function(){return!1}},19169:(C,A,g)=>{var b=g(19917);C.exports=function(o){return null==o?"":b(o)}},29007:(C,A,g)=>{var b="function"==typeof Map&&Map.prototype,w=Object.getOwnPropertyDescriptor&&b?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=b&&w&&"function"==typeof w.get?w.get:null,n=b&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,d=a&&c&&"function"==typeof c.get?c.get:null,_=a&&Set.prototype.forEach,R="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,B="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,F="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,Y=Boolean.prototype.valueOf,z=Object.prototype.toString,G=Function.prototype.toString,ie=String.prototype.match,Z="function"==typeof BigInt?BigInt.prototype.valueOf:null,re=Object.getOwnPropertySymbols,$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ae="function"==typeof Symbol&&"object"==typeof Symbol.iterator,K=Object.prototype.propertyIsEnumerable,j=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(_e){return _e.__proto__}:null),k=g(96553).custom,oe=k&&Re(k)?k:null,W="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function J(_e,ve,vt){var Ct="double"===(vt.quoteStyle||ve)?'"':"'";return Ct+_e+Ct}function ne(_e){return String(_e).replace(/"/g,"&quot;")}function ee(_e){return!("[object Array]"!==Oe(_e)||W&&"object"==typeof _e&&W in _e)}function Re(_e){if(ae)return _e&&"object"==typeof _e&&_e instanceof Symbol;if("symbol"==typeof _e)return!0;if(!_e||"object"!=typeof _e||!$)return!1;try{return $.call(_e),!0}catch(ve){}return!1}C.exports=function _e(ve,vt,Ct,jt){var St=vt||{};if(xe(St,"quoteStyle")&&"single"!==St.quoteStyle&&"double"!==St.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(xe(St,"maxStringLength")&&("number"==typeof St.maxStringLength?St.maxStringLength<0&&St.maxStringLength!==1/0:null!==St.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var yn=!xe(St,"customInspect")||St.customInspect;if("boolean"!=typeof yn&&"symbol"!==yn)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(xe(St,"indent")&&null!==St.indent&&"\t"!==St.indent&&!(parseInt(St.indent,10)===St.indent&&St.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===ve)return"undefined";if(null===ve)return"null";if("boolean"==typeof ve)return ve?"true":"false";if("string"==typeof ve)return Qe(ve,St);if("number"==typeof ve)return 0===ve?1/0/ve>0?"0":"-0":String(ve);if("bigint"==typeof ve)return String(ve)+"n";var Xn=void 0===St.depth?5:St.depth;if(void 0===Ct&&(Ct=0),Ct>=Xn&&Xn>0&&"object"==typeof ve)return ee(ve)?"[Array]":"[Object]";var Mt=function(_e,ve){var vt;if("\t"===_e.indent)vt="\t";else{if(!("number"==typeof _e.indent&&_e.indent>0))return null;vt=Array(_e.indent+1).join(" ")}return{base:vt,prev:Array(ve+1).join(vt)}}(St,Ct);if(void 0===jt)jt=[];else if(et(jt,ve)>=0)return"[Circular]";function We(Ti,Gs,Fn){if(Gs&&(jt=jt.slice()).push(Gs),Fn){var io={depth:St.depth};return xe(St,"quoteStyle")&&(io.quoteStyle=St.quoteStyle),_e(Ti,io,Ct+1,jt)}return _e(Ti,St,Ct+1,jt)}if("function"==typeof ve){var ze=function(_e){if(_e.name)return _e.name;var ve=ie.call(G.call(_e),/^function\s*([\w$]+)/);return ve?ve[1]:null}(ve),Ce=Qn(ve,We);return"[Function"+(ze?": "+ze:" (anonymous)")+"]"+(Ce.length>0?" { "+Ce.join(", ")+" }":"")}if(Re(ve)){var Ve=ae?String(ve).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):$.call(ve);return"object"!=typeof ve||ae?Ve:Me(Ve)}if(function(_e){return!(!_e||"object"!=typeof _e)&&("undefined"!=typeof HTMLElement&&_e instanceof HTMLElement||"string"==typeof _e.nodeName&&"function"==typeof _e.getAttribute)}(ve)){for(var le="<"+String(ve.nodeName).toLowerCase(),ye=ve.attributes||[],Be=0;Be<ye.length;Be++)le+=" "+ye[Be].name+"="+J(ne(ye[Be].value),"double",St);return le+=">",ve.childNodes&&ve.childNodes.length&&(le+="..."),le+"</"+String(ve.nodeName).toLowerCase()+">"}if(ee(ve)){if(0===ve.length)return"[]";var je=Qn(ve,We);return Mt&&!function(_e){for(var ve=0;ve<_e.length;ve++)if(et(_e[ve],"\n")>=0)return!1;return!0}(je)?"["+Pn(je,Mt)+"]":"[ "+je.join(", ")+" ]"}if(function(_e){return!("[object Error]"!==Oe(_e)||W&&"object"==typeof _e&&W in _e)}(ve)){var zt=Qn(ve,We);return 0===zt.length?"["+String(ve)+"]":"{ ["+String(ve)+"] "+zt.join(", ")+" }"}if("object"==typeof ve&&yn){if(oe&&"function"==typeof ve[oe])return ve[oe]();if("symbol"!==yn&&"function"==typeof ve.inspect)return ve.inspect()}if(function(_e){if(!o||!_e||"object"!=typeof _e)return!1;try{o.call(_e);try{d.call(_e)}catch(ve){return!0}return _e instanceof Map}catch(ve){}return!1}(ve)){var Xe=[];return n.call(ve,function(Ti,Gs){Xe.push(We(Gs,ve,!0)+" => "+We(Ti,ve))}),mt("Map",o.call(ve),Xe,Mt)}if(function(_e){if(!d||!_e||"object"!=typeof _e)return!1;try{d.call(_e);try{o.call(_e)}catch(ve){return!0}return _e instanceof Set}catch(ve){}return!1}(ve)){var Ze=[];return _.call(ve,function(Ti){Ze.push(We(Ti,ve))}),mt("Set",d.call(ve),Ze,Mt)}if(function(_e){if(!R||!_e||"object"!=typeof _e)return!1;try{R.call(_e,R);try{B.call(_e,B)}catch(ve){return!0}return _e instanceof WeakMap}catch(ve){}return!1}(ve))return Dn("WeakMap");if(function(_e){if(!B||!_e||"object"!=typeof _e)return!1;try{B.call(_e,B);try{R.call(_e,R)}catch(ve){return!0}return _e instanceof WeakSet}catch(ve){}return!1}(ve))return Dn("WeakSet");if(function(_e){if(!F||!_e||"object"!=typeof _e)return!1;try{return F.call(_e),!0}catch(ve){}return!1}(ve))return Dn("WeakRef");if(function(_e){return!("[object Number]"!==Oe(_e)||W&&"object"==typeof _e&&W in _e)}(ve))return Me(We(Number(ve)));if(function(_e){if(!_e||"object"!=typeof _e||!Z)return!1;try{return Z.call(_e),!0}catch(ve){}return!1}(ve))return Me(We(Z.call(ve)));if(function(_e){return!("[object Boolean]"!==Oe(_e)||W&&"object"==typeof _e&&W in _e)}(ve))return Me(Y.call(ve));if(function(_e){return!("[object String]"!==Oe(_e)||W&&"object"==typeof _e&&W in _e)}(ve))return Me(We(String(ve)));if(!function(_e){return!("[object Date]"!==Oe(_e)||W&&"object"==typeof _e&&W in _e)}(ve)&&!function(_e){return!("[object RegExp]"!==Oe(_e)||W&&"object"==typeof _e&&W in _e)}(ve)){var ut=Qn(ve,We),gt=j?j(ve)===Object.prototype:ve instanceof Object||ve.constructor===Object,xt=ve instanceof Object?"":"null prototype",kn=!gt&&W&&Object(ve)===ve&&W in ve?Oe(ve).slice(8,-1):xt?"Object":"",un=(gt||"function"!=typeof ve.constructor?"":ve.constructor.name?ve.constructor.name+" ":"")+(kn||xt?"["+[].concat(kn||[],xt||[]).join(": ")+"] ":"");return 0===ut.length?un+"{}":Mt?un+"{"+Pn(ut,Mt)+"}":un+"{ "+ut.join(", ")+" }"}return String(ve)};var Ie=Object.prototype.hasOwnProperty||function(_e){return _e in this};function xe(_e,ve){return Ie.call(_e,ve)}function Oe(_e){return z.call(_e)}function et(_e,ve){if(_e.indexOf)return _e.indexOf(ve);for(var vt=0,Ct=_e.length;vt<Ct;vt++)if(_e[vt]===ve)return vt;return-1}function Qe(_e,ve){if(_e.length>ve.maxStringLength){var vt=_e.length-ve.maxStringLength,Ct="... "+vt+" more character"+(vt>1?"s":"");return Qe(_e.slice(0,ve.maxStringLength),ve)+Ct}return J(_e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,hn),"single",ve)}function hn(_e){var ve=_e.charCodeAt(0),vt={8:"b",9:"t",10:"n",12:"f",13:"r"}[ve];return vt?"\\"+vt:"\\x"+(ve<16?"0":"")+ve.toString(16).toUpperCase()}function Me(_e){return"Object("+_e+")"}function Dn(_e){return _e+" { ? }"}function mt(_e,ve,vt,Ct){return _e+" ("+ve+") {"+(Ct?Pn(vt,Ct):vt.join(", "))+"}"}function Pn(_e,ve){if(0===_e.length)return"";var vt="\n"+ve.prev+ve.base;return vt+_e.join(","+vt)+"\n"+ve.prev}function Qn(_e,ve){var vt=ee(_e),Ct=[];if(vt){Ct.length=_e.length;for(var jt=0;jt<_e.length;jt++)Ct[jt]=xe(_e,jt)?ve(_e[jt],_e):""}var yn,St="function"==typeof re?re(_e):[];if(ae){yn={};for(var Xn=0;Xn<St.length;Xn++)yn["$"+St[Xn]]=St[Xn]}for(var Mt in _e)!xe(_e,Mt)||vt&&String(Number(Mt))===Mt&&Mt<_e.length||ae&&yn["$"+Mt]instanceof Symbol||(/[^\w$]/.test(Mt)?Ct.push(ve(Mt,_e)+": "+ve(_e[Mt],_e)):Ct.push(Mt+": "+ve(_e[Mt],_e)));if("function"==typeof re)for(var We=0;We<St.length;We++)K.call(_e,St[We])&&Ct.push("["+ve(St[We])+"]: "+ve(_e[St[We]],_e));return Ct}},73881:C=>{"use strict";function A(g,b){return Object.prototype.hasOwnProperty.call(g,b)}C.exports=function(g,b,w,o){w=w||"=";var n={};if("string"!=typeof g||0===g.length)return n;var a=/\+/g;g=g.split(b=b||"&");var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var d=g.length;c>0&&d>c&&(d=c);for(var _=0;_<d;++_){var x,B,H,F,y=g[_].replace(a,"%20"),R=y.indexOf(w);R>=0?(x=y.substr(0,R),B=y.substr(R+1)):(x=y,B=""),H=decodeURIComponent(x),F=decodeURIComponent(B),A(n,H)?Array.isArray(n[H])?n[H].push(F):n[H]=[n[H],F]:n[H]=F}return n}},15338:C=>{"use strict";var A=function(g){switch(typeof g){case"string":return g;case"boolean":return g?"true":"false";case"number":return isFinite(g)?g:"";default:return""}};C.exports=function(g,b,w,o){return b=b||"&",w=w||"=",null===g&&(g=void 0),"object"==typeof g?Object.keys(g).map(function(n){var a=encodeURIComponent(A(n))+w;return Array.isArray(g[n])?g[n].map(function(c){return a+encodeURIComponent(A(c))}).join(b):a+encodeURIComponent(A(g[n]))}).join(b):o?encodeURIComponent(A(o))+w+encodeURIComponent(A(g)):""}},89069:(C,A,g)=>{"use strict";A.decode=A.parse=g(73881),A.encode=A.stringify=g(15338)},91388:C=>{var A=function(g){"use strict";var o,b=Object.prototype,w=b.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",d=n.toStringTag||"@@toStringTag";function _(se,de,Ee){return Object.defineProperty(se,de,{value:Ee,enumerable:!0,configurable:!0,writable:!0}),se[de]}try{_({},"")}catch(se){_=function(de,Ee,we){return de[Ee]=we}}function y(se,de,Ee,we){var Re=Object.create((de&&de.prototype instanceof z?de:z).prototype),Te=new ne(we||[]);return Re._invoke=function(se,de,Ee){var we=x;return function(Re,Te){if(we===H)throw new Error("Generator is already running");if(we===F){if("throw"===Re)throw Te;return me()}for(Ee.method=Re,Ee.arg=Te;;){var Ie=Ee.delegate;if(Ie){var xe=oe(Ie,Ee);if(xe){if(xe===Y)continue;return xe}}if("next"===Ee.method)Ee.sent=Ee._sent=Ee.arg;else if("throw"===Ee.method){if(we===x)throw we=F,Ee.arg;Ee.dispatchException(Ee.arg)}else"return"===Ee.method&&Ee.abrupt("return",Ee.arg);we=H;var Oe=R(se,de,Ee);if("normal"===Oe.type){if(we=Ee.done?F:B,Oe.arg===Y)continue;return{value:Oe.arg,done:Ee.done}}"throw"===Oe.type&&(we=F,Ee.method="throw",Ee.arg=Oe.arg)}}}(se,Ee,Te),Re}function R(se,de,Ee){try{return{type:"normal",arg:se.call(de,Ee)}}catch(we){return{type:"throw",arg:we}}}g.wrap=y;var x="suspendedStart",B="suspendedYield",H="executing",F="completed",Y={};function z(){}function G(){}function ie(){}var Z={};_(Z,a,function(){return this});var re=Object.getPrototypeOf,$=re&&re(re(ee([])));$&&$!==b&&w.call($,a)&&(Z=$);var ae=ie.prototype=z.prototype=Object.create(Z);function K(se){["next","throw","return"].forEach(function(de){_(se,de,function(Ee){return this._invoke(de,Ee)})})}function j(se,de){function Ee(Re,Te,Ie,xe){var Oe=R(se[Re],se,Te);if("throw"!==Oe.type){var ot=Oe.arg,et=ot.value;return et&&"object"==typeof et&&w.call(et,"__await")?de.resolve(et.__await).then(function(ht){Ee("next",ht,Ie,xe)},function(ht){Ee("throw",ht,Ie,xe)}):de.resolve(et).then(function(ht){ot.value=ht,Ie(ot)},function(ht){return Ee("throw",ht,Ie,xe)})}xe(Oe.arg)}var we;this._invoke=function(Re,Te){function Ie(){return new de(function(xe,Oe){Ee(Re,Te,xe,Oe)})}return we=we?we.then(Ie,Ie):Ie()}}function oe(se,de){var Ee=se.iterator[de.method];if(Ee===o){if(de.delegate=null,"throw"===de.method){if(se.iterator.return&&(de.method="return",de.arg=o,oe(se,de),"throw"===de.method))return Y;de.method="throw",de.arg=new TypeError("The iterator does not provide a 'throw' method")}return Y}var we=R(Ee,se.iterator,de.arg);if("throw"===we.type)return de.method="throw",de.arg=we.arg,de.delegate=null,Y;var fe=we.arg;return fe?fe.done?(de[se.resultName]=fe.value,de.next=se.nextLoc,"return"!==de.method&&(de.method="next",de.arg=o),de.delegate=null,Y):fe:(de.method="throw",de.arg=new TypeError("iterator result is not an object"),de.delegate=null,Y)}function W(se){var de={tryLoc:se[0]};1 in se&&(de.catchLoc=se[1]),2 in se&&(de.finallyLoc=se[2],de.afterLoc=se[3]),this.tryEntries.push(de)}function J(se){var de=se.completion||{};de.type="normal",delete de.arg,se.completion=de}function ne(se){this.tryEntries=[{tryLoc:"root"}],se.forEach(W,this),this.reset(!0)}function ee(se){if(se){var de=se[a];if(de)return de.call(se);if("function"==typeof se.next)return se;if(!isNaN(se.length)){var Ee=-1,we=function fe(){for(;++Ee<se.length;)if(w.call(se,Ee))return fe.value=se[Ee],fe.done=!1,fe;return fe.value=o,fe.done=!0,fe};return we.next=we}}return{next:me}}function me(){return{value:o,done:!0}}return G.prototype=ie,_(ae,"constructor",ie),_(ie,"constructor",G),G.displayName=_(ie,d,"GeneratorFunction"),g.isGeneratorFunction=function(se){var de="function"==typeof se&&se.constructor;return!!de&&(de===G||"GeneratorFunction"===(de.displayName||de.name))},g.mark=function(se){return Object.setPrototypeOf?Object.setPrototypeOf(se,ie):(se.__proto__=ie,_(se,d,"GeneratorFunction")),se.prototype=Object.create(ae),se},g.awrap=function(se){return{__await:se}},K(j.prototype),_(j.prototype,c,function(){return this}),g.AsyncIterator=j,g.async=function(se,de,Ee,we,fe){void 0===fe&&(fe=Promise);var Re=new j(y(se,de,Ee,we),fe);return g.isGeneratorFunction(de)?Re:Re.next().then(function(Te){return Te.done?Te.value:Re.next()})},K(ae),_(ae,d,"Generator"),_(ae,a,function(){return this}),_(ae,"toString",function(){return"[object Generator]"}),g.keys=function(se){var de=[];for(var Ee in se)de.push(Ee);return de.reverse(),function we(){for(;de.length;){var fe=de.pop();if(fe in se)return we.value=fe,we.done=!1,we}return we.done=!0,we}},g.values=ee,ne.prototype={constructor:ne,reset:function(se){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(J),!se)for(var de in this)"t"===de.charAt(0)&&w.call(this,de)&&!isNaN(+de.slice(1))&&(this[de]=o)},stop:function(){this.done=!0;var de=this.tryEntries[0].completion;if("throw"===de.type)throw de.arg;return this.rval},dispatchException:function(se){if(this.done)throw se;var de=this;function Ee(xe,Oe){return Re.type="throw",Re.arg=se,de.next=xe,Oe&&(de.method="next",de.arg=o),!!Oe}for(var we=this.tryEntries.length-1;we>=0;--we){var fe=this.tryEntries[we],Re=fe.completion;if("root"===fe.tryLoc)return Ee("end");if(fe.tryLoc<=this.prev){var Te=w.call(fe,"catchLoc"),Ie=w.call(fe,"finallyLoc");if(Te&&Ie){if(this.prev<fe.catchLoc)return Ee(fe.catchLoc,!0);if(this.prev<fe.finallyLoc)return Ee(fe.finallyLoc)}else if(Te){if(this.prev<fe.catchLoc)return Ee(fe.catchLoc,!0)}else{if(!Ie)throw new Error("try statement without catch or finally");if(this.prev<fe.finallyLoc)return Ee(fe.finallyLoc)}}}},abrupt:function(se,de){for(var Ee=this.tryEntries.length-1;Ee>=0;--Ee){var we=this.tryEntries[Ee];if(we.tryLoc<=this.prev&&w.call(we,"finallyLoc")&&this.prev<we.finallyLoc){var fe=we;break}}fe&&("break"===se||"continue"===se)&&fe.tryLoc<=de&&de<=fe.finallyLoc&&(fe=null);var Re=fe?fe.completion:{};return Re.type=se,Re.arg=de,fe?(this.method="next",this.next=fe.finallyLoc,Y):this.complete(Re)},complete:function(se,de){if("throw"===se.type)throw se.arg;return"break"===se.type||"continue"===se.type?this.next=se.arg:"return"===se.type?(this.rval=this.arg=se.arg,this.method="return",this.next="end"):"normal"===se.type&&de&&(this.next=de),Y},finish:function(se){for(var de=this.tryEntries.length-1;de>=0;--de){var Ee=this.tryEntries[de];if(Ee.finallyLoc===se)return this.complete(Ee.completion,Ee.afterLoc),J(Ee),Y}},catch:function(se){for(var de=this.tryEntries.length-1;de>=0;--de){var Ee=this.tryEntries[de];if(Ee.tryLoc===se){var we=Ee.completion;if("throw"===we.type){var fe=we.arg;J(Ee)}return fe}}throw new Error("illegal catch attempt")},delegateYield:function(se,de,Ee){return this.delegate={iterator:ee(se),resultName:de,nextLoc:Ee},"next"===this.method&&(this.arg=o),Y}},g}(C.exports);try{regeneratorRuntime=A}catch(g){"object"==typeof globalThis?globalThis.regeneratorRuntime=A:Function("r","regeneratorRuntime = r")(A)}},69109:(C,A,g)=>{"use strict";var b=g(1326),w=g(4220),o=g(29007),n=b("%TypeError%"),a=b("%WeakMap%",!0),c=b("%Map%",!0),d=w("WeakMap.prototype.get",!0),_=w("WeakMap.prototype.set",!0),y=w("WeakMap.prototype.has",!0),R=w("Map.prototype.get",!0),x=w("Map.prototype.set",!0),B=w("Map.prototype.has",!0),H=function(G,ie){for(var re,Z=G;null!==(re=Z.next);Z=re)if(re.key===ie)return Z.next=re.next,re.next=G.next,G.next=re,re};C.exports=function(){var ie,Z,re,$={assert:function(ae){if(!$.has(ae))throw new n("Side channel does not contain "+o(ae))},get:function(ae){if(a&&ae&&("object"==typeof ae||"function"==typeof ae)){if(ie)return d(ie,ae)}else if(c){if(Z)return R(Z,ae)}else if(re)return function(G,ie){var Z=H(G,ie);return Z&&Z.value}(re,ae)},has:function(ae){if(a&&ae&&("object"==typeof ae||"function"==typeof ae)){if(ie)return y(ie,ae)}else if(c){if(Z)return B(Z,ae)}else if(re)return function(G,ie){return!!H(G,ie)}(re,ae);return!1},set:function(ae,K){a&&ae&&("object"==typeof ae||"function"==typeof ae)?(ie||(ie=new a),_(ie,ae,K)):c?(Z||(Z=new c),x(Z,ae,K)):(re||(re={key:{},next:null}),function(G,ie,Z){var re=H(G,ie);re?re.value=Z:G.next={key:ie,next:G.next,value:Z}}(re,ae,K))}};return $}},12763:(C,A,g)=>{"use strict";g.r(A),g.d(A,{default:()=>qa,helpers:()=>M_});var b={};g.r(b),g.d(b,{JsonPatchError:()=>$n,_areEquals:()=>Ha,applyOperation:()=>fo,applyPatch:()=>Wo,applyReducer:()=>Um,deepClone:()=>Hm,getValueByPointer:()=>Go,validate:()=>ta,validator:()=>Ar});var w={};g.r(w),g.d(w,{compare:()=>eu,generate:()=>ql,observe:()=>Zl,unobserve:()=>VT});var o={};g.r(o),g.d(o,{cookie:()=>Rp,header:()=>wp,path:()=>YT,query:()=>fu});var n=g(23005),a=g(12988),c=g(66360),d=g(18753),_=g(71094),y=g(90343),R=g(84916),x=g(31946);function B(f,E,S){return E in f?x(f,E,{value:S,enumerable:!0,configurable:!0,writable:!0}):f[E]=S,f}function H(f,E){var S=n(f);if(a){var D=a(f);E&&(D=c(D).call(D,function(M){return d(f,M).enumerable})),S.push.apply(S,D)}return S}function F(f){for(var E=1;E<arguments.length;E++){var D,S=null!=arguments[E]?arguments[E]:{};if(E%2)_(D=H(Object(S),!0)).call(D,function(P){B(f,P,S[P])});else if(y)R(f,y(S));else{var M;_(M=H(Object(S))).call(M,function(P){x(f,P,d(S,P))})}}return f}var Y=g(53130),z=g.n(Y),G=g(38330),ie=g.n(G),Z=g(23402),re=g(93449),$=g(57272),ae=g(57124),K=g(19898),j=g(97326);function k(f,E){(null==E||E>f.length)&&(E=f.length);for(var S=0,D=new Array(E);S<E;S++)D[S]=f[S];return D}function oe(f,E){var S;if(f){if("string"==typeof f)return k(f,E);var D=K(S=Object.prototype.toString.call(f)).call(S,8,-1);if("Object"===D&&f.constructor&&(D=f.constructor.name),"Map"===D||"Set"===D)return j(f);if("Arguments"===D||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return k(f,E)}}function W(f,E){var S=void 0!==re&&$(f)||f["@@iterator"];if(!S){if(ae(f)||(S=oe(f))||E&&f&&"number"==typeof f.length){S&&(f=S);var D=0,M=function(){};return{s:M,n:function(){return D>=f.length?{done:!0}:{done:!1,value:f[D++]}},e:function(te){throw te},f:M}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var U,P=!0,L=!1;return{s:function(){S=S.call(f)},n:function(){var te=S.next();return P=te.done,te},e:function(te){L=!0,U=te},f:function(){try{!P&&null!=S.return&&S.return()}finally{if(L)throw U}}}}var J=g(3599);function ne(f){return(ne="function"==typeof re&&"symbol"==typeof J?function(S){return typeof S}:function(S){return S&&"function"==typeof re&&S.constructor===re&&S!==re.prototype?"symbol":typeof S})(f)}function de(f,E){return function(f){if(ae(f))return f}(f)||function(f,E){var S=null==f?null:void 0!==re&&$(f)||f["@@iterator"];if(null!=S){var L,U,D=[],M=!0,P=!1;try{for(S=S.call(f);!(M=(L=S.next()).done)&&(D.push(L.value),!E||D.length!==E);M=!0);}catch(q){P=!0,U=q}finally{try{!M&&null!=S.return&&S.return()}finally{if(P)throw U}}return D}}(f,E)||oe(f,E)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ee=g(26394);function we(f,E,S,D,M,P,L){try{var U=f[P](L),q=U.value}catch(te){return void S(te)}U.done?E(q):Ee.resolve(q).then(D,M)}function fe(f){return function(){var E=this,S=arguments;return new Ee(function(D,M){var P=f.apply(E,S);function L(q){we(P,D,M,L,U,"next",q)}function U(q){we(P,D,M,L,U,"throw",q)}L(void 0)})}}var Re=g(39126),Te=g.n(Re),Ie=g(11761),xe=g.n(Ie),Oe=g(20272),ot=g.n(Oe),et=g(89926),ht=g.n(et),Ht=g(23289),sn=g.n(Ht),Bt=g(64770),it=g.n(Bt),Dt=g(45635),Qe=g.n(Dt),hn=g(87048),Me=g.n(hn),Dn=g(45107),mt=g.n(Dn),dn=g(26775),Ut=g.n(dn),Qn=(g(36316),g(9325)),_e=g.n(Qn);function ve(f){return null==f}var le={isNothing:ve,isObject:function(f){return"object"==typeof f&&null!==f},toArray:function(f){return Array.isArray(f)?f:ve(f)?[]:[f]},repeat:function(f,E){var D,S="";for(D=0;D<E;D+=1)S+=f;return S},isNegativeZero:function(f){return 0===f&&Number.NEGATIVE_INFINITY===1/f},extend:function(f,E){var S,D,M,P;if(E)for(S=0,D=(P=Object.keys(E)).length;S<D;S+=1)f[M=P[S]]=E[M];return f}};function ye(f,E){var S="",D=f.reason||"(unknown reason)";return f.mark?(f.mark.name&&(S+='in "'+f.mark.name+'" '),S+="("+(f.mark.line+1)+":"+(f.mark.column+1)+")",!E&&f.mark.snippet&&(S+="\n\n"+f.mark.snippet),D+" "+S):D}function Be(f,E){Error.call(this),this.name="YAMLException",this.reason=f,this.mark=E,this.message=ye(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(Be.prototype=Object.create(Error.prototype)).constructor=Be,Be.prototype.toString=function(E){return this.name+": "+ye(this,E)};var je=Be;function zt(f,E,S,D,M){var P="",L="",U=Math.floor(M/2)-1;return D-E>U&&(E=D-U+(P=" ... ").length),S-D>U&&(S=D+U-(L=" ...").length),{str:P+f.slice(E,S).replace(/\t/g,"\u2192")+L,pos:D-E+P.length}}function Xe(f,E){return le.repeat(" ",E-f.length)+f}var gt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],xt=["scalar","sequence","mapping"],un=function(f,E){if(E=E||{},Object.keys(E).forEach(function(S){if(-1===gt.indexOf(S))throw new je('Unknown option "'+S+'" is met in definition of "'+f+'" YAML type.')}),this.options=E,this.tag=f,this.kind=E.kind||null,this.resolve=E.resolve||function(){return!0},this.construct=E.construct||function(S){return S},this.instanceOf=E.instanceOf||null,this.predicate=E.predicate||null,this.represent=E.represent||null,this.representName=E.representName||null,this.defaultStyle=E.defaultStyle||null,this.multi=E.multi||!1,this.styleAliases=function(f){var E={};return null!==f&&Object.keys(f).forEach(function(S){f[S].forEach(function(D){E[String(D)]=S})}),E}(E.styleAliases||null),-1===xt.indexOf(this.kind))throw new je('Unknown kind "'+this.kind+'" is specified for "'+f+'" YAML type.')};function Ti(f,E){var S=[];return f[E].forEach(function(D){var M=S.length;S.forEach(function(P,L){P.tag===D.tag&&P.kind===D.kind&&P.multi===D.multi&&(M=L)}),S[M]=D}),S}function Fn(f){return this.extend(f)}Fn.prototype.extend=function(E){var S=[],D=[];if(E instanceof un)D.push(E);else if(Array.isArray(E))D=D.concat(E);else{if(!E||!Array.isArray(E.implicit)&&!Array.isArray(E.explicit))throw new je("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");E.implicit&&(S=S.concat(E.implicit)),E.explicit&&(D=D.concat(E.explicit))}S.forEach(function(P){if(!(P instanceof un))throw new je("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(P.loadKind&&"scalar"!==P.loadKind)throw new je("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(P.multi)throw new je("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),D.forEach(function(P){if(!(P instanceof un))throw new je("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var M=Object.create(Fn.prototype);return M.implicit=(this.implicit||[]).concat(S),M.explicit=(this.explicit||[]).concat(D),M.compiledImplicit=Ti(M,"implicit"),M.compiledExplicit=Ti(M,"explicit"),M.compiledTypeMap=function(){var E,S,f={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function D(M){M.multi?(f.multi[M.kind].push(M),f.multi.fallback.push(M)):f[M.kind][M.tag]=f.fallback[M.tag]=M}for(E=0,S=arguments.length;E<S;E+=1)arguments[E].forEach(D);return f}(M.compiledImplicit,M.compiledExplicit),M};var io=Fn,Pr=new un("tag:yaml.org,2002:str",{kind:"scalar",construct:function(f){return null!==f?f:""}}),$g=new un("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(f){return null!==f?f:[]}}),Cd=new un("tag:yaml.org,2002:map",{kind:"mapping",construct:function(f){return null!==f?f:{}}}),pc=new io({explicit:[Pr,$g,Cd]}),wd=new un("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(f){if(null===f)return!0;var E=f.length;return 1===E&&"~"===f||4===E&&("null"===f||"Null"===f||"NULL"===f)},construct:function(){return null},predicate:function(f){return null===f},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Dd=new un("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(f){if(null===f)return!1;var E=f.length;return 4===E&&("true"===f||"True"===f||"TRUE"===f)||5===E&&("false"===f||"False"===f||"FALSE"===f)},construct:function(f){return"true"===f||"True"===f||"TRUE"===f},predicate:function(f){return"[object Boolean]"===Object.prototype.toString.call(f)},represent:{lowercase:function(f){return f?"true":"false"},uppercase:function(f){return f?"TRUE":"FALSE"},camelcase:function(f){return f?"True":"False"}},defaultStyle:"lowercase"});function Qg(f){return 48<=f&&f<=57||65<=f&&f<=70||97<=f&&f<=102}function Zg(f){return 48<=f&&f<=55}function Ad(f){return 48<=f&&f<=57}var Ws=new un("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(f){if(null===f)return!1;var M,E=f.length,S=0,D=!1;if(!E)return!1;if(("-"===(M=f[S])||"+"===M)&&(M=f[++S]),"0"===M){if(S+1===E)return!0;if("b"===(M=f[++S])){for(S++;S<E;S++)if("_"!==(M=f[S])){if("0"!==M&&"1"!==M)return!1;D=!0}return D&&"_"!==M}if("x"===M){for(S++;S<E;S++)if("_"!==(M=f[S])){if(!Qg(f.charCodeAt(S)))return!1;D=!0}return D&&"_"!==M}if("o"===M){for(S++;S<E;S++)if("_"!==(M=f[S])){if(!Zg(f.charCodeAt(S)))return!1;D=!0}return D&&"_"!==M}}if("_"===M)return!1;for(;S<E;S++)if("_"!==(M=f[S])){if(!Ad(f.charCodeAt(S)))return!1;D=!0}return!(!D||"_"===M)},construct:function(f){var D,E=f,S=1;if(-1!==E.indexOf("_")&&(E=E.replace(/_/g,"")),("-"===(D=E[0])||"+"===D)&&("-"===D&&(S=-1),D=(E=E.slice(1))[0]),"0"===E)return 0;if("0"===D){if("b"===E[1])return S*parseInt(E.slice(2),2);if("x"===E[1])return S*parseInt(E.slice(2),16);if("o"===E[1])return S*parseInt(E.slice(2),8)}return S*parseInt(E,10)},predicate:function(f){return"[object Number]"===Object.prototype.toString.call(f)&&f%1==0&&!le.isNegativeZero(f)},represent:{binary:function(f){return f>=0?"0b"+f.toString(2):"-0b"+f.toString(2).slice(1)},octal:function(f){return f>=0?"0o"+f.toString(8):"-0o"+f.toString(8).slice(1)},decimal:function(f){return f.toString(10)},hexadecimal:function(f){return f>=0?"0x"+f.toString(16).toUpperCase():"-0x"+f.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Fr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),pn=/^[-+]?[0-9]+e/,Al=new un("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(f){return!(null===f||!Fr.test(f)||"_"===f[f.length-1])},construct:function(f){var E,S;return S="-"===(E=f.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(E[0])>=0&&(E=E.slice(1)),".inf"===E?1===S?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===E?NaN:S*parseFloat(E,10)},predicate:function(f){return"[object Number]"===Object.prototype.toString.call(f)&&(f%1!=0||le.isNegativeZero(f))},represent:function(f,E){var S;if(isNaN(f))switch(E){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===f)switch(E){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===f)switch(E){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(le.isNegativeZero(f))return"-0.0";return S=f.toString(10),pn.test(S)?S.replace("e",".e"):S},defaultStyle:"lowercase"}),Od=pc.extend({implicit:[wd,Dd,Ws,Al]}),bn=Od,dt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_c=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Ol=new un("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(f){return null!==f&&(null!==dt.exec(f)||null!==_c.exec(f))},construct:function(f){var E,S,D,M,P,L,U,ge,q=0,te=null;if(null===(E=dt.exec(f))&&(E=_c.exec(f)),null===E)throw new Error("Date resolve error");if(S=+E[1],D=+E[2]-1,M=+E[3],!E[4])return new Date(Date.UTC(S,D,M));if(P=+E[4],L=+E[5],U=+E[6],E[7]){for(q=E[7].slice(0,3);q.length<3;)q+="0";q=+q}return E[9]&&(te=6e4*(60*+E[10]+ +(E[11]||0)),"-"===E[9]&&(te=-te)),ge=new Date(Date.UTC(S,D,M,P,L,U,q)),te&&ge.setTime(ge.getTime()-te),ge},instanceOf:Date,represent:function(f){return f.toISOString()}}),Ri=new un("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(f){return"<<"===f||null===f}}),vc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",nm=new un("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(f){if(null===f)return!1;var E,S,D=0,M=f.length,P=vc;for(S=0;S<M;S++)if(!((E=P.indexOf(f.charAt(S)))>64)){if(E<0)return!1;D+=6}return D%8==0},construct:function(f){var E,S,D=f.replace(/[\r\n=]/g,""),M=D.length,P=vc,L=0,U=[];for(E=0;E<M;E++)E%4==0&&E&&(U.push(L>>16&255),U.push(L>>8&255),U.push(255&L)),L=L<<6|P.indexOf(D.charAt(E));return 0==(S=M%4*6)?(U.push(L>>16&255),U.push(L>>8&255),U.push(255&L)):18===S?(U.push(L>>10&255),U.push(L>>2&255)):12===S&&U.push(L>>4&255),new Uint8Array(U)},predicate:function(f){return"[object Uint8Array]"===Object.prototype.toString.call(f)},represent:function(f){var D,M,E="",S=0,P=f.length,L=vc;for(D=0;D<P;D++)D%3==0&&D&&(E+=L[S>>18&63],E+=L[S>>12&63],E+=L[S>>6&63],E+=L[63&S]),S=(S<<8)+f[D];return 0==(M=P%3)?(E+=L[S>>18&63],E+=L[S>>12&63],E+=L[S>>6&63],E+=L[63&S]):2===M?(E+=L[S>>10&63],E+=L[S>>4&63],E+=L[S<<2&63],E+=L[64]):1===M&&(E+=L[S>>2&63],E+=L[S<<4&63],E+=L[64],E+=L[64]),E}}),im=Object.prototype.hasOwnProperty,TT=Object.prototype.toString,rm=new un("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(f){if(null===f)return!0;var S,D,M,P,L,E=[],U=f;for(S=0,D=U.length;S<D;S+=1){if(L=!1,"[object Object]"!==TT.call(M=U[S]))return!1;for(P in M)if(im.call(M,P)){if(L)return!1;L=!0}if(!L)return!1;if(-1!==E.indexOf(P))return!1;E.push(P)}return!0},construct:function(f){return null!==f?f:[]}}),ST=Object.prototype.toString,sm=new un("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(f){if(null===f)return!0;var E,S,D,M,P,L=f;for(P=new Array(L.length),E=0,S=L.length;E<S;E+=1){if("[object Object]"!==ST.call(D=L[E])||1!==(M=Object.keys(D)).length)return!1;P[E]=[M[0],D[M[0]]]}return!0},construct:function(f){if(null===f)return[];var E,S,D,M,P,L=f;for(P=new Array(L.length),E=0,S=L.length;E<S;E+=1)D=L[E],M=Object.keys(D),P[E]=[M[0],D[M[0]]];return P}}),am=Object.prototype.hasOwnProperty,An=new un("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(f){if(null===f)return!0;var E,S=f;for(E in S)if(am.call(S,E)&&null!==S[E])return!1;return!0},construct:function(f){return null!==f?f:{}}}),Md=bn.extend({implicit:[Ol,Ri],explicit:[nm,rm,sm,An]}),ls=Object.prototype.hasOwnProperty,um=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kd=/[\x85\u2028\u2029]/,xl=/[,\[\]\{\}]/,Nl=/^(?:!|!!|![a-z\-]+!)$/i,bc=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ld(f){return Object.prototype.toString.call(f)}function at(f){return 10===f||13===f}function oo(f){return 9===f||32===f}function Wi(f){return 9===f||32===f||10===f||13===f}function rr(f){return 44===f||91===f||93===f||123===f||125===f}function Pd(f){var E;return 48<=f&&f<=57?f-48:97<=(E=32|f)&&E<=102?E-97+10:-1}function IT(f){return 120===f?2:117===f?4:85===f?8:0}function ko(f){return 48<=f&&f<=57?f-48:-1}function or(f){return 48===f?"\0":97===f?"\x07":98===f?"\b":116===f||9===f?"\t":110===f?"\n":118===f?"\v":102===f?"\f":114===f?"\r":101===f?"\x1b":32===f?" ":34===f?'"':47===f?"/":92===f?"\\":78===f?"\x85":95===f?"\xa0":76===f?"\u2028":80===f?"\u2029":""}function DT(f){return f<=65535?String.fromCharCode(f):String.fromCharCode(55296+(f-65536>>10),56320+(f-65536&1023))}for(var cm=new Array(256),Li=new Array(256),js=0;js<256;js++)cm[js]=or(js)?1:0,Li[js]=or(js);function hm(f,E){this.input=f,this.filename=E.filename||null,this.schema=E.schema||Md,this.onWarning=E.onWarning||null,this.legacy=E.legacy||!1,this.json=E.json||!1,this.listener=E.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=f.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Fd(f,E){var S={name:f.filename,buffer:f.input.slice(0,-1),position:f.position,line:f.line,column:f.position-f.lineStart};return S.snippet=function(f,E){if(E=Object.create(E||null),!f.buffer)return null;E.maxLength||(E.maxLength=79),"number"!=typeof E.indent&&(E.indent=1),"number"!=typeof E.linesBefore&&(E.linesBefore=3),"number"!=typeof E.linesAfter&&(E.linesAfter=2);for(var P,S=/\r?\n|\r|\0/g,D=[0],M=[],L=-1;P=S.exec(f.buffer);)M.push(P.index),D.push(P.index+P[0].length),f.position<=P.index&&L<0&&(L=D.length-2);L<0&&(L=D.length-1);var q,te,U="",he=Math.min(f.line+E.linesAfter,M.length).toString().length,pe=E.maxLength-(E.indent+he+3);for(q=1;q<=E.linesBefore&&!(L-q<0);q++)te=zt(f.buffer,D[L-q],M[L-q],f.position-(D[L]-D[L-q]),pe),U=le.repeat(" ",E.indent)+Xe((f.line-q+1).toString(),he)+" | "+te.str+"\n"+U;for(te=zt(f.buffer,D[L],M[L],f.position,pe),U+=le.repeat(" ",E.indent)+Xe((f.line+1).toString(),he)+" | "+te.str+"\n",U+=le.repeat("-",E.indent+he+3+te.pos)+"^\n",q=1;q<=E.linesAfter&&!(L+q>=M.length);q++)te=zt(f.buffer,D[L+q],M[L+q],f.position-(D[L]-D[L+q]),pe),U+=le.repeat(" ",E.indent)+Xe((f.line+q+1).toString(),he)+" | "+te.str+"\n";return U.replace(/\n$/,"")}(S),new je(E,S)}function ft(f,E){throw Fd(f,E)}function tn(f,E){f.onWarning&&f.onWarning.call(null,Fd(f,E))}var dm={YAML:function(E,S,D){var M,P,L;null!==E.version&&ft(E,"duplication of %YAML directive"),1!==D.length&&ft(E,"YAML directive accepts exactly one argument"),null===(M=/^([0-9]+)\.([0-9]+)$/.exec(D[0]))&&ft(E,"ill-formed argument of the YAML directive"),P=parseInt(M[1],10),L=parseInt(M[2],10),1!==P&&ft(E,"unacceptable YAML version of the document"),E.version=D[0],E.checkLineBreaks=L<2,1!==L&&2!==L&&tn(E,"unsupported YAML version of the document")},TAG:function(E,S,D){var M,P;2!==D.length&&ft(E,"TAG directive accepts exactly two arguments"),P=D[1],Nl.test(M=D[0])||ft(E,"ill-formed tag handle (first argument) of the TAG directive"),ls.call(E.tagMap,M)&&ft(E,'there is a previously declared suffix for "'+M+'" tag handle'),bc.test(P)||ft(E,"ill-formed tag prefix (second argument) of the TAG directive");try{P=decodeURIComponent(P)}catch(L){ft(E,"tag prefix is malformed: "+P)}E.tagMap[M]=P}};function us(f,E,S,D){var M,P,L,U;if(E<S){if(U=f.input.slice(E,S),D)for(M=0,P=U.length;M<P;M+=1)9===(L=U.charCodeAt(M))||32<=L&&L<=1114111||ft(f,"expected valid JSON character");else um.test(U)&&ft(f,"the stream contains non-printable characters");f.result+=U}}function cs(f,E,S,D){var M,P,L,U;for(le.isObject(S)||ft(f,"cannot merge mappings; the provided source object is unacceptable"),L=0,U=(M=Object.keys(S)).length;L<U;L+=1)ls.call(E,P=M[L])||(E[P]=S[P],D[P]=!0)}function nn(f,E,S,D,M,P,L,U,q){var te,he;if(Array.isArray(M))for(te=0,he=(M=Array.prototype.slice.call(M)).length;te<he;te+=1)Array.isArray(M[te])&&ft(f,"nested arrays are not supported inside keys"),"object"==typeof M&&"[object Object]"===Ld(M[te])&&(M[te]="[object Object]");if("object"==typeof M&&"[object Object]"===Ld(M)&&(M="[object Object]"),M=String(M),null===E&&(E={}),"tag:yaml.org,2002:merge"===D)if(Array.isArray(P))for(te=0,he=P.length;te<he;te+=1)cs(f,E,P[te],S);else cs(f,E,P,S);else!f.json&&!ls.call(S,M)&&ls.call(E,M)&&(f.line=L||f.line,f.lineStart=U||f.lineStart,f.position=q||f.position,ft(f,"duplicated mapping key")),"__proto__"===M?Object.defineProperty(E,M,{configurable:!0,enumerable:!0,writable:!0,value:P}):E[M]=P,delete S[M];return E}function zs(f){var E;10===(E=f.input.charCodeAt(f.position))?f.position++:13===E?(f.position++,10===f.input.charCodeAt(f.position)&&f.position++):ft(f,"a line break is expected"),f.line+=1,f.lineStart=f.position,f.firstTabInLine=-1}function Kn(f,E,S){for(var D=0,M=f.input.charCodeAt(f.position);0!==M;){for(;oo(M);)9===M&&-1===f.firstTabInLine&&(f.firstTabInLine=f.position),M=f.input.charCodeAt(++f.position);if(E&&35===M)do{M=f.input.charCodeAt(++f.position)}while(10!==M&&13!==M&&0!==M);if(!at(M))break;for(zs(f),M=f.input.charCodeAt(f.position),D++,f.lineIndent=0;32===M;)f.lineIndent++,M=f.input.charCodeAt(++f.position)}return-1!==S&&0!==D&&f.lineIndent<S&&tn(f,"deficient indentation"),D}function Xs(f){var S,E=f.position;return!(45!==(S=f.input.charCodeAt(E))&&46!==S||S!==f.input.charCodeAt(E+1)||S!==f.input.charCodeAt(E+2)||(E+=3,S=f.input.charCodeAt(E),0!==S&&!Wi(S)))}function kl(f,E){1===E?f.result+=" ":E>1&&(f.result+=le.repeat("\n",E-1))}function Ec(f,E){var S,q,D=f.tag,M=f.anchor,P=[],U=!1;if(-1!==f.firstTabInLine)return!1;for(null!==f.anchor&&(f.anchorMap[f.anchor]=P),q=f.input.charCodeAt(f.position);0!==q&&(-1!==f.firstTabInLine&&(f.position=f.firstTabInLine,ft(f,"tab characters must not be used in indentation")),45===q&&Wi(f.input.charCodeAt(f.position+1)));)if(U=!0,f.position++,Kn(f,!0,-1)&&f.lineIndent<=E)P.push(null),q=f.input.charCodeAt(f.position);else if(S=f.line,hs(f,E,3,!1,!0),P.push(f.result),Kn(f,!0,-1),q=f.input.charCodeAt(f.position),(f.line===S||f.lineIndent>E)&&0!==q)ft(f,"bad indentation of a sequence entry");else if(f.lineIndent<E)break;return!!U&&(f.tag=D,f.anchor=M,f.kind="sequence",f.result=P,!0)}function Vd(f){var E,M,P,L,S=!1,D=!1;if(33!==(L=f.input.charCodeAt(f.position)))return!1;if(null!==f.tag&&ft(f,"duplication of a tag property"),60===(L=f.input.charCodeAt(++f.position))?(S=!0,L=f.input.charCodeAt(++f.position)):33===L?(D=!0,M="!!",L=f.input.charCodeAt(++f.position)):M="!",E=f.position,S){do{L=f.input.charCodeAt(++f.position)}while(0!==L&&62!==L);f.position<f.length?(P=f.input.slice(E,f.position),L=f.input.charCodeAt(++f.position)):ft(f,"unexpected end of the stream within a verbatim tag")}else{for(;0!==L&&!Wi(L);)33===L&&(D?ft(f,"tag suffix cannot contain exclamation marks"):(M=f.input.slice(E-1,f.position+1),Nl.test(M)||ft(f,"named tag handle cannot contain such characters"),D=!0,E=f.position+1)),L=f.input.charCodeAt(++f.position);P=f.input.slice(E,f.position),xl.test(P)&&ft(f,"tag suffix cannot contain flow indicator characters")}P&&!bc.test(P)&&ft(f,"tag name cannot contain such characters: "+P);try{P=decodeURIComponent(P)}catch(U){ft(f,"tag name is malformed: "+P)}return S?f.tag=P:ls.call(f.tagMap,M)?f.tag=f.tagMap[M]+P:"!"===M?f.tag="!"+P:"!!"===M?f.tag="tag:yaml.org,2002:"+P:ft(f,'undeclared tag handle "'+M+'"'),!0}function Bn(f){var E,S;if(38!==(S=f.input.charCodeAt(f.position)))return!1;for(null!==f.anchor&&ft(f,"duplication of an anchor property"),S=f.input.charCodeAt(++f.position),E=f.position;0!==S&&!Wi(S)&&!rr(S);)S=f.input.charCodeAt(++f.position);return f.position===E&&ft(f,"name of an anchor node must contain at least one character"),f.anchor=f.input.slice(E,f.position),!0}function hs(f,E,S,D,M){var P,L,U,pe,ge,be,Ae,Fe,He,q=1,te=!1,he=!1;if(null!==f.listener&&f.listener("open",f),f.tag=null,f.anchor=null,f.kind=null,f.result=null,P=L=U=4===S||3===S,D&&Kn(f,!0,-1)&&(te=!0,f.lineIndent>E?q=1:f.lineIndent===E?q=0:f.lineIndent<E&&(q=-1)),1===q)for(;Vd(f)||Bn(f);)Kn(f,!0,-1)?(te=!0,U=P,f.lineIndent>E?q=1:f.lineIndent===E?q=0:f.lineIndent<E&&(q=-1)):U=!1;if(U&&(U=te||M),(1===q||4===S)&&(Fe=1===S||2===S?E:E+1,He=f.position-f.lineStart,1===q?U&&(Ec(f,He)||function(f,E,S){var D,M,P,L,U,q,Le,te=f.tag,he=f.anchor,pe={},ge=Object.create(null),be=null,Ae=null,Fe=null,He=!1,qe=!1;if(-1!==f.firstTabInLine)return!1;for(null!==f.anchor&&(f.anchorMap[f.anchor]=pe),Le=f.input.charCodeAt(f.position);0!==Le;){if(!He&&-1!==f.firstTabInLine&&(f.position=f.firstTabInLine,ft(f,"tab characters must not be used in indentation")),D=f.input.charCodeAt(f.position+1),P=f.line,63!==Le&&58!==Le||!Wi(D)){if(L=f.line,U=f.lineStart,q=f.position,!hs(f,S,2,!1,!0))break;if(f.line===P){for(Le=f.input.charCodeAt(f.position);oo(Le);)Le=f.input.charCodeAt(++f.position);if(58===Le)Wi(Le=f.input.charCodeAt(++f.position))||ft(f,"a whitespace character is expected after the key-value separator within a block mapping"),He&&(nn(f,pe,ge,be,Ae,null,L,U,q),be=Ae=Fe=null),qe=!0,He=!1,M=!1,be=f.tag,Ae=f.result;else{if(!qe)return f.tag=te,f.anchor=he,!0;ft(f,"can not read an implicit mapping pair; a colon is missed")}}else{if(!qe)return f.tag=te,f.anchor=he,!0;ft(f,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===Le?(He&&(nn(f,pe,ge,be,Ae,null,L,U,q),be=Ae=Fe=null),qe=!0,He=!0,M=!0):He?(He=!1,M=!0):ft(f,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),f.position+=1,Le=D;if((f.line===P||f.lineIndent>E)&&(He&&(L=f.line,U=f.lineStart,q=f.position),hs(f,E,4,!0,M)&&(He?Ae=f.result:Fe=f.result),He||(nn(f,pe,ge,be,Ae,Fe,L,U,q),be=Ae=Fe=null),Kn(f,!0,-1),Le=f.input.charCodeAt(f.position)),(f.line===P||f.lineIndent>E)&&0!==Le)ft(f,"bad indentation of a mapping entry");else if(f.lineIndent<E)break}return He&&nn(f,pe,ge,be,Ae,null,L,U,q),qe&&(f.tag=te,f.anchor=he,f.kind="mapping",f.result=pe),qe}(f,He,Fe))||function(f,E){var D,M,P,U,he,pe,ge,be,Fe,He,qe,Le,S=!0,L=f.tag,q=f.anchor,Ae=Object.create(null);if(91===(Le=f.input.charCodeAt(f.position)))he=93,be=!1,U=[];else{if(123!==Le)return!1;he=125,be=!0,U={}}for(null!==f.anchor&&(f.anchorMap[f.anchor]=U),Le=f.input.charCodeAt(++f.position);0!==Le;){if(Kn(f,!0,E),(Le=f.input.charCodeAt(f.position))===he)return f.position++,f.tag=L,f.anchor=q,f.kind=be?"mapping":"sequence",f.result=U,!0;S?44===Le&&ft(f,"expected the node content, but found ','"):ft(f,"missed comma between flow collection entries"),qe=null,pe=ge=!1,63===Le&&Wi(f.input.charCodeAt(f.position+1))&&(pe=ge=!0,f.position++,Kn(f,!0,E)),D=f.line,M=f.lineStart,P=f.position,hs(f,E,1,!1,!0),He=f.tag,Fe=f.result,Kn(f,!0,E),Le=f.input.charCodeAt(f.position),(ge||f.line===D)&&58===Le&&(pe=!0,Le=f.input.charCodeAt(++f.position),Kn(f,!0,E),hs(f,E,1,!1,!0),qe=f.result),be?nn(f,U,Ae,He,Fe,qe,D,M,P):U.push(pe?nn(f,null,Ae,He,Fe,qe,D,M,P):Fe),Kn(f,!0,E),44===(Le=f.input.charCodeAt(f.position))?(S=!0,Le=f.input.charCodeAt(++f.position)):S=!1}ft(f,"unexpected end of the stream within a flow collection")}(f,Fe)?he=!0:(L&&function(f,E){var S,D,he,pe,M=1,P=!1,L=!1,U=E,q=0,te=!1;if(124===(pe=f.input.charCodeAt(f.position)))D=!1;else{if(62!==pe)return!1;D=!0}for(f.kind="scalar",f.result="";0!==pe;)if(43===(pe=f.input.charCodeAt(++f.position))||45===pe)1===M?M=43===pe?3:2:ft(f,"repeat of a chomping mode identifier");else{if(!((he=ko(pe))>=0))break;0===he?ft(f,"bad explicit indentation width of a block scalar; it cannot be less than one"):L?ft(f,"repeat of an indentation width identifier"):(U=E+he-1,L=!0)}if(oo(pe)){do{pe=f.input.charCodeAt(++f.position)}while(oo(pe));if(35===pe)do{pe=f.input.charCodeAt(++f.position)}while(!at(pe)&&0!==pe)}for(;0!==pe;){for(zs(f),f.lineIndent=0,pe=f.input.charCodeAt(f.position);(!L||f.lineIndent<U)&&32===pe;)f.lineIndent++,pe=f.input.charCodeAt(++f.position);if(!L&&f.lineIndent>U&&(U=f.lineIndent),at(pe))q++;else{if(f.lineIndent<U){3===M?f.result+=le.repeat("\n",P?1+q:q):1===M&&P&&(f.result+="\n");break}for(D?oo(pe)?(te=!0,f.result+=le.repeat("\n",P?1+q:q)):te?(te=!1,f.result+=le.repeat("\n",q+1)):0===q?P&&(f.result+=" "):f.result+=le.repeat("\n",q):f.result+=le.repeat("\n",P?1+q:q),P=!0,L=!0,q=0,S=f.position;!at(pe)&&0!==pe;)pe=f.input.charCodeAt(++f.position);us(f,S,f.position,!1)}}return!0}(f,Fe)||function(f,E){var S,D,M;if(39!==(S=f.input.charCodeAt(f.position)))return!1;for(f.kind="scalar",f.result="",f.position++,D=M=f.position;0!==(S=f.input.charCodeAt(f.position));)if(39===S){if(us(f,D,f.position,!0),39!==(S=f.input.charCodeAt(++f.position)))return!0;D=f.position,f.position++,M=f.position}else at(S)?(us(f,D,M,!0),kl(f,Kn(f,!1,E)),D=M=f.position):f.position===f.lineStart&&Xs(f)?ft(f,"unexpected end of the document within a single quoted scalar"):(f.position++,M=f.position);ft(f,"unexpected end of the stream within a single quoted scalar")}(f,Fe)||function(f,E){var S,D,M,P,L,U;if(34!==(U=f.input.charCodeAt(f.position)))return!1;for(f.kind="scalar",f.result="",f.position++,S=D=f.position;0!==(U=f.input.charCodeAt(f.position));){if(34===U)return us(f,S,f.position,!0),f.position++,!0;if(92===U){if(us(f,S,f.position,!0),at(U=f.input.charCodeAt(++f.position)))Kn(f,!1,E);else if(U<256&&cm[U])f.result+=Li[U],f.position++;else if((L=IT(U))>0){for(M=L,P=0;M>0;M--)(L=Pd(U=f.input.charCodeAt(++f.position)))>=0?P=(P<<4)+L:ft(f,"expected hexadecimal character");f.result+=DT(P),f.position++}else ft(f,"unknown escape sequence");S=D=f.position}else at(U)?(us(f,S,D,!0),kl(f,Kn(f,!1,E)),S=D=f.position):f.position===f.lineStart&&Xs(f)?ft(f,"unexpected end of the document within a double quoted scalar"):(f.position++,D=f.position)}ft(f,"unexpected end of the stream within a double quoted scalar")}(f,Fe)?he=!0:function(f){var E,S,D;if(42!==(D=f.input.charCodeAt(f.position)))return!1;for(D=f.input.charCodeAt(++f.position),E=f.position;0!==D&&!Wi(D)&&!rr(D);)D=f.input.charCodeAt(++f.position);return f.position===E&&ft(f,"name of an alias node must contain at least one character"),S=f.input.slice(E,f.position),ls.call(f.anchorMap,S)||ft(f,'unidentified alias "'+S+'"'),f.result=f.anchorMap[S],Kn(f,!0,-1),!0}(f)?(he=!0,(null!==f.tag||null!==f.anchor)&&ft(f,"alias node should not have any properties")):function(f,E,S){var M,P,L,U,q,te,he,be,pe=f.kind,ge=f.result;if(Wi(be=f.input.charCodeAt(f.position))||rr(be)||35===be||38===be||42===be||33===be||124===be||62===be||39===be||34===be||37===be||64===be||96===be||(63===be||45===be)&&(Wi(M=f.input.charCodeAt(f.position+1))||S&&rr(M)))return!1;for(f.kind="scalar",f.result="",P=L=f.position,U=!1;0!==be;){if(58===be){if(Wi(M=f.input.charCodeAt(f.position+1))||S&&rr(M))break}else if(35===be){if(Wi(f.input.charCodeAt(f.position-1)))break}else{if(f.position===f.lineStart&&Xs(f)||S&&rr(be))break;if(at(be)){if(q=f.line,te=f.lineStart,he=f.lineIndent,Kn(f,!1,-1),f.lineIndent>=E){U=!0,be=f.input.charCodeAt(f.position);continue}f.position=L,f.line=q,f.lineStart=te,f.lineIndent=he;break}}U&&(us(f,P,L,!1),kl(f,f.line-q),P=L=f.position,U=!1),oo(be)||(L=f.position+1),be=f.input.charCodeAt(++f.position)}return us(f,P,L,!1),!!f.result||(f.kind=pe,f.result=ge,!1)}(f,Fe,1===S)&&(he=!0,null===f.tag&&(f.tag="?")),null!==f.anchor&&(f.anchorMap[f.anchor]=f.result)):0===q&&(he=U&&Ec(f,He))),null===f.tag)null!==f.anchor&&(f.anchorMap[f.anchor]=f.result);else if("?"===f.tag){for(null!==f.result&&"scalar"!==f.kind&&ft(f,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+f.kind+'"'),pe=0,ge=f.implicitTypes.length;pe<ge;pe+=1)if((Ae=f.implicitTypes[pe]).resolve(f.result)){f.result=Ae.construct(f.result),f.tag=Ae.tag,null!==f.anchor&&(f.anchorMap[f.anchor]=f.result);break}}else if("!"!==f.tag){if(ls.call(f.typeMap[f.kind||"fallback"],f.tag))Ae=f.typeMap[f.kind||"fallback"][f.tag];else for(Ae=null,pe=0,ge=(be=f.typeMap.multi[f.kind||"fallback"]).length;pe<ge;pe+=1)if(f.tag.slice(0,be[pe].tag.length)===be[pe].tag){Ae=be[pe];break}Ae||ft(f,"unknown tag !<"+f.tag+">"),null!==f.result&&Ae.kind!==f.kind&&ft(f,"unacceptable node kind for !<"+f.tag+'> tag; it should be "'+Ae.kind+'", not "'+f.kind+'"'),Ae.resolve(f.result,f.tag)?(f.result=Ae.construct(f.result,f.tag),null!==f.anchor&&(f.anchorMap[f.anchor]=f.result)):ft(f,"cannot resolve a node with !<"+f.tag+"> explicit tag")}return null!==f.listener&&f.listener("close",f),null!==f.tag||null!==f.anchor||he}function _t(f){var S,D,M,L,E=f.position,P=!1;for(f.version=null,f.checkLineBreaks=f.legacy,f.tagMap=Object.create(null),f.anchorMap=Object.create(null);0!==(L=f.input.charCodeAt(f.position))&&(Kn(f,!0,-1),L=f.input.charCodeAt(f.position),!(f.lineIndent>0||37!==L));){for(P=!0,L=f.input.charCodeAt(++f.position),S=f.position;0!==L&&!Wi(L);)L=f.input.charCodeAt(++f.position);for(M=[],(D=f.input.slice(S,f.position)).length<1&&ft(f,"directive name must not be less than one character in length");0!==L;){for(;oo(L);)L=f.input.charCodeAt(++f.position);if(35===L){do{L=f.input.charCodeAt(++f.position)}while(0!==L&&!at(L));break}if(at(L))break;for(S=f.position;0!==L&&!Wi(L);)L=f.input.charCodeAt(++f.position);M.push(f.input.slice(S,f.position))}0!==L&&zs(f),ls.call(dm,D)?dm[D](f,D,M):tn(f,'unknown document directive "'+D+'"')}Kn(f,!0,-1),0===f.lineIndent&&45===f.input.charCodeAt(f.position)&&45===f.input.charCodeAt(f.position+1)&&45===f.input.charCodeAt(f.position+2)?(f.position+=3,Kn(f,!0,-1)):P&&ft(f,"directives end mark is expected"),hs(f,f.lineIndent-1,4,!1,!0),Kn(f,!0,-1),f.checkLineBreaks&&kd.test(f.input.slice(E,f.position))&&tn(f,"non-ASCII line breaks are interpreted as content"),f.documents.push(f.result),f.position===f.lineStart&&Xs(f)?46===f.input.charCodeAt(f.position)&&(f.position+=3,Kn(f,!0,-1)):f.position<f.length-1&&ft(f,"end of the stream or a document separator is expected")}function Pi(f,E){E=E||{},0!==(f=String(f)).length&&(10!==f.charCodeAt(f.length-1)&&13!==f.charCodeAt(f.length-1)&&(f+="\n"),65279===f.charCodeAt(0)&&(f=f.slice(1)));var S=new hm(f,E),D=f.indexOf("\0");for(-1!==D&&(S.position=D,ft(S,"null byte is not allowed in input")),S.input+="\0";32===S.input.charCodeAt(S.position);)S.lineIndent+=1,S.position+=1;for(;S.position<S.length-1;)_t(S);return S.documents}var sr={loadAll:function(f,E,S){null!==E&&"object"==typeof E&&void 0===S&&(S=E,E=null);var D=Pi(f,S);if("function"!=typeof E)return D;for(var M=0,P=D.length;M<P;M+=1)E(D[M])},load:function(f,E){var S=Pi(f,E);if(0!==S.length){if(1===S.length)return S[0];throw new je("expected a single document in the stream, but found more")}}},Ye=Object.prototype.toString,Gt=Object.prototype.hasOwnProperty,ln={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},_m=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Vr=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Sc(f){var E,S,D;if(E=f.toString(16).toUpperCase(),f<=255)S="x",D=2;else if(f<=65535)S="u",D=4;else{if(!(f<=4294967295))throw new je("code point within a string may not be greater than 0xFFFFFFFF");S="U",D=8}return"\\"+S+le.repeat("0",D-E.length)+E}function Dr(f){this.schema=f.schema||Md,this.indent=Math.max(1,f.indent||2),this.noArrayIndent=f.noArrayIndent||!1,this.skipInvalid=f.skipInvalid||!1,this.flowLevel=le.isNothing(f.flowLevel)?-1:f.flowLevel,this.styleMap=function(f,E){var S,D,M,P,L,U,q;if(null===E)return{};for(S={},M=0,P=(D=Object.keys(E)).length;M<P;M+=1)L=D[M],U=String(E[L]),"!!"===L.slice(0,2)&&(L="tag:yaml.org,2002:"+L.slice(2)),(q=f.compiledTypeMap.fallback[L])&&Gt.call(q.styleAliases,U)&&(U=q.styleAliases[U]),S[L]=U;return S}(this.schema,f.styles||null),this.sortKeys=f.sortKeys||!1,this.lineWidth=f.lineWidth||80,this.noRefs=f.noRefs||!1,this.noCompatMode=f.noCompatMode||!1,this.condenseFlow=f.condenseFlow||!1,this.quotingType='"'===f.quotingType?2:1,this.forceQuotes=f.forceQuotes||!1,this.replacer="function"==typeof f.replacer?f.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Ud(f,E){for(var L,S=le.repeat(" ",E),D=0,M=-1,P="",U=f.length;D<U;)-1===(M=f.indexOf("\n",D))?(L=f.slice(D),D=U):(L=f.slice(D,M+1),D=M+1),L.length&&"\n"!==L&&(P+=S),P+=L;return P}function Gd(f,E){return"\n"+le.repeat(" ",f.indent*E)}function Bl(f){return 32===f||9===f}function Vl(f){return 32<=f&&f<=126||161<=f&&f<=55295&&8232!==f&&8233!==f||57344<=f&&f<=65533&&65279!==f||65536<=f&&f<=1114111}function ym(f){return Vl(f)&&65279!==f&&13!==f&&10!==f}function bm(f,E,S){var D=ym(f),M=D&&!Bl(f);return(S?D:D&&44!==f&&91!==f&&93!==f&&123!==f&&125!==f)&&35!==f&&!(58===E&&!M)||ym(E)&&!Bl(E)&&35===f||58===E&&M}function Hl(f,E){var D,S=f.charCodeAt(E);return S>=55296&&S<=56319&&E+1<f.length&&(D=f.charCodeAt(E+1))>=56320&&D<=57343?1024*(S-55296)+D-56320+65536:S}function Em(f){return/^\n* /.test(f)}function xT(f,E,S,D,M){f.dump=function(){if(0===E.length)return 2===f.quotingType?'""':"''";if(!f.noCompatMode&&(-1!==_m.indexOf(E)||Vr.test(E)))return 2===f.quotingType?'"'+E+'"':"'"+E+"'";var P=f.indent*Math.max(1,S),L=-1===f.lineWidth?-1:Math.max(Math.min(f.lineWidth,40),f.lineWidth-P);switch(function(f,E,S,D,M,P,L,U){var q,te=0,he=null,pe=!1,ge=!1,be=-1!==D,Ae=-1,Fe=function(f){return Vl(f)&&65279!==f&&!Bl(f)&&45!==f&&63!==f&&58!==f&&44!==f&&91!==f&&93!==f&&123!==f&&125!==f&&35!==f&&38!==f&&42!==f&&33!==f&&124!==f&&61!==f&&62!==f&&39!==f&&34!==f&&37!==f&&64!==f&&96!==f}(Hl(f,0))&&function(f){return!Bl(f)&&58!==f}(Hl(f,f.length-1));if(E||L)for(q=0;q<f.length;te>=65536?q+=2:q++){if(!Vl(te=Hl(f,q)))return 5;Fe=Fe&&bm(te,he,U),he=te}else{for(q=0;q<f.length;te>=65536?q+=2:q++){if(10===(te=Hl(f,q)))pe=!0,be&&(ge=ge||q-Ae-1>D&&" "!==f[Ae+1],Ae=q);else if(!Vl(te))return 5;Fe=Fe&&bm(te,he,U),he=te}ge=ge||be&&q-Ae-1>D&&" "!==f[Ae+1]}return pe||ge?S>9&&Em(f)?5:L?2===P?5:2:ge?4:3:!Fe||L||M(f)?2===P?5:2:1}(E,D||f.flowLevel>-1&&S>=f.flowLevel,f.indent,L,function(te){return function(f,E){var S,D;for(S=0,D=f.implicitTypes.length;S<D;S+=1)if(f.implicitTypes[S].resolve(E))return!0;return!1}(f,te)},f.quotingType,f.forceQuotes&&!D,M)){case 1:return E;case 2:return"'"+E.replace(/'/g,"''")+"'";case 3:return"|"+wc(E,f.indent)+Ul(Ud(E,P));case 4:return">"+wc(E,f.indent)+Ul(Ud(function(f,E){for(var P,L,S=/(\n+)([^\n]*)/g,D=(te=void 0,te=f.indexOf("\n"),S.lastIndex=te=-1!==te?te:f.length,wm(f.slice(0,te),E)),M="\n"===f[0]||" "===f[0];L=S.exec(f);){var q=L[2];P=" "===q[0],D+=L[1]+(M||P||""===q?"":"\n")+wm(q,E),M=P}var te;return D}(E,L),P));case 5:return'"'+function(f){for(var D,E="",S=0,M=0;M<f.length;S>=65536?M+=2:M++)S=Hl(f,M),!(D=ln[S])&&Vl(S)?(E+=f[M],S>=65536&&(E+=f[M+1])):E+=D||Sc(S);return E}(E)+'"';default:throw new je("impossible error: invalid scalar style")}}()}function wc(f,E){var S=Em(f)?String(E):"",D="\n"===f[f.length-1];return S+(!D||"\n"!==f[f.length-2]&&"\n"!==f?D?"":"-":"+")+"\n"}function Ul(f){return"\n"===f[f.length-1]?f.slice(0,-1):f}function wm(f,E){if(""===f||" "===f[0])return f;for(var D,P,S=/ [^ ]/g,M=0,L=0,U=0,q="";D=S.exec(f);)(U=D.index)-M>E&&(q+="\n"+f.slice(M,P=L>M?L:U),M=P+1),L=U;return q+="\n",(q+=f.length-M>E&&L>M?f.slice(M,L)+"\n"+f.slice(L+1):f.slice(M)).slice(1)}function zd(f,E,S){var D,M,P,L,U,q;for(P=0,L=(M=S?f.explicitTypes:f.implicitTypes).length;P<L;P+=1)if(((U=M[P]).instanceOf||U.predicate)&&(!U.instanceOf||"object"==typeof E&&E instanceof U.instanceOf)&&(!U.predicate||U.predicate(E))){if(f.tag=S?U.multi&&U.representName?U.representName(E):U.tag:"?",U.represent){if(q=f.styleMap[U.tag]||U.defaultStyle,"[object Function]"===Ye.call(U.represent))D=U.represent(E,q);else{if(!Gt.call(U.represent,q))throw new je("!<"+U.tag+'> tag resolver accepts not "'+q+'" style');D=U.represent[q](E,q)}f.dump=D}return!0}return!1}function ao(f,E,S,D,M,P,L){f.tag=null,f.dump=S,zd(f,S,!1)||zd(f,S,!0);var te,U=Ye.call(f.dump),q=D;D&&(D=f.flowLevel<0||f.flowLevel>E);var pe,ge,he="[object Object]"===U||"[object Array]"===U;if(he&&(ge=-1!==(pe=f.duplicates.indexOf(S))),(null!==f.tag&&"?"!==f.tag||ge||2!==f.indent&&E>0)&&(M=!1),ge&&f.usedDuplicates[pe])f.dump="*ref_"+pe;else{if(he&&ge&&!f.usedDuplicates[pe]&&(f.usedDuplicates[pe]=!0),"[object Object]"===U)D&&0!==Object.keys(f.dump).length?(function(f,E,S,D){var U,q,te,he,pe,ge,M="",P=f.tag,L=Object.keys(S);if(!0===f.sortKeys)L.sort();else if("function"==typeof f.sortKeys)L.sort(f.sortKeys);else if(f.sortKeys)throw new je("sortKeys must be a boolean or a function");for(U=0,q=L.length;U<q;U+=1)ge="",(!D||""!==M)&&(ge+=Gd(f,E)),he=S[te=L[U]],f.replacer&&(he=f.replacer.call(S,te,he)),ao(f,E+1,te,!0,!0,!0)&&((pe=null!==f.tag&&"?"!==f.tag||f.dump&&f.dump.length>1024)&&(f.dump&&10===f.dump.charCodeAt(0)?ge+="?":ge+="? "),ge+=f.dump,pe&&(ge+=Gd(f,E)),ao(f,E+1,he,!0,pe)&&(f.dump&&10===f.dump.charCodeAt(0)?ge+=":":ge+=": ",M+=ge+=f.dump));f.tag=P,f.dump=M||"{}"}(f,E,f.dump,M),ge&&(f.dump="&ref_"+pe+f.dump)):(function(f,E,S){var L,U,q,te,he,D="",M=f.tag,P=Object.keys(S);for(L=0,U=P.length;L<U;L+=1)he="",""!==D&&(he+=", "),f.condenseFlow&&(he+='"'),te=S[q=P[L]],f.replacer&&(te=f.replacer.call(S,q,te)),ao(f,E,q,!1,!1)&&(f.dump.length>1024&&(he+="? "),he+=f.dump+(f.condenseFlow?'"':"")+":"+(f.condenseFlow?"":" "),ao(f,E,te,!1,!1)&&(D+=he+=f.dump));f.tag=M,f.dump="{"+D+"}"}(f,E,f.dump),ge&&(f.dump="&ref_"+pe+" "+f.dump));else if("[object Array]"===U)D&&0!==f.dump.length?(function(f,E,S,D){var L,U,q,M="",P=f.tag;for(L=0,U=S.length;L<U;L+=1)q=S[L],f.replacer&&(q=f.replacer.call(S,String(L),q)),(ao(f,E+1,q,!0,!0,!1,!0)||void 0===q&&ao(f,E+1,null,!0,!0,!1,!0))&&((!D||""!==M)&&(M+=Gd(f,E)),f.dump&&10===f.dump.charCodeAt(0)?M+="-":M+="- ",M+=f.dump);f.tag=P,f.dump=M||"[]"}(f,f.noArrayIndent&&!L&&E>0?E-1:E,f.dump,M),ge&&(f.dump="&ref_"+pe+f.dump)):(function(f,E,S){var P,L,U,D="",M=f.tag;for(P=0,L=S.length;P<L;P+=1)U=S[P],f.replacer&&(U=f.replacer.call(S,String(P),U)),(ao(f,E,U,!1,!1)||void 0===U&&ao(f,E,null,!1,!1))&&(""!==D&&(D+=","+(f.condenseFlow?"":" ")),D+=f.dump);f.tag=M,f.dump="["+D+"]"}(f,E,f.dump),ge&&(f.dump="&ref_"+pe+" "+f.dump));else{if("[object String]"!==U){if("[object Undefined]"===U)return!1;if(f.skipInvalid)return!1;throw new je("unacceptable kind of an object to dump "+U)}"?"!==f.tag&&xT(f,f.dump,E,P,q)}null!==f.tag&&"?"!==f.tag&&(te=encodeURI("!"===f.tag[0]?f.tag.slice(1):f.tag).replace(/!/g,"%21"),te="!"===f.tag[0]?"!"+te:"tag:yaml.org,2002:"===te.slice(0,18)?"!!"+te.slice(18):"!<"+te+">",f.dump=te+" "+f.dump)}return!0}function Xd(f,E){var M,P,S=[],D=[];for(Gl(f,S,D),M=0,P=D.length;M<P;M+=1)E.duplicates.push(S[D[M]]);E.usedDuplicates=new Array(P)}function Gl(f,E,S){var D,M,P;if(null!==f&&"object"==typeof f)if(-1!==(M=E.indexOf(f)))-1===S.indexOf(M)&&S.push(M);else if(E.push(f),Array.isArray(f))for(M=0,P=f.length;M<P;M+=1)Gl(f[M],E,S);else for(M=0,P=(D=Object.keys(f)).length;M<P;M+=1)Gl(f[D[M]],E,S)}function zi(f,E){return function(){throw new Error("Function yaml."+f+" is removed in js-yaml 4. Use yaml."+E+" instead, which is now safe by default.")}}const jl={Type:un,Schema:io,FAILSAFE_SCHEMA:pc,JSON_SCHEMA:Od,CORE_SCHEMA:bn,DEFAULT_SCHEMA:Md,load:sr.load,loadAll:sr.loadAll,dump:function(f,E){var S=new Dr(E=E||{});S.noRefs||Xd(f,S);var D=f;return S.replacer&&(D=S.replacer.call({"":D},"",D)),ao(S,0,D,!0,!0)?S.dump+"\n":""},YAMLException:je,types:{binary:nm,float:Al,map:Cd,null:wd,pairs:sm,set:An,timestamp:Ol,bool:Dd,int:Ws,merge:Ri,omap:rm,seq:$g,str:Pr},safeLoad:zi("safeLoad","load"),safeLoadAll:zi("safeLoadAll","loadAll"),safeDump:zi("safeDump","dump")},Js="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Xi,Blob:Pa,File:zl}=Js;function lo(f){return function(f){if(ae(f))return k(f)}(f)||function(f){if(void 0!==re&&null!=$(f)||null!=f["@@iterator"])return j(f)}(f)||oe(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Tt=g(71049),Hr=g.n(Tt),Nm=function(E){return":/?#[]@!$&'()*+,;=".indexOf(E)>-1},km=function(E){return/^[a-z0-9\-._~]+$/i.test(E)};function Qs(f){var E,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},D=S.escape,M=arguments.length>2?arguments[2]:void 0;return"number"==typeof f&&(f=f.toString()),"string"==typeof f&&f.length&&D?M?JSON.parse(f):it()(E=lo(f)).call(E,function(P){var L,U;if(km(P)||Nm(P)&&"unsafe"===D)return P;var q=new TextEncoder;return it()(L=it()(U=ht()(q.encode(P))).call(U,function(he){var pe;return Hr()(pe="0".concat(he.toString(16).toUpperCase())).call(pe,-2)})).call(L,function(he){return"%".concat(he)}).join("")}).join(""):f}function Xl(f){var E=f.value;return Array.isArray(E)?function(f){var E=f.key,S=f.value,D=f.style,M=f.explode,P=f.escape,L=function(pe){return Qs(pe,{escape:P})};if("simple"===D)return it()(S).call(S,function(he){return L(he)}).join(",");if("label"===D)return".".concat(it()(S).call(S,function(he){return L(he)}).join("."));if("matrix"===D)return it()(S).call(S,function(he){return L(he)}).reduce(function(he,pe){var ge,be,Ae;return!he||M?Me()(be=Me()(Ae="".concat(he||"",";")).call(Ae,E,"=")).call(be,pe):Me()(ge="".concat(he,",")).call(ge,pe)},"");if("form"===D){var U=M?"&".concat(E,"="):",";return it()(S).call(S,function(he){return L(he)}).join(U)}if("spaceDelimited"===D){var q=M?"".concat(E,"="):"";return it()(S).call(S,function(he){return L(he)}).join(" ".concat(q))}if("pipeDelimited"===D){var te=M?"".concat(E,"="):"";return it()(S).call(S,function(he){return L(he)}).join("|".concat(te))}}(f):"object"===ne(E)?function(f){var E=f.key,S=f.value,D=f.style,M=f.explode,P=f.escape,L=function(te){return Qs(te,{escape:P})},U=Qe()(S);return"simple"===D?U.reduce(function(q,te){var he,pe,ge,be=L(S[te]),Ae=M?"=":",",Fe=q?"".concat(q,","):"";return Me()(he=Me()(pe=Me()(ge="".concat(Fe)).call(ge,te)).call(pe,Ae)).call(he,be)},""):"label"===D?U.reduce(function(q,te){var he,pe,ge,be=L(S[te]),Ae=M?"=":".",Fe=q?"".concat(q,"."):".";return Me()(he=Me()(pe=Me()(ge="".concat(Fe)).call(ge,te)).call(pe,Ae)).call(he,be)},""):"matrix"===D&&M?U.reduce(function(q,te){var he,pe,ge=L(S[te]),be=q?"".concat(q,";"):";";return Me()(he=Me()(pe="".concat(be)).call(pe,te,"=")).call(he,ge)},""):"matrix"===D?U.reduce(function(q,te){var he,pe,ge=L(S[te]),be=q?"".concat(q,","):";".concat(E,"=");return Me()(he=Me()(pe="".concat(be)).call(pe,te,",")).call(he,ge)},""):"form"===D?U.reduce(function(q,te){var he,pe,ge,be,Ae=L(S[te]),Fe=q?Me()(he="".concat(q)).call(he,M?"&":","):"",He=M?"=":",";return Me()(pe=Me()(ge=Me()(be="".concat(Fe)).call(be,te)).call(ge,He)).call(pe,Ae)},""):void 0}(f):function(f){var L,E=f.key,S=f.value,D=f.style,M=f.escape,P=function(q){return Qs(q,{escape:M})};return"simple"===D?P(S):"label"===D?".".concat(P(S)):"matrix"===D?Me()(L=";".concat(E,"=")).call(L,P(S)):"form"===D||"deepObject"===D?P(S):void 0}(f)}const Zs=function(E,S){S.body=E};var qn={serializeRes:Kl,mergeInQueryOrForm:xc};function Fa(f){return ms.apply(this,arguments)}function ms(){return ms=fe(Te().mark(function f(E){var S,M,P,L,U=arguments;return Te().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(S=U.length>1&&void 0!==U[1]?U[1]:{},"object"===ne(E)&&(E=(S=E).url),S.headers=S.headers||{},qn.mergeInQueryOrForm(S),S.headers&&Qe()(S.headers).forEach(function(he){var pe=S.headers[he];"string"==typeof pe&&(S.headers[he]=pe.replace(/\n+/g," "))}),!S.requestInterceptor){te.next=12;break}return te.next=8,S.requestInterceptor(S);case 8:if(te.t0=te.sent,te.t0){te.next=11;break}te.t0=S;case 11:S=te.t0;case 12:return/multipart\/form-data/i.test(S.headers["content-type"]||S.headers["Content-Type"])&&S.body instanceof Xi&&(delete S.headers["content-type"],delete S.headers["Content-Type"]),te.prev=14,te.next=17,(S.userFetch||fetch)(S.url,S);case 17:return M=te.sent,te.next=20,qn.serializeRes(M,E,S);case 20:if(M=te.sent,!S.responseInterceptor){te.next=28;break}return te.next=24,S.responseInterceptor(M);case 24:if(te.t1=te.sent,te.t1){te.next=27;break}te.t1=M;case 27:M=te.t1;case 28:te.next=39;break;case 30:if(te.prev=30,te.t2=te.catch(14),M){te.next=34;break}throw te.t2;case 34:throw(P=new Error(M.statusText||"response status is ".concat(M.status))).status=M.status,P.statusCode=M.status,P.responseError=te.t2,P;case 39:if(M.ok){te.next=45;break}throw(L=new Error(M.statusText||"response status is ".concat(M.status))).status=M.status,L.statusCode=M.status,L.response=M,L;case 45:return te.abrupt("return",M);case 46:case"end":return te.stop()}},f,null,[[14,30]])})),ms.apply(this,arguments)}var Ur=function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(E)};function Oc(f,E){return E&&(0===E.indexOf("application/json")||E.indexOf("+json")>0)?JSON.parse(f):jl.load(f)}function Kl(f,E){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},D=S.loadSpec,M=void 0!==D&&D,P={ok:f.ok,url:f.url||E,status:f.status,statusText:f.statusText,headers:Qd(f.headers)},L=P.headers["content-type"],U=M||Ur(L),q=U?f.text:f.blob||f.buffer;return q.call(f).then(function(te){if(P.text=te,P.data=te,U)try{var he=Oc(te,L);P.body=he,P.obj=he}catch(pe){P.parseError=pe}return P})}function FT(f){return xe()(f).call(f,", ")?f.split(", "):f}function Qd(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof ot()(f)?{}:ht()(ot()(f).call(f)).reduce(function(E,S){var D=de(S,2);return E[D[0]]=FT(D[1]),E},{})}function qs(f,E){return!E&&"undefined"!=typeof navigator&&(E=navigator),E&&"ReactNative"===E.product?!(!f||"object"!==ne(f)||"string"!=typeof f.uri):!!(void 0!==zl&&f instanceof zl||void 0!==Pa&&f instanceof Pa||ArrayBuffer.isView(f))||null!==f&&"object"===ne(f)&&"function"==typeof f.pipe}function Ba(f,E){return Array.isArray(f)&&f.some(function(S){return qs(S,E)})}var Fi={form:",",spaceDelimited:"%20",pipeDelimited:"|"},uo={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function Mc(f,E){var S=arguments.length>2&&void 0!==arguments[2]&&arguments[2],D=E.collectionFormat,M=E.allowEmptyValue,P=E.serializationOption,L=E.encoding,U="object"!==ne(E)||Array.isArray(E)?E:E.value,q=S?function(Ae){return Ae.toString()}:function(Ae){return encodeURIComponent(Ae)},te=q(f);if(void 0===U&&M)return[[te,""]];if(qs(U)||Ba(U))return[[te,U]];if(P)return _s(f,U,S,P);if(L){if([ne(L.style),ne(L.explode),ne(L.allowReserved)].some(function(Ae){return"undefined"!==Ae})){var he=L.style,pe=L.explode,ge=L.allowReserved;return _s(f,U,S,{style:he,explode:pe,allowReserved:ge})}if(L.contentType){if("application/json"===L.contentType){var be="string"==typeof U?U:sn()(U);return[[te,q(be)]]}return[[te,q(U.toString())]]}return"object"!==ne(U)?[[te,q(U)]]:Array.isArray(U)&&U.every(function(Ae){return"object"!==ne(Ae)})?[[te,it()(U).call(U,q).join(",")]]:[[te,q(sn()(U))]]}return"object"!==ne(U)?[[te,q(U)]]:Array.isArray(U)?"multi"===D?[[te,it()(U).call(U,q)]]:[[te,it()(U).call(U,q).join(uo[D||"csv"])]]:[[te,""]]}function _s(f,E,S,D){var M,he,pe,P=D.style||"form",L=void 0===D.explode?"form"===P:D.explode,U=!S&&(D&&D.allowReserved?"unsafe":"reserved"),q=function(be){return Qs(be,{escape:U})},te=S?function(ge){return ge}:function(ge){return Qs(ge,{escape:U})};return"object"!==ne(E)?[[te(f),q(E)]]:Array.isArray(E)?L?[[te(f),it()(E).call(E,q)]]:[[te(f),it()(E).call(E,q).join(Fi[P])]]:"deepObject"===P?it()(he=Qe()(E)).call(he,function(ge){var be;return[te(Me()(be="".concat(f,"[")).call(be,ge,"]")),q(E[ge])]}):L?it()(pe=Qe()(E)).call(pe,function(ge){return[te(ge),q(E[ge])]}):[[te(f),it()(M=Qe()(E)).call(M,function(ge){var be;return[Me()(be="".concat(te(ge),",")).call(be,q(E[ge]))]}).join(",")]]}function co(f){return mt()(f).reduce(function(E,S){var U,D=de(S,2),L=W(Mc(D[0],D[1],!0));try{for(L.s();!(U=L.n()).done;){var q=de(U.value,2),te=q[0],he=q[1];if(Array.isArray(he)){var ge,pe=W(he);try{for(pe.s();!(ge=pe.n()).done;){var be=ge.value;if(ArrayBuffer.isView(be)){var Ae=new Pa([be]);E.append(te,Ae)}else E.append(te,be)}}catch(He){pe.e(He)}finally{pe.f()}}else if(ArrayBuffer.isView(he)){var Fe=new Pa([he]);E.append(te,Fe)}else E.append(te,he)}}catch(He){L.e(He)}finally{L.f()}return E},new Xi)}function Zd(f){var E=Qe()(f).reduce(function(S,D){var P,M=W(Mc(D,f[D]));try{for(M.s();!(P=M.n()).done;){var L=de(P.value,2);S[L[0]]=L[1]}}catch(te){M.e(te)}finally{M.f()}return S},{});return _e().stringify(E,{encode:!1,indices:!1})||""}function xc(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=f.url,S=void 0===E?"":E,D=f.query,M=f.form,P=function(){for(var Le=arguments.length,Kt=new Array(Le),Pt=0;Pt<Le;Pt++)Kt[Pt]=arguments[Pt];var zn=Ut()(Kt).call(Kt,function(En){return En}).join("&");return zn?"?".concat(zn):""};if(M){var L=Qe()(M).some(function(qe){var Le=M[qe].value;return qs(Le)||Ba(Le)}),U=f.headers["content-type"]||f.headers["Content-Type"];if(L||/multipart\/form-data/i.test(U)){var q=co(f.form);Zs(q,f)}else f.body=Zd(M);delete f.form}if(D){var te=S.split("?"),he=de(te,2),pe=he[0],ge=he[1],be="";if(ge){var Ae=_e().parse(ge),Fe=Qe()(D);Fe.forEach(function(qe){return delete Ae[qe]}),be=_e().stringify(Ae,{encode:!0})}var He=P(be,Zd(D));f.url=pe+He,delete f.query}return f}function qd(f,E){if(!(f instanceof E))throw new TypeError("Cannot call a class as a function")}function Yl(f,E){for(var S=0;S<E.length;S++){var D=E[S];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),x(f,D.key,D)}}function $l(f,E,S){return E&&Yl(f.prototype,E),S&&Yl(f,S),f}var f,ep=g(78804),Nc=g.n(ep),Bm=g(96916),Uo=g.n(Bm),Jl=g(3498),tp=g.n(Jl),np=(f=function(E,S){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,M){D.__proto__=M}||function(D,M){for(var P in M)M.hasOwnProperty(P)&&(D[P]=M[P])})(E,S)},function(E,S){function D(){this.constructor=E}f(E,S),E.prototype=null===S?Object.create(S):(D.prototype=S.prototype,new D)}),ip=Object.prototype.hasOwnProperty;function Va(f,E){return ip.call(f,E)}function ea(f){if(Array.isArray(f)){for(var S=new Array(f.length),E=0;E<S.length;E++)S[E]=""+E;return S}if(Object.keys)return Object.keys(f);for(var D in S=[],f)Va(f,D)&&S.push(D);return S}function lr(f){switch(typeof f){case"object":return JSON.parse(JSON.stringify(f));case"undefined":return null;default:return f}}function kc(f){for(var D,E=0,S=f.length;E<S;){if(!((D=f.charCodeAt(E))>=48&&D<=57))return!1;E++}return!0}function Wn(f){return-1===f.indexOf("/")&&-1===f.indexOf("~")?f:f.replace(/~/g,"~0").replace(/\//g,"~1")}function ho(f){return f.replace(/~1/g,"/").replace(/~0/g,"~")}function Lc(f){if(void 0===f)return!0;if(f)if(Array.isArray(f)){for(var E=0,S=f.length;E<S;E++)if(Lc(f[E]))return!0}else if("object"==typeof f){var D=ea(f),M=D.length;for(E=0;E<M;E++)if(Lc(f[D[E]]))return!0}return!1}function rp(f,E){var S=[f];for(var D in E){var M="object"==typeof E[D]?JSON.stringify(E[D],null,2):E[D];void 0!==M&&S.push(D+": "+M)}return S.join("\n")}var op=function(f){function E(S,D,M,P,L){var U=this.constructor,q=f.call(this,rp(S,{name:D,index:M,operation:P,tree:L}))||this;return q.name=D,q.index=M,q.operation=P,q.tree=L,Object.setPrototypeOf(q,U.prototype),q.message=rp(S,{name:D,index:M,operation:P,tree:L}),q}return np(E,f),E}(Error),$n=op,Hm=lr,po={add:function(f,E,S){return f[E]=this.value,{newDocument:S}},remove:function(f,E,S){var D=f[E];return delete f[E],{newDocument:S,removed:D}},replace:function(f,E,S){var D=f[E];return f[E]=this.value,{newDocument:S,removed:D}},move:function(f,E,S){var D=Go(S,this.path);D&&(D=lr(D));var M=fo(S,{op:"remove",path:this.from}).removed;return fo(S,{op:"add",path:this.path,value:M}),{newDocument:S,removed:D}},copy:function(f,E,S){var D=Go(S,this.from);return fo(S,{op:"add",path:this.path,value:lr(D)}),{newDocument:S}},test:function(f,E,S){return{newDocument:S,test:Ha(f[E],this.value)}},_get:function(f,E,S){return this.value=f[E],{newDocument:S}}},Ql={add:function(f,E,S){return kc(E)?f.splice(E,0,this.value):f[E]=this.value,{newDocument:S,index:E}},remove:function(f,E,S){return{newDocument:S,removed:f.splice(E,1)[0]}},replace:function(f,E,S){var D=f[E];return f[E]=this.value,{newDocument:S,removed:D}},move:po.move,copy:po.copy,test:po.test,_get:po._get};function Go(f,E){if(""==E)return f;var S={op:"_get",path:E};return fo(f,S),S.value}function fo(f,E,S,D,M,P){if(void 0===S&&(S=!1),void 0===D&&(D=!0),void 0===M&&(M=!0),void 0===P&&(P=0),S&&("function"==typeof S?S(E,0,f,E.path):Ar(E,0)),""===E.path){var L={newDocument:f};if("add"===E.op)return L.newDocument=E.value,L;if("replace"===E.op)return L.newDocument=E.value,L.removed=f,L;if("move"===E.op||"copy"===E.op)return L.newDocument=Go(f,E.from),"move"===E.op&&(L.removed=f),L;if("test"===E.op){if(L.test=Ha(f,E.value),!1===L.test)throw new $n("Test operation failed","TEST_OPERATION_FAILED",P,E,f);return L.newDocument=f,L}if("remove"===E.op)return L.removed=f,L.newDocument=null,L;if("_get"===E.op)return E.value=f,L;if(S)throw new $n("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",P,E,f);return L}D||(f=lr(f));var q=(E.path||"").split("/"),te=f,he=1,pe=q.length,ge=void 0,be=void 0,Ae=void 0;for(Ae="function"==typeof S?S:Ar;;){if((be=q[he])&&-1!=be.indexOf("~")&&(be=ho(be)),M&&"__proto__"==be)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(S&&void 0===ge&&(void 0===te[be]?ge=q.slice(0,he).join("/"):he==pe-1&&(ge=E.path),void 0!==ge&&Ae(E,0,f,ge)),he++,Array.isArray(te)){if("-"===be)be=te.length;else{if(S&&!kc(be))throw new $n("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",P,E,f);kc(be)&&(be=~~be)}if(he>=pe){if(S&&"add"===E.op&&be>te.length)throw new $n("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",P,E,f);if(!1===(L=Ql[E.op].call(E,te,be,f)).test)throw new $n("Test operation failed","TEST_OPERATION_FAILED",P,E,f);return L}}else if(he>=pe){if(!1===(L=po[E.op].call(E,te,be,f)).test)throw new $n("Test operation failed","TEST_OPERATION_FAILED",P,E,f);return L}if(te=te[be],S&&he<pe&&(!te||"object"!=typeof te))throw new $n("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",P,E,f)}}function Wo(f,E,S,D,M){if(void 0===D&&(D=!0),void 0===M&&(M=!0),S&&!Array.isArray(E))throw new $n("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");D||(f=lr(f));for(var P=new Array(E.length),L=0,U=E.length;L<U;L++)P[L]=fo(f,E[L],S,!0,M,L),f=P[L].newDocument;return P.newDocument=f,P}function Um(f,E,S){var D=fo(f,E);if(!1===D.test)throw new $n("Test operation failed","TEST_OPERATION_FAILED",S,E,f);return D.newDocument}function Ar(f,E,S,D){if("object"!=typeof f||null===f||Array.isArray(f))throw new $n("Operation is not an object","OPERATION_NOT_AN_OBJECT",E,f,S);if(!po[f.op])throw new $n("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",E,f,S);if("string"!=typeof f.path)throw new $n("Operation `path` property is not a string","OPERATION_PATH_INVALID",E,f,S);if(0!==f.path.indexOf("/")&&f.path.length>0)throw new $n('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",E,f,S);if(("move"===f.op||"copy"===f.op)&&"string"!=typeof f.from)throw new $n("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",E,f,S);if(("add"===f.op||"replace"===f.op||"test"===f.op)&&void 0===f.value)throw new $n("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",E,f,S);if(("add"===f.op||"replace"===f.op||"test"===f.op)&&Lc(f.value))throw new $n("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",E,f,S);if(S)if("add"==f.op){var M=f.path.split("/").length,P=D.split("/").length;if(M!==P+1&&M!==P)throw new $n("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",E,f,S)}else if("replace"===f.op||"remove"===f.op||"_get"===f.op){if(f.path!==D)throw new $n("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",E,f,S)}else if("move"===f.op||"copy"===f.op){var U=ta([{op:"_get",path:f.from,value:void 0}],S);if(U&&"OPERATION_PATH_UNRESOLVABLE"===U.name)throw new $n("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",E,f,S)}}function ta(f,E,S){try{if(!Array.isArray(f))throw new $n("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(E)Wo(lr(E),lr(f),S||!0);else{S=S||Ar;for(var D=0;D<f.length;D++)S(f[D],D,E,void 0)}}catch(M){if(M instanceof $n)return M;throw M}}function Ha(f,E){if(f===E)return!0;if(f&&E&&"object"==typeof f&&"object"==typeof E){var M,P,L,S=Array.isArray(f),D=Array.isArray(E);if(S&&D){if((P=f.length)!=E.length)return!1;for(M=P;0!=M--;)if(!Ha(f[M],E[M]))return!1;return!0}if(S!=D)return!1;var U=Object.keys(f);if((P=U.length)!==Object.keys(E).length)return!1;for(M=P;0!=M--;)if(!E.hasOwnProperty(U[M]))return!1;for(M=P;0!=M--;)if(!Ha(f[L=U[M]],E[L]))return!1;return!0}return f!=f&&E!=E}var Pc=new WeakMap,Ua=function(E){this.observers=new Map,this.obj=E},Fc=function(E,S){this.callback=E,this.observer=S};function VT(f,E){E.unobserve()}function Zl(f,E){var D,M=function(f){return Pc.get(f)}(f);if(M){var P=function(f,E){return f.observers.get(E)}(M,E);D=P&&P.observer}else M=new Ua(f),Pc.set(f,M);if(D)return D;if(D={},M.value=lr(f),E){D.callback=E,D.next=null;var L=function(){ql(D)},U=function(){clearTimeout(D.next),D.next=setTimeout(L)};"undefined"!=typeof window&&(window.addEventListener("mouseup",U),window.addEventListener("keyup",U),window.addEventListener("mousedown",U),window.addEventListener("keydown",U),window.addEventListener("change",U))}return D.patches=[],D.object=f,D.unobserve=function(){ql(D),clearTimeout(D.next),function(f,E){f.observers.delete(E.callback)}(M,D),"undefined"!=typeof window&&(window.removeEventListener("mouseup",U),window.removeEventListener("keyup",U),window.removeEventListener("mousedown",U),window.removeEventListener("keydown",U),window.removeEventListener("change",U))},M.observers.set(E,new Fc(E,D)),D}function ql(f,E){void 0===E&&(E=!1);var S=Pc.get(f.object);Ga(S.value,f.object,f.patches,"",E),f.patches.length&&Wo(S.value,f.patches);var D=f.patches;return D.length>0&&(f.patches=[],f.callback&&f.callback(D)),D}function Ga(f,E,S,D,M){if(E!==f){"function"==typeof E.toJSON&&(E=E.toJSON());for(var P=ea(E),L=ea(f),q=!1,te=L.length-1;te>=0;te--){var pe=f[he=L[te]];if(!Va(E,he)||void 0===E[he]&&void 0!==pe&&!1===Array.isArray(E))Array.isArray(f)===Array.isArray(E)?(M&&S.push({op:"test",path:D+"/"+Wn(he),value:lr(pe)}),S.push({op:"remove",path:D+"/"+Wn(he)}),q=!0):(M&&S.push({op:"test",path:D,value:f}),S.push({op:"replace",path:D,value:E}));else{var ge=E[he];"object"==typeof pe&&null!=pe&&"object"==typeof ge&&null!=ge&&Array.isArray(pe)===Array.isArray(ge)?Ga(pe,ge,S,D+"/"+Wn(he),M):pe!==ge&&(M&&S.push({op:"test",path:D+"/"+Wn(he),value:lr(pe)}),S.push({op:"replace",path:D+"/"+Wn(he),value:lr(ge)}))}}if(q||P.length!=L.length)for(te=0;te<P.length;te++){var he;!Va(f,he=P[te])&&void 0!==E[he]&&S.push({op:"add",path:D+"/"+Wn(he),value:lr(E[he])})}}}function eu(f,E,S){void 0===S&&(S=!1);var D=[];return Ga(f,E,D,"",S),D}Object.assign({},b,w,{JsonPatchError:op,deepClone:lr,escapePathComponent:Wn,unescapePathComponent:ho});var sp=g(60910),na=g.n(sp),zm=g(32005),ia=g.n(zm);const an={add:function(f,E){return{op:"add",path:f,value:E}},replace:nu,remove:function(f){return{op:"remove",path:f}},merge:function(f,E){return{type:"mutation",op:"merge",path:f,value:E}},mergeDeep:function(f,E){return{type:"mutation",op:"mergeDeep",path:f,value:E}},context:function(f,E){return{type:"context",path:f,value:E}},getIn:function(f,E){return E.reduce(function(S,D){return void 0!==D&&S?S[D]:S},f)},applyPatch:function(f,E,S){if(S=S||{},"merge"===(E=F(F({},E),{},{path:E.path&&Xm(E.path)})).op){var D=jo(f,E.path);z()(D,E.value),Wo(f,[nu(E.path,D)])}else if("mergeDeep"===E.op){var M=jo(f,E.path);for(var P in E.value){var L=E.value[P],U=Array.isArray(L);if(U){var q=M[P]||[];M[P]=Me()(q).call(q,L)}else if(mr(L)&&!U){var te=F({},M[P]);for(var he in L){if(Object.prototype.hasOwnProperty.call(te,he)){te=na()(ia()(te),L);break}z()(te,B({},he,L[he]))}M[P]=te}else M[P]=L}}else if("add"===E.op&&""===E.path&&mr(E.value)){Wo(f,Qe()(E.value).reduce(function(He,qe){return He.push({op:"add",path:"/".concat(Xm(qe)),value:E.value[qe]}),He},[]))}else if("replace"===E.op&&""===E.path){var be=E.value;S.allowMetaPatches&&E.meta&&go(E)&&(Array.isArray(E.value)||mr(E.value))&&(be=F(F({},be),E.meta)),f=be}else if(Wo(f,[E]),S.allowMetaPatches&&E.meta&&go(E)&&(Array.isArray(E.value)||mr(E.value))){var Fe=F(F({},jo(f,E.path)),E.meta);Wo(f,[nu(E.path,Fe)])}return f},parentPathMatch:function(f,E){if(!Array.isArray(E))return!1;for(var S=0,D=E.length;S<D;S+=1)if(E[S]!==f[S])return!1;return!0},flatten:za,fullyNormalizeArray:function(f){return Xa(za(hp(f)))},normalizeArray:hp,isPromise:function(f){return mr(f)&&Uc(f.then)},forEachNew:function(f,E){try{return ja(f,ru,E)}catch(S){return S}},forEachNewPrimitive:function(f,E){try{return ja(f,Hc,E)}catch(S){return S}},isJsonPatch:vs,isContextPatch:function(f){return mo(f)&&"context"===f.type},isPatch:mo,isMutation:ou,isAdditiveMutation:go,isGenerator:function(f){return"[object GeneratorFunction]"===Object.prototype.toString.call(f)},isFunction:Uc,isObject:mr,isError:function(f){return f instanceof Error}};function Xm(f){return Array.isArray(f)?f.length<1?"":"/".concat(it()(f).call(f,function(E){return(E+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):f}function nu(f,E,S){return{op:"replace",path:f,value:E,meta:S}}function ja(f,E,S){var D;return Xa(za(it()(D=Ut()(f).call(f,go)).call(D,function(U){return E(U.value,S,U.path)})||[]))}function Hc(f,E,S){return S=S||[],Array.isArray(f)?it()(f).call(f,function(M,P){return Hc(M,E,Me()(S).call(S,P))}):mr(f)?it()(D=Qe()(f)).call(D,function(M){return Hc(f[M],E,Me()(S).call(S,M))}):E(f,S[S.length-1],S);var D}function ru(f,E,S){var D=[];if((S=S||[]).length>0){var M=E(f,S[S.length-1],S);M&&(D=Me()(D).call(D,M))}if(Array.isArray(f)){var P=it()(f).call(f,function(q,te){return ru(q,E,Me()(S).call(S,te))});P&&(D=Me()(D).call(D,P))}else if(mr(f)){var L,U=it()(L=Qe()(f)).call(L,function(q){return ru(f[q],E,Me()(S).call(S,q))});U&&(D=Me()(D).call(D,U))}return za(D)}function hp(f){return Array.isArray(f)?f:[f]}function za(f){var E;return Me()(E=[]).apply(E,lo(it()(f).call(f,function(S){return Array.isArray(S)?za(S):S})))}function Xa(f){return Ut()(f).call(f,function(E){return void 0!==E})}function mr(f){return f&&"object"===ne(f)}function Uc(f){return f&&"function"==typeof f}function vs(f){if(mo(f)){var E=f.op;return"add"===E||"remove"===E||"replace"===E}return!1}function ou(f){return vs(f)||mo(f)&&"mutation"===f.type}function go(f){return ou(f)&&("add"===f.op||"replace"===f.op||"merge"===f.op||"mergeDeep"===f.op)}function mo(f){return f&&"object"===ne(f)}function jo(f,E){try{return Go(f,E)}catch(S){return console.error(S),{}}}var Ka=g(14569),Gc=g.n(Ka),ys=g(58258),Jm=g.n(ys);function Qm(f,E){function S(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var D=arguments.length,M=new Array(D),P=0;P<D;P++)M[P]=arguments[P];this.message=M[0],E&&E.apply(this,M)}return(S.prototype=new Error).name=f,S.prototype.constructor=S,S}var Zm=g(86439),HT=g.n(Zm),qm=["properties"],lt=["properties"],e_=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],UT=["schema/example","items/example"];function t_(f){var E=f[f.length-1],S=f[f.length-2],D=f.join("/");return qm.indexOf(E)>-1&&-1===lt.indexOf(S)||e_.indexOf(D)>-1||UT.some(function(M){return D.indexOf(M)>-1})}function pp(f,E){var S,M=de(f.split("#"),2),L=M[1],U=Z.resolve(M[0]||"",E||"");return L?Me()(S="".concat(U,"#")).call(S,L):U}var n_="application/json, application/yaml",WT=new RegExp("^([a-z]+://|//)","i"),Gr=Qm("JSONRefError",function(E,S,D){this.originalError=D,z()(this,S||{})}),zo={},oi=new(Gc()),Wc=[function(f){return"paths"===f[0]&&"responses"===f[3]&&"examples"===f[5]},function(f){return"paths"===f[0]&&"responses"===f[3]&&"content"===f[5]&&"example"===f[7]},function(f){return"paths"===f[0]&&"responses"===f[3]&&"content"===f[5]&&"examples"===f[7]&&"value"===f[9]},function(f){return"paths"===f[0]&&"requestBody"===f[3]&&"content"===f[4]&&"example"===f[6]},function(f){return"paths"===f[0]&&"requestBody"===f[3]&&"content"===f[4]&&"examples"===f[6]&&"value"===f[8]},function(f){return"paths"===f[0]&&"parameters"===f[2]&&"example"===f[4]},function(f){return"paths"===f[0]&&"parameters"===f[3]&&"example"===f[5]},function(f){return"paths"===f[0]&&"parameters"===f[2]&&"examples"===f[4]&&"value"===f[6]},function(f){return"paths"===f[0]&&"parameters"===f[3]&&"examples"===f[5]&&"value"===f[7]},function(f){return"paths"===f[0]&&"parameters"===f[2]&&"content"===f[4]&&"example"===f[6]},function(f){return"paths"===f[0]&&"parameters"===f[2]&&"content"===f[4]&&"examples"===f[6]&&"value"===f[8]},function(f){return"paths"===f[0]&&"parameters"===f[3]&&"content"===f[4]&&"example"===f[7]},function(f){return"paths"===f[0]&&"parameters"===f[3]&&"content"===f[5]&&"examples"===f[7]&&"value"===f[9]}],jT={key:"$ref",plugin:function(E,S,D,M){var P=M.getInstance(),L=Hr()(D).call(D,0,-1);if(!t_(L)&&!function(E){return Wc.some(function(S){return S(E)})}(L)){var q=M.getContext(D).baseDoc;if("string"!=typeof E)return new Gr("$ref: must be a string (JSON-Ref)",{$ref:E,baseDoc:q,fullPath:D});var ge,be,Ae,te=Xo(E),he=te[0],pe=te[1]||"";try{ge=q||he?Or(he,q):null}catch(Le){return oa(Le,{pointer:pe,$ref:E,basePath:ge,fullPath:D})}if(function(f,E,S,D){var M,P,L=oi.get(D);L||oi.set(D,L={});var U=function(f){return 0===f.length?"":"/".concat(it()(f).call(f,Ki).join("/"))}(S),q=Me()(M="".concat(E||"<specmap-base>","#")).call(M,f),te=U.replace(/allOf\/\d+\/?/g,"");if(E===D.contextTree.get([]).baseDoc&&yp(te,f))return!0;var pe="",ge=S.some(function(be){var Ae;return pe=Me()(Ae="".concat(pe,"/")).call(Ae,Ki(be)),L[pe]&&L[pe].some(function(Fe){return yp(Fe,q)||yp(q,Fe)})});if(ge)return!0;L[te]=Me()(P=L[te]||[]).call(P,q)}(pe,ge,L,M)&&!P.useCircularStructures){var Fe=pp(E,ge);return E===Fe?null:an.replace(D,Fe)}if(null==ge?(Ae=vp(pe),void 0===(be=M.get(Ae))&&(be=new Gr("Could not resolve reference: ".concat(E),{pointer:pe,$ref:E,baseDoc:q,fullPath:D}))):be=null!=(be=_o(ge,pe)).__value?be.__value:be.catch(function(Le){throw oa(Le,{pointer:pe,$ref:E,baseDoc:q,fullPath:D})}),be instanceof Error)return[an.remove(D),be];var He=pp(E,ge),qe=an.replace(L,be,{$$ref:He});if(ge&&ge!==q)return[qe,an.context(L,{baseDoc:ge})];try{if(!function(f,E){var S=[f];return E.path.reduce(function(M,P){return S.push(M[P]),M[P]},f),function D(M){return an.isObject(M)&&(S.indexOf(M)>=0||Qe()(M).some(function(P){return D(M[P])}))}(E.value)}(M.state,qe)||P.useCircularStructures)return qe}catch(Le){return null}}}},fp=z()(jT,{docCache:zo,absoluteify:Or,clearCache:function(f){void 0!==f?delete zo[f]:Qe()(zo).forEach(function(E){delete zo[E]})},JSONRefError:Gr,wrapError:oa,getDoc:mp,split:Xo,extractFromDoc:_o,fetchJSON:function(f){return fetch(f,{headers:{Accept:n_},loadSpec:!0}).then(function(E){return E.text()}).then(function(E){return jl.load(E)})},extract:_p,jsonPointerToArray:vp,unescapeJsonPointerToken:jc});const vr=fp;function Or(f,E){if(!WT.test(f)){var S;if(!E)throw new Gr(Me()(S="Tried to resolve a relative URL, without having a basePath. path: '".concat(f,"' basePath: '")).call(S,E,"'"));return Z.resolve(E,f)}return f}function oa(f,E){var S,D;return S=f&&f.response&&f.response.body?Me()(D="".concat(f.response.body.code," ")).call(D,f.response.body.message):f.message,new Gr("Could not resolve reference: ".concat(S),E,f)}function Xo(f){return(f+"").split("#")}function _o(f,E){var S=zo[f];if(S&&!an.isPromise(S))try{var D=_p(E,S);return z()(Uo().resolve(D),{__value:D})}catch(M){return Uo().reject(M)}return mp(f).then(function(M){return _p(E,M)})}function mp(f){var E=zo[f];return E?an.isPromise(E)?E:Uo().resolve(E):(zo[f]=fp.fetchJSON(f).then(function(S){return zo[f]=S,S}),zo[f])}function _p(f,E){var S=vp(f);if(S.length<1)return E;var D=an.getIn(E,S);if(void 0===D)throw new Gr("Could not resolve pointer: ".concat(f," does not exist in document"),{pointer:f});return D}function vp(f){var E;if("string"!=typeof f)throw new TypeError("Expected a string, got a ".concat(ne(f)));return"/"===f[0]&&(f=f.substr(1)),""===f?[]:it()(E=f.split("/")).call(E,jc)}function jc(f){return"string"!=typeof f?f:new(Jm())("=".concat(f.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function Ki(f){var E,S=new(Jm())([["",f.replace(/~/g,"~0").replace(/\//g,"~1")]]);return Hr()(E=S.toString()).call(E,1)}function yp(f,E){if(function(E){return!E||"/"===E||"#"===E}(E))return!0;var S=f.charAt(E.length),D=Hr()(E).call(E,-1);return 0===f.indexOf(E)&&(!S||"/"===S||"#"===S)&&"#"!==D}var o_=g(36593),s_=g.n(o_);const a_={key:"allOf",plugin:function(E,S,D,M,P){if(!P.meta||!P.meta.$$ref){var L=Hr()(D).call(D,0,-1);if(!t_(L)){if(!Array.isArray(E)){var U=new TypeError("allOf must be an array");return U.fullPath=D,U}var q=!1,te=P.value;if(L.forEach(function(ge){!te||(te=te[ge])}),te=F({},te),!s_()(te)){delete te.allOf;var pe,he=[];return he.push(M.replace(L,{})),E.forEach(function(ge,be){if(!M.isObject(ge)){if(q)return null;q=!0;var Ae=new TypeError("Elements in allOf must be objects");return Ae.fullPath=D,he.push(Ae)}he.push(M.mergeDeep(L,ge));var He=function(f,E){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},D=S.specmap,M=S.getBaseUrlForNodePath,P=void 0===M?function(te){var he;return D.getContext(Me()(he=[]).call(he,lo(E),lo(te))).baseDoc}:M,L=S.targetKeys,U=void 0===L?["$ref","$$ref"]:L,q=[];return HT()(f).forEach(function(){if(xe()(U).call(U,this.key)&&"string"==typeof this.node){var he=this.path,pe=Me()(E).call(E,this.path),ge=pp(this.node,P(he));q.push(D.replace(pe,ge))}}),q}(ge,Hr()(D).call(D,0,-1),{getBaseUrlForNodePath:function(Le){var Kt;return M.getContext(Me()(Kt=[]).call(Kt,lo(D),[be],lo(Le))).baseDoc},specmap:M});he.push.apply(he,lo(He))}),he.push(M.mergeDeep(L,te)),te.$$ref||he.push(M.remove(Me()(pe=[]).call(pe,L,"$$ref"))),he}}}}},l_={key:"parameters",plugin:function(E,S,D,M){if(Array.isArray(E)&&E.length){var P=z()([],E),L=Hr()(D).call(D,0,-1),U=F({},an.getIn(M.spec,L));return E.forEach(function(q,te){try{P[te].default=M.parameterMacro(U,q)}catch(pe){var he=new Error(pe);return he.fullPath=D,he}}),an.replace(D,P)}return an.replace(D,E)}},$a={key:"properties",plugin:function(E,S,D,M){var P=F({},E);for(var L in E)try{P[L].default=M.modelPropertyMacro(P[L])}catch(te){var U=new Error(te);return U.fullPath=D,U}return an.replace(D,P)}};var Xc=function(){function f(E){qd(this,f),this.root=aa(E||{})}return $l(f,[{key:"set",value:function(S,D){var M=this.getParent(S,!0);if(M){var P=S[S.length-1],L=M.children;L[P]?Kc(L[P],D,M):L[P]=aa(D,M)}else Kc(this.root,D,null)}},{key:"get",value:function(S){if((S=S||[]).length<1)return this.root.value;for(var M,P,D=this.root,L=0;L<S.length&&(M=D.children)[P=S[L]];L+=1)D=M[P];return D&&D.protoValue}},{key:"getParent",value:function(S,D){return!S||S.length<1?null:S.length<2?this.root:Hr()(S).call(S,0,-1).reduce(function(M,P){if(!M)return M;var L=M.children;return!L[P]&&D&&(L[P]=aa(null,M)),L[P]},this.root)}}]),f}();function aa(f,E){return Kc({children:{}},f,E)}function Kc(f,E,S){return f.value=E||{},f.protoValue=S?F(F({},S.protoValue),f.value):f.value,Qe()(f.children).forEach(function(D){var M=f.children[D];f.children[D]=Kc(M,M.value,f)}),f}var su=function(){},ua=function(){function f(E){var D,M,S=this;qd(this,f),z()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new Xc,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:z()(Object.create(this),an,{getInstance:function(){return S}}),allowMetaPatches:!1},E),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=Ut()(D=it()(M=this.plugins).call(M,this.wrapPlugin.bind(this))).call(D,an.isFunction),this.patches.push(an.add([],this.spec)),this.patches.push(an.context([],this.context)),this.updatePatches(this.patches)}return $l(f,[{key:"debug",value:function(S){if(this.debugLevel===S){for(var D,M=arguments.length,P=new Array(M>1?M-1:0),L=1;L<M;L++)P[L-1]=arguments[L];(D=console).log.apply(D,P)}}},{key:"verbose",value:function(S){if("verbose"===this.debugLevel){for(var D,M,P=arguments.length,L=new Array(P>1?P-1:0),U=1;U<P;U++)L[U-1]=arguments[U];(D=console).log.apply(D,Me()(M=["[".concat(S,"]   ")]).call(M,L))}}},{key:"wrapPlugin",value:function(S,D){var L,q,te,M=this.pathDiscriminator,P=null;return S[this.pluginProp]?(P=S,L=S[this.pluginProp]):an.isFunction(S)?L=S:an.isObject(S)&&(q=S,te=function(pe,ge){return!Array.isArray(pe)||pe.every(function(be,Ae){return be===ge[Ae]})},L=Te().mark(function he(pe,ge){var be,Ae,Fe,He,qe,Le;return Te().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:Le=function(En,gn,Nt){var $i,si,ti,Yt,li,ui,Yo,jr,el,Op,x_,Cs,Ai;return Te().wrap(function(Oi){for(;;)switch(Oi.prev=Oi.next){case 0:if(an.isObject(En)){Oi.next=6;break}if(q.key!==gn[gn.length-1]){Oi.next=4;break}return Oi.next=4,q.plugin(En,q.key,gn,ge);case 4:Oi.next=30;break;case 6:si=gn[$i=gn.length-1],ti=gn.indexOf("properties"),Yt="properties"===si&&$i===ti,li=ge.allowMetaPatches&&Ae[En.$$ref],ui=0,Yo=Qe()(En);case 12:if(!(ui<Yo.length)){Oi.next=30;break}if(el=En[jr=Yo[ui]],Op=Me()(gn).call(gn,jr),x_=an.isObject(el),Cs=En.$$ref,li){Oi.next=22;break}if(!x_){Oi.next=22;break}return ge.allowMetaPatches&&Cs&&(Ae[Cs]=!0),Oi.delegateYield(Le(el,Op,Nt),"t0",22);case 22:if(Yt||jr!==q.key){Oi.next=27;break}if(Ai=te(M,gn),M&&!Ai){Oi.next=27;break}return Oi.next=27,q.plugin(el,jr,Op,ge,Nt);case 27:ui++,Oi.next=12;break;case 30:case"end":return Oi.stop()}},be)},be=Te().mark(Le),Ae={},Fe=W(Ut()(pe).call(pe,an.isAdditiveMutation)),Pt.prev=4,Fe.s();case 6:if((He=Fe.n()).done){Pt.next=11;break}return Pt.delegateYield(Le((qe=He.value).value,qe.path,qe),"t0",9);case 9:Pt.next=6;break;case 11:Pt.next=16;break;case 13:Pt.prev=13,Pt.t1=Pt.catch(4),Fe.e(Pt.t1);case 16:return Pt.prev=16,Fe.f(),Pt.finish(16);case 19:case"end":return Pt.stop()}},he,null,[[4,13,16,19]])})),z()(L.bind(P),{pluginName:S.name||D,isGenerator:an.isGenerator(L)})}},{key:"nextPlugin",value:function(){var S,D=this;return Nc()(S=this.wrappedPlugins).call(S,function(M){return D.getMutationsForPlugin(M).length>0})}},{key:"nextPromisedPatch",value:function(){var S;if(this.promisedPatches.length>0)return Uo().race(it()(S=this.promisedPatches).call(S,function(D){return D.value}))}},{key:"getPluginHistory",value:function(S){var D=this.constructor.getPluginName(S);return this.pluginHistory[D]||[]}},{key:"getPluginRunCount",value:function(S){return this.getPluginHistory(S).length}},{key:"getPluginHistoryTip",value:function(S){var D=this.getPluginHistory(S);return D&&D[D.length-1]||{}}},{key:"getPluginMutationIndex",value:function(S){var D=this.getPluginHistoryTip(S).mutationIndex;return"number"!=typeof D?-1:D}},{key:"updatePluginHistory",value:function(S,D){var M=this.constructor.getPluginName(S);this.pluginHistory[M]=this.pluginHistory[M]||[],this.pluginHistory[M].push(D)}},{key:"updatePatches",value:function(S){var D=this;an.normalizeArray(S).forEach(function(M){if(M instanceof Error)D.errors.push(M);else try{if(!an.isObject(M))return void D.debug("updatePatches","Got a non-object patch",M);if(D.showDebug&&D.allPatches.push(M),an.isPromise(M.value))return D.promisedPatches.push(M),void D.promisedPatchThen(M);if(an.isContextPatch(M))return void D.setContext(M.path,M.value);if(an.isMutation(M))return void D.updateMutations(M)}catch(P){console.error(P),D.errors.push(P)}})}},{key:"updateMutations",value:function(S){"object"===ne(S.value)&&!Array.isArray(S.value)&&this.allowMetaPatches&&(S.value=F({},S.value));var D=an.applyPatch(this.state,S,{allowMetaPatches:this.allowMetaPatches});D&&(this.mutations.push(S),this.state=D)}},{key:"removePromisedPatch",value:function(S){var D,M=this.promisedPatches.indexOf(S);M<0?this.debug("Tried to remove a promisedPatch that isn't there!"):tp()(D=this.promisedPatches).call(D,M,1)}},{key:"promisedPatchThen",value:function(S){var D=this;return S.value=S.value.then(function(M){var P=F(F({},S),{},{value:M});D.removePromisedPatch(S),D.updatePatches(P)}).catch(function(M){D.removePromisedPatch(S),D.updatePatches(M)}),S.value}},{key:"getMutations",value:function(S,D){var M;return S=S||0,"number"!=typeof D&&(D=this.mutations.length),Hr()(M=this.mutations).call(M,S,D)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(S){var D=this.getPluginMutationIndex(S);return this.getMutations(D+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(S){return an.getIn(this.state,S)}},{key:"_getContext",value:function(S){return this.contextTree.get(S)}},{key:"setContext",value:function(S,D){return this.contextTree.set(S,D)}},{key:"_hasRun",value:function(S){return this.getPluginRunCount(this.getCurrentPlugin())>(S||0)}},{key:"dispatch",value:function(){var U,S=this,D=this,M=this.nextPlugin();if(!M){var P=this.nextPromisedPatch();if(P)return P.then(function(){return S.dispatch()}).catch(function(){return S.dispatch()});var L={spec:this.state,errors:this.errors};return this.showDebug&&(L.patches=this.allPatches),Uo().resolve(L)}if(D.pluginCount=D.pluginCount||{},D.pluginCount[M]=(D.pluginCount[M]||0)+1,D.pluginCount[M]>100)return Uo().resolve({spec:D.state,errors:Me()(U=D.errors).call(U,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(M!==this.currentPlugin&&this.promisedPatches.length){var q,te=it()(q=this.promisedPatches).call(q,function(ge){return ge.value});return Uo().all(it()(te).call(te,function(ge){return ge.then(su,su)})).then(function(){return S.dispatch()})}return function(){D.currentPlugin=M;var ge=D.getCurrentMutations(),be=D.mutations.length-1;try{if(M.isGenerator){var Fe,Ae=W(M(ge,D.getLib()));try{for(Ae.s();!(Fe=Ae.n()).done;)pe(Fe.value)}catch(Le){Ae.e(Le)}finally{Ae.f()}}else pe(M(ge,D.getLib()))}catch(Le){console.error(Le),pe([z()(Object.create(Le),{plugin:M})])}finally{D.updatePluginHistory(M,{mutationIndex:be})}return D.dispatch()}();function pe(ge){ge&&(ge=an.fullyNormalizeArray(ge),D.updatePatches(ge,M))}}}],[{key:"getPluginName",value:function(S){return S.pluginName}},{key:"getPatchesOfType",value:function(S,D){return Ut()(S).call(S,D)}}]),f}(),bs={refs:vr,allOf:a_,parameters:l_,properties:$a},c_=g(27954),au=g.n(c_),lu=function(E){return String.prototype.toLowerCase.call(E)},ca=function(E){return E.replace(/[^\w]/gi,"_")};function Es(f){var E=f.openapi;return!!E&&ie()(E).call(E,"3")}function De(f,E){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",D=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},M=D.v2OperationIdCompatibilityMode;if(!f||"object"!==ne(f))return null;var P=(f.operationId||"").replace(/\s/g,"");return P.length?ca(f.operationId):Ep(E,S,{v2OperationIdCompatibilityMode:M})}function Ep(f,E){var S,D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},M=D.v2OperationIdCompatibilityMode;if(M){var P,L,U=Me()(P="".concat(E.toLowerCase(),"_")).call(P,f).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(U=U||Me()(L="".concat(f.substring(1),"_")).call(L,E)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return Me()(S="".concat(lu(E))).call(S,ca(f))}function Yc(f,E){var S;return Me()(S="".concat(lu(E),"-")).call(S,f)}function Tp(f,E,S){if(!f||"object"!==ne(f)||!f.paths||"object"!==ne(f.paths))return null;var D=f.paths;for(var M in D)for(var P in D[M])if("PARAMETERS"!==P.toUpperCase()){var L=D[M][P];if(L&&"object"===ne(L)){var U={spec:f,pathName:M,method:P.toUpperCase(),operation:L},q=E(U);if(S&&q)return U}}}function $c(f){var E=f.spec,S=E.paths,D={};if(!S||E.$$normalized)return f;for(var M in S){var P=S[M];if(au()(P)){var L=P.parameters,U=function(pe){var ge=P[pe];if(!au()(ge))return"continue";var be=De(ge,M,pe);if(be){D[be]?D[be].push(ge):D[be]=[ge];var Ae=D[be];if(Ae.length>1)Ae.forEach(function(si,ti){var Yt;si.__originalOperationId=si.__originalOperationId||si.operationId,si.operationId=Me()(Yt="".concat(be)).call(Yt,ti+1)});else if(void 0!==ge.operationId){var Fe=Ae[0];Fe.__originalOperationId=Fe.__originalOperationId||ge.operationId,Fe.operationId=be}}if("parameters"!==pe){var He=[],qe={};for(var Le in E)("produces"===Le||"consumes"===Le||"security"===Le)&&(qe[Le]=E[Le],He.push(qe));if(L&&(qe.parameters=L,He.push(qe)),He.length){var Pt,Kt=W(He);try{for(Kt.s();!(Pt=Kt.n()).done;){var zn=Pt.value;for(var En in zn)if(ge[En]){if("parameters"===En){var Nt,gn=W(zn[En]);try{var $i=function(){var ti=Nt.value;ge[En].some(function(li){return li.name&&li.name===ti.name||li.$ref&&li.$ref===ti.$ref||li.$$ref&&li.$$ref===ti.$$ref||li===ti})||ge[En].push(ti)};for(gn.s();!(Nt=gn.n()).done;)$i()}catch(si){gn.e(si)}finally{gn.f()}}}else ge[En]=zn[En]}}catch(si){Kt.e(si)}finally{Kt.f()}}}};for(var q in P)U(q)}}return E.$$normalized=!0,f}function Jc(f){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=E.requestInterceptor,D=E.responseInterceptor,M=f.withCredentials?"include":"same-origin";return function(P){return f({url:P,loadSpec:!0,requestInterceptor:S,responseInterceptor:D,headers:{Accept:n_},credentials:M}).then(function(L){return L.body})}}function Bi(f){var S=f.spec,M=f.mode,P=f.allowMetaPatches,L=void 0===P||P,U=f.pathDiscriminator,q=f.modelPropertyMacro,te=f.parameterMacro,he=f.requestInterceptor,pe=f.responseInterceptor,ge=f.skipNormalization,be=f.useCircularStructures,Ae=f.http,Fe=f.baseDoc;return Fe=Fe||f.url,Ae=f.fetch||Ae||Fa,S?He(S):Jc(Ae,{requestInterceptor:he,responseInterceptor:pe})(Fe).then(He);function He(qe){Fe&&(bs.refs.docCache[Fe]=qe),bs.refs.fetchJSON=Jc(Ae,{requestInterceptor:he,responseInterceptor:pe});var Le=[bs.refs];return"function"==typeof te&&Le.push(bs.parameters),"function"==typeof q&&Le.push(bs.properties),"strict"!==M&&Le.push(bs.allOf),function(f){return new ua(f).dispatch()}({spec:qe,context:{baseDoc:Fe},plugins:Le,allowMetaPatches:L,pathDiscriminator:U,parameterMacro:te,modelPropertyMacro:q,useCircularStructures:be}).then(ge?function(){var Kt=fe(Te().mark(function Pt(zn){return Te().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:return gn.abrupt("return",zn);case 1:case"end":return gn.stop()}},Pt)}));return function(Pt){return Kt.apply(this,arguments)}}():$c)}}var uu=g(87578),yr=g.n(uu);function cu(){return cu=fe(Te().mark(function f(E,S){var D,M,pe,ge,be,Ae,Fe=arguments;return Te().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return M=(D=Fe.length>2&&void 0!==Fe[2]?Fe[2]:{}).returnEntireTree,pe={pathDiscriminator:S,baseDoc:D.baseDoc,requestInterceptor:D.requestInterceptor,responseInterceptor:D.responseInterceptor,parameterMacro:D.parameterMacro,modelPropertyMacro:D.modelPropertyMacro,useCircularStructures:D.useCircularStructures},ge=$c({spec:E}),be=ge.spec,qe.next=6,Bi(F(F({},pe),{},{spec:be,allowMetaPatches:!0,skipNormalization:!0}));case 6:return Ae=qe.sent,!M&&Array.isArray(S)&&S.length&&(Ae.spec=yr()(Ae.spec,S)||null),qe.abrupt("return",Ae);case 9:case"end":return qe.stop()}},f)})),cu.apply(this,arguments)}var Qc=function(){return null},Qa_mapTagOperations=function(f){var E=f.spec,S=f.cb,D=void 0===S?Qc:S,M=f.defaultTag,P=void 0===M?"default":M,L=f.v2OperationIdCompatibilityMode,U={},q={};return Tp(E,function(te){var he=te.pathName,pe=te.method,ge=te.operation,be=ge.tags?function(E){return Array.isArray(E)?E:[E]}(ge.tags):[P];be.forEach(function(Ae){if("string"==typeof Ae){q[Ae]=q[Ae]||{};var Le,Fe=q[Ae],He=De(ge,he,pe,{v2OperationIdCompatibilityMode:L}),qe=D({spec:E,pathName:he,method:pe,operation:ge,operationId:He});if(U[He])U[He]+=1,Fe[Me()(Le="".concat(He)).call(Le,U[He])]=qe;else if(void 0!==Fe[He]){var Kt,Pt,zn=U[He]||1;U[He]=zn+1,Fe[Me()(Kt="".concat(He)).call(Kt,U[He])]=qe;var En=Fe[He];delete Fe[He],Fe[Me()(Pt="".concat(He)).call(Pt,zn)]=En}else Fe[He]=qe}})}),q},Qa_makeExecute=function(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(E){var S=E.pathName,D=E.method,M=E.operationId;return function(P){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},U=f.requestInterceptor,q=f.responseInterceptor,te=f.userFetch;return f.execute(F({spec:f.spec,requestInterceptor:U,responseInterceptor:q,userFetch:te,pathName:S,method:D,parameters:P,operationId:M},L))}}},Cp=g(93165);var p_=g(1794),f_=g.n(p_),g_=g(32946);const m_={body:function(f){f.req.body=f.value},header:function(f){var E=f.req,S=f.parameter,D=f.value;E.headers=E.headers||{},void 0!==D&&(E.headers[S.name]=D)},query:function(f){var E=f.req,S=f.value,D=f.parameter;if(E.query=E.query||{},!1===S&&"boolean"===D.type&&(S="false"),0===S&&["number","integer"].indexOf(D.type)>-1&&(S="0"),S)E.query[D.name]={collectionFormat:D.collectionFormat,value:S};else if(D.allowEmptyValue&&void 0!==S){var M=D.name;E.query[M]=E.query[M]||{},E.query[M].allowEmptyValue=!0}},path:function(f){var E=f.req,S=f.value;E.url=E.url.split("{".concat(f.parameter.name,"}")).join(encodeURIComponent(S))},formData:function(f){var E=f.req,S=f.value,D=f.parameter;(S||D.allowEmptyValue)&&(E.form=E.form||{},E.form[D.name]={value:S,allowEmptyValue:D.allowEmptyValue,collectionFormat:D.collectionFormat})}};function pu(f,E){return xe()(E).call(E,"application/json")?"string"==typeof f?f:sn()(f):f.toString()}function YT(f){var E=f.req,S=f.value,D=f.parameter,M=D.name,P=D.style,L=D.explode,U=D.content;if(U){var q=Qe()(U)[0];E.url=E.url.split("{".concat(M,"}")).join(Qs(pu(S,q),{escape:!0}))}else{var te=Xl({key:D.name,value:S,style:P||"simple",explode:L||!1,escape:!0});E.url=E.url.split("{".concat(M,"}")).join(te)}}function fu(f){var E=f.req,S=f.value,D=f.parameter;if(E.query=E.query||{},D.content){var M=Qe()(D.content)[0];E.query[D.name]=pu(S,M)}else if(!1===S&&(S="false"),0===S&&(S="0"),S)E.query[D.name]={value:S,serializationOption:{style:D.style,explode:D.explode,allowReserved:D.allowReserved}};else if(D.allowEmptyValue&&void 0!==S){var q=D.name;E.query[q]=E.query[q]||{},E.query[q].allowEmptyValue=!0}}var qc=["accept","authorization","content-type"];function wp(f){var E=f.req,S=f.parameter,D=f.value;if(E.headers=E.headers||{},!(qc.indexOf(S.name.toLowerCase())>-1)){if(S.content){var M=Qe()(S.content)[0];return void(E.headers[S.name]=pu(D,M))}void 0!==D&&(E.headers[S.name]=Xl({key:S.name,value:D,style:S.style||"simple",explode:void 0!==S.explode&&S.explode,escape:!1}))}}function Rp(f){var E=f.req,S=f.parameter,D=f.value;E.headers=E.headers||{};var M=ne(D);if(S.content){var P,L=Qe()(S.content)[0];E.headers.Cookie=Me()(P="".concat(S.name,"=")).call(P,pu(D,L))}else if("undefined"!==M){var U="object"===M&&!Array.isArray(D)&&S.explode?"":"".concat(S.name,"=");E.headers.Cookie=U+Xl({key:S.name,value:D,escape:!1,style:S.style||"form",explode:void 0!==S.explode&&S.explode})}}var Ip=g(53112),Ko=g.n(Ip);var C_=["http","fetch","spec","operationId","pathName","method","parameters","securities"],Yi=function(E){return Array.isArray(E)?E:[]},Wr=Qm("OperationNotFoundError",function(E,S,D){this.originalError=D,z()(this,S||{})}),w_={buildRequest:Ap};function Ap(f){var E,S,D=f.spec,M=f.operationId,P=f.responseContentType,L=f.scheme,U=f.requestInterceptor,q=f.responseInterceptor,te=f.contextUrl,he=f.userFetch,pe=f.server,ge=f.serverVariables,be=f.http,Ae=f.parameters,Fe=f.parameterBuilders,He=Es(D);Fe||(Fe=He?o:m_);var Le={url:"",credentials:be&&be.withCredentials?"include":"same-origin",headers:{},cookies:{}};U&&(Le.requestInterceptor=U),q&&(Le.responseInterceptor=q),he&&(Le.userFetch=he);var Kt=function(f,E){return f&&f.paths?function(f,E){return Tp(f,E,!0)||null}(f,function(S){var D=S.pathName,M=S.method,P=S.operation;if(!P||"object"!==ne(P))return!1;var L=P.operationId;return[De(P,D,M),Yc(D,M),L].some(function(te){return te&&te===E})}):null}(D,M);if(!Kt)throw new Wr("Operation ".concat(M," not found"));var Pt=Kt.operation,zn=void 0===Pt?{}:Pt,En=Kt.method,gn=Kt.pathName;if(Le.url+=th({spec:D,scheme:L,contextUrl:te,server:pe,serverVariables:ge,pathName:gn,method:En}),!M)return delete Le.cookies,Le;Le.url+=gn,Le.method="".concat(En).toUpperCase(),Ae=Ae||{};var Nt=D.paths[gn]||{};P&&(Le.headers.accept=P);var $i=function(E){var S={};E.forEach(function(M){S[M.in]||(S[M.in]={}),S[M.in][M.name]=M});var D=[];return Qe()(S).forEach(function(M){Qe()(S[M]).forEach(function(P){D.push(S[M][P])})}),D}(Me()(E=Me()(S=[]).call(S,Yi(zn.parameters))).call(E,Yi(Nt.parameters)));$i.forEach(function(Yt){var ui,Yo,li=Fe[Yt.in];if("body"===Yt.in&&Yt.schema&&Yt.schema.properties&&(ui=Ae),void 0===(ui=Yt&&Yt.name&&Ae[Yt.name]))ui=Yt&&Yt.name&&Ae[Me()(Yo="".concat(Yt.in,".")).call(Yo,Yt.name)];else if(function(E,S){return Ut()(S).call(S,function(D){return D.name===E})}(Yt.name,$i).length>1){var jr;console.warn(Me()(jr="Parameter '".concat(Yt.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(jr,Yt.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==ui){if(void 0!==Yt.default&&void 0===ui&&(ui=Yt.default),void 0===ui&&Yt.required&&!Yt.allowEmptyValue)throw new Error("Required parameter ".concat(Yt.name," is not provided"));if(He&&Yt.schema&&"object"===Yt.schema.type&&"string"==typeof ui)try{ui=JSON.parse(ui)}catch(el){throw new Error("Could not parse object parameter value string as JSON")}li&&li({req:Le,parameter:Yt,value:ui,operation:zn,spec:D})}});var si=F(F({},f),{},{operation:zn});if((Le=He?function(f,E){var S=f.operation,D=f.requestBody,L=f.attachContentTypeForEmptyPayload,U=f.requestContentType;E=function(f){var E=f.request,S=f.securities,D=void 0===S?{}:S,M=f.operation,P=void 0===M?{}:M,L=f.spec,U=F({},E),q=D.authorized,te=void 0===q?{}:q,he=P.security||L.security||[],pe=te&&!!Qe()(te).length,ge=yr()(L,["components","securitySchemes"])||{};return U.headers=U.headers||{},U.query=U.query||{},Qe()(D).length&&pe&&he&&(!Array.isArray(P.security)||P.security.length)?(he.forEach(function(be){Qe()(be).forEach(function(Ae){var Fe=te[Ae],He=ge[Ae];if(Fe){var qe=Fe.value||Fe,Le=He.type;if(Fe)if("apiKey"===Le)"query"===He.in&&(U.query[He.name]=qe),"header"===He.in&&(U.headers[He.name]=qe),"cookie"===He.in&&(U.cookies[He.name]=qe);else if("http"===Le){if(/^basic$/i.test(He.scheme)){var Kt,Pt=qe.username||"",zn=qe.password||"",En=Ko()(Me()(Kt="".concat(Pt,":")).call(Kt,zn));U.headers.Authorization="Basic ".concat(En)}/^bearer$/i.test(He.scheme)&&(U.headers.Authorization="Bearer ".concat(qe))}else if("oauth2"===Le||"openIdConnect"===Le){var gn,Nt=Fe.token||{},si=Nt[He["x-tokenName"]||"access_token"],ti=Nt.token_type;(!ti||"bearer"===ti.toLowerCase())&&(ti="Bearer"),U.headers.Authorization=Me()(gn="".concat(ti," ")).call(gn,si)}}})}),U):E}({request:E,securities:f.securities,operation:S,spec:f.spec});var q=S.requestBody||{},te=Qe()(q.content||{}),he=U&&te.indexOf(U)>-1;if(D||L){if(U&&he)E.headers["Content-Type"]=U;else if(!U){var pe=te[0];pe&&(E.headers["Content-Type"]=pe,U=pe)}}else U&&he&&(E.headers["Content-Type"]=U);if(!f.responseContentType&&S.responses){var ge,be=Ut()(ge=mt()(S.responses)).call(ge,function(Fe){var He=de(Fe,2),Le=He[1],Kt=parseInt(He[0],10);return Kt>=200&&Kt<300&&f_()(Le.content)}).reduce(function(Fe,He){var Le=de(He,2)[1];return Me()(Fe).call(Fe,Qe()(Le.content))},[]);be.length>0&&(E.headers.accept=be.join(", "))}if(D)if(U){if(te.indexOf(U)>-1)if("application/x-www-form-urlencoded"===U||"multipart/form-data"===U)if("object"===ne(D)){var Ae=(q.content[U]||{}).encoding||{};E.form={},Qe()(D).forEach(function(Fe){E.form[Fe]={value:D[Fe],encoding:Ae[Fe]||{}}})}else E.form=D;else E.body=D}else E.body=D;return E}(si,Le):function(f,E){var q,te,S=f.spec,D=f.operation,P=f.requestContentType,L=f.responseContentType,U=f.attachContentTypeForEmptyPayload;if(E=function(f){var E=f.request,S=f.securities,D=void 0===S?{}:S,M=f.operation,P=void 0===M?{}:M,L=f.spec,U=F({},E),q=D.authorized,te=void 0===q?{}:q,he=D.specSecurity,ge=P.security||(void 0===he?[]:he),be=te&&!!Qe()(te).length,Ae=L.securityDefinitions;return U.headers=U.headers||{},U.query=U.query||{},Qe()(D).length&&be&&ge&&(!Array.isArray(P.security)||P.security.length)?(ge.forEach(function(Fe){Qe()(Fe).forEach(function(He){var qe=te[He];if(qe){var Le=qe.token,Kt=qe.value||qe,Pt=Ae[He],zn=Pt.type,gn=Le&&Le[Pt["x-tokenName"]||"access_token"],Nt=Le&&Le.token_type;if(qe)if("apiKey"===zn){var $i="query"===Pt.in?"query":"headers";U[$i]=U[$i]||{},U[$i][Pt.name]=Kt}else if("basic"===zn)if(Kt.header)U.headers.authorization=Kt.header;else{var si,ti=Kt.username||"",Yt=Kt.password||"";Kt.base64=Ko()(Me()(si="".concat(ti,":")).call(si,Yt)),U.headers.authorization="Basic ".concat(Kt.base64)}else if("oauth2"===zn&&gn){var li;Nt=Nt&&"bearer"!==Nt.toLowerCase()?Nt:"Bearer",U.headers.authorization=Me()(li="".concat(Nt," ")).call(li,gn)}}})}),U):E}({request:E,securities:f.securities,operation:D,spec:S}),E.body||E.form||U)if(P)E.headers["Content-Type"]=P;else if(Array.isArray(D.consumes)){var he=de(D.consumes,1);E.headers["Content-Type"]=he[0]}else if(Array.isArray(S.consumes)){var pe=de(S.consumes,1);E.headers["Content-Type"]=pe[0]}else D.parameters&&Ut()(q=D.parameters).call(q,function(He){return"file"===He.type}).length?E.headers["Content-Type"]="multipart/form-data":D.parameters&&Ut()(te=D.parameters).call(te,function(He){return"formData"===He.in}).length&&(E.headers["Content-Type"]="application/x-www-form-urlencoded");else if(P){var ge,be,Ae=D.parameters&&Ut()(ge=D.parameters).call(ge,function(He){return"body"===He.in}).length>0,Fe=D.parameters&&Ut()(be=D.parameters).call(be,function(He){return"formData"===He.in}).length>0;(Ae||Fe)&&(E.headers["Content-Type"]=P)}return!L&&Array.isArray(D.produces)&&D.produces.length>0&&(E.headers.accept=D.produces.join(", ")),E}(si,Le)).cookies&&Qe()(Le.cookies).length){var ti=Qe()(Le.cookies).reduce(function(Yt,li){return Yt+(Yt?"&":"")+g_.serialize(li,Le.cookies[li])},"");Le.headers.Cookie=ti}return Le.cookies&&delete Le.cookies,xc(Le),Le}var eh=function(E){return E?E.replace(/\W/g,""):null};function th(f){return Es(f.spec)?function(f){var E=f.spec,S=f.pathName,D=f.method,M=f.server,P=f.contextUrl,L=f.serverVariables,U=void 0===L?{}:L,q=yr()(E,["paths",S,(D||"").toLowerCase(),"servers"])||yr()(E,["paths",S,"servers"])||yr()(E,["servers"]),te="",he=null;if(M&&q&&q.length){var pe=it()(q).call(q,function(Ae){return Ae.url});pe.indexOf(M)>-1&&(te=M,he=q[pe.indexOf(M)])}if(!te&&q&&q.length){te=q[0].url;var ge=de(q,1);he=ge[0]}if(te.indexOf("{")>-1){var be=function(f){for(var D,E=[],S=/{([^}]+)}/g;D=S.exec(f);)E.push(D[1]);return E}(te);be.forEach(function(Ae){if(he.variables&&he.variables[Ae]){var He=U[Ae]||he.variables[Ae].default,qe=new RegExp("{".concat(Ae,"}"),"g");te=te.replace(qe,He)}})}return function(){var U,q,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",S=Z.parse(f&&E?Z.resolve(E,f):f),D=Z.parse(E),M=eh(S.protocol)||eh(D.protocol)||"",P=S.host||D.host,L=S.pathname||"";return"/"===(U=M&&P?Me()(q="".concat(M,"://")).call(q,P+L):L)[U.length-1]?Hr()(U).call(U,0,-1):U}(te,P)}(f):function(f){var he,pe,E=f.spec,S=f.scheme,D=f.contextUrl,P=Z.parse(void 0===D?"":D),L=Array.isArray(E.schemes)?E.schemes[0]:null,U=S||L||eh(P.protocol)||"http",q=E.host||P.host||"",te=E.basePath||"";return"/"===(he=U&&q?Me()(pe="".concat(U,"://")).call(pe,q+te):te)[he.length-1]?Hr()(he).call(he,0,-1):he}(f)}function ei(f){var E=this,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof f?S.url=f:S=f,!(this instanceof ei))return new ei(S);z()(this,S);var D=this.resolve().then(function(){return E.disableInterfaces||z()(E,ei.makeApisTagOperation(E)),E});return D.client=this,D}ei.makeHttp=function(f,E,S){return S=S||function(D){return D},E=E||function(D){return D},function(D){return"string"==typeof D&&(D={url:D}),qn.mergeInQueryOrForm(D),D=E(D),S(f(D))}}.bind(null,ei.http=Fa),ei.resolve=Bi,ei.resolveSubtree=function(f,E){return cu.apply(this,arguments)},ei.execute=function(f){var E=f.http,S=f.fetch,D=f.spec,M=f.operationId,P=f.pathName,L=f.method,U=f.parameters,q=f.securities,te=function(f,E){if(null==f)return{};var D,M,S=function(f,E){if(null==f)return{};var M,P,S={},D=n(f);for(P=0;P<D.length;P++)M=D[P],!(Cp(E).call(E,M)>=0)&&(S[M]=f[M]);return S}(f,E);if(a){var P=a(f);for(M=0;M<P.length;M++)D=P[M],!(Cp(E).call(E,D)>=0)&&(!Object.prototype.propertyIsEnumerable.call(f,D)||(S[D]=f[D]))}return S}(f,C_),he=E||S||Fa;P&&L&&!M&&(M=Yc(P,L));var pe=w_.buildRequest(F({spec:D,operationId:M,parameters:U,securities:q,http:he},te));return pe.body&&(f_()(pe.body)||Array.isArray(pe.body))&&(pe.body=sn()(pe.body)),he(pe)},ei.serializeRes=Kl,ei.serializeHeaders=Qd,ei.clearCache=function(){bs.refs.clearCache()},ei.makeApisTagOperation=function(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=Qa_makeExecute(f);return{apis:Qa_mapTagOperations({v2OperationIdCompatibilityMode:f.v2OperationIdCompatibilityMode,spec:f.spec,cb:E})}},ei.buildRequest=Ap,ei.helpers={opId:De},ei.getBaseUrl=th,(ei.prototype={http:Fa,execute:function(E){return this.applyDefaults(),ei.execute(F({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},E))},resolve:function(){var E=this,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ei.resolve(F({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},S)).then(function(D){return E.originalSpec=E.spec,E.spec=D.spec,E.errors=D.errors,E})}}).applyDefaults=function(){var E=this.spec,S=this.url;if(S&&ie()(S).call(S,"http")){var D=Z.parse(S);E.host||(E.host=D.host),E.schemes||(E.schemes=[D.protocol.replace(":","")]),E.basePath||(E.basePath="/")}};var M_=ei.helpers;const qa=ei},83082:C=>{"use strict";var A=String.prototype.replace,g=/%20/g;C.exports={default:"RFC3986",formatters:{RFC1738:function(w){return A.call(w,g,"+")},RFC3986:function(w){return String(w)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},9325:(C,A,g)=>{"use strict";var b=g(51641),w=g(48185),o=g(83082);C.exports={formats:o,parse:w,stringify:b}},48185:(C,A,g)=>{"use strict";var b=g(29499),w=Object.prototype.hasOwnProperty,o=Array.isArray,n={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:b.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},c=function(H,F){return H&&"string"==typeof H&&F.comma&&H.indexOf(",")>-1?H.split(","):H},x=function(F,Y,z,G){if(F){var ie=z.allowDots?F.replace(/\.([^.[]+)/g,"[$1]"):F,re=/(\[[^[\]]*])/g,$=z.depth>0&&/(\[[^[\]]*])/.exec(ie),ae=$?ie.slice(0,$.index):ie,K=[];if(ae){if(!z.plainObjects&&w.call(Object.prototype,ae)&&!z.allowPrototypes)return;K.push(ae)}for(var j=0;z.depth>0&&null!==($=re.exec(ie))&&j<z.depth;){if(j+=1,!z.plainObjects&&w.call(Object.prototype,$[1].slice(1,-1))&&!z.allowPrototypes)return;K.push($[1])}return $&&K.push("["+ie.slice($.index)+"]"),function(H,F,Y,z){for(var G=z?F:c(F,Y),ie=H.length-1;ie>=0;--ie){var Z,re=H[ie];if("[]"===re&&Y.parseArrays)Z=[].concat(G);else{Z=Y.plainObjects?Object.create(null):{};var $="["===re.charAt(0)&&"]"===re.charAt(re.length-1)?re.slice(1,-1):re,ae=parseInt($,10);Y.parseArrays||""!==$?!isNaN(ae)&&re!==$&&String(ae)===$&&ae>=0&&Y.parseArrays&&ae<=Y.arrayLimit?(Z=[])[ae]=G:Z[$]=G:Z={0:G}}G=Z}return G}(K,Y,z,G)}};C.exports=function(H,F){var Y=function(F){if(!F)return n;if(null!=F.decoder&&"function"!=typeof F.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==F.charset&&"utf-8"!==F.charset&&"iso-8859-1"!==F.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===F.allowDots?n.allowDots:!!F.allowDots,allowPrototypes:"boolean"==typeof F.allowPrototypes?F.allowPrototypes:n.allowPrototypes,allowSparse:"boolean"==typeof F.allowSparse?F.allowSparse:n.allowSparse,arrayLimit:"number"==typeof F.arrayLimit?F.arrayLimit:n.arrayLimit,charset:void 0===F.charset?n.charset:F.charset,charsetSentinel:"boolean"==typeof F.charsetSentinel?F.charsetSentinel:n.charsetSentinel,comma:"boolean"==typeof F.comma?F.comma:n.comma,decoder:"function"==typeof F.decoder?F.decoder:n.decoder,delimiter:"string"==typeof F.delimiter||b.isRegExp(F.delimiter)?F.delimiter:n.delimiter,depth:"number"==typeof F.depth||!1===F.depth?+F.depth:n.depth,ignoreQueryPrefix:!0===F.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof F.interpretNumericEntities?F.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:"number"==typeof F.parameterLimit?F.parameterLimit:n.parameterLimit,parseArrays:!1!==F.parseArrays,plainObjects:"boolean"==typeof F.plainObjects?F.plainObjects:n.plainObjects,strictNullHandling:"boolean"==typeof F.strictNullHandling?F.strictNullHandling:n.strictNullHandling}}(F);if(""===H||null==H)return Y.plainObjects?Object.create(null):{};for(var z="string"==typeof H?function(F,Y){var $,z={},Z=(Y.ignoreQueryPrefix?F.replace(/^\?/,""):F).split(Y.delimiter,Y.parameterLimit===1/0?void 0:Y.parameterLimit),re=-1,ae=Y.charset;if(Y.charsetSentinel)for($=0;$<Z.length;++$)0===Z[$].indexOf("utf8=")&&("utf8=%E2%9C%93"===Z[$]?ae="utf-8":"utf8=%26%2310003%3B"===Z[$]&&(ae="iso-8859-1"),re=$,$=Z.length);for($=0;$<Z.length;++$)if($!==re){var oe,W,K=Z[$],j=K.indexOf("]="),k=-1===j?K.indexOf("="):j+1;-1===k?(oe=Y.decoder(K,n.decoder,ae,"key"),W=Y.strictNullHandling?null:""):(oe=Y.decoder(K.slice(0,k),n.decoder,ae,"key"),W=b.maybeMap(c(K.slice(k+1),Y),function(J){return Y.decoder(J,n.decoder,ae,"value")})),W&&Y.interpretNumericEntities&&"iso-8859-1"===ae&&(W=W.replace(/&#(\d+);/g,function(F,Y){return String.fromCharCode(parseInt(Y,10))})),K.indexOf("[]=")>-1&&(W=o(W)?[W]:W),z[oe]=w.call(z,oe)?b.combine(z[oe],W):W}return z}(H,Y):H,G=Y.plainObjects?Object.create(null):{},ie=Object.keys(z),Z=0;Z<ie.length;++Z){var re=ie[Z],$=x(re,z[re],Y,"string"==typeof H);G=b.merge(G,$,Y)}return!0===Y.allowSparse?G:b.compact(G)}},51641:(C,A,g)=>{"use strict";var b=g(69109),w=g(29499),o=g(83082),n=Object.prototype.hasOwnProperty,a={brackets:function(z){return z+"[]"},comma:"comma",indices:function(z,G){return z+"["+G+"]"},repeat:function(z){return z}},c=Array.isArray,d=Array.prototype.push,_=function(Y,z){d.apply(Y,c(z)?z:[z])},y=Date.prototype.toISOString,R=o.default,x={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:w.encode,encodeValuesOnly:!1,format:R,formatter:o.formatters[R],indices:!1,serializeDate:function(z){return y.call(z)},skipNulls:!1,strictNullHandling:!1},H=function Y(z,G,ie,Z,re,$,ae,K,j,k,oe,W,J,ne,ee){var me=z;if(ee.has(z))throw new RangeError("Cyclic object value");if("function"==typeof ae?me=ae(G,me):me instanceof Date?me=k(me):"comma"===ie&&c(me)&&(me=w.maybeMap(me,function(Oe){return Oe instanceof Date?k(Oe):Oe})),null===me){if(Z)return $&&!J?$(G,x.encoder,ne,"key",oe):G;me=""}if(function(z){return"string"==typeof z||"number"==typeof z||"boolean"==typeof z||"symbol"==typeof z||"bigint"==typeof z}(me)||w.isBuffer(me))return $?[W(J?G:$(G,x.encoder,ne,"key",oe))+"="+W($(me,x.encoder,ne,"value",oe))]:[W(G)+"="+W(String(me))];var Ee,de=[];if(void 0===me)return de;if("comma"===ie&&c(me))Ee=[{value:me.length>0?me.join(",")||null:void 0}];else if(c(ae))Ee=ae;else{var we=Object.keys(me);Ee=K?we.sort(K):we}for(var fe=0;fe<Ee.length;++fe){var Re=Ee[fe],Te="object"==typeof Re&&void 0!==Re.value?Re.value:me[Re];if(!re||null!==Te){var Ie=c(me)?"function"==typeof ie?ie(G,Re):G:G+(j?"."+Re:"["+Re+"]");ee.set(z,!0);var xe=b();_(de,Y(Te,Ie,ie,Z,re,$,ae,K,j,k,oe,W,J,ne,xe))}}return de};C.exports=function(Y,z){var Z,G=Y,ie=function(z){if(!z)return x;if(null!=z.encoder&&"function"!=typeof z.encoder)throw new TypeError("Encoder has to be a function.");var G=z.charset||x.charset;if(void 0!==z.charset&&"utf-8"!==z.charset&&"iso-8859-1"!==z.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var ie=o.default;if(void 0!==z.format){if(!n.call(o.formatters,z.format))throw new TypeError("Unknown format option provided.");ie=z.format}var Z=o.formatters[ie],re=x.filter;return("function"==typeof z.filter||c(z.filter))&&(re=z.filter),{addQueryPrefix:"boolean"==typeof z.addQueryPrefix?z.addQueryPrefix:x.addQueryPrefix,allowDots:void 0===z.allowDots?x.allowDots:!!z.allowDots,charset:G,charsetSentinel:"boolean"==typeof z.charsetSentinel?z.charsetSentinel:x.charsetSentinel,delimiter:void 0===z.delimiter?x.delimiter:z.delimiter,encode:"boolean"==typeof z.encode?z.encode:x.encode,encoder:"function"==typeof z.encoder?z.encoder:x.encoder,encodeValuesOnly:"boolean"==typeof z.encodeValuesOnly?z.encodeValuesOnly:x.encodeValuesOnly,filter:re,format:ie,formatter:Z,serializeDate:"function"==typeof z.serializeDate?z.serializeDate:x.serializeDate,skipNulls:"boolean"==typeof z.skipNulls?z.skipNulls:x.skipNulls,sort:"function"==typeof z.sort?z.sort:null,strictNullHandling:"boolean"==typeof z.strictNullHandling?z.strictNullHandling:x.strictNullHandling}}(z);"function"==typeof ie.filter?G=(0,ie.filter)("",G):c(ie.filter)&&(Z=ie.filter);var $=[];if("object"!=typeof G||null===G)return"";var K=a[z&&z.arrayFormat in a?z.arrayFormat:z&&"indices"in z?z.indices?"indices":"repeat":"indices"];Z||(Z=Object.keys(G)),ie.sort&&Z.sort(ie.sort);for(var j=b(),k=0;k<Z.length;++k){var oe=Z[k];ie.skipNulls&&null===G[oe]||_($,H(G[oe],oe,K,ie.strictNullHandling,ie.skipNulls,ie.encode?ie.encoder:null,ie.filter,ie.sort,ie.allowDots,ie.serializeDate,ie.format,ie.formatter,ie.encodeValuesOnly,ie.charset,j))}var W=$.join(ie.delimiter),J=!0===ie.addQueryPrefix?"?":"";return ie.charsetSentinel&&(J+="iso-8859-1"===ie.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),W.length>0?J+W:""}},29499:(C,A,g)=>{"use strict";var b=g(83082),w=Object.prototype.hasOwnProperty,o=Array.isArray,n=function(){for(var z=[],G=0;G<256;++G)z.push("%"+((G<16?"0":"")+G.toString(16)).toUpperCase());return z}(),c=function(G,ie){for(var Z=ie&&ie.plainObjects?Object.create(null):{},re=0;re<G.length;++re)void 0!==G[re]&&(Z[re]=G[re]);return Z};C.exports={arrayToObject:c,assign:function(G,ie){return Object.keys(ie).reduce(function(Z,re){return Z[re]=ie[re],Z},G)},combine:function(G,ie){return[].concat(G,ie)},compact:function(G){for(var ie=[{obj:{o:G},prop:"o"}],Z=[],re=0;re<ie.length;++re)for(var $=ie[re],ae=$.obj[$.prop],K=Object.keys(ae),j=0;j<K.length;++j){var k=K[j],oe=ae[k];"object"==typeof oe&&null!==oe&&-1===Z.indexOf(oe)&&(ie.push({obj:ae,prop:k}),Z.push(oe))}return function(G){for(;G.length>1;){var ie=G.pop(),Z=ie.obj[ie.prop];if(o(Z)){for(var re=[],$=0;$<Z.length;++$)void 0!==Z[$]&&re.push(Z[$]);ie.obj[ie.prop]=re}}}(ie),G},decode:function(z,G,ie){var Z=z.replace(/\+/g," ");if("iso-8859-1"===ie)return Z.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Z)}catch(re){return Z}},encode:function(G,ie,Z,re,$){if(0===G.length)return G;var ae=G;if("symbol"==typeof G?ae=Symbol.prototype.toString.call(G):"string"!=typeof G&&(ae=String(G)),"iso-8859-1"===Z)return escape(ae).replace(/%u[0-9a-f]{4}/gi,function(oe){return"%26%23"+parseInt(oe.slice(2),16)+"%3B"});for(var K="",j=0;j<ae.length;++j){var k=ae.charCodeAt(j);45===k||46===k||95===k||126===k||k>=48&&k<=57||k>=65&&k<=90||k>=97&&k<=122||$===b.RFC1738&&(40===k||41===k)?K+=ae.charAt(j):k<128?K+=n[k]:k<2048?K+=n[192|k>>6]+n[128|63&k]:k<55296||k>=57344?K+=n[224|k>>12]+n[128|k>>6&63]+n[128|63&k]:(k=65536+((1023&k)<<10|1023&ae.charCodeAt(j+=1)),K+=n[240|k>>18]+n[128|k>>12&63]+n[128|k>>6&63]+n[128|63&k])}return K},isBuffer:function(G){return!(!G||"object"!=typeof G||!(G.constructor&&G.constructor.isBuffer&&G.constructor.isBuffer(G)))},isRegExp:function(G){return"[object RegExp]"===Object.prototype.toString.call(G)},maybeMap:function(G,ie){if(o(G)){for(var Z=[],re=0;re<G.length;re+=1)Z.push(ie(G[re]));return Z}return ie(G)},merge:function z(G,ie,Z){if(!ie)return G;if("object"!=typeof ie){if(o(G))G.push(ie);else{if(!G||"object"!=typeof G)return[G,ie];(Z&&(Z.plainObjects||Z.allowPrototypes)||!w.call(Object.prototype,ie))&&(G[ie]=!0)}return G}if(!G||"object"!=typeof G)return[G].concat(ie);var re=G;return o(G)&&!o(ie)&&(re=c(G,Z)),o(G)&&o(ie)?(ie.forEach(function($,ae){if(w.call(G,ae)){var K=G[ae];K&&"object"==typeof K&&$&&"object"==typeof $?G[ae]=z(K,$,Z):G.push($)}else G[ae]=$}),G):Object.keys(ie).reduce(function($,ae){var K=ie[ae];return $[ae]=w.call($,ae)?z($[ae],K,Z):K,$},re)}}},86439:C=>{var A=C.exports=function(F){return new g(F)};function g(F){this.value=F}function b(F,Y,z){var G=[],ie=[],Z=!0;return function re($){var ae=z?w($):$,K={},j=!0,k={node:ae,node_:$,path:[].concat(G),parent:ie[ie.length-1],parents:ie,key:G.slice(-1)[0],isRoot:0===G.length,level:G.length,circular:null,update:function(J,ne){k.isRoot||(k.parent.node[k.key]=J),k.node=J,ne&&(j=!1)},delete:function(J){delete k.parent.node[k.key],J&&(j=!1)},remove:function(J){x(k.parent.node)?k.parent.node.splice(k.key,1):delete k.parent.node[k.key],J&&(j=!1)},keys:null,before:function(J){K.before=J},after:function(J){K.after=J},pre:function(J){K.pre=J},post:function(J){K.post=J},stop:function(){Z=!1},block:function(){j=!1}};if(!Z)return k;function oe(){if("object"==typeof k.node&&null!==k.node){(!k.keys||k.node_!==k.node)&&(k.keys=o(k.node)),k.isLeaf=0==k.keys.length;for(var J=0;J<ie.length;J++)if(ie[J].node_===$){k.circular=ie[J];break}}else k.isLeaf=!0,k.keys=null;k.notLeaf=!k.isLeaf,k.notRoot=!k.isRoot}oe();var W=Y.call(k,k.node);return void 0!==W&&k.update&&k.update(W),K.before&&K.before.call(k,k.node),j&&("object"==typeof k.node&&null!==k.node&&!k.circular&&(ie.push(k),oe(),B(k.keys,function(J,ne){G.push(J),K.pre&&K.pre.call(k,k.node[J],J);var ee=re(k.node[J]);z&&H.call(k.node,J)&&(k.node[J]=ee.node),ee.isLast=ne==k.keys.length-1,ee.isFirst=0==ne,K.post&&K.post.call(k,ee),G.pop()}),ie.pop()),K.after&&K.after.call(k,k.node)),k}(F).node}function w(F){if("object"==typeof F&&null!==F){var Y;if(x(F))Y=[];else if(function(F){return"[object Date]"===n(F)}(F))Y=new Date(F.getTime?F.getTime():F);else if(function(F){return"[object RegExp]"===n(F)}(F))Y=new RegExp(F);else if(function(F){return"[object Error]"===n(F)}(F))Y={message:F.message};else if(function(F){return"[object Boolean]"===n(F)}(F))Y=new Boolean(F);else if(function(F){return"[object Number]"===n(F)}(F))Y=new Number(F);else if(function(F){return"[object String]"===n(F)}(F))Y=new String(F);else if(Object.create&&Object.getPrototypeOf)Y=Object.create(Object.getPrototypeOf(F));else if(F.constructor===Object)Y={};else{var G=function(){};G.prototype=F.constructor&&F.constructor.prototype||F.__proto__||{},Y=new G}return B(o(F),function(ie){Y[ie]=F[ie]}),Y}return F}g.prototype.get=function(F){for(var Y=this.value,z=0;z<F.length;z++){var G=F[z];if(!Y||!H.call(Y,G)){Y=void 0;break}Y=Y[G]}return Y},g.prototype.has=function(F){for(var Y=this.value,z=0;z<F.length;z++){var G=F[z];if(!Y||!H.call(Y,G))return!1;Y=Y[G]}return!0},g.prototype.set=function(F,Y){for(var z=this.value,G=0;G<F.length-1;G++){var ie=F[G];H.call(z,ie)||(z[ie]={}),z=z[ie]}return z[F[G]]=Y,Y},g.prototype.map=function(F){return b(this.value,F,!0)},g.prototype.forEach=function(F){return this.value=b(this.value,F,!1),this.value},g.prototype.reduce=function(F,Y){var z=1===arguments.length,G=z?this.value:Y;return this.forEach(function(ie){(!this.isRoot||!z)&&(G=F.call(this,G,ie))}),G},g.prototype.paths=function(){var F=[];return this.forEach(function(Y){F.push(this.path)}),F},g.prototype.nodes=function(){var F=[];return this.forEach(function(Y){F.push(this.node)}),F},g.prototype.clone=function(){var F=[],Y=[];return function z(G){for(var ie=0;ie<F.length;ie++)if(F[ie]===G)return Y[ie];if("object"==typeof G&&null!==G){var Z=w(G);return F.push(G),Y.push(Z),B(o(G),function(re){Z[re]=z(G[re])}),F.pop(),Y.pop(),Z}return G}(this.value)};var o=Object.keys||function(Y){var z=[];for(var G in Y)z.push(G);return z};function n(F){return Object.prototype.toString.call(F)}var x=Array.isArray||function(Y){return"[object Array]"===Object.prototype.toString.call(Y)},B=function(F,Y){if(F.forEach)return F.forEach(Y);for(var z=0;z<F.length;z++)Y(F[z],z,F)};B(o(g.prototype),function(F){A[F]=function(Y){var z=[].slice.call(arguments,1),G=new g(Y);return G[F].apply(G,z)}});var H=Object.hasOwnProperty||function(F,Y){return Y in F}},51397:function(C,A,g){var b;C=g.nmd(C),function(w){"object"==typeof global&&global;var c,d=2147483647,_=36,z=/^xn--/,G=/[^\x20-\x7E]/,ie=/[\x2E\u3002\uFF0E\uFF61]/g,Z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=Math.floor,ae=String.fromCharCode;function j(fe){throw RangeError(Z[fe])}function k(fe,Re){for(var Te=fe.length,Ie=[];Te--;)Ie[Te]=Re(fe[Te]);return Ie}function oe(fe,Re){var Te=fe.split("@"),Ie="";return Te.length>1&&(Ie=Te[0]+"@",fe=Te[1]),Ie+k((fe=fe.replace(ie,".")).split("."),Re).join(".")}function W(fe){for(var xe,Oe,Re=[],Te=0,Ie=fe.length;Te<Ie;)(xe=fe.charCodeAt(Te++))>=55296&&xe<=56319&&Te<Ie?56320==(64512&(Oe=fe.charCodeAt(Te++)))?Re.push(((1023&xe)<<10)+(1023&Oe)+65536):(Re.push(xe),Te--):Re.push(xe);return Re}function J(fe){return k(fe,function(Re){var Te="";return Re>65535&&(Te+=ae((Re-=65536)>>>10&1023|55296),Re=56320|1023&Re),Te+ae(Re)}).join("")}function ne(fe){return fe-48<10?fe-22:fe-65<26?fe-65:fe-97<26?fe-97:_}function ee(fe,Re){return fe+22+75*(fe<26)-((0!=Re)<<5)}function me(fe,Re,Te){var Ie=0;for(fe=Te?$(fe/700):fe>>1,fe+=$(fe/Re);fe>455;Ie+=_)fe=$(fe/35);return $(Ie+36*fe/(fe+38))}function se(fe){var Ie,et,ht,Ht,sn,Bt,it,Dt,Qe,hn,Re=[],Te=fe.length,xe=0,Oe=128,ot=72;for((et=fe.lastIndexOf("-"))<0&&(et=0),ht=0;ht<et;++ht)fe.charCodeAt(ht)>=128&&j("not-basic"),Re.push(fe.charCodeAt(ht));for(Ht=et>0?et+1:0;Ht<Te;){for(sn=xe,Bt=1,it=_;Ht>=Te&&j("invalid-input"),((Dt=ne(fe.charCodeAt(Ht++)))>=_||Dt>$((d-xe)/Bt))&&j("overflow"),xe+=Dt*Bt,!(Dt<(Qe=it<=ot?1:it>=ot+26?26:it-ot));it+=_)Bt>$(d/(hn=_-Qe))&&j("overflow"),Bt*=hn;ot=me(xe-sn,Ie=Re.length+1,0==sn),$(xe/Ie)>d-Oe&&j("overflow"),Oe+=$(xe/Ie),xe%=Ie,Re.splice(xe++,0,Oe)}return J(Re)}function de(fe){var Re,Te,Ie,xe,Oe,ot,et,ht,Ht,sn,Bt,Dt,Qe,hn,Me,it=[];for(Dt=(fe=W(fe)).length,Re=128,Te=0,Oe=72,ot=0;ot<Dt;++ot)(Bt=fe[ot])<128&&it.push(ae(Bt));for(Ie=xe=it.length,xe&&it.push("-");Ie<Dt;){for(et=d,ot=0;ot<Dt;++ot)(Bt=fe[ot])>=Re&&Bt<et&&(et=Bt);for(et-Re>$((d-Te)/(Qe=Ie+1))&&j("overflow"),Te+=(et-Re)*Qe,Re=et,ot=0;ot<Dt;++ot)if((Bt=fe[ot])<Re&&++Te>d&&j("overflow"),Bt==Re){for(ht=Te,Ht=_;!(ht<(sn=Ht<=Oe?1:Ht>=Oe+26?26:Ht-Oe));Ht+=_)it.push(ae(ee(sn+(Me=ht-sn)%(hn=_-sn),0))),ht=$(Me/hn);it.push(ae(ee(ht,0))),Oe=me(Te,Qe,Ie==xe),Te=0,++Ie}++Te,++Re}return it.join("")}c={version:"1.3.2",ucs2:{decode:W,encode:J},decode:se,encode:de,toASCII:function(fe){return oe(fe,function(Re){return G.test(Re)?"xn--"+de(Re):Re})},toUnicode:function(fe){return oe(fe,function(Re){return z.test(Re)?se(Re.slice(4).toLowerCase()):Re})}},void 0!==(b=function(){return c}.call(A,g,A,C))&&(C.exports=b)}()},23402:(C,A,g)=>{"use strict";var b=g(51397),w=g(70880);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}A.parse=Z,A.resolve=function(K,j){return Z(K,!1,!0).resolve(j)},A.resolveObject=function(K,j){return K?Z(K,!1,!0).resolveObject(j):j},A.format=function(K){return w.isString(K)&&(K=Z(K)),K instanceof o?K.format():o.prototype.format.call(K)},A.Url=o;var n=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,_=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),y=["'"].concat(_),R=["%","/","?",";","#"].concat(y),x=["/","?","#"],H=/^[+a-z0-9A-Z_-]{0,63}$/,F=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Y={javascript:!0,"javascript:":!0},z={javascript:!0,"javascript:":!0},G={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ie=g(89069);function Z(K,j,k){if(K&&w.isObject(K)&&K instanceof o)return K;var oe=new o;return oe.parse(K,j,k),oe}o.prototype.parse=function(K,j,k){if(!w.isString(K))throw new TypeError("Parameter 'url' must be a string, not "+typeof K);var oe=K.indexOf("?"),W=-1!==oe&&oe<K.indexOf("#")?"?":"#",J=K.split(W);J[0]=J[0].replace(/\\/g,"/");var ee=K=J.join(W);if(ee=ee.trim(),!k&&1===K.split("#").length){var me=c.exec(ee);if(me)return this.path=ee,this.href=ee,this.pathname=me[1],me[2]?(this.search=me[2],this.query=j?ie.parse(this.search.substr(1)):this.search.substr(1)):j&&(this.search="",this.query={}),this}var se=n.exec(ee);if(se){var de=(se=se[0]).toLowerCase();this.protocol=de,ee=ee.substr(se.length)}if(k||se||ee.match(/^\/\/[^@\/]+@[^@\/]+/)){var Ee="//"===ee.substr(0,2);Ee&&(!se||!z[se])&&(ee=ee.substr(2),this.slashes=!0)}if(!z[se]&&(Ee||se&&!G[se])){for(var we=-1,fe=0;fe<x.length;fe++)-1!==(Re=ee.indexOf(x[fe]))&&(-1===we||Re<we)&&(we=Re);var Te,Ie;for(-1!==(Ie=-1===we?ee.lastIndexOf("@"):ee.lastIndexOf("@",we))&&(Te=ee.slice(0,Ie),ee=ee.slice(Ie+1),this.auth=decodeURIComponent(Te)),we=-1,fe=0;fe<R.length;fe++){var Re;-1!==(Re=ee.indexOf(R[fe]))&&(-1===we||Re<we)&&(we=Re)}-1===we&&(we=ee.length),this.host=ee.slice(0,we),ee=ee.slice(we),this.parseHost(),this.hostname=this.hostname||"";var xe="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!xe)for(var Oe=this.hostname.split(/\./),ot=(fe=0,Oe.length);fe<ot;fe++){var et=Oe[fe];if(et&&!et.match(H)){for(var ht="",Ht=0,sn=et.length;Ht<sn;Ht++)et.charCodeAt(Ht)>127?ht+="x":ht+=et[Ht];if(!ht.match(H)){var Bt=Oe.slice(0,fe),it=Oe.slice(fe+1),Dt=et.match(F);Dt&&(Bt.push(Dt[1]),it.unshift(Dt[2])),it.length&&(ee="/"+it.join(".")+ee),this.hostname=Bt.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),xe||(this.hostname=b.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,xe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ee[0]&&(ee="/"+ee))}if(!Y[de])for(fe=0,ot=y.length;fe<ot;fe++){var Me=y[fe];if(-1!==ee.indexOf(Me)){var Dn=encodeURIComponent(Me);Dn===Me&&(Dn=escape(Me)),ee=ee.split(Me).join(Dn)}}var mt=ee.indexOf("#");-1!==mt&&(this.hash=ee.substr(mt),ee=ee.slice(0,mt));var dn=ee.indexOf("?");return-1!==dn?(this.search=ee.substr(dn),this.query=ee.substr(dn+1),j&&(this.query=ie.parse(this.query)),ee=ee.slice(0,dn)):j&&(this.search="",this.query={}),ee&&(this.pathname=ee),G[de]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},o.prototype.format=function(){var K=this.auth||"";K&&(K=(K=encodeURIComponent(K)).replace(/%3A/i,":"),K+="@");var j=this.protocol||"",k=this.pathname||"",oe=this.hash||"",W=!1,J="";this.host?W=K+this.host:this.hostname&&(W=K+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(W+=":"+this.port)),this.query&&w.isObject(this.query)&&Object.keys(this.query).length&&(J=ie.stringify(this.query));var ne=this.search||J&&"?"+J||"";return j&&":"!==j.substr(-1)&&(j+=":"),this.slashes||(!j||G[j])&&!1!==W?(W="//"+(W||""),k&&"/"!==k.charAt(0)&&(k="/"+k)):W||(W=""),oe&&"#"!==oe.charAt(0)&&(oe="#"+oe),ne&&"?"!==ne.charAt(0)&&(ne="?"+ne),j+W+(k=k.replace(/[?#]/g,function(ee){return encodeURIComponent(ee)}))+(ne=ne.replace("#","%23"))+oe},o.prototype.resolve=function(K){return this.resolveObject(Z(K,!1,!0)).format()},o.prototype.resolveObject=function(K){if(w.isString(K)){var j=new o;j.parse(K,!1,!0),K=j}for(var k=new o,oe=Object.keys(this),W=0;W<oe.length;W++){var J=oe[W];k[J]=this[J]}if(k.hash=K.hash,""===K.href)return k.href=k.format(),k;if(K.slashes&&!K.protocol){for(var ne=Object.keys(K),ee=0;ee<ne.length;ee++){var me=ne[ee];"protocol"!==me&&(k[me]=K[me])}return G[k.protocol]&&k.hostname&&!k.pathname&&(k.path=k.pathname="/"),k.href=k.format(),k}if(K.protocol&&K.protocol!==k.protocol){if(!G[K.protocol]){for(var se=Object.keys(K),de=0;de<se.length;de++){var Ee=se[de];k[Ee]=K[Ee]}return k.href=k.format(),k}if(k.protocol=K.protocol,K.host||z[K.protocol])k.pathname=K.pathname;else{for(var ot=(K.pathname||"").split("/");ot.length&&!(K.host=ot.shift()););K.host||(K.host=""),K.hostname||(K.hostname=""),""!==ot[0]&&ot.unshift(""),ot.length<2&&ot.unshift(""),k.pathname=ot.join("/")}return k.search=K.search,k.query=K.query,k.host=K.host||"",k.auth=K.auth,k.hostname=K.hostname||K.host,k.port=K.port,(k.pathname||k.search)&&(k.path=(k.pathname||"")+(k.search||"")),k.slashes=k.slashes||K.slashes,k.href=k.format(),k}var Re=k.pathname&&"/"===k.pathname.charAt(0),Te=K.host||K.pathname&&"/"===K.pathname.charAt(0),Ie=Te||Re||k.host&&K.pathname,xe=Ie,Oe=k.pathname&&k.pathname.split("/")||[],et=(ot=K.pathname&&K.pathname.split("/")||[],k.protocol&&!G[k.protocol]);if(et&&(k.hostname="",k.port=null,k.host&&(""===Oe[0]?Oe[0]=k.host:Oe.unshift(k.host)),k.host="",K.protocol&&(K.hostname=null,K.port=null,K.host&&(""===ot[0]?ot[0]=K.host:ot.unshift(K.host)),K.host=null),Ie=Ie&&(""===ot[0]||""===Oe[0])),Te)k.host=K.host||""===K.host?K.host:k.host,k.hostname=K.hostname||""===K.hostname?K.hostname:k.hostname,k.search=K.search,k.query=K.query,Oe=ot;else if(ot.length)Oe||(Oe=[]),Oe.pop(),Oe=Oe.concat(ot),k.search=K.search,k.query=K.query;else if(!w.isNullOrUndefined(K.search))return et&&(k.hostname=k.host=Oe.shift(),(ht=!!(k.host&&k.host.indexOf("@")>0)&&k.host.split("@"))&&(k.auth=ht.shift(),k.host=k.hostname=ht.shift())),k.search=K.search,k.query=K.query,(!w.isNull(k.pathname)||!w.isNull(k.search))&&(k.path=(k.pathname?k.pathname:"")+(k.search?k.search:"")),k.href=k.format(),k;if(!Oe.length)return k.pathname=null,k.path=k.search?"/"+k.search:null,k.href=k.format(),k;for(var Ht=Oe.slice(-1)[0],sn=(k.host||K.host||Oe.length>1)&&("."===Ht||".."===Ht)||""===Ht,Bt=0,it=Oe.length;it>=0;it--)"."===(Ht=Oe[it])?Oe.splice(it,1):".."===Ht?(Oe.splice(it,1),Bt++):Bt&&(Oe.splice(it,1),Bt--);if(!Ie&&!xe)for(;Bt--;Bt)Oe.unshift("..");Ie&&""!==Oe[0]&&(!Oe[0]||"/"!==Oe[0].charAt(0))&&Oe.unshift(""),sn&&"/"!==Oe.join("/").substr(-1)&&Oe.push("");var ht,Dt=""===Oe[0]||Oe[0]&&"/"===Oe[0].charAt(0);return et&&(k.hostname=k.host=Dt?"":Oe.length?Oe.shift():"",(ht=!!(k.host&&k.host.indexOf("@")>0)&&k.host.split("@"))&&(k.auth=ht.shift(),k.host=k.hostname=ht.shift())),(Ie=Ie||k.host&&Oe.length)&&!Dt&&Oe.unshift(""),Oe.length?k.pathname=Oe.join("/"):(k.pathname=null,k.path=null),(!w.isNull(k.pathname)||!w.isNull(k.search))&&(k.path=(k.pathname?k.pathname:"")+(k.search?k.search:"")),k.auth=K.auth||k.auth,k.slashes=k.slashes||K.slashes,k.href=k.format(),k},o.prototype.parseHost=function(){var K=this.host,j=a.exec(K);j&&(":"!==(j=j[0])&&(this.port=j.substr(1)),K=K.substr(0,K.length-j.length)),K&&(this.hostname=K)}},70880:C=>{"use strict";C.exports={isString:function(A){return"string"==typeof A},isObject:function(A){return"object"==typeof A&&null!==A},isNull:function(A){return null===A},isNullOrUndefined:function(A){return null==A}}},96553:()=>{}},C=>{C(C.s=8309)}]);