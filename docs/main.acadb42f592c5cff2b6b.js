var Ioe=Object.defineProperty,Aoe=(T,A,m)=>A in T?Ioe(T,A,{enumerable:!0,configurable:!0,writable:!0,value:m}):T[A]=m,Ya=(T,A,m)=>(Aoe(T,"symbol"!=typeof A?A+"":A,m),m);(self.webpackChunkauto_blockly_app=self.webpackChunkauto_blockly_app||[]).push([[179],{98255:T=>{function A(m){return Promise.resolve().then(()=>{var y=new Error("Cannot find module '"+m+"'");throw y.code="MODULE_NOT_FOUND",y})}A.keys=()=>[],A.resolve=A,A.id=98255,T.exports=A},38506:T=>{function A(y,S,s,o,l,u,h){try{var _=y[u](h),b=_.value}catch(D){return void s(D)}_.done?S(b):Promise.resolve(b).then(o,l)}T.exports=function(y){return function(){var S=this,s=arguments;return new Promise(function(o,l){var u=y.apply(S,s);function h(b){A(u,o,l,h,_,"next",b)}function _(b){A(u,o,l,h,_,"throw",b)}h(void 0)})}},T.exports.default=T.exports,T.exports.__esModule=!0},89926:(T,A,m)=>{T.exports=m(96353)},87048:(T,A,m)=>{T.exports=m(85671)},20272:(T,A,m)=>{T.exports=m(60580)},26775:(T,A,m)=>{T.exports=m(26271)},78804:(T,A,m)=>{T.exports=m(82237)},11761:(T,A,m)=>{T.exports=m(26944)},64770:(T,A,m)=>{T.exports=m(3245)},71049:(T,A,m)=>{T.exports=m(34123)},3498:(T,A,m)=>{T.exports=m(43264)},38330:(T,A,m)=>{T.exports=m(75991)},23289:(T,A,m)=>{T.exports=m(65155)},53130:(T,A,m)=>{T.exports=m(80301)},45107:(T,A,m)=>{T.exports=m(81145)},45635:(T,A,m)=>{T.exports=m(158)},96916:(T,A,m)=>{T.exports=m(27620)},58258:(T,A,m)=>{T.exports=m(37254)},14569:(T,A,m)=>{T.exports=m(30770)},97326:(T,A,m)=>{T.exports=m(96883)},57124:(T,A,m)=>{T.exports=m(21244)},57272:(T,A,m)=>{T.exports=m(81548)},66360:(T,A,m)=>{T.exports=m(30206)},71094:(T,A,m)=>{T.exports=m(73915)},93165:(T,A,m)=>{T.exports=m(91391)},19898:(T,A,m)=>{T.exports=m(16557)},84916:(T,A,m)=>{T.exports=m(11944)},31946:(T,A,m)=>{T.exports=m(63780)},18753:(T,A,m)=>{T.exports=m(65332)},90343:(T,A,m)=>{T.exports=m(66203)},12988:(T,A,m)=>{T.exports=m(98836)},23005:(T,A,m)=>{T.exports=m(89857)},26394:(T,A,m)=>{T.exports=m(42658)},93449:(T,A,m)=>{T.exports=m(93585)},3599:(T,A,m)=>{T.exports=m(9207)},39126:(T,A,m)=>{T.exports=m(32518)},2805:(T,A,m)=>{"use strict";m.r(A),m.d(A,{__extends:()=>S,__assign:()=>s,__rest:()=>o,__decorate:()=>l,__param:()=>u,__metadata:()=>h,__awaiter:()=>_,__generator:()=>b,__createBinding:()=>D,__exportStar:()=>x,__values:()=>G,__read:()=>j,__spread:()=>F,__spreadArrays:()=>q,__spreadArray:()=>Q,__await:()=>Y,__asyncGenerator:()=>ae,__asyncDelegator:()=>ie,__asyncValues:()=>he,__makeTemplateObject:()=>te,__importStar:()=>ee,__importDefault:()=>$,__classPrivateFieldGet:()=>H,__classPrivateFieldSet:()=>de});var y=function(J,B){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,ce){re.__proto__=ce}||function(re,ce){for(var Ee in ce)Object.prototype.hasOwnProperty.call(ce,Ee)&&(re[Ee]=ce[Ee])})(J,B)};function S(J,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function re(){this.constructor=J}y(J,B),J.prototype=null===B?Object.create(B):(re.prototype=B.prototype,new re)}var s=function(){return(s=Object.assign||function(B){for(var re,ce=1,Ee=arguments.length;ce<Ee;ce++)for(var pe in re=arguments[ce])Object.prototype.hasOwnProperty.call(re,pe)&&(B[pe]=re[pe]);return B}).apply(this,arguments)};function o(J,B){var re={};for(var ce in J)Object.prototype.hasOwnProperty.call(J,ce)&&B.indexOf(ce)<0&&(re[ce]=J[ce]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var Ee=0;for(ce=Object.getOwnPropertySymbols(J);Ee<ce.length;Ee++)B.indexOf(ce[Ee])<0&&Object.prototype.propertyIsEnumerable.call(J,ce[Ee])&&(re[ce[Ee]]=J[ce[Ee]])}return re}function l(J,B,re,ce){var ye,Ee=arguments.length,pe=Ee<3?B:null===ce?ce=Object.getOwnPropertyDescriptor(B,re):ce;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)pe=Reflect.decorate(J,B,re,ce);else for(var Pe=J.length-1;Pe>=0;Pe--)(ye=J[Pe])&&(pe=(Ee<3?ye(pe):Ee>3?ye(B,re,pe):ye(B,re))||pe);return Ee>3&&pe&&Object.defineProperty(B,re,pe),pe}function u(J,B){return function(re,ce){B(re,ce,J)}}function h(J,B){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(J,B)}function _(J,B,re,ce){return new(re||(re=Promise))(function(pe,ye){function Pe(He){try{Me(ce.next(He))}catch(Ye){ye(Ye)}}function Ue(He){try{Me(ce.throw(He))}catch(Ye){ye(Ye)}}function Me(He){He.done?pe(He.value):function(pe){return pe instanceof re?pe:new re(function(ye){ye(pe)})}(He.value).then(Pe,Ue)}Me((ce=ce.apply(J,B||[])).next())})}function b(J,B){var ce,Ee,pe,ye,re={label:0,sent:function(){if(1&pe[0])throw pe[1];return pe[1]},trys:[],ops:[]};return ye={next:Pe(0),throw:Pe(1),return:Pe(2)},"function"==typeof Symbol&&(ye[Symbol.iterator]=function(){return this}),ye;function Pe(Me){return function(He){return function(Me){if(ce)throw new TypeError("Generator is already executing.");for(;re;)try{if(ce=1,Ee&&(pe=2&Me[0]?Ee.return:Me[0]?Ee.throw||((pe=Ee.return)&&pe.call(Ee),0):Ee.next)&&!(pe=pe.call(Ee,Me[1])).done)return pe;switch(Ee=0,pe&&(Me=[2&Me[0],pe.value]),Me[0]){case 0:case 1:pe=Me;break;case 4:return re.label++,{value:Me[1],done:!1};case 5:re.label++,Ee=Me[1],Me=[0];continue;case 7:Me=re.ops.pop(),re.trys.pop();continue;default:if(!(pe=(pe=re.trys).length>0&&pe[pe.length-1])&&(6===Me[0]||2===Me[0])){re=0;continue}if(3===Me[0]&&(!pe||Me[1]>pe[0]&&Me[1]<pe[3])){re.label=Me[1];break}if(6===Me[0]&&re.label<pe[1]){re.label=pe[1],pe=Me;break}if(pe&&re.label<pe[2]){re.label=pe[2],re.ops.push(Me);break}pe[2]&&re.ops.pop(),re.trys.pop();continue}Me=B.call(J,re)}catch(He){Me=[6,He],Ee=0}finally{ce=pe=0}if(5&Me[0])throw Me[1];return{value:Me[0]?Me[1]:void 0,done:!0}}([Me,He])}}}var D=Object.create?function(J,B,re,ce){void 0===ce&&(ce=re),Object.defineProperty(J,ce,{enumerable:!0,get:function(){return B[re]}})}:function(J,B,re,ce){void 0===ce&&(ce=re),J[ce]=B[re]};function x(J,B){for(var re in J)"default"!==re&&!Object.prototype.hasOwnProperty.call(B,re)&&D(B,J,re)}function G(J){var B="function"==typeof Symbol&&Symbol.iterator,re=B&&J[B],ce=0;if(re)return re.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ce>=J.length&&(J=void 0),{value:J&&J[ce++],done:!J}}};throw new TypeError(B?"Object is not iterable.":"Symbol.iterator is not defined.")}function j(J,B){var re="function"==typeof Symbol&&J[Symbol.iterator];if(!re)return J;var Ee,ye,ce=re.call(J),pe=[];try{for(;(void 0===B||B-- >0)&&!(Ee=ce.next()).done;)pe.push(Ee.value)}catch(Pe){ye={error:Pe}}finally{try{Ee&&!Ee.done&&(re=ce.return)&&re.call(ce)}finally{if(ye)throw ye.error}}return pe}function F(){for(var J=[],B=0;B<arguments.length;B++)J=J.concat(j(arguments[B]));return J}function q(){for(var J=0,B=0,re=arguments.length;B<re;B++)J+=arguments[B].length;var ce=Array(J),Ee=0;for(B=0;B<re;B++)for(var pe=arguments[B],ye=0,Pe=pe.length;ye<Pe;ye++,Ee++)ce[Ee]=pe[ye];return ce}function Q(J,B,re){if(re||2===arguments.length)for(var pe,ce=0,Ee=B.length;ce<Ee;ce++)(pe||!(ce in B))&&(pe||(pe=Array.prototype.slice.call(B,0,ce)),pe[ce]=B[ce]);return J.concat(pe||B)}function Y(J){return this instanceof Y?(this.v=J,this):new Y(J)}function ae(J,B,re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,ce=re.apply(J,B||[]),pe=[];return Ee={},ye("next"),ye("throw"),ye("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee;function ye(st){ce[st]&&(Ee[st]=function(yt){return new Promise(function(Ke,Tt){pe.push([st,yt,Ke,Tt])>1||Pe(st,yt)})})}function Pe(st,yt){try{!function(st){st.value instanceof Y?Promise.resolve(st.value.v).then(Me,He):Ye(pe[0][2],st)}(ce[st](yt))}catch(Ke){Ye(pe[0][3],Ke)}}function Me(st){Pe("next",st)}function He(st){Pe("throw",st)}function Ye(st,yt){st(yt),pe.shift(),pe.length&&Pe(pe[0][0],pe[0][1])}}function ie(J){var B,re;return B={},ce("next"),ce("throw",function(Ee){throw Ee}),ce("return"),B[Symbol.iterator]=function(){return this},B;function ce(Ee,pe){B[Ee]=J[Ee]?function(ye){return(re=!re)?{value:Y(J[Ee](ye)),done:"return"===Ee}:pe?pe(ye):ye}:pe}}function he(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var re,B=J[Symbol.asyncIterator];return B?B.call(J):(J=G(J),re={},ce("next"),ce("throw"),ce("return"),re[Symbol.asyncIterator]=function(){return this},re);function ce(pe){re[pe]=J[pe]&&function(ye){return new Promise(function(Pe,Ue){!function(pe,ye,Pe,Ue){Promise.resolve(Ue).then(function(Me){pe({value:Me,done:Pe})},ye)}(Pe,Ue,(ye=J[pe](ye)).done,ye.value)})}}}function te(J,B){return Object.defineProperty?Object.defineProperty(J,"raw",{value:B}):J.raw=B,J}var Z=Object.create?function(J,B){Object.defineProperty(J,"default",{enumerable:!0,value:B})}:function(J,B){J.default=B};function ee(J){if(J&&J.__esModule)return J;var B={};if(null!=J)for(var re in J)"default"!==re&&Object.prototype.hasOwnProperty.call(J,re)&&D(B,J,re);return Z(B,J),B}function $(J){return J&&J.__esModule?J:{default:J}}function H(J,B,re,ce){if("a"===re&&!ce)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof B?J!==B||!ce:!B.has(J))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===re?ce:"a"===re?ce.call(J):ce?ce.value:B.get(J)}function de(J,B,re,ce,Ee){if("m"===ce)throw new TypeError("Private method is not writable");if("a"===ce&&!Ee)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof B?J!==B||!Ee:!B.has(J))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===ce?Ee.call(J,re):Ee?Ee.value=re:B.set(J,re),re}},72749:function(T,A,m){var y,S,s;S=[m(99240)],void 0!==(s="function"==typeof(y=function(o){"use strict";return o})?y.apply(A,S):y)&&(T.exports=s)},99240:function(T,A){var m,S;void 0!==(S="function"==typeof(m=function(){"use strict";var s={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:5,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:28};return s.CONNECTING_SNAP_RADIUS=s.SNAP_RADIUS,s.CURRENT_CONNECTION_PREFERENCE=8,s.BUMP_DELAY=250,s.BUMP_RANDOMNESS=10,s.COLLAPSE_CHARS=30,s.LONGPRESS=750,s.SOUND_LIMIT=100,s.DRAG_STACK=!0,s.HSV_SATURATION=.45,s.HSV_VALUE=.65,s.SPRITE={width:96,height:124,url:"sprites.png"},s.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},s.DRAG_NONE=0,s.DRAG_STICKY=1,s.DRAG_BEGIN=1,s.DRAG_FREE=2,s.OPPOSITE_TYPE=[],s.OPPOSITE_TYPE[s.connectionTypes.INPUT_VALUE]=s.connectionTypes.OUTPUT_VALUE,s.OPPOSITE_TYPE[s.connectionTypes.OUTPUT_VALUE]=s.connectionTypes.INPUT_VALUE,s.OPPOSITE_TYPE[s.connectionTypes.NEXT_STATEMENT]=s.connectionTypes.PREVIOUS_STATEMENT,s.OPPOSITE_TYPE[s.connectionTypes.PREVIOUS_STATEMENT]=s.connectionTypes.NEXT_STATEMENT,s.VARIABLE_CATEGORY_NAME="VARIABLE",s.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",s.PROCEDURE_CATEGORY_NAME="PROCEDURE",s.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",s.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",s.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",s.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",s.utils={},s.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),s.Msg={},s.utils.global.Blockly||(s.utils.global.Blockly={}),s.utils.global.Blockly.Msg||(s.utils.global.Blockly.Msg=s.Msg),s.utils.colour={},s.utils.colour.parse=function(o){o=String(o).toLowerCase().trim();var l=s.utils.colour.names[o];if(l||(l="0x"==o.substring(0,2)?"#"+o.substring(2):o,/^#[0-9a-f]{6}$/.test(l="#"==l[0]?l:"#"+l)))return l;if(/^#[0-9a-f]{3}$/.test(l))return["#",l[1],l[1],l[2],l[2],l[3],l[3]].join("");var u=o.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return u&&(o=Number(u[1]),l=Number(u[2]),u=Number(u[3]),0<=o&&256>o&&0<=l&&256>l&&0<=u&&256>u)?s.utils.colour.rgbToHex(o,l,u):null},s.utils.colour.rgbToHex=function(o,l,u){return l=o<<16|l<<8|u,16>o?"#"+(16777216|l).toString(16).substr(1):"#"+l.toString(16)},s.utils.colour.hexToRgb=function(o){return(o=s.utils.colour.parse(o))?[(o=parseInt(o.substr(1),16))>>16,o>>8&255,255&o]:[0,0,0]},s.utils.colour.hsvToHex=function(o,l,u){var h=0,_=0,b=0;if(0==l)b=_=h=u;else{var D=Math.floor(o/60),x=o/60-D;o=u*(1-l);var G=u*(1-l*x);switch(l=u*(1-l*(1-x)),D){case 1:h=G,_=u,b=o;break;case 2:h=o,_=u,b=l;break;case 3:h=o,_=G,b=u;break;case 4:h=l,_=o,b=u;break;case 5:h=u,_=o,b=G;break;case 6:case 0:h=u,_=l,b=o}}return s.utils.colour.rgbToHex(Math.floor(h),Math.floor(_),Math.floor(b))},s.utils.colour.blend=function(o,l,u){return(o=s.utils.colour.parse(o))&&(l=s.utils.colour.parse(l))?(o=s.utils.colour.hexToRgb(o),l=s.utils.colour.hexToRgb(l),s.utils.colour.rgbToHex(Math.round(l[0]+u*(o[0]-l[0])),Math.round(l[1]+u*(o[1]-l[1])),Math.round(l[2]+u*(o[2]-l[2])))):null},s.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},s.utils.Coordinate=function(o,l){this.x=o,this.y=l},s.utils.Coordinate.equals=function(o,l){return o==l||!(!o||!l)&&o.x==l.x&&o.y==l.y},s.utils.Coordinate.distance=function(o,l){var u=o.x-l.x;return o=o.y-l.y,Math.sqrt(u*u+o*o)},s.utils.Coordinate.magnitude=function(o){return Math.sqrt(o.x*o.x+o.y*o.y)},s.utils.Coordinate.difference=function(o,l){return new s.utils.Coordinate(o.x-l.x,o.y-l.y)},s.utils.Coordinate.sum=function(o,l){return new s.utils.Coordinate(o.x+l.x,o.y+l.y)},s.utils.Coordinate.prototype.clone=function(){return new s.utils.Coordinate(this.x,this.y)},s.utils.Coordinate.prototype.scale=function(o){return this.x*=o,this.y*=o,this},s.utils.Coordinate.prototype.translate=function(o,l){return this.x+=o,this.y+=l,this},s.utils.Rect=function(o,l,u,h){this.top=o,this.bottom=l,this.left=u,this.right=h},s.utils.Rect.prototype.contains=function(o,l){return o>=this.left&&o<=this.right&&l>=this.top&&l<=this.bottom},s.utils.Rect.prototype.intersects=function(o){return!(this.left>o.right||this.right<o.left||this.top>o.bottom||this.bottom<o.top)},s.utils.string={},s.utils.string.startsWith=function(o,l){return 0==o.lastIndexOf(l,0)},s.utils.string.shortestStringLength=function(o){return o.length?o.reduce(function(l,u){return l.length<u.length?l:u}).length:0},s.utils.string.commonWordPrefix=function(o,l){if(!o.length)return 0;if(1==o.length)return o[0].length;var u=0;l=l||s.utils.string.shortestStringLength(o);for(var h=0;h<l;h++){for(var _=o[0][h],b=1;b<o.length;b++)if(_!=o[b][h])return u;" "==_&&(u=h+1)}for(b=1;b<o.length;b++)if((_=o[b][h])&&" "!=_)return u;return l},s.utils.string.commonWordSuffix=function(o,l){if(!o.length)return 0;if(1==o.length)return o[0].length;var u=0;l=l||s.utils.string.shortestStringLength(o);for(var h=0;h<l;h++){for(var _=o[0].substr(-h-1,1),b=1;b<o.length;b++)if(_!=o[b].substr(-h-1,1))return u;" "==_&&(u=h+1)}for(b=1;b<o.length;b++)if((_=o[b].charAt(o[b].length-h-1))&&" "!=_)return u;return l},s.utils.string.wrap=function(o,l){o=o.split("\n");for(var u=0;u<o.length;u++)o[u]=s.utils.string.wrapLine_(o[u],l);return o.join("\n")},s.utils.string.wrapLine_=function(o,l){if(o.length<=l)return o;for(var u=o.trim().split(/\s+/),h=0;h<u.length;h++)u[h].length>l&&(l=u[h].length);h=-1/0;var _=1;do{var b=h,D=o;o=[];var x=u.length/_,G=1;for(h=0;h<u.length-1;h++)G<(h+1.5)/x?(G++,o[h]=!0):o[h]=!1;o=s.utils.string.wrapMutate_(u,o,l),h=s.utils.string.wrapScore_(u,o,l),o=s.utils.string.wrapToText_(u,o),_++}while(h>b);return D},s.utils.string.wrapScore_=function(o,l,u){for(var h=[0],_=[],b=0;b<o.length;b++)h[h.length-1]+=o[b].length,!0===l[b]?(h.push(0),_.push(o[b].charAt(o[b].length-1))):!1===l[b]&&h[h.length-1]++;for(o=Math.max.apply(Math,h),b=l=0;b<h.length;b++)l-=2*Math.pow(Math.abs(u-h[b]),1.5),l-=Math.pow(o-h[b],1.5),-1!=".?!".indexOf(_[b])?l+=u/3:-1!=",;)]}".indexOf(_[b])&&(l+=u/4);return 1<h.length&&h[h.length-1]<=h[h.length-2]&&(l+=.5),l},s.utils.string.wrapMutate_=function(o,l,u){for(var _,h=s.utils.string.wrapScore_(o,l,u),b=0;b<l.length-1;b++)if(l[b]!=l[b+1]){var D=[].concat(l);D[b]=!D[b],D[b+1]=!D[b+1];var x=s.utils.string.wrapScore_(o,D,u);x>h&&(h=x,_=D)}return _?s.utils.string.wrapMutate_(o,_,u):l},s.utils.string.wrapToText_=function(o,l){for(var u=[],h=0;h<o.length;h++)u.push(o[h]),void 0!==l[h]&&u.push(l[h]?"\n":" ");return u.join("")},s.utils.Size=function(o,l){this.width=o,this.height=l},s.utils.Size.equals=function(o,l){return o==l||!(!o||!l)&&o.width==l.width&&o.height==l.height},s.utils.style={},s.utils.style.getSize=function(o){if("none"!=s.utils.style.getStyle_(o,"display"))return s.utils.style.getSizeWithDisplay_(o);var l=o.style,u=l.display,h=l.visibility,_=l.position;l.visibility="hidden",l.position="absolute",l.display="inline";var b=o.offsetWidth;return o=o.offsetHeight,l.display=u,l.position=_,l.visibility=h,new s.utils.Size(b,o)},s.utils.style.getSizeWithDisplay_=function(o){return new s.utils.Size(o.offsetWidth,o.offsetHeight)},s.utils.style.getStyle_=function(o,l){return s.utils.style.getComputedStyle(o,l)||s.utils.style.getCascadedStyle(o,l)||o.style&&o.style[l]},s.utils.style.getComputedStyle=function(o,l){return document.defaultView&&document.defaultView.getComputedStyle&&(o=document.defaultView.getComputedStyle(o,null))&&(o[l]||o.getPropertyValue(l))||""},s.utils.style.getCascadedStyle=function(o,l){return o.currentStyle?o.currentStyle[l]:null},s.utils.style.getPageOffset=function(o){var l=new s.utils.Coordinate(0,0);o=o.getBoundingClientRect();var u=document.documentElement;return u=new s.utils.Coordinate(window.pageXOffset||u.scrollLeft,window.pageYOffset||u.scrollTop),l.x=o.left+u.x,l.y=o.top+u.y,l},s.utils.style.getViewportPageOffset=function(){var o=document.body,l=document.documentElement;return new s.utils.Coordinate(o.scrollLeft||l.scrollLeft,o.scrollTop||l.scrollTop)},s.utils.style.setElementShown=function(o,l){o.style.display=l?"":"none"},s.utils.style.isRightToLeft=function(o){return"rtl"==s.utils.style.getStyle_(o,"direction")},s.utils.style.getBorderBox=function(o){var l=s.utils.style.getComputedStyle(o,"borderLeftWidth"),u=s.utils.style.getComputedStyle(o,"borderRightWidth"),h=s.utils.style.getComputedStyle(o,"borderTopWidth");return o=s.utils.style.getComputedStyle(o,"borderBottomWidth"),{top:parseFloat(h),right:parseFloat(u),bottom:parseFloat(o),left:parseFloat(l)}},s.utils.style.scrollIntoContainerView=function(o,l,u){o=s.utils.style.getContainerOffsetToScrollInto(o,l,u),l.scrollLeft=o.x,l.scrollTop=o.y},s.utils.style.getContainerOffsetToScrollInto=function(o,l,u){var h=s.utils.style.getPageOffset(o),_=s.utils.style.getPageOffset(l),b=s.utils.style.getBorderBox(l),D=h.x-_.x-b.left;return h=h.y-_.y-b.top,_=s.utils.style.getSizeWithDisplay_(o),o=l.clientWidth-_.width,_=l.clientHeight-_.height,b=l.scrollLeft,l=l.scrollTop,u?(b+=D-o/2,l+=h-_/2):(b+=Math.min(D,Math.max(D-o,0)),l+=Math.min(h,Math.max(h-_,0))),new s.utils.Coordinate(b,l)},s.utils.userAgent={},function(o){function l(h){return-1!=u.indexOf(h.toUpperCase())}s.utils.userAgent.raw=o;var u=s.utils.userAgent.raw.toUpperCase();s.utils.userAgent.IE=l("Trident")||l("MSIE"),s.utils.userAgent.EDGE=l("Edge"),s.utils.userAgent.JAVA_FX=l("JavaFX"),s.utils.userAgent.CHROME=(l("Chrome")||l("CriOS"))&&!s.utils.userAgent.EDGE,s.utils.userAgent.WEBKIT=l("WebKit")&&!s.utils.userAgent.EDGE,s.utils.userAgent.GECKO=l("Gecko")&&!s.utils.userAgent.WEBKIT&&!s.utils.userAgent.IE&&!s.utils.userAgent.EDGE,s.utils.userAgent.ANDROID=l("Android"),o=s.utils.global.navigator&&s.utils.global.navigator.maxTouchPoints,s.utils.userAgent.IPAD=l("iPad")||l("Macintosh")&&0<o,s.utils.userAgent.IPOD=l("iPod"),s.utils.userAgent.IPHONE=l("iPhone")&&!s.utils.userAgent.IPAD&&!s.utils.userAgent.IPOD,s.utils.userAgent.MAC=l("Macintosh"),s.utils.userAgent.TABLET=s.utils.userAgent.IPAD||s.utils.userAgent.ANDROID&&!l("Mobile")||l("Silk"),s.utils.userAgent.MOBILE=!s.utils.userAgent.TABLET&&(s.utils.userAgent.IPOD||s.utils.userAgent.IPHONE||s.utils.userAgent.ANDROID||l("IEMobile"))}(s.utils.global.navigator&&s.utils.global.navigator.userAgent||""),s.utils.noEvent=function(o){o.preventDefault(),o.stopPropagation()},s.utils.isTargetInput=function(o){return"textarea"==o.target.type||"text"==o.target.type||"number"==o.target.type||"email"==o.target.type||"password"==o.target.type||"search"==o.target.type||"tel"==o.target.type||"url"==o.target.type||o.target.isContentEditable||o.target.dataset&&"true"==o.target.dataset.isTextInput},s.utils.getRelativeXY=function(o){var l=new s.utils.Coordinate(0,0),u=o.getAttribute("x");return u&&(l.x=parseInt(u,10)),(u=o.getAttribute("y"))&&(l.y=parseInt(u,10)),(u=(u=o.getAttribute("transform"))&&u.match(s.utils.getRelativeXY.XY_REGEX_))&&(l.x+=Number(u[1]),u[3]&&(l.y+=Number(u[3]))),(o=o.getAttribute("style"))&&-1<o.indexOf("translate")&&(o=o.match(s.utils.getRelativeXY.XY_STYLE_REGEX_))&&(l.x+=Number(o[1]),o[3]&&(l.y+=Number(o[3]))),l},s.utils.getInjectionDivXY_=function(o){for(var l=0,u=0;o;){var h=s.utils.getRelativeXY(o);if(l+=h.x,u+=h.y,-1!=(" "+(o.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;o=o.parentNode}return new s.utils.Coordinate(l,u)},s.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,s.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,s.utils.isRightButton=function(o){return!(!o.ctrlKey||!s.utils.userAgent.MAC)||2==o.button},s.utils.mouseToSvg=function(o,l,u){var h=l.createSVGPoint();return h.x=o.clientX,h.y=o.clientY,u||(u=l.getScreenCTM().inverse()),h.matrixTransform(u)},s.utils.getScrollDeltaPixels=function(o){switch(o.deltaMode){default:return{x:o.deltaX,y:o.deltaY};case 1:return{x:o.deltaX*s.LINE_MODE_MULTIPLIER,y:o.deltaY*s.LINE_MODE_MULTIPLIER};case 2:return{x:o.deltaX*s.PAGE_MODE_MULTIPLIER,y:o.deltaY*s.PAGE_MODE_MULTIPLIER}}},s.utils.tokenizeInterpolation=function(o){return s.utils.tokenizeInterpolation_(o,!0)},s.utils.replaceMessageReferences=function(o){return"string"!=typeof o?o:(o=s.utils.tokenizeInterpolation_(o,!1)).length?String(o[0]):""},s.utils.checkMessageReferences=function(o){for(var l=!0,u=s.Msg,h=o.match(/%{BKY_[A-Z]\w*}/gi),_=0;_<h.length;_++)null==u[h[_].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+h[_]+" in "+o),l=!1);return l},s.utils.tokenizeInterpolation_=function(o,l){var u=[],h=o.split("");h.push("");var _=0;o=[];for(var b=null,D=0;D<h.length;D++){var x=h[D];0==_?"%"==x?((x=o.join(""))&&u.push(x),o.length=0,_=1):o.push(x):1==_?"%"==x?(o.push(x),_=0):l&&"0"<=x&&"9">=x?(_=2,b=x,(x=o.join(""))&&u.push(x),o.length=0):"{"==x?_=3:(o.push("%",x),_=0):2==_?"0"<=x&&"9">=x?b+=x:(u.push(parseInt(b,10)),D--,_=0):3==_&&(""==x?(o.splice(0,0,"%{"),D--,_=0):"}"!=x?o.push(x):(_=o.join(""),/[A-Z]\w*/i.test(_)?(x=_.toUpperCase(),(x=s.utils.string.startsWith(x,"BKY_")?x.substring(4):null)&&x in s.Msg?"string"==typeof(_=s.Msg[x])?Array.prototype.push.apply(u,s.utils.tokenizeInterpolation_(_,l)):u.push(l?String(_):_):u.push("%{"+_+"}")):u.push("%{"+_+"}"),_=o.length=0))}for((x=o.join(""))&&u.push(x),l=[],D=o.length=0;D<u.length;++D)"string"==typeof u[D]?o.push(u[D]):((x=o.join(""))&&l.push(x),o.length=0,l.push(u[D]));return(x=o.join(""))&&l.push(x),o.length=0,l},s.utils.genUid=function(){for(var o=s.utils.genUid.soup_.length,l=[],u=0;20>u;u++)l[u]=s.utils.genUid.soup_.charAt(Math.random()*o);return l.join("")},s.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s.utils.is3dSupported=function(){if(void 0!==s.utils.is3dSupported.cached_)return s.utils.is3dSupported.cached_;if(!s.utils.global.getComputedStyle)return!1;var o=document.createElement("p"),l="none",u={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var h in document.body.insertBefore(o,null),u)if(void 0!==o.style[h]){if(o.style[h]="translate3d(1px,1px,1px)",!(l=s.utils.global.getComputedStyle(o)))return document.body.removeChild(o),!1;l=l.getPropertyValue(u[h])}return document.body.removeChild(o),s.utils.is3dSupported.cached_="none"!==l,s.utils.is3dSupported.cached_},s.utils.runAfterPageLoad=function(o){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)o();else var l=setInterval(function(){"complete"==document.readyState&&(clearInterval(l),o())},10)},s.utils.getViewportBBox=function(){var o=s.utils.style.getViewportPageOffset();return new s.utils.Rect(o.y,document.documentElement.clientHeight+o.y,o.x,document.documentElement.clientWidth+o.x)},s.utils.arrayRemove=function(o,l){return-1!=(l=o.indexOf(l))&&(o.splice(l,1),!0)},s.utils.getDocumentScroll=function(){var o=document.documentElement,l=window;return s.utils.userAgent.IE&&l.pageYOffset!=o.scrollTop?new s.utils.Coordinate(o.scrollLeft,o.scrollTop):new s.utils.Coordinate(l.pageXOffset||o.scrollLeft,l.pageYOffset||o.scrollTop)},s.utils.getBlockTypeCounts=function(o,l){var u=Object.create(null),h=o.getDescendants(!0);for(l&&(o=o.getNextBlock())&&(o=h.indexOf(o),h.splice(o,h.length-o)),o=0;l=h[o];o++)u[l.type]?u[l.type]++:u[l.type]=1;return u},s.utils.screenToWsCoordinates=function(o,l){var u=l.x;l=l.y;var h=o.getInjectionDiv().getBoundingClientRect();return u=new s.utils.Coordinate(u-h.left,l-h.top),l=o.getOriginOffsetInPixels(),s.utils.Coordinate.difference(u,l).scale(1/o.scale)},s.utils.parseBlockColour=function(o){var l="string"==typeof o?s.utils.replaceMessageReferences(o):o,u=Number(l);if(!isNaN(u)&&0<=u&&360>=u)return{hue:u,hex:s.utils.colour.hsvToHex(u,s.HSV_SATURATION,255*s.HSV_VALUE)};if(u=s.utils.colour.parse(l))return{hue:null,hex:u};throw u='Invalid colour: "'+l+'"',o!=l&&(u+=' (from "'+o+'")'),Error(u)},s.Touch={},s.Touch.TOUCH_ENABLED="ontouchstart"in s.utils.global||!!(s.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!s.utils.global.navigator||!s.utils.global.navigator.maxTouchPoints&&!s.utils.global.navigator.msMaxTouchPoints),s.Touch.touchIdentifier_=null,s.Touch.TOUCH_MAP={},s.utils.global.PointerEvent?s.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:s.Touch.TOUCH_ENABLED&&(s.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),s.longPid_=0,s.longStart=function(o,l){s.longStop_(),o.changedTouches&&1!=o.changedTouches.length||(s.longPid_=setTimeout(function(){o.changedTouches&&(o.button=2,o.clientX=o.changedTouches[0].clientX,o.clientY=o.changedTouches[0].clientY),l&&l.handleRightClick(o)},s.LONGPRESS))},s.longStop_=function(){s.longPid_&&(clearTimeout(s.longPid_),s.longPid_=0)},s.Touch.clearTouchIdentifier=function(){s.Touch.touchIdentifier_=null},s.Touch.shouldHandleEvent=function(o){return!s.Touch.isMouseOrTouchEvent(o)||s.Touch.checkTouchIdentifier(o)},s.Touch.getTouchIdentifierFromEvent=function(o){return null!=o.pointerId?o.pointerId:o.changedTouches&&o.changedTouches[0]&&null!=o.changedTouches[0].identifier?o.changedTouches[0].identifier:"mouse"},s.Touch.checkTouchIdentifier=function(o){var l=s.Touch.getTouchIdentifierFromEvent(o);return null!=s.Touch.touchIdentifier_?s.Touch.touchIdentifier_==l:("mousedown"==o.type||"touchstart"==o.type||"pointerdown"==o.type)&&(s.Touch.touchIdentifier_=l,!0)},s.Touch.setClientFromTouch=function(o){if(s.utils.string.startsWith(o.type,"touch")){var l=o.changedTouches[0];o.clientX=l.clientX,o.clientY=l.clientY}},s.Touch.isMouseOrTouchEvent=function(o){return s.utils.string.startsWith(o.type,"touch")||s.utils.string.startsWith(o.type,"mouse")||s.utils.string.startsWith(o.type,"pointer")},s.Touch.isTouchEvent=function(o){return s.utils.string.startsWith(o.type,"touch")||s.utils.string.startsWith(o.type,"pointer")},s.Touch.splitEventByTouches=function(o){var l=[];if(o.changedTouches)for(var u=0;u<o.changedTouches.length;u++)l[u]={type:o.type,changedTouches:[o.changedTouches[u]],target:o.target,stopPropagation:function(){o.stopPropagation()},preventDefault:function(){o.preventDefault()}};else l.push(o);return l},s.browserEvents={},s.browserEvents.conditionalBind=function(o,l,u,h,_,b){var D=!1,x=function(Q){var Y=!_;Q=s.Touch.splitEventByTouches(Q);for(var ie,ae=0;ie=Q[ae];ae++)(!Y||s.Touch.shouldHandleEvent(ie))&&(s.Touch.setClientFromTouch(ie),u?h.call(u,ie):h(ie),D=!0)},G=[];if(s.utils.global.PointerEvent&&l in s.Touch.TOUCH_MAP)for(var F,j=0;F=s.Touch.TOUCH_MAP[l][j];j++)o.addEventListener(F,x,!1),G.push([o,F,x]);else if(o.addEventListener(l,x,!1),G.push([o,l,x]),l in s.Touch.TOUCH_MAP){var q=function(Q){x(Q),D&&!b&&Q.preventDefault()};for(j=0;F=s.Touch.TOUCH_MAP[l][j];j++)o.addEventListener(F,q,!1),G.push([o,F,q])}return G},s.browserEvents.bind=function(o,l,u,h){var _=function(j){u?h.call(u,j):h(j)},b=[];if(s.utils.global.PointerEvent&&l in s.Touch.TOUCH_MAP)for(var x,D=0;x=s.Touch.TOUCH_MAP[l][D];D++)o.addEventListener(x,_,!1),b.push([o,x,_]);else if(o.addEventListener(l,_,!1),b.push([o,l,_]),l in s.Touch.TOUCH_MAP){var G=function(j){if(j.changedTouches&&1==j.changedTouches.length){var F=j.changedTouches[0];j.clientX=F.clientX,j.clientY=F.clientY}_(j),j.preventDefault()};for(D=0;x=s.Touch.TOUCH_MAP[l][D];D++)o.addEventListener(x,G,!1),b.push([o,x,G])}return b},s.browserEvents.unbind=function(o){for(;o.length;){var l=o.pop(),u=l[2];l[0].removeEventListener(l[1],u,!1)}return u},s.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},s.ComponentManager.prototype.addComponent=function(o,l){var u=o.component.id;if(!l&&this.componentData_[u])throw Error('Plugin "'+u+'" with capabilities "'+this.componentData_[u].capabilities+'" already added.');this.componentData_[u]=o,l=[];for(var h=0;h<o.capabilities.length;h++){var _=String(o.capabilities[h]).toLowerCase();l.push(_),void 0===this.capabilityToComponentIds_[_]?this.capabilityToComponentIds_[_]=[u]:this.capabilityToComponentIds_[_].push(u)}this.componentData_[u].capabilities=l},s.ComponentManager.prototype.removeComponent=function(o){var l=this.componentData_[o];if(l){for(var u=0;u<l.capabilities.length;u++){var h=String(l.capabilities[u]).toLowerCase();this.capabilityToComponentIds_[h].splice(this.capabilityToComponentIds_[h].indexOf(o),1)}delete this.componentData_[o]}},s.ComponentManager.prototype.addCapability=function(o,l){if(!this.getComponent(o))throw Error('Cannot add capability, "'+l+'". Plugin "'+o+'" has not been added to the ComponentManager');this.hasCapability(o,l)?console.warn('Plugin "'+o+'already has capability "'+l+'"'):(l=String(l).toLowerCase(),this.componentData_[o].capabilities.push(l),this.capabilityToComponentIds_[l].push(o))},s.ComponentManager.prototype.removeCapability=function(o,l){if(!this.getComponent(o))throw Error('Cannot remove capability, "'+l+'". Plugin "'+o+'" has not been added to the ComponentManager');this.hasCapability(o,l)?(l=String(l).toLowerCase(),this.componentData_[o].capabilities.splice(this.componentData_[o].capabilities.indexOf(l),1),this.capabilityToComponentIds_[l].splice(this.capabilityToComponentIds_[l].indexOf(o),1)):console.warn('Plugin "'+o+"doesn't have capability \""+l+'" to remove')},s.ComponentManager.prototype.hasCapability=function(o,l){return l=String(l).toLowerCase(),-1!==this.componentData_[o].capabilities.indexOf(l)},s.ComponentManager.prototype.getComponent=function(o){return this.componentData_[o]&&this.componentData_[o].component},s.ComponentManager.prototype.getComponents=function(o,l){if(o=String(o).toLowerCase(),!(o=this.capabilityToComponentIds_[o]))return[];var u=[];if(l){var h=[],_=this.componentData_;o.forEach(function(b){h.push(_[b])}),h.sort(function(b,D){return b.weight-D.weight}),h.forEach(function(b){u.push(b.component)})}else _=this.componentData_,o.forEach(function(b){u.push(_[b].component)});return u},s.ComponentManager.Capability=function(o){this.name_=o},s.ComponentManager.Capability.prototype.toString=function(){return this.name_},s.ComponentManager.Capability.POSITIONABLE=new s.ComponentManager.Capability("positionable"),s.ComponentManager.Capability.DRAG_TARGET=new s.ComponentManager.Capability("drag_target"),s.ComponentManager.Capability.DELETE_AREA=new s.ComponentManager.Capability("delete_area"),s.ComponentManager.Capability.AUTOHIDEABLE=new s.ComponentManager.Capability("autohideable"),s.utils.Svg=function(o){this.tagName_=o},s.utils.Svg.prototype.toString=function(){return this.tagName_},s.utils.Svg.ANIMATE=new s.utils.Svg("animate"),s.utils.Svg.CIRCLE=new s.utils.Svg("circle"),s.utils.Svg.CLIPPATH=new s.utils.Svg("clipPath"),s.utils.Svg.DEFS=new s.utils.Svg("defs"),s.utils.Svg.FECOMPOSITE=new s.utils.Svg("feComposite"),s.utils.Svg.FECOMPONENTTRANSFER=new s.utils.Svg("feComponentTransfer"),s.utils.Svg.FEFLOOD=new s.utils.Svg("feFlood"),s.utils.Svg.FEFUNCA=new s.utils.Svg("feFuncA"),s.utils.Svg.FEGAUSSIANBLUR=new s.utils.Svg("feGaussianBlur"),s.utils.Svg.FEPOINTLIGHT=new s.utils.Svg("fePointLight"),s.utils.Svg.FESPECULARLIGHTING=new s.utils.Svg("feSpecularLighting"),s.utils.Svg.FILTER=new s.utils.Svg("filter"),s.utils.Svg.FOREIGNOBJECT=new s.utils.Svg("foreignObject"),s.utils.Svg.G=new s.utils.Svg("g"),s.utils.Svg.IMAGE=new s.utils.Svg("image"),s.utils.Svg.LINE=new s.utils.Svg("line"),s.utils.Svg.PATH=new s.utils.Svg("path"),s.utils.Svg.PATTERN=new s.utils.Svg("pattern"),s.utils.Svg.POLYGON=new s.utils.Svg("polygon"),s.utils.Svg.RECT=new s.utils.Svg("rect"),s.utils.Svg.SVG=new s.utils.Svg("svg"),s.utils.Svg.TEXT=new s.utils.Svg("text"),s.utils.Svg.TSPAN=new s.utils.Svg("tspan"),s.utils.dom={},s.utils.dom.SVG_NS="http://www.w3.org/2000/svg",s.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",s.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",s.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},s.utils.dom.cacheWidths_=null,s.utils.dom.cacheReference_=0,s.utils.dom.canvasContext_=null,s.utils.dom.createSvgElement=function(o,l,u){for(var h in o=document.createElementNS(s.utils.dom.SVG_NS,String(o)),l)o.setAttribute(h,l[h]);return document.body.runtimeStyle&&(o.runtimeStyle=o.currentStyle=o.style),u&&u.appendChild(o),o},s.utils.dom.addClass=function(o,l){var u=o.getAttribute("class")||"";return-1==(" "+u+" ").indexOf(" "+l+" ")&&(u&&(u+=" "),o.setAttribute("class",u+l),!0)},s.utils.dom.removeClasses=function(o,l){l=l.split(" ");for(var u=0;u<l.length;u++)s.utils.dom.removeClass(o,l[u])},s.utils.dom.removeClass=function(o,l){var u=o.getAttribute("class");if(-1==(" "+u+" ").indexOf(" "+l+" "))return!1;u=u.split(/\s+/);for(var h=0;h<u.length;h++)u[h]&&u[h]!=l||(u.splice(h,1),h--);return u.length?o.setAttribute("class",u.join(" ")):o.removeAttribute("class"),!0},s.utils.dom.hasClass=function(o,l){return-1!=(" "+o.getAttribute("class")+" ").indexOf(" "+l+" ")},s.utils.dom.removeNode=function(o){return o&&o.parentNode?o.parentNode.removeChild(o):null},s.utils.dom.insertAfter=function(o,l){var u=l.nextSibling;if(!(l=l.parentNode))throw Error("Reference node has no parent.");u?l.insertBefore(o,u):l.appendChild(o)},s.utils.dom.containsNode=function(o,l){return!!(o.compareDocumentPosition(l)&s.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},s.utils.dom.setCssTransform=function(o,l){o.style.transform=l,o.style["-webkit-transform"]=l},s.utils.dom.startTextWidthCache=function(){s.utils.dom.cacheReference_++,s.utils.dom.cacheWidths_||(s.utils.dom.cacheWidths_=Object.create(null))},s.utils.dom.stopTextWidthCache=function(){s.utils.dom.cacheReference_--,s.utils.dom.cacheReference_||(s.utils.dom.cacheWidths_=null)},s.utils.dom.getTextWidth=function(o){var u,l=o.textContent+"\n"+o.className.baseVal;if(s.utils.dom.cacheWidths_&&(u=s.utils.dom.cacheWidths_[l]))return u;try{u=s.utils.userAgent.IE||s.utils.userAgent.EDGE?o.getBBox().width:o.getComputedTextLength()}catch(h){return 8*o.textContent.length}return s.utils.dom.cacheWidths_&&(s.utils.dom.cacheWidths_[l]=u),u},s.utils.dom.getFastTextWidth=function(o,l,u,h){return s.utils.dom.getFastTextWidthWithSizeString(o,l+"pt",u,h)},s.utils.dom.getFastTextWidthWithSizeString=function(o,l,u,h){var b,_=o.textContent;return o=_+"\n"+o.className.baseVal,s.utils.dom.cacheWidths_&&(b=s.utils.dom.cacheWidths_[o])||(s.utils.dom.canvasContext_||((b=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(b),s.utils.dom.canvasContext_=b.getContext("2d")),s.utils.dom.canvasContext_.font=u+" "+l+" "+h,b=s.utils.dom.canvasContext_.measureText(_).width,s.utils.dom.cacheWidths_&&(s.utils.dom.cacheWidths_[o]=b)),b},s.utils.dom.measureFontMetrics=function(o,l,u,h){var _=document.createElement("span");_.style.font=u+" "+l+" "+h,_.textContent=o,(o=document.createElement("div")).style.width="1px",o.style.height="0px",(l=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),l.appendChild(_),l.appendChild(o),document.body.appendChild(l);try{u={},l.style.alignItems="baseline",u.baseline=o.offsetTop-_.offsetTop,l.style.alignItems="flex-end",u.height=o.offsetTop-_.offsetTop}finally{document.body.removeChild(l)}return u},s.utils.math={},s.utils.math.toRadians=function(o){return o*Math.PI/180},s.utils.math.toDegrees=function(o){return 180*o/Math.PI},s.utils.math.clamp=function(o,l,u){if(u<o){var h=u;u=o,o=h}return Math.max(o,Math.min(l,u))},s.DropDownDiv=function(){},s.DropDownDiv.boundsElement_=null,s.DropDownDiv.owner_=null,s.DropDownDiv.positionToField_=null,s.DropDownDiv.ARROW_SIZE=16,s.DropDownDiv.BORDER_SIZE=1,s.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,s.DropDownDiv.PADDING_Y=16,s.DropDownDiv.ANIMATION_TIME=.25,s.DropDownDiv.animateOutTimer_=null,s.DropDownDiv.onHide_=null,s.DropDownDiv.rendererClassName_="",s.DropDownDiv.themeClassName_="",s.DropDownDiv.createDom=function(){if(!s.DropDownDiv.DIV_){var o=document.createElement("div");o.className="blocklyDropDownDiv",(s.parentContainer||document.body).appendChild(o),s.DropDownDiv.DIV_=o;var l=document.createElement("div");l.className="blocklyDropDownContent",o.appendChild(l),s.DropDownDiv.content_=l,(l=document.createElement("div")).className="blocklyDropDownArrow",o.appendChild(l),s.DropDownDiv.arrow_=l,s.DropDownDiv.DIV_.style.opacity=0,s.DropDownDiv.DIV_.style.transition="transform "+s.DropDownDiv.ANIMATION_TIME+"s, opacity "+s.DropDownDiv.ANIMATION_TIME+"s",o.addEventListener("focusin",function(){s.utils.dom.addClass(o,"blocklyFocused")}),o.addEventListener("focusout",function(){s.utils.dom.removeClass(o,"blocklyFocused")})}},s.DropDownDiv.setBoundsElement=function(o){s.DropDownDiv.boundsElement_=o},s.DropDownDiv.getContentDiv=function(){return s.DropDownDiv.content_},s.DropDownDiv.clearContent=function(){s.DropDownDiv.content_.textContent="",s.DropDownDiv.content_.style.width=""},s.DropDownDiv.setColour=function(o,l){s.DropDownDiv.DIV_.style.backgroundColor=o,s.DropDownDiv.DIV_.style.borderColor=l},s.DropDownDiv.showPositionedByBlock=function(o,l,u,h){return s.DropDownDiv.showPositionedByRect_(s.DropDownDiv.getScaledBboxOfBlock_(l),o,u,h)},s.DropDownDiv.showPositionedByField=function(o,l,u){return s.DropDownDiv.positionToField_=!0,s.DropDownDiv.showPositionedByRect_(s.DropDownDiv.getScaledBboxOfField_(o),o,l,u)},s.DropDownDiv.getScaledBboxOfBlock_=function(o){var l=o.getSvgRoot(),u=l.getBBox(),h=o.workspace.scale;return o=u.height*h,u=u.width*h,l=s.utils.style.getPageOffset(l),new s.utils.Rect(l.y,l.y+o,l.x,l.x+u)},s.DropDownDiv.getScaledBboxOfField_=function(o){return o=o.getScaledBBox(),new s.utils.Rect(o.top,o.bottom,o.left,o.right)},s.DropDownDiv.showPositionedByRect_=function(o,l,u,h){var _=o.left+(o.right-o.left)/2,b=o.bottom;o=o.top,h&&(o+=h);for(var D=(h=l.getSourceBlock()).workspace;D.options.parentWorkspace;)D=D.options.parentWorkspace;return s.DropDownDiv.setBoundsElement(D.getParentSvg().parentNode),s.DropDownDiv.show(l,h.RTL,_,b,_,o,u)},s.DropDownDiv.show=function(o,l,u,h,_,b,D){return s.DropDownDiv.owner_=o,s.DropDownDiv.onHide_=D||null,(o=s.DropDownDiv.DIV_).style.direction=l?"rtl":"ltr",l=s.getMainWorkspace(),s.DropDownDiv.rendererClassName_=l.getRenderer().getClassName(),s.DropDownDiv.themeClassName_=l.getTheme().getClassName(),s.utils.dom.addClass(o,s.DropDownDiv.rendererClassName_),s.utils.dom.addClass(o,s.DropDownDiv.themeClassName_),s.DropDownDiv.positionInternal_(u,h,_,b)},s.DropDownDiv.getBoundsInfo_=function(){var o=s.utils.style.getPageOffset(s.DropDownDiv.boundsElement_),l=s.utils.style.getSize(s.DropDownDiv.boundsElement_);return{left:o.x,right:o.x+l.width,top:o.y,bottom:o.y+l.height,width:l.width,height:l.height}},s.DropDownDiv.getPositionMetrics_=function(o,l,u,h){var _=s.DropDownDiv.getBoundsInfo_(),b=s.utils.style.getSize(s.DropDownDiv.DIV_);return l+b.height<_.bottom?s.DropDownDiv.getPositionBelowMetrics_(o,l,_,b):h-b.height>_.top?s.DropDownDiv.getPositionAboveMetrics_(u,h,_,b):l+b.height<document.documentElement.clientHeight?s.DropDownDiv.getPositionBelowMetrics_(o,l,_,b):h-b.height>document.documentElement.clientTop?s.DropDownDiv.getPositionAboveMetrics_(u,h,_,b):s.DropDownDiv.getPositionTopOfPageMetrics_(o,_,b)},s.DropDownDiv.getPositionBelowMetrics_=function(o,l,u,h){return{initialX:(o=s.DropDownDiv.getPositionX(o,u.left,u.right,h.width)).divX,initialY:l,finalX:o.divX,finalY:l+s.DropDownDiv.PADDING_Y,arrowX:o.arrowX,arrowY:-(s.DropDownDiv.ARROW_SIZE/2+s.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},s.DropDownDiv.getPositionAboveMetrics_=function(o,l,u,h){return{initialX:(o=s.DropDownDiv.getPositionX(o,u.left,u.right,h.width)).divX,initialY:l-h.height,finalX:o.divX,finalY:l-h.height-s.DropDownDiv.PADDING_Y,arrowX:o.arrowX,arrowY:h.height-2*s.DropDownDiv.BORDER_SIZE-s.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},s.DropDownDiv.getPositionTopOfPageMetrics_=function(o,l,u){return{initialX:(o=s.DropDownDiv.getPositionX(o,l.left,l.right,u.width)).divX,initialY:0,finalX:o.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},s.DropDownDiv.getPositionX=function(o,l,u,h){var _=o;return o=s.utils.math.clamp(l,o-h/2,u-h),{arrowX:h=s.utils.math.clamp(l=s.DropDownDiv.ARROW_HORIZONTAL_PADDING,(_-=s.DropDownDiv.ARROW_SIZE/2)-o,h-l-s.DropDownDiv.ARROW_SIZE),divX:o}},s.DropDownDiv.isVisible=function(){return!!s.DropDownDiv.owner_},s.DropDownDiv.hideIfOwner=function(o,l){return s.DropDownDiv.owner_===o&&(l?s.DropDownDiv.hideWithoutAnimation():s.DropDownDiv.hide(),!0)},s.DropDownDiv.hide=function(){var o=s.DropDownDiv.DIV_;o.style.transform="translate(0, 0)",o.style.opacity=0,s.DropDownDiv.animateOutTimer_=setTimeout(function(){s.DropDownDiv.hideWithoutAnimation()},1e3*s.DropDownDiv.ANIMATION_TIME),s.DropDownDiv.onHide_&&(s.DropDownDiv.onHide_(),s.DropDownDiv.onHide_=null)},s.DropDownDiv.hideWithoutAnimation=function(){if(s.DropDownDiv.isVisible()){s.DropDownDiv.animateOutTimer_&&clearTimeout(s.DropDownDiv.animateOutTimer_);var o=s.DropDownDiv.DIV_;o.style.transform="",o.style.left="",o.style.top="",o.style.opacity=0,o.style.display="none",o.style.backgroundColor="",o.style.borderColor="",s.DropDownDiv.onHide_&&(s.DropDownDiv.onHide_(),s.DropDownDiv.onHide_=null),s.DropDownDiv.clearContent(),s.DropDownDiv.owner_=null,s.DropDownDiv.rendererClassName_&&(s.utils.dom.removeClass(o,s.DropDownDiv.rendererClassName_),s.DropDownDiv.rendererClassName_=""),s.DropDownDiv.themeClassName_&&(s.utils.dom.removeClass(o,s.DropDownDiv.themeClassName_),s.DropDownDiv.themeClassName_=""),s.getMainWorkspace().markFocused()}},s.DropDownDiv.positionInternal_=function(o,l,u,h){(o=s.DropDownDiv.getPositionMetrics_(o,l,u,h)).arrowVisible?(s.DropDownDiv.arrow_.style.display="",s.DropDownDiv.arrow_.style.transform="translate("+o.arrowX+"px,"+o.arrowY+"px) rotate(45deg)",s.DropDownDiv.arrow_.setAttribute("class",o.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):s.DropDownDiv.arrow_.style.display="none",l=Math.floor(o.initialX),u=Math.floor(o.initialY),h=Math.floor(o.finalX);var _=Math.floor(o.finalY),b=s.DropDownDiv.DIV_;return b.style.left=l+"px",b.style.top=u+"px",b.style.display="block",b.style.opacity=1,b.style.transform="translate("+(h-l)+"px,"+(_-u)+"px)",!!o.arrowAtTop},s.DropDownDiv.repositionForWindowResize=function(){if(s.DropDownDiv.owner_){var o=s.DropDownDiv.owner_,l=o.getSourceBlock();o=s.DropDownDiv.positionToField_?s.DropDownDiv.getScaledBboxOfField_(o):s.DropDownDiv.getScaledBboxOfBlock_(l),s.DropDownDiv.positionInternal_(l=o.left+(o.right-o.left)/2,o.bottom,l,o.top)}else s.DropDownDiv.hide()},s.registry={},s.registry.typeMap_=Object.create(null),s.registry.DEFAULT="default",s.registry.Type=function(o){this.name_=o},s.registry.Type.prototype.toString=function(){return this.name_},s.registry.Type.CONNECTION_CHECKER=new s.registry.Type("connectionChecker"),s.registry.Type.CURSOR=new s.registry.Type("cursor"),s.registry.Type.EVENT=new s.registry.Type("event"),s.registry.Type.FIELD=new s.registry.Type("field"),s.registry.Type.RENDERER=new s.registry.Type("renderer"),s.registry.Type.TOOLBOX=new s.registry.Type("toolbox"),s.registry.Type.THEME=new s.registry.Type("theme"),s.registry.Type.TOOLBOX_ITEM=new s.registry.Type("toolboxItem"),s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new s.registry.Type("flyoutsVerticalToolbox"),s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new s.registry.Type("flyoutsHorizontalToolbox"),s.registry.Type.METRICS_MANAGER=new s.registry.Type("metricsManager"),s.registry.Type.BLOCK_DRAGGER=new s.registry.Type("blockDragger"),s.registry.register=function(o,l,u,h){if(!(o instanceof s.registry.Type)&&"string"!=typeof o||""==String(o).trim())throw Error('Invalid type "'+o+'". The type must be a non-empty string or a Blockly.registry.Type.');if(o=String(o).toLowerCase(),"string"!=typeof l||""==l.trim())throw Error('Invalid name "'+l+'". The name must be a non-empty string.');if(l=l.toLowerCase(),!u)throw Error("Can not register a null value");var _=s.registry.typeMap_[o];if(_||(_=s.registry.typeMap_[o]=Object.create(null)),s.registry.validate_(o,u),!h&&_[l])throw Error('Name "'+l+'" with type "'+o+'" already registered.');_[l]=u},s.registry.validate_=function(o,l){switch(o){case String(s.registry.Type.FIELD):if("function"!=typeof l.fromJson)throw Error('Type "'+o+'" must have a fromJson function')}},s.registry.unregister=function(o,l){o=String(o).toLowerCase(),l=l.toLowerCase();var u=s.registry.typeMap_[o];u&&u[l]?delete s.registry.typeMap_[o][l]:console.warn("Unable to unregister ["+l+"]["+o+"] from the registry.")},s.registry.getItem_=function(o,l,u){o=String(o).toLowerCase(),l=l.toLowerCase();var h=s.registry.typeMap_[o];if(!h||!h[l]){if(l="Unable to find ["+l+"]["+o+"] in the registry.",u)throw Error(l+" You must require or register a "+o+" plugin.");return console.warn(l),null}return h[l]},s.registry.hasItem=function(o,l){return o=String(o).toLowerCase(),l=l.toLowerCase(),!!(o=s.registry.typeMap_[o])&&!!o[l]},s.registry.getClass=function(o,l,u){return s.registry.getItem_(o,l,u)},s.registry.getObject=function(o,l,u){return s.registry.getItem_(o,l,u)},s.registry.getClassFromOptions=function(o,l,u){return"function"==typeof(l=l.plugins[o.toString()]||s.registry.DEFAULT)?l:s.registry.getClass(o,l,u)},s.Events={},s.Events.group_="",s.Events.recordUndo=!0,s.Events.disabled_=0,s.Events.CREATE="create",s.Events.BLOCK_CREATE=s.Events.CREATE,s.Events.DELETE="delete",s.Events.BLOCK_DELETE=s.Events.DELETE,s.Events.CHANGE="change",s.Events.BLOCK_CHANGE=s.Events.CHANGE,s.Events.MOVE="move",s.Events.BLOCK_MOVE=s.Events.MOVE,s.Events.VAR_CREATE="var_create",s.Events.VAR_DELETE="var_delete",s.Events.VAR_RENAME="var_rename",s.Events.UI="ui",s.Events.BLOCK_DRAG="drag",s.Events.SELECTED="selected",s.Events.CLICK="click",s.Events.MARKER_MOVE="marker_move",s.Events.BUBBLE_OPEN="bubble_open",s.Events.TRASHCAN_OPEN="trashcan_open",s.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",s.Events.THEME_CHANGE="theme_change",s.Events.VIEWPORT_CHANGE="viewport_change",s.Events.COMMENT_CREATE="comment_create",s.Events.COMMENT_DELETE="comment_delete",s.Events.COMMENT_CHANGE="comment_change",s.Events.COMMENT_MOVE="comment_move",s.Events.FINISHED_LOADING="finished_loading",s.Events.BUMP_EVENTS=[s.Events.BLOCK_CREATE,s.Events.BLOCK_MOVE,s.Events.COMMENT_CREATE,s.Events.COMMENT_MOVE],s.Events.FIRE_QUEUE_=[],s.Events.fire=function(o){s.Events.isEnabled()&&(s.Events.FIRE_QUEUE_.length||setTimeout(s.Events.fireNow_,0),s.Events.FIRE_QUEUE_.push(o))},s.Events.fireNow_=function(){for(var u,o=s.Events.filter(s.Events.FIRE_QUEUE_,!0),l=s.Events.FIRE_QUEUE_.length=0;u=o[l];l++)if(u.workspaceId){var h=s.Workspace.getById(u.workspaceId);h&&h.fireChangeListener(u)}},s.Events.filter=function(o,l){o=o.slice(),l||o.reverse();for(var b,u=[],h=Object.create(null),_=0;b=o[_];_++)if(!b.isNull()){var D=[b.isUiEvent?s.Events.UI:b.type,b.blockId,b.workspaceId].join(" "),x=h[D],G=x?x.event:null;x?b.type==s.Events.MOVE&&x.index==_-1?(G.newParentId=b.newParentId,G.newInputName=b.newInputName,G.newCoordinate=b.newCoordinate,x.index=_):b.type==s.Events.CHANGE&&b.element==G.element&&b.name==G.name?G.newValue=b.newValue:b.type==s.Events.VIEWPORT_CHANGE?(G.viewTop=b.viewTop,G.viewLeft=b.viewLeft,G.scale=b.scale,G.oldScale=b.oldScale):(b.type!=s.Events.CLICK||G.type!=s.Events.BUBBLE_OPEN)&&(h[D]={event:b,index:_},u.push(b)):(h[D]={event:b,index:_},u.push(b))}for(o=u.filter(function(j){return!j.isNull()}),l||o.reverse(),_=1;b=o[_];_++)b.type==s.Events.CHANGE&&"mutation"==b.element&&o.unshift(o.splice(_,1)[0]);return o},s.Events.clearPendingUndo=function(){for(var l,o=0;l=s.Events.FIRE_QUEUE_[o];o++)l.recordUndo=!1},s.Events.disable=function(){s.Events.disabled_++},s.Events.enable=function(){s.Events.disabled_--},s.Events.isEnabled=function(){return 0==s.Events.disabled_},s.Events.getGroup=function(){return s.Events.group_},s.Events.setGroup=function(o){s.Events.group_="boolean"==typeof o?o?s.utils.genUid():"":o},s.Events.getDescendantIds=function(o){var l=[];o=o.getDescendants(!1);for(var h,u=0;h=o[u];u++)l[u]=h.id;return l},s.Events.fromJson=function(o,l){var u=s.Events.get(o.type);if(!u)throw Error("Unknown event type.");return(u=new u).fromJson(o),u.workspaceId=l.id,u},s.Events.get=function(o){return s.registry.getClass(s.registry.Type.EVENT,o)},s.Events.disableOrphans=function(o){if((o.type==s.Events.MOVE||o.type==s.Events.CREATE)&&o.workspaceId){var l=s.Workspace.getById(o.workspaceId),u=l.getBlockById(o.blockId);if(u){o=s.Events.recordUndo;try{s.Events.recordUndo=!1;var h=u.getParent();if(h&&h.isEnabled()){var b,_=u.getDescendants(!1);for(l=0;b=_[l];l++)b.setEnabled(!0)}else if((u.outputConnection||u.previousConnection)&&!l.isDragging())do{u.setEnabled(!1),u=u.getNextBlock()}while(u)}finally{s.Events.recordUndo=o}}}},s.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=s.Events.getGroup(),this.recordUndo=s.Events.recordUndo},s.Events.Abstract.prototype.isUiEvent=!1,s.Events.Abstract.prototype.toJson=function(){var o={type:this.type};return this.group&&(o.group=this.group),o},s.Events.Abstract.prototype.fromJson=function(o){this.isBlank=!1,this.group=o.group},s.Events.Abstract.prototype.isNull=function(){return!1},s.Events.Abstract.prototype.run=function(o){},s.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var o=s.Workspace.getById(this.workspaceId);if(!o)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return o},s.utils.object={},s.utils.object.inherits=function(o,l){o.superClass_=l.prototype,o.prototype=Object.create(l.prototype),o.prototype.constructor=o},s.utils.object.mixin=function(o,l){for(var u in l)o[u]=l[u]},s.utils.object.deepMerge=function(o,l){for(var u in l)o[u]=null!=l[u]&&"object"==typeof l[u]?s.utils.object.deepMerge(o[u]||Object.create(null),l[u]):l[u];return o},s.utils.object.values=function(o){return Object.values?Object.values(o):Object.keys(o).map(function(l){return o[l]})},s.utils.xml={},s.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",s.utils.xml.document=function(){return document},s.utils.xml.createElement=function(o){return s.utils.xml.document().createElementNS(s.utils.xml.NAME_SPACE,o)},s.utils.xml.createTextNode=function(o){return s.utils.xml.document().createTextNode(o)},s.utils.xml.textToDomDocument=function(o){return(new DOMParser).parseFromString(o,"text/xml")},s.utils.xml.domToText=function(o){return(new XMLSerializer).serializeToString(o)},s.inputTypes={VALUE:s.connectionTypes.INPUT_VALUE,STATEMENT:s.connectionTypes.NEXT_STATEMENT,DUMMY:5},s.Xml={},s.Xml.workspaceToDom=function(o,l){var u=s.utils.xml.createElement("xml"),h=s.Xml.variablesToDom(s.Variables.allUsedVarModels(o));h.hasChildNodes()&&u.appendChild(h);var b,_=o.getTopComments(!0);for(h=0;b=_[h];h++)u.appendChild(b.toXmlWithXY(l));for(o=o.getTopBlocks(!0),h=0;_=o[h];h++)u.appendChild(s.Xml.blockToDomWithXY(_,l));return u},s.Xml.variablesToDom=function(o){for(var h,l=s.utils.xml.createElement("variables"),u=0;h=o[u];u++){var _=s.utils.xml.createElement("variable");_.appendChild(s.utils.xml.createTextNode(h.name)),h.type&&_.setAttribute("type",h.type),_.id=h.getId(),l.appendChild(_)}return l},s.Xml.blockToDomWithXY=function(o,l){if(o.isInsertionMarker()&&!(o=o.getChildren(!1)[0]))return new DocumentFragment;var u;o.workspace.RTL&&(u=o.workspace.getWidth()),l=s.Xml.blockToDom(o,l);var h=o.getRelativeToSurfaceXY();return l.setAttribute("x",Math.round(o.workspace.RTL?u-h.x:h.x)),l.setAttribute("y",Math.round(h.y)),l},s.Xml.fieldToDom_=function(o){if(o.isSerializable()){var l=s.utils.xml.createElement("field");return l.setAttribute("name",o.name||""),o.toXml(l)}return null},s.Xml.allFieldsToDom_=function(o,l){for(var h,u=0;h=o.inputList[u];u++)for(var b,_=0;b=h.fieldRow[_];_++)(b=s.Xml.fieldToDom_(b))&&l.appendChild(b)},s.Xml.blockToDom=function(o,l){if(o.isInsertionMarker())return(o=o.getChildren(!1)[0])?s.Xml.blockToDom(o):new DocumentFragment;var u=s.utils.xml.createElement(o.isShadow()?"shadow":"block");if(u.setAttribute("type",o.type),l||u.setAttribute("id",o.id),o.mutationToDom){var h=o.mutationToDom();h&&(h.hasChildNodes()||h.hasAttributes())&&u.appendChild(h)}if(s.Xml.allFieldsToDom_(o,u),h=o.getCommentText()){var _=o.commentModel.size,b=o.commentModel.pinned,D=s.utils.xml.createElement("comment");D.appendChild(s.utils.xml.createTextNode(h)),D.setAttribute("pinned",b),D.setAttribute("h",_.height),D.setAttribute("w",_.width),u.appendChild(D)}for(o.data&&((h=s.utils.xml.createElement("data")).appendChild(s.utils.xml.createTextNode(o.data)),u.appendChild(h)),h=0;_=o.inputList[h];h++){var x;if(b=!0,_.type!=s.inputTypes.DUMMY){var G=_.connection.targetBlock();_.type==s.inputTypes.VALUE?x=s.utils.xml.createElement("value"):_.type==s.inputTypes.STATEMENT&&(x=s.utils.xml.createElement("statement")),!(D=_.connection.getShadowDom())||G&&G.isShadow()||x.appendChild(s.Xml.cloneShadow_(D,l)),G&&(D=s.Xml.blockToDom(G,l)).nodeType==s.utils.dom.NodeType.ELEMENT_NODE&&(x.appendChild(D),b=!1),x.setAttribute("name",_.name),b||u.appendChild(x)}}return null!=o.inputsInline&&o.inputsInline!=o.inputsInlineDefault&&u.setAttribute("inline",o.inputsInline),o.isCollapsed()&&u.setAttribute("collapsed",!0),o.isEnabled()||u.setAttribute("disabled",!0),o.isDeletable()||o.isShadow()||u.setAttribute("deletable",!1),o.isMovable()||o.isShadow()||u.setAttribute("movable",!1),o.isEditable()||u.setAttribute("editable",!1),(h=o.getNextBlock())&&(D=s.Xml.blockToDom(h,l)).nodeType==s.utils.dom.NodeType.ELEMENT_NODE&&((x=s.utils.xml.createElement("next")).appendChild(D),u.appendChild(x)),!(D=o.nextConnection&&o.nextConnection.getShadowDom())||h&&h.isShadow()||x.appendChild(s.Xml.cloneShadow_(D,l)),u},s.Xml.cloneShadow_=function(o,l){for(var h,u=o=o.cloneNode(!0);u;)if(l&&"shadow"==u.nodeName&&u.removeAttribute("id"),u.firstChild)u=u.firstChild;else{for(;u&&!u.nextSibling;)h=u,u=u.parentNode,h.nodeType==s.utils.dom.NodeType.TEXT_NODE&&""==h.data.trim()&&u.firstChild!=h&&s.utils.dom.removeNode(h);u&&(h=u,u=u.nextSibling,h.nodeType==s.utils.dom.NodeType.TEXT_NODE&&""==h.data.trim()&&s.utils.dom.removeNode(h))}return o},s.Xml.domToText=function(o){return s.utils.xml.domToText(o).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},s.Xml.domToPrettyText=function(o){o=s.Xml.domToText(o).split("<");for(var l="",u=1;u<o.length;u++){var h=o[u];"/"==h[0]&&(l=l.substring(2)),o[u]=l+"<"+h,"/"!=h[0]&&"/>"!=h.slice(-2)&&(l+="  ")}return(o=(o=o.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},s.Xml.textToDom=function(o){var l=s.utils.xml.textToDomDocument(o);if(!l||!l.documentElement||l.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+o);return l.documentElement},s.Xml.clearWorkspaceAndLoadFromXml=function(o,l){return l.setResizesEnabled(!1),l.clear(),o=s.Xml.domToWorkspace(o,l),l.setResizesEnabled(!0),o},s.Xml.domToWorkspace=function(o,l){if(o instanceof s.Workspace){var u=o;o=l,l=u,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var h;l.RTL&&(h=l.getWidth()),u=[],s.utils.dom.startTextWidthCache();var _=s.Events.getGroup();_||s.Events.setGroup(!0),l.setResizesEnabled&&l.setResizesEnabled(!1);var b=!0;try{for(var x,D=0;x=o.childNodes[D];D++){var G=x.nodeName.toLowerCase(),j=x;if("block"==G||"shadow"==G&&!s.Events.recordUndo){var F=s.Xml.domToBlock(j,l);u.push(F.id);var q=j.hasAttribute("x")?parseInt(j.getAttribute("x"),10):10,Q=j.hasAttribute("y")?parseInt(j.getAttribute("y"),10):10;isNaN(q)||isNaN(Q)||F.moveBy(l.RTL?h-q:q,Q),b=!1}else{if("shadow"==G)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==G)l.rendered?s.WorkspaceCommentSvg?s.WorkspaceCommentSvg.fromXml(j,l,h):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):s.WorkspaceComment?s.WorkspaceComment.fromXml(j,l):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==G){if(!b)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");s.Xml.domToVariables(j,l),b=!1}}}}finally{_||s.Events.setGroup(!1),s.utils.dom.stopTextWidthCache()}return l.setResizesEnabled&&l.setResizesEnabled(!0),s.Events.fire(new(s.Events.get(s.Events.FINISHED_LOADING))(l)),u},s.Xml.appendDomToWorkspace=function(o,l){var u;if(Object.prototype.hasOwnProperty.call(l,"scale")&&(u=l.getBlocksBoundingBox()),o=s.Xml.domToWorkspace(o,l),u&&u.top!=u.bottom){var h=u.bottom,_=l.RTL?u.right:u.left,b=1/0,D=-1/0,x=1/0;for(u=0;u<o.length;u++){var G=l.getBlockById(o[u]).getRelativeToSurfaceXY();G.y<x&&(x=G.y),G.x<b&&(b=G.x),G.x>D&&(D=G.x)}for(h=h-x+10,_=l.RTL?_-D:_-b,u=0;u<o.length;u++)l.getBlockById(o[u]).moveBy(_,h)}return o},s.Xml.domToBlock=function(o,l){if(o instanceof s.Workspace){var u=o;o=l,l=u,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}s.Events.disable(),u=l.getAllVariables();try{var h=s.Xml.domToBlockHeadless_(o,l),_=h.getDescendants(!1);if(l.rendered){h.setConnectionTracking(!1);for(var b=_.length-1;0<=b;b--)_[b].initSvg();for(b=_.length-1;0<=b;b--)_[b].render(!1);setTimeout(function(){h.disposed||h.setConnectionTracking(!0)},1),h.updateDisabled(),l.resizeContents()}else for(b=_.length-1;0<=b;b--)_[b].initModel()}finally{s.Events.enable()}if(s.Events.isEnabled()){for(o=s.Variables.getAddedVariables(l,u),b=0;b<o.length;b++)l=o[b],s.Events.fire(new(s.Events.get(s.Events.VAR_CREATE))(l));s.Events.fire(new(s.Events.get(s.Events.CREATE))(h))}return h},s.Xml.domToVariables=function(o,l){for(var h,u=0;h=o.childNodes[u];u++)if(h.nodeType==s.utils.dom.NodeType.ELEMENT_NODE){var _=h.getAttribute("type"),b=h.getAttribute("id");l.createVariable(h.textContent,_,b)}},s.Xml.mapSupportedXmlTags_=function(o){for(var h,l={mutation:[],comment:[],data:[],field:[],input:[],next:[]},u=0;h=o.childNodes[u];u++)if(h.nodeType!=s.utils.dom.NodeType.TEXT_NODE)switch(h.nodeName.toLowerCase()){case"mutation":l.mutation.push(h);break;case"comment":if(!s.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}l.comment.push(h);break;case"data":l.data.push(h);break;case"title":case"field":l.field.push(h);break;case"value":case"statement":l.input.push(h);break;case"next":l.next.push(h);break;default:console.warn("Ignoring unknown tag: "+h.nodeName)}return l},s.Xml.applyMutationTagNodes_=function(o,l){for(var _,u=!1,h=0;_=o[h];h++)l.domToMutation&&(l.domToMutation(_),l.initSvg&&(u=!0));return u},s.Xml.applyCommentTagNodes_=function(o,l){for(var h,u=0;h=o[u];u++){var _=h.textContent,b="true"==h.getAttribute("pinned"),D=parseInt(h.getAttribute("w"),10);h=parseInt(h.getAttribute("h"),10),l.setCommentText(_),l.commentModel.pinned=b,isNaN(D)||isNaN(h)||(l.commentModel.size=new s.utils.Size(D,h)),b&&l.getCommentIcon&&!l.isInFlyout&&setTimeout(function(){l.getCommentIcon().setVisible(!0)},1)}},s.Xml.applyDataTagNodes_=function(o,l){for(var h,u=0;h=o[u];u++)l.data=h.textContent},s.Xml.applyFieldTagNodes_=function(o,l){for(var h,u=0;h=o[u];u++){var _=h.getAttribute("name");s.Xml.domToField_(l,_,h)}},s.Xml.findChildBlocks_=function(o){for(var h,l={childBlockElement:null,childShadowElement:null},u=0;h=o.childNodes[u];u++)h.nodeType==s.utils.dom.NodeType.ELEMENT_NODE&&("block"==h.nodeName.toLowerCase()?l.childBlockElement=h:"shadow"==h.nodeName.toLowerCase()&&(l.childShadowElement=h));return l},s.Xml.applyInputTagNodes_=function(o,l,u,h){for(var b,_=0;b=o[_];_++){var D=b.getAttribute("name"),x=u.getInput(D);if(!x){console.warn("Ignoring non-existent input "+D+" in block "+h);break}if((b=s.Xml.findChildBlocks_(b)).childBlockElement){if(!x.connection)throw TypeError("Input connection does not exist.");s.Xml.domToBlockHeadless_(b.childBlockElement,l,x.connection,!1)}b.childShadowElement&&x.connection.setShadowDom(b.childShadowElement)}},s.Xml.applyNextTagNodes_=function(o,l,u){for(var _,h=0;_=o[h];h++){if((_=s.Xml.findChildBlocks_(_)).childBlockElement){if(!u.nextConnection)throw TypeError("Next statement does not exist.");if(u.nextConnection.isConnected())throw TypeError("Next statement is already connected.");s.Xml.domToBlockHeadless_(_.childBlockElement,l,u.nextConnection,!0)}_.childShadowElement&&u.nextConnection&&u.nextConnection.setShadowDom(_.childShadowElement)}},s.Xml.domToBlockHeadless_=function(o,l,u,h){var _=o.getAttribute("type");if(!_)throw TypeError("Block type unspecified: "+o.outerHTML);var b=o.getAttribute("id");b=l.newBlock(_,b);var D=s.Xml.mapSupportedXmlTags_(o),x=s.Xml.applyMutationTagNodes_(D.mutation,b);if(s.Xml.applyCommentTagNodes_(D.comment,b),s.Xml.applyDataTagNodes_(D.data,b),u)if(h){if(!b.previousConnection)throw TypeError("Next block does not have previous statement.");u.connect(b.previousConnection)}else if(b.outputConnection)u.connect(b.outputConnection);else{if(!b.previousConnection)throw TypeError("Child block does not have output or previous statement.");u.connect(b.previousConnection)}if(s.Xml.applyFieldTagNodes_(D.field,b),s.Xml.applyInputTagNodes_(D.input,l,b,_),s.Xml.applyNextTagNodes_(D.next,l,b),x&&b.initSvg(),(l=o.getAttribute("inline"))&&b.setInputsInline("true"==l),(l=o.getAttribute("disabled"))&&b.setEnabled("true"!=l&&"disabled"!=l),(l=o.getAttribute("deletable"))&&b.setDeletable("true"==l),(l=o.getAttribute("movable"))&&b.setMovable("true"==l),(l=o.getAttribute("editable"))&&b.setEditable("true"==l),(l=o.getAttribute("collapsed"))&&b.setCollapsed("true"==l),"shadow"==o.nodeName.toLowerCase()){for(o=b.getChildren(!1),l=0;u=o[l];l++)if(!u.isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(b.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");b.setShadow(!0)}return b},s.Xml.domToField_=function(o,l,u){var h=o.getField(l);h?h.fromXml(u):console.warn("Ignoring non-existent field "+l+" in block "+o.type)},s.Xml.deleteNext=function(o){for(var u,l=0;u=o.childNodes[l];l++)if("next"==u.nodeName.toLowerCase()){o.removeChild(u);break}},s.Events.BlockBase=function(o){s.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===o)?"":o.id,this.workspaceId=this.isBlank?"":o.workspace.id},s.utils.object.inherits(s.Events.BlockBase,s.Events.Abstract),s.Events.BlockBase.prototype.toJson=function(){var o=s.Events.BlockBase.superClass_.toJson.call(this);return o.blockId=this.blockId,o},s.Events.BlockBase.prototype.fromJson=function(o){s.Events.BlockBase.superClass_.fromJson.call(this,o),this.blockId=o.blockId},s.Events.BlockChange=function(o,l,u,h,_){s.Events.Change.superClass_.constructor.call(this,o),o&&(this.element=void 0===l?"":l,this.name=void 0===u?"":u,this.oldValue=void 0===h?"":h,this.newValue=void 0===_?"":_)},s.utils.object.inherits(s.Events.BlockChange,s.Events.BlockBase),s.Events.Change=s.Events.BlockChange,s.Events.BlockChange.prototype.type=s.Events.CHANGE,s.Events.BlockChange.prototype.toJson=function(){var o=s.Events.BlockChange.superClass_.toJson.call(this);return o.element=this.element,this.name&&(o.name=this.name),o.oldValue=this.oldValue,o.newValue=this.newValue,o},s.Events.BlockChange.prototype.fromJson=function(o){s.Events.BlockChange.superClass_.fromJson.call(this,o),this.element=o.element,this.name=o.name,this.oldValue=o.oldValue,this.newValue=o.newValue},s.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},s.Events.BlockChange.prototype.run=function(o){var l=this.getEventWorkspace_().getBlockById(this.blockId);if(l)switch(l.mutator&&l.mutator.setVisible(!1),o=o?this.newValue:this.oldValue,this.element){case"field":(l=l.getField(this.name))?l.setValue(o):console.warn("Can't set non-existent field: "+this.name);break;case"comment":l.setCommentText(o||null);break;case"collapsed":l.setCollapsed(!!o);break;case"disabled":l.setEnabled(!o);break;case"inline":l.setInputsInline(!!o);break;case"mutation":var u="";if(l.mutationToDom&&(u=(u=l.mutationToDom())&&s.Xml.domToText(u)),l.domToMutation){var h=s.Xml.textToDom(o||"<mutation/>");l.domToMutation(h)}s.Events.fire(new s.Events.BlockChange(l,"mutation",null,u,o));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},s.Events.Create=function(o){s.Events.Create.superClass_.constructor.call(this,o),o&&(o.isShadow()&&(this.recordUndo=!1),this.xml=o.workspace.rendered?s.Xml.blockToDomWithXY(o):s.Xml.blockToDom(o),this.ids=s.Events.getDescendantIds(o))},s.utils.object.inherits(s.Events.Create,s.Events.BlockBase),s.Events.BlockCreate=s.Events.Create,s.Events.Create.prototype.type=s.Events.CREATE,s.Events.Create.prototype.toJson=function(){var o=s.Events.Create.superClass_.toJson.call(this);return o.xml=s.Xml.domToText(this.xml),o.ids=this.ids,this.recordUndo||(o.recordUndo=this.recordUndo),o},s.Events.Create.prototype.fromJson=function(o){s.Events.Create.superClass_.fromJson.call(this,o),this.xml=s.Xml.textToDom(o.xml),this.ids=o.ids,void 0!==o.recordUndo&&(this.recordUndo=o.recordUndo)},s.Events.Create.prototype.run=function(o){var l=this.getEventWorkspace_();if(o)(o=s.utils.xml.createElement("xml")).appendChild(this.xml),s.Xml.domToWorkspace(o,l);else{o=0;for(var u;u=this.ids[o];o++){var h=l.getBlockById(u);h?h.dispose(!1):u==this.blockId&&console.warn("Can't uncreate non-existent block: "+u)}}},s.Events.Delete=function(o){if(s.Events.Delete.superClass_.constructor.call(this,o),o){if(o.getParent())throw Error("Connected blocks cannot be deleted.");o.isShadow()&&(this.recordUndo=!1),this.oldXml=o.workspace.rendered?s.Xml.blockToDomWithXY(o):s.Xml.blockToDom(o),this.ids=s.Events.getDescendantIds(o)}},s.utils.object.inherits(s.Events.Delete,s.Events.BlockBase),s.Events.BlockDelete=s.Events.Delete,s.Events.Delete.prototype.type=s.Events.DELETE,s.Events.Delete.prototype.toJson=function(){var o=s.Events.Delete.superClass_.toJson.call(this);return o.oldXml=s.Xml.domToText(this.oldXml),o.ids=this.ids,this.recordUndo||(o.recordUndo=this.recordUndo),o},s.Events.Delete.prototype.fromJson=function(o){s.Events.Delete.superClass_.fromJson.call(this,o),this.oldXml=s.Xml.textToDom(o.oldXml),this.ids=o.ids,void 0!==o.recordUndo&&(this.recordUndo=o.recordUndo)},s.Events.Delete.prototype.run=function(o){var l=this.getEventWorkspace_();if(o){o=0;for(var u;u=this.ids[o];o++){var h=l.getBlockById(u);h?h.dispose(!1):u==this.blockId&&console.warn("Can't delete non-existent block: "+u)}}else(o=s.utils.xml.createElement("xml")).appendChild(this.oldXml),s.Xml.domToWorkspace(o,l)},s.Events.Move=function(o){s.Events.Move.superClass_.constructor.call(this,o),o&&(o.isShadow()&&(this.recordUndo=!1),o=this.currentLocation_(),this.oldParentId=o.parentId,this.oldInputName=o.inputName,this.oldCoordinate=o.coordinate)},s.utils.object.inherits(s.Events.Move,s.Events.BlockBase),s.Events.BlockMove=s.Events.Move,s.Events.Move.prototype.type=s.Events.MOVE,s.Events.Move.prototype.toJson=function(){var o=s.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(o.newParentId=this.newParentId),this.newInputName&&(o.newInputName=this.newInputName),this.newCoordinate&&(o.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(o.recordUndo=this.recordUndo),o},s.Events.Move.prototype.fromJson=function(o){if(s.Events.Move.superClass_.fromJson.call(this,o),this.newParentId=o.newParentId,this.newInputName=o.newInputName,o.newCoordinate){var l=o.newCoordinate.split(",");this.newCoordinate=new s.utils.Coordinate(Number(l[0]),Number(l[1]))}void 0!==o.recordUndo&&(this.recordUndo=o.recordUndo)},s.Events.Move.prototype.recordNew=function(){var o=this.currentLocation_();this.newParentId=o.parentId,this.newInputName=o.inputName,this.newCoordinate=o.coordinate},s.Events.Move.prototype.currentLocation_=function(){var o=this.getEventWorkspace_().getBlockById(this.blockId),l={},u=o.getParent();return u?(l.parentId=u.id,(o=u.getInputWithBlock(o))&&(l.inputName=o.name)):l.coordinate=o.getRelativeToSurfaceXY(),l},s.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&s.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},s.Events.Move.prototype.run=function(o){var l=this.getEventWorkspace_(),u=l.getBlockById(this.blockId);if(u){var h=o?this.newParentId:this.oldParentId,_=o?this.newInputName:this.oldInputName,b=o?this.newCoordinate:this.oldCoordinate;if(o=null,h&&!(o=l.getBlockById(h)))return void console.warn("Can't connect to non-existent block: "+h);if(u.getParent()&&u.unplug(),b)_=u.getRelativeToSurfaceXY(),u.moveBy(b.x-_.x,b.y-_.y);else{if(l=(u=u.outputConnection||u.previousConnection).type,_){if(o=o.getInput(_))var D=o.connection}else l==s.connectionTypes.PREVIOUS_STATEMENT&&(D=o.nextConnection);D?u.connect(D):console.warn("Can't connect to non-existent input: "+_)}}else console.warn("Can't move non-existent block: "+this.blockId)},s.registry.register(s.registry.Type.EVENT,s.Events.CREATE,s.Events.Create),s.registry.register(s.registry.Type.EVENT,s.Events.DELETE,s.Events.Delete),s.registry.register(s.registry.Type.EVENT,s.Events.CHANGE,s.Events.BlockChange),s.registry.register(s.registry.Type.EVENT,s.Events.MOVE,s.Events.Move),s.Events.FinishedLoading=function(o){this.isBlank=void 0===o,this.workspaceId=o?o.id:"",this.group=s.Events.getGroup(),this.recordUndo=!1},s.utils.object.inherits(s.Events.FinishedLoading,s.Events.Abstract),s.Events.FinishedLoading.prototype.type=s.Events.FINISHED_LOADING,s.Events.FinishedLoading.prototype.toJson=function(){var o={type:this.type};return this.group&&(o.group=this.group),this.workspaceId&&(o.workspaceId=this.workspaceId),o},s.Events.FinishedLoading.prototype.fromJson=function(o){this.isBlank=!1,this.workspaceId=o.workspaceId,this.group=o.group},s.registry.register(s.registry.Type.EVENT,s.Events.FINISHED_LOADING,s.Events.FinishedLoading),s.Events.UiBase=function(o){s.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===o,this.workspaceId=o||"",this.recordUndo=!1},s.utils.object.inherits(s.Events.UiBase,s.Events.Abstract),s.Events.UiBase.prototype.isUiEvent=!0,s.Events.Ui=function(o,l,u,h){s.Events.Ui.superClass_.constructor.call(this,o?o.workspace.id:void 0),this.blockId=o?o.id:null,this.element=void 0===l?"":l,this.oldValue=void 0===u?"":u,this.newValue=void 0===h?"":h},s.utils.object.inherits(s.Events.Ui,s.Events.UiBase),s.Events.Ui.prototype.type=s.Events.UI,s.Events.Ui.prototype.toJson=function(){var o=s.Events.Ui.superClass_.toJson.call(this);return o.element=this.element,void 0!==this.newValue&&(o.newValue=this.newValue),this.blockId&&(o.blockId=this.blockId),o},s.Events.Ui.prototype.fromJson=function(o){s.Events.Ui.superClass_.fromJson.call(this,o),this.element=o.element,this.newValue=o.newValue,this.blockId=o.blockId},s.registry.register(s.registry.Type.EVENT,s.Events.UI,s.Events.Ui),s.Events.VarBase=function(o){s.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===o)?"":o.getId(),this.workspaceId=this.isBlank?"":o.workspace.id},s.utils.object.inherits(s.Events.VarBase,s.Events.Abstract),s.Events.VarBase.prototype.toJson=function(){var o=s.Events.VarBase.superClass_.toJson.call(this);return o.varId=this.varId,o},s.Events.VarBase.prototype.fromJson=function(o){s.Events.VarBase.superClass_.toJson.call(this),this.varId=o.varId},s.Events.VarCreate=function(o){s.Events.VarCreate.superClass_.constructor.call(this,o),o&&(this.varType=o.type,this.varName=o.name)},s.utils.object.inherits(s.Events.VarCreate,s.Events.VarBase),s.Events.VarCreate.prototype.type=s.Events.VAR_CREATE,s.Events.VarCreate.prototype.toJson=function(){var o=s.Events.VarCreate.superClass_.toJson.call(this);return o.varType=this.varType,o.varName=this.varName,o},s.Events.VarCreate.prototype.fromJson=function(o){s.Events.VarCreate.superClass_.fromJson.call(this,o),this.varType=o.varType,this.varName=o.varName},s.Events.VarCreate.prototype.run=function(o){var l=this.getEventWorkspace_();o?l.createVariable(this.varName,this.varType,this.varId):l.deleteVariableById(this.varId)},s.Events.VarDelete=function(o){s.Events.VarDelete.superClass_.constructor.call(this,o),o&&(this.varType=o.type,this.varName=o.name)},s.utils.object.inherits(s.Events.VarDelete,s.Events.VarBase),s.Events.VarDelete.prototype.type=s.Events.VAR_DELETE,s.Events.VarDelete.prototype.toJson=function(){var o=s.Events.VarDelete.superClass_.toJson.call(this);return o.varType=this.varType,o.varName=this.varName,o},s.Events.VarDelete.prototype.fromJson=function(o){s.Events.VarDelete.superClass_.fromJson.call(this,o),this.varType=o.varType,this.varName=o.varName},s.Events.VarDelete.prototype.run=function(o){var l=this.getEventWorkspace_();o?l.deleteVariableById(this.varId):l.createVariable(this.varName,this.varType,this.varId)},s.Events.VarRename=function(o,l){s.Events.VarRename.superClass_.constructor.call(this,o),o&&(this.oldName=o.name,this.newName=void 0===l?"":l)},s.utils.object.inherits(s.Events.VarRename,s.Events.VarBase),s.Events.VarRename.prototype.type=s.Events.VAR_RENAME,s.Events.VarRename.prototype.toJson=function(){var o=s.Events.VarRename.superClass_.toJson.call(this);return o.oldName=this.oldName,o.newName=this.newName,o},s.Events.VarRename.prototype.fromJson=function(o){s.Events.VarRename.superClass_.fromJson.call(this,o),this.oldName=o.oldName,this.newName=o.newName},s.Events.VarRename.prototype.run=function(o){this.getEventWorkspace_().renameVariableById(this.varId,o?this.newName:this.oldName)},s.registry.register(s.registry.Type.EVENT,s.Events.VAR_CREATE,s.Events.VarCreate),s.registry.register(s.registry.Type.EVENT,s.Events.VAR_DELETE,s.Events.VarDelete),s.registry.register(s.registry.Type.EVENT,s.Events.VAR_RENAME,s.Events.VarRename),s.BlockDragSurfaceSvg=function(o){this.container_=o,this.createDom()},s.BlockDragSurfaceSvg.prototype.SVG_=null,s.BlockDragSurfaceSvg.prototype.dragGroup_=null,s.BlockDragSurfaceSvg.prototype.container_=null,s.BlockDragSurfaceSvg.prototype.scale_=1,s.BlockDragSurfaceSvg.prototype.surfaceXY_=null,s.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new s.utils.Coordinate(0,0),s.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},this.SVG_))},s.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(o){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(o),this.SVG_.style.display="block",this.surfaceXY_=new s.utils.Coordinate(0,0)},s.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(o,l,u){this.scale_=u,o=o.toFixed(0),l=l.toFixed(0),this.childSurfaceXY_.x=parseInt(o,10),this.childSurfaceXY_.y=parseInt(l,10),this.dragGroup_.setAttribute("transform","translate("+o+","+l+") scale("+u+")")},s.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var o=this.surfaceXY_.x,l=this.surfaceXY_.y;o=o.toFixed(0),l=l.toFixed(0),this.SVG_.style.display="block",s.utils.dom.setCssTransform(this.SVG_,"translate3d("+o+"px, "+l+"px, 0px)")},s.BlockDragSurfaceSvg.prototype.translateBy=function(o,l){this.surfaceXY_=new s.utils.Coordinate(this.surfaceXY_.x+o,this.surfaceXY_.y+l),this.translateSurfaceInternal_()},s.BlockDragSurfaceSvg.prototype.translateSurface=function(o,l){this.surfaceXY_=new s.utils.Coordinate(o*this.scale_,l*this.scale_),this.translateSurfaceInternal_()},s.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var o=s.utils.getRelativeXY(this.SVG_);return new s.utils.Coordinate(o.x/this.scale_,o.y/this.scale_)},s.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},s.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},s.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},s.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},s.BlockDragSurfaceSvg.prototype.clearAndHide=function(o){if(o?o.appendChild(this.getCurrentBlock()):this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null},s.Css={},s.Css.injected_=!1,s.Css.register=function(o){if(s.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(s.Css.CONTENT,o),o.length=0},s.Css.inject=function(o,l){if(!s.Css.injected_){s.Css.injected_=!0;var u=s.Css.CONTENT.join("\n");s.Css.CONTENT.length=0,o&&(o=l.replace(/[\\/]$/,""),u=u.replace(/<<<PATH>>>/g,o),(o=document.createElement("style")).id="blockly-common-style",u=document.createTextNode(u),o.appendChild(u),document.head.insertBefore(o,document.head.firstChild))}},s.Css.CONTENT=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"],s.Grid=function(o,l){this.gridPattern_=o,this.spacing_=l.spacing,this.length_=l.length,this.line2_=(this.line1_=o.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=l.snap},s.Grid.prototype.scale_=1,s.Grid.prototype.dispose=function(){this.gridPattern_=null},s.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},s.Grid.prototype.getSpacing=function(){return this.spacing_},s.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},s.Grid.prototype.update=function(o){this.scale_=o;var l=this.spacing_*o||100;this.gridPattern_.setAttribute("width",l),this.gridPattern_.setAttribute("height",l);var u=(l=Math.floor(this.spacing_/2)+.5)-this.length_/2,h=l+this.length_/2;this.setLineAttributes_(this.line1_,o,u*=o,h*=o,l*=o,l),this.setLineAttributes_(this.line2_,o,l,l,u,h)},s.Grid.prototype.setLineAttributes_=function(o,l,u,h,_,b){o&&(o.setAttribute("stroke-width",l),o.setAttribute("x1",u),o.setAttribute("y1",_),o.setAttribute("x2",h),o.setAttribute("y2",b))},s.Grid.prototype.moveTo=function(o,l){this.gridPattern_.setAttribute("x",o),this.gridPattern_.setAttribute("y",l),(s.utils.userAgent.IE||s.utils.userAgent.EDGE)&&this.update(this.scale_)},s.Grid.createDom=function(o,l,u){return o=s.utils.dom.createSvgElement(s.utils.Svg.PATTERN,{id:"blocklyGridPattern"+o,patternUnits:"userSpaceOnUse"},u),0<l.length&&0<l.spacing?(s.utils.dom.createSvgElement(s.utils.Svg.LINE,{stroke:l.colour},o),1<l.length&&s.utils.dom.createSvgElement(s.utils.Svg.LINE,{stroke:l.colour},o)):s.utils.dom.createSvgElement(s.utils.Svg.LINE,{},o),o},s.Theme=function(o,l,u,h){this.name=o,this.blockStyles=l||Object.create(null),this.categoryStyles=u||Object.create(null),this.componentStyles=h||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,s.registry.register(s.registry.Type.THEME,o,this)},s.Theme.prototype.getClassName=function(){return this.name+"-theme"},s.Theme.prototype.setBlockStyle=function(o,l){this.blockStyles[o]=l},s.Theme.prototype.setCategoryStyle=function(o,l){this.categoryStyles[o]=l},s.Theme.prototype.getComponentStyle=function(o){return(o=this.componentStyles[o])&&"string"==typeof o&&this.getComponentStyle(o)?this.getComponentStyle(o):o?String(o):null},s.Theme.prototype.setComponentStyle=function(o,l){this.componentStyles[o]=l},s.Theme.prototype.setFontStyle=function(o){this.fontStyle=o},s.Theme.prototype.setStartHats=function(o){this.startHats=o},s.Theme.defineTheme=function(o,l){var u=new s.Theme(o),h=l.base;return h&&("string"==typeof h&&(h=s.registry.getObject(s.registry.Type.THEME,h)),h instanceof s.Theme&&(s.utils.object.deepMerge(u,h),u.name=o)),s.utils.object.deepMerge(u.blockStyles,l.blockStyles),s.utils.object.deepMerge(u.categoryStyles,l.categoryStyles),s.utils.object.deepMerge(u.componentStyles,l.componentStyles),s.utils.object.deepMerge(u.fontStyle,l.fontStyle),null!=l.startHats&&(u.startHats=l.startHats),u},s.Themes={},s.Themes.Classic={},s.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},s.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},s.Themes.Classic=new s.Theme("classic",s.Themes.Classic.defaultBlockStyles,s.Themes.Classic.categoryStyles),s.utils.IdGenerator={},s.utils.IdGenerator.nextId_=0,s.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(s.utils.IdGenerator.nextId_++).toString(36)},s.utils.Metrics=function(){},s.utils.toolbox={},s.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",s.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",s.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},s.utils.toolbox.convertToolboxDefToJson=function(o){return o?((o instanceof Element||"string"==typeof o)&&(o=s.utils.toolbox.parseToolboxTree(o),o=s.utils.toolbox.convertToToolboxJson_(o)),s.utils.toolbox.validateToolbox_(o),o):null},s.utils.toolbox.validateToolbox_=function(o){var l=o.kind;if(o=o.contents,l&&l!=s.utils.toolbox.FLYOUT_TOOLBOX_KIND&&l!=s.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+l+". Please supply either "+s.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+s.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!o)throw Error("Toolbox must have a contents attribute.")},s.utils.toolbox.convertFlyoutDefToJsonArray=function(o){return o?o.contents?o.contents:Array.isArray(o)&&0<o.length&&!o[0].nodeType?o:s.utils.toolbox.xmlToJsonArray_(o):[]},s.utils.toolbox.hasCategories=function(o){if(!o)return!1;var l=o.kind;return l?l==s.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!o.contents.filter(function(u){return"CATEGORY"==u.kind.toUpperCase()}).length},s.utils.toolbox.isCategoryCollapsible=function(o){return!(!o||!o.contents||!o.contents.filter(function(l){return"CATEGORY"==l.kind.toUpperCase()}).length)},s.utils.toolbox.convertToToolboxJson_=function(o){var l={contents:s.utils.toolbox.xmlToJsonArray_(o)};return o instanceof Node&&s.utils.toolbox.addAttributes_(o,l),l},s.utils.toolbox.xmlToJsonArray_=function(o){var h,l=[],u=o.childNodes;for(u||(u=o),o=0;h=u[o];o++)if(h.tagName){var _={},b=h.tagName.toUpperCase();_.kind=b,"BLOCK"==b?_.blockxml=h:h.childNodes&&0<h.childNodes.length&&(_.contents=s.utils.toolbox.xmlToJsonArray_(h)),s.utils.toolbox.addAttributes_(h,_),l.push(_)}return l},s.utils.toolbox.addAttributes_=function(o,l){for(var u=0;u<o.attributes.length;u++){var h=o.attributes[u];-1<h.nodeName.indexOf("css-")?(l.cssconfig=l.cssconfig||{},l.cssconfig[h.nodeName.replace("css-","")]=h.value):l[h.nodeName]=h.value}},s.utils.toolbox.parseToolboxTree=function(o){if(o){if("string"!=typeof o&&(s.utils.userAgent.IE&&o.outerHTML?o=o.outerHTML:o instanceof Element||(o=null)),"string"==typeof o&&"xml"!=(o=s.Xml.textToDom(o)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else o=null;return o},s.Options=function(o){var l=!!o.readOnly;if(l)var u=null,h=!1,_=!1,b=!1,D=!1,x=!1,G=!1;else{u=s.utils.toolbox.convertToolboxDefToJson(o.toolbox),h=s.utils.toolbox.hasCategories(u),void 0===(_=o.trashcan)&&(_=h);var j=o.maxTrashcanContents;_?void 0===j&&(j=32):j=0,void 0===(b=o.collapse)&&(b=h),void 0===(D=o.comments)&&(D=h),void 0===(x=o.disable)&&(x=h),void 0===(G=o.sounds)&&(G=!0)}var F=!!o.rtl,q=o.horizontalLayout;void 0===q&&(q=!1);var Q=o.toolboxPosition;Q="end"!==Q,Q=q?Q?s.utils.toolbox.Position.TOP:s.utils.toolbox.Position.BOTTOM:Q==F?s.utils.toolbox.Position.RIGHT:s.utils.toolbox.Position.LEFT;var Y=o.css;void 0===Y&&(Y=!0);var ae="https://blockly-demo.appspot.com/static/media/";o.media?ae=o.media:o.path&&(ae=o.path+"media/");var ie=void 0===o.oneBasedIndex||!!o.oneBasedIndex,he=o.renderer||"geras",te=o.plugins||{};this.RTL=F,this.oneBasedIndex=ie,this.collapse=b,this.comments=D,this.disable=x,this.readOnly=l,this.maxBlocks=o.maxBlocks||1/0,this.maxInstances=o.maxInstances,this.pathToMedia=ae,this.hasCategories=h,this.moveOptions=s.Options.parseMoveOptions_(o,h),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=_,this.maxTrashcanContents=j,this.hasSounds=G,this.hasCss=Y,this.horizontalLayout=q,this.languageTree=u,this.gridOptions=s.Options.parseGridOptions_(o),this.zoomOptions=s.Options.parseZoomOptions_(o),this.toolboxPosition=Q,this.theme=s.Options.parseThemeOptions_(o),this.renderer=he,this.rendererOverrides=o.rendererOverrides,this.gridPattern=null,this.parentWorkspace=o.parentWorkspace,this.plugins=te},s.BlocklyOptions=function(){},s.Options.parseMoveOptions_=function(o,l){var u=o.move||{},h={};return void 0===u.scrollbars&&void 0===o.scrollbars?h.scrollbars=l:"object"==typeof u.scrollbars?(h.scrollbars={},h.scrollbars.horizontal=!!u.scrollbars.horizontal,h.scrollbars.vertical=!!u.scrollbars.vertical,h.scrollbars.horizontal&&h.scrollbars.vertical?h.scrollbars=!0:h.scrollbars.horizontal||h.scrollbars.vertical||(h.scrollbars=!1)):h.scrollbars=!!u.scrollbars||!!o.scrollbars,h.wheel=h.scrollbars&&void 0!==u.wheel?!!u.wheel:"object"==typeof h.scrollbars,h.drag=!(!h.scrollbars||void 0!==u.drag&&!u.drag),h},s.Options.parseZoomOptions_=function(o){var l={};return l.controls=void 0!==(o=o.zoom||{}).controls&&!!o.controls,l.wheel=void 0!==o.wheel&&!!o.wheel,l.startScale=void 0===o.startScale?1:Number(o.startScale),l.maxScale=void 0===o.maxScale?3:Number(o.maxScale),l.minScale=void 0===o.minScale?.3:Number(o.minScale),l.scaleSpeed=void 0===o.scaleSpeed?1.2:Number(o.scaleSpeed),l.pinch=void 0===o.pinch?l.wheel||l.controls:!!o.pinch,l},s.Options.parseGridOptions_=function(o){o=o.grid||{};var l={};return l.spacing=Number(o.spacing)||0,l.colour=o.colour||"#888",l.length=void 0===o.length?1:Number(o.length),l.snap=0<l.spacing&&!!o.snap,l},s.Options.parseThemeOptions_=function(o){return"string"==typeof(o=o.theme||s.Themes.Classic)?s.registry.getObject(s.registry.Type.THEME,o):o instanceof s.Theme?o:s.Theme.defineTheme(o.name||"builtin"+s.utils.IdGenerator.getNextUniqueId(),o)},s.Options.parseToolboxTree=function(o){return s.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),s.utils.toolbox.parseToolboxTree(o)},s.ScrollbarPair=function(o,l,u,h,_){this.workspace_=o,u=void 0===u||u;var b=(l=void 0===l||l)&&u;l&&(this.hScroll=new s.Scrollbar(o,!0,b,h,_)),u&&(this.vScroll=new s.Scrollbar(o,!1,b,h,_)),b&&(this.corner_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{height:s.Scrollbar.scrollbarThickness,width:s.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),s.utils.dom.insertAfter(this.corner_,o.getBubbleCanvas())),this.oldHostMetrics_=null},s.ScrollbarPair.prototype.dispose=function(){s.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},s.ScrollbarPair.prototype.resize=function(){var o=this.workspace_.getMetrics();if(o){var l=!1,u=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==o.viewWidth&&this.oldHostMetrics_.viewHeight==o.viewHeight&&this.oldHostMetrics_.absoluteTop==o.absoluteTop&&this.oldHostMetrics_.absoluteLeft==o.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==o.scrollWidth&&this.oldHostMetrics_.viewLeft==o.viewLeft&&this.oldHostMetrics_.scrollLeft==o.scrollLeft||(l=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==o.scrollHeight&&this.oldHostMetrics_.viewTop==o.viewTop&&this.oldHostMetrics_.scrollTop==o.scrollTop||(u=!0)):u=l=!0,l||u){try{s.Events.disable(),this.hScroll&&l&&this.hScroll.resize(o),this.vScroll&&u&&this.vScroll.resize(o)}finally{s.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==o.viewWidth&&this.oldHostMetrics_.absoluteLeft==o.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==o.viewHeight&&this.oldHostMetrics_.absoluteTop==o.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=o}},s.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},s.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},s.ScrollbarPair.prototype.setOrigin=function(o,l){this.hScroll&&this.hScroll.setOrigin(o,l),this.vScroll&&this.vScroll.setOrigin(o,l)},s.ScrollbarPair.prototype.set=function(o,l,u){this.hScroll&&this.hScroll.set(o,!1),this.vScroll&&this.vScroll.set(l,!1),(u||void 0===u)&&(o={},this.hScroll&&(o.x=this.hScroll.getRatio_()),this.vScroll&&(o.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(o))},s.ScrollbarPair.prototype.setX=function(o){this.hScroll&&this.hScroll.set(o,!0)},s.ScrollbarPair.prototype.setY=function(o){this.vScroll&&this.vScroll.set(o,!0)},s.ScrollbarPair.prototype.setContainerVisible=function(o){this.hScroll&&this.hScroll.setContainerVisible(o),this.vScroll&&this.vScroll.setContainerVisible(o)},s.ScrollbarPair.prototype.isVisible=function(){var o=!1;return this.hScroll&&(o=this.hScroll.isVisible()),this.vScroll&&(o=o||this.vScroll.isVisible()),o},s.ScrollbarPair.prototype.resizeContent=function(o){this.hScroll&&this.hScroll.resizeContentHorizontal(o),this.vScroll&&this.vScroll.resizeContentVertical(o)},s.ScrollbarPair.prototype.resizeView=function(o){this.hScroll&&this.hScroll.resizeViewHorizontal(o),this.vScroll&&this.vScroll.resizeViewVertical(o)},s.Scrollbar=function(o,l,u,h,_){this.workspace_=o,this.pair_=u||!1,this.horizontal_=l,this.margin_=void 0!==_?_:s.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.createDom_(h),this.position=new s.utils.Coordinate(0,0),o=s.Scrollbar.scrollbarThickness,l?(this.svgBackground_.setAttribute("height",o),this.outerSvg_.setAttribute("height",o),this.svgHandle_.setAttribute("height",o-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",o),this.outerSvg_.setAttribute("width",o),this.svgHandle_.setAttribute("width",o-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=s.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=s.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},s.Scrollbar.prototype.origin_=new s.utils.Coordinate(0,0),s.Scrollbar.prototype.startDragMouse_=0,s.Scrollbar.prototype.scrollbarLength_=0,s.Scrollbar.prototype.handleLength_=0,s.Scrollbar.prototype.handlePosition_=0,s.Scrollbar.prototype.isVisible_=!0,s.Scrollbar.prototype.containerVisible_=!0,s.Scrollbar.scrollbarThickness=15,s.Touch.TOUCH_ENABLED&&(s.Scrollbar.scrollbarThickness=25),s.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,s.Scrollbar.metricsAreEquivalent_=function(o,l){return o.viewWidth==l.viewWidth&&o.viewHeight==l.viewHeight&&o.viewLeft==l.viewLeft&&o.viewTop==l.viewTop&&o.absoluteTop==l.absoluteTop&&o.absoluteLeft==l.absoluteLeft&&o.scrollWidth==l.scrollWidth&&o.scrollHeight==l.scrollHeight&&o.scrollLeft==l.scrollLeft&&o.scrollTop==l.scrollTop},s.Scrollbar.prototype.dispose=function(){this.cleanUp_(),s.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,s.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,s.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},s.Scrollbar.prototype.constrainHandleLength_=function(o){return 0>=o||isNaN(o)?0:Math.min(o,this.scrollbarLength_)},s.Scrollbar.prototype.setHandleLength_=function(o){this.handleLength_=o,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},s.Scrollbar.prototype.constrainHandlePosition_=function(o){return 0>=o||isNaN(o)?0:Math.min(o,this.scrollbarLength_-this.handleLength_)},s.Scrollbar.prototype.setHandlePosition=function(o){this.handlePosition_=o,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},s.Scrollbar.prototype.setScrollbarLength_=function(o){this.scrollbarLength_=o,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},s.Scrollbar.prototype.setPosition=function(o,l){this.position.x=o,this.position.y=l,s.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},s.Scrollbar.prototype.resize=function(o){!o&&!(o=this.workspace_.getMetrics())||this.oldHostMetrics_&&s.Scrollbar.metricsAreEquivalent_(o,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(o):this.resizeVertical_(o),this.oldHostMetrics_=o,this.updateMetrics_())},s.Scrollbar.prototype.requiresViewResize_=function(o){return!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==o.viewWidth||this.oldHostMetrics_.viewHeight!==o.viewHeight||this.oldHostMetrics_.absoluteLeft!==o.absoluteLeft||this.oldHostMetrics_.absoluteTop!==o.absoluteTop},s.Scrollbar.prototype.resizeHorizontal_=function(o){this.requiresViewResize_(o)?this.resizeViewHorizontal(o):this.resizeContentHorizontal(o)},s.Scrollbar.prototype.resizeViewHorizontal=function(o){var l=o.viewWidth-2*this.margin_;this.pair_&&(l-=s.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,l)),l=o.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(l+=s.Scrollbar.scrollbarThickness),this.setPosition(l,o.absoluteTop+o.viewHeight-s.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(o)},s.Scrollbar.prototype.resizeContentHorizontal=function(o){if(o.viewWidth>=o.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var l=this.scrollbarLength_*o.viewWidth/o.scrollWidth;l=this.constrainHandleLength_(l),this.setHandleLength_(l);var u=this.scrollbarLength_-this.handleLength_;o=this.constrainHandlePosition_(o=(o.viewLeft-o.scrollLeft)/(l=o.scrollWidth-o.viewWidth)*u),this.setHandlePosition(o),this.ratio=u/l}},s.Scrollbar.prototype.resizeVertical_=function(o){this.requiresViewResize_(o)?this.resizeViewVertical(o):this.resizeContentVertical(o)},s.Scrollbar.prototype.resizeViewVertical=function(o){var l=o.viewHeight-2*this.margin_;this.pair_&&(l-=s.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,l)),this.setPosition(this.workspace_.RTL?o.absoluteLeft+this.margin_:o.absoluteLeft+o.viewWidth-s.Scrollbar.scrollbarThickness-this.margin_,o.absoluteTop+this.margin_),this.resizeContentVertical(o)},s.Scrollbar.prototype.resizeContentVertical=function(o){if(o.viewHeight>=o.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var l=this.scrollbarLength_*o.viewHeight/o.scrollHeight;l=this.constrainHandleLength_(l),this.setHandleLength_(l);var u=this.scrollbarLength_-this.handleLength_;o=this.constrainHandlePosition_(o=(o.viewTop-o.scrollTop)/(l=o.scrollHeight-o.viewHeight)*u),this.setHandlePosition(o),this.ratio=u/l}},s.Scrollbar.prototype.createDom_=function(o){var l="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");o&&(l+=" "+o),this.outerSvg_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{class:l},null),this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),o=Math.floor((s.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:o,ry:o},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),s.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},s.Scrollbar.prototype.isVisible=function(){return this.isVisible_},s.Scrollbar.prototype.setContainerVisible=function(o){var l=o!=this.containerVisible_;this.containerVisible_=o,l&&this.updateDisplay_()},s.Scrollbar.prototype.setVisible=function(o){var l=o!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=o,l&&this.updateDisplay_()},s.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},s.Scrollbar.prototype.onMouseDownBar_=function(o){if(this.workspace_.markFocused(),s.Touch.clearTouchIdentifier(),this.cleanUp_(),s.utils.isRightButton(o))o.stopPropagation();else{var l=s.utils.mouseToSvg(o,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());l=this.horizontal_?l.x:l.y;var u=s.utils.getInjectionDivXY_(this.svgHandle_),h=this.handlePosition_,_=.95*this.handleLength_;l<=(u=this.horizontal_?u.x:u.y)?h-=_:l>=u+this.handleLength_&&(h+=_),this.setHandlePosition(this.constrainHandlePosition_(h)),this.updateMetrics_(),o.stopPropagation(),o.preventDefault()}},s.Scrollbar.prototype.onMouseDownHandle_=function(o){this.workspace_.markFocused(),this.cleanUp_(),s.utils.isRightButton(o)?o.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?o.clientX:o.clientY,s.Scrollbar.onMouseUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),s.Scrollbar.onMouseMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),o.stopPropagation(),o.preventDefault())},s.Scrollbar.prototype.onMouseMoveHandle_=function(o){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?o.clientX:o.clientY)-this.startDragMouse_))),this.updateMetrics_()},s.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),s.Touch.clearTouchIdentifier(),this.cleanUp_()},s.Scrollbar.prototype.cleanUp_=function(){s.hideChaff(!0),s.Scrollbar.onMouseUpWrapper_&&(s.browserEvents.unbind(s.Scrollbar.onMouseUpWrapper_),s.Scrollbar.onMouseUpWrapper_=null),s.Scrollbar.onMouseMoveWrapper_&&(s.browserEvents.unbind(s.Scrollbar.onMouseMoveWrapper_),s.Scrollbar.onMouseMoveWrapper_=null)},s.Scrollbar.prototype.getRatio_=function(){var o=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(o)&&(o=0),o},s.Scrollbar.prototype.updateMetrics_=function(){var o=this.getRatio_(),l={};this.horizontal_?l.x=o:l.y=o,this.workspace_.setMetrics(l)},s.Scrollbar.prototype.set=function(o,l){this.setHandlePosition(this.constrainHandlePosition_(o*this.ratio)),(l||void 0===l)&&this.updateMetrics_()},s.Scrollbar.prototype.setOrigin=function(o,l){this.origin_=new s.utils.Coordinate(o,l)},s.Tooltip={},s.Tooltip.visible=!1,s.Tooltip.blocked_=!1,s.Tooltip.LIMIT=50,s.Tooltip.mouseOutPid_=0,s.Tooltip.showPid_=0,s.Tooltip.lastX_=0,s.Tooltip.lastY_=0,s.Tooltip.element_=null,s.Tooltip.poisonedElement_=null,s.Tooltip.OFFSET_X=0,s.Tooltip.OFFSET_Y=10,s.Tooltip.RADIUS_OK=10,s.Tooltip.HOVER_MS=750,s.Tooltip.MARGINS=5,s.Tooltip.DIV=null,s.Tooltip.getTooltipOfObject=function(o){if(o=s.Tooltip.getTargetObject_(o)){for(o=o.tooltip;"function"==typeof o;)o=o();if("string"!=typeof o)throw Error("Tooltip function must return a string.");return o}return""},s.Tooltip.getTargetObject_=function(o){for(;o&&o.tooltip;){if("string"==typeof o.tooltip||"function"==typeof o.tooltip)return o;o=o.tooltip}return null},s.Tooltip.createDom=function(){s.Tooltip.DIV||(s.Tooltip.DIV=document.createElement("div"),s.Tooltip.DIV.className="blocklyTooltipDiv",(s.parentContainer||document.body).appendChild(s.Tooltip.DIV))},s.Tooltip.bindMouseEvents=function(o){o.mouseOverWrapper_=s.browserEvents.bind(o,"mouseover",null,s.Tooltip.onMouseOver_),o.mouseOutWrapper_=s.browserEvents.bind(o,"mouseout",null,s.Tooltip.onMouseOut_),o.addEventListener("mousemove",s.Tooltip.onMouseMove_,!1)},s.Tooltip.unbindMouseEvents=function(o){o&&(s.browserEvents.unbind(o.mouseOverWrapper_),s.browserEvents.unbind(o.mouseOutWrapper_),o.removeEventListener("mousemove",s.Tooltip.onMouseMove_))},s.Tooltip.onMouseOver_=function(o){s.Tooltip.blocked_||(o=s.Tooltip.getTargetObject_(o.currentTarget),s.Tooltip.element_!=o&&(s.Tooltip.hide(),s.Tooltip.poisonedElement_=null,s.Tooltip.element_=o),clearTimeout(s.Tooltip.mouseOutPid_))},s.Tooltip.onMouseOut_=function(o){s.Tooltip.blocked_||(s.Tooltip.mouseOutPid_=setTimeout(function(){s.Tooltip.element_=null,s.Tooltip.poisonedElement_=null,s.Tooltip.hide()},1),clearTimeout(s.Tooltip.showPid_))},s.Tooltip.onMouseMove_=function(o){if(s.Tooltip.element_&&s.Tooltip.element_.tooltip&&!s.Tooltip.blocked_)if(s.Tooltip.visible){var l=s.Tooltip.lastX_-o.pageX;o=s.Tooltip.lastY_-o.pageY,Math.sqrt(l*l+o*o)>s.Tooltip.RADIUS_OK&&s.Tooltip.hide()}else s.Tooltip.poisonedElement_!=s.Tooltip.element_&&(clearTimeout(s.Tooltip.showPid_),s.Tooltip.lastX_=o.pageX,s.Tooltip.lastY_=o.pageY,s.Tooltip.showPid_=setTimeout(s.Tooltip.show_,s.Tooltip.HOVER_MS))},s.Tooltip.dispose=function(){s.Tooltip.element_=null,s.Tooltip.poisonedElement_=null,s.Tooltip.hide()},s.Tooltip.hide=function(){s.Tooltip.visible&&(s.Tooltip.visible=!1,s.Tooltip.DIV&&(s.Tooltip.DIV.style.display="none")),s.Tooltip.showPid_&&clearTimeout(s.Tooltip.showPid_)},s.Tooltip.block=function(){s.Tooltip.hide(),s.Tooltip.blocked_=!0},s.Tooltip.unblock=function(){s.Tooltip.blocked_=!1},s.Tooltip.show_=function(){if(!s.Tooltip.blocked_&&(s.Tooltip.poisonedElement_=s.Tooltip.element_,s.Tooltip.DIV)){s.Tooltip.DIV.textContent="";var o=s.Tooltip.getTooltipOfObject(s.Tooltip.element_);o=(o=s.utils.string.wrap(o,s.Tooltip.LIMIT)).split("\n");for(var l=0;l<o.length;l++){var u=document.createElement("div");u.appendChild(document.createTextNode(o[l])),s.Tooltip.DIV.appendChild(u)}o=s.Tooltip.element_.RTL,l=document.documentElement.clientWidth,u=document.documentElement.clientHeight,s.Tooltip.DIV.style.direction=o?"rtl":"ltr",s.Tooltip.DIV.style.display="block",s.Tooltip.visible=!0;var h=s.Tooltip.lastX_;h=o?h-(s.Tooltip.OFFSET_X+s.Tooltip.DIV.offsetWidth):h+s.Tooltip.OFFSET_X;var _=s.Tooltip.lastY_+s.Tooltip.OFFSET_Y;_+s.Tooltip.DIV.offsetHeight>u+window.scrollY&&(_-=s.Tooltip.DIV.offsetHeight+2*s.Tooltip.OFFSET_Y),o?h=Math.max(s.Tooltip.MARGINS-window.scrollX,h):h+s.Tooltip.DIV.offsetWidth>l+window.scrollX-2*s.Tooltip.MARGINS&&(h=l-s.Tooltip.DIV.offsetWidth-2*s.Tooltip.MARGINS),s.Tooltip.DIV.style.top=_+"px",s.Tooltip.DIV.style.left=h+"px"}},s.utils.aria={},s.utils.aria.ARIA_PREFIX_="aria-",s.utils.aria.ROLE_ATTRIBUTE_="role",s.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},s.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},s.utils.aria.setRole=function(o,l){o.setAttribute(s.utils.aria.ROLE_ATTRIBUTE_,l)},s.utils.aria.setState=function(o,l,u){Array.isArray(u)&&(u=u.join(" ")),o.setAttribute(s.utils.aria.ARIA_PREFIX_+l,u)},s.IASTNodeLocation=function(){},s.IASTNodeLocationSvg=function(){},s.IASTNodeLocationWithBlock=function(){},s.IKeyboardAccessible=function(){},s.utils.deprecation={},s.utils.deprecation.warn=function(o,l,u,h){o=o+" was deprecated on "+l+" and will be deleted on "+u+".",h&&(o+="\nUse "+h+" instead."),console.warn(o)},s.Connection=function(o,l){this.sourceBlock_=o,this.type=l},s.Connection.CAN_CONNECT=0,s.Connection.REASON_SELF_CONNECTION=1,s.Connection.REASON_WRONG_TYPE=2,s.Connection.REASON_TARGET_NULL=3,s.Connection.REASON_CHECKS_FAILED=4,s.Connection.REASON_DIFFERENT_WORKSPACES=5,s.Connection.REASON_SHADOW_PARENT=6,s.Connection.REASON_DRAG_CHECKS_FAILED=7,s.Connection.prototype.targetConnection=null,s.Connection.prototype.disposed=!1,s.Connection.prototype.check_=null,s.Connection.prototype.shadowDom_=null,s.Connection.prototype.x=0,s.Connection.prototype.y=0,s.Connection.prototype.connect_=function(o){var x,l=s.connectionTypes.INPUT_VALUE,u=this.getSourceBlock(),h=o.getSourceBlock();if(o.isConnected()&&o.disconnect(),this.isConnected()){var _=this.getShadowDom(!0);this.shadowDom_=null;var b=this.targetBlock();if(b.isShadow())b.dispose(!1);else{this.disconnect();var D=b}this.shadowDom_=_}s.Events.isEnabled()&&(x=new(s.Events.get(s.Events.BLOCK_MOVE))(h)),s.Connection.connectReciprocally_(this,o),h.setParent(u),x&&(x.recordNew(),s.Events.fire(x)),D&&((h=s.Connection.getConnectionForOrphanedConnection(h,o=this.type===l?D.outputConnection:D.previousConnection))?o.connect(h):o.onFailedConnect(this))},s.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var o=this.targetBlock();o&&o.unplug()}this.disposed=!0},s.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},s.Connection.prototype.isSuperior=function(){return this.type==s.connectionTypes.INPUT_VALUE||this.type==s.connectionTypes.NEXT_STATEMENT},s.Connection.prototype.isConnected=function(){return!!this.targetConnection},s.Connection.prototype.canConnectWithReason=function(o){return s.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,o,!1)},s.Connection.prototype.checkConnection=function(o){s.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var l=this.getConnectionChecker(),u=l.canConnectWithReason(this,o,!1);if(u!=s.Connection.CAN_CONNECT)throw Error(l.getErrorMessage(u,this,o))},s.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},s.Connection.prototype.isConnectionAllowed=function(o){return s.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,o,!0)},s.Connection.prototype.onFailedConnect=function(o){},s.Connection.prototype.connect=function(o){if(this.targetConnection!=o&&this.getConnectionChecker().canConnect(this,o,!1)){var l=s.Events.getGroup();l||s.Events.setGroup(!0),this.isSuperior()?this.connect_(o):o.connect_(this),l||s.Events.setGroup(!1)}},s.Connection.connectReciprocally_=function(o,l){if(!o||!l)throw Error("Cannot connect null connections.");o.targetConnection=l,l.targetConnection=o},s.Connection.getSingleConnection_=function(o,l){for(var b,u=null,h=(l=l.outputConnection).getConnectionChecker(),_=0;b=o.inputList[_];_++)if((b=b.connection)&&h.canConnect(l,b,!1)){if(u)return null;u=b}return u},s.Connection.getConnectionForOrphanedOutput_=function(o,l){for(var u;u=s.Connection.getSingleConnection_(o,l);)if(!(o=u.targetBlock())||o.isShadow())return u;return null},s.Connection.getConnectionForOrphanedConnection=function(o,l){if(l.type===s.connectionTypes.OUTPUT_VALUE)return s.Connection.getConnectionForOrphanedOutput_(o,l.getSourceBlock());o=o.lastConnectionInStack(!0);var u=l.getConnectionChecker();return o&&u.canConnect(l,o,!1)?o:null},s.Connection.prototype.disconnect=function(){var o=this.targetConnection;if(!o)throw Error("Source connection not connected.");if(o.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var l=this.sourceBlock_,u=o.getSourceBlock();o=this}else l=o.getSourceBlock(),u=this.sourceBlock_;var h=s.Events.getGroup();h||s.Events.setGroup(!0),this.disconnectInternal_(l,u),u.isShadow()||o.respawnShadow_(),h||s.Events.setGroup(!1)},s.Connection.prototype.disconnectInternal_=function(o,l){var u;s.Events.isEnabled()&&(u=new(s.Events.get(s.Events.BLOCK_MOVE))(l)),this.targetConnection=this.targetConnection.targetConnection=null,l.setParent(null),u&&(u.recordNew(),s.Events.fire(u))},s.Connection.prototype.respawnShadow_=function(){var o=this.getSourceBlock(),l=this.getShadowDom();if(o.workspace&&l)if((o=s.Xml.domToBlock(l,o.workspace)).outputConnection)this.connect(o.outputConnection);else{if(!o.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(o.previousConnection)}},s.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},s.Connection.prototype.checkType=function(o){return s.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,o,!1)},s.Connection.prototype.checkType_=function(o){return s.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(o)},s.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},s.Connection.prototype.setCheck=function(o){return o?(Array.isArray(o)||(o=[o]),this.check_=o,this.onCheckChanged_()):this.check_=null,this},s.Connection.prototype.getCheck=function(){return this.check_},s.Connection.prototype.setShadowDom=function(o){this.shadowDom_=o,(o=this.targetBlock())?o.isShadow()&&(o.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},s.Connection.prototype.getShadowDom=function(o){return o&&this.targetBlock().isShadow()?s.Xml.blockToDom(this.targetBlock()):this.shadowDom_},s.Connection.prototype.neighbours=function(o){return[]},s.Connection.prototype.getParentInput=function(){for(var o=null,l=this.sourceBlock_.inputList,u=0;u<l.length;u++)if(l[u].connection===this){o=l[u];break}return o},s.Connection.prototype.toString=function(){var o=this.sourceBlock_;if(!o)return"Orphan Connection";if(o.outputConnection==this)var l="Output Connection of ";else if(o.previousConnection==this)l="Previous Connection of ";else if(o.nextConnection==this)l="Next Connection of ";else{l=null;for(var h,u=0;h=o.inputList[u];u++)if(h.connection==this){l=h;break}if(!l)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";l='Input "'+l.name+'" connection on '}return l+o.toDevString()},s.IConnectionChecker=function(){},s.ConnectionChecker=function(){},s.ConnectionChecker.prototype.canConnect=function(o,l,u,h){return this.canConnectWithReason(o,l,u,h)==s.Connection.CAN_CONNECT},s.ConnectionChecker.prototype.canConnectWithReason=function(o,l,u,h){var _=this.doSafetyChecks(o,l);return _!=s.Connection.CAN_CONNECT?_:this.doTypeChecks(o,l)?u&&!this.doDragChecks(o,l,h||0)?s.Connection.REASON_DRAG_CHECKS_FAILED:s.Connection.CAN_CONNECT:s.Connection.REASON_CHECKS_FAILED},s.ConnectionChecker.prototype.getErrorMessage=function(o,l,u){switch(o){case s.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case s.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case s.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case s.Connection.REASON_TARGET_NULL:return"Target connection is null.";case s.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+l+" expected "+l.getCheck()+", found "+u.getCheck();case s.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case s.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},s.ConnectionChecker.prototype.doSafetyChecks=function(o,l){if(!o||!l)return s.Connection.REASON_TARGET_NULL;if(o.isSuperior())var u=o.getSourceBlock(),h=l.getSourceBlock();else h=o.getSourceBlock(),u=l.getSourceBlock();return u==h?s.Connection.REASON_SELF_CONNECTION:l.type!=s.OPPOSITE_TYPE[o.type]?s.Connection.REASON_WRONG_TYPE:u.workspace!==h.workspace?s.Connection.REASON_DIFFERENT_WORKSPACES:u.isShadow()&&!h.isShadow()?s.Connection.REASON_SHADOW_PARENT:s.Connection.CAN_CONNECT},s.ConnectionChecker.prototype.doTypeChecks=function(o,l){if(o=o.getCheck(),l=l.getCheck(),!o||!l)return!0;for(var u=0;u<o.length;u++)if(-1!=l.indexOf(o[u]))return!0;return!1},s.ConnectionChecker.prototype.doDragChecks=function(o,l,u){if(o.distanceFrom(l)>u||l.getSourceBlock().isInsertionMarker())return!1;switch(l.type){case s.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(o,l);case s.connectionTypes.OUTPUT_VALUE:if(l.isConnected()&&!l.targetBlock().isInsertionMarker()||o.isConnected())return!1;break;case s.connectionTypes.INPUT_VALUE:if(l.isConnected()&&!l.targetBlock().isMovable()&&!l.targetBlock().isShadow())return!1;break;case s.connectionTypes.NEXT_STATEMENT:if(l.isConnected()&&!o.getSourceBlock().nextConnection&&!l.targetBlock().isShadow()&&l.targetBlock().nextConnection)return!1;break;default:return!1}return-1==s.draggingConnections.indexOf(l)},s.ConnectionChecker.prototype.canConnectToPrevious_=function(o,l){return!(o.targetConnection||-1!=s.draggingConnections.indexOf(l)||l.targetConnection&&(!(o=l.targetBlock()).isInsertionMarker()||o.getPreviousBlock()))},s.registry.register(s.registry.Type.CONNECTION_CHECKER,s.registry.DEFAULT,s.ConnectionChecker),s.VariableMap=function(o){this.variableMap_=Object.create(null),this.workspace=o},s.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},s.VariableMap.prototype.renameVariable=function(o,l){var u=this.getVariable(l,o.type),h=this.workspace.getAllBlocks(!1);s.Events.setGroup(!0);try{u&&u.getId()!=o.getId()?this.renameVariableWithConflict_(o,l,u,h):this.renameVariableAndUses_(o,l,h)}finally{s.Events.setGroup(!1)}},s.VariableMap.prototype.renameVariableById=function(o,l){var u=this.getVariableById(o);if(!u)throw Error("Tried to rename a variable that didn't exist. ID: "+o);this.renameVariable(u,l)},s.VariableMap.prototype.renameVariableAndUses_=function(o,l,u){for(s.Events.fire(new(s.Events.get(s.Events.VAR_RENAME))(o,l)),o.name=l,l=0;l<u.length;l++)u[l].updateVarName(o)},s.VariableMap.prototype.renameVariableWithConflict_=function(o,l,u,h){var _=o.type;for(l!=u.name&&this.renameVariableAndUses_(u,l,h),l=0;l<h.length;l++)h[l].renameVarById(o.getId(),u.getId());s.Events.fire(new(s.Events.get(s.Events.VAR_DELETE))(o)),o=this.getVariablesOfType(_).indexOf(o),this.variableMap_[_].splice(o,1)},s.VariableMap.prototype.createVariable=function(o,l,u){var h=this.getVariable(o,l);if(h){if(u&&h.getId()!=u)throw Error('Variable "'+o+'" is already in use and its id is "'+h.getId()+'" which conflicts with the passed in id, "'+u+'".');return h}if(u&&this.getVariableById(u))throw Error('Variable id, "'+u+'", is already in use.');return h=u||s.utils.genUid(),h=new s.VariableModel(this.workspace,o,l=l||"",h),(o=this.variableMap_[l]||[]).push(h),delete this.variableMap_[l],this.variableMap_[l]=o,h},s.VariableMap.prototype.deleteVariable=function(o){for(var h,l=this.variableMap_[o.type],u=0;h=l[u];u++)if(h.getId()==o.getId()){l.splice(u,1),s.Events.fire(new(s.Events.get(s.Events.VAR_DELETE))(o));break}},s.VariableMap.prototype.deleteVariableById=function(o){var l=this.getVariableById(o);if(l){var _,u=l.name,h=this.getVariableUsesById(o);for(o=0;_=h[o];o++)if("procedures_defnoreturn"==_.type||"procedures_defreturn"==_.type)return o=_.getFieldValue("NAME"),u=s.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",u).replace("%2",o),void s.alert(u);var b=this;1<h.length?(u=s.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(h.length)).replace("%2",u),s.confirm(u,function(D){D&&l&&b.deleteVariableInternal(l,h)})):b.deleteVariableInternal(l,h)}else console.warn("Can't delete non-existent variable: "+o)},s.VariableMap.prototype.deleteVariableInternal=function(o,l){var u=s.Events.getGroup();u||s.Events.setGroup(!0);try{for(var h=0;h<l.length;h++)l[h].dispose(!0);this.deleteVariable(o)}finally{u||s.Events.setGroup(!1)}},s.VariableMap.prototype.getVariable=function(o,l){if(l=this.variableMap_[l||""])for(var h,u=0;h=l[u];u++)if(s.Names.equals(h.name,o))return h;return null},s.VariableMap.prototype.getVariableById=function(o){for(var l=Object.keys(this.variableMap_),u=0;u<l.length;u++)for(var b,h=l[u],_=0;b=this.variableMap_[h][_];_++)if(b.getId()==o)return b;return null},s.VariableMap.prototype.getVariablesOfType=function(o){return(o=this.variableMap_[o||""])?o.slice():[]},s.VariableMap.prototype.getVariableTypes=function(o){var l={};s.utils.object.mixin(l,this.variableMap_),o&&o.getPotentialVariableMap()&&s.utils.object.mixin(l,o.getPotentialVariableMap().variableMap_),o=Object.keys(l),l=!1;for(var u=0;u<o.length;u++)""==o[u]&&(l=!0);return l||o.push(""),o},s.VariableMap.prototype.getAllVariables=function(){var l,o=[];for(l in this.variableMap_)o=o.concat(this.variableMap_[l]);return o},s.VariableMap.prototype.getAllVariableNames=function(){var l,o=[];for(l in this.variableMap_)for(var _,u=this.variableMap_[l],h=0;_=u[h];h++)o.push(_.name);return o},s.VariableMap.prototype.getVariableUsesById=function(o){for(var l=[],u=this.workspace.getAllBlocks(!1),h=0;h<u.length;h++){var _=u[h].getVarModels();if(_)for(var b=0;b<_.length;b++)_[b].getId()==o&&l.push(u[h])}return l},s.Workspace=function(o){this.id=s.utils.genUid(),s.Workspace.WorkspaceDB_[this.id]=this,this.options=o||new s.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(s.registry.getClassFromOptions(s.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new s.VariableMap(this),this.potentialVariableMap_=null},s.Workspace.prototype.rendered=!1,s.Workspace.prototype.isClearing=!1,s.Workspace.prototype.MAX_UNDO=1024,s.Workspace.prototype.connectionDBList=null,s.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete s.Workspace.WorkspaceDB_[this.id]},s.Workspace.SCAN_ANGLE=3,s.Workspace.prototype.sortObjects_=function(o,l){return o=o.getRelativeToSurfaceXY(),l=l.getRelativeToSurfaceXY(),o.y+s.Workspace.prototype.sortObjects_.offset*o.x-(l.y+s.Workspace.prototype.sortObjects_.offset*l.x)},s.Workspace.prototype.addTopBlock=function(o){this.topBlocks_.push(o)},s.Workspace.prototype.removeTopBlock=function(o){if(!s.utils.arrayRemove(this.topBlocks_,o))throw Error("Block not present in workspace's list of top-most blocks.")},s.Workspace.prototype.getTopBlocks=function(o){var l=[].concat(this.topBlocks_);return o&&1<l.length&&(this.sortObjects_.offset=Math.sin(s.utils.math.toRadians(s.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),l.sort(this.sortObjects_)),l},s.Workspace.prototype.addTypedBlock=function(o){this.typedBlocksDB_[o.type]||(this.typedBlocksDB_[o.type]=[]),this.typedBlocksDB_[o.type].push(o)},s.Workspace.prototype.removeTypedBlock=function(o){this.typedBlocksDB_[o.type].splice(this.typedBlocksDB_[o.type].indexOf(o),1),this.typedBlocksDB_[o.type].length||delete this.typedBlocksDB_[o.type]},s.Workspace.prototype.getBlocksByType=function(o,l){return this.typedBlocksDB_[o]?(o=this.typedBlocksDB_[o].slice(0),l&&1<o.length&&(this.sortObjects_.offset=Math.sin(s.utils.math.toRadians(s.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),o.sort(this.sortObjects_)),o):[]},s.Workspace.prototype.addTopComment=function(o){this.topComments_.push(o),this.commentDB_[o.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+o.id+'"'),this.commentDB_[o.id]=o},s.Workspace.prototype.removeTopComment=function(o){if(!s.utils.arrayRemove(this.topComments_,o))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[o.id]},s.Workspace.prototype.getTopComments=function(o){var l=[].concat(this.topComments_);return o&&1<l.length&&(this.sortObjects_.offset=Math.sin(s.utils.math.toRadians(s.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),l.sort(this.sortObjects_)),l},s.Workspace.prototype.getAllBlocks=function(o){if(o){o=this.getTopBlocks(!0);for(var l=[],u=0;u<o.length;u++)l.push.apply(l,o[u].getDescendants(!0))}else for(l=this.getTopBlocks(!1),u=0;u<l.length;u++)l.push.apply(l,l[u].getChildren(!1));return l.filter(function(h){return!h.isInsertionMarker()})},s.Workspace.prototype.clear=function(){this.isClearing=!0;try{var o=s.Events.getGroup();for(o||s.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);o||s.Events.setGroup(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},s.Workspace.prototype.renameVariableById=function(o,l){this.variableMap_.renameVariableById(o,l)},s.Workspace.prototype.createVariable=function(o,l,u){return this.variableMap_.createVariable(o,l,u)},s.Workspace.prototype.getVariableUsesById=function(o){return this.variableMap_.getVariableUsesById(o)},s.Workspace.prototype.deleteVariableById=function(o){this.variableMap_.deleteVariableById(o)},s.Workspace.prototype.getVariable=function(o,l){return this.variableMap_.getVariable(o,l)},s.Workspace.prototype.getVariableById=function(o){return this.variableMap_.getVariableById(o)},s.Workspace.prototype.getVariablesOfType=function(o){return this.variableMap_.getVariablesOfType(o)},s.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},s.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},s.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},s.Workspace.prototype.getWidth=function(){return 0},s.Workspace.prototype.newBlock=function(o,l){return new s.Block(this,o,l)},s.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},s.Workspace.prototype.remainingCapacityOfType=function(o){return this.options.maxInstances?(void 0!==this.options.maxInstances[o]?this.options.maxInstances[o]:1/0)-this.getBlocksByType(o,!1).length:1/0},s.Workspace.prototype.isCapacityAvailable=function(o){if(!this.hasBlockLimits())return!0;var u,l=0;for(u in o){if(o[u]>this.remainingCapacityOfType(u))return!1;l+=o[u]}return!(l>this.remainingCapacity())},s.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!=1/0||!!this.options.maxInstances},s.Workspace.prototype.getUndoStack=function(){return this.undoStack_},s.Workspace.prototype.getRedoStack=function(){return this.redoStack_},s.Workspace.prototype.undo=function(o){var l=o?this.redoStack_:this.undoStack_,u=o?this.undoStack_:this.redoStack_,h=l.pop();if(h){for(var _=[h];l.length&&h.group&&h.group==l[l.length-1].group;)_.push(l.pop());for(l=0;h=_[l];l++)u.push(h);_=s.Events.filter(_,o),s.Events.recordUndo=!1;try{for(l=0;h=_[l];l++)h.run(o)}finally{s.Events.recordUndo=!0}}},s.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,s.Events.clearPendingUndo()},s.Workspace.prototype.addChangeListener=function(o){return this.listeners_.push(o),o},s.Workspace.prototype.removeChangeListener=function(o){s.utils.arrayRemove(this.listeners_,o)},s.Workspace.prototype.fireChangeListener=function(o){if(o.recordUndo)for(this.undoStack_.push(o),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var u,l=0;u=this.listeners_[l];l++)u(o)},s.Workspace.prototype.getBlockById=function(o){return this.blockDB_[o]||null},s.Workspace.prototype.setBlockById=function(o,l){this.blockDB_[o]=l},s.Workspace.prototype.removeBlockById=function(o){delete this.blockDB_[o]},s.Workspace.prototype.getCommentById=function(o){return this.commentDB_[o]||null},s.Workspace.prototype.allInputsFilled=function(o){for(var h,l=this.getTopBlocks(!1),u=0;h=l[u];u++)if(!h.allInputsFilled(o))return!1;return!0},s.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},s.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new s.VariableMap(this)},s.Workspace.prototype.getVariableMap=function(){return this.variableMap_},s.Workspace.prototype.setVariableMap=function(o){this.variableMap_=o},s.Workspace.WorkspaceDB_=Object.create(null),s.Workspace.getById=function(o){return s.Workspace.WorkspaceDB_[o]||null},s.Workspace.getAll=function(){var l,o=[];for(l in s.Workspace.WorkspaceDB_)o.push(s.Workspace.WorkspaceDB_[l]);return o},s.WorkspaceDragSurfaceSvg=function(o){this.container_=o,this.createDom()},s.WorkspaceDragSurfaceSvg.prototype.SVG_=null,s.WorkspaceDragSurfaceSvg.prototype.container_=null,s.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},s.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(o,l){o=o.toFixed(0),l=l.toFixed(0),this.SVG_.style.display="block",s.utils.dom.setCssTransform(this.SVG_,"translate3d("+o+"px, "+l+"px, 0px)")},s.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return s.utils.getRelativeXY(this.SVG_)},s.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(o){if(!o)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var l=this.SVG_.childNodes[0],u=this.SVG_.childNodes[1];if(!(l&&u&&s.utils.dom.hasClass(l,"blocklyBlockCanvas")&&s.utils.dom.hasClass(u,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?s.utils.dom.insertAfter(l,this.previousSibling_):o.insertBefore(l,o.firstChild),s.utils.dom.insertAfter(u,l),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");s.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},s.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(o,l,u,h,_,b){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=u,o.setAttribute("transform","translate(0, 0) scale("+b+")"),l.setAttribute("transform","translate(0, 0) scale("+b+")"),this.SVG_.setAttribute("width",h),this.SVG_.setAttribute("height",_),this.SVG_.appendChild(o),this.SVG_.appendChild(l),this.SVG_.style.display="block"},s.blockRendering={},s.blockRendering.useDebugger=!1,s.blockRendering.register=function(o,l){s.registry.register(s.registry.Type.RENDERER,o,l)},s.blockRendering.unregister=function(o){s.registry.unregister(s.registry.Type.RENDERER,o)},s.blockRendering.startDebugger=function(){s.blockRendering.useDebugger=!0},s.blockRendering.stopDebugger=function(){s.blockRendering.useDebugger=!1},s.blockRendering.init=function(o,l,u){return(o=new(s.registry.getClass(s.registry.Type.RENDERER,o))(o)).init(l,u),o},s.ASTNode=function(o,l,u){if(!l)throw Error("Cannot create a node without a location.");this.type_=o,this.isConnection_=s.ASTNode.isConnectionType_(o),this.location_=l,this.wsCoordinate_=null,this.processParams_(u||null)},s.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},s.ASTNode.NAVIGATE_ALL_FIELDS=!1,s.ASTNode.DEFAULT_OFFSET_Y=-20,s.ASTNode.isConnectionType_=function(o){switch(o){case s.ASTNode.types.PREVIOUS:case s.ASTNode.types.NEXT:case s.ASTNode.types.INPUT:case s.ASTNode.types.OUTPUT:return!0}return!1},s.ASTNode.createFieldNode=function(o){return o?new s.ASTNode(s.ASTNode.types.FIELD,o):null},s.ASTNode.createConnectionNode=function(o){if(!o)return null;var l=o.type;return l==s.connectionTypes.INPUT_VALUE||l==s.connectionTypes.NEXT_STATEMENT&&o.getParentInput()?s.ASTNode.createInputNode(o.getParentInput()):l==s.connectionTypes.NEXT_STATEMENT?new s.ASTNode(s.ASTNode.types.NEXT,o):l==s.connectionTypes.OUTPUT_VALUE?new s.ASTNode(s.ASTNode.types.OUTPUT,o):l==s.connectionTypes.PREVIOUS_STATEMENT?new s.ASTNode(s.ASTNode.types.PREVIOUS,o):null},s.ASTNode.createInputNode=function(o){return o&&o.connection?new s.ASTNode(s.ASTNode.types.INPUT,o.connection):null},s.ASTNode.createBlockNode=function(o){return o?new s.ASTNode(s.ASTNode.types.BLOCK,o):null},s.ASTNode.createStackNode=function(o){return o?new s.ASTNode(s.ASTNode.types.STACK,o):null},s.ASTNode.createWorkspaceNode=function(o,l){return l&&o?new s.ASTNode(s.ASTNode.types.WORKSPACE,o,{wsCoordinate:l}):null},s.ASTNode.createTopNode=function(o){var l=o.previousConnection||o.outputConnection;return l?s.ASTNode.createConnectionNode(l):s.ASTNode.createBlockNode(o)},s.ASTNode.prototype.processParams_=function(o){o&&o.wsCoordinate&&(this.wsCoordinate_=o.wsCoordinate)},s.ASTNode.prototype.getLocation=function(){return this.location_},s.ASTNode.prototype.getType=function(){return this.type_},s.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},s.ASTNode.prototype.isConnection=function(){return this.isConnection_},s.ASTNode.prototype.findNextForInput_=function(){var u,o=this.location_.getParentInput(),l=o.getSourceBlock();for(o=l.inputList.indexOf(o)+1;u=l.inputList[o];o++){for(var b,h=u.fieldRow,_=0;b=h[_];_++)if(b.isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(b);if(u.connection)return s.ASTNode.createInputNode(u)}return null},s.ASTNode.prototype.findNextForField_=function(){var o=this.location_,l=o.getParentInput(),u=o.getSourceBlock(),h=u.inputList.indexOf(l);for(o=l.fieldRow.indexOf(o)+1;l=u.inputList[h];h++){for(var _=l.fieldRow;o<_.length;){if(_[o].isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(_[o]);o++}if(o=0,l.connection)return s.ASTNode.createInputNode(l)}return null},s.ASTNode.prototype.findPrevForInput_=function(){for(var h,o=this.location_.getParentInput(),l=o.getSourceBlock(),u=l.inputList.indexOf(o);h=l.inputList[u];u--){if(h.connection&&h!==o)return s.ASTNode.createInputNode(h);for(var b,_=(h=h.fieldRow).length-1;b=h[_];_--)if(b.isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(b)}return null},s.ASTNode.prototype.findPrevForField_=function(){var _,o=this.location_,l=o.getParentInput(),u=o.getSourceBlock(),h=u.inputList.indexOf(l);for(o=l.fieldRow.indexOf(o)-1;_=u.inputList[h];h--){if(_.connection&&_!==l)return s.ASTNode.createInputNode(_);for(_=_.fieldRow;-1<o;){if(_[o].isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(_[o]);o--}0<=h-1&&(o=u.inputList[h-1].fieldRow.length-1)}return null},s.ASTNode.prototype.navigateBetweenStacks_=function(o){var l=this.getLocation();if(l instanceof s.Block||(l=l.getSourceBlock()),!l||!l.workspace)return null;var u=l.getRootBlock();l=u.workspace.getTopBlocks(!0);for(var _,h=0;_=l[h];h++)if(u.id==_.id)return-1==(o=h+(o?1:-1))||o==l.length?null:s.ASTNode.createStackNode(l[o]);throw Error("Couldn't find "+(o?"next":"previous")+" stack?!")},s.ASTNode.prototype.findTopASTNodeForBlock_=function(o){var l=o.previousConnection||o.outputConnection;return l?s.ASTNode.createConnectionNode(l):s.ASTNode.createBlockNode(o)},s.ASTNode.prototype.getOutAstNodeForBlock_=function(o){if(!o)return null;var l=(o=o.getTopStackBlock()).previousConnection||o.outputConnection;return l&&l.targetConnection&&l.targetConnection.getParentInput()?s.ASTNode.createInputNode(l.targetConnection.getParentInput()):s.ASTNode.createStackNode(o)},s.ASTNode.prototype.findFirstFieldOrInput_=function(o){o=o.inputList;for(var u,l=0;u=o[l];l++){for(var b,h=u.fieldRow,_=0;b=h[_];_++)if(b.isClickable()||s.ASTNode.NAVIGATE_ALL_FIELDS)return s.ASTNode.createFieldNode(b);if(u.connection)return s.ASTNode.createInputNode(u)}return null},s.ASTNode.prototype.getSourceBlock=function(){return this.getType()===s.ASTNode.types.BLOCK||this.getType()===s.ASTNode.types.STACK?this.getLocation():this.getType()===s.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},s.ASTNode.prototype.next=function(){switch(this.type_){case s.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case s.ASTNode.types.OUTPUT:var o=this.location_;return s.ASTNode.createBlockNode(o.getSourceBlock());case s.ASTNode.types.FIELD:return this.findNextForField_();case s.ASTNode.types.INPUT:return this.findNextForInput_();case s.ASTNode.types.BLOCK:return s.ASTNode.createConnectionNode(this.location_.nextConnection);case s.ASTNode.types.PREVIOUS:return s.ASTNode.createBlockNode((o=this.location_).getSourceBlock());case s.ASTNode.types.NEXT:return s.ASTNode.createConnectionNode((o=this.location_).targetConnection)}return null},s.ASTNode.prototype.in=function(){switch(this.type_){case s.ASTNode.types.WORKSPACE:var o=this.location_.getTopBlocks(!0);if(0<o.length)return s.ASTNode.createStackNode(o[0]);break;case s.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(o=this.location_);case s.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(o=this.location_);case s.ASTNode.types.INPUT:return s.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},s.ASTNode.prototype.prev=function(){switch(this.type_){case s.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case s.ASTNode.types.FIELD:return this.findPrevForField_();case s.ASTNode.types.INPUT:return this.findPrevForInput_();case s.ASTNode.types.BLOCK:var o=this.location_;return s.ASTNode.createConnectionNode(o.previousConnection||o.outputConnection);case s.ASTNode.types.PREVIOUS:if((o=(o=this.location_).targetConnection)&&!o.getParentInput())return s.ASTNode.createConnectionNode(o);break;case s.ASTNode.types.NEXT:return s.ASTNode.createBlockNode((o=this.location_).getSourceBlock())}return null},s.ASTNode.prototype.out=function(){switch(this.type_){case s.ASTNode.types.STACK:var o=this.location_,l=o.getRelativeToSurfaceXY();return l=new s.utils.Coordinate(l.x,l.y+s.ASTNode.DEFAULT_OFFSET_Y),s.ASTNode.createWorkspaceNode(o.workspace,l);case s.ASTNode.types.OUTPUT:return(l=(o=this.location_).targetConnection)?s.ASTNode.createConnectionNode(l):s.ASTNode.createStackNode(o.getSourceBlock());case s.ASTNode.types.FIELD:return s.ASTNode.createBlockNode(this.location_.getSourceBlock());case s.ASTNode.types.INPUT:return s.ASTNode.createBlockNode((o=this.location_).getSourceBlock());case s.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(o=this.location_);case s.ASTNode.types.PREVIOUS:case s.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_((o=this.location_).getSourceBlock())}return null},s.Blocks=Object.create(null),s.Extensions={},s.Extensions.ALL_=Object.create(null),s.Extensions.register=function(o,l){if("string"!=typeof o||""==o.trim())throw Error('Error: Invalid extension name "'+o+'"');if(s.Extensions.ALL_[o])throw Error('Error: Extension "'+o+'" is already registered.');if("function"!=typeof l)throw Error('Error: Extension "'+o+'" must be a function');s.Extensions.ALL_[o]=l},s.Extensions.registerMixin=function(o,l){if(!l||"object"!=typeof l)throw Error('Error: Mixin "'+o+'" must be a object');s.Extensions.register(o,function(){this.mixin(l)})},s.Extensions.registerMutator=function(o,l,u,h){var _='Error when registering mutator "'+o+'": ';s.Extensions.checkHasFunction_(_,l.domToMutation,"domToMutation"),s.Extensions.checkHasFunction_(_,l.mutationToDom,"mutationToDom");var b=s.Extensions.checkMutatorDialog_(l,_);if(u&&"function"!=typeof u)throw Error('Extension "'+o+'" is not a function');s.Extensions.register(o,function(){if(b){if(!s.Mutator)throw Error(_+"Missing require for Blockly.Mutator");this.setMutator(new s.Mutator(h||[]))}this.mixin(l),u&&u.apply(this)})},s.Extensions.unregister=function(o){s.Extensions.ALL_[o]?delete s.Extensions.ALL_[o]:console.warn('No extension mapping for name "'+o+'" found to unregister')},s.Extensions.apply=function(o,l,u){var h=s.Extensions.ALL_[o];if("function"!=typeof h)throw Error('Error: Extension "'+o+'" not found.');if(u)s.Extensions.checkNoMutatorProperties_(o,l);else var _=s.Extensions.getMutatorProperties_(l);if(h.apply(l),u)s.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+o+'": ',l);else if(!s.Extensions.mutatorPropertiesMatch_(_,l))throw Error('Error when applying extension "'+o+'": mutation properties changed when applying a non-mutator extension.')},s.Extensions.checkHasFunction_=function(o,l,u){if(!l)throw Error(o+'missing required property "'+u+'"');if("function"!=typeof l)throw Error(o+'" required property "'+u+'" must be a function')},s.Extensions.checkNoMutatorProperties_=function(o,l){if(s.Extensions.getMutatorProperties_(l).length)throw Error('Error: tried to apply mutation "'+o+'" to a block that already has mutator functions.  Block id: '+l.id)},s.Extensions.checkMutatorDialog_=function(o,l){var u=void 0!==o.compose,h=void 0!==o.decompose;if(u&&h){if("function"!=typeof o.compose)throw Error(l+"compose must be a function.");if("function"!=typeof o.decompose)throw Error(l+"decompose must be a function.");return!0}if(!u&&!h)return!1;throw Error(l+'Must have both or neither of "compose" and "decompose"')},s.Extensions.checkBlockHasMutatorProperties_=function(o,l){if("function"!=typeof l.domToMutation)throw Error(o+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof l.mutationToDom)throw Error(o+'Applying a mutator didn\'t add "mutationToDom"');s.Extensions.checkMutatorDialog_(l,o)},s.Extensions.getMutatorProperties_=function(o){var l=[];return void 0!==o.domToMutation&&l.push(o.domToMutation),void 0!==o.mutationToDom&&l.push(o.mutationToDom),void 0!==o.compose&&l.push(o.compose),void 0!==o.decompose&&l.push(o.decompose),l},s.Extensions.mutatorPropertiesMatch_=function(o,l){if((l=s.Extensions.getMutatorProperties_(l)).length!=o.length)return!1;for(var u=0;u<l.length;u++)if(o[u]!=l[u])return!1;return!0},s.Extensions.buildTooltipForDropdown=function(o,l){var u=[];return"object"==typeof document&&s.utils.runAfterPageLoad(function(){for(var h in l)s.utils.checkMessageReferences(l[h])}),function(){this.type&&-1==u.indexOf(this.type)&&(s.Extensions.checkDropdownOptionsInTable_(this,o,l),u.push(this.type)),this.setTooltip(function(){var h=String(this.getFieldValue(o)),_=l[h];return null==_?-1==u.indexOf(this.type)&&(h="No tooltip mapping for value "+h+" of field "+o,null!=this.type&&(h+=" of block type "+this.type),console.warn(h+".")):_=s.utils.replaceMessageReferences(_),_}.bind(this))}},s.Extensions.checkDropdownOptionsInTable_=function(o,l,u){var h=o.getField(l);if(!h.isOptionListDynamic()){h=h.getOptions();for(var _=0;_<h.length;++_){var b=h[_][1];null==u[b]&&console.warn("No tooltip mapping for value "+b+" of field "+l+" of block type "+o.type)}}},s.Extensions.buildTooltipWithFieldText=function(o,l){return"object"==typeof document&&s.utils.runAfterPageLoad(function(){s.utils.checkMessageReferences(o)}),function(){this.setTooltip(function(){var u=this.getField(l);return s.utils.replaceMessageReferences(o).replace("%1",u?u.getText():"")}.bind(this))}},s.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var o=this.getParent();return o&&o.getInputsInline()&&o.tooltip||this.tooltipWhenNotConnected_}.bind(this))},s.Extensions.register("parent_tooltip_when_inline",s.Extensions.extensionParentTooltip_),s.fieldRegistry={},s.fieldRegistry.register=function(o,l){s.registry.register(s.registry.Type.FIELD,o,l)},s.fieldRegistry.unregister=function(o){s.registry.unregister(s.registry.Type.FIELD,o)},s.fieldRegistry.fromJson=function(o){var l=s.registry.getObject(s.registry.Type.FIELD,o.type);return l?l.fromJson(o):(console.warn("Blockly could not create a field of type "+o.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},s.IDeletable=function(){},s.blockAnimations={},s.blockAnimations.disconnectPid_=0,s.blockAnimations.disconnectGroup_=null,s.blockAnimations.disposeUiEffect=function(o){var l=o.workspace,u=o.getSvgRoot();l.getAudioManager().play("delete"),o=l.getSvgXY(u),(u=u.cloneNode(!0)).translateX_=o.x,u.translateY_=o.y,u.setAttribute("transform","translate("+o.x+","+o.y+")"),l.getParentSvg().appendChild(u),u.bBox_=u.getBBox(),s.blockAnimations.disposeUiStep_(u,l.RTL,new Date,l.scale)},s.blockAnimations.disposeUiStep_=function(o,l,u,h){var _=(new Date-u)/150;1<_?s.utils.dom.removeNode(o):(o.setAttribute("transform","translate("+(o.translateX_+(l?-1:1)*o.bBox_.width*h/2*_)+","+(o.translateY_+o.bBox_.height*h*_)+") scale("+(1-_)*h+")"),setTimeout(s.blockAnimations.disposeUiStep_,10,o,l,u,h))},s.blockAnimations.connectionUiEffect=function(o){var l=o.workspace,u=l.scale;if(l.getAudioManager().play("click"),!(1>u)){var h=l.getSvgXY(o.getSvgRoot());o.outputConnection?(h.x+=(o.RTL?3:-3)*u,h.y+=13*u):o.previousConnection&&(h.x+=(o.RTL?-23:23)*u,h.y+=3*u),o=s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{cx:h.x,cy:h.y,r:0,fill:"none",stroke:"#888","stroke-width":10},l.getParentSvg()),s.blockAnimations.connectionUiStep_(o,new Date,u)}},s.blockAnimations.connectionUiStep_=function(o,l,u){var h=(new Date-l)/150;1<h?s.utils.dom.removeNode(o):(o.setAttribute("r",25*h*u),o.style.opacity=1-h,s.blockAnimations.disconnectPid_=setTimeout(s.blockAnimations.connectionUiStep_,10,o,l,u))},s.blockAnimations.disconnectUiEffect=function(o){if(o.workspace.getAudioManager().play("disconnect"),!(1>o.workspace.scale)){var l=o.getHeightWidth().height;l=Math.atan(10/l)/Math.PI*180,o.RTL||(l*=-1),s.blockAnimations.disconnectUiStep_(o.getSvgRoot(),l,new Date)}},s.blockAnimations.disconnectUiStep_=function(o,l,u){var h=(new Date-u)/200;1<h?o.skew_="":(o.skew_="skewX("+Math.round(Math.sin(h*Math.PI*3)*(1-h)*l)+")",s.blockAnimations.disconnectGroup_=o,s.blockAnimations.disconnectPid_=setTimeout(s.blockAnimations.disconnectUiStep_,10,o,l,u)),o.setAttribute("transform",o.translate_+o.skew_)},s.blockAnimations.disconnectUiStop=function(){if(s.blockAnimations.disconnectGroup_){clearTimeout(s.blockAnimations.disconnectPid_);var o=s.blockAnimations.disconnectGroup_;o.skew_="",o.setAttribute("transform",o.translate_),s.blockAnimations.disconnectGroup_=null}},s.Events.BlockDrag=function(o,l,u){s.Events.BlockDrag.superClass_.constructor.call(this,o?o.workspace.id:void 0),this.blockId=o?o.id:null,this.isStart=l,this.blocks=u},s.utils.object.inherits(s.Events.BlockDrag,s.Events.UiBase),s.Events.BlockDrag.prototype.type=s.Events.BLOCK_DRAG,s.Events.BlockDrag.prototype.toJson=function(){var o=s.Events.BlockDrag.superClass_.toJson.call(this);return o.isStart=this.isStart,o.blockId=this.blockId,o.blocks=this.blocks,o},s.Events.BlockDrag.prototype.fromJson=function(o){s.Events.BlockDrag.superClass_.fromJson.call(this,o),this.isStart=o.isStart,this.blockId=o.blockId,this.blocks=o.blocks},s.registry.register(s.registry.Type.EVENT,s.Events.BLOCK_DRAG,s.Events.BlockDrag),s.IBlockDragger=function(){},s.InsertionMarkerManager=function(o){this.topBlock_=s.selected=o,this.workspace_=o.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},s.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},s.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",s.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,s.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{s.Events.enable()}},s.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},s.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},s.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},s.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(s.Events.disable(),this.hidePreview_(),s.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var o=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;s.blockAnimations.connectionUiEffect(o.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},s.InsertionMarkerManager.prototype.update=function(o,l){var u=this.getCandidate_(o);((this.wouldDeleteBlock_=this.shouldDelete_(u,l))||this.shouldUpdatePreviews_(u,o))&&(s.Events.disable(),this.maybeHidePreview_(u),this.maybeShowPreview_(u),s.Events.enable())},s.InsertionMarkerManager.prototype.createMarkerBlock_=function(o){var l=o.type;s.Events.disable();try{var u=this.workspace_.newBlock(l);if(u.setInsertionMarker(!0),o.mutationToDom){var h=o.mutationToDom();h&&u.domToMutation(h)}for(l=0;l<o.inputList.length;l++){var _=o.inputList[l];if(_.name!=s.constants.COLLAPSED_INPUT_NAME){var b=u.inputList[l];if(!b)throw Error(s.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(h=0;h<_.fieldRow.length;h++){var D=_.fieldRow[h],x=b.fieldRow[h];if(!x)throw Error(s.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));x.setValue(D.getValue())}}}u.setCollapsed(o.isCollapsed()),u.setInputsInline(o.getInputsInline()),u.initSvg(),u.getSvgRoot().setAttribute("visibility","hidden")}finally{s.Events.enable()}return u},s.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var o=this.topBlock_.getConnections_(!1),l=this.topBlock_.lastConnectionInStack(!0);if(l&&l!=this.topBlock_.nextConnection){if(o.push(l),this.lastOnStack_=l,this.lastMarker_){s.Events.disable();try{this.lastMarker_.dispose()}finally{s.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(l.getSourceBlock())}return o},s.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(o,l){var u=o.local,h=o.closest;return o=o.radius,u&&h?this.localConnection_&&this.closestConnection_?!(this.closestConnection_==h&&this.localConnection_==u||(u=this.localConnection_.x+l.x-this.closestConnection_.x,l=this.localConnection_.y+l.y-this.closestConnection_.y,l=Math.sqrt(u*u+l*l),h&&o>l-s.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},s.InsertionMarkerManager.prototype.getCandidate_=function(o){for(var l=this.getStartRadius_(),u=null,h=null,_=0;_<this.availableConnections_.length;_++){var b=this.availableConnections_[_],D=b.closest(l,o);D.connection&&(u=D.connection,h=b,l=D.radius)}return{closest:u,local:h,radius:l}},s.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?s.CONNECTING_SNAP_RADIUS:s.SNAP_RADIUS},s.InsertionMarkerManager.prototype.shouldDelete_=function(o,l){return!(!l||!this.workspace_.getComponentManager().hasCapability(l.id,s.ComponentManager.Capability.DELETE_AREA))&&l.wouldDelete(this.topBlock_,o&&!!o.closest)},s.InsertionMarkerManager.prototype.maybeShowPreview_=function(o){if(!this.wouldDeleteBlock_){var l=o.closest;o=o.local,l&&(l==this.closestConnection_||l.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=l,this.localConnection_=o,this.showPreview_()))}},s.InsertionMarkerManager.prototype.showPreview_=function(){var o=this.closestConnection_,l=this.workspace_.getRenderer();switch(l.getConnectionPreviewMethod(o,this.localConnection_,this.topBlock_)){case s.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case s.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case s.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}o&&l.shouldHighlightConnection(o)&&o.highlight()},s.InsertionMarkerManager.prototype.maybeHidePreview_=function(o){if(o.closest){var l=this.closestConnection_!=o.closest;o=this.localConnection_!=o.local,this.closestConnection_&&this.localConnection_&&(l||o||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},s.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},s.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var o=this.localConnection_,l=this.closestConnection_,u=this.lastOnStack_&&o==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((o=u.getMatchingConnection(o.getSourceBlock(),o))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");u.render(),u.rendered=!0,u.getSvgRoot().setAttribute("visibility","visible"),o&&l&&u.positionNearConnection(o,l),l&&o.connect(l),this.markerConnection_=o},s.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var o=this.markerConnection_,l=o.getSourceBlock(),u=l.nextConnection,h=l.previousConnection,_=l.outputConnection;if(_=o.type==s.connectionTypes.INPUT_VALUE&&!(_&&_.targetConnection),!(o!=u||h&&h.targetConnection)||_?o.targetBlock().unplug(!1):o.type==s.connectionTypes.NEXT_STATEMENT&&o!=u?((u=o.targetConnection).getSourceBlock().unplug(!1),h=h?h.targetConnection:null,l.unplug(!0),h&&h.connect(u)):l.unplug(!0),o.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(o=l.getSvgRoot())&&o.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},s.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var o=this.closestConnection_;this.highlightedBlock_=o.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(o,!0)},s.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},s.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},s.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},s.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var o=[];return this.firstMarker_&&o.push(this.firstMarker_),this.lastMarker_&&o.push(this.lastMarker_),o},s.BlockDragger=function(o,l){this.draggingBlock_=o,this.workspace_=l,this.draggedConnectionManager_=new s.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=s.BlockDragger.initIconData_(o)},s.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},s.BlockDragger.initIconData_=function(o){var l=[];o=o.getDescendants(!1);for(var h,u=0;h=o[u];u++){h=h.getIcons();for(var _=0;_<h.length;_++){var b={location:h[_].getIconLocation(),icon:h[_]};l.push(b)}}return l},s.BlockDragger.prototype.startDrag=function(o,l){s.Events.getGroup()||s.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),s.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),s.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(l)&&this.disconnectBlock_(l,o),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},s.BlockDragger.prototype.shouldDisconnect_=function(o){return!!(this.draggingBlock_.getParent()||o&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},s.BlockDragger.prototype.disconnectBlock_=function(o,l){this.draggingBlock_.unplug(o),o=this.pixelsToWorkspaceUnits_(l),o=s.utils.Coordinate.sum(this.startXY_,o),this.draggingBlock_.translate(o.x,o.y),s.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},s.BlockDragger.prototype.fireDragStartEvent_=function(){var o=new(s.Events.get(s.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));s.Events.fire(o)},s.BlockDragger.prototype.drag=function(o,l){l=this.pixelsToWorkspaceUnits_(l);var u=s.utils.Coordinate.sum(this.startXY_,l);this.draggingBlock_.moveDuringDrag(u),this.dragIcons_(l),u=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(o),this.draggedConnectionManager_.update(l,this.dragTarget_),o=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),o!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==u&&(u&&u.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},s.BlockDragger.prototype.endDrag=function(o,l){if(this.drag(o,l),this.dragIconData_=[],this.fireDragEndEvent_(),s.utils.dom.stopTextWidthCache(),s.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))o=this.startXY_;else{var u=(o=this.getNewLocationAfterDrag_(l)).delta;o=o.newLocation}this.draggingBlock_.moveOffDragSurface(o),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),u?this.updateBlockAfterMove_(u):s.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),s.Events.setGroup(!1)},s.BlockDragger.prototype.getNewLocationAfterDrag_=function(o){var l={};return l.delta=this.pixelsToWorkspaceUnits_(o),l.newLocation=s.utils.Coordinate.sum(this.startXY_,l.delta),l},s.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),s.draggingConnections=[],!0)},s.BlockDragger.prototype.updateBlockAfterMove_=function(o){this.draggingBlock_.moveConnections(o.x,o.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},s.BlockDragger.prototype.fireDragEndEvent_=function(){var o=new(s.Events.get(s.Events.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));s.Events.fire(o)},s.BlockDragger.prototype.updateToolboxStyle_=function(o){var l=this.workspace_.getToolbox();if(l){var u=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";o&&"function"==typeof l.removeStyle?l.removeStyle(u):o||"function"!=typeof l.addStyle||l.addStyle(u)}},s.BlockDragger.prototype.fireMoveEvent_=function(){var o=new(s.Events.get(s.Events.BLOCK_MOVE))(this.draggingBlock_);o.oldCoordinate=this.startXY_,o.recordNew(),s.Events.fire(o)},s.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},s.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(o){return o=new s.utils.Coordinate(o.x/this.workspace_.scale,o.y/this.workspace_.scale),this.workspace_.isMutator&&o.scale(1/this.workspace_.options.parentWorkspace.scale),o},s.BlockDragger.prototype.dragIcons_=function(o){for(var l=0;l<this.dragIconData_.length;l++){var u=this.dragIconData_[l];u.icon.setIconLocation(s.utils.Coordinate.sum(u.location,o))}},s.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},s.registry.register(s.registry.Type.BLOCK_DRAGGER,s.registry.DEFAULT,s.BlockDragger),s.IContextMenu=function(){},s.IDraggable=function(){},s.IBubble=function(){},s.Bubble=function(o,l,u,h,_,b){this.workspace_=o,this.content_=l,this.shape_=u,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,u=s.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(u=-u),this.arrow_radians_=s.utils.math.toRadians(u),o.getBubbleCanvas().appendChild(this.createDom_(l,!(!_||!b))),this.setAnchorLocation(h),_&&b||(_=(o=this.content_.getBBox()).width+2*s.Bubble.BORDER_WIDTH,b=o.height+2*s.Bubble.BORDER_WIDTH),this.setBubbleSize(_,b),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},s.Bubble.BORDER_WIDTH=6,s.Bubble.ARROW_THICKNESS=5,s.Bubble.ARROW_ANGLE=20,s.Bubble.ARROW_BEND=4,s.Bubble.ANCHOR_RADIUS=8,s.Bubble.onMouseUpWrapper_=null,s.Bubble.onMouseMoveWrapper_=null,s.Bubble.unbindDragEvents_=function(){s.Bubble.onMouseUpWrapper_&&(s.browserEvents.unbind(s.Bubble.onMouseUpWrapper_),s.Bubble.onMouseUpWrapper_=null),s.Bubble.onMouseMoveWrapper_&&(s.browserEvents.unbind(s.Bubble.onMouseMoveWrapper_),s.Bubble.onMouseMoveWrapper_=null)},s.Bubble.bubbleMouseUp_=function(o){s.Touch.clearTouchIdentifier(),s.Bubble.unbindDragEvents_()},s.Bubble.prototype.rendered_=!1,s.Bubble.prototype.anchorXY_=null,s.Bubble.prototype.relativeLeft_=0,s.Bubble.prototype.relativeTop_=0,s.Bubble.prototype.width_=0,s.Bubble.prototype.height_=0,s.Bubble.prototype.autoLayout_=!0,s.Bubble.prototype.createDom_=function(o,l){this.bubbleGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null);var u={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return s.utils.userAgent.JAVA_FX&&(u={}),u=s.utils.dom.createSvgElement(s.utils.Svg.G,u,this.bubbleGroup_),this.bubbleArrow_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{},u),this.bubbleBack_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:s.Bubble.BORDER_WIDTH,ry:s.Bubble.BORDER_WIDTH},u),l?(this.resizeGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),s.utils.dom.createSvgElement(s.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,(l=2*s.Bubble.BORDER_WIDTH).toString())},this.resizeGroup_),s.utils.dom.createSvgElement(s.utils.Svg.LINE,{class:"blocklyResizeLine",x1:l/3,y1:l-1,x2:l-1,y2:l/3},this.resizeGroup_),s.utils.dom.createSvgElement(s.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*l/3,y1:l-1,x2:l-1,y2:2*l/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=s.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=s.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(o),this.bubbleGroup_},s.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},s.Bubble.prototype.setSvgId=function(o){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=o)},s.Bubble.prototype.bubbleMouseDown_=function(o){var l=this.workspace_.getGesture(o);l&&l.handleBubbleStart(o,this)},s.Bubble.prototype.showContextMenu=function(o){},s.Bubble.prototype.isDeletable=function(){return!1},s.Bubble.prototype.setDeleteStyle=function(o){},s.Bubble.prototype.resizeMouseDown_=function(o){this.promote(),s.Bubble.unbindDragEvents_(),s.utils.isRightButton(o)||(this.workspace_.startDrag(o,new s.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),s.Bubble.onMouseUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",this,s.Bubble.bubbleMouseUp_),s.Bubble.onMouseMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),s.hideChaff()),o.stopPropagation()},s.Bubble.prototype.resizeMouseMove_=function(o){this.autoLayout_=!1,o=this.workspace_.moveDrag(o),this.setBubbleSize(this.workspace_.RTL?-o.x:o.x,o.y),this.workspace_.RTL&&this.positionBubble_()},s.Bubble.prototype.registerResizeEvent=function(o){this.resizeCallback_=o},s.Bubble.prototype.registerMoveEvent=function(o){this.moveCallback_=o},s.Bubble.prototype.promote=function(){var o=this.bubbleGroup_.parentNode;return o.lastChild!==this.bubbleGroup_&&(o.appendChild(this.bubbleGroup_),!0)},s.Bubble.prototype.setAnchorLocation=function(o){this.anchorXY_=o,this.rendered_&&this.positionBubble_()},s.Bubble.prototype.layoutBubble_=function(){var o=this.workspace_.getMetricsManager().getViewMetrics(!0),l=this.getOptimalRelativeLeft_(o),u=this.getOptimalRelativeTop_(o),h=this.shape_.getBBox(),_={x:l,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},b={x:-this.width_-30,y:u};u={x:h.width,y:u};var D={x:l,y:h.height};l=h.width<h.height?u:D,h=h.width<h.height?D:u,u=this.getOverlap_(_,o),D=this.getOverlap_(b,o);var x=this.getOverlap_(l,o);o=this.getOverlap_(h,o),u==(o=Math.max(u,D,x,o))?(this.relativeLeft_=_.x,this.relativeTop_=_.y):D==o?(this.relativeLeft_=b.x,this.relativeTop_=b.y):x==o?(this.relativeLeft_=l.x,this.relativeTop_=l.y):(this.relativeLeft_=h.x,this.relativeTop_=h.y)},s.Bubble.prototype.getOverlap_=function(o,l){var u=this.workspace_.RTL?this.anchorXY_.x-o.x-this.width_:o.x+this.anchorXY_.x;return o=o.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(u+this.width_,l.left+l.width)-Math.max(u,l.left))*(Math.min(o+this.height_,l.top+l.height)-Math.max(o,l.top))/(this.width_*this.height_)))},s.Bubble.prototype.getOptimalRelativeLeft_=function(o){var l=-this.width_/4;if(this.width_>o.width)return l;if(this.workspace_.RTL)var u=this.anchorXY_.x-l,h=u-this.width_,_=o.left+o.width,b=o.left+s.Scrollbar.scrollbarThickness/this.workspace_.scale;else u=(h=l+this.anchorXY_.x)+this.width_,b=o.left,_=o.left+o.width-s.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?h<b?l=-(b-this.anchorXY_.x+this.width_):u>_&&(l=-(_-this.anchorXY_.x)):h<b?l=b-this.anchorXY_.x:u>_&&(l=_-this.anchorXY_.x-this.width_),l},s.Bubble.prototype.getOptimalRelativeTop_=function(o){var l=-this.height_/4;if(this.height_>o.height)return l;var u=this.anchorXY_.y+l,_=o.top;o=o.top+o.height-s.Scrollbar.scrollbarThickness/this.workspace_.scale;var b=this.anchorXY_.y;return u<_?l=_-b:u+this.height_>o&&(l=o-b-this.height_),l},s.Bubble.prototype.positionBubble_=function(){var o=this.anchorXY_.x;this.moveTo(o=this.workspace_.RTL?o-(this.relativeLeft_+this.width_):o+this.relativeLeft_,this.relativeTop_+this.anchorXY_.y)},s.Bubble.prototype.moveTo=function(o,l){this.bubbleGroup_.setAttribute("transform","translate("+o+","+l+")")},s.Bubble.prototype.setDragging=function(o){!o&&this.moveCallback_&&this.moveCallback_()},s.Bubble.prototype.getBubbleSize=function(){return new s.utils.Size(this.width_,this.height_)},s.Bubble.prototype.setBubbleSize=function(o,l){var u=2*s.Bubble.BORDER_WIDTH;o=Math.max(o,u+45),l=Math.max(l,u+20),this.width_=o,this.height_=l,this.bubbleBack_.setAttribute("width",o),this.bubbleBack_.setAttribute("height",l),this.resizeGroup_&&this.resizeGroup_.setAttribute("transform",this.workspace_.RTL?"translate("+2*s.Bubble.BORDER_WIDTH+","+(l-u)+") scale(-1 1)":"translate("+(o-u)+","+(l-u)+")"),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},s.Bubble.prototype.renderArrow_=function(){var o=[],l=this.width_/2,u=this.height_/2,h=-this.relativeLeft_,_=-this.relativeTop_;if(l==h&&u==_)o.push("M "+l+","+u);else{_-=u,h-=l,this.workspace_.RTL&&(h*=-1);var b=Math.sqrt(_*_+h*h),D=Math.acos(h/b);0>_&&(D=2*Math.PI-D);var x=D+Math.PI/2;x>2*Math.PI&&(x-=2*Math.PI);var G=Math.sin(x),j=Math.cos(x),F=this.getBubbleSize();x=(F.width+F.height)/s.Bubble.ARROW_THICKNESS,x=Math.min(x,F.width,F.height)/4,h=l+(F=1-s.Bubble.ANCHOR_RADIUS/b)*h,_=u+F*_,F=l+x*j;var q=u+x*G;l-=x*j,u-=x*G,(G=D+this.arrow_radians_)>2*Math.PI&&(G-=2*Math.PI),D=Math.sin(G)*b/s.Bubble.ARROW_BEND,b=Math.cos(G)*b/s.Bubble.ARROW_BEND,o.push("M"+F+","+q),o.push("C"+(F+b)+","+(q+D)+" "+h+","+_+" "+h+","+_),o.push("C"+h+","+_+" "+(l+b)+","+(u+D)+" "+l+","+u)}o.push("z"),this.bubbleArrow_.setAttribute("d",o.join(" "))},s.Bubble.prototype.setColour=function(o){this.bubbleBack_.setAttribute("fill",o),this.bubbleArrow_.setAttribute("fill",o)},s.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&s.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&s.browserEvents.unbind(this.onMouseDownResizeWrapper_),s.Bubble.unbindDragEvents_(),s.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},s.Bubble.prototype.moveDuringDrag=function(o,l){o?o.translateSurface(l.x,l.y):this.moveTo(l.x,l.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-l.x-this.width_:l.x-this.anchorXY_.x,this.relativeTop_=l.y-this.anchorXY_.y,this.renderArrow_()},s.Bubble.prototype.getRelativeToSurfaceXY=function(){return new s.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},s.Bubble.prototype.setAutoLayout=function(o){this.autoLayout_=o},s.Bubble.textToDom=function(o){var l=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:s.Bubble.BORDER_WIDTH},null);o=o.split("\n");for(var u=0;u<o.length;u++){var h=s.utils.dom.createSvgElement(s.utils.Svg.TSPAN,{dy:"1em",x:s.Bubble.BORDER_WIDTH},l),_=document.createTextNode(o[u]);h.appendChild(_)}return l},s.Bubble.createNonEditableBubble=function(o,l,u){if((u=new s.Bubble(l.workspace,o,l.pathObject.svgPath,u,null,null)).setSvgId(l.id),l.RTL){l=o.getBBox().width;for(var _,h=0;_=o.childNodes[h];h++)_.setAttribute("text-anchor","end"),_.setAttribute("x",l+s.Bubble.BORDER_WIDTH)}return u},s.Events.CommentBase=function(o){this.commentId=(this.isBlank=void 0===o)?"":o.id,this.workspaceId=this.isBlank?"":o.workspace.id,this.group=s.Events.getGroup(),this.recordUndo=s.Events.recordUndo},s.utils.object.inherits(s.Events.CommentBase,s.Events.Abstract),s.Events.CommentBase.prototype.toJson=function(){var o=s.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(o.commentId=this.commentId),o},s.Events.CommentBase.prototype.fromJson=function(o){s.Events.CommentBase.superClass_.fromJson.call(this,o),this.commentId=o.commentId},s.Events.CommentChange=function(o,l,u){s.Events.CommentChange.superClass_.constructor.call(this,o),o&&(this.oldContents_=void 0===l?"":l,this.newContents_=void 0===u?"":u)},s.utils.object.inherits(s.Events.CommentChange,s.Events.CommentBase),s.Events.CommentChange.prototype.type=s.Events.COMMENT_CHANGE,s.Events.CommentChange.prototype.toJson=function(){var o=s.Events.CommentChange.superClass_.toJson.call(this);return o.oldContents=this.oldContents_,o.newContents=this.newContents_,o},s.Events.CommentChange.prototype.fromJson=function(o){s.Events.CommentChange.superClass_.fromJson.call(this,o),this.oldContents_=o.oldContents,this.newContents_=o.newContents},s.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},s.Events.CommentChange.prototype.run=function(o){var l=this.getEventWorkspace_().getCommentById(this.commentId);l?l.setContent(o?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},s.Events.CommentCreate=function(o){s.Events.CommentCreate.superClass_.constructor.call(this,o),o&&(this.xml=o.toXmlWithXY())},s.utils.object.inherits(s.Events.CommentCreate,s.Events.CommentBase),s.Events.CommentCreate.prototype.type=s.Events.COMMENT_CREATE,s.Events.CommentCreate.prototype.toJson=function(){var o=s.Events.CommentCreate.superClass_.toJson.call(this);return o.xml=s.Xml.domToText(this.xml),o},s.Events.CommentCreate.prototype.fromJson=function(o){s.Events.CommentCreate.superClass_.fromJson.call(this,o),this.xml=s.Xml.textToDom(o.xml)},s.Events.CommentCreate.prototype.run=function(o){s.Events.CommentCreateDeleteHelper(this,o)},s.Events.CommentCreateDeleteHelper=function(o,l){var u=o.getEventWorkspace_();l?((l=s.utils.xml.createElement("xml")).appendChild(o.xml),s.Xml.domToWorkspace(l,u)):(u=u.getCommentById(o.commentId))?u.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+o.commentId)},s.Events.CommentDelete=function(o){s.Events.CommentDelete.superClass_.constructor.call(this,o),o&&(this.xml=o.toXmlWithXY())},s.utils.object.inherits(s.Events.CommentDelete,s.Events.CommentBase),s.Events.CommentDelete.prototype.type=s.Events.COMMENT_DELETE,s.Events.CommentDelete.prototype.toJson=function(){return s.Events.CommentDelete.superClass_.toJson.call(this)},s.Events.CommentDelete.prototype.fromJson=function(o){s.Events.CommentDelete.superClass_.fromJson.call(this,o)},s.Events.CommentDelete.prototype.run=function(o){s.Events.CommentCreateDeleteHelper(this,!o)},s.Events.CommentMove=function(o){s.Events.CommentMove.superClass_.constructor.call(this,o),o&&(this.comment_=o,this.oldCoordinate_=o.getXY(),this.newCoordinate_=null)},s.utils.object.inherits(s.Events.CommentMove,s.Events.CommentBase),s.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},s.Events.CommentMove.prototype.type=s.Events.COMMENT_MOVE,s.Events.CommentMove.prototype.setOldCoordinate=function(o){this.oldCoordinate_=o},s.Events.CommentMove.prototype.toJson=function(){var o=s.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(o.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(o.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),o},s.Events.CommentMove.prototype.fromJson=function(o){if(s.Events.CommentMove.superClass_.fromJson.call(this,o),o.oldCoordinate){var l=o.oldCoordinate.split(",");this.oldCoordinate_=new s.utils.Coordinate(Number(l[0]),Number(l[1]))}o.newCoordinate&&(l=o.newCoordinate.split(","),this.newCoordinate_=new s.utils.Coordinate(Number(l[0]),Number(l[1])))},s.Events.CommentMove.prototype.isNull=function(){return s.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},s.Events.CommentMove.prototype.run=function(o){var l=this.getEventWorkspace_().getCommentById(this.commentId);if(l){o=o?this.newCoordinate_:this.oldCoordinate_;var u=l.getXY();l.moveBy(o.x-u.x,o.y-u.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_CREATE,s.Events.CommentCreate),s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_CHANGE,s.Events.CommentChange),s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_MOVE,s.Events.CommentMove),s.registry.register(s.registry.Type.EVENT,s.Events.COMMENT_DELETE,s.Events.CommentDelete),s.BubbleDragger=function(o,l){this.draggingBubble_=o,this.workspace_=l,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=s.utils.is3dSupported()&&l.getBlockDragSurface()?l.getBlockDragSurface():null},s.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},s.BubbleDragger.prototype.startBubbleDrag=function(){s.Events.getGroup()||s.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},s.BubbleDragger.prototype.dragBubble=function(o,l){l=this.pixelsToWorkspaceUnits_(l),l=s.utils.Coordinate.sum(this.startXY_,l),this.draggingBubble_.moveDuringDrag(this.dragSurface_,l),l=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(o),o=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),o!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==l&&(l&&l.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},s.BubbleDragger.prototype.shouldDelete_=function(o){return!(!o||!this.workspace_.getComponentManager().hasCapability(o.id,s.ComponentManager.Capability.DELETE_AREA))&&o.wouldDelete(this.draggingBubble_,!1)},s.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},s.BubbleDragger.prototype.endBubbleDrag=function(o,l){this.dragBubble(o,l),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?o=this.startXY_:(o=this.pixelsToWorkspaceUnits_(l),o=s.utils.Coordinate.sum(this.startXY_,o)),this.draggingBubble_.moveTo(o.x,o.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),s.Events.setGroup(!1)},s.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var o=new(s.Events.get(s.Events.COMMENT_MOVE))(this.draggingBubble_);o.setOldCoordinate(this.startXY_),o.recordNew(),s.Events.fire(o)}},s.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(o){return o=new s.utils.Coordinate(o.x/this.workspace_.scale,o.y/this.workspace_.scale),this.workspace_.isMutator&&o.scale(1/this.workspace_.options.parentWorkspace.scale),o},s.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},s.Events.Click=function(o,l,u){s.Events.Click.superClass_.constructor.call(this,o?o.workspace.id:l),this.blockId=o?o.id:null,this.targetType=u},s.utils.object.inherits(s.Events.Click,s.Events.UiBase),s.Events.Click.prototype.type=s.Events.CLICK,s.Events.Click.prototype.toJson=function(){var o=s.Events.Click.superClass_.toJson.call(this);return o.targetType=this.targetType,this.blockId&&(o.blockId=this.blockId),o},s.Events.Click.prototype.fromJson=function(o){s.Events.Click.superClass_.fromJson.call(this,o),this.targetType=o.targetType,this.blockId=o.blockId},s.registry.register(s.registry.Type.EVENT,s.Events.CLICK,s.Events.Click),s.WorkspaceDragger=function(o){this.workspace_=o,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new s.utils.Coordinate(o.scrollX,o.scrollY)},s.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},s.WorkspaceDragger.prototype.startDrag=function(){s.selected&&s.selected.unselect(),this.workspace_.setupDragSurface()},s.WorkspaceDragger.prototype.endDrag=function(o){this.drag(o),this.workspace_.resetDragSurface()},s.WorkspaceDragger.prototype.drag=function(o){if(o=s.utils.Coordinate.sum(this.startScrollXY_,o),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(o.x,o.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(o.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,o.y)}},s.Gesture=function(o,l){this.mouseDownXY_=null,this.currentDragDeltaXY_=new s.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=l,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=o,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!s.DRAG_STACK},s.Gesture.prototype.dispose=function(){s.Touch.clearTouchIdentifier(),s.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&s.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&s.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},s.Gesture.prototype.updateFromEvent_=function(o){var l=new s.utils.Coordinate(o.clientX,o.clientY);this.updateDragDelta_(l)&&(this.updateIsDragging_(),s.longStop_()),this.mostRecentEvent_=o},s.Gesture.prototype.updateDragDelta_=function(o){return this.currentDragDeltaXY_=s.utils.Coordinate.difference(o,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=s.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?s.FLYOUT_DRAG_RADIUS:s.DRAG_RADIUS))},s.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_)||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),s.Events.getGroup()||s.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),0))},s.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},s.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},s.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new s.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},s.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},s.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new(s.registry.getClassFromOptions(s.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},s.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new s.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},s.Gesture.prototype.doStart=function(o){s.utils.isTargetInput(o)?this.cancel():(this.hasStarted_=!0,s.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),s.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=o,s.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),s.utils.isRightButton(o)?this.handleRightClick(o):("touchstart"!=o.type.toLowerCase()&&"pointerdown"!=o.type.toLowerCase()||"mouse"==o.pointerType||s.longStart(o,this),this.mouseDownXY_=new s.utils.Coordinate(o.clientX,o.clientY),this.healStack_=o.altKey||o.ctrlKey||o.metaKey,this.bindMouseEvents(o)))},s.Gesture.prototype.bindMouseEvents=function(o){this.onMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),o.preventDefault(),o.stopPropagation()},s.Gesture.prototype.handleMove=function(o){this.updateFromEvent_(o),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),o.preventDefault(),o.stopPropagation()},s.Gesture.prototype.handleUp=function(o){this.updateFromEvent_(o),s.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(o,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(o,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(o),o.preventDefault(),o.stopPropagation(),this.dispose())},s.Gesture.prototype.cancel=function(){this.isEnding_||(s.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},s.Gesture.prototype.handleRightClick=function(o){this.targetBlock_?(this.bringBlockToFront_(),s.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(o)):this.startBubble_?this.startBubble_.showContextMenu(o):this.startWorkspace_&&!this.flyout_&&(s.hideChaff(),this.startWorkspace_.showContextMenu(o)),o.preventDefault(),o.stopPropagation(),this.dispose()},s.Gesture.prototype.handleWsStart=function(o,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(l),this.mostRecentEvent_=o,this.doStart(o)},s.Gesture.prototype.fireWorkspaceClick_=function(o){s.Events.fire(new(s.Events.get(s.Events.CLICK))(null,o.id,"workspace"))},s.Gesture.prototype.handleFlyoutStart=function(o,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(l),this.handleWsStart(o,l.getWorkspace())},s.Gesture.prototype.handleBlockStart=function(o,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(l),this.mostRecentEvent_=o},s.Gesture.prototype.handleBubbleStart=function(o,l){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(l),this.mostRecentEvent_=o},s.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},s.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},s.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(s.Events.getGroup()||s.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var o=new(s.Events.get(s.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");s.Events.fire(o)}this.bringBlockToFront_(),s.Events.setGroup(!1)},s.Gesture.prototype.doWorkspaceClick_=function(o){o=this.creatorWorkspace_,s.selected&&s.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||o)},s.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},s.Gesture.prototype.setStartField=function(o){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=o)},s.Gesture.prototype.setStartBubble=function(o){this.startBubble_||(this.startBubble_=o)},s.Gesture.prototype.setStartBlock=function(o){this.startBlock_||this.startBubble_||(this.startBlock_=o,o.isInFlyout&&o!=o.getRootBlock()?this.setTargetBlock_(o.getRootBlock()):this.setTargetBlock_(o))},s.Gesture.prototype.setTargetBlock_=function(o){o.isShadow()?this.setTargetBlock_(o.getParent()):this.targetBlock_=o},s.Gesture.prototype.setStartWorkspace_=function(o){this.startWorkspace_||(this.startWorkspace_=o)},s.Gesture.prototype.setStartFlyout_=function(o){this.flyout_||(this.flyout_=o)},s.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},s.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},s.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},s.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},s.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},s.Gesture.prototype.hasStarted=function(){return this.hasStarted_},s.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},s.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},s.Gesture.inProgress=function(){for(var u,o=s.Workspace.getAll(),l=0;u=o[l];l++)if(u.currentGesture_)return!0;return!1},s.IRegistrable=function(){},s.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},s.Marker.prototype.setDrawer=function(o){this.drawer_=o},s.Marker.prototype.getDrawer=function(){return this.drawer_},s.Marker.prototype.getCurNode=function(){return this.curNode_},s.Marker.prototype.setCurNode=function(o){var l=this.curNode_;this.curNode_=o,this.drawer_&&this.drawer_.draw(l,this.curNode_)},s.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},s.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},s.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},s.Cursor=function(){s.Cursor.superClass_.constructor.call(this),this.type="cursor"},s.utils.object.inherits(s.Cursor,s.Marker),s.Cursor.prototype.next=function(){var o=this.getCurNode();if(!o)return null;for(o=o.next();o&&o.next()&&(o.getType()==s.ASTNode.types.NEXT||o.getType()==s.ASTNode.types.BLOCK);)o=o.next();return o&&this.setCurNode(o),o},s.Cursor.prototype.in=function(){var o=this.getCurNode();return o?((o.getType()==s.ASTNode.types.PREVIOUS||o.getType()==s.ASTNode.types.OUTPUT)&&(o=o.next()),(o=o.in())&&this.setCurNode(o),o):null},s.Cursor.prototype.prev=function(){var o=this.getCurNode();if(!o)return null;for(o=o.prev();o&&o.prev()&&(o.getType()==s.ASTNode.types.NEXT||o.getType()==s.ASTNode.types.BLOCK);)o=o.prev();return o&&this.setCurNode(o),o},s.Cursor.prototype.out=function(){var o=this.getCurNode();return o?((o=o.out())&&o.getType()==s.ASTNode.types.BLOCK&&(o=o.prev()||o),o&&this.setCurNode(o),o):null},s.registry.register(s.registry.Type.CURSOR,s.registry.DEFAULT,s.Cursor),s.MarkerManager=function(o){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=o},s.MarkerManager.LOCAL_MARKER="local_marker_1",s.MarkerManager.prototype.registerMarker=function(o,l){this.markers_[o]&&this.unregisterMarker(o),l.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,l)),this.setMarkerSvg(l.getDrawer().createDom()),this.markers_[o]=l},s.MarkerManager.prototype.unregisterMarker=function(o){var l=this.markers_[o];if(!l)throw Error("Marker with ID "+o+" does not exist. Can only unregister markers that exist.");l.dispose(),delete this.markers_[o]},s.MarkerManager.prototype.getCursor=function(){return this.cursor_},s.MarkerManager.prototype.getMarker=function(o){return this.markers_[o]||null},s.MarkerManager.prototype.setCursor=function(o){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=o)&&(o=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(o),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},s.MarkerManager.prototype.setCursorSvg=function(o){o?(this.workspace_.getBlockCanvas().appendChild(o),this.cursorSvg_=o):this.cursorSvg_=null},s.MarkerManager.prototype.setMarkerSvg=function(o){o?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(o,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(o)):this.markerSvg_=null},s.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},s.MarkerManager.prototype.dispose=function(){for(var u,o=Object.keys(this.markers_),l=0;u=o[l];l++)this.unregisterMarker(u);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},s.WidgetDiv={},s.WidgetDiv.owner_=null,s.WidgetDiv.dispose_=null,s.WidgetDiv.rendererClassName_="",s.WidgetDiv.themeClassName_="",s.WidgetDiv.createDom=function(){s.WidgetDiv.DIV||(s.WidgetDiv.DIV=document.createElement("div"),s.WidgetDiv.DIV.className="blocklyWidgetDiv",(s.parentContainer||document.body).appendChild(s.WidgetDiv.DIV))},s.WidgetDiv.show=function(o,l,u){s.WidgetDiv.hide(),s.WidgetDiv.owner_=o,s.WidgetDiv.dispose_=u,(o=s.WidgetDiv.DIV).style.direction=l?"rtl":"ltr",o.style.display="block",l=s.getMainWorkspace(),s.WidgetDiv.rendererClassName_=l.getRenderer().getClassName(),s.WidgetDiv.themeClassName_=l.getTheme().getClassName(),s.utils.dom.addClass(o,s.WidgetDiv.rendererClassName_),s.utils.dom.addClass(o,s.WidgetDiv.themeClassName_)},s.WidgetDiv.hide=function(){if(s.WidgetDiv.isVisible()){s.WidgetDiv.owner_=null;var o=s.WidgetDiv.DIV;o.style.display="none",o.style.left="",o.style.top="",s.WidgetDiv.dispose_&&s.WidgetDiv.dispose_(),s.WidgetDiv.dispose_=null,o.textContent="",s.WidgetDiv.rendererClassName_&&(s.utils.dom.removeClass(o,s.WidgetDiv.rendererClassName_),s.WidgetDiv.rendererClassName_=""),s.WidgetDiv.themeClassName_&&(s.utils.dom.removeClass(o,s.WidgetDiv.themeClassName_),s.WidgetDiv.themeClassName_=""),s.getMainWorkspace().markFocused()}},s.WidgetDiv.isVisible=function(){return!!s.WidgetDiv.owner_},s.WidgetDiv.hideIfOwner=function(o){s.WidgetDiv.owner_==o&&s.WidgetDiv.hide()},s.WidgetDiv.positionInternal_=function(o,l,u){s.WidgetDiv.DIV.style.left=o+"px",s.WidgetDiv.DIV.style.top=l+"px",s.WidgetDiv.DIV.style.height=u+"px"},s.WidgetDiv.positionWithAnchor=function(o,l,u,h){var _=s.WidgetDiv.calculateY_(o,l,u);o=s.WidgetDiv.calculateX_(o,l,u,h),0>_?s.WidgetDiv.positionInternal_(o,0,u.height+_):s.WidgetDiv.positionInternal_(o,_,u.height)},s.WidgetDiv.calculateX_=function(o,l,u,h){return h?(l=Math.max(l.right-u.width,o.left),Math.min(l,o.right-u.width)):(l=Math.min(l.left,o.right-u.width),Math.max(l,o.left))},s.WidgetDiv.calculateY_=function(o,l,u){return l.bottom+u.height>=o.bottom?l.top-u.height:l.bottom},s.Field=function(o,l,u){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new s.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,u&&this.configure_(u),this.setValue(o),l&&this.setValidator(l)},s.Field.prototype.DEFAULT_VALUE=null,s.Field.prototype.name=void 0,s.Field.prototype.disposed=!1,s.Field.prototype.maxDisplayLength=50,s.Field.prototype.sourceBlock_=null,s.Field.prototype.isDirty_=!0,s.Field.prototype.visible_=!0,s.Field.prototype.clickTarget_=null,s.Field.NBSP="\xa0",s.Field.prototype.EDITABLE=!0,s.Field.prototype.SERIALIZABLE=!1,s.Field.prototype.configure_=function(o){var l=o.tooltip;"string"==typeof l&&(l=s.utils.replaceMessageReferences(o.tooltip)),l&&this.setTooltip(l)},s.Field.prototype.setSourceBlock=function(o){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=o},s.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},s.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},s.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},s.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},s.Field.prototype.initModel=function(){},s.Field.prototype.createBorderRect_=function(){this.borderRect_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},s.Field.prototype.createTextElement_=function(){this.textElement_=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},s.Field.prototype.bindEvents_=function(){s.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=s.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},s.Field.prototype.fromXml=function(o){this.setValue(o.textContent)},s.Field.prototype.toXml=function(o){return o.textContent=this.getValue(),o},s.Field.prototype.dispose=function(){s.DropDownDiv.hideIfOwner(this),s.WidgetDiv.hideIfOwner(this),s.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&s.browserEvents.unbind(this.mouseDownWrapper_),s.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},s.Field.prototype.updateEditable=function(){var o=this.fieldGroup_;this.EDITABLE&&o&&(this.sourceBlock_.isEditable()?(s.utils.dom.addClass(o,"blocklyEditableText"),s.utils.dom.removeClass(o,"blocklyNonEditableText"),o.style.cursor=this.CURSOR):(s.utils.dom.addClass(o,"blocklyNonEditableText"),s.utils.dom.removeClass(o,"blocklyEditableText"),o.style.cursor=""))},s.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},s.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},s.Field.prototype.isSerializable=function(){var o=!1;return this.name&&(this.SERIALIZABLE?o=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),o=!0)),o},s.Field.prototype.isVisible=function(){return this.visible_},s.Field.prototype.setVisible=function(o){if(this.visible_!=o){this.visible_=o;var l=this.getSvgRoot();l&&(l.style.display=o?"block":"none")}},s.Field.prototype.setValidator=function(o){this.validator_=o},s.Field.prototype.getValidator=function(){return this.validator_},s.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},s.Field.prototype.applyColour=function(){},s.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},s.Field.prototype.showEditor=function(o){this.isClickable()&&this.showEditor_(o)},s.Field.prototype.updateSize_=function(o){var l=this.getConstants(),u=2*(o=null!=o?o:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),h=l.FIELD_TEXT_HEIGHT,_=0;this.textElement_&&(u+=_=s.utils.dom.getFastTextWidth(this.textElement_,l.FIELD_TEXT_FONTSIZE,l.FIELD_TEXT_FONTWEIGHT,l.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(h=Math.max(h,l.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=h,this.size_.width=u,this.positionTextElement_(o,_),this.positionBorderRect_()},s.Field.prototype.positionTextElement_=function(o,l){if(this.textElement_){var u=this.getConstants(),h=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-l-o:o),this.textElement_.setAttribute("y",u.FIELD_TEXT_BASELINE_CENTER?h:h-u.FIELD_TEXT_HEIGHT/2+u.FIELD_TEXT_BASELINE)}},s.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},s.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new s.utils.Size(0,0)},s.Field.prototype.getScaledBBox=function(){if(this.borderRect_)o=this.borderRect_.getBoundingClientRect(),u=s.utils.style.getPageOffset(this.borderRect_),h=o.width,o=o.height;else{var o=this.sourceBlock_.getHeightWidth(),l=this.sourceBlock_.workspace.scale,u=this.getAbsoluteXY_(),h=o.width*l;o=o.height*l,s.utils.userAgent.GECKO?(u.x+=1.5*l,u.y+=1.5*l):s.utils.userAgent.EDGE||s.utils.userAgent.IE||(u.x-=.5*l,u.y-=.5*l),h+=1*l,o+=1*l}return new s.utils.Rect(u.y,u.y+o,u.x,u.x+h)},s.Field.prototype.getDisplayText_=function(){var o=this.getText();return o?(o.length>this.maxDisplayLength&&(o=o.substring(0,this.maxDisplayLength-2)+"\u2026"),o=o.replace(/\s/g,s.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(o+="\u200f"),o):s.Field.NBSP},s.Field.prototype.getText=function(){if(this.getText_){var o=this.getText_.call(this);if(null!==o)return String(o)}return String(this.getValue())},s.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},s.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},s.Field.prototype.setValue=function(o){if(null!==o){var l=this.doClassValidation_(o);if(!((o=this.processValidation_(o,l))instanceof Error)){if((l=this.getValidator())&&(l=l.call(this,o),(o=this.processValidation_(o,l))instanceof Error))return;if(!(l=this.sourceBlock_)||!l.disposed){var u=this.getValue();u===o?this.doValueUpdate_(o):(l&&s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(l,"field",this.name||null,u,o)),this.doValueUpdate_(o),this.isDirty_&&this.forceRerender())}}}},s.Field.prototype.processValidation_=function(o,l){return null===l?(this.doValueInvalid_(o),this.isDirty_&&this.forceRerender(),Error()):(void 0!==l&&(o=l),o)},s.Field.prototype.getValue=function(){return this.value_},s.Field.prototype.doClassValidation_=function(o){return null==o?null:o},s.Field.prototype.doValueUpdate_=function(o){this.value_=o,this.isDirty_=!0},s.Field.prototype.doValueInvalid_=function(o){},s.Field.prototype.onMouseDown_=function(o){this.sourceBlock_&&this.sourceBlock_.workspace&&(o=this.sourceBlock_.workspace.getGesture(o))&&o.setStartField(this)},s.Field.prototype.setTooltip=function(o){o||""===o||(o=this.sourceBlock_);var l=this.getClickTarget_();l?l.tooltip=o:this.tooltip_=o},s.Field.prototype.getTooltip=function(){var o=this.getClickTarget_();return s.Tooltip.getTooltipOfObject(o||{tooltip:this.tooltip_})},s.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},s.Field.prototype.getAbsoluteXY_=function(){return s.utils.style.getPageOffset(this.getClickTarget_())},s.Field.prototype.referencesVariables=function(){return!1},s.Field.prototype.getParentInput=function(){for(var o=null,l=this.sourceBlock_,u=l.inputList,h=0;h<l.inputList.length;h++)for(var _=u[h],b=_.fieldRow,D=0;D<b.length;D++)if(b[D]===this){o=_;break}return o},s.Field.prototype.getFlipRtl=function(){return!1},s.Field.prototype.isTabNavigable=function(){return!1},s.Field.prototype.onShortcut=function(o){return!1},s.Field.prototype.setCursorSvg=function(o){o?(this.fieldGroup_.appendChild(o),this.cursorSvg_=o):this.cursorSvg_=null},s.Field.prototype.setMarkerSvg=function(o){o?(this.fieldGroup_.appendChild(o),this.markerSvg_=o):this.markerSvg_=null},s.Field.prototype.updateMarkers_=function(){var o=this.sourceBlock_.workspace;o.keyboardAccessibilityMode&&this.cursorSvg_&&o.getCursor().draw(),o.keyboardAccessibilityMode&&this.markerSvg_&&o.getMarker(s.MarkerManager.LOCAL_MARKER).draw()},s.FieldLabel=function(o,l,u){this.class_=null,s.FieldLabel.superClass_.constructor.call(this,o,null,u),u||(this.class_=l||null)},s.utils.object.inherits(s.FieldLabel,s.Field),s.FieldLabel.prototype.DEFAULT_VALUE="",s.FieldLabel.fromJson=function(o){var l=s.utils.replaceMessageReferences(o.text);return new s.FieldLabel(l,void 0,o)},s.FieldLabel.prototype.EDITABLE=!1,s.FieldLabel.prototype.configure_=function(o){s.FieldLabel.superClass_.configure_.call(this,o),this.class_=o.class},s.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&s.utils.dom.addClass(this.textElement_,this.class_)},s.FieldLabel.prototype.doClassValidation_=function(o){return null==o?null:String(o)},s.FieldLabel.prototype.setClass=function(o){this.textElement_&&(this.class_&&s.utils.dom.removeClass(this.textElement_,this.class_),o&&s.utils.dom.addClass(this.textElement_,o)),this.class_=o},s.fieldRegistry.register("field_label",s.FieldLabel),s.Input=function(o,l,u,h){if(o!=s.inputTypes.DUMMY&&!l)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=o,this.name=l,this.sourceBlock_=u,this.connection=h,this.fieldRow=[]},s.Input.prototype.align=s.constants.ALIGN.LEFT,s.Input.prototype.visible_=!0,s.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},s.Input.prototype.appendField=function(o,l){return this.insertFieldAt(this.fieldRow.length,o,l),this},s.Input.prototype.insertFieldAt=function(o,l,u){if(0>o||o>this.fieldRow.length)throw Error("index "+o+" out of bounds.");return(l||""==l&&u)&&("string"==typeof l&&(l=s.fieldRegistry.fromJson({type:"field_label",text:l})),l.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(l.init(),l.applyColour()),l.name=u,l.setVisible(this.isVisible()),l.prefixField&&(o=this.insertFieldAt(o,l.prefixField)),this.fieldRow.splice(o,0,l),++o,l.suffixField&&(o=this.insertFieldAt(o,l.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),o},s.Input.prototype.removeField=function(o,l){for(var h,u=0;h=this.fieldRow[u];u++)if(h.name===o)return h.dispose(),this.fieldRow.splice(u,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(l)return!1;throw Error('Field "'+o+'" not found.')},s.Input.prototype.isVisible=function(){return this.visible_},s.Input.prototype.setVisible=function(o){var l=[];if(this.visible_==o)return l;this.visible_=o;for(var h,u=0;h=this.fieldRow[u];u++)h.setVisible(o);return this.connection&&(this.connection=this.connection,o?l=this.connection.startTrackingAll():this.connection.stopTrackingAll(),u=this.connection.targetBlock())&&(u.getSvgRoot().style.display=o?"block":"none"),l},s.Input.prototype.markDirty=function(){for(var l,o=0;l=this.fieldRow[o];o++)l.markDirty()},s.Input.prototype.setCheck=function(o){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(o),this},s.Input.prototype.setAlign=function(o){return this.align=o,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},s.Input.prototype.setShadowDom=function(o){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(o),this},s.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},s.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var o=0;o<this.fieldRow.length;o++)this.fieldRow[o].init()},s.Input.prototype.dispose=function(){for(var l,o=0;l=this.fieldRow[o];o++)l.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},s.Block=function(o,l,u){if(s.Generator&&void 0!==s.Generator.prototype[l])throw Error('Block prototypeName "'+l+'" conflicts with Blockly.Generator members.');if(this.id=u&&!o.getBlockById(u)?u:s.utils.genUid(),o.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new s.utils.Size(160,80)},this.xy_=new s.utils.Coordinate(0,0),this.workspace=o,this.isInFlyout=o.isFlyout,this.isInMutator=o.isMutator,this.RTL=o.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,l){if(this.type=l,!(u=s.Blocks[l])||"object"!=typeof u)throw TypeError("Unknown block type: "+l);s.utils.object.mixin(this,u)}o.addTopBlock(this),o.addTypedBlock(this),(o=s.Events.getGroup())||s.Events.setGroup(!0),l=s.Events.recordUndo;try{"function"==typeof this.init&&(s.Events.recordUndo=!1,this.init(),s.Events.recordUndo=l),s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(this))}finally{o||s.Events.setGroup(!1),s.Events.recordUndo=l}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},s.Block.COLLAPSED_INPUT_NAME=s.constants.COLLAPSED_INPUT_NAME,s.Block.COLLAPSED_FIELD_NAME=s.constants.COLLAPSED_FIELD_NAME,s.Block.prototype.data=null,s.Block.prototype.disposed=!1,s.Block.prototype.hue_=null,s.Block.prototype.colour_="#000000",s.Block.prototype.styleName_="",s.Block.prototype.dispose=function(o){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(o),s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_DELETE))(this)),s.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),s.selected==this&&(s.selected=null);for(var l=this.childBlocks_.length-1;0<=l;l--)this.childBlocks_[l].dispose(!1);l=0;for(var u;u=this.inputList[l];l++)u.dispose();this.inputList.length=0;var _,h=this.getConnections_(!0);for(l=0;_=h[l];l++)_.dispose()}finally{s.Events.enable(),this.disposed=!0}}},s.Block.prototype.initModel=function(){for(var l,o=0;l=this.inputList[o];o++)for(var h,u=0;h=l.fieldRow[u];u++)h.initModel&&h.initModel()},s.Block.prototype.unplug=function(o){this.outputConnection?this.unplugFromRow_(o):this.previousConnection&&this.unplugFromStack_(o)},s.Block.prototype.unplugFromRow_=function(o){var l=null;this.outputConnection.isConnected()&&(l=this.outputConnection.targetConnection,this.outputConnection.disconnect()),l&&o&&(o=this.getOnlyValueConnection_())&&o.isConnected()&&!o.targetBlock().isShadow()&&((o=o.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(o,l,!1)?l.connect(o):o.onFailedConnect(l))},s.Block.prototype.getOnlyValueConnection_=function(){for(var o=null,l=0;l<this.inputList.length;l++){var u=this.inputList[l].connection;if(u&&u.type==s.connectionTypes.INPUT_VALUE&&u.targetConnection){if(o)return null;o=u}}return o},s.Block.prototype.unplugFromStack_=function(o){var l=null;this.previousConnection.isConnected()&&(l=this.previousConnection.targetConnection,this.previousConnection.disconnect());var u=this.getNextBlock();o&&u&&!u.isShadow()&&((o=this.nextConnection.targetConnection).disconnect(),l&&this.workspace.connectionChecker.canConnect(l,o,!1)&&l.connect(o))},s.Block.prototype.getConnections_=function(o){o=[],this.outputConnection&&o.push(this.outputConnection),this.previousConnection&&o.push(this.previousConnection),this.nextConnection&&o.push(this.nextConnection);for(var u,l=0;u=this.inputList[l];l++)u.connection&&o.push(u.connection);return o},s.Block.prototype.lastConnectionInStack=function(o){for(var l=this.nextConnection;l;){var u=l.targetBlock();if(!u||o&&u.isShadow())return l;l=u.nextConnection}return null},s.Block.prototype.bumpNeighbours=function(){},s.Block.prototype.getParent=function(){return this.parentBlock_},s.Block.prototype.getInputWithBlock=function(o){for(var u,l=0;u=this.inputList[l];l++)if(u.connection&&u.connection.targetBlock()==o)return u;return null},s.Block.prototype.getSurroundParent=function(){var o=this;do{var l=o;if(!(o=o.getParent()))return null}while(o.getNextBlock()==l);return o},s.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},s.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},s.Block.prototype.getFirstStatementConnection=function(){for(var l,o=0;l=this.inputList[o];o++)if(l.connection&&l.connection.type==s.connectionTypes.NEXT_STATEMENT)return l.connection;return null},s.Block.prototype.getRootBlock=function(){var o=this;do{var l=o;o=l.parentBlock_}while(o);return l},s.Block.prototype.getTopStackBlock=function(){var o=this;do{var l=o.getPreviousBlock()}while(l&&l.getNextBlock()==o&&(o=l));return o},s.Block.prototype.getChildren=function(o){if(!o)return this.childBlocks_;o=[];for(var u,l=0;u=this.inputList[l];l++)u.connection&&(u=u.connection.targetBlock())&&o.push(u);return(l=this.getNextBlock())&&o.push(l),o},s.Block.prototype.setParent=function(o){if(o!=this.parentBlock_){if(this.parentBlock_){if(s.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=o)?o.childBlocks_.push(this):this.workspace.addTopBlock(this)}},s.Block.prototype.getDescendants=function(o){for(var h,l=[this],u=this.getChildren(o),_=0;h=u[_];_++)l.push.apply(l,h.getDescendants(o));return l},s.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},s.Block.prototype.setDeletable=function(o){this.deletable_=o},s.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},s.Block.prototype.setMovable=function(o){this.movable_=o},s.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(s.utils.getBlockTypeCounts(this,!0))},s.Block.prototype.isShadow=function(){return this.isShadow_},s.Block.prototype.setShadow=function(o){this.isShadow_=o},s.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},s.Block.prototype.setInsertionMarker=function(o){this.isInsertionMarker_=o},s.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},s.Block.prototype.setEditable=function(o){this.editable_=o,o=0;for(var l;l=this.inputList[o];o++)for(var h,u=0;h=l.fieldRow[u];u++)h.updateEditable()},s.Block.prototype.isDisposed=function(){return this.disposed},s.Block.prototype.getMatchingConnection=function(o,l){var u=this.getConnections_(!0);if(o=o.getConnections_(!0),u.length!=o.length)throw Error("Connection lists did not match in length.");for(var h=0;h<o.length;h++)if(o[h]==l)return u[h];return null},s.Block.prototype.setHelpUrl=function(o){this.helpUrl=o},s.Block.prototype.setTooltip=function(o){this.tooltip=o},s.Block.prototype.getTooltip=function(){return s.Tooltip.getTooltipOfObject(this)},s.Block.prototype.getColour=function(){return this.colour_},s.Block.prototype.getStyleName=function(){return this.styleName_},s.Block.prototype.getHue=function(){return this.hue_},s.Block.prototype.setColour=function(o){o=s.utils.parseBlockColour(o),this.hue_=o.hue,this.colour_=o.hex},s.Block.prototype.setStyle=function(o){this.styleName_=o},s.Block.prototype.setOnChange=function(o){if(o&&"function"!=typeof o)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=o)&&(this.onchangeWrapper_=o.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},s.Block.prototype.getField=function(o){if("string"!=typeof o)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===o?"nothing":o+" of type "+typeof o)+" instead");for(var u,l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)if(_.name===o)return _;return null},s.Block.prototype.getVars=function(){for(var u,o=[],l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)_.referencesVariables()&&o.push(_.getValue());return o},s.Block.prototype.getVarModels=function(){for(var u,o=[],l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)_.referencesVariables()&&(_=this.workspace.getVariableById(_.getValue()))&&o.push(_);return o},s.Block.prototype.updateVarName=function(o){for(var u,l=0;u=this.inputList[l];l++)for(var _,h=0;_=u.fieldRow[h];h++)_.referencesVariables()&&o.getId()==_.getValue()&&_.refreshVariableName()},s.Block.prototype.renameVarById=function(o,l){for(var h,u=0;h=this.inputList[u];u++)for(var b,_=0;b=h.fieldRow[_];_++)b.referencesVariables()&&o==b.getValue()&&b.setValue(l)},s.Block.prototype.getFieldValue=function(o){return(o=this.getField(o))?o.getValue():null},s.Block.prototype.setFieldValue=function(o,l){var u=this.getField(l);if(!u)throw Error('Field "'+l+'" not found.');u.setValue(o)},s.Block.prototype.setPreviousStatement=function(o,l){if(o){if(void 0===l&&(l=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(s.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(l)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},s.Block.prototype.setNextStatement=function(o,l){if(o)void 0===l&&(l=null),this.nextConnection||(this.nextConnection=this.makeConnection_(s.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(l);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},s.Block.prototype.setOutput=function(o,l){if(o){if(void 0===l&&(l=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(s.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(l)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},s.Block.prototype.setInputsInline=function(o){this.inputsInline!=o&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,o)),this.inputsInline=o)},s.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var o=1;o<this.inputList.length;o++)if(this.inputList[o-1].type==s.inputTypes.DUMMY&&this.inputList[o].type==s.inputTypes.DUMMY)return!1;for(o=1;o<this.inputList.length;o++)if(this.inputList[o-1].type==s.inputTypes.VALUE&&this.inputList[o].type==s.inputTypes.DUMMY)return!0;return!1},s.Block.prototype.setOutputShape=function(o){this.outputShape_=o},s.Block.prototype.getOutputShape=function(){return this.outputShape_},s.Block.prototype.isEnabled=function(){return!this.disabled},s.Block.prototype.setEnabled=function(o){this.isEnabled()!=o&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!o)),this.disabled=!o)},s.Block.prototype.getInheritedDisabled=function(){for(var o=this.getSurroundParent();o;){if(o.disabled)return!0;o=o.getSurroundParent()}return!1},s.Block.prototype.isCollapsed=function(){return this.collapsed_},s.Block.prototype.setCollapsed=function(o){this.collapsed_!=o&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,o)),this.collapsed_=o)},s.Block.prototype.toString=function(o,l){function u(j){var F=j.getCheck();return!F&&j.targetConnection&&(F=j.targetConnection.getCheck()),!!F&&(-1!=F.indexOf("Boolean")||-1!=F.indexOf("Number"))}function h(){D&&D.getType()==x.getType()&&D.getLocation()==x.getLocation()&&(D=null)}var _=[];l=l||"?";var b=s.ASTNode.NAVIGATE_ALL_FIELDS;s.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var D=s.ASTNode.createBlockNode(this),x=D;D;){switch(D.getType()){case s.ASTNode.types.INPUT:var G=D.getLocation();D.in()?u(G)&&_.push("("):_.push(l);break;case s.ASTNode.types.FIELD:(G=D.getLocation()).name!=s.constants.COLLAPSED_FIELD_NAME&&_.push(G.getText())}if(!(D=(G=D).in()||G.next())){for(D=G.out(),h();D&&!D.next();)D=D.out(),h(),D&&D.getType()==s.ASTNode.types.INPUT&&u(D.getLocation())&&_.push(")");D&&(D=D.next())}}for(s.ASTNode.NAVIGATE_ALL_FIELDS=b,l=2;l<_.length;l++)"("==_[l-2]&&")"==_[l]&&(_[l-2]=_[l-1],_.splice(l-1,2));return _=(_=_.reduce(function(j,F){return j+("("==j.substr(-1)||")"==F?"":" ")+F},"")).trim()||"???",o&&_.length>o&&(_=_.substring(0,o-3)+"..."),_},s.Block.prototype.appendValueInput=function(o){return this.appendInput_(s.inputTypes.VALUE,o)},s.Block.prototype.appendStatementInput=function(o){return this.appendInput_(s.inputTypes.STATEMENT,o)},s.Block.prototype.appendDummyInput=function(o){return this.appendInput_(s.inputTypes.DUMMY,o||"")},s.Block.prototype.jsonInit=function(o){var l=o.type?'Block "'+o.type+'": ':"";if(o.output&&o.previousStatement)throw Error(l+"Must not have both an output and a previousStatement.");if(o.style&&o.style.hat&&(this.hat=o.style.hat,o.style=null),o.style&&o.colour)throw Error(l+"Must not have both a colour and a style.");o.style?this.jsonInitStyle_(o,l):this.jsonInitColour_(o,l);for(var u=0;void 0!==o["message"+u];)this.interpolate_(o["message"+u],o["args"+u]||[],o["lastDummyAlign"+u],l),u++;if(void 0!==o.inputsInline&&this.setInputsInline(o.inputsInline),void 0!==o.output&&this.setOutput(!0,o.output),void 0!==o.outputShape&&this.setOutputShape(o.outputShape),void 0!==o.previousStatement&&this.setPreviousStatement(!0,o.previousStatement),void 0!==o.nextStatement&&this.setNextStatement(!0,o.nextStatement),void 0!==o.tooltip&&(u=s.utils.replaceMessageReferences(u=o.tooltip),this.setTooltip(u)),void 0!==o.enableContextMenu&&(this.contextMenu=!!(u=o.enableContextMenu)),void 0!==o.helpUrl&&(u=s.utils.replaceMessageReferences(u=o.helpUrl),this.setHelpUrl(u)),"string"==typeof o.extensions&&(console.warn(l+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+o.type+"' block."),o.extensions=[o.extensions]),void 0!==o.mutator&&s.Extensions.apply(o.mutator,this,!0),o=o.extensions,Array.isArray(o))for(l=0;l<o.length;++l)s.Extensions.apply(o[l],this,!1)},s.Block.prototype.jsonInitColour_=function(o,l){if("colour"in o)if(void 0===o.colour)console.warn(l+"Undefined colour value.");else{o=o.colour;try{this.setColour(o)}catch(u){console.warn(l+"Illegal colour value: ",o)}}},s.Block.prototype.jsonInitStyle_=function(o,l){o=o.style;try{this.setStyle(o)}catch(u){console.warn(l+"Style does not exist: ",o)}},s.Block.prototype.mixin=function(o,l){if(void 0!==l&&"boolean"!=typeof l)throw Error("opt_disableCheck must be a boolean if provided");if(!l){for(var u in l=[],o)void 0!==this[u]&&l.push(u);if(l.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(l))}s.utils.object.mixin(this,o)},s.Block.prototype.interpolate_=function(o,l,u,h){o=s.utils.tokenizeInterpolation(o),this.validateTokens_(o,l.length),l=this.interpolateArguments_(o,l,u),u=[],o=0;for(var _;_=l[o];o++)if(this.isInputKeyword_(_.type)){if(_=this.inputFromJson_(_,h)){for(var D,b=0;D=u[b];b++)_.appendField(D[0],D[1]);u.length=0}}else(b=this.fieldFromJson_(_))&&u.push([b,_.name])},s.Block.prototype.validateTokens_=function(o,l){for(var u=[],h=0,_=0;_<o.length;_++){var b=o[_];if("number"==typeof b){if(1>b||b>l)throw Error('Block "'+this.type+'": Message index %'+b+" out of range.");if(u[b])throw Error('Block "'+this.type+'": Message index %'+b+" duplicated.");u[b]=!0,h++}}if(h!=l)throw Error('Block "'+this.type+'": Message does not reference all '+l+" arg(s).")},s.Block.prototype.interpolateArguments_=function(o,l,u){for(var h=[],_=0;_<o.length;_++){var b=o[_];"number"==typeof b&&(b=l[b-1]),("string"!=typeof b||(b=this.stringToFieldJson_(b)))&&h.push(b)}return(o=h.length)&&!this.isInputKeyword_(h[o-1].type)&&(o={type:"input_dummy"},u&&(o.align=u),h.push(o)),h},s.Block.prototype.fieldFromJson_=function(o){var l=s.fieldRegistry.fromJson(o);return!l&&o.alt?"string"==typeof o.alt?(o=this.stringToFieldJson_(o.alt))?this.fieldFromJson_(o):null:this.fieldFromJson_(o.alt):l},s.Block.prototype.inputFromJson_=function(o,l){var u={LEFT:s.constants.ALIGN.LEFT,RIGHT:s.constants.ALIGN.RIGHT,CENTRE:s.constants.ALIGN.CENTRE,CENTER:s.constants.ALIGN.CENTRE},h=null;switch(o.type){case"input_value":h=this.appendValueInput(o.name);break;case"input_statement":h=this.appendStatementInput(o.name);break;case"input_dummy":h=this.appendDummyInput(o.name)}return h?(o.check&&h.setCheck(o.check),o.align&&(void 0===(u=u[o.align.toUpperCase()])?console.warn(l+"Illegal align value: ",o.align):h.setAlign(u)),h):null},s.Block.prototype.isInputKeyword_=function(o){return"input_value"==o||"input_statement"==o||"input_dummy"==o},s.Block.prototype.stringToFieldJson_=function(o){return(o=o.trim())?{type:"field_label",text:o}:null},s.Block.prototype.appendInput_=function(o,l){var u=null;return(o==s.inputTypes.VALUE||o==s.inputTypes.STATEMENT)&&(u=this.makeConnection_(o)),o==s.inputTypes.STATEMENT&&this.statementInputCount++,o=new s.Input(o,l,this,u),this.inputList.push(o),o},s.Block.prototype.moveInputBefore=function(o,l){if(o!=l){for(var b,u=-1,h=l?-1:this.inputList.length,_=0;b=this.inputList[_];_++)if(b.name==o){if(u=_,-1!=h)break}else if(l&&b.name==l&&(h=_,-1!=u))break;if(-1==u)throw Error('Named input "'+o+'" not found.');if(-1==h)throw Error('Reference input "'+l+'" not found.');this.moveNumberedInputBefore(u,h)}},s.Block.prototype.moveNumberedInputBefore=function(o,l){if(o==l)throw Error("Can't move input to itself.");if(o>=this.inputList.length)throw RangeError("Input index "+o+" out of bounds.");if(l>this.inputList.length)throw RangeError("Reference input "+l+" out of bounds.");var u=this.inputList[o];this.inputList.splice(o,1),o<l&&l--,this.inputList.splice(l,0,u)},s.Block.prototype.removeInput=function(o,l){for(var h,u=0;h=this.inputList[u];u++)if(h.name==o)return h.type==s.inputTypes.STATEMENT&&this.statementInputCount--,h.dispose(),this.inputList.splice(u,1),!0;if(l)return!1;throw Error("Input not found: "+o)},s.Block.prototype.getInput=function(o){for(var u,l=0;u=this.inputList[l];l++)if(u.name==o)return u;return null},s.Block.prototype.getInputTargetBlock=function(o){return(o=this.getInput(o))&&o.connection&&o.connection.targetBlock()},s.Block.prototype.getCommentText=function(){return this.commentModel.text},s.Block.prototype.setCommentText=function(o){this.commentModel.text!=o&&(s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,o)),this.comment=this.commentModel.text=o)},s.Block.prototype.setWarningText=function(o,l){},s.Block.prototype.setMutator=function(o){},s.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},s.Block.prototype.moveBy=function(o,l){if(this.parentBlock_)throw Error("Block has parent.");var u=new(s.Events.get(s.Events.BLOCK_MOVE))(this);this.xy_.translate(o,l),u.recordNew(),s.Events.fire(u)},s.Block.prototype.makeConnection_=function(o){return new s.Connection(this,o)},s.Block.prototype.allInputsFilled=function(o){if(void 0===o&&(o=!0),!o&&this.isShadow())return!1;for(var u,l=0;u=this.inputList[l];l++)if(u.connection&&(!(u=u.connection.targetBlock())||!u.allInputsFilled(o)))return!1;return!(l=this.getNextBlock())||l.allInputsFilled(o)},s.Block.prototype.toDevString=function(){var o=this.type?'"'+this.type+'" block':"Block";return this.id&&(o+=' (id="'+this.id+'")'),o},s.blockRendering.IPathObject=function(o,l){},s.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},s.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},s.Menu.prototype.addChild=function(o){this.menuItems_.push(o)},s.Menu.prototype.render=function(o){var l=document.createElement("div");l.className="blocklyMenu goog-menu blocklyNonSelectable",l.tabIndex=0,this.roleName_&&s.utils.aria.setRole(l,this.roleName_),this.element_=l;for(var h,u=0;h=this.menuItems_[u];u++)l.appendChild(h.createDom());this.mouseOverHandler_=s.browserEvents.conditionalBind(l,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=s.browserEvents.conditionalBind(l,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=s.browserEvents.conditionalBind(l,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=s.browserEvents.conditionalBind(l,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=s.browserEvents.conditionalBind(l,"keydown",this,this.handleKeyEvent_),o.appendChild(l)},s.Menu.prototype.getElement=function(){return this.element_},s.Menu.prototype.focus=function(){var o=this.getElement();o&&(o.focus({preventScroll:!0}),s.utils.dom.addClass(o,"blocklyFocused"))},s.Menu.prototype.blur_=function(){var o=this.getElement();o&&(o.blur(),s.utils.dom.removeClass(o,"blocklyFocused"))},s.Menu.prototype.setRole=function(o){this.roleName_=o},s.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(s.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(s.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(s.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(s.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(s.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var l,o=0;l=this.menuItems_[o];o++)l.dispose();this.element_=null},s.Menu.prototype.getMenuItem_=function(o){for(var l=this.getElement();o&&o!=l;){if(s.utils.dom.hasClass(o,"blocklyMenuItem"))for(var h,u=0;h=this.menuItems_[u];u++)if(h.getElement()==o)return h;o=o.parentElement}return null},s.Menu.prototype.setHighlighted=function(o){var l=this.highlightedItem_;l&&(l.setHighlighted(!1),this.highlightedItem_=null),o&&(o.setHighlighted(!0),this.highlightedItem_=o,l=this.getElement(),s.utils.style.scrollIntoContainerView(o.getElement(),l),s.utils.aria.setState(l,s.utils.aria.State.ACTIVEDESCENDANT,o.getId()))},s.Menu.prototype.highlightNext=function(){var o=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(o,1)},s.Menu.prototype.highlightPrevious=function(){var o=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>o?this.menuItems_.length:o,-1)},s.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},s.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},s.Menu.prototype.highlightHelper_=function(o,l){o+=l;for(var u;u=this.menuItems_[o];){if(u.isEnabled()){this.setHighlighted(u);break}o+=l}},s.Menu.prototype.handleMouseOver_=function(o){(o=this.getMenuItem_(o.target))&&(o.isEnabled()?this.highlightedItem_!=o&&this.setHighlighted(o):this.setHighlighted(null))},s.Menu.prototype.handleClick_=function(o){var l=this.openingCoords;if(this.openingCoords=null,l&&"number"==typeof o.clientX){var u=new s.utils.Coordinate(o.clientX,o.clientY);if(1>s.utils.Coordinate.distance(l,u))return}(o=this.getMenuItem_(o.target))&&o.performAction()},s.Menu.prototype.handleMouseEnter_=function(o){this.focus()},s.Menu.prototype.handleMouseLeave_=function(o){this.getElement()&&(this.blur_(),this.setHighlighted(null))},s.Menu.prototype.handleKeyEvent_=function(o){if(this.menuItems_.length&&!(o.shiftKey||o.ctrlKey||o.metaKey||o.altKey)){var l=this.highlightedItem_;switch(o.keyCode){case s.utils.KeyCodes.ENTER:case s.utils.KeyCodes.SPACE:l&&l.performAction();break;case s.utils.KeyCodes.UP:this.highlightPrevious();break;case s.utils.KeyCodes.DOWN:this.highlightNext();break;case s.utils.KeyCodes.PAGE_UP:case s.utils.KeyCodes.HOME:this.highlightFirst_();break;case s.utils.KeyCodes.PAGE_DOWN:case s.utils.KeyCodes.END:this.highlightLast_();break;default:return}o.preventDefault(),o.stopPropagation()}},s.Menu.prototype.getSize=function(){var o=this.getElement(),l=s.utils.style.getSize(o);return l.height=o.scrollHeight,l},s.MenuItem=function(o,l){this.content_=o,this.value_=l,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},s.MenuItem.prototype.createDom=function(){var o=document.createElement("div");o.id=s.utils.IdGenerator.getNextUniqueId(),this.element_=o,o.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var l=document.createElement("div");if(l.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var u=document.createElement("div");u.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",l.appendChild(u)}return u=this.content_,"string"==typeof this.content_&&(u=document.createTextNode(this.content_)),l.appendChild(u),o.appendChild(l),this.roleName_&&s.utils.aria.setRole(o,this.roleName_),s.utils.aria.setState(o,s.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),s.utils.aria.setState(o,s.utils.aria.State.DISABLED,!this.enabled_),o},s.MenuItem.prototype.dispose=function(){this.element_=null},s.MenuItem.prototype.getElement=function(){return this.element_},s.MenuItem.prototype.getId=function(){return this.element_.id},s.MenuItem.prototype.getValue=function(){return this.value_},s.MenuItem.prototype.setRightToLeft=function(o){this.rightToLeft_=o},s.MenuItem.prototype.setRole=function(o){this.roleName_=o},s.MenuItem.prototype.setCheckable=function(o){this.checkable_=o},s.MenuItem.prototype.setChecked=function(o){this.checked_=o},s.MenuItem.prototype.setHighlighted=function(o){this.highlight_=o;var l=this.getElement();l&&this.isEnabled()&&(o?(s.utils.dom.addClass(l,"blocklyMenuItemHighlight"),s.utils.dom.addClass(l,"goog-menuitem-highlight")):(s.utils.dom.removeClass(l,"blocklyMenuItemHighlight"),s.utils.dom.removeClass(l,"goog-menuitem-highlight")))},s.MenuItem.prototype.isEnabled=function(){return this.enabled_},s.MenuItem.prototype.setEnabled=function(o){this.enabled_=o},s.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},s.MenuItem.prototype.onAction=function(o,l){this.actionHandler_=o.bind(l)},s.ContextMenu={},s.ContextMenu.currentBlock=null,s.ContextMenu.menu_=null,s.ContextMenu.show=function(o,l,u){if(s.WidgetDiv.show(s.ContextMenu,u,s.ContextMenu.dispose),l.length){var h=s.ContextMenu.populate_(l,u);s.ContextMenu.menu_=h,s.ContextMenu.position_(h,o,u),setTimeout(function(){h.focus()},1),s.ContextMenu.currentBlock=null}else s.ContextMenu.hide()},s.ContextMenu.populate_=function(o,l){var u=new s.Menu;u.setRole(s.utils.aria.Role.MENU);for(var _,h=0;_=o[h];h++){var b=new s.MenuItem(_.text);b.setRightToLeft(l),b.setRole(s.utils.aria.Role.MENUITEM),u.addChild(b),b.setEnabled(_.enabled),_.enabled&&b.onAction(function(D){s.ContextMenu.hide(),this.callback(this.scope)},_)}return u},s.ContextMenu.position_=function(o,l,u){var h=s.utils.getViewportBBox();l=new s.utils.Rect(l.clientY+h.top,l.clientY+h.top,l.clientX+h.left,l.clientX+h.left),s.ContextMenu.createWidget_(o);var _=o.getSize();u&&(l.left+=_.width,l.right+=_.width,h.left+=_.width,h.right+=_.width),s.WidgetDiv.positionWithAnchor(h,l,_,u),o.focus()},s.ContextMenu.createWidget_=function(o){o.render(s.WidgetDiv.DIV);var l=o.getElement();s.utils.dom.addClass(l,"blocklyContextMenu"),s.browserEvents.conditionalBind(l,"contextmenu",null,s.utils.noEvent),o.focus()},s.ContextMenu.hide=function(){s.WidgetDiv.hideIfOwner(s.ContextMenu),s.ContextMenu.currentBlock=null},s.ContextMenu.dispose=function(){s.ContextMenu.menu_&&(s.ContextMenu.menu_.dispose(),s.ContextMenu.menu_=null)},s.ContextMenu.callbackFactory=function(o,l){return function(){s.Events.disable();try{var u=s.Xml.domToBlock(l,o.workspace),h=o.getRelativeToSurfaceXY();h.x=o.RTL?h.x-s.SNAP_RADIUS:h.x+s.SNAP_RADIUS,h.y+=2*s.SNAP_RADIUS,u.moveBy(h.x,h.y)}finally{s.Events.enable()}s.Events.isEnabled()&&!u.isShadow()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(u)),u.select()}},s.ContextMenu.commentDeleteOption=function(o){return{text:s.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){s.Events.setGroup(!0),o.dispose(!0,!0),s.Events.setGroup(!1)}}},s.ContextMenu.commentDuplicateOption=function(o){return{text:s.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){s.duplicate(o)}}},s.ContextMenu.workspaceCommentOption=function(o,l){if(!s.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var u={enabled:!s.utils.userAgent.IE};return u.text=s.Msg.ADD_COMMENT,u.callback=function(){var h=new s.WorkspaceCommentSvg(o,s.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,s.WorkspaceCommentSvg.DEFAULT_SIZE,s.WorkspaceCommentSvg.DEFAULT_SIZE),_=o.getInjectionDiv().getBoundingClientRect();_=new s.utils.Coordinate(l.clientX-_.left,l.clientY-_.top);var b=o.getOriginOffsetInPixels();(_=s.utils.Coordinate.difference(_,b)).scale(1/o.scale),h.moveBy(_.x,_.y),o.rendered&&(h.initSvg(),h.render(),h.select())},u},s.ContextMenuRegistry=function(){s.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},s.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},s.ContextMenuRegistry.registry=null,s.ContextMenuRegistry.prototype.register=function(o){if(this.registry_[o.id])throw Error('Menu item with ID "'+o.id+'" is already registered.');this.registry_[o.id]=o},s.ContextMenuRegistry.prototype.unregister=function(o){if(!this.registry_[o])throw Error('Menu item with ID "'+o+'" not found.');delete this.registry_[o]},s.ContextMenuRegistry.prototype.getItem=function(o){return this.registry_[o]||null},s.ContextMenuRegistry.prototype.getContextMenuOptions=function(o,l){var u=[],h=this.registry_;return Object.keys(h).forEach(function(_){if(o==(_=h[_]).scopeType){var b=_.preconditionFn(l);"hidden"!=b&&(_={text:"function"==typeof _.displayText?_.displayText(l):_.displayText,enabled:"enabled"==b,callback:_.callback,scope:l,weight:_.weight},u.push(_))}}),u.sort(function(_,b){return _.weight-b.weight}),u},new s.ContextMenuRegistry,s.Events.Selected=function(o,l,u){s.Events.Selected.superClass_.constructor.call(this,u),this.oldElementId=o,this.newElementId=l},s.utils.object.inherits(s.Events.Selected,s.Events.UiBase),s.Events.Selected.prototype.type=s.Events.SELECTED,s.Events.Selected.prototype.toJson=function(){var o=s.Events.Selected.superClass_.toJson.call(this);return o.oldElementId=this.oldElementId,o.newElementId=this.newElementId,o},s.Events.Selected.prototype.fromJson=function(o){s.Events.Selected.superClass_.fromJson.call(this,o),this.oldElementId=o.oldElementId,this.newElementId=o.newElementId},s.registry.register(s.registry.Type.EVENT,s.Events.SELECTED,s.Events.Selected),s.IBoundedElement=function(){},s.ICopyable=function(){},s.RenderedConnection=function(o,l){s.RenderedConnection.superClass_.constructor.call(this,o,l),this.db_=o.workspace.connectionDBList[l],this.dbOpposite_=o.workspace.connectionDBList[s.OPPOSITE_TYPE[l]],this.offsetInBlock_=new s.utils.Coordinate(0,0),this.trackedState_=s.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},s.utils.object.inherits(s.RenderedConnection,s.Connection),s.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},s.RenderedConnection.prototype.dispose=function(){s.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==s.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},s.RenderedConnection.prototype.getSourceBlock=function(){return s.RenderedConnection.superClass_.getSourceBlock.call(this)},s.RenderedConnection.prototype.targetBlock=function(){return s.RenderedConnection.superClass_.targetBlock.call(this)},s.RenderedConnection.prototype.distanceFrom=function(o){var l=this.x-o.x;return o=this.y-o.y,Math.sqrt(l*l+o*o)},s.RenderedConnection.prototype.bumpAwayFrom=function(o){if(!this.sourceBlock_.workspace.isDragging()){var l=this.sourceBlock_.getRootBlock();if(!l.isInFlyout){var u=!1;if(!l.isMovable()){if(!(l=o.getSourceBlock().getRootBlock()).isMovable())return;o=this,u=!0}var h=s.selected==l;h||l.addSelect();var _=o.x+s.SNAP_RADIUS+Math.floor(Math.random()*s.BUMP_RANDOMNESS)-this.x,b=o.y+s.SNAP_RADIUS+Math.floor(Math.random()*s.BUMP_RANDOMNESS)-this.y;u&&(b=-b),l.RTL&&(_=o.x-s.SNAP_RADIUS-Math.floor(Math.random()*s.BUMP_RANDOMNESS)-this.x),l.moveBy(_,b),h||l.removeSelect()}}},s.RenderedConnection.prototype.moveTo=function(o,l){this.trackedState_==s.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,l),this.trackedState_=s.RenderedConnection.TrackedState.TRACKED):this.trackedState_==s.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,l)),this.x=o,this.y=l},s.RenderedConnection.prototype.moveBy=function(o,l){this.moveTo(this.x+o,this.y+l)},s.RenderedConnection.prototype.moveToOffset=function(o){this.moveTo(o.x+this.offsetInBlock_.x,o.y+this.offsetInBlock_.y)},s.RenderedConnection.prototype.setOffsetInBlock=function(o,l){this.offsetInBlock_.x=o,this.offsetInBlock_.y=l},s.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},s.RenderedConnection.prototype.tighten=function(){var o=this.targetConnection.x-this.x,l=this.targetConnection.y-this.y;if(0!=o||0!=l){var u=this.targetBlock(),h=u.getSvgRoot();if(!h)throw Error("block is not rendered.");h=s.utils.getRelativeXY(h),u.getSvgRoot().setAttribute("transform","translate("+(h.x-o)+","+(h.y-l)+")"),u.moveConnections(-o,-l)}},s.RenderedConnection.prototype.closest=function(o,l){return this.dbOpposite_.searchForClosest(this,o,l)},s.RenderedConnection.prototype.highlight=function(){var o=this.sourceBlock_.workspace.getRenderer().getConstants(),l=o.shapeFor(this);l=this.type==s.connectionTypes.INPUT_VALUE||this.type==s.connectionTypes.OUTPUT_VALUE?s.utils.svgPaths.moveBy(0,-(o=o.TAB_OFFSET_FROM_TOP))+s.utils.svgPaths.lineOnAxis("v",o)+l.pathDown+s.utils.svgPaths.lineOnAxis("v",o):s.utils.svgPaths.moveBy(-(o=o.NOTCH_OFFSET_LEFT-o.CORNER_RADIUS),0)+s.utils.svgPaths.lineOnAxis("h",o)+l.pathLeft+s.utils.svgPaths.lineOnAxis("h",o),o=this.sourceBlock_.getRelativeToSurfaceXY(),s.Connection.highlightedPath_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:l,transform:"translate("+(this.x-o.x)+","+(this.y-o.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},s.RenderedConnection.prototype.unhighlight=function(){s.utils.dom.removeNode(s.Connection.highlightedPath_),delete s.Connection.highlightedPath_},s.RenderedConnection.prototype.setTracking=function(o){o&&this.trackedState_==s.RenderedConnection.TrackedState.TRACKED||!o&&this.trackedState_==s.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(o?(this.db_.addConnection(this,this.y),this.trackedState_=s.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==s.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=s.RenderedConnection.TrackedState.UNTRACKED))},s.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var o=this.targetBlock().getDescendants(!1),l=0;l<o.length;l++){for(var u=o[l],h=u.getConnections_(!0),_=0;_<h.length;_++)h[_].setTracking(!1);for(u=u.getIcons(),_=0;_<u.length;_++)u[_].setVisible(!1)}},s.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var o=[];if(this.type!=s.connectionTypes.INPUT_VALUE&&this.type!=s.connectionTypes.NEXT_STATEMENT)return o;var l=this.targetBlock();if(l){if(l.isCollapsed()){var u=[];l.outputConnection&&u.push(l.outputConnection),l.nextConnection&&u.push(l.nextConnection),l.previousConnection&&u.push(l.previousConnection)}else u=l.getConnections_(!0);for(var h=0;h<u.length;h++)o.push.apply(o,u[h].startTrackingAll());o.length||(o[0]=l)}return o},s.RenderedConnection.prototype.isConnectionAllowed=function(o,l){return s.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(o)>l)&&s.RenderedConnection.superClass_.isConnectionAllowed.call(this,o)},s.RenderedConnection.prototype.onFailedConnect=function(o){var l=this.getSourceBlock();if(s.Events.recordUndo){var u=s.Events.getGroup();setTimeout(function(){l.isDisposed()||l.getParent()||(s.Events.setGroup(u),this.bumpAwayFrom(o),s.Events.setGroup(!1))}.bind(this),s.BUMP_DELAY)}},s.RenderedConnection.prototype.disconnectInternal_=function(o,l){s.RenderedConnection.superClass_.disconnectInternal_.call(this,o,l),o.rendered&&o.render(),l.rendered&&(l.updateDisabled(),l.render(),l.getSvgRoot().style.display="block")},s.RenderedConnection.prototype.respawnShadow_=function(){s.RenderedConnection.superClass_.respawnShadow_.call(this);var o=this.targetBlock();o&&(o.initSvg(),o.render(!1),(o=this.getSourceBlock()).rendered&&o.render())},s.RenderedConnection.prototype.neighbours=function(o){return this.dbOpposite_.getNeighbours(this,o)},s.RenderedConnection.prototype.connect_=function(o){s.RenderedConnection.superClass_.connect_.call(this,o);var l=this.getSourceBlock();o=o.getSourceBlock();var u=l.rendered,h=o.rendered;u&&l.updateDisabled(),h&&o.updateDisabled(),u&&h&&(this.type==s.connectionTypes.NEXT_STATEMENT||this.type==s.connectionTypes.PREVIOUS_STATEMENT?o.render():l.render()),(l=l.getInputWithBlock(o))&&(l=l.isVisible(),o.getSvgRoot().style.display=l?"block":"none")},s.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},s.BasicCursor=function(){s.BasicCursor.superClass_.constructor.call(this)},s.utils.object.inherits(s.BasicCursor,s.Cursor),s.BasicCursor.registrationName="basicCursor",s.BasicCursor.prototype.next=function(){var o=this.getCurNode();return o?((o=this.getNextNode_(o,this.validNode_))&&this.setCurNode(o),o):null},s.BasicCursor.prototype.in=function(){return this.next()},s.BasicCursor.prototype.prev=function(){var o=this.getCurNode();return o?((o=this.getPreviousNode_(o,this.validNode_))&&this.setCurNode(o),o):null},s.BasicCursor.prototype.out=function(){return this.prev()},s.BasicCursor.prototype.getNextNode_=function(o,l){if(!o)return null;var u=o.in()||o.next();return l(u)?u:u?this.getNextNode_(u,l):l(o=this.findSiblingOrParent_(o.out()))?o:o?this.getNextNode_(o,l):null},s.BasicCursor.prototype.getPreviousNode_=function(o,l){if(!o)return null;var u=o.prev();return l(u=u?this.getRightMostChild_(u):o.out())?u:u?this.getPreviousNode_(u,l):null},s.BasicCursor.prototype.validNode_=function(o){var l=!1;return((o=o&&o.getType())==s.ASTNode.types.OUTPUT||o==s.ASTNode.types.INPUT||o==s.ASTNode.types.FIELD||o==s.ASTNode.types.NEXT||o==s.ASTNode.types.PREVIOUS||o==s.ASTNode.types.WORKSPACE)&&(l=!0),l},s.BasicCursor.prototype.findSiblingOrParent_=function(o){return o?o.next()||this.findSiblingOrParent_(o.out()):null},s.BasicCursor.prototype.getRightMostChild_=function(o){if(!o.in())return o;for(o=o.in();o.next();)o=o.next();return this.getRightMostChild_(o)},s.registry.register(s.registry.Type.CURSOR,s.BasicCursor.registrationName,s.BasicCursor),s.TabNavigateCursor=function(){s.TabNavigateCursor.superClass_.constructor.call(this)},s.utils.object.inherits(s.TabNavigateCursor,s.BasicCursor),s.TabNavigateCursor.prototype.validNode_=function(o){var l=!1,u=o&&o.getType();return o&&(o=o.getLocation(),u==s.ASTNode.types.FIELD&&o&&o.isTabNavigable()&&o.isClickable()&&(l=!0)),l},s.BlockSvg=function(o,l,u){this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=o.getRenderer().getConstants().getBlockStyle(null),this.pathObject=o.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=o,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=s.utils.is3dSupported()&&!!o.getBlockDragSurface();var h=this.pathObject.svgPath;h.tooltip=this,s.Tooltip.bindMouseEvents(h),s.BlockSvg.superClass_.constructor.call(this,o,l,u),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:s.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},s.utils.object.inherits(s.BlockSvg,s.Block),s.BlockSvg.prototype.height=0,s.BlockSvg.prototype.width=0,s.BlockSvg.prototype.warningTextDb_=null,s.BlockSvg.INLINE=-1,s.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",s.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var l,o=0;l=this.inputList[o];o++)l.init();for(l=this.getIcons(),o=0;o<l.length;o++)l[o].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),o=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!o||s.browserEvents.conditionalBind(o,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,o.parentNode||this.workspace.getCanvas().appendChild(o)},s.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},s.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},s.BlockSvg.prototype.getColourShadow=function(){return s.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},s.BlockSvg.prototype.getColourBorder=function(){return s.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},s.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(s.selected!=this){var o=null;if(s.selected){o=s.selected.id,s.Events.disable();try{s.selected.unselect()}finally{s.Events.enable()}}o=new(s.Events.get(s.Events.SELECTED))(o,this.id,this.workspace.id),s.Events.fire(o),s.selected=this,this.addSelect()}},s.BlockSvg.prototype.unselect=function(){if(s.selected==this){var o=new(s.Events.get(s.Events.SELECTED))(this.id,null,this.workspace.id);o.workspaceId=this.workspace.id,s.Events.fire(o),s.selected=null,this.removeSelect()}},s.BlockSvg.prototype.mutator=null,s.BlockSvg.prototype.comment=null,s.BlockSvg.prototype.commentIcon_=null,s.BlockSvg.prototype.warning=null,s.BlockSvg.prototype.getIcons=function(){var o=[];return this.mutator&&o.push(this.mutator),this.commentIcon_&&o.push(this.commentIcon_),this.warning&&o.push(this.warning),o},s.BlockSvg.prototype.setParent=function(o){var l=this.parentBlock_;if(o!=l){s.utils.dom.startTextWidthCache(),s.BlockSvg.superClass_.setParent.call(this,o),s.utils.dom.stopTextWidthCache();var u=this.getSvgRoot();if(!this.workspace.isClearing&&u){var h=this.getRelativeToSurfaceXY();o?(o.getSvgRoot().appendChild(u),o=this.getRelativeToSurfaceXY(),this.moveConnections(o.x-h.x,o.y-h.y)):l&&(this.workspace.getCanvas().appendChild(u),this.translate(h.x,h.y)),this.applyColour()}}},s.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var o=0,l=0,u=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,h=this.getSvgRoot();if(h)do{var _=s.utils.getRelativeXY(h);o+=_.x,l+=_.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==h&&(o+=(_=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,l+=_.y),h=h.parentNode}while(h&&h!=this.workspace.getCanvas()&&h!=u);return new s.utils.Coordinate(o,l)},s.BlockSvg.prototype.moveBy=function(o,l){if(this.parentBlock_)throw Error("Block has parent.");var u=s.Events.isEnabled();if(u)var h=new(s.Events.get(s.Events.BLOCK_MOVE))(this);var _=this.getRelativeToSurfaceXY();this.translate(_.x+o,_.y+l),this.moveConnections(o,l),u&&(h.recordNew(),s.Events.fire(h)),this.workspace.resizeContents()},s.BlockSvg.prototype.translate=function(o,l){this.getSvgRoot().setAttribute("transform","translate("+o+","+l+")")},s.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var o=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(o.x,o.y),(o=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(o)}},s.BlockSvg.prototype.moveTo=function(o){var l=this.getRelativeToSurfaceXY();this.moveBy(o.x-l.x,o.y-l.y)},s.BlockSvg.prototype.moveOffDragSurface=function(o){this.useDragSurface_&&(this.translate(o.x,o.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},s.BlockSvg.prototype.moveDuringDrag=function(o){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(o.x,o.y):(this.svgGroup_.translate_="translate("+o.x+","+o.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},s.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},s.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var o=this.workspace.getGrid();if(o&&o.shouldSnap()){var l=o.getSpacing(),u=l/2,h=this.getRelativeToSurfaceXY();o=Math.round((h.x-u)/l)*l+u-h.x,l=Math.round((h.y-u)/l)*l+u-h.y,o=Math.round(o),l=Math.round(l),0==o&&0==l||this.moveBy(o,l)}}},s.BlockSvg.prototype.getBoundingRectangle=function(){var o=this.getRelativeToSurfaceXY(),l=this.getHeightWidth();if(this.RTL)var u=o.x-l.width,h=o.x;else u=o.x,h=o.x+l.width;return new s.utils.Rect(o.y,o.y+l.height,u,h)},s.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var l,o=0;l=this.inputList[o];o++)l.markDirty()},s.BlockSvg.prototype.setCollapsed=function(o){this.collapsed_!=o&&(s.BlockSvg.superClass_.setCollapsed.call(this,o),o?this.rendered&&this.render():this.updateCollapsed_())},s.BlockSvg.prototype.updateCollapsed_=function(){for(var _,o=this.isCollapsed(),l=s.constants.COLLAPSED_INPUT_NAME,u=s.constants.COLLAPSED_FIELD_NAME,h=0;_=this.inputList[h];h++)_.name!=l&&_.setVisible(!o);if(o){for(_=this.getIcons(),h=0;o=_[h];h++)o.setVisible(!1);h=this.toString(s.COLLAPSE_CHARS),(_=this.getField(u))?_.setValue(h):(_=this.getInput(l)||this.appendDummyInput(l)).appendField(new s.FieldLabel(h),u)}else this.updateDisabled(),this.removeInput(l)},s.BlockSvg.prototype.tab=function(o,l){var u=new s.TabNavigateCursor;u.setCurNode(s.ASTNode.createFieldNode(o)),o=u.getCurNode(),l?u.next():u.prev(),(l=u.getCurNode())&&l!==o&&(l.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(l))},s.BlockSvg.prototype.onMouseDown_=function(o){var l=this.workspace&&this.workspace.getGesture(o);l&&l.handleBlockStart(o,this)},s.BlockSvg.prototype.showHelp=function(){var o="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;o&&window.open(o)},s.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var o=s.ContextMenuRegistry.registry.getContextMenuOptions(s.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(o),o},s.BlockSvg.prototype.showContextMenu=function(o){var l=this.generateContextMenu();l&&l.length&&(s.ContextMenu.show(o,l,this.RTL),s.ContextMenu.currentBlock=this)},s.BlockSvg.prototype.moveConnections=function(o,l){if(this.rendered){for(var u=this.getConnections_(!1),h=0;h<u.length;h++)u[h].moveBy(o,l);for(u=this.getIcons(),h=0;h<u.length;h++)u[h].computeIconLocation();for(h=0;h<this.childBlocks_.length;h++)this.childBlocks_[h].moveConnections(o,l)}},s.BlockSvg.prototype.setDragging=function(o){if(o){var l=this.getSvgRoot();l.translate_="",l.skew_="",s.draggingConnections=s.draggingConnections.concat(this.getConnections_(!0)),s.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else s.draggingConnections=[],s.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(l=0;l<this.childBlocks_.length;l++)this.childBlocks_[l].setDragging(o)},s.BlockSvg.prototype.setMovable=function(o){s.BlockSvg.superClass_.setMovable.call(this,o),this.pathObject.updateMovable(o)},s.BlockSvg.prototype.setEditable=function(o){s.BlockSvg.superClass_.setEditable.call(this,o),o=this.getIcons();for(var l=0;l<o.length;l++)o[l].updateEditable()},s.BlockSvg.prototype.setShadow=function(o){s.BlockSvg.superClass_.setShadow.call(this,o),this.applyColour()},s.BlockSvg.prototype.setInsertionMarker=function(o){this.isInsertionMarker_!=o&&(this.isInsertionMarker_=o)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},s.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},s.BlockSvg.prototype.dispose=function(o,l){if(this.workspace){s.Tooltip.dispose(),s.Tooltip.unbindMouseEvents(this.pathObject.svgPath),s.utils.dom.startTextWidthCache();var u=this.workspace;if(s.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),s.ContextMenu.currentBlock==this&&s.ContextMenu.hide(),l&&this.rendered&&(this.unplug(o),s.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var h in this.warningTextDb_)clearTimeout(this.warningTextDb_[h]);this.warningTextDb_=null}for(l=this.getIcons(),h=0;h<l.length;h++)l[h].dispose();s.BlockSvg.superClass_.dispose.call(this,!!o),s.utils.dom.removeNode(this.svgGroup_),u.resizeContents(),this.svgGroup_=null,s.utils.dom.stopTextWidthCache()}},s.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var o=s.Xml.blockToDom(this,!0);s.Xml.deleteNext(o);var l=this.getRelativeToSurfaceXY();return o.setAttribute("x",this.RTL?-l.x:l.x),o.setAttribute("y",l.y),{xml:o,source:this.workspace,typeCounts:s.utils.getBlockTypeCounts(this,!0)}},s.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var o=this.getIcons(),l=0;l<o.length;l++)o[l].applyColour();for(o=0;l=this.inputList[o];o++)for(var h,u=0;h=l.fieldRow[u];u++)h.applyColour()},s.BlockSvg.prototype.updateDisabled=function(){var o=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var u,l=0;u=o[l];l++)u.rendered&&u.updateDisabled()},s.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},s.BlockSvg.prototype.setCommentText=function(o){if(!s.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=o&&(s.BlockSvg.superClass_.setCommentText.call(this,o),!!this.commentIcon_==(o=null!=o)?this.commentIcon_.updateText():(o?this.comment=this.commentIcon_=new s.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},s.BlockSvg.prototype.setWarningText=function(o,l){if(!s.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var u=l||"";if(u)this.warningTextDb_[u]&&(clearTimeout(this.warningTextDb_[u]),delete this.warningTextDb_[u]);else for(var h in this.warningTextDb_)clearTimeout(this.warningTextDb_[h]),delete this.warningTextDb_[h];if(this.workspace.isDragging()){var _=this;this.warningTextDb_[u]=setTimeout(function(){_.workspace&&(delete _.warningTextDb_[u],_.setWarningText(o,u))},100)}else{if(this.isInFlyout&&(o=null),l=!1,"string"==typeof o){h=this.getSurroundParent();for(var b=null;h;)h.isCollapsed()&&(b=h),h=h.getSurroundParent();b&&b.setWarningText(s.Msg.COLLAPSED_WARNINGS_WARNING,s.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new s.Warning(this),l=!0),this.warning.setText(o,u)}else this.warning&&!u?(this.warning.dispose(),l=!0):this.warning&&(l=this.warning.getText(),this.warning.setText("",u),(h=this.warning.getText())||this.warning.dispose(),l=l!=h);l&&this.rendered&&(this.render(),this.bumpNeighbours())}},s.BlockSvg.prototype.setMutator=function(o){this.mutator&&this.mutator!==o&&this.mutator.dispose(),o&&(o.setBlock(this),this.mutator=o,o.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setEnabled=function(o){this.isEnabled()!=o&&(s.BlockSvg.superClass_.setEnabled.call(this,o),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},s.BlockSvg.prototype.setHighlighted=function(o){this.rendered&&this.pathObject.updateHighlighted(o)},s.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},s.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},s.BlockSvg.prototype.setDeleteStyle=function(o){this.pathObject.updateDraggingDelete(o)},s.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},s.BlockSvg.prototype.setColour=function(o){s.BlockSvg.superClass_.setColour.call(this,o),o=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(o.style),this.style=o.style,this.styleName_=o.name,this.applyColour()},s.BlockSvg.prototype.setStyle=function(o){var l=this.workspace.getRenderer().getConstants().getBlockStyle(o);if(this.styleName_=o,!l)throw Error("Invalid style name: "+o);this.hat=l.hat,this.pathObject.setStyle(l),this.colour_=l.colourPrimary,this.style=l,this.applyColour()},s.BlockSvg.prototype.bringToFront=function(){var o=this;do{var l=o.getSvgRoot(),u=l.parentNode,h=u.childNodes;h[h.length-1]!==l&&u.appendChild(l),o=o.getParent()}while(o)},s.BlockSvg.prototype.setPreviousStatement=function(o,l){s.BlockSvg.superClass_.setPreviousStatement.call(this,o,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setNextStatement=function(o,l){s.BlockSvg.superClass_.setNextStatement.call(this,o,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setOutput=function(o,l){s.BlockSvg.superClass_.setOutput.call(this,o,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.setInputsInline=function(o){s.BlockSvg.superClass_.setInputsInline.call(this,o),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.removeInput=function(o,l){return o=s.BlockSvg.superClass_.removeInput.call(this,o,l),this.rendered&&(this.render(),this.bumpNeighbours()),o},s.BlockSvg.prototype.moveNumberedInputBefore=function(o,l){s.BlockSvg.superClass_.moveNumberedInputBefore.call(this,o,l),this.rendered&&(this.render(),this.bumpNeighbours())},s.BlockSvg.prototype.appendInput_=function(o,l){return o=s.BlockSvg.superClass_.appendInput_.call(this,o,l),this.rendered&&(this.render(),this.bumpNeighbours()),o},s.BlockSvg.prototype.setConnectionTracking=function(o){if(this.previousConnection&&this.previousConnection.setTracking(o),this.outputConnection&&this.outputConnection.setTracking(o),this.nextConnection){this.nextConnection.setTracking(o);var l=this.nextConnection.targetBlock();l&&l.setConnectionTracking(o)}if(!this.collapsed_)for(l=0;l<this.inputList.length;l++){var u=this.inputList[l].connection;u&&(u.setTracking(o),(u=u.targetBlock())&&u.setConnectionTracking(o))}},s.BlockSvg.prototype.getConnections_=function(o){var l=[];if((o||this.rendered)&&(this.outputConnection&&l.push(this.outputConnection),this.previousConnection&&l.push(this.previousConnection),this.nextConnection&&l.push(this.nextConnection),o||!this.collapsed_)){o=0;for(var u;u=this.inputList[o];o++)u.connection&&l.push(u.connection)}return l},s.BlockSvg.prototype.lastConnectionInStack=function(o){return s.BlockSvg.superClass_.lastConnectionInStack.call(this,o)},s.BlockSvg.prototype.getMatchingConnection=function(o,l){return s.BlockSvg.superClass_.getMatchingConnection.call(this,o,l)},s.BlockSvg.prototype.makeConnection_=function(o){return new s.RenderedConnection(this,o)},s.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var o=this.getRootBlock();if(!o.isInFlyout)for(var h,l=this.getConnections_(!1),u=0;h=l[u];u++){h.isConnected()&&h.isSuperior()&&h.targetBlock().bumpNeighbours();for(var D,_=h.neighbours(s.SNAP_RADIUS),b=0;D=_[b];b++)h.isConnected()&&D.isConnected()||D.getSourceBlock().getRootBlock()!=o&&(h.isSuperior()?D.bumpAwayFrom(h):h.bumpAwayFrom(D))}}},s.BlockSvg.prototype.scheduleSnapAndBump=function(){var o=this,l=s.Events.getGroup();setTimeout(function(){s.Events.setGroup(l),o.snapToGrid(),s.Events.setGroup(!1)},s.BUMP_DELAY/2),setTimeout(function(){s.Events.setGroup(l),o.bumpNeighbours(),s.Events.setGroup(!1)},s.BUMP_DELAY)},s.BlockSvg.prototype.positionNearConnection=function(o,l){o.type!=s.connectionTypes.NEXT_STATEMENT&&o.type!=s.connectionTypes.INPUT_VALUE||this.moveBy(l.x-o.x,l.y-o.y)},s.BlockSvg.prototype.getParent=function(){return s.BlockSvg.superClass_.getParent.call(this)},s.BlockSvg.prototype.getRootBlock=function(){return s.BlockSvg.superClass_.getRootBlock.call(this)},s.BlockSvg.prototype.render=function(o){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,s.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==o){var l=this.getParent();l?l.render(!0):this.workspace.resizeContents()}s.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},s.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(s.MarkerManager.LOCAL_MARKER).draw()},s.BlockSvg.prototype.updateConnectionLocations_=function(){var o=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(o),this.outputConnection&&this.outputConnection.moveToOffset(o);for(var l=0;l<this.inputList.length;l++){var u=this.inputList[l].connection;u&&(u.moveToOffset(o),u.isConnected()&&u.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(o),this.nextConnection.isConnected()&&this.nextConnection.tighten())},s.BlockSvg.prototype.setCursorSvg=function(o){this.pathObject.setCursorSvg(o)},s.BlockSvg.prototype.setMarkerSvg=function(o){this.pathObject.setMarkerSvg(o)},s.BlockSvg.prototype.getHeightWidth=function(){var o=this.height,l=this.width,u=this.getNextBlock();if(u){u=u.getHeightWidth();var h=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;o+=u.height-h,l=Math.max(l,u.width)}return{height:o,width:l}},s.BlockSvg.prototype.fadeForReplacement=function(o){this.pathObject.updateReplacementFade(o)},s.BlockSvg.prototype.highlightShapeForInput=function(o,l){this.pathObject.updateShapeForInputHighlight(o,l)},s.ConnectionDB=function(o){this.connections_=[],this.connectionChecker_=o},s.ConnectionDB.prototype.addConnection=function(o,l){l=this.calculateIndexForYPos_(l),this.connections_.splice(l,0,o)},s.ConnectionDB.prototype.findIndexOfConnection_=function(o,l){if(!this.connections_.length)return-1;var u=this.calculateIndexForYPos_(l);if(u>=this.connections_.length)return-1;l=o.y;for(var h=u;0<=h&&this.connections_[h].y==l;){if(this.connections_[h]==o)return h;h--}for(h=u;h<this.connections_.length&&this.connections_[h].y==l;){if(this.connections_[h]==o)return h;h++}return-1},s.ConnectionDB.prototype.calculateIndexForYPos_=function(o){if(!this.connections_.length)return 0;for(var l=0,u=this.connections_.length;l<u;){var h=Math.floor((l+u)/2);if(this.connections_[h].y<o)l=h+1;else{if(!(this.connections_[h].y>o)){l=h;break}u=h}}return l},s.ConnectionDB.prototype.removeConnection=function(o,l){if(-1==(o=this.findIndexOfConnection_(o,l)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(o,1)},s.ConnectionDB.prototype.getNeighbours=function(o,l){function u(j){var F=_-h[j].x,q=b-h[j].y;return Math.sqrt(F*F+q*q)<=l&&G.push(h[j]),q<l}var h=this.connections_,_=o.x,b=o.y;o=0;for(var D=h.length-2,x=D;o<x;)h[x].y<b?o=x:D=x,x=Math.floor((o+D)/2);var G=[];if(D=o=x,h.length){for(;0<=o&&u(o);)o--;do{D++}while(D<h.length&&u(D))}return G},s.ConnectionDB.prototype.isInYRange_=function(o,l,u){return Math.abs(this.connections_[o].y-l)<=u},s.ConnectionDB.prototype.searchForClosest=function(o,l,u){if(!this.connections_.length)return{connection:null,radius:l};var h=o.y,_=o.x;o.x=_+u.x,o.y=h+u.y;var b=this.calculateIndexForYPos_(o.y);u=null;for(var x,D=l,G=b-1;0<=G&&this.isInYRange_(G,o.y,l);)this.connectionChecker_.canConnect(o,x=this.connections_[G],!0,D)&&(u=x,D=x.distanceFrom(o)),G--;for(;b<this.connections_.length&&this.isInYRange_(b,o.y,l);)this.connectionChecker_.canConnect(o,x=this.connections_[b],!0,D)&&(u=x,D=x.distanceFrom(o)),b++;return o.x=_,o.y=h,{connection:u,radius:D}},s.ConnectionDB.init=function(o){var l=[];return l[s.connectionTypes.INPUT_VALUE]=new s.ConnectionDB(o),l[s.connectionTypes.OUTPUT_VALUE]=new s.ConnectionDB(o),l[s.connectionTypes.NEXT_STATEMENT]=new s.ConnectionDB(o),l[s.connectionTypes.PREVIOUS_STATEMENT]=new s.ConnectionDB(o),l},s.Events.ThemeChange=function(o,l){s.Events.ThemeChange.superClass_.constructor.call(this,l),this.themeName=o},s.utils.object.inherits(s.Events.ThemeChange,s.Events.UiBase),s.Events.ThemeChange.prototype.type=s.Events.THEME_CHANGE,s.Events.ThemeChange.prototype.toJson=function(){var o=s.Events.ThemeChange.superClass_.toJson.call(this);return o.themeName=this.themeName,o},s.Events.ThemeChange.prototype.fromJson=function(o){s.Events.ThemeChange.superClass_.fromJson.call(this,o),this.themeName=o.themeName},s.registry.register(s.registry.Type.EVENT,s.Events.THEME_CHANGE,s.Events.ThemeChange),s.Events.ViewportChange=function(o,l,u,h,_){s.Events.ViewportChange.superClass_.constructor.call(this,h),this.viewTop=o,this.viewLeft=l,this.scale=u,this.oldScale=_},s.utils.object.inherits(s.Events.ViewportChange,s.Events.UiBase),s.Events.ViewportChange.prototype.type=s.Events.VIEWPORT_CHANGE,s.Events.ViewportChange.prototype.toJson=function(){var o=s.Events.ViewportChange.superClass_.toJson.call(this);return o.viewTop=this.viewTop,o.viewLeft=this.viewLeft,o.scale=this.scale,o.oldScale=this.oldScale,o},s.Events.ViewportChange.prototype.fromJson=function(o){s.Events.ViewportChange.superClass_.fromJson.call(this,o),this.viewTop=o.viewTop,this.viewLeft=o.viewLeft,this.scale=o.scale,this.oldScale=o.oldScale},s.registry.register(s.registry.Type.EVENT,s.Events.VIEWPORT_CHANGE,s.Events.ViewportChange),s.IMetricsManager=function(){},s.MetricsManager=function(o){this.workspace_=o},s.MetricsManager.prototype.getDimensionsPx_=function(o){var l=0,u=0;return o&&(l=o.getWidth(),u=o.getHeight()),new s.utils.Size(l,u)},s.MetricsManager.prototype.getFlyoutMetrics=function(o){return{width:(o=this.getDimensionsPx_(this.workspace_.getFlyout(o))).width,height:o.height,position:this.workspace_.toolboxPosition}},s.MetricsManager.prototype.getToolboxMetrics=function(){var o=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:o.width,height:o.height,position:this.workspace_.toolboxPosition}},s.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},s.MetricsManager.prototype.getAbsoluteMetrics=function(){var o=0,l=this.getToolboxMetrics(),u=this.getFlyoutMetrics(!0),h=!!this.workspace_.getToolbox(),_=!!this.workspace_.getFlyout(!0),b=h?l.position:u.position,D=b==s.utils.toolbox.Position.LEFT;return b=b==s.utils.toolbox.Position.TOP,h&&D?o=l.width:_&&D&&(o=u.width),D=0,h&&b?D=l.height:_&&b&&(D=u.height),{top:D,left:o}},s.MetricsManager.prototype.getViewMetrics=function(o){o=o?this.workspace_.scale:1;var l=this.getSvgMetrics(),u=this.getToolboxMetrics(),h=this.getFlyoutMetrics(!0),_=this.workspace_.getToolbox()?u.position:h.position;return this.workspace_.getToolbox()?_==s.utils.toolbox.Position.TOP||_==s.utils.toolbox.Position.BOTTOM?l.height-=u.height:(_==s.utils.toolbox.Position.LEFT||_==s.utils.toolbox.Position.RIGHT)&&(l.width-=u.width):this.workspace_.getFlyout(!0)&&(_==s.utils.toolbox.Position.TOP||_==s.utils.toolbox.Position.BOTTOM?l.height-=h.height:(_==s.utils.toolbox.Position.LEFT||_==s.utils.toolbox.Position.RIGHT)&&(l.width-=h.width)),{height:l.height/o,width:l.width/o,top:-this.workspace_.scrollY/o,left:-this.workspace_.scrollX/o}},s.MetricsManager.prototype.getContentMetrics=function(o){o=o?1:this.workspace_.scale;var l=this.workspace_.getBlocksBoundingBox();return{height:(l.bottom-l.top)*o,width:(l.right-l.left)*o,top:l.top*o,left:l.left*o}},s.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},s.MetricsManager.prototype.getComputedFixedEdges_=function(o){if(!this.hasFixedEdges())return{};var l=this.workspace_.isMovableHorizontally(),u=this.workspace_.isMovableVertically();o=o||this.getViewMetrics(!1);var h={};return u||(h.top=o.top,h.bottom=o.top+o.height),l||(h.left=o.left,h.right=o.left+o.width),h},s.MetricsManager.prototype.getPaddedContent_=function(o,l){var u=l.top+l.height,h=l.left+l.width,_=o.width,b=_/2,D=(o=o.height)/2;return{top:Math.min(l.top-D,u-o),bottom:Math.max(u+D,l.top+o),left:Math.min(l.left-b,h-_),right:Math.max(h+b,l.left+_)}},s.MetricsManager.prototype.getScrollMetrics=function(o,l,u){o=o?this.workspace_.scale:1,l=l||this.getViewMetrics(!1);var h=u||this.getContentMetrics();u=this.getComputedFixedEdges_(l),l=this.getPaddedContent_(l,h);var _=void 0!==u.left?u.left:l.left;return{top:(h=void 0!==u.top?u.top:l.top)/o,left:_/o,width:((void 0!==u.right?u.right:l.right)-_)/o,height:((void 0!==u.bottom?u.bottom:l.bottom)-h)/o}},s.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},s.MetricsManager.prototype.getMetrics=function(){var o=this.getToolboxMetrics(),l=this.getFlyoutMetrics(!0),u=this.getSvgMetrics(),h=this.getAbsoluteMetrics(),_=this.getViewMetrics(),b=this.getContentMetrics(),D=this.getScrollMetrics(!1,_,b);return{contentHeight:b.height,contentWidth:b.width,contentTop:b.top,contentLeft:b.left,scrollHeight:D.height,scrollWidth:D.width,scrollTop:D.top,scrollLeft:D.left,viewHeight:_.height,viewWidth:_.width,viewTop:_.top,viewLeft:_.left,absoluteTop:h.top,absoluteLeft:h.left,svgHeight:u.height,svgWidth:u.width,toolboxWidth:o.width,toolboxHeight:o.height,toolboxPosition:o.position,flyoutWidth:l.width,flyoutHeight:l.height}},s.registry.register(s.registry.Type.METRICS_MANAGER,s.registry.DEFAULT,s.MetricsManager),s.FlyoutMetricsManager=function(o,l){this.flyout_=l,s.FlyoutMetricsManager.superClass_.constructor.call(this,o)},s.utils.object.inherits(s.FlyoutMetricsManager,s.MetricsManager),s.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var o=this.workspace_.getCanvas().getBBox()}catch(l){o={height:0,y:0,width:0,x:0}}return o},s.FlyoutMetricsManager.prototype.getContentMetrics=function(o){var l=this.getBoundingBox_();return{height:l.height*(o=o?1:this.workspace_.scale),width:l.width*o,top:l.y*o,left:l.x*o}},s.FlyoutMetricsManager.prototype.getScrollMetrics=function(o,l,u){return{height:((l=u||this.getContentMetrics()).height+2*(u=this.flyout_.MARGIN*this.workspace_.scale))/(o=o?this.workspace_.scale:1),width:(l.width+l.left+u)/o,top:0,left:0}},s.ThemeManager=function(o,l){this.workspace_=o,this.theme_=l,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},s.ThemeManager.prototype.getTheme=function(){return this.theme_},s.ThemeManager.prototype.setTheme=function(o){var u,l=this.theme_;for(this.theme_=o,(o=this.workspace_.getInjectionDiv())&&(l&&s.utils.dom.removeClass(o,l.getClassName()),s.utils.dom.addClass(o,this.theme_.getClassName())),l=0;o=this.subscribedWorkspaces_[l];l++)o.refreshTheme();for(l=0,o=Object.keys(this.componentDB_);u=o[l];l++)for(var _,h=0;_=this.componentDB_[u][h];h++){var b=_.element;_=_.propertyName;var D=this.theme_&&this.theme_.getComponentStyle(u);b.style[_]=D||""}s.hideChaff()},s.ThemeManager.prototype.subscribeWorkspace=function(o){this.subscribedWorkspaces_.push(o)},s.ThemeManager.prototype.unsubscribeWorkspace=function(o){if(0>(o=this.subscribedWorkspaces_.indexOf(o)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(o,1)},s.ThemeManager.prototype.subscribe=function(o,l,u){this.componentDB_[l]||(this.componentDB_[l]=[]),this.componentDB_[l].push({element:o,propertyName:u}),l=this.theme_&&this.theme_.getComponentStyle(l),o.style[u]=l||""},s.ThemeManager.prototype.unsubscribe=function(o){if(o)for(var h,l=Object.keys(this.componentDB_),u=0;h=l[u];u++){for(var _=this.componentDB_[h],b=_.length-1;0<=b;b--)_[b].element===o&&_.splice(b,1);this.componentDB_[h].length||delete this.componentDB_[h]}},s.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},s.TouchGesture=function(o,l){s.TouchGesture.superClass_.constructor.call(this,o,l),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},s.utils.object.inherits(s.TouchGesture,s.Gesture),s.TouchGesture.ZOOM_IN_MULTIPLIER=5,s.TouchGesture.ZOOM_OUT_MULTIPLIER=6,s.TouchGesture.prototype.doStart=function(o){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,s.TouchGesture.superClass_.doStart.call(this,o),!this.isEnding_&&s.Touch.isTouchEvent(o)&&this.handleTouchStart(o)},s.TouchGesture.prototype.bindMouseEvents=function(o){this.onStartWrapper_=s.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=s.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=s.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),o.preventDefault(),o.stopPropagation()},s.TouchGesture.prototype.handleStart=function(o){!this.isDragging()&&s.Touch.isTouchEvent(o)&&(this.handleTouchStart(o),this.isMultiTouch()&&s.longStop_())},s.TouchGesture.prototype.handleMove=function(o){this.isDragging()?s.Touch.shouldHandleEvent(o)&&s.TouchGesture.superClass_.handleMove.call(this,o):this.isMultiTouch()?(s.Touch.isTouchEvent(o)&&this.handleTouchMove(o),s.longStop_()):s.TouchGesture.superClass_.handleMove.call(this,o)},s.TouchGesture.prototype.handleUp=function(o){s.Touch.isTouchEvent(o)&&!this.isDragging()&&this.handleTouchEnd(o),!this.isMultiTouch()||this.isDragging()?s.Touch.shouldHandleEvent(o)&&s.TouchGesture.superClass_.handleUp.call(this,o):(o.preventDefault(),o.stopPropagation(),this.dispose())},s.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},s.TouchGesture.prototype.dispose=function(){s.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&s.browserEvents.unbind(this.onStartWrapper_)},s.TouchGesture.prototype.handleTouchStart=function(o){var l=s.Touch.getTouchIdentifierFromEvent(o);this.cachedPoints_[l]=this.getTouchPoint(o),2==(l=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=s.utils.Coordinate.distance(this.cachedPoints_[l[0]],this.cachedPoints_[l[1]]),this.isMultiTouch_=!0,o.preventDefault())},s.TouchGesture.prototype.handleTouchMove=function(o){var l=s.Touch.getTouchIdentifierFromEvent(o);this.cachedPoints_[l]=this.getTouchPoint(o),l=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===l.length?this.handlePinch_(o):s.TouchGesture.superClass_.handleMove.call(this,o)},s.TouchGesture.prototype.handlePinch_=function(o){var l=Object.keys(this.cachedPoints_);if(l=s.utils.Coordinate.distance(this.cachedPoints_[l[0]],this.cachedPoints_[l[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var u=l-this.previousScale_;u=0<u?u*s.TouchGesture.ZOOM_IN_MULTIPLIER:u*s.TouchGesture.ZOOM_OUT_MULTIPLIER;var h=this.startWorkspace_,_=s.utils.mouseToSvg(o,h.getParentSvg(),h.getInverseScreenCTM());h.zoom(_.x,_.y,u)}this.previousScale_=l,o.preventDefault()},s.TouchGesture.prototype.handleTouchEnd=function(o){o=s.Touch.getTouchIdentifierFromEvent(o),this.cachedPoints_[o]&&delete this.cachedPoints_[o],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},s.TouchGesture.prototype.getTouchPoint=function(o){return this.startWorkspace_?new s.utils.Coordinate(o.pageX?o.pageX:o.changedTouches[0].pageX,o.pageY?o.pageY:o.changedTouches[0].pageY):null},s.WorkspaceAudio=function(o){this.parentWorkspace_=o,this.SOUNDS_=Object.create(null)},s.WorkspaceAudio.prototype.lastSound_=null,s.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},s.WorkspaceAudio.prototype.load=function(o,l){if(o.length){try{var u=new s.utils.global.Audio}catch(x){return}for(var h,_=0;_<o.length;_++){var b=o[_],D=b.match(/\.(\w+)$/);if(D&&u.canPlayType("audio/"+D[1])){h=new s.utils.global.Audio(b);break}}h&&h.play&&(this.SOUNDS_[l]=h)}},s.WorkspaceAudio.prototype.preload=function(){for(var o in this.SOUNDS_){var l=this.SOUNDS_[o];l.volume=.01;var u=l.play();if(void 0!==u?u.then(l.pause).catch(function(){}):l.pause(),s.utils.userAgent.IPAD||s.utils.userAgent.IPHONE)break}},s.WorkspaceAudio.prototype.play=function(o,l){var u=this.SOUNDS_[o];u?(o=new Date,null!=this.lastSound_&&o-this.lastSound_<s.SOUND_LIMIT||(this.lastSound_=o,(u=s.utils.userAgent.IPAD||s.utils.userAgent.ANDROID?u:u.cloneNode()).volume=void 0===l?1:l,u.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(o,l)},s.WorkspaceSvg=function(o,l,u){s.WorkspaceSvg.superClass_.constructor.call(this,o),this.metricsManager_=new(s.registry.getClassFromOptions(s.registry.Type.METRICS_MANAGER,o,!0))(this),this.getMetrics=o.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=o.setMetrics||s.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new s.ComponentManager,this.connectionDBList=s.ConnectionDB.init(this.connectionChecker),l&&(this.blockDragSurface_=l),u&&(this.workspaceDragSurface_=u),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&s.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new s.WorkspaceAudio(o.parentWorkspace),this.grid_=this.options.gridPattern?new s.Grid(this.options.gridPattern,o.gridOptions):null,this.markerManager_=new s.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),s.Variables&&s.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(s.VARIABLE_CATEGORY_NAME,s.Variables.flyoutCategory),s.VariablesDynamic&&s.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(s.VARIABLE_DYNAMIC_CATEGORY_NAME,s.VariablesDynamic.flyoutCategory),s.Procedures&&s.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(s.PROCEDURE_CATEGORY_NAME,s.Procedures.flyoutCategory),this.addChangeListener(s.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new s.ThemeManager(this,this.options.theme||s.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=s.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new s.utils.Size(0,0)},s.utils.object.inherits(s.WorkspaceSvg,s.Workspace),s.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,s.WorkspaceSvg.prototype.rendered=!0,s.WorkspaceSvg.prototype.isVisible_=!0,s.WorkspaceSvg.prototype.isFlyout=!1,s.WorkspaceSvg.prototype.isMutator=!1,s.WorkspaceSvg.prototype.resizesEnabled_=!0,s.WorkspaceSvg.prototype.scrollX=0,s.WorkspaceSvg.prototype.scrollY=0,s.WorkspaceSvg.prototype.startScrollX=0,s.WorkspaceSvg.prototype.startScrollY=0,s.WorkspaceSvg.prototype.dragDeltaXY_=null,s.WorkspaceSvg.prototype.scale=1,s.WorkspaceSvg.prototype.oldScale_=1,s.WorkspaceSvg.prototype.oldTop_=0,s.WorkspaceSvg.prototype.oldLeft_=0,s.WorkspaceSvg.prototype.trashcan=null,s.WorkspaceSvg.prototype.scrollbar=null,s.WorkspaceSvg.prototype.flyout_=null,s.WorkspaceSvg.prototype.toolbox_=null,s.WorkspaceSvg.prototype.currentGesture_=null,s.WorkspaceSvg.prototype.blockDragSurface_=null,s.WorkspaceSvg.prototype.workspaceDragSurface_=null,s.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,s.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,s.WorkspaceSvg.prototype.injectionDiv_=null,s.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,s.WorkspaceSvg.prototype.targetWorkspace=null,s.WorkspaceSvg.prototype.inverseScreenCTM_=null,s.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,s.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},s.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},s.WorkspaceSvg.prototype.setMetricsManager=function(o){this.metricsManager_=o,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},s.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},s.WorkspaceSvg.prototype.setCursorSvg=function(o){this.markerManager_.setCursorSvg(o)},s.WorkspaceSvg.prototype.setMarkerSvg=function(o){this.markerManager_.setMarkerSvg(o)},s.WorkspaceSvg.prototype.getMarker=function(o){return this.markerManager_?this.markerManager_.getMarker(o):null},s.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},s.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},s.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},s.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},s.WorkspaceSvg.prototype.setTheme=function(o){o||(o=s.Themes.Classic),this.themeManager_.setTheme(o)},s.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(l){return!!l.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var o=new(s.Events.get(s.Events.THEME_CHANGE))(this.getTheme().name,this.id);s.Events.fire(o)},s.WorkspaceSvg.prototype.updateBlockStyles_=function(o){for(var u,l=0;u=o[l];l++){var h=u.getStyleName();h&&(u.setStyle(h),u.mutator&&u.mutator.updateBlockStyle())}},s.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var o=this.getParentSvg().getScreenCTM();o&&(this.inverseScreenCTM_=o.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},s.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},s.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},s.WorkspaceSvg.prototype.getSvgXY=function(o){var l=0,u=0,h=1;(s.utils.dom.containsNode(this.getCanvas(),o)||s.utils.dom.containsNode(this.getBubbleCanvas(),o))&&(h=this.scale);do{var _=s.utils.getRelativeXY(o);(o==this.getCanvas()||o==this.getBubbleCanvas())&&(h=1),l+=_.x*h,u+=_.y*h,o=o.parentNode}while(o&&o!=this.getParentSvg());return new s.utils.Coordinate(l,u)},s.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var o=this.cachedParentSvgSize_;return new s.utils.Size(o.width,o.height)},s.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return s.utils.getInjectionDivXY_(this.getCanvas())},s.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var o=this.svgGroup_;o;){if(-1!=(" "+(o.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=o;break}o=o.parentNode}return this.injectionDiv_},s.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},s.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(o){this.resizeHandlerWrapper_=o},s.WorkspaceSvg.prototype.createDom=function(o){return this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyWorkspace"},null),o&&(this.svgBackground_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{height:"100%",width:"100%",class:o},this.svgGroup_),"blocklyMainBackground"==o&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(s.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),s.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(s.registry.getClassFromOptions(s.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(o=s.registry.getClassFromOptions(s.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new o),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},s.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(s.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),s.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var o=this.getParentSvg();o&&o.parentNode&&s.utils.dom.removeNode(o.parentNode)}this.resizeHandlerWrapper_&&(s.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},s.WorkspaceSvg.prototype.newBlock=function(o,l){return new s.BlockSvg(this,o,l)},s.WorkspaceSvg.prototype.addTrashcan=function(){if(!s.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new s.Trashcan(this);var o=this.trashcan.createDom();this.svgGroup_.insertBefore(o,this.svgBlockCanvas_)},s.WorkspaceSvg.prototype.addZoomControls=function(){if(!s.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new s.ZoomControls(this);var o=this.zoomControls_.createDom();this.svgGroup_.appendChild(o)},s.WorkspaceSvg.prototype.addFlyout=function(o){var l=new s.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return l.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(l):new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(l),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(o)},s.WorkspaceSvg.prototype.getFlyout=function(o){return this.flyout_||o?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},s.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},s.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},s.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},s.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var _,o=this.componentManager_.getComponents(s.ComponentManager.Capability.POSITIONABLE,!0),l=this.getMetricsManager().getUiMetrics(),u=[],h=0;_=o[h];h++)_.position(l,u),(_=_.getBoundingRectangle())&&u.push(_);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},s.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var o=s.utils.getDocumentScroll();s.utils.Coordinate.equals(this.lastRecordedPageScroll_,o)||(this.lastRecordedPageScroll_=o,this.updateScreenCalculations_())},s.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},s.WorkspaceSvg.prototype.setCachedParentSvgSize=function(o,l){var u=this.getParentSvg();o&&(this.cachedParentSvgSize_.width=o,u.cachedWidth_=o),l&&(this.cachedParentSvgSize_.height=l,u.cachedHeight_=l)},s.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},s.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var o=this.svgGroup_;o;){if("svg"==o.tagName){this.cachedParentSvg_=o;break}o=o.parentNode}return this.cachedParentSvg_},s.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(s.Events.isEnabled()){var o=this.scale,l=-this.scrollY,u=-this.scrollX;if(!(o==this.oldScale_&&1>Math.abs(l-this.oldTop_)&&1>Math.abs(u-this.oldLeft_))){var h=new(s.Events.get(s.Events.VIEWPORT_CHANGE))(l,u,o,this.id,this.oldScale_);this.oldScale_=o,this.oldTop_=l,this.oldLeft_=u,s.Events.fire(h)}}},s.WorkspaceSvg.prototype.translate=function(o,l){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(o,l);else{var u="translate("+o+","+l+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",u),this.svgBubbleCanvas_.setAttribute("transform",u)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(o,l,this.scale),this.grid_&&this.grid_.moveTo(o,l),this.maybeFireViewportChangeEvent()},s.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var o=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),this.svgBlockCanvas_.setAttribute("transform",o="translate("+o.x+","+o.y+") scale("+this.scale+")"),this.svgBubbleCanvas_.setAttribute("transform",o)}},s.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var o=this.svgBlockCanvas_.previousSibling,l=parseInt(this.getParentSvg().getAttribute("width"),10),u=parseInt(this.getParentSvg().getAttribute("height"),10),h=s.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),o,l,u,this.scale),this.workspaceDragSurface_.translateSurface(h.x,h.y)}},s.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},s.WorkspaceSvg.prototype.getWidth=function(){var o=this.getMetrics();return o?o.viewWidth/this.scale:0},s.WorkspaceSvg.prototype.setVisible=function(o){if(this.isVisible_=o,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(o),this.getFlyout()&&this.getFlyout().setContainerVisible(o),this.getParentSvg().style.display=o?"block":"none",this.toolbox_&&this.toolbox_.setVisible(o),o){for(var l=(o=this.getAllBlocks(!1)).length-1;0<=l;l--)o[l].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else s.hideChaff(!0)},s.WorkspaceSvg.prototype.render=function(){for(var o=this.getAllBlocks(!1),l=o.length-1;0<=l;l--)o[l].render(!1);if(this.currentGesture_)for(o=this.currentGesture_.getInsertionMarkers(),l=0;l<o.length;l++)o[l].render(!1);this.markerManager_.updateMarkers()},s.WorkspaceSvg.prototype.highlightBlock=function(o,l){if(void 0===l){for(var h,u=0;h=this.highlightedBlocks_[u];u++)h.setHighlighted(!1);this.highlightedBlocks_.length=0}(h=o?this.getBlockById(o):null)&&((o=void 0===l||l)?-1==this.highlightedBlocks_.indexOf(h)&&this.highlightedBlocks_.push(h):s.utils.arrayRemove(this.highlightedBlocks_,h),h.setHighlighted(o))},s.WorkspaceSvg.prototype.paste=function(o){!this.rendered||!o.tagName||o.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==o.tagName.toLowerCase()?this.pasteWorkspaceComment_(o):this.pasteBlock_(o))},s.WorkspaceSvg.prototype.pasteBlock_=function(o){s.Events.disable();try{var l=s.Xml.domToBlock(o,this),u=parseInt(o.getAttribute("x"),10),h=parseInt(o.getAttribute("y"),10);if(!isNaN(u)&&!isNaN(h)){this.RTL&&(u=-u);do{o=!1;for(var D,_=this.getAllBlocks(!1),b=0;D=_[b];b++){var x=D.getRelativeToSurfaceXY();if(1>=Math.abs(u-x.x)&&1>=Math.abs(h-x.y)){o=!0;break}}if(!o){var j,G=l.getConnections_(!1);for(b=0;j=G[b];b++)if(j.closest(s.SNAP_RADIUS,new s.utils.Coordinate(u,h)).connection){o=!0;break}}o&&(u=this.RTL?u-s.SNAP_RADIUS:u+s.SNAP_RADIUS,h+=2*s.SNAP_RADIUS)}while(o);l.moveBy(u,h)}}finally{s.Events.enable()}s.Events.isEnabled()&&!l.isShadow()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(l)),l.select()},s.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(o){s.Events.disable();try{var l=s.WorkspaceCommentSvg.fromXml(o,this),u=parseInt(o.getAttribute("x"),10),h=parseInt(o.getAttribute("y"),10);isNaN(u)||isNaN(h)||(this.RTL&&(u=-u),l.moveBy(u+50,h+50))}finally{s.Events.enable()}s.Events.isEnabled()&&s.WorkspaceComment.fireCreateEvent(l),l.select()},s.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var o=this.isFlyout?this.targetWorkspace:this;o&&!o.currentGesture_&&o.toolbox_&&o.toolbox_.getFlyout()&&o.toolbox_.refreshSelection()},s.WorkspaceSvg.prototype.renameVariableById=function(o,l){s.WorkspaceSvg.superClass_.renameVariableById.call(this,o,l),this.refreshToolboxSelection()},s.WorkspaceSvg.prototype.deleteVariableById=function(o){s.WorkspaceSvg.superClass_.deleteVariableById.call(this,o),this.refreshToolboxSelection()},s.WorkspaceSvg.prototype.createVariable=function(o,l,u){return o=s.WorkspaceSvg.superClass_.createVariable.call(this,o,l,u),this.refreshToolboxSelection(),o},s.WorkspaceSvg.prototype.recordDeleteAreas=function(){s.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},s.WorkspaceSvg.prototype.recordDragTargets=function(){var o=this.componentManager_.getComponents(s.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var u,l=0;u=o[l];l++){var h=u.getClientRect();h&&this.dragTargetAreas_.push({component:u,clientRect:h})}},s.WorkspaceSvg.prototype.getDragTarget=function(o){for(var u,l=0;u=this.dragTargetAreas_[l];l++)if(u.clientRect.contains(o.clientX,o.clientY))return u.component;return null},s.WorkspaceSvg.prototype.onMouseDown_=function(o){var l=this.getGesture(o);l&&l.handleWsStart(o,this)},s.WorkspaceSvg.prototype.startDrag=function(o,l){(o=s.utils.mouseToSvg(o,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,o.y/=this.scale,this.dragDeltaXY_=s.utils.Coordinate.difference(l,o)},s.WorkspaceSvg.prototype.moveDrag=function(o){return(o=s.utils.mouseToSvg(o,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,o.y/=this.scale,s.utils.Coordinate.sum(this.dragDeltaXY_,o)},s.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},s.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},s.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},s.WorkspaceSvg.prototype.isMovableHorizontally=function(){var o=!!this.scrollbar;return this.isMovable()&&(!o||o&&this.scrollbar.canScrollHorizontally())},s.WorkspaceSvg.prototype.isMovableVertically=function(){var o=!!this.scrollbar;return this.isMovable()&&(!o||o&&this.scrollbar.canScrollVertically())},s.WorkspaceSvg.prototype.onMouseWheel_=function(o){if(s.Gesture.inProgress())o.preventDefault(),o.stopPropagation();else{var l=this.options.zoomOptions&&this.options.zoomOptions.wheel,u=this.options.moveOptions&&this.options.moveOptions.wheel;if(l||u){var h=s.utils.getScrollDeltaPixels(o);!l||!o.ctrlKey&&u?(l=this.scrollX-h.x,u=this.scrollY-h.y,o.shiftKey&&!h.x&&(l=this.scrollX-h.y,u=this.scrollY),this.scroll(l,u)):(h=-h.y/50,l=s.utils.mouseToSvg(o,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(l.x,l.y,h)),o.preventDefault()}}},s.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var o=this.getTopBoundedElements();if(!o.length)return new s.utils.Rect(0,0,0,0);for(var l=o[0].getBoundingRectangle(),u=1;u<o.length;u++){var h=o[u];h.isInsertionMarker&&h.isInsertionMarker()||((h=h.getBoundingRectangle()).top<l.top&&(l.top=h.top),h.bottom>l.bottom&&(l.bottom=h.bottom),h.left<l.left&&(l.left=h.left),h.right>l.right&&(l.right=h.right))}return l},s.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),s.Events.setGroup(!0);for(var h,o=this.getTopBlocks(!0),l=0,u=0;h=o[u];u++)if(h.isMovable()){var _=h.getRelativeToSurfaceXY();h.moveBy(-_.x,l-_.y),h.snapToGrid(),l=h.getRelativeToSurfaceXY().y+h.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}s.Events.setGroup(!1),this.setResizesEnabled(!0)},s.WorkspaceSvg.prototype.showContextMenu=function(o){if(!this.options.readOnly&&!this.isFlyout){var l=s.ContextMenuRegistry.registry.getContextMenuOptions(s.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(l,o),s.ContextMenu.show(o,l,this.RTL)}},s.WorkspaceSvg.prototype.updateToolbox=function(o){if(o=s.utils.toolbox.convertToolboxDefToJson(o)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(s.utils.toolbox.hasCategories(o)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=o,this.toolbox_.render(o)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=o,this.flyout_.show(o)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},s.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(s.mainWorkspace=this,this.setBrowserFocus())},s.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(o){try{this.getParentSvg().parentNode.setActive()}catch(l){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},s.WorkspaceSvg.prototype.zoom=function(o,l,u){u=Math.pow(this.options.zoomOptions.scaleSpeed,u);var h=this.scale*u;if(this.scale!=h){h>this.options.zoomOptions.maxScale?u=this.options.zoomOptions.maxScale/this.scale:h<this.options.zoomOptions.minScale&&(u=this.options.zoomOptions.minScale/this.scale);var _=this.getCanvas().getCTM(),b=this.getParentSvg().createSVGPoint();b.x=o,b.y=l,b=b.matrixTransform(_.inverse()),_=_.translate((o=b.x)*(1-u),(l=b.y)*(1-u)).scale(u),this.scrollX=_.e,this.scrollY=_.f,this.setScale(h)}},s.WorkspaceSvg.prototype.zoomCenter=function(o){var l=this.getMetrics();if(this.flyout_){var u=l.svgWidth?l.svgWidth/2:0;l=l.svgHeight?l.svgHeight/2:0}else u=l.viewWidth/2+l.absoluteLeft,l=l.viewHeight/2+l.absoluteTop;this.zoom(u,l,o)},s.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var o=this.getMetrics(),l=o.viewWidth;o=o.viewHeight;var u=this.getBlocksBoundingBox(),h=u.right-u.left;if(u=u.bottom-u.top,h){this.flyout_&&(this.horizontalLayout?(o+=this.flyout_.getHeight(),u+=this.flyout_.getHeight()/this.scale):(l+=this.flyout_.getWidth(),h+=this.flyout_.getWidth()/this.scale)),l/=h,o/=u,s.Events.disable();try{this.setScale(Math.min(l,o)),this.scrollCenter()}finally{s.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},s.WorkspaceSvg.prototype.beginCanvasTransition=function(){s.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),s.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},s.WorkspaceSvg.prototype.endCanvasTransition=function(){s.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),s.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},s.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var o=this.getMetrics(),l=(o.scrollWidth-o.viewWidth)/2,u=(o.scrollHeight-o.viewHeight)/2;this.scroll(l=-l-o.scrollLeft,u=-u-o.scrollTop)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},s.WorkspaceSvg.prototype.centerOnBlock=function(o){if(this.isMovable()){if(o=o?this.getBlockById(o):null){var l=o.getRelativeToSurfaceXY(),u=o.getHeightWidth(),h=this.scale;o=(l.x+(this.RTL?-1:1)*u.width/2)*h,l=(l.y+u.height/2)*h,u=this.getMetrics(),this.scroll(-(o-u.viewWidth/2),-(l-u.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},s.WorkspaceSvg.prototype.setScale=function(o){this.options.zoomOptions.maxScale&&o>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&o<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale),this.scale=o,s.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),o=this.getMetrics(),this.scrollX-=o.absoluteLeft,this.scrollY-=o.absoluteTop,o.viewLeft+=o.absoluteLeft,o.viewTop+=o.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(o):this.scrollbar.resizeContent(o))},s.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},s.WorkspaceSvg.prototype.scroll=function(o,l){s.hideChaff(!0);var u=this.getMetrics();o=Math.min(o,-u.scrollLeft),l=Math.min(l,-u.scrollTop);var h=u.scrollTop+Math.max(0,u.scrollHeight-u.viewHeight);o=Math.max(o,-(u.scrollLeft+Math.max(0,u.scrollWidth-u.viewWidth))),l=Math.max(l,-h),this.scrollX=o,this.scrollY=l,this.scrollbar&&this.scrollbar.set(-(o+u.scrollLeft),-(l+u.scrollTop),!1),this.translate(o+=u.absoluteLeft,l+=u.absoluteTop)},s.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(o){var l=this.getMetrics();"number"==typeof o.x&&(this.scrollX=-(l.scrollLeft+(l.scrollWidth-l.viewWidth)*o.x)),"number"==typeof o.y&&(this.scrollY=-(l.scrollTop+(l.scrollHeight-l.viewHeight)*o.y)),this.translate(this.scrollX+l.absoluteLeft,this.scrollY+l.absoluteTop)},s.WorkspaceSvg.prototype.getBlockById=function(o){return s.WorkspaceSvg.superClass_.getBlockById.call(this,o)},s.WorkspaceSvg.prototype.getTopBlocks=function(o){return s.WorkspaceSvg.superClass_.getTopBlocks.call(this,o)},s.WorkspaceSvg.prototype.addTopBlock=function(o){this.addTopBoundedElement(o),s.WorkspaceSvg.superClass_.addTopBlock.call(this,o)},s.WorkspaceSvg.prototype.removeTopBlock=function(o){this.removeTopBoundedElement(o),s.WorkspaceSvg.superClass_.removeTopBlock.call(this,o)},s.WorkspaceSvg.prototype.addTopComment=function(o){this.addTopBoundedElement(o),s.WorkspaceSvg.superClass_.addTopComment.call(this,o)},s.WorkspaceSvg.prototype.removeTopComment=function(o){this.removeTopBoundedElement(o),s.WorkspaceSvg.superClass_.removeTopComment.call(this,o)},s.WorkspaceSvg.prototype.addTopBoundedElement=function(o){this.topBoundedElements_.push(o)},s.WorkspaceSvg.prototype.removeTopBoundedElement=function(o){s.utils.arrayRemove(this.topBoundedElements_,o)},s.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},s.WorkspaceSvg.prototype.setResizesEnabled=function(o){var l=!this.resizesEnabled_&&o;this.resizesEnabled_=o,l&&this.resizeContents()},s.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),s.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},s.WorkspaceSvg.prototype.registerButtonCallback=function(o,l){if("function"!=typeof l)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[o]=l},s.WorkspaceSvg.prototype.getButtonCallback=function(o){return(o=this.flyoutButtonCallbacks_[o])?o:null},s.WorkspaceSvg.prototype.removeButtonCallback=function(o){this.flyoutButtonCallbacks_[o]=null},s.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(o,l){if("function"!=typeof l)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[o]=l},s.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(o){return this.toolboxCategoryCallbacks_[o]||null},s.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(o){this.toolboxCategoryCallbacks_[o]=null},s.WorkspaceSvg.prototype.getGesture=function(o){var l="mousedown"==o.type||"touchstart"==o.type||"pointerdown"==o.type,u=this.currentGesture_;return u?l&&u.hasStarted()?(console.warn("Tried to start the same gesture twice."),u.cancel(),null):u:l?this.currentGesture_=new s.TouchGesture(o,this):null},s.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},s.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},s.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},s.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},s.inject=function(o,l){if(s.checkBlockColourConstants(),"string"==typeof o&&(o=document.getElementById(o)||document.querySelector(o)),!o||!s.utils.dom.containsNode(document,o))throw Error("Error: container is not in current document.");l=new s.Options(l||{});var u=document.createElement("div");u.className="injectionDiv",u.tabIndex=0,s.utils.aria.setState(u,s.utils.aria.State.LABEL,s.Msg.WORKSPACE_ARIA_LABEL),o.appendChild(u),o=s.createDom_(u,l);var h=new s.BlockDragSurfaceSvg(u),_=new s.WorkspaceDragSurfaceSvg(u),b=s.createMainWorkspace_(o,l,h,_);return s.init_(b),s.mainWorkspace=b,s.svgResize(b),u.addEventListener("focusin",function(){s.mainWorkspace=b}),b},s.createDom_=function(o,l){o.setAttribute("dir","LTR"),s.Css.inject(l.hasCss,l.pathToMedia),o=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},o);var u=s.utils.dom.createSvgElement(s.utils.Svg.DEFS,{},o),h=String(Math.random()).substring(2);return l.gridPattern=s.Grid.createDom(h,l.gridOptions,u),o},s.createMainWorkspace_=function(o,l,u,h){return l.parentWorkspace=null,(l=new s.WorkspaceSvg(l,u,h)).scale=(u=l.options).zoomOptions.startScale,o.appendChild(l.createDom("blocklyMainBackground")),s.utils.dom.addClass(l.getInjectionDiv(),l.getRenderer().getClassName()),s.utils.dom.addClass(l.getInjectionDiv(),l.getTheme().getClassName()),!u.hasCategories&&u.languageTree&&(h=l.addFlyout(s.utils.Svg.SVG),s.utils.dom.insertAfter(h,o)),u.hasTrashcan&&l.addTrashcan(),u.zoomOptions&&u.zoomOptions.controls&&l.addZoomControls(),l.getThemeManager().subscribe(o,"workspaceBackgroundColour","background-color"),l.translate(0,0),l.addChangeListener(s.bumpIntoBoundsHandler_(l)),s.svgResize(l),s.WidgetDiv.createDom(),s.DropDownDiv.createDom(),s.Tooltip.createDom(),l},s.extractObjectFromEvent_=function(o,l){var u=null;switch(l.type){case s.Events.BLOCK_CREATE:case s.Events.BLOCK_MOVE:(u=o.getBlockById(l.blockId))&&(u=u.getRootBlock());break;case s.Events.COMMENT_CREATE:case s.Events.COMMENT_MOVE:u=o.getCommentById(l.commentId)}return u},s.bumpTopObjectsIntoBounds_=function(o){var l=o.getMetricsManager();if(l.hasFixedEdges()&&!o.isDragging()){l=l.getScrollMetrics(!0);for(var _,u=o.getTopBoundedElements(),h=0;_=u[h];h++)s.bumpObjectIntoBounds_(o,l,_)}},s.bumpIntoBoundsHandler_=function(o){return function(l){var u=o.getMetricsManager();if(u.hasFixedEdges()&&!o.isDragging())if(-1!==s.Events.BUMP_EVENTS.indexOf(l.type)){u=u.getScrollMetrics(!0);var h=s.extractObjectFromEvent_(o,l);if(h){var _=s.Events.getGroup();s.Events.setGroup(l.group),s.bumpObjectIntoBounds_(o,u,h)&&!l.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==_&&s.Events.setGroup(_)}}else l.type===s.Events.VIEWPORT_CHANGE&&l.scale>l.oldScale&&s.bumpTopObjectsIntoBounds_(o)}},s.bumpObjectIntoBounds_=function(o,l,u){var h=u.getBoundingRectangle(),_=h.right-h.left,b=s.utils.math.clamp(l.top,h.top,l.top+l.height-(h.bottom-h.top))-h.top,D=l.left;return l=l.left+l.width-_,o.RTL?D=Math.min(l,D):l=Math.max(D,l),!(!(o=s.utils.math.clamp(D,h.left,l)-h.left)&&!b||(u.moveBy(o,b),0))},s.init_=function(o){var l=o.options,u=o.getParentSvg();if(s.browserEvents.conditionalBind(u.parentNode,"contextmenu",null,function(_){s.utils.isTargetInput(_)||_.preventDefault()}),u=s.browserEvents.conditionalBind(window,"resize",null,function(){s.hideChaff(!0),s.svgResize(o),s.bumpTopObjectsIntoBounds_(o)}),o.setResizeHandlerWrapper(u),s.inject.bindDocumentEvents_(),l.languageTree){u=o.getToolbox();var h=o.getFlyout(!0);u?u.init():h&&(h.init(o),h.show(l.languageTree),"function"==typeof h.scrollToStart&&h.scrollToStart())}l.hasTrashcan&&o.trashcan.init(),l.zoomOptions&&l.zoomOptions.controls&&o.zoomControls_.init(),l.moveOptions&&l.moveOptions.scrollbars?(o.scrollbar=new s.ScrollbarPair(o,!0===l.moveOptions.scrollbars||!!l.moveOptions.scrollbars.horizontal,!0===l.moveOptions.scrollbars||!!l.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),o.scrollbar.resize()):o.setMetrics({x:.5,y:.5}),l.hasSounds&&s.inject.loadSounds_(l.pathToMedia,o)},s.inject.bindDocumentEvents_=function(){s.documentEventsBound_||(s.browserEvents.conditionalBind(document,"scroll",null,function(){for(var u,o=s.Workspace.getAll(),l=0;u=o[l];l++)u.updateInverseScreenCTM&&u.updateInverseScreenCTM()}),s.browserEvents.conditionalBind(document,"keydown",null,s.onKeyDown),s.browserEvents.bind(document,"touchend",null,s.longStop_),s.browserEvents.bind(document,"touchcancel",null,s.longStop_),s.utils.userAgent.IPAD&&s.browserEvents.conditionalBind(window,"orientationchange",document,function(){s.svgResize(s.getMainWorkspace())})),s.documentEventsBound_=!0},s.inject.loadSounds_=function(o,l){var u=l.getAudioManager();u.load([o+"click.mp3",o+"click.wav",o+"click.ogg"],"click"),u.load([o+"disconnect.wav",o+"disconnect.mp3",o+"disconnect.ogg"],"disconnect"),u.load([o+"delete.mp3",o+"delete.ogg",o+"delete.wav"],"delete");var h=[];o=function(){for(;h.length;)s.browserEvents.unbind(h.pop());u.preload()},h.push(s.browserEvents.conditionalBind(document,"mousemove",null,o,!0)),h.push(s.browserEvents.conditionalBind(document,"touchstart",null,o,!0))},s.Names=function(o,l){if(this.variablePrefix_=l||"",this.reservedDict_=Object.create(null),o)for(o=o.split(","),l=0;l<o.length;l++)this.reservedDict_[o[l]]=!0;this.reset()},s.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",s.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},s.Names.prototype.setVariableMap=function(o){this.variableMap_=o},s.Names.prototype.getNameForUserVariable_=function(o){return this.variableMap_?(o=this.variableMap_.getVariableById(o))?o.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},s.Names.prototype.populateVariables=function(o){o=s.Variables.allUsedVarModels(o);for(var l=0;l<o.length;l++)this.getName(o[l].getId(),s.VARIABLE_CATEGORY_NAME)},s.Names.prototype.populateProcedures=function(o){o=(o=s.Procedures.allProcedures(o))[0].concat(o[1]);for(var l=0;l<o.length;l++)this.getName(o[l][0],s.PROCEDURE_CATEGORY_NAME)},s.Names.prototype.getName=function(o,l){var u=o;l==s.VARIABLE_CATEGORY_NAME&&(o=this.getNameForUserVariable_(o))&&(u=o),o=u.toLowerCase();var h=l==s.VARIABLE_CATEGORY_NAME||l==s.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";l in this.db_||(this.db_[l]=Object.create(null));var _=this.db_[l];return o in _?h+_[o]:(l=this.getDistinctName(u,l),_[o]=l.substr(h.length),l)},s.Names.prototype.getUserNames=function(o){return Object.keys(this.db_[o]||{})},s.Names.prototype.getDistinctName=function(o,l){o=this.safeName_(o);for(var u="";this.dbReverse_[o+u]||o+u in this.reservedDict_;)u=u?u+1:2;return this.dbReverse_[o+=u]=!0,(l==s.VARIABLE_CATEGORY_NAME||l==s.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+o},s.Names.prototype.safeName_=function(o){return o?(o=encodeURI(o.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(o[0])&&(o="my_"+o)):o=s.Msg.UNNAMED_KEY||"unnamed",o},s.Names.equals=function(o,l){return o.toLowerCase()==l.toLowerCase()},s.Procedures={},s.Procedures.NAME_TYPE=s.PROCEDURE_CATEGORY_NAME,s.Procedures.DEFAULT_ARG="x",s.Procedures.allProcedures=function(o){var l=o.getBlocksByType("procedures_defnoreturn",!1).map(function(u){return u.getProcedureDef()});return o=o.getBlocksByType("procedures_defreturn",!1).map(function(u){return u.getProcedureDef()}),l.sort(s.Procedures.procTupleComparator_),o.sort(s.Procedures.procTupleComparator_),[l,o]},s.Procedures.procTupleComparator_=function(o,l){return o[0].localeCompare(l[0],void 0,{sensitivity:"base"})},s.Procedures.findLegalName=function(o,l){if(l.isInFlyout)return o;for(o=o||s.Msg.UNNAMED_KEY||"unnamed";!s.Procedures.isLegalName_(o,l.workspace,l);){var u=o.match(/^(.*?)(\d+)$/);o=u?u[1]+(parseInt(u[2],10)+1):o+"2"}return o},s.Procedures.isLegalName_=function(o,l,u){return!s.Procedures.isNameUsed(o,l,u)},s.Procedures.isNameUsed=function(o,l,u){l=l.getAllBlocks(!1);for(var h=0;h<l.length;h++)if(l[h]!=u&&l[h].getProcedureDef){var _=l[h].getProcedureDef();if(s.Names.equals(_[0],o))return!0}return!1},s.Procedures.rename=function(o){o=o.trim();var l=s.Procedures.findLegalName(o,this.getSourceBlock()),u=this.getValue();if(u!=o&&u!=l){o=this.getSourceBlock().workspace.getAllBlocks(!1);for(var h=0;h<o.length;h++)o[h].renameProcedure&&o[h].renameProcedure(u,l)}return l},s.Procedures.flyoutCategory=function(o){function l(b,D){for(var x=0;x<b.length;x++){var G=b[x][0],j=b[x][1],F=s.utils.xml.createElement("block");F.setAttribute("type",D),F.setAttribute("gap",16);var q=s.utils.xml.createElement("mutation");for(q.setAttribute("name",G),F.appendChild(q),G=0;G<j.length;G++){var Q=s.utils.xml.createElement("arg");Q.setAttribute("name",j[G]),q.appendChild(Q)}u.push(F)}}var u=[];if(s.Blocks.procedures_defnoreturn){var h=s.utils.xml.createElement("block");h.setAttribute("type","procedures_defnoreturn"),h.setAttribute("gap",16);var _=s.utils.xml.createElement("field");_.setAttribute("name","NAME"),_.appendChild(s.utils.xml.createTextNode(s.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),h.appendChild(_),u.push(h)}return s.Blocks.procedures_defreturn&&((h=s.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),h.setAttribute("gap",16),(_=s.utils.xml.createElement("field")).setAttribute("name","NAME"),_.appendChild(s.utils.xml.createTextNode(s.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),h.appendChild(_),u.push(h)),s.Blocks.procedures_ifreturn&&((h=s.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),h.setAttribute("gap",16),u.push(h)),u.length&&u[u.length-1].setAttribute("gap",24),l((o=s.Procedures.allProcedures(o))[0],"procedures_callnoreturn"),l(o[1],"procedures_callreturn"),u},s.Procedures.updateMutatorFlyout_=function(o){for(var _,l=[],u=o.getBlocksByType("procedures_mutatorarg",!1),h=0;_=u[h];h++)l.push(_.getFieldValue("NAME"));u=s.utils.xml.createElement("xml"),(h=s.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(_=s.utils.xml.createElement("field")).setAttribute("name","NAME"),l=s.Variables.generateUniqueNameFromOptions(s.Procedures.DEFAULT_ARG,l),l=s.utils.xml.createTextNode(l),_.appendChild(l),h.appendChild(_),u.appendChild(h),o.updateToolbox(u)},s.Procedures.mutatorOpenListener=function(o){if(o.type==s.Events.BUBBLE_OPEN&&"mutator"===o.bubbleType&&o.isOpen){var l=(o=s.Workspace.getById(o.workspaceId).getBlockById(o.blockId)).type;("procedures_defnoreturn"==l||"procedures_defreturn"==l)&&(o=o.mutator.getWorkspace(),s.Procedures.updateMutatorFlyout_(o),o.addChangeListener(s.Procedures.mutatorChangeListener_))}},s.Procedures.mutatorChangeListener_=function(o){(o.type==s.Events.BLOCK_CREATE||o.type==s.Events.BLOCK_DELETE||o.type==s.Events.BLOCK_CHANGE)&&(o=s.Workspace.getById(o.workspaceId),s.Procedures.updateMutatorFlyout_(o))},s.Procedures.getCallers=function(o,l){var u=[];l=l.getAllBlocks(!1);for(var h=0;h<l.length;h++)if(l[h].getProcedureCall){var _=l[h].getProcedureCall();_&&s.Names.equals(_,o)&&u.push(l[h])}return u},s.Procedures.mutateCallers=function(o){var _,l=s.Events.recordUndo,u=o.getProcedureDef()[0],h=o.mutationToDom(!0);for(o=s.Procedures.getCallers(u,o.workspace),u=0;_=o[u];u++){var b=_.mutationToDom();b=b&&s.Xml.domToText(b),_.domToMutation(h);var D=_.mutationToDom();b!=(D=D&&s.Xml.domToText(D))&&(s.Events.recordUndo=!1,s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(_,"mutation",null,b,D)),s.Events.recordUndo=l)}},s.Procedures.getDefinition=function(o,l){l=l.getAllBlocks(!1);for(var u=0;u<l.length;u++)if(l[u].getProcedureDef){var h=l[u].getProcedureDef();if(h&&s.Names.equals(h[0],o))return l[u]}return null},s.ShortcutRegistry=function(){s.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},s.ShortcutRegistry.modifierKeys={Shift:s.utils.KeyCodes.SHIFT,Control:s.utils.KeyCodes.CTRL,Alt:s.utils.KeyCodes.ALT,Meta:s.utils.KeyCodes.META},s.ShortcutRegistry.prototype.register=function(o,l){if(this.registry_[o.name]&&!l)throw Error('Shortcut with name "'+o.name+'" already exists.');this.registry_[o.name]=o},s.ShortcutRegistry.prototype.unregister=function(o){return this.registry_[o]?(this.removeAllKeyMappings(o),delete this.registry_[o],!0):(console.warn('Keyboard shortcut with name "'+o+'" not found.'),!1)},s.ShortcutRegistry.prototype.addKeyMapping=function(o,l,u){o=String(o);var h=this.keyMap_[o];if(h&&!u)throw Error('Shortcut with name "'+l+'" collides with shortcuts '+h.toString());h&&u?h.unshift(l):this.keyMap_[o]=[l]},s.ShortcutRegistry.prototype.removeKeyMapping=function(o,l,u){var h=this.keyMap_[o];if(!h&&!u)return console.warn('No keyboard shortcut with name "'+l+'" registered with key code "'+o+'"'),!1;var _=h.indexOf(l);return-1<_?(h.splice(_,1),0==h.length&&delete this.keyMap_[o],!0):(u||console.warn('No keyboard shortcut with name "'+l+'" registered with key code "'+o+'"'),!1)},s.ShortcutRegistry.prototype.removeAllKeyMappings=function(o){for(var l in this.keyMap_)this.removeKeyMapping(l,o,!0)},s.ShortcutRegistry.prototype.setKeyMap=function(o){this.keyMap_=o},s.ShortcutRegistry.prototype.getKeyMap=function(){return s.utils.object.deepMerge(Object.create(null),this.keyMap_)},s.ShortcutRegistry.prototype.getRegistry=function(){return s.utils.object.deepMerge(Object.create(null),this.registry_)},s.ShortcutRegistry.prototype.onKeyDown=function(o,l){var u=this.serializeKeyEvent_(l);if(!(u=this.getShortcutNamesByKeyCode(u)))return!1;for(var _,h=0;_=u[h];h++)if((!(_=this.registry_[_]).preconditionFn||_.preconditionFn(o))&&_.callback&&_.callback(o,l,_))return!0;return!1},s.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(o){return this.keyMap_[o]||[]},s.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(o){var u,l=[];for(u in this.keyMap_)-1<this.keyMap_[u].indexOf(o)&&l.push(u);return l},s.ShortcutRegistry.prototype.serializeKeyEvent_=function(o){var u,l="";for(u in s.ShortcutRegistry.modifierKeys)o.getModifierState(u)&&(""!=l&&(l+="+"),l+=u);return""!=l&&o.keyCode?l=l+"+"+o.keyCode:o.keyCode&&(l=o.keyCode.toString()),l},s.ShortcutRegistry.prototype.checkModifiers_=function(o){for(var h,l=s.utils.object.values(s.ShortcutRegistry.modifierKeys),u=0;h=o[u];u++)if(0>l.indexOf(h))throw Error(h+" is not a valid modifier key.")},s.ShortcutRegistry.prototype.createSerializedKey=function(o,l){var u="";if(l)for(var h in this.checkModifiers_(l),s.ShortcutRegistry.modifierKeys)-1<l.indexOf(s.ShortcutRegistry.modifierKeys[h])&&(""!=u&&(u+="+"),u+=h);return""!=u&&o?u=u+"+"+o:o&&(u=o.toString()),u},new s.ShortcutRegistry,s.VariableModel=function(o,l,u,h){this.workspace=o,this.name=l,this.type=u||"",this.id_=h||s.utils.genUid(),s.Events.fire(new(s.Events.get(s.Events.VAR_CREATE))(this))},s.VariableModel.prototype.getId=function(){return this.id_},s.VariableModel.compareByName=function(o,l){return o.name.localeCompare(l.name,void 0,{sensitivity:"base"})},s.Variables={},s.Variables.NAME_TYPE=s.VARIABLE_CATEGORY_NAME,s.Variables.allUsedVarModels=function(o){var l=o.getAllBlocks(!1);o=Object.create(null);for(var u=0;u<l.length;u++){var h=l[u].getVarModels();if(h)for(var _=0;_<h.length;_++){var b=h[_],D=b.getId();D&&(o[D]=b)}}for(D in l=[],o)l.push(o[D]);return l},s.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},s.Variables.allDeveloperVariables=function(o){o=o.getAllBlocks(!1);for(var h,l=Object.create(null),u=0;h=o[u];u++){var _=h.getDeveloperVariables;if(!_&&h.getDeveloperVars&&(_=h.getDeveloperVars,s.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[h.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+h.type+"')"),s.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[h.type]=!0)),_)for(h=_(),_=0;_<h.length;_++)l[h[_]]=!0}return Object.keys(l)},s.Variables.flyoutCategory=function(o){var l=[],u=document.createElement("button");return u.setAttribute("text","%{BKY_NEW_VARIABLE}"),u.setAttribute("callbackKey","CREATE_VARIABLE"),o.registerButtonCallback("CREATE_VARIABLE",function(h){s.Variables.createVariableButtonHandler(h.getTargetWorkspace())}),l.push(u),o=s.Variables.flyoutCategoryBlocks(o),l.concat(o)},s.Variables.flyoutCategoryBlocks=function(o){var l=[];if(0<(o=o.getVariablesOfType("")).length){var u=o[o.length-1];if(s.Blocks.variables_set){var h=s.utils.xml.createElement("block");h.setAttribute("type","variables_set"),h.setAttribute("gap",s.Blocks.math_change?8:24),h.appendChild(s.Variables.generateVariableFieldDom(u)),l.push(h)}if(s.Blocks.math_change&&((h=s.utils.xml.createElement("block")).setAttribute("type","math_change"),h.setAttribute("gap",s.Blocks.variables_get?20:8),h.appendChild(s.Variables.generateVariableFieldDom(u)),u=s.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),h.appendChild(u),l.push(h)),s.Blocks.variables_get){o.sort(s.VariableModel.compareByName),u=0;for(var _;_=o[u];u++)(h=s.utils.xml.createElement("block")).setAttribute("type","variables_get"),h.setAttribute("gap",8),h.appendChild(s.Variables.generateVariableFieldDom(_)),l.push(h)}}return l},s.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",s.Variables.generateUniqueName=function(o){return s.Variables.generateUniqueNameFromOptions(s.Variables.VAR_LETTER_OPTIONS.charAt(0),o.getAllVariableNames())},s.Variables.generateUniqueNameFromOptions=function(o,l){if(!l.length)return o;for(var u=s.Variables.VAR_LETTER_OPTIONS,h="",_=u.indexOf(o);;){for(var b=!1,D=0;D<l.length;D++)if(l[D].toLowerCase()==o){b=!0;break}if(!b)return o;++_==u.length&&(_=0,h=Number(h)+1),o=u.charAt(_)+h}},s.Variables.createVariableButtonHandler=function(o,l,u){var h=u||"",_=function(b){s.Variables.promptName(s.Msg.NEW_VARIABLE_TITLE,b,function(D){if(D){var x=s.Variables.nameUsedWithAnyType(D,o);if(x){if(x.type==h)var G=s.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",x.name);else G=(G=s.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",x.name).replace("%2",x.type);s.alert(G,function(){_(D)})}else o.createVariable(D,h),l&&l(D)}else l&&l(null)})};_("")},s.Variables.createVariable=s.Variables.createVariableButtonHandler,s.Variables.renameVariable=function(o,l,u){var h=function(_){var b=s.Msg.RENAME_VARIABLE_TITLE.replace("%1",l.name);s.Variables.promptName(b,_,function(D){if(D){var x=s.Variables.nameUsedWithOtherType_(D,l.type,o);x?(x=s.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",x.name).replace("%2",x.type),s.alert(x,function(){h(D)})):(o.renameVariableById(l.getId(),D),u&&u(D))}else u&&u(null)})};h("")},s.Variables.promptName=function(o,l,u){s.prompt(o,l,function(h){h&&((h=h.replace(/[\s\xa0]+/g," ").trim())==s.Msg.RENAME_VARIABLE||h==s.Msg.NEW_VARIABLE)&&(h=null),u(h)})},s.Variables.nameUsedWithOtherType_=function(o,l,u){u=u.getVariableMap().getAllVariables(),o=o.toLowerCase();for(var _,h=0;_=u[h];h++)if(_.name.toLowerCase()==o&&_.type!=l)return _;return null},s.Variables.nameUsedWithAnyType=function(o,l){l=l.getVariableMap().getAllVariables(),o=o.toLowerCase();for(var h,u=0;h=l[u];u++)if(h.name.toLowerCase()==o)return h;return null},s.Variables.generateVariableFieldDom=function(o){var l=s.utils.xml.createElement("field");return l.setAttribute("name","VAR"),l.setAttribute("id",o.getId()),l.setAttribute("variabletype",o.type),o=s.utils.xml.createTextNode(o.name),l.appendChild(o),l},s.Variables.getOrCreateVariablePackage=function(o,l,u,h){var _=s.Variables.getVariable(o,l,u,h);return _||(_=s.Variables.createVariable_(o,l,u,h)),_},s.Variables.getVariable=function(o,l,u,h){var _=o.getPotentialVariableMap(),b=null;if(l&&(!(b=o.getVariableById(l))&&_&&(b=_.getVariableById(l)),b))return b;if(u){if(null==h)throw Error("Tried to look up a variable by name without a type");!(b=o.getVariable(u,h))&&_&&(b=_.getVariable(u,h))}return b},s.Variables.createVariable_=function(o,l,u,h){var _=o.getPotentialVariableMap();return u||(u=s.Variables.generateUniqueName(o.isFlyout?o.targetWorkspace:o)),_?_.createVariable(u,h,l):o.createVariable(u,h,l)},s.Variables.getAddedVariables=function(o,l){o=o.getAllVariables();var u=[];if(l.length!=o.length)for(var h=0;h<o.length;h++){var _=o[h];-1==l.indexOf(_)&&u.push(_)}return u},s.VERSION="6.20210701.0",s.mainWorkspace=null,s.selected=null,s.draggingConnections=[],s.clipboardXml_=null,s.clipboardSource_=null,s.clipboardTypeCounts_=null,s.cache3dSupported_=null,s.parentContainer=null,s.svgSize=function(o){return s.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new s.utils.Size(o.cachedWidth_,o.cachedHeight_)},s.resizeSvgContents=function(o){o.resizeContents()},s.svgResize=function(o){for(;o.options.parentWorkspace;)o=o.options.parentWorkspace;var l=o.getParentSvg(),u=o.getCachedParentSvgSize(),h=l.parentNode;if(h){var _=h.offsetWidth;h=h.offsetHeight,u.width!=_&&(l.setAttribute("width",_+"px"),o.setCachedParentSvgSize(_,null)),u.height!=h&&(l.setAttribute("height",h+"px"),o.setCachedParentSvgSize(null,h)),o.resize()}},s.onKeyDown=function(o){var l=s.mainWorkspace;l&&!(s.utils.isTargetInput(o)||l.rendered&&!l.isVisible())&&s.ShortcutRegistry.registry.onKeyDown(l,o)},s.deleteBlock=function(o){o.workspace.isFlyout||(s.Events.setGroup(!0),s.hideChaff(),o.dispose(!o.outputConnection,!0),s.Events.setGroup(!1))},s.copy=function(o){(o=o.toCopyData())&&(s.clipboardXml_=o.xml,s.clipboardSource_=o.source,s.clipboardTypeCounts_=o.typeCounts)},s.paste=function(){if(!s.clipboardXml_)return!1;var o=s.clipboardSource_;return o.isFlyout&&(o=o.targetWorkspace),!(!s.clipboardTypeCounts_||!o.isCapacityAvailable(s.clipboardTypeCounts_)||(s.Events.setGroup(!0),o.paste(s.clipboardXml_),s.Events.setGroup(!1),0))},s.duplicate=function(o){var l=s.clipboardXml_,u=s.clipboardSource_;s.copy(o),o.workspace.paste(s.clipboardXml_),s.clipboardXml_=l,s.clipboardSource_=u},s.onContextMenu_=function(o){s.utils.isTargetInput(o)||o.preventDefault()},s.hideChaff=function(o){s.Tooltip.hide(),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation();var l=!!o;s.getMainWorkspace().getComponentManager().getComponents(s.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(u){u.autoHide(l)})},s.getMainWorkspace=function(){return s.mainWorkspace},s.alert=function(o,l){alert(o),l&&l()},s.confirm=function(o,l){l(confirm(o))},s.prompt=function(o,l,u){u(prompt(o,l))},s.jsonInitFactory_=function(o){return function(){this.jsonInit(o)}},s.defineBlocksWithJsonArray=function(o){for(var l=0;l<o.length;l++){var u=o[l];if(u){var h=u.type;null==h||""===h?console.warn("Block definition #"+l+" in JSON array is missing a type attribute. Skipping."):(s.Blocks[h]&&console.warn("Block definition #"+l+' in JSON array overwrites prior definition of "'+h+'".'),s.Blocks[h]={init:s.jsonInitFactory_(u)})}else console.warn("Block definition #"+l+" in JSON array is "+u+". Skipping.")}},s.isNumber=function(o){return/^\s*-?\d+(\.\d+)?\s*$/.test(o)},s.hueToHex=function(o){return s.utils.colour.hsvToHex(o,s.HSV_SATURATION,255*s.HSV_VALUE)},s.checkBlockColourConstants=function(){s.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),s.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),s.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),s.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),s.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),s.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),s.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),s.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),s.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),s.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),s.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),s.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),s.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),s.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),s.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),s.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},s.checkBlockColourConstant_=function(o,l,u){for(var h="Blockly",_=s,b=0;b<l.length;++b)h+="."+l[b],_&&(_=_[l[b]]);_&&_!==u&&(o=(void 0===u?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",h).replace("%2",o),console.warn(o))},s.setParentContainer=function(o){s.parentContainer=o},s.bindEvent_=s.browserEvents.bind,s.unbindEvent_=s.browserEvents.unbind,s.bindEventWithChecks_=s.browserEvents.conditionalBind,s.ALIGN_LEFT=s.constants.ALIGN.LEFT,s.ALIGN_CENTRE=s.constants.ALIGN.CENTRE,s.ALIGN_RIGHT=s.constants.ALIGN.RIGHT,s.INPUT_VALUE=s.connectionTypes.INPUT_VALUE,s.OUTPUT_VALUE=s.connectionTypes.OUTPUT_VALUE,s.NEXT_STATEMENT=s.connectionTypes.NEXT_STATEMENT,s.PREVIOUS_STATEMENT=s.connectionTypes.PREVIOUS_STATEMENT,s.DUMMY_INPUT=s.inputTypes.DUMMY,s.TOOLBOX_AT_TOP=s.utils.toolbox.Position.TOP,s.TOOLBOX_AT_BOTTOM=s.utils.toolbox.Position.BOTTOM,s.TOOLBOX_AT_LEFT=s.utils.toolbox.Position.LEFT,s.TOOLBOX_AT_RIGHT=s.utils.toolbox.Position.RIGHT,s.Events.BubbleOpen=function(o,l,u){s.Events.BubbleOpen.superClass_.constructor.call(this,o?o.workspace.id:void 0),this.blockId=o?o.id:null,this.isOpen=l,this.bubbleType=u},s.utils.object.inherits(s.Events.BubbleOpen,s.Events.UiBase),s.Events.BubbleOpen.prototype.type=s.Events.BUBBLE_OPEN,s.Events.BubbleOpen.prototype.toJson=function(){var o=s.Events.BubbleOpen.superClass_.toJson.call(this);return o.isOpen=this.isOpen,o.bubbleType=this.bubbleType,o.blockId=this.blockId,o},s.Events.BubbleOpen.prototype.fromJson=function(o){s.Events.BubbleOpen.superClass_.fromJson.call(this,o),this.isOpen=o.isOpen,this.bubbleType=o.bubbleType,this.blockId=o.blockId},s.registry.register(s.registry.Type.EVENT,s.Events.BUBBLE_OPEN,s.Events.BubbleOpen),s.Icon=function(o){this.block_=o,this.iconGroup_=null},s.Icon.prototype.collapseHidden=!0,s.Icon.prototype.SIZE=17,s.Icon.prototype.bubble_=null,s.Icon.prototype.iconXY_=null,s.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&s.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),s.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},s.Icon.prototype.dispose=function(){s.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},s.Icon.prototype.updateEditable=function(){},s.Icon.prototype.isVisible=function(){return!!this.bubble_},s.Icon.prototype.iconClick_=function(o){this.block_.workspace.isDragging()||this.block_.isInFlyout||s.utils.isRightButton(o)||this.setVisible(!this.isVisible())},s.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},s.Icon.prototype.setIconLocation=function(o){this.iconXY_=o,this.isVisible()&&this.bubble_.setAnchorLocation(o)},s.Icon.prototype.computeIconLocation=function(){var o=this.block_.getRelativeToSurfaceXY(),l=s.utils.getRelativeXY(this.iconGroup_);o=new s.utils.Coordinate(o.x+l.x+this.SIZE/2,o.y+l.y+this.SIZE/2),s.utils.Coordinate.equals(this.getIconLocation(),o)||this.setIconLocation(o)},s.Icon.prototype.getIconLocation=function(){return this.iconXY_},s.Icon.prototype.getCorrectedSize=function(){return new s.utils.Size(s.Icon.prototype.SIZE,s.Icon.prototype.SIZE-2)},s.Warning=function(o){s.Warning.superClass_.constructor.call(this,o),this.createIcon(),this.text_=Object.create(null)},s.utils.object.inherits(s.Warning,s.Icon),s.Warning.prototype.collapseHidden=!1,s.Warning.prototype.drawIcon_=function(o){s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},o),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},o),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},o)},s.Warning.prototype.setVisible=function(o){o!=this.isVisible()&&(s.Events.fire(new(s.Events.get(s.Events.BUBBLE_OPEN))(this.block_,o,"warning")),o?this.createBubble_():this.disposeBubble_())},s.Warning.prototype.createBubble_=function(){this.paragraphElement_=s.Bubble.textToDom(this.getText()),this.bubble_=s.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},s.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},s.Warning.prototype.setText=function(o,l){this.text_[l]!=o&&(o?this.text_[l]=o:delete this.text_[l],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},s.Warning.prototype.getText=function(){var l,o=[];for(l in this.text_)o.push(this.text_[l]);return o.join("\n")},s.Warning.prototype.dispose=function(){this.block_.warning=null,s.Icon.prototype.dispose.call(this)},s.Comment=function(o){s.Comment.superClass_.constructor.call(this,o),this.model_=o.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},s.utils.object.inherits(s.Comment,s.Icon),s.Comment.prototype.drawIcon_=function(o){s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},o),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},o),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},o)},s.Comment.prototype.createEditor_=function(){this.foreignObject_=s.utils.dom.createSvgElement(s.utils.Svg.FOREIGNOBJECT,{x:s.Bubble.BORDER_WIDTH,y:s.Bubble.BORDER_WIDTH},null);var o=document.createElementNS(s.utils.dom.HTML_NS,"body");o.setAttribute("xmlns",s.utils.dom.HTML_NS),o.className="blocklyMinimalBody";var l=this.textarea_=document.createElementNS(s.utils.dom.HTML_NS,"textarea");return l.className="blocklyCommentTextarea",l.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),l.value=this.model_.text,this.resizeTextarea_(),o.appendChild(l),this.foreignObject_.appendChild(o),this.onMouseUpWrapper_=s.browserEvents.conditionalBind(l,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=s.browserEvents.conditionalBind(l,"wheel",this,function(u){u.stopPropagation()}),this.onChangeWrapper_=s.browserEvents.conditionalBind(l,"change",this,function(u){this.cachedText_!=this.model_.text&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=s.browserEvents.conditionalBind(l,"input",this,function(u){this.model_.text=l.value}),setTimeout(l.focus.bind(l),0),this.foreignObject_},s.Comment.prototype.updateEditable=function(){s.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},s.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},s.Comment.prototype.resizeTextarea_=function(){var o=this.model_.size,l=2*s.Bubble.BORDER_WIDTH,u=o.width-l;o=o.height-l,this.foreignObject_.setAttribute("width",u),this.foreignObject_.setAttribute("height",o),this.textarea_.style.width=u-4+"px",this.textarea_.style.height=o-4+"px"},s.Comment.prototype.setVisible=function(o){o!=this.isVisible()&&(s.Events.fire(new(s.Events.get(s.Events.BUBBLE_OPEN))(this.block_,o,"comment")),(this.model_.pinned=o)?this.createBubble_():this.disposeBubble_())},s.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||s.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},s.Comment.prototype.createEditableBubble_=function(){this.bubble_=new s.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},s.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=s.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=s.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},s.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(s.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(s.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(s.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(s.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},s.Comment.prototype.startEdit_=function(o){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},s.Comment.prototype.getBubbleSize=function(){return this.model_.size},s.Comment.prototype.setBubbleSize=function(o,l){this.bubble_?this.bubble_.setBubbleSize(o,l):(this.model_.size.width=o,this.model_.size.height=l)},s.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},s.Comment.prototype.dispose=function(){this.block_.comment=null,s.Icon.prototype.dispose.call(this)},s.Css.register(".blocklyCommentTextarea {,background-color: #fef49c;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,text-overflow: hidden;,}".split(",")),s.IComponent=function(){},s.IDragTarget=function(){},s.DragTarget=function(){},s.DragTarget.prototype.onDragEnter=function(o){},s.DragTarget.prototype.onDragOver=function(o){},s.DragTarget.prototype.onDragExit=function(o){},s.DragTarget.prototype.onDrop=function(o){},s.DragTarget.prototype.shouldPreventMove=function(o){return!1},s.IDeleteArea=function(){},s.DeleteArea=function(){s.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},s.utils.object.inherits(s.DeleteArea,s.DragTarget),s.DeleteArea.prototype.wouldDelete=function(o,l){return o instanceof s.BlockSvg?(o=!o.getParent()&&o.isDeletable(),this.updateWouldDelete_(o&&!l)):this.updateWouldDelete_(o.isDeletable()),this.wouldDelete_},s.DeleteArea.prototype.updateWouldDelete_=function(o){this.wouldDelete_=o},s.IFlyout=function(){},s.Flyout=function(o){s.Flyout.superClass_.constructor.call(this),o.setMetrics=this.setMetrics_.bind(this),this.workspace_=new s.WorkspaceSvg(o),this.workspace_.setMetricsManager(new s.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=s.utils.genUid(),this.RTL=!!o.RTL,this.horizontalLayout=!1,this.toolboxPosition_=o.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},s.utils.object.inherits(s.Flyout,s.DeleteArea),s.Flyout.prototype.autoClose=!0,s.Flyout.prototype.isVisible_=!1,s.Flyout.prototype.containerVisible_=!0,s.Flyout.prototype.CORNER_RADIUS=8,s.Flyout.prototype.MARGIN=s.Flyout.prototype.CORNER_RADIUS,s.Flyout.prototype.GAP_X=3*s.Flyout.prototype.MARGIN,s.Flyout.prototype.GAP_Y=3*s.Flyout.prototype.MARGIN,s.Flyout.prototype.SCROLLBAR_MARGIN=2.5,s.Flyout.prototype.width_=0,s.Flyout.prototype.height_=0,s.Flyout.prototype.dragAngleRange_=70,s.Flyout.prototype.createDom=function(o){return this.svgGroup_=s.utils.dom.createSvgElement(o,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},s.Flyout.prototype.init=function(o){this.targetWorkspace=o,this.workspace_.targetWorkspace=o,this.workspace_.scrollbar=new s.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,s.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,s.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),o.getComponentManager().addComponent({component:this,weight:1,capabilities:[s.ComponentManager.Capability.DELETE_AREA,s.ComponentManager.Capability.DRAG_TARGET]})},s.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),s.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(s.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},s.Flyout.prototype.getWidth=function(){return this.width_},s.Flyout.prototype.getHeight=function(){return this.height_},s.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},s.Flyout.prototype.getWorkspace=function(){return this.workspace_},s.Flyout.prototype.isVisible=function(){return this.isVisible_},s.Flyout.prototype.setVisible=function(o){var l=o!=this.isVisible();this.isVisible_=o,l&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},s.Flyout.prototype.setContainerVisible=function(o){var l=o!=this.containerVisible_;this.containerVisible_=o,l&&this.updateDisplay_()},s.Flyout.prototype.updateDisplay_=function(){var o=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=o?"block":"none",this.workspace_.scrollbar.setContainerVisible(o)},s.Flyout.prototype.positionAt_=function(o,l,u,h){this.svgGroup_.setAttribute("width",o),this.svgGroup_.setAttribute("height",l),this.workspace_.setCachedParentSvgSize(o,l),"svg"==this.svgGroup_.tagName?s.utils.dom.setCssTransform(this.svgGroup_,"translate("+u+"px,"+h+"px)"):this.svgGroup_.setAttribute("transform","translate("+u+","+h+")"),(o=this.workspace_.scrollbar)&&(o.setOrigin(u,h),o.resize(),o.hScroll&&o.hScroll.setPosition(o.hScroll.position.x,o.hScroll.position.y),o.vScroll&&o.vScroll.setPosition(o.vScroll.position.x,o.vScroll.position.y))},s.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var l,o=0;l=this.listeners_[o];o++)s.browserEvents.unbind(l);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},s.Flyout.prototype.show=function(o){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof o&&(o=this.getDynamicCategoryContents_(o)),this.setVisible(!0),o=s.utils.toolbox.convertFlyoutDefToJsonArray(o),o=this.createFlyoutInfo_(o),this.layout_(o.contents,o.gaps),this.listeners_.push(s.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,function(){for(var h,l=this.workspace_.getTopBlocks(!1),u=0;h=l[u];u++)h.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},s.Flyout.prototype.createFlyoutInfo_=function(o){var l=[],u=[];this.permanentlyDisabled_.length=0;for(var b,h=this.horizontalLayout?this.GAP_X:this.GAP_Y,_=0;b=o[_];_++)switch(b.custom&&(b=this.getDynamicCategoryContents_(b.custom),b=s.utils.toolbox.convertFlyoutDefToJsonArray(b),o.splice.apply(o,[_,1].concat(b)),b=o[_]),b.kind.toUpperCase()){case"BLOCK":var D=b,x=this.getBlockXml_(D);b=this.createBlock_(x),D=parseInt(D.gap||x.getAttribute("gap"),10),u.push(isNaN(D)?h:D),l.push({type:"block",block:b});break;case"SEP":this.addSeparatorGap_(b,u,h);break;case"LABEL":b=this.createButton_(b,!0),l.push({type:"button",button:b}),u.push(h);break;case"BUTTON":b=this.createButton_(b,!1),l.push({type:"button",button:b}),u.push(h)}return{contents:l,gaps:u}},s.Flyout.prototype.getDynamicCategoryContents_=function(o){if("function"!=typeof(o=this.workspace_.targetWorkspace.getToolboxCategoryCallback(o)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(o=o(this.workspace_.targetWorkspace),!Array.isArray(o))throw new TypeError("Result of toolbox category callback must be an array.");return o},s.Flyout.prototype.createButton_=function(o,l){if(!s.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new s.FlyoutButton(this.workspace_,this.targetWorkspace,o,l)},s.Flyout.prototype.createBlock_=function(o){return(o=s.Xml.domToBlock(o,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(o),o},s.Flyout.prototype.getBlockXml_=function(o){var l=null,u=o.blockxml;if(u&&"string"!=typeof u?l=u:u&&"string"==typeof u?(l=s.Xml.textToDom(u),o.blockxml=l):o.type&&((l=s.utils.xml.createElement("xml")).setAttribute("type",o.type),l.setAttribute("disabled",o.disabled),o.blockxml=l),!l)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return l},s.Flyout.prototype.addSeparatorGap_=function(o,l,u){o=parseInt(o.gap,10),!isNaN(o)&&0<l.length?l[l.length-1]=o:l.push(u)},s.Flyout.prototype.clearOldBlocks_=function(){for(var u,o=this.workspace_.getTopBlocks(!1),l=0;u=o[l];l++)u.workspace==this.workspace_&&u.dispose(!1,!1);for(l=0;l<this.mats_.length;l++)(o=this.mats_[l])&&(s.Tooltip.unbindMouseEvents(o),s.utils.dom.removeNode(o));for(l=this.mats_.length=0;o=this.buttons_[l];l++)o.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},s.Flyout.prototype.addBlockListeners_=function(o,l,u){this.listeners_.push(s.browserEvents.conditionalBind(o,"mousedown",null,this.blockMouseDown_(l))),this.listeners_.push(s.browserEvents.conditionalBind(u,"mousedown",null,this.blockMouseDown_(l))),this.listeners_.push(s.browserEvents.bind(o,"mouseenter",l,l.addSelect)),this.listeners_.push(s.browserEvents.bind(o,"mouseleave",l,l.removeSelect)),this.listeners_.push(s.browserEvents.bind(u,"mouseenter",l,l.addSelect)),this.listeners_.push(s.browserEvents.bind(u,"mouseleave",l,l.removeSelect))},s.Flyout.prototype.blockMouseDown_=function(o){var l=this;return function(u){var h=l.targetWorkspace.getGesture(u);h&&(h.setStartBlock(o),h.handleFlyoutStart(u,l))}},s.Flyout.prototype.onMouseDown_=function(o){var l=this.targetWorkspace.getGesture(o);l&&l.handleFlyoutStart(o,this)},s.Flyout.prototype.isBlockCreatable_=function(o){return o.isEnabled()},s.Flyout.prototype.createBlock=function(o){var l=null;s.Events.disable();var u=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{l=this.placeNewBlock_(o)}finally{s.Events.enable()}if(s.hideChaff(),o=s.Variables.getAddedVariables(this.targetWorkspace,u),s.Events.isEnabled()){for(s.Events.setGroup(!0),u=0;u<o.length;u++){var h=o[u];s.Events.fire(new(s.Events.get(s.Events.VAR_CREATE))(h))}s.Events.fire(new(s.Events.get(s.Events.BLOCK_CREATE))(l))}return this.autoClose?this.hide():this.filterForCapacity_(),l},s.Flyout.prototype.initFlyoutButton_=function(o,l,u){var h=o.createDom();o.moveTo(l,u),o.show(),this.listeners_.push(s.browserEvents.conditionalBind(h,"mousedown",this,this.onMouseDown_)),this.buttons_.push(o)},s.Flyout.prototype.createRect_=function(o,l,u,h,_){return(l=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{"fill-opacity":0,x:l,y:u,height:h.height,width:h.width},null)).tooltip=o,s.Tooltip.bindMouseEvents(l),this.workspace_.getCanvas().insertBefore(l,o.getSvgRoot()),o.flyoutRect_=l,this.mats_[_]=l},s.Flyout.prototype.moveRectToBlock_=function(o,l){var u=l.getHeightWidth();o.setAttribute("width",u.width),o.setAttribute("height",u.height),l=l.getRelativeToSurfaceXY(),o.setAttribute("y",l.y),o.setAttribute("x",this.RTL?l.x-u.width:l.x)},s.Flyout.prototype.filterForCapacity_=function(){for(var u,o=this.workspace_.getTopBlocks(!1),l=0;u=o[l];l++)if(-1==this.permanentlyDisabled_.indexOf(u))for(var h=this.targetWorkspace.isCapacityAvailable(s.utils.getBlockTypeCounts(u));u;)u.setEnabled(h),u=u.getNextBlock()},s.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},s.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},s.Flyout.prototype.placeNewBlock_=function(o){var l=this.targetWorkspace;if(!o.getSvgRoot())throw Error("oldBlock is not rendered.");var u=s.Xml.blockToDom(o,!0);if(l.setResizesEnabled(!1),!(u=s.Xml.domToBlock(u,l)).getSvgRoot())throw Error("block is not rendered.");var h=l.getOriginOffsetInPixels(),_=this.workspace_.getOriginOffsetInPixels();return(o=o.getRelativeToSurfaceXY()).scale(this.workspace_.scale),o=s.utils.Coordinate.sum(_,o),(h=s.utils.Coordinate.difference(o,h)).scale(1/l.scale),u.moveBy(h.x,h.y),u},s.HorizontalFlyout=function(o){s.HorizontalFlyout.superClass_.constructor.call(this,o),this.horizontalLayout=!0},s.utils.object.inherits(s.HorizontalFlyout,s.Flyout),s.HorizontalFlyout.prototype.setMetrics_=function(o){if(this.isVisible()){var l=this.workspace_.getMetricsManager(),u=l.getScrollMetrics(),h=l.getViewMetrics();l=l.getAbsoluteMetrics(),"number"==typeof o.x&&(this.workspace_.scrollX=-(u.left+(u.width-h.width)*o.x)),this.workspace_.translate(this.workspace_.scrollX+l.left,this.workspace_.scrollY+l.top)}},s.HorizontalFlyout.prototype.getX=function(){return 0},s.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var o=this.targetWorkspace.getMetricsManager(),l=o.getAbsoluteMetrics(),u=o.getViewMetrics();o=o.getToolboxMetrics();var h=this.toolboxPosition_==s.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?h?o.height:u.height-this.height_:h?0:u.height:h?0:u.height+l.top-this.height_},s.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var o=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=o.width,this.setBackgroundPath_(o.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),o=this.getX();var l=this.getY();this.positionAt_(this.width_,this.height_,o,l)}},s.HorizontalFlyout.prototype.setBackgroundPath_=function(o,l){var u=this.toolboxPosition_==s.utils.toolbox.Position.TOP,h=["M 0,"+(u?0:this.CORNER_RADIUS)];u?(h.push("h",o+2*this.CORNER_RADIUS),h.push("v",l),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("h",-o),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),h.push("h",o),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("v",l),h.push("h",-o-2*this.CORNER_RADIUS)),h.push("z"),this.svgBackground_.setAttribute("d",h.join(" "))},s.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},s.HorizontalFlyout.prototype.wheel_=function(o){var l=s.utils.getScrollDeltaPixels(o);if(l=l.x||l.y){var u=this.workspace_.getMetricsManager(),h=u.getScrollMetrics();l=u.getViewMetrics().left-h.left+l,this.workspace_.scrollbar.setX(l),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()}o.preventDefault(),o.stopPropagation()},s.HorizontalFlyout.prototype.layout_=function(o,l){this.workspace_.scale=this.targetWorkspace.scale;var u=this.MARGIN,h=u+this.tabWidth_;this.RTL&&(o=o.reverse());for(var b,_=0;b=o[_];_++)if("block"==b.type){for(var G,D=(b=b.block).getDescendants(!1),x=0;G=D[x];x++)G.isInFlyout=!0;b.render(),D=b.getSvgRoot(),x=b.getHeightWidth(),G=b.outputConnection?this.tabWidth_:0,b.moveBy(G=this.RTL?h+x.width:h-G,u),G=this.createRect_(b,G,u,x,_),h+=x.width+l[_],this.addBlockListeners_(D,b,G)}else"button"==b.type&&(this.initFlyoutButton_(b.button,h,u),h+=b.button.width+l[_])},s.HorizontalFlyout.prototype.isDragTowardWorkspace=function(o){o=Math.atan2(o.y,o.x)/Math.PI*180;var l=this.dragAngleRange_;return o<90+l&&o>90-l||o>-90-l&&o<-90+l},s.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var o=this.svgGroup_.getBoundingClientRect(),l=o.top;return this.toolboxPosition_==s.utils.toolbox.Position.TOP?new s.utils.Rect(-1e9,l+o.height,-1e9,1e9):new s.utils.Rect(l,1e9,-1e9,1e9)},s.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var h,o=0,l=this.workspace_.getTopBlocks(!1),u=0;h=l[u];u++)o=Math.max(o,h.getHeightWidth().height);if(o+=1.5*this.MARGIN,o*=this.workspace_.scale,this.height_!=(o+=s.Scrollbar.scrollbarThickness)){for(u=0;h=l[u];u++)h.flyoutRect_&&this.moveRectToBlock_(h.flyoutRect_,h);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=s.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+o),this.height_=o,this.position(),this.targetWorkspace.recordDragTargets()}},s.registry.register(s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,s.registry.DEFAULT,s.HorizontalFlyout),s.VerticalFlyout=function(o){s.VerticalFlyout.superClass_.constructor.call(this,o)},s.utils.object.inherits(s.VerticalFlyout,s.Flyout),s.VerticalFlyout.registryName="verticalFlyout",s.VerticalFlyout.prototype.setMetrics_=function(o){if(this.isVisible()){var l=this.workspace_.getMetricsManager(),u=l.getScrollMetrics(),h=l.getViewMetrics();l=l.getAbsoluteMetrics(),"number"==typeof o.y&&(this.workspace_.scrollY=-(u.top+(u.height-h.height)*o.y)),this.workspace_.translate(this.workspace_.scrollX+l.left,this.workspace_.scrollY+l.top)}},s.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var o=this.targetWorkspace.getMetricsManager(),l=o.getAbsoluteMetrics(),u=o.getViewMetrics();return o=o.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==s.utils.toolbox.Position.LEFT?o.width:u.width-this.width_:this.toolboxPosition_==s.utils.toolbox.Position.LEFT?0:u.width:this.toolboxPosition_==s.utils.toolbox.Position.LEFT?0:u.width+l.left-this.width_},s.VerticalFlyout.prototype.getY=function(){return 0},s.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var o=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=o.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,o.height-2*this.CORNER_RADIUS),o=this.getX();var l=this.getY();this.positionAt_(this.width_,this.height_,o,l)}},s.VerticalFlyout.prototype.setBackgroundPath_=function(o,l){var u=this.toolboxPosition_==s.utils.toolbox.Position.RIGHT,h=o+this.CORNER_RADIUS;(h=["M "+(u?h:0)+",0"]).push("h",u?-o:o),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,u?0:1,u?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("v",Math.max(0,l)),h.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,u?0:1,u?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),h.push("h",u?o:-o),h.push("z"),this.svgBackground_.setAttribute("d",h.join(" "))},s.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},s.VerticalFlyout.prototype.wheel_=function(o){var l=s.utils.getScrollDeltaPixels(o);if(l.y){var u=this.workspace_.getMetricsManager(),h=u.getScrollMetrics();l=u.getViewMetrics().top-h.top+l.y,this.workspace_.scrollbar.setY(l),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()}o.preventDefault(),o.stopPropagation()},s.VerticalFlyout.prototype.layout_=function(o,l){this.workspace_.scale=this.targetWorkspace.scale;for(var b,u=this.MARGIN,h=this.RTL?u:u+this.tabWidth_,_=0;b=o[_];_++)if("block"==b.type){for(var G,D=(b=b.block).getDescendants(!1),x=0;G=D[x];x++)G.isInFlyout=!0;b.render(),D=b.getSvgRoot(),x=b.getHeightWidth(),b.moveBy(G=b.outputConnection?h-this.tabWidth_:h,u),G=this.createRect_(b,this.RTL?G-x.width:G,u,x,_),this.addBlockListeners_(D,b,G),u+=x.height+l[_]}else"button"==b.type&&(this.initFlyoutButton_(b.button,h,u),u+=b.button.height+l[_])},s.VerticalFlyout.prototype.isDragTowardWorkspace=function(o){o=Math.atan2(o.y,o.x)/Math.PI*180;var l=this.dragAngleRange_;return o<l&&o>-l||o<-180+l||o>180-l},s.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var o=this.svgGroup_.getBoundingClientRect(),l=o.left;return this.toolboxPosition_==s.utils.toolbox.Position.LEFT?new s.utils.Rect(-1e9,1e9,-1e9,l+o.width):new s.utils.Rect(-1e9,1e9,l,1e9)},s.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var h,o=0,l=this.workspace_.getTopBlocks(!1),u=0;h=l[u];u++){var _=h.getHeightWidth().width;h.outputConnection&&(_-=this.tabWidth_),o=Math.max(o,_)}for(u=0;h=this.buttons_[u];u++)o=Math.max(o,h.width);if(o+=1.5*this.MARGIN+this.tabWidth_,o*=this.workspace_.scale,this.width_!=(o+=s.Scrollbar.scrollbarThickness)){for(u=0;h=l[u];u++){if(this.RTL){_=h.getRelativeToSurfaceXY().x;var b=o/this.workspace_.scale-this.MARGIN;h.outputConnection||(b-=this.tabWidth_),h.moveBy(b-_,0)}h.flyoutRect_&&this.moveRectToBlock_(h.flyoutRect_,h)}if(this.RTL)for(u=0;h=this.buttons_[u];u++)l=h.getPosition().y,h.moveTo(o/this.workspace_.scale-h.width-this.MARGIN-this.tabWidth_,l);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=s.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+o,this.targetWorkspace.scrollY),this.width_=o,this.position(),this.targetWorkspace.recordDragTargets()}},s.registry.register(s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,s.registry.DEFAULT,s.VerticalFlyout),s.FlyoutButton=function(o,l,u,h){this.workspace_=o,this.targetWorkspace_=l,this.text_=u.text,this.position_=new s.utils.Coordinate(0,0),this.isLabel_=h,this.callbackKey_=u.callbackKey||u.callbackkey,this.cssClass_=u["web-class"]||null,this.onMouseUpWrapper_=null,this.info=u},s.FlyoutButton.MARGIN_X=5,s.FlyoutButton.MARGIN_Y=2,s.FlyoutButton.prototype.width=0,s.FlyoutButton.prototype.height=0,s.FlyoutButton.prototype.createDom=function(){var o=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(o+=" "+this.cssClass_),this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:o},this.workspace_.getCanvas()),!this.isLabel_)var l=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);o=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var u=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),h=s.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(h+="\u200f"),u.textContent=h,this.isLabel_&&(this.svgText_=u,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var _=s.utils.style.getComputedStyle(u,"fontSize"),b=s.utils.style.getComputedStyle(u,"fontWeight"),D=s.utils.style.getComputedStyle(u,"fontFamily");return this.width=s.utils.dom.getFastTextWidthWithSizeString(u,_,b,D),h=s.utils.dom.measureFontMetrics(h,_,b,D),this.height=h.height,this.isLabel_||(this.width+=2*s.FlyoutButton.MARGIN_X,this.height+=2*s.FlyoutButton.MARGIN_Y,l.setAttribute("width",this.width),l.setAttribute("height",this.height)),o.setAttribute("width",this.width),o.setAttribute("height",this.height),u.setAttribute("x",this.width/2),u.setAttribute("y",this.height/2-h.height/2+h.baseline),this.updateTransform_(),this.onMouseUpWrapper_=s.browserEvents.conditionalBind(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},s.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},s.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},s.FlyoutButton.prototype.moveTo=function(o,l){this.position_.x=o,this.position_.y=l,this.updateTransform_()},s.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},s.FlyoutButton.prototype.getPosition=function(){return this.position_},s.FlyoutButton.prototype.getButtonText=function(){return this.text_},s.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},s.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&s.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&s.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},s.FlyoutButton.prototype.onMouseUp_=function(o){(o=this.targetWorkspace_.getGesture(o))&&o.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},s.Css.register(".blocklyFlyoutButton {,fill: #888;,cursor: default;,},.blocklyFlyoutButtonShadow {,fill: #666;,},.blocklyFlyoutButton:hover {,fill: #aaa;,},.blocklyFlyoutLabel {,cursor: default;,},.blocklyFlyoutLabelBackground {,opacity: 0;,}".split(",")),s.Generator=function(o){this.name_=o,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},s.Generator.prototype.INFINITE_LOOP_TRAP=null,s.Generator.prototype.STATEMENT_PREFIX=null,s.Generator.prototype.STATEMENT_SUFFIX=null,s.Generator.prototype.INDENT="  ",s.Generator.prototype.COMMENT_WRAP=60,s.Generator.prototype.ORDER_OVERRIDES=[],s.Generator.prototype.isInitialized=null,s.Generator.prototype.workspaceToCode=function(o){o||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),o=s.getMainWorkspace());var l=[];this.init(o),o=o.getTopBlocks(!0);for(var h,u=0;h=o[u];u++){var _=this.blockToCode(h);Array.isArray(_)&&(_=_[0]),_&&(h.outputConnection&&(_=this.scrubNakedValue(_),this.STATEMENT_PREFIX&&!h.suppressPrefixSuffix&&(_=this.injectId(this.STATEMENT_PREFIX,h)+_),this.STATEMENT_SUFFIX&&!h.suppressPrefixSuffix&&(_+=this.injectId(this.STATEMENT_SUFFIX,h))),l.push(_))}return l=l.join("\n"),(l=(l=(l=this.finish(l)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},s.Generator.prototype.prefixLines=function(o,l){return l+o.replace(/(?!\n$)\n/g,"\n"+l)},s.Generator.prototype.allNestedComments=function(o){var l=[];o=o.getDescendants(!0);for(var u=0;u<o.length;u++){var h=o[u].getCommentText();h&&l.push(h)}return l.length&&l.push(""),l.join("\n")},s.Generator.prototype.blockToCode=function(o,l){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!o)return"";if(!o.isEnabled())return l?"":this.blockToCode(o.getNextBlock());if(o.isInsertionMarker())return l?"":this.blockToCode(o.getChildren(!1)[0]);var u=this[o.type];if("function"!=typeof u)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+o.type+'".');if(u=u.call(o,o),Array.isArray(u)){if(!o.outputConnection)throw TypeError("Expecting string from statement block: "+o.type);return[this.scrub_(o,u[0],l),u[1]]}if("string"==typeof u)return this.STATEMENT_PREFIX&&!o.suppressPrefixSuffix&&(u=this.injectId(this.STATEMENT_PREFIX,o)+u),this.STATEMENT_SUFFIX&&!o.suppressPrefixSuffix&&(u+=this.injectId(this.STATEMENT_SUFFIX,o)),this.scrub_(o,u,l);if(null===u)return"";throw SyntaxError("Invalid code generated: "+u)},s.Generator.prototype.valueToCode=function(o,l,u){if(isNaN(u))throw TypeError("Expecting valid order from block: "+o.type);var h=o.getInputTargetBlock(l);if(!h||""===(l=this.blockToCode(h)))return"";if(!Array.isArray(l))throw TypeError("Expecting tuple from value block: "+h.type);if(o=l[0],l=l[1],isNaN(l))throw TypeError("Expecting valid order from value block: "+h.type);if(!o)return"";h=!1;var _=Math.floor(u),b=Math.floor(l);if(_<=b&&(_!=b||0!=_&&99!=_))for(h=!0,_=0;_<this.ORDER_OVERRIDES.length;_++)if(this.ORDER_OVERRIDES[_][0]==u&&this.ORDER_OVERRIDES[_][1]==l){h=!1;break}return h&&(o="("+o+")"),o},s.Generator.prototype.statementToCode=function(o,l){if(o=o.getInputTargetBlock(l),"string"!=typeof(l=this.blockToCode(o)))throw TypeError("Expecting code from statement block: "+(o&&o.type));return l&&(l=this.prefixLines(l,this.INDENT)),l},s.Generator.prototype.addLoopTrap=function(o,l){return this.INFINITE_LOOP_TRAP&&(o=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,l),this.INDENT)+o),this.STATEMENT_SUFFIX&&!l.suppressPrefixSuffix&&(o=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,l),this.INDENT)+o),this.STATEMENT_PREFIX&&!l.suppressPrefixSuffix&&(o+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,l),this.INDENT)),o},s.Generator.prototype.injectId=function(o,l){return l=l.id.replace(/\$/g,"$$$$"),o.replace(/%1/g,"'"+l+"'")},s.Generator.prototype.RESERVED_WORDS_="",s.Generator.prototype.addReservedWords=function(o){this.RESERVED_WORDS_+=o+","},s.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(s.Generator.prototype,"variableDB_",{get:function(){return s.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(o){s.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=o}}),s.Generator.prototype.provideFunction_=function(o,l){if(!this.definitions_[o]){var h,u=this.nameDB_.getDistinctName(o,s.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[o]=u,l=l.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,u);h!=l;)h=l,l=l.replace(/^(( {2})*) {2}/gm,"$1\0");l=l.replace(/\0/g,this.INDENT),this.definitions_[o]=l}return this.functionNames_[o]},s.Generator.prototype.init=function(o){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},s.Generator.prototype.scrub_=function(o,l,u){return l},s.Generator.prototype.finish=function(o){return delete this.definitions_,delete this.functionNames_,o},s.Generator.prototype.scrubNakedValue=function(o){return o},s.IToolboxItem=function(){},s.ISelectableToolboxItem=function(){},s.ICollapsibleToolboxItem=function(){},s.ToolboxItem=function(o,l,u){this.id_=o.toolboxitemid||s.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=u||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=o,this.parentToolbox_=l,this.workspace_=this.parentToolbox_.getWorkspace()},s.ToolboxItem.prototype.init=function(){},s.ToolboxItem.prototype.getDiv=function(){return null},s.ToolboxItem.prototype.getId=function(){return this.id_},s.ToolboxItem.prototype.getParent=function(){return null},s.ToolboxItem.prototype.getLevel=function(){return this.level_},s.ToolboxItem.prototype.isSelectable=function(){return!1},s.ToolboxItem.prototype.isCollapsible=function(){return!1},s.ToolboxItem.prototype.dispose=function(){},s.ToolboxCategory=function(o,l,u){s.ToolboxCategory.superClass_.constructor.call(this,o,l,u),this.name_=s.utils.replaceMessageReferences(o.name),this.colour_=this.getColour_(o),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),s.utils.object.mixin(this.cssConfig_,o.cssconfig||o.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(o)},s.utils.object.inherits(s.ToolboxCategory,s.ToolboxItem),s.ToolboxCategory.registrationName="category",s.ToolboxCategory.nestedPadding=19,s.ToolboxCategory.borderWidth=8,s.ToolboxCategory.defaultBackgroundColour="#57e",s.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},s.ToolboxCategory.prototype.parseContents_=function(o){var l=o.contents;if(o.custom)this.flyoutItems_=o.custom;else if(l){o=0;for(var u;u=l[o];o++)this.flyoutItems_.push(u)}},s.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},s.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),s.utils.aria.setRole(this.htmlDiv_,s.utils.aria.Role.TREEITEM),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.SELECTED,!1),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),s.utils.aria.setRole(this.iconDom_,s.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},s.ToolboxCategory.prototype.createContainer_=function(){var o=document.createElement("div");return s.utils.dom.addClass(o,this.cssConfig_.container),o},s.ToolboxCategory.prototype.createRowContainer_=function(){var o=document.createElement("div");s.utils.dom.addClass(o,this.cssConfig_.row);var l=s.ToolboxCategory.nestedPadding*this.getLevel();return l=l.toString()+"px",this.workspace_.RTL?o.style.paddingRight=l:o.style.paddingLeft=l,o},s.ToolboxCategory.prototype.createRowContentsContainer_=function(){var o=document.createElement("div");return s.utils.dom.addClass(o,this.cssConfig_.rowcontentcontainer),o},s.ToolboxCategory.prototype.createIconDom_=function(){var o=document.createElement("span");return this.parentToolbox_.isHorizontal()||s.utils.dom.addClass(o,this.cssConfig_.icon),o.style.display="inline-block",o},s.ToolboxCategory.prototype.createLabelDom_=function(o){var l=document.createElement("span");return l.setAttribute("id",this.getId()+".label"),l.textContent=o,s.utils.dom.addClass(l,this.cssConfig_.label),l},s.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},s.ToolboxCategory.prototype.addColourBorder_=function(o){o&&(o=s.ToolboxCategory.borderWidth+"px solid "+(o||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=o:this.rowDiv_.style.borderLeft=o)},s.ToolboxCategory.prototype.getColour_=function(o){var l=o.categorystyle||o.categoryStyle;return(o=o.colour)&&l?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):l?this.getColourfromStyle_(l):this.parseColour_(o)},s.ToolboxCategory.prototype.getColourfromStyle_=function(o){var l=this.workspace_.getTheme();if(o&&l){if((l=l.categoryStyles[o])&&l.colour)return this.parseColour_(l.colour);console.warn('Style "'+o+'" must exist and contain a colour value')}return""},s.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},s.ToolboxCategory.prototype.parseColour_=function(o){if(null==(o=s.utils.replaceMessageReferences(o))||""===o)return"";var l=Number(o);return isNaN(l)?(l=s.utils.colour.parse(o))?l:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+o),""):s.hueToHex(l)},s.ToolboxCategory.prototype.openIcon_=function(o){o&&(s.utils.dom.removeClasses(o,this.cssConfig_.closedicon),s.utils.dom.addClass(o,this.cssConfig_.openicon))},s.ToolboxCategory.prototype.closeIcon_=function(o){o&&(s.utils.dom.removeClasses(o,this.cssConfig_.openicon),s.utils.dom.addClass(o,this.cssConfig_.closedicon))},s.ToolboxCategory.prototype.setVisible_=function(o){this.htmlDiv_.style.display=o?"block":"none",this.isHidden_=!o,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},s.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},s.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},s.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},s.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var o=this;o.getParent();)if(!(o=o.getParent()).isExpanded())return!1;return!0},s.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},s.ToolboxCategory.prototype.onClick=function(o){},s.ToolboxCategory.prototype.setSelected=function(o){if(o){var l=this.parseColour_(s.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||l,s.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",s.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.SELECTED,o)},s.ToolboxCategory.prototype.setDisabled=function(o){this.isDisabled_=o,this.getDiv().setAttribute("disabled",o),o?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},s.ToolboxCategory.prototype.getName=function(){return this.name_},s.ToolboxCategory.prototype.getParent=function(){return this.parent_},s.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},s.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},s.ToolboxCategory.prototype.updateFlyoutContents=function(o){this.flyoutItems_=[],"string"==typeof o?this.toolboxItemDef_.custom=o:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=s.utils.toolbox.convertFlyoutDefToJsonArray(o)),this.parseContents_(this.toolboxItemDef_)},s.ToolboxCategory.prototype.dispose=function(){s.utils.dom.removeNode(this.htmlDiv_)},s.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),s.registry.register(s.registry.Type.TOOLBOX_ITEM,s.ToolboxCategory.registrationName,s.ToolboxCategory),s.ToolboxSeparator=function(o,l){s.ToolboxSeparator.superClass_.constructor.call(this,o,l),this.cssConfig_={container:"blocklyTreeSeparator"},s.utils.object.mixin(this.cssConfig_,o.cssconfig||o.cssConfig)},s.utils.object.inherits(s.ToolboxSeparator,s.ToolboxItem),s.ToolboxSeparator.registrationName="sep",s.ToolboxSeparator.prototype.init=function(){this.createDom_()},s.ToolboxSeparator.prototype.createDom_=function(){var o=document.createElement("div");return s.utils.dom.addClass(o,this.cssConfig_.container),this.htmlDiv_=o},s.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},s.ToolboxSeparator.prototype.dispose=function(){s.utils.dom.removeNode(this.htmlDiv_)},s.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),s.registry.register(s.registry.Type.TOOLBOX_ITEM,s.ToolboxSeparator.registrationName,s.ToolboxSeparator),s.CollapsibleToolboxCategory=function(o,l,u){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],s.CollapsibleToolboxCategory.superClass_.constructor.call(this,o,l,u)},s.utils.object.inherits(s.CollapsibleToolboxCategory,s.ToolboxCategory),s.CollapsibleToolboxCategory.registrationName="collapsibleCategory",s.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var o=s.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return o.contents="blocklyToolboxContents",o},s.CollapsibleToolboxCategory.prototype.parseContents_=function(o){var l=o.contents,u=!0;if(o.custom)this.flyoutItems_=o.custom;else if(l){o=0;for(var h;h=l[o];o++)!s.registry.hasItem(s.registry.Type.TOOLBOX_ITEM,h.kind)||h.kind.toLowerCase()==s.ToolboxSeparator.registrationName&&u?(this.flyoutItems_.push(h),u=!0):(this.createToolboxItem_(h),u=!1)}},s.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(o){var l=o.kind;"CATEGORY"==l.toUpperCase()&&s.utils.toolbox.isCategoryCollapsible(o)&&(l=s.CollapsibleToolboxCategory.registrationName),o=new(s.registry.getClass(s.registry.Type.TOOLBOX_ITEM,l))(o,this.parentToolbox_,this),this.toolboxItems_.push(o)},s.CollapsibleToolboxCategory.prototype.init=function(){s.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},s.CollapsibleToolboxCategory.prototype.createDom_=function(){s.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var o=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(o),s.utils.aria.setRole(this.subcategoriesDiv_,s.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},s.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var o=document.createElement("span");return this.parentToolbox_.isHorizontal()||(s.utils.dom.addClass(o,this.cssConfig_.icon),o.style.visibility="visible"),o.style.display="inline-block",o},s.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(o){var l=document.createElement("div");s.utils.dom.addClass(l,this.cssConfig_.contents);for(var u=0;u<o.length;u++){var h=o[u];h.init();var _=h.getDiv();l.appendChild(_),h.getClickTarget&&h.getClickTarget().setAttribute("id",h.getId())}return l},s.CollapsibleToolboxCategory.prototype.setExpanded=function(o){this.expanded_!=o&&((this.expanded_=o)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),s.utils.aria.setState(this.htmlDiv_,s.utils.aria.State.EXPANDED,o),this.parentToolbox_.handleToolboxItemResize())},s.CollapsibleToolboxCategory.prototype.setVisible_=function(o){this.htmlDiv_.style.display=o?"block":"none";for(var u,l=0;u=this.getChildToolboxItems()[l];l++)u.setVisible_(o);this.isHidden_=!o,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},s.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},s.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},s.CollapsibleToolboxCategory.prototype.onClick=function(o){this.toggleExpanded()},s.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},s.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},s.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},s.registry.register(s.registry.Type.TOOLBOX_ITEM,s.CollapsibleToolboxCategory.registrationName,s.CollapsibleToolboxCategory),s.Events.ToolboxItemSelect=function(o,l,u){s.Events.ToolboxItemSelect.superClass_.constructor.call(this,u),this.oldItem=o,this.newItem=l},s.utils.object.inherits(s.Events.ToolboxItemSelect,s.Events.UiBase),s.Events.ToolboxItemSelect.prototype.type=s.Events.TOOLBOX_ITEM_SELECT,s.Events.ToolboxItemSelect.prototype.toJson=function(){var o=s.Events.ToolboxItemSelect.superClass_.toJson.call(this);return o.oldItem=this.oldItem,o.newItem=this.newItem,o},s.Events.ToolboxItemSelect.prototype.fromJson=function(o){s.Events.ToolboxItemSelect.superClass_.fromJson.call(this,o),this.oldItem=o.oldItem,this.newItem=o.newItem},s.registry.register(s.registry.Type.EVENT,s.Events.TOOLBOX_ITEM_SELECT,s.Events.ToolboxItemSelect),s.IAutoHideable=function(){},s.IStyleable=function(){},s.IToolbox=function(){},s.Toolbox=function(o){s.Toolbox.superClass_.constructor.call(this),this.workspace_=o,this.id="toolbox",this.toolboxDef_=o.options.languageTree||{contents:[]},this.horizontalLayout_=o.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=o.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=o.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},s.utils.object.inherits(s.Toolbox,s.DeleteArea),s.Toolbox.prototype.onShortcut=function(o){return!1},s.Toolbox.prototype.init=function(){var o=this.workspace_,l=o.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),s.utils.dom.insertAfter(this.flyout_.createDom("svg"),l),this.setVisible(!0),this.flyout_.init(o),this.render(this.toolboxDef_),(o=o.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),o.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[s.ComponentManager.Capability.AUTOHIDEABLE,s.ComponentManager.Capability.DELETE_AREA,s.ComponentManager.Capability.DRAG_TARGET]})},s.Toolbox.prototype.createDom_=function(o){o=o.getParentSvg();var l=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,s.utils.aria.setRole(this.contentsDiv_,s.utils.aria.Role.TREE),l.appendChild(this.contentsDiv_),o.parentNode.insertBefore(l,o),this.attachEvents_(l,this.contentsDiv_),l},s.Toolbox.prototype.createContainer_=function(){var o=document.createElement("div");return o.setAttribute("layout",this.isHorizontal()?"h":"v"),s.utils.dom.addClass(o,"blocklyToolboxDiv"),s.utils.dom.addClass(o,"blocklyNonSelectable"),o.setAttribute("dir",this.RTL?"RTL":"LTR"),o},s.Toolbox.prototype.createContentsContainer_=function(){var o=document.createElement("div");return s.utils.dom.addClass(o,"blocklyToolboxContents"),this.isHorizontal()&&(o.style.flexDirection="row"),o},s.Toolbox.prototype.attachEvents_=function(o,l){o=s.browserEvents.conditionalBind(o,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(o),l=s.browserEvents.conditionalBind(l,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(l)},s.Toolbox.prototype.onClick_=function(o){if(s.utils.isRightButton(o)||o.target==this.HtmlDiv)s.hideChaff(!1);else{var l=o.target.getAttribute("id");l&&(l=this.getToolboxItemById(l)).isSelectable()&&(this.setSelectedItem(l),l.onClick(o)),s.hideChaff(!0)}s.Touch.clearTouchIdentifier()},s.Toolbox.prototype.onKeyDown_=function(o){var l=!1;switch(o.keyCode){case s.utils.KeyCodes.DOWN:l=this.selectNext_();break;case s.utils.KeyCodes.UP:l=this.selectPrevious_();break;case s.utils.KeyCodes.LEFT:l=this.selectParent_();break;case s.utils.KeyCodes.RIGHT:l=this.selectChild_();break;case s.utils.KeyCodes.ENTER:case s.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),l=!0);break;default:l=!1}!l&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(l=this.selectedItem_.onKeyDown(o)),l&&o.preventDefault()},s.Toolbox.prototype.createFlyout_=function(){var o=this.workspace_,l=new s.Options({parentWorkspace:o,rtl:o.RTL,oneBasedIndex:o.options.oneBasedIndex,horizontalLayout:o.horizontalLayout,renderer:o.options.renderer,rendererOverrides:o.options.rendererOverrides,move:{scrollbars:!0}});return l.toolboxPosition=o.options.toolboxPosition,new(s.registry.getClassFromOptions(o.horizontalLayout?s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX:s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,o.options,!0))(l)},s.Toolbox.prototype.render=function(o){this.toolboxDef_=o;for(var l=0;l<this.contents_.length;l++){var u=this.contents_[l];u&&u.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(o.contents),this.position(),this.handleToolboxItemResize()},s.Toolbox.prototype.renderContents_=function(o){for(var h,l=document.createDocumentFragment(),u=0;h=o[u];u++)this.createToolboxItem_(h,l);this.contentsDiv_.appendChild(l)},s.Toolbox.prototype.createToolboxItem_=function(o,l){var u=o.kind;"CATEGORY"==u.toUpperCase()&&s.utils.toolbox.isCategoryCollapsible(o)&&(u=s.CollapsibleToolboxCategory.registrationName),(u=s.registry.getClass(s.registry.Type.TOOLBOX_ITEM,u.toLowerCase()))&&(o=new u(o,this),this.addToolboxItem_(o),o.init(),(u=o.getDiv())&&l.appendChild(u),o.getClickTarget&&o.getClickTarget().setAttribute("id",o.getId()))},s.Toolbox.prototype.addToolboxItem_=function(o){if(this.contents_.push(o),this.contentMap_[o.getId()]=o,o.isCollapsible())for(var u,l=0;u=o.getChildToolboxItems()[l];l++)this.addToolboxItem_(u)},s.Toolbox.prototype.getToolboxItems=function(){return this.contents_},s.Toolbox.prototype.addStyle=function(o){s.utils.dom.addClass(this.HtmlDiv,o)},s.Toolbox.prototype.removeStyle=function(o){s.utils.dom.removeClass(this.HtmlDiv,o)},s.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var o=this.HtmlDiv.getBoundingClientRect(),l=o.top,u=l+o.height,h=o.left;return o=h+o.width,this.toolboxPosition==s.utils.toolbox.Position.TOP?new s.utils.Rect(-1e7,u,-1e7,1e7):this.toolboxPosition==s.utils.toolbox.Position.BOTTOM?new s.utils.Rect(l,1e7,-1e7,1e7):this.toolboxPosition==s.utils.toolbox.Position.LEFT?new s.utils.Rect(-1e7,1e7,-1e7,o):new s.utils.Rect(-1e7,1e7,h,1e7)},s.Toolbox.prototype.wouldDelete=function(o,l){return this.updateWouldDelete_(o instanceof s.BlockSvg?!o.getParent()&&o.isDeletable():o.isDeletable()),this.wouldDelete_},s.Toolbox.prototype.onDragEnter=function(o){this.updateCursorDeleteStyle_(!0)},s.Toolbox.prototype.onDragExit=function(o){this.updateCursorDeleteStyle_(!1)},s.Toolbox.prototype.onDrop=function(o){this.updateCursorDeleteStyle_(!1)},s.Toolbox.prototype.updateWouldDelete_=function(o){o!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=o,this.updateCursorDeleteStyle_(!0))},s.Toolbox.prototype.updateCursorDeleteStyle_=function(o){var l=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";o?this.addStyle(l):this.removeStyle(l)},s.Toolbox.prototype.getToolboxItemById=function(o){return this.contentMap_[o]||null},s.Toolbox.prototype.getWidth=function(){return this.width_},s.Toolbox.prototype.getHeight=function(){return this.height_},s.Toolbox.prototype.getFlyout=function(){return this.flyout_},s.Toolbox.prototype.getWorkspace=function(){return this.workspace_},s.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},s.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},s.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},s.Toolbox.prototype.position=function(){var o=this.workspace_.getMetrics(),l=this.HtmlDiv;l&&(this.horizontalLayout_?(l.style.left="0",l.style.height="auto",l.style.width="100%",this.height_=l.offsetHeight,this.width_=o.viewWidth,this.toolboxPosition==s.utils.toolbox.Position.TOP?l.style.top="0":l.style.bottom="0"):(this.toolboxPosition==s.utils.toolbox.Position.RIGHT?l.style.right="0":l.style.left="0",l.style.height="100%",this.width_=l.offsetWidth,this.height_=o.viewHeight),this.flyout_.position())},s.Toolbox.prototype.handleToolboxItemResize=function(){var o=this.workspace_,l=this.HtmlDiv.getBoundingClientRect();o.translate(this.toolboxPosition==s.utils.toolbox.Position.LEFT?o.scrollX+l.width:o.scrollX,this.toolboxPosition==s.utils.toolbox.Position.TOP?o.scrollY+l.height:o.scrollY),s.svgResize(o)},s.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},s.Toolbox.prototype.refreshTheme=function(){for(var o=0;o<this.contents_.length;o++){var l=this.contents_[o];l.refreshTheme&&l.refreshTheme()}},s.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},s.Toolbox.prototype.setVisible=function(o){this.isVisible_!==o&&(this.HtmlDiv.style.display=o?"block":"none",this.isVisible_=o,this.workspace_.recordDragTargets())},s.Toolbox.prototype.autoHide=function(o){!o&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},s.Toolbox.prototype.setSelectedItem=function(o){var l=this.selectedItem_;!o&&!l||o&&!o.isSelectable()||(this.shouldDeselectItem_(l,o)&&null!=l&&this.deselectItem_(l),this.shouldSelectItem_(l,o)&&null!=o&&this.selectItem_(l,o),this.updateFlyout_(l,o),this.fireSelectEvent_(l,o))},s.Toolbox.prototype.shouldDeselectItem_=function(o,l){return null!=o&&(!o.isCollapsible()||o!=l)},s.Toolbox.prototype.shouldSelectItem_=function(o,l){return null!=l&&l!=o},s.Toolbox.prototype.deselectItem_=function(o){this.selectedItem_=null,this.previouslySelectedItem_=o,o.setSelected(!1),s.utils.aria.setState(this.contentsDiv_,s.utils.aria.State.ACTIVEDESCENDANT,"")},s.Toolbox.prototype.selectItem_=function(o,l){this.selectedItem_=l,this.previouslySelectedItem_=o,l.setSelected(!0),s.utils.aria.setState(this.contentsDiv_,s.utils.aria.State.ACTIVEDESCENDANT,l.getId())},s.Toolbox.prototype.selectItemByPosition=function(o){-1<o&&o<this.contents_.length&&(o=this.contents_[o]).isSelectable()&&this.setSelectedItem(o)},s.Toolbox.prototype.updateFlyout_=function(o,l){(o!=l||l.isCollapsible())&&l&&l.getContents().length?(this.flyout_.show(l.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},s.Toolbox.prototype.fireSelectEvent_=function(o,l){var u=o&&o.getName(),h=l&&l.getName();o==l&&(h=null),o=new(s.Events.get(s.Events.TOOLBOX_ITEM_SELECT))(u,h,this.workspace_.id),s.Events.fire(o)},s.Toolbox.prototype.selectParent_=function(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))},s.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var o=this.selectedItem_;return o.isExpanded()?this.selectNext_():o.setExpanded(!0),!0},s.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var o=this.contents_.indexOf(this.selectedItem_)+1;if(-1<o&&o<this.contents_.length){for(var l=this.contents_[o];l&&!l.isSelectable();)l=this.contents_[++o];if(l&&l.isSelectable())return this.setSelectedItem(l),!0}return!1},s.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var o=this.contents_.indexOf(this.selectedItem_)-1;if(-1<o&&o<this.contents_.length){for(var l=this.contents_[o];l&&!l.isSelectable();)l=this.contents_[--o];if(l&&l.isSelectable())return this.setSelectedItem(l),!0}return!1},s.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var o=0;o<this.contents_.length;o++)this.contents_[o].dispose();for(o=0;o<this.boundEvents_.length;o++)s.browserEvents.unbind(this.boundEvents_[o]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),s.utils.dom.removeNode(this.HtmlDiv)},s.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),s.registry.register(s.registry.Type.TOOLBOX,s.registry.DEFAULT,s.Toolbox),s.Events.TrashcanOpen=function(o,l){s.Events.TrashcanOpen.superClass_.constructor.call(this,l),this.isOpen=o},s.utils.object.inherits(s.Events.TrashcanOpen,s.Events.UiBase),s.Events.TrashcanOpen.prototype.type=s.Events.TRASHCAN_OPEN,s.Events.TrashcanOpen.prototype.toJson=function(){var o=s.Events.TrashcanOpen.superClass_.toJson.call(this);return o.isOpen=this.isOpen,o},s.Events.TrashcanOpen.prototype.fromJson=function(o){s.Events.TrashcanOpen.superClass_.fromJson.call(this,o),this.isOpen=o.isOpen},s.registry.register(s.registry.Type.EVENT,s.Events.TRASHCAN_OPEN,s.Events.TrashcanOpen),s.IPositionable=function(){},s.uiPosition={},s.uiPosition.verticalPosition={TOP:0,BOTTOM:1},s.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},s.uiPosition.bumpDirection={UP:0,DOWN:1},s.uiPosition.getStartPositionRect=function(o,l,u,h,_,b){var D=b.scrollbar&&b.scrollbar.canScrollVertically();return o.horizontal===s.uiPosition.horizontalPosition.LEFT?(u=_.absoluteMetrics.left+u,D&&b.RTL&&(u+=s.Scrollbar.scrollbarThickness)):(u=_.absoluteMetrics.left+_.viewMetrics.width-l.width-u,D&&!b.RTL&&(u-=s.Scrollbar.scrollbarThickness)),o.vertical===s.uiPosition.verticalPosition.TOP?o=_.absoluteMetrics.top+h:(o=_.absoluteMetrics.top+_.viewMetrics.height-l.height-h,b.scrollbar&&b.scrollbar.canScrollHorizontally()&&(o-=s.Scrollbar.scrollbarThickness)),new s.utils.Rect(o,o+l.height,u,u+l.width)},s.uiPosition.getCornerOppositeToolbox=function(o,l){return{horizontal:l.toolboxMetrics.position===s.utils.toolbox.Position.LEFT||o.horizontalLayout&&!o.RTL?s.uiPosition.horizontalPosition.RIGHT:s.uiPosition.horizontalPosition.LEFT,vertical:l.toolboxMetrics.position===s.utils.toolbox.Position.BOTTOM?s.uiPosition.verticalPosition.TOP:s.uiPosition.verticalPosition.BOTTOM}},s.uiPosition.bumpPositionRect=function(o,l,u,h){for(var G,_=o.left,b=o.right-o.left,D=o.bottom-o.top,x=0;G=h[x];x++)o.intersects(G)&&(o=new s.utils.Rect(o=u===s.uiPosition.bumpDirection.UP?G.top-D-l:G.bottom+l,o+D,_,_+b),x=-1);return o},s.Trashcan=function(o){s.Trashcan.superClass_.constructor.call(this),this.workspace_=o,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(o=new s.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(o.toolboxPosition=this.workspace_.toolboxPosition==s.utils.toolbox.Position.TOP?s.utils.toolbox.Position.BOTTOM:s.utils.toolbox.Position.TOP,this.flyout=new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(o)):(o.toolboxPosition=this.workspace_.toolboxPosition==s.utils.toolbox.Position.RIGHT?s.utils.toolbox.Position.LEFT:s.utils.toolbox.Position.RIGHT,this.flyout=new(s.registry.getClassFromOptions(s.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(o)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},s.utils.object.inherits(s.Trashcan,s.DeleteArea),s.Trashcan.prototype.WIDTH_=47,s.Trashcan.prototype.BODY_HEIGHT_=44,s.Trashcan.prototype.LID_HEIGHT_=16,s.Trashcan.prototype.MARGIN_VERTICAL_=20,s.Trashcan.prototype.MARGIN_HORIZONTAL_=20,s.Trashcan.prototype.MARGIN_HOTSPOT_=10,s.Trashcan.prototype.SPRITE_LEFT_=0,s.Trashcan.prototype.SPRITE_TOP_=32,s.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,s.Trashcan.ANIMATION_LENGTH_=80,s.Trashcan.ANIMATION_FRAMES_=4,s.Trashcan.OPACITY_MIN_=.4,s.Trashcan.OPACITY_MAX_=.8,s.Trashcan.MAX_LID_ANGLE_=45,s.Trashcan.prototype.isLidOpen=!1,s.Trashcan.prototype.minOpenness_=0,s.Trashcan.prototype.svgGroup_=null,s.Trashcan.prototype.svgLid_=null,s.Trashcan.prototype.lidTask_=0,s.Trashcan.prototype.lidOpen_=0,s.Trashcan.prototype.left_=0,s.Trashcan.prototype.top_=0,s.Trashcan.prototype.initialized_=!1,s.Trashcan.prototype.createDom=function(){this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyTrash"},null);var o=String(Math.random()).substring(2),l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+o},this.svgGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},l);var u=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,x:-this.SPRITE_LEFT_,height:s.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+o+")"},this.svgGroup_);return u.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+o},this.svgGroup_),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},l),this.svgLid_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,x:-this.SPRITE_LEFT_,height:s.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+o+")"},this.svgGroup_),this.svgLid_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),s.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),s.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),s.browserEvents.bind(u,"mouseover",this,this.mouseOver_),s.browserEvents.bind(u,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},s.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(s.utils.dom.insertAfter(this.flyout.createDom(s.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[s.ComponentManager.Capability.AUTOHIDEABLE,s.ComponentManager.Capability.DELETE_AREA,s.ComponentManager.Capability.DRAG_TARGET,s.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},s.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(s.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},s.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},s.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},s.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var o=this.contents_.map(s.Xml.textToDom);this.flyout.show(o),this.fireUiEvent_(!0)}},s.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},s.Trashcan.prototype.autoHide=function(o){!o&&this.flyout&&this.closeFlyout()},s.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},s.Trashcan.prototype.position=function(o,l){if(this.initialized_){var u=s.uiPosition.getCornerOppositeToolbox(this.workspace_,o);o=s.uiPosition.getStartPositionRect(u,new s.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,o,this.workspace_),l=s.uiPosition.bumpPositionRect(o,this.MARGIN_VERTICAL_,u.vertical===s.uiPosition.verticalPosition.TOP?s.uiPosition.bumpDirection.DOWN:s.uiPosition.bumpDirection.UP,l),this.top_=l.top,this.left_=l.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},s.Trashcan.prototype.getBoundingRectangle=function(){return new s.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},s.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var o=this.svgGroup_.getBoundingClientRect(),l=o.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return new s.utils.Rect(l,l+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,o=o.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,o+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},s.Trashcan.prototype.onDragOver=function(o){this.setLidOpen(this.wouldDelete_)},s.Trashcan.prototype.onDragExit=function(o){this.setLidOpen(!1)},s.Trashcan.prototype.onDrop=function(o){setTimeout(this.setLidOpen.bind(this,!1),100)},s.Trashcan.prototype.setLidOpen=function(o){this.isLidOpen!=o&&(clearTimeout(this.lidTask_),this.isLidOpen=o,this.animateLid_())},s.Trashcan.prototype.animateLid_=function(){var o=s.Trashcan.ANIMATION_FRAMES_,l=1/(o+1);this.lidOpen_+=this.isLidOpen?l:-l,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*s.Trashcan.MAX_LID_ANGLE_),this.svgGroup_.style.opacity=(l=s.Trashcan.OPACITY_MIN_)+this.lidOpen_*(s.Trashcan.OPACITY_MAX_-l),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),s.Trashcan.ANIMATION_LENGTH_/o))},s.Trashcan.prototype.setLidAngle_=function(o){var l=this.workspace_.toolboxPosition==s.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(l?-o:o)+","+(l?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},s.Trashcan.prototype.setMinOpenness_=function(o){this.minOpenness_=o,this.isLidOpen||this.setLidAngle_(o*s.Trashcan.MAX_LID_ANGLE_)},s.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},s.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},s.Trashcan.prototype.fireUiEvent_=function(o){o=new(s.Events.get(s.Events.TRASHCAN_OPEN))(o,this.workspace_.id),s.Events.fire(o)},s.Trashcan.prototype.blockMouseDownWhenOpenable_=function(o){!this.contentsIsOpen()&&this.hasContents_()&&o.stopPropagation()},s.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},s.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},s.Trashcan.prototype.onDelete_=function(o){if(!(0>=this.workspace_.options.maxTrashcanContents)&&o.type==s.Events.BLOCK_DELETE&&o.oldXml.tagName&&"shadow"!=o.oldXml.tagName.toLowerCase()&&(o=this.cleanBlockXML_(o.oldXml),-1==this.contents_.indexOf(o))){for(this.contents_.unshift(o);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},s.Trashcan.prototype.cleanBlockXML_=function(o){for(var l=o=o.cloneNode(!0);l;){l.removeAttribute&&(l.removeAttribute("x"),l.removeAttribute("y"),l.removeAttribute("id"),l.removeAttribute("disabled"),"comment"==l.nodeName&&(l.removeAttribute("h"),l.removeAttribute("w"),l.removeAttribute("pinned")));var u=l.firstChild||l.nextSibling;if(!u)for(u=l.parentNode;u;){if(u.nextSibling){u=u.nextSibling;break}u=u.parentNode}l=u}return s.Xml.domToText(o)},s.VariablesDynamic={},s.VariablesDynamic.onCreateVariableButtonClick_String=function(o){s.Variables.createVariableButtonHandler(o.getTargetWorkspace(),void 0,"String")},s.VariablesDynamic.onCreateVariableButtonClick_Number=function(o){s.Variables.createVariableButtonHandler(o.getTargetWorkspace(),void 0,"Number")},s.VariablesDynamic.onCreateVariableButtonClick_Colour=function(o){s.Variables.createVariableButtonHandler(o.getTargetWorkspace(),void 0,"Colour")},s.VariablesDynamic.flyoutCategory=function(o){var l=[],u=document.createElement("button");return u.setAttribute("text",s.Msg.NEW_STRING_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),l.push(u),(u=document.createElement("button")).setAttribute("text",s.Msg.NEW_NUMBER_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),l.push(u),(u=document.createElement("button")).setAttribute("text",s.Msg.NEW_COLOUR_VARIABLE),u.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),l.push(u),o.registerButtonCallback("CREATE_VARIABLE_STRING",s.VariablesDynamic.onCreateVariableButtonClick_String),o.registerButtonCallback("CREATE_VARIABLE_NUMBER",s.VariablesDynamic.onCreateVariableButtonClick_Number),o.registerButtonCallback("CREATE_VARIABLE_COLOUR",s.VariablesDynamic.onCreateVariableButtonClick_Colour),o=s.VariablesDynamic.flyoutCategoryBlocks(o),l.concat(o)},s.VariablesDynamic.flyoutCategoryBlocks=function(o){var l=[];if(0<(o=o.getAllVariables()).length){if(s.Blocks.variables_set_dynamic){var u=o[o.length-1],h=s.utils.xml.createElement("block");h.setAttribute("type","variables_set_dynamic"),h.setAttribute("gap",24),h.appendChild(s.Variables.generateVariableFieldDom(u)),l.push(h)}if(s.Blocks.variables_get_dynamic){o.sort(s.VariableModel.compareByName),u=0;for(var _;_=o[u];u++)(h=s.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),h.setAttribute("gap",8),h.appendChild(s.Variables.generateVariableFieldDom(_)),l.push(h)}}return l},s.ZoomControls=function(o){this.workspace_=o,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},s.ZoomControls.prototype.WIDTH_=32,s.ZoomControls.prototype.HEIGHT_=32,s.ZoomControls.prototype.SMALL_SPACING_=2,s.ZoomControls.prototype.LARGE_SPACING_=11,s.ZoomControls.prototype.MARGIN_VERTICAL_=20,s.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,s.ZoomControls.prototype.svgGroup_=null,s.ZoomControls.prototype.left_=0,s.ZoomControls.prototype.top_=0,s.ZoomControls.prototype.initialized_=!1,s.ZoomControls.prototype.createDom=function(){this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{},null);var o=String(Math.random()).substring(2);return this.createZoomOutSvg_(o),this.createZoomInSvg_(o),this.workspace_.isMovable()&&this.createZoomResetSvg_(o),this.svgGroup_},s.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[s.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},s.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&s.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&s.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&s.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&s.browserEvents.unbind(this.onZoomOutWrapper_)},s.ZoomControls.prototype.getBoundingRectangle=function(){var o=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(o+=this.LARGE_SPACING_+this.HEIGHT_),new s.utils.Rect(this.top_,this.top_+o,this.left_,this.left_+this.WIDTH_)},s.ZoomControls.prototype.position=function(o,l){if(this.initialized_){var u=s.uiPosition.getCornerOppositeToolbox(this.workspace_,o),h=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(h+=this.LARGE_SPACING_+this.HEIGHT_),o=s.uiPosition.getStartPositionRect(u,new s.utils.Size(this.WIDTH_,h),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,o,this.workspace_),l=s.uiPosition.bumpPositionRect(o,this.MARGIN_VERTICAL_,(u=u.vertical)===s.uiPosition.verticalPosition.TOP?s.uiPosition.bumpDirection.DOWN:s.uiPosition.bumpDirection.UP,l),u===s.uiPosition.verticalPosition.TOP?(this.zoomInGroup_.setAttribute("transform","translate(0, "+(u=this.SMALL_SPACING_+this.HEIGHT_)+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(u+this.LARGE_SPACING_+this.HEIGHT_)+")")):(this.zoomInGroup_.setAttribute("transform","translate(0, "+(u=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0)+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(u+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=l.top,this.left_=l.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},s.ZoomControls.prototype.createZoomOutSvg_=function(o){this.zoomOutGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+o},this.zoomOutGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:32,height:32},l),s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,height:s.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+o+")"},this.zoomOutGroup_).setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),this.onZoomOutWrapper_=s.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},s.ZoomControls.prototype.createZoomInSvg_=function(o){this.zoomInGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+o},this.zoomInGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:32,height:32},l),s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,height:s.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+o+")"},this.zoomInGroup_).setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),this.onZoomInWrapper_=s.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},s.ZoomControls.prototype.zoom_=function(o,l){this.workspace_.markFocused(),this.workspace_.zoomCenter(o),this.fireZoomEvent_(),s.Touch.clearTouchIdentifier(),l.stopPropagation(),l.preventDefault()},s.ZoomControls.prototype.createZoomResetSvg_=function(o){this.zoomResetGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var l=s.utils.dom.createSvgElement(s.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+o},this.zoomResetGroup_);s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:32,height:32},l),s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{width:s.SPRITE.width,height:s.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+o+")"},this.zoomResetGroup_).setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+s.SPRITE.url),this.onZoomResetWrapper_=s.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},s.ZoomControls.prototype.resetZoom_=function(o){this.workspace_.markFocused();var l=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(l),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),s.Touch.clearTouchIdentifier(),o.stopPropagation(),o.preventDefault()},s.ZoomControls.prototype.fireZoomEvent_=function(){var o=new(s.Events.get(s.Events.CLICK))(null,this.workspace_.id,"zoom_controls");s.Events.fire(o)},s.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),s.ShortcutItems={},s.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},s.ShortcutItems.registerEscape=function(){var o={name:s.ShortcutItems.names.ESCAPE,preconditionFn:function(l){return!l.options.readOnly},callback:function(){return s.hideChaff(),!0}};s.ShortcutRegistry.registry.register(o),s.ShortcutRegistry.registry.addKeyMapping(s.utils.KeyCodes.ESC,o.name)},s.ShortcutItems.registerDelete=function(){var o={name:s.ShortcutItems.names.DELETE,preconditionFn:function(l){return!l.options.readOnly&&s.selected&&s.selected.isDeletable()},callback:function(l,u){return u.preventDefault(),!s.Gesture.inProgress()&&(s.deleteBlock(s.selected),!0)}};s.ShortcutRegistry.registry.register(o),s.ShortcutRegistry.registry.addKeyMapping(s.utils.KeyCodes.DELETE,o.name),s.ShortcutRegistry.registry.addKeyMapping(s.utils.KeyCodes.BACKSPACE,o.name)},s.ShortcutItems.registerCopy=function(){var o={name:s.ShortcutItems.names.COPY,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()&&s.selected&&s.selected.isDeletable()&&s.selected.isMovable()},callback:function(u,h){return h.preventDefault(),s.hideChaff(),s.copy(s.selected),!0}};s.ShortcutRegistry.registry.register(o);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.C,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.C,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.C,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name)},s.ShortcutItems.registerCut=function(){var o={name:s.ShortcutItems.names.CUT,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()&&s.selected&&s.selected.isDeletable()&&s.selected.isMovable()&&!s.selected.workspace.isFlyout},callback:function(){return s.copy(s.selected),s.deleteBlock(s.selected),!0}};s.ShortcutRegistry.registry.register(o);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.X,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.X,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.X,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name)},s.ShortcutItems.registerPaste=function(){var o={name:s.ShortcutItems.names.PASTE,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()},callback:function(){return s.paste()}};s.ShortcutRegistry.registry.register(o);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.V,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.V,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.V,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name)},s.ShortcutItems.registerUndo=function(){var o={name:s.ShortcutItems.names.UNDO,preconditionFn:function(u){return!u.options.readOnly&&!s.Gesture.inProgress()},callback:function(u){return s.hideChaff(),u.undo(!1),!0}};s.ShortcutRegistry.registry.register(o);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name)},s.ShortcutItems.registerRedo=function(){var o={name:s.ShortcutItems.names.REDO,preconditionFn:function(u){return!s.Gesture.inProgress()&&!u.options.readOnly},callback:function(u){return s.hideChaff(),u.undo(!0),!0}};s.ShortcutRegistry.registry.register(o);var l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.SHIFT,s.utils.KeyCodes.CTRL]);s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.SHIFT,s.utils.KeyCodes.ALT]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Z,[s.utils.KeyCodes.SHIFT,s.utils.KeyCodes.META]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name),l=s.ShortcutRegistry.registry.createSerializedKey(s.utils.KeyCodes.Y,[s.utils.KeyCodes.CTRL]),s.ShortcutRegistry.registry.addKeyMapping(l,o.name)},s.ShortcutItems.registerDefaultShortcuts=function(){s.ShortcutItems.registerEscape(),s.ShortcutItems.registerDelete(),s.ShortcutItems.registerCopy(),s.ShortcutItems.registerCut(),s.ShortcutItems.registerPaste(),s.ShortcutItems.registerUndo(),s.ShortcutItems.registerRedo()},s.ShortcutItems.registerDefaultShortcuts(),s.ContextMenuItems={},s.ContextMenuItems.registerUndo=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.UNDO},preconditionFn:function(o){return 0<o.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(o){o.workspace.undo(!1)},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},s.ContextMenuItems.registerRedo=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.REDO},preconditionFn:function(o){return 0<o.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(o){o.workspace.undo(!0)},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},s.ContextMenuItems.registerCleanup=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.CLEAN_UP},preconditionFn:function(o){return o.workspace.isMovable()?1<o.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(o){o.workspace.cleanUp()},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},s.ContextMenuItems.toggleOption_=function(o,l){for(var u=0,h=0;h<l.length;h++)for(var _=l[h];_;)setTimeout(_.setCollapsed.bind(_,o),u),_=_.getNextBlock(),u+=10},s.ContextMenuItems.registerCollapse=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.COLLAPSE_ALL},preconditionFn:function(o){if(o.workspace.options.collapse){o=o.workspace.getTopBlocks(!1);for(var l=0;l<o.length;l++)for(var u=o[l];u;){if(!u.isCollapsed())return"enabled";u=u.getNextBlock()}return"disabled"}return"hidden"},callback:function(o){s.ContextMenuItems.toggleOption_(!0,o.workspace.getTopBlocks(!0))},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},s.ContextMenuItems.registerExpand=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.EXPAND_ALL},preconditionFn:function(o){if(o.workspace.options.collapse){o=o.workspace.getTopBlocks(!1);for(var l=0;l<o.length;l++)for(var u=o[l];u;){if(u.isCollapsed())return"enabled";u=u.getNextBlock()}return"disabled"}return"hidden"},callback:function(o){s.ContextMenuItems.toggleOption_(!1,o.workspace.getTopBlocks(!0))},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},s.ContextMenuItems.addDeletableBlocks_=function(o,l){if(o.isDeletable())Array.prototype.push.apply(l,o.getDescendants(!1));else{o=o.getChildren(!1);for(var u=0;u<o.length;u++)s.ContextMenuItems.addDeletableBlocks_(o[u],l)}},s.ContextMenuItems.getDeletableBlocks_=function(o){var l=[];o=o.getTopBlocks(!0);for(var u=0;u<o.length;u++)s.ContextMenuItems.addDeletableBlocks_(o[u],l);return l},s.ContextMenuItems.deleteNext_=function(o,l){s.Events.setGroup(l);var u=o.shift();u&&(u.workspace?(u.dispose(!1,!0),setTimeout(s.ContextMenuItems.deleteNext_,10,o,l)):s.ContextMenuItems.deleteNext_(o,l)),s.Events.setGroup(!1)},s.ContextMenuItems.registerDeleteAll=function(){s.ContextMenuRegistry.registry.register({displayText:function(o){if(o.workspace)return 1==(o=s.ContextMenuItems.getDeletableBlocks_(o.workspace).length)?s.Msg.DELETE_BLOCK:s.Msg.DELETE_X_BLOCKS.replace("%1",String(o))},preconditionFn:function(o){if(o.workspace)return 0<s.ContextMenuItems.getDeletableBlocks_(o.workspace).length?"enabled":"disabled"},callback:function(o){if(o.workspace){o.workspace.cancelCurrentGesture();var l=s.ContextMenuItems.getDeletableBlocks_(o.workspace),u=s.utils.genUid();2>l.length?s.ContextMenuItems.deleteNext_(l,u):s.confirm(s.Msg.DELETE_ALL_BLOCKS.replace("%1",l.length),function(h){h&&s.ContextMenuItems.deleteNext_(l,u)})}},scopeType:s.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},s.ContextMenuItems.registerWorkspaceOptions_=function(){s.ContextMenuItems.registerUndo(),s.ContextMenuItems.registerRedo(),s.ContextMenuItems.registerCleanup(),s.ContextMenuItems.registerCollapse(),s.ContextMenuItems.registerExpand(),s.ContextMenuItems.registerDeleteAll()},s.ContextMenuItems.registerDuplicate=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.DUPLICATE_BLOCK},preconditionFn:function(o){return!(o=o.block).isInFlyout&&o.isDeletable()&&o.isMovable()?o.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(o){o.block&&s.duplicate(o.block)},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},s.ContextMenuItems.registerComment=function(){s.ContextMenuRegistry.registry.register({displayText:function(o){return o.block.getCommentIcon()?s.Msg.REMOVE_COMMENT:s.Msg.ADD_COMMENT},preconditionFn:function(o){return o=o.block,s.utils.userAgent.IE||o.isInFlyout||!o.workspace.options.comments||o.isCollapsed()||!o.isEditable()?"hidden":"enabled"},callback:function(o){(o=o.block).getCommentIcon()?o.setCommentText(null):o.setCommentText("")},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},s.ContextMenuItems.registerInline=function(){s.ContextMenuRegistry.registry.register({displayText:function(o){return o.block.getInputsInline()?s.Msg.EXTERNAL_INPUTS:s.Msg.INLINE_INPUTS},preconditionFn:function(o){if(!(o=o.block).isInFlyout&&o.isMovable()&&!o.isCollapsed())for(var l=1;l<o.inputList.length;l++)if(o.inputList[l-1].type!=s.inputTypes.STATEMENT&&o.inputList[l].type!=s.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(o){o.block.setInputsInline(!o.block.getInputsInline())},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},s.ContextMenuItems.registerCollapseExpandBlock=function(){s.ContextMenuRegistry.registry.register({displayText:function(o){return o.block.isCollapsed()?s.Msg.EXPAND_BLOCK:s.Msg.COLLAPSE_BLOCK},preconditionFn:function(o){return!(o=o.block).isInFlyout&&o.isMovable()&&o.workspace.options.collapse?"enabled":"hidden"},callback:function(o){o.block.setCollapsed(!o.block.isCollapsed())},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},s.ContextMenuItems.registerDisable=function(){s.ContextMenuRegistry.registry.register({displayText:function(o){return o.block.isEnabled()?s.Msg.DISABLE_BLOCK:s.Msg.ENABLE_BLOCK},preconditionFn:function(o){return!(o=o.block).isInFlyout&&o.workspace.options.disable&&o.isEditable()?o.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(o){o=o.block;var l=s.Events.getGroup();l||s.Events.setGroup(!0),o.setEnabled(!o.isEnabled()),l||s.Events.setGroup(!1)},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},s.ContextMenuItems.registerDelete=function(){s.ContextMenuRegistry.registry.register({displayText:function(o){var l=o.block;return o=l.getDescendants(!1).length,(l=l.getNextBlock())&&(o-=l.getDescendants(!1).length),1==o?s.Msg.DELETE_BLOCK:s.Msg.DELETE_X_BLOCKS.replace("%1",String(o))},preconditionFn:function(o){return!o.block.isInFlyout&&o.block.isDeletable()?"enabled":"hidden"},callback:function(o){s.Events.setGroup(!0),o.block&&s.deleteBlock(o.block),s.Events.setGroup(!1)},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},s.ContextMenuItems.registerHelp=function(){s.ContextMenuRegistry.registry.register({displayText:function(){return s.Msg.HELP},preconditionFn:function(o){return("function"==typeof(o=o.block).helpUrl?o.helpUrl():o.helpUrl)?"enabled":"hidden"},callback:function(o){o.block.showHelp()},scopeType:s.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},s.ContextMenuItems.registerBlockOptions_=function(){s.ContextMenuItems.registerDuplicate(),s.ContextMenuItems.registerComment(),s.ContextMenuItems.registerInline(),s.ContextMenuItems.registerCollapseExpandBlock(),s.ContextMenuItems.registerDisable(),s.ContextMenuItems.registerDelete(),s.ContextMenuItems.registerHelp()},s.ContextMenuItems.registerDefaultOptions=function(){s.ContextMenuItems.registerWorkspaceOptions_(),s.ContextMenuItems.registerBlockOptions_()},s.ContextMenuItems.registerDefaultOptions(),s.Mutator=function(o){s.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=o},s.utils.object.inherits(s.Mutator,s.Icon),s.Mutator.prototype.workspace_=null,s.Mutator.prototype.workspaceWidth_=0,s.Mutator.prototype.workspaceHeight_=0,s.Mutator.prototype.setBlock=function(o){this.block_=o},s.Mutator.prototype.getWorkspace=function(){return this.workspace_},s.Mutator.prototype.drawIcon_=function(o){s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},o),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},o),s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},o)},s.Mutator.prototype.iconClick_=function(o){this.block_.isEditable()&&s.Icon.prototype.iconClick_.call(this,o)},s.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{x:s.Bubble.BORDER_WIDTH,y:s.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var u,o=s.utils.xml.createElement("xml"),l=0;u=this.quarkNames_[l];l++){var h=s.utils.xml.createElement("block");h.setAttribute("type",u),o.appendChild(h)}else o=null;return(l=new s.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?s.utils.toolbox.Position.RIGHT:s.utils.toolbox.Position.LEFT,(u=!!o)&&(l.languageTree=s.utils.toolbox.convertToolboxDefToJson(o)),this.workspace_=new s.WorkspaceSvg(l),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(s.Events.disableOrphans),o=u?this.workspace_.addFlyout(s.utils.Svg.G):null,l=this.workspace_.createDom("blocklyMutatorBackground"),o&&l.insertBefore(o,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(l),this.svgDialog_},s.Mutator.prototype.updateEditable=function(){s.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&s.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&s.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},s.Mutator.prototype.resizeBubble_=function(){var o=2*s.Bubble.BORDER_WIDTH,l=this.workspace_.getCanvas().getBBox(),u=l.width+l.x,h=l.height+3*o,_=this.workspace_.getFlyout();if(_){var b=_.getWorkspace().getMetricsManager().getScrollMetrics();h=Math.max(h,b.height+20),u+=_.getWidth()}this.block_.RTL&&(u=-l.x),u+=3*o,(Math.abs(this.workspaceWidth_-u)>o||Math.abs(this.workspaceHeight_-h)>o)&&(this.workspaceWidth_=u,this.workspaceHeight_=h,this.bubble_.setBubbleSize(u+o,h+o),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(o="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",o)),this.workspace_.resize()},s.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},s.Mutator.prototype.setVisible=function(o){if(o!=this.isVisible())if(s.Events.fire(new(s.Events.get(s.Events.BUBBLE_OPEN))(this.block_,o,"mutator")),o){this.bubble_=new s.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var l=this.workspace_.options.languageTree;o=this.workspace_.getFlyout(),l&&(o.init(this.workspace_),o.show(l)),this.rootBlock_=this.block_.decompose(this.workspace_),l=this.rootBlock_.getDescendants(!1);for(var h,u=0;h=l[u];u++)h.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),o?(l=2*o.CORNER_RADIUS,o=this.rootBlock_.RTL?o.getWidth()+l:l):o=l=16,this.block_.RTL&&(o=-o),this.rootBlock_.moveBy(o,l),this.block_.saveConnections){var _=this,b=this.block_;b.saveConnections(this.rootBlock_),this.sourceListener_=function(){b.saveConnections(_.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},s.Mutator.prototype.workspaceChanged_=function(o){if(!(o.isUiEvent||o.type==s.Events.CHANGE&&"disabled"==o.element)){if(!this.workspace_.isDragging()){o=this.workspace_.getTopBlocks(!1);for(var u,l=0;u=o[l];l++){var h=u.getRelativeToSurfaceXY();if(20>h.y&&u.moveBy(0,20-h.y),u.RTL){var _=-20,b=this.workspace_.getFlyout();b&&(_-=b.getWidth()),h.x>_&&u.moveBy(_-h.x,0)}else 20>h.x&&u.moveBy(20-h.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(s.Events.setGroup(!0),o=(o=(u=this.block_).mutationToDom())&&s.Xml.domToText(o),l=u.rendered,u.rendered=!1,u.compose(this.rootBlock_),u.rendered=l,u.initSvg(),u.rendered&&u.render(),o!=(l=(l=u.mutationToDom())&&s.Xml.domToText(l))){s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(u,"mutation",null,o,l));var D=s.Events.getGroup();setTimeout(function(){s.Events.setGroup(D),u.bumpNeighbours(),s.Events.setGroup(!1)},s.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),s.Events.setGroup(!1)}}},s.Mutator.prototype.dispose=function(){this.block_.mutator=null,s.Icon.prototype.dispose.call(this)},s.Mutator.prototype.updateBlockStyle=function(){var o=this.workspace_;if(o&&o.getAllBlocks(!1)){for(var h,l=o.getAllBlocks(!1),u=0;h=l[u];u++)h.setStyle(h.getStyleName());if(u=o.getFlyout())for(o=u.workspace_.getAllBlocks(!1),u=0;h=o[u];u++)h.setStyle(h.getStyleName())}},s.Mutator.reconnect=function(o,l,u){if(!o||!o.getSourceBlock().workspace)return!1;u=l.getInput(u).connection;var h=o.targetBlock();return!(h&&h!=l||u.targetConnection==o||(u.isConnected()&&u.disconnect(),u.connect(o),0))},s.Mutator.findParentWs=function(o){var l=null;if(o&&o.options){var u=o.options.parentWorkspace;o.isFlyout?u&&u.options&&(l=u.options.parentWorkspace):u&&(l=u)}return l},s.FieldTextInput=function(o,l,u){this.spellcheck_=!0,s.FieldTextInput.superClass_.constructor.call(this,o,l,u),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},s.utils.object.inherits(s.FieldTextInput,s.Field),s.FieldTextInput.prototype.DEFAULT_VALUE="",s.FieldTextInput.fromJson=function(o){var l=s.utils.replaceMessageReferences(o.text);return new s.FieldTextInput(l,void 0,o)},s.FieldTextInput.prototype.SERIALIZABLE=!0,s.FieldTextInput.BORDERRADIUS=4,s.FieldTextInput.prototype.CURSOR="text",s.FieldTextInput.prototype.configure_=function(o){s.FieldTextInput.superClass_.configure_.call(this,o),"boolean"==typeof o.spellcheck&&(this.spellcheck_=o.spellcheck)},s.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var h,o=0,l=0,u=0;h=this.sourceBlock_.inputList[u];u++){for(var _=0;h.fieldRow[_];_++)o++;h.connection&&l++}this.fullBlockClickTarget_=1>=o&&this.sourceBlock_.outputConnection&&!l}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},s.FieldTextInput.prototype.doClassValidation_=function(o){return null==o?null:String(o)},s.FieldTextInput.prototype.doValueInvalid_=function(o){this.isBeingEdited_&&(this.isTextValid_=!1,o=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&s.Events.isEnabled()&&s.Events.fire(new(s.Events.get(s.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,o,this.value_)))},s.FieldTextInput.prototype.doValueUpdate_=function(o){this.isTextValid_=!0,this.value_=o,this.isBeingEdited_||(this.isDirty_=!0)},s.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},s.FieldTextInput.prototype.render_=function(){if(s.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var o=this.htmlInput_;this.isTextValid_?(s.utils.dom.removeClass(o,"blocklyInvalidInput"),s.utils.aria.setState(o,s.utils.aria.State.INVALID,!1)):(s.utils.dom.addClass(o,"blocklyInvalidInput"),s.utils.aria.setState(o,s.utils.aria.State.INVALID,!0))}},s.FieldTextInput.prototype.setSpellcheck=function(o){o!=this.spellcheck_&&(this.spellcheck_=o,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},s.FieldTextInput.prototype.showEditor_=function(o,l){this.workspace_=this.sourceBlock_.workspace,!(o=l||!1)&&(s.utils.userAgent.MOBILE||s.utils.userAgent.ANDROID||s.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(o)},s.FieldTextInput.prototype.showPromptEditor_=function(){s.prompt(s.Msg.CHANGE_VALUE_TITLE,this.getText(),function(o){this.setValue(this.getValueFromEditorText_(o))}.bind(this))},s.FieldTextInput.prototype.showInlineEditor_=function(o){s.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,o||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},s.FieldTextInput.prototype.widgetCreate_=function(){var o=s.WidgetDiv.DIV;s.utils.dom.addClass(this.getClickTarget_(),"editing");var l=document.createElement("input");l.className="blocklyHtmlInput",l.setAttribute("spellcheck",this.spellcheck_);var u=this.workspace_.getScale(),h=this.getConstants().FIELD_TEXT_FONTSIZE*u+"pt";if(o.style.fontSize=h,l.style.fontSize=h,h=s.FieldTextInput.BORDERRADIUS*u+"px",this.fullBlockClickTarget_){h=((h=this.getScaledBBox()).bottom-h.top)/2+"px";var _=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;l.style.border=1*u+"px solid "+_,o.style.borderRadius=h,o.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(o.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*u+"px")}return l.style.borderRadius=h,o.appendChild(l),l.value=l.defaultValue=this.getEditorText_(this.value_),l.untypedDefaultValue_=this.value_,l.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(l),l},s.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_();var o=s.WidgetDiv.DIV.style;o.width="auto",o.height="auto",o.fontSize="",o.transition="",o.boxShadow="",this.htmlInput_=null,s.utils.dom.removeClass(this.getClickTarget_(),"editing")},s.FieldTextInput.prototype.bindInputEvents_=function(o){this.onKeyDownWrapper_=s.browserEvents.conditionalBind(o,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=s.browserEvents.conditionalBind(o,"input",this,this.onHtmlInputChange_)},s.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(s.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(s.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},s.FieldTextInput.prototype.onHtmlInputKeyDown_=function(o){o.keyCode==s.utils.KeyCodes.ENTER?(s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()):o.keyCode==s.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation()):o.keyCode==s.utils.KeyCodes.TAB&&(s.WidgetDiv.hide(),s.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!o.shiftKey),o.preventDefault())},s.FieldTextInput.prototype.onHtmlInputChange_=function(o){(o=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=o,s.Events.setGroup(!0),o=this.getValueFromEditorText_(o),this.setValue(o),this.forceRerender(),this.resizeEditor_(),s.Events.setGroup(!1))},s.FieldTextInput.prototype.setEditorValue_=function(o){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(o)),this.setValue(o)},s.FieldTextInput.prototype.resizeEditor_=function(){var o=s.WidgetDiv.DIV,l=this.getScaledBBox();o.style.width=l.right-l.left+"px",o.style.height=l.bottom-l.top+"px",l=new s.utils.Coordinate(this.sourceBlock_.RTL?l.right-o.offsetWidth:l.left,l.top),o.style.left=l.x+"px",o.style.top=l.y+"px"},s.FieldTextInput.prototype.isTabNavigable=function(){return!0},s.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},s.FieldTextInput.prototype.getEditorText_=function(o){return String(o)},s.FieldTextInput.prototype.getValueFromEditorText_=function(o){return o},s.fieldRegistry.register("field_input",s.FieldTextInput),s.FieldAngle=function(o,l,u){this.clockwise_=s.FieldAngle.CLOCKWISE,this.offset_=s.FieldAngle.OFFSET,this.wrap_=s.FieldAngle.WRAP,this.round_=s.FieldAngle.ROUND,s.FieldAngle.superClass_.constructor.call(this,o,l,u),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null},s.utils.object.inherits(s.FieldAngle,s.FieldTextInput),s.FieldAngle.prototype.DEFAULT_VALUE=0,s.FieldAngle.fromJson=function(o){return new s.FieldAngle(o.angle,void 0,o)},s.FieldAngle.prototype.SERIALIZABLE=!0,s.FieldAngle.ROUND=15,s.FieldAngle.HALF=50,s.FieldAngle.CLOCKWISE=!1,s.FieldAngle.OFFSET=0,s.FieldAngle.WRAP=360,s.FieldAngle.RADIUS=s.FieldAngle.HALF-1,s.FieldAngle.prototype.configure_=function(o){switch(s.FieldAngle.superClass_.configure_.call(this,o),o.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var l=o.clockwise;"boolean"==typeof l&&(this.clockwise_=l),null!=(l=o.offset)&&(l=Number(l),isNaN(l)||(this.offset_=l)),null!=(l=o.wrap)&&(l=Number(l),isNaN(l)||(this.wrap_=l)),null!=(o=o.round)&&(o=Number(o),isNaN(o)||(this.round_=o))},s.FieldAngle.prototype.initView=function(){s.FieldAngle.superClass_.initView.call(this),this.symbol_=s.utils.dom.createSvgElement(s.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xb0")),this.textElement_.appendChild(this.symbol_)},s.FieldAngle.prototype.render_=function(){s.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},s.FieldAngle.prototype.showEditor_=function(o){s.FieldAngle.superClass_.showEditor_.call(this,o,s.utils.userAgent.MOBILE||s.utils.userAgent.ANDROID||s.utils.userAgent.IPAD),this.dropdownCreate_(),s.DropDownDiv.getContentDiv().appendChild(this.editor_),s.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),s.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},s.FieldAngle.prototype.dropdownCreate_=function(){var o=s.utils.dom.createSvgElement(s.utils.Svg.SVG,{xmlns:s.utils.dom.SVG_NS,"xmlns:html":s.utils.dom.HTML_NS,"xmlns:xlink":s.utils.dom.XLINK_NS,version:"1.1",height:2*s.FieldAngle.HALF+"px",width:2*s.FieldAngle.HALF+"px",style:"touch-action: none"},null),l=s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{cx:s.FieldAngle.HALF,cy:s.FieldAngle.HALF,r:s.FieldAngle.RADIUS,class:"blocklyAngleCircle"},o);this.gauge_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyAngleGauge"},o),this.line_=s.utils.dom.createSvgElement(s.utils.Svg.LINE,{x1:s.FieldAngle.HALF,y1:s.FieldAngle.HALF,class:"blocklyAngleLine"},o);for(var u=0;360>u;u+=15)s.utils.dom.createSvgElement(s.utils.Svg.LINE,{x1:s.FieldAngle.HALF+s.FieldAngle.RADIUS,y1:s.FieldAngle.HALF,x2:s.FieldAngle.HALF+s.FieldAngle.RADIUS-(u%45==0?10:5),y2:s.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+u+","+s.FieldAngle.HALF+","+s.FieldAngle.HALF+")"},o);this.clickWrapper_=s.browserEvents.conditionalBind(o,"click",this,this.hide_),this.clickSurfaceWrapper_=s.browserEvents.conditionalBind(l,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=s.browserEvents.conditionalBind(l,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=o},s.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(s.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(s.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(s.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},s.FieldAngle.prototype.hide_=function(){s.DropDownDiv.hideIfOwner(this),s.WidgetDiv.hide()},s.FieldAngle.prototype.onMouseMove_=function(o){var l=this.gauge_.ownerSVGElement.getBoundingClientRect(),u=o.clientX-l.left-s.FieldAngle.HALF;o=o.clientY-l.top-s.FieldAngle.HALF,l=Math.atan(-o/u),isNaN(l)||(l=s.utils.math.toDegrees(l),0>u?l+=180:0<o&&(l+=360),this.displayMouseOrKeyboardValue_(l=this.clockwise_?this.offset_+360-l:360-(this.offset_-l)))},s.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(o){this.round_&&(o=Math.round(o/this.round_)*this.round_),(o=this.wrapValue_(o))!=this.value_&&this.setEditorValue_(o)},s.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var o=Number(this.getText())+this.offset_,l=s.utils.math.toRadians(o%360);o=["M ",s.FieldAngle.HALF,",",s.FieldAngle.HALF];var u=s.FieldAngle.HALF,h=s.FieldAngle.HALF;if(!isNaN(l)){var _=Number(this.clockwise_),b=s.utils.math.toRadians(this.offset_),D=Math.cos(b)*s.FieldAngle.RADIUS,x=Math.sin(b)*-s.FieldAngle.RADIUS;_&&(l=2*b-l),u+=Math.cos(l)*s.FieldAngle.RADIUS,h-=Math.sin(l)*s.FieldAngle.RADIUS,l=Math.abs(Math.floor((l-b)/Math.PI)%2),_&&(l=1-l),o.push(" l ",D,",",x," A ",s.FieldAngle.RADIUS,",",s.FieldAngle.RADIUS," 0 ",l," ",_," ",u,",",h," z")}this.gauge_.setAttribute("d",o.join("")),this.line_.setAttribute("x2",u),this.line_.setAttribute("y2",h)}},s.FieldAngle.prototype.onHtmlInputKeyDown_=function(o){var l;if(s.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,o),o.keyCode===s.utils.KeyCodes.LEFT?l=this.sourceBlock_.RTL?1:-1:o.keyCode===s.utils.KeyCodes.RIGHT?l=this.sourceBlock_.RTL?-1:1:o.keyCode===s.utils.KeyCodes.DOWN?l=-1:o.keyCode===s.utils.KeyCodes.UP&&(l=1),l){var u=this.getValue();this.displayMouseOrKeyboardValue_(u+l*this.round_),o.preventDefault(),o.stopPropagation()}},s.FieldAngle.prototype.doClassValidation_=function(o){return o=Number(o),isNaN(o)||!isFinite(o)?null:this.wrapValue_(o)},s.FieldAngle.prototype.wrapValue_=function(o){return 0>(o%=360)&&(o+=360),o>this.wrap_&&(o-=360),o},s.Css.register(".blocklyAngleCircle {,stroke: #444;,stroke-width: 1;,fill: #ddd;,fill-opacity: .8;,},.blocklyAngleMarks {,stroke: #444;,stroke-width: 1;,},.blocklyAngleGauge {,fill: #f88;,fill-opacity: .8;,pointer-events: none;,},.blocklyAngleLine {,stroke: #f00;,stroke-width: 2;,stroke-linecap: round;,pointer-events: none;,}".split(",")),s.fieldRegistry.register("field_angle",s.FieldAngle),s.FieldCheckbox=function(o,l,u){this.checkChar_=null,s.FieldCheckbox.superClass_.constructor.call(this,o,l,u)},s.utils.object.inherits(s.FieldCheckbox,s.Field),s.FieldCheckbox.prototype.DEFAULT_VALUE=!1,s.FieldCheckbox.fromJson=function(o){return new s.FieldCheckbox(o.checked,void 0,o)},s.FieldCheckbox.CHECK_CHAR="\u2713",s.FieldCheckbox.prototype.SERIALIZABLE=!0,s.FieldCheckbox.prototype.CURSOR="default",s.FieldCheckbox.prototype.configure_=function(o){s.FieldCheckbox.superClass_.configure_.call(this,o),o.checkCharacter&&(this.checkChar_=o.checkCharacter)},s.FieldCheckbox.prototype.initView=function(){s.FieldCheckbox.superClass_.initView.call(this),s.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},s.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},s.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||s.FieldCheckbox.CHECK_CHAR},s.FieldCheckbox.prototype.setCheckCharacter=function(o){this.checkChar_=o,this.forceRerender()},s.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},s.FieldCheckbox.prototype.doClassValidation_=function(o){return!0===o||"TRUE"===o?"TRUE":!1===o||"FALSE"===o?"FALSE":null},s.FieldCheckbox.prototype.doValueUpdate_=function(o){this.value_=this.convertValueToBool_(o),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},s.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},s.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},s.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},s.FieldCheckbox.prototype.convertValueToBool_=function(o){return"string"==typeof o?"TRUE"==o:!!o},s.fieldRegistry.register("field_checkbox",s.FieldCheckbox),s.FieldColour=function(o,l,u){s.FieldColour.superClass_.constructor.call(this,o,l,u),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null},s.utils.object.inherits(s.FieldColour,s.Field),s.FieldColour.fromJson=function(o){return new s.FieldColour(o.colour,void 0,o)},s.FieldColour.prototype.SERIALIZABLE=!0,s.FieldColour.prototype.CURSOR="default",s.FieldColour.prototype.isDirty_=!1,s.FieldColour.prototype.colours_=null,s.FieldColour.prototype.titles_=null,s.FieldColour.prototype.columns_=0,s.FieldColour.prototype.configure_=function(o){s.FieldColour.superClass_.configure_.call(this,o),o.colourOptions&&(this.colours_=o.colourOptions,this.titles_=o.colourTitles),o.columns&&(this.columns_=o.columns)},s.FieldColour.prototype.initView=function(){this.size_=new s.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},s.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},s.FieldColour.prototype.doClassValidation_=function(o){return"string"!=typeof o?null:s.utils.colour.parse(o)},s.FieldColour.prototype.doValueUpdate_=function(o){this.value_=o,this.borderRect_?this.borderRect_.style.fill=o:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",o),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},s.FieldColour.prototype.getText=function(){var o=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(o)&&(o="#"+o[1]+o[3]+o[5]),o},s.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),s.FieldColour.prototype.DEFAULT_VALUE=s.FieldColour.COLOURS[0],s.FieldColour.TITLES=[],s.FieldColour.COLUMNS=7,s.FieldColour.prototype.setColours=function(o,l){return this.colours_=o,l&&(this.titles_=l),this},s.FieldColour.prototype.setColumns=function(o){return this.columns_=o,this},s.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),s.DropDownDiv.getContentDiv().appendChild(this.picker_),s.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},s.FieldColour.prototype.onClick_=function(o){null!==(o=(o=o.target)&&o.label)&&(this.setValue(o),s.DropDownDiv.hideIfOwner(this))},s.FieldColour.prototype.onKeyDown_=function(o){var l=!1;o.keyCode===s.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),l=!0):o.keyCode===s.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),l=!0):o.keyCode===s.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),l=!0):o.keyCode===s.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),l=!0):o.keyCode===s.utils.KeyCodes.ENTER&&((l=this.getHighlighted_())&&null!==(l=l&&l.label)&&this.setValue(l),s.DropDownDiv.hideWithoutAnimation(),l=!0),l&&o.stopPropagation()},s.FieldColour.prototype.moveHighlightBy_=function(o,l){var u=this.colours_||s.FieldColour.COLOURS,h=this.columns_||s.FieldColour.COLUMNS,_=this.highlightedIndex_%h,b=Math.floor(this.highlightedIndex_/h);_+=o,b+=l,0>o?0>_&&0<b?(_=h-1,b--):0>_&&(_=0):0<o?_>h-1&&b<Math.floor(u.length/h)-1?(_=0,b++):_>h-1&&_--:0>l?0>b&&(b=0):0<l&&b>Math.floor(u.length/h)-1&&(b=Math.floor(u.length/h)-1),this.setHighlightedCell_(this.picker_.childNodes[b].childNodes[_],b*h+_)},s.FieldColour.prototype.onMouseMove_=function(o){var l=(o=o.target)&&Number(o.getAttribute("data-index"));null!==l&&l!==this.highlightedIndex_&&this.setHighlightedCell_(o,l)},s.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},s.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var o=this.getHighlighted_();o&&s.utils.dom.removeClass(o,"blocklyColourHighlighted")},s.FieldColour.prototype.getHighlighted_=function(){var o=this.columns_||s.FieldColour.COLUMNS,l=this.picker_.childNodes[Math.floor(this.highlightedIndex_/o)];return l?l.childNodes[this.highlightedIndex_%o]:null},s.FieldColour.prototype.setHighlightedCell_=function(o,l){var u=this.getHighlighted_();u&&s.utils.dom.removeClass(u,"blocklyColourHighlighted"),s.utils.dom.addClass(o,"blocklyColourHighlighted"),this.highlightedIndex_=l,s.utils.aria.setState(this.picker_,s.utils.aria.State.ACTIVEDESCENDANT,o.getAttribute("id"))},s.FieldColour.prototype.dropdownCreate_=function(){var o=this.columns_||s.FieldColour.COLUMNS,l=this.colours_||s.FieldColour.COLOURS,u=this.titles_||s.FieldColour.TITLES,h=this.getValue(),_=document.createElement("table");_.className="blocklyColourTable",_.tabIndex=0,_.dir="ltr",s.utils.aria.setRole(_,s.utils.aria.Role.GRID),s.utils.aria.setState(_,s.utils.aria.State.EXPANDED,!0),s.utils.aria.setState(_,s.utils.aria.State.ROWCOUNT,Math.floor(l.length/o)),s.utils.aria.setState(_,s.utils.aria.State.COLCOUNT,o);for(var b,D=0;D<l.length;D++){D%o==0&&(b=document.createElement("tr"),s.utils.aria.setRole(b,s.utils.aria.Role.ROW),_.appendChild(b));var x=document.createElement("td");b.appendChild(x),x.label=l[D],x.title=u[D]||l[D],x.id=s.utils.IdGenerator.getNextUniqueId(),x.setAttribute("data-index",D),s.utils.aria.setRole(x,s.utils.aria.Role.GRIDCELL),s.utils.aria.setState(x,s.utils.aria.State.LABEL,l[D]),s.utils.aria.setState(x,s.utils.aria.State.SELECTED,l[D]==h),x.style.backgroundColor=l[D],l[D]==h&&(x.className="blocklyColourSelected",this.highlightedIndex_=D)}this.onClickWrapper_=s.browserEvents.conditionalBind(_,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=s.browserEvents.conditionalBind(_,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=s.browserEvents.conditionalBind(_,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=s.browserEvents.conditionalBind(_,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=s.browserEvents.conditionalBind(_,"keydown",this,this.onKeyDown_),this.picker_=_},s.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(s.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(s.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(s.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(s.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(s.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},s.Css.register([".blocklyColourTable {","border-collapse: collapse;","display: block;","outline: none;","padding: 1px;","}",".blocklyColourTable>tr>td {","border: .5px solid #888;","box-sizing: border-box;","cursor: pointer;","display: inline-block;","height: 20px;","padding: 0;","width: 20px;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),s.fieldRegistry.register("field_colour",s.FieldColour),s.FieldDropdown=function(o,l,u){"function"!=typeof o&&s.FieldDropdown.validateOptions_(o),this.menuGenerator_=o,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],s.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],l,u),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null},s.utils.object.inherits(s.FieldDropdown,s.Field),s.FieldDropdown.fromJson=function(o){return new s.FieldDropdown(o.options,void 0,o)},s.FieldDropdown.prototype.fromXml=function(o){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(o.textContent)},s.FieldDropdown.prototype.SERIALIZABLE=!0,s.FieldDropdown.CHECKMARK_OVERHANG=25,s.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,s.FieldDropdown.IMAGE_Y_OFFSET=5,s.FieldDropdown.IMAGE_Y_PADDING=2*s.FieldDropdown.IMAGE_Y_OFFSET,s.FieldDropdown.ARROW_CHAR=s.utils.userAgent.ANDROID?"\u25bc":"\u25be",s.FieldDropdown.prototype.CURSOR="default",s.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&s.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},s.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},s.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=s.utils.dom.createSvgElement(s.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?s.FieldDropdown.ARROW_CHAR+" ":" "+s.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},s.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},s.FieldDropdown.prototype.showEditor_=function(o){if(this.dropdownCreate_(),this.menu_.openingCoords=o&&"number"==typeof o.clientX?new s.utils.Coordinate(o.clientX,o.clientY):null,this.menu_.render(s.DropDownDiv.getContentDiv()),o=this.menu_.getElement(),s.utils.dom.addClass(o,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){o=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var l=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;s.DropDownDiv.setColour(o,l)}s.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},s.FieldDropdown.prototype.dropdownCreate_=function(){var o=new s.Menu;o.setRole(s.utils.aria.Role.LISTBOX),this.menu_=o;var l=this.getOptions(!1);this.selectedMenuItem_=null;for(var u=0;u<l.length;u++){var h=l[u][0],_=l[u][1];if("object"==typeof h){var b=new Image(h.width,h.height);b.src=h.src,b.alt=h.alt||"",h=b}(h=new s.MenuItem(h,_)).setRole(s.utils.aria.Role.OPTION),h.setRightToLeft(this.sourceBlock_.RTL),h.setCheckable(!0),o.addChild(h),h.setChecked(_==this.value_),_==this.value_&&(this.selectedMenuItem_=h),h.onAction(this.handleMenuActionEvent_,this)}},s.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},s.FieldDropdown.prototype.handleMenuActionEvent_=function(o){s.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,o)},s.FieldDropdown.prototype.onItemSelected_=function(o,l){this.setValue(l.getValue())},s.FieldDropdown.prototype.trimOptions_=function(){var o=this.menuGenerator_;if(Array.isArray(o)){for(var l=!1,u=0;u<o.length;u++){var h=o[u][0];"string"==typeof h?o[u][0]=s.utils.replaceMessageReferences(h):(null!=h.alt&&(o[u][0].alt=s.utils.replaceMessageReferences(h.alt)),l=!0)}if(!(l||2>o.length)){for(l=[],u=0;u<o.length;u++)l.push(o[u][0]);u=s.utils.string.shortestStringLength(l),h=s.utils.string.commonWordPrefix(l,u);var _=s.utils.string.commonWordSuffix(l,u);!h&&!_||u<=h+_||(h&&(this.prefixField=l[0].substring(0,h-1)),_&&(this.suffixField=l[0].substr(1-_)),this.menuGenerator_=s.FieldDropdown.applyTrim_(o,h,_))}}},s.FieldDropdown.applyTrim_=function(o,l,u){for(var h=[],_=0;_<o.length;_++){var b=o[_][0],D=o[_][1];b=b.substring(l,b.length-u),h[_]=[b,D]}return h},s.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},s.FieldDropdown.prototype.getOptions=function(o){return this.isOptionListDynamic()?(this.generatedOptions_&&o||(this.generatedOptions_=this.menuGenerator_.call(this),s.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},s.FieldDropdown.prototype.doClassValidation_=function(o){for(var _,l=!1,u=this.getOptions(!0),h=0;_=u[h];h++)if(_[1]==o){l=!0;break}return l?o:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+o),null)},s.FieldDropdown.prototype.doValueUpdate_=function(o){s.FieldDropdown.superClass_.doValueUpdate_.call(this,o),o=this.getOptions(!0);for(var u,l=0;u=o[l];l++)u[1]==this.value_&&(this.selectedOption_=u)},s.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.borderRect_.setAttribute("fill",this.menu_?this.sourceBlock_.style.colourTertiary:"transparent")),this.sourceBlock_&&this.arrow_&&(this.arrow_.style.fill=this.sourceBlock_.isShadow()?this.sourceBlock_.style.colourSecondary:this.sourceBlock_.style.colourPrimary)},s.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var o=this.selectedOption_&&this.selectedOption_[0];o&&"object"==typeof o?this.renderSelectedImage_(o):this.renderSelectedText_(),this.positionBorderRect_()},s.FieldDropdown.prototype.renderSelectedImage_=function(o){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",o.src),this.imageElement_.setAttribute("height",o.height),this.imageElement_.setAttribute("width",o.width);var l=Number(o.height);o=Number(o.width);var u=!!this.borderRect_,h=Math.max(u?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,l+s.FieldDropdown.IMAGE_Y_PADDING);u=u?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var _=this.svgArrow_?this.positionSVGArrow_(o+u,h/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):s.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=o+_+2*u,this.size_.height=h;var b=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",u+_):(b=o+_,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",u)),this.imageElement_.setAttribute("y",h/2-l/2),this.positionTextElement_(b+u,o+_)},s.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),s.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var o=!!this.borderRect_,l=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),u=s.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var h=0;this.svgArrow_&&(h=this.positionSVGArrow_(u+o,l/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=u+h+2*o,this.size_.height=l,this.positionTextElement_(o,u)},s.FieldDropdown.prototype.positionSVGArrow_=function(o,l){if(!this.svgArrow_)return 0;var u=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,h=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,_=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?u:o+h)+","+l+")"),_+h},s.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var o=this.selectedOption_[0];return"object"==typeof o?o.alt:o},s.FieldDropdown.validateOptions_=function(o){if(!Array.isArray(o))throw TypeError("FieldDropdown options must be an array.");if(!o.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var l=!1,u=0;u<o.length;++u){var h=o[u];Array.isArray(h)?"string"!=typeof h[1]?(l=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option id must be a string. Found "+h[1]+" in: ",h)):h[0]&&"string"!=typeof h[0]&&"string"!=typeof h[0].src&&(l=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option must have a string label or image description. Found"+h[0]+" in: ",h)):(l=!0,console.error("Invalid option["+u+"]: Each FieldDropdown option must be an array. Found: ",h))}if(l)throw TypeError("Found invalid FieldDropdown options.")},s.fieldRegistry.register("field_dropdown",s.FieldDropdown),s.FieldLabelSerializable=function(o,l,u){s.FieldLabelSerializable.superClass_.constructor.call(this,o,l,u)},s.utils.object.inherits(s.FieldLabelSerializable,s.FieldLabel),s.FieldLabelSerializable.fromJson=function(o){var l=s.utils.replaceMessageReferences(o.text);return new s.FieldLabelSerializable(l,void 0,o)},s.FieldLabelSerializable.prototype.EDITABLE=!1,s.FieldLabelSerializable.prototype.SERIALIZABLE=!0,s.fieldRegistry.register("field_label_serializable",s.FieldLabelSerializable),s.FieldImage=function(o,l,u,h,_,b,D){if(!o)throw Error("Src value of an image field is required");if(o=s.utils.replaceMessageReferences(o),u=Number(s.utils.replaceMessageReferences(u)),l=Number(s.utils.replaceMessageReferences(l)),isNaN(u)||isNaN(l))throw Error("Height and width values of an image field must cast to numbers.");if(0>=u||0>=l)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",s.FieldImage.superClass_.constructor.call(this,o,null,D),D||(this.flipRtl_=!!b,this.altText_=s.utils.replaceMessageReferences(h)||""),this.size_=new s.utils.Size(l,u+s.FieldImage.Y_PADDING),this.imageHeight_=u,this.clickHandler_=null,"function"==typeof _&&(this.clickHandler_=_),this.imageElement_=null},s.utils.object.inherits(s.FieldImage,s.Field),s.FieldImage.prototype.DEFAULT_VALUE="",s.FieldImage.fromJson=function(o){return new s.FieldImage(o.src,o.width,o.height,void 0,void 0,void 0,o)},s.FieldImage.Y_PADDING=1,s.FieldImage.prototype.EDITABLE=!1,s.FieldImage.prototype.isDirty_=!1,s.FieldImage.prototype.configure_=function(o){s.FieldImage.superClass_.configure_.call(this,o),this.flipRtl_=!!o.flipRtl,this.altText_=s.utils.replaceMessageReferences(o.alt)||""},s.FieldImage.prototype.initView=function(){this.imageElement_=s.utils.dom.createSvgElement(s.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},s.FieldImage.prototype.updateSize_=function(){},s.FieldImage.prototype.doClassValidation_=function(o){return"string"!=typeof o?null:o},s.FieldImage.prototype.doValueUpdate_=function(o){this.value_=o,this.imageElement_&&this.imageElement_.setAttributeNS(s.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},s.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},s.FieldImage.prototype.setAlt=function(o){o!=this.altText_&&(this.altText_=o||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},s.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},s.FieldImage.prototype.setOnClickHandler=function(o){this.clickHandler_=o},s.FieldImage.prototype.getText_=function(){return this.altText_},s.fieldRegistry.register("field_image",s.FieldImage),s.FieldMultilineInput=function(o,l,u){s.FieldMultilineInput.superClass_.constructor.call(this,o,l,u),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},s.utils.object.inherits(s.FieldMultilineInput,s.FieldTextInput),s.FieldMultilineInput.prototype.configure_=function(o){s.FieldMultilineInput.superClass_.configure_.call(this,o),o.maxLines&&this.setMaxLines(o.maxLines)},s.FieldMultilineInput.fromJson=function(o){var l=s.utils.replaceMessageReferences(o.text);return new s.FieldMultilineInput(l,void 0,o)},s.FieldMultilineInput.prototype.toXml=function(o){return o.textContent=this.getValue().replace(/\n/g,"&#10;"),o},s.FieldMultilineInput.prototype.fromXml=function(o){this.setValue(o.textContent.replace(/&#10;/g,"\n"))},s.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},s.FieldMultilineInput.prototype.getDisplayText_=function(){var o=this.getText();if(!o)return s.Field.NBSP;var l=o.split("\n");o="";for(var u=this.isOverflowedY_?this.maxLines_:l.length,h=0;h<u;h++){var _=l[h];_.length>this.maxDisplayLength?_=_.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&h===u-1&&(_=_.substring(0,_.length-3)+"..."),o+=_=_.replace(/\s/g,s.Field.NBSP),h!==u-1&&(o+="\n")}return this.sourceBlock_.RTL&&(o+="\u200f"),o},s.FieldMultilineInput.prototype.doValueUpdate_=function(o){s.FieldMultilineInput.superClass_.doValueUpdate_.call(this,o),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},s.FieldMultilineInput.prototype.render_=function(){for(var o;o=this.textGroup_.firstChild;)this.textGroup_.removeChild(o);o=this.getDisplayText_().split("\n");for(var l=0,u=0;u<o.length;u++){var h=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:l+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(o[u])),l+=h}this.isBeingEdited_&&(o=this.htmlInput_,this.isOverflowedY_?s.utils.dom.addClass(o,"blocklyHtmlTextAreaInputOverflowedY"):s.utils.dom.removeClass(o,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),o=this.htmlInput_,this.isTextValid_?(s.utils.dom.removeClass(o,"blocklyInvalidInput"),s.utils.aria.setState(o,s.utils.aria.State.INVALID,!1)):(s.utils.dom.addClass(o,"blocklyInvalidInput"),s.utils.aria.setState(o,s.utils.aria.State.INVALID,!0)))},s.FieldMultilineInput.prototype.updateSize_=function(){for(var o=this.textGroup_.childNodes,l=0,u=0,h=0;h<o.length;h++){var _=s.utils.dom.getTextWidth(o[h]);_>l&&(l=_),u+=this.getConstants().FIELD_TEXT_HEIGHT+(0<h?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){o=this.value_.split("\n"),_=s.utils.dom.createSvgElement(s.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var b=this.getConstants().FIELD_TEXT_FONTSIZE,D=this.getConstants().FIELD_TEXT_FONTWEIGHT,x=this.getConstants().FIELD_TEXT_FONTFAMILY;for(h=0;h<o.length;h++){o[h].length>this.maxDisplayLength&&(o[h]=o[h].substring(0,this.maxDisplayLength)),_.textContent=o[h];var G=s.utils.dom.getFastTextWidth(_,b,D,x);G>l&&(l=G)}l+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(u+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,l+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",l),this.borderRect_.setAttribute("height",u)),this.size_.width=l,this.size_.height=u,this.positionBorderRect_()},s.FieldMultilineInput.prototype.showEditor_=function(o,l){s.FieldMultilineInput.superClass_.showEditor_.call(this,o,l),this.forceRerender()},s.FieldMultilineInput.prototype.widgetCreate_=function(){var o=s.WidgetDiv.DIV,l=this.workspace_.getScale(),u=document.createElement("textarea");u.className="blocklyHtmlInput blocklyHtmlTextAreaInput",u.setAttribute("spellcheck",this.spellcheck_);var h=this.getConstants().FIELD_TEXT_FONTSIZE*l+"pt";o.style.fontSize=h,u.style.fontSize=h,u.style.borderRadius=s.FieldTextInput.BORDERRADIUS*l+"px",h=this.getConstants().FIELD_BORDER_RECT_X_PADDING*l;var _=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*l/2;return u.style.padding=_+"px "+h+"px "+_+"px "+h+"px",h=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,u.style.lineHeight=h*l+"px",o.appendChild(u),u.value=u.defaultValue=this.getEditorText_(this.value_),u.untypedDefaultValue_=this.value_,u.oldValue_=null,s.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(u),u},s.FieldMultilineInput.prototype.setMaxLines=function(o){"number"==typeof o&&0<o&&o!==this.maxLines_&&(this.maxLines_=o,this.forceRerender())},s.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},s.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(o){o.keyCode!==s.utils.KeyCodes.ENTER&&s.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,o)},s.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),s.fieldRegistry.register("field_multilinetext",s.FieldMultilineInput),s.FieldNumber=function(o,l,u,h,_,b){this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,s.FieldNumber.superClass_.constructor.call(this,o,_,b),b||this.setConstraints(l,u,h)},s.utils.object.inherits(s.FieldNumber,s.FieldTextInput),s.FieldNumber.prototype.DEFAULT_VALUE=0,s.FieldNumber.fromJson=function(o){return new s.FieldNumber(o.value,void 0,void 0,void 0,void 0,o)},s.FieldNumber.prototype.SERIALIZABLE=!0,s.FieldNumber.prototype.configure_=function(o){s.FieldNumber.superClass_.configure_.call(this,o),this.setMinInternal_(o.min),this.setMaxInternal_(o.max),this.setPrecisionInternal_(o.precision)},s.FieldNumber.prototype.setConstraints=function(o,l,u){this.setMinInternal_(o),this.setMaxInternal_(l),this.setPrecisionInternal_(u),this.setValue(this.getValue())},s.FieldNumber.prototype.setMin=function(o){this.setMinInternal_(o),this.setValue(this.getValue())},s.FieldNumber.prototype.setMinInternal_=function(o){null==o?this.min_=-1/0:(o=Number(o),isNaN(o)||(this.min_=o))},s.FieldNumber.prototype.getMin=function(){return this.min_},s.FieldNumber.prototype.setMax=function(o){this.setMaxInternal_(o),this.setValue(this.getValue())},s.FieldNumber.prototype.setMaxInternal_=function(o){null==o?this.max_=1/0:(o=Number(o),isNaN(o)||(this.max_=o))},s.FieldNumber.prototype.getMax=function(){return this.max_},s.FieldNumber.prototype.setPrecision=function(o){this.setPrecisionInternal_(o),this.setValue(this.getValue())},s.FieldNumber.prototype.setPrecisionInternal_=function(o){this.precision_=Number(o)||0;var l=String(this.precision_);-1!=l.indexOf("e")&&(l=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var u=l.indexOf(".");this.decimalPlaces_=-1==u?o?0:null:l.length-u-1},s.FieldNumber.prototype.getPrecision=function(){return this.precision_},s.FieldNumber.prototype.doClassValidation_=function(o){return null===o||(o=(o=(o=(o=String(o)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),o=Number(o||0),isNaN(o))?null:(o=Math.min(Math.max(o,this.min_),this.max_),this.precision_&&isFinite(o)&&(o=Math.round(o/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(o=Number(o.toFixed(this.decimalPlaces_))),o)},s.FieldNumber.prototype.widgetCreate_=function(){var o=s.FieldNumber.superClass_.widgetCreate_.call(this);return-1/0<this.min_&&s.utils.aria.setState(o,s.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&s.utils.aria.setState(o,s.utils.aria.State.VALUEMAX,this.max_),o},s.fieldRegistry.register("field_number",s.FieldNumber),s.FieldVariable=function(o,l,u,h,_){this.menuGenerator_=s.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof o?o:"",this.size_=new s.utils.Size(0,0),_&&this.configure_(_),l&&this.setValidator(l),_||this.setTypes_(u,h)},s.utils.object.inherits(s.FieldVariable,s.FieldDropdown),s.FieldVariable.fromJson=function(o){var l=s.utils.replaceMessageReferences(o.variable);return new s.FieldVariable(l,void 0,void 0,void 0,o)},s.FieldVariable.prototype.SERIALIZABLE=!0,s.FieldVariable.prototype.configure_=function(o){s.FieldVariable.superClass_.configure_.call(this,o),this.setTypes_(o.variableTypes,o.defaultType)},s.FieldVariable.prototype.initModel=function(){if(!this.variable_){var o=s.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(o.getId())}},s.FieldVariable.prototype.shouldAddBorderRect_=function(){return s.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!=this.sourceBlock_.type)},s.FieldVariable.prototype.fromXml=function(o){var l=o.getAttribute("id"),u=o.textContent,h=o.getAttribute("variabletype")||o.getAttribute("variableType")||"";if(l=s.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,l,u,h),null!=h&&h!==l.type)throw Error("Serialized variable type with id '"+l.getId()+"' had type "+l.type+", and does not match variable field that references it: "+s.Xml.domToText(o)+".");this.setValue(l.getId())},s.FieldVariable.prototype.toXml=function(o){return this.initModel(),o.id=this.variable_.getId(),o.textContent=this.variable_.name,this.variable_.type&&o.setAttribute("variabletype",this.variable_.type),o},s.FieldVariable.prototype.setSourceBlock=function(o){if(o.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");s.FieldVariable.superClass_.setSourceBlock.call(this,o)},s.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},s.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},s.FieldVariable.prototype.getVariable=function(){return this.variable_},s.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},s.FieldVariable.prototype.doClassValidation_=function(o){if(null===o)return null;var l=s.Variables.getVariable(this.sourceBlock_.workspace,o);return l?this.typeIsAllowed_(l=l.type)?o:(console.warn("Variable type doesn't match this field!  Type was "+l),null):(console.warn("Variable id doesn't point to a real variable! ID was "+o),null)},s.FieldVariable.prototype.doValueUpdate_=function(o){this.variable_=s.Variables.getVariable(this.sourceBlock_.workspace,o),s.FieldVariable.superClass_.doValueUpdate_.call(this,o)},s.FieldVariable.prototype.typeIsAllowed_=function(o){var l=this.getVariableTypes_();if(!l)return!0;for(var u=0;u<l.length;u++)if(o==l[u])return!0;return!1},s.FieldVariable.prototype.getVariableTypes_=function(){var o=this.variableTypes;if(null===o&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(o=o||[""]).length)throw o=this.getText(),Error("'variableTypes' of field variable "+o+" was an empty list");return o},s.FieldVariable.prototype.setTypes_=function(o,l){if(l=l||"",null==o||null==o)o=null;else{if(!Array.isArray(o))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var u=!1,h=0;h<o.length;h++)o[h]==l&&(u=!0);if(!u)throw Error("Invalid default type '"+l+"' in the definition of a FieldVariable")}this.defaultType_=l,this.variableTypes=o},s.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},s.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var o=this.getText(),l=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var u=this.getVariableTypes_(),h=0;h<u.length;h++){var _=this.sourceBlock_.workspace.getVariablesOfType(u[h]);l=l.concat(_)}for(l.sort(s.VariableModel.compareByName),u=[],h=0;h<l.length;h++)u[h]=[l[h].name,l[h].getId()];return u.push([s.Msg.RENAME_VARIABLE,s.RENAME_VARIABLE_ID]),s.Msg.DELETE_VARIABLE&&u.push([s.Msg.DELETE_VARIABLE.replace("%1",o),s.DELETE_VARIABLE_ID]),u},s.FieldVariable.prototype.onItemSelected_=function(o,l){if(o=l.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(o==s.RENAME_VARIABLE_ID)return void s.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(o==s.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId())}this.setValue(o)},s.FieldVariable.prototype.referencesVariables=function(){return!0},s.fieldRegistry.register("field_variable",s.FieldVariable),s.utils.svgPaths={},s.utils.svgPaths.point=function(o,l){return" "+o+","+l+" "},s.utils.svgPaths.curve=function(o,l){return" "+o+l.join("")},s.utils.svgPaths.moveTo=function(o,l){return" M "+o+","+l+" "},s.utils.svgPaths.moveBy=function(o,l){return" m "+o+","+l+" "},s.utils.svgPaths.lineTo=function(o,l){return" l "+o+","+l+" "},s.utils.svgPaths.line=function(o){return" l"+o.join("")},s.utils.svgPaths.lineOnAxis=function(o,l){return" "+o+" "+l+" "},s.utils.svgPaths.arc=function(o,l,u,h){return o+" "+u+" "+u+" "+l+h},s.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=s.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!s.utils.userAgent.IE&&!s.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},s.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},s.blockRendering.ConstantProvider.prototype.setTheme=function(o){this.blockStyles=Object.create(null);var u,l=o.blockStyles;for(u in l)this.blockStyles[u]=this.validatedBlockStyle_(l[u]);this.setDynamicProperties_(o)},s.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(o){this.setFontConstants_(o),this.setComponentConstants_(o),this.ADD_START_HATS=null!=o.startHats?o.startHats:this.ADD_START_HATS},s.blockRendering.ConstantProvider.prototype.setFontConstants_=function(o){this.FIELD_TEXT_FONTFAMILY=o.fontStyle&&null!=o.fontStyle.family?o.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=o.fontStyle&&null!=o.fontStyle.weight?o.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=o.fontStyle&&null!=o.fontStyle.size?o.fontStyle.size:this.FIELD_TEXT_FONTSIZE,o=s.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=o.height,this.FIELD_TEXT_BASELINE=o.baseline},s.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(o){this.CURSOR_COLOUR=o.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=o.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=o.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(o.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},s.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(o){var l="auto_"+o;return this.blockStyles[l]||(this.blockStyles[l]=this.createBlockStyle_(o)),{style:this.blockStyles[l],name:l}},s.blockRendering.ConstantProvider.prototype.getBlockStyle=function(o){return this.blockStyles[o||""]||(o&&0==o.indexOf("auto_")?this.getBlockStyleForColour(o.substring(5)).style:this.createBlockStyle_("#000000"))},s.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(o){return this.validatedBlockStyle_({colourPrimary:o})},s.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(o){var l={};return o&&s.utils.object.mixin(l,o),o=s.utils.parseBlockColour(l.colourPrimary||"#000"),l.colourPrimary=o.hex,l.colourSecondary=l.colourSecondary?s.utils.parseBlockColour(l.colourSecondary).hex:this.generateSecondaryColour_(l.colourPrimary),l.colourTertiary=l.colourTertiary?s.utils.parseBlockColour(l.colourTertiary).hex:this.generateTertiaryColour_(l.colourPrimary),l.hat=l.hat||"",l},s.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(o){return s.utils.colour.blend("#fff",o,.6)||o},s.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(o){return s.utils.colour.blend("#fff",o,.3)||o},s.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&s.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&s.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&s.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},s.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var o=this.JAGGED_TEETH_HEIGHT,l=this.JAGGED_TEETH_WIDTH;return{height:o,width:l,path:s.utils.svgPaths.line([s.utils.svgPaths.point(l,o/4),s.utils.svgPaths.point(2*-l,o/2),s.utils.svgPaths.point(l,o/4)])}},s.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var o=this.START_HAT_HEIGHT,l=this.START_HAT_WIDTH;return{height:o,width:l,path:s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(30,-o),s.utils.svgPaths.point(70,-o),s.utils.svgPaths.point(l,0)])}},s.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function o(b){var D=-(b=b?-1:1),x=u/2,G=x+2.5,j=x+.5,F=s.utils.svgPaths.point(-l,b*x);return x=s.utils.svgPaths.point(l,b*x),s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(0,b*G),s.utils.svgPaths.point(-l,D*j),F])+s.utils.svgPaths.curve("s",[s.utils.svgPaths.point(l,2.5*D),x])}var l=this.TAB_WIDTH,u=this.TAB_HEIGHT,h=o(!0),_=o(!1);return{type:this.SHAPES.PUZZLE,width:l,height:u,pathDown:_,pathUp:h}},s.blockRendering.ConstantProvider.prototype.makeNotch=function(){function o(D){return s.utils.svgPaths.line([s.utils.svgPaths.point(D*h,u),s.utils.svgPaths.point(3*D,0),s.utils.svgPaths.point(D*h,-u)])}var l=this.NOTCH_WIDTH,u=this.NOTCH_HEIGHT,h=(l-3)/2,_=o(1),b=o(-1);return{type:this.SHAPES.NOTCH,width:l,height:u,pathLeft:_,pathRight:b}},s.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var o=this.CORNER_RADIUS;return{width:o,height:o,pathTop:s.utils.svgPaths.arc("a","0 0,0",o,s.utils.svgPaths.point(-o,o)),pathBottom:s.utils.svgPaths.arc("a","0 0,0",o,s.utils.svgPaths.point(o,o))}},s.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var o=this.CORNER_RADIUS,l=s.utils.svgPaths.moveBy(0,o)+s.utils.svgPaths.arc("a","0 0,1",o,s.utils.svgPaths.point(o,-o)),u=s.utils.svgPaths.arc("a","0 0,1",o,s.utils.svgPaths.point(o,o)),h=s.utils.svgPaths.arc("a","0 0,1",o,s.utils.svgPaths.point(-o,-o));return{topLeft:l,topRight:u,bottomRight:s.utils.svgPaths.arc("a","0 0,1",o,s.utils.svgPaths.point(-o,o)),bottomLeft:h,rightHeight:o}},s.blockRendering.ConstantProvider.prototype.shapeFor=function(o){switch(o.type){case s.connectionTypes.INPUT_VALUE:case s.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case s.connectionTypes.PREVIOUS_STATEMENT:case s.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},s.blockRendering.ConstantProvider.prototype.createDom=function(o,l,u){this.injectCSS_(l,u),o=s.utils.dom.createSvgElement(s.utils.Svg.DEFS,{},o),l=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},o),s.utils.dom.createSvgElement(s.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},l),u=s.utils.dom.createSvgElement(s.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},u),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},l),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},l),this.embossFilterId=l.id,this.embossFilter_=l,l=s.utils.dom.createSvgElement(s.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},o),s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},l),s.utils.dom.createSvgElement(s.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},l),this.disabledPatternId=l.id,this.disabledPattern_=l,s.blockRendering.Debug&&(o=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},o),l=s.utils.dom.createSvgElement(s.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},o),s.utils.dom.createSvgElement(s.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},o),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},o),this.debugFilterId=o.id,this.debugFilter_=o)},s.blockRendering.ConstantProvider.prototype.injectCSS_=function(o,l){l=this.getCSS_(l),o="blockly-renderer-style-"+o,this.cssNode_=document.getElementById(o);var u=l.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=u:((l=document.createElement("style")).id=o,o=document.createTextNode(u),l.appendChild(o),document.head.insertBefore(l,document.head.firstChild),this.cssNode_=l)},s.blockRendering.ConstantProvider.prototype.getCSS_=function(o){return[o+" .blocklyText, ",o+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",o+" .blocklyText {","fill: #fff;","}",o+" .blocklyNonEditableText>rect,",o+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",o+" .blocklyNonEditableText>text,",o+" .blocklyEditableText>text {","fill: #000;","}",o+" .blocklyFlyoutLabelText {","fill: #000;","}",o+" .blocklyText.blocklyBubbleText {","fill: #000;","}",o+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",o+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",o+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",o+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",o+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",o+" .blocklyReplaceable .blocklyPathLight,",o+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",o+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},s.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},s.blockRendering.Types.LEFT_CORNER=s.blockRendering.Types.LEFT_SQUARE_CORNER|s.blockRendering.Types.LEFT_ROUND_CORNER,s.blockRendering.Types.RIGHT_CORNER=s.blockRendering.Types.RIGHT_SQUARE_CORNER|s.blockRendering.Types.RIGHT_ROUND_CORNER,s.blockRendering.Types.nextTypeValue_=16777216,s.blockRendering.Types.getType=function(o){return Object.prototype.hasOwnProperty.call(s.blockRendering.Types,o)||(s.blockRendering.Types[o]=s.blockRendering.Types.nextTypeValue_,s.blockRendering.Types.nextTypeValue_<<=1),s.blockRendering.Types[o]},s.blockRendering.Types.isField=function(o){return o.type&s.blockRendering.Types.FIELD},s.blockRendering.Types.isHat=function(o){return o.type&s.blockRendering.Types.HAT},s.blockRendering.Types.isIcon=function(o){return o.type&s.blockRendering.Types.ICON},s.blockRendering.Types.isSpacer=function(o){return o.type&s.blockRendering.Types.SPACER},s.blockRendering.Types.isInRowSpacer=function(o){return o.type&s.blockRendering.Types.IN_ROW_SPACER},s.blockRendering.Types.isInput=function(o){return o.type&s.blockRendering.Types.INPUT},s.blockRendering.Types.isExternalInput=function(o){return o.type&s.blockRendering.Types.EXTERNAL_VALUE_INPUT},s.blockRendering.Types.isInlineInput=function(o){return o.type&s.blockRendering.Types.INLINE_INPUT},s.blockRendering.Types.isStatementInput=function(o){return o.type&s.blockRendering.Types.STATEMENT_INPUT},s.blockRendering.Types.isPreviousConnection=function(o){return o.type&s.blockRendering.Types.PREVIOUS_CONNECTION},s.blockRendering.Types.isNextConnection=function(o){return o.type&s.blockRendering.Types.NEXT_CONNECTION},s.blockRendering.Types.isPreviousOrNextConnection=function(o){return o.type&(s.blockRendering.Types.PREVIOUS_CONNECTION|s.blockRendering.Types.NEXT_CONNECTION)},s.blockRendering.Types.isLeftRoundedCorner=function(o){return o.type&s.blockRendering.Types.LEFT_ROUND_CORNER},s.blockRendering.Types.isRightRoundedCorner=function(o){return o.type&s.blockRendering.Types.RIGHT_ROUND_CORNER},s.blockRendering.Types.isLeftSquareCorner=function(o){return o.type&s.blockRendering.Types.LEFT_SQUARE_CORNER},s.blockRendering.Types.isRightSquareCorner=function(o){return o.type&s.blockRendering.Types.RIGHT_SQUARE_CORNER},s.blockRendering.Types.isCorner=function(o){return o.type&s.blockRendering.Types.CORNER},s.blockRendering.Types.isJaggedEdge=function(o){return o.type&s.blockRendering.Types.JAGGED_EDGE},s.blockRendering.Types.isRow=function(o){return o.type&s.blockRendering.Types.ROW},s.blockRendering.Types.isBetweenRowSpacer=function(o){return o.type&s.blockRendering.Types.BETWEEN_ROW_SPACER},s.blockRendering.Types.isTopRow=function(o){return o.type&s.blockRendering.Types.TOP_ROW},s.blockRendering.Types.isBottomRow=function(o){return o.type&s.blockRendering.Types.BOTTOM_ROW},s.blockRendering.Types.isTopOrBottomRow=function(o){return o.type&(s.blockRendering.Types.TOP_ROW|s.blockRendering.Types.BOTTOM_ROW)},s.blockRendering.Types.isInputRow=function(o){return o.type&s.blockRendering.Types.INPUT_ROW},s.blockRendering.Measurable=function(o){this.height=this.width=0,this.type=s.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=o,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},s.blockRendering.Connection=function(o,l){s.blockRendering.Connection.superClass_.constructor.call(this,o),this.connectionModel=l,this.shape=this.constants_.shapeFor(l),this.isDynamicShape=!!this.shape.isDynamic,this.type|=s.blockRendering.Types.CONNECTION},s.utils.object.inherits(s.blockRendering.Connection,s.blockRendering.Measurable),s.blockRendering.OutputConnection=function(o,l){s.blockRendering.OutputConnection.superClass_.constructor.call(this,o,l),this.type|=s.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},s.utils.object.inherits(s.blockRendering.OutputConnection,s.blockRendering.Connection),s.blockRendering.PreviousConnection=function(o,l){s.blockRendering.PreviousConnection.superClass_.constructor.call(this,o,l),this.type|=s.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},s.utils.object.inherits(s.blockRendering.PreviousConnection,s.blockRendering.Connection),s.blockRendering.NextConnection=function(o,l){s.blockRendering.NextConnection.superClass_.constructor.call(this,o,l),this.type|=s.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},s.utils.object.inherits(s.blockRendering.NextConnection,s.blockRendering.Connection),s.blockRendering.InputConnection=function(o,l){s.blockRendering.InputConnection.superClass_.constructor.call(this,o,l.connection),this.type|=s.blockRendering.Types.INPUT,this.input=l,this.align=l.align,(this.connectedBlock=l.connection&&l.connection.targetBlock()?l.connection.targetBlock():null)?(o=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=o.width,this.connectedBlockHeight=o.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},s.utils.object.inherits(s.blockRendering.InputConnection,s.blockRendering.Connection),s.blockRendering.InlineInput=function(o,l){s.blockRendering.InlineInput.superClass_.constructor.call(this,o,l),this.type|=s.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},s.utils.object.inherits(s.blockRendering.InlineInput,s.blockRendering.InputConnection),s.blockRendering.StatementInput=function(o,l){s.blockRendering.StatementInput.superClass_.constructor.call(this,o,l),this.type|=s.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},s.utils.object.inherits(s.blockRendering.StatementInput,s.blockRendering.InputConnection),s.blockRendering.ExternalValueInput=function(o,l){s.blockRendering.ExternalValueInput.superClass_.constructor.call(this,o,l),this.type|=s.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},s.utils.object.inherits(s.blockRendering.ExternalValueInput,s.blockRendering.InputConnection),s.blockRendering.Icon=function(o,l){s.blockRendering.Icon.superClass_.constructor.call(this,o),this.icon=l,this.isVisible=l.isVisible(),this.type|=s.blockRendering.Types.ICON,o=l.getCorrectedSize(),this.height=o.height,this.width=o.width},s.utils.object.inherits(s.blockRendering.Icon,s.blockRendering.Measurable),s.blockRendering.JaggedEdge=function(o){s.blockRendering.JaggedEdge.superClass_.constructor.call(this,o),this.type|=s.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},s.utils.object.inherits(s.blockRendering.JaggedEdge,s.blockRendering.Measurable),s.blockRendering.Field=function(o,l,u){s.blockRendering.Field.superClass_.constructor.call(this,o),this.field=l,this.isEditable=l.EDITABLE,this.flipRtl=l.getFlipRtl(),this.type|=s.blockRendering.Types.FIELD,o=this.field.getSize(),this.height=o.height,this.width=o.width,this.parentInput=u},s.utils.object.inherits(s.blockRendering.Field,s.blockRendering.Measurable),s.blockRendering.Hat=function(o){s.blockRendering.Hat.superClass_.constructor.call(this,o),this.type|=s.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},s.utils.object.inherits(s.blockRendering.Hat,s.blockRendering.Measurable),s.blockRendering.SquareCorner=function(o,l){s.blockRendering.SquareCorner.superClass_.constructor.call(this,o),this.type=(l&&"left"!=l?s.blockRendering.Types.RIGHT_SQUARE_CORNER:s.blockRendering.Types.LEFT_SQUARE_CORNER)|s.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},s.utils.object.inherits(s.blockRendering.SquareCorner,s.blockRendering.Measurable),s.blockRendering.RoundCorner=function(o,l){s.blockRendering.RoundCorner.superClass_.constructor.call(this,o),this.type=(l&&"left"!=l?s.blockRendering.Types.RIGHT_ROUND_CORNER:s.blockRendering.Types.LEFT_ROUND_CORNER)|s.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},s.utils.object.inherits(s.blockRendering.RoundCorner,s.blockRendering.Measurable),s.blockRendering.InRowSpacer=function(o,l){s.blockRendering.InRowSpacer.superClass_.constructor.call(this,o),this.type=this.type|s.blockRendering.Types.SPACER|s.blockRendering.Types.IN_ROW_SPACER,this.width=l,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},s.utils.object.inherits(s.blockRendering.InRowSpacer,s.blockRendering.Measurable),s.blockRendering.Row=function(o){this.type=s.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=o,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},s.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},s.blockRendering.Row.prototype.getLastInput=function(){for(var l,o=this.elements.length-1;l=this.elements[o];o--)if(s.blockRendering.Types.isInput(l))return l;return null},s.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},s.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},s.blockRendering.Row.prototype.getFirstSpacer=function(){for(var l,o=0;l=this.elements[o];o++)if(s.blockRendering.Types.isSpacer(l))return l;return null},s.blockRendering.Row.prototype.getLastSpacer=function(){for(var l,o=this.elements.length-1;l=this.elements[o];o--)if(s.blockRendering.Types.isSpacer(l))return l;return null},s.blockRendering.TopRow=function(o){s.blockRendering.TopRow.superClass_.constructor.call(this,o),this.type|=s.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},s.utils.object.inherits(s.blockRendering.TopRow,s.blockRendering.Row),s.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(o){var l=(o.hat?"cap"===o.hat:this.constants_.ADD_START_HATS)&&!o.outputConnection&&!o.previousConnection,u=o.getPreviousBlock();return!!o.outputConnection||l||!!u&&u.getNextBlock()==o},s.blockRendering.TopRow.prototype.hasRightSquareCorner=function(o){return!0},s.blockRendering.TopRow.prototype.measure=function(){for(var _,o=0,l=0,u=0,h=0;_=this.elements[h];h++)l+=_.width,s.blockRendering.Types.isSpacer(_)||(s.blockRendering.Types.isHat(_)?u=Math.max(u,_.ascenderHeight):o=Math.max(o,_.height));this.width=Math.max(this.minWidth,l),this.height=Math.max(this.minHeight,o)+u,this.capline=this.ascenderHeight=u,this.widthWithConnectedBlocks=this.width},s.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},s.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},s.blockRendering.BottomRow=function(o){s.blockRendering.BottomRow.superClass_.constructor.call(this,o),this.type|=s.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},s.utils.object.inherits(s.blockRendering.BottomRow,s.blockRendering.Row),s.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(o){return!!o.outputConnection||!!o.getNextBlock()},s.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(o){return!0},s.blockRendering.BottomRow.prototype.measure=function(){for(var _,o=0,l=0,u=0,h=0;_=this.elements[h];h++)l+=_.width,s.blockRendering.Types.isSpacer(_)||(s.blockRendering.Types.isNextConnection(_)?u=Math.max(u,_.height):o=Math.max(o,_.height));this.width=Math.max(this.minWidth,l),this.height=Math.max(this.minHeight,o)+u,this.descenderHeight=u,this.widthWithConnectedBlocks=this.width},s.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},s.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},s.blockRendering.SpacerRow=function(o,l,u){s.blockRendering.SpacerRow.superClass_.constructor.call(this,o),this.type=this.type|s.blockRendering.Types.SPACER|s.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=u,this.height=l,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new s.blockRendering.InRowSpacer(this.constants_,u)]},s.utils.object.inherits(s.blockRendering.SpacerRow,s.blockRendering.Row),s.blockRendering.SpacerRow.prototype.measure=function(){},s.blockRendering.InputRow=function(o){s.blockRendering.InputRow.superClass_.constructor.call(this,o),this.type|=s.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},s.utils.object.inherits(s.blockRendering.InputRow,s.blockRendering.Row),s.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var u,o=0,l=0;u=this.elements[l];l++)this.width+=u.width,s.blockRendering.Types.isInput(u)&&(s.blockRendering.Types.isStatementInput(u)?o+=u.connectedBlockWidth:s.blockRendering.Types.isExternalInput(u)&&0!=u.connectedBlockWidth&&(o+=u.connectedBlockWidth-u.connectionWidth)),s.blockRendering.Types.isSpacer(u)||(this.height=Math.max(this.height,u.height));this.connectedBlockWidths=o,this.widthWithConnectedBlocks=this.width+o},s.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},s.blockRendering.RenderInfo=function(o,l){this.block_=l,this.renderer_=o,this.constants_=this.renderer_.getConstants(),this.outputConnection=l.outputConnection?new s.blockRendering.OutputConnection(this.constants_,l.outputConnection):null,this.isInline=l.getInputsInline()&&!l.isCollapsed(),this.isCollapsed=l.isCollapsed(),this.isInsertionMarker=l.isInsertionMarker(),this.RTL=l.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new s.blockRendering.TopRow(this.constants_),this.bottomRow=new s.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},s.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},s.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var o=new s.blockRendering.InputRow(this.constants_);this.inputRows.push(o);for(var h,l=this.block_.getIcons(),u=0;h=l[u];u++){var _=new s.blockRendering.Icon(this.constants_,h);this.isCollapsed&&h.collapseHidden?this.hiddenIcons.push(_):o.elements.push(_)}for(h=null,u=0;l=this.block_.inputList[u];u++)if(l.isVisible()){for(this.shouldStartNewRow_(l,h)&&(this.rows.push(o),o=new s.blockRendering.InputRow(this.constants_),this.inputRows.push(o)),h=0;_=l.fieldRow[h];h++)o.elements.push(new s.blockRendering.Field(this.constants_,_,l));this.addInput_(l,o),h=l}this.isCollapsed&&(o.hasJaggedEdge=!0,o.elements.push(new s.blockRendering.JaggedEdge(this.constants_))),(o.elements.length||o.hasDummyInput)&&this.rows.push(o),this.populateBottomRow_(),this.rows.push(this.bottomRow)},s.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var o=!!this.block_.previousConnection,l=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!o,u=this.topRow.hasLeftSquareCorner(this.block_)?s.blockRendering.SquareCorner:s.blockRendering.RoundCorner;this.topRow.elements.push(new u(this.constants_)),l?(o=new s.blockRendering.Hat(this.constants_),this.topRow.elements.push(o),this.topRow.capline=o.ascenderHeight):o&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new s.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.topRow.minHeight=this.block_.inputList.length&&this.block_.inputList[0].type==s.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.constants_.TOP_ROW_MIN_HEIGHT,u=this.topRow.hasRightSquareCorner(this.block_)?s.blockRendering.SquareCorner:s.blockRendering.RoundCorner,this.topRow.elements.push(new u(this.constants_,"right"))},s.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==s.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new s.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new s.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new s.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new s.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new s.blockRendering.RoundCorner(this.constants_,"right"))},s.blockRendering.RenderInfo.prototype.addInput_=function(o,l){this.isInline&&o.type==s.inputTypes.VALUE?(l.elements.push(new s.blockRendering.InlineInput(this.constants_,o)),l.hasInlineInput=!0):o.type==s.inputTypes.STATEMENT?(l.elements.push(new s.blockRendering.StatementInput(this.constants_,o)),l.hasStatement=!0):o.type==s.inputTypes.VALUE?(l.elements.push(new s.blockRendering.ExternalValueInput(this.constants_,o)),l.hasExternalInput=!0):o.type==s.inputTypes.DUMMY&&(l.minHeight=Math.max(l.minHeight,o.getSourceBlock()&&o.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),l.hasDummyInput=!0),null==l.align&&(l.align=o.align)},s.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(o,l){return!(!l||o.type!=s.inputTypes.STATEMENT&&l.type!=s.inputTypes.STATEMENT&&(o.type!=s.inputTypes.VALUE&&o.type!=s.inputTypes.DUMMY||this.isInline))},s.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var l,o=0;l=this.rows[o];o++){var u=l.elements;if(l.elements=[],l.startsWithElemSpacer()&&l.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,u[0]))),u.length){for(var h=0;h<u.length-1;h++){l.elements.push(u[h]);var _=this.getInRowSpacing_(u[h],u[h+1]);l.elements.push(new s.blockRendering.InRowSpacer(this.constants_,_))}l.elements.push(u[u.length-1]),l.endsWithElemSpacer()&&l.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(u[u.length-1],null)))}}},s.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(o,l){if(!o&&l&&s.blockRendering.Types.isStatementInput(l))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(o&&s.blockRendering.Types.isInput(o)&&!l){if(s.blockRendering.Types.isExternalInput(o))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isInlineInput(o))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(o))return this.constants_.NO_PADDING}return o&&s.blockRendering.Types.isLeftSquareCorner(o)&&l&&(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))?l.notchOffset:o&&s.blockRendering.Types.isLeftRoundedCorner(o)&&l&&(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))?l.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},s.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var _,o=0,l=0,u=0,h=0;_=this.rows[h];h++){if(_.measure(),l=Math.max(l,_.width),_.hasStatement){var b=_.getLastInput();o=Math.max(o,_.width-b.width)}u=Math.max(u,_.widthWithConnectedBlocks)}for(this.statementEdge=o,this.width=l,h=0;_=this.rows[h];h++)_.hasStatement&&(_.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(l,u),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},s.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var l,o=0;l=this.rows[o];o++)if(l.hasStatement)this.alignStatementRow_(l);else{var u=l.width;0<(u=this.getDesiredRowWidth_(l)-u)&&this.addAlignmentPadding_(l,u),s.blockRendering.Types.isTopOrBottomRow(l)&&(l.widthWithConnectedBlocks=l.width)}},s.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(o){return this.width-this.startX},s.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(o,l){var u=o.getFirstSpacer(),h=o.getLastSpacer();(o.hasExternalInput||o.hasStatement)&&(o.widthWithConnectedBlocks+=l),o.align==s.constants.ALIGN.LEFT?h.width+=l:o.align==s.constants.ALIGN.CENTRE?(u.width+=l/2,h.width+=l/2):o.align==s.constants.ALIGN.RIGHT?u.width+=l:h.width+=l,o.width+=l},s.blockRendering.RenderInfo.prototype.alignStatementRow_=function(o){var l=o.getLastInput(),u=o.width-l.width,h=this.statementEdge;0<(u=h-u)&&this.addAlignmentPadding_(o,u),u=o.width,h=this.getDesiredRowWidth_(o),l.width+=h-u,l.height=Math.max(l.height,o.height),o.width+=h-u,o.widthWithConnectedBlocks=Math.max(o.width,this.statementEdge+o.connectedBlockWidths)},s.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var o=this.rows;this.rows=[];for(var l=0;l<o.length;l++)this.rows.push(o[l]),l!=o.length-1&&this.rows.push(this.makeSpacerRow_(o[l],o[l+1]))},s.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(o,l){var u=this.getSpacerRowHeight_(o,l),h=this.getSpacerRowWidth_(o,l);return u=new s.blockRendering.SpacerRow(this.constants_,u,h),o.hasStatement&&(u.followsStatement=!0),l.hasStatement&&(u.precedesStatement=!0),u},s.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(o,l){return this.width-this.startX},s.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(o,l){return this.constants_.MEDIUM_PADDING},s.blockRendering.RenderInfo.prototype.getElemCenterline_=function(o,l){return s.blockRendering.Types.isSpacer(l)?o.yPos+l.height/2:s.blockRendering.Types.isBottomRow(o)?(o=o.yPos+o.height-o.descenderHeight,s.blockRendering.Types.isNextConnection(l)?o+l.height/2:o-l.height/2):s.blockRendering.Types.isTopRow(o)?s.blockRendering.Types.isHat(l)?o.capline-l.height/2:o.capline+l.height/2:o.yPos+o.height/2},s.blockRendering.RenderInfo.prototype.recordElemPositions_=function(o){for(var h,l=o.xPos,u=0;h=o.elements[u];u++)s.blockRendering.Types.isSpacer(h)&&(h.height=o.height),h.xPos=l,h.centerline=this.getElemCenterline_(o,h),l+=h.width},s.blockRendering.RenderInfo.prototype.finalize_=function(){for(var h,o=0,l=0,u=0;h=this.rows[u];u++)h.yPos=l,h.xPos=this.startX,l+=h.height,o=Math.max(o,h.widthWithConnectedBlocks),this.recordElemPositions_(h);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=Math.max(o,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=o+this.startX,this.height=l,this.startY=this.topRow.capline,this.bottomRow.baseline=l-this.bottomRow.descenderHeight},s.blockRendering.Debug=function(o){this.debugElements_=[],this.svgRoot_=null,this.constants_=o},s.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},s.blockRendering.Debug.prototype.clearElems=function(){for(var l,o=0;l=this.debugElements_[o];o++)s.utils.dom.removeNode(l);this.debugElements_=[]},s.blockRendering.Debug.prototype.drawSpacerRow=function(o,l,u){if(s.blockRendering.Debug.config.rowSpacers){var h=Math.abs(o.height),_=0>o.height;_&&(l-=h),this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:u?-(o.xPos+o.width):o.xPos,y:l,width:o.width,height:h,stroke:_?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawSpacerElem=function(o,l,u){if(s.blockRendering.Debug.config.elemSpacers){l=Math.abs(o.width);var h=0>o.width,_=h?o.xPos-l:o.xPos;u&&(_=-(_+l)),this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:_,y:o.centerline-o.height/2,width:l,height:o.height,stroke:"pink",fill:h?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawRenderedElem=function(o,l){if(s.blockRendering.Debug.config.elems){var u=o.xPos;l&&(u=-(u+o.width)),this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:u,y:l=o.centerline-o.height/2,width:o.width,height:o.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),s.blockRendering.Types.isField(o)&&o.field instanceof s.FieldLabel&&this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:u,y:l+this.constants_.FIELD_TEXT_BASELINE,width:o.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}s.blockRendering.Types.isInput(o)&&s.blockRendering.Debug.config.connections&&this.drawConnection(o.connectionModel)},s.blockRendering.Debug.prototype.drawConnection=function(o){if(s.blockRendering.Debug.config.connections){if(o.type==s.connectionTypes.INPUT_VALUE)var l=4,u="magenta",h="none";else o.type==s.connectionTypes.OUTPUT_VALUE?(l=2,h=u="magenta"):o.type==s.connectionTypes.NEXT_STATEMENT?(l=4,u="goldenrod",h="none"):o.type==s.connectionTypes.PREVIOUS_STATEMENT&&(l=2,h=u="goldenrod");this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:o.offsetInBlock_.x,cy:o.offsetInBlock_.y,r:l,fill:h,stroke:u},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawRenderedRow=function(o,l,u){s.blockRendering.Debug.config.rows&&(this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:u?-(o.xPos+o.width):o.xPos,y:o.yPos,width:o.width,height:o.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),s.blockRendering.Types.isTopOrBottomRow(o)||s.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:u?-(o.xPos+o.widthWithConnectedBlocks):o.xPos,y:o.yPos,width:o.widthWithConnectedBlocks,height:o.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},s.blockRendering.Debug.prototype.drawRowWithElements=function(o,l,u){for(var h=0,_=o.elements.length;h<_;h++){var b=o.elements[h];b?s.blockRendering.Types.isSpacer(b)?this.drawSpacerElem(b,o.height,u):this.drawRenderedElem(b,u):console.warn("A row has an undefined or null element.",o,b)}this.drawRenderedRow(o,l,u)},s.blockRendering.Debug.prototype.drawBoundingBox=function(o){if(s.blockRendering.Debug.config.blockBounds){var l=o.RTL?-o.width:0;this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:l,y:0,width:o.width,height:o.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),s.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blockRenderDebug",x:l=o.RTL?-o.widthWithChildren:0,y:0,width:o.widthWithChildren,height:o.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_))}},s.blockRendering.Debug.prototype.drawDebug=function(o,l){this.clearElems(),this.svgRoot_=o.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var _,u=0,h=0;_=l.rows[h];h++)s.blockRendering.Types.isBetweenRowSpacer(_)?this.drawSpacerRow(_,u,l.RTL):this.drawRowWithElements(_,u,l.RTL),u+=_.height;o.previousConnection&&this.drawConnection(o.previousConnection),o.nextConnection&&this.drawConnection(o.nextConnection),o.outputConnection&&this.drawConnection(o.outputConnection),l.rightSide&&this.drawRenderedElem(l.rightSide,l.RTL),this.drawBoundingBox(l),this.drawRender(o.pathObject.svgPath)},s.blockRendering.Debug.prototype.drawRender=function(o){s.blockRendering.Debug.config.render&&(o.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){o.setAttribute("filter","")},100))},s.blockRendering.Drawer=function(o,l){this.block_=o,this.info_=l,this.topLeft_=o.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=l.getRenderer().getConstants()},s.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),s.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},s.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},s.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var l,o=0;l=this.info_.hiddenIcons[o];o++)l.icon.iconGroup_.setAttribute("display","none")},s.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var o=1;o<this.info_.rows.length-1;o++){var l=this.info_.rows[o];l.hasJaggedEdge?this.drawJaggedEdge_(l):l.hasStatement?this.drawStatementInput_(l):l.hasExternalInput?this.drawValueInput_(l):this.drawRightSideRow_(l)}this.drawBottom_(),this.drawLeft_()},s.blockRendering.Drawer.prototype.drawTop_=function(){var o=this.info_.topRow,l=o.elements;this.positionPreviousConnection_(),this.outlinePath_+=s.utils.svgPaths.moveBy(o.xPos,this.info_.startY);for(var h,u=0;h=l[u];u++)s.blockRendering.Types.isLeftRoundedCorner(h)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:s.blockRendering.Types.isRightRoundedCorner(h)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:s.blockRendering.Types.isPreviousConnection(h)?this.outlinePath_+=h.shape.pathLeft:s.blockRendering.Types.isHat(h)?this.outlinePath_+=this.constants_.START_HAT.path:s.blockRendering.Types.isSpacer(h)&&(this.outlinePath_+=s.utils.svgPaths.lineOnAxis("h",h.width));this.outlinePath_+=s.utils.svgPaths.lineOnAxis("v",o.height)},s.blockRendering.Drawer.prototype.drawJaggedEdge_=function(o){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+s.utils.svgPaths.lineOnAxis("v",o.height-this.constants_.JAGGED_TEETH.height)},s.blockRendering.Drawer.prototype.drawValueInput_=function(o){var l=o.getLastInput();this.positionExternalValueConnection_(o);var u="function"==typeof l.shape.pathDown?l.shape.pathDown(l.height):l.shape.pathDown;this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",l.xPos+l.width)+u+s.utils.svgPaths.lineOnAxis("v",o.height-l.connectionHeight)},s.blockRendering.Drawer.prototype.drawStatementInput_=function(o){var l=o.getLastInput(),u=l.xPos+l.notchOffset+l.shape.width;l=l.shape.pathRight+s.utils.svgPaths.lineOnAxis("h",-(l.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var h=o.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",u)+l+s.utils.svgPaths.lineOnAxis("v",h)+this.constants_.INSIDE_CORNERS.pathBottom+s.utils.svgPaths.lineOnAxis("H",o.xPos+o.width),this.positionStatementInputConnection_(o)},s.blockRendering.Drawer.prototype.drawRightSideRow_=function(o){this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",o.yPos+o.height)},s.blockRendering.Drawer.prototype.drawBottom_=function(){var o=this.info_.bottomRow,l=o.elements;this.positionNextConnection_();for(var b,u=0,h="",_=l.length-1;b=l[_];_--)s.blockRendering.Types.isNextConnection(b)?h+=b.shape.pathRight:s.blockRendering.Types.isLeftSquareCorner(b)?h+=s.utils.svgPaths.lineOnAxis("H",o.xPos):s.blockRendering.Types.isLeftRoundedCorner(b)?h+=this.constants_.OUTSIDE_CORNERS.bottomLeft:s.blockRendering.Types.isRightRoundedCorner(b)?(h+=this.constants_.OUTSIDE_CORNERS.bottomRight,u=this.constants_.OUTSIDE_CORNERS.rightHeight):s.blockRendering.Types.isSpacer(b)&&(h+=s.utils.svgPaths.lineOnAxis("h",-1*b.width));this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",o.baseline-u),this.outlinePath_+=h},s.blockRendering.Drawer.prototype.drawLeft_=function(){var o=this.info_.outputConnection;if(this.positionOutputConnection_(),o){var l=o.connectionOffsetY+o.height;o="function"==typeof o.shape.pathUp?o.shape.pathUp(o.height):o.shape.pathUp,this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",l)+o}this.outlinePath_+="z"},s.blockRendering.Drawer.prototype.drawInternals_=function(){for(var l,o=0;l=this.info_.rows[o];o++)for(var h,u=0;h=l.elements[u];u++)s.blockRendering.Types.isInlineInput(h)?this.drawInlineInput_(h):(s.blockRendering.Types.isIcon(h)||s.blockRendering.Types.isField(h))&&this.layoutField_(h)},s.blockRendering.Drawer.prototype.layoutField_=function(o){if(s.blockRendering.Types.isField(o))var l=o.field.getSvgRoot();else s.blockRendering.Types.isIcon(o)&&(l=o.icon.iconGroup_);var u=o.centerline-o.height/2,h=o.xPos,_="";this.info_.RTL&&(h=-(h+o.width),o.flipRtl&&(h+=o.width,_="scale(-1 1)")),s.blockRendering.Types.isIcon(o)?(l.setAttribute("display","block"),l.setAttribute("transform","translate("+h+","+u+")"),o.icon.computeIconLocation()):l.setAttribute("transform","translate("+h+","+u+")"+_),this.info_.isInsertionMarker&&l.setAttribute("display","none")},s.blockRendering.Drawer.prototype.drawInlineInput_=function(o){var l=o.width,u=o.height,h=o.connectionOffsetY,_=o.connectionHeight+h;this.inlinePath_+=s.utils.svgPaths.moveTo(o.xPos+o.connectionWidth,o.centerline-u/2)+s.utils.svgPaths.lineOnAxis("v",h)+o.shape.pathDown+s.utils.svgPaths.lineOnAxis("v",u-_)+s.utils.svgPaths.lineOnAxis("h",l-o.connectionWidth)+s.utils.svgPaths.lineOnAxis("v",-u)+"z",this.positionInlineInputConnection_(o)},s.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(o){if(o.connectionModel){var u=o.xPos+o.connectionWidth+o.connectionOffsetX;this.info_.RTL&&(u*=-1),o.connectionModel.setOffsetInBlock(u,o.centerline-o.height/2+o.connectionOffsetY)}},s.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(o){var l=o.getLastInput();if(l.connectionModel){var u=o.xPos+o.statementEdge+l.notchOffset;this.info_.RTL&&(u*=-1),l.connectionModel.setOffsetInBlock(u,o.yPos)}},s.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(o){var l=o.getLastInput();if(l.connectionModel){var u=o.xPos+o.width;this.info_.RTL&&(u*=-1),l.connectionModel.setOffsetInBlock(u,o.yPos)}},s.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var o=this.info_.topRow;if(o.connection){var l=o.xPos+o.notchOffset;o.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-l:l,0)}},s.blockRendering.Drawer.prototype.positionNextConnection_=function(){var o=this.info_.bottomRow;if(o.connection){var l=o.connection,u=l.xPos;l.connectionModel.setOffsetInBlock(this.info_.RTL?-u:u,o.baseline)}},s.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var o=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-o:o,this.info_.outputConnection.connectionOffsetY)}},s.Events.MarkerMove=function(o,l,u,h){var _=o?o.workspace.id:void 0;h&&h.getType()==s.ASTNode.types.WORKSPACE&&(_=h.getLocation().id),s.Events.MarkerMove.superClass_.constructor.call(this,_),this.blockId=o?o.id:null,this.oldNode=u,this.newNode=h,this.isCursor=l},s.utils.object.inherits(s.Events.MarkerMove,s.Events.UiBase),s.Events.MarkerMove.prototype.type=s.Events.MARKER_MOVE,s.Events.MarkerMove.prototype.toJson=function(){var o=s.Events.MarkerMove.superClass_.toJson.call(this);return o.isCursor=this.isCursor,o.blockId=this.blockId,o.oldNode=this.oldNode,o.newNode=this.newNode,o},s.Events.MarkerMove.prototype.fromJson=function(o){s.Events.MarkerMove.superClass_.fromJson.call(this,o),this.isCursor=o.isCursor,this.blockId=o.blockId,this.oldNode=o.oldNode,this.newNode=o.newNode},s.registry.register(s.registry.Type.EVENT,s.Events.MARKER_MOVE,s.Events.MarkerMove),s.blockRendering.MarkerSvg=function(o,l,u){this.workspace_=o,this.marker_=u,this.parent_=null,this.constants_=l,this.currentMarkerSvg=null,o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=u.colour||o},s.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",s.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",s.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,s.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},s.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},s.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},s.blockRendering.MarkerSvg.prototype.createDom=function(){var o=this.isCursor()?s.blockRendering.MarkerSvg.CURSOR_CLASS:s.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=s.utils.dom.createSvgElement(s.utils.Svg.G,{class:o},null),this.createDomInternal_(),this.svgGroup_},s.blockRendering.MarkerSvg.prototype.setParent_=function(o){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),o.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),o.setMarkerSvg(this.getSvgRoot())),this.parent_=o},s.blockRendering.MarkerSvg.prototype.draw=function(o,l){if(l){this.constants_=this.workspace_.getRenderer().getConstants();var u=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||u,this.applyColour_(l),this.showAtLocation_(l),this.fireMarkerEvent_(o,l),void 0!==(o=this.currentMarkerSvg.childNodes[0])&&o.beginElement&&o.beginElement()}else this.hide()},s.blockRendering.MarkerSvg.prototype.showAtLocation_=function(o){var l=o.getLocation().type;o.getType()==s.ASTNode.types.BLOCK?this.showWithBlock_(o):o.getType()==s.ASTNode.types.OUTPUT?this.showWithOutput_(o):l==s.connectionTypes.INPUT_VALUE?this.showWithInput_(o):l==s.connectionTypes.NEXT_STATEMENT?this.showWithNext_(o):o.getType()==s.ASTNode.types.PREVIOUS?this.showWithPrevious_(o):o.getType()==s.ASTNode.types.FIELD?this.showWithField_(o):o.getType()==s.ASTNode.types.WORKSPACE?this.showWithCoordinates_(o):o.getType()==s.ASTNode.types.STACK&&this.showWithStack_(o)},s.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(o){var l=(o=o.getSourceBlock()).width,u=o.height,h=u*s.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,_=this.constants_.CURSOR_BLOCK_PADDING;if(o.previousConnection){var b=this.constants_.shapeFor(o.previousConnection);this.positionPrevious_(l,_,h,b)}else o.outputConnection?(b=this.constants_.shapeFor(o.outputConnection),this.positionOutput_(l,u,b)):this.positionBlock_(l,_,h);this.setParent_(o),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithBlock_=function(o){this.showWithBlockPrevOutput_(o)},s.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(o){this.showWithBlockPrevOutput_(o)},s.blockRendering.MarkerSvg.prototype.showWithOutput_=function(o){this.showWithBlockPrevOutput_(o)},s.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(o){var l=o.getWsCoordinate();o=l.x,this.workspace_.RTL&&(o-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(o,l=l.y,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithField_=function(o){var l=(o=o.getLocation()).getSize().width,u=o.getSize().height;this.positionRect_(0,0,l,u),this.setParent_(o),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithInput_=function(o){var l=(o=o.getLocation()).getSourceBlock();this.positionInput_(o),this.setParent_(l),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithNext_=function(o){var l=o.getLocation();o=l.getSourceBlock();var u=0;l=l.getOffsetInBlock().y;var h=o.getHeightWidth().width;this.workspace_.RTL&&(u=-h),this.positionLine_(u,l,h),this.setParent_(o),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showWithStack_=function(o){var l=(o=o.getLocation()).getHeightWidth(),u=l.width+this.constants_.CURSOR_STACK_PADDING,h=-this.constants_.CURSOR_STACK_PADDING/2,b=h;this.workspace_.RTL&&(b=-(u+h)),this.positionRect_(b,-this.constants_.CURSOR_STACK_PADDING/2,u,l=l.height+this.constants_.CURSOR_STACK_PADDING),this.setParent_(o),this.showCurrent_()},s.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},s.blockRendering.MarkerSvg.prototype.positionBlock_=function(o,l,u){o=s.utils.svgPaths.moveBy(-l,u)+s.utils.svgPaths.lineOnAxis("V",-l)+s.utils.svgPaths.lineOnAxis("H",o+2*l)+s.utils.svgPaths.lineOnAxis("V",u),this.markerBlock_.setAttribute("d",o),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},s.blockRendering.MarkerSvg.prototype.positionInput_=function(o){var l=o.getOffsetInBlock().x,u=o.getOffsetInBlock().y;o=s.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(o).pathDown,this.markerInput_.setAttribute("d",o),this.markerInput_.setAttribute("transform","translate("+l+","+u+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},s.blockRendering.MarkerSvg.prototype.positionLine_=function(o,l,u){this.markerSvgLine_.setAttribute("x",o),this.markerSvgLine_.setAttribute("y",l),this.markerSvgLine_.setAttribute("width",u),this.currentMarkerSvg=this.markerSvgLine_},s.blockRendering.MarkerSvg.prototype.positionOutput_=function(o,l,u){o=s.utils.svgPaths.moveBy(o,0)+s.utils.svgPaths.lineOnAxis("h",-(o-u.width))+s.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+u.pathDown+s.utils.svgPaths.lineOnAxis("V",l)+s.utils.svgPaths.lineOnAxis("H",o),this.markerBlock_.setAttribute("d",o),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},s.blockRendering.MarkerSvg.prototype.positionPrevious_=function(o,l,u,h){o=s.utils.svgPaths.moveBy(-l,u)+s.utils.svgPaths.lineOnAxis("V",-l)+s.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+h.pathLeft+s.utils.svgPaths.lineOnAxis("H",o+2*l)+s.utils.svgPaths.lineOnAxis("V",u),this.markerBlock_.setAttribute("d",o),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},s.blockRendering.MarkerSvg.prototype.positionRect_=function(o,l,u,h){this.markerSvgRect_.setAttribute("x",o),this.markerSvgRect_.setAttribute("y",l),this.markerSvgRect_.setAttribute("width",u),this.markerSvgRect_.setAttribute("height",h),this.currentMarkerSvg=this.markerSvgRect_},s.blockRendering.MarkerSvg.prototype.flipRtl_=function(o){o.setAttribute("transform","scale(-1 1)")},s.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},s.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(o,l){var u=l.getSourceBlock();o=new(s.Events.get(s.Events.MARKER_MOVE))(u,this.isCursor(),o,l),s.Events.fire(o)},s.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},s.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=s.utils.dom.createSvgElement(s.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=s.utils.dom.createSvgElement(s.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var o=this.getBlinkProperties_();s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,o,this.markerSvgLine_),s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,o,this.markerInput_),o.attributeName="stroke",s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,o,this.markerBlock_)}return this.markerSvg_},s.blockRendering.MarkerSvg.prototype.applyColour_=function(o){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(this.markerSvgLine_.firstChild.setAttribute("values",o=this.colour_+";transparent;transparent;"),this.markerInput_.firstChild.setAttribute("values",o),this.markerBlock_.firstChild.setAttribute("values",o))},s.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&s.utils.dom.removeNode(this.svgGroup_)},s.blockRendering.PathObject=function(o,l,u){this.constants=u,this.svgRoot=o,this.svgPath=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=l,this.markerSvg=this.cursorSvg=null},s.blockRendering.PathObject.prototype.setPath=function(o){this.svgPath.setAttribute("d",o)},s.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},s.blockRendering.PathObject.prototype.setCursorSvg=function(o){o?(this.svgRoot.appendChild(o),this.cursorSvg=o):this.cursorSvg=null},s.blockRendering.PathObject.prototype.setMarkerSvg=function(o){o?(this.cursorSvg?this.svgRoot.insertBefore(o,this.cursorSvg):this.svgRoot.appendChild(o),this.markerSvg=o):this.markerSvg=null},s.blockRendering.PathObject.prototype.applyColour=function(o){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(o.isShadow()),this.updateDisabled_(!o.isEnabled()||o.getInheritedDisabled())},s.blockRendering.PathObject.prototype.setStyle=function(o){this.style=o},s.blockRendering.PathObject.prototype.setClass_=function(o,l){l?s.utils.dom.addClass(this.svgRoot,o):s.utils.dom.removeClass(this.svgRoot,o)},s.blockRendering.PathObject.prototype.updateHighlighted=function(o){this.svgPath.setAttribute("filter",o?"url(#"+this.constants.embossFilterId+")":"none")},s.blockRendering.PathObject.prototype.updateShadow_=function(o){o&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},s.blockRendering.PathObject.prototype.updateDisabled_=function(o){this.setClass_("blocklyDisabled",o),o&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},s.blockRendering.PathObject.prototype.updateSelected=function(o){this.setClass_("blocklySelected",o)},s.blockRendering.PathObject.prototype.updateDraggingDelete=function(o){this.setClass_("blocklyDraggingDelete",o)},s.blockRendering.PathObject.prototype.updateInsertionMarker=function(o){this.setClass_("blocklyInsertionMarker",o)},s.blockRendering.PathObject.prototype.updateMovable=function(o){this.setClass_("blocklyDraggable",o)},s.blockRendering.PathObject.prototype.updateReplacementFade=function(o){this.setClass_("blocklyReplaceable",o)},s.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(o,l){},s.blockRendering.Renderer=function(o){this.name=o,this.overrides=this.constants_=null},s.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},s.blockRendering.Renderer.prototype.init=function(o,l){this.constants_=this.makeConstants_(),l&&(this.overrides=l,s.utils.object.mixin(this.constants_,l)),this.constants_.setTheme(o),this.constants_.init()},s.blockRendering.Renderer.prototype.createDom=function(o,l){this.constants_.createDom(o,this.name+"-"+l.name,"."+this.getClassName()+"."+l.getClassName())},s.blockRendering.Renderer.prototype.refreshDom=function(o,l){var u=this.getConstants();u.dispose(),this.constants_=this.makeConstants_(),this.overrides&&s.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=u.randomIdentifier,this.constants_.setTheme(l),this.constants_.init(),this.createDom(o,l)},s.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},s.blockRendering.Renderer.prototype.makeConstants_=function(){return new s.blockRendering.ConstantProvider},s.blockRendering.Renderer.prototype.makeRenderInfo_=function(o){return new s.blockRendering.RenderInfo(this,o)},s.blockRendering.Renderer.prototype.makeDrawer_=function(o,l){return new s.blockRendering.Drawer(o,l)},s.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!s.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new s.blockRendering.Debug(this.getConstants())},s.blockRendering.Renderer.prototype.makeMarkerDrawer=function(o,l){return new s.blockRendering.MarkerSvg(o,this.getConstants(),l)},s.blockRendering.Renderer.prototype.makePathObject=function(o,l){return new s.blockRendering.PathObject(o,l,this.constants_)},s.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},s.blockRendering.Renderer.prototype.shouldHighlightConnection=function(o){return!0},s.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(o,l,u){return!!s.Connection.getConnectionForOrphanedConnection(o,u===s.connectionTypes.OUTPUT_VALUE?l.outputConnection:l.previousConnection)},s.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(o,l,u){return l.type==s.connectionTypes.OUTPUT_VALUE||l.type==s.connectionTypes.PREVIOUS_STATEMENT?!o.isConnected()||this.orphanCanConnectAtEnd(u,o.targetBlock(),l.type)?s.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:s.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:s.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},s.blockRendering.Renderer.prototype.render=function(o){s.blockRendering.useDebugger&&!o.renderingDebugger&&(o.renderingDebugger=this.makeDebugger_());var l=this.makeRenderInfo_(o);l.measure(),this.makeDrawer_(o,l).draw()},s.geras={},s.geras.ConstantProvider=function(){s.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},s.utils.object.inherits(s.geras.ConstantProvider,s.blockRendering.ConstantProvider),s.geras.ConstantProvider.prototype.getCSS_=function(o){return s.geras.ConstantProvider.superClass_.getCSS_.call(this,o).concat([o+" .blocklyInsertionMarker>.blocklyPathLight,",o+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},s.geras.Highlighter=function(o){this.info_=o,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,o=o.getRenderer(),this.constants_=o.getConstants(),this.highlightConstants_=o.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},s.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},s.geras.Highlighter.prototype.drawTopCorner=function(o){this.steps_+=s.utils.svgPaths.moveBy(o.xPos,this.info_.startY);for(var u,l=0;u=o.elements[l];l++)s.blockRendering.Types.isLeftSquareCorner(u)?this.steps_+=this.highlightConstants_.START_POINT:s.blockRendering.Types.isLeftRoundedCorner(u)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):s.blockRendering.Types.isPreviousConnection(u)?this.steps_+=this.notchPaths_.pathLeft:s.blockRendering.Types.isHat(u)?this.steps_+=this.startPaths_.path(this.RTL_):s.blockRendering.Types.isSpacer(u)&&0!=u.width&&(this.steps_+=s.utils.svgPaths.lineOnAxis("H",u.xPos+u.width-this.highlightOffset_));this.steps_+=s.utils.svgPaths.lineOnAxis("H",o.xPos+o.width-this.highlightOffset_)},s.geras.Highlighter.prototype.drawJaggedEdge_=function(o){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+s.utils.svgPaths.lineOnAxis("v",o.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},s.geras.Highlighter.prototype.drawValueInput=function(o){var l=o.getLastInput();if(this.RTL_){var u=o.height-l.connectionHeight;this.steps_+=s.utils.svgPaths.moveTo(l.xPos+l.width-this.highlightOffset_,o.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+s.utils.svgPaths.lineOnAxis("v",u)}else this.steps_+=s.utils.svgPaths.moveTo(l.xPos+l.width,o.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},s.geras.Highlighter.prototype.drawStatementInput=function(o){var l=o.getLastInput();if(this.RTL_){var u=o.height-2*this.insideCornerPaths_.height;this.steps_+=s.utils.svgPaths.moveTo(l.xPos,o.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+s.utils.svgPaths.lineOnAxis("v",u)+this.insideCornerPaths_.pathBottom(this.RTL_)+s.utils.svgPaths.lineTo(o.width-l.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=s.utils.svgPaths.moveTo(l.xPos,o.yPos+o.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+s.utils.svgPaths.lineTo(o.width-l.xPos-this.insideCornerPaths_.width,0)},s.geras.Highlighter.prototype.drawRightSideRow=function(o){var l=o.xPos+o.width-this.highlightOffset_;o.followsStatement&&(this.steps_+=s.utils.svgPaths.lineOnAxis("H",l)),this.RTL_&&(this.steps_+=s.utils.svgPaths.lineOnAxis("H",l),o.height>this.highlightOffset_&&(this.steps_+=s.utils.svgPaths.lineOnAxis("V",o.yPos+o.height-this.highlightOffset_)))},s.geras.Highlighter.prototype.drawBottomRow=function(o){if(this.RTL_)this.steps_+=s.utils.svgPaths.lineOnAxis("V",o.baseline-this.highlightOffset_);else{var l=this.info_.bottomRow.elements[0];s.blockRendering.Types.isLeftSquareCorner(l)?this.steps_+=s.utils.svgPaths.moveTo(o.xPos+this.highlightOffset_,o.baseline-this.highlightOffset_):s.blockRendering.Types.isLeftRoundedCorner(l)&&(this.steps_+=s.utils.svgPaths.moveTo(o.xPos,o.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},s.geras.Highlighter.prototype.drawLeft=function(){var o=this.info_.outputConnection;o&&(o=o.connectionOffsetY+o.height,this.RTL_?this.steps_+=s.utils.svgPaths.moveTo(this.info_.startX,o):(this.steps_+=s.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=s.utils.svgPaths.lineOnAxis("V",o)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(s.blockRendering.Types.isLeftRoundedCorner((o=this.info_.topRow).elements[0])?this.steps_+=s.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=s.utils.svgPaths.lineOnAxis("V",o.capline+this.highlightOffset_))},s.geras.Highlighter.prototype.drawInlineInput=function(o){var l=this.highlightOffset_,u=o.xPos+o.connectionWidth,h=o.centerline-o.height/2,_=o.width-o.connectionWidth,b=h+l;this.RTL_?(h=o.connectionOffsetY-l,o=o.height-(o.connectionOffsetY+o.connectionHeight)+l,this.inlineSteps_+=s.utils.svgPaths.moveTo(u-l,b)+s.utils.svgPaths.lineOnAxis("v",h)+this.puzzleTabPaths_.pathDown(this.RTL_)+s.utils.svgPaths.lineOnAxis("v",o)+s.utils.svgPaths.lineOnAxis("h",_)):this.inlineSteps_+=s.utils.svgPaths.moveTo(o.xPos+o.width+l,b)+s.utils.svgPaths.lineOnAxis("v",o.height)+s.utils.svgPaths.lineOnAxis("h",-_)+s.utils.svgPaths.moveTo(u,h+o.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},s.geras.InlineInput=function(o,l){s.geras.InlineInput.superClass_.constructor.call(this,o,l),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},s.utils.object.inherits(s.geras.InlineInput,s.blockRendering.InlineInput),s.geras.StatementInput=function(o,l){s.geras.StatementInput.superClass_.constructor.call(this,o,l),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},s.utils.object.inherits(s.geras.StatementInput,s.blockRendering.StatementInput),s.geras.RenderInfo=function(o,l){s.geras.RenderInfo.superClass_.constructor.call(this,o,l)},s.utils.object.inherits(s.geras.RenderInfo,s.blockRendering.RenderInfo),s.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.geras.RenderInfo.prototype.populateBottomRow_=function(){s.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==s.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},s.geras.RenderInfo.prototype.addInput_=function(o,l){this.isInline&&o.type==s.inputTypes.VALUE?(l.elements.push(new s.geras.InlineInput(this.constants_,o)),l.hasInlineInput=!0):o.type==s.inputTypes.STATEMENT?(l.elements.push(new s.geras.StatementInput(this.constants_,o)),l.hasStatement=!0):o.type==s.inputTypes.VALUE?(l.elements.push(new s.blockRendering.ExternalValueInput(this.constants_,o)),l.hasExternalInput=!0):o.type==s.inputTypes.DUMMY&&(l.minHeight=Math.max(l.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),l.hasDummyInput=!0),this.isInline||null!=l.align||(l.align=o.align)},s.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var u,o=!1,l=0;u=this.rows[l];l++)u.hasExternalInput&&(o=!0);for(l=0;u=this.rows[l];l++){var h=u.elements;if(u.elements=[],u.startsWithElemSpacer()&&u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,h[0]))),h.length){for(var _=0;_<h.length-1;_++){u.elements.push(h[_]);var b=this.getInRowSpacing_(h[_],h[_+1]);u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b))}u.elements.push(h[h.length-1]),u.endsWithElemSpacer()&&(b=this.getInRowSpacing_(h[h.length-1],null),o&&u.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b)))}}},s.geras.RenderInfo.prototype.getInRowSpacing_=function(o,l){if(!o)return l&&s.blockRendering.Types.isField(l)&&l.isEditable?this.constants_.MEDIUM_PADDING:l&&s.blockRendering.Types.isInlineInput(l)?this.constants_.MEDIUM_LARGE_PADDING:l&&s.blockRendering.Types.isStatementInput(l)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!s.blockRendering.Types.isInput(o)&&(!l||s.blockRendering.Types.isStatementInput(l)))return s.blockRendering.Types.isField(o)&&o.isEditable?this.constants_.MEDIUM_PADDING:s.blockRendering.Types.isIcon(o)?2*this.constants_.LARGE_PADDING+1:s.blockRendering.Types.isHat(o)?this.constants_.NO_PADDING:s.blockRendering.Types.isPreviousOrNextConnection(o)?this.constants_.LARGE_PADDING:s.blockRendering.Types.isLeftRoundedCorner(o)?this.constants_.MIN_BLOCK_WIDTH:s.blockRendering.Types.isJaggedEdge(o)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInput(o)&&!l){if(s.blockRendering.Types.isExternalInput(o))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isInlineInput(o))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(o))return this.constants_.NO_PADDING}if(!s.blockRendering.Types.isInput(o)&&l&&s.blockRendering.Types.isInput(l)){if(s.blockRendering.Types.isField(o)&&o.isEditable){if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.SMALL_PADDING}else{if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.MEDIUM_LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(l))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(s.blockRendering.Types.isIcon(o)&&l&&!s.blockRendering.Types.isInput(l))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInlineInput(o)&&l&&s.blockRendering.Types.isField(l))return l.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isLeftSquareCorner(o)&&l){if(s.blockRendering.Types.isHat(l))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isPreviousConnection(l))return l.notchOffset;if(s.blockRendering.Types.isNextConnection(l))return l.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(s.blockRendering.Types.isLeftRoundedCorner(o)&&l){if(s.blockRendering.Types.isPreviousConnection(l))return l.notchOffset-this.constants_.CORNER_RADIUS;if(s.blockRendering.Types.isNextConnection(l))return l.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return s.blockRendering.Types.isField(o)&&l&&s.blockRendering.Types.isField(l)&&o.isEditable==l.isEditable||l&&s.blockRendering.Types.isJaggedEdge(l)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.geras.RenderInfo.prototype.getSpacerRowHeight_=function(o,l){return s.blockRendering.Types.isTopRow(o)&&s.blockRendering.Types.isBottomRow(l)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:s.blockRendering.Types.isTopRow(o)||s.blockRendering.Types.isBottomRow(l)?this.constants_.NO_PADDING:o.hasExternalInput&&l.hasExternalInput?this.constants_.LARGE_PADDING:!o.hasStatement&&l.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:o.hasStatement&&l.hasStatement||!o.hasStatement&&l.hasDummyInput||o.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.geras.RenderInfo.prototype.getElemCenterline_=function(o,l){if(s.blockRendering.Types.isSpacer(l))return o.yPos+l.height/2;if(s.blockRendering.Types.isBottomRow(o))return o=o.yPos+o.height-o.descenderHeight,s.blockRendering.Types.isNextConnection(l)?o+l.height/2:o-l.height/2;if(s.blockRendering.Types.isTopRow(o))return s.blockRendering.Types.isHat(l)?o.capline-l.height/2:o.capline+l.height/2;var u=o.yPos;return s.blockRendering.Types.isField(l)||s.blockRendering.Types.isIcon(l)?(u+=l.height/2,(o.hasInlineInput||o.hasStatement)&&l.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=o.height&&(u+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):u=s.blockRendering.Types.isInlineInput(l)?u+l.height/2:u+o.height/2,u},s.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var h,o=0,l=null,u=this.rows.length-1;h=this.rows[u];u--)h.nextRightEdge=o,s.blockRendering.Types.isInputRow(h)&&(h.hasStatement&&this.alignStatementRow_(h),l&&l.hasStatement&&h.width<l.width?h.nextRightEdge=l.width:o=h.width,l=h);for(u=o=0;h=this.rows[u];u++)h.hasStatement?o=this.getDesiredRowWidth_(h):s.blockRendering.Types.isSpacer(h)?h.width=Math.max(o,h.nextRightEdge):(0<(o=Math.max(o,h.nextRightEdge)-h.width)&&this.addAlignmentPadding_(h,o),o=h.width)}else s.geras.RenderInfo.superClass_.alignRowElements_.call(this)},s.geras.RenderInfo.prototype.getDesiredRowWidth_=function(o){return this.isInline&&o.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:s.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,o)},s.geras.RenderInfo.prototype.finalize_=function(){for(var h,o=0,l=0,u=0;h=this.rows[u];u++){h.yPos=l,h.xPos=this.startX,l+=h.height,o=Math.max(o,h.widthWithConnectedBlocks);var _=l-this.topRow.ascenderHeight;h==this.bottomRow&&_<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=_=this.constants_.MIN_BLOCK_HEIGHT-_,l+=_),this.recordElemPositions_(h)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=Math.max(o,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=l-this.bottomRow.descenderHeight,this.widthWithChildren=o+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=l+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},s.geras.Drawer=function(o,l){s.geras.Drawer.superClass_.constructor.call(this,o,l),this.highlighter_=new s.geras.Highlighter(l)},s.utils.object.inherits(s.geras.Drawer,s.blockRendering.Drawer),s.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var o=this.block_.pathObject;o.setPath(this.outlinePath_+"\n"+this.inlinePath_),o.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&o.flipRTL(),s.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},s.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),s.geras.Drawer.superClass_.drawTop_.call(this)},s.geras.Drawer.prototype.drawJaggedEdge_=function(o){this.highlighter_.drawJaggedEdge_(o),s.geras.Drawer.superClass_.drawJaggedEdge_.call(this,o)},s.geras.Drawer.prototype.drawValueInput_=function(o){this.highlighter_.drawValueInput(o),s.geras.Drawer.superClass_.drawValueInput_.call(this,o)},s.geras.Drawer.prototype.drawStatementInput_=function(o){this.highlighter_.drawStatementInput(o),s.geras.Drawer.superClass_.drawStatementInput_.call(this,o)},s.geras.Drawer.prototype.drawRightSideRow_=function(o){this.highlighter_.drawRightSideRow(o),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",o.xPos+o.width)+s.utils.svgPaths.lineOnAxis("V",o.yPos+o.height)},s.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),s.geras.Drawer.superClass_.drawBottom_.call(this)},s.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),s.geras.Drawer.superClass_.drawLeft_.call(this)},s.geras.Drawer.prototype.drawInlineInput_=function(o){this.highlighter_.drawInlineInput(o),s.geras.Drawer.superClass_.drawInlineInput_.call(this,o)},s.geras.Drawer.prototype.positionInlineInputConnection_=function(o){if(o.connectionModel){var u=o.xPos+o.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(u*=-1),o.connectionModel.setOffsetInBlock(u,o.centerline-o.height/2+o.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},s.geras.Drawer.prototype.positionStatementInputConnection_=function(o){var l=o.getLastInput();if(l.connectionModel){var u=o.xPos+o.statementEdge+l.notchOffset;l.connectionModel.setOffsetInBlock(u=this.info_.RTL?-1*u:u+this.constants_.DARK_PATH_OFFSET,o.yPos+this.constants_.DARK_PATH_OFFSET)}},s.geras.Drawer.prototype.positionExternalValueConnection_=function(o){var l=o.getLastInput();if(l.connectionModel){var u=o.xPos+o.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(u*=-1),l.connectionModel.setOffsetInBlock(u,o.yPos)}},s.geras.Drawer.prototype.positionNextConnection_=function(){var o=this.info_.bottomRow;if(o.connection){var l=o.connection,u=l.xPos;l.connectionModel.setOffsetInBlock((this.info_.RTL?-u:u)+this.constants_.DARK_PATH_OFFSET/2,o.baseline+this.constants_.DARK_PATH_OFFSET)}},s.geras.HighlightConstantProvider=function(o){this.constantProvider=o,this.OFFSET=.5,this.START_POINT=s.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},s.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},s.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var o=this.constantProvider.CORNER_RADIUS,l=this.OFFSET,u=(1-Math.SQRT1_2)*(o+l)-l,h=s.utils.svgPaths.moveBy(u,u)+s.utils.svgPaths.arc("a","0 0,0",o,s.utils.svgPaths.point(-u-l,o-u)),_=s.utils.svgPaths.arc("a","0 0,0",o+l,s.utils.svgPaths.point(o+l,o+l)),b=s.utils.svgPaths.moveBy(u,-u)+s.utils.svgPaths.arc("a","0 0,0",o+l,s.utils.svgPaths.point(o-u,u+l));return{width:o+l,height:o,pathTop:function(D){return D?h:""},pathBottom:function(D){return D?_:b}}},s.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var o=this.constantProvider.CORNER_RADIUS,l=this.OFFSET,u=(1-Math.SQRT1_2)*(o-l)+l,h=s.utils.svgPaths.moveBy(u,u)+s.utils.svgPaths.arc("a","0 0,1",o-l,s.utils.svgPaths.point(o-u,-u+l)),_=s.utils.svgPaths.moveBy(l,o)+s.utils.svgPaths.arc("a","0 0,1",o-l,s.utils.svgPaths.point(o,-o+l)),b=-u,D=s.utils.svgPaths.moveBy(u,b)+s.utils.svgPaths.arc("a","0 0,1",o-l,s.utils.svgPaths.point(-u+l,-b-o));return{height:o,topLeft:function(x){return x?h:_},bottomLeft:function(){return D}}},s.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var o=this.constantProvider.TAB_WIDTH,l=this.constantProvider.TAB_HEIGHT,u=s.utils.svgPaths.moveBy(-2,3.4-l)+s.utils.svgPaths.lineTo(-.45*o,-2.1),h=s.utils.svgPaths.lineOnAxis("v",2.5)+s.utils.svgPaths.moveBy(.97*-o,2.5)+s.utils.svgPaths.curve("q",[s.utils.svgPaths.point(.05*-o,10),s.utils.svgPaths.point(.3*o,9.5)])+s.utils.svgPaths.moveBy(.67*o,-1.9)+s.utils.svgPaths.lineOnAxis("v",2.5),_=s.utils.svgPaths.lineOnAxis("v",-1.5)+s.utils.svgPaths.moveBy(-.92*o,-.5)+s.utils.svgPaths.curve("q",[s.utils.svgPaths.point(-.19*o,-5.5),s.utils.svgPaths.point(0,-11)])+s.utils.svgPaths.moveBy(.92*o,1),b=s.utils.svgPaths.moveBy(-5,l-.7)+s.utils.svgPaths.lineTo(.46*o,-2.1);return{width:o,height:l,pathUp:function(D){return D?u:_},pathDown:function(D){return D?h:b}}},s.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:s.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},s.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:s.utils.svgPaths.lineTo(5.1,2.6)+s.utils.svgPaths.moveBy(-10.2,6.8)+s.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},s.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var o=this.constantProvider.START_HAT.height,l=s.utils.svgPaths.moveBy(25,-8.7)+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(29.7,-6.2),s.utils.svgPaths.point(57.2,-.5),s.utils.svgPaths.point(75,8.7)]),u=s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(17.8,-9.2),s.utils.svgPaths.point(45.3,-14.9),s.utils.svgPaths.point(75,-8.7)])+s.utils.svgPaths.moveTo(100.5,o+.5);return{path:function(h){return h?l:u}}},s.geras.PathObject=function(o,l,u){this.constants=u,this.svgRoot=o,this.svgPathDark=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=l},s.utils.object.inherits(s.geras.PathObject,s.blockRendering.PathObject),s.geras.PathObject.prototype.setPath=function(o){this.svgPath.setAttribute("d",o),this.svgPathDark.setAttribute("d",o)},s.geras.PathObject.prototype.setHighlightPath=function(o){this.svgPathLight.setAttribute("d",o)},s.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},s.geras.PathObject.prototype.applyColour=function(o){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),s.geras.PathObject.superClass_.applyColour.call(this,o),this.svgPath.setAttribute("stroke","none")},s.geras.PathObject.prototype.setStyle=function(o){this.style=o,this.colourDark=s.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},s.geras.PathObject.prototype.updateHighlighted=function(o){o?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},s.geras.PathObject.prototype.updateShadow_=function(o){o&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},s.geras.PathObject.prototype.updateDisabled_=function(o){s.geras.PathObject.superClass_.updateDisabled_.call(this,o),o&&this.svgPath.setAttribute("stroke","none")},s.geras.Renderer=function(o){s.geras.Renderer.superClass_.constructor.call(this,o),this.highlightConstants_=null},s.utils.object.inherits(s.geras.Renderer,s.blockRendering.Renderer),s.geras.Renderer.prototype.init=function(o,l){s.geras.Renderer.superClass_.init.call(this,o,l),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},s.geras.Renderer.prototype.refreshDom=function(o,l){s.geras.Renderer.superClass_.refreshDom.call(this,o,l),this.getHighlightConstants().init()},s.geras.Renderer.prototype.makeConstants_=function(){return new s.geras.ConstantProvider},s.geras.Renderer.prototype.makeRenderInfo_=function(o){return new s.geras.RenderInfo(this,o)},s.geras.Renderer.prototype.makeDrawer_=function(o,l){return new s.geras.Drawer(o,l)},s.geras.Renderer.prototype.makePathObject=function(o,l){return new s.geras.PathObject(o,l,this.getConstants())},s.geras.Renderer.prototype.makeHighlightConstants_=function(){return new s.geras.HighlightConstantProvider(this.getConstants())},s.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},s.blockRendering.register("geras",s.geras.Renderer),s.thrasos={},s.thrasos.RenderInfo=function(o,l){s.thrasos.RenderInfo.superClass_.constructor.call(this,o,l)},s.utils.object.inherits(s.thrasos.RenderInfo,s.blockRendering.RenderInfo),s.thrasos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.thrasos.RenderInfo.prototype.addElemSpacing_=function(){for(var u,o=!1,l=0;u=this.rows[l];l++)u.hasExternalInput&&(o=!0);for(l=0;u=this.rows[l];l++){var h=u.elements;u.elements=[],u.startsWithElemSpacer()&&u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,h[0])));for(var _=0;_<h.length-1;_++){u.elements.push(h[_]);var b=this.getInRowSpacing_(h[_],h[_+1]);u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b))}u.elements.push(h[h.length-1]),u.endsWithElemSpacer()&&(b=this.getInRowSpacing_(h[h.length-1],null),o&&u.hasDummyInput&&(b+=this.constants_.TAB_WIDTH),u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,b)))}},s.thrasos.RenderInfo.prototype.getInRowSpacing_=function(o,l){if(!o)return l&&s.blockRendering.Types.isField(l)&&l.isEditable?this.constants_.MEDIUM_PADDING:l&&s.blockRendering.Types.isInlineInput(l)?this.constants_.MEDIUM_LARGE_PADDING:l&&s.blockRendering.Types.isStatementInput(l)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!s.blockRendering.Types.isInput(o)&&!l)return s.blockRendering.Types.isField(o)&&o.isEditable?this.constants_.MEDIUM_PADDING:s.blockRendering.Types.isIcon(o)?2*this.constants_.LARGE_PADDING+1:s.blockRendering.Types.isHat(o)?this.constants_.NO_PADDING:s.blockRendering.Types.isPreviousOrNextConnection(o)?this.constants_.LARGE_PADDING:s.blockRendering.Types.isLeftRoundedCorner(o)?this.constants_.MIN_BLOCK_WIDTH:s.blockRendering.Types.isJaggedEdge(o)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInput(o)&&!l){if(s.blockRendering.Types.isExternalInput(o))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isInlineInput(o))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(o))return this.constants_.NO_PADDING}if(!s.blockRendering.Types.isInput(o)&&l&&s.blockRendering.Types.isInput(l)){if(s.blockRendering.Types.isField(o)&&o.isEditable){if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.SMALL_PADDING}else{if(s.blockRendering.Types.isInlineInput(l)||s.blockRendering.Types.isExternalInput(l))return this.constants_.MEDIUM_LARGE_PADDING;if(s.blockRendering.Types.isStatementInput(l))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(s.blockRendering.Types.isIcon(o)&&l&&!s.blockRendering.Types.isInput(l))return this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isInlineInput(o)&&l&&s.blockRendering.Types.isField(l))return l.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(s.blockRendering.Types.isLeftSquareCorner(o)&&l){if(s.blockRendering.Types.isHat(l))return this.constants_.NO_PADDING;if(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))return l.notchOffset}return s.blockRendering.Types.isLeftRoundedCorner(o)&&l?l.notchOffset-this.constants_.CORNER_RADIUS:s.blockRendering.Types.isField(o)&&l&&s.blockRendering.Types.isField(l)&&o.isEditable==l.isEditable||l&&s.blockRendering.Types.isJaggedEdge(l)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.thrasos.RenderInfo.prototype.getSpacerRowHeight_=function(o,l){return s.blockRendering.Types.isTopRow(o)&&s.blockRendering.Types.isBottomRow(l)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:s.blockRendering.Types.isTopRow(o)||s.blockRendering.Types.isBottomRow(l)?this.constants_.NO_PADDING:o.hasExternalInput&&l.hasExternalInput?this.constants_.LARGE_PADDING:!o.hasStatement&&l.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:o.hasStatement&&l.hasStatement||o.hasDummyInput||l.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},s.thrasos.RenderInfo.prototype.getElemCenterline_=function(o,l){if(s.blockRendering.Types.isSpacer(l))return o.yPos+l.height/2;if(s.blockRendering.Types.isBottomRow(o))return o=o.yPos+o.height-o.descenderHeight,s.blockRendering.Types.isNextConnection(l)?o+l.height/2:o-l.height/2;if(s.blockRendering.Types.isTopRow(o))return s.blockRendering.Types.isHat(l)?o.capline-l.height/2:o.capline+l.height/2;var u=o.yPos;return s.blockRendering.Types.isField(l)&&o.hasStatement?u+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+l.height/2):u+o.height/2},s.thrasos.RenderInfo.prototype.finalize_=function(){for(var h,o=0,l=0,u=0;h=this.rows[u];u++){h.yPos=l,h.xPos=this.startX,l+=h.height,o=Math.max(o,h.widthWithConnectedBlocks);var _=l-this.topRow.ascenderHeight;h==this.bottomRow&&_<this.constants_.MIN_BLOCK_HEIGHT&&(this.bottomRow.height+=_=this.constants_.MIN_BLOCK_HEIGHT-_,l+=_),this.recordElemPositions_(h)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=Math.max(o,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=l-this.bottomRow.descenderHeight,this.widthWithChildren=o+this.startX,this.height=l,this.startY=this.topRow.capline},s.thrasos.Renderer=function(o){s.thrasos.Renderer.superClass_.constructor.call(this,o)},s.utils.object.inherits(s.thrasos.Renderer,s.blockRendering.Renderer),s.thrasos.Renderer.prototype.makeRenderInfo_=function(o){return new s.thrasos.RenderInfo(this,o)},s.blockRendering.register("thrasos",s.thrasos.Renderer),s.zelos={},s.zelos.ConstantProvider=function(){s.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},s.utils.object.inherits(s.zelos.ConstantProvider,s.blockRendering.ConstantProvider),s.zelos.ConstantProvider.prototype.setFontConstants_=function(o){s.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,o),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},s.zelos.ConstantProvider.prototype.init=function(){s.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},s.zelos.ConstantProvider.prototype.setDynamicProperties_=function(o){s.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,o),this.SELECTED_GLOW_COLOUR=o.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var l=Number(o.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=l&&!isNaN(l)?l:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=o.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(o=Number(o.getComponentStyle("replacementGlowSize")))&&!isNaN(o)?o:this.REPLACEMENT_GLOW_SIZE},s.zelos.ConstantProvider.prototype.dispose=function(){s.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&s.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&s.utils.dom.removeNode(this.replacementGlowFilter_)},s.zelos.ConstantProvider.prototype.makeStartHat=function(){var o=this.START_HAT_HEIGHT,l=this.START_HAT_WIDTH;return{height:o,width:l,path:s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(25,-o),s.utils.svgPaths.point(71,-o),s.utils.svgPaths.point(l,0)])}},s.zelos.ConstantProvider.prototype.makeHexagonal=function(){function o(u,h,_){var b=u/2;return s.utils.svgPaths.lineTo(-(_=_?-1:1)*(b=b>l?l:b),u=(h?-1:1)*u/2)+s.utils.svgPaths.lineTo(_*b,u)}var l=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(u){return(u/=2)>l?l:u},height:function(u){return u},connectionOffsetY:function(u){return u/2},connectionOffsetX:function(u){return-u},pathDown:function(u){return o(u,!1,!1)},pathUp:function(u){return o(u,!0,!1)},pathRightDown:function(u){return o(u,!1,!0)},pathRightUp:function(u){return o(u,!1,!0)}}},s.zelos.ConstantProvider.prototype.makeRounded=function(){function o(h,_,b){var D=h>u?h-u:0;return s.utils.svgPaths.arc("a","0 0,1",h=(h>u?u:h)/2,s.utils.svgPaths.point((_?-1:1)*h,(_?-1:1)*h))+s.utils.svgPaths.lineOnAxis("v",(b?1:-1)*D)+s.utils.svgPaths.arc("a","0 0,1",h,s.utils.svgPaths.point((_?1:-1)*h,(_?-1:1)*h))}var l=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,u=2*l;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(h){return(h/=2)>l?l:h},height:function(h){return h},connectionOffsetY:function(h){return h/2},connectionOffsetX:function(h){return-h},pathDown:function(h){return o(h,!1,!1)},pathUp:function(h){return o(h,!0,!1)},pathRightDown:function(h){return o(h,!1,!0)},pathRightUp:function(h){return o(h,!1,!0)}}},s.zelos.ConstantProvider.prototype.makeSquared=function(){function o(u,h,_){return u-=2*l,s.utils.svgPaths.arc("a","0 0,1",l,s.utils.svgPaths.point((h?-1:1)*l,(h?-1:1)*l))+s.utils.svgPaths.lineOnAxis("v",(_?1:-1)*u)+s.utils.svgPaths.arc("a","0 0,1",l,s.utils.svgPaths.point((h?1:-1)*l,(h?-1:1)*l))}var l=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(u){return l},height:function(u){return u},connectionOffsetY:function(u){return u/2},connectionOffsetX:function(u){return-u},pathDown:function(u){return o(u,!1,!1)},pathUp:function(u){return o(u,!0,!1)},pathRightDown:function(u){return o(u,!1,!0)},pathRightUp:function(u){return o(u,!1,!0)}}},s.zelos.ConstantProvider.prototype.shapeFor=function(o){var l=o.getCheck();switch(!l&&o.targetConnection&&(l=o.targetConnection.getCheck()),o.type){case s.connectionTypes.INPUT_VALUE:case s.connectionTypes.OUTPUT_VALUE:if(null!=(o=o.getSourceBlock().getOutputShape()))switch(o){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return l&&-1!=l.indexOf("Boolean")?this.HEXAGONAL:(l&&-1!=l.indexOf("Number")||l&&l.indexOf("String"),this.ROUNDED);case s.connectionTypes.PREVIOUS_STATEMENT:case s.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},s.zelos.ConstantProvider.prototype.makeNotch=function(){function o(j){return s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(j*_/2,0),s.utils.svgPaths.point(j*_*3/4,D/2),s.utils.svgPaths.point(j*_,D)])+s.utils.svgPaths.line([s.utils.svgPaths.point(j*_,b)])+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(j*_/4,D/2),s.utils.svgPaths.point(j*_/2,D),s.utils.svgPaths.point(j*_,D)])+s.utils.svgPaths.lineOnAxis("h",j*h)+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(j*_/2,0),s.utils.svgPaths.point(j*_*3/4,-D/2),s.utils.svgPaths.point(j*_,-D)])+s.utils.svgPaths.line([s.utils.svgPaths.point(j*_,-b)])+s.utils.svgPaths.curve("c",[s.utils.svgPaths.point(j*_/4,-D/2),s.utils.svgPaths.point(j*_/2,-D),s.utils.svgPaths.point(j*_,-D)])}var l=this.NOTCH_WIDTH,u=this.NOTCH_HEIGHT,h=l/3,_=h/3,b=u/2,D=b/2,x=o(1),G=o(-1);return{type:this.SHAPES.NOTCH,width:l,height:u,pathLeft:x,pathRight:G}},s.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var o=this.CORNER_RADIUS,l=s.utils.svgPaths.arc("a","0 0,0",o,s.utils.svgPaths.point(-o,o)),u=s.utils.svgPaths.arc("a","0 0,1",o,s.utils.svgPaths.point(-o,o));return{width:o,height:o,pathTop:l,pathBottom:s.utils.svgPaths.arc("a","0 0,0",o,s.utils.svgPaths.point(o,o)),rightWidth:o,rightHeight:o,pathTopRight:u,pathBottomRight:s.utils.svgPaths.arc("a","0 0,1",o,s.utils.svgPaths.point(o,o))}},s.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(o){return s.utils.colour.blend("#000",o,.15)||o},s.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(o){return s.utils.colour.blend("#000",o,.25)||o},s.zelos.ConstantProvider.prototype.createDom=function(o,l,u){s.zelos.ConstantProvider.superClass_.createDom.call(this,o,l,u),o=s.utils.dom.createSvgElement(s.utils.Svg.DEFS,{},o),l=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},o),s.utils.dom.createSvgElement(s.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},l),u=s.utils.dom.createSvgElement(s.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},u),s.utils.dom.createSvgElement(s.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},l),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},l),this.selectedGlowFilterId=l.id,this.selectedGlowFilter_=l,o=s.utils.dom.createSvgElement(s.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},o),s.utils.dom.createSvgElement(s.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},o),l=s.utils.dom.createSvgElement(s.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},o),s.utils.dom.createSvgElement(s.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},l),s.utils.dom.createSvgElement(s.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},o),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},o),s.utils.dom.createSvgElement(s.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},o),this.replacementGlowFilterId=o.id,this.replacementGlowFilter_=o},s.zelos.ConstantProvider.prototype.getCSS_=function(o){return[o+" .blocklyText,",o+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",o+" .blocklyText {","fill: #fff;","}",o+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",o+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",o+" .blocklyNonEditableText>text,",o+" .blocklyEditableText>text,",o+" .blocklyNonEditableText>g>text,",o+" .blocklyEditableText>g>text {","fill: #575E75;","}",o+" .blocklyFlyoutLabelText {","fill: #575E75;","}",o+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",o+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",o+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",o+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",o+" .blocklyDropdownText {","fill: #fff !important;","}",o+".blocklyWidgetDiv .goog-menuitem,",o+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",o+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",o+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",o+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",o+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},s.zelos.TopRow=function(o){s.zelos.TopRow.superClass_.constructor.call(this,o)},s.utils.object.inherits(s.zelos.TopRow,s.blockRendering.TopRow),s.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},s.zelos.TopRow.prototype.hasLeftSquareCorner=function(o){return!!o.outputConnection||(o.hat?"cap"===o.hat:this.constants_.ADD_START_HATS)&&!o.outputConnection&&!o.previousConnection},s.zelos.TopRow.prototype.hasRightSquareCorner=function(o){return!!o.outputConnection&&!o.statementInputCount&&!o.nextConnection},s.zelos.BottomRow=function(o){s.zelos.BottomRow.superClass_.constructor.call(this,o)},s.utils.object.inherits(s.zelos.BottomRow,s.blockRendering.BottomRow),s.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},s.zelos.BottomRow.prototype.hasLeftSquareCorner=function(o){return!!o.outputConnection},s.zelos.BottomRow.prototype.hasRightSquareCorner=function(o){return!!o.outputConnection&&!o.statementInputCount&&!o.nextConnection},s.zelos.RightConnectionShape=function(o){s.zelos.RightConnectionShape.superClass_.constructor.call(this,o),this.type|=s.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},s.utils.object.inherits(s.zelos.RightConnectionShape,s.blockRendering.Measurable),s.zelos.RenderInfo=function(o,l){s.zelos.RenderInfo.superClass_.constructor.call(this,o,l),this.topRow=new s.zelos.TopRow(this.constants_),this.bottomRow=new s.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!l.getInputsInline()||l.isCollapsed(),this.hasStatementInput=0<l.statementInputCount,this.rightSide=this.outputConnection?new s.zelos.RightConnectionShape(this.constants_):null},s.utils.object.inherits(s.zelos.RenderInfo,s.blockRendering.RenderInfo),s.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},s.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},s.zelos.RenderInfo.prototype.shouldStartNewRow_=function(o,l){return!!l&&(o.type==s.inputTypes.STATEMENT||l.type==s.inputTypes.STATEMENT||(o.type==s.inputTypes.VALUE||o.type==s.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},s.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(o){return o.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):s.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,o)},s.zelos.RenderInfo.prototype.getInRowSpacing_=function(o,l){return o&&l||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!o&&l&&s.blockRendering.Types.isStatementInput(l)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:o&&s.blockRendering.Types.isLeftRoundedCorner(o)&&l&&(s.blockRendering.Types.isPreviousConnection(l)||s.blockRendering.Types.isNextConnection(l))?l.notchOffset-this.constants_.CORNER_RADIUS:o&&s.blockRendering.Types.isLeftSquareCorner(o)&&l&&s.blockRendering.Types.isHat(l)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},s.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(o,l){if(s.blockRendering.Types.isTopRow(o)&&s.blockRendering.Types.isBottomRow(l))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var u=s.blockRendering.Types.isInputRow(o)&&o.hasStatement,h=s.blockRendering.Types.isInputRow(l)&&l.hasStatement;return h||u?(o=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),h&&u?Math.max(o,this.constants_.DUMMY_INPUT_MIN_HEIGHT):o):s.blockRendering.Types.isTopRow(o)?o.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):s.blockRendering.Types.isBottomRow(l)?this.outputConnection?!l.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},s.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(o,l){var u=this.width-this.startX;return s.blockRendering.Types.isInputRow(o)&&o.hasStatement||s.blockRendering.Types.isInputRow(l)&&l.hasStatement?Math.max(u,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):u},s.zelos.RenderInfo.prototype.getElemCenterline_=function(o,l){if(o.hasStatement&&!s.blockRendering.Types.isSpacer(l)&&!s.blockRendering.Types.isStatementInput(l))return o.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(s.blockRendering.Types.isInlineInput(l)){var u=l.connectedBlock;if(u&&u.outputConnection&&u.nextConnection)return o.yPos+u.height/2}return s.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,o,l)},s.zelos.RenderInfo.prototype.addInput_=function(o,l){o.type==s.inputTypes.DUMMY&&l.hasDummyInput&&l.align==s.constants.ALIGN.LEFT&&o.align==s.constants.ALIGN.RIGHT&&(l.rightAlignedDummyInput=o),s.zelos.RenderInfo.superClass_.addInput_.call(this,o,l)},s.zelos.RenderInfo.prototype.addAlignmentPadding_=function(o,l){if(o.rightAlignedDummyInput){for(var u,_,h=0;(_=o.elements[h])&&(s.blockRendering.Types.isSpacer(_)&&(u=_),!s.blockRendering.Types.isField(_)||_.parentInput!=o.rightAlignedDummyInput);h++);if(u)return u.width+=l,void(o.width+=l)}s.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,o,l)},s.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var o=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,l=o,u=2;u<this.rows.length-1;u+=2){var h=this.rows[u-1],_=this.rows[u],b=this.rows[u+1];if(h=2==u?!!this.topRow.hasPreviousConnection:!!h.followsStatement,b=u+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!b.precedesStatement,s.blockRendering.Types.isInputRow(_)&&_.hasStatement)_.measure(),l=_.width-_.getLastInput().width+o;else if(h&&(2==u||b)&&s.blockRendering.Types.isInputRow(_)&&!_.hasStatement){b=_.xPos,h=null;for(var x,D=0;x=_.elements[D];D++)s.blockRendering.Types.isSpacer(x)&&(h=x),!(h&&(s.blockRendering.Types.isField(x)||s.blockRendering.Types.isInput(x))&&b<l)||s.blockRendering.Types.isField(x)&&(x.field instanceof s.FieldLabel||x.field instanceof s.FieldImage)||(h.width+=l-b),b+=x.width}}},s.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var u,o=0,l=0;u=this.rows[l];l++)u.yPos=o,o+=u.height;this.height=o,o=this.outputConnection.shape.height(l=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height),l=this.outputConnection.shape.width(l),this.outputConnection.height=o,this.outputConnection.width=l,this.outputConnection.startX=l,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(o),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(l),u=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(u=l,this.rightSide.height=o,this.rightSide.width=u,this.rightSide.centerline=o/2,this.rightSide.xPos=this.width+u),this.startX=l,this.width+=l+u,this.widthWithChildren+=l+u}},s.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var u,o=0,l=0;u=this.rows[l];l++)if(s.blockRendering.Types.isInputRow(u)){o=u.elements[u.elements.length-2];var h=this.getNegativeSpacing_(u.elements[1]),_=this.getNegativeSpacing_(o),b=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-(o=h+_)<b&&(h=(o=this.width-b)/2,_=o/2),u.elements.unshift(new s.blockRendering.InRowSpacer(this.constants_,-h)),u.elements.push(new s.blockRendering.InRowSpacer(this.constants_,-_))}if(o)for(this.width-=o,this.widthWithChildren-=o,this.rightSide.xPos-=o,l=0;u=this.rows[l];l++)s.blockRendering.Types.isTopOrBottomRow(u)&&(u.elements[1].width-=o,u.elements[1].widthWithConnectedBlocks-=o),u.width-=o,u.widthWithConnectedBlocks-=o}},s.zelos.RenderInfo.prototype.getNegativeSpacing_=function(o){if(!o)return 0;var l=this.outputConnection.width,u=this.outputConnection.shape.type,h=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(u){case h.SHAPES.ROUND:return l-(u=this.height/2>(u=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH)?u:this.height/2)*(1-Math.sin(Math.acos((u-this.constants_.SMALL_PADDING)/u)));default:return 0}if(s.blockRendering.Types.isInlineInput(o)){var _=o.connectedBlock;return o=_?_.pathObject.outputShapeType:o.shape.type,_&&_.outputConnection&&(_.statementInputCount||_.nextConnection)||u==h.SHAPES.HEXAGONAL&&u!=o?0:l-this.constants_.SHAPE_IN_SHAPE_PADDING[u][o]}return s.blockRendering.Types.isField(o)?u==h.SHAPES.ROUND&&o.field instanceof s.FieldTextInput?l-2.75*h.GRID_UNIT:l-this.constants_.SHAPE_IN_SHAPE_PADDING[u][0]:s.blockRendering.Types.isIcon(o)?this.constants_.SMALL_PADDING:0},s.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var o=2;o<this.rows.length-1;o+=2){var l=this.rows[o-1],u=this.rows[o],h=this.rows[o+1],_=2==o,b=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!h.precedesStatement;if(_?this.topRow.hasPreviousConnection:l.followsStatement){var D=3==u.elements.length&&(u.elements[1].field instanceof s.FieldLabel||u.elements[1].field instanceof s.FieldImage);if(!_&&D)l.height-=this.constants_.SMALL_PADDING,h.height-=this.constants_.SMALL_PADDING,u.height-=this.constants_.MEDIUM_PADDING;else if(_||b){if(b){for(_=!1,b=0;D=u.elements[b];b++)if(s.blockRendering.Types.isInlineInput(D)&&D.connectedBlock&&!D.connectedBlock.isShadow()&&40<=D.connectedBlock.getHeightWidth().height){_=!0;break}_&&(l.height-=this.constants_.SMALL_PADDING,h.height-=this.constants_.SMALL_PADDING)}}else l.height+=this.constants_.SMALL_PADDING}}},s.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),s.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},s.zelos.Drawer=function(o,l){s.zelos.Drawer.superClass_.constructor.call(this,o,l)},s.utils.object.inherits(s.zelos.Drawer,s.blockRendering.Drawer),s.zelos.Drawer.prototype.draw=function(){var o=this.block_.pathObject;o.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),o.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&o.flipRTL(),s.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(o.outputShapeType=this.info_.outputConnection.shape.type),o.endDrawing()},s.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):s.zelos.Drawer.superClass_.drawOutline_.call(this)},s.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():s.zelos.Drawer.superClass_.drawLeft_.call(this)},s.zelos.Drawer.prototype.drawRightSideRow_=function(o){if(!(0>=o.height))if(o.precedesStatement||o.followsStatement){var l=this.constants_.INSIDE_CORNERS.rightHeight;this.outlinePath_+=(o.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<(l=o.height-(o.precedesStatement?l:0))?s.utils.svgPaths.lineOnAxis("V",o.yPos+l):"")+(o.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",o.yPos+o.height)},s.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},s.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},s.zelos.Drawer.prototype.drawFlatTop_=function(){var o=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=s.utils.svgPaths.moveBy(o.xPos,this.info_.startY),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("h",o.width)},s.zelos.Drawer.prototype.drawFlatBottom_=function(){var o=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("V",o.baseline),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("h",-o.width)},s.zelos.Drawer.prototype.drawInlineInput_=function(o){this.positionInlineInputConnection_(o);var l=o.input.name;if(!o.connectedBlock&&!this.info_.isInsertionMarker){var u=o.width-2*o.connectionWidth;o=s.utils.svgPaths.moveTo(o.xPos+o.connectionWidth,o.centerline-o.height/2)+s.utils.svgPaths.lineOnAxis("h",u)+o.shape.pathRightDown(o.height)+s.utils.svgPaths.lineOnAxis("h",-u)+o.shape.pathUp(o.height)+"z",this.block_.pathObject.setOutlinePath(l,o)}},s.zelos.Drawer.prototype.drawStatementInput_=function(o){var l=o.getLastInput(),u=l.xPos+l.notchOffset+l.shape.width,h=l.shape.pathRight+s.utils.svgPaths.lineOnAxis("h",-(l.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,_=o.height-2*this.constants_.INSIDE_CORNERS.height;l=this.constants_.INSIDE_CORNERS.pathBottom+s.utils.svgPaths.lineOnAxis("h",l.notchOffset-this.constants_.INSIDE_CORNERS.width)+(l.connectedBottomNextConnection?"":l.shape.pathLeft),this.outlinePath_+=s.utils.svgPaths.lineOnAxis("H",u)+h+s.utils.svgPaths.lineOnAxis("v",_)+l+s.utils.svgPaths.lineOnAxis("H",o.xPos+o.width),this.positionStatementInputConnection_(o)},s.zelos.MarkerSvg=function(o,l,u){s.zelos.MarkerSvg.superClass_.constructor.call(this,o,l,u)},s.utils.object.inherits(s.zelos.MarkerSvg,s.blockRendering.MarkerSvg),s.zelos.MarkerSvg.prototype.showWithInputOutput_=function(o){var l=o.getSourceBlock();o=o.getLocation().getOffsetInBlock(),this.positionCircle_(o.x,o.y),this.setParent_(l),this.showCurrent_()},s.zelos.MarkerSvg.prototype.showWithOutput_=function(o){this.showWithInputOutput_(o)},s.zelos.MarkerSvg.prototype.showWithInput_=function(o){this.showWithInputOutput_(o)},s.zelos.MarkerSvg.prototype.showWithBlock_=function(o){var l=(o=o.getLocation()).getHeightWidth();this.positionRect_(0,0,l.width,l.height),this.setParent_(o),this.showCurrent_()},s.zelos.MarkerSvg.prototype.positionCircle_=function(o,l){this.markerCircle_.setAttribute("cx",o),this.markerCircle_.setAttribute("cy",l),this.currentMarkerSvg=this.markerCircle_},s.zelos.MarkerSvg.prototype.hide=function(){s.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},s.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(s.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=s.utils.dom.createSvgElement(s.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var o=this.getBlinkProperties_();s.utils.dom.createSvgElement(s.utils.Svg.ANIMATE,o,this.markerCircle_)}return this.markerSvg_},s.zelos.MarkerSvg.prototype.applyColour_=function(o){s.zelos.MarkerSvg.superClass_.applyColour_.call(this,o),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},s.zelos.PathObject=function(o,l,u){s.zelos.PathObject.superClass_.constructor.call(this,o,l,u),this.constants=u,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},s.utils.object.inherits(s.zelos.PathObject,s.blockRendering.PathObject),s.zelos.PathObject.prototype.setPath=function(o){s.zelos.PathObject.superClass_.setPath.call(this,o),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",o)},s.zelos.PathObject.prototype.applyColour=function(o){for(var l in s.zelos.PathObject.superClass_.applyColour.call(this,o),o.isShadow()&&o.getParent()&&this.svgPath.setAttribute("stroke",o.getParent().style.colourTertiary),this.outlines_)this.outlines_[l].setAttribute("fill",this.style.colourTertiary)},s.zelos.PathObject.prototype.flipRTL=function(){for(var o in s.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[o].setAttribute("transform","scale(-1 1)")},s.zelos.PathObject.prototype.updateSelected=function(o){this.setClass_("blocklySelected",o),o?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},s.zelos.PathObject.prototype.updateReplacementFade=function(o){this.setClass_("blocklyReplaceable",o),o?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},s.zelos.PathObject.prototype.updateShapeForInputHighlight=function(o,l){o=o.getParentInput().name,(o=this.getOutlinePath_(o))&&(l?o.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):o.removeAttribute("filter"))},s.zelos.PathObject.prototype.beginDrawing=function(){for(var o in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[o]=1},s.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var o in this.remainingOutlines_)this.removeOutlinePath_(o);this.remainingOutlines_=null},s.zelos.PathObject.prototype.setOutlinePath=function(o,l){(o=this.getOutlinePath_(o)).setAttribute("d",l),o.setAttribute("fill",this.style.colourTertiary)},s.zelos.PathObject.prototype.getOutlinePath_=function(o){return this.outlines_[o]||(this.outlines_[o]=s.utils.dom.createSvgElement(s.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[o],this.outlines_[o]},s.zelos.PathObject.prototype.removeOutlinePath_=function(o){this.outlines_[o].parentNode.removeChild(this.outlines_[o]),delete this.outlines_[o]},s.zelos.Renderer=function(o){s.zelos.Renderer.superClass_.constructor.call(this,o)},s.utils.object.inherits(s.zelos.Renderer,s.blockRendering.Renderer),s.zelos.Renderer.prototype.makeConstants_=function(){return new s.zelos.ConstantProvider},s.zelos.Renderer.prototype.makeRenderInfo_=function(o){return new s.zelos.RenderInfo(this,o)},s.zelos.Renderer.prototype.makeDrawer_=function(o,l){return new s.zelos.Drawer(o,l)},s.zelos.Renderer.prototype.makeMarkerDrawer=function(o,l){return new s.zelos.MarkerSvg(o,this.getConstants(),l)},s.zelos.Renderer.prototype.makePathObject=function(o,l){return new s.zelos.PathObject(o,l,this.getConstants())},s.zelos.Renderer.prototype.shouldHighlightConnection=function(o){return o.type!=s.connectionTypes.INPUT_VALUE&&o.type!==s.connectionTypes.OUTPUT_VALUE},s.zelos.Renderer.prototype.getConnectionPreviewMethod=function(o,l,u){return l.type==s.connectionTypes.OUTPUT_VALUE?o.isConnected()?s.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:s.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:s.zelos.Renderer.superClass_.getConnectionPreviewMethod(o,l,u)},s.blockRendering.register("zelos",s.zelos.Renderer),s.Themes.Dark=s.Theme.defineTheme("dark",{base:s.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),s.Themes.Deuteranopia={},s.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},s.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},s.Themes.Deuteranopia=new s.Theme("deuteranopia",s.Themes.Deuteranopia.defaultBlockStyles,s.Themes.Deuteranopia.categoryStyles),s.Themes.HighContrast={},s.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},s.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},s.Themes.HighContrast=new s.Theme("highcontrast",s.Themes.HighContrast.defaultBlockStyles,s.Themes.HighContrast.categoryStyles),s.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),s.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),s.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),s.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),s.Themes.Tritanopia={},s.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},s.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},s.Themes.Tritanopia=new s.Theme("tritanopia",s.Themes.Tritanopia.defaultBlockStyles,s.Themes.Tritanopia.categoryStyles),s.requires={},s})?m.apply(A,[]):m)&&(T.exports=S)},81010:function(T,A,m){var y,S,s;S=[m(8100)],void 0!==(s="function"==typeof(y=function(o){"use strict";return o.Blocks={},o.Blocks})?y.apply(A,S):y)&&(T.exports=s)},8100:function(T,A,m){var y,S,s;S=[m(99240)],void 0!==(s="function"==typeof(y=function(o){"use strict";return o.Blocks.colour={},o.Constants={},o.Constants.Colour={},o.Constants.Colour.HUE=20,o.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),o.Constants.Lists={},o.Constants.Lists.HUE=260,o.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),o.Blocks.lists_create_with={init:function(){this.setHelpUrl(o.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new o.Mutator(["lists_create_with_item"])),this.setTooltip(o.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var l=o.utils.xml.createElement("mutation");return l.setAttribute("items",this.itemCount_),l},domToMutation:function(l){this.itemCount_=parseInt(l.getAttribute("items"),10),this.updateShape_()},decompose:function(l){var u=l.newBlock("lists_create_with_container");u.initSvg();for(var h=u.getInput("STACK").connection,_=0;_<this.itemCount_;_++){var b=l.newBlock("lists_create_with_item");b.initSvg(),h.connect(b.previousConnection),h=b.nextConnection}return u},compose:function(l){var u=l.getInputTargetBlock("STACK");for(l=[];u&&!u.isInsertionMarker();)l.push(u.valueConnection_),u=u.nextConnection&&u.nextConnection.targetBlock();for(u=0;u<this.itemCount_;u++){var h=this.getInput("ADD"+u).connection.targetConnection;h&&-1==l.indexOf(h)&&h.disconnect()}for(this.itemCount_=l.length,this.updateShape_(),u=0;u<this.itemCount_;u++)o.Mutator.reconnect(l[u],this,"ADD"+u)},saveConnections:function(l){l=l.getInputTargetBlock("STACK");for(var u=0;l;){var h=this.getInput("ADD"+u);l.valueConnection_=h&&h.connection.targetConnection,u++,l=l.nextConnection&&l.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(o.Msg.LISTS_CREATE_EMPTY_TITLE);for(var l=0;l<this.itemCount_;l++)if(!this.getInput("ADD"+l)){var u=this.appendValueInput("ADD"+l).setAlign(o.ALIGN_RIGHT);0==l&&u.appendField(o.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(;this.getInput("ADD"+l);)this.removeInput("ADD"+l),l++}},o.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(o.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(o.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},o.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(o.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(o.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},o.Blocks.lists_indexOf={init:function(){var l=[[o.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[o.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(o.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(o.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new o.FieldDropdown(l),"END"),this.setInputsInline(!0);var u=this;this.setTooltip(function(){return o.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",u.workspace.options.oneBasedIndex?"0":"-1")})}},o.Blocks.lists_getIndex={init:function(){var l=[[o.Msg.LISTS_GET_INDEX_GET,"GET"],[o.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[o.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[o.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[o.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[o.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[o.Msg.LISTS_GET_INDEX_LAST,"LAST"],[o.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(o.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),l=new o.FieldDropdown(l,function(h){h="REMOVE"==h,this.getSourceBlock().updateStatement_(h)}),this.appendValueInput("VALUE").setCheck("Array").appendField(o.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(l,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),o.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var u=this;this.setTooltip(function(){var h=u.getFieldValue("MODE"),_=u.getFieldValue("WHERE"),b="";switch(h+" "+_){case"GET FROM_START":case"GET FROM_END":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":b=o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"==_||"FROM_END"==_)&&(b+="  "+("FROM_START"==_?o.Msg.LISTS_INDEX_FROM_START_TOOLTIP:o.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",u.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var l=o.utils.xml.createElement("mutation");l.setAttribute("statement",!this.outputConnection);var u=this.getInput("AT").type==o.INPUT_VALUE;return l.setAttribute("at",u),l},domToMutation:function(l){var u="true"==l.getAttribute("statement");this.updateStatement_(u),l="false"!=l.getAttribute("at"),this.updateAt_(l)},updateStatement_:function(l){l!=!this.outputConnection&&(this.unplug(!0,!0),l?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(l){this.removeInput("AT"),this.removeInput("ORDINAL",!0),l?(this.appendValueInput("AT").setCheck("Number"),o.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var u=new o.FieldDropdown(this.WHERE_OPTIONS,function(h){var _="FROM_START"==h||"FROM_END"==h;if(_!=l){var b=this.getSourceBlock();return b.updateAt_(_),b.setFieldValue(h,"WHERE"),null}});this.getInput("AT").appendField(u,"WHERE"),o.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},o.Blocks.lists_setIndex={init:function(){var l=[[o.Msg.LISTS_SET_INDEX_SET,"SET"],[o.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[o.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[o.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[o.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[o.Msg.LISTS_GET_INDEX_LAST,"LAST"],[o.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(o.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(o.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new o.FieldDropdown(l),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(o.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(o.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var u=this;this.setTooltip(function(){var h=u.getFieldValue("MODE"),_=u.getFieldValue("WHERE"),b="";switch(h+" "+_){case"SET FROM_START":case"SET FROM_END":b=o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":b=o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":b=o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":b=o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":b=o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":b=o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":b=o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":b=o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"==_||"FROM_END"==_)&&(b+="  "+o.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",u.workspace.options.oneBasedIndex?"#1":"#0")),b})},mutationToDom:function(){var l=o.utils.xml.createElement("mutation"),u=this.getInput("AT").type==o.INPUT_VALUE;return l.setAttribute("at",u),l},domToMutation:function(l){l="false"!=l.getAttribute("at"),this.updateAt_(l)},updateAt_:function(l){this.removeInput("AT"),this.removeInput("ORDINAL",!0),l?(this.appendValueInput("AT").setCheck("Number"),o.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var u=new o.FieldDropdown(this.WHERE_OPTIONS,function(h){var _="FROM_START"==h||"FROM_END"==h;if(_!=l){var b=this.getSourceBlock();return b.updateAt_(_),b.setFieldValue(h,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(u,"WHERE")}},o.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[o.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[o.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[o.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[o.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[o.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[o.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(o.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(o.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),o.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(o.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var l=o.utils.xml.createElement("mutation"),u=this.getInput("AT1").type==o.INPUT_VALUE;return l.setAttribute("at1",u),u=this.getInput("AT2").type==o.INPUT_VALUE,l.setAttribute("at2",u),l},domToMutation:function(l){var u="true"==l.getAttribute("at1");l="true"==l.getAttribute("at2"),this.updateAt_(1,u),this.updateAt_(2,l)},updateAt_:function(l,u){this.removeInput("AT"+l),this.removeInput("ORDINAL"+l,!0),u?(this.appendValueInput("AT"+l).setCheck("Number"),o.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+l).appendField(o.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+l);var h=new o.FieldDropdown(this["WHERE_OPTIONS_"+l],function(_){var b="FROM_START"==_||"FROM_END"==_;if(b!=u){var D=this.getSourceBlock();return D.updateAt_(l,b),D.setFieldValue(_,"WHERE"+l),null}});this.getInput("AT"+l).appendField(h,"WHERE"+l),1==l&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),o.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},o.Blocks.lists_sort={init:function(){this.jsonInit({message0:o.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[o.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[o.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[o.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[o.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[o.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:o.Msg.LISTS_SORT_TOOLTIP,helpUrl:o.Msg.LISTS_SORT_HELPURL})}},o.Blocks.lists_split={init:function(){var l=this,u=new o.FieldDropdown([[o.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[o.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(h){l.updateType_(h)});this.setHelpUrl(o.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(u,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(o.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var h=l.getFieldValue("MODE");if("SPLIT"==h)return o.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==h)return o.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+h)})},updateType_:function(l){if(this.getFieldValue("MODE")!=l){var u=this.getInput("INPUT").connection;u.setShadowDom(null);var h=u.targetBlock();h&&(u.disconnect(),h.isShadow()?h.dispose():this.bumpNeighbours())}"SPLIT"==l?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var l=o.utils.xml.createElement("mutation");return l.setAttribute("mode",this.getFieldValue("MODE")),l},domToMutation:function(l){this.updateType_(l.getAttribute("mode"))}},o.Blocks.logic={},o.Constants.Logic={},o.Constants.Logic.HUE=210,o.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200f<","LT"],["\u200f\u2264","LTE"],["\u200f>","GT"],["\u200f\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),o.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),o.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},o.Extensions.register("logic_op_tooltip",o.Extensions.buildTooltipForDropdown("OP",o.Constants.Logic.TOOLTIPS_BY_OP)),o.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var l=o.utils.xml.createElement("mutation");return this.elseifCount_&&l.setAttribute("elseif",this.elseifCount_),this.elseCount_&&l.setAttribute("else",1),l},domToMutation:function(l){this.elseifCount_=parseInt(l.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(l.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(l){var u=l.newBlock("controls_if_if");u.initSvg();for(var h=u.nextConnection,_=1;_<=this.elseifCount_;_++){var b=l.newBlock("controls_if_elseif");b.initSvg(),h.connect(b.previousConnection),h=b.nextConnection}return this.elseCount_&&((l=l.newBlock("controls_if_else")).initSvg(),h.connect(l.previousConnection)),u},compose:function(l){l=l.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var u=[null],h=[null],_=null;l&&!l.isInsertionMarker();){switch(l.type){case"controls_if_elseif":this.elseifCount_++,u.push(l.valueConnection_),h.push(l.statementConnection_);break;case"controls_if_else":this.elseCount_++,_=l.statementConnection_;break;default:throw TypeError("Unknown block type: "+l.type)}l=l.nextConnection&&l.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(u,h,_)},saveConnections:function(l){l=l.nextConnection.targetBlock();for(var u=1;l;){switch(l.type){case"controls_if_elseif":var h=this.getInput("IF"+u),_=this.getInput("DO"+u);l.valueConnection_=h&&h.connection.targetConnection,l.statementConnection_=_&&_.connection.targetConnection,u++;break;case"controls_if_else":_=this.getInput("ELSE"),l.statementConnection_=_&&_.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+l.type)}l=l.nextConnection&&l.nextConnection.targetBlock()}},rebuildShape_:function(){var l=[null],u=[null],h=null;this.getInput("ELSE")&&(h=this.getInput("ELSE").connection.targetConnection);for(var _=1;this.getInput("IF"+_);){var b=this.getInput("IF"+_),D=this.getInput("DO"+_);l.push(b.connection.targetConnection),u.push(D.connection.targetConnection),_++}this.updateShape_(),this.reconnectChildBlocks_(l,u,h)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var l=1;this.getInput("IF"+l);)this.removeInput("IF"+l),this.removeInput("DO"+l),l++;for(l=1;l<=this.elseifCount_;l++)this.appendValueInput("IF"+l).setCheck("Boolean").appendField(o.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+l).appendField(o.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(o.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(l,u,h){for(var _=1;_<=this.elseifCount_;_++)o.Mutator.reconnect(l[_],this,"IF"+_),o.Mutator.reconnect(u[_],this,"DO"+_);o.Mutator.reconnect(h,this,"ELSE")}},o.Extensions.registerMutator("controls_if_mutator",o.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN,null,["controls_if_elseif","controls_if_else"]),o.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?o.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?o.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?o.Msg.CONTROLS_IF_TOOLTIP_4:"":o.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},o.Extensions.register("controls_if_tooltip",o.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),o.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(l){this.prevBlocks_||(this.prevBlocks_=[null,null]);var u=this.getInputTargetBlock("A"),h=this.getInputTargetBlock("B");u&&h&&!this.workspace.connectionChecker.doTypeChecks(u.outputConnection,h.outputConnection)&&(o.Events.setGroup(l.group),(l=this.prevBlocks_[0])!==u&&(u.unplug(),!l||l.isDisposed()||l.isShadow()||this.getInput("A").connection.connect(l.outputConnection)),(u=this.prevBlocks_[1])!==h&&(h.unplug(),!u||u.isDisposed()||u.isShadow()||this.getInput("B").connection.connect(u.outputConnection)),this.bumpNeighbours(),o.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},o.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(o.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},o.Extensions.register("logic_compare",o.Constants.Logic.LOGIC_COMPARE_EXTENSION),o.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(l){var u=this.getInputTargetBlock("THEN"),h=this.getInputTargetBlock("ELSE"),_=this.outputConnection.targetConnection;if((u||h)&&_)for(var b=0;2>b;b++){var D=1==b?u:h;D&&!D.workspace.connectionChecker.doTypeChecks(D.outputConnection,_)&&(o.Events.setGroup(l.group),_===this.prevParentConnection_?(this.unplug(),_.getSourceBlock().bumpNeighbours()):(D.unplug(),D.bumpNeighbours()),o.Events.setGroup(!1))}this.prevParentConnection_=_}},o.Extensions.registerMixin("logic_ternary",o.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),o.Blocks.loops={},o.Constants.Loops={},o.Constants.Loops.HUE=120,o.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),o.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},o.Extensions.register("controls_whileUntil_tooltip",o.Extensions.buildTooltipForDropdown("MODE",o.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),o.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},o.Extensions.register("controls_flow_tooltip",o.Extensions.buildTooltipForDropdown("FLOW",o.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),o.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(l){if(!this.isInFlyout){var u=this.getField("VAR").getVariable(),h=u.name;if(!this.isCollapsed()&&null!=h){var _={enabled:!0};_.text=o.Msg.VARIABLES_SET_CREATE_GET.replace("%1",h),u=o.Variables.generateVariableFieldDom(u),(h=o.utils.xml.createElement("block")).setAttribute("type","variables_get"),h.appendChild(u),_.callback=o.ContextMenu.callbackFactory(this,h),l.push(_)}}}},o.Extensions.registerMixin("contextMenu_newGetVariableBlock",o.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),o.Extensions.register("controls_for_tooltip",o.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),o.Extensions.register("controls_forEach_tooltip",o.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),o.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(l){do{if(-1!=o.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(l.type))return l;l=l.getSurroundParent()}while(l);return null},onchange:function(l){if(this.workspace.isDragging&&!this.workspace.isDragging()&&l.type==o.Events.BLOCK_MOVE){var u=o.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(u?null:o.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var h=o.Events.getGroup();o.Events.setGroup(l.group),this.setEnabled(u),o.Events.setGroup(h)}}}},o.Extensions.registerMixin("controls_flow_in_loop_check",o.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),o.Blocks.math={},o.Constants.Math={},o.Constants.Math.HUE=230,o.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03c0","PI"],["e","E"],["\u03c6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["\u221e","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),o.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},o.Extensions.register("math_op_tooltip",o.Extensions.buildTooltipForDropdown("OP",o.Constants.Math.TOOLTIPS_BY_OP)),o.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var l=o.utils.xml.createElement("mutation"),u="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return l.setAttribute("divisor_input",u),l},domToMutation:function(l){l="true"==l.getAttribute("divisor_input"),this.updateShape_(l)},updateShape_:function(l){var u=this.getInput("DIVISOR");l?u||this.appendValueInput("DIVISOR").setCheck("Number"):u&&this.removeInput("DIVISOR")}},o.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(l){l="DIVISIBLE_BY"==l,this.getSourceBlock().updateShape_(l)})},o.Extensions.registerMutator("math_is_divisibleby_mutator",o.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,o.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),o.Extensions.register("math_change_tooltip",o.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),o.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(l){this.outputConnection.setCheck("MODE"==l?"Array":"Number")},mutationToDom:function(){var l=o.utils.xml.createElement("mutation");return l.setAttribute("op",this.getFieldValue("OP")),l},domToMutation:function(l){this.updateType_(l.getAttribute("op"))}},o.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(l){this.updateType_(l)}.bind(this))},o.Extensions.registerMutator("math_modes_of_list_mutator",o.Constants.Math.LIST_MODES_MUTATOR_MIXIN,o.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),o.Blocks.procedures={},o.Blocks.procedures_defnoreturn={init:function(){var l=o.Procedures.findLegalName("",this);(l=new o.FieldTextInput(l,o.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(o.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(l,"NAME").appendField("","PARAMS"),this.setMutator(new o.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&o.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(o.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(o.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(l){this.hasStatements_!==l&&(l?(this.appendStatementInput("STACK").appendField(o.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=l)},updateParams_:function(){var l="";this.arguments_.length&&(l=o.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),o.Events.disable();try{this.setFieldValue(l,"PARAMS")}finally{o.Events.enable()}},mutationToDom:function(l){var u=o.utils.xml.createElement("mutation");l&&u.setAttribute("name",this.getFieldValue("NAME"));for(var h=0;h<this.argumentVarModels_.length;h++){var _=o.utils.xml.createElement("arg"),b=this.argumentVarModels_[h];_.setAttribute("name",b.name),_.setAttribute("varid",b.getId()),l&&this.paramIds_&&_.setAttribute("paramId",this.paramIds_[h]),u.appendChild(_)}return this.hasStatements_||u.setAttribute("statements","false"),u},domToMutation:function(l){this.arguments_=[],this.argumentVarModels_=[];for(var h,u=0;h=l.childNodes[u];u++)if("arg"==h.nodeName.toLowerCase()){var _=h.getAttribute("name");h=h.getAttribute("varid")||h.getAttribute("varId"),this.arguments_.push(_),null!=(h=o.Variables.getOrCreateVariablePackage(this.workspace,h,_,""))?this.argumentVarModels_.push(h):console.log("Failed to create a variable with name "+_+", ignoring.")}this.updateParams_(),o.Procedures.mutateCallers(this),this.setStatements_("false"!==l.getAttribute("statements"))},decompose:function(l){var u=o.utils.xml.createElement("block");u.setAttribute("type","procedures_mutatorcontainer");var h=o.utils.xml.createElement("statement");h.setAttribute("name","STACK"),u.appendChild(h);for(var _=0;_<this.arguments_.length;_++){var b=o.utils.xml.createElement("block");b.setAttribute("type","procedures_mutatorarg");var D=o.utils.xml.createElement("field");D.setAttribute("name","NAME");var x=o.utils.xml.createTextNode(this.arguments_[_]);D.appendChild(x),b.appendChild(D),D=o.utils.xml.createElement("next"),b.appendChild(D),h.appendChild(b),h=D}return l=o.Xml.domToBlock(u,l),"procedures_defreturn"==this.type?l.setFieldValue(this.hasStatements_,"STATEMENTS"):l.removeInput("STATEMENT_INPUT"),o.Procedures.mutateCallers(this),l},compose:function(l){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var u=l.getInputTargetBlock("STACK");u&&!u.isInsertionMarker();){var h=u.getFieldValue("NAME");this.arguments_.push(h),h=this.workspace.getVariable(h,""),this.argumentVarModels_.push(h),this.paramIds_.push(u.id),u=u.nextConnection&&u.nextConnection.targetBlock()}this.updateParams_(),o.Procedures.mutateCallers(this),null!==(l=l.getFieldValue("STATEMENTS"))&&this.hasStatements_!=(l="TRUE"==l)&&(l?(this.setStatements_(!0),o.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(l=this.getInput("STACK").connection,(this.statementConnection_=l.targetConnection)&&((l=l.targetBlock()).unplug(),l.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(l,u){var h=this.workspace.getVariableById(l);if(""==h.type){h=h.name,u=this.workspace.getVariableById(u);for(var _=!1,b=0;b<this.argumentVarModels_.length;b++)this.argumentVarModels_[b].getId()==l&&(this.arguments_[b]=u.name,this.argumentVarModels_[b]=u,_=!0);_&&(this.displayRenamedVar_(h,u.name),o.Procedures.mutateCallers(this))}},updateVarName:function(l){for(var u=l.name,h=!1,_=0;_<this.argumentVarModels_.length;_++)if(this.argumentVarModels_[_].getId()==l.getId()){var b=this.arguments_[_];this.arguments_[_]=u,h=!0}h&&(this.displayRenamedVar_(b,u),o.Procedures.mutateCallers(this))},displayRenamedVar_:function(l,u){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var b,h=this.mutator.workspace_.getAllBlocks(!1),_=0;b=h[_];_++)"procedures_mutatorarg"==b.type&&o.Names.equals(l,b.getFieldValue("NAME"))&&b.setFieldValue(u,"NAME")},customContextMenu:function(l){if(!this.isInFlyout){var u={enabled:!0},h=this.getFieldValue("NAME");u.text=o.Msg.PROCEDURES_CREATE_DO.replace("%1",h);var _=o.utils.xml.createElement("mutation");for(_.setAttribute("name",h),h=0;h<this.arguments_.length;h++){var b=o.utils.xml.createElement("arg");b.setAttribute("name",this.arguments_[h]),_.appendChild(b)}if((h=o.utils.xml.createElement("block")).setAttribute("type",this.callType_),h.appendChild(_),u.callback=o.ContextMenu.callbackFactory(this,h),l.push(u),!this.isCollapsed())for(h=0;h<this.argumentVarModels_.length;h++)(u={enabled:!0}).text=o.Msg.VARIABLES_SET_CREATE_GET.replace("%1",(_=this.argumentVarModels_[h]).name),_=o.Variables.generateVariableFieldDom(_),(b=o.utils.xml.createElement("block")).setAttribute("type","variables_get"),b.appendChild(_),u.callback=o.ContextMenu.callbackFactory(this,b),l.push(u)}},callType_:"procedures_callnoreturn"},o.Blocks.procedures_defreturn={init:function(){var l=o.Procedures.findLegalName("",this);(l=new o.FieldTextInput(l,o.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(o.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(l,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(o.ALIGN_RIGHT).appendField(o.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new o.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&o.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(o.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(o.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:o.Blocks.procedures_defnoreturn.setStatements_,updateParams_:o.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:o.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:o.Blocks.procedures_defnoreturn.domToMutation,decompose:o.Blocks.procedures_defnoreturn.decompose,compose:o.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:o.Blocks.procedures_defnoreturn.getVars,getVarModels:o.Blocks.procedures_defnoreturn.getVarModels,renameVarById:o.Blocks.procedures_defnoreturn.renameVarById,updateVarName:o.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:o.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:o.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},o.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(o.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(o.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new o.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},o.Blocks.procedures_mutatorarg={init:function(){var l=new o.FieldTextInput(o.Procedures.DEFAULT_ARG,this.validator_);l.oldShowEditorFn_=l.showEditor_,l.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(o.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(l,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,l.onFinishEditing_=this.deleteIntermediateVars_,l.createdVariables_=[],l.onFinishEditing_("x")},validator_:function(l){var u=this.getSourceBlock(),h=o.Mutator.findParentWs(u.workspace);if(!(l=l.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var _=(u.workspace.targetWorkspace||u.workspace).getAllBlocks(!1),b=l.toLowerCase(),D=0;D<_.length;D++)if(_[D].id!=this.getSourceBlock().id){var x=_[D].getFieldValue("NAME");if(x&&x.toLowerCase()==b)return null}return u.isInFlyout||((u=h.getVariable(l,""))&&u.name!=l&&h.renameVariableById(u.getId(),l),u||(u=h.createVariable(l,""))&&this.createdVariables_&&this.createdVariables_.push(u)),l},deleteIntermediateVars_:function(l){var u=o.Mutator.findParentWs(this.getSourceBlock().workspace);if(u)for(var h=0;h<this.createdVariables_.length;h++){var _=this.createdVariables_[h];_.name!=l&&u.deleteVariableById(_.getId())}}},o.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(o.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(l,u){o.Names.equals(l,this.getProcedureCall())&&(this.setFieldValue(u,"NAME"),this.setTooltip((this.outputConnection?o.Msg.PROCEDURES_CALLRETURN_TOOLTIP:o.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",u)))},setProcedureParameters_:function(l,u){var h=o.Procedures.getDefinition(this.getProcedureCall(),this.workspace),_=h&&h.mutator&&h.mutator.isVisible();if(_||(this.quarkConnections_={},this.quarkIds_=null),u)if(l.join("\n")==this.arguments_.join("\n"))this.quarkIds_=u;else{if(u.length!=l.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),h=this.rendered,this.rendered=!1;for(var b=0;b<this.arguments_.length;b++){var D=this.getInput("ARG"+b);D&&(this.quarkConnections_[this.quarkIds_[b]]=D=D.connection.targetConnection,_&&D&&-1==u.indexOf(this.quarkIds_[b])&&(D.disconnect(),D.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(l),this.argumentVarModels_=[],b=0;b<this.arguments_.length;b++)l=o.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[b],""),this.argumentVarModels_.push(l);if(this.updateShape_(),this.quarkIds_=u)for(b=0;b<this.arguments_.length;b++)(u=this.quarkIds_[b])in this.quarkConnections_&&(o.Mutator.reconnect(D=this.quarkConnections_[u],this,"ARG"+b)||delete this.quarkConnections_[u]);(this.rendered=h)&&this.render()}},updateShape_:function(){for(var l=0;l<this.arguments_.length;l++){var u=this.getField("ARGNAME"+l);if(u){o.Events.disable();try{u.setValue(this.arguments_[l])}finally{o.Events.enable()}}else u=new o.FieldLabel(this.arguments_[l]),this.appendValueInput("ARG"+l).setAlign(o.ALIGN_RIGHT).appendField(u,"ARGNAME"+l).init()}for(;this.getInput("ARG"+l);)this.removeInput("ARG"+l),l++;(l=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(l.appendField(o.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),l.init()):this.getField("WITH")&&l.removeField("WITH"))},mutationToDom:function(){var l=o.utils.xml.createElement("mutation");l.setAttribute("name",this.getProcedureCall());for(var u=0;u<this.arguments_.length;u++){var h=o.utils.xml.createElement("arg");h.setAttribute("name",this.arguments_[u]),l.appendChild(h)}return l},domToMutation:function(l){var u=l.getAttribute("name");this.renameProcedure(this.getProcedureCall(),u),u=[];for(var b,h=[],_=0;b=l.childNodes[_];_++)"arg"==b.nodeName.toLowerCase()&&(u.push(b.getAttribute("name")),h.push(b.getAttribute("paramId")));this.setProcedureParameters_(u,h)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(l){if(this.workspace&&!this.workspace.isFlyout&&l.recordUndo)if(l.type==o.Events.BLOCK_CREATE&&-1!=l.ids.indexOf(this.id)){var u=this.getProcedureCall();if(!(u=o.Procedures.getDefinition(u,this.workspace))||u.type==this.defType_&&JSON.stringify(u.getVars())==JSON.stringify(this.arguments_)||(u=null),!u){o.Events.setGroup(l.group),l=o.utils.xml.createElement("xml"),(u=o.utils.xml.createElement("block")).setAttribute("type",this.defType_);var h=this.getRelativeToSurfaceXY(),_=h.y+2*o.SNAP_RADIUS;u.setAttribute("x",h.x+o.SNAP_RADIUS*(this.RTL?-1:1)),u.setAttribute("y",_),h=this.mutationToDom(),u.appendChild(h),(h=o.utils.xml.createElement("field")).setAttribute("name","NAME"),(_=this.getProcedureCall())||(_=o.Procedures.findLegalName("",this),this.renameProcedure("",_)),h.appendChild(o.utils.xml.createTextNode(_)),u.appendChild(h),l.appendChild(u),o.Xml.domToWorkspace(l,this.workspace),o.Events.setGroup(!1)}}else l.type==o.Events.BLOCK_DELETE?(u=this.getProcedureCall(),(u=o.Procedures.getDefinition(u,this.workspace))||(o.Events.setGroup(l.group),this.dispose(!0),o.Events.setGroup(!1))):l.type==o.Events.CHANGE&&"disabled"==l.element&&(u=this.getProcedureCall(),(u=o.Procedures.getDefinition(u,this.workspace))&&u.id==l.blockId&&((u=o.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),o.Events.setGroup(l.group),l.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),o.Events.setGroup(u)))},customContextMenu:function(l){if(this.workspace.isMovable()){var u={enabled:!0};u.text=o.Msg.PROCEDURES_HIGHLIGHT_DEF;var h=this.getProcedureCall(),_=this.workspace;u.callback=function(){var b=o.Procedures.getDefinition(h,_);b&&(_.centerOnBlock(b.id),b.select())},l.push(u)}},defType_:"procedures_defnoreturn"},o.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(o.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:o.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:o.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:o.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:o.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:o.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:o.Blocks.procedures_callnoreturn.domToMutation,getVars:o.Blocks.procedures_callnoreturn.getVars,getVarModels:o.Blocks.procedures_callnoreturn.getVarModels,onchange:o.Blocks.procedures_callnoreturn.onchange,customContextMenu:o.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},o.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(o.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(o.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(o.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(o.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var l=o.utils.xml.createElement("mutation");return l.setAttribute("value",Number(this.hasReturnValue_)),l},domToMutation:function(l){this.hasReturnValue_=1==l.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(o.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(l){if(this.workspace.isDragging&&!this.workspace.isDragging()){l=!1;var u=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(u.type)){l=!0;break}u=u.getSurroundParent()}while(u);l?("procedures_defnoreturn"==u.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(o.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=u.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(o.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(o.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},o.Blocks.texts={},o.Constants.Text={},o.Constants.Text.HUE=160,o.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),o.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[o.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[o.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[o.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[o.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[o.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[o.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(o.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(o.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),o.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(o.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(o.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var l=o.utils.xml.createElement("mutation"),u=this.getInput("AT1").type==o.INPUT_VALUE;return l.setAttribute("at1",u),u=this.getInput("AT2").type==o.INPUT_VALUE,l.setAttribute("at2",u),l},domToMutation:function(l){var u="true"==l.getAttribute("at1");l="true"==l.getAttribute("at2"),this.updateAt_(1,u),this.updateAt_(2,l)},updateAt_:function(l,u){this.removeInput("AT"+l),this.removeInput("ORDINAL"+l,!0),u?(this.appendValueInput("AT"+l).setCheck("Number"),o.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+l).appendField(o.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+l),2==l&&o.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(o.Msg.TEXT_GET_SUBSTRING_TAIL));var h=new o.FieldDropdown(this["WHERE_OPTIONS_"+l],function(_){var b="FROM_START"==_||"FROM_END"==_;if(b!=u){var D=this.getSourceBlock();return D.updateAt_(l,b),D.setFieldValue(_,"WHERE"+l),null}});this.getInput("AT"+l).appendField(h,"WHERE"+l),1==l&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},o.Blocks.text_changeCase={init:function(){var l=[[o.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[o.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[o.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(o.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new o.FieldDropdown(l),"CASE"),this.setOutput(!0,"String"),this.setTooltip(o.Msg.TEXT_CHANGECASE_TOOLTIP)}},o.Blocks.text_trim={init:function(){var l=[[o.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[o.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[o.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(o.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new o.FieldDropdown(l),"MODE"),this.setOutput(!0,"String"),this.setTooltip(o.Msg.TEXT_TRIM_TOOLTIP)}},o.Blocks.text_print={init:function(){this.jsonInit({message0:o.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:o.Msg.TEXT_PRINT_TOOLTIP,helpUrl:o.Msg.TEXT_PRINT_HELPURL})}},o.Blocks.text_prompt_ext={init:function(){var l=[[o.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[o.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(o.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var u=this;l=new o.FieldDropdown(l,function(h){u.updateType_(h)}),this.appendValueInput("TEXT").appendField(l,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==u.getFieldValue("TYPE")?o.Msg.TEXT_PROMPT_TOOLTIP_TEXT:o.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(l){this.outputConnection.setCheck("NUMBER"==l?"Number":"String")},mutationToDom:function(){var l=o.utils.xml.createElement("mutation");return l.setAttribute("type",this.getFieldValue("TYPE")),l},domToMutation:function(l){this.updateType_(l.getAttribute("type"))}},o.Blocks.text_prompt={init:function(){this.mixin(o.Constants.Text.QUOTE_IMAGE_MIXIN);var l=[[o.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[o.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],u=this;this.setHelpUrl(o.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),l=new o.FieldDropdown(l,function(h){u.updateType_(h)}),this.appendDummyInput().appendField(l,"TYPE").appendField(this.newQuote_(!0)).appendField(new o.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return"TEXT"==u.getFieldValue("TYPE")?o.Msg.TEXT_PROMPT_TOOLTIP_TEXT:o.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:o.Blocks.text_prompt_ext.updateType_,mutationToDom:o.Blocks.text_prompt_ext.mutationToDom,domToMutation:o.Blocks.text_prompt_ext.domToMutation},o.Blocks.text_count={init:function(){this.jsonInit({message0:o.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:o.Msg.TEXT_COUNT_TOOLTIP,helpUrl:o.Msg.TEXT_COUNT_HELPURL})}},o.Blocks.text_replace={init:function(){this.jsonInit({message0:o.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:o.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:o.Msg.TEXT_REPLACE_HELPURL})}},o.Blocks.text_reverse={init:function(){this.jsonInit({message0:o.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:o.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:o.Msg.TEXT_REVERSE_HELPURL})}},o.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(l){for(var h,u=0;h=this.inputList[u];u++)for(var b,_=0;b=h.fieldRow[_];_++)if(l==b.name)return h.insertFieldAt(_,this.newQuote_(!0)),void h.insertFieldAt(_+2,this.newQuote_(!1));console.warn('field named "'+l+'" not found in '+this.toDevString())},newQuote_:function(l){return new o.FieldImage((l=this.RTL?!l:l)?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,l?"\u201c":"\u201d")}},o.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(o.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},o.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var l=o.utils.xml.createElement("mutation");return l.setAttribute("items",this.itemCount_),l},domToMutation:function(l){this.itemCount_=parseInt(l.getAttribute("items"),10),this.updateShape_()},decompose:function(l){var u=l.newBlock("text_create_join_container");u.initSvg();for(var h=u.getInput("STACK").connection,_=0;_<this.itemCount_;_++){var b=l.newBlock("text_create_join_item");b.initSvg(),h.connect(b.previousConnection),h=b.nextConnection}return u},compose:function(l){var u=l.getInputTargetBlock("STACK");for(l=[];u&&!u.isInsertionMarker();)l.push(u.valueConnection_),u=u.nextConnection&&u.nextConnection.targetBlock();for(u=0;u<this.itemCount_;u++){var h=this.getInput("ADD"+u).connection.targetConnection;h&&-1==l.indexOf(h)&&h.disconnect()}for(this.itemCount_=l.length,this.updateShape_(),u=0;u<this.itemCount_;u++)o.Mutator.reconnect(l[u],this,"ADD"+u)},saveConnections:function(l){l=l.getInputTargetBlock("STACK");for(var u=0;l;){var h=this.getInput("ADD"+u);l.valueConnection_=h&&h.connection.targetConnection,u++,l=l.nextConnection&&l.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var l=0;l<this.itemCount_;l++)if(!this.getInput("ADD"+l)){var u=this.appendValueInput("ADD"+l).setAlign(o.ALIGN_RIGHT);0==l&&u.appendField(o.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(;this.getInput("ADD"+l);)this.removeInput("ADD"+l),l++}},o.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(o.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_(),this.setMutator(new o.Mutator(["text_create_join_item"]))},o.Extensions.register("text_append_tooltip",o.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),o.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var l=this;this.setTooltip(function(){return o.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",l.workspace.options.oneBasedIndex?"0":"-1")})},o.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var l=o.utils.xml.createElement("mutation");return l.setAttribute("at",!!this.isAt_),l},domToMutation:function(l){l="false"!=l.getAttribute("at"),this.updateAt_(l)},updateAt_:function(l){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),l&&(this.appendValueInput("AT").setCheck("Number"),o.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(o.Msg.ORDINAL_NUMBER_SUFFIX)),o.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(o.Msg.TEXT_CHARAT_TAIL)),this.isAt_=l}},o.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(u){(u="FROM_START"==u||"FROM_END"==u)!=this.isAt_&&this.getSourceBlock().updateAt_(u)}),this.updateAt_(!0);var l=this;this.setTooltip(function(){var u=l.getFieldValue("WHERE"),h=o.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==u||"FROM_END"==u)&&(u="FROM_START"==u?o.Msg.LISTS_INDEX_FROM_START_TOOLTIP:o.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(h+="  "+u.replace("%1",l.workspace.options.oneBasedIndex?"#1":"#0")),h})},o.Extensions.register("text_indexOf_tooltip",o.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),o.Extensions.register("text_quotes",o.Constants.Text.TEXT_QUOTES_EXTENSION),o.Extensions.registerMutator("text_join_mutator",o.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,o.Constants.Text.TEXT_JOIN_EXTENSION),o.Extensions.registerMutator("text_charAt_mutator",o.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,o.Constants.Text.TEXT_CHARAT_EXTENSION),o.Blocks.variables={},o.Constants.Variables={},o.Constants.Variables.HUE=330,o.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),o.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(l){if(this.isInFlyout)("variables_get"==this.type||"variables_get_reporter"==this.type)&&(u={text:o.Msg.RENAME_VARIABLE,enabled:!0,callback:o.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},b=this.getField("VAR").getText(),_={text:o.Msg.DELETE_VARIABLE.replace("%1",b),enabled:!0,callback:o.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},l.unshift(u),l.unshift(_));else{if("variables_get"==this.type)var u="variables_set",h=o.Msg.VARIABLES_GET_CREATE_SET;else u="variables_get",h=o.Msg.VARIABLES_SET_CREATE_GET;var _={enabled:0<this.workspace.remainingCapacity()},b=this.getField("VAR").getText();_.text=h.replace("%1",b),(h=o.utils.xml.createElement("field")).setAttribute("name","VAR"),h.appendChild(o.utils.xml.createTextNode(b)),(b=o.utils.xml.createElement("block")).setAttribute("type",u),b.appendChild(h),_.callback=o.ContextMenu.callbackFactory(this,b),l.push(_)}}},o.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();o.Variables.renameVariable(u,h)}},o.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();u.deleteVariableById(h.getId()),u.refreshToolboxSelection()}},o.Extensions.registerMixin("contextMenu_variableSetterGetter",o.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),o.Constants.VariablesDynamic={},o.Constants.VariablesDynamic.HUE=310,o.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),o.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(l){if(this.isInFlyout)("variables_get_dynamic"==this.type||"variables_get_reporter_dynamic"==this.type)&&(u={text:o.Msg.RENAME_VARIABLE,enabled:!0,callback:o.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},D=this.getField("VAR").getText(),b={text:o.Msg.DELETE_VARIABLE.replace("%1",D),enabled:!0,callback:o.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},l.unshift(u),l.unshift(b));else{var u=this.getFieldValue("VAR"),h=this.workspace.getVariableById(u).type;if("variables_get_dynamic"==this.type){u="variables_set_dynamic";var _=o.Msg.VARIABLES_GET_CREATE_SET}else u="variables_get_dynamic",_=o.Msg.VARIABLES_SET_CREATE_GET;var b={enabled:0<this.workspace.remainingCapacity()},D=this.getField("VAR").getText();b.text=_.replace("%1",D),(_=o.utils.xml.createElement("field")).setAttribute("name","VAR"),_.setAttribute("variabletype",h),_.appendChild(o.utils.xml.createTextNode(D)),(D=o.utils.xml.createElement("block")).setAttribute("type",u),D.appendChild(_),b.callback=o.ContextMenu.callbackFactory(this,D),l.push(b)}},onchange:function(l){l=this.getFieldValue("VAR"),l=o.Variables.getVariable(this.workspace,l),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(l.type):this.getInput("VALUE").connection.setCheck(l.type)}},o.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();o.Variables.renameVariable(u,h)}},o.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(l){return function(){var u=l.workspace,h=l.getField("VAR").getVariable();u.deleteVariableById(h.getId()),u.refreshToolboxSelection()}},o.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",o.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),o.Blocks})?y.apply(A,S):y)&&(T.exports=s)},72593:function(T,A,m){var y,S,s;S=[m(81846),m(59090),m(81010),m(7148)],void 0!==(s="function"==typeof(y=function(o,l,u,h){"use strict";return o.setLocale(l),o.Blocks=o.Blocks||{},Object.keys(u).forEach(function(_){o.Blocks[_]=u[_]}),o.JavaScript=h,o})?y.apply(A,S):y)&&(T.exports=s)},81846:function(T,A,m){var y,S,s;S=[m(72749)],void 0!==(s="function"==typeof(y=function(o){"use strict";return o.setLocale=function(l){o.Msg=o.Msg||{},Object.keys(l).forEach(function(u){o.Msg[u]=l[u]})},o})?y.apply(A,S):y)&&(T.exports=s)},7832:function(T,A,m){var y,S,s;S=[m(72593)],void 0!==(s="function"==typeof(y=function(o){"use strict";return o})?y.apply(A,S):y)&&(T.exports=s)},7148:function(T,A,m){var y,S,s;S=[m(81846),m(97861)],void 0!==(s="function"==typeof(y=function(o,l){"use strict";return o.JavaScript=l,l})?y.apply(A,S):y)&&(T.exports=s)},97861:function(T,A,m){var y,S,s;S=[m(99240)],void 0!==(s="function"==typeof(y=function(o){"use strict";return o.JavaScript=new o.Generator("JavaScript"),o.JavaScript.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(o.utils.global).join(",")),o.JavaScript.ORDER_ATOMIC=0,o.JavaScript.ORDER_NEW=1.1,o.JavaScript.ORDER_MEMBER=1.2,o.JavaScript.ORDER_FUNCTION_CALL=2,o.JavaScript.ORDER_INCREMENT=3,o.JavaScript.ORDER_DECREMENT=3,o.JavaScript.ORDER_BITWISE_NOT=4.1,o.JavaScript.ORDER_UNARY_PLUS=4.2,o.JavaScript.ORDER_UNARY_NEGATION=4.3,o.JavaScript.ORDER_LOGICAL_NOT=4.4,o.JavaScript.ORDER_TYPEOF=4.5,o.JavaScript.ORDER_VOID=4.6,o.JavaScript.ORDER_DELETE=4.7,o.JavaScript.ORDER_AWAIT=4.8,o.JavaScript.ORDER_EXPONENTIATION=5,o.JavaScript.ORDER_MULTIPLICATION=5.1,o.JavaScript.ORDER_DIVISION=5.2,o.JavaScript.ORDER_MODULUS=5.3,o.JavaScript.ORDER_SUBTRACTION=6.1,o.JavaScript.ORDER_ADDITION=6.2,o.JavaScript.ORDER_BITWISE_SHIFT=7,o.JavaScript.ORDER_RELATIONAL=8,o.JavaScript.ORDER_IN=8,o.JavaScript.ORDER_INSTANCEOF=8,o.JavaScript.ORDER_EQUALITY=9,o.JavaScript.ORDER_BITWISE_AND=10,o.JavaScript.ORDER_BITWISE_XOR=11,o.JavaScript.ORDER_BITWISE_OR=12,o.JavaScript.ORDER_LOGICAL_AND=13,o.JavaScript.ORDER_LOGICAL_OR=14,o.JavaScript.ORDER_CONDITIONAL=15,o.JavaScript.ORDER_ASSIGNMENT=16,o.JavaScript.ORDER_YIELD=17,o.JavaScript.ORDER_COMMA=18,o.JavaScript.ORDER_NONE=99,o.JavaScript.ORDER_OVERRIDES=[[o.JavaScript.ORDER_FUNCTION_CALL,o.JavaScript.ORDER_MEMBER],[o.JavaScript.ORDER_FUNCTION_CALL,o.JavaScript.ORDER_FUNCTION_CALL],[o.JavaScript.ORDER_MEMBER,o.JavaScript.ORDER_MEMBER],[o.JavaScript.ORDER_MEMBER,o.JavaScript.ORDER_FUNCTION_CALL],[o.JavaScript.ORDER_LOGICAL_NOT,o.JavaScript.ORDER_LOGICAL_NOT],[o.JavaScript.ORDER_MULTIPLICATION,o.JavaScript.ORDER_MULTIPLICATION],[o.JavaScript.ORDER_ADDITION,o.JavaScript.ORDER_ADDITION],[o.JavaScript.ORDER_LOGICAL_AND,o.JavaScript.ORDER_LOGICAL_AND],[o.JavaScript.ORDER_LOGICAL_OR,o.JavaScript.ORDER_LOGICAL_OR]],o.JavaScript.isInitialized=!1,o.JavaScript.init=function(l){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new o.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(l.getVariableMap()),this.nameDB_.populateVariables(l),this.nameDB_.populateProcedures(l);for(var u=[],h=o.Variables.allDeveloperVariables(l),_=0;_<h.length;_++)u.push(this.nameDB_.getName(h[_],o.Names.DEVELOPER_VARIABLE_TYPE));for(l=o.Variables.allUsedVarModels(l),_=0;_<l.length;_++)u.push(this.nameDB_.getName(l[_].getId(),o.VARIABLE_CATEGORY_NAME));u.length&&(this.definitions_.variables="var "+u.join(", ")+";"),this.isInitialized=!0},o.JavaScript.finish=function(l){var u=o.utils.object.values(this.definitions_);return l=Object.getPrototypeOf(this).finish.call(this,l),this.isInitialized=!1,this.nameDB_.reset(),u.join("\n\n")+"\n\n\n"+l},o.JavaScript.scrubNakedValue=function(l){return l+";\n"},o.JavaScript.quote_=function(l){return"'"+(l=l.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"},o.JavaScript.multiline_quote_=function(l){return l.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")},o.JavaScript.scrub_=function(l,u,h){var _="";if(!l.outputConnection||!l.outputConnection.targetConnection){var b=l.getCommentText();b&&(b=o.utils.string.wrap(b,this.COMMENT_WRAP-3),_+=this.prefixLines(b+"\n","// "));for(var D=0;D<l.inputList.length;D++)l.inputList[D].type==o.inputTypes.VALUE&&(b=l.inputList[D].connection.targetBlock())&&(b=this.allNestedComments(b))&&(_+=this.prefixLines(b,"// "))}return l=l.nextConnection&&l.nextConnection.targetBlock(),_+u+(h?"":this.blockToCode(l))},o.JavaScript.getAdjusted=function(l,u,h,_,b){h=h||0,b=b||this.ORDER_NONE,l.workspace.options.oneBasedIndex&&h--;var D=l.workspace.options.oneBasedIndex?"1":"0";if(l=0<h?this.valueToCode(l,u,this.ORDER_ADDITION)||D:0>h?this.valueToCode(l,u,this.ORDER_SUBTRACTION)||D:_?this.valueToCode(l,u,this.ORDER_UNARY_NEGATION)||D:this.valueToCode(l,u,b)||D,o.isNumber(l))l=Number(l)+h,_&&(l=-l);else{if(0<h){l=l+" + "+h;var x=this.ORDER_ADDITION}else 0>h&&(l=l+" - "+-h,x=this.ORDER_SUBTRACTION);_&&(l=h?"-("+l+")":"-"+l,x=this.ORDER_UNARY_NEGATION),x=Math.floor(x),b=Math.floor(b),x&&b>=x&&(l="("+l+")")}return l},o.JavaScript.colour={},o.JavaScript.colour_picker=function(l){return[o.JavaScript.quote_(l.getFieldValue("COLOUR")),o.JavaScript.ORDER_ATOMIC]},o.JavaScript.colour_random=function(l){return[o.JavaScript.provideFunction_("colourRandom",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"() {","  var num = Math.floor(Math.random() * Math.pow(2, 24));","  return '#' + ('00000' + num.toString(16)).substr(-6);","}"])+"()",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.colour_rgb=function(l){var u=o.JavaScript.valueToCode(l,"RED",o.JavaScript.ORDER_NONE)||0,h=o.JavaScript.valueToCode(l,"GREEN",o.JavaScript.ORDER_NONE)||0;return l=o.JavaScript.valueToCode(l,"BLUE",o.JavaScript.ORDER_NONE)||0,[o.JavaScript.provideFunction_("colourRgb",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(r, g, b) {","  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;","  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;","  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;","  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);","  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);","  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+u+", "+h+", "+l+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.colour_blend=function(l){var u=o.JavaScript.valueToCode(l,"COLOUR1",o.JavaScript.ORDER_NONE)||"'#000000'",h=o.JavaScript.valueToCode(l,"COLOUR2",o.JavaScript.ORDER_NONE)||"'#000000'";return l=o.JavaScript.valueToCode(l,"RATIO",o.JavaScript.ORDER_NONE)||.5,[o.JavaScript.provideFunction_("colourBlend",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(c1, c2, ratio) {","  ratio = Math.max(Math.min(Number(ratio), 1), 0);","  var r1 = parseInt(c1.substring(1, 3), 16);","  var g1 = parseInt(c1.substring(3, 5), 16);","  var b1 = parseInt(c1.substring(5, 7), 16);","  var r2 = parseInt(c2.substring(1, 3), 16);","  var g2 = parseInt(c2.substring(3, 5), 16);","  var b2 = parseInt(c2.substring(5, 7), 16);","  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);","  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);","  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);","  r = ('0' + (r || 0).toString(16)).slice(-2);","  g = ('0' + (g || 0).toString(16)).slice(-2);","  b = ('0' + (b || 0).toString(16)).slice(-2);","  return '#' + r + g + b;","}"])+"("+u+", "+h+", "+l+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists={},o.JavaScript.lists_create_empty=function(l){return["[]",o.JavaScript.ORDER_ATOMIC]},o.JavaScript.lists_create_with=function(l){for(var u=Array(l.itemCount_),h=0;h<l.itemCount_;h++)u[h]=o.JavaScript.valueToCode(l,"ADD"+h,o.JavaScript.ORDER_NONE)||"null";return["["+u.join(", ")+"]",o.JavaScript.ORDER_ATOMIC]},o.JavaScript.lists_repeat=function(l){return[o.JavaScript.provideFunction_("listsRepeat",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {","  var array = [];","  for (var i = 0; i < n; i++) {","    array[i] = value;","  }","  return array;","}"])+"("+(o.JavaScript.valueToCode(l,"ITEM",o.JavaScript.ORDER_NONE)||"null")+", "+(l=o.JavaScript.valueToCode(l,"NUM",o.JavaScript.ORDER_NONE)||"0")+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists_length=function(l){return[(o.JavaScript.valueToCode(l,"VALUE",o.JavaScript.ORDER_MEMBER)||"[]")+".length",o.JavaScript.ORDER_MEMBER]},o.JavaScript.lists_isEmpty=function(l){return["!"+(o.JavaScript.valueToCode(l,"VALUE",o.JavaScript.ORDER_MEMBER)||"[]")+".length",o.JavaScript.ORDER_LOGICAL_NOT]},o.JavaScript.lists_indexOf=function(l){var u="FIRST"==l.getFieldValue("END")?"indexOf":"lastIndexOf",h=o.JavaScript.valueToCode(l,"FIND",o.JavaScript.ORDER_NONE)||"''";return u=(o.JavaScript.valueToCode(l,"VALUE",o.JavaScript.ORDER_MEMBER)||"[]")+"."+u+"("+h+")",l.workspace.options.oneBasedIndex?[u+" + 1",o.JavaScript.ORDER_ADDITION]:[u,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists_getIndex=function(l){var u=l.getFieldValue("MODE")||"GET",h=l.getFieldValue("WHERE")||"FROM_START",_=o.JavaScript.valueToCode(l,"VALUE","RANDOM"==h?o.JavaScript.ORDER_NONE:o.JavaScript.ORDER_MEMBER)||"[]";switch(h){case"FIRST":if("GET"==u)return[_+"[0]",o.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==u)return[_+".shift()",o.JavaScript.ORDER_MEMBER];if("REMOVE"==u)return _+".shift();\n";break;case"LAST":if("GET"==u)return[_+".slice(-1)[0]",o.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==u)return[_+".pop()",o.JavaScript.ORDER_MEMBER];if("REMOVE"==u)return _+".pop();\n";break;case"FROM_START":if(l=o.JavaScript.getAdjusted(l,"AT"),"GET"==u)return[_+"["+l+"]",o.JavaScript.ORDER_MEMBER];if("GET_REMOVE"==u)return[_+".splice("+l+", 1)[0]",o.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==u)return _+".splice("+l+", 1);\n";break;case"FROM_END":if(l=o.JavaScript.getAdjusted(l,"AT",1,!0),"GET"==u)return[_+".slice("+l+")[0]",o.JavaScript.ORDER_FUNCTION_CALL];if("GET_REMOVE"==u)return[_+".splice("+l+", 1)[0]",o.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==u)return _+".splice("+l+", 1);";break;case"RANDOM":if(_=o.JavaScript.provideFunction_("listsGetRandomItem",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {","  var x = Math.floor(Math.random() * list.length);","  if (remove) {","    return list.splice(x, 1)[0];","  } else {","    return list[x];","  }","}"])+"("+_+", "+("GET"!=u)+")","GET"==u||"GET_REMOVE"==u)return[_,o.JavaScript.ORDER_FUNCTION_CALL];if("REMOVE"==u)return _+";\n"}throw Error("Unhandled combination (lists_getIndex).")},o.JavaScript.lists_setIndex=function(l){function u(){if(h.match(/^\w+$/))return"";var x=o.JavaScript.nameDB_.getDistinctName("tmpList",o.VARIABLE_CATEGORY_NAME),G="var "+x+" = "+h+";\n";return h=x,G}var h=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_MEMBER)||"[]",_=l.getFieldValue("MODE")||"GET",b=l.getFieldValue("WHERE")||"FROM_START",D=o.JavaScript.valueToCode(l,"TO",o.JavaScript.ORDER_ASSIGNMENT)||"null";switch(b){case"FIRST":if("SET"==_)return h+"[0] = "+D+";\n";if("INSERT"==_)return h+".unshift("+D+");\n";break;case"LAST":if("SET"==_)return(l=u())+(h+"[")+h+".length - 1] = "+D+";\n";if("INSERT"==_)return h+".push("+D+");\n";break;case"FROM_START":if(b=o.JavaScript.getAdjusted(l,"AT"),"SET"==_)return h+"["+b+"] = "+D+";\n";if("INSERT"==_)return h+".splice("+b+", 0, "+D+");\n";break;case"FROM_END":if(b=o.JavaScript.getAdjusted(l,"AT",1,!1,o.JavaScript.ORDER_SUBTRACTION),l=u(),"SET"==_)return l+(h+"[")+h+".length - "+b+"] = "+D+";\n";if("INSERT"==_)return l+(h+".splice(")+h+".length - "+b+", 0, "+D+");\n";break;case"RANDOM":if(l=u(),l+="var "+(b=o.JavaScript.nameDB_.getDistinctName("tmpX",o.VARIABLE_CATEGORY_NAME))+" = Math.floor(Math.random() * "+h+".length);\n","SET"==_)return l+(h+"[")+b+"] = "+D+";\n";if("INSERT"==_)return l+(h+".splice(")+b+", 0, "+D+");\n"}throw Error("Unhandled combination (lists_setIndex).")},o.JavaScript.lists.getIndex_=function(l,u,h){return"FIRST"==u?"0":"FROM_END"==u?l+".length - 1 - "+h:"LAST"==u?l+".length - 1":h},o.JavaScript.lists_getSublist=function(l){var u=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_MEMBER)||"[]",h=l.getFieldValue("WHERE1"),_=l.getFieldValue("WHERE2");if("FIRST"==h&&"LAST"==_)u+=".slice(0)";else if(u.match(/^\w+$/)||"FROM_END"!=h&&"FROM_START"==_){switch(h){case"FROM_START":var b=o.JavaScript.getAdjusted(l,"AT1");break;case"FROM_END":b=u+".length - "+(b=o.JavaScript.getAdjusted(l,"AT1",1,!1,o.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":b="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(_){case"FROM_START":l=o.JavaScript.getAdjusted(l,"AT2",1);break;case"FROM_END":l=u+".length - "+(l=o.JavaScript.getAdjusted(l,"AT2",0,!1,o.JavaScript.ORDER_SUBTRACTION));break;case"LAST":l=u+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}u=u+".slice("+b+", "+l+")"}else{b=o.JavaScript.getAdjusted(l,"AT1"),l=o.JavaScript.getAdjusted(l,"AT2");var D=o.JavaScript.lists.getIndex_,x={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};u=o.JavaScript.provideFunction_("subsequence"+x[h]+x[_],["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==h||"FROM_START"==h?", at1":"")+("FROM_END"==_||"FROM_START"==_?", at2":"")+") {","  var start = "+D("sequence",h,"at1")+";","  var end = "+D("sequence",_,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+u+("FROM_END"==h||"FROM_START"==h?", "+b:"")+("FROM_END"==_||"FROM_START"==_?", "+l:"")+")"}return[u,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists_sort=function(l){var u=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_FUNCTION_CALL)||"[]",h="1"===l.getFieldValue("DIRECTION")?1:-1;return l=l.getFieldValue("TYPE"),[u+".slice().sort("+o.JavaScript.provideFunction_("listsGetSortCompare",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {","  var compareFuncs = {",'    "NUMERIC": function(a, b) {',"        return Number(a) - Number(b); },",'    "TEXT": function(a, b) {',"        return a.toString() > b.toString() ? 1 : -1; },",'    "IGNORE_CASE": function(a, b) {',"        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },","  };","  var compare = compareFuncs[type];","  return function(a, b) { return compare(a, b) * direction; }","}"])+'("'+l+'", '+h+"))",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists_split=function(l){var u=o.JavaScript.valueToCode(l,"INPUT",o.JavaScript.ORDER_MEMBER),h=o.JavaScript.valueToCode(l,"DELIM",o.JavaScript.ORDER_NONE)||"''";if("SPLIT"==(l=l.getFieldValue("MODE")))u||(u="''"),l="split";else{if("JOIN"!=l)throw Error("Unknown mode: "+l);u||(u="[]"),l="join"}return[u+"."+l+"("+h+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.lists_reverse=function(l){return[(o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.logic={},o.JavaScript.controls_if=function(l){var u=0,h="";o.JavaScript.STATEMENT_PREFIX&&(h+=o.JavaScript.injectId(o.JavaScript.STATEMENT_PREFIX,l));do{var _=o.JavaScript.valueToCode(l,"IF"+u,o.JavaScript.ORDER_NONE)||"false",b=o.JavaScript.statementToCode(l,"DO"+u);o.JavaScript.STATEMENT_SUFFIX&&(b=o.JavaScript.prefixLines(o.JavaScript.injectId(o.JavaScript.STATEMENT_SUFFIX,l),o.JavaScript.INDENT)+b),h+=(0<u?" else ":"")+"if ("+_+") {\n"+b+"}",++u}while(l.getInput("IF"+u));return(l.getInput("ELSE")||o.JavaScript.STATEMENT_SUFFIX)&&(b=o.JavaScript.statementToCode(l,"ELSE"),o.JavaScript.STATEMENT_SUFFIX&&(b=o.JavaScript.prefixLines(o.JavaScript.injectId(o.JavaScript.STATEMENT_SUFFIX,l),o.JavaScript.INDENT)+b),h+=" else {\n"+b+"}"),h+"\n"},o.JavaScript.controls_ifelse=o.JavaScript.controls_if,o.JavaScript.logic_compare=function(l){var u={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[l.getFieldValue("OP")],h="=="==u||"!="==u?o.JavaScript.ORDER_EQUALITY:o.JavaScript.ORDER_RELATIONAL;return[(o.JavaScript.valueToCode(l,"A",h)||"0")+" "+u+" "+(l=o.JavaScript.valueToCode(l,"B",h)||"0"),h]},o.JavaScript.logic_operation=function(l){var u="AND"==l.getFieldValue("OP")?"&&":"||",h="&&"==u?o.JavaScript.ORDER_LOGICAL_AND:o.JavaScript.ORDER_LOGICAL_OR,_=o.JavaScript.valueToCode(l,"A",h);if(l=o.JavaScript.valueToCode(l,"B",h),_||l){var b="&&"==u?"true":"false";_||(_=b),l||(l=b)}else l=_="false";return[_+" "+u+" "+l,h]},o.JavaScript.logic_negate=function(l){var u=o.JavaScript.ORDER_LOGICAL_NOT;return["!"+(o.JavaScript.valueToCode(l,"BOOL",u)||"true"),u]},o.JavaScript.logic_boolean=function(l){return["TRUE"==l.getFieldValue("BOOL")?"true":"false",o.JavaScript.ORDER_ATOMIC]},o.JavaScript.logic_null=function(l){return["null",o.JavaScript.ORDER_ATOMIC]},o.JavaScript.logic_ternary=function(l){return[(o.JavaScript.valueToCode(l,"IF",o.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(o.JavaScript.valueToCode(l,"THEN",o.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(l=o.JavaScript.valueToCode(l,"ELSE",o.JavaScript.ORDER_CONDITIONAL)||"null"),o.JavaScript.ORDER_CONDITIONAL]},o.JavaScript.loops={},o.JavaScript.controls_repeat_ext=function(l){var u=l.getField("TIMES")?String(Number(l.getFieldValue("TIMES"))):o.JavaScript.valueToCode(l,"TIMES",o.JavaScript.ORDER_ASSIGNMENT)||"0",h=o.JavaScript.statementToCode(l,"DO");h=o.JavaScript.addLoopTrap(h,l),l="";var _=o.JavaScript.nameDB_.getDistinctName("count",o.VARIABLE_CATEGORY_NAME),b=u;return u.match(/^\w+$/)||o.isNumber(u)||(l+="var "+(b=o.JavaScript.nameDB_.getDistinctName("repeat_end",o.VARIABLE_CATEGORY_NAME))+" = "+u+";\n"),l+"for (var "+_+" = 0; "+_+" < "+b+"; "+_+"++) {\n"+h+"}\n"},o.JavaScript.controls_repeat=o.JavaScript.controls_repeat_ext,o.JavaScript.controls_whileUntil=function(l){var u="UNTIL"==l.getFieldValue("MODE"),h=o.JavaScript.valueToCode(l,"BOOL",u?o.JavaScript.ORDER_LOGICAL_NOT:o.JavaScript.ORDER_NONE)||"false",_=o.JavaScript.statementToCode(l,"DO");return u&&(h="!"+h),"while ("+h+") {\n"+(_=o.JavaScript.addLoopTrap(_,l))+"}\n"},o.JavaScript.controls_for=function(l){var u=o.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME),h=o.JavaScript.valueToCode(l,"FROM",o.JavaScript.ORDER_ASSIGNMENT)||"0",_=o.JavaScript.valueToCode(l,"TO",o.JavaScript.ORDER_ASSIGNMENT)||"0",b=o.JavaScript.valueToCode(l,"BY",o.JavaScript.ORDER_ASSIGNMENT)||"1",D=o.JavaScript.statementToCode(l,"DO");if(D=o.JavaScript.addLoopTrap(D,l),o.isNumber(h)&&o.isNumber(_)&&o.isNumber(b)){var x=Number(h)<=Number(_);l="for ("+u+" = "+h+"; "+u+(x?" <= ":" >= ")+_+"; "+u,l=(1==(u=Math.abs(Number(b)))?l+(x?"++":"--"):l+(x?" += ":" -= ")+u)+") {\n"+D+"}\n"}else l="",x=h,h.match(/^\w+$/)||o.isNumber(h)||(l+="var "+(x=o.JavaScript.nameDB_.getDistinctName(u+"_start",o.VARIABLE_CATEGORY_NAME))+" = "+h+";\n"),h=_,_.match(/^\w+$/)||o.isNumber(_)||(l+="var "+(h=o.JavaScript.nameDB_.getDistinctName(u+"_end",o.VARIABLE_CATEGORY_NAME))+" = "+_+";\n"),l+="var "+(_=o.JavaScript.nameDB_.getDistinctName(u+"_inc",o.VARIABLE_CATEGORY_NAME))+" = ",l=(l=o.isNumber(b)?l+(Math.abs(b)+";\n"):l+"Math.abs("+b+");\n")+"if ("+x+" > "+h+") {\n"+(o.JavaScript.INDENT+_)+" = -"+_+";\n",l+="}\n",l+="for ("+u+" = "+x+"; "+_+" >= 0 ? "+u+" <= "+h+" : "+u+" >= "+h+"; "+u+" += "+_+") {\n"+D+"}\n";return l},o.JavaScript.controls_forEach=function(l){var u=o.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME),h=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_ASSIGNMENT)||"[]",_=o.JavaScript.statementToCode(l,"DO");_=o.JavaScript.addLoopTrap(_,l),l="";var b=h;return h.match(/^\w+$/)||(l+="var "+(b=o.JavaScript.nameDB_.getDistinctName(u+"_list",o.VARIABLE_CATEGORY_NAME))+" = "+h+";\n"),l+"for (var "+(h=o.JavaScript.nameDB_.getDistinctName(u+"_index",o.VARIABLE_CATEGORY_NAME))+" in "+b+") {\n"+(_=o.JavaScript.INDENT+u+" = "+b+"["+h+"];\n"+_)+"}\n"},o.JavaScript.controls_flow_statements=function(l){var u="";if(o.JavaScript.STATEMENT_PREFIX&&(u+=o.JavaScript.injectId(o.JavaScript.STATEMENT_PREFIX,l)),o.JavaScript.STATEMENT_SUFFIX&&(u+=o.JavaScript.injectId(o.JavaScript.STATEMENT_SUFFIX,l)),o.JavaScript.STATEMENT_PREFIX){var h=o.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(l);h&&!h.suppressPrefixSuffix&&(u+=o.JavaScript.injectId(o.JavaScript.STATEMENT_PREFIX,h))}switch(l.getFieldValue("FLOW")){case"BREAK":return u+"break;\n";case"CONTINUE":return u+"continue;\n"}throw Error("Unknown flow statement.")},o.JavaScript.math={},o.JavaScript.math_number=function(l){return[l=Number(l.getFieldValue("NUM")),0<=l?o.JavaScript.ORDER_ATOMIC:o.JavaScript.ORDER_UNARY_NEGATION]},o.JavaScript.math_arithmetic=function(l){var u={ADD:[" + ",o.JavaScript.ORDER_ADDITION],MINUS:[" - ",o.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",o.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",o.JavaScript.ORDER_DIVISION],POWER:[null,o.JavaScript.ORDER_NONE]}[l.getFieldValue("OP")],h=u[0],_=o.JavaScript.valueToCode(l,"A",u=u[1])||"0";return l=o.JavaScript.valueToCode(l,"B",u)||"0",h?[_+h+l,u]:["Math.pow("+_+", "+l+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.math_single=function(l){var u=l.getFieldValue("OP");if("NEG"==u)return"-"==(l=o.JavaScript.valueToCode(l,"NUM",o.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(l=" "+l),["-"+l,o.JavaScript.ORDER_UNARY_NEGATION];switch(l="SIN"==u||"COS"==u||"TAN"==u?o.JavaScript.valueToCode(l,"NUM",o.JavaScript.ORDER_DIVISION)||"0":o.JavaScript.valueToCode(l,"NUM",o.JavaScript.ORDER_NONE)||"0",u){case"ABS":var h="Math.abs("+l+")";break;case"ROOT":h="Math.sqrt("+l+")";break;case"LN":h="Math.log("+l+")";break;case"EXP":h="Math.exp("+l+")";break;case"POW10":h="Math.pow(10,"+l+")";break;case"ROUND":h="Math.round("+l+")";break;case"ROUNDUP":h="Math.ceil("+l+")";break;case"ROUNDDOWN":h="Math.floor("+l+")";break;case"SIN":h="Math.sin("+l+" / 180 * Math.PI)";break;case"COS":h="Math.cos("+l+" / 180 * Math.PI)";break;case"TAN":h="Math.tan("+l+" / 180 * Math.PI)"}if(h)return[h,o.JavaScript.ORDER_FUNCTION_CALL];switch(u){case"LOG10":h="Math.log("+l+") / Math.log(10)";break;case"ASIN":h="Math.asin("+l+") / Math.PI * 180";break;case"ACOS":h="Math.acos("+l+") / Math.PI * 180";break;case"ATAN":h="Math.atan("+l+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+u)}return[h,o.JavaScript.ORDER_DIVISION]},o.JavaScript.math_constant=function(l){return{PI:["Math.PI",o.JavaScript.ORDER_MEMBER],E:["Math.E",o.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",o.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",o.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",o.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",o.JavaScript.ORDER_ATOMIC]}[l.getFieldValue("CONSTANT")]},o.JavaScript.math_number_property=function(l){var u=o.JavaScript.valueToCode(l,"NUMBER_TO_CHECK",o.JavaScript.ORDER_MODULUS)||"0",h=l.getFieldValue("PROPERTY");if("PRIME"==h)return[o.JavaScript.provideFunction_("mathIsPrime",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is NaN, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+u+")",o.JavaScript.ORDER_FUNCTION_CALL];switch(h){case"EVEN":var _=u+" % 2 == 0";break;case"ODD":_=u+" % 2 == 1";break;case"WHOLE":_=u+" % 1 == 0";break;case"POSITIVE":_=u+" > 0";break;case"NEGATIVE":_=u+" < 0";break;case"DIVISIBLE_BY":_=u+" % "+(l=o.JavaScript.valueToCode(l,"DIVISOR",o.JavaScript.ORDER_MODULUS)||"0")+" == 0"}return[_,o.JavaScript.ORDER_EQUALITY]},o.JavaScript.math_change=function(l){var u=o.JavaScript.valueToCode(l,"DELTA",o.JavaScript.ORDER_ADDITION)||"0";return(l=o.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME))+" = (typeof "+l+" == 'number' ? "+l+" : 0) + "+u+";\n"},o.JavaScript.math_round=o.JavaScript.math_single,o.JavaScript.math_trig=o.JavaScript.math_single,o.JavaScript.math_on_list=function(l){var u=l.getFieldValue("OP");switch(u){case"SUM":l=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_MEMBER)||"[]",l+=".reduce(function(x, y) {return x + y;})";break;case"MIN":l="Math.min.apply(null, "+(l=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"MAX":l="Math.max.apply(null, "+(l=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"AVERAGE":l=(u=o.JavaScript.provideFunction_("mathMean",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  return myList.reduce(function(x, y) {return x + y;}) / myList.length;","}"]))+"("+(l=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"MEDIAN":l=(u=o.JavaScript.provideFunction_("mathMedian",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {","  var localList = myList.filter(function (x) {return typeof x == 'number';});","  if (!localList.length) return null;","  localList.sort(function(a, b) {return b - a;});","  if (localList.length % 2 == 0) {","    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;","  } else {","    return localList[(localList.length - 1) / 2];","  }","}"]))+"("+(l=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"MODE":l=(u=o.JavaScript.provideFunction_("mathModes",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {","  var modes = [];","  var counts = [];","  var maxCount = 0;","  for (var i = 0; i < values.length; i++) {","    var value = values[i];","    var found = false;","    var thisCount;","    for (var j = 0; j < counts.length; j++) {","      if (counts[j][0] === value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.push([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (var j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.push(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+(l=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"STD_DEV":l=(u=o.JavaScript.provideFunction_("mathStandardDeviation",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {","  var n = numbers.length;","  if (!n) return null;","  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;","  var variance = 0;","  for (var j = 0; j < n; j++) {","    variance += Math.pow(numbers[j] - mean, 2);","  }","  variance = variance / n;","  return Math.sqrt(variance);","}"]))+"("+(l=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;case"RANDOM":l=(u=o.JavaScript.provideFunction_("mathRandomList",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {","  var x = Math.floor(Math.random() * list.length);","  return list[x];","}"]))+"("+(l=o.JavaScript.valueToCode(l,"LIST",o.JavaScript.ORDER_NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+u)}return[l,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.math_modulo=function(l){return[(o.JavaScript.valueToCode(l,"DIVIDEND",o.JavaScript.ORDER_MODULUS)||"0")+" % "+(l=o.JavaScript.valueToCode(l,"DIVISOR",o.JavaScript.ORDER_MODULUS)||"0"),o.JavaScript.ORDER_MODULUS]},o.JavaScript.math_constrain=function(l){return["Math.min(Math.max("+(o.JavaScript.valueToCode(l,"VALUE",o.JavaScript.ORDER_NONE)||"0")+", "+(o.JavaScript.valueToCode(l,"LOW",o.JavaScript.ORDER_NONE)||"0")+"), "+(l=o.JavaScript.valueToCode(l,"HIGH",o.JavaScript.ORDER_NONE)||"Infinity")+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.math_random_int=function(l){var u=o.JavaScript.valueToCode(l,"FROM",o.JavaScript.ORDER_NONE)||"0";return l=o.JavaScript.valueToCode(l,"TO",o.JavaScript.ORDER_NONE)||"0",[o.JavaScript.provideFunction_("mathRandomInt",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    var c = a;","    a = b;","    b = c;","  }","  return Math.floor(Math.random() * (b - a + 1) + a);","}"])+"("+u+", "+l+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.math_random_float=function(l){return["Math.random()",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.math_atan2=function(l){var u=o.JavaScript.valueToCode(l,"X",o.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(o.JavaScript.valueToCode(l,"Y",o.JavaScript.ORDER_NONE)||"0")+", "+u+") / Math.PI * 180",o.JavaScript.ORDER_DIVISION]},o.JavaScript.procedures={},o.JavaScript.procedures_defreturn=function(l){var u=o.JavaScript.nameDB_.getName(l.getFieldValue("NAME"),o.PROCEDURE_CATEGORY_NAME),h="";o.JavaScript.STATEMENT_PREFIX&&(h+=o.JavaScript.injectId(o.JavaScript.STATEMENT_PREFIX,l)),o.JavaScript.STATEMENT_SUFFIX&&(h+=o.JavaScript.injectId(o.JavaScript.STATEMENT_SUFFIX,l)),h&&(h=o.JavaScript.prefixLines(h,o.JavaScript.INDENT));var _="";o.JavaScript.INFINITE_LOOP_TRAP&&(_=o.JavaScript.prefixLines(o.JavaScript.injectId(o.JavaScript.INFINITE_LOOP_TRAP,l),o.JavaScript.INDENT));var b=o.JavaScript.statementToCode(l,"STACK"),D=o.JavaScript.valueToCode(l,"RETURN",o.JavaScript.ORDER_NONE)||"",x="";b&&D&&(x=h),D&&(D=o.JavaScript.INDENT+"return "+D+";\n");for(var G=[],j=l.getVars(),F=0;F<j.length;F++)G[F]=o.JavaScript.nameDB_.getName(j[F],o.VARIABLE_CATEGORY_NAME);return h="function "+u+"("+G.join(", ")+") {\n"+h+_+b+x+D+"}",h=o.JavaScript.scrub_(l,h),o.JavaScript.definitions_["%"+u]=h,null},o.JavaScript.procedures_defnoreturn=o.JavaScript.procedures_defreturn,o.JavaScript.procedures_callreturn=function(l){for(var u=o.JavaScript.nameDB_.getName(l.getFieldValue("NAME"),o.PROCEDURE_CATEGORY_NAME),h=[],_=l.getVars(),b=0;b<_.length;b++)h[b]=o.JavaScript.valueToCode(l,"ARG"+b,o.JavaScript.ORDER_NONE)||"null";return[u+"("+h.join(", ")+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.procedures_callnoreturn=function(l){return o.JavaScript.procedures_callreturn(l)[0]+";\n"},o.JavaScript.procedures_ifreturn=function(l){var u="if ("+(o.JavaScript.valueToCode(l,"CONDITION",o.JavaScript.ORDER_NONE)||"false")+") {\n";return o.JavaScript.STATEMENT_SUFFIX&&(u+=o.JavaScript.prefixLines(o.JavaScript.injectId(o.JavaScript.STATEMENT_SUFFIX,l),o.JavaScript.INDENT)),l.hasReturnValue_?(l=o.JavaScript.valueToCode(l,"VALUE",o.JavaScript.ORDER_NONE)||"null",u+=o.JavaScript.INDENT+"return "+l+";\n"):u+=o.JavaScript.INDENT+"return;\n",u+"}\n"},o.JavaScript.texts={},o.JavaScript.text=function(l){return[o.JavaScript.quote_(l.getFieldValue("TEXT")),o.JavaScript.ORDER_ATOMIC]},o.JavaScript.text_multiline=function(l){var u=-1!=(l=o.JavaScript.multiline_quote_(l.getFieldValue("TEXT"))).indexOf("+")?o.JavaScript.ORDER_ADDITION:o.JavaScript.ORDER_ATOMIC;return[l,u]},o.JavaScript.text.forceString_=function(l){return o.JavaScript.text.forceString_.strRegExp.test(l)?[l,o.JavaScript.ORDER_ATOMIC]:["String("+l+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text.forceString_.strRegExp=/^\s*'([^']|\\')*'\s*$/,o.JavaScript.text_join=function(l){switch(l.itemCount_){case 0:return["''",o.JavaScript.ORDER_ATOMIC];case 1:return l=o.JavaScript.valueToCode(l,"ADD0",o.JavaScript.ORDER_NONE)||"''",o.JavaScript.text.forceString_(l);case 2:var u=o.JavaScript.valueToCode(l,"ADD0",o.JavaScript.ORDER_NONE)||"''";return l=o.JavaScript.valueToCode(l,"ADD1",o.JavaScript.ORDER_NONE)||"''",[l=o.JavaScript.text.forceString_(u)[0]+" + "+o.JavaScript.text.forceString_(l)[0],o.JavaScript.ORDER_ADDITION];default:u=Array(l.itemCount_);for(var h=0;h<l.itemCount_;h++)u[h]=o.JavaScript.valueToCode(l,"ADD"+h,o.JavaScript.ORDER_NONE)||"''";return[l="["+u.join(",")+"].join('')",o.JavaScript.ORDER_FUNCTION_CALL]}},o.JavaScript.text_append=function(l){var u=o.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME);return l=o.JavaScript.valueToCode(l,"TEXT",o.JavaScript.ORDER_NONE)||"''",u+" += "+o.JavaScript.text.forceString_(l)[0]+";\n"},o.JavaScript.text_length=function(l){return[(o.JavaScript.valueToCode(l,"VALUE",o.JavaScript.ORDER_MEMBER)||"''")+".length",o.JavaScript.ORDER_MEMBER]},o.JavaScript.text_isEmpty=function(l){return["!"+(o.JavaScript.valueToCode(l,"VALUE",o.JavaScript.ORDER_MEMBER)||"''")+".length",o.JavaScript.ORDER_LOGICAL_NOT]},o.JavaScript.text_indexOf=function(l){var u="FIRST"==l.getFieldValue("END")?"indexOf":"lastIndexOf",h=o.JavaScript.valueToCode(l,"FIND",o.JavaScript.ORDER_NONE)||"''";return u=(o.JavaScript.valueToCode(l,"VALUE",o.JavaScript.ORDER_MEMBER)||"''")+"."+u+"("+h+")",l.workspace.options.oneBasedIndex?[u+" + 1",o.JavaScript.ORDER_ADDITION]:[u,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_charAt=function(l){var u=l.getFieldValue("WHERE")||"FROM_START",h=o.JavaScript.valueToCode(l,"VALUE","RANDOM"==u?o.JavaScript.ORDER_NONE:o.JavaScript.ORDER_MEMBER)||"''";switch(u){case"FIRST":return[h+".charAt(0)",o.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[h+".slice(-1)",o.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return[h+".charAt("+(l=o.JavaScript.getAdjusted(l,"AT"))+")",o.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return[h+".slice("+(l=o.JavaScript.getAdjusted(l,"AT",1,!0))+").charAt(0)",o.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[o.JavaScript.provideFunction_("textRandomLetter",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {","  var x = Math.floor(Math.random() * text.length);","  return text[x];","}"])+"("+h+")",o.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},o.JavaScript.text.getIndex_=function(l,u,h){return"FIRST"==u?"0":"FROM_END"==u?l+".length - 1 - "+h:"LAST"==u?l+".length - 1":h},o.JavaScript.text_getSubstring=function(l){var u=l.getFieldValue("WHERE1"),h=l.getFieldValue("WHERE2"),_="FROM_END"!=u&&"LAST"!=u&&"FROM_END"!=h&&"LAST"!=h,b=o.JavaScript.valueToCode(l,"STRING",_?o.JavaScript.ORDER_MEMBER:o.JavaScript.ORDER_NONE)||"''";if("FIRST"==u&&"LAST"==h)return[b,o.JavaScript.ORDER_NONE];if(b.match(/^'?\w+'?$/)||_){switch(u){case"FROM_START":_=o.JavaScript.getAdjusted(l,"AT1");break;case"FROM_END":_=b+".length - "+(_=o.JavaScript.getAdjusted(l,"AT1",1,!1,o.JavaScript.ORDER_SUBTRACTION));break;case"FIRST":_="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(h){case"FROM_START":l=o.JavaScript.getAdjusted(l,"AT2",1);break;case"FROM_END":l=b+".length - "+(l=o.JavaScript.getAdjusted(l,"AT2",0,!1,o.JavaScript.ORDER_SUBTRACTION));break;case"LAST":l=b+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}u=b+".slice("+_+", "+l+")"}else{_=o.JavaScript.getAdjusted(l,"AT1"),l=o.JavaScript.getAdjusted(l,"AT2");var D=o.JavaScript.text.getIndex_,x={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};u=o.JavaScript.provideFunction_("subsequence"+x[u]+x[h],["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+("FROM_END"==u||"FROM_START"==u?", at1":"")+("FROM_END"==h||"FROM_START"==h?", at2":"")+") {","  var start = "+D("sequence",u,"at1")+";","  var end = "+D("sequence",h,"at2")+" + 1;","  return sequence.slice(start, end);","}"])+"("+b+("FROM_END"==u||"FROM_START"==u?", "+_:"")+("FROM_END"==h||"FROM_START"==h?", "+l:"")+")"}return[u,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_changeCase=function(l){var u={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[l.getFieldValue("CASE")];return l=o.JavaScript.valueToCode(l,"TEXT",u?o.JavaScript.ORDER_MEMBER:o.JavaScript.ORDER_NONE)||"''",[u?l+u:o.JavaScript.provideFunction_("textToTitleCase",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {","  return str.replace(/\\S+/g,","      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});","}"])+"("+l+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_trim=function(l){var u={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[l.getFieldValue("MODE")];return[(o.JavaScript.valueToCode(l,"TEXT",o.JavaScript.ORDER_MEMBER)||"''")+u,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_print=function(l){return"window.alert("+(o.JavaScript.valueToCode(l,"TEXT",o.JavaScript.ORDER_NONE)||"''")+");\n"},o.JavaScript.text_prompt_ext=function(l){var u="window.prompt("+(l.getField("TEXT")?o.JavaScript.quote_(l.getFieldValue("TEXT")):o.JavaScript.valueToCode(l,"TEXT",o.JavaScript.ORDER_NONE)||"''")+")";return"NUMBER"==l.getFieldValue("TYPE")&&(u="Number("+u+")"),[u,o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_prompt=o.JavaScript.text_prompt_ext,o.JavaScript.text_count=function(l){var u=o.JavaScript.valueToCode(l,"TEXT",o.JavaScript.ORDER_NONE)||"''";return l=o.JavaScript.valueToCode(l,"SUB",o.JavaScript.ORDER_NONE)||"''",[o.JavaScript.provideFunction_("textCount",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle) {","  if (needle.length === 0) {","    return haystack.length + 1;","  } else {","    return haystack.split(needle).length - 1;","  }","}"])+"("+u+", "+l+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_replace=function(l){var u=o.JavaScript.valueToCode(l,"TEXT",o.JavaScript.ORDER_NONE)||"''",h=o.JavaScript.valueToCode(l,"FROM",o.JavaScript.ORDER_NONE)||"''";return l=o.JavaScript.valueToCode(l,"TO",o.JavaScript.ORDER_NONE)||"''",[o.JavaScript.provideFunction_("textReplace",["function "+o.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(haystack, needle, replacement) {",'  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g,"\\\\$1")','                 .replace(/\\x08/g,"\\\\x08");',"  return haystack.replace(new RegExp(needle, 'g'), replacement);","}"])+"("+u+", "+h+", "+l+")",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.text_reverse=function(l){return[(o.JavaScript.valueToCode(l,"TEXT",o.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",o.JavaScript.ORDER_FUNCTION_CALL]},o.JavaScript.variables={},o.JavaScript.variables_get=function(l){return[o.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME),o.JavaScript.ORDER_ATOMIC]},o.JavaScript.variables_set=function(l){var u=o.JavaScript.valueToCode(l,"VALUE",o.JavaScript.ORDER_ASSIGNMENT)||"0";return o.JavaScript.nameDB_.getName(l.getFieldValue("VAR"),o.VARIABLE_CATEGORY_NAME)+" = "+u+";\n"},o.JavaScript.variablesDynamic={},o.JavaScript.variables_get_dynamic=o.JavaScript.variables_get,o.JavaScript.variables_set_dynamic=o.JavaScript.variables_set,o.JavaScript})?y.apply(A,S):y)&&(T.exports=s)},59090:function(T,A,m){var y,S,s;S=[m(81846)],void 0!==(s="function"==typeof(y=function(o){return(o={Msg:{}}).Msg.ADD_COMMENT="Add Comment",o.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",o.Msg.CHANGE_VALUE_TITLE="Change value:",o.Msg.CLEAN_UP="Clean up Blocks",o.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",o.Msg.COLLAPSE_ALL="Collapse Blocks",o.Msg.COLLAPSE_BLOCK="Collapse Block",o.Msg.COLOUR_BLEND_COLOUR1="colour 1",o.Msg.COLOUR_BLEND_COLOUR2="colour 2",o.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",o.Msg.COLOUR_BLEND_RATIO="ratio",o.Msg.COLOUR_BLEND_TITLE="blend",o.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",o.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",o.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",o.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",o.Msg.COLOUR_RANDOM_TITLE="random colour",o.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",o.Msg.COLOUR_RGB_BLUE="blue",o.Msg.COLOUR_RGB_GREEN="green",o.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",o.Msg.COLOUR_RGB_RED="red",o.Msg.COLOUR_RGB_TITLE="colour with",o.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",o.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",o.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",o.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",o.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",o.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",o.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",o.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",o.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",o.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",o.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",o.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",o.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",o.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",o.Msg.CONTROLS_IF_MSG_ELSE="else",o.Msg.CONTROLS_IF_MSG_ELSEIF="else if",o.Msg.CONTROLS_IF_MSG_IF="if",o.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",o.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",o.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",o.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",o.Msg.CONTROLS_REPEAT_INPUT_DO="do",o.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",o.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",o.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",o.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",o.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",o.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",o.Msg.DELETE_BLOCK="Delete Block",o.Msg.DELETE_VARIABLE="Delete the '%1' variable",o.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",o.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",o.Msg.DISABLE_BLOCK="Disable Block",o.Msg.DUPLICATE_BLOCK="Duplicate",o.Msg.DUPLICATE_COMMENT="Duplicate Comment",o.Msg.ENABLE_BLOCK="Enable Block",o.Msg.EXPAND_ALL="Expand Blocks",o.Msg.EXPAND_BLOCK="Expand Block",o.Msg.EXTERNAL_INPUTS="External Inputs",o.Msg.HELP="Help",o.Msg.INLINE_INPUTS="Inline Inputs",o.Msg.IOS_CANCEL="Cancel",o.Msg.IOS_ERROR="Error",o.Msg.IOS_OK="OK",o.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",o.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",o.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",o.Msg.IOS_PROCEDURES_INPUTS="INPUTS",o.Msg.IOS_VARIABLES_ADD_BUTTON="Add",o.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",o.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",o.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",o.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",o.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",o.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",o.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",o.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",o.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",o.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",o.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",o.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",o.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",o.Msg.LISTS_GET_INDEX_FIRST="first",o.Msg.LISTS_GET_INDEX_FROM_END="# from end",o.Msg.LISTS_GET_INDEX_FROM_START="#",o.Msg.LISTS_GET_INDEX_GET="get",o.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",o.Msg.LISTS_GET_INDEX_LAST="last",o.Msg.LISTS_GET_INDEX_RANDOM="random",o.Msg.LISTS_GET_INDEX_REMOVE="remove",o.Msg.LISTS_GET_INDEX_TAIL="",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",o.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",o.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",o.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",o.Msg.LISTS_GET_SUBLIST_END_LAST="to last",o.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",o.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",o.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",o.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",o.Msg.LISTS_GET_SUBLIST_TAIL="",o.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",o.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",o.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",o.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",o.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",o.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",o.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",o.Msg.LISTS_INLIST="in list",o.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",o.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",o.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",o.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",o.Msg.LISTS_LENGTH_TITLE="length of %1",o.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",o.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",o.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",o.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",o.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",o.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",o.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",o.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",o.Msg.LISTS_SET_INDEX_INPUT_TO="as",o.Msg.LISTS_SET_INDEX_INSERT="insert at",o.Msg.LISTS_SET_INDEX_SET="set",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",o.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",o.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",o.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",o.Msg.LISTS_SORT_ORDER_DESCENDING="descending",o.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",o.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",o.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",o.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",o.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",o.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",o.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",o.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",o.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",o.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",o.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",o.Msg.LOGIC_BOOLEAN_FALSE="false",o.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",o.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",o.Msg.LOGIC_BOOLEAN_TRUE="true",o.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",o.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",o.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",o.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",o.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",o.Msg.LOGIC_NEGATE_TITLE="not %1",o.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",o.Msg.LOGIC_NULL="null",o.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",o.Msg.LOGIC_NULL_TOOLTIP="Returns null.",o.Msg.LOGIC_OPERATION_AND="and",o.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",o.Msg.LOGIC_OPERATION_OR="or",o.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",o.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",o.Msg.LOGIC_TERNARY_CONDITION="test",o.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",o.Msg.LOGIC_TERNARY_IF_FALSE="if false",o.Msg.LOGIC_TERNARY_IF_TRUE="if true",o.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",o.Msg.MATH_ADDITION_SYMBOL="+",o.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",o.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",o.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",o.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",o.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",o.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",o.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",o.Msg.MATH_CHANGE_TITLE="change %1 by %2",o.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",o.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",o.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03c0 (3.141\u2026), e (2.718\u2026), \u03c6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xbd) (0.707\u2026), or \u221e (infinity).",o.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",o.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",o.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",o.Msg.MATH_DIVISION_SYMBOL="\xf7",o.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",o.Msg.MATH_IS_EVEN="is even",o.Msg.MATH_IS_NEGATIVE="is negative",o.Msg.MATH_IS_ODD="is odd",o.Msg.MATH_IS_POSITIVE="is positive",o.Msg.MATH_IS_PRIME="is prime",o.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",o.Msg.MATH_IS_WHOLE="is whole",o.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",o.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",o.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",o.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",o.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",o.Msg.MATH_NUMBER_TOOLTIP="A number.",o.Msg.MATH_ONLIST_HELPURL="",o.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",o.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",o.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",o.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",o.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",o.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",o.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",o.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",o.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",o.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",o.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",o.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",o.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",o.Msg.MATH_POWER_SYMBOL="^",o.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",o.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",o.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",o.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",o.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",o.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",o.Msg.MATH_ROUND_OPERATOR_ROUND="round",o.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",o.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",o.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",o.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",o.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",o.Msg.MATH_SINGLE_OP_ROOT="square root",o.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",o.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",o.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",o.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",o.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",o.Msg.MATH_SUBTRACTION_SYMBOL="-",o.Msg.MATH_TRIG_ACOS="acos",o.Msg.MATH_TRIG_ASIN="asin",o.Msg.MATH_TRIG_ATAN="atan",o.Msg.MATH_TRIG_COS="cos",o.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",o.Msg.MATH_TRIG_SIN="sin",o.Msg.MATH_TRIG_TAN="tan",o.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",o.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",o.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",o.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",o.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",o.Msg.NEW_NUMBER_VARIABLE="Create number variable...",o.Msg.NEW_STRING_VARIABLE="Create string variable...",o.Msg.NEW_VARIABLE="Create variable...",o.Msg.NEW_VARIABLE_TITLE="New variable name:",o.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",o.Msg.ORDINAL_NUMBER_SUFFIX="",o.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",o.Msg.PROCEDURES_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",o.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",o.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",o.Msg.PROCEDURES_CREATE_DO="Create '%1'",o.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",o.Msg.PROCEDURES_DEFNORETURN_DO="",o.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",o.Msg.PROCEDURES_DEFNORETURN_TITLE="to",o.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",o.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",o.Msg.PROCEDURES_DEFRETURN_RETURN="return",o.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",o.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",o.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",o.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",o.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",o.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",o.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",o.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",o.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",o.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",o.Msg.REDO="Redo",o.Msg.REMOVE_COMMENT="Remove Comment",o.Msg.RENAME_VARIABLE="Rename variable...",o.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",o.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_APPEND_TITLE="to %1 append text %2",o.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",o.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",o.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",o.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",o.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",o.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",o.Msg.TEXT_CHARAT_FIRST="get first letter",o.Msg.TEXT_CHARAT_FROM_END="get letter # from end",o.Msg.TEXT_CHARAT_FROM_START="get letter #",o.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",o.Msg.TEXT_CHARAT_LAST="get last letter",o.Msg.TEXT_CHARAT_RANDOM="get random letter",o.Msg.TEXT_CHARAT_TAIL="",o.Msg.TEXT_CHARAT_TITLE="in text %1 %2",o.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",o.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",o.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",o.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",o.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",o.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",o.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",o.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",o.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",o.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",o.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",o.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",o.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",o.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",o.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",o.Msg.TEXT_GET_SUBSTRING_TAIL="",o.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",o.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",o.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",o.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",o.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",o.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",o.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",o.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",o.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",o.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",o.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",o.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",o.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",o.Msg.TEXT_LENGTH_TITLE="length of %1",o.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",o.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",o.Msg.TEXT_PRINT_TITLE="print %1",o.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",o.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",o.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",o.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",o.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",o.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",o.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",o.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",o.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",o.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",o.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",o.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",o.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",o.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",o.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",o.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",o.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",o.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",o.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",o.Msg.TODAY="Today",o.Msg.UNDO="Undo",o.Msg.UNNAMED_KEY="unnamed",o.Msg.VARIABLES_DEFAULT_NAME="item",o.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",o.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",o.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",o.Msg.VARIABLES_SET="set %1 to %2",o.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",o.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",o.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",o.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",o.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",o.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",o.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",o.Msg.CONTROLS_FOREACH_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_FOR_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=o.Msg.CONTROLS_IF_MSG_ELSEIF,o.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=o.Msg.CONTROLS_IF_MSG_ELSE,o.Msg.CONTROLS_IF_IF_TITLE_IF=o.Msg.CONTROLS_IF_MSG_IF,o.Msg.CONTROLS_IF_MSG_THEN=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=o.Msg.CONTROLS_REPEAT_INPUT_DO,o.Msg.LISTS_CREATE_WITH_ITEM_TITLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.LISTS_GET_INDEX_HELPURL=o.Msg.LISTS_INDEX_OF_HELPURL,o.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=o.Msg.LISTS_INLIST,o.Msg.MATH_CHANGE_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.PROCEDURES_DEFRETURN_COMMENT=o.Msg.PROCEDURES_DEFNORETURN_COMMENT,o.Msg.PROCEDURES_DEFRETURN_DO=o.Msg.PROCEDURES_DEFNORETURN_DO,o.Msg.PROCEDURES_DEFRETURN_PROCEDURE=o.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,o.Msg.PROCEDURES_DEFRETURN_TITLE=o.Msg.PROCEDURES_DEFNORETURN_TITLE,o.Msg.TEXT_APPEND_VARIABLE=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=o.Msg.VARIABLES_DEFAULT_NAME,o.Msg.MATH_HUE="230",o.Msg.LOOPS_HUE="120",o.Msg.LISTS_HUE="260",o.Msg.LOGIC_HUE="210",o.Msg.VARIABLES_HUE="330",o.Msg.TEXTS_HUE="160",o.Msg.PROCEDURES_HUE="290",o.Msg.COLOUR_HUE="20",o.Msg.VARIABLES_DYNAMIC_HUE="310",o.Msg})?y.apply(A,S):y)&&(T.exports=s)},45149:function(T){T.exports=function(){"use strict";function A(k){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(k)}var k,y=(k={},function(z){var oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"introjs-stamp";return k[oe]=k[oe]||0,void 0===z[oe]&&(z[oe]=k[oe]++),z[oe]});function S(k,L,z){if(k)for(var oe=0,ue=k.length;oe<ue;oe++)L(k[oe],oe);"function"==typeof z&&z()}var s=new function(){var L="introjs_event";this._id=function(z,oe,ue,Re){return oe+y(ue)+(Re?"_".concat(y(Re)):"")},this.on=function(z,oe,ue,Re,_e){var De=this._id.apply(this,arguments),Ve=function($e){return ue.call(Re||z,$e||window.event)};"addEventListener"in z?z.addEventListener(oe,Ve,_e):"attachEvent"in z&&z.attachEvent("on".concat(oe),Ve),z[L]=z[L]||{},z[L][De]=Ve},this.off=function(z,oe,ue,Re,_e){var De=this._id.apply(this,arguments),Ve=z[L]&&z[L][De];!Ve||("removeEventListener"in z?z.removeEventListener(oe,Ve,_e):"detachEvent"in z&&z.detachEvent("on".concat(oe),Ve),z[L][De]=null)}},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function l(k,L){return k(L={exports:{}},L.exports),L.exports}var Tt,kt,u=function(k){return k&&k.Math==Math&&k},h=u("object"==typeof globalThis&&globalThis)||u("object"==typeof window&&window)||u("object"==typeof self&&self)||u("object"==typeof o&&o)||function(){return this}()||Function("return this")(),_=function(k){try{return!!k()}catch(L){return!0}},b=!_(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),D=Function.prototype.call,x=D.bind?D.bind(D):function(){return D.apply(D,arguments)},G={}.propertyIsEnumerable,j=Object.getOwnPropertyDescriptor,Q={f:j&&!G.call({1:2},1)?function(L){var z=j(this,L);return!!z&&z.enumerable}:G},Y=function(k,L){return{enumerable:!(1&k),configurable:!(2&k),writable:!(4&k),value:L}},ae=Function.prototype,ie=ae.bind,he=ae.call,te=ie&&ie.bind(he),Z=ie?function(k){return k&&te(he,k)}:function(k){return k&&function(){return he.apply(k,arguments)}},ee=Z({}.toString),$=Z("".slice),H=function(k){return $(ee(k),8,-1)},de=h.Object,J=Z("".split),B=_(function(){return!de("z").propertyIsEnumerable(0)})?function(k){return"String"==H(k)?J(k,""):de(k)}:de,re=h.TypeError,ce=function(k){if(null==k)throw re("Can't call method on "+k);return k},Ee=function(k){return B(ce(k))},pe=function(k){return"function"==typeof k},ye=function(k){return"object"==typeof k?null!==k:pe(k)},Pe=function(k){return pe(k)?k:void 0},Ue=function(k,L){return arguments.length<2?Pe(h[k]):h[k]&&h[k][L]},Me=Z({}.isPrototypeOf),He=Ue("navigator","userAgent")||"",Ye=h.process,st=h.Deno,yt=Ye&&Ye.versions||st&&st.version,Ke=yt&&yt.v8;Ke&&(kt=(Tt=Ke.split("."))[0]>0&&Tt[0]<4?1:+(Tt[0]+Tt[1])),!kt&&He&&(!(Tt=He.match(/Edge\/(\d+)/))||Tt[1]>=74)&&(Tt=He.match(/Chrome\/(\d+)/))&&(kt=+Tt[1]);var tn=kt,Mn=!!Object.getOwnPropertySymbols&&!_(function(){var k=Symbol();return!String(k)||!(Object(k)instanceof Symbol)||!Symbol.sham&&tn&&tn<41}),Gn=Mn&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,An=h.Object,Gt=Gn?function(k){return"symbol"==typeof k}:function(k){var L=Ue("Symbol");return pe(L)&&Me(L.prototype,An(k))},Dn=h.String,Bt=function(k){try{return Dn(k)}catch(L){return"Object"}},vn=h.TypeError,Xe=function(k){if(pe(k))return k;throw vn(Bt(k)+" is not a function")},vi=function(k,L){var z=k[L];return null==z?void 0:Xe(z)},ln=h.TypeError,En=Object.defineProperty,zn=function(k,L){try{En(h,k,{value:L,configurable:!0,writable:!0})}catch(z){h[k]=L}return L},Vi="__core-js_shared__",Oe=h[Vi]||zn(Vi,{}),dn=l(function(k){(k.exports=function(L,z){return Oe[L]||(Oe[L]=void 0!==z?z:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),mn=h.Object,Vt=function(k){return mn(ce(k))},_n=Z({}.hasOwnProperty),Ln=Object.hasOwn||function(L,z){return _n(Vt(L),z)},Fi=0,xn=Math.random(),wt=Z(1..toString),Rt=function(k){return"Symbol("+(void 0===k?"":k)+")_"+wt(++Fi+xn,36)},Fe=dn("wks"),ot=h.Symbol,me=ot&&ot.for,Ne=Gn?ot:ot&&ot.withoutSetter||Rt,et=function(k){if(!Ln(Fe,k)||!Mn&&"string"!=typeof Fe[k]){var L="Symbol."+k;Fe[k]=Mn&&Ln(ot,k)?ot[k]:Gn&&me?me(L):Ne(L)}return Fe[k]},Dt=h.TypeError,Xt=et("toPrimitive"),$t=function(k,L){if(!ye(k)||Gt(k))return k;var oe,z=vi(k,Xt);if(z){if(void 0===L&&(L="default"),oe=x(z,k,L),!ye(oe)||Gt(oe))return oe;throw Dt("Can't convert object to primitive value")}return void 0===L&&(L="number"),function(k,L){var z,oe;if("string"===L&&pe(z=k.toString)&&!ye(oe=x(z,k))||pe(z=k.valueOf)&&!ye(oe=x(z,k))||"string"!==L&&pe(z=k.toString)&&!ye(oe=x(z,k)))return oe;throw ln("Can't convert object to primitive value")}(k,L)},tt=function(k){var L=$t(k,"string");return Gt(L)?L:L+""},Qt=h.document,hn=ye(Qt)&&ye(Qt.createElement),vt=function(k){return hn?Qt.createElement(k):{}},Et=!b&&!_(function(){return 7!=Object.defineProperty(vt("div"),"a",{get:function(){return 7}}).a}),no=Object.getOwnPropertyDescriptor,Rr={f:b?no:function(L,z){if(L=Ee(L),z=tt(z),Et)try{return no(L,z)}catch(oe){}if(Ln(L,z))return Y(!x(Q.f,L,z),L[z])}},Rl=h.String,ca=h.TypeError,rn=function(k){if(ye(k))return k;throw ca(Rl(k)+" is not an object")},Ir=h.TypeError,Fu=Object.defineProperty,Il={f:b?Fu:function(L,z,oe){if(rn(L),z=tt(z),rn(oe),Et)try{return Fu(L,z,oe)}catch(ue){}if("get"in oe||"set"in oe)throw Ir("Accessors not supported");return"value"in oe&&(L[z]=oe.value),L}},js=b?function(k,L,z){return Il.f(k,L,Y(1,z))}:function(k,L,z){return k[L]=z,k},io=Z(Function.toString);pe(Oe.inspectSource)||(Oe.inspectSource=function(k){return io(k)});var Hu,Al,Uu,hh=Oe.inspectSource,Bu=h.WeakMap,Um=pe(Bu)&&/native code/.test(hh(Bu)),ts=dn("keys"),Tf=function(k){return ts[k]||(ts[k]=Rt(k))},Vu={},wf="Object already initialized",ph=h.TypeError;if(Um||Oe.state){var $a=Oe.state||(Oe.state=new(0,h.WeakMap)),Gm=Z($a.get),Df=Z($a.has),mt=Z($a.set);Hu=function(k,L){if(Df($a,k))throw new ph(wf);return L.facade=k,mt($a,k,L),L},Al=function(k){return Gm($a,k)||{}},Uu=function(k){return Df($a,k)}}else{var xl=Tf("state");Vu[xl]=!0,Hu=function(k,L){if(Ln(k,xl))throw new ph(wf);return L.facade=k,js(k,xl,L),L},Al=function(k){return Ln(k,xl)?k[xl]:{}},Uu=function(k){return Ln(k,xl)}}var Mt={set:Hu,get:Al,has:Uu,enforce:function(k){return Uu(k)?Al(k):Hu(k,{})},getterFor:function(k){return function(L){var z;if(!ye(L)||(z=Al(L)).type!==k)throw ph("Incompatible receiver, "+k+" required");return z}}},Ho=Function.prototype,Gu=b&&Object.getOwnPropertyDescriptor,Ic=Ln(Ho,"name"),Ol={EXISTS:Ic,PROPER:Ic&&"something"===function(){}.name,CONFIGURABLE:Ic&&(!b||b&&Gu(Ho,"name").configurable)},ua=l(function(k){var L=Ol.CONFIGURABLE,z=Mt.get,oe=Mt.enforce,ue=String(String).split("String");(k.exports=function(Re,_e,De,Ve){var yn,Ge=!!Ve&&!!Ve.unsafe,$e=!!Ve&&!!Ve.enumerable,Yt=!!Ve&&!!Ve.noTargetGet,Zt=Ve&&void 0!==Ve.name?Ve.name:_e;pe(De)&&("Symbol("===String(Zt).slice(0,7)&&(Zt="["+String(Zt).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Ln(De,"name")||L&&De.name!==Zt)&&js(De,"name",Zt),(yn=oe(De)).source||(yn.source=ue.join("string"==typeof Zt?Zt:""))),Re!==h?(Ge?!Yt&&Re[_e]&&($e=!0):delete Re[_e],$e?Re[_e]=De:js(Re,_e,De)):$e?Re[_e]=De:zn(_e,De)})(Function.prototype,"toString",function(){return pe(this)&&z(this).source||hh(this)})}),Wu=Math.ceil,Mf=Math.floor,on=function(k){var L=+k;return L!=L||0===L?0:(L>0?Mf:Wu)(L)},kl=Math.max,Rf=Math.min,Uo=function(k,L){var z=on(k);return z<0?kl(z+L,0):Rf(z,L)},mh=Math.min,ju=function(k){return k>0?mh(on(k),9007199254740991):0},Kr=function(k){return ju(k.length)},ro=function(k){return function(L,z,oe){var De,ue=Ee(L),Re=Kr(ue),_e=Uo(oe,Re);if(k&&z!=z){for(;Re>_e;)if((De=ue[_e++])!=De)return!0}else for(;Re>_e;_e++)if((k||_e in ue)&&ue[_e]===z)return k||_e||0;return!k&&-1}},If={includes:ro(!0),indexOf:ro(!1)},Wm=If.indexOf,$i=Z([].push),zu=function(k,L){var Re,z=Ee(k),oe=0,ue=[];for(Re in z)!Ln(Vu,Re)&&Ln(z,Re)&&$i(ue,Re);for(;L.length>oe;)Ln(z,Re=L[oe++])&&(~Wm(ue,Re)||$i(ue,Re));return ue},Ac=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Af=Ac.concat("length","prototype"),ri={f:Object.getOwnPropertyNames||function(L){return zu(L,Af)}},xf={f:Object.getOwnPropertySymbols},Ka=Z([].concat),fi=Ue("Reflect","ownKeys")||function(L){var z=ri.f(rn(L)),oe=xf.f;return oe?Ka(z,oe(L)):z},Ja=function(k,L){for(var z=fi(L),oe=Il.f,ue=Rr.f,Re=0;Re<z.length;Re++){var _e=z[Re];Ln(k,_e)||oe(k,_e,ue(L,_e))}},ns=/#|\.prototype\./,is=function(k,L){var z=_h[Xu(k)];return z==da||z!=Eo&&(pe(L)?_(L):!!L)},Xu=is.normalize=function(k){return String(k).replace(ns,".").toLowerCase()},_h=is.data={},Eo=is.NATIVE="N",da=is.POLYFILL="P",Of=is,_t=Rr.f,rs=function(k,L){var _e,De,Ve,Ge,$e,z=k.target,oe=k.global,ue=k.stat;if(_e=oe?h:ue?h[z]||zn(z,{}):(h[z]||{}).prototype)for(De in L){if(Ge=L[De],Ve=k.noTargetGet?($e=_t(_e,De))&&$e.value:_e[De],!Of(oe?De:z+(ue?".":"#")+De,k.forced)&&void 0!==Ve){if(typeof Ge==typeof Ve)continue;Ja(Ge,Ve)}(k.sham||Ve&&Ve.sham)&&js(Ge,"sham",!0),ua(_e,De,Ge,k)}},Yu={};Yu[et("toStringTag")]="z";var ws,Nl="[object z]"===String(Yu),Lt=et("toStringTag"),bh=h.Object,Go="Arguments"==H(function(){return arguments}()),gi=Nl?H:function(k){var L,z,oe;return void 0===k?"Undefined":null===k?"Null":"string"==typeof(z=function(k,L){try{return k[L]}catch(z){}}(L=bh(k),Lt))?z:Go?H(L):"Object"==(oe=H(L))&&pe(L.callee)?"Arguments":oe},Zi=h.String,yi=function(k){if("Symbol"===gi(k))throw TypeError("Cannot convert a Symbol value to a string");return Zi(k)},zs=function(){var k=rn(this),L="";return k.global&&(L+="g"),k.ignoreCase&&(L+="i"),k.multiline&&(L+="m"),k.dotAll&&(L+="s"),k.unicode&&(L+="u"),k.sticky&&(L+="y"),L},oo=h.RegExp,It={UNSUPPORTED_Y:_(function(){var k=oo("a","y");return k.lastIndex=2,null!=k.exec("abcd")}),BROKEN_CARET:_(function(){var k=oo("^r","gy");return k.lastIndex=2,null!=k.exec("str")})},Rn=Object.keys||function(L){return zu(L,Ac)},mi=b?Object.defineProperties:function(L,z){rn(L);for(var De,oe=Ee(z),ue=Rn(z),Re=ue.length,_e=0;Re>_e;)Il.f(L,De=ue[_e++],oe[De]);return L},so=Ue("document","documentElement"),wo="prototype",Pi="script",ao=Tf("IE_PROTO"),Ts=function(){},bn=function(k){return"<script>"+k+"</"+Pi+">"},ha=function(k){k.write(bn("")),k.close();var L=k.parentWindow.Object;return k=null,L},Wo=function(){try{ws=new ActiveXObject("htmlfile")}catch(L){}Wo="undefined"!=typeof document?document.domain&&ws?ha(ws):function(){var z,k=vt("iframe");return k.style.display="none",so.appendChild(k),k.src=String("javascript:"),(z=k.contentWindow.document).open(),z.write(bn("document.F=Object")),z.close(),z.F}():ha(ws);for(var k=Ac.length;k--;)delete Wo[wo][Ac[k]];return Wo()};Vu[ao]=!0;var Gr=Object.create||function(L,z){var oe;return null!==L?(Ts[wo]=rn(L),oe=new Ts,Ts[wo]=null,oe[ao]=L):oe=Wo(),void 0===z?oe:mi(oe,z)},Ll=h.RegExp,Qa=_(function(){var k=Ll(".","s");return!(k.dotAll&&k.exec("\n")&&"s"===k.flags)}),jo=h.RegExp,Si=_(function(){var k=jo("(?<a>b)","g");return"b"!==k.exec("b").groups.a||"bc"!=="b".replace(k,"$<a>c")}),Ch=Mt.get,kf=dn("native-string-replace",String.prototype.replace),pa=RegExp.prototype.exec,Pl=pa,Fl=Z("".charAt),Ss=Z("".indexOf),fa=Z("".replace),or=Z("".slice),$u=function(){var k=/a/,L=/b*/g;return x(pa,k,"a"),x(pa,L,"a"),0!==k.lastIndex||0!==L.lastIndex}(),zo=It.UNSUPPORTED_Y||It.BROKEN_CARET,lo=void 0!==/()??/.exec("")[1];($u||lo||zo||Qa||Si)&&(Pl=function(L){var _e,De,Ve,Ge,$e,Yt,Zt,z=this,oe=Ch(z),ue=yi(L),Re=oe.raw;if(Re)return Re.lastIndex=z.lastIndex,_e=x(Pl,Re,ue),z.lastIndex=Re.lastIndex,_e;var yn=oe.groups,qi=zo&&z.sticky,_i=x(zs,z),li=z.source,ki=0,Ki=ue;if(qi&&(_i=fa(_i,"y",""),-1===Ss(_i,"g")&&(_i+="g"),Ki=or(ue,z.lastIndex),z.lastIndex>0&&(!z.multiline||z.multiline&&"\n"!==Fl(ue,z.lastIndex-1))&&(li="(?: "+li+")",Ki=" "+Ki,ki++),De=new RegExp("^(?:"+li+")",_i)),lo&&(De=new RegExp("^"+li+"$(?!\\s)",_i)),$u&&(Ve=z.lastIndex),Ge=x(pa,qi?De:z,Ki),qi?Ge?(Ge.input=or(Ge.input,ki),Ge[0]=or(Ge[0],ki),Ge.index=z.lastIndex,z.lastIndex+=Ge[0].length):z.lastIndex=0:$u&&Ge&&(z.lastIndex=z.global?Ge.index+Ge[0].length:Ve),lo&&Ge&&Ge.length>1&&x(kf,Ge[0],De,function(){for($e=1;$e<arguments.length-2;$e++)void 0===arguments[$e]&&(Ge[$e]=void 0)}),Ge&&yn)for(Ge.groups=Yt=Gr(null),$e=0;$e<yn.length;$e++)Yt[(Zt=yn[$e])[0]]=Ge[Zt[1]];return Ge});var Ds=Pl;rs({target:"RegExp",proto:!0,forced:/./.exec!==Ds},{exec:Ds});var Bl=et("species"),Jr=RegExp.prototype,Vl=function(k,L,z,oe){var ue=et(k),Re=!_(function(){var Ge={};return Ge[ue]=function(){return 7},7!=""[k](Ge)}),_e=Re&&!_(function(){var Ge=!1,$e=/a/;return"split"===k&&(($e={}).constructor={},$e.constructor[Bl]=function(){return $e},$e.flags="",$e[ue]=/./[ue]),$e.exec=function(){return Ge=!0,null},$e[ue](""),!Ge});if(!Re||!_e||z){var De=Z(/./[ue]),Ve=L(ue,""[k],function(Ge,$e,Yt,Zt,yn){var qi=Z(Ge),_i=$e.exec;return _i===Ds||_i===Jr.exec?Re&&!yn?{done:!0,value:De($e,Yt,Zt)}:{done:!0,value:qi(Yt,$e,Zt)}:{done:!1}});ua(String.prototype,k,Ve[0]),ua(Jr,ue,Ve[1])}oe&&js(Jr[ue],"sham",!0)},Xm=Z("".charAt),Za=Z("".charCodeAt),Nf=Z("".slice),Lf=function(k){return function(L,z){var _e,De,oe=yi(ce(L)),ue=on(z),Re=oe.length;return ue<0||ue>=Re?k?"":void 0:(_e=Za(oe,ue))<55296||_e>56319||ue+1===Re||(De=Za(oe,ue+1))<56320||De>57343?k?Xm(oe,ue):_e:k?Nf(oe,ue,ue+2):De-56320+(_e-55296<<10)+65536}},$m=(Lf(!1),Lf(!0)),xc=function(k,L,z){return L+(z?$m(k,L).length:1)},Km=h.TypeError,Oc=function(k,L){var z=k.exec;if(pe(z)){var oe=x(z,k,L);return null!==oe&&rn(oe),oe}if("RegExp"===H(k))return x(Ds,k,L);throw Km("RegExp#exec called on incompatible receiver")};Vl("match",function(k,L,z){return[function(ue){var Re=ce(this),_e=null==ue?void 0:vi(ue,k);return _e?x(_e,ue,Re):new RegExp(ue)[k](yi(Re))},function(oe){var ue=rn(this),Re=yi(oe),_e=z(L,ue,Re);if(_e.done)return _e.value;if(!ue.global)return Oc(ue,Re);var De=ue.unicode;ue.lastIndex=0;for(var $e,Ve=[],Ge=0;null!==($e=Oc(ue,Re));){var Yt=yi($e[0]);Ve[Ge]=Yt,""===Yt&&(ue.lastIndex=xc(Re,ju(ue.lastIndex),De)),Ge++}return 0===Ge?null:Ve}]});var kc=Array.isArray||function(L){return"Array"==H(L)},Ju=function(k,L,z){var oe=tt(L);oe in k?Il.f(k,oe,Y(0,z)):k[oe]=z},Eh=function(){},Jm=[],Nc=Ue("Reflect","construct"),Th=/^\s*(?:class|function)\b/,Qm=Z(Th.exec),Zm=!Th.exec(Eh),qa=function(k){if(!pe(k))return!1;try{return Nc(Eh,Jm,k),!0}catch(L){return!1}},Qu=!Nc||_(function(){var k;return qa(qa.call)||!qa(Object)||!qa(function(){k=!0})||k})?function(k){if(!pe(k))return!1;switch(gi(k)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Zm||!!Qm(Th,hh(k))}:qa,qm=et("species"),wh=h.Array,Hl=function(k,L){return new(function(k){var L;return kc(k)&&(Qu(L=k.constructor)&&(L===wh||kc(L.prototype))||ye(L)&&null===(L=L[qm]))&&(L=void 0),void 0===L?wh:L}(k))(0===L?0:L)},cn=et("species"),Ul=function(k){return tn>=51||!_(function(){var L=[];return(L.constructor={})[cn]=function(){return{foo:1}},1!==L[k](Boolean).foo})},Sh=et("isConcatSpreadable"),Dh=9007199254740991,Zu="Maximum allowed index exceeded",qu=h.TypeError,Gl=tn>=51||!_(function(){var k=[];return k[Sh]=!1,k.concat()[0]!==k}),ed=Ul("concat"),Mh=function(k){if(!ye(k))return!1;var L=k[Sh];return void 0!==L?!!L:kc(k)};rs({target:"Array",proto:!0,forced:!Gl||!ed},{concat:function(L){var Re,_e,De,Ve,Ge,z=Vt(this),oe=Hl(z,0),ue=0;for(Re=-1,De=arguments.length;Re<De;Re++)if(Mh(Ge=-1===Re?z:arguments[Re])){if(ue+(Ve=Kr(Ge))>Dh)throw qu(Zu);for(_e=0;_e<Ve;_e++,ue++)_e in Ge&&Ju(oe,ue,Ge[_e])}else{if(ue>=Dh)throw qu(Zu);Ju(oe,ue++,Ge)}return oe.length=ue,oe}}),Nl||ua(Object.prototype,"toString",Nl?{}.toString:function(){return"[object "+gi(this)+"]"},{unsafe:!0});var Wl=Ol.PROPER,Ms="toString",Pc=RegExp.prototype,jl=Pc[Ms],e_=Z(zs);(_(function(){return"/a/b"!=jl.call({source:"a",flags:"b"})})||Wl&&jl.name!=Ms)&&ua(RegExp.prototype,Ms,function(){var L=rn(this),z=yi(L.source),oe=L.flags;return"/"+z+"/"+yi(void 0===oe&&Me(Pc,L)&&!("flags"in Pc)?e_(L):oe)},{unsafe:!0});var zl=Function.prototype,td=zl.apply,nd=zl.call,Ih="object"==typeof Reflect&&Reflect.apply||(zl.bind?nd.bind(td):function(){return nd.apply(td,arguments)}),Rs=et("match"),co=function(k){var L;return ye(k)&&(void 0!==(L=k[Rs])?!!L:"RegExp"==H(k))},Pf=h.TypeError,ma=et("species"),uo=function(k,L){var oe,z=rn(k).constructor;return void 0===z||null==(oe=rn(z)[ma])?L:function(k){if(Qu(k))return k;throw Pf(Bt(k)+" is not a constructor")}(oe)},_a=Z([].slice),Xs=It.UNSUPPORTED_Y,Ah=4294967295,Is=Math.min,id=[].push,rd=Z(/./.exec),gn=Z(id),So=Z("".slice);function Do(k,L){if(k instanceof SVGElement){var z=k.getAttribute("class")||"";z.match(L)||k.setAttribute("class","".concat(z," ").concat(L))}else void 0!==k.classList?S(L.split(" "),function(ue){k.classList.add(ue)}):k.className.match(L)||(k.className+=" ".concat(L))}function od(k,L){var z="";return k.currentStyle?z=k.currentStyle[L]:document.defaultView&&document.defaultView.getComputedStyle&&(z=document.defaultView.getComputedStyle(k,null).getPropertyValue(L)),z&&z.toLowerCase?z.toLowerCase():z}function Vc(k){var L=k.element;if(this._options.scrollToElement){var z=function(k){var L=window.getComputedStyle(k),z="absolute"===L.position,oe=/(auto|scroll)/;if("fixed"===L.position)return document.body;for(var ue=k;ue=ue.parentElement;)if(L=window.getComputedStyle(ue),(!z||"static"!==L.position)&&oe.test(L.overflow+L.overflowY+L.overflowX))return ue;return document.body}(L);z!==document.body&&(z.scrollTop=L.offsetTop-z.offsetTop)}}function it(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var k=document.documentElement;return{width:k.clientWidth,height:k.clientHeight}}function Pn(k,L,z){var ue,oe=L.element;if("off"!==k&&this._options.scrollToElement&&(ue="tooltip"===k?z.getBoundingClientRect():oe.getBoundingClientRect(),!function(k){var L=k.getBoundingClientRect();return L.top>=0&&L.left>=0&&L.bottom+80<=window.innerHeight&&L.right<=window.innerWidth}(oe))){var Re=it().height;ue.bottom-(ue.bottom-ue.top)<0||oe.clientHeight>Re?window.scrollBy(0,ue.top-(Re/2-ue.height/2)-this._options.scrollPadding):window.scrollBy(0,ue.top-(Re/2-ue.height/2)+this._options.scrollPadding)}}function Bi(k){k.setAttribute("role","button"),k.tabIndex=0}Vl("split",function(k,L,z){var oe;return oe="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(ue,Re){var _e=yi(ce(this)),De=void 0===Re?Ah:Re>>>0;if(0===De)return[];if(void 0===ue)return[_e];if(!co(ue))return x(L,_e,ue,De);for(var Zt,yn,qi,Ve=[],$e=0,Yt=new RegExp(ue.source,(ue.ignoreCase?"i":"")+(ue.multiline?"m":"")+(ue.unicode?"u":"")+(ue.sticky?"y":"")+"g");(Zt=x(Ds,Yt,_e))&&!((yn=Yt.lastIndex)>$e&&(gn(Ve,So(_e,$e,Zt.index)),Zt.length>1&&Zt.index<_e.length&&Ih(id,Ve,_a(Zt,1)),qi=Zt[0].length,$e=yn,Ve.length>=De));)Yt.lastIndex===Zt.index&&Yt.lastIndex++;return $e===_e.length?(qi||!rd(Yt,""))&&gn(Ve,""):gn(Ve,So(_e,$e)),Ve.length>De?_a(Ve,0,De):Ve}:"0".split(void 0,0).length?function(ue,Re){return void 0===ue&&0===Re?[]:x(L,this,ue,Re)}:L,[function(Re,_e){var De=ce(this),Ve=null==Re?void 0:vi(Re,k);return Ve?x(Ve,Re,De,_e):x(oe,yi(De),Re,_e)},function(ue,Re){var _e=rn(this),De=yi(ue),Ve=z(oe,_e,De,Re,oe!==L);if(Ve.done)return Ve.value;var Ge=uo(_e,RegExp),$e=_e.unicode,Zt=new Ge(Xs?"^(?:"+_e.source+")":_e,(_e.ignoreCase?"i":"")+(_e.multiline?"m":"")+(_e.unicode?"u":"")+(Xs?"g":"y")),yn=void 0===Re?Ah:Re>>>0;if(0===yn)return[];if(0===De.length)return null===Oc(Zt,De)?[De]:[];for(var qi=0,_i=0,li=[];_i<De.length;){Zt.lastIndex=Xs?0:_i;var Ki,ki=Oc(Zt,Xs?So(De,_i):De);if(null===ki||(Ki=Is(ju(Zt.lastIndex+(Xs?_i:0)),De.length))===qi)_i=xc(De,_i,$e);else{if(gn(li,So(De,qi,_i)),li.length===yn)return li;for(var er=1;er<=ki.length-1;er++)if(gn(li,ki[er]),li.length===yn)return li;_i=qi=Ki}}return gn(li,So(De,qi)),li}]},!!_(function(){var k=/(?:)/,L=k.exec;k.exec=function(){return L.apply(this,arguments)};var z="ab".split(k);return 2!==z.length||"a"!==z[0]||"b"!==z[1]}),Xs);var va=Object.assign,el=Object.defineProperty,os=Z([].concat),Hc=!va||_(function(){if(b&&1!==va({b:1},va(el({},"a",{enumerable:!0,get:function(){el(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var k={},L={},z=Symbol(),oe="abcdefghijklmnopqrst";return k[z]=7,oe.split("").forEach(function(ue){L[ue]=ue}),7!=va({},k)[z]||Rn(va({},L)).join("")!=oe})?function(L,z){for(var oe=Vt(L),ue=arguments.length,Re=1,_e=xf.f,De=Q.f;ue>Re;)for(var Zt,Ve=B(arguments[Re++]),Ge=_e?os(Rn(Ve),_e(Ve)):Rn(Ve),$e=Ge.length,Yt=0;$e>Yt;)Zt=Ge[Yt++],(!b||x(De,Ve,Zt))&&(oe[Zt]=Ve[Zt]);return oe}:va;function tl(k){var L=k.parentNode;return!(!L||"HTML"===L.nodeName)&&("fixed"===od(k,"position")||tl(L))}function Xl(k,L){var z=document.body,oe=document.documentElement,ue=window.pageYOffset||oe.scrollTop||z.scrollTop,Re=window.pageXOffset||oe.scrollLeft||z.scrollLeft;L=L||z;var _e=k.getBoundingClientRect(),De=L.getBoundingClientRect(),Ve=od(L,"position"),Ge={width:_e.width,height:_e.height};return"body"!==L.tagName.toLowerCase()&&"relative"===Ve||"sticky"===Ve?Object.assign(Ge,{top:_e.top-De.top,left:_e.left-De.left}):tl(k)?Object.assign(Ge,{top:_e.top,left:_e.left}):Object.assign(Ge,{top:_e.top+ue,left:_e.left+Re})}rs({target:"Object",stat:!0,forced:Object.assign!==Hc},{assign:Hc});var Vf=Math.floor,nl=Z("".charAt),Uc=Z("".replace),br=Z("".slice),ss=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,sd=/\$([$&'`]|\d{1,2})/g,il=function(k,L,z,oe,ue,Re){var _e=z+k.length,De=oe.length,Ve=sd;return void 0!==ue&&(ue=Vt(ue),Ve=ss),Uc(Re,Ve,function(Ge,$e){var Yt;switch(nl($e,0)){case"$":return"$";case"&":return k;case"`":return br(L,0,z);case"'":return br(L,_e);case"<":Yt=ue[br($e,1,-1)];break;default:var Zt=+$e;if(0===Zt)return Ge;if(Zt>De){var yn=Vf(Zt/10);return 0===yn?Ge:yn<=De?void 0===oe[yn-1]?nl($e,1):oe[yn-1]+nl($e,1):Ge}Yt=oe[Zt-1]}return void 0===Yt?"":Yt})},Mo=et("replace"),Gc=Math.max,ad=Math.min,Hf=Z([].concat),ld=Z([].push),Wc=Z("".indexOf),as=Z("".slice),Oh=function(k){return void 0===k?k:String(k)},ho="$0"==="a".replace(/./,"$0"),kh=!!/./[Mo]&&""===/./[Mo]("a","$0");function Xo(k,L){if(k instanceof SVGElement){var z=k.getAttribute("class")||"";k.setAttribute("class",z.replace(L,"").replace(/^\s+|\s+$/g,""))}else k.className=k.className.replace(L,"").replace(/^\s+|\s+$/g,"")}function Yo(k,L){var z="";if(k.style.cssText&&(z+=k.style.cssText),"string"==typeof L)z+=L;else for(var oe in L)z+="".concat(oe,":").concat(L[oe],";");k.style.cssText=z}function ls(k){if(k){if(!this._introItems[this._currentStep])return;var L=this._introItems[this._currentStep],z=Xl(L.element,this._targetElement),oe=this._options.helperElementPadding;tl(L.element)?Do(k,"introjs-fixedTooltip"):Xo(k,"introjs-fixedTooltip"),"floating"===L.position&&(oe=0),Yo(k,{width:"".concat(z.width+oe,"px"),height:"".concat(z.height+oe,"px"),top:"".concat(z.top-oe/2,"px"),left:"".concat(z.left-oe/2,"px")})}}Vl("replace",function(k,L,z){var oe=kh?"$":"$0";return[function(Re,_e){var De=ce(this),Ve=null==Re?void 0:vi(Re,Mo);return Ve?x(Ve,Re,De,_e):x(L,yi(De),Re,_e)},function(ue,Re){var _e=rn(this),De=yi(ue);if("string"==typeof Re&&-1===Wc(Re,oe)&&-1===Wc(Re,"$<")){var Ve=z(L,_e,De,Re);if(Ve.done)return Ve.value}var Ge=pe(Re);Ge||(Re=yi(Re));var $e=_e.global;if($e){var Yt=_e.unicode;_e.lastIndex=0}for(var Zt=[];;){var yn=Oc(_e,De);if(null===yn||(ld(Zt,yn),!$e))break;""===yi(yn[0])&&(_e.lastIndex=xc(De,ju(_e.lastIndex),Yt))}for(var _i="",li=0,ki=0;ki<Zt.length;ki++){for(var Ki=yi((yn=Zt[ki])[0]),er=Gc(ad(on(yn.index),De.length),0),us=[],fr=1;fr<yn.length;fr++)ld(us,Oh(yn[fr]));var Cr=yn.groups;if(Ge){var ds=Hf([Ki],us,er,De);void 0!==Cr&&ld(ds,Cr);var Qf=yi(Ih(Re,void 0,ds))}else Qf=il(Ki,De,er,us,Cr,Re);er>=li&&(_i+=as(De,li,er)+Qf,li=er+Ki.length)}return _i+as(De,li)}]},!!_(function(){var k=/./;return k.exec=function(){var L=[];return L.groups={a:"7"},L},"7"!=="".replace(k,"$<a>")})||!ho||kh);var jc=et("unscopables"),zc=Array.prototype;null==zc[jc]&&Il.f(zc,jc,{configurable:!0,value:Gr(null)});var Uf=If.includes;rs({target:"Array",proto:!0},{includes:function(L){return Uf(this,L,arguments.length>1?arguments[1]:void 0)}}),function(k){zc[jc][k]=!0}("includes");var cd=Ul("slice"),pr=et("species"),Ro=h.Array,Gi=Math.max;rs({target:"Array",proto:!0,forced:!cd},{slice:function(L,z){var De,Ve,Ge,oe=Ee(this),ue=Kr(oe),Re=Uo(L,ue),_e=Uo(void 0===z?ue:z,ue);if(kc(oe)&&((Qu(De=oe.constructor)&&(De===Ro||kc(De.prototype))||ye(De)&&null===(De=De[pr]))&&(De=void 0),De===Ro||void 0===De))return _a(oe,Re,_e);for(Ve=new(void 0===De?Ro:De)(Gi(_e-Re,0)),Ge=0;Re<_e;Re++,Ge++)Re in oe&&Ju(Ve,Ge,oe[Re]);return Ve.length=Ge,Ve}});var Ar=h.TypeError,Lh=function(k){if(co(k))throw Ar("The method doesn't accept regular expressions");return k},Yl=et("match"),ud=Z("".indexOf);rs({target:"String",proto:!0,forced:!function(k){var L=/./;try{"/./"[k](L)}catch(z){try{return L[Yl]=!1,"/./"[k](L)}catch(oe){}}return!1}("includes")},{includes:function(L){return!!~ud(yi(ce(this)),yi(Lh(L)),arguments.length>1?arguments[1]:void 0)}});var dd=function(k,L){var z=[][k];return!!z&&_(function(){z.call(null,L||function(){throw 1},1)})},Yc=Z([].join),$c=B!=Object,$l=dd("join",",");rs({target:"Array",proto:!0,forced:$c||!$l},{join:function(L){return Yc(Ee(this),void 0===L?",":L)}});var Kl=Z(Z.bind),hd=Z([].push),xr=function(k){var L=1==k,z=2==k,oe=3==k,ue=4==k,Re=6==k,_e=7==k,De=5==k||Re;return function(Ve,Ge,$e,Yt){for(var er,us,Zt=Vt(Ve),yn=B(Zt),qi=function(k,L){return Xe(k),void 0===L?k:Kl?Kl(k,L):function(){return k.apply(L,arguments)}}(Ge,$e),_i=Kr(yn),li=0,ki=Yt||Hl,Ki=L?ki(Ve,_i):z||_e?ki(Ve,0):void 0;_i>li;li++)if((De||li in yn)&&(us=qi(er=yn[li],li,Zt),k))if(L)Ki[li]=us;else if(us)switch(k){case 3:return!0;case 5:return er;case 6:return li;case 2:hd(Ki,er)}else switch(k){case 4:return!1;case 7:hd(Ki,er)}return Re?-1:oe||ue?ue:Ki}},Bh=[xr(0),xr(1),xr(2),xr(3),xr(4),xr(5),xr(6),xr(7)][2];function As(k,L,z,oe,ue){return k.left+L+z.width>oe.width?(ue.style.left="".concat(oe.width-z.width-k.left,"px"),!1):(ue.style.left="".concat(L,"px"),!0)}function rl(k,L,z,oe){return k.left+k.width-L-z.width<0?(oe.style.left="".concat(-k.left,"px"),!1):(oe.style.right="".concat(L,"px"),!0)}rs({target:"Array",proto:!0,forced:!Ul("filter")},{filter:function(L){return Bh(this,L,arguments.length>1?arguments[1]:void 0)}});var Gf=Ul("splice"),Wf=h.TypeError,ol=Math.max,t_=Math.min,Kc=9007199254740991,Hh="Maximum allowed length exceeded";function xs(k,L){k.includes(L)&&k.splice(k.indexOf(L),1)}function Jc(k,L,z){var oe=this._options.positionPrecedence.slice(),ue=it(),Re=Xl(L).height+10,_e=Xl(L).width+20,De=k.getBoundingClientRect(),Ve="floating";De.bottom+Re>ue.height&&xs(oe,"bottom"),De.top-Re<0&&xs(oe,"top"),De.right+_e>ue.width&&xs(oe,"right"),De.left-_e<0&&xs(oe,"left");var $e,Yt,Ge=-1!==(Yt=($e=z||"").indexOf("-"))?$e.substr(Yt):"";return z&&(z=z.split("-")[0]),oe.length&&(Ve=oe.includes(z)?z:oe[0]),["top","bottom"].includes(Ve)&&(Ve+=function(k,L,z,oe){var Re=L/2,_e=Math.min(z.width,window.screen.width),De=["-left-aligned","-middle-aligned","-right-aligned"];return _e-k<L&&xs(De,"-left-aligned"),(k<Re||_e-k<Re)&&xs(De,"-middle-aligned"),k<L&&xs(De,"-right-aligned"),De.length?De.includes(oe)?oe:De[0]:"-middle-aligned"}(De.left,_e,ue,Ge)),Ve}function yr(k,L,z,oe){var Re,_e,De,Ve,Ge;if(oe=oe||!1,L.style.top=null,L.style.right=null,L.style.bottom=null,L.style.left=null,L.style.marginLeft=null,L.style.marginTop=null,z.style.display="inherit",this._introItems[this._currentStep])switch(L.className=["introjs-tooltip","string"==typeof(Re=this._introItems[this._currentStep]).tooltipClass?Re.tooltipClass:this._options.tooltipClass].filter(Boolean).join(" "),L.setAttribute("role","dialog"),"floating"!==(Ge=this._introItems[this._currentStep].position)&&this._options.autoPosition&&(Ge=Jc.call(this,k,L,Ge)),De=Xl(k),_e=Xl(L),Ve=it(),Do(L,"introjs-".concat(Ge)),Ge){case"top-right-aligned":z.className="introjs-arrow bottom-right";var Yt=0;rl(De,Yt,_e,L),L.style.bottom="".concat(De.height+20,"px");break;case"top-middle-aligned":z.className="introjs-arrow bottom-middle";var Zt=De.width/2-_e.width/2;oe&&(Zt+=5),rl(De,Zt,_e,L)&&(L.style.right=null,As(De,Zt,_e,Ve,L)),L.style.bottom="".concat(De.height+20,"px");break;case"top-left-aligned":case"top":z.className="introjs-arrow bottom",As(De,oe?0:15,_e,Ve,L),L.style.bottom="".concat(De.height+20,"px");break;case"right":L.style.left="".concat(De.width+20,"px"),De.top+_e.height>Ve.height?(z.className="introjs-arrow left-bottom",L.style.top="-".concat(_e.height-De.height-20,"px")):z.className="introjs-arrow left";break;case"left":!oe&&!0===this._options.showStepNumbers&&(L.style.top="15px"),De.top+_e.height>Ve.height?(L.style.top="-".concat(_e.height-De.height-20,"px"),z.className="introjs-arrow right-bottom"):z.className="introjs-arrow right",L.style.right="".concat(De.width+20,"px");break;case"floating":z.style.display="none",L.style.left="50%",L.style.top="50%",L.style.marginLeft="-".concat(_e.width/2,"px"),L.style.marginTop="-".concat(_e.height/2,"px");break;case"bottom-right-aligned":z.className="introjs-arrow top-right",rl(De,Yt=0,_e,L),L.style.top="".concat(De.height+20,"px");break;case"bottom-middle-aligned":z.className="introjs-arrow top-middle",Zt=De.width/2-_e.width/2,oe&&(Zt+=5),rl(De,Zt,_e,L)&&(L.style.right=null,As(De,Zt,_e,Ve,L)),L.style.top="".concat(De.height+20,"px");break;default:z.className="introjs-arrow top",As(De,0,_e,Ve,L),L.style.top="".concat(De.height+20,"px")}}function Os(){S(document.querySelectorAll(".introjs-showElement"),function(L){Xo(L,/introjs-[a-zA-Z]+/g)})}function Fn(k,L){var z=document.createElement(k);L=L||{};var oe=/^(?:role|data-|aria-)/;for(var ue in L){var Re=L[ue];"style"===ue?Yo(z,Re):ue.match(oe)?z.setAttribute(ue,Re):z[ue]=Re}return z}function Ys(k,L,z){if(z){var oe=L.style.opacity||"1";Yo(L,{opacity:"0"}),window.setTimeout(function(){Yo(L,{opacity:oe})},10)}k.appendChild(L)}function ya(){return parseInt(this._currentStep+1,10)/this._introItems.length*100}function pd(){var k=document.querySelector(".introjs-disableInteraction");null===k&&(k=Fn("div",{className:"introjs-disableInteraction"}),this._targetElement.appendChild(k)),ls.call(this,k)}function fd(k){var L=this,z=Fn("div",{className:"introjs-bullets"});!1===this._options.showBullets&&(z.style.display="none");var oe=Fn("ul");oe.setAttribute("role","tablist");var ue=function(){L.goToStep(this.getAttribute("data-stepnumber"))};return S(this._introItems,function(Re,_e){var De=Re.step,Ve=Fn("li"),Ge=Fn("a");Ve.setAttribute("role","presentation"),Ge.setAttribute("role","tab"),Ge.onclick=ue,_e===k.step-1&&(Ge.className="active"),Bi(Ge),Ge.innerHTML="&nbsp;",Ge.setAttribute("data-stepnumber",De),Ve.appendChild(Ge),oe.appendChild(Ve)}),z.appendChild(oe),z}function gd(k,L){if(this._options.showBullets){var z=document.querySelector(".introjs-bullets");z.parentNode.replaceChild(fd.call(this,L),z)}}function md(k,L){this._options.showBullets&&(k.querySelector(".introjs-bullets li > a.active").className="",k.querySelector('.introjs-bullets li > a[data-stepnumber="'.concat(L.step,'"]')).className="active")}function Wi(){var k=Fn("div");k.className="introjs-progress",!1===this._options.showProgress&&(k.style.display="none");var L=Fn("div",{className:"introjs-progressbar"});return this._options.progressBarAdditionalClass&&(L.className+=" "+this._options.progressBarAdditionalClass),L.setAttribute("role","progress"),L.setAttribute("aria-valuemin",0),L.setAttribute("aria-valuemax",100),L.setAttribute("aria-valuenow",ya.call(this)),L.style.cssText="width:".concat(ya.call(this),"%;"),k.appendChild(L),k}function Uh(k){k.querySelector(".introjs-progress .introjs-progressbar").style.cssText="width:".concat(ya.call(this),"%;"),k.querySelector(".introjs-progress .introjs-progressbar").setAttribute("aria-valuenow",ya.call(this))}function $o(k){var L=this;void 0!==this._introChangeCallback&&this._introChangeCallback.call(this,k.element);var _e,De,Ve,z=this,oe=document.querySelector(".introjs-helperLayer"),ue=document.querySelector(".introjs-tooltipReferenceLayer"),Re="introjs-helperLayer";if("string"==typeof k.highlightClass&&(Re+=" ".concat(k.highlightClass)),"string"==typeof this._options.highlightClass&&(Re+=" ".concat(this._options.highlightClass)),null!==oe&&null!==ue){var Ge=ue.querySelector(".introjs-helperNumberLayer"),$e=ue.querySelector(".introjs-tooltiptext"),Yt=ue.querySelector(".introjs-tooltip-title"),Zt=ue.querySelector(".introjs-arrow"),yn=ue.querySelector(".introjs-tooltip");Ve=ue.querySelector(".introjs-skipbutton"),De=ue.querySelector(".introjs-prevbutton"),_e=ue.querySelector(".introjs-nextbutton"),oe.className=Re,yn.style.opacity=0,yn.style.display="none",Vc.call(z,k),ls.call(z,oe),ls.call(z,ue),Os(),z._lastShowElementTimer&&window.clearTimeout(z._lastShowElementTimer),z._lastShowElementTimer=window.setTimeout(function(){null!==Ge&&(Ge.innerHTML="".concat(k.step," of ").concat(L._introItems.length)),$e.innerHTML=k.intro,Yt.innerHTML=k.title,yn.style.display="block",yr.call(z,k.element,yn,Zt),md.call(z,ue,k),Uh.call(z,ue),yn.style.opacity=1,(null!=_e&&/introjs-donebutton/gi.test(_e.className)||null!=_e)&&_e.focus(),Pn.call(z,k.scrollTo,k,$e)},350)}else{var qi=Fn("div",{className:Re}),_i=Fn("div",{className:"introjs-tooltipReferenceLayer"}),li=Fn("div",{className:"introjs-arrow"}),ki=Fn("div",{className:"introjs-tooltip"}),Ki=Fn("div",{className:"introjs-tooltiptext"}),er=Fn("div",{className:"introjs-tooltip-header"}),us=Fn("h1",{className:"introjs-tooltip-title"}),fr=Fn("div");Yo(qi,{"box-shadow":"0 0 1px 2px rgba(33, 33, 33, 0.8), rgba(33, 33, 33, ".concat(z._options.overlayOpacity.toString(),") 0 0 0 5000px")}),Vc.call(z,k),ls.call(z,qi),ls.call(z,_i),Ys(this._targetElement,qi,!0),Ys(this._targetElement,_i),Ki.innerHTML=k.intro,us.innerHTML=k.title,fr.className="introjs-tooltipbuttons",!1===this._options.showButtons&&(fr.style.display="none"),er.appendChild(us),ki.appendChild(er),ki.appendChild(Ki),ki.appendChild(fd.call(this,k)),ki.appendChild(Wi.call(this));var Cr=Fn("div");!0===this._options.showStepNumbers&&(Cr.className="introjs-helperNumberLayer",Cr.innerHTML="".concat(k.step," of ").concat(this._introItems.length),ki.appendChild(Cr)),ki.appendChild(li),_i.appendChild(ki),(_e=Fn("a")).onclick=function(){z._introItems.length-1!==z._currentStep?Or.call(z):/introjs-donebutton/gi.test(_e.className)&&("function"==typeof z._introCompleteCallback&&z._introCompleteCallback.call(z,z._currentStep,"done"),fo.call(z,z._targetElement))},Bi(_e),_e.innerHTML=this._options.nextLabel,(De=Fn("a")).onclick=function(){0!==z._currentStep&&po.call(z)},Bi(De),De.innerHTML=this._options.prevLabel,Bi(Ve=Fn("a",{className:"introjs-skipbutton"})),Ve.innerHTML=this._options.skipLabel,Ve.onclick=function(){z._introItems.length-1===z._currentStep&&"function"==typeof z._introCompleteCallback&&z._introCompleteCallback.call(z,z._currentStep,"skip"),"function"==typeof z._introSkipCallback&&z._introSkipCallback.call(z),fo.call(z,z._targetElement)},er.appendChild(Ve),this._introItems.length>1&&fr.appendChild(De),fr.appendChild(_e),ki.appendChild(fr),yr.call(z,k.element,ki,li),Pn.call(this,k.scrollTo,k,ki)}var ds=z._targetElement.querySelector(".introjs-disableInteraction");ds&&ds.parentNode.removeChild(ds),k.disableInteraction&&pd.call(z),0===this._currentStep&&this._introItems.length>1?(null!=_e&&(_e.className="".concat(this._options.buttonClass," introjs-nextbutton"),_e.innerHTML=this._options.nextLabel),!0===this._options.hidePrev?(null!=De&&(De.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-hidden")),null!=_e&&Do(_e,"introjs-fullbutton")):null!=De&&(De.className="".concat(this._options.buttonClass," introjs-prevbutton introjs-disabled"))):this._introItems.length-1===this._currentStep||1===this._introItems.length?(null!=De&&(De.className="".concat(this._options.buttonClass," introjs-prevbutton")),!0===this._options.hideNext?(null!=_e&&(_e.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-hidden")),null!=De&&Do(De,"introjs-fullbutton")):null!=_e&&(!0===this._options.nextToDone?(_e.innerHTML=this._options.doneLabel,Do(_e,"".concat(this._options.buttonClass," introjs-nextbutton introjs-donebutton"))):_e.className="".concat(this._options.buttonClass," introjs-nextbutton introjs-disabled"))):(null!=De&&(De.className="".concat(this._options.buttonClass," introjs-prevbutton")),null!=_e&&(_e.className="".concat(this._options.buttonClass," introjs-nextbutton"),_e.innerHTML=this._options.nextLabel)),null!=De&&De.setAttribute("role","button"),null!=_e&&_e.setAttribute("role","button"),null!=Ve&&Ve.setAttribute("role","button"),null!=_e&&_e.focus(),function(k){var L=k.element;Do(L,"introjs-showElement");var z=od(L,"position");"absolute"!==z&&"relative"!==z&&"sticky"!==z&&"fixed"!==z&&Do(L,"introjs-relativePosition")}(k),void 0!==this._introAfterChangeCallback&&this._introAfterChangeCallback.call(this,k.element)}function _d(k){this._currentStep=k-2,void 0!==this._introItems&&Or.call(this)}function Ca(k){this._currentStepNumber=k,void 0!==this._introItems&&Or.call(this)}function Or(){var k=this;this._direction="forward",void 0!==this._currentStepNumber&&S(this._introItems,function(oe,ue){oe.step===k._currentStepNumber&&(k._currentStep=ue-1,k._currentStepNumber=void 0)}),void 0===this._currentStep?this._currentStep=0:++this._currentStep;var L=this._introItems[this._currentStep],z=!0;return void 0!==this._introBeforeChangeCallback&&(z=this._introBeforeChangeCallback.call(this,L&&L.element)),!1===z?(--this._currentStep,!1):this._introItems.length<=this._currentStep?("function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"end"),void fo.call(this,this._targetElement)):void $o.call(this,L)}function po(){if(this._direction="backward",0===this._currentStep)return!1;--this._currentStep;var k=this._introItems[this._currentStep],L=!0;if(void 0!==this._introBeforeChangeCallback&&(L=this._introBeforeChangeCallback.call(this,k&&k.element)),!1===L)return++this._currentStep,!1;$o.call(this,k)}function jf(){return this._currentStep}function sl(k){var L=void 0===k.code?k.which:k.code;if(null===L&&(L=null===k.charCode?k.keyCode:k.charCode),"Escape"!==L&&27!==L||!0!==this._options.exitOnEsc){if("ArrowLeft"===L||37===L)po.call(this);else if("ArrowRight"===L||39===L)Or.call(this);else if("Enter"===L||"NumpadEnter"===L||13===L){var z=k.target||k.srcElement;z&&z.className.match("introjs-prevbutton")?po.call(this):z&&z.className.match("introjs-skipbutton")?(this._introItems.length-1===this._currentStep&&"function"==typeof this._introCompleteCallback&&this._introCompleteCallback.call(this,this._currentStep,"skip"),fo.call(this,this._targetElement)):z&&z.getAttribute("data-stepnumber")?z.click():Or.call(this),k.preventDefault?k.preventDefault():k.returnValue=!1}}else fo.call(this,this._targetElement)}function Ql(k){if(null===k||"object"!==A(k)||void 0!==k.nodeType)return k;var L={};for(var z in k)L[z]=void 0!==window.jQuery&&k[z]instanceof window.jQuery?k[z]:Ql(k[z]);return L}function ks(k){var L=document.querySelector(".introjs-hints");return L?L.querySelectorAll(k):[]}function vd(k){var L=ks('.introjs-hint[data-step="'.concat(k,'"]'))[0];cl.call(this),L&&Do(L,"introjs-hidehint"),void 0!==this._hintCloseCallback&&this._hintCloseCallback.call(this,k)}function zf(){var k=this;S(ks(".introjs-hint"),function(z){vd.call(k,z.getAttribute("data-step"))})}function Qc(){var k=this,L=ks(".introjs-hint");L&&L.length?S(L,function(z){ll.call(k,z.getAttribute("data-step"))}):ji.call(this,this._targetElement)}function ll(k){var L=ks('.introjs-hint[data-step="'.concat(k,'"]'))[0];L&&Xo(L,/introjs-hidehint/g)}function Xf(){var k=this;S(ks(".introjs-hint"),function(z){bd.call(k,z.getAttribute("data-step"))}),s.off(document,"click",cl,this,!1),s.off(window,"resize",Ls,this,!0),this._hintsAutoRefreshFunction&&s.off(window,"scroll",this._hintsAutoRefreshFunction,this,!0)}function bd(k){var L=ks('.introjs-hint[data-step="'.concat(k,'"]'))[0];L&&L.parentNode.removeChild(L)}function Gh(){var k=this,L=this,z=document.querySelector(".introjs-hints");null===z&&(z=Fn("div",{className:"introjs-hints"}));S(this._introItems,function(ue,Re){if(!document.querySelector('.introjs-hint[data-step="'.concat(Re,'"]'))){var _e=Fn("a",{className:"introjs-hint"});Bi(_e),_e.onclick=function(Re){return function(_e){var De=_e||window.event;De.stopPropagation&&De.stopPropagation(),null!==De.cancelBubble&&(De.cancelBubble=!0),nn.call(L,Re)}}(Re),ue.hintAnimation||Do(_e,"introjs-hint-no-anim"),tl(ue.element)&&Do(_e,"introjs-fixedhint");var De=Fn("div",{className:"introjs-hint-dot"}),Ve=Fn("div",{className:"introjs-hint-pulse"});_e.appendChild(De),_e.appendChild(Ve),_e.setAttribute("data-step",Re),ue.targetElement=ue.element,ue.element=_e,Ns.call(k,ue.hintPosition,_e,ue.targetElement),z.appendChild(_e)}}),document.body.appendChild(z),void 0!==this._hintsAddedCallback&&this._hintsAddedCallback.call(this),this._options.hintAutoRefreshInterval>=0&&(this._hintsAutoRefreshFunction=function(k,L){var oe,z=this;return function(){for(var ue=arguments.length,Re=new Array(ue),_e=0;_e<ue;_e++)Re[_e]=arguments[_e];clearTimeout(oe),oe=setTimeout(function(){k.apply(z,Re)},L)}}(function(){return Ls.call(k)},this._options.hintAutoRefreshInterval),s.on(window,"scroll",this._hintsAutoRefreshFunction,this,!0))}function Ns(k,L,z){var oe=L.style,ue=Xl.call(this,z);switch(k){default:case"top-left":oe.left="".concat(ue.left,"px"),oe.top="".concat(ue.top,"px");break;case"top-right":oe.left="".concat(ue.left+ue.width-20,"px"),oe.top="".concat(ue.top,"px");break;case"bottom-left":oe.left="".concat(ue.left,"px"),oe.top="".concat(ue.top+ue.height-20,"px");break;case"bottom-right":oe.left="".concat(ue.left+ue.width-20,"px"),oe.top="".concat(ue.top+ue.height-20,"px");break;case"middle-left":oe.left="".concat(ue.left,"px"),oe.top="".concat(ue.top+(ue.height-20)/2,"px");break;case"middle-right":oe.left="".concat(ue.left+ue.width-20,"px"),oe.top="".concat(ue.top+(ue.height-20)/2,"px");break;case"middle-middle":oe.left="".concat(ue.left+(ue.width-20)/2,"px"),oe.top="".concat(ue.top+(ue.height-20)/2,"px");break;case"bottom-middle":oe.left="".concat(ue.left+(ue.width-20)/2,"px"),oe.top="".concat(ue.top+ue.height-20,"px");break;case"top-middle":oe.left="".concat(ue.left+(ue.width-20)/2,"px"),oe.top="".concat(ue.top,"px")}}function nn(k){var L=document.querySelector('.introjs-hint[data-step="'.concat(k,'"]')),z=this._introItems[k];void 0!==this._hintClickCallback&&this._hintClickCallback.call(this,L,z,k);var oe=cl.call(this);if(parseInt(oe,10)!==k){var ue=Fn("div",{className:"introjs-tooltip"}),Re=Fn("div"),_e=Fn("div"),De=Fn("div");ue.onclick=function($e){$e.stopPropagation?$e.stopPropagation():$e.cancelBubble=!0},Re.className="introjs-tooltiptext";var Ve=Fn("p");if(Ve.innerHTML=z.hint,Re.appendChild(Ve),this._options.hintShowButton){var Ge=Fn("a");Ge.className=this._options.buttonClass,Ge.setAttribute("role","button"),Ge.innerHTML=this._options.hintButtonLabel,Ge.onclick=vd.bind(this,k),Re.appendChild(Ge)}_e.className="introjs-arrow",ue.appendChild(_e),ue.appendChild(Re),this._currentStep=L.getAttribute("data-step"),De.className="introjs-tooltipReferenceLayer introjs-hintReference",De.setAttribute("data-step",L.getAttribute("data-step")),ls.call(this,De),De.appendChild(ue),document.body.appendChild(De),yr.call(this,L,ue,_e,!0)}}function cl(){var k=document.querySelector(".introjs-hintReference");if(k){var L=k.getAttribute("data-step");return k.parentNode.removeChild(k),L}}function ji(k){var L=this;if(this._introItems=[],this._options.hints)S(this._options.hints,function(oe){var ue=Ql(oe);"string"==typeof ue.element&&(ue.element=document.querySelector(ue.element)),ue.hintPosition=ue.hintPosition||L._options.hintPosition,ue.hintAnimation=ue.hintAnimation||L._options.hintAnimation,null!==ue.element&&L._introItems.push(ue)});else{var z=k.querySelectorAll("*[data-hint]");if(!z||!z.length)return!1;S(z,function(oe){var ue=oe.getAttribute("data-hintanimation");ue=ue?"true"===ue:L._options.hintAnimation,L._introItems.push({element:oe,hint:oe.getAttribute("data-hint"),hintPosition:oe.getAttribute("data-hintposition")||L._options.hintPosition,hintAnimation:ue,tooltipClass:oe.getAttribute("data-tooltipclass"),position:oe.getAttribute("data-position")||L._options.tooltipPosition})})}Gh.call(this),s.on(document,"click",cl,this,!1),s.on(window,"resize",Ls,this,!0)}function Ls(){var k=this;S(this._introItems,function(L){var z=L.targetElement;void 0!==z&&Ns.call(k,L.hintPosition,L.element,z)})}rs({target:"Array",proto:!0,forced:!Gf},{splice:function(L,z){var De,Ve,Ge,$e,Yt,Zt,oe=Vt(this),ue=Kr(oe),Re=Uo(L,ue),_e=arguments.length;if(0===_e?De=Ve=0:1===_e?(De=0,Ve=ue-Re):(De=_e-2,Ve=t_(ol(on(z),0),ue-Re)),ue+De-Ve>Kc)throw Wf(Hh);for(Ge=Hl(oe,Ve),$e=0;$e<Ve;$e++)(Yt=Re+$e)in oe&&Ju(Ge,$e,oe[Yt]);if(Ge.length=Ve,De<Ve){for($e=Re;$e<ue-Ve;$e++)Zt=$e+De,(Yt=$e+Ve)in oe?oe[Zt]=oe[Yt]:delete oe[Zt];for($e=ue;$e>ue-Ve+De;$e--)delete oe[$e-1]}else if(De>Ve)for($e=ue-Ve;$e>Re;$e--)Zt=$e+De-1,(Yt=$e+Ve-1)in oe?oe[Zt]=oe[Yt]:delete oe[Zt];for($e=0;$e<De;$e++)oe[$e+Re]=arguments[$e+2];return oe.length=ue-Ve+De,Ge}});var ul=Math.floor,$s=function(k,L){var z=k.length,oe=ul(z/2);return z<8?Zl(k,L):ti(k,$s(_a(k,0,oe),L),$s(_a(k,oe),L),L)},Zl=function(k,L){for(var ue,Re,z=k.length,oe=1;oe<z;){for(Re=oe,ue=k[oe];Re&&L(k[Re-1],ue)>0;)k[Re]=k[--Re];Re!==oe++&&(k[Re]=ue)}return k},ti=function(k,L,z,oe){for(var ue=L.length,Re=z.length,_e=0,De=0;_e<ue||De<Re;)k[_e+De]=_e<ue&&De<Re?oe(L[_e],z[De])<=0?L[_e++]:z[De++]:_e<ue?L[_e++]:z[De++];return k},Ea=$s,Wh=He.match(/firefox\/(\d+)/i),Yf=!!Wh&&+Wh[1],yd=/MSIE|Trident/.test(He),$f=He.match(/AppleWebKit\/(\d+)\./),jh=!!$f&&+$f[1],We=[],zh=Z(We.sort),Xh=Z(We.push),n_=_(function(){We.sort(void 0)}),Kf=_(function(){We.sort(null)}),Yh=dd("sort"),Cd=!_(function(){if(tn)return tn<70;if(!(Yf&&Yf>3)){if(yd)return!0;if(jh)return jh<603;var L,z,oe,ue,k="";for(L=65;L<76;L++){switch(z=String.fromCharCode(L),L){case 66:case 69:case 70:case 72:oe=3;break;case 68:case 71:oe=4;break;default:oe=2}for(ue=0;ue<47;ue++)We.push({k:z+ue,v:oe})}for(We.sort(function(Re,_e){return _e.v-Re.v}),ue=0;ue<We.length;ue++)z=We[ue].k.charAt(0),k.charAt(k.length-1)!==z&&(k+=z);return"DGBEFHACIJK"!==k}});function Jf(k){var L=this,z=k.querySelectorAll("*[data-intro]"),oe=[];if(this._options.steps)S(this._options.steps,function(Ge){var $e=Ql(Ge);if($e.step=oe.length+1,$e.title=$e.title||"","string"==typeof $e.element&&($e.element=document.querySelector($e.element)),null==$e.element){var Yt=document.querySelector(".introjsFloatingElement");null===Yt&&(Yt=Fn("div",{className:"introjsFloatingElement"}),document.body.appendChild(Yt)),$e.element=Yt,$e.position="floating"}$e.position=$e.position||L._options.tooltipPosition,$e.scrollTo=$e.scrollTo||L._options.scrollTo,void 0===$e.disableInteraction&&($e.disableInteraction=L._options.disableInteraction),null!==$e.element&&oe.push($e)});else{var Re;if(z.length<1)return[];S(z,function(Ge){if((!L._options.group||Ge.getAttribute("data-intro-group")===L._options.group)&&"none"!==Ge.style.display){var $e=parseInt(Ge.getAttribute("data-step"),10);Re=Ge.hasAttribute("data-disable-interaction")?!!Ge.getAttribute("data-disable-interaction"):L._options.disableInteraction,$e>0&&(oe[$e-1]={element:Ge,title:Ge.getAttribute("data-title")||"",intro:Ge.getAttribute("data-intro"),step:parseInt(Ge.getAttribute("data-step"),10),tooltipClass:Ge.getAttribute("data-tooltipclass"),highlightClass:Ge.getAttribute("data-highlightclass"),position:Ge.getAttribute("data-position")||L._options.tooltipPosition,scrollTo:Ge.getAttribute("data-scrollto")||L._options.scrollTo,disableInteraction:Re})}});var _e=0;S(z,function(Ge){if((!L._options.group||Ge.getAttribute("data-intro-group")===L._options.group)&&null===Ge.getAttribute("data-step")){for(;void 0!==oe[_e];)_e++;Re=Ge.hasAttribute("data-disable-interaction")?!!Ge.getAttribute("data-disable-interaction"):L._options.disableInteraction,oe[_e]={element:Ge,title:Ge.getAttribute("data-title")||"",intro:Ge.getAttribute("data-intro"),step:_e+1,tooltipClass:Ge.getAttribute("data-tooltipclass"),highlightClass:Ge.getAttribute("data-highlightclass"),position:Ge.getAttribute("data-position")||L._options.tooltipPosition,scrollTo:Ge.getAttribute("data-scrollto")||L._options.scrollTo,disableInteraction:Re}}})}for(var De=[],Ve=0;Ve<oe.length;Ve++)oe[Ve]&&De.push(oe[Ve]);return(oe=De).sort(function(Ge,$e){return Ge.step-$e.step}),oe}function $h(k){var L=document.querySelector(".introjs-tooltipReferenceLayer"),z=document.querySelector(".introjs-helperLayer"),oe=document.querySelector(".introjs-disableInteraction");if(ls.call(this,z),ls.call(this,L),ls.call(this,oe),k&&(this._introItems=Jf.call(this,this._targetElement),gd.call(this,L,this._introItems[this._currentStep]),Uh.call(this,L)),null!=this._currentStep){var ue=document.querySelector(".introjs-arrow"),Re=document.querySelector(".introjs-tooltip");Re&&ue&&yr.call(this,this._introItems[this._currentStep].element,Re,ue)}return Ls.call(this),this}function ql(){$h.call(this)}function cs(k,L){if(k&&k.parentElement){var z=k.parentElement;L?(Yo(k,{opacity:"0"}),window.setTimeout(function(){try{z.removeChild(k)}catch(oe){}},500)):z.removeChild(k)}}function fo(k,L){var z=!0;if(void 0!==this._introBeforeExitCallback&&(z=this._introBeforeExitCallback.call(this)),L||!1!==z){var oe=k.querySelectorAll(".introjs-overlay");oe&&oe.length&&S(oe,function(Ve){return cs(Ve)}),cs(k.querySelector(".introjs-helperLayer"),!0),cs(k.querySelector(".introjs-tooltipReferenceLayer")),cs(k.querySelector(".introjs-disableInteraction")),cs(document.querySelector(".introjsFloatingElement")),Os(),s.off(window,"keydown",sl,this,!0),s.off(window,"resize",ql,this,!0),void 0!==this._introExitCallback&&this._introExitCallback.call(this),this._currentStep=void 0}}function sr(k){var L=this,z=Fn("div",{className:"introjs-overlay"});return Yo(z,{top:0,bottom:0,left:0,right:0,position:"fixed"}),k.appendChild(z),!0===this._options.exitOnOverlayClick&&(Yo(z,{cursor:"pointer"}),z.onclick=function(){fo.call(L,k)}),!0}function Ta(k){void 0!==this._introStartCallback&&this._introStartCallback.call(this,k);var L=Jf.call(this,k);return 0===L.length||(this._introItems=L,sr.call(this,k)&&(Or.call(this),this._options.keyboardNavigation&&s.on(window,"keydown",sl,this,!0),s.on(window,"resize",ql,this,!0))),!1}function ec(k){this._targetElement=k,this._introItems=[],this._options={nextLabel:"Next",prevLabel:"Back",skipLabel:"\xd7",doneLabel:"Done",hidePrev:!1,hideNext:!1,nextToDone:!0,tooltipPosition:"bottom",tooltipClass:"",group:"",highlightClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!1,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,scrollTo:"element",scrollPadding:30,overlayOpacity:.5,autoPosition:!0,positionPrecedence:["bottom","top","right","left"],disableInteraction:!1,helperElementPadding:10,hintPosition:"top-middle",hintButtonLabel:"Got it",hintShowButton:!0,hintAutoRefreshInterval:10,hintAnimation:!0,buttonClass:"introjs-button",progressBarAdditionalClass:!1}}rs({target:"Array",proto:!0,forced:n_||!Kf||!Yh||!Cd},{sort:function(L){void 0!==L&&Xe(L);var z=Vt(this);if(Cd)return void 0===L?zh(z):zh(z,L);var Re,_e,oe=[],ue=Kr(z);for(_e=0;_e<ue;_e++)_e in z&&Xh(oe,z[_e]);for(Ea(oe,function(k){return function(L,z){return void 0===z?-1:void 0===L?1:void 0!==k?+k(L,z)||0:yi(L)>yi(z)?1:-1}}(L)),Re=oe.length,_e=0;_e<Re;)z[_e]=oe[_e++];for(;_e<ue;)delete z[_e++];return z}});var qc=function k(L){var z;if("object"===A(L))z=new ec(L);else if("string"==typeof L){var oe=document.querySelector(L);if(!oe)throw new Error("There is no element with given selector.");z=new ec(oe)}else z=new ec(document.body);return k.instances[y(z,"introjs-instance")]=z,z};return qc.version="4.3.0",qc.instances={},qc.fn=ec.prototype={clone:function(){return new ec(this)},setOption:function(L,z){return this._options[L]=z,this},setOptions:function(L){return this._options=function(k,L){var oe,z={};for(oe in k)z[oe]=k[oe];for(oe in L)z[oe]=L[oe];return z}(this._options,L),this},start:function(){return Ta.call(this,this._targetElement),this},goToStep:function(L){return _d.call(this,L),this},addStep:function(L){return this._options.steps||(this._options.steps=[]),this._options.steps.push(L),this},addSteps:function(L){if(L.length){for(var z=0;z<L.length;z++)this.addStep(L[z]);return this}},goToStepNumber:function(L){return Ca.call(this,L),this},nextStep:function(){return Or.call(this),this},previousStep:function(){return po.call(this),this},currentStep:function(){return jf.call(this)},exit:function(L){return fo.call(this,this._targetElement,L),this},refresh:function(L){return $h.call(this,L),this},onbeforechange:function(L){if("function"!=typeof L)throw new Error("Provided callback for onbeforechange was not a function");return this._introBeforeChangeCallback=L,this},onchange:function(L){if("function"!=typeof L)throw new Error("Provided callback for onchange was not a function.");return this._introChangeCallback=L,this},onafterchange:function(L){if("function"!=typeof L)throw new Error("Provided callback for onafterchange was not a function");return this._introAfterChangeCallback=L,this},oncomplete:function(L){if("function"!=typeof L)throw new Error("Provided callback for oncomplete was not a function.");return this._introCompleteCallback=L,this},onhintsadded:function(L){if("function"!=typeof L)throw new Error("Provided callback for onhintsadded was not a function.");return this._hintsAddedCallback=L,this},onhintclick:function(L){if("function"!=typeof L)throw new Error("Provided callback for onhintclick was not a function.");return this._hintClickCallback=L,this},onhintclose:function(L){if("function"!=typeof L)throw new Error("Provided callback for onhintclose was not a function.");return this._hintCloseCallback=L,this},onstart:function(L){if("function"!=typeof L)throw new Error("Provided callback for onstart was not a function.");return this._introStartCallback=L,this},onexit:function(L){if("function"!=typeof L)throw new Error("Provided callback for onexit was not a function.");return this._introExitCallback=L,this},onskip:function(L){if("function"!=typeof L)throw new Error("Provided callback for onskip was not a function.");return this._introSkipCallback=L,this},onbeforeexit:function(L){if("function"!=typeof L)throw new Error("Provided callback for onbeforeexit was not a function.");return this._introBeforeExitCallback=L,this},addHints:function(){return ji.call(this,this._targetElement),this},hideHint:function(L){return vd.call(this,L),this},hideHints:function(){return zf.call(this),this},showHint:function(L){return ll.call(this,L),this},showHints:function(){return Qc.call(this),this},removeHints:function(){return Xf.call(this),this},removeHint:function(L){return bd().call(this,L),this},showHintDialog:function(L){return nn.call(this,L),this}},qc}()},77972:(T,A,m)=>{"use strict";function y(r){return"function"==typeof r}let S=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else S&&console.log("RxJS: Back to a better error behavior. Thank you. <3");S=r},get useDeprecatedSynchronousErrorHandling(){return S}};function o(r){setTimeout(()=>{throw r},0)}const l={closed:!0,next(r){},error(r){if(s.useDeprecatedSynchronousErrorHandling)throw r;o(r)},complete(){}},u=Array.isArray||(r=>r&&"number"==typeof r.length);function h(r){return null!==r&&"object"==typeof r}const b=(()=>{function r(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((e,n)=>`${n+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r})();class D{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:a,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof D)e.remove(this);else if(null!==e)for(let d=0;d<e.length;++d)e[d].remove(this);if(y(a)){n&&(this._unsubscribe=void 0);try{a.call(this)}catch(d){t=d instanceof b?x(d.errors):[d]}}if(u(c)){let d=-1,p=c.length;for(;++d<p;){const f=c[d];if(h(f))try{f.unsubscribe()}catch(v){t=t||[],v instanceof b?t=t.concat(x(v.errors)):t.push(v)}}}if(t)throw new b(t)}add(t){let e=t;if(!t)return D.EMPTY;switch(typeof t){case"function":e=new D(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof D)){const c=e;e=new D,e._subscriptions=[c]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof D){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const a=this._subscriptions;return null===a?this._subscriptions=[e]:a.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var r;function x(r){return r.reduce((t,e)=>t.concat(e instanceof b?e.errors:e),[])}D.EMPTY=((r=new D).closed=!0,r);const G="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class F extends D{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l;break;case 1:if(!t){this.destination=l;break}if("object"==typeof t){t instanceof F?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new q(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new q(this,t,e,n)}}[G](){return this}static create(t,e,n){const a=new F(t,e,n);return a.syncErrorThrowable=!1,a}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class q extends F{constructor(t,e,n,a){super(),this._parentSubscriber=t;let c,d=this;y(e)?c=e:e&&(c=e.next,n=e.error,a=e.complete,e!==l&&(d=Object.create(e),y(d.unsubscribe)&&this.add(d.unsubscribe.bind(d)),d.unsubscribe=this.unsubscribe.bind(this))),this._context=d,this._next=c,this._error=n,this._complete=a}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(a){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=a,t.syncErrorThrown=!0,!0):(o(a),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const ae="function"==typeof Symbol&&Symbol.observable||"@@observable";function ie(r){return r}let Z=(()=>{class r{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const n=new r;return n.source=this,n.operator=e,n}subscribe(e,n,a){const{operator:c}=this,d=function(r,t,e){if(r){if(r instanceof F)return r;if(r[G])return r[G]()}return r||t||e?new F(r,t,e):new F(l)}(e,n,a);if(d.add(c?c.call(d,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!d.syncErrorThrowable?this._subscribe(d):this._trySubscribe(d)),s.useDeprecatedSynchronousErrorHandling&&d.syncErrorThrowable&&(d.syncErrorThrowable=!1,d.syncErrorThrown))throw d.syncErrorValue;return d}_trySubscribe(e){try{return this._subscribe(e)}catch(n){s.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=n),function(r){for(;r;){const{closed:t,destination:e,isStopped:n}=r;if(t||n)return!1;r=e&&e instanceof F?e:null}return!0}(e)?e.error(n):console.warn(n)}}forEach(e,n){return new(n=ee(n))((a,c)=>{let d;d=this.subscribe(p=>{try{e(p)}catch(f){c(f),d&&d.unsubscribe()}},c,a)})}_subscribe(e){const{source:n}=this;return n&&n.subscribe(e)}[ae](){return this}pipe(...e){return 0===e.length?this:function(r){return 0===r.length?ie:1===r.length?r[0]:function(e){return r.reduce((n,a)=>a(n),e)}}(e)(this)}toPromise(e){return new(e=ee(e))((n,a)=>{let c;this.subscribe(d=>c=d,d=>a(d),()=>n(c))})}}return r.create=t=>new r(t),r})();function ee(r){if(r||(r=s.Promise||Promise),!r)throw new Error("no Promise impl found");return r}const H=(()=>{function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r})();class de extends D{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class J extends F{constructor(t){super(t),this.destination=t}}let B=(()=>{class r extends Z{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[G](){return new J(this)}lift(e){const n=new re(this,this);return n.operator=e,n}next(e){if(this.closed)throw new H;if(!this.isStopped){const{observers:n}=this,a=n.length,c=n.slice();for(let d=0;d<a;d++)c[d].next(e)}}error(e){if(this.closed)throw new H;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:n}=this,a=n.length,c=n.slice();for(let d=0;d<a;d++)c[d].error(e);this.observers.length=0}complete(){if(this.closed)throw new H;this.isStopped=!0;const{observers:e}=this,n=e.length,a=e.slice();for(let c=0;c<n;c++)a[c].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new H;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new H;return this.hasError?(e.error(this.thrownError),D.EMPTY):this.isStopped?(e.complete(),D.EMPTY):(this.observers.push(e),new de(this,e))}asObservable(){const e=new Z;return e.source=this,e}}return r.create=(t,e)=>new re(t,e),r})();class re extends B{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):D.EMPTY}}function ce(r){return r&&"function"==typeof r.schedule}function Ee(r,t){return function(n){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new pe(r,t))}}class pe{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new ye(t,this.project,this.thisArg))}}class ye extends F{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Pe=r=>t=>{for(let e=0,n=r.length;e<n&&!t.closed;e++)t.next(r[e]);t.complete()},He="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Ke=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function Tt(r){return!!r&&"function"!=typeof r.subscribe&&"function"==typeof r.then}const kt=r=>{if(r&&"function"==typeof r[ae])return(r=>t=>{const e=r[ae]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)})(r);if(Ke(r))return Pe(r);if(Tt(r))return(r=>t=>(r.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,o),t))(r);if(r&&"function"==typeof r[He])return(r=>t=>{const e=r[He]();for(;;){let n;try{n=e.next()}catch(a){return t.error(a),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add(()=>{e.return&&e.return()}),t})(r);{const e=`You provided ${h(r)?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function Gn(r,t){return new Z(e=>{const n=new D;let a=0;return n.add(t.schedule(function(){a!==r.length?(e.next(r[a++]),e.closed||n.add(this.schedule())):e.complete()})),n})}function vn(r,t){return t?function(r,t){if(null!=r){if(function(r){return r&&"function"==typeof r[ae]}(r))return function(r,t){return new Z(e=>{const n=new D;return n.add(t.schedule(()=>{const a=r[ae]();n.add(a.subscribe({next(c){n.add(t.schedule(()=>e.next(c)))},error(c){n.add(t.schedule(()=>e.error(c)))},complete(){n.add(t.schedule(()=>e.complete()))}}))})),n})}(r,t);if(Tt(r))return function(r,t){return new Z(e=>{const n=new D;return n.add(t.schedule(()=>r.then(a=>{n.add(t.schedule(()=>{e.next(a),n.add(t.schedule(()=>e.complete()))}))},a=>{n.add(t.schedule(()=>e.error(a)))}))),n})}(r,t);if(Ke(r))return Gn(r,t);if(function(r){return r&&"function"==typeof r[He]}(r)||"string"==typeof r)return function(r,t){if(!r)throw new Error("Iterable cannot be null");return new Z(e=>{const n=new D;let a;return n.add(()=>{a&&"function"==typeof a.return&&a.return()}),n.add(t.schedule(()=>{a=r[He](),n.add(t.schedule(function(){if(e.closed)return;let c,d;try{const p=a.next();c=p.value,d=p.done}catch(p){return void e.error(p)}d?e.complete():(e.next(c),this.schedule())}))})),n})}(r,t)}throw new TypeError((null!==r&&typeof r||r)+" is not observable")}(r,t):r instanceof Z?r:new Z(kt(r))}class Xe extends F{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ln extends F{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function En(r,t){if(t.closed)return;if(r instanceof Z)return r.subscribe(t);let e;try{e=kt(r)(t)}catch(n){t.error(n)}return e}function zn(r,t,e=Number.POSITIVE_INFINITY){return"function"==typeof t?n=>n.pipe(zn((a,c)=>vn(r(a,c)).pipe(Ee((d,p)=>t(a,d,c,p))),e)):("number"==typeof t&&(e=t),n=>n.lift(new Vi(r,e)))}class Vi{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new ke(t,this.project,this.concurrent))}}class ke extends ln{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(a){return void this.destination.error(a)}this.active++,this._innerSub(e)}_innerSub(t){const e=new Xe(this),n=this.destination;n.add(e);const a=En(t,e);a!==e&&n.add(a)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function dn(r=Number.POSITIVE_INFINITY){return zn(ie,r)}function mn(r,t){return t?Gn(r,t):new Z(Pe(r))}function Vt(...r){let t=Number.POSITIVE_INFINITY,e=null,n=r[r.length-1];return ce(n)?(e=r.pop(),r.length>1&&"number"==typeof r[r.length-1]&&(t=r.pop())):"number"==typeof n&&(t=r.pop()),null===e&&1===r.length&&r[0]instanceof Z?r[0]:dn(t)(mn(r,e))}function _n(){return function(t){return t.lift(new Ln(t))}}class Ln{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const a=new Fi(t,n),c=e.subscribe(a);return a.closed||(a.connection=n.connect()),c}}class Fi extends F{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,a=t._connection;this.connection=null,a&&(!n||a===n)&&a.unsubscribe()}}class xn extends Z{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new D,t.add(this.source.subscribe(new Rt(this.getSubject(),this))),t.closed&&(this._connection=null,t=D.EMPTY)),t}refCount(){return _n()(this)}}const wt=(()=>{const r=xn.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}})();class Rt extends J{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function et(){return new B}function Dt(){return r=>_n()(function(r,t){return function(n){let a;a="function"==typeof r?r:function(){return r};const c=Object.create(n,wt);return c.source=n,c.subjectFactory=a,c}}(et)(r))}function Xt(r){for(let t in r)if(r[t]===Xt)return t;throw Error("Could not find renamed property on target object.")}function $t(r,t){for(const e in t)t.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=t[e])}function tt(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(tt).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Qt(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const hn=Xt({__forward_ref__:Xt});function vt(r){return r.__forward_ref__=vt,r.toString=function(){return tt(this())},r}function Et(r){return no(r)?r():r}function no(r){return"function"==typeof r&&r.hasOwnProperty(hn)&&r.__forward_ref__===vt}class Rr extends Error{constructor(t,e){super(function(r,t){return`${r?`NG0${r}: `:""}${t}`}(t,e)),this.code=t}}function rn(r){return"string"==typeof r?r:null==r?"":String(r)}function Ir(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():rn(r)}function js(r,t){const e=t?` in ${t}`:"";throw new Rr("201",`No provider for ${Ir(r)} found${e}`)}function $r(r,t){null==r&&function(r,t,e,n){throw new Error(`ASSERTION ERROR: ${r}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,r,null,"!=")}function mt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Mt(r){return{providers:r.providers||[],imports:r.imports||[]}}function Ho(r){return Gu(r,Ol)||Gu(r,Wu)}function Gu(r,t){return r.hasOwnProperty(t)?r[t]:null}function gh(r){return r&&(r.hasOwnProperty(ua)||r.hasOwnProperty(Mf))?r[ua]:null}const Ol=Xt({\u0275prov:Xt}),ua=Xt({\u0275inj:Xt}),Wu=Xt({ngInjectableDef:Xt}),Mf=Xt({ngInjectorDef:Xt});var on=(()=>((on=on||{})[on.Default=0]="Default",on[on.Host=1]="Host",on[on.Self=2]="Self",on[on.SkipSelf=4]="SkipSelf",on[on.Optional=8]="Optional",on))();let kl;function Uo(r){const t=kl;return kl=r,t}function mh(r,t,e){const n=Ho(r);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&on.Optional?null:void 0!==t?t:void js(tt(r),"Injector")}function Kr(r){return{toString:r}.toString()}var ro=(()=>((ro=ro||{})[ro.OnPush=0]="OnPush",ro[ro.Default=1]="Default",ro))(),$i=(()=>(($i=$i||{})[$i.Emulated=0]="Emulated",$i[$i.None=2]="None",$i[$i.ShadowDom=3]="ShadowDom",$i))();const zu="undefined"!=typeof globalThis&&globalThis,Ac="undefined"!=typeof window&&window,Af="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ri=zu||"undefined"!=typeof global&&global||Ac||Af,Ka={},fi=[],Ja=Xt({\u0275cmp:Xt}),ns=Xt({\u0275dir:Xt}),is=Xt({\u0275pipe:Xt}),Xu=Xt({\u0275mod:Xt}),_h=Xt({\u0275loc:Xt}),Eo=Xt({\u0275fac:Xt}),da=Xt({__NG_ELEMENT_ID__:Xt});let Of=0;function _t(r){return Kr(()=>{const e={},n={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===ro.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||fi,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||$i.Emulated,id:"c",styles:r.styles||fi,_:null,setInput:null,schemas:r.schemas||null,tView:null},a=r.directives,c=r.features,d=r.pipes;return n.id+=Of++,n.inputs=Go(r.inputs,e),n.outputs=Go(r.outputs),c&&c.forEach(p=>p(n)),n.directiveDefs=a?()=>("function"==typeof a?a():a).map(vh):null,n.pipeDefs=d?()=>("function"==typeof d?d():d).map(Yu):null,n})}function vh(r){return Zi(r)||function(r){return r[ns]||null}(r)}function Yu(r){return function(r){return r[is]||null}(r)}const Nl={};function Lt(r){return Kr(()=>{const t={type:r.type,bootstrap:r.bootstrap||fi,declarations:r.declarations||fi,imports:r.imports||fi,exports:r.exports||fi,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(Nl[r.id]=r.type),t})}function Go(r,t){if(null==r)return Ka;const e={};for(const n in r)if(r.hasOwnProperty(n)){let a=r[n],c=a;Array.isArray(a)&&(c=a[1],a=a[0]),e[a]=n,t&&(t[a]=c)}return e}const Ce=_t;function gi(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Zi(r){return r[Ja]||null}function oo(r,t){const e=r[Xu]||null;if(!e&&!0===t)throw new Error(`Type ${tt(r)} does not have '\u0275mod' property.`);return e}function zo(r){return Array.isArray(r)&&"object"==typeof r[1]}function lo(r){return Array.isArray(r)&&!0===r[1]}function Ku(r){return 0!=(8&r.flags)}function Ds(r){return 2==(2&r.flags)}function Bl(r){return 1==(1&r.flags)}function Jr(r){return null!==r.template}function Vl(r){return 0!=(512&r[2])}function ga(r,t){return r.hasOwnProperty(Eo)?r[Eo]:null}class Hl{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function cn(){return Ul}function Ul(r){return r.type.prototype.ngOnChanges&&(r.setInput=Dh),Sh}function Sh(){const r=qu(this),t=null==r?void 0:r.current;if(t){const e=r.previous;if(e===Ka)r.previous=t;else for(let n in t)e[n]=t[n];r.current=null,this.ngOnChanges(t)}}function Dh(r,t,e,n){const a=qu(r)||function(r,t){return r[Zu]=t}(r,{previous:Ka,current:null}),c=a.current||(a.current={}),d=a.previous,p=this.declaredInputs[e],f=d[p];c[p]=new Hl(f&&f.currentValue,t,d===Ka),r[n]=t}cn.ngInherit=!0;const Zu="__ngSimpleChanges__";function qu(r){return r[Zu]||null}const Rh="http://www.w3.org/2000/svg";let Ms;function Hi(r){return!!r.listen}const zl={createRenderer:(r,t)=>void 0!==Ms?Ms:"undefined"!=typeof document?document:void 0};function Ui(r){for(;Array.isArray(r);)r=r[0];return r}function Rs(r,t){return Ui(t[r])}function co(r,t){return Ui(t[r.index])}function Bc(r,t){return r.data[t]}function ma(r,t){return r[t]}function uo(r,t){const e=t[r];return zo(e)?e:e[0]}function _a(r){return 4==(4&r[2])}function Xs(r){return 128==(128&r[2])}function Is(r,t){return null==t?null:r[t]}function id(r){r[18]=0}function rd(r,t){r[5]+=t;let e=r,n=r[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const gn={lFrame:ls(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function xh(){return gn.bindingsEnabled}function it(){return gn.lFrame.lView}function $n(){return gn.lFrame.tView}function Pn(r){return gn.lFrame.contextLView=r,r[8]}function Bi(){let r=va();for(;null!==r&&64===r.type;)r=r.parent;return r}function va(){return gn.lFrame.currentTNode}function os(r,t){const e=gn.lFrame;e.currentTNode=r,e.isParent=t}function Hc(){return gn.lFrame.isParent}function tl(){gn.lFrame.isParent=!1}function nl(){return gn.isInCheckNoChangesMode}function Uc(r){gn.isInCheckNoChangesMode=r}function br(){const r=gn.lFrame;let t=r.bindingRootIndex;return-1===t&&(t=r.bindingRootIndex=r.tView.bindingStartIndex),t}function ss(){return gn.lFrame.bindingIndex}function il(){return gn.lFrame.bindingIndex++}function Mo(r){const t=gn.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,e}function Hf(r,t){const e=gn.lFrame;e.bindingIndex=e.bindingRootIndex=r,Wc(t)}function Wc(r){gn.lFrame.currentDirectiveIndex=r}function as(r){const t=gn.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}function Oh(){return gn.lFrame.currentQueryIndex}function ho(r){gn.lFrame.currentQueryIndex=r}function kh(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function Nh(r,t,e){if(e&on.SkipSelf){let a=t,c=r;for(;!(a=a.parent,null!==a||e&on.Host||(a=kh(c),null===a||(c=c[15],10&a.type))););if(null===a)return!1;t=a,r=c}const n=gn.lFrame=Yo();return n.currentTNode=t,n.lView=r,!0}function Xo(r){const t=Yo(),e=r[1];gn.lFrame=t,t.currentTNode=e.firstChild,t.lView=r,t.tView=e,t.contextLView=r,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Yo(){const r=gn.lFrame,t=null===r?null:r.child;return null===t?ls(r):t}function ls(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function jc(){const r=gn.lFrame;return gn.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const zc=jc;function Xc(){const r=jc();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function pr(){return gn.lFrame.selectedIndex}function Ro(r){gn.lFrame.selectedIndex=r}function Gi(){const r=gn.lFrame;return Bc(r.tView,r.selectedIndex)}function Ar(){gn.lFrame.currentNamespace=Rh}function Yc(r,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const c=r.data[e].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:p,ngAfterViewInit:f,ngAfterViewChecked:v,ngOnDestroy:C}=c;d&&(r.contentHooks||(r.contentHooks=[])).push(-e,d),p&&((r.contentHooks||(r.contentHooks=[])).push(e,p),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(e,p)),f&&(r.viewHooks||(r.viewHooks=[])).push(-e,f),v&&((r.viewHooks||(r.viewHooks=[])).push(e,v),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(e,v)),null!=C&&(r.destroyHooks||(r.destroyHooks=[])).push(e,C)}}function $c(r,t,e){Fh(r,t,3,e)}function $l(r,t,e,n){(3&r[2])===e&&Fh(r,t,e,n)}function Kl(r,t){let e=r[2];(3&e)===t&&(e&=2047,e+=1,r[2]=e)}function Fh(r,t,e,n){const c=null!=n?n:-1,d=t.length-1;let p=0;for(let f=void 0!==n?65535&r[18]:0;f<d;f++)if("number"==typeof t[f+1]){if(p=t[f],null!=n&&p>=n)break}else t[f]<0&&(r[18]+=65536),(p<c||-1==c)&&(hd(r,e,t,f),r[18]=(4294901760&r[18])+f+2),f++}function hd(r,t,e,n){const a=e[n]<0,c=e[n+1],p=r[a?-e[n]:e[n]];if(a){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{c.call(p)}finally{}}}else try{c.call(p)}finally{}}class Jl{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Kc(r,t,e){const n=Hi(r);let a=0;for(;a<e.length;){const c=e[a];if("number"==typeof c){if(0!==c)break;a++;const d=e[a++],p=e[a++],f=e[a++];n?r.setAttribute(t,p,f,d):t.setAttributeNS(d,p,f)}else{const d=c,p=e[++a];xs(d)?n&&r.setProperty(t,d,p):n?r.setAttribute(t,d,p):t.setAttribute(d,p),a++}}return a}function Hh(r){return 3===r||4===r||6===r}function xs(r){return 64===r.charCodeAt(0)}function ba(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const a=t[n];"number"==typeof a?e=a:0===e||Jc(r,e,a,null,-1===e||2===e?t[++n]:null)}}return r}function Jc(r,t,e,n,a){let c=0,d=r.length;if(-1===t)d=-1;else for(;c<r.length;){const p=r[c++];if("number"==typeof p){if(p===t){d=-1;break}if(p>t){d=c-1;break}}}for(;c<r.length;){const p=r[c];if("number"==typeof p)break;if(p===e){if(null===n)return void(null!==a&&(r[c+1]=a));if(n===r[c+1])return void(r[c+2]=a)}c++,null!==n&&c++,null!==a&&c++}-1!==d&&(r.splice(d,0,t),c=d+1),r.splice(c++,0,e),null!==n&&r.splice(c++,0,n),null!==a&&r.splice(c++,0,a)}function yr(r){return-1!==r}function Os(r){return 32767&r}function Ys(r,t){let e=function(r){return r>>16}(r),n=t;for(;e>0;)n=n[15],e--;return n}let ya=!0;function pd(r){const t=ya;return ya=r,t}let Wi=0;function $o(r,t){const e=Ca(r,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(r.injectorIndex=t.length,_d(n.data,r),_d(t,null),_d(n.blueprint,null));const a=Or(r,t),c=r.injectorIndex;if(yr(a)){const d=Os(a),p=Ys(a,t),f=p[1].data;for(let v=0;v<8;v++)t[c+v]=p[d+v]|f[d+v]}return t[c+8]=a,c}function _d(r,t){r.push(0,0,0,0,0,0,0,0,t)}function Ca(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function Or(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let e=0,n=null,a=t;for(;null!==a;){const c=a[1],d=c.type;if(n=2===d?c.declTNode:1===d?a[6]:null,null===n)return-1;if(e++,a=a[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function po(r,t,e){!function(r,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(da)&&(n=e[da]),null==n&&(n=e[da]=Wi++);const a=255&n;t.data[r+(a>>5)]|=1<<a}(r,t,e)}function sl(r,t,e){if(e&on.Optional)return r;js(t,"NodeInjector")}function Ql(r,t,e,n){if(e&on.Optional&&void 0===n&&(n=null),0==(e&(on.Self|on.Host))){const a=r[9],c=Uo(void 0);try{return a?a.get(t,n,e&on.Optional):mh(t,n,e&on.Optional)}finally{Uo(c)}}return sl(n,t,e)}function al(r,t,e,n=on.Default,a){if(null!==r){const c=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(da)?r[da]:void 0;return"number"==typeof t?t>=0?255&t:vd:t}(e);if("function"==typeof c){if(!Nh(t,r,n))return n&on.Host?sl(a,e,n):Ql(t,e,n,a);try{const d=c(n);if(null!=d||n&on.Optional)return d;js(e)}finally{zc()}}else if("number"==typeof c){let d=null,p=Ca(r,t),f=-1,v=n&on.Host?t[16][6]:null;for((-1===p||n&on.SkipSelf)&&(f=-1===p?Or(r,t):t[p+8],-1!==f&&Gh(n,!1)?(d=t[1],p=Os(f),t=Ys(f,t)):p=-1);-1!==p;){const C=t[1];if(bd(c,p,C.data)){const M=zf(p,t,e,d,n,v);if(M!==ks)return M}f=t[p+8],-1!==f&&Gh(n,t[1].data[p+8]===v)&&bd(c,p,t)?(d=C,p=Os(f),t=Ys(f,t)):p=-1}}}return Ql(t,e,n,a)}const ks={};function vd(){return new Ns(Bi(),it())}function zf(r,t,e,n,a,c){const d=t[1],p=d.data[r+8],C=Qc(p,d,e,null==n?Ds(p)&&ya:n!=d&&0!=(3&p.type),a&on.Host&&c===p);return null!==C?ll(t,d,C,p):ks}function Qc(r,t,e,n,a){const c=r.providerIndexes,d=t.data,p=1048575&c,f=r.directiveStart,C=c>>20,O=a?p+C:r.directiveEnd;for(let P=n?p:p+C;P<O;P++){const W=d[P];if(P<f&&e===W||P>=f&&W.type===e)return P}if(a){const P=d[f];if(P&&Jr(P)&&P.type===e)return f}return null}function ll(r,t,e,n){let a=r[e];const c=t.data;if(function(r){return r instanceof Jl}(a)){const d=a;d.resolving&&function(r,t){throw new Rr("200",`Circular dependency in DI detected for ${r}`)}(Ir(c[e]));const p=pd(d.canSeeViewProviders);d.resolving=!0;const f=d.injectImpl?Uo(d.injectImpl):null;Nh(r,n,on.Default);try{a=r[e]=d.factory(void 0,c,r,n),t.firstCreatePass&&e>=n.directiveStart&&function(r,t,e){const{ngOnChanges:n,ngOnInit:a,ngDoCheck:c}=t.type.prototype;if(n){const d=Ul(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(r,d),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,d)}a&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-r,a),c&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r,c),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r,c))}(e,c[e],t)}finally{null!==f&&Uo(f),pd(p),d.resolving=!1,zc()}}return a}function bd(r,t,e){return!!(e[t+(r>>5)]&1<<r)}function Gh(r,t){return!(r&on.Self||r&on.Host&&t)}class Ns{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return al(this._tNode,this._lView,t,n,e)}}function nn(r){return Kr(()=>{const t=r.prototype.constructor,e=t[Eo]||cl(t),n=Object.prototype;let a=Object.getPrototypeOf(r.prototype).constructor;for(;a&&a!==n;){const c=a[Eo]||cl(a);if(c&&c!==e)return c;a=Object.getPrototypeOf(a)}return c=>new c})}function cl(r){return no(r)?()=>{const t=cl(Et(r));return t&&t()}:ga(r)}function ji(r){return function(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const e=r.attrs;if(e){const n=e.length;let a=0;for(;a<n;){const c=e[a];if(Hh(c))break;if(0===c)a+=2;else if("number"==typeof c)for(a++;a<n&&"string"==typeof e[a];)a++;else{if(c===t)return e[a+1];a+=2}}}return null}(Bi(),r)}const ul="__parameters__";function Ea(r,t,e){return Kr(()=>{const n=function(r){return function(...e){if(r){const n=r(...e);for(const a in n)this[a]=n[a]}}}(t);function a(...c){if(this instanceof a)return n.apply(this,c),this;const d=new a(...c);return p.annotation=d,p;function p(f,v,C){const M=f.hasOwnProperty(ul)?f[ul]:Object.defineProperty(f,ul,{value:[]})[ul];for(;M.length<=C;)M.push(null);return(M[C]=M[C]||[]).push(d),f}}return e&&(a.prototype=Object.create(e.prototype)),a.prototype.ngMetadataName=r,a.annotationCls=a,a})}class We{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=mt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const zh=new We("AnalyzeForEntryComponents"),Ta=Function;function k(r,t){void 0===t&&(t=r);for(let e=0;e<r.length;e++){let n=r[e];Array.isArray(n)?(t===r&&(t=r.slice(0,e)),k(n,t)):t!==r&&t.push(n)}return t}function L(r,t){r.forEach(e=>Array.isArray(e)?L(e,t):t(e))}function z(r,t,e){t>=r.length?r.push(e):r.splice(t,0,e)}function oe(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function ue(r,t){const e=[];for(let n=0;n<r;n++)e.push(t);return e}function Yt(r,t,e){let n=yn(r,t);return n>=0?r[1|n]=e:(n=~n,function(r,t,e,n){let a=r.length;if(a==t)r.push(e,n);else if(1===a)r.push(n,r[0]),r[0]=e;else{for(a--,r.push(r[a-1],r[a]);a>t;)r[a]=r[a-2],a--;r[t]=e,r[t+1]=n}}(r,n,t,e)),n}function Zt(r,t){const e=yn(r,t);if(e>=0)return r[1|e]}function yn(r,t){return function(r,t,e){let n=0,a=r.length>>e;for(;a!==n;){const c=n+(a-n>>1),d=r[c<<e];if(t===d)return c<<e;d>t?a=c:n=c+1}return~(a<<e)}(r,t,1)}const Ed={},Zf="__NG_DI_FLAG__",tc="ngTempTokenPath",o_=/\n/gm,Kh="__source",eg=Xt({provide:String,useValue:Xt});let eu;function tu(r){const t=eu;return eu=r,t}function tg(r,t=on.Default){if(void 0===eu)throw new Error("inject() must be called from an injection context");return null===eu?mh(r,void 0,t):eu.get(r,t&on.Optional?null:void 0,t)}function be(r,t=on.Default){return(kl||tg)(Et(r),t)}const Td=be;function nc(r){const t=[];for(let e=0;e<r.length;e++){const n=Et(r[e]);if(Array.isArray(n)){if(0===n.length)throw new Error("Arguments array must have arguments.");let a,c=on.Default;for(let d=0;d<n.length;d++){const p=n[d],f=ig(p);"number"==typeof f?-1===f?a=p.token:c|=f:a=p}t.push(be(a,c))}else t.push(be(n))}return t}function wd(r,t){return r[Zf]=t,r.prototype[Zf]=t,r}function ig(r){return r[Zf]}function s_(r,t,e,n){const a=r[tc];throw t[Kh]&&a.unshift(t[Kh]),r.message=function(r,t,e,n=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let a=tt(t);if(Array.isArray(t))a=t.map(tt).join(" -> ");else if("object"==typeof t){let c=[];for(let d in t)if(t.hasOwnProperty(d)){let p=t[d];c.push(d+":"+("string"==typeof p?JSON.stringify(p):tt(p)))}a=`{${c.join(", ")}}`}return`${e}${n?"("+n+")":""}[${a}]: ${r.replace(o_,"\n  ")}`}("\n"+r.message,a,e,n),r.ngTokenPath=a,r[tc]=null,r}const nu=wd(Ea("Inject",r=>({token:r})),-1),Ji=wd(Ea("Optional"),8),go=wd(Ea("SkipSelf"),4);let qh;function ic(r){var t;return(null===(t=function(){if(void 0===qh&&(qh=null,ri.trustedTypes))try{qh=ri.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return qh}())||void 0===t?void 0:t.createHTML(r))||r}class rc{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ny extends rc{getTypeName(){return"HTML"}}class tp extends rc{getTypeName(){return"Style"}}class Ly extends rc{getTypeName(){return"Script"}}class TD extends rc{getTypeName(){return"URL"}}class Py extends rc{getTypeName(){return"ResourceURL"}}function Ko(r){return r instanceof rc?r.changingThisBreaksApplicationSecurity:r}function Ps(r,t){const e=f_(r);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function f_(r){return r instanceof rc&&r.getTypeName()||null}class Uy{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(ic(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Gy{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=ic(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=ic(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let a=e.length-1;0<a;a--){const d=e.item(a).name;("xmlns:ns1"===d||0===d.indexOf("ns1:"))&&t.removeAttribute(d)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const jy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,zy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Rd(r){return(r=String(r)).match(jy)||r.match(zy)?r:"unsafe:"+r}function __(r){return(r=String(r)).split(",").map(t=>Rd(t.trim())).join(", ")}function Ks(r){const t={};for(const e of r.split(","))t[e]=!0;return t}function Id(...r){const t={};for(const e of r)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const v_=Ks("area,br,col,hr,img,wbr"),cg=Ks("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),b_=Ks("rp,rt"),ug=Id(v_,Id(cg,Ks("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Id(b_,Ks("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Id(b_,cg)),np=Ks("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dg=Ks("srcset"),y_=Id(np,dg,Ks("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ks("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Xy=Ks("script,style,template");class C_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let a=this.checkClobberedElement(e,e.nextSibling);if(a){e=a;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ug.hasOwnProperty(e))return this.sanitizedSomething=!0,!Xy.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let a=0;a<n.length;a++){const c=n.item(a),d=c.name,p=d.toLowerCase();if(!y_.hasOwnProperty(p)){this.sanitizedSomething=!0;continue}let f=c.value;np[p]&&(f=Rd(f)),dg[p]&&(f=__(f)),this.buf.push(" ",d,'="',T_(f),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ug.hasOwnProperty(e)&&!v_.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(T_(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const hg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,E_=/([^\#-~ |!])/g;function T_(r){return r.replace(/&/g,"&amp;").replace(hg,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(E_,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ip;function w_(r,t){let e=null;try{ip=ip||function(r){const t=new Gy(r);return function(){try{return!!(new window.DOMParser).parseFromString(ic(""),"text/html")}catch(r){return!1}}()?new Uy(t):t}(r);let n=t?String(t):"";e=ip.getInertBodyElement(n);let a=5,c=n;do{if(0===a)throw new Error("Failed to sanitize html because the input is unstable");a--,n=c,c=e.innerHTML,e=ip.getInertBodyElement(n)}while(n!==c);return ic((new C_).sanitizeChildren(pg(e)||e))}finally{if(e){const n=pg(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function pg(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var ci=(()=>((ci=ci||{})[ci.NONE=0]="NONE",ci[ci.HTML=1]="HTML",ci[ci.STYLE=2]="STYLE",ci[ci.SCRIPT=3]="SCRIPT",ci[ci.URL=4]="URL",ci[ci.RESOURCE_URL=5]="RESOURCE_URL",ci))();function E(r){const t=function(){const r=it();return r&&r[12]}();return t?t.sanitize(ci.URL,r)||"":Ps(r,"URL")?Ko(r):Rd(rn(r))}const Je="__ngContext__";function Ze(r,t){r[Je]=t}function Ht(r){const t=function(r){return r[Je]||null}(r);return t?Array.isArray(t)?t:t.lView:null}function su(r){return r.ngOriginalError}function fg(r,...t){r.error(...t)}class ps{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),a=function(r){return r&&r.ngErrorLogger||fg}(t);a(this._console,"ERROR",t),e&&a(this._console,"ORIGINAL ERROR",e),n&&a(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(r){return r.ngDebugContext}(t)||this._findContext(su(t)):null}_findOriginalError(t){let e=t&&su(t);for(;e&&su(e);)e=su(e);return e||null}}const OD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ri))();function hl(r){return r instanceof Function?r():r}var Fs=(()=>((Fs=Fs||{})[Fs.Important=1]="Important",Fs[Fs.DashCase=2]="DashCase",Fs))();function Ky(r,t){return undefined(r,t)}function gg(r){const t=r[3];return lo(t)?t[3]:t}function Jy(r){return FD(r[13])}function Qy(r){return FD(r[4])}function FD(r){for(;null!==r&&!lo(r);)r=r[4];return r}function op(r,t,e,n,a){if(null!=n){let c,d=!1;lo(n)?c=n:zo(n)&&(d=!0,n=n[0]);const p=Ui(n);0===r&&null!==e?null==a?WD(t,e,p):Ad(t,e,p,a||null,!0):1===r&&null!==e?Ad(t,e,p,a||null,!0):2===r?function(r,t,e){const n=M_(r,t);n&&function(r,t,e,n){Hi(r)?r.removeChild(t,e,n):t.removeChild(e)}(r,n,t,e)}(t,p,d):3===r&&t.destroyNode(p),null!=c&&function(r,t,e,n,a){const c=e[7];c!==Ui(e)&&op(t,r,n,c,a);for(let p=10;p<e.length;p++){const f=e[p];mg(f[1],f,r,t,n,c)}}(t,r,c,e,a)}}function qy(r,t,e){return Hi(r)?r.createElement(t,e):null===e?r.createElement(t):r.createElementNS(e,t)}function VD(r,t){const e=r[9],n=e.indexOf(t),a=t[3];1024&t[2]&&(t[2]&=-1025,rd(a,-1)),e.splice(n,1)}function eC(r,t){if(r.length<=10)return;const e=10+t,n=r[e];if(n){const a=n[17];null!==a&&a!==r&&VD(a,n),t>0&&(r[e-1][4]=n[4]);const c=oe(r,10+t);!function(r,t){mg(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const d=c[19];null!==d&&d.detachView(c[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function HD(r,t){if(!(256&t[2])){const e=t[11];Hi(e)&&e.destroyNode&&mg(r,t,e,3,null,null),function(r){let t=r[13];if(!t)return tC(r[1],r);for(;t;){let e=null;if(zo(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==r;)zo(t)&&tC(t[1],t),t=t[3];null===t&&(t=r),zo(t)&&tC(t[1],t),e=t&&t[4]}t=e}}(t)}}function tC(r,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(r,t){let e;if(null!=r&&null!=(e=r.destroyHooks))for(let n=0;n<e.length;n+=2){const a=t[e[n]];if(!(a instanceof Jl)){const c=e[n+1];if(Array.isArray(c))for(let d=0;d<c.length;d+=2){const p=a[c[d]],f=c[d+1];try{f.call(p)}finally{}}else try{c.call(a)}finally{}}}}(r,t),function(r,t){const e=r.cleanup,n=t[7];let a=-1;if(null!==e)for(let c=0;c<e.length-1;c+=2)if("string"==typeof e[c]){const d=e[c+1],p="function"==typeof d?d(t):Ui(t[d]),f=n[a=e[c+2]],v=e[c+3];"boolean"==typeof v?p.removeEventListener(e[c],f,v):v>=0?n[a=v]():n[a=-v].unsubscribe(),c+=2}else{const d=n[a=e[c+1]];e[c].call(d)}if(null!==n){for(let c=a+1;c<n.length;c++)n[c]();t[7]=null}}(r,t),1===t[1].type&&Hi(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&lo(t[3])){e!==t[3]&&VD(e,t);const n=t[19];null!==n&&n.detachView(r)}}}function UD(r,t,e){return function(r,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const a=r.data[n.directiveStart].encapsulation;if(a===$i.None||a===$i.Emulated)return null}return co(n,e)}(r,t.parent,e)}function Ad(r,t,e,n,a){Hi(r)?r.insertBefore(t,e,n,a):t.insertBefore(e,n,a)}function WD(r,t,e){Hi(r)?r.appendChild(t,e):t.appendChild(e)}function jD(r,t,e,n,a){null!==n?Ad(r,t,e,n,a):WD(r,t,e)}function M_(r,t){return Hi(r)?r.parentNode(t):t.parentNode}function zD(r,t,e){return YD(r,t,e)}let YD=function(r,t,e){return 40&r.type?co(r,e):null};function R_(r,t,e,n){const a=UD(r,n,t),c=t[11],p=zD(n.parent||t[6],n,t);if(null!=a)if(Array.isArray(e))for(let f=0;f<e.length;f++)jD(c,a,e[f],p,!1);else jD(c,a,e,p,!1)}function I_(r,t){if(null!==t){const e=t.type;if(3&e)return co(t,r);if(4&e)return iC(-1,r[t.index]);if(8&e){const n=t.child;if(null!==n)return I_(r,n);{const a=r[t.index];return lo(a)?iC(-1,a):Ui(a)}}if(32&e)return Ky(t,r)()||Ui(r[t.index]);{const n=KD(r,t);return null!==n?Array.isArray(n)?n[0]:I_(gg(r[16]),n):I_(r,t.next)}}return null}function KD(r,t){return null!==t?r[16][6].projection[t.projection]:null}function iC(r,t){const e=10+r+1;if(e<t.length){const n=t[e],a=n[1].firstChild;if(null!==a)return I_(n,a)}return t[7]}function rC(r,t,e,n,a,c,d){for(;null!=e;){const p=n[e.index],f=e.type;if(d&&0===t&&(p&&Ze(Ui(p),n),e.flags|=4),64!=(64&e.flags))if(8&f)rC(r,t,e.child,n,a,c,!1),op(t,r,a,p,c);else if(32&f){const v=Ky(e,n);let C;for(;C=v();)op(t,r,a,C,c);op(t,r,a,p,c)}else 16&f?QD(r,t,n,e,a,c):op(t,r,a,p,c);e=d?e.projectionNext:e.next}}function mg(r,t,e,n,a,c){rC(e,n,r.firstChild,t,a,c,!1)}function QD(r,t,e,n,a,c){const d=e[16],f=d[6].projection[n.projection];if(Array.isArray(f))for(let v=0;v<f.length;v++)op(t,r,a,f[v],c);else rC(r,t,f,d[3],a,c,!0)}function ZD(r,t,e){Hi(r)?r.setAttribute(t,"style",e):t.style.cssText=e}function oC(r,t,e){Hi(r)?""===e?r.removeAttribute(t,"class"):r.setAttribute(t,"class",e):t.className=e}function qD(r,t,e){let n=r.length;for(;;){const a=r.indexOf(t,e);if(-1===a)return a;if(0===a||r.charCodeAt(a-1)<=32){const c=t.length;if(a+c===n||r.charCodeAt(a+c)<=32)return a}e=a+1}}const eM="ng-template";function nB(r,t,e){let n=0;for(;n<r.length;){let a=r[n++];if(e&&"class"===a){if(a=r[n],-1!==qD(a.toLowerCase(),t,0))return!0}else if(1===a){for(;n<r.length&&"string"==typeof(a=r[n++]);)if(a.toLowerCase()===t)return!0;return!1}}return!1}function tM(r){return 4===r.type&&r.value!==eM}function iB(r,t,e){return t===(4!==r.type||e?r.value:eM)}function rB(r,t,e){let n=4;const a=r.attrs||[],c=function(r){for(let t=0;t<r.length;t++)if(Hh(r[t]))return t;return r.length}(a);let d=!1;for(let p=0;p<t.length;p++){const f=t[p];if("number"!=typeof f){if(!d)if(4&n){if(n=2|1&n,""!==f&&!iB(r,f,e)||""===f&&1===t.length){if(Sa(n))return!1;d=!0}}else{const v=8&n?f:t[++p];if(8&n&&null!==r.attrs){if(!nB(r.attrs,v,e)){if(Sa(n))return!1;d=!0}continue}const M=oB(8&n?"class":f,a,tM(r),e);if(-1===M){if(Sa(n))return!1;d=!0;continue}if(""!==v){let O;O=M>c?"":a[M+1].toLowerCase();const P=8&n?O:null;if(P&&-1!==qD(P,v,0)||2&n&&v!==O){if(Sa(n))return!1;d=!0}}}}else{if(!d&&!Sa(n)&&!Sa(f))return!1;if(d&&Sa(f))continue;d=!1,n=f|1&n}}return Sa(n)||d}function Sa(r){return 0==(1&r)}function oB(r,t,e,n){if(null===t)return-1;let a=0;if(n||!e){let c=!1;for(;a<t.length;){const d=t[a];if(d===r)return a;if(3===d||6===d)c=!0;else{if(1===d||2===d){let p=t[++a];for(;"string"==typeof p;)p=t[++a];continue}if(4===d)break;if(0===d){a+=4;continue}}a+=c?1:2}return-1}return function(r,t){let e=r.indexOf(4);if(e>-1)for(e++;e<r.length;){const n=r[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,r)}function nM(r,t,e=!1){for(let n=0;n<t.length;n++)if(rB(r,t[n],e))return!0;return!1}function cB(r,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(r.length===n.length){for(let a=0;a<r.length;a++)if(r[a]!==n[a])continue e;return!0}}return!1}function iM(r,t){return r?":not("+t.trim()+")":t}function uB(r){let t=r[0],e=1,n=2,a="",c=!1;for(;e<r.length;){let d=r[e];if("string"==typeof d)if(2&n){const p=r[++e];a+="["+d+(p.length>0?'="'+p+'"':"")+"]"}else 8&n?a+="."+d:4&n&&(a+=" "+d);else""!==a&&!Sa(d)&&(t+=iM(c,a),a=""),n=d,c=c||!Sa(n);e++}return""!==a&&(t+=iM(c,a)),t}const On={};function Ie(r){rM($n(),it(),pr()+r,nl())}function rM(r,t,e,n){if(!n)if(3==(3&t[2])){const c=r.preOrderCheckHooks;null!==c&&$c(t,c,e)}else{const c=r.preOrderHooks;null!==c&&$l(t,c,0,e)}Ro(e)}function A_(r,t){return r<<17|t<<2}function Da(r){return r>>17&32767}function sC(r){return 2|r}function oc(r){return(131068&r)>>2}function aC(r,t){return-131069&r|t<<2}function lC(r){return 1|r}function fM(r,t){const e=r.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const a=e[n],c=e[n+1];if(-1!==c){const d=r.data[c];ho(a),d.contentQueries(2,t[c],c)}}}function _g(r,t,e,n,a,c,d,p,f,v){const C=t.blueprint.slice();return C[0]=a,C[2]=140|n,id(C),C[3]=C[15]=r,C[8]=e,C[10]=d||r&&r[10],C[11]=p||r&&r[11],C[12]=f||r&&r[12]||null,C[9]=v||r&&r[9]||null,C[6]=c,C[16]=2==t.type?r[16]:C,C}function sp(r,t,e,n,a){let c=r.data[t];if(null===c)c=function(r,t,e,n,a){const c=va(),d=Hc(),f=r.data[t]=function(r,t,e,n,a,c){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:a,attrs:c,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?c:c&&c.parent,e,t,n,a);return null===r.firstChild&&(r.firstChild=f),null!==c&&(d?null==c.child&&null!==f.parent&&(c.child=f):null===c.next&&(c.next=f)),f}(r,t,e,n,a),gn.lFrame.inI18n&&(c.flags|=64);else if(64&c.type){c.type=e,c.value=n,c.attrs=a;const d=function(){const r=gn.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();c.injectorIndex=null===d?-1:d.injectorIndex}return os(c,!0),c}function ap(r,t,e,n){if(0===e)return-1;const a=t.length;for(let c=0;c<e;c++)t.push(n),r.blueprint.push(n),r.data.push(null);return a}function vg(r,t,e){Xo(t);try{const n=r.viewQuery;null!==n&&wC(1,n,e);const a=r.template;null!==a&&gM(r,t,a,1,e),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&fM(r,t),r.staticViewQueries&&wC(2,r.viewQuery,e);const c=r.components;null!==c&&function(r,t){for(let e=0;e<t.length;e++)WB(r,t[e])}(t,c)}catch(n){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),n}finally{t[2]&=-5,Xc()}}function lp(r,t,e,n){const a=t[2];if(256==(256&a))return;Xo(t);const c=nl();try{id(t),function(r){gn.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==e&&gM(r,t,e,2,n);const d=3==(3&a);if(!c)if(d){const v=r.preOrderCheckHooks;null!==v&&$c(t,v,null)}else{const v=r.preOrderHooks;null!==v&&$l(t,v,0,null),Kl(t,0)}if(function(r){for(let t=Jy(r);null!==t;t=Qy(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const a=e[n],c=a[3];0==(1024&a[2])&&rd(c,1),a[2]|=1024}}}(t),function(r){for(let t=Jy(r);null!==t;t=Qy(t))for(let e=10;e<t.length;e++){const n=t[e],a=n[1];Xs(n)&&lp(a,n,a.template,n[8])}}(t),null!==r.contentQueries&&fM(r,t),!c)if(d){const v=r.contentCheckHooks;null!==v&&$c(t,v)}else{const v=r.contentHooks;null!==v&&$l(t,v,1),Kl(t,1)}!function(r,t){const e=r.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const a=e[n];if(a<0)Ro(~a);else{const c=a,d=e[++n],p=e[++n];Hf(d,c),p(2,t[c])}}}finally{Ro(-1)}}(r,t);const p=r.components;null!==p&&function(r,t){for(let e=0;e<t.length;e++)GB(r,t[e])}(t,p);const f=r.viewQuery;if(null!==f&&wC(2,f,n),!c)if(d){const v=r.viewCheckHooks;null!==v&&$c(t,v)}else{const v=r.viewHooks;null!==v&&$l(t,v,2),Kl(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),c||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,rd(t[3],-1))}finally{Xc()}}function TB(r,t,e,n){const a=t[10],c=!nl(),d=_a(t);try{c&&!d&&a.begin&&a.begin(),d&&vg(r,t,n),lp(r,t,e,n)}finally{c&&!d&&a.end&&a.end()}}function gM(r,t,e,n,a){const c=pr(),d=2&n;try{Ro(-1),d&&t.length>20&&rM(r,t,20,nl()),e(n,a)}finally{Ro(c)}}function mC(r,t,e){!xh()||(function(r,t,e,n){const a=e.directiveStart,c=e.directiveEnd;r.firstCreatePass||$o(e,t),Ze(n,t);const d=e.initialInputs;for(let p=a;p<c;p++){const f=r.data[p],v=Jr(f);v&&FB(t,e,f);const C=ll(t,r,p,e);Ze(C,t),null!==d&&BB(0,p-a,C,f,0,d),v&&(uo(e.index,t)[8]=C)}}(r,t,e,co(e,t)),128==(128&e.flags)&&function(r,t,e){const n=e.directiveStart,a=e.directiveEnd,d=e.index,p=gn.lFrame.currentDirectiveIndex;try{Ro(d);for(let f=n;f<a;f++){const v=r.data[f],C=t[f];Wc(f),(null!==v.hostBindings||0!==v.hostVars||null!==v.hostAttrs)&&wM(v,C)}}finally{Ro(-1),Wc(p)}}(r,t,e))}function _C(r,t,e=co){const n=t.localNames;if(null!==n){let a=t.index+1;for(let c=0;c<n.length;c+=2){const d=n[c+1],p=-1===d?e(t,r):r[d];r[a++]=p}}}function _M(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=k_(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function k_(r,t,e,n,a,c,d,p,f,v){const C=20+n,M=C+a,O=function(r,t){const e=[];for(let n=0;n<t;n++)e.push(n<r?null:On);return e}(C,M),P="function"==typeof v?v():v;return O[1]={type:r,blueprint:O,template:e,queries:null,viewQuery:p,declTNode:t,data:O.slice().fill(null,C),bindingStartIndex:C,expandoStartIndex:M,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof c?c():c,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:f,consts:P,incompleteFirstPass:!1}}function yM(r,t,e,n){const a=AM(t);null===e?a.push(n):(a.push(e),r.firstCreatePass&&xM(r).push(n,a.length-1))}function CM(r,t,e){for(let n in r)if(r.hasOwnProperty(n)){const a=r[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,a):e[n]=[t,a]}return e}function Bs(r,t,e,n,a,c,d,p){const f=co(t,e);let C,v=t.inputs;!p&&null!=v&&(C=v[n])?(NM(r,e,C,n,a),Ds(t)&&function(r,t){const e=uo(t,r);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(n=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(n),a=null!=d?d(a,t.value||"",n):a,Hi(c)?c.setProperty(f,n,a):xs(n)||(f.setProperty?f.setProperty(n,a):f[n]=a))}function vC(r,t,e,n){let a=!1;if(xh()){const c=function(r,t,e){const n=r.directiveRegistry;let a=null;if(n)for(let c=0;c<n.length;c++){const d=n[c];nM(e,d.selectors,!1)&&(a||(a=[]),po($o(e,t),r,d.type),Jr(d)?(SM(r,e),a.unshift(d)):a.push(d))}return a}(r,t,e),d=null===n?null:{"":-1};if(null!==c){a=!0,DM(e,r.data.length,c.length);for(let C=0;C<c.length;C++){const M=c[C];M.providersResolver&&M.providersResolver(M)}let p=!1,f=!1,v=ap(r,t,c.length,null);for(let C=0;C<c.length;C++){const M=c[C];e.mergedAttrs=ba(e.mergedAttrs,M.hostAttrs),MM(r,e,t,v,M),PB(v,M,d),null!==M.contentQueries&&(e.flags|=8),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(e.flags|=128);const O=M.type.prototype;!p&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e.index),p=!0),!f&&(O.ngOnChanges||O.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e.index),f=!0),v++}!function(r,t){const n=t.directiveEnd,a=r.data,c=t.attrs,d=[];let p=null,f=null;for(let v=t.directiveStart;v<n;v++){const C=a[v],M=C.inputs,O=null===c||tM(t)?null:VB(M,c);d.push(O),p=CM(M,v,p),f=CM(C.outputs,v,f)}null!==p&&(p.hasOwnProperty("class")&&(t.flags|=16),p.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=d,t.inputs=p,t.outputs=f}(r,e)}d&&function(r,t,e){if(t){const n=r.localNames=[];for(let a=0;a<t.length;a+=2){const c=e[t[a+1]];if(null==c)throw new Rr("301",`Export of name '${t[a+1]}' not found!`);n.push(t[a],c)}}}(e,n,d)}return e.mergedAttrs=ba(e.mergedAttrs,e.attrs),a}function TM(r,t,e,n,a,c){const d=c.hostBindings;if(d){let p=r.hostBindingOpCodes;null===p&&(p=r.hostBindingOpCodes=[]);const f=~t.index;(function(r){let t=r.length;for(;t>0;){const e=r[--t];if("number"==typeof e&&e<0)return e}return 0})(p)!=f&&p.push(f),p.push(n,a,d)}}function wM(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function SM(r,t){t.flags|=2,(r.components||(r.components=[])).push(t.index)}function PB(r,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=r;Jr(t)&&(e[""]=r)}}function DM(r,t,e){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+e,r.providerIndexes=t}function MM(r,t,e,n,a){r.data[n]=a;const c=a.factory||(a.factory=ga(a.type)),d=new Jl(c,Jr(a),null);r.blueprint[n]=d,e[n]=d,TM(r,t,0,n,ap(r,e,a.hostVars,On),a)}function FB(r,t,e){const n=co(t,r),a=_M(e),c=r[10],d=N_(r,_g(r,a,null,e.onPush?64:16,n,t,c,c.createRenderer(n,e),null,null));r[t.index]=d}function pl(r,t,e,n,a,c){const d=co(r,t);!function(r,t,e,n,a,c,d){if(null==c)Hi(r)?r.removeAttribute(t,a,e):t.removeAttribute(a);else{const p=null==d?rn(c):d(c,n||"",a);Hi(r)?r.setAttribute(t,a,p,e):e?t.setAttributeNS(e,a,p):t.setAttribute(a,p)}}(t[11],d,c,r.value,e,n,a)}function BB(r,t,e,n,a,c){const d=c[t];if(null!==d){const p=n.setInput;for(let f=0;f<d.length;){const v=d[f++],C=d[f++],M=d[f++];null!==p?n.setInput(e,M,v,C):e[C]=M}}}function VB(r,t){let e=null,n=0;for(;n<t.length;){const a=t[n];if(0!==a)if(5!==a){if("number"==typeof a)break;r.hasOwnProperty(a)&&(null===e&&(e=[]),e.push(a,r[a],t[n+1])),n+=2}else n+=2;else n+=4}return e}function RM(r,t,e,n){return new Array(r,!0,!1,t,null,0,n,e,null,null)}function GB(r,t){const e=uo(t,r);if(Xs(e)){const n=e[1];80&e[2]?lp(n,e,n.template,e[8]):e[5]>0&&yC(e)}}function yC(r){for(let n=Jy(r);null!==n;n=Qy(n))for(let a=10;a<n.length;a++){const c=n[a];if(1024&c[2]){const d=c[1];lp(d,c,d.template,c[8])}else c[5]>0&&yC(c)}const e=r[1].components;if(null!==e)for(let n=0;n<e.length;n++){const a=uo(e[n],r);Xs(a)&&a[5]>0&&yC(a)}}function WB(r,t){const e=uo(t,r),n=e[1];(function(r,t){for(let e=t.length;e<r.blueprint.length;e++)t.push(r.blueprint[e])})(n,e),vg(n,e,e[8])}function N_(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function CC(r){for(;r;){r[2]|=64;const t=gg(r);if(Vl(r)&&!t)return r;r=t}return null}function TC(r,t,e){const n=t[10];n.begin&&n.begin();try{lp(r,t,r.template,e)}catch(a){throw kM(t,a),a}finally{n.end&&n.end()}}function IM(r){!function(r){for(let t=0;t<r.components.length;t++){const e=r.components[t],n=Ht(e),a=n[1];TB(a,n,a.template,e)}}(r[8])}function wC(r,t,e){ho(0),t(r,e)}const $B=(()=>Promise.resolve(null))();function AM(r){return r[7]||(r[7]=[])}function xM(r){return r.cleanup||(r.cleanup=[])}function OM(r,t,e){return(null===r||Jr(r))&&(e=function(r){for(;Array.isArray(r);){if("object"==typeof r[1])return r;r=r[0]}return null}(e[t.index])),e[11]}function kM(r,t){const e=r[9],n=e?e.get(ps,null):null;n&&n.handleError(t)}function NM(r,t,e,n,a){for(let c=0;c<e.length;){const d=e[c++],p=e[c++],f=t[d],v=r.data[d];null!==v.setInput?v.setInput(f,a,n,p):f[p]=a}}function ac(r,t,e){const n=Rs(t,r);!function(r,t,e){Hi(r)?r.setValue(t,e):t.textContent=e}(r[11],n,e)}function L_(r,t,e){let n=e?r.styles:null,a=e?r.classes:null,c=0;if(null!==t)for(let d=0;d<t.length;d++){const p=t[d];"number"==typeof p?c=p:1==c?a=Qt(a,p):2==c&&(n=Qt(n,p+": "+t[++d]+";"))}e?r.styles=n:r.stylesWithoutHost=n,e?r.classes=a:r.classesWithoutHost=a}const cp=new We("INJECTOR",-1);class LM{get(t,e=Ed){if(e===Ed){const n=new Error(`NullInjectorError: No provider for ${tt(t)}!`);throw n.name="NullInjectorError",n}return e}}const bg=new We("Set Injector scope."),yg={},QB={};let SC;function PM(){return void 0===SC&&(SC=new LM),SC}function FM(r,t=null,e=null,n){return new qB(r,e,t||PM(),n)}class qB{constructor(t,e,n,a=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const c=[];e&&L(e,p=>this.processProvider(p,t,e)),L([t],p=>this.processInjectorType(p,[],c)),this.records.set(cp,up(void 0,this));const d=this.records.get(bg);this.scope=null!=d?d.value:null,this.source=a||("object"==typeof t?null:tt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Ed,n=on.Default){this.assertNotDestroyed();const a=tu(this),c=Uo(void 0);try{if(!(n&on.SkipSelf)){let p=this.records.get(t);if(void 0===p){const f=function(r){return"function"==typeof r||"object"==typeof r&&r instanceof We}(t)&&Ho(t);p=f&&this.injectableDefInScope(f)?up(DC(t),yg):null,this.records.set(t,p)}if(null!=p)return this.hydrate(t,p)}return(n&on.Self?PM():this.parent).get(t,e=n&on.Optional&&e===Ed?null:e)}catch(d){if("NullInjectorError"===d.name){if((d[tc]=d[tc]||[]).unshift(tt(t)),a)throw d;return s_(d,t,"R3InjectorError",this.source)}throw d}finally{Uo(c),tu(a)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((n,a)=>t.push(tt(a))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=Et(t)))return!1;let a=gh(t);const c=null==a&&t.ngModule||void 0,d=void 0===c?t:c,p=-1!==n.indexOf(d);if(void 0!==c&&(a=gh(c)),null==a)return!1;if(null!=a.imports&&!p){let C;n.push(d);try{L(a.imports,M=>{this.processInjectorType(M,e,n)&&(void 0===C&&(C=[]),C.push(M))})}finally{}if(void 0!==C)for(let M=0;M<C.length;M++){const{ngModule:O,providers:P}=C[M];L(P,W=>this.processProvider(W,O,P||fi))}}this.injectorDefTypes.add(d);const f=ga(d)||(()=>new d);this.records.set(d,up(f,yg));const v=a.providers;if(null!=v&&!p){const C=t;L(v,M=>this.processProvider(M,C,v))}return void 0!==c&&void 0!==t.providers}processProvider(t,e,n){let a=dp(t=Et(t))?t:Et(t&&t.provide);const c=function(r,t,e){return VM(r)?up(void 0,r.useValue):up(BM(r),yg)}(t);if(dp(t)||!0!==t.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=up(void 0,yg,!0),d.factory=()=>nc(d.multi),this.records.set(a,d)),a=t,d.multi.push(t)}this.records.set(a,c)}hydrate(t,e){return e.value===yg&&(e.value=QB,e.value=e.factory()),"object"==typeof e.value&&e.value&&function(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Et(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function DC(r){const t=Ho(r),e=null!==t?t.factory:ga(r);if(null!==e)return e;if(r instanceof We)throw new Error(`Token ${tt(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const t=r.length;if(t>0){const n=ue(t,"?");throw new Error(`Can't resolve all parameters for ${tt(r)}: (${n.join(", ")}).`)}const e=function(r){const t=r&&(r[Ol]||r[Wu]);if(t){const e=function(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(r);return null!==e?()=>e.factory(r):()=>new r}(r);throw new Error("unreachable")}function BM(r,t,e){let n;if(dp(r)){const a=Et(r);return ga(a)||DC(a)}if(VM(r))n=()=>Et(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))n=()=>r.useFactory(...nc(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))n=()=>be(Et(r.useExisting));else{const a=Et(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return ga(a)||DC(a);n=()=>new a(...nc(r.deps))}return n}function up(r,t,e=!1){return{factory:r,value:t,multi:e?[]:void 0}}function VM(r){return null!==r&&"object"==typeof r&&eg in r}function dp(r){return"function"==typeof r}const HM=function(r,t,e){return function(r,t=null,e=null,n){const a=FM(r,t,e,n);return a._resolveInjectorDefTypes(),a}({name:e},t,r,e)};let Yn=(()=>{class r{static create(e,n){return Array.isArray(e)?HM(e,n,""):HM(e.providers,e.parent,e.name||"")}}return r.THROW_IF_NOT_FOUND=Ed,r.NULL=new LM,r.\u0275prov=mt({token:r,providedIn:"any",factory:()=>be(cp)}),r.__NG_ELEMENT_ID__=-1,r})();function C2(r,t){Yc(Ht(r)[1],Bi())}function Be(r){let t=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),e=!0;const n=[r];for(;t;){let a;if(Jr(r))a=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");a=t.\u0275dir}if(a){if(e){n.push(a);const d=r;d.inputs=OC(r.inputs),d.declaredInputs=OC(r.declaredInputs),d.outputs=OC(r.outputs);const p=a.hostBindings;p&&S2(r,p);const f=a.viewQuery,v=a.contentQueries;if(f&&T2(r,f),v&&w2(r,v),$t(r.inputs,a.inputs),$t(r.declaredInputs,a.declaredInputs),$t(r.outputs,a.outputs),Jr(a)&&a.data.animation){const C=r.data;C.animation=(C.animation||[]).concat(a.data.animation)}}const c=a.features;if(c)for(let d=0;d<c.length;d++){const p=c[d];p&&p.ngInherit&&p(r),p===Be&&(e=!1)}}t=Object.getPrototypeOf(t)}!function(r){let t=0,e=null;for(let n=r.length-1;n>=0;n--){const a=r[n];a.hostVars=t+=a.hostVars,a.hostAttrs=ba(a.hostAttrs,e=ba(e,a.hostAttrs))}}(n)}function OC(r){return r===Ka?{}:r===fi?[]:r}function T2(r,t){const e=r.viewQuery;r.viewQuery=e?(n,a)=>{t(n,a),e(n,a)}:t}function w2(r,t){const e=r.contentQueries;r.contentQueries=e?(n,a,c)=>{t(n,a,c),e(n,a,c)}:t}function S2(r,t){const e=r.hostBindings;r.hostBindings=e?(n,a)=>{t(n,a),e(n,a)}:t}let P_=null;function hp(){if(!P_){const r=ri.Symbol;if(r&&r.iterator)P_=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(P_=n)}}}return P_}class Ra{constructor(t){this.wrapped=t}static wrap(t){return new Ra(t)}static unwrap(t){return Ra.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ra}}function Eg(r){return!!kC(r)&&(Array.isArray(r)||!(r instanceof Map)&&hp()in r)}function kC(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Ao(r,t,e){return!Object.is(r[t],e)&&(r[t]=e,!0)}function xd(r,t,e,n){const a=Ao(r,t,e);return Ao(r,t+1,n)||a}function ft(r,t,e,n){const a=it();return Ao(a,il(),t)&&($n(),pl(Gi(),a,r,t,e,n)),ft}function fp(r,t,e,n){return Ao(r,il(),e)?t+rn(e)+n:On}function mp(r,t,e,n,a,c,d,p){const v=function(r,t,e,n,a){const c=xd(r,t,e,n);return Ao(r,t+2,a)||c}(r,ss(),e,a,d);return Mo(3),v?t+rn(e)+n+rn(a)+c+rn(d)+p:On}function gt(r,t,e,n,a,c,d,p){const f=it(),v=$n(),C=r+20,M=v.firstCreatePass?function(r,t,e,n,a,c,d,p,f){const v=t.consts,C=sp(t,r,4,d||null,Is(v,p));vC(t,e,C,Is(v,f)),Yc(t,C);const M=C.tViews=k_(2,C,n,a,c,t.directiveRegistry,t.pipeRegistry,null,t.schemas,v);return null!==t.queries&&(t.queries.template(t,C),M.queries=t.queries.embeddedTView(C)),C}(C,v,f,t,e,n,a,c,d):v.data[C];os(M,!1);const O=f[11].createComment("");R_(v,f,O,M),Ze(O,f),N_(f,f[C]=RM(O,f,O,M)),Bl(M)&&mC(v,f,M),null!=d&&_C(f,M,p)}function xo(r){return ma(gn.lFrame.contextLView,20+r)}function I(r,t=on.Default){const e=it();return null===e?be(r,t):al(Bi(),e,Et(r),t)}function xe(r,t,e){const n=it();return Ao(n,il(),t)&&Bs($n(),Gi(),n,r,t,n[11],e,!1),xe}function BC(r,t,e,n,a){const d=a?"class":"style";NM(r,e,t.inputs[d],d,n)}function fe(r,t,e,n){const a=it(),c=$n(),d=20+r,p=a[11],f=a[d]=qy(p,t,gn.lFrame.currentNamespace),v=c.firstCreatePass?function(r,t,e,n,a,c,d){const p=t.consts,v=sp(t,r,2,a,Is(p,c));return vC(t,e,v,Is(p,d)),null!==v.attrs&&L_(v,v.attrs,!1),null!==v.mergedAttrs&&L_(v,v.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,v),v}(d,c,a,0,t,e,n):c.data[d];os(v,!0);const C=v.mergedAttrs;null!==C&&Kc(p,f,C);const M=v.classes;null!==M&&oC(p,f,M);const O=v.styles;null!==O&&ZD(p,f,O),64!=(64&v.flags)&&R_(c,a,f,v),0===gn.lFrame.elementDepthCount&&Ze(f,a),gn.lFrame.elementDepthCount++,Bl(v)&&(mC(c,a,v),function(r,t,e){if(Ku(t)){const a=t.directiveEnd;for(let c=t.directiveStart;c<a;c++){const d=r.data[c];d.contentQueries&&d.contentQueries(1,e[c],c)}}}(c,v,a)),null!==n&&_C(a,v)}function ge(){let r=Bi();Hc()?tl():(r=r.parent,os(r,!1));const t=r;gn.lFrame.elementDepthCount--;const e=$n();e.firstCreatePass&&(Yc(e,r),Ku(r)&&e.queries.elementEnd(r)),null!=t.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(t)&&BC(e,t,it(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(t)&&BC(e,t,it(),t.stylesWithoutHost,!1)}function St(r,t,e,n){fe(r,t,e,n),ge()}function zi(){return it()}function wg(r){return!!r&&"function"==typeof r.then}function wR(r){return!!r&&"function"==typeof r.subscribe}const V_=wR;function lt(r,t,e,n){const a=it(),c=$n(),d=Bi();return SR(c,a,a[11],d,r,t,!!e,n),lt}function Od(r,t){const e=Bi(),n=it(),a=$n();return SR(a,n,OM(as(a.data),e,n),e,r,t,!1),Od}function SR(r,t,e,n,a,c,d,p){const f=Bl(n),C=r.firstCreatePass&&xM(r),M=t[8],O=AM(t);let P=!0;if(3&n.type||p){const K=co(n,t),ve=p?p(K):K,Te=O.length,qe=p?pt=>p(Ui(pt[n.index])):n.index;if(Hi(e)){let pt=null;if(!p&&f&&(pt=function(r,t,e,n){const a=r.cleanup;if(null!=a)for(let c=0;c<a.length-1;c+=2){const d=a[c];if(d===e&&a[c+1]===n){const p=t[7],f=a[c+2];return p.length>f?p[f]:null}"string"==typeof d&&(c+=2)}return null}(r,t,a,n.index)),null!==pt)(pt.__ngLastListenerFn__||pt).__ngNextListenerFn__=c,pt.__ngLastListenerFn__=c,P=!1;else{c=VC(n,t,M,c,!1);const fn=e.listen(ve,a,c);O.push(c,fn),C&&C.push(a,qe,Te,Te+1)}}else c=VC(n,t,M,c,!0),ve.addEventListener(a,c,d),O.push(c),C&&C.push(a,qe,Te,d)}else c=VC(n,t,M,c,!1);const W=n.outputs;let ne;if(P&&null!==W&&(ne=W[a])){const K=ne.length;if(K)for(let ve=0;ve<K;ve+=2){const Un=t[ne[ve]][ne[ve+1]].subscribe(c),Xn=O.length;O.push(c,Un),C&&C.push(a,n.index,Xn,-(Xn+1))}}}function DR(r,t,e,n){try{return!1!==e(n)}catch(a){return kM(r,a),!1}}function VC(r,t,e,n,a){return function c(d){if(d===Function)return n;const p=2&r.flags?uo(r.index,t):t;0==(32&t[2])&&CC(p);let f=DR(t,0,n,d),v=c.__ngNextListenerFn__;for(;v;)f=DR(t,0,v,d)&&f,v=v.__ngNextListenerFn__;return a&&!1===f&&(d.preventDefault(),d.returnValue=!1),f}}function ct(r=1){return function(r){return(gn.lFrame.contextLView=function(r,t){for(;r>0;)t=t[15],r--;return t}(r,gn.lFrame.contextLView))[8]}(r)}function oV(r,t){let e=null;const n=function(r){const t=r.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(r);for(let a=0;a<t.length;a++){const c=t[a];if("*"!==c){if(null===n?nM(r,c,!0):cB(n,c))return a}else e=a}return e}function Tn(r){const t=it()[16][6];if(!t.projection){const n=t.projection=ue(r?r.length:1,null),a=n.slice();let c=t.child;for(;null!==c;){const d=r?oV(c,r):0;null!==d&&(a[d]?a[d].projectionNext=c:n[d]=c,a[d]=c),c=c.next}}}function At(r,t=0,e){const n=it(),a=$n(),c=sp(a,20+r,16,null,e||null);null===c.projection&&(c.projection=t),tl(),64!=(64&c.flags)&&function(r,t,e){QD(t[11],0,t,e,UD(r,e,t),zD(e.parent||t[6],e,t))}(a,n,c)}function HC(r,t,e){return UC(r,"",t,"",e),HC}function UC(r,t,e,n,a){const c=it(),d=fp(c,t,e,n);return d!==On&&Bs($n(),Gi(),c,r,d,c[11],a,!1),UC}function LR(r,t,e,n,a){const c=r[e+1],d=null===t;let p=n?Da(c):oc(c),f=!1;for(;0!==p&&(!1===f||d);){const C=r[p+1];lV(r[p],t)&&(f=!0,r[p+1]=n?lC(C):sC(C)),p=n?Da(C):oc(C)}f&&(r[e+1]=n?sC(c):lC(c))}function lV(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&yn(r,t)>=0}function ir(r,t,e){return xa(r,t,e,!1),ir}function Ct(r,t){return xa(r,t,null,!0),Ct}function xa(r,t,e,n){const a=it(),c=$n(),d=Mo(2);c.firstUpdatePass&&function(r,t,e,n){const a=r.data;if(null===a[e+1]){const c=a[pr()],d=function(r,t){return t>=r.expandoStartIndex}(r,e);(function(r,t){return 0!=(r.flags&(t?16:32))})(c,n)&&null===t&&!d&&(t=!1),t=function(r,t,e,n){const a=as(r);let c=n?t.residualClasses:t.residualStyles;if(null===a)0===(n?t.classBindings:t.styleBindings)&&(e=Sg(e=GC(null,r,t,e,n),t.attrs,n),c=null);else{const d=t.directiveStylingLast;if(-1===d||r[d]!==a)if(e=GC(a,r,t,e,n),null===c){let f=function(r,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==oc(n))return r[Da(n)]}(r,t,n);void 0!==f&&Array.isArray(f)&&(f=GC(null,r,t,f[1],n),f=Sg(f,t.attrs,n),function(r,t,e,n){r[Da(e?t.classBindings:t.styleBindings)]=n}(r,t,n,f))}else c=function(r,t,e){let n;const a=t.directiveEnd;for(let c=1+t.directiveStylingLast;c<a;c++)n=Sg(n,r[c].hostAttrs,e);return Sg(n,t.attrs,e)}(r,t,n)}return void 0!==c&&(n?t.residualClasses=c:t.residualStyles=c),e}(a,c,t,n),function(r,t,e,n,a,c){let d=c?t.classBindings:t.styleBindings,p=Da(d),f=oc(d);r[n]=e;let C,v=!1;if(Array.isArray(e)){const M=e;C=M[1],(null===C||yn(M,C)>0)&&(v=!0)}else C=e;if(a)if(0!==f){const O=Da(r[p+1]);r[n+1]=A_(O,p),0!==O&&(r[O+1]=aC(r[O+1],n)),r[p+1]=function(r,t){return 131071&r|t<<17}(r[p+1],n)}else r[n+1]=A_(p,0),0!==p&&(r[p+1]=aC(r[p+1],n)),p=n;else r[n+1]=A_(f,0),0===p?p=n:r[f+1]=aC(r[f+1],n),f=n;v&&(r[n+1]=sC(r[n+1])),LR(r,C,n,!0),LR(r,C,n,!1),function(r,t,e,n,a){const c=a?r.residualClasses:r.residualStyles;null!=c&&"string"==typeof t&&yn(c,t)>=0&&(e[n+1]=lC(e[n+1]))}(t,C,r,n,c),d=A_(p,f),c?t.classBindings=d:t.styleBindings=d}(a,c,t,e,d,n)}}(c,r,d,n),t!==On&&Ao(a,d,t)&&function(r,t,e,n,a,c,d,p){if(!(3&t.type))return;const f=r.data,v=f[p+1];H_(function(r){return 1==(1&r)}(v)?XR(f,t,e,a,oc(v),d):void 0)||(H_(c)||function(r){return 2==(2&r)}(v)&&(c=XR(f,null,e,a,p,d)),function(r,t,e,n,a){const c=Hi(r);if(t)a?c?r.addClass(e,n):e.classList.add(n):c?r.removeClass(e,n):e.classList.remove(n);else{let d=-1===n.indexOf("-")?void 0:Fs.DashCase;if(null==a)c?r.removeStyle(e,n,d):e.style.removeProperty(n);else{const p="string"==typeof a&&a.endsWith("!important");p&&(a=a.slice(0,-10),d|=Fs.Important),c?r.setStyle(e,n,a,d):e.style.setProperty(n,a,p?"important":"")}}}(n,d,Rs(pr(),e),a,c))}(c,c.data[pr()],a,a[11],r,a[d+1]=function(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=tt(Ko(r)))),r}(t,e),n,d)}function GC(r,t,e,n,a){let c=null;const d=e.directiveEnd;let p=e.directiveStylingLast;for(-1===p?p=e.directiveStart:p++;p<d&&(c=t[p],n=Sg(n,c.hostAttrs,a),c!==r);)p++;return null!==r&&(e.directiveStylingLast=p),n}function Sg(r,t,e){const n=e?1:2;let a=-1;if(null!==t)for(let c=0;c<t.length;c++){const d=t[c];"number"==typeof d?a=d:a===n&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Yt(r,d,!!e||t[++c]))}return void 0===r?null:r}function XR(r,t,e,n,a,c){const d=null===t;let p;for(;a>0;){const f=r[a],v=Array.isArray(f),C=v?f[1]:f,M=null===C;let O=e[a+1];O===On&&(O=M?fi:void 0);let P=M?Zt(O,n):C===n?O:void 0;if(v&&!H_(P)&&(P=Zt(f,n)),H_(P)&&(p=P,d))return p;const W=r[a+1];a=d?Da(W):oc(W)}if(null!==t){let f=c?t.residualClasses:t.residualStyles;null!=f&&(p=Zt(f,n))}return p}function H_(r){return void 0!==r}function Ot(r,t=""){const e=it(),n=$n(),a=r+20,c=n.firstCreatePass?sp(n,a,1,t,null):n.data[a],d=e[a]=function(r,t){return Hi(r)?r.createText(t):r.createTextNode(t)}(e[11],t);R_(n,e,d,c),os(c,!1)}function Qi(r){return zr("",r,""),Qi}function zr(r,t,e){const n=it(),a=fp(n,r,t,e);return a!==On&&ac(n,pr(),a),zr}function U_(r,t,e,n,a){const c=it(),d=function(r,t,e,n,a,c){const p=xd(r,ss(),e,a);return Mo(2),p?t+rn(e)+n+rn(a)+c:On}(c,r,t,e,n,a);return d!==On&&ac(c,pr(),d),U_}function WC(r,t,e,n,a,c,d){const p=it(),f=mp(p,r,t,e,n,a,c,d);return f!==On&&ac(p,pr(),f),WC}function Xr(r,t,e){const n=it();return Ao(n,il(),t)&&Bs($n(),Gi(),n,r,t,n[11],e,!0),Xr}function kd(r,t,e){const n=it();if(Ao(n,il(),t)){const c=$n(),d=Gi();Bs(c,d,n,r,t,OM(as(c.data),d,n),e,!0)}return kd}const Nd=void 0;var GV=["en",[["a","p"],["AM","PM"],Nd],[["AM","PM"],Nd,Nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nd,"{1} 'at' {0}",Nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const t=Math.floor(Math.abs(r)),e=r.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===e?1:5}];let wp={};function d0(r){return r in wp||(wp[r]=ri.ng&&ri.ng.common&&ri.ng.common.locales&&ri.ng.common.locales[r]),wp[r]}var Wt=(()=>((Wt=Wt||{})[Wt.LocaleId=0]="LocaleId",Wt[Wt.DayPeriodsFormat=1]="DayPeriodsFormat",Wt[Wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Wt[Wt.DaysFormat=3]="DaysFormat",Wt[Wt.DaysStandalone=4]="DaysStandalone",Wt[Wt.MonthsFormat=5]="MonthsFormat",Wt[Wt.MonthsStandalone=6]="MonthsStandalone",Wt[Wt.Eras=7]="Eras",Wt[Wt.FirstDayOfWeek=8]="FirstDayOfWeek",Wt[Wt.WeekendRange=9]="WeekendRange",Wt[Wt.DateFormat=10]="DateFormat",Wt[Wt.TimeFormat=11]="TimeFormat",Wt[Wt.DateTimeFormat=12]="DateTimeFormat",Wt[Wt.NumberSymbols=13]="NumberSymbols",Wt[Wt.NumberFormats=14]="NumberFormats",Wt[Wt.CurrencyCode=15]="CurrencyCode",Wt[Wt.CurrencySymbol=16]="CurrencySymbol",Wt[Wt.CurrencyName=17]="CurrencyName",Wt[Wt.Currencies=18]="Currencies",Wt[Wt.Directionality=19]="Directionality",Wt[Wt.PluralCase=20]="PluralCase",Wt[Wt.ExtraData=21]="ExtraData",Wt))();const G_="en-US";let h0=G_;function zC(r){$r(r,"Expected localeId to be defined"),"string"==typeof r&&(h0=r.toLowerCase().replace(/_/g,"-"))}function $C(r,t,e,n,a){if(r=Et(r),Array.isArray(r))for(let c=0;c<r.length;c++)$C(r[c],t,e,n,a);else{const c=$n(),d=it();let p=dp(r)?r:Et(r.provide),f=BM(r);const v=Bi(),C=1048575&v.providerIndexes,M=v.directiveStart,O=v.providerIndexes>>20;if(dp(r)||!r.multi){const P=new Jl(f,a,I),W=JC(p,t,a?C:C+O,M);-1===W?(po($o(v,d),c,p),KC(c,r,t.length),t.push(p),v.directiveStart++,v.directiveEnd++,a&&(v.providerIndexes+=1048576),e.push(P),d.push(P)):(e[W]=P,d[W]=P)}else{const P=JC(p,t,C+O,M),W=JC(p,t,C,C+O),ne=P>=0&&e[P],K=W>=0&&e[W];if(a&&!K||!a&&!ne){po($o(v,d),c,p);const ve=function(r,t,e,n,a){const c=new Jl(r,e,I);return c.multi=[],c.index=t,c.componentProviders=0,P0(c,a,n&&!e),c}(a?VH:BH,e.length,a,n,f);!a&&K&&(e[W].providerFactory=ve),KC(c,r,t.length,0),t.push(p),v.directiveStart++,v.directiveEnd++,a&&(v.providerIndexes+=1048576),e.push(ve),d.push(ve)}else KC(c,r,P>-1?P:W,P0(e[a?W:P],f,!a&&n));!a&&n&&K&&e[W].componentProviders++}}}function KC(r,t,e,n){const a=dp(t);if(a||function(r){return!!r.useClass}(t)){const d=(t.useClass||t).prototype.ngOnDestroy;if(d){const p=r.destroyHooks||(r.destroyHooks=[]);if(!a&&t.multi){const f=p.indexOf(e);-1===f?p.push(e,[n,d]):p[f+1].push(n,d)}else p.push(e,d)}}}function P0(r,t,e){return e&&r.componentProviders++,r.multi.push(t)-1}function JC(r,t,e,n){for(let a=e;a<n;a++)if(t[a]===r)return a;return-1}function BH(r,t,e,n){return QC(this.multi,[])}function VH(r,t,e,n){const a=this.multi;let c;if(this.providerFactory){const d=this.providerFactory.componentProviders,p=ll(e,e[1],this.providerFactory.index,n);c=p.slice(0,d),QC(a,c);for(let f=d;f<p.length;f++)c.push(p[f])}else c=[],QC(a,c);return c}function QC(r,t){for(let e=0;e<r.length;e++)t.push((0,r[e])());return t}function dt(r,t=[]){return e=>{e.providersResolver=(n,a)=>function(r,t,e){const n=$n();if(n.firstCreatePass){const a=Jr(r);$C(e,n.data,n.blueprint,a,!0),$C(t,n.data,n.blueprint,a,!1)}}(n,a?a(r):r,t)}}class F0{}const V0="ngComponent";class GH{resolveComponentFactory(t){throw function(r){const t=Error(`No component factory found for ${tt(r)}. Did you add it to @NgModule.entryComponents?`);return t[V0]=r,t}(t)}}let ka=(()=>{class r{}return r.NULL=new GH,r})();function Y_(...r){}function Dp(r,t){return new Qe(co(r,t))}const zH=function(){return Dp(Bi(),it())};let Qe=(()=>{class r{constructor(e){this.nativeElement=e}}return r.__NG_ELEMENT_ID__=zH,r})();function H0(r){return r instanceof Qe?r.nativeElement:r}class Ld{}let _l=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>YH(),r})();const YH=function(){const r=it(),e=uo(Bi().index,r);return function(r){return r[11]}(zo(e)?e:r)};let qC=(()=>{class r{}return r.\u0275prov=mt({token:r,providedIn:"root",factory:()=>null}),r})();class cu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const U0=new cu("12.2.13");class G0{constructor(){}supports(t){return Eg(t)}create(t){return new QH(t)}}const JH=(r,t)=>t;class QH{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||JH}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,a=0,c=null;for(;e||n;){const d=!n||e&&e.currentIndex<j0(n,a,c)?e:n,p=j0(d,a,c),f=d.currentIndex;if(d===n)a--,n=n._nextRemoved;else if(e=e._next,null==d.previousIndex)a++;else{c||(c=[]);const v=p-a,C=f-a;if(v!=C){for(let O=0;O<v;O++){const P=O<c.length?c[O]:c[O]=0,W=P+O;C<=W&&W<v&&(c[O]=P+1)}c[d.previousIndex]=C-v}}p!==f&&t(d,p,f)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Eg(t))throw new Error(`Error trying to diff '${tt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let a,c,d,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let p=0;p<this.length;p++)c=t[p],d=this._trackByFn(p,c),null!==e&&Object.is(e.trackById,d)?(n&&(e=this._verifyReinsertion(e,c,d,p)),Object.is(e.item,c)||this._addIdentityChange(e,c)):(e=this._mismatch(e,c,d,p),n=!0),e=e._next}else a=0,function(r,t){if(Array.isArray(r))for(let e=0;e<r.length;e++)t(r[e]);else{const e=r[hp()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,p=>{d=this._trackByFn(a,p),null!==e&&Object.is(e.trackById,d)?(n&&(e=this._verifyReinsertion(e,p,d,a)),Object.is(e.item,p)||this._addIdentityChange(e,p)):(e=this._mismatch(e,p,d,a),n=!0),e=e._next,a++}),this.length=a;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,a){let c;return null===t?c=this._itTail:(c=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,c,a)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,a))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,c,a)):t=this._addAfter(new ZH(e,n),c,a),t}_verifyReinsertion(t,e,n,a){let c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==c?t=this._reinsertAfter(c,t._prev,a):t.currentIndex!=a&&(t.currentIndex=a,this._addToMoves(t,a)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const a=t._prevRemoved,c=t._nextRemoved;return null===a?this._removalsHead=c:a._nextRemoved=c,null===c?this._removalsTail=a:c._prevRemoved=a,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const a=null===e?this._itHead:e._next;return t._next=a,t._prev=e,null===a?this._itTail=t:a._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new W0),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new W0),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ZH{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qH{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class W0{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new qH,this.map.set(e,n)),n.add(t)}get(t,e){const a=this.map.get(t);return a?a.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function j0(r,t,e){const n=r.previousIndex;if(null===n)return n;let a=0;return e&&n<e.length&&(a=e[n]),n+t+a}class z0{constructor(){}supports(t){return t instanceof Map||kC(t)}create(){return new eU}}class eU{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||kC(t)))throw new Error(`Error trying to diff '${tt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,a)=>{if(e&&e.key===a)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const c=this._getOrCreateRecordForKey(a,n);e=this._insertBeforeOrAppend(e,c)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const a=this._records.get(t);this._maybeAddToChanges(a,e);const c=a._prev,d=a._next;return c&&(c._next=d),d&&(d._prev=c),a._next=null,a._prev=null,a}const n=new tU(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class tU{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function X0(){return new fs([new G0])}let fs=(()=>{class r{constructor(e){this.factories=e}static create(e,n){if(null!=n){const a=n.factories.slice();e=e.concat(a)}return new r(e)}static extend(e){return{provide:r,useFactory:n=>r.create(e,n||X0()),deps:[[r,new go,new Ji]]}}find(e){const n=this.factories.find(a=>a.supports(e));if(null!=n)return n;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(r){return r.name||typeof r}(e)}'`)}}return r.\u0275prov=mt({token:r,providedIn:"root",factory:X0}),r})();function Y0(){return new Mp([new z0])}let Mp=(()=>{class r{constructor(e){this.factories=e}static create(e,n){if(n){const a=n.factories.slice();e=e.concat(a)}return new r(e)}static extend(e){return{provide:r,useFactory:n=>r.create(e,n||Y0()),deps:[[r,new go,new Ji]]}}find(e){const n=this.factories.find(a=>a.supports(e));if(n)return n;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return r.\u0275prov=mt({token:r,providedIn:"root",factory:Y0}),r})();function $_(r,t,e,n,a=!1){for(;null!==e;){const c=t[e.index];if(null!==c&&n.push(Ui(c)),lo(c))for(let p=10;p<c.length;p++){const f=c[p],v=f[1].firstChild;null!==v&&$_(f[1],f,v,n)}const d=e.type;if(8&d)$_(r,t,e.child,n);else if(32&d){const p=Ky(e,t);let f;for(;f=p();)n.push(f)}else if(16&d){const p=KD(t,e);if(Array.isArray(p))n.push(...p);else{const f=gg(t[16]);$_(f[1],f,p,n,!0)}}e=a?e.projectionNext:e.next}return n}class Ag{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return $_(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(lo(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(eC(t,n),oe(e,n))}this._attachedToViewContainer=!1}HD(this._lView[1],this._lView)}onDestroy(t){yM(this._lView[1],this._lView,null,t)}markForCheck(){CC(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){TC(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,t,e){Uc(!0);try{TC(r,t,e)}finally{Uc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(r,t){mg(r,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class iU extends Ag{constructor(t){super(t),this._view=t}detectChanges(){IM(this._view)}checkNoChanges(){!function(r){Uc(!0);try{IM(r)}finally{Uc(!1)}}(this._view)}get context(){return null}}const oU=function(r){return function(r,t,e){if(Ds(r)&&!e){const n=uo(r.index,t);return new Ag(n,n)}return 47&r.type?new Ag(t[16],t):null}(Bi(),it(),16==(16&r))};let un=(()=>{class r{}return r.__NG_ELEMENT_ID__=oU,r})();const lU=[new z0],uU=new fs([new G0]),dU=new Mp(lU),pU=function(){return K_(Bi(),it())};let oi=(()=>{class r{}return r.__NG_ELEMENT_ID__=pU,r})();const fU=oi,gU=class extends fU{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=_g(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const c=this._declarationLView[19];return null!==c&&(n[19]=c.createEmbeddedView(e)),vg(e,n,t),new Ag(n)}};function K_(r,t){return 4&r.type?new gU(t,r,Dp(r,t)):null}class vl{}class $0{}const vU=function(){return Q0(Bi(),it())};let ui=(()=>{class r{}return r.__NG_ELEMENT_ID__=vU,r})();const yU=ui,K0=class extends yU{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Dp(this._hostTNode,this._hostLView)}get injector(){return new Ns(this._hostTNode,this._hostLView)}get parentInjector(){const t=Or(this._hostTNode,this._hostLView);if(yr(t)){const e=Ys(t,this._hostLView),n=Os(t);return new Ns(e[1].data[n+8],e)}return new Ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=J0(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const a=t.createEmbeddedView(e||{});return this.insert(a,n),a}createComponent(t,e,n,a,c){const d=n||this.parentInjector;if(!c&&null==t.ngModule&&d){const f=d.get(vl,null);f&&(c=f)}const p=t.create(d,a,void 0,c);return this.insert(p.hostView,e),p}insert(t,e){const n=t._lView,a=n[1];if(function(r){return lo(r[3])}(n)){const C=this.indexOf(t);if(-1!==C)this.detach(C);else{const M=n[3],O=new K0(M,M[6],M[3]);O.detach(O.indexOf(t))}}const c=this._adjustIndex(e),d=this._lContainer;!function(r,t,e,n){const a=10+n,c=e.length;n>0&&(e[a-1][4]=t),n<c-10?(t[4]=e[a],z(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const d=t[17];null!==d&&e!==d&&function(r,t){const e=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===e?r[9]=[t]:e.push(t)}(d,t);const p=t[19];null!==p&&p.insertView(r),t[2]|=128}(a,n,d,c);const p=iC(c,d),f=n[11],v=M_(f,d[7]);return null!==v&&function(r,t,e,n,a,c){n[0]=a,n[6]=t,mg(r,n,e,1,a,c)}(a,d[6],f,n,v,p),t.attachToViewContainerRef(),z(eE(d),c,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=J0(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=eC(this._lContainer,e);n&&(oe(eE(this._lContainer),e),HD(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=eC(this._lContainer,e);return n&&null!=oe(eE(this._lContainer),e)?new Ag(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function J0(r){return r[8]}function eE(r){return r[8]||(r[8]=[])}function Q0(r,t){let e;const n=t[r.index];if(lo(n))e=n;else{let a;if(8&r.type)a=Ui(n);else{const c=t[11];a=c.createComment("");const d=co(r,t);Ad(c,M_(c,d),a,function(r,t){return Hi(r)?r.nextSibling(t):t.nextSibling}(c,d),!1)}t[r.index]=e=RM(n,t,a,r),N_(t,e)}return new K0(e,r,t)}const xp={};class _I extends ka{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Zi(t);return new bI(e,this.ngModule)}}function vI(r){const t=[];for(let e in r)r.hasOwnProperty(e)&&t.push({propName:r[e],templateName:e});return t}const _3=new We("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>OD});class bI extends F0{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function(r){return r.map(uB).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return vI(this.componentDef.inputs)}get outputs(){return vI(this.componentDef.outputs)}create(t,e,n,a){const c=(a=a||this.ngModule)?function(r,t){return{get:(e,n,a)=>{const c=r.get(e,xp,a);return c!==xp||n===xp?c:t.get(e,n,a)}}}(t,a.injector):t,d=c.get(Ld,zl),p=c.get(qC,null),f=d.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",C=n?function(r,t,e){if(Hi(r))return r.selectRootElement(t,e===$i.ShadowDom);let n="string"==typeof t?r.querySelector(t):t;return n.textContent="",n}(f,n,this.componentDef.encapsulation):qy(d.createRenderer(null,this.componentDef),v,function(r){const t=r.toLowerCase();return"svg"===t?Rh:"math"===t?"http://www.w3.org/1998/MathML/":null}(v)),M=this.componentDef.onPush?576:528,O=function(r,t){return{components:[],scheduler:r||OD,clean:$B,playerHandler:t||null,flags:0}}(),P=k_(0,null,null,1,0,null,null,null,null,null),W=_g(null,P,O,M,null,null,d,f,p,c);let ne,K;Xo(W);try{const ve=function(r,t,e,n,a,c){const d=e[1];e[20]=r;const f=sp(d,20,2,"#host",null),v=f.mergedAttrs=t.hostAttrs;null!==v&&(L_(f,v,!0),null!==r&&(Kc(a,r,v),null!==f.classes&&oC(a,r,f.classes),null!==f.styles&&ZD(a,r,f.styles)));const C=n.createRenderer(r,t),M=_g(e,_M(t),null,t.onPush?64:16,e[20],f,n,C,c||null,null);return d.firstCreatePass&&(po($o(f,e),d,t.type),SM(d,f),DM(f,e.length,1)),N_(e,M),e[20]=M}(C,this.componentDef,W,d,f);if(C)if(n)Kc(f,C,["ng-version",U0.full]);else{const{attrs:Te,classes:qe}=function(r){const t=[],e=[];let n=1,a=2;for(;n<r.length;){let c=r[n];if("string"==typeof c)2===a?""!==c&&t.push(c,r[++n]):8===a&&e.push(c);else{if(!Sa(a))break;a=c}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);Te&&Kc(f,C,Te),qe&&qe.length>0&&oC(f,C,qe.join(" "))}if(K=Bc(P,20),void 0!==e){const Te=K.projection=[];for(let qe=0;qe<this.ngContentSelectors.length;qe++){const pt=e[qe];Te.push(null!=pt?Array.from(pt):null)}}ne=function(r,t,e,n,a){const c=e[1],d=function(r,t,e){const n=Bi();r.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),MM(r,n,t,ap(r,t,1,null),e));const a=ll(t,r,n.directiveStart,n);Ze(a,t);const c=co(n,t);return c&&Ze(c,t),a}(c,e,t);if(n.components.push(d),r[8]=d,a&&a.forEach(f=>f(d,t)),t.contentQueries){const f=Bi();t.contentQueries(1,d,f.directiveStart)}const p=Bi();return!c.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Ro(p.index),TM(e[1],p,0,p.directiveStart,p.directiveEnd,t),wM(t,d)),d}(ve,this.componentDef,W,O,[C2]),vg(P,W,null)}finally{Xc()}return new y3(this.componentType,ne,Dp(K,W),W,K)}}class y3 extends class{}{constructor(t,e,n,a,c){super(),this.location=n,this._rootLView=a,this._tNode=c,this.instance=e,this.hostView=this.changeDetectorRef=new iU(a),this.componentType=t}get injector(){return new Ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Op=new Map;class T3 extends vl{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _I(this);const n=oo(t),a=function(r){return r[_h]||null}(t);a&&zC(a),this._bootstrapComponents=hl(n.bootstrap),this._r3Injector=FM(t,e,[{provide:vl,useValue:this},{provide:ka,useValue:this.componentFactoryResolver}],tt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Yn.THROW_IF_NOT_FOUND,n=on.Default){return t===Yn||t===vl||t===cp?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class pE extends $0{constructor(t){super(),this.moduleType=t,null!==oo(t)&&function(r){const t=new Set;!function e(n){const a=oo(n,!0),c=a.id;null!==c&&(function(r,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${r} - ${tt(t)} vs ${tt(t.name)}`)}(c,Op.get(c),n),Op.set(c,n));const d=hl(a.imports);for(const p of d)t.has(p)||(t.add(p),e(p))}(r)}(t)}create(t){return new T3(this.moduleType,t)}}function Bd(r,t,e,n){return EI(it(),br(),r,t,e,n)}function EI(r,t,e,n,a,c){const d=t+e;return Ao(r,d,a)?function(r,t,e){return r[t]=e}(r,d+1,c?n.call(c,a):n(a)):function(r,t){const e=r[t];return e===On?void 0:e}(r,d+1)}function Vd(r,t){const e=$n();let n;const a=r+20;e.firstCreatePass?(n=function(r,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(r===n.name)return n}throw new Rr("302",`The pipe '${r}' could not be found!`)}(t,e.pipeRegistry),e.data[a]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(a,n.onDestroy)):n=e.data[a];const c=n.factory||(n.factory=ga(n.type)),d=Uo(I);try{const p=pd(!1),f=c();return pd(p),function(r,t,e,n){e>=r.data.length&&(r.data[e]=null,r.blueprint[e]=null),t[e]=n}(e,it(),a,f),f}finally{Uo(d)}}function Hd(r,t,e){const n=r+20,a=it(),c=ma(a,n);return function(r,t){Ra.isWrapped(t)&&(t=Ra.unwrap(t),r[ss()]=On);return t}(a,function(r,t){return r[1].data[t].pure}(a,n)?EI(a,br(),t,c.transform,e,c):c.transform(e))}function fE(r){return t=>{setTimeout(r,void 0,t)}}const nt=class extends B{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var a,c,d;let p=t,f=e||(()=>null),v=n;if(t&&"object"==typeof t){const M=t;p=null===(a=M.next)||void 0===a?void 0:a.bind(M),f=null===(c=M.error)||void 0===c?void 0:c.bind(M),v=null===(d=M.complete)||void 0===d?void 0:d.bind(M)}this.__isAsync&&(f=fE(f),p&&(p=fE(p)),v&&(v=fE(v)));const C=super.subscribe({next:p,error:f,complete:v});return t instanceof D&&t.add(C),C}};function B3(){return this._results[hp()]()}class Vs{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=hp(),n=Vs.prototype;n[e]||(n[e]=B3)}get changes(){return this._changes||(this._changes=new nt)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const a=k(t);(this._changesDetected=!function(r,t,e){if(r.length!==t.length)return!1;for(let n=0;n<r.length;n++){let a=r[n],c=t[n];if(e&&(a=e(a),c=e(c)),c!==a)return!1}return!0}(n._results,a,e))&&(n._results=a,n.length=a.length,n.last=a[this.length-1],n.first=a[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class gE{constructor(t){this.queryList=t,this.matches=null}clone(){return new gE(this.queryList)}setDirty(){this.queryList.setDirty()}}class mE{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,a=[];for(let c=0;c<n;c++){const d=e.getByIndex(c);a.push(this.queries[d.indexInDeclarationView].clone())}return new mE(a)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==xI(t,e).matches&&this.queries[e].setDirty()}}class MI{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class _E{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const a=null!==e?e.length:0,c=this.getByIndex(n).embeddedTView(t,a);c&&(c.indexInDeclarationView=n,null!==e?e.push(c):e=[c])}return null!==e?new _E(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class vE{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new vE(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let a=0;a<n.length;a++){const c=n[a];this.matchTNodeWithReadOption(t,e,U3(e,c)),this.matchTNodeWithReadOption(t,e,Qc(e,t,c,!1,!1))}else n===oi?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Qc(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const a=this.metadata.read;if(null!==a)if(a===Qe||a===ui||a===oi&&4&e.type)this.addMatch(e.index,-2);else{const c=Qc(e,t,a,!1,!1);null!==c&&this.addMatch(e.index,c)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function U3(r,t){const e=r.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function W3(r,t,e,n){return-1===e?function(r,t){return 11&r.type?Dp(r,t):4&r.type?K_(r,t):null}(t,r):-2===e?function(r,t,e){return e===Qe?Dp(t,r):e===oi?K_(t,r):e===ui?Q0(t,r):void 0}(r,t,n):ll(r,r[1],e,t)}function RI(r,t,e,n){const a=t[19].queries[n];if(null===a.matches){const c=r.data,d=e.matches,p=[];for(let f=0;f<d.length;f+=2){const v=d[f];p.push(v<0?null:W3(t,c[v],d[f+1],e.metadata.read))}a.matches=p}return a.matches}function bE(r,t,e,n){const a=r.queries.getByIndex(e),c=a.matches;if(null!==c){const d=RI(r,t,a,e);for(let p=0;p<c.length;p+=2){const f=c[p];if(f>0)n.push(d[p/2]);else{const v=c[p+1],C=t[-f];for(let M=10;M<C.length;M++){const O=C[M];O[17]===O[3]&&bE(O[1],O,v,n)}if(null!==C[9]){const M=C[9];for(let O=0;O<M.length;O++){const P=M[O];bE(P[1],P,v,n)}}}}}return n}function je(r){const t=it(),e=$n(),n=Oh();ho(n+1);const a=xI(e,n);if(r.dirty&&_a(t)===(2==(2&a.metadata.flags))){if(null===a.matches)r.reset([]);else{const c=a.crossesNgTemplate?bE(e,t,n,[]):RI(e,t,a,n);r.reset(c,H0),r.notifyOnChanges()}return!0}return!1}function an(r,t,e){const n=$n();n.firstCreatePass&&(AI(n,new MI(r,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),II(n,it(),t)}function qt(r,t,e,n){const a=$n();if(a.firstCreatePass){const c=Bi();AI(a,new MI(t,e,n),c.index),function(r,t){const e=r.contentQueries||(r.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(r.queries.length-1,t)}(a,r),2==(2&e)&&(a.staticContentQueries=!0)}II(a,it(),e)}function ze(){return function(r,t){return r[19].queries[t].queryList}(it(),Oh())}function II(r,t,e){const n=new Vs(4==(4&e));yM(r,t,n,n.destroy),null===t[19]&&(t[19]=new mE),t[19].queries.push(new gE(n))}function AI(r,t,e){null===r.queries&&(r.queries=new _E),r.queries.track(new vE(t,e))}function xI(r,t){return r.queries.getByIndex(t)}const Np=new We("Application Initializer");let Lp=(()=>{class r{constructor(e){this.appInits=e,this.resolve=Y_,this.reject=Y_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,a)=>{this.resolve=n,this.reject=a})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let a=0;a<this.appInits.length;a++){const c=this.appInits[a]();if(wg(c))e.push(c);else if(V_(c)){const d=new Promise((p,f)=>{c.subscribe({complete:p,error:f})});e.push(d)}}Promise.all(e).then(()=>{n()}).catch(a=>{this.reject(a)}),0===e.length&&n(),this.initialized=!0}}return r.\u0275fac=function(e){return new(e||r)(be(Np,8))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();const Gg=new We("AppId"),bG={provide:Gg,useFactory:function(){return`${SE()}${SE()}${SE()}`},deps:[]};function SE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const JI=new We("Platform Initializer"),Pp=new We("Platform ID"),QI=new We("appBootstrapListener");let iv=(()=>{class r{log(e){console.log(e)}warn(e){console.warn(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();const cc=new We("LocaleId"),ZI=new We("DefaultCurrencyCode");class CG{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const DE=function(r){return new pE(r)},EG=DE,TG=function(r){return Promise.resolve(DE(r))},qI=function(r){const t=DE(r),n=hl(oo(r).declarations).reduce((a,c)=>{const d=Zi(c);return d&&a.push(new bI(d)),a},[]);return new CG(t,n)},wG=qI,SG=function(r){return Promise.resolve(qI(r))};let Ud=(()=>{class r{constructor(){this.compileModuleSync=EG,this.compileModuleAsync=TG,this.compileModuleAndAllComponentsSync=wG,this.compileModuleAndAllComponentsAsync=SG}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();const RG=(()=>Promise.resolve(0))();function ME(r){"undefined"==typeof Zone?RG.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Pt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!n&&e,a.shouldCoalesceRunChangeDetection=n,a.lastRequestAnimationFrameId=-1,a.nativeRequestAnimationFrame=function(){let r=ri.requestAnimationFrame,t=ri.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&t){const e=r[Zone.__symbol__("OriginalDelegate")];e&&(r=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(r){const t=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(ri,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,IE(r),r.isCheckStableRunning=!0,RE(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),IE(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,a,c,d,p)=>{try{return eA(r),e.invokeTask(a,c,d,p)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===c.type||r.shouldCoalesceRunChangeDetection)&&t(),tA(r)}},onInvoke:(e,n,a,c,d,p,f)=>{try{return eA(r),e.invoke(a,c,d,p,f)}finally{r.shouldCoalesceRunChangeDetection&&t(),tA(r)}},onHasTask:(e,n,a,c)=>{e.hasTask(a,c),n===a&&("microTask"==c.change?(r._hasPendingMicrotasks=c.microTask,IE(r),RE(r)):"macroTask"==c.change&&(r.hasPendingMacrotasks=c.macroTask))},onHandleError:(e,n,a,c)=>(e.handleError(a,c),r.runOutsideAngular(()=>r.onError.emit(c)),!1)})}(a)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Pt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,a){const c=this._inner,d=c.scheduleEventTask("NgZoneEvent: "+a,t,AG,Y_,Y_);try{return c.runTask(d,e,n)}finally{c.cancelTask(d)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const AG={};function RE(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function IE(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function eA(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function tA(r){r._nesting--,RE(r)}class kG{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,a){return t.apply(e,n)}}let AE=(()=>{class r{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pt.assertNotInAngularZone(),ME(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ME(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,a){let c=-1;n&&n>0&&(c=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==c),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:c,updateCb:a})}whenStable(e,n,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,a),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,a){return[]}}return r.\u0275fac=function(e){return new(e||r)(be(Pt))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),nA=(()=>{class r{constructor(){this._applications=new Map,xE.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return xE.findTestabilityInTree(this,e,n)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();class NG{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let xE=new NG,iA=!0,rA=!1;function OE(){return rA=!0,iA}let Pa;const oA=new We("AllowMultipleToken");class kE{constructor(t,e){this.name=t,this.token=e}}function sA(r,t,e=[]){const n=`Platform: ${t}`,a=new We(n);return(c=[])=>{let d=aA();if(!d||d.injector.get(oA,!1))if(r)r(e.concat(c).concat({provide:a,useValue:!0}));else{const p=e.concat(c).concat({provide:a,useValue:!0},{provide:bg,useValue:"platform"});!function(r){if(Pa&&!Pa.destroyed&&!Pa.injector.get(oA,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Pa=r.get(lA);const t=r.get(JI,null);t&&t.forEach(e=>e())}(Yn.create({providers:p,name:n}))}return function(r){const t=aA();if(!t)throw new Error("No platform exists!");if(!t.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(a)}}function aA(){return Pa&&!Pa.destroyed?Pa:null}let lA=(()=>{class r{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const p=function(r,t){let e;return e="noop"===r?new kG:("zone.js"===r?void 0:r)||new Pt({enableLongStackTrace:OE(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(n?n.ngZone:void 0,{ngZoneEventCoalescing:n&&n.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:n&&n.ngZoneRunCoalescing||!1}),f=[{provide:Pt,useValue:p}];return p.run(()=>{const v=Yn.create({providers:f,parent:this.injector,name:e.moduleType.name}),C=e.create(v),M=C.injector.get(ps,null);if(!M)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return p.runOutsideAngular(()=>{const O=p.onError.subscribe({next:P=>{M.handleError(P)}});C.onDestroy(()=>{NE(this._modules,C),O.unsubscribe()})}),function(r,t,e){try{const n=e();return wg(n)?n.catch(a=>{throw t.runOutsideAngular(()=>r.handleError(a)),a}):n}catch(n){throw t.runOutsideAngular(()=>r.handleError(n)),n}}(M,p,()=>{const O=C.injector.get(Lp);return O.runInitializers(),O.donePromise.then(()=>(zC(C.injector.get(cc,G_)||G_),this._moduleDoBootstrap(C),C))})})}bootstrapModule(e,n=[]){const a=cA({},n);return function(r,t,e){const n=new pE(e);return Promise.resolve(n)}(0,0,e).then(c=>this.bootstrapModuleFactory(c,a))}_moduleDoBootstrap(e){const n=e.injector.get(du);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(a=>n.bootstrap(a));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${tt(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(e){return new(e||r)(be(Yn))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();function cA(r,t){return Array.isArray(t)?t.reduce(cA,r):Object.assign(Object.assign({},r),t)}let du=(()=>{class r{constructor(e,n,a,c,d){this._zone=e,this._injector=n,this._exceptionHandler=a,this._componentFactoryResolver=c,this._initStatus=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new Z(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),f=new Z(v=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Pt.assertNotInAngularZone(),ME(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Pt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{C.unsubscribe(),M.unsubscribe()}});this.isStable=Vt(p,f.pipe(Dt()))}bootstrap(e,n){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let a;a=e instanceof F0?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(a.componentType);const c=function(r){return r.isBoundToModule}(a)?void 0:this._injector.get(vl),p=a.create(Yn.NULL,[],n||a.selector,c),f=p.location.nativeElement,v=p.injector.get(AE,null),C=v&&p.injector.get(nA);return v&&C&&C.registerApplication(f,v),p.onDestroy(()=>{this.detachView(p.hostView),NE(this.components,p),C&&C.unregisterApplication(f)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;NE(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(QI,[]).concat(this._bootstrapListeners).forEach(a=>a(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(e){return new(e||r)(be(Pt),be(Yn),be(ps),be(ka),be(Lp))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();function NE(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}class ov{}class KG{}const JG={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let QG=(()=>{class r{constructor(e,n){this._compiler=e,this._config=n||JG}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[n,a]=e.split("#");return void 0===a&&(a="default"),m(98255)(n).then(c=>c[a]).then(c=>pA(c,n,a)).then(c=>this._compiler.compileModuleAsync(c))}loadFactory(e){let[n,a]=e.split("#"),c="NgFactory";return void 0===a&&(a="default",c=""),m(98255)(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then(d=>d[a+c]).then(d=>pA(d,n,a))}}return r.\u0275fac=function(e){return new(e||r)(be(Ud),be(KG,8))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();function pA(r,t,e){if(!r)throw new Error(`Cannot find '${e}' in '${t}'`);return r}const aW=sA(null,"core",[{provide:Pp,useValue:"unknown"},{provide:lA,deps:[Yn]},{provide:nA,deps:[]},{provide:iv,deps:[]}]),hW=[{provide:du,useClass:du,deps:[Pt,Yn,ps,ka,Lp]},{provide:_3,deps:[Pt],useFactory:function(r){let t=[];return r.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Lp,useClass:Lp,deps:[[new Ji,Np]]},{provide:Ud,useClass:Ud,deps:[]},bG,{provide:fs,useFactory:function(){return uU},deps:[]},{provide:Mp,useFactory:function(){return dU},deps:[]},{provide:cc,useFactory:function(r){return zC(r=r||"undefined"!=typeof $localize&&$localize.locale||G_),r},deps:[[new nu(cc),new Ji,new go]]},{provide:ZI,useValue:"USD"}];let fW=(()=>{class r{constructor(e){}}return r.\u0275fac=function(e){return new(e||r)(be(du))},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:hW}),r})(),gv=null;function bl(){return gv}const xt=new We("DocumentToken");let jd=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({factory:pj,token:r,providedIn:"platform"}),r})();function pj(){return be(FA)}const fj=new We("Location Initialized");let FA=(()=>{class r extends jd{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bl().getBaseHref(this._doc)}onPopState(e){const n=bl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=bl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,a){BA()?this._history.pushState(e,n,a):this.location.hash=a}replaceState(e,n,a){BA()?this._history.replaceState(e,n,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(be(xt))},r.\u0275prov=mt({factory:gj,token:r,providedIn:"platform"}),r})();function BA(){return!!window.history.pushState}function gj(){return new FA(be(xt))}function KE(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function VA(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function dc(r){return r&&"?"!==r[0]?"?"+r:r}let Vp=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({factory:mj,token:r,providedIn:"root"}),r})();function mj(r){const t=be(xt).location;return new HA(be(jd),t&&t.origin||"")}const JE=new We("appBaseHref");let HA=(()=>{class r extends Vp{constructor(e,n){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return KE(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+dc(this._platformLocation.search),a=this._platformLocation.hash;return a&&e?`${n}${a}`:n}pushState(e,n,a,c){const d=this.prepareExternalUrl(a+dc(c));this._platformLocation.pushState(e,n,d)}replaceState(e,n,a,c){const d=this.prepareExternalUrl(a+dc(c));this._platformLocation.replaceState(e,n,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,a;null===(a=(n=this._platformLocation).historyGo)||void 0===a||a.call(n,e)}}return r.\u0275fac=function(e){return new(e||r)(be(jd),be(JE,8))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),_j=(()=>{class r extends Vp{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=KE(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,a,c){let d=this.prepareExternalUrl(a+dc(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,n,d)}replaceState(e,n,a,c){let d=this.prepareExternalUrl(a+dc(c));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,a;null===(a=(n=this._platformLocation).historyGo)||void 0===a||a.call(n,e)}}return r.\u0275fac=function(e){return new(e||r)(be(jd),be(JE,8))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),Hp=(()=>{class r{constructor(e,n){this._subject=new nt,this._urlChangeListeners=[],this._platformStrategy=e;const a=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=VA(UA(a)),this._platformStrategy.onPopState(c=>{this._subject.emit({url:this.path(!0),pop:!0,state:c.state,type:c.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+dc(n))}normalize(e){return r.stripTrailingSlash(function(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,UA(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,n="",a=null){this._platformStrategy.pushState(a,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+dc(n)),a)}replaceState(e,n="",a=null){this._platformStrategy.replaceState(a,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+dc(n)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var n,a;null===(a=(n=this._platformStrategy).historyGo)||void 0===a||a.call(n,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(a=>a(e,n))}subscribe(e,n,a){return this._subject.subscribe({next:e,error:n,complete:a})}}return r.\u0275fac=function(e){return new(e||r)(be(Vp),be(jd))},r.normalizeQueryParams=dc,r.joinWithSlash=KE,r.stripTrailingSlash=VA,r.\u0275prov=mt({factory:vj,token:r,providedIn:"root"}),r})();function vj(){return new Hp(be(Vp),be(jd))}function UA(r){return r.replace(/\/index.html$/,"")}var kr=(()=>((kr=kr||{})[kr.Zero=0]="Zero",kr[kr.One=1]="One",kr[kr.Two=2]="Two",kr[kr.Few=3]="Few",kr[kr.Many=4]="Many",kr[kr.Other=5]="Other",kr))();const Dj=function(r){return function(r){const t=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let e=d0(t);if(e)return e;const n=t.split("-")[0];if(e=d0(n),e)return e;if("en"===n)return GV;throw new Error(`Missing locale data for the locale "${r}".`)}(r)[Wt.PluralCase]};class Sv{}let tz=(()=>{class r extends Sv{constructor(e){super(),this.locale=e}getPluralCategory(e,n){switch(Dj(n||this.locale)(e)){case kr.Zero:return"zero";case kr.One:return"one";case kr.Two:return"two";case kr.Few:return"few";case kr.Many:return"many";default:return"other"}}}return r.\u0275fac=function(e){return new(e||r)(be(cc))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();function JA(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const n=e.indexOf("="),[a,c]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(a.trim()===t)return decodeURIComponent(c)}return null}let zd=(()=>{class r{constructor(e,n,a,c){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=a,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Eg(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${tt(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(a=>{n?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return r.\u0275fac=function(e){return new(e||r)(I(fs),I(Mp),I(Qe),I(_l))},r.\u0275dir=Ce({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),r})();class iz{constructor(t,e,n,a){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pu=(()=>{class r{constructor(e,n,a){this._viewContainer=e,this._template=n,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(n){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(r){return r.name||typeof r}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=[];e.forEachOperation((a,c,d)=>{if(null==a.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new iz(null,this._ngForOf,-1,-1),null===d?void 0:d),f=new QA(a,p);n.push(f)}else if(null==d)this._viewContainer.remove(null===c?void 0:c);else if(null!==c){const p=this._viewContainer.get(c);this._viewContainer.move(p,d);const f=new QA(a,p);n.push(f)}});for(let a=0;a<n.length;a++)this._perViewChange(n[a].view,n[a].record);for(let a=0,c=this._viewContainer.length;a<c;a++){const d=this._viewContainer.get(a);d.context.index=a,d.context.count=c,d.context.ngForOf=this._ngForOf}e.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(e,n){e.context.$implicit=n.item}static ngTemplateContextGuard(e,n){return!0}}return r.\u0275fac=function(e){return new(e||r)(I(ui),I(oi),I(fs))},r.\u0275dir=Ce({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),r})();class QA{constructor(t,e){this.record=t,this.view=e}}let eo=(()=>{class r{constructor(e,n){this._viewContainer=e,this._context=new oz,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ZA("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ZA("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return r.\u0275fac=function(e){return new(e||r)(I(ui),I(oi))},r.\u0275dir=Ce({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class oz{constructor(){this.$implicit=null,this.ngIf=null}}function ZA(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${tt(t)}'.`)}class oT{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let yl=(()=>{class r{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ce({type:r,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),r})(),fu=(()=>{class r{constructor(e,n,a){this.ngSwitch=a,a._addCase(),this._view=new oT(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return r.\u0275fac=function(e){return new(e||r)(I(ui),I(oi),I(yl,9))},r.\u0275dir=Ce({type:r,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),r})();class az{createSubscription(t,e){return t.subscribe({next:e,error:n=>{throw n}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class lz{createSubscription(t,e){return t.then(e,n=>{throw n})}dispose(t){}onDestroy(t){}}const cz=new lz,uz=new az;let cT=(()=>{class r{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if(wg(e))return cz;if(wR(e))return uz;throw function(r,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${tt(r)}'`)}(r,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return r.\u0275fac=function(e){return new(e||r)(I(un,16))},r.\u0275pipe=gi({name:"async",type:r,pure:!1}),r})(),ex=(()=>{class r{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=tx}transform(e,n=tx){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const a=this.differ.diff(e),c=n!==this.compareFn;return a&&(this.keyValues=[],a.forEachItem(d=>{this.keyValues.push(function(r,t){return{key:r,value:t}}(d.key,d.currentValue))})),(a||c)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}}return r.\u0275fac=function(e){return new(e||r)(I(Mp,16))},r.\u0275pipe=gi({name:"keyvalue",type:r,pure:!1}),r})();function tx(r,t){const e=r.key,n=t.key;if(e===n)return 0;if(void 0===e)return 1;if(void 0===n)return-1;if(null===e)return 1;if(null===n)return-1;if("string"==typeof e&&"string"==typeof n)return e<n?-1:1;if("number"==typeof e&&"number"==typeof n)return e-n;if("boolean"==typeof e&&"boolean"==typeof n)return e<n?-1:1;const a=String(e),c=String(n);return a==c?0:a<c?-1:1}let Lr=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[{provide:Sv,useClass:tz}]}),r})();const nx="browser";let ix=(()=>{class r{}return r.\u0275prov=mt({token:r,providedIn:"root",factory:()=>new Iz(be(xt),window)}),r})();class Iz{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(r,t){const e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const n=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let a=n.currentNode;for(;a;){const c=a.shadowRoot;if(c){const d=c.getElementById(t)||c.querySelector(`[name="${t}"]`);if(d)return d}a=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,a=e.top+this.window.pageYOffset,c=this.offset();this.window.scrollTo(n-c[0],a-c[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=rx(this.window.history)||rx(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function rx(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class ox{}class hT extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(r){gv||(gv=r)}(new hT)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Kg=Kg||document.querySelector("base"),Kg?Kg.getAttribute("href"):null);return null==e?null:function(r){Dv=Dv||document.createElement("a"),Dv.setAttribute("href",r);const t=Dv.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Kg=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return JA(document.cookie,t)}}let Dv,Kg=null;const sx=new We("TRANSITION_ID"),Lz=[{provide:Np,useFactory:function(r,t,e){return()=>{e.get(Lp).donePromise.then(()=>{const n=bl(),a=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let c=0;c<a.length;c++)n.remove(a[c])})}},deps:[sx,xt,Yn],multi:!0}];class pT{static init(){!function(r){xE=r}(new pT)}addToWindow(t){ri.getAngularTestability=(n,a=!0)=>{const c=t.findTestabilityInTree(n,a);if(null==c)throw new Error("Could not find testability for element.");return c},ri.getAllAngularTestabilities=()=>t.getAllTestabilities(),ri.getAllAngularRootElements=()=>t.getAllRootElements(),ri.frameworkStabilizers||(ri.frameworkStabilizers=[]),ri.frameworkStabilizers.push(n=>{const a=ri.getAllAngularTestabilities();let c=a.length,d=!1;const p=function(f){d=d||f,c--,0==c&&n(d)};a.forEach(function(f){f.whenStable(p)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const a=t.getTestability(e);return null!=a?a:n?bl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Pz=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();const Jg=new We("EventManagerPlugins");let Rv=(()=>{class r{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(a=>a.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,a){return this._findPluginFor(n).addEventListener(e,n,a)}addGlobalEventListener(e,n,a){return this._findPluginFor(n).addGlobalEventListener(e,n,a)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const a=this._plugins;for(let c=0;c<a.length;c++){const d=a[c];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(be(Jg),be(Pt))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();class fT{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const a=bl().getGlobalEventTarget(this._doc,t);if(!a)throw new Error(`Unsupported event target ${a} for event ${e}`);return this.addEventListener(a,e,n)}}let lx=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),n.add(a))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),Qg=(()=>{class r extends lx{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,a){e.forEach(c=>{const d=this._doc.createElement("style");d.textContent=c,a.push(n.appendChild(d))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(cx),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,a)=>{this._addStylesToHost(e,a,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(cx))}}return r.\u0275fac=function(e){return new(e||r)(be(xt))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();function cx(r){bl().remove(r)}const gT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},mT=/%COMP%/g;function Iv(r,t,e){for(let n=0;n<t.length;n++){let a=t[n];Array.isArray(a)?Iv(r,a,e):(a=a.replace(mT,r),e.push(a))}return e}function hx(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let Av=(()=>{class r{constructor(e,n,a){this.eventManager=e,this.sharedStylesHost=n,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new _T(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case $i.Emulated:{let a=this.rendererByCompId.get(n.id);return a||(a=new Qz(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,a)),a.applyToHost(e),a}case 1:case $i.ShadowDom:return new Zz(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const a=Iv(n.id,n.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(be(Rv),be(Qg),be(Gg))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();class _T{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(gT[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,a){if(a){e=a+":"+e;const c=gT[a];c?t.setAttributeNS(c,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const a=gT[n];a?t.removeAttributeNS(a,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,a){a&(Fs.DashCase|Fs.Important)?t.style.setProperty(e,n,a&Fs.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Fs.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,hx(n)):this.eventManager.addEventListener(t,e,hx(n))}}class Qz extends _T{constructor(t,e,n,a){super(t),this.component=n;const c=Iv(a+"-"+n.id,n.styles,[]);e.addStyles(c),this.contentAttr=function(r){return"_ngcontent-%COMP%".replace(mT,r)}(a+"-"+n.id),this.hostAttr=function(r){return"_nghost-%COMP%".replace(mT,r)}(a+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Zz extends _T{constructor(t,e,n,a){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Iv(a.id,a.styles,[]);for(let d=0;d<c.length;d++){const p=document.createElement("style");p.textContent=c[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let qz=(()=>{class r extends fT{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,a){return e.addEventListener(n,a,!1),()=>this.removeEventListener(e,n,a)}removeEventListener(e,n,a){return e.removeEventListener(n,a)}}return r.\u0275fac=function(e){return new(e||r)(be(xt))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();const gx=["alt","control","meta","shift"],s8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mx={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},a8={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let l8=(()=>{class r extends fT{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,n,a){const c=r.parseEventName(n),d=r.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bl().onAndCancel(e,c.domEventName,d))}static parseEventName(e){const n=e.toLowerCase().split("."),a=n.shift();if(0===n.length||"keydown"!==a&&"keyup"!==a)return null;const c=r._normalizeKey(n.pop());let d="";if(gx.forEach(f=>{const v=n.indexOf(f);v>-1&&(n.splice(v,1),d+=f+".")}),d+=c,0!=n.length||0===c.length)return null;const p={};return p.domEventName=a,p.fullKey=d,p}static getEventFullKey(e){let n="",a=function(r){let t=r.key;if(null==t){if(t=r.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===r.location&&mx.hasOwnProperty(t)&&(t=mx[t]))}return s8[t]||t}(e);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),gx.forEach(c=>{c!=a&&a8[c](e)&&(n+=c+".")}),n+=a,n}static eventCallback(e,n,a){return c=>{r.getEventFullKey(c)===e&&a.runGuarded(()=>n(c))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return r.\u0275fac=function(e){return new(e||r)(be(xt))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),Up=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({factory:function(){return be(bT)},token:r,providedIn:"root"}),r})(),bT=(()=>{class r extends Up{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case ci.NONE:return n;case ci.HTML:return Ps(n,"HTML")?Ko(n):w_(this._doc,String(n)).toString();case ci.STYLE:return Ps(n,"Style")?Ko(n):n;case ci.SCRIPT:if(Ps(n,"Script"))return Ko(n);throw new Error("unsafe value used in a script context");case ci.URL:return f_(n),Ps(n,"URL")?Ko(n):Rd(String(n));case ci.RESOURCE_URL:if(Ps(n,"ResourceURL"))return Ko(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function(r){return new Ny(r)}(e)}bypassSecurityTrustStyle(e){return function(r){return new tp(r)}(e)}bypassSecurityTrustScript(e){return function(r){return new Ly(r)}(e)}bypassSecurityTrustUrl(e){return function(r){return new TD(r)}(e)}bypassSecurityTrustResourceUrl(e){return function(r){return new Py(r)}(e)}}return r.\u0275fac=function(e){return new(e||r)(be(xt))},r.\u0275prov=mt({factory:function(){return function(r){return new bT(r.get(xt))}(be(cp))},token:r,providedIn:"root"}),r})();const m8=sA(aW,"browser",[{provide:Pp,useValue:nx},{provide:JI,useValue:function(){hT.makeCurrent(),pT.init()},multi:!0},{provide:xt,useFactory:function(){return function(r){Ms=r}(document),document},deps:[]}]),_8=[[],{provide:bg,useValue:"root"},{provide:ps,useFactory:function(){return new ps},deps:[]},{provide:Jg,useClass:qz,multi:!0,deps:[xt,Pt,Pp]},{provide:Jg,useClass:l8,multi:!0,deps:[xt]},[],{provide:Av,useClass:Av,deps:[Rv,Qg,Gg]},{provide:Ld,useExisting:Av},{provide:lx,useExisting:Qg},{provide:Qg,useClass:Qg,deps:[xt]},{provide:AE,useClass:AE,deps:[Pt]},{provide:Rv,useClass:Rv,deps:[Jg,Pt]},{provide:ox,useClass:Pz,deps:[]},[]];let yT=(()=>{class r{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:r,providers:[{provide:Gg,useValue:e.appId},{provide:sx,useExisting:Gg},Lz]}}}return r.\u0275fac=function(e){return new(e||r)(be(r,12))},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:_8,imports:[Lr,fW]}),r})();function b8(){return new _x(be(xt))}let _x=(()=>{class r{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return r.\u0275fac=function(e){return new(e||r)(be(xt))},r.\u0275prov=mt({factory:b8,token:r,providedIn:"root"}),r})();function bx(...r){if(1===r.length){const t=r[0];if(u(t))return xv(t,null);if(h(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return xv(e.map(n=>t[n]),e)}}if("function"==typeof r[r.length-1]){const t=r.pop();return xv(r=1===r.length&&u(r[0])?r[0]:r,null).pipe(Ee(e=>t(...e)))}return xv(r,null)}function xv(r,t){return new Z(e=>{const n=r.length;if(0===n)return void e.complete();const a=new Array(n);let c=0,d=0;for(let p=0;p<n;p++){const f=vn(r[p]);let v=!1;e.add(f.subscribe({next:C=>{v||(v=!0,d++),a[p]=C},error:C=>e.error(C),complete:()=>{c++,(c===n||!v)&&(d===n&&e.next(t?t.reduce((C,M,O)=>(C[M]=a[O],C),{}):a),e.complete())}}))}})}"undefined"!=typeof window&&window;let yx=(()=>{class r{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(I(_l),I(Qe))},r.\u0275dir=Ce({type:r}),r})(),Xd=(()=>{class r extends yx{}return r.\u0275fac=function(){let t;return function(n){return(t||(t=nn(r)))(n||r)}}(),r.\u0275dir=Ce({type:r,features:[Be]}),r})();const wr=new We("NgValueAccessor"),D8={provide:wr,useExisting:vt(()=>ET),multi:!0},R8=new We("CompositionEventMode");let ET=(()=>{class r extends yx{constructor(e,n,a){super(e,n),this._compositionMode=a,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=bl()?bl().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(I(_l),I(Qe),I(R8,8))},r.\u0275dir=Ce({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&lt("input",function(c){return n._handleInput(c.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(c){return n._compositionEnd(c.target.value)})},features:[dt([D8]),Be]}),r})();const Sr=new We("NgValidators"),_u=new We("NgAsyncValidators");function xx(r){return null!=r}function Ox(r){const t=wg(r)?vn(r):r;return V_(t),t}function kx(r){let t={};return r.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function Nx(r,t){return t.map(e=>e(r))}function Lx(r){return r.map(t=>function(r){return!r.validate}(t)?t:e=>t.validate(e))}function wT(r){return null!=r?function(r){if(!r)return null;const t=r.filter(xx);return 0==t.length?null:function(e){return kx(Nx(e,t))}}(Lx(r)):null}function ST(r){return null!=r?function(r){if(!r)return null;const t=r.filter(xx);return 0==t.length?null:function(e){return bx(Nx(e,t).map(Ox)).pipe(Ee(kx))}}(Lx(r)):null}function Bx(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function DT(r){return r?Array.isArray(r)?r:[r]:[]}function Ov(r,t){return Array.isArray(r)?r.includes(t):r===t}function Ux(r,t){const e=DT(t);return DT(r).forEach(a=>{Ov(e,a)||e.push(a)}),e}function Gx(r,t){return DT(t).filter(e=>!Ov(r,e))}let Wx=(()=>{class r{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ST(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ce({type:r}),r})(),No=(()=>{class r extends Wx{get formDirective(){return null}get path(){return null}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=nn(r)))(n||r)}}(),r.\u0275dir=Ce({type:r,features:[Be]}),r})();class na extends Wx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let zx=(()=>{class r extends class{constructor(t){this._cd=t}is(t){var e,n,a;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(a=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===a?void 0:a[t])}}{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(I(na,2))},r.\u0275dir=Ce({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&Ct("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[Be]}),r})();function Zg(r,t){(function(r,t){const e=function(r){return r._rawValidators}(r);null!==t.validator?r.setValidators(Bx(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const n=function(r){return r._rawAsyncValidators}(r);null!==t.asyncValidator?r.setAsyncValidators(Bx(n,t.asyncValidator)):"function"==typeof n&&r.setAsyncValidators([n]);const a=()=>r.updateValueAndValidity();Pv(t._rawValidators,a),Pv(t._rawAsyncValidators,a)})(r,t),t.valueAccessor.writeValue(r.value),function(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Xx(r,t)})}(r,t),function(r,t){const e=(n,a)=>{t.valueAccessor.writeValue(n),a&&t.viewToModelUpdate(n)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&Xx(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function(r,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function Pv(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Xx(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function Bv(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}const qg="VALID",Vv="INVALID",Gp="PENDING",em="DISABLED";function OT(r){return(NT(r)?r.validators:r)||null}function Kx(r){return Array.isArray(r)?wT(r):r||null}function kT(r,t){return(NT(t)?t.asyncValidators:r)||null}function Jx(r){return Array.isArray(r)?ST(r):r||null}function NT(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class LT{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Kx(this._rawValidators),this._composedAsyncValidatorFn=Jx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===qg}get invalid(){return this.status===Vv}get pending(){return this.status==Gp}get disabled(){return this.status===em}get enabled(){return this.status!==em}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Kx(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Jx(t)}addValidators(t){this.setValidators(Ux(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ux(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Gx(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Gx(t,this._rawAsyncValidators))}hasValidator(t){return Ov(this._rawValidators,t)}hasAsyncValidator(t){return Ov(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Gp,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=em,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=qg,this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qg||this.status===Gp)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?em:qg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Gp,this._hasOwnPendingAsyncValidator=!0;const e=Ox(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(r,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let n=r;return t.forEach(a=>{n=n instanceof PT?n.controls.hasOwnProperty(a)?n.controls[a]:null:n instanceof W8&&n.at(a)||null}),n}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?em:this.errors?Vv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gp)?Gp:this._anyControlsHaveStatus(Vv)?Vv:qg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){NT(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Hv extends LT{constructor(t=null,e,n){super(OT(e),kT(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Bv(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Bv(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class PT extends LT{constructor(t,e,n){super(OT(e),kT(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,a)=>{n.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Hv?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((a,c)=>{n=e(n,a,c)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class W8 extends LT{constructor(t,e,n){super(OT(e),kT(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((n,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((n,a)=>{this.at(a)&&this.at(a).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,a)=>{n.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Hv?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const X8={provide:na,useExisting:vt(()=>FT)},qx=(()=>Promise.resolve(null))();let FT=(()=>{class r extends na{constructor(e,n,a,c){super(),this.control=new Hv,this._registered=!1,this.update=new nt,this._parent=e,this._setValidators(n),this._setAsyncValidators(a),this.valueAccessor=function(r,t){if(!t)return null;let e,n,a;return Array.isArray(t),t.forEach(c=>{c.constructor===ET?e=c:function(r){return Object.getPrototypeOf(r.constructor)===Xd}(c)?n=c:a=c}),a||n||e||null}(0,c)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(r,t){return[...t.path,r]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Zg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){qx.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const n=e.isDisabled.currentValue,a=""===n||n&&"false"!==n;qx.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable()})}}return r.\u0275fac=function(e){return new(e||r)(I(No,9),I(Sr,10),I(_u,10),I(wr,10))},r.\u0275dir=Ce({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[dt([X8]),Be,cn]}),r})(),tO=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({}),r})(),_O=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[tO]]}),r})(),_5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[_O]}),r})();function en(...r){let t=r[r.length-1];return ce(t)?(r.pop(),Gn(r,t)):mn(r)}class ms extends B{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new H;return this._value}next(t){super.next(this._value=t)}}class v5 extends F{notifyNext(t,e,n,a,c){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class b5 extends F{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function y5(r,t,e,n,a=new b5(r,e,n)){if(!a.closed)return t instanceof Z?t.subscribe(a):kt(t)(a)}const vO={};function bO(...r){let t,e;return ce(r[r.length-1])&&(e=r.pop()),"function"==typeof r[r.length-1]&&(t=r.pop()),1===r.length&&u(r[0])&&(r=r[0]),mn(r,e).lift(new C5(t))}class C5{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new E5(t,this.resultSelector))}}class E5 extends v5{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(vO),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(y5(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const a=this.values,d=this.toRespond?a[n]===vO?--this.toRespond:this.toRespond:0;a[n]=e,0===d&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Gv=(()=>{function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r})();function Wv(...r){return dn(1)(en(...r))}const bu=new Z(r=>r.complete());function jv(r){return r?function(r){return new Z(t=>r.schedule(()=>t.complete()))}(r):bu}function nm(r){return new Z(t=>{let e;try{e=r()}catch(a){return void t.error(a)}return(e?vn(e):jv()).subscribe(t)})}function _o(r,t){return"function"==typeof t?e=>e.pipe(_o((n,a)=>vn(r(n,a)).pipe(Ee((c,d)=>t(n,c,a,d))))):e=>e.lift(new S5(r))}class S5{constructor(t){this.project=t}call(t,e){return e.subscribe(new D5(t,this.project))}}class D5 extends ln{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(a){return void this.destination.error(a)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Xe(this),a=this.destination;a.add(n),this.innerSubscription=En(t,n),this.innerSubscription!==n&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const yO=(()=>{function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r})();function Mi(r){return t=>0===r?jv():t.lift(new M5(r))}class M5{constructor(t){if(this.total=t,this.total<0)throw new yO}call(t,e){return e.subscribe(new R5(t,this.total))}}class R5 extends F{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ri(...r){const t=r[r.length-1];return ce(t)?(r.pop(),e=>Wv(r,e,t)):e=>Wv(r,e)}function CO(r,t){let e=!1;return arguments.length>=2&&(e=!0),function(a){return a.lift(new I5(r,t,e))}}class I5{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new A5(t,this.accumulator,this.seed,this.hasSeed))}}class A5 extends F{constructor(t,e,n,a){super(t),this.accumulator=e,this._seed=n,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(a){this.destination.error(a)}this.seed=n,this.destination.next(n)}}function di(r,t){return function(n){return n.lift(new x5(r,t))}}class x5{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new O5(t,this.predicate,this.thisArg))}}class O5 extends F{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function yu(r){return function(e){const n=new k5(r),a=e.lift(n);return n.caught=a}}class k5{constructor(t){this.selector=t}call(t,e){return e.subscribe(new N5(t,this.selector,this.caught))}}class N5 extends ln{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(c){return void super.error(c)}this._unsubscribeAndRecycle();const n=new Xe(this);this.add(n);const a=En(e,n);a!==n&&this.add(a)}}}function Wp(r,t){return zn(r,t,1)}function jT(r){return function(e){return 0===r?jv():e.lift(new L5(r))}}class L5{constructor(t){if(this.total=t,this.total<0)throw new yO}call(t,e){return e.subscribe(new P5(t,this.total))}}class P5 extends F{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,a=this.count++;e.length<n?e.push(t):e[a%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,a=this.ring;for(let c=0;c<n;c++){const d=e++%n;t.next(a[d])}}t.complete()}}function EO(r=V5){return t=>t.lift(new F5(r))}class F5{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new B5(t,this.errorFactory))}}class B5 extends F{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function V5(){return new Gv}function TO(r=null){return t=>t.lift(new H5(r))}class H5{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new U5(t,this.defaultValue))}}class U5 extends F{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function jp(r,t){const e=arguments.length>=2;return n=>n.pipe(r?di((a,c)=>r(a,c,n)):ie,Mi(1),e?TO(t):EO(()=>new Gv))}function Cu(){}function Pr(r,t,e){return function(a){return a.lift(new W5(r,t,e))}}class W5{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new j5(t,this.nextOrObserver,this.error,this.complete))}}class j5 extends F{constructor(t,e,n,a){super(t),this._tapNext=Cu,this._tapError=Cu,this._tapComplete=Cu,this._tapError=n||Cu,this._tapComplete=a||Cu,y(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Cu,this._tapError=e.error||Cu,this._tapComplete=e.complete||Cu)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function wO(r){return t=>t.lift(new z5(r))}class z5{constructor(t){this.callback=t}call(t,e){return e.subscribe(new X5(t,this.callback))}}class X5 extends F{constructor(t,e){super(t),this.add(new D(e))}}class gc{constructor(t,e){this.id=t,this.url=e}}class zT extends gc{constructor(t,e,n="imperative",a=null){super(t,e),this.navigationTrigger=n,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class im extends gc{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class SO extends gc{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Y5 extends gc{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $5 extends gc{constructor(t,e,n,a){super(t,e),this.urlAfterRedirects=n,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class K5 extends gc{constructor(t,e,n,a){super(t,e),this.urlAfterRedirects=n,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J5 extends gc{constructor(t,e,n,a,c){super(t,e),this.urlAfterRedirects=n,this.state=a,this.shouldActivate=c}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Q5 extends gc{constructor(t,e,n,a){super(t,e),this.urlAfterRedirects=n,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z5 extends gc{constructor(t,e,n,a){super(t,e),this.urlAfterRedirects=n,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DO{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class MO{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class q5{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class e4{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class t4{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n4{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RO{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qn="primary";class i4{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function zp(r){return new i4(r)}const IO="ngNavigationCancelingError";function XT(r){const t=Error("NavigationCancelingError: "+r);return t[IO]=!0,t}function o4(r,t,e){const n=e.path.split("/");if(n.length>r.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<r.length))return null;const a={};for(let c=0;c<n.length;c++){const d=n[c],p=r[c];if(d.startsWith(":"))a[d.substring(1)]=p;else if(d!==p.path)return null}return{consumed:r.slice(0,n.length),posParams:a}}function Cl(r,t){const e=r?Object.keys(r):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let a;for(let c=0;c<e.length;c++)if(a=e[c],!AO(r[a],t[a]))return!1;return!0}function AO(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const e=[...r].sort(),n=[...t].sort();return e.every((a,c)=>n[c]===a)}return r===t}function xO(r){return Array.prototype.concat.apply([],r)}function OO(r){return r.length>0?r[r.length-1]:null}function vo(r,t){for(const e in r)r.hasOwnProperty(e)&&t(r[e],e)}function El(r){return V_(r)?r:wg(r)?vn(Promise.resolve(r)):en(r)}const l4={exact:function LO(r,t,e){if(!$d(r.segments,t.segments)||!zv(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!r.children[n]||!LO(r.children[n],t.children[n],e))return!1;return!0},subset:PO},kO={exact:function(r,t){return Cl(r,t)},subset:function(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>AO(r[e],t[e]))},ignored:()=>!0};function NO(r,t,e){return l4[e.paths](r.root,t.root,e.matrixParams)&&kO[e.queryParams](r.queryParams,t.queryParams)&&!("exact"===e.fragment&&r.fragment!==t.fragment)}function PO(r,t,e){return FO(r,t,t.segments,e)}function FO(r,t,e,n){if(r.segments.length>e.length){const a=r.segments.slice(0,e.length);return!(!$d(a,e)||t.hasChildren()||!zv(a,e,n))}if(r.segments.length===e.length){if(!$d(r.segments,e)||!zv(r.segments,e,n))return!1;for(const a in t.children)if(!r.children[a]||!PO(r.children[a],t.children[a],n))return!1;return!0}{const a=e.slice(0,r.segments.length),c=e.slice(r.segments.length);return!!($d(r.segments,a)&&zv(r.segments,a,n)&&r.children[Qn])&&FO(r.children[Qn],t,c,n)}}function zv(r,t,e){return t.every((n,a)=>kO[e](r[a].parameters,n.parameters))}class Yd{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zp(this.queryParams)),this._queryParamMap}toString(){return p4.serialize(this)}}class ni{constructor(t,e){this.segments=t,this.children=e,this.parent=null,vo(e,(n,a)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xv(this)}}class rm{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=zp(this.parameters)),this._parameterMap}toString(){return UO(this)}}function $d(r,t){return r.length===t.length&&r.every((e,n)=>e.path===t[n].path)}class YT{}class BO{parse(t){const e=new E4(t);return new Yd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${`/${om(t.root,!0)}`}${function(r){const t=Object.keys(r).map(e=>{const n=r[e];return Array.isArray(n)?n.map(a=>`${Yv(e)}=${Yv(a)}`).join("&"):`${Yv(e)}=${Yv(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(r){return encodeURI(r)}(t.fragment)}`:""}`}}const p4=new BO;function Xv(r){return r.segments.map(t=>UO(t)).join("/")}function om(r,t){if(!r.hasChildren())return Xv(r);if(t){const e=r.children[Qn]?om(r.children[Qn],!1):"",n=[];return vo(r.children,(a,c)=>{c!==Qn&&n.push(`${c}:${om(a,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(r,t){let e=[];return vo(r.children,(n,a)=>{a===Qn&&(e=e.concat(t(n,a)))}),vo(r.children,(n,a)=>{a!==Qn&&(e=e.concat(t(n,a)))}),e}(r,(n,a)=>a===Qn?[om(r.children[Qn],!1)]:[`${a}:${om(n,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[Qn]?`${Xv(r)}/${e[0]}`:`${Xv(r)}/(${e.join("//")})`}}function VO(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yv(r){return VO(r).replace(/%3B/gi,";")}function $T(r){return VO(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $v(r){return decodeURIComponent(r)}function HO(r){return $v(r.replace(/\+/g,"%20"))}function UO(r){return`${$T(r.path)}${function(r){return Object.keys(r).map(t=>`;${$T(t)}=${$T(r[t])}`).join("")}(r.parameters)}`}const _4=/^[^\/()?;=#]+/;function Kv(r){const t=r.match(_4);return t?t[0]:""}const v4=/^[^=?&#]+/,y4=/^[^?&#]+/;class E4{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ni([],{}):new ni([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Qn]=new ni(t,e)),n}parseSegment(){const t=Kv(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new rm($v(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Kv(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const a=Kv(this.remaining);a&&(n=a,this.capture(n))}t[$v(e)]=$v(n)}parseQueryParam(t){const e=function(r){const t=r.match(v4);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const d=function(r){const t=r.match(y4);return t?t[0]:""}(this.remaining);d&&(n=d,this.capture(n))}const a=HO(e),c=HO(n);if(t.hasOwnProperty(a)){let d=t[a];Array.isArray(d)||(d=[d],t[a]=d),d.push(c)}else t[a]=c}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Kv(this.remaining),a=this.remaining[n.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let c;n.indexOf(":")>-1?(c=n.substr(0,n.indexOf(":")),this.capture(c),this.capture(":")):t&&(c=Qn);const d=this.parseChildren();e[c]=1===Object.keys(d).length?d[Qn]:new ni([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class GO{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=KT(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=KT(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=JT(t,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return JT(t,this._root).map(e=>e.value)}}function KT(r,t){if(r===t.value)return t;for(const e of t.children){const n=KT(r,e);if(n)return n}return null}function JT(r,t){if(r===t.value)return[t];for(const e of t.children){const n=JT(r,e);if(n.length)return n.unshift(t),n}return[]}class mc{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function sm(r){const t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}class WO extends GO{constructor(t,e){super(t),this.snapshot=e,QT(this,t)}toString(){return this.snapshot.toString()}}function jO(r,t){const e=function(r,t){const d=new Jv([],{},{},"",{},Qn,t,null,r.root,-1,{});return new XO("",new mc(d,[]))}(r,t),n=new ms([new rm("",{})]),a=new ms({}),c=new ms({}),d=new ms({}),p=new ms(""),f=new Kd(n,a,d,p,c,Qn,t,e.root);return f.snapshot=e.root,new WO(new mc(f,[]),e)}class Kd{constructor(t,e,n,a,c,d,p,f){this.url=t,this.params=e,this.queryParams=n,this.fragment=a,this.data=c,this.outlet=d,this.component=p,this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ee(t=>zp(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ee(t=>zp(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zO(r,t="emptyOnly"){const e=r.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const a=e[n],c=e[n-1];if(a.routeConfig&&""===a.routeConfig.path)n--;else{if(c.component)break;n--}}return function(r){return r.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(n))}class Jv{constructor(t,e,n,a,c,d,p,f,v,C,M){this.url=t,this.params=e,this.queryParams=n,this.fragment=a,this.data=c,this.outlet=d,this.component=p,this.routeConfig=f,this._urlSegment=v,this._lastPathIndex=C,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class XO extends GO{constructor(t,e){super(e),this.url=t,QT(this,e)}toString(){return YO(this._root)}}function QT(r,t){t.value._routerState=r,t.children.forEach(e=>QT(r,e))}function YO(r){const t=r.children.length>0?` { ${r.children.map(YO).join(", ")} } `:"";return`${r.value}${t}`}function ZT(r){if(r.snapshot){const t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,Cl(t.queryParams,e.queryParams)||r.queryParams.next(e.queryParams),t.fragment!==e.fragment&&r.fragment.next(e.fragment),Cl(t.params,e.params)||r.params.next(e.params),function(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!Cl(r[e],t[e]))return!1;return!0}(t.url,e.url)||r.url.next(e.url),Cl(t.data,e.data)||r.data.next(e.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function qT(r,t){return Cl(r.params,t.params)&&function(r,t){return $d(r,t)&&r.every((e,n)=>Cl(e.parameters,t[n].parameters))}(r.url,t.url)&&!(!r.parent!=!t.parent)&&(!r.parent||qT(r.parent,t.parent))}function Qv(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const a=function(r,t,e){return t.children.map(n=>{for(const a of e.children)if(r.shouldReuseRoute(n.value,a.value.snapshot))return Qv(r,n,a);return Qv(r,n)})}(r,t,e);return new mc(n,a)}{if(r.shouldAttach(t.value)){const c=r.retrieve(t.value);if(null!==c){const d=c.route;return $O(t,d),d}}const n=function(r){return new Kd(new ms(r.url),new ms(r.params),new ms(r.queryParams),new ms(r.fragment),new ms(r.data),r.outlet,r.component,r)}(t.value),a=t.children.map(c=>Qv(r,c));return new mc(n,a)}}function $O(r,t){if(r.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(r.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=r.value;for(let e=0;e<r.children.length;++e)$O(r.children[e],t.children[e])}function Zv(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function am(r){return"object"==typeof r&&null!=r&&r.outlets}function ew(r,t,e,n,a){let c={};return n&&vo(n,(d,p)=>{c[p]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),new Yd(e.root===r?t:KO(e.root,r,t),c,a)}function KO(r,t,e){const n={};return vo(r.children,(a,c)=>{n[c]=a===t?e:KO(a,t,e)}),new ni(r.segments,n)}class JO{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Zv(n[0]))throw new Error("Root segment cannot have matrix parameters");const a=n.find(am);if(a&&a!==OO(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tw{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function QO(r,t,e){if(r||(r=new ni([],{})),0===r.segments.length&&r.hasChildren())return qv(r,t,e);const n=function(r,t,e){let n=0,a=t;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<r.segments.length;){if(n>=e.length)return c;const d=r.segments[a],p=e[n];if(am(p))break;const f=`${p}`,v=n<e.length-1?e[n+1]:null;if(a>0&&void 0===f)break;if(f&&v&&"object"==typeof v&&void 0===v.outlets){if(!qO(f,v,d))return c;n+=2}else{if(!qO(f,{},d))return c;n++}a++}return{match:!0,pathIndex:a,commandIndex:n}}(r,t,e),a=e.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){const c=new ni(r.segments.slice(0,n.pathIndex),{});return c.children[Qn]=new ni(r.segments.slice(n.pathIndex),r.children),qv(c,0,a)}return n.match&&0===a.length?new ni(r.segments,{}):n.match&&!r.hasChildren()?nw(r,t,e):n.match?qv(r,0,a):nw(r,t,e)}function qv(r,t,e){if(0===e.length)return new ni(r.segments,{});{const n=function(r){return am(r[0])?r[0].outlets:{[Qn]:r}}(e),a={};return vo(n,(c,d)=>{"string"==typeof c&&(c=[c]),null!==c&&(a[d]=QO(r.children[d],t,c))}),vo(r.children,(c,d)=>{void 0===n[d]&&(a[d]=c)}),new ni(r.segments,a)}}function nw(r,t,e){const n=r.segments.slice(0,t);let a=0;for(;a<e.length;){const c=e[a];if(am(c)){const f=N4(c.outlets);return new ni(n,f)}if(0===a&&Zv(e[0])){n.push(new rm(r.segments[t].path,ZO(e[0]))),a++;continue}const d=am(c)?c.outlets[Qn]:`${c}`,p=a<e.length-1?e[a+1]:null;d&&p&&Zv(p)?(n.push(new rm(d,ZO(p))),a+=2):(n.push(new rm(d,{})),a++)}return new ni(n,{})}function N4(r){const t={};return vo(r,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=nw(new ni([],{}),0,e))}),t}function ZO(r){const t={};return vo(r,(e,n)=>t[n]=`${e}`),t}function qO(r,t,e){return r==e.path&&Cl(t,e.parameters)}class P4{constructor(t,e,n,a){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=a}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),ZT(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const a=sm(e);t.children.forEach(c=>{const d=c.value.outlet;this.deactivateRoutes(c,a[d],n),delete a[d]}),vo(a,(c,d)=>{this.deactivateRouteAndItsChildren(c,n)})}deactivateRoutes(t,e,n){const a=t.value,c=e?e.value:null;if(a===c)if(a.component){const d=n.getContext(a.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,n);else c&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const a=n.outlet.detach(),c=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),a=n&&t.value.component?n.children:e,c=sm(t);for(const d of Object.keys(c))this.deactivateRouteAndItsChildren(c[d],a);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const a=sm(e);t.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],n),this.forwardEvent(new n4(c.value.snapshot))}),t.children.length&&this.forwardEvent(new e4(t.value.snapshot))}activateRoutes(t,e,n){const a=t.value,c=e?e.value:null;if(ZT(a),a===c)if(a.component){const d=n.getOrCreateContext(a.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,n);else if(a.component){const d=n.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const p=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),d.children.onOutletReAttached(p.contexts),d.attachRef=p.componentRef,d.route=p.route.value,d.outlet&&d.outlet.attach(p.componentRef,p.route.value),ek(p.route)}else{const p=function(r){for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(a.snapshot),f=p?p.module.componentFactoryResolver:null;d.attachRef=null,d.route=a,d.resolver=f,d.outlet&&d.outlet.activateWith(a,f),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,n)}}function ek(r){ZT(r.value),r.children.forEach(ek)}class iw{constructor(t,e){this.routes=t,this.module=e}}function Eu(r){return"function"==typeof r}function Jd(r){return r instanceof Yd}const lm=Symbol("INITIAL_VALUE");function cm(){return _o(r=>bO(r.map(t=>t.pipe(Mi(1),Ri(lm)))).pipe(CO((t,e)=>{let n=!1;return e.reduce((a,c,d)=>a!==lm?a:(c===lm&&(n=!0),n||!1!==c&&d!==e.length-1&&!Jd(c)?a:c),t)},lm),di(t=>t!==lm),Ee(t=>Jd(t)?t:!0===t),Mi(1)))}let tk=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=_t({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&St(0,"router-outlet")},directives:function(){return[cw]},encapsulation:2}),r})();function nk(r,t=""){for(let e=0;e<r.length;e++){const n=r[e];W4(n,j4(t,n))}}function W4(r,t){r.children&&nk(r.children,t)}function j4(r,t){return t?r||t.path?r&&!t.path?`${r}/`:!r&&t.path?t.path:`${r}/${t.path}`:"":r}function rw(r){const t=r.children&&r.children.map(rw),e=t?Object.assign(Object.assign({},r),{children:t}):Object.assign({},r);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Qn&&(e.component=tk),e}function ia(r){return r.outlet||Qn}function ik(r,t){const e=r.filter(n=>ia(n)===t);return e.push(...r.filter(n=>ia(n)!==t)),e}const rk={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function eb(r,t,e){var n;if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||e.length>0)?Object.assign({},rk):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const c=(t.matcher||o4)(e,r,t);if(!c)return Object.assign({},rk);const d={};vo(c.posParams,(f,v)=>{d[v]=f.path});const p=c.consumed.length>0?Object.assign(Object.assign({},d),c.consumed[c.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:c.consumed,lastChild:c.consumed.length,parameters:p,positionalParamSegments:null!==(n=c.posParams)&&void 0!==n?n:{}}}function tb(r,t,e,n,a="corrected"){if(e.length>0&&function(r,t,e){return e.some(n=>nb(r,t,n)&&ia(n)!==Qn)}(r,e,n)){const d=new ni(t,function(r,t,e,n){const a={};a[Qn]=n,n._sourceSegment=r,n._segmentIndexShift=t.length;for(const c of e)if(""===c.path&&ia(c)!==Qn){const d=new ni([],{});d._sourceSegment=r,d._segmentIndexShift=t.length,a[ia(c)]=d}return a}(r,t,n,new ni(e,r.children)));return d._sourceSegment=r,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function(r,t,e){return e.some(n=>nb(r,t,n))}(r,e,n)){const d=new ni(r.segments,function(r,t,e,n,a,c){const d={};for(const p of n)if(nb(r,e,p)&&!a[ia(p)]){const f=new ni([],{});f._sourceSegment=r,f._segmentIndexShift="legacy"===c?r.segments.length:t.length,d[ia(p)]=f}return Object.assign(Object.assign({},a),d)}(r,t,e,n,r.children,a));return d._sourceSegment=r,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}const c=new ni(r.segments,r.children);return c._sourceSegment=r,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}function nb(r,t,e){return(!(r.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function ok(r,t,e,n){return!!(ia(r)===n||n!==Qn&&nb(t,e,r))&&("**"===r.path||eb(t,r,e).matched)}function sk(r,t,e){return 0===t.length&&!r.children[e]}class um{constructor(t){this.segmentGroup=t||null}}class ak{constructor(t){this.urlTree=t}}function ib(r){return new Z(t=>t.error(new um(r)))}function lk(r){return new Z(t=>t.error(new ak(r)))}function K4(r){return new Z(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r}'`)))}class Z4{constructor(t,e,n,a,c){this.configLoader=e,this.urlSerializer=n,this.urlTree=a,this.config=c,this.allowRedirects=!0,this.ngModule=t.get(vl)}apply(){const t=tb(this.urlTree.root,[],[],this.config).segmentGroup,e=new ni(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Qn).pipe(Ee(c=>this.createUrlTree(ow(c),this.urlTree.queryParams,this.urlTree.fragment))).pipe(yu(c=>{if(c instanceof ak)return this.allowRedirects=!1,this.match(c.urlTree);throw c instanceof um?this.noMatchError(c):c}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Qn).pipe(Ee(a=>this.createUrlTree(ow(a),t.queryParams,t.fragment))).pipe(yu(a=>{throw a instanceof um?this.noMatchError(a):a}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const a=t.segments.length>0?new ni([],{[Qn]:t}):t;return new Yd(a,e,n)}expandSegmentGroup(t,e,n,a){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Ee(c=>new ni([],c))):this.expandSegment(t,n,e,n.segments,a,!0)}expandChildren(t,e,n){const a=[];for(const c of Object.keys(n.children))"primary"===c?a.unshift(c):a.push(c);return vn(a).pipe(Wp(c=>{const d=n.children[c],p=ik(e,c);return this.expandSegmentGroup(t,p,d,c).pipe(Ee(f=>({segment:f,outlet:c})))}),CO((c,d)=>(c[d.outlet]=d.segment,c),{}),function(r,t){const e=arguments.length>=2;return n=>n.pipe(r?di((a,c)=>r(a,c,n)):ie,jT(1),e?TO(t):EO(()=>new Gv))}())}expandSegment(t,e,n,a,c,d){return vn(n).pipe(Wp(p=>this.expandSegmentAgainstRoute(t,e,n,p,a,c,d).pipe(yu(v=>{if(v instanceof um)return en(null);throw v}))),jp(p=>!!p),yu((p,f)=>{if(p instanceof Gv||"EmptyError"===p.name){if(sk(e,a,c))return en(new ni([],{}));throw new um(e)}throw p}))}expandSegmentAgainstRoute(t,e,n,a,c,d,p){return ok(a,e,c,d)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(t,e,a,c,d):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,a,c,d):ib(e):ib(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,a,c,d){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,a,d):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,a,c,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,a){const c=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?lk(c):this.lineralizeSegments(n,c).pipe(zn(d=>{const p=new ni(d,{});return this.expandSegment(t,p,e,d,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,a,c,d){const{matched:p,consumedSegments:f,lastChild:v,positionalParamSegments:C}=eb(e,a,c);if(!p)return ib(e);const M=this.applyRedirectCommands(f,a.redirectTo,C);return a.redirectTo.startsWith("/")?lk(M):this.lineralizeSegments(a,M).pipe(zn(O=>this.expandSegment(t,e,n,O.concat(c.slice(v)),d,!1)))}matchSegmentAgainstRoute(t,e,n,a,c){if("**"===n.path)return n.loadChildren?(n._loadedConfig?en(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Ee(O=>(n._loadedConfig=O,new ni(a,{})))):en(new ni(a,{}));const{matched:d,consumedSegments:p,lastChild:f}=eb(e,n,a);if(!d)return ib(e);const v=a.slice(f);return this.getChildConfig(t,n,a).pipe(zn(M=>{const O=M.module,P=M.routes,{segmentGroup:W,slicedSegments:ne}=tb(e,p,v,P),K=new ni(W.segments,W.children);if(0===ne.length&&K.hasChildren())return this.expandChildren(O,P,K).pipe(Ee(pt=>new ni(p,pt)));if(0===P.length&&0===ne.length)return en(new ni(p,{}));const ve=ia(n)===c;return this.expandSegment(O,K,P,ne,ve?Qn:c,!0).pipe(Ee(qe=>new ni(p.concat(qe.segments),qe.children)))}))}getChildConfig(t,e,n){return e.children?en(new iw(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?en(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(zn(a=>a?this.configLoader.load(t.injector,e).pipe(Ee(c=>(e._loadedConfig=c,c))):function(r){return new Z(t=>t.error(XT(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`)))}(e))):en(new iw([],t))}runCanLoadGuards(t,e,n){const a=e.canLoad;return a&&0!==a.length?en(a.map(d=>{const p=t.get(d);let f;if(function(r){return r&&Eu(r.canLoad)}(p))f=p.canLoad(e,n);else{if(!Eu(p))throw new Error("Invalid CanLoad guard");f=p(e,n)}return El(f)})).pipe(cm(),Pr(d=>{if(!Jd(d))return;const p=XT(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw p.url=d,p}),Ee(d=>!0===d)):en(!0)}lineralizeSegments(t,e){let n=[],a=e.root;for(;;){if(n=n.concat(a.segments),0===a.numberOfChildren)return en(n);if(a.numberOfChildren>1||!a.children[Qn])return K4(t.redirectTo);a=a.children[Qn]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,a){const c=this.createSegmentGroup(t,e.root,n,a);return new Yd(c,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return vo(t,(a,c)=>{if("string"==typeof a&&a.startsWith(":")){const p=a.substring(1);n[c]=e[p]}else n[c]=a}),n}createSegmentGroup(t,e,n,a){const c=this.createSegments(t,e.segments,n,a);let d={};return vo(e.children,(p,f)=>{d[f]=this.createSegmentGroup(t,p,n,a)}),new ni(c,d)}createSegments(t,e,n,a){return e.map(c=>c.path.startsWith(":")?this.findPosParam(t,c,a):this.findOrReturn(c,n))}findPosParam(t,e,n){const a=n[e.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return a}findOrReturn(t,e){let n=0;for(const a of e){if(a.path===t.path)return e.splice(n),a;n++}return t}}function ow(r){const t={};for(const n of Object.keys(r.children)){const c=ow(r.children[n]);(c.segments.length>0||c.hasChildren())&&(t[n]=c)}return function(r){if(1===r.numberOfChildren&&r.children[Qn]){const t=r.children[Qn];return new ni(r.segments.concat(t.segments),t.children)}return r}(new ni(r.segments,t))}class ck{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class rb{constructor(t,e){this.component=t,this.route=e}}function t6(r,t,e){const n=r._root;return dm(n,t?t._root:null,e,[n.value])}function ob(r,t,e){const n=function(r){if(!r)return null;for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(n?n.module.injector:e).get(r)}function dm(r,t,e,n,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=sm(t);return r.children.forEach(d=>{(function(r,t,e,n,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=r.value,d=t?t.value:null,p=e?e.getContext(r.value.outlet):null;if(d&&c.routeConfig===d.routeConfig){const f=function(r,t,e){if("function"==typeof e)return e(r,t);switch(e){case"pathParamsChange":return!$d(r.url,t.url);case"pathParamsOrQueryParamsChange":return!$d(r.url,t.url)||!Cl(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qT(r,t)||!Cl(r.queryParams,t.queryParams);case"paramsChange":default:return!qT(r,t)}}(d,c,c.routeConfig.runGuardsAndResolvers);f?a.canActivateChecks.push(new ck(n)):(c.data=d.data,c._resolvedData=d._resolvedData),dm(r,t,c.component?p?p.children:null:e,n,a),f&&p&&p.outlet&&p.outlet.isActivated&&a.canDeactivateChecks.push(new rb(p.outlet.component,d))}else d&&hm(t,p,a),a.canActivateChecks.push(new ck(n)),dm(r,null,c.component?p?p.children:null:e,n,a)})(d,c[d.value.outlet],e,n.concat([d.value]),a),delete c[d.value.outlet]}),vo(c,(d,p)=>hm(d,e.getContext(p),a)),a}function hm(r,t,e){const n=sm(r),a=r.value;vo(n,(c,d)=>{hm(c,a.component?t?t.children.getContext(d):null:t,e)}),e.canDeactivateChecks.push(new rb(a.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,a))}class f6{}function uk(r){return new Z(t=>t.error(r))}class m6{constructor(t,e,n,a,c,d){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d}recognize(){const t=tb(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Qn);if(null===e)return null;const n=new Jv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qn,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new mc(n,e),c=new XO(this.url,a);return this.inheritParamsAndData(c._root),c}inheritParamsAndData(t){const e=t.value,n=zO(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const c of Object.keys(e.children)){const d=e.children[c],p=ik(t,c),f=this.processSegmentGroup(p,d,c);if(null===f)return null;n.push(...f)}const a=dk(n);return function(r){r.sort((t,e)=>t.value.outlet===Qn?-1:e.value.outlet===Qn?1:t.value.outlet.localeCompare(e.value.outlet))}(a),a}processSegment(t,e,n,a){for(const c of t){const d=this.processSegmentAgainstRoute(c,e,n,a);if(null!==d)return d}return sk(e,n,a)?[]:null}processSegmentAgainstRoute(t,e,n,a){if(t.redirectTo||!ok(t,e,n,a))return null;let c,d=[],p=[];if("**"===t.path){const P=n.length>0?OO(n).parameters:{};c=new Jv(n,P,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fk(t),ia(t),t.component,t,hk(e),pk(e)+n.length,gk(t))}else{const P=eb(e,t,n);if(!P.matched)return null;d=P.consumedSegments,p=n.slice(P.lastChild),c=new Jv(d,P.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fk(t),ia(t),t.component,t,hk(e),pk(e)+d.length,gk(t))}const f=function(r){return r.children?r.children:r.loadChildren?r._loadedConfig.routes:[]}(t),{segmentGroup:v,slicedSegments:C}=tb(e,d,p,f.filter(P=>void 0===P.redirectTo),this.relativeLinkResolution);if(0===C.length&&v.hasChildren()){const P=this.processChildren(f,v);return null===P?null:[new mc(c,P)]}if(0===f.length&&0===C.length)return[new mc(c,[])];const M=ia(t)===a,O=this.processSegment(f,v,C,M?Qn:a);return null===O?null:[new mc(c,O)]}}function b6(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function dk(r){const t=[],e=new Set;for(const n of r){if(!b6(n)){t.push(n);continue}const a=t.find(c=>n.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...n.children),e.add(a)):t.push(n)}for(const n of e){const a=dk(n.children);t.push(new mc(n.value,a))}return t.filter(n=>!e.has(n))}function hk(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function pk(r){let t=r,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function fk(r){return r.data||{}}function gk(r){return r.resolve||{}}function sw(r){return _o(t=>{const e=r(t);return e?vn(e).pipe(Ee(()=>t)):en(t)})}class M6 extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const aw=new We("ROUTES");class mk{constructor(t,e,n,a){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=a}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const a=this.loadModuleFactory(e.loadChildren).pipe(Ee(c=>{this.onLoadEndListener&&this.onLoadEndListener(e);const d=c.create(t);return new iw(xO(d.injector.get(aw,void 0,on.Self|on.Optional)).map(rw),d)}),yu(c=>{throw e._loader$=void 0,c}));return e._loader$=new xn(a,()=>new B).pipe(_n()),e._loader$}loadModuleFactory(t){return"string"==typeof t?vn(this.loader.load(t)):El(t()).pipe(zn(e=>e instanceof $0?en(e):vn(this.compiler.compileModuleAsync(e))))}}class R6{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Xp,this.attachRef=null}}class Xp{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new R6,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class A6{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function x6(r){throw r}function O6(r,t,e){return t.parse("/")}function _k(r,t){return en(null)}const k6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},N6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let _s=(()=>{class r{constructor(e,n,a,c,d,p,f,v){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=a,this.location=c,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new B,this.errorHandler=x6,this.malformedUriErrorHandler=O6,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:_k,afterPreactivation:_k},this.urlHandlingStrategy=new A6,this.routeReuseStrategy=new M6,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(vl),this.console=d.get(iv);const O=d.get(Pt);this.isNgZoneEnabled=O instanceof Pt&&Pt.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=new Yd(new ni([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mk(p,f,P=>this.triggerEvent(new DO(P)),P=>this.triggerEvent(new MO(P))),this.routerState=jO(this.currentUrlTree,this.rootComponentType),this.transitions=new ms({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(di(a=>0!==a.id),Ee(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),_o(a=>{let c=!1,d=!1;return en(a).pipe(Pr(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),_o(p=>{const f=this.browserUrlTree.toString(),v=!this.navigated||p.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return sb(p.source)&&(this.browserUrlTree=p.extractedUrl),en(p).pipe(_o(M=>{const O=this.transitions.getValue();return n.next(new zT(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),O!==this.transitions.getValue()?bu:Promise.resolve(M)}),function(r,t,e,n){return _o(a=>function(r,t,e,n,a){return new Z4(r,t,e,n,a).apply()}(r,t,e,a.extractedUrl,n).pipe(Ee(c=>Object.assign(Object.assign({},a),{urlAfterRedirects:c}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Pr(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function(r,t,e,n,a){return zn(c=>function(r,t,e,n,a="emptyOnly",c="legacy"){try{const d=new m6(r,t,e,n,a,c).recognize();return null===d?uk(new f6):en(d)}catch(d){return uk(d)}}(r,t,c.urlAfterRedirects,e(c.urlAfterRedirects),n,a).pipe(Ee(d=>Object.assign(Object.assign({},c),{targetSnapshot:d}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),Pr(M=>{"eager"===this.urlUpdateStrategy&&(M.extras.skipLocationChange||this.setBrowserUrl(M.urlAfterRedirects,M),this.browserUrlTree=M.urlAfterRedirects);const O=new $5(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);n.next(O)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:P,source:W,restoredState:ne,extras:K}=p,ve=new zT(O,this.serializeUrl(P),W,ne);n.next(ve);const Te=jO(P,this.rootComponentType).snapshot;return en(Object.assign(Object.assign({},p),{targetSnapshot:Te,urlAfterRedirects:P,extras:Object.assign(Object.assign({},K),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,this.browserUrlTree=p.urlAfterRedirects,p.resolve(null),bu}),sw(p=>{const{targetSnapshot:f,id:v,extractedUrl:C,rawUrl:M,extras:{skipLocationChange:O,replaceUrl:P}}=p;return this.hooks.beforePreactivation(f,{navigationId:v,appliedUrlTree:C,rawUrlTree:M,skipLocationChange:!!O,replaceUrl:!!P})}),Pr(p=>{const f=new K5(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(f)}),Ee(p=>Object.assign(Object.assign({},p),{guards:t6(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(r,t){return zn(e=>{const{targetSnapshot:n,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:d}}=e;return 0===d.length&&0===c.length?en(Object.assign(Object.assign({},e),{guardsResult:!0})):function(r,t,e,n){return vn(r).pipe(zn(a=>function(r,t,e,n,a){const c=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return c&&0!==c.length?en(c.map(p=>{const f=ob(p,t,a);let v;if(function(r){return r&&Eu(r.canDeactivate)}(f))v=El(f.canDeactivate(r,t,e,n));else{if(!Eu(f))throw new Error("Invalid CanDeactivate guard");v=El(f(r,t,e,n))}return v.pipe(jp())})).pipe(cm()):en(!0)}(a.component,a.route,e,t,n)),jp(a=>!0!==a,!0))}(d,n,a,r).pipe(zn(p=>p&&function(r){return"boolean"==typeof r}(p)?function(r,t,e,n){return vn(t).pipe(Wp(a=>Wv(function(r,t){return null!==r&&t&&t(new q5(r)),en(!0)}(a.route.parent,n),function(r,t){return null!==r&&t&&t(new t4(r)),en(!0)}(a.route,n),function(r,t,e){const n=t[t.length-1],c=t.slice(0,t.length-1).reverse().map(d=>function(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(d)).filter(d=>null!==d).map(d=>nm(()=>en(d.guards.map(f=>{const v=ob(f,d.node,e);let C;if(function(r){return r&&Eu(r.canActivateChild)}(v))C=El(v.canActivateChild(n,r));else{if(!Eu(v))throw new Error("Invalid CanActivateChild guard");C=El(v(n,r))}return C.pipe(jp())})).pipe(cm())));return en(c).pipe(cm())}(r,a.path,e),function(r,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;return n&&0!==n.length?en(n.map(c=>nm(()=>{const d=ob(c,t,e);let p;if(function(r){return r&&Eu(r.canActivate)}(d))p=El(d.canActivate(t,r));else{if(!Eu(d))throw new Error("Invalid CanActivate guard");p=El(d(t,r))}return p.pipe(jp())}))).pipe(cm()):en(!0)}(r,a.route,e))),jp(a=>!0!==a,!0))}(n,c,r,t):en(p)),Ee(p=>Object.assign(Object.assign({},e),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),Pr(p=>{if(Jd(p.guardsResult)){const v=XT(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw v.url=p.guardsResult,v}const f=new J5(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(f)}),di(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),sw(p=>{if(p.guards.canActivateChecks.length)return en(p).pipe(Pr(f=>{const v=new Q5(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(v)}),_o(f=>{let v=!1;return en(f).pipe(function(r,t){return zn(e=>{const{targetSnapshot:n,guards:{canActivateChecks:a}}=e;if(!a.length)return en(e);let c=0;return vn(a).pipe(Wp(d=>function(r,t,e,n){return function(r,t,e,n){const a=Object.keys(r);if(0===a.length)return en({});const c={};return vn(a).pipe(zn(d=>function(r,t,e,n){const a=ob(r,t,n);return El(a.resolve?a.resolve(t,e):a(t,e))}(r[d],t,e,n).pipe(Pr(p=>{c[d]=p}))),jT(1),zn(()=>Object.keys(c).length===a.length?en(c):bu))}(r._resolve,r,t,n).pipe(Ee(c=>(r._resolvedData=c,r.data=Object.assign(Object.assign({},r.data),zO(r,e).resolve),null)))}(d.route,n,r,t)),Pr(()=>c++),jT(1),zn(d=>c===a.length?en(e):bu))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Pr({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(f),this.cancelNavigationTransition(f,"At least one route resolver didn't emit any value."))}}))}),Pr(f=>{const v=new Z5(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(v)}))}),sw(p=>{const{targetSnapshot:f,id:v,extractedUrl:C,rawUrl:M,extras:{skipLocationChange:O,replaceUrl:P}}=p;return this.hooks.afterPreactivation(f,{navigationId:v,appliedUrlTree:C,rawUrlTree:M,skipLocationChange:!!O,replaceUrl:!!P})}),Ee(p=>{const f=function(r,t,e){const n=Qv(r,t._root,e?e._root:void 0);return new WO(n,t)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:f})}),Pr(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((r,t,e)=>Ee(n=>(new P4(t,n.targetRouterState,n.currentRouterState,e).activate(r),n)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),Pr({next(){c=!0},complete(){c=!0}}),wO(()=>{var p;if(!c&&!d){const f=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,f)):this.cancelNavigationTransition(a,f)}(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===a.id&&(this.currentNavigation=null)}),yu(p=>{if(d=!0,function(r){return r&&r[IO]}(p)){const f=Jd(p.url);f||(this.navigated=!0,this.restoreHistory(a,!0));const v=new SO(a.id,this.serializeUrl(a.extractedUrl),p.message);n.next(v),f?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sb(a.source)};this.scheduleNavigation(C,"imperative",null,M,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const f=new Y5(a.id,this.serializeUrl(a.extractedUrl),p);n.next(f);try{a.resolve(this.errorHandler(p))}catch(v){a.reject(v)}}return bu}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,n)&&setTimeout(()=>{const{source:a,state:c,urlTree:d}=n,p={replaceUrl:!0};if(c){const f=Object.assign({},c);delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(p.state=f)}this.scheduleNavigation(d,a,c,p)},0),this.lastLocationChangeInfo=n}))}extractLocationChangeInfoFromEvent(e){var n;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(n=e.state)||void 0===n?void 0:n.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,n){if(!e)return!0;const a=n.urlTree.toString()===e.urlTree.toString();return n.transitionId!==e.transitionId||!a||!("hashchange"===n.source&&"popstate"===e.source||"popstate"===n.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){nk(e),this.config=e.map(rw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:a,queryParams:c,fragment:d,queryParamsHandling:p,preserveFragment:f}=n,v=a||this.routerState.root,C=f?this.currentUrlTree.fragment:d;let M=null;switch(p){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),c);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=c||null}return null!==M&&(M=this.removeEmptyProps(M)),function(r,t,e,n,a){if(0===e.length)return ew(t.root,t.root,t,n,a);const c=function(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new JO(!0,0,r);let t=0,e=!1;const n=r.reduce((a,c,d)=>{if("object"==typeof c&&null!=c){if(c.outlets){const p={};return vo(c.outlets,(f,v)=>{p[v]="string"==typeof f?f.split("/"):f}),[...a,{outlets:p}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===d?(c.split("/").forEach((p,f)=>{0==f&&"."===p||(0==f&&""===p?e=!0:".."===p?t++:""!=p&&a.push(p))}),a):[...a,c]},[]);return new JO(e,t,n)}(e);if(c.toRoot())return ew(t.root,new ni([],{}),t,n,a);const d=function(r,t,e){if(r.isAbsolute)return new tw(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const c=e.snapshot._urlSegment;return new tw(c,c===t.root,0)}const n=Zv(r.commands[0])?0:1;return function(r,t,e){let n=r,a=t,c=e;for(;c>a;){if(c-=a,n=n.parent,!n)throw new Error("Invalid number of '../'");a=n.segments.length}return new tw(n,!1,a-c)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+n,r.numberOfDoubleDots)}(c,t,r),p=d.processChildren?qv(d.segmentGroup,d.index,c.commands):QO(d.segmentGroup,d.index,c.commands);return ew(d.segmentGroup,p,t,n,a)}(v,this.currentUrlTree,e,M,null!=C?C:null)}navigateByUrl(e,n={skipLocationChange:!1}){const a=Jd(e)?e:this.parseUrl(e),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function(r){for(let t=0;t<r.length;t++){const e=r[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(a){n=this.malformedUriErrorHandler(a,this.urlSerializer,e)}return n}isActive(e,n){let a;if(a=!0===n?Object.assign({},k6):!1===n?Object.assign({},N6):n,Jd(e))return NO(this.currentUrlTree,e,a);const c=this.parseUrl(e);return NO(this.currentUrlTree,c,a)}removeEmptyProps(e){return Object.keys(e).reduce((n,a)=>{const c=e[a];return null!=c&&(n[a]=c),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new im(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,a,c,d){var p,f;if(this.disposed)return Promise.resolve(!1);const v=this.getTransition(),C=sb(n)&&v&&!sb(v.source),P=(this.lastSuccessfulId===v.id||this.currentNavigation?v.rawUrl:v.urlAfterRedirects).toString()===e.toString();if(C&&P)return Promise.resolve(!0);let W,ne,K;d?(W=d.resolve,ne=d.reject,K=d.promise):K=new Promise((qe,pt)=>{W=qe,ne=pt});const ve=++this.navigationId;let Te;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),Te=a&&a.\u0275routerPageId?a.\u0275routerPageId:c.replaceUrl||c.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(f=this.browserPageId)&&void 0!==f?f:0)+1):Te=0,this.setTransition({id:ve,targetPageId:Te,source:n,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:c,resolve:W,reject:ne,promise:K,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),K.catch(qe=>Promise.reject(qe))}setBrowserUrl(e,n){const a=this.urlSerializer.serialize(e),c=Object.assign(Object.assign({},n.extras.state),this.generateNgRouterState(n.id,n.targetPageId));this.location.isCurrentPathEqualTo(a)||n.extras.replaceUrl?this.location.replaceState(a,"",c):this.location.go(a,"",c)}restoreHistory(e,n=!1){var a,c;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===d?this.currentUrlTree===(null===(c=this.currentNavigation)||void 0===c?void 0:c.finalUrl)&&0===d&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n){const a=new SO(e.id,this.serializeUrl(e.extractedUrl),n);this.triggerEvent(a),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return r.\u0275fac=function(e){return new(e||r)(be(Ta),be(YT),be(Xp),be(Hp),be(Yn),be(ov),be(Ud),be(void 0))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();function sb(r){return"imperative"!==r}let pm=(()=>{class r{constructor(e,n,a){this.router=e,this.route=n,this.locationStrategy=a,this.commands=[],this.onChanges=new B,this.subscription=e.events.subscribe(c=>{c instanceof im&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,a,c,d){if(0!==e||n||a||c||d||"string"==typeof this.target&&"_self"!=this.target)return!0;const p={skipLocationChange:Yp(this.skipLocationChange),replaceUrl:Yp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Yp(this.preserveFragment)})}}return r.\u0275fac=function(e){return new(e||r)(I(_s),I(Kd),I(Vp))},r.\u0275dir=Ce({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,n){1&e&&lt("click",function(c){return n.onClick(c.button,c.ctrlKey,c.shiftKey,c.altKey,c.metaKey)}),2&e&&(Xr("href",n.href,E),ft("target",n.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[cn]}),r})();function Yp(r){return""===r||!!r}let cw=(()=>{class r{constructor(e,n,a,c,d){this.parentContexts=e,this.location=n,this.resolver=a,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new nt,this.deactivateEvents=new nt,this.name=c||Qn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const d=(n=n||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,f=new B6(e,p,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,f),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(e){return new(e||r)(I(Xp),I(ui),I(ka),ji("name"),I(un))},r.\u0275dir=Ce({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),r})();class B6{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Kd?this.route:t===Xp?this.childContexts:this.parent.get(t,e)}}class vk{}class bk{preload(t,e){return en(null)}}let yk=(()=>{class r{constructor(e,n,a,c,d){this.router=e,this.injector=c,this.preloadingStrategy=d,this.loader=new mk(n,a,v=>e.triggerEvent(new DO(v)),v=>e.triggerEvent(new MO(v)))}setUpPreloading(){this.subscription=this.router.events.pipe(di(e=>e instanceof im),Wp(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(vl);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const a=[];for(const c of n)if(c.loadChildren&&!c.canLoad&&c._loadedConfig){const d=c._loadedConfig;a.push(this.processRoutes(d.module,d.routes))}else c.loadChildren&&!c.canLoad?a.push(this.preloadConfig(e,c)):c.children&&a.push(this.processRoutes(e,c.children));return vn(a).pipe(dn(),Ee(c=>{}))}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>(n._loadedConfig?en(n._loadedConfig):this.loader.load(e.injector,n)).pipe(zn(c=>(n._loadedConfig=c,this.processRoutes(c.module,c.routes)))))}}return r.\u0275fac=function(e){return new(e||r)(be(_s),be(ov),be(Ud),be(Yn),be(vk))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),uw=(()=>{class r{constructor(e,n,a={}){this.router=e,this.viewportScroller=n,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof zT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof im&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof RO&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new RO(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(be(_s),be(ix),be(void 0))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();const Qd=new We("ROUTER_CONFIGURATION"),Ck=new We("ROUTER_FORROOT_GUARD"),H6=[Hp,{provide:YT,useClass:BO},{provide:_s,useFactory:function(r,t,e,n,a,c,d,p={},f,v){const C=new _s(null,r,t,e,n,a,c,xO(d));return f&&(C.urlHandlingStrategy=f),v&&(C.routeReuseStrategy=v),function(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy)}(p,C),p.enableTracing&&C.events.subscribe(M=>{var O,P;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(P=console.groupEnd)||void 0===P||P.call(console)}),C},deps:[YT,Xp,Hp,Yn,ov,Ud,aw,Qd,[class{},new Ji],[class{},new Ji]]},Xp,{provide:Kd,useFactory:function(r){return r.routerState.root},deps:[_s]},{provide:ov,useClass:QG},yk,bk,class{preload(t,e){return e().pipe(yu(()=>en(null)))}},{provide:Qd,useValue:{enableTracing:!1}}];function U6(){return new kE("Router",_s)}let Ek=(()=>{class r{constructor(e,n){}static forRoot(e,n){return{ngModule:r,providers:[H6,Tk(e),{provide:Ck,useFactory:j6,deps:[[_s,new Ji,new go]]},{provide:Qd,useValue:n||{}},{provide:Vp,useFactory:W6,deps:[jd,[new nu(JE),new Ji],Qd]},{provide:uw,useFactory:G6,deps:[_s,ix,Qd]},{provide:vk,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:bk},{provide:kE,multi:!0,useFactory:U6},[dw,{provide:Np,multi:!0,useFactory:$6,deps:[dw]},{provide:wk,useFactory:K6,deps:[dw]},{provide:QI,multi:!0,useExisting:wk}]]}}static forChild(e){return{ngModule:r,providers:[Tk(e)]}}}return r.\u0275fac=function(e){return new(e||r)(be(Ck,8),be(_s,8))},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({}),r})();function G6(r,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new uw(r,t,e)}function W6(r,t,e={}){return e.useHash?new _j(r,t):new HA(r,t)}function j6(r){return"guarded"}function Tk(r){return[{provide:zh,multi:!0,useValue:r},{provide:aw,multi:!0,useValue:r}]}let dw=(()=>{class r{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new B}appInitializer(){return this.injector.get(fj,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let n=null;const a=new Promise(p=>n=p),c=this.injector.get(_s),d=this.injector.get(Qd);return"disabled"===d.initialNavigation?(c.setUpLocationChangeListener(),n(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(c.hooks.afterPreactivation=()=>this.initNavigation?en(null):(this.initNavigation=!0,n(!0),this.resultOfPreactivationDone),c.initialNavigation()):n(!0),a})}bootstrapListener(e){const n=this.injector.get(Qd),a=this.injector.get(yk),c=this.injector.get(uw),d=this.injector.get(_s),p=this.injector.get(du);e===p.components[0]&&(("enabledNonBlocking"===n.initialNavigation||void 0===n.initialNavigation)&&d.initialNavigation(),a.setUpPreloading(),c.init(),d.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(e){return new(e||r)(be(Yn))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();function $6(r){return r.appInitializer.bind(r)}function K6(r){return r.bootstrapListener.bind(r)}const wk=new We("Router Initializer");function Sk(r,t,e,n,a,c,d){try{var p=r[c](d),f=p.value}catch(v){return void e(v)}p.done?t(f):Promise.resolve(f).then(n,a)}function hw(r){return function(){var t=this,e=arguments;return new Promise(function(n,a){var c=r.apply(t,e);function d(f){Sk(c,n,a,d,p,"next",f)}function p(f){Sk(c,n,a,d,p,"throw",f)}d(void 0)})}}var Bn=m(7832),Fr=m(7148),Ei=m(57470),$p=m(39855),Q6=m(76894),Z6=m(45149);class Ua{constructor(t){this.table=t}reloadData(t,e){return this.table.dataLoader.load(t,void 0,void 0,void 0,e)}langText(){return this.table.modules.localize.getText(...arguments)}langBind(){return this.table.modules.localize.bind(...arguments)}langLocale(){return this.table.modules.localize.getLocale(...arguments)}commsConnections(){return this.table.modules.comms.getConnections(...arguments)}commsSend(){return this.table.modules.comms.send(...arguments)}layoutMode(){return this.table.modules.layout.getMode()}layoutRefresh(){return this.table.modules.layout.layout()}subscribe(){return this.table.eventBus.subscribe(...arguments)}unsubscribe(){return this.table.eventBus.unsubscribe(...arguments)}subscribed(t){return this.table.eventBus.subscribed(t)}subscriptionChange(){return this.table.eventBus.subscriptionChange(...arguments)}dispatch(){return this.table.eventBus.dispatch(...arguments)}chain(){return this.table.eventBus.chain(...arguments)}confirm(){return this.table.eventBus.confirm(...arguments)}dispatchExternal(){return this.table.externalEvents.dispatch(...arguments)}subscribedExternal(t){return this.table.externalEvents.subscribed(t)}subscriptionChangeExternal(){return this.table.externalEvents.subscriptionChange(...arguments)}options(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}setOption(t,e){return void 0!==e&&(this.table.options[t]=e),this.table.options[t]}module(t){return this.table.module(t)}}class si extends Ua{constructor(t,e){super(t),this._handler=null}initialize(){}registerTableOption(t,e){this.table.optionsList.register(t,e)}registerColumnOption(t,e){this.table.columnManager.optionsList.register(t,e)}registerTableFunction(t,e){void 0===this.table[t]?this.table[t]=e:console.warn("Unable to bind table function, name already in use",t)}registerComponentFunction(t,e,n){return this.table.componentFunctionBinder.bind(t,e,n)}registerDataHandler(t,e){this.table.rowManager.registerDataPipelineHandler(t,e),this._handler=t}registerDisplayHandler(t,e){this.table.rowManager.registerDisplayPipelineHandler(t,e),this._handler=t}refreshData(t,e){e||(e=this._handler),e&&this.table.rowManager.refreshActiveData(e,!1,t)}}class rr{static elVisible(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)}static elOffset(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}}static deepClone(t,e,n=[]){var a={}.__proto__,c=[].__proto__;for(var d in e||(e=Object.assign(Array.isArray(t)?[]:{},t)),t){let f,v,p=t[d];null!=p&&"object"==typeof p&&(p.__proto__===a||p.__proto__===c)&&(f=n.findIndex(C=>C.subject===p),f>-1?e[d]=n[f].copy:(v=Object.assign(Array.isArray(p)?[]:{},p),n.unshift({subject:p,copy:v}),e[d]=this.deepClone(p,v,n)))}return e}}var q6={};let e7=(()=>{class r extends si{constructor(e){super(e),this.allowedTypes=["","data","download","clipboard","print","htmlOutput"],this.registerColumnOption("accessor"),this.registerColumnOption("accessorParams"),this.registerColumnOption("accessorData"),this.registerColumnOption("accessorDataParams"),this.registerColumnOption("accessorDownload"),this.registerColumnOption("accessorDownloadParams"),this.registerColumnOption("accessorClipboard"),this.registerColumnOption("accessorClipboardParams"),this.registerColumnOption("accessorPrint"),this.registerColumnOption("accessorPrintParams"),this.registerColumnOption("accessorHtmlOutput"),this.registerColumnOption("accessorHtmlOutputParams")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-retrieve",this.transformRow.bind(this))}initializeColumn(e){var n=!1,a={};this.allowedTypes.forEach(c=>{var p,d="accessor"+(c.charAt(0).toUpperCase()+c.slice(1));e.definition[d]&&(p=this.lookupAccessor(e.definition[d]))&&(n=!0,a[d]={accessor:p,params:e.definition[d+"Params"]||{}})}),n&&(e.modules.accessor=a)}lookupAccessor(e){var n=!1;switch(typeof e){case"string":r.accessors[e]?n=r.accessors[e]:console.warn("Accessor Error - No such accessor found, ignoring: ",e);break;case"function":n=e}return n}transformRow(e,n){var a="accessor"+(n.charAt(0).toUpperCase()+n.slice(1)),c=e.getComponent(),d=rr.deepClone(e.data||{});return this.table.columnManager.traverse(function(p){var f,v,C,M;p.modules.accessor&&(v=p.modules.accessor[a]||p.modules.accessor.accessor||!1)&&"undefined"!=(f=p.getFieldValue(d))&&(M=p.getComponent(),C="function"==typeof v.params?v.params(f,d,n,M,c):v.params,p.setFieldValue(d,v.accessor(f,d,n,C,M,c)))}),d}}return r.moduleName="accessor",r.accessors=q6,r})();var t7={method:"GET"};function pw(r,t){var e=[];if(t=t||"",Array.isArray(r))r.forEach((a,c)=>{e=e.concat(pw(a,t?t+"["+c+"]":c))});else if("object"==typeof r)for(var n in r)e=e.concat(pw(r[n],t?t+"["+n+"]":n));else e.push({key:t,value:r});return e}function n7(r){var t=pw(r),e=[];return t.forEach(function(n){e.push(encodeURIComponent(n.key)+"="+encodeURIComponent(n.value))}),e.join("&")}function i7(r,t,e){return r&&e&&Object.keys(e).length&&(!t.method||"get"==t.method.toLowerCase())&&(t.method="get",r+=(r.includes("?")?"&":"?")+n7(e)),r}function r7(r,t,e){var n;return new Promise((a,c)=>{if(r=this.urlGenerator.call(this.table,r,t,e),"GET"!=t.method.toUpperCase())if(n="object"==typeof this.table.options.ajaxContentType?this.table.options.ajaxContentType:this.contentTypeFormatters[this.table.options.ajaxContentType]){for(var d in n.headers)t.headers||(t.headers={}),void 0===t.headers[d]&&(t.headers[d]=n.headers[d]);t.body=n.body.call(this,r,t,e)}else console.warn("Ajax Error - Invalid ajaxContentType value:",this.table.options.ajaxContentType);r?(void 0===t.headers&&(t.headers={}),void 0===t.headers.Accept&&(t.headers.Accept="application/json"),void 0===t.headers["X-Requested-With"]&&(t.headers["X-Requested-With"]="XMLHttpRequest"),void 0===t.mode&&(t.mode="cors"),"cors"==t.mode?(void 0===t.headers.Origin&&(t.headers.Origin=window.location.origin),void 0===t.credentials&&(t.credentials="same-origin")):void 0===t.credentials&&(t.credentials="include"),fetch(r,t).then(p=>{p.ok?p.json().then(f=>{a(f)}).catch(f=>{c(f),console.warn("Ajax Load Error - Invalid JSON returned",f)}):(console.error("Ajax Load Error - Connection Error: "+p.status,p.statusText),c(p))}).catch(p=>{console.error("Ajax Load Error - Connection Error: ",p),c(p)})):(console.warn("Ajax Load Error - No URL Set"),a([]))})}function fw(r,t){var e=[];if(t=t||"",Array.isArray(r))r.forEach((a,c)=>{e=e.concat(fw(a,t?t+"["+c+"]":c))});else if("object"==typeof r)for(var n in r)e=e.concat(fw(r[n],t?t+"["+n+"]":n));else e.push({key:t,value:r});return e}var o7={json:{headers:{"Content-Type":"application/json"},body:function(r,t,e){return JSON.stringify(e)}},form:{headers:{},body:function(r,t,e){var n=fw(e),a=new FormData;return n.forEach(function(c){a.append(c.key,c.value)}),a}}};let s7=(()=>{class r extends si{constructor(e){super(e),this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderPromise=!1,this.registerTableOption("ajaxURL",!1),this.registerTableOption("ajaxURLGenerator",!1),this.registerTableOption("ajaxParams",{}),this.registerTableOption("ajaxConfig","get"),this.registerTableOption("ajaxContentType","form"),this.registerTableOption("ajaxRequestFunc",!1),this.registerTableOption("ajaxRequesting",function(){}),this.registerTableOption("ajaxResponse",!1),this.contentTypeFormatters=r.contentTypeFormatters}initialize(){this.loaderPromise=this.table.options.ajaxRequestFunc||r.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||r.defaultURLGenerator,this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.registerTableFunction("getAjaxUrl",this.getUrl.bind(this)),this.subscribe("data-loading",this.requestDataCheck.bind(this)),this.subscribe("data-load",this.requestData.bind(this))}requestDataCheck(e,n,a,c){return!((e||!this.url)&&"string"!=typeof e)}requestData(e,n,a,c,d){return this.requestDataCheck(e)?(e&&this.setUrl(e),n&&this.setParams(n,!0),a&&this.setConfig(a),this.sendRequest()):d}setParams(e,n){if(n){this.params=this.params||{};for(let a in e)this.params[a]=e[a]}else this.params=e}getParams(){return this.params||{}}setConfig(e){if(this._loadDefaultConfig(),"string"==typeof e)this.config.method=e;else for(let n in e)this.config[n]=e[n]}_loadDefaultConfig(e){if(!this.config||e){this.config={};for(let n in r.defaultConfig)this.config[n]=r.defaultConfig[n]}}setUrl(e){this.url=e}getUrl(){return this.url}sendRequest(e){var n=this.url;return this._loadDefaultConfig(),!1!==this.table.options.ajaxRequesting.call(this.table,this.url,this.params)?this.loaderPromise(n,this.config,this.params).then(a=>(this.table.options.ajaxResponse&&(a=this.table.options.ajaxResponse.call(this.table,this.url,this.params,a)),a)):Promise.reject()}}return r.moduleName="ajax",r.defaultConfig=t7,r.defaultURLGenerator=i7,r.defaultLoaderPromise=r7,r.contentTypeFormatters=o7,r})();var a7={replace:function(r){return this.table.setData(r)},update:function(r){return this.table.updateOrAddData(r)},insert:function(r){return this.table.addData(r)}},l7={table:function(r){var t=[],e=!0,n=this.table.columnManager.columns,a=[],c=[];return(r=r.split("\n")).forEach(function(d){t.push(d.split("\t"))}),!(!t.length||1===t.length&&t[0].length<2)&&(t[0].forEach(function(d){var p=n.find(function(f){return d&&f.definition.title&&d.trim()&&f.definition.title.trim()===d.trim()});p?a.push(p):e=!1}),e||(e=!0,a=[],t[0].forEach(function(d){var p=n.find(function(f){return d&&f.field&&d.trim()&&f.field.trim()===d.trim()});p?a.push(p):e=!1}),e||(a=this.table.columnManager.columnsByIndex)),e&&t.shift(),t.forEach(function(d){var p={};d.forEach(function(f,v){a[v]&&(p[a[v].field]=f)}),c.push(p)}),c)}};let c7=(()=>{class r extends si{constructor(e){super(e),this.mode=!0,this.pasteParser=function(){},this.pasteAction=function(){},this.customSelection=!1,this.rowRange=!1,this.blocked=!0,this.registerTableOption("clipboard",!1),this.registerTableOption("clipboardCopyStyled",!0),this.registerTableOption("clipboardCopyConfig",!1),this.registerTableOption("clipboardCopyFormatter",!1),this.registerTableOption("clipboardCopyRowRange","active"),this.registerTableOption("clipboardPasteParser","table"),this.registerTableOption("clipboardPasteAction","insert"),this.registerColumnOption("clipboard"),this.registerColumnOption("titleClipboard")}initialize(){this.mode=this.table.options.clipboard,this.rowRange=this.table.options.clipboardCopyRowRange,(!0===this.mode||"copy"===this.mode)&&this.table.element.addEventListener("copy",e=>{var n,a;if(!this.blocked){if(e.preventDefault(),this.customSelection)n=this.customSelection,this.table.options.clipboardCopyFormatter&&(n=this.table.options.clipboardCopyFormatter("plain",n));else{var c=this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig,this.table.options.clipboardCopyStyled,this.rowRange,"clipboard");n=(a=this.table.modules.export.genereateHTMLTable(c))?this.generatePlainContent(c):"",this.table.options.clipboardCopyFormatter&&(n=this.table.options.clipboardCopyFormatter("plain",n),a=this.table.options.clipboardCopyFormatter("html",a))}window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",n):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",n),a&&e.clipboardData.setData("text/html",a)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",n),a&&e.originalEvent.clipboardData.setData("text/html",a)),this.dispatchExternal("clipboardCopied",n,a),this.reset()}}),(!0===this.mode||"paste"===this.mode)&&this.table.element.addEventListener("paste",e=>{this.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction),this.registerTableFunction("copyToClipboard",this.copy.bind(this))}reset(){this.blocked=!0,this.customSelection=!1}generatePlainContent(e){var n=[];return e.forEach(a=>{var c=[];a.columns.forEach(d=>{var p="";if(d)if("group"===a.type&&(d.value=d.component.getKey()),null===d.value)p="";else switch(typeof d.value){case"object":p=JSON.stringify(d.value);break;case"undefined":p="";break;default:p=d.value}c.push(p)}),n.push(c.join("\t"))}),n.join("\n")}copy(e,n){var a,c;this.blocked=!1,this.customSelection=!1,(!0===this.mode||"copy"===this.mode)&&(this.rowRange=e||this.table.options.clipboardCopyRowRange,void 0!==window.getSelection&&void 0!==document.createRange?((e=document.createRange()).selectNodeContents(this.table.element),(a=window.getSelection()).toString()&&n&&(this.customSelection=a.toString()),a.removeAllRanges(),a.addRange(e)):void 0!==document.selection&&void 0!==document.body.createTextRange&&((c=document.body.createTextRange()).moveToElementText(this.table.element),c.select()),document.execCommand("copy"),a&&a.removeAllRanges())}setPasteAction(e){switch(typeof e){case"string":this.pasteAction=r.pasteActions[e],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",e);break;case"function":this.pasteAction=e}}setPasteParser(e){switch(typeof e){case"string":this.pasteParser=r.pasteParsers[e],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",e);break;case"function":this.pasteParser=e}}paste(e){var n,a,c;this.checkPaseOrigin(e)&&(n=this.getPasteData(e),(a=this.pasteParser.call(this,n))?(e.preventDefault(),this.table.modExists("mutator")&&(a=this.mutateData(a)),c=this.pasteAction.call(this,a),this.dispatchExternal("clipboardPasted",n,a,c)):this.dispatchExternal("clipboardPasteError",n))}mutateData(e){var n=[];return Array.isArray(e)?e.forEach(a=>{n.push(this.table.modules.mutator.transformRow(a,"clipboard"))}):n=e,n}checkPaseOrigin(e){var n=!0;return("DIV"!=e.target.tagName||this.table.modules.edit.currentCell)&&(n=!1),n}getPasteData(e){var n;return window.clipboardData&&window.clipboardData.getData?n=window.clipboardData.getData("Text"):e.clipboardData&&e.clipboardData.getData?n=e.clipboardData.getData("text/plain"):e.originalEvent&&e.originalEvent.clipboardData.getData&&(n=e.originalEvent.clipboardData.getData("text/plain")),n}}return r.moduleName="clipboard",r.pasteActions=a7,r.pasteParsers=l7,r})();class u7{constructor(t){return this._row=t,new Proxy(this,{get:function(e,n,a){return void 0!==e[n]?e[n]:e._row.table.componentFunctionBinder.handle("row",e._row,n)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getTable(){return this._row.table}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}_getSelf(){return this._row}}class Dk{constructor(t){return this._cell=t,new Proxy(this,{get:function(e,n,a){return void 0!==e[n]?e[n]:e._cell.table.componentFunctionBinder.handle("cell",e._cell,n)}})}getValue(){return this._cell.getValue()}getOldValue(){return this._cell.getOldValue()}getInitialValue(){return this._cell.initialValue}getElement(){return this._cell.getElement()}getRow(){return this._cell.row.getComponent()}getData(){return this._cell.row.getData()}getField(){return this._cell.column.getField()}getColumn(){return this._cell.column.getComponent()}setValue(t,e){void 0===e&&(e=!0),this._cell.setValue(t,e)}restoreOldValue(){this._cell.setValueActual(this._cell.getOldValue())}restoreInitialValue(){this._cell.setValueActual(this._cell.initialValue)}checkHeight(){this._cell.checkHeight()}getTable(){return this._cell.table}_getSelf(){return this._cell}}class ab extends Ua{constructor(t,e){super(t.table),this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.oldValue=null,this.modules={},this.height=null,this.width=null,this.minWidth=null,this.component=null,this.loaded=!1,this.build()}build(){this.generateElement(),this.setWidth(),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data)),this.initialValue=this.value}generateElement(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element}_configureCell(){var t=this.element,e=this.column.getField();t.style.textAlign=this.column.hozAlign,this.column.vertAlign&&(t.style.display="inline-flex",t.style.alignItems={top:"flex-start",bottom:"flex-end",middle:"center"}[this.column.vertAlign]||"",this.column.hozAlign&&(t.style.justifyContent={left:"flex-start",right:"flex-end",center:"center"}[this.column.hozAlign]||"")),e&&t.setAttribute("tabulator-field",e),this.column.definition.cssClass&&this.column.definition.cssClass.split(" ").forEach(d=>{t.classList.add(d)}),"hover"===this.table.options.tooltipGenerationMode&&t.addEventListener("mouseenter",d=>{this._generateTooltip()}),this.dispatch("cell-init",this),this.column.visible||this.hide()}_generateContents(){var t;switch(typeof(t=this.chain("cell-format",this,null,()=>this.element.innerHTML=this.value))){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",null!=t&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t}}cellRendered(){this.dispatch("cell-rendered",this)}_generateTooltip(){var t=this.column.tooltip;t?(!0===t?t=this.value:"function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),void 0===t&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")}getElement(t){return this.loaded||(this.loaded=!0,t||this.layoutElement()),this.element}getValue(){return this.value}getOldValue(){return this.oldValue}setValue(t,e){this.setValueProcessData(t,e)&&(this.dispatch("cell-value-updated",this),this.cellRendered(),this.dispatchExternal("cellEdited",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()))}setValueProcessData(t,e){var n=!1;return this.value!=t&&(n=!0,e&&(t=this.chain("cell-value-changing",[this,t],null,t))),this.setValueActual(t),n&&this.dispatch("cell-value-changed",this),n}setValueActual(t){this.oldValue=this.value,this.value=t,this.dispatch("cell-value-save-before",this),this.column.setFieldValue(this.row.data,t),this.dispatch("cell-value-save-after",this),this.loaded&&this.layoutElement()}layoutElement(){this._generateContents(),this._generateTooltip(),this.dispatch("cell-layout",this)}setWidth(){this.width=this.column.width,this.element.style.width=this.column.widthStyled}clearWidth(){this.width="",this.element.style.width=""}getWidth(){return this.width||this.element.offsetWidth}setMinWidth(){this.minWidth=this.column.minWidth,this.element.style.minWidth=this.column.minWidthStyled}setMaxWidth(){this.maxWidth=this.column.maxWidth,this.element.style.maxWidth=this.column.maxWidthStyled}checkHeight(){this.row.reinitializeHeight()}clearHeight(){this.element.style.height="",this.height=null}setHeight(){this.height=this.row.height,this.element.style.height=this.row.heightStyled}getHeight(){return this.height||this.element.offsetHeight}show(){this.element.style.display=this.column.vertAlign?"inline-flex":""}hide(){this.element.style.display="none"}delete(){this.dispatch("cell-delete",this),!this.table.rowManager.redrawBlock&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.column.deleteCell(this),this.row.deleteCell(this),this.calcs={}}getIndex(){return this.row.getCellIndex(this)}getComponent(){return this.component||(this.component=new Dk(this)),this.component}}class Mk{constructor(t){return this._column=t,this.type="ColumnComponent",new Proxy(this,{get:function(e,n,a){return void 0!==e[n]?e[n]:e._column.table.componentFunctionBinder.handle("column",e._column,n)}})}getElement(){return this._column.getElement()}getDefinition(){return this._column.getDefinition()}getField(){return this._column.getField()}getCells(){var t=[];return this._column.cells.forEach(function(e){t.push(e.getComponent())}),t}isVisible(){return this._column.visible}show(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()}hide(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()}toggle(){this._column.visible?this.hide():this.show()}delete(){return this._column.delete()}getSubColumns(){var t=[];return this._column.columns.length&&this._column.columns.forEach(function(e){t.push(e.getComponent())}),t}getParentColumn(){return this._column.parent instanceof Column&&this._column.parent.getComponent()}_getSelf(){return this._column}scrollTo(){return this._column.table.columnManager.scrollToColumn(this._column)}getTable(){return this._column.table}move(t,e){var n=this._column.table.columnManager.findColumn(t);n?this._column.table.columnManager.moveColumn(this._column,n,e):console.warn("Move Error - No matching column found:",n)}getNextColumn(){var t=this._column.nextColumn();return!!t&&t.getComponent()}getPrevColumn(){var t=this._column.prevColumn();return!!t&&t.getComponent()}updateDefinition(t){return this._column.updateDefinition(t)}getWidth(){return this._column.getWidth()}setWidth(t){var e;return e=!0===t?this._column.reinitializeWidth(!0):this._column.setWidth(t),this._column.table.columnManager.renderer.rerenderColumns(!0),e}}var d7={title:void 0,field:void 0,columns:void 0,visible:void 0,hozAlign:void 0,vertAlign:void 0,width:void 0,minWidth:40,maxWidth:void 0,tooltip:void 0,cssClass:void 0,variableHeight:void 0,headerTooltip:void 0,headerVertical:void 0,headerHozAlign:void 0,editableTitle:void 0};let fm=(()=>{class r extends Ua{constructor(e,n){super(n.table),this.definition=e,this.parent=n,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.titleHolderElement=!1,this.titleElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.vertAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.titleFormatterRendered=!1,this.mapDefinitions(),this.setField(this.definition.field),this.modules={},this.width=null,this.widthStyled="",this.maxWidth=null,this.maxWidthStyled="",this.minWidth=null,this.minWidthStyled="",this.widthFixed=!1,this.visible=!0,this.component=null,this.definition.columns?(this.isGroup=!0,this.definition.columns.forEach((a,c)=>{var d=new r(a,this);this.attachColumn(d)}),this.checkColumnVisibility()):n.registerColumnField(this),this._initialize(),this.bindModuleColumns()}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.setAttribute("role","columnheader"),e.setAttribute("aria-sort","none"),e}createGroupElement(){var e=document.createElement("div");return e.classList.add("tabulator-col-group-cols"),e}mapDefinitions(){var e=this.table.options.columnDefaults;if(e)for(let n in e)void 0===this.definition[n]&&(this.definition[n]=e[n]);this.definition=this.table.columnManager.optionsList.generate(r.defaultOptionList,this.definition)}checkDefinition(){Object.keys(this.definition).forEach(e=>{-1===r.defaultOptionList.indexOf(e)&&console.warn("Invalid column definition option in '"+(this.field||this.definition.title)+"' column:",e)})}setField(e){this.field=e,this.fieldStructure=e?this.table.options.nestedFieldSeparator?e.split(this.table.options.nestedFieldSeparator):[e]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNestedData:this._setFlatData}registerColumnPosition(e){this.parent.registerColumnPosition(e)}registerColumnField(e){this.parent.registerColumnField(e)}reRegisterPosition(){this.isGroup?this.columns.forEach(function(e){e.reRegisterPosition()}):this.registerColumnPosition(this)}_mapDepricatedFunctionality(){}setTooltip(){var e=this.definition,n=void 0===e.headerTooltip?e.tooltip:e.headerTooltip;n?!0===n?e.field?this.langBind("columns|"+e.field,a=>{this.element.setAttribute("title",a||e.title)}):this.element.setAttribute("title",e.title):("function"==typeof n&&!1===(n=n(this.getComponent()))&&(n=""),this.element.setAttribute("title",n)):this.element.setAttribute("title","")}_initialize(){for(var e=this.definition;this.element.firstChild;)this.element.removeChild(this.element.firstChild);e.headerVertical&&(this.element.classList.add("tabulator-col-vertical"),"flip"===e.headerVertical&&this.element.classList.add("tabulator-col-vertical-flip")),this.contentElement=this._bindEvents(),this.contentElement=this._buildColumnHeaderContent(),this.element.appendChild(this.contentElement),this.isGroup?this._buildGroupHeader():this._buildColumnHeader(),this.setTooltip(),this.dispatch("column-init",this),this.element.addEventListener("mouseenter",n=>{this.setTooltip()})}_bindEvents(){var n,a,c,e=this.definition;"function"==typeof e.headerClick&&this.element.addEventListener("click",d=>{e.headerClick(d,this.getComponent())}),"function"==typeof e.headerDblClick&&this.element.addEventListener("dblclick",d=>{e.headerDblClick(d,this.getComponent())}),"function"==typeof e.headerContext&&this.element.addEventListener("contextmenu",d=>{e.headerContext(d,this.getComponent())}),"function"==typeof e.headerTap&&(c=!1,this.element.addEventListener("touchstart",d=>{c=!0},{passive:!0}),this.element.addEventListener("touchend",d=>{c&&e.headerTap(d,this.getComponent()),c=!1})),"function"==typeof e.headerDblTap&&(n=null,this.element.addEventListener("touchend",d=>{n?(clearTimeout(n),n=null,e.headerDblTap(d,this.getComponent())):n=setTimeout(()=>{clearTimeout(n),n=null},300)})),"function"==typeof e.headerTapHold&&(a=null,this.element.addEventListener("touchstart",d=>{clearTimeout(a),a=setTimeout(function(){clearTimeout(a),a=null,c=!1,e.headerTapHold(d,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",d=>{clearTimeout(a),a=null}))}_buildColumnHeader(){var e=this.definition;this.dispatch("column-layout",this),void 0!==e.visible&&(e.visible?this.show(!0):this.hide(!0)),e.cssClass&&e.cssClass.split(" ").forEach(c=>{this.element.classList.add(c)}),e.field&&this.element.setAttribute("tabulator-field",e.field),this.setMinWidth(parseInt(e.minWidth)),e.maxWidth&&this.setMaxWidth(parseInt(e.maxWidth)),this.reinitializeWidth(),this.tooltip=this.definition.tooltip,this.hozAlign=this.definition.hozAlign,this.vertAlign=this.definition.vertAlign,this.titleElement.style.textAlign=this.definition.headerHozAlign}_buildColumnHeaderContent(){var a=document.createElement("div");return a.classList.add("tabulator-col-content"),this.titleHolderElement=document.createElement("div"),this.titleHolderElement.classList.add("tabulator-col-title-holder"),a.appendChild(this.titleHolderElement),this.titleElement=this._buildColumnHeaderTitle(),this.titleHolderElement.appendChild(this.titleElement),a}_buildColumnHeaderTitle(){var e=this.definition,n=document.createElement("div");if(n.classList.add("tabulator-col-title"),e.editableTitle){var a=document.createElement("input");a.classList.add("tabulator-title-editor"),a.addEventListener("click",c=>{c.stopPropagation(),a.focus()}),a.addEventListener("change",()=>{e.title=a.value,this.dispatchExternal("columnTitleChanged",this.getComponent())}),n.appendChild(a),e.field?this.langBind("columns|"+e.field,c=>{a.value=c||e.title||"&nbsp;"}):a.value=e.title||"&nbsp;"}else e.field?this.langBind("columns|"+e.field,c=>{this._formatColumnHeaderTitle(n,c||e.title||"&nbsp;")}):this._formatColumnHeaderTitle(n,e.title||"&nbsp;");return n}_formatColumnHeaderTitle(e,n){var a=this.chain("column-format",[this,n,e],null,()=>n);switch(typeof a){case"object":a instanceof Node?e.appendChild(a):(e.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",a));break;case"undefined":case"null":e.innerHTML="";break;default:e.innerHTML=a}}_buildGroupHeader(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.definition.cssClass&&this.definition.cssClass.split(" ").forEach(n=>{this.element.classList.add(n)}),this.titleElement.style.textAlign=this.definition.headerHozAlign,this.element.appendChild(this.groupElement)}_getFlatData(e){return e[this.field]}_getNestedData(e){var d,n=e,a=this.fieldStructure,c=a.length;for(let p=0;p<c&&(d=n=n[a[p]],n);p++);return d}_setFlatData(e,n){this.field&&(e[this.field]=n)}_setNestedData(e,n){var a=e,c=this.fieldStructure,d=c.length;for(let p=0;p<d;p++)if(p==d-1)a[c[p]]=n;else{if(!a[c[p]]){if(void 0===n)break;a[c[p]]={}}a=a[c[p]]}}attachColumn(e){this.groupElement?(this.columns.push(e),this.groupElement.appendChild(e.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")}verticalAlign(e,n){var a=this.parent.isGroup?this.parent.getGroupElement().clientHeight:n||this.parent.getHeadersElement().clientHeight;this.element.style.height=a+"px",this.isGroup&&(this.groupElement.style.minHeight=a-this.contentElement.offsetHeight+"px"),!this.isGroup&&"top"!==e&&(this.element.style.paddingTop="bottom"===e?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(c){c.verticalAlign(e)})}clearVerticalAlign(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(e){e.clearVerticalAlign()})}bindModuleColumns(){"rownum"==this.definition.formatter&&(this.table.rowManager.rowNumColumn=this)}getElement(){return this.element}getGroupElement(){return this.groupElement}getField(){return this.field}getFirstColumn(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this}getLastColumn(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this}getColumns(){return this.columns}getCells(){return this.cells}getTopColumn(){return this.parent.isGroup?this.parent.getTopColumn():this}getDefinition(e){var n=[];return this.isGroup&&e&&(this.columns.forEach(function(a){n.push(a.getDefinition(!0))}),this.definition.columns=n),this.definition}checkColumnVisibility(){var e=!1;this.columns.forEach(function(n){n.visible&&(e=!0)}),e?(this.show(),this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1)):this.hide()}show(e,n){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(a){a.show()}),!this.isGroup&&null===this.width&&this.reinitializeWidth(),this.table.columnManager.verticalAlignHeaders(),this.dispatch("column-show",this,n),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!0),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}hide(e,n){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager.verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(a){a.hide()}),this.dispatch("column-hide",this),e||this.dispatchExternal("columnVisibilityChanged",this.getComponent(),!1),this.parent.isGroup&&this.parent.matchChildWidths(),this.silent||this.table.columnManager.renderer.rerenderColumns())}matchChildWidths(){var e=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(n){n.visible&&(e+=n.getWidth())}),this.contentElement.style.maxWidth=e-1+"px",this.parent.isGroup&&this.parent.matchChildWidths())}removeChild(e){var n=this.columns.indexOf(e);n>-1&&this.columns.splice(n,1),this.columns.length||this.delete()}setWidth(e){this.widthFixed=!0,this.setWidthActual(e)}setWidthActual(e){isNaN(e)&&(e=Math.floor(this.table.element.clientWidth/100*parseInt(e))),e=Math.max(this.minWidth,e),this.maxWidth&&(e=Math.min(this.maxWidth,e)),this.width=e,this.widthStyled=e?e+"px":"",this.element.style.width=this.widthStyled,this.isGroup||this.cells.forEach(function(n){n.setWidth()}),this.parent.isGroup&&this.parent.matchChildWidths(),this.dispatch("column-width",this)}checkCellHeights(){var e=[];this.cells.forEach(function(n){n.row.heightInitialized&&(null!==n.row.getElement().offsetParent?(e.push(n.row),n.row.clearCellHeight()):n.row.heightInitialized=!1)}),e.forEach(function(n){n.calcHeight()}),e.forEach(function(n){n.setCellHeight()})}getWidth(){var e=0;return this.isGroup?this.columns.forEach(function(n){n.visible&&(e+=n.getWidth())}):e=this.width,e}getHeight(){return this.element.offsetHeight}setMinWidth(e){this.minWidth=e,this.minWidthStyled=e?e+"px":"",this.element.style.minWidth=this.minWidthStyled,this.cells.forEach(function(n){n.setMinWidth()})}setMaxWidth(e){this.maxWidth=e,this.maxWidthStyled=e?e+"px":"",this.element.style.maxWidth=this.maxWidthStyled,this.cells.forEach(function(n){n.setMaxWidth()})}delete(){return new Promise((e,n)=>{this.isGroup&&this.columns.forEach(function(c){c.delete()}),this.dispatch("column-delete",this);var a=this.cells.length;for(let c=0;c<a;c++)this.cells[0].delete();this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=!1,this.contentElement=!1,this.titleElement=!1,this.groupElement=!1,this.parent.isGroup&&this.parent.removeChild(this),this.table.columnManager.deregisterColumn(this),this.table.columnManager.renderer.rerenderColumns(!0),e()})}columnRendered(){this.titleFormatterRendered&&this.titleFormatterRendered()}generateCell(e){var n=new ab(this,e);return this.cells.push(n),n}nextColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._nextVisibleColumn(e+1)}_nextVisibleColumn(e){var n=this.table.columnManager.getColumnByIndex(e);return!n||n.visible?n:this._nextVisibleColumn(e+1)}prevColumn(){var e=this.table.columnManager.findColumnIndex(this);return e>-1&&this._prevVisibleColumn(e-1)}_prevVisibleColumn(e){var n=this.table.columnManager.getColumnByIndex(e);return!n||n.visible?n:this._prevVisibleColumn(e-1)}reinitializeWidth(e){this.widthFixed=!1,void 0!==this.definition.width&&!e&&this.setWidth(this.definition.width),this.dispatch("column-width-fit-before",this),this.fitToData(),this.dispatch("column-width-fit-after",this)}fitToData(){if(!this.isGroup){this.widthFixed||(this.element.style.width="",this.cells.forEach(n=>{n.clearWidth()}));var e=this.element.offsetWidth;(!this.width||!this.widthFixed)&&(this.cells.forEach(n=>{var a=n.getWidth();a>e&&(e=a)}),e&&this.setWidthActual(e+1))}}updateDefinition(e){var n;return this.isGroup||this.parent.isGroup?(console.error("Column Update Error - The updateDefinition function is only available on ungrouped columns"),Promise.reject("Column Update Error - The updateDefinition function is only available on columns, not column groups")):(n=Object.assign({},this.getDefinition()),n=Object.assign(n,e),this.table.columnManager.addColumn(n,!1,this).then(a=>(n.field==this.field&&(this.field=!1),this.delete().then(()=>a.getComponent()))))}deleteCell(e){var n=this.cells.indexOf(e);n>-1&&this.cells.splice(n,1)}getComponent(){return this.component||(this.component=new Mk(this)),this.component}}return r.defaultOptionList=d7,r})();class gw{constructor(t){return this._row=t,new Proxy(this,{get:function(e,n,a){return void 0!==e[n]?e[n]:e._row.table.componentFunctionBinder.handle("row",e._row,n)}})}getData(t){return this._row.getData(t)}getElement(){return this._row.getElement()}getCells(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t}getCell(t){var e=this._row.getCell(t);return!!e&&e.getComponent()}getIndex(){return this._row.getData("data")[this._row.table.options.index]}getPosition(t){return this._row.table.rowManager.getRowPosition(this._row,t)}delete(){return this._row.delete()}scrollTo(){return this._row.table.rowManager.scrollToRow(this._row)}move(t,e){this._row.moveToRow(t,e)}update(t){return this._row.updateData(t)}normalizeHeight(){this._row.normalizeHeight(!0)}_getSelf(){return this._row}reformat(){return this._row.reinitialize()}getTable(){return this._row.table}getNextRow(){var t=this._row.nextRow();return t&&t.getComponent()}getPrevRow(){var t=this._row.prevRow();return t&&t.getComponent()}}class vs extends Ua{constructor(t,e,n="row"){super(e.table),this.parent=e,this.data={},this.type=n,this.element=!1,this.modules={},this.cells=[],this.height=0,this.heightStyled="",this.manualHeight=!1,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.component=null,this.created=!1,this.setData(t)}create(){this.created||(this.created=!0,this.generateElement())}createElement(){var t=document.createElement("div");t.classList.add("tabulator-row"),t.setAttribute("role","row"),this.element=t}getElement(){return this.create(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}generateElement(){this.createElement(),this.dispatch("row-init",this)}generateCells(){this.cells=this.table.columnManager.generateCells(this)}initialize(t){if(this.create(),!this.initialized||t){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.dispatch("row-layout-before",this),this.generateCells(),this.table.columnManager.renderer.renderRowCells(this),t&&this.normalizeHeight(),this.dispatch("row-layout",this),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent()),this.initialized=!0,this.dispatch("row-layout-after",this)}else this.table.columnManager.renderer.rerenderRowCells(this)}reinitializeHeight(){this.heightInitialized=!1,this.element&&null!==this.element.offsetParent&&this.normalizeHeight(!0)}deinitializeHeight(){this.heightInitialized=!1}reinitialize(t){this.initialized=!1,this.heightInitialized=!1,this.manualHeight||(this.height=0,this.heightStyled=""),this.element&&null!==this.element.offsetParent&&this.initialize(!0),this.dispatch("row-relayout",this)}calcHeight(t){var e=0,n=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(a){var c=a.getHeight();c>e&&(e=c)}),this.height=t?Math.max(e,n):this.manualHeight?this.height:Math.max(e,n),this.heightStyled=this.height?this.height+"px":"",this.outerHeight=this.element.offsetHeight}setCellHeight(){this.cells.forEach(function(t){t.setHeight()}),this.heightInitialized=!0}clearCellHeight(){this.cells.forEach(function(t){t.clearHeight()})}normalizeHeight(t){t&&this.clearCellHeight(),this.calcHeight(t),this.setCellHeight()}setHeight(t,e){(this.height!=t||e)&&(this.manualHeight=!0,this.height=t,this.heightStyled=t?t+"px":"",this.setCellHeight(),this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getWidth(){return this.element.offsetWidth}deleteCell(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)}setData(t){this.data=this.chain("row-data-init-before",[this,t],void 0,t),this.dispatch("row-data-init-after",this)}updateData(t){var a,e=this.element&&rr.elVisible(this.element),n={};return new Promise((c,d)=>{for(var p in"string"==typeof t&&(t=JSON.parse(t)),this.dispatch("row-data-save-before",this),this.subscribed("row-data-changing")&&(n=Object.assign(n,this.data),n=Object.assign(n,t)),a=this.chain("row-data-changing",[this,n,t],null,t))this.data[p]=a[p];for(var p in this.dispatch("row-data-save-after",this),t)this.table.columnManager.getColumnsByFieldRoot(p).forEach(C=>{let M=this.getCell(C.getField());if(M){let O=C.getFieldValue(a);M.getValue()!=O&&(M.setValueProcessData(O),e&&M.cellRendered())}});e?(this.normalizeHeight(!0),this.table.options.rowFormatter&&this.table.options.rowFormatter(this.getComponent())):(this.initialized=!1,this.height=0,this.heightStyled=""),this.dispatch("row-data-changed",this,e,t),this.dispatchExternal("rowUpdated",this.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),c()})}getData(t){return t?this.chain("row-data-retrieve",[this,t],null,this.data):this.data}getCell(t){return t=this.table.columnManager.findColumn(t),this.initialized||this.generateCells(),this.cells.find(function(n){return n.column===t})}getCellIndex(t){return this.cells.findIndex(function(e){return e===t})}findCell(t){return this.cells.find(e=>e.element===t)}getCells(){return this.initialized||this.generateCells(),this.cells}nextRow(){return this.table.rowManager.nextDisplayRow(this,!0)||!1}prevRow(){return this.table.rowManager.prevDisplayRow(this,!0)||!1}moveToRow(t,e){var n=this.table.rowManager.findRow(t);n?(this.table.rowManager.moveRowActual(this,n,!e),this.table.rowManager.refreshActiveData("display",!1,!0)):console.warn("Move Error - No matching row found:",t)}delete(){return this.dispatch("row-delete",this),this.deleteActual(),Promise.resolve()}deleteActual(t){this.table.rowManager.getRowIndex(this),this.detatchModules(),this.table.rowManager.deleteRow(this,t),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.element=!1,this.dispatch("row-deleted",this)}detatchModules(){this.dispatch("row-deleting",this)}deleteCells(){var t=this.cells.length;for(let e=0;e<t;e++)this.cells[0].delete()}wipe(){if(this.detatchModules(),this.deleteCells(),this.element){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)}this.element=!1,this.modules={}}getGroup(){return this.modules.group||!1}getComponent(){return this.component||(this.component=new gw(this)),this.component}}var h7={avg:function(r,t,e){var n=0,a=void 0!==e.precision?e.precision:2;return r.length&&(n=r.reduce(function(c,d){return Number(c)+Number(d)}),n/=r.length,n=!1!==a?n.toFixed(a):n),parseFloat(n).toString()},max:function(r,t,e){var n=null,a=void 0!==e.precision&&e.precision;return r.forEach(function(c){((c=Number(c))>n||null===n)&&(n=c)}),null!==n?!1!==a?n.toFixed(a):n:""},min:function(r,t,e){var n=null,a=void 0!==e.precision&&e.precision;return r.forEach(function(c){((c=Number(c))<n||null===n)&&(n=c)}),null!==n?!1!==a?n.toFixed(a):n:""},sum:function(r,t,e){var n=0,a=void 0!==e.precision&&e.precision;return r.length&&r.forEach(function(c){c=Number(c),n+=isNaN(c)?0:Number(c)}),!1!==a?n.toFixed(a):n},concat:function(r,t,e){var n=0;return r.length&&(n=r.reduce(function(a,c){return String(a)+String(c)})),n},count:function(r,t,e){var n=0;return r.length&&r.forEach(function(a){a&&n++}),n}};let p7=(()=>{class r extends si{constructor(e){super(e),this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.registerTableOption("columnCalcs",!0),this.registerColumnOption("topCalc"),this.registerColumnOption("topCalcParams"),this.registerColumnOption("topCalcFormatter"),this.registerColumnOption("topCalcFormatterParams"),this.registerColumnOption("bottomCalc"),this.registerColumnOption("bottomCalcParams"),this.registerColumnOption("bottomCalcFormatter"),this.registerColumnOption("bottomCalcFormatterParams")}createElement(){var e=document.createElement("div");return e.classList.add("tabulator-calcs-holder"),e}initialize(){this.genColumn=new fm({field:"value"},this),this.subscribe("cell-value-changed",this.cellValueChanged.bind(this)),this.subscribe("column-init",this.initializeColumnCheck.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("column-moved",this.recalcActiveRows.bind(this)),this.subscribe("column-add",this.recalcActiveRows.bind(this)),this.subscribe("data-refeshed",this.recalcActiveRows.bind(this)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.registerTableFunction("getCalcResults",this.getResults.bind(this)),this.registerTableFunction("recalc",this.userRecalc.bind(this))}tableRedraw(e){this.recalc(this.table.rowManager.activeRows),e&&this.redraw()}userRecalc(){this.recalc(this.table.rowManager.activeRows)}rowsUpdated(e){this.table.options.groupBy?this.recalcRowGroup(this):this.recalcActiveRows()}recalcActiveRows(){this.recalc(this.table.rowManager.activeRows)}cellValueChanged(e){(e.column.definition.topCalc||e.column.definition.bottomCalc)&&(this.table.options.groupBy?(("table"==this.table.options.columnCalcs||"both"==this.table.options.columnCalcs)&&this.recalcActiveRows(),"table"!=this.table.options.columnCalcs&&this.recalcRowGroup(e.row)):this.recalcActiveRows())}initializeColumnCheck(e){(e.definition.topCalc||e.definition.bottomCalc)&&this.initializeColumn(e)}initializeColumn(e){var n=e.definition,a={topCalcParams:n.topCalcParams||{},botCalcParams:n.bottomCalcParams||{}};if(n.topCalc){switch(typeof n.topCalc){case"string":r.calculations[n.topCalc]?a.topCalc=r.calculations[n.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",n.topCalc);break;case"function":a.topCalc=n.topCalc}a.topCalc&&(e.modules.columnCalcs=a,this.topCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(n.bottomCalc){switch(typeof n.bottomCalc){case"string":r.calculations[n.bottomCalc]?a.botCalc=r.calculations[n.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",n.bottomCalc);break;case"function":a.botCalc=n.bottomCalc}a.botCalc&&(e.modules.columnCalcs=a,this.botCalcs.push(e),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}}registerColumnField(){}removeCalcs(){var e=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),e=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),e=!0),e&&this.table.rowManager.adjustTableSize()}initializeTopRow(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)}initializeBottomRow(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)}scrollHorizontal(e){this.botInitialized&&this.botRow&&(this.botRow.getElement().style.marginLeft=-e+"px")}recalc(e){var n;if(this.topInitialized||this.botInitialized){if(this.rowsToData(e),this.topInitialized){for(this.topRow&&this.topRow.deleteCells(),n=this.generateRow("top",this.rowsToData(e)),this.topRow=n;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(n.getElement()),n.initialize(!0)}if(this.botInitialized){for(this.botRow&&this.botRow.deleteCells(),n=this.generateRow("bottom",this.rowsToData(e)),this.botRow=n;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(n.getElement()),n.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}}recalcRowGroup(e){this.recalcGroup(this.table.modules.groupRows.getRowGroup(e))}recalcAll(){(this.topCalcs.length||this.botCalcs.length)&&("group"!==this.table.options.columnCalcs&&this.recalcActiveRows(),this.table.options.groupBy&&"table"!==this.table.options.columnCalcs)&&this.table.modules.groupRows.getChildGroups().forEach(n=>{this.recalcGroup(n)})}recalcGroup(e){var n,a;e&&e.calcs&&(e.calcs.bottom&&(n=this.rowsToData(e.rows),a=this.generateRowData("bottom",n),e.calcs.bottom.updateData(a),e.calcs.bottom.reinitialize()),e.calcs.top&&(n=this.rowsToData(e.rows),a=this.generateRowData("top",n),e.calcs.top.updateData(a),e.calcs.top.reinitialize()))}generateTopRow(e){return this.generateRow("top",this.rowsToData(e))}generateBottomRow(e){return this.generateRow("bottom",this.rowsToData(e))}rowsToData(e){var n=[];return e.forEach(a=>{if(n.push(a.getData()),this.table.options.dataTree&&this.table.options.dataTreeChildColumnCalcs&&a.modules.dataTree.open){var c=this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(a));n=n.concat(c)}}),n}generateRow(e,n){var c,a=this.generateRowData(e,n);return this.table.modExists("mutator")&&this.table.modules.mutator.disable(),c=new vs(a,this,"calc"),this.table.modExists("mutator")&&this.table.modules.mutator.enable(),c.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+e),c.component=!1,c.getComponent=()=>(c.component||(c.component=new u7(this)),c.component),c.generateCells=()=>{var d=[];this.table.columnManager.columnsByIndex.forEach(p=>{this.genColumn.setField(p.getField()),this.genColumn.hozAlign=p.hozAlign,this.genColumn.modules.format=p.definition[e+"CalcFormatter"]&&this.table.modExists("format")?{formatter:this.table.modules.format.getFormatter(p.definition[e+"CalcFormatter"]),params:p.definition[e+"CalcFormatterParams"]||{}}:{formatter:this.table.modules.format.getFormatter("plaintext"),params:{}},this.genColumn.definition.cssClass=p.definition.cssClass;var f=new ab(this.genColumn,c);f.getElement(),f.column=p,f.setWidth(),p.cells.push(f),d.push(f),p.visible||f.hide()}),c.cells=d},c}generateRowData(e,n){var p,f,a={},d="top"==e?"topCalc":"botCalc";return("top"==e?this.topCalcs:this.botCalcs).forEach(function(v){var C=[];v.modules.columnCalcs&&v.modules.columnCalcs[d]&&(n.forEach(function(M){C.push(v.getFieldValue(M))}),p="function"==typeof v.modules.columnCalcs[f=d+"Params"]?v.modules.columnCalcs[f](C,n):v.modules.columnCalcs[f],v.setFieldValue(a,v.modules.columnCalcs[d](C,n,p)))}),a}hasTopCalcs(){return!!this.topCalcs.length}hasBottomCalcs(){return!!this.botCalcs.length}redraw(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)}getResults(){var e={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(a=>{e[a.getKey()]=this.getGroupResults(a)}):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e}getGroupResults(e){var n=e._getSelf(),a=e.getSubGroups(),c={};return a.forEach(p=>{c[p.getKey()]=this.getGroupResults(p)}),{top:n.calcs.top?n.calcs.top.getData():{},bottom:n.calcs.bottom?n.calcs.bottom.getData():{},groups:c}}}return r.moduleName="columnCalcs",r.calculations=h7,r})(),f7=(()=>{class r extends si{constructor(e){super(e),this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.elementField=!1,this.startOpen=function(){},this.displayIndex=0,this.registerTableOption("dataTree",!1),this.registerTableOption("dataTreeFilter",!0),this.registerTableOption("dataTreeSort",!0),this.registerTableOption("dataTreeElementColumn",!1),this.registerTableOption("dataTreeBranchElement",!0),this.registerTableOption("dataTreeChildIndent",9),this.registerTableOption("dataTreeChildField","_children"),this.registerTableOption("dataTreeCollapseElement",!1),this.registerTableOption("dataTreeExpandElement",!1),this.registerTableOption("dataTreeStartExpanded",!1),this.registerTableOption("dataTreeChildColumnCalcs",!1),this.registerTableOption("dataTreeSelectPropagate",!1),this.registerComponentFunction("row","treeCollapse",this.collapseRow.bind(this)),this.registerComponentFunction("row","treeExpand",this.expandRow.bind(this)),this.registerComponentFunction("row","treeToggle",this.toggleRow.bind(this)),this.registerComponentFunction("row","getTreeParent",this.getTreeParent.bind(this)),this.registerComponentFunction("row","getTreeChildren",this.getRowChildren.bind(this)),this.registerComponentFunction("row","addTreeChild",this.addTreeChildRow.bind(this))}initialize(){if(this.table.options.dataTree){var e=null,n=this.table.columnManager.getFirstVisibileColumn(),a=this.table.options;switch(this.field=a.dataTreeChildField,this.indent=a.dataTreeChildIndent,this.elementField=a.dataTreeElementColumn||!!n&&n.field,a.dataTreeBranchElement&&(!0===a.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof a.dataTreeBranchElement?((e=document.createElement("div")).innerHTML=a.dataTreeBranchElement,this.branchEl=e.firstChild):this.branchEl=a.dataTreeBranchElement),a.dataTreeCollapseElement?"string"==typeof a.dataTreeCollapseElement?((e=document.createElement("div")).innerHTML=a.dataTreeCollapseElement,this.collapseEl=e.firstChild):this.collapseEl=a.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.tabIndex=0,this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),a.dataTreeExpandElement?"string"==typeof a.dataTreeExpandElement?((e=document.createElement("div")).innerHTML=a.dataTreeExpandElement,this.expandEl=e.firstChild):this.expandEl=a.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.tabIndex=0,this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),typeof a.dataTreeStartExpanded){case"boolean":this.startOpen=function(c,d){return a.dataTreeStartExpanded};break;case"function":this.startOpen=a.dataTreeStartExpanded;break;default:this.startOpen=function(c,d){return a.dataTreeStartExpanded[d]}}this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout-after",this.layoutRow.bind(this)),this.subscribe("row-relayout",this.layoutRow.bind(this)),this.subscribe("row-deleted",this.rowDelete.bind(this),0),this.subscribe("row-data-changed",this.rowDataChanged.bind(this),10),this.subscribe("column-moving-rows",this.columnMoving.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),30)}}getRowChildren(e){return this.getTreeChildren(e,!0)}columnMoving(){var e=[];return this.table.rowManager.rows.forEach(n=>{e=e.concat(this.getTreeChildren(n,!1,!0))}),e}rowDataChanged(e,n,a){this.redrawNeeded(a)&&(this.initializeRow(e),n&&(this.layoutRow(e),this.refreshData(!0)))}initializeRow(e){var n=e.getData()[this.field],a=Array.isArray(n),c=a||!a&&"object"==typeof n&&null!==n;!c&&e.modules.dataTree&&e.modules.dataTree.branchEl&&e.modules.dataTree.branchEl.parentNode.removeChild(e.modules.dataTree.branchEl),!c&&e.modules.dataTree&&e.modules.dataTree.controlEl&&e.modules.dataTree.controlEl.parentNode.removeChild(e.modules.dataTree.controlEl),e.modules.dataTree={index:e.modules.dataTree?e.modules.dataTree.index:0,open:!!c&&(e.modules.dataTree?e.modules.dataTree.open:this.startOpen(e.getComponent(),0)),controlEl:!(!e.modules.dataTree||!c)&&e.modules.dataTree.controlEl,branchEl:!(!e.modules.dataTree||!c)&&e.modules.dataTree.branchEl,parent:!!e.modules.dataTree&&e.modules.dataTree.parent,children:c}}reinitializeRowChildren(e){this.getTreeChildren(e,!1,!0).forEach(function(a){a.reinitialize(!0)})}layoutRow(e){var a=(this.elementField?e.getCell(this.elementField):e.getCells()[0]).getElement(),c=e.modules.dataTree;c.branchEl&&(c.branchEl.parentNode&&c.branchEl.parentNode.removeChild(c.branchEl),c.branchEl=!1),c.controlEl&&(c.controlEl.parentNode&&c.controlEl.parentNode.removeChild(c.controlEl),c.controlEl=!1),this.generateControlElement(e,a),e.getElement().classList.add("tabulator-tree-level-"+c.index),c.index&&(this.branchEl?(c.branchEl=this.branchEl.cloneNode(!0),a.insertBefore(c.branchEl,a.firstChild),this.table.rtl?c.branchEl.style.marginRight=(c.branchEl.offsetWidth+c.branchEl.style.marginLeft)*(c.index-1)+c.index*this.indent+"px":c.branchEl.style.marginLeft=(c.branchEl.offsetWidth+c.branchEl.style.marginRight)*(c.index-1)+c.index*this.indent+"px"):this.table.rtl?a.style.paddingRight=parseInt(window.getComputedStyle(a,null).getPropertyValue("padding-right"))+c.index*this.indent+"px":a.style.paddingLeft=parseInt(window.getComputedStyle(a,null).getPropertyValue("padding-left"))+c.index*this.indent+"px")}generateControlElement(e,n){var a=e.modules.dataTree,c=(n=n||e.getCells()[0].getElement(),a.controlEl);!1!==a.children&&(a.open?(a.controlEl=this.collapseEl.cloneNode(!0),a.controlEl.addEventListener("click",d=>{d.stopPropagation(),this.collapseRow(e)})):(a.controlEl=this.expandEl.cloneNode(!0),a.controlEl.addEventListener("click",d=>{d.stopPropagation(),this.expandRow(e)})),a.controlEl.addEventListener("mousedown",d=>{d.stopPropagation()}),c&&c.parentNode===n?c.parentNode.replaceChild(a.controlEl,c):n.insertBefore(a.controlEl,n.firstChild))}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){var n=[];return e.forEach((a,c)=>{var d;n.push(a),a instanceof vs&&(a.create(),!(d=a.modules.dataTree.children).index&&!1!==d.children&&this.getChildren(a).forEach(f=>{f.create(),n.push(f)}))}),n}getChildren(e,n){var a=e.modules.dataTree,c=[],d=[];return!1!==a.children&&(a.open||n)&&(Array.isArray(a.children)||(a.children=this.generateChildren(e)),c=this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(a.children):a.children,this.table.modExists("sort")&&this.table.options.dataTreeSort&&this.table.modules.sort.sort(c),c.forEach(p=>{d.push(p),this.getChildren(p).forEach(v=>{d.push(v)})})),d}generateChildren(e){var n=[],a=e.getData()[this.field];return Array.isArray(a)||(a=[a]),a.forEach(c=>{var d=new vs(c||{},this.table.rowManager);d.create(),d.modules.dataTree.index=e.modules.dataTree.index+1,d.modules.dataTree.parent=e,d.modules.dataTree.children&&(d.modules.dataTree.open=this.startOpen(d.getComponent(),d.modules.dataTree.index)),n.push(d)}),n}expandRow(e,n){var a=e.modules.dataTree;!1!==a.children&&(a.open=!0,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowExpanded",e.getComponent(),e.modules.dataTree.index))}collapseRow(e){var n=e.modules.dataTree;!1!==n.children&&(n.open=!1,e.reinitialize(),this.refreshData(!0),this.dispatchExternal("dataTreeRowCollapsed",e.getComponent(),e.modules.dataTree.index))}toggleRow(e){var n=e.modules.dataTree;!1!==n.children&&(n.open?this.collapseRow(e):this.expandRow(e))}getTreeParent(e){return!!e.modules.dataTree.parent&&e.modules.dataTree.parent.getComponent()}getFilteredTreeChildren(e){var n=e.modules.dataTree,a=[];return n.children&&(Array.isArray(n.children)||(n.children=this.generateChildren(e)),(this.table.modExists("filter")&&this.table.options.dataTreeFilter?this.table.modules.filter.filter(n.children):n.children).forEach(d=>{d instanceof vs&&a.push(d)})),a}rowDelete(e){var a,n=e.modules.dataTree.parent;n&&(!1!==(a=this.findChildIndex(e,n))&&n.data[this.field].splice(a,1),n.data[this.field].length||delete n.data[this.field],this.initializeRow(n),this.layoutRow(n)),this.refreshData(!0)}addTreeChildRow(e,n,a,c){var d=!1;"string"==typeof n&&(n=JSON.parse(n)),Array.isArray(e.data[this.field])||(e.data[this.field]=[],e.modules.dataTree.open=this.startOpen(e.getComponent(),e.modules.dataTree.index)),void 0!==c&&!1!==(d=this.findChildIndex(c,e))&&e.data[this.field].splice(a?d:d+1,0,n),!1===d&&(a?e.data[this.field].unshift(n):e.data[this.field].push(n)),this.initializeRow(e),this.layoutRow(e),this.refreshData(!0)}findChildIndex(e,n){var a=!1;return"object"==typeof e?e instanceof vs?a=e.data:e instanceof RowComponent?a=e._getSelf().data:"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&n.modules.dataTree&&(a=n.modules.dataTree.children.find(c=>c instanceof vs&&c.element===e))&&(a=a.data):a=null!=e&&n.data[this.field].find(c=>c.data[this.table.options.index]==e),a&&(Array.isArray(n.data[this.field])&&(a=n.data[this.field].indexOf(a)),-1==a&&(a=!1)),a}getTreeChildren(e,n,a){var c=e.modules.dataTree,d=[];return c.children&&(Array.isArray(c.children)||(c.children=this.generateChildren(e)),c.children.forEach(p=>{p instanceof vs&&(d.push(n?p.getComponent():p),a&&(d=d.concat(this.getTreeChildren(p,n,a))))})),d}checkForRestyle(e){e.row.cells.indexOf(e)||this.layoutRow(e.row)}getChildField(){return this.field}redrawNeeded(e){return!!this.field&&void 0!==e[this.field]||!!this.elementField&&void 0!==e[this.elementField]}}return r.moduleName="dataTree",r})();var y7={csv:function(r,t,e){var n=t&&t.delimiter?t.delimiter:",",a=[],c=[];r.forEach(d=>{var p=[];switch(d.type){case"group":console.warn("Download Warning - CSV downloader cannot process row groups");break;case"calc":console.warn("Download Warning - CSV downloader cannot process column calculations");break;case"header":d.columns.forEach((f,v)=>{f&&1===f.depth&&(c[v]=null==f.value?"":'"'+String(f.value).split('"').join('""')+'"')});break;case"row":d.columns.forEach(f=>{if(f){switch(typeof f.value){case"object":f.value=JSON.stringify(f.value);break;case"undefined":case"null":f.value=""}p.push('"'+String(f.value).split('"').join('""')+'"')}}),a.push(p.join(n))}}),c.length&&a.unshift(c.join(n)),a=a.join("\n"),t.bom&&(a="\ufeff"+a),e(a,"text/csv")},json:function(r,t,e){var n=[];r.forEach(a=>{var c={};switch(a.type){case"header":break;case"group":console.warn("Download Warning - JSON downloader cannot process row groups");break;case"calc":console.warn("Download Warning - JSON downloader cannot process column calculations");break;case"row":a.columns.forEach(d=>{d&&(c[d.component.getField()]=d.value)}),n.push(c)}}),e(n=JSON.stringify(n,null,"\t"),"application/json")},pdf:function(r,t,e){var n=[],a=[],c={},d=t.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},p=t.rowCalcStyles||{fontStyle:"bold",fontSize:10,cellPadding:4,fillColor:232},f=t.jsPDF||{},v=t&&t.title?t.title:"";function C(O,P){var W=[];return O.columns.forEach(ne=>{var K;if(ne){switch(typeof ne.value){case"object":ne.value=JSON.stringify(ne.value);break;case"undefined":case"null":ne.value=""}K={content:ne.value,colSpan:ne.width,rowSpan:ne.height},P&&(K.styles=P),W.push(K)}else W.push("")}),W}f.orientation||(f.orientation=t.orientation||"landscape"),f.unit||(f.unit="pt"),r.forEach(O=>{switch(O.type){case"header":n.push(C(O));break;case"group":a.push(C(O,d));break;case"calc":a.push(C(O,p));break;case"row":a.push(C(O))}});var M=new jspdf.jsPDF(f);t&&t.autoTable&&(c="function"==typeof t.autoTable?t.autoTable(M)||{}:t.autoTable),v&&(c.didDrawPage=function(O){M.text(v,40,30)}),c.head=n,c.body=a,M.autoTable(c),t&&t.documentProcessing&&t.documentProcessing(M),e(M.output("arraybuffer"),"application/pdf")},xlsx:function(r,t,e){var a=t.sheetName||"Sheet1",c=XLSX.utils.book_new(),d=new Ua(this);function f(){var M=[],O=[],P={},W={s:{c:0,r:0},e:{c:r[0]?r[0].columns.reduce((ne,K)=>ne+(K&&K.width?K.width:1),0):0,r:r.length}};return r.forEach((ne,K)=>{var ve=[];ne.columns.forEach(function(Te,qe){Te?(ve.push(Te.value instanceof Date||"object"!=typeof Te.value?Te.value:JSON.stringify(Te.value)),(Te.width>1||Te.height>-1)&&O.push({s:{r:K,c:qe},e:{r:K+Te.height-1,c:qe+Te.width-1}})):ve.push("")}),M.push(ve)}),XLSX.utils.sheet_add_aoa(P,M),P["!ref"]=XLSX.utils.encode_range(W),O.length&&(P["!merges"]=O),P}if(c.SheetNames=[],c.Sheets={},t.sheetOnly)e(f());else{if(t.sheets)for(var v in t.sheets)!0===t.sheets[v]?(c.SheetNames.push(v),c.Sheets[v]=f()):(c.SheetNames.push(v),d.commsSend(t.sheets[v],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},active:this.active,intercept:function(M){c.Sheets[v]=M}}));else c.SheetNames.push(a),c.Sheets[a]=f();t.documentProcessing&&(c=t.documentProcessing(c)),e(function(M){for(var O=new ArrayBuffer(M.length),P=new Uint8Array(O),W=0;W!=M.length;++W)P[W]=255&M.charCodeAt(W);return O}(XLSX.write(c,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}},html:function(r,t,e){this.modExists("export",!0)&&e(this.modules.export.genereateHTMLTable(r),"text/html")}};let C7=(()=>{class r extends si{constructor(e){super(e),this.registerTableOption("downloadReady",function(n,a){return a}),this.registerTableOption("downloadConfig",{}),this.registerTableOption("downloadRowRange","active"),this.registerColumnOption("download"),this.registerColumnOption("titleDownload")}initialize(){this.registerTableFunction("download",this.download.bind(this)),this.registerTableFunction("downloadToTab",this.downloadToTab.bind(this))}downloadToTab(e,n,a,c){this.download(e,n,a,c,!0)}download(e,n,a,c,d){var p=!1;if("function"==typeof e?p=e:r.downloaders[e]?p=r.downloaders[e]:console.warn("Download Error - No such download type found: ",e),p){var v=this.generateExportList(c);p.call(this.table,v,a||{},function(C,M){d?!0===d?this.triggerDownload(C,M,e,n,!0):d(C):this.triggerDownload(C,M,e,n)}.bind(this))}}generateExportList(e){var n=this.table.modules.export.generateExportList(this.table.options.downloadConfig,!1,e||this.table.options.downloadRowRange,"download"),a=this.table.options.groupHeaderDownload;return a&&!Array.isArray(a)&&(a=[a]),n.forEach(c=>{var d;"group"===c.type&&(d=c.columns[0],a&&a[c.indent]&&(d.value=a[c.indent](d.value,c.component._group.getRowCount(),c.component._group.getData(),c.component)))}),n}triggerDownload(e,n,a,c,d){var p=document.createElement("a"),f=new Blob([e],{type:n});c=c||"Tabulator."+("function"==typeof a?"txt":a),(f=this.table.options.downloadReady(e,f))&&(d?window.open(window.URL.createObjectURL(f)):navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(f,c):(p.setAttribute("href",window.URL.createObjectURL(f)),p.setAttribute("download",c),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p)),this.dispatchExternal("downloadComplete"))}commsReceived(e,n,a){switch(n){case"intercept":this.download(a.type,"",a.options,a.active,a.intercept)}}}return r.moduleName="download",r.downloaders=y7,r})();function lb(r,t){var e=t.mask,n=void 0!==t.maskLetterChar?t.maskLetterChar:"A",a=void 0!==t.maskNumberChar?t.maskNumberChar:"9",c=void 0!==t.maskWildcardChar?t.maskWildcardChar:"*";function d(p){var f=e[p];void 0!==f&&f!==c&&f!==n&&f!==a&&(r.value=r.value+""+f,d(p+1))}r.addEventListener("keydown",p=>{var f=r.value.length,v=p.key;if(p.keyCode>46){if(f>=e.length)return p.preventDefault(),p.stopPropagation(),!1;switch(e[f]){case n:if(v.toUpperCase()==v.toLowerCase())return p.preventDefault(),p.stopPropagation(),!1;break;case a:if(isNaN(v))return p.preventDefault(),p.stopPropagation(),!1;break;case c:break;default:if(v!==e[f])return p.preventDefault(),p.stopPropagation(),!1}}}),r.addEventListener("keyup",p=>{p.keyCode>46&&t.maskAutoFill&&d(r.value.length)}),r.placeholder||(r.placeholder=e),t.maskAutoFill&&d(r.value.length)}var x7={input:function(r,t,e,n,a){var c=r.getValue(),d=document.createElement("input");if(d.setAttribute("type",a.search?"search":"text"),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let f in a.elementAttributes)"+"==f.charAt(0)?(f=f.slice(1),d.setAttribute(f,d.getAttribute(f)+a.elementAttributes["+"+f])):d.setAttribute(f,a.elementAttributes[f]);function p(f){null==c&&""!==d.value||d.value!==c?e(d.value)&&(c=d.value):n()}return d.value=void 0!==c?c:"",t(function(){d.focus({preventScroll:!0}),d.style.height="100%"}),d.addEventListener("change",p),d.addEventListener("blur",p),d.addEventListener("keydown",function(f){switch(f.keyCode){case 13:p();break;case 27:n();break;case 35:case 36:f.stopPropagation()}}),a.mask&&lb(d,a),d},textarea:function(r,t,e,n,a){var c=r.getValue(),d=a.verticalNavigation||"hybrid",p=String(null!=c?c:""),v=(p.match(/(?:\r\n|\r|\n)/g),document.createElement("textarea")),C=0;if(v.style.display="block",v.style.padding="2px",v.style.height="100%",v.style.width="100%",v.style.boxSizing="border-box",v.style.whiteSpace="pre-wrap",v.style.resize="none",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let O in a.elementAttributes)"+"==O.charAt(0)?(O=O.slice(1),v.setAttribute(O,v.getAttribute(O)+a.elementAttributes["+"+O])):v.setAttribute(O,a.elementAttributes[O]);function M(O){null==c&&""!==v.value||v.value!==c?(e(v.value)&&(c=v.value),setTimeout(function(){r.getRow().normalizeHeight()},300)):n()}return v.value=p,t(function(){v.focus({preventScroll:!0}),v.style.height="100%",v.style.height=v.scrollHeight+"px",r.getRow().normalizeHeight()}),v.addEventListener("change",M),v.addEventListener("blur",M),v.addEventListener("keyup",function(){v.style.height="";var O=v.scrollHeight;v.style.height=O+"px",O!=C&&(C=O,r.getRow().normalizeHeight())}),v.addEventListener("keydown",function(O){switch(O.keyCode){case 27:n();break;case 38:("editor"==d||"hybrid"==d&&v.selectionStart)&&(O.stopImmediatePropagation(),O.stopPropagation());break;case 40:("editor"==d||"hybrid"==d&&v.selectionStart!==v.value.length)&&(O.stopImmediatePropagation(),O.stopPropagation());break;case 35:case 36:O.stopPropagation()}}),a.mask&&lb(v,a),v},number:function(r,t,e,n,a){var c=r.getValue(),d=a.verticalNavigation||"editor",p=document.createElement("input");if(p.setAttribute("type","number"),void 0!==a.max&&p.setAttribute("max",a.max),void 0!==a.min&&p.setAttribute("min",a.min),void 0!==a.step&&p.setAttribute("step",a.step),p.style.padding="4px",p.style.width="100%",p.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let C in a.elementAttributes)"+"==C.charAt(0)?(C=C.slice(1),p.setAttribute(C,p.getAttribute(C)+a.elementAttributes["+"+C])):p.setAttribute(C,a.elementAttributes[C]);p.value=c;var f=function(C){v()};function v(){var C=p.value;!isNaN(C)&&""!==C&&(C=Number(C)),C!==c?e(C)&&(c=C):n()}return t(function(){p.removeEventListener("blur",f),p.focus({preventScroll:!0}),p.style.height="100%",p.addEventListener("blur",f)}),p.addEventListener("keydown",function(C){switch(C.keyCode){case 13:v();break;case 27:n();break;case 38:case 40:"editor"==d&&(C.stopImmediatePropagation(),C.stopPropagation());break;case 35:case 36:C.stopPropagation()}}),a.mask&&lb(p,a),p},range:function(r,t,e,n,a){var c=r.getValue(),d=document.createElement("input");if(d.setAttribute("type","range"),void 0!==a.max&&d.setAttribute("max",a.max),void 0!==a.min&&d.setAttribute("min",a.min),void 0!==a.step&&d.setAttribute("step",a.step),d.style.padding="4px",d.style.width="100%",d.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let f in a.elementAttributes)"+"==f.charAt(0)?(f=f.slice(1),d.setAttribute(f,d.getAttribute(f)+a.elementAttributes["+"+f])):d.setAttribute(f,a.elementAttributes[f]);function p(){var f=d.value;!isNaN(f)&&""!==f&&(f=Number(f)),f!=c?e(f)&&(c=f):n()}return d.value=c,t(function(){d.focus({preventScroll:!0}),d.style.height="100%"}),d.addEventListener("blur",function(f){p()}),d.addEventListener("keydown",function(f){switch(f.keyCode){case 13:p();break;case 27:n()}}),d},select:function(r,t,e,n,a){var c=this,d=r.getElement(),p=r.getValue(),f=a.verticalNavigation||"editor",v=void 0!==p||null===p?Array.isArray(p)?p:[p]:void 0!==a.defaultValue?a.defaultValue:[],C=document.createElement("input"),M=document.createElement("div"),O=a.multiselect,P=[],W={},ne=[],K=[],ve=!0,Te=!1,qe="",pt=null;function fn(rt){var qn,Kt={},Ti=c.table.getData();return(qn=rt?c.table.columnManager.getColumnByField(rt):r.getColumn()._getSelf())?Ti.forEach(function(Cf){var to=qn.getFieldValue(Cf);null!=to&&""!==to&&(Kt[to]=!0)}):console.warn("unable to find matching column to create select lookup list:",rt),Object.keys(Kt)}function Li(rt,Kt){!O&&W&&W.element&&W.element.classList.remove("active"),W&&W.element&&W.element.classList.remove("focused"),W=rt,rt.element&&(rt.element.classList.add("focused"),Kt&&rt.element.classList.add("active")),rt&&rt.element&&rt.element.scrollIntoView&&rt.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Yi(rt){-1==K.indexOf(rt)&&(K.push(rt),Li(rt,!0)),zt()}function Ai(rt){var Kt=K[rt];rt>-1&&(K.splice(rt,1),Kt.element&&Kt.element.classList.remove("active"))}function Nn(rt){rt||(rt=W);var Kt=K.indexOf(rt);Kt>-1?Ai(Kt):(!0!==O&&K.length>=O&&Ai(0),Yi(rt)),zt()}function Co(rt){Ut(),rt||(rt=W),rt&&(C.value=rt.label,e(rt.value)),v=[rt.value]}function Hr(rt){rt||Ut();var Kt=[];K.forEach(Ti=>{Kt.push(Ti.value)}),v=Kt,e(Kt)}function zt(){var rt=[];K.forEach(Kt=>{rt.push(Kt.label)}),C.value=rt.join(", "),!1===c.currentCell&&Hr(!0)}function bt(){Ut(),n()}function Ut(){M.parentNode&&M.parentNode.removeChild(M),c.table.rowManager.element.removeEventListener("scroll",bt)}if((Array.isArray(a)||!Array.isArray(a)&&"object"==typeof a&&!a.values)&&(console.warn("DEPRECATION WARNING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),a={values:a}),C.setAttribute("type","text"),C.style.padding="4px",C.style.width="100%",C.style.boxSizing="border-box",C.style.cursor="default",C.readOnly=0!=this.currentCell,a.elementAttributes&&"object"==typeof a.elementAttributes)for(let rt in a.elementAttributes)"+"==rt.charAt(0)?(rt=rt.slice(1),C.setAttribute(rt,C.getAttribute(rt)+a.elementAttributes["+"+rt])):C.setAttribute(rt,a.elementAttributes[rt]);return C.value=void 0!==p||null===p?p:"",C.addEventListener("search",function(rt){C.value||(function(){var rt=K.length;for(let Kt=0;Kt<rt;Kt++)Ai(0)}(),Hr())}),C.addEventListener("keydown",function(rt){var Kt;switch(rt.keyCode){case 38:Kt=P.indexOf(W),("editor"==f||"hybrid"==f&&Kt)&&(rt.stopImmediatePropagation(),rt.stopPropagation(),rt.preventDefault(),Kt>0&&Li(P[Kt-1],!O));break;case 40:Kt=P.indexOf(W),("editor"==f||"hybrid"==f&&Kt<P.length-1)&&(rt.stopImmediatePropagation(),rt.stopPropagation(),rt.preventDefault(),Kt<P.length-1&&Li(-1==Kt?P[0]:P[Kt+1],!O));break;case 37:case 39:rt.stopImmediatePropagation(),rt.stopPropagation(),rt.preventDefault();break;case 13:O?Nn():Co();break;case 27:bt();break;case 9:break;default:!1===c.currentCell&&rt.preventDefault(),rt.keyCode>=38&&rt.keyCode<=90&&function(rt){clearTimeout(pt);var Kt=String.fromCharCode(event.keyCode).toLowerCase();qe+=Kt.toLowerCase();var Ti=P.find(qn=>void 0!==qn.label&&qn.label.toLowerCase().startsWith(qe));Ti&&Li(Ti,!O),pt=setTimeout(()=>{qe=""},800)}()}}),C.addEventListener("blur",function(rt){ve&&(O?Hr():bt())}),C.addEventListener("focus",function(rt){Te||function(){if(K=[],!M.parentNode){!function(rt,Kt){var Ti=[],qn=[];function Cf(wi){return Kt.indexOf((wi={label:wi.label,value:wi.value,itemParams:wi.itemParams,elementAttributes:wi.elementAttributes,element:!1}).value)>-1&&Yi(wi),Ti.push(wi),qn.push(wi),wi}if("function"==typeof rt&&(rt=rt(r)),Array.isArray(rt))rt.forEach(function(wi){var Mr;"object"==typeof wi?wi.options?(qn.push(Mr={label:wi.label,group:!0,itemParams:wi.itemParams,elementAttributes:wi.elementAttributes,element:!1}),wi.options.forEach(function(Hm){Cf(Hm)})):Cf(wi):(Kt.indexOf((Mr={label:wi,value:wi,element:!1}).value)>-1&&Yi(Mr),Ti.push(Mr),qn.push(Mr))});else for(var to in rt){var Ml={label:rt[to],value:to,element:!1};Kt.indexOf(Ml.value)>-1&&Yi(Ml),Ti.push(Ml),qn.push(Ml)}a.sortValuesList&&(Ti.sort((wi,Mr)=>wi.label<Mr.label?-1:wi.label>Mr.label?1:0),qn.sort((wi,Mr)=>wi.label<Mr.label?-1:wi.label>Mr.label?1:0),"asc"!==a.sortValuesList&&(Ti.reverse(),qn.reverse())),P=Ti,ne=qn,function(){for(;M.firstChild;)M.removeChild(M.firstChild);ne.forEach(function(rt){var Kt=rt.element;if(!Kt){if(Kt=document.createElement("div"),rt.label=a.listItemFormatter?a.listItemFormatter(rt.value,rt.label,r,Kt,rt.itemParams):rt.label,rt.group?(Kt.classList.add("tabulator-edit-select-list-group"),Kt.tabIndex=0,Kt.innerHTML=""===rt.label?"&nbsp;":rt.label):(Kt.classList.add("tabulator-edit-select-list-item"),Kt.tabIndex=0,Kt.innerHTML=""===rt.label?"&nbsp;":rt.label,Kt.addEventListener("click",function(){Te=!0,setTimeout(()=>{Te=!1},10),O?(Nn(rt),C.focus()):Co(rt)}),K.indexOf(rt)>-1&&Kt.classList.add("active")),rt.elementAttributes&&"object"==typeof rt.elementAttributes)for(let Ti in rt.elementAttributes)"+"==Ti.charAt(0)?(Ti=Ti.slice(1),Kt.setAttribute(Ti,C.getAttribute(Ti)+rt.elementAttributes["+"+Ti])):Kt.setAttribute(Ti,rt.elementAttributes[Ti]);Kt.addEventListener("mousedown",function(){ve=!1,setTimeout(function(){ve=!0},10)}),rt.element=Kt}M.appendChild(Kt)})}()}(!0===a.values?fn():"string"==typeof a.values?fn(a.values):a.values||[],v);var rt=rr.elOffset(d);M.style.minWidth=d.offsetWidth+"px",M.style.top=rt.top+d.offsetHeight+"px",M.style.left=rt.left+"px",M.addEventListener("mousedown",function(Kt){ve=!1,setTimeout(function(){ve=!0},10)}),document.body.appendChild(M)}}()}),(M=document.createElement("div")).classList.add("tabulator-edit-select-list"),t(function(){C.style.height="100%",C.focus({preventScroll:!0})}),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",bt)},10),C},autocomplete:function(r,t,e,n,a){var c=this,d=r.getElement(),p=r.getValue(),f=a.verticalNavigation||"editor",v=void 0!==p||null===p?p:void 0!==a.defaultValue?a.defaultValue:"",C=document.createElement("input"),M=document.createElement("div"),O=[],P=!1,W=!0,ne=!1;if(C.setAttribute("type","search"),C.style.padding="4px",C.style.width="100%",C.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let zt in a.elementAttributes)"+"==zt.charAt(0)?(zt=zt.slice(1),C.setAttribute(zt,C.getAttribute(zt)+a.elementAttributes["+"+zt])):C.setAttribute(zt,a.elementAttributes[zt]);function K(){!0===a.values?ne=ve():"string"==typeof a.values&&(ne=ve(a.values))}function ve(zt){var Ft,Sn={},bt=c.table.getData();return(Ft=zt?c.table.columnManager.getColumnByField(zt):r.getColumn()._getSelf())?(bt.forEach(function(Ut){var pn=Ft.getFieldValue(Ut);null!=pn&&""!==pn&&(Sn[pn]=!0)}),Sn=a.sortValuesList?"asc"==a.sortValuesList?Object.keys(Sn).sort():Object.keys(Sn).sort().reverse():Object.keys(Sn)):console.warn("unable to find matching column to create autocomplete lookup list:",zt),Sn}function Te(zt,Sn){var Ft,Ut,bt=[];Ft=ne||a.values||[],a.searchFunc?(bt=a.searchFunc(zt,Ft))instanceof Promise?(qe(void 0!==a.searchingPlaceholder?a.searchingPlaceholder:"Searching..."),bt.then(pn=>{Un(pt(pn),Sn)}).catch(pn=>{console.err("error in autocomplete search promise:",pn)})):Un(pt(bt),Sn):(Ut=pt(Ft),""===zt?a.showListOnEmpty&&(bt=Ut):Ut.forEach(function(pn){(null!==pn.value||void 0!==pn.value)&&(String(pn.value).toLowerCase().indexOf(String(zt).toLowerCase())>-1||String(pn.title).toLowerCase().indexOf(String(zt).toLowerCase())>-1)&&bt.push(pn)}),Un(bt,Sn))}function qe(zt){var Sn=document.createElement("div");fn(),!1!==zt&&(Sn.classList.add("tabulator-edit-select-list-notice"),Sn.tabIndex=0,zt instanceof Node?Sn.appendChild(zt):Sn.innerHTML=zt,M.appendChild(Sn))}function pt(zt){var Sn=[];if(Array.isArray(zt))zt.forEach(function(Ut){var pn={};"object"==typeof Ut?(pn.title=a.listItemFormatter?a.listItemFormatter(Ut.value,Ut.label):Ut.label,pn.value=Ut.value):(pn.title=a.listItemFormatter?a.listItemFormatter(Ut,Ut):Ut,pn.value=Ut),Sn.push(pn)});else for(var bt in zt){var Ft={title:a.listItemFormatter?a.listItemFormatter(bt,zt[bt]):zt[bt],value:bt};Sn.push(Ft)}return Sn}function fn(){for(;M.firstChild;)M.removeChild(M.firstChild)}function Un(zt,Sn){zt.length?function(zt,Sn){var bt=!1;fn(),(O=zt).forEach(function(Ft){var Ut=Ft.element;Ut||((Ut=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),Ut.tabIndex=0,Ut.innerHTML=Ft.title,Ut.addEventListener("click",function(pn){Ai(Ft),Li()}),Ut.addEventListener("mousedown",function(pn){W=!1,setTimeout(function(){W=!0},10)}),Ft.element=Ut,Sn&&Ft.value==p&&(C.value=Ft.title,Ft.element.classList.add("active"),bt=!0),Ft===P&&(Ft.element.classList.add("active"),bt=!0)),M.appendChild(Ut)}),bt||Ai(!1)}(zt,Sn):a.emptyPlaceholder&&qe(a.emptyPlaceholder)}function Li(){Nn(),P?p!==P.value?(p=P.value,C.value=P.title,e(P.value)):n():a.freetext||a.allowEmpty&&""===C.value?(p=C.value,e(C.value)):n()}function Ai(zt,Sn){P&&P.element&&P.element.classList.remove("active"),P=zt,zt&&zt.element&&zt.element.classList.add("active"),zt&&zt.element&&zt.element.scrollIntoView&&zt.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}function Nn(){M.parentNode&&M.parentNode.removeChild(M),c.table.rowManager.element.removeEventListener("scroll",Co)}function Co(){Nn(),n()}return M.classList.add("tabulator-edit-select-list"),M.addEventListener("mousedown",function(zt){W=!1,setTimeout(function(){W=!0},10)}),C.addEventListener("keydown",function(zt){var Sn;switch(zt.keyCode){case 38:Sn=O.indexOf(P),("editor"==f||"hybrid"==f&&Sn)&&(zt.stopImmediatePropagation(),zt.stopPropagation(),zt.preventDefault(),Ai(Sn>0&&O[Sn-1]));break;case 40:Sn=O.indexOf(P),("editor"==f||"hybrid"==f&&Sn<O.length-1)&&(zt.stopImmediatePropagation(),zt.stopPropagation(),zt.preventDefault(),Sn<O.length-1&&Ai(-1==Sn?O[0]:O[Sn+1]));break;case 37:case 39:zt.stopImmediatePropagation(),zt.stopPropagation();break;case 13:Li();break;case 27:Co();break;case 36:case 35:zt.stopImmediatePropagation()}}),C.addEventListener("keyup",function(zt){switch(zt.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:Te(C.value)}}),C.addEventListener("search",function(zt){Te(C.value)}),C.addEventListener("blur",function(zt){W&&Li()}),C.addEventListener("focus",function(zt){var Sn=v;K(),function(){if(!M.parentNode){for(;M.firstChild;)M.removeChild(M.firstChild);var zt=rr.elOffset(d);M.style.minWidth=d.offsetWidth+"px",M.style.top=zt.top+d.offsetHeight+"px",M.style.left=zt.left+"px",document.body.appendChild(M)}}(),C.value=Sn,Te(Sn,!0)}),t(function(){C.style.height="100%",C.focus({preventScroll:!0})}),a.mask&&lb(C,a),setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",Co)},10),K(),C.value=v,Te(v,!0),C},star:function(r,t,e,n,a){var c=this,d=r.getElement(),p=r.getValue(),f=d.getElementsByTagName("svg").length||5,v=d.getElementsByTagName("svg")[0]?d.getElementsByTagName("svg")[0].getAttribute("width"):14,C=[],M=document.createElement("div"),O=document.createElementNS("http://www.w3.org/2000/svg","svg");function P(ve){C.forEach(function(Te,qe){qe<ve?("ie"==c.table.browser?Te.setAttribute("class","tabulator-star-active"):Te.classList.replace("tabulator-star-inactive","tabulator-star-active"),Te.innerHTML='<polygon fill="#488CE9" stroke="#014AAE" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>'):("ie"==c.table.browser?Te.setAttribute("class","tabulator-star-inactive"):Te.classList.replace("tabulator-star-active","tabulator-star-inactive"),Te.innerHTML='<polygon fill="#010155" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>')})}function W(ve){var Te=document.createElement("span"),qe=O.cloneNode(!0);C.push(qe),Te.addEventListener("mouseenter",function(pt){pt.stopPropagation(),pt.stopImmediatePropagation(),P(ve)}),Te.addEventListener("mousemove",function(pt){pt.stopPropagation(),pt.stopImmediatePropagation()}),Te.addEventListener("click",function(pt){pt.stopPropagation(),pt.stopImmediatePropagation(),e(ve),d.blur()}),Te.appendChild(qe),M.appendChild(Te)}function ne(ve){p=ve,P(ve)}if(d.style.whiteSpace="nowrap",d.style.overflow="hidden",d.style.textOverflow="ellipsis",M.style.verticalAlign="middle",M.style.display="inline-block",M.style.padding="4px",O.setAttribute("width",v),O.setAttribute("height",v),O.setAttribute("viewBox","0 0 512 512"),O.setAttribute("xml:space","preserve"),O.style.padding="0 1px",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let ve in a.elementAttributes)"+"==ve.charAt(0)?(ve=ve.slice(1),M.setAttribute(ve,M.getAttribute(ve)+a.elementAttributes["+"+ve])):M.setAttribute(ve,a.elementAttributes[ve]);for(var K=1;K<=f;K++)W(K);return P(p=Math.min(parseInt(p),f)),M.addEventListener("mousemove",function(ve){P(0)}),M.addEventListener("click",function(ve){e(0)}),d.addEventListener("blur",function(ve){n()}),d.addEventListener("keydown",function(ve){switch(ve.keyCode){case 39:ne(p+1);break;case 37:ne(p-1);break;case 13:e(p);break;case 27:n()}}),M},progress:function(r,t,e,n,a){var ne,K,O,P,c=r.getElement(),d=void 0===a.max?(null==(ne=c.getElementsByTagName("div")[0])?void 0:ne.getAttribute("max"))||100:a.max,p=void 0===a.min?(null==(K=c.getElementsByTagName("div")[0])?void 0:K.getAttribute("min"))||0:a.min,f=(d-p)/100,v=r.getValue()||0,C=document.createElement("div"),M=document.createElement("div");function W(){var ve=window.getComputedStyle(c,null),Te=f*Math.round(M.offsetWidth/((c.clientWidth-parseInt(ve.getPropertyValue("padding-left"))-parseInt(ve.getPropertyValue("padding-right")))/100))+p;e(Te),c.setAttribute("aria-valuenow",Te),c.setAttribute("aria-label",v)}if(C.style.position="absolute",C.style.right="0",C.style.top="0",C.style.bottom="0",C.style.width="5px",C.classList.add("tabulator-progress-handle"),M.style.display="inline-block",M.style.position="relative",M.style.height="100%",M.style.backgroundColor="#488CE9",M.style.maxWidth="100%",M.style.minWidth="0%",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let ve in a.elementAttributes)"+"==ve.charAt(0)?(ve=ve.slice(1),M.setAttribute(ve,M.getAttribute(ve)+a.elementAttributes["+"+ve])):M.setAttribute(ve,a.elementAttributes[ve]);return c.style.padding="4px 4px",v=Math.min(parseFloat(v),d),v=Math.max(parseFloat(v),p),v=Math.round((v-p)/f),M.style.width=v+"%",c.setAttribute("aria-valuemin",p),c.setAttribute("aria-valuemax",d),M.appendChild(C),C.addEventListener("mousedown",function(ve){O=ve.screenX,P=M.offsetWidth}),C.addEventListener("mouseover",function(){C.style.cursor="ew-resize"}),c.addEventListener("mousemove",function(ve){O&&(M.style.width=P+ve.screenX-O+"px")}),c.addEventListener("mouseup",function(ve){O&&(ve.stopPropagation(),ve.stopImmediatePropagation(),O=!1,P=!1,W())}),c.addEventListener("keydown",function(ve){switch(ve.keyCode){case 39:ve.preventDefault(),M.style.width=M.clientWidth+c.clientWidth/100+"px";break;case 37:ve.preventDefault(),M.style.width=M.clientWidth-c.clientWidth/100+"px";break;case 9:case 13:W();break;case 27:n()}}),c.addEventListener("blur",function(){n()}),M},tickCross:function(r,t,e,n,a){var c=r.getValue(),d=document.createElement("input"),p=a.tristate,f=void 0===a.indeterminateValue?null:a.indeterminateValue,v=!1;if(d.setAttribute("type","checkbox"),d.style.marginTop="5px",d.style.boxSizing="border-box",a.elementAttributes&&"object"==typeof a.elementAttributes)for(let M in a.elementAttributes)"+"==M.charAt(0)?(M=M.slice(1),d.setAttribute(M,d.getAttribute(M)+a.elementAttributes["+"+M])):d.setAttribute(M,a.elementAttributes[M]);function C(M){return p?M?v?f:d.checked:d.checked&&!v?(d.checked=!1,d.indeterminate=!0,v=!0,f):(v=!1,d.checked):d.checked}return d.value=c,p&&(void 0===c||c===f||""===c)&&(v=!0,d.indeterminate=!0),"firefox"!=this.table.browser&&t(function(){d.focus({preventScroll:!0})}),d.checked=!0===c||"true"===c||"True"===c||1===c,t(function(){d.focus()}),d.addEventListener("change",function(M){e(C())}),d.addEventListener("blur",function(M){e(C(!0))}),d.addEventListener("keydown",function(M){13==M.keyCode&&e(C()),27==M.keyCode&&n()}),d}};let O7=(()=>{class r extends si{constructor(e){super(e),this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1,this.editedCells=[],this.editors=r.editors,this.registerColumnOption("editable"),this.registerColumnOption("editor"),this.registerColumnOption("editorParams"),this.registerColumnOption("cellEditing"),this.registerColumnOption("cellEdited"),this.registerColumnOption("cellEditCancelled"),this.registerTableFunction("getEditedCells",this.getEditedCells.bind(this)),this.registerTableFunction("clearCellEdited",this.clearCellEdited.bind(this)),this.registerTableFunction("navigatePrev",this.navigatePrev.bind(this)),this.registerTableFunction("navigateNext",this.navigateNext.bind(this)),this.registerTableFunction("navigateLeft",this.navigateLeft.bind(this)),this.registerTableFunction("navigateRight",this.navigateRight.bind(this)),this.registerTableFunction("navigateUp",this.navigateUp.bind(this)),this.registerTableFunction("navigateDown",this.navigateDown.bind(this)),this.registerComponentFunction("cell","isEdited",this.cellisEdited.bind(this)),this.registerComponentFunction("cell","clearEdited",this.clearEdited.bind(this)),this.registerComponentFunction("cell","edit",this.editCell.bind(this)),this.registerComponentFunction("cell","cancelEdit",this.cellCancelEdit.bind(this)),this.registerComponentFunction("cell","navigatePrev",this.navigatePrev.bind(this)),this.registerComponentFunction("cell","navigateNext",this.navigateNext.bind(this)),this.registerComponentFunction("cell","navigateLeft",this.navigateLeft.bind(this)),this.registerComponentFunction("cell","navigateRight",this.navigateRight.bind(this)),this.registerComponentFunction("cell","navigateUp",this.navigateUp.bind(this)),this.registerComponentFunction("cell","navigateDown",this.navigateDown.bind(this))}initialize(){this.subscribe("cell-init",this.bindEditor.bind(this)),this.subscribe("cell-delete",this.clearEdited.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this)),this.subscribe("column-delete",this.columnDeleteCheck.bind(this)),this.subscribe("row-deleting",this.rowDeleteCheck.bind(this)),this.subscribe("data-refeshing",this.cancelEdit.bind(this)),this.subscribe("keybinding-nav-prev",this.navigatePrev.bind(this)),this.subscribe("keybinding-nav-next",this.keybindingNavigateNext.bind(this)),this.subscribe("keybinding-nav-left",this.navigateLeft.bind(this)),this.subscribe("keybinding-nav-right",this.navigateRight.bind(this)),this.subscribe("keybinding-nav-up",this.navigateUp.bind(this)),this.subscribe("keybinding-nav-down",this.navigateDown.bind(this))}keybindingNavigateNext(e){var n=this.currentCell,a=this.options("tabEndNewRow");n&&(this.navigateNext(e)||a&&(n.getElement().firstChild.blur(),(a=this.table.addRow(!0===a?{}:"function"==typeof a?a(n.row.getComponent()):Object.assign({},a))).then(()=>{setTimeout(()=>{nav.next()})})))}cellisEdited(e){return!!e.modules.edit&&e.modules.edit.edited}cellCancelEdit(e){e===this.currentCell?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}clearCellEdited(e){e||(e=this.modules.edit.getEditedCells()),Array.isArray(e)||(e=[e]),e.forEach(n=>{this.modules.edit.clearEdited(n._getSelf())})}navigatePrev(e){var a,c,n=this.currentCell;if(n){if(e&&e.preventDefault(),a=this.navigateLeft())return!0;if((c=this.table.rowManager.prevDisplayRow(n.row,!0))&&(a=this.findNextEditableCell(c,c.cells.length)))return a.getComponent().edit(),!0}return!1}navigateNext(e){var a,c,n=this.currentCell;if(n){if(e&&e.preventDefault(),a=this.navigateRight())return!0;if((c=this.table.rowManager.nextDisplayRow(n.row,!0))&&(a=this.findNextEditableCell(c,-1)))return a.getComponent().edit(),!0}return!1}navigateLeft(e){var a,c,n=this.currentCell;return!(!n||(e&&e.preventDefault(),a=n.getIndex(),c=this.findPrevEditableCell(n.row,a),!c)||(c.getComponent().edit(),0))}navigateRight(e){var a,c,n=this.currentCell;return!(!n||(e&&e.preventDefault(),a=n.getIndex(),c=this.findNextEditableCell(n.row,a),!c)||(c.getComponent().edit(),0))}navigateUp(e){var a,c,n=this.currentCell;return!(!n||(e&&e.preventDefault(),a=n.getIndex(),c=this.table.rowManager.prevDisplayRow(n.row,!0),!c)||(c.cells[a].getComponent().edit(),0))}navigateDown(e){var a,c,n=this.currentCell;return!(!n||(e&&e.preventDefault(),a=n.getIndex(),c=this.table.rowManager.nextDisplayRow(n.row,!0),!c)||(c.cells[a].getComponent().edit(),0))}findNextEditableCell(e,n){var a=!1;if(n<e.cells.length-1)for(var c=n+1;c<e.cells.length;c++){let d=e.cells[c];if(d.column.modules.edit&&rr.elVisible(d.getElement())){let p=!0;if("function"==typeof d.column.modules.edit.check&&(p=d.column.modules.edit.check(d.getComponent())),p){a=d;break}}}return a}findPrevEditableCell(e,n){var a=!1;if(n>0)for(var c=n-1;c>=0;c--){let d=e.cells[c],p=!0;if(d.column.modules.edit&&rr.elVisible(d.getElement())&&("function"==typeof d.column.modules.edit.check&&(p=d.column.modules.edit.check(d.getComponent())),p)){a=d;break}}return a}initializeColumnCheck(e){void 0!==e.definition.editor&&this.initializeColumn(e)}columnDeleteCheck(e){this.currentCell&&this.currentCell.column===e&&this.cancelEdit()}rowDeleteCheck(e){this.currentCell&&this.currentCell.row===e&&this.cancelEdit()}initializeColumn(e){var n={editor:!1,blocked:!1,check:e.definition.editable,params:e.definition.editorParams||{}};switch(typeof e.definition.editor){case"string":this.editors[e.definition.editor]?n.editor=this.editors[e.definition.editor]:console.warn("Editor Error - No such editor found: ",e.definition.editor);break;case"function":n.editor=e.definition.editor;break;case"boolean":!0===e.definition.editor&&("function"!=typeof e.definition.formatter?n.editor=this.editors[e.definition.formatter]?this.editors[e.definition.formatter]:this.editors.input:console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",e.definition.formatter))}n.editor&&(e.modules.edit=n)}getCurrentCell(){return!!this.currentCell&&this.currentCell.getComponent()}clearEditor(e){var a,n=this.currentCell;if(this.invalidEdit=!1,n){for(this.currentCell=!1,a=n.getElement(),e?n.validate&&n.validate():a.classList.remove("tabulator-validation-fail"),a.classList.remove("tabulator-editing");a.firstChild;)a.removeChild(a.firstChild);n.row.getElement().classList.remove("tabulator-row-editing")}}cancelEdit(){if(this.currentCell){var e=this.currentCell,n=this.currentCell.getComponent();this.clearEditor(!0),e.setValueActual(e.getValue()),e.cellRendered(),("textarea"==e.column.definition.editor||e.column.definition.variableHeight)&&e.row.normalizeHeight(!0),e.column.definition.cellEditCancelled&&e.column.definition.cellEditCancelled.call(this.table,n),this.dispatchExternal("cellEditCancelled",n)}}bindEditor(e){if(e.column.modules.edit){var n=this,a=e.getElement(!0);a.setAttribute("tabindex",0),a.addEventListener("click",function(c){a.classList.contains("tabulator-editing")||a.focus({preventScroll:!0})}),a.addEventListener("mousedown",function(c){2===c.button?c.preventDefault():n.mouseClick=!0}),a.addEventListener("focus",function(c){n.recursionBlock||n.edit(e,c,!1)})}}focusCellNoEvent(e,n){this.recursionBlock=!0,n&&"ie"===this.table.browser||e.getElement().focus({preventScroll:!0}),this.recursionBlock=!1}editCell(e,n){this.focusCellNoEvent(e),this.edit(e,!1,n)}focusScrollAdjust(e){if("virtual"==this.table.rowManager.getRenderMode()){var n=this.table.rowManager.element.scrollTop,a=this.table.rowManager.element.clientHeight+this.table.rowManager.element.scrollTop,c=e.row.getElement();c.offsetTop<n?this.table.rowManager.element.scrollTop-=n-c.offsetTop:c.offsetTop+c.offsetHeight>a&&(this.table.rowManager.element.scrollTop+=c.offsetTop+c.offsetHeight-a);var p=this.table.rowManager.element.scrollLeft,f=this.table.rowManager.element.clientWidth+this.table.rowManager.element.scrollLeft,v=e.getElement();this.table.modExists("frozenColumns")&&(p+=parseInt(this.table.modules.frozenColumns.leftMargin),f-=parseInt(this.table.modules.frozenColumns.rightMargin)),"virtual"===this.table.options.renderHorizontal&&(p-=parseInt(this.table.columnManager.renderer.vDomPadLeft),f-=parseInt(this.table.columnManager.renderer.vDomPadLeft)),v.offsetLeft<p?this.table.rowManager.element.scrollLeft-=p-v.offsetLeft:v.offsetLeft+v.offsetWidth>f&&(this.table.rowManager.element.scrollLeft+=v.offsetLeft+v.offsetWidth-f)}}edit(e,n,a){var v,C,M,c=this,d=!0,p=function(){},f=e.getElement();if(!this.currentCell){if(e.column.modules.edit.blocked)return this.mouseClick=!1,f.blur(),!1;switch(n&&n.stopPropagation(),typeof e.column.modules.edit.check){case"function":d=e.column.modules.edit.check(e.getComponent());break;case"boolean":d=e.column.modules.edit.check}if(d||a){if(c.cancelEdit(),c.currentCell=e,this.focusScrollAdjust(e),C=e.getComponent(),this.mouseClick&&(this.mouseClick=!1,e.column.definition.cellClick&&e.column.definition.cellClick.call(this.table,n,C)),e.column.definition.cellEditing&&e.column.definition.cellEditing.call(this.table,C),this.dispatchExternal("cellEditing",C),M="function"==typeof e.column.modules.edit.params?e.column.modules.edit.params(C):e.column.modules.edit.params,!1===(v=e.column.modules.edit.editor.call(c,C,function(ve){p=ve},function(ve){if(c.currentCell===e){var Te=!0;return e.column.modules.validate&&c.table.modExists("validate")&&"manual"!=c.table.options.validationMode&&(Te=c.table.modules.validate.validate(e.column.modules.validate,e,ve)),!0===Te||"highlight"===c.table.options.validationMode?(c.clearEditor(),e.modules.edit||(e.modules.edit={}),e.modules.edit.edited=!0,-1==c.editedCells.indexOf(e)&&c.editedCells.push(e),e.setValue(ve,!0),c.table.options.dataTree&&c.table.modExists("dataTree")&&c.table.modules.dataTree.checkForRestyle(e),!0===Te||(f.classList.add("tabulator-validation-fail"),c.table.externalEvents.dispatch("validationFailed",e.getComponent(),ve,Te),!1)):(c.invalidEdit=!0,f.classList.add("tabulator-validation-fail"),c.focusCellNoEvent(e,!0),p(),c.table.externalEvents.dispatch("validationFailed",e.getComponent(),ve,Te),!1)}},function(){c.currentCell===e&&(c.cancelEdit(),c.table.options.dataTree&&c.table.modExists("dataTree")&&c.table.modules.dataTree.checkForRestyle(e))},M)))return f.blur(),!1;if(!(v instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",v),f.blur(),!1;for(f.classList.add("tabulator-editing"),e.row.getElement().classList.add("tabulator-row-editing");f.firstChild;)f.removeChild(f.firstChild);f.appendChild(v),p();for(var ne=f.children,K=0;K<ne.length;K++)ne[K].addEventListener("click",function(ve){ve.stopPropagation()});return!0}return this.mouseClick=!1,f.blur(),!1}this.invalidEdit||this.cancelEdit()}getEditedCells(){var e=[];return this.editedCells.forEach(n=>{e.push(n.getComponent())}),e}clearEdited(e){var n;e.modules.edit&&e.modules.edit.edited&&(e.modules.edit.edited=!1,e.modules.validate&&(e.modules.validate.invalid=!1)),(n=this.editedCells.indexOf(e))>-1&&this.editedCells.splice(n,1)}}return r.moduleName="edit",r.editors=x7,r})();class Rk{constructor(t,e,n,a){this.type=t,this.columns=e,this.component=n||!1,this.indent=a||0}}class mw{constructor(t,e,n,a,c){this.value=t,this.component=e||!1,this.width=n,this.height=a,this.depth=c}}let k7=(()=>{class r extends si{constructor(e){super(e),this.config={},this.cloneTableStyle=!0,this.colVisProp="",this.registerTableOption("htmlOutputConfig",!1),this.registerColumnOption("htmlOutput"),this.registerColumnOption("titleHtmlOutput")}initialize(){this.registerTableFunction("getHtml",this.getHtml.bind(this))}generateExportList(e,n,a,c){this.cloneTableStyle=n,this.config=e||{},this.colVisProp=c;var d=!1!==this.config.columnHeaders?this.headersToExportRows(this.generateColumnGroupHeaders()):[],p=this.bodyToExportRows(this.rowLookup(a));return d.concat(p)}genereateTable(e,n,a,c){var d=this.generateExportList(e,n,a,c);return this.genereateTableElement(d)}rowLookup(e){var n=[];if("function"==typeof e)e.call(this.table).forEach(a=>{(a=this.table.rowManager.findRow(a))&&n.push(a)});else switch(e){case!0:case"visible":n=this.table.rowManager.getVisibleRows(!0);break;case"all":n=this.table.rowManager.rows;break;case"selected":n=this.table.modules.selectRow.selectedRows;break;case"active":default:n=this.table.options.pagination?this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length-2):this.table.rowManager.getDisplayRows()}return Object.assign([],n)}generateColumnGroupHeaders(){var e=[];return(!1!==this.config.columnGroups?this.table.columnManager.columns:this.table.columnManager.columnsByIndex).forEach(a=>{var c=this.processColumnGroup(a);c&&e.push(c)}),e}processColumnGroup(e){var n=e.columns,a=0,d={title:e.definition["title"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))]||e.definition.title,column:e,depth:1};if(n.length){if(d.subGroups=[],d.width=0,n.forEach(p=>{var f=this.processColumnGroup(p);f&&(d.width+=f.width,d.subGroups.push(f),f.depth>a&&(a=f.depth))}),d.depth+=a,!d.width)return!1}else{if(!this.columnVisCheck(e))return!1;d.width=1}return d}columnVisCheck(e){return!1!==e.definition[this.colVisProp]&&(e.visible||!e.visible&&e.definition[this.colVisProp])}headersToExportRows(e){var n=[],a=0,c=[];function d(p,f){var v=a-f;if(void 0===n[f]&&(n[f]=[]),p.height=p.subGroups?1:v-p.depth+1,n[f].push(p),p.height>1)for(let C=1;C<p.height;C++)void 0===n[f+C]&&(n[f+C]=[]),n[f+C].push(!1);if(p.width>1)for(let C=1;C<p.width;C++)n[f].push(!1);p.subGroups&&p.subGroups.forEach(function(C){d(C,f+1)})}return e.forEach(function(p){p.depth>a&&(a=p.depth)}),e.forEach(function(p){d(p,0)}),n.forEach(p=>{var f=[];p.forEach(v=>{f.push(v?new mw(v.title,v.column.getComponent(),v.width,v.height,v.depth):null)}),c.push(new Rk("header",f))}),c}bodyToExportRows(e){var n=[],a=[];return this.table.columnManager.columnsByIndex.forEach(c=>{this.columnVisCheck(c)&&n.push(c.getComponent())}),!1!==this.config.columnCalcs&&this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&e.unshift(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&e.push(this.table.modules.columnCalcs.botRow)),(e=e.filter(c=>{switch(c.type){case"group":return!1!==this.config.rowGroups;case"calc":return!1!==this.config.columnCalcs;case"row":return!(this.table.options.dataTree&&!1===this.config.dataTree&&c.modules.dataTree.parent)}return!0})).forEach((c,d)=>{var p=c.getData(this.colVisProp),f=[],v=0;switch(c.type){case"group":v=c.level,f.push(new mw(c.key,c.getComponent(),n.length,1));break;case"calc":case"row":n.forEach(C=>{f.push(new mw(C._column.getFieldValue(p),C,1,1))}),this.table.options.dataTree&&!1!==this.config.dataTree&&(v=c.modules.dataTree.index)}a.push(new Rk(c.type,f,c.getComponent(),v))}),a}genereateTableElement(e){var n=document.createElement("table"),a=document.createElement("thead"),c=document.createElement("tbody"),d=this.lookupTableStyles(),p=this.table.options["rowFormatter"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],f={};return f.rowFormatter=null!==p?p:this.table.options.rowFormatter,this.table.options.dataTree&&!1!==this.config.dataTree&&this.table.modExists("columnCalcs")&&(f.treeElementField=this.table.modules.dataTree.elementField),f.groupHeader=this.table.options["groupHeader"+(this.colVisProp.charAt(0).toUpperCase()+this.colVisProp.slice(1))],f.groupHeader&&!Array.isArray(f.groupHeader)&&(f.groupHeader=[f.groupHeader]),n.classList.add("tabulator-print-table"),this.mapElementStyles(this.table.columnManager.getHeadersElement(),a,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.length>1e3&&console.warn("It may take a long time to render an HTML table with more than 1000 rows"),e.forEach((v,C)=>{switch(v.type){case"header":a.appendChild(this.genereateHeaderElement(v,f,d));break;case"group":c.appendChild(this.genereateGroupElement(v,f,d));break;case"calc":c.appendChild(this.genereateCalcElement(v,f,d));break;case"row":let M=this.genereateRowElement(v,f,d);this.mapElementStyles(C%2&&d.evenRow?d.evenRow:d.oddRow,M,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),c.appendChild(M)}}),a.innerHTML&&n.appendChild(a),n.appendChild(c),this.mapElementStyles(this.table.element,n,["border-top","border-left","border-right","border-bottom"]),n}lookupTableStyles(){var e={};return this.cloneTableStyle&&window.getComputedStyle&&(e.oddRow=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),e.evenRow=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),e.calcRow=this.table.element.querySelector(".tabulator-row.tabulator-calcs"),e.firstRow=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),e.firstGroup=this.table.element.getElementsByClassName("tabulator-group")[0],e.firstRow&&(e.styleCells=e.firstRow.getElementsByClassName("tabulator-cell"),e.firstCell=e.styleCells[0],e.lastCell=e.styleCells[e.styleCells.length-1])),e}genereateHeaderElement(e,n,a){var c=document.createElement("tr");return e.columns.forEach(d=>{if(d){var p=document.createElement("th"),f=d.component._column.definition.cssClass?d.component._column.definition.cssClass.split(" "):[];p.colSpan=d.width,p.rowSpan=d.height,p.innerHTML=d.value,this.cloneTableStyle&&(p.style.boxSizing="border-box"),f.forEach(function(v){p.classList.add(v)}),this.mapElementStyles(d.component.getElement(),p,["text-align","border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),this.mapElementStyles(d.component._column.contentElement,p,["padding-top","padding-left","padding-right","padding-bottom"]),d.component._column.visible?this.mapElementStyles(d.component.getElement(),p,["width"]):d.component._column.definition.width&&(p.style.width=d.component._column.definition.width+"px"),d.component._column.parent&&this.mapElementStyles(d.component._column.parent.groupElement,p,["border-top"]),c.appendChild(p)}}),c}genereateGroupElement(e,n,a){var c=document.createElement("tr"),d=document.createElement("td"),p=e.columns[0];return c.classList.add("tabulator-print-table-row"),p.value=n.groupHeader&&n.groupHeader[e.indent]?n.groupHeader[e.indent](p.value,e.component._group.getRowCount(),e.component._group.getData(),e.component):!1===n.groupHeader?p.value:e.component._group.generator(p.value,e.component._group.getRowCount(),e.component._group.getData(),e.component),d.colSpan=p.width,d.innerHTML=p.value,c.classList.add("tabulator-print-table-group"),c.classList.add("tabulator-group-level-"+e.indent),p.component.isVisible()&&c.classList.add("tabulator-group-visible"),this.mapElementStyles(a.firstGroup,c,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),this.mapElementStyles(a.firstGroup,d,["padding-top","padding-left","padding-right","padding-bottom"]),c.appendChild(d),c}genereateCalcElement(e,n,a){var c=this.genereateRowElement(e,n,a);return c.classList.add("tabulator-print-table-calcs"),this.mapElementStyles(a.calcRow,c,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),c}genereateRowElement(e,n,a){var c=document.createElement("tr");return c.classList.add("tabulator-print-table-row"),e.columns.forEach(d=>{if(d){var p=document.createElement("td"),f=d.component._column,v=d.value,C={modules:{},getValue:function(){return v},getField:function(){return f.definition.field},getElement:function(){return p},getColumn:function(){return f.getComponent()},getData:function(){return e.component.getData()},getRow:function(){return e.component},getComponent:function(){return C},column:f};if((f.definition.cssClass?f.definition.cssClass.split(" "):[]).forEach(function(O){p.classList.add(O)}),this.table.modExists("format")&&!1!==this.config.formatCells)v=this.table.modules.format.formatExportValue(C,this.colVisProp);else switch(typeof v){case"object":v=JSON.stringify(v);break;case"undefined":case"null":v="";break;default:v=v}v instanceof Node?p.appendChild(v):p.innerHTML=v,a.firstCell&&(this.mapElementStyles(a.firstCell,p,["padding-top","padding-left","padding-right","padding-bottom","border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),f.definition.align&&(p.style.textAlign=f.definition.align)),this.table.options.dataTree&&!1!==this.config.dataTree&&(n.treeElementField&&n.treeElementField==f.field||!n.treeElementField&&0==i)&&(e.component._row.modules.dataTree.controlEl&&p.insertBefore(e.component._row.modules.dataTree.controlEl.cloneNode(!0),p.firstChild),e.component._row.modules.dataTree.branchEl&&p.insertBefore(e.component._row.modules.dataTree.branchEl.cloneNode(!0),p.firstChild)),c.appendChild(p),C.modules.format&&C.modules.format.renderedCallback&&C.modules.format.renderedCallback(),n.rowFormatter&&!1!==this.config.formatCells&&n.rowFormatter(e.component)}}),c}genereateHTMLTable(e){var n=document.createElement("div");return n.appendChild(this.genereateTableElement(e)),n.innerHTML}getHtml(e,n,a,c){var d=this.generateExportList(a||this.table.options.htmlOutputConfig,n,e,c||"htmlOutput");return this.genereateHTMLTable(d)}mapElementStyles(e,n,a){if(this.cloneTableStyle&&e&&n){var c={"background-color":"backgroundColor",color:"fontColor",width:"width","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","text-align":"textAlign","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom","padding-top":"paddingTop","padding-left":"paddingLeft","padding-right":"paddingRight","padding-bottom":"paddingBottom"};if(window.getComputedStyle){var d=window.getComputedStyle(e);a.forEach(function(p){n.style[c[p]]=d.getPropertyValue(p)})}}}}return r.moduleName="export",r})();var N7={"=":function(r,t,e,n){return t==r},"<":function(r,t,e,n){return t<r},"<=":function(r,t,e,n){return t<=r},">":function(r,t,e,n){return t>r},">=":function(r,t,e,n){return t>=r},"!=":function(r,t,e,n){return t!=r},regex:function(r,t,e,n){return"string"==typeof r&&(r=new RegExp(r)),r.test(t)},like:function(r,t,e,n){return null==r?t===r:null!=t&&String(t).toLowerCase().indexOf(r.toLowerCase())>-1},keywords:function(r,t,e,n){var a=r.toLowerCase().split(void 0===n.separator?" ":n.separator),c=String(null==t?"":t).toLowerCase(),d=[];return a.forEach(p=>{c.includes(p)&&d.push(!0)}),n.matchAll?d.length===a.length:!!d.length},starts:function(r,t,e,n){return null==r?t===r:null!=t&&String(t).toLowerCase().startsWith(r.toLowerCase())},ends:function(r,t,e,n){return null==r?t===r:null!=t&&String(t).toLowerCase().endsWith(r.toLowerCase())},in:function(r,t,e,n){return Array.isArray(r)?!r.length||r.indexOf(t)>-1:(console.warn("Filter Error - filter value is not an array:",r),!1)}};let L7=(()=>{class r extends si{constructor(e){super(e),this.filterList=[],this.headerFilters={},this.headerFilterColumns=[],this.prevHeaderFilterChangeCheck="",this.prevHeaderFilterChangeCheck="{}",this.changed=!1,this.tableInitialized=!1,this.registerTableOption("filterMode","local"),this.registerTableOption("initialFilter",!1),this.registerTableOption("initialHeaderFilter",!1),this.registerTableOption("headerFilterLiveFilterDelay",300),this.registerColumnOption("headerFilter"),this.registerColumnOption("headerFilterPlaceholder"),this.registerColumnOption("headerFilterParams"),this.registerColumnOption("headerFilterEmptyCheck"),this.registerColumnOption("headerFilterFunc"),this.registerColumnOption("headerFilterFuncParams"),this.registerColumnOption("headerFilterLiveFilter"),this.registerTableFunction("searchRows",this.searchRows.bind(this)),this.registerTableFunction("searchData",this.searchData.bind(this)),this.registerTableFunction("setFilter",this.userSetFilter.bind(this)),this.registerTableFunction("refreshFilter",this.userRefreshFilter.bind(this)),this.registerTableFunction("addFilter",this.userAddFilter.bind(this)),this.registerTableFunction("getFilters",this.getFilters.bind(this)),this.registerTableFunction("setHeaderFilterFocus",this.userSetHeaderFilterFocus.bind(this)),this.registerTableFunction("getHeaderFilterValue",this.userGetHeaderFilterValue.bind(this)),this.registerTableFunction("setHeaderFilterValue",this.userSetHeaderFilterValue.bind(this)),this.registerTableFunction("getHeaderFilters",this.getHeaderFilters.bind(this)),this.registerTableFunction("removeFilter",this.userRemoveFilter.bind(this)),this.registerTableFunction("clearFilter",this.userClearFilter.bind(this)),this.registerTableFunction("clearHeaderFilter",this.userClearHeaderFilter.bind(this)),this.registerComponentFunction("column","headerFilterFocus",this.setHeaderFilterFocus.bind(this)),this.registerComponentFunction("column","reloadHeaderFilter",this.reloadHeaderFilter.bind(this)),this.registerComponentFunction("column","getHeaderFilterValue",this.getHeaderFilterValue.bind(this)),this.registerComponentFunction("column","setHeaderFilterValue",this.setHeaderFilterValue.bind(this))}initialize(){this.subscribe("column-init",this.initializeColumnHeaderFilter.bind(this)),this.subscribe("column-width-fit-before",this.hideHeaderFilterElements.bind(this)),this.subscribe("column-width-fit-after",this.showHeaderFilterElements.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),"remote"===this.table.options.filterMode&&this.subscribe("data-params",this.remoteFilterParams.bind(this)),this.registerDataHandler(this.filter.bind(this),10)}tableBuilt(){this.table.options.initialFilter&&this.setFilter(this.table.options.initialFilter),this.table.options.initialHeaderFilter&&this.table.options.initialHeaderFilter.forEach(e=>{var n=this.table.columnManager.findColumn(e.field);if(!n)return console.warn("Column Filter Error - No matching column found:",e.field),!1;this.setHeaderFilterValue(n,e.value)}),this.tableInitialized=!0}remoteFilterParams(e,n,a,c){return c.filter=this.getFilters(!0,!0),c}userSetFilter(e,n,a,c){this.setFilter(e,n,a,c),this.refreshFilter()}userRefreshFilter(){this.refreshFilter()}userAddFilter(e,n,a,c){this.addFilter(e,n,a,c),this.refreshFilter()}userSetHeaderFilterFocus(e){var n=this.table.columnManager.findColumn(e);if(!n)return console.warn("Column Filter Focus Error - No matching column found:",e),!1;this.setHeaderFilterFocus(n)}userGetHeaderFilterValue(e){var n=this.table.columnManager.findColumn(e);if(n)return this.getHeaderFilterValue(n);console.warn("Column Filter Error - No matching column found:",e)}userSetHeaderFilterValue(e,n){var a=this.table.columnManager.findColumn(e);if(!a)return console.warn("Column Filter Error - No matching column found:",e),!1;this.setHeaderFilterValue(a,n)}userRemoveFilter(e,n,a){this.removeFilter(e,n,a),this.refreshFilter()}userClearFilter(e){this.clearFilter(e),this.refreshFilter()}userClearHeaderFilter(){this.clearHeaderFilter(),this.refreshFilter()}searchRows(e,n,a){return this.search("rows",e,n,a)}searchData(e,n,a){return this.search("data",e,n,a)}initializeColumnHeaderFilter(e){var n=e.definition;n.headerFilter&&(void 0!==n.headerFilterPlaceholder&&n.field&&this.module("localize").setHeaderFilterColumnPlaceholder(n.field,n.headerFilterPlaceholder),this.initializeColumn(e))}initializeColumn(e,n){var a=this,c=e.getField();e.modules.filter={success:function(p){var M,f="input"==e.modules.filter.tagType&&"text"==e.modules.filter.attrType||"textarea"==e.modules.filter.tagType?"partial":"match",v="",C="";if(void 0===e.modules.filter.prevSuccess||e.modules.filter.prevSuccess!==p){if(e.modules.filter.prevSuccess=p,e.modules.filter.emptyFunc(p))delete a.headerFilters[c];else{switch(e.modules.filter.value=p,typeof e.definition.headerFilterFunc){case"string":r.filters[e.definition.headerFilterFunc]?(v=e.definition.headerFilterFunc,M=function(O){var P=e.definition.headerFilterFuncParams||{},W=e.getFieldValue(O);return P="function"==typeof P?P(p,W,O):P,r.filters[e.definition.headerFilterFunc](p,W,O,P)}):console.warn("Header Filter Error - Matching filter function not found: ",e.definition.headerFilterFunc);break;case"function":v=M=function(O){var P=e.definition.headerFilterFuncParams||{},W=e.getFieldValue(O);return P="function"==typeof P?P(p,W,O):P,e.definition.headerFilterFunc(p,W,O,P)}}if(!M)switch(f){case"partial":M=function(O){var P=e.getFieldValue(O);return null!=P&&String(P).toLowerCase().indexOf(String(p).toLowerCase())>-1},v="like";break;default:M=function(O){return e.getFieldValue(O)==p},v="="}a.headerFilters[c]={value:p,func:M,type:v,params:{}}}C=JSON.stringify(a.headerFilters),a.prevHeaderFilterChangeCheck!==C&&(a.prevHeaderFilterChangeCheck=C,a.trackChanges(),a.refreshFilter())}return!0},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(e)}generateHeaderFilterElement(e,n,a){var f,v,C,M,O,P,W,c=this,d=e.modules.filter.success,p=e.getField();if(e.modules.filter.headerElement&&e.modules.filter.headerElement.parentNode&&e.contentElement.removeChild(e.modules.filter.headerElement.parentNode),p){switch(e.modules.filter.emptyFunc=e.definition.headerFilterEmptyCheck||function(K){return!K&&"0"!==K&&0!==K},(f=document.createElement("div")).classList.add("tabulator-header-filter"),typeof e.definition.headerFilter){case"string":c.table.modules.edit.editors[e.definition.headerFilter]?(v=c.table.modules.edit.editors[e.definition.headerFilter],("tick"===e.definition.headerFilter||"tickCross"===e.definition.headerFilter)&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(K){return!0!==K&&!1!==K})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",e.definition.editor);break;case"function":v=e.definition.headerFilter;break;case"boolean":e.modules.edit&&e.modules.edit.editor?v=e.modules.edit.editor:e.definition.formatter&&c.table.modules.edit.editors[e.definition.formatter]?(v=c.table.modules.edit.editors[e.definition.formatter],("tick"===e.definition.formatter||"tickCross"===e.definition.formatter)&&!e.definition.headerFilterEmptyCheck&&(e.modules.filter.emptyFunc=function(K){return!0!==K&&!1!==K})):v=c.table.modules.edit.editors.input}if(v){if(M={getValue:function(){return void 0!==n?n:""},getField:function(){return e.definition.field},getElement:function(){return f},getColumn:function(){return e.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},W="function"==typeof(W=e.definition.headerFilterParams||{})?W.call(c.table):W,!(C=v.call(this.table.modules.edit,M,function(){},d,function(){},W)))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor returned a value of false");if(!(C instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+p+" column, editor should return an instance of Node, the editor returned:",C);p?c.langBind("headerFilters|columns|"+e.definition.field,function(K){C.setAttribute("placeholder",void 0!==K&&K?K:c.langText("headerFilters|default"))}):c.langBind("headerFilters|default",function(K){C.setAttribute("placeholder",K)}),C.addEventListener("click",function(K){K.stopPropagation(),C.focus()}),C.addEventListener("focus",K=>{var ve=this.table.columnManager.element.scrollLeft;ve!==this.table.rowManager.element.scrollLeft&&(this.table.rowManager.scrollHorizontal(ve),this.table.columnManager.scrollHorizontal(ve))}),O=!1,P=function(K){O&&clearTimeout(O),O=setTimeout(function(){d(C.value)},c.table.options.headerFilterLiveFilterDelay)},e.modules.filter.headerElement=C,e.modules.filter.attrType=C.hasAttribute("type")?C.getAttribute("type").toLowerCase():"",e.modules.filter.tagType=C.tagName.toLowerCase(),!1!==e.definition.headerFilterLiveFilter&&("autocomplete"===e.definition.headerFilter||"tickCross"===e.definition.headerFilter||("autocomplete"===e.definition.editor||"tickCross"===e.definition.editor)&&!0===e.definition.headerFilter||(C.addEventListener("keyup",P),C.addEventListener("search",P),"number"==e.modules.filter.attrType&&C.addEventListener("change",function(K){d(C.value)}),"text"==e.modules.filter.attrType&&"ie"!==this.table.browser&&C.setAttribute("type","search")),("input"==e.modules.filter.tagType||"select"==e.modules.filter.tagType||"textarea"==e.modules.filter.tagType)&&C.addEventListener("mousedown",function(K){K.stopPropagation()})),f.appendChild(C),e.contentElement.appendChild(f),a||c.headerFilterColumns.push(e)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",e.definition.title)}hideHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="none")})}showHeaderFilterElements(){this.headerFilterColumns.forEach(function(e){e.modules.filter&&e.modules.filter.headerElement&&(e.modules.filter.headerElement.style.display="")})}setHeaderFilterFocus(e){e.modules.filter&&e.modules.filter.headerElement?e.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",e.getField())}getHeaderFilterValue(e){if(e.modules.filter&&e.modules.filter.headerElement)return e.modules.filter.headerElement.value;console.warn("Column Filter Error - No header filter set on column:",e.getField())}setHeaderFilterValue(e,n){e&&(e.modules.filter&&e.modules.filter.headerElement?(this.generateHeaderFilterElement(e,n,!0),e.modules.filter.success(n)):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}reloadHeaderFilter(e){e&&(e.modules.filter&&e.modules.filter.headerElement?this.generateHeaderFilterElement(e,e.modules.filter.value,!0):console.warn("Column Filter Error - No header filter set on column:",e.getField()))}refreshFilter(){this.tableInitialized&&("remote"===this.table.options.filterMode?this.reloadData():this.refreshData())}trackChanges(){this.changed=!0,this.dispatch("filter-changed")}hasChanged(){var e=this.changed;return this.changed=!1,e}setFilter(e,n,a,c){this.filterList=[],Array.isArray(e)||(e=[{field:e,type:n,value:a,params:c}]),this.addFilter(e)}addFilter(e,n,a,c){Array.isArray(e)||(e=[{field:e,type:n,value:a,params:c}]),e.forEach(d=>{(d=this.findFilter(d))&&(this.filterList.push(d),this.changed=!0)})}findFilter(e){var n;if(Array.isArray(e))return this.findSubFilters(e);var a=!1;return"function"==typeof e.field?a=function(c){return e.field(c,e.type||{})}:r.filters[e.type]?a=(n=this.table.columnManager.getColumnByField(e.field))?function(c){return r.filters[e.type](e.value,n.getFieldValue(c),c,e.params||{})}:function(c){return r.filters[e.type](e.value,c[e.field],c,e.params||{})}:console.warn("Filter Error - No such filter type found, ignoring: ",e.type),e.func=a,!!e.func&&e}findSubFilters(e){var n=[];return e.forEach(a=>{(a=this.findFilter(a))&&n.push(a)}),!!n.length&&n}getFilters(e,n){var a=[];return e&&(a=this.getHeaderFilters()),n&&a.forEach(function(c){"function"==typeof c.type&&(c.type="function")}),a.concat(this.filtersToArray(this.filterList,n))}filtersToArray(e,n){var a=[];return e.forEach(c=>{var d;Array.isArray(c)?a.push(this.filtersToArray(c,n)):(d={field:c.field,type:c.type,value:c.value},n&&"function"==typeof d.type&&(d.type="function"),a.push(d))}),a}getHeaderFilters(){var e=[];for(var n in this.headerFilters)e.push({field:n,type:this.headerFilters[n].type,value:this.headerFilters[n].value});return e}removeFilter(e,n,a){Array.isArray(e)||(e=[{field:e,type:n,value:a}]),e.forEach(c=>{var d;(d=this.filterList.findIndex("object"==typeof c.field?p=>c===p:p=>c.field===p.field&&c.type===p.type&&c.value===p.value))>-1?this.filterList.splice(d,1):console.warn("Filter Error - No matching filter type found, ignoring: ",c.type)}),this.trackChanges()}clearFilter(e){this.filterList=[],e&&this.clearHeaderFilter(),this.trackChanges()}clearHeaderFilter(){this.headerFilters={},this.prevHeaderFilterChangeCheck="{}",this.headerFilterColumns.forEach(e=>{void 0!==e.modules.filter.value&&delete e.modules.filter.value,e.modules.filter.prevSuccess=void 0,this.reloadHeaderFilter(e)}),this.trackChanges()}search(e,n,a,c){var d=[],p=[];return Array.isArray(n)||(n=[{field:n,type:a,value:c}]),n.forEach(f=>{(f=this.findFilter(f))&&p.push(f)}),this.table.rowManager.rows.forEach(f=>{var v=!0;p.forEach(C=>{this.filterRecurse(C,f.getData())||(v=!1)}),v&&d.push("data"===e?f.getData("data"):f.getComponent())}),d}filter(e,n){var a=[],c=[];return this.subscribedExternal("dataFiltering")&&this.dispatchExternal("dataFiltering",this.getFilters()),"remote"!==this.table.options.filterMode&&(this.filterList.length||Object.keys(this.headerFilters).length)?e.forEach(d=>{this.filterRow(d)&&a.push(d)}):a=e.slice(0),this.subscribedExternal("dataFiltered")&&(a.forEach(d=>{c.push(d.getComponent())}),this.dispatchExternal("dataFiltered",this.getFilters(),c)),a}filterRow(e,n){var a=!0,c=e.getData();for(var d in this.filterList.forEach(p=>{this.filterRecurse(p,c)||(a=!1)}),this.headerFilters)this.headerFilters[d].func(c)||(a=!1);return a}filterRecurse(e,n){var a=!1;return Array.isArray(e)?e.forEach(c=>{this.filterRecurse(c,n)&&(a=!0)}):a=e.func(n),a}}return r.moduleName="filter",r.filters=N7,r})();var n9={plaintext:function(r,t,e){return this.emptyToSpace(this.sanitizeHTML(r.getValue()))},html:function(r,t,e){return r.getValue()},textarea:function(r,t,e){return r.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(r.getValue()))},money:function(r,t,e){var c,d,p,f,n=parseFloat(r.getValue()),a="",v=t.decimal||".",C=t.thousand||",",M=t.negativeSign||"-",O=t.symbol||"",P=!!t.symbolAfter,W=void 0!==t.precision?t.precision:2;if(isNaN(n))return this.emptyToSpace(this.sanitizeHTML(r.getValue()));for(n<0&&(n=Math.abs(n),a=M),c=!1!==W?n.toFixed(W):n,d=(c=String(c).split("."))[0],p=c.length>1?v+c[1]:"",f=/(\d+)(\d{3})/;f.test(d);)d=d.replace(f,"$1"+C+"$2");return P?a+d+p+O:a+O+d+p},link:function(r,t,e){var n=r.getValue(),a=t.urlPrefix||"",c=t.download,d=n,p=document.createElement("a");if(t.labelField&&(d=r.getData()[t.labelField]),t.label)switch(typeof t.label){case"string":d=t.label;break;case"function":d=t.label(r)}if(d){if(t.urlField&&(n=r.getData()[t.urlField]),t.url)switch(typeof t.url){case"string":n=t.url;break;case"function":n=t.url(r)}return p.setAttribute("href",a+n),t.target&&p.setAttribute("target",t.target),t.download&&(c="function"==typeof c?c(r):!0===c?"":c,p.setAttribute("download",c)),p.innerHTML=this.emptyToSpace(this.sanitizeHTML(d)),p}return"&nbsp;"},image:function(r,t,e){var n=document.createElement("img"),a=r.getValue();switch(t.urlPrefix&&(a=t.urlPrefix+r.getValue()),t.urlSuffix&&(a+=t.urlSuffix),n.setAttribute("src",a),typeof t.height){case"number":n.style.height=t.height+"px";break;case"string":n.style.height=t.height}switch(typeof t.width){case"number":n.style.width=t.width+"px";break;case"string":n.style.width=t.width}return n.addEventListener("load",function(){r.getRow().normalizeHeight()}),n},tickCross:function(r,t,e){var n=r.getValue(),a=r.getElement(),c=t.allowEmpty,p=void 0!==t.tickElement?t.tickElement:'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>',f=void 0!==t.crossElement?t.crossElement:'<svg enable-background="new 0 0 24 24" height="14" width="14"  viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>';return t.allowTruthy&&n||!0===n||"true"===n||"True"===n||1===n||"1"===n?(a.setAttribute("aria-checked",!0),p||""):!c||"null"!==n&&""!==n&&null!=n?(a.setAttribute("aria-checked",!1),f||""):(a.setAttribute("aria-checked","mixed"),"")},datetime:function(r,t,e){var n=window.DateTime||luxon.DateTime,a=t.inputFormat||"yyyy-MM-dd HH:mm:ss",c=t.outputFormat||"dd/MM/yyyy HH:mm:ss",d=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",p=r.getValue();if(void 0!==n){var f=(window.DateTime||luxon.DateTime).fromFormat(p,a);return f.isValid?(t.timezone&&(f=f.shiftTimezone(t.timezone)),f.toFormat(c)):!0===d?p:"function"==typeof d?d(p):d}console.error("Format Error - 'datetime' formatter is dependant on luxon.js")},datetimediff:function(r,t,e){var n=window.DateTime||luxon.DateTime,a=t.inputFormat||"yyyy-MM-dd HH:mm:ss",c=void 0!==t.invalidPlaceholder?t.invalidPlaceholder:"",d=void 0!==t.suffix&&t.suffix,p=void 0!==t.unit?t.unit:"days",f=void 0!==t.humanize&&t.humanize,v=void 0!==t.date?t.date:n.now(),C=r.getValue();if(void 0!==n){var M=n.fromFormat(C,a);if(!M.isValid)return!0===c?C:"function"==typeof c?c(C):c;if(!f)return parseInt(M.diff(v,p)[p])+(d?" "+d:"")}else console.error("Format Error - 'datetimediff' formatter is dependant on luxon.js")},lookup:function(r,t,e){var n=r.getValue();return void 0===t[n]?(console.warn("Missing display value for "+n),n):t[n]},star:function(r,t,e){var n=r.getValue(),a=r.getElement(),c=t&&t.stars?t.stars:5,d=document.createElement("span"),p=document.createElementNS("http://www.w3.org/2000/svg","svg");d.style.verticalAlign="middle",p.setAttribute("width","14"),p.setAttribute("height","14"),p.setAttribute("viewBox","0 0 512 512"),p.setAttribute("xml:space","preserve"),p.style.padding="0 1px",n=n&&!isNaN(n)?parseInt(n):0,n=Math.max(0,Math.min(n,c));for(var C=1;C<=c;C++){var M=p.cloneNode(!0);M.innerHTML=C<=n?'<polygon fill="#FFEA00" stroke="#C1AB60" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>':'<polygon fill="#D2D2D2" stroke="#686868" stroke-width="37.6152" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 "/>',d.appendChild(M)}return a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.textOverflow="ellipsis",a.setAttribute("aria-label",n),d},traffic:function(r,t,e){var C,n=this.sanitizeHTML(r.getValue())||0,a=document.createElement("span"),c=t&&t.max?t.max:100,d=t&&t.min?t.min:0,p=t&&void 0!==t.color?t.color:["red","orange","green"],f="#666666";if(!isNaN(n)&&void 0!==r.getValue()){switch(a.classList.add("tabulator-traffic-light"),C=parseFloat(n)<=c?parseFloat(n):c,C=parseFloat(C)>=d?parseFloat(C):d,C=Math.round((C-d)/((c-d)/100)),typeof p){case"string":f=p;break;case"function":f=p(n);break;case"object":if(Array.isArray(p)){var O=Math.floor(C/(100/p.length));O=Math.min(O,p.length-1),f=p[O=Math.max(O,0)];break}}return a.style.backgroundColor=f,a}},progress:function(r,t,e){var v,C,M,O,n=this.sanitizeHTML(r.getValue())||0,a=r.getElement(),c=t&&t.max?t.max:100,d=t&&t.min?t.min:0,p=t&&t.legendAlign?t.legendAlign:"center";switch(v=parseFloat(n)<=c?parseFloat(n):c,v=parseFloat(v)>=d?parseFloat(v):d,v=Math.round((v-d)/((c-d)/100)),typeof t.color){case"string":C=t.color;break;case"function":C=t.color(n);break;case"object":if(Array.isArray(t.color)){var P=100/t.color.length,W=Math.floor(v/P);W=Math.min(W,t.color.length-1),W=Math.max(W,0),C=t.color[W];break}default:C="#2DC214"}switch(typeof t.legend){case"string":M=t.legend;break;case"function":M=t.legend(n);break;case"boolean":M=n;break;default:M=!1}switch(typeof t.legendColor){case"string":O=t.legendColor;break;case"function":O=t.legendColor(n);break;case"object":Array.isArray(t.legendColor)&&(P=100/t.legendColor.length,W=Math.floor(v/P),W=Math.min(W,t.legendColor.length-1),W=Math.max(W,0),O=t.legendColor[W]);break;default:O="#000"}a.style.minWidth="30px",a.style.position="relative",a.setAttribute("aria-label",v);var ne=document.createElement("div");ne.style.display="inline-block",ne.style.position="absolute",ne.style.width=v+"%",ne.style.backgroundColor=C,ne.style.height="100%",ne.setAttribute("data-max",c),ne.setAttribute("data-min",d);var K=document.createElement("div");if(K.style.position="relative",K.style.width="100%",K.style.height="100%",M){var ve=document.createElement("div");ve.style.position="absolute",ve.style.top=0,ve.style.left=0,ve.style.textAlign=p,ve.style.width="100%",ve.style.color=O,ve.innerHTML=M}return e(function(){if(!(r instanceof Dk)){var Te=document.createElement("div");Te.style.position="absolute",Te.style.top="4px",Te.style.bottom="4px",Te.style.left="4px",Te.style.right="4px",a.appendChild(Te),a=Te}a.appendChild(K),K.appendChild(ne),M&&K.appendChild(ve)}),""},color:function(r,t,e){return r.getElement().style.backgroundColor=this.sanitizeHTML(r.getValue()),""},buttonTick:function(r,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#2DC214" clip-rule="evenodd" d="M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z" fill-rule="evenodd"/></svg>'},buttonCross:function(r,t,e){return'<svg enable-background="new 0 0 24 24" height="14" width="14" viewBox="0 0 24 24" xml:space="preserve" ><path fill="#CE1515" d="M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z"/></svg>'},rownum:function(r,t,e){return this.table.rowManager.activeRows.indexOf(r.getRow()._getSelf())+1},handle:function(r,t,e){return r.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(r,t,e){var n=document.createElement("div"),a=r.getRow()._row.modules.responsiveLayout;function c(d){var p=a.element;a.open=d,p&&(a.open?(n.classList.add("open"),p.style.display=""):(n.classList.remove("open"),p.style.display="none"))}return n.classList.add("tabulator-responsive-collapse-toggle"),n.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",r.getElement().classList.add("tabulator-row-handle"),n.addEventListener("click",function(d){d.stopImmediatePropagation(),c(!a.open)}),c(a.open),n},rowSelection:function(r,t,e){var n=document.createElement("input");if(n.type="checkbox",this.table.modExists("selectRow",!0))if(n.addEventListener("click",c=>{c.stopPropagation()}),"function"==typeof r.getRow){var a=r.getRow();a instanceof gw?(n.addEventListener("change",c=>{a.toggleSelect()}),n.checked=a.isSelected&&a.isSelected(),this.table.modules.selectRow.registerRowSelectCheckbox(a,n)):n=""}else n.addEventListener("change",c=>{this.table.modules.selectRow.selectedRows.length?this.table.deselectRow():this.table.selectRow(t.rowRange)}),this.table.modules.selectRow.registerHeaderSelectCheckbox(n);return n}};let i9=(()=>{class r extends si{constructor(e){super(e),this.registerColumnOption("formatter"),this.registerColumnOption("formatterParams"),this.registerColumnOption("formatterPrint"),this.registerColumnOption("formatterPrintParams"),this.registerColumnOption("formatterClipboard"),this.registerColumnOption("formatterClipboardParams"),this.registerColumnOption("formatterHtmlOutput"),this.registerColumnOption("formatterHtmlOutputParams"),this.registerColumnOption("titleFormatter"),this.registerColumnOption("titleFormatterParams")}initialize(){this.subscribe("cell-format",this.formatValue.bind(this)),this.subscribe("cell-rendered",this.cellRendered.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-format",this.formatHeader.bind(this))}initializeColumn(e){e.modules.format=this.lookupFormatter(e,""),void 0!==e.definition.formatterPrint&&(e.modules.format.print=this.lookupFormatter(e,"Print")),void 0!==e.definition.formatterClipboard&&(e.modules.format.clipboard=this.lookupFormatter(e,"Clipboard")),void 0!==e.definition.formatterHtmlOutput&&(e.modules.format.htmlOutput=this.lookupFormatter(e,"HtmlOutput"))}lookupFormatter(e,n){var a={params:e.definition["formatter"+n+"Params"]||{}},c=e.definition["formatter"+n];switch(typeof c){case"string":r.formatters[c]?a.formatter=r.formatters[c]:(console.warn("Formatter Error - No such formatter found: ",c),a.formatter=r.formatters.plaintext);break;case"function":a.formatter=c;break;default:a.formatter=r.formatters.plaintext}return a}cellRendered(e){e.modules.format&&e.modules.format.renderedCallback&&!e.modules.format.rendered&&(e.modules.format.renderedCallback(),e.modules.format.rendered=!0)}formatHeader(e,n,a){var c,d,p,f;return e.definition.titleFormatter?(c=this.getFormatter(e.definition.titleFormatter),p=v=>{e.titleFormatterRendered=v},f={getValue:function(){return n},getElement:function(){return a}},d="function"==typeof(d=e.definition.titleFormatterParams||{})?d():d,c.call(this,f,d,p)):n}formatValue(e){var n=e.getComponent(),a="function"==typeof e.column.modules.format.params?e.column.modules.format.params(n):e.column.modules.format.params;return e.column.modules.format.formatter.call(this,n,a,function(d){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=d,e.modules.format.rendered=!1})}formatExportValue(e,n){var c,a=e.column.modules.format[n];if(a){let d=function(p){e.modules.format||(e.modules.format={}),e.modules.format.renderedCallback=p,e.modules.format.rendered=!1};return c="function"==typeof a.params?a.params(component):a.params,a.formatter.call(this,e.getComponent(),c,d)}return this.formatValue(e)}sanitizeHTML(e){if(e){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,function(a){return n[a]})}return e}emptyToSpace(e){return null==e||""===e?"&nbsp;":e}getFormatter(e){switch(typeof e){case"string":r.formatters[e]?e=r.formatters[e]:(console.warn("Formatter Error - No such formatter found: ",e),e=r.formatters.plaintext);break;case"function":e=e;break;default:e=r.formatters.plaintext}return e}}return r.moduleName="format",r.formatters=n9,r})(),r9=(()=>{class r extends si{constructor(e){super(e),this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightPadding=0,this.initializationMode="left",this.active=!1,this.scrollEndTimer=!1,this.registerColumnOption("frozen")}reset(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.rightMargin=0,this.active=!1,this.table.columnManager.headersElement.style.marginLeft=0,this.table.columnManager.element.style.paddingRight=0}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-width",this.layout.bind(this)),this.subscribe("row-layout-before",this.layoutRow.bind(this)),this.subscribe("table-layout",this.layout.bind(this)),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this)),this.subscribe("columns-loading",this.reset.bind(this)),this.subscribe("table-redraw",this.layout.bind(this))}layoutCell(e){this.layoutElement(e.element,e.column)}initializeColumn(e){var n={margin:0,edge:!1};e.isGroup||(this.frozenCheck(e)?(n.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(e):this.rightColumns.unshift(e),this.active=!0,e.modules.frozen=n):this.initializationMode="right")}frozenCheck(e){return e.parent.isGroup&&e.definition.frozen&&console.warn("Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups"),e.parent.isGroup?this.frozenCheck(e.parent):e.definition.frozen}scrollHorizontal(){var e;this.active&&(clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(()=>{this.layout()},100),e=this.table.rowManager.getVisibleRows(),this.calcMargins(),this.layoutColumnPosition(),this.layoutCalcRows(),e.forEach(n=>{"row"===n.type&&this.layoutRow(n)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}calcMargins(){this.leftMargin=this._calcSpace(this.leftColumns,this.leftColumns.length)+"px",this.table.columnManager.headersElement.style.marginLeft=this.leftMargin,this.rightMargin=this._calcSpace(this.rightColumns,this.rightColumns.length)+"px",this.table.columnManager.element.style.paddingRight=this.rightMargin,this.rightPadding=this.table.rowManager.element.clientWidth+this.table.columnManager.scrollLeft}layoutCalcRows(){this.table.modExists("columnCalcs")&&(this.table.modules.columnCalcs.topInitialized&&this.table.modules.columnCalcs.topRow&&this.layoutRow(this.table.modules.columnCalcs.topRow),this.table.modules.columnCalcs.botInitialized&&this.table.modules.columnCalcs.botRow&&this.layoutRow(this.table.modules.columnCalcs.botRow),this.table.modExists("groupRows")&&this.layoutGroupCalcs(this.table.modules.groupRows.getGroups()))}layoutGroupCalcs(e){e.forEach(n=>{n.calcs.top&&this.layoutRow(n.calcs.top),n.calcs.bottom&&this.layoutRow(n.calcs.bottom),n.groupList&&n.groupList.length&&this.layoutGroupCalcs(n.groupList&&n.groupList)})}layoutColumnPosition(e){var n=[];this.leftColumns.forEach((a,c)=>{if(a.modules.frozen.margin=this._calcSpace(this.leftColumns,c)+this.table.columnManager.scrollLeft+"px",a.modules.frozen.edge=c==this.leftColumns.length-1,a.parent.isGroup){var d=this.getColGroupParentElement(a);n.includes(d)||(this.layoutElement(d,a),n.push(d)),a.modules.frozen.edge&&d.classList.add("tabulator-frozen-"+a.modules.frozen.position)}else this.layoutElement(a.getElement(),a);e&&a.cells.forEach(p=>{this.layoutElement(p.getElement(!0),a)})}),this.rightColumns.forEach((a,c)=>{a.modules.frozen.margin=this.rightPadding-this._calcSpace(this.rightColumns,c+1)+"px",a.modules.frozen.edge=c==this.rightColumns.length-1,this.layoutElement(a.parent.isGroup?this.getColGroupParentElement(a):a.getElement(),a),e&&a.cells.forEach(d=>{this.layoutElement(d.getElement(!0),a)})})}getColGroupParentElement(e){return e.parent.isGroup?this.getColGroupParentElement(e.parent):e.getElement()}layout(){this.active&&(this.calcMargins(),this.table.rowManager.getDisplayRows().forEach(e=>{"row"===e.type&&this.layoutRow(e)}),this.layoutCalcRows(),this.layoutColumnPosition(!0),this.table.rowManager.tableElement.style.marginRight=this.rightMargin)}layoutRow(e){e.getElement().style.paddingLeft=this.leftMargin,this.leftColumns.forEach(a=>{var c=e.getCell(a);c&&this.layoutElement(c.getElement(!0),a)}),this.rightColumns.forEach(a=>{var c=e.getCell(a);c&&this.layoutElement(c.getElement(!0),a)})}layoutElement(e,n){n.modules.frozen&&(e.style.position="absolute",e.style.left=n.modules.frozen.margin,e.classList.add("tabulator-frozen"),n.modules.frozen.edge&&e.classList.add("tabulator-frozen-"+n.modules.frozen.position))}_calcSpace(e,n){var a=0;for(let c=0;c<n;c++)e[c].visible&&(a+=e[c].getWidth());return a}}return r.moduleName="frozenColumns",r})(),o9=(()=>{class r extends si{constructor(e){super(e),this.topElement=document.createElement("div"),this.rows=[],this.registerComponentFunction("row","freeze",this.freezeRow.bind(this)),this.registerComponentFunction("row","unfreeze",this.unfreezeRow.bind(this)),this.registerComponentFunction("row","isFrozen",this.isRowFrozen.bind(this))}initialize(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.subscribe("row-deleting",this.detachRow.bind(this)),this.registerDisplayHandler(this.getRows.bind(this),10)}isRowFrozen(e){return this.rows.indexOf(e)>-1}isFrozen(){return!!this.rows.length}getRows(e){var n=e.slice(0);return this.rows.forEach(function(a){var c=n.indexOf(a);c>-1&&n.splice(c,1)}),n}freezeRow(e){e.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(e.modules.frozen=!0,this.topElement.appendChild(e.getElement()),e.initialize(),e.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(e),this.refreshData(!1,"display"),this.styleRows())}unfreezeRow(e){this.rows.indexOf(e),e.modules.frozen?(e.modules.frozen=!1,this.detachRow(e),this.table.rowManager.adjustTableSize(),this.refreshData(!1,"display"),this.rows.length&&this.styleRows()):console.warn("Freeze Error - Row is already unfrozen")}detachRow(e){var n=this.rows.indexOf(e);if(n>-1){var a=e.getElement();a.parentNode&&a.parentNode.removeChild(a),this.rows.splice(n,1)}}styleRows(e){this.rows.forEach((n,a)=>{this.table.rowManager.styleRow(n,a)})}}return r.moduleName="frozenRows",r})();class s9{constructor(t){return this._group=t,this.type="GroupComponent",new Proxy(this,{get:function(e,n,a){return void 0!==e[n]?e[n]:e._group.table.componentFunctionBinder.handle("row",e._group,n)}})}getKey(){return this._group.key}getField(){return this._group.field}getElement(){return this._group.element}getRows(){return this._group.getRows(!0)}getSubGroups(){return this._group.getSubGroups(!0)}getParentGroup(){return!!this._group.parent&&this._group.parent.getComponent()}isVisible(){return this._group.visible}show(){this._group.show()}hide(){this._group.hide()}toggle(){this._group.toggleVisibility()}_getSelf(){return this._group}getTable(){return this._group.groupManager.table}}class Kp{constructor(t,e,n,a,c,d,p){this.groupManager=t,this.parent=e,this.key=a,this.level=n,this.field=c,this.hasSubGroups=n<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=p,this.rows=[],this.groups=[],this.groupList=[],this.generator=d,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.arrowElement=!1,this.visible=p?p.visible:void 0!==t.startOpen[n]?t.startOpen[n]:t.startOpen[0],this.component=null,this.createElements(),this.addBindings(),this.createValueGroups()}wipe(){this.groupList.length?this.groupList.forEach(function(t){t.wipe()}):(this.element=!1,this.arrowElement=!1,this.elementContents=!1)}createElements(){var t=document.createElement("div");t.classList.add("tabulator-arrow"),this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-group-toggle"),this.arrowElement.appendChild(t),!1!==this.groupManager.table.options.movableRows&&this.groupManager.table.modExists("moveRow")&&this.groupManager.table.modules.moveRow.initializeGroupHeader(this)}createValueGroups(){var t=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[t]&&this.groupManager.allowedValues[t].forEach(e=>{this._createGroup(e,t)})}addBindings(){var t,e,n;(this.groupManager.table.options.groupContextMenu||this.groupManager.table.options.groupClickMenu)&&this.groupManager.table.modExists("menu")&&this.groupManager.table.modules.menu.initializeGroup.call(this.groupManager.table.modules.menu,this),this.groupManager.table.options.groupTap&&(n=!1,this.element.addEventListener("touchstart",c=>{n=!0},{passive:!0}),this.element.addEventListener("touchend",c=>{n&&this.groupManager.table.options.groupTap(c,this.getComponent()),n=!1})),this.groupManager.table.options.groupDblTap&&(t=null,this.element.addEventListener("touchend",c=>{t?(clearTimeout(t),t=null,this.groupManager.table.options.groupDblTap(c,this.getComponent())):t=setTimeout(()=>{clearTimeout(t),t=null},300)})),this.groupManager.table.options.groupTapHold&&(e=null,this.element.addEventListener("touchstart",c=>{clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),e=null,n=!1,this.groupManager.table.options.groupTapHold(c,this.getComponent())},1e3)},{passive:!0}),this.element.addEventListener("touchend",c=>{clearTimeout(e),e=null})),this.groupManager.table.options.groupToggleElement&&("arrow"==this.groupManager.table.options.groupToggleElement?this.arrowElement:this.element).addEventListener("click",c=>{c.stopPropagation(),c.stopImmediatePropagation(),this.toggleVisibility()})}_createGroup(t,e){var n=e+"_"+t,a=new Kp(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[n]);this.groups[n]=a,this.groupList.push(a)}_addRowToGroup(t){var e=this.level+1;if(this.hasSubGroups){var n=this.groupManager.groupIDLookups[e].func(t.getData()),a=e+"_"+n;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[a]&&this.groups[a].addRow(t):(this.groups[a]||this._createGroup(n,e),this.groups[a].addRow(t))}}_addRow(t){this.rows.push(t),t.modules.group=this}insertRow(t,e,n){var a=this.conformRowData({});t.updateData(a);var c=this.rows.indexOf(e);c>-1?this.rows.splice(n?c+1:c,0,t):n?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this),this.groupManager.updateGroupRows(!0)}scrollHeader(t){this.arrowElement.style.marginLeft=t,this.groupList.forEach(function(e){e.scrollHeader(t)})}getRowIndex(t){}conformRowData(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t}removeRow(t){var e=this.rows.indexOf(t),n=t.getElement();e>-1&&this.rows.splice(e,1),this.groupManager.table.options.groupValues||this.rows.length?(n.parentNode&&n.parentNode.removeChild(n),this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))}removeGroup(t){var n,e=t.level+"_"+t.key;this.groups[e]&&(delete this.groups[e],(n=this.groupList.indexOf(t))>-1&&this.groupList.splice(n,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))}getHeadersAndRows(t){var e=[];return e.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(n){e=e.concat(n.getHeadersAndRows(t))}):(!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!t&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&(this.calcs.top.detachElement(),this.calcs.top.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top))),!t&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&(this.calcs.bottom.detachElement(),this.calcs.bottom.deleteCells()),this.groupManager.table.options.groupClosedShowCalcs&&(this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom)))),e}getData(t,e){var n=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(a=>{n.push(a.getData(e||"data"))}),n}getRowCount(){var t=0;return this.groupList.length?this.groupList.forEach(e=>{t+=e.getRowCount()}):t=this.rows.length,t}toggleVisibility(){this.visible?this.hide():this.show()}hide(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(t=>{t.getHeadersAndRows().forEach(n=>{n.detachElement()})}):this.rows.forEach(t=>{var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!1)}show(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var t=this.getElement();this.groupList.length?this.groupList.forEach(e=>{e.getHeadersAndRows().forEach(a=>{var c=a.getElement();t.parentNode.insertBefore(c,t.nextSibling),a.initialize(),t=c})}):this.rows.forEach(e=>{var n=e.getElement();t.parentNode.insertBefore(n,t.nextSibling),e.initialize(),t=n}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.externalEvents.dispatch("groupVisibilityChanged",this.getComponent(),!0)}_visSet(){var t=[];"function"==typeof this.visible&&(this.rows.forEach(function(e){t.push(e.getData())}),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))}getRowGroup(t){var e=!1;return this.groupList.length?this.groupList.forEach(function(n){var a=n.getRowGroup(t);a&&(e=a)}):this.rows.find(function(n){return n===t})&&(e=this),e}getSubGroups(t){var e=[];return this.groupList.forEach(function(n){e.push(t?n.getComponent():n)}),e}getRows(t){var e=[];return this.rows.forEach(function(n){e.push(t?n.getComponent():n)}),e}generateGroupHeaderContents(){var t=[];for(this.rows.forEach(function(e){t.push(e.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)}getPath(t=[]){return t.unshift(this.key),this.parent&&this.parent.getPath(t),t}getElement(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element}detachElement(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}normalizeHeight(){this.setHeight(this.element.clientHeight)}initialize(t){(!this.initialized||t)&&(this.normalizeHeight(),this.initialized=!0)}reinitialize(){this.initialized=!1,this.height=0,rr.elVisible(this.element)&&this.initialize(!0)}setHeight(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)}getHeight(){return this.outerHeight}getGroup(){return this}reinitializeHeight(){}calcHeight(){}setCellHeight(){}clearCellHeight(){}deinitializeHeight(){}getComponent(){return this.component||(this.component=new s9(this)),this.component}}let a9=(()=>{class r extends si{constructor(e){super(e),this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0,this.displayHandler=this.getRows.bind(this),this.registerTableOption("groupBy",!1),this.registerTableOption("groupStartOpen",!0),this.registerTableOption("groupValues",!1),this.registerTableOption("groupUpdateOnCellEdit",!1),this.registerTableOption("groupHeader",!1),this.registerTableOption("groupHeaderPrint",null),this.registerTableOption("groupHeaderClipboard",null),this.registerTableOption("groupHeaderHtmlOutput",null),this.registerTableOption("groupHeaderDownload",null),this.registerTableOption("groupToggleElement","arrow"),this.registerTableOption("groupClosedShowCalcs",!1),this.registerTableFunction("setGroupBy",this.setGroupBy.bind(this)),this.registerTableFunction("setGroupValues",this.setGroupValues.bind(this)),this.registerTableFunction("setGroupStartOpen",this.setGroupStartOpen.bind(this)),this.registerTableFunction("setGroupHeader",this.setGroupHeader.bind(this)),this.registerTableFunction("getGroups",this.userGetGroups.bind(this)),this.registerTableFunction("getGroupedData",this.userGetGroupedData.bind(this)),this.registerComponentFunction("row","getGroup",this.rowGetGroup.bind(this))}initialize(){this.table.options.groupBy&&(this.configureGroupSetup(),this.table.options.groupUpdateOnCellEdit&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("row-data-changed",this.reassignRowToGroup.bind(this),0)),this.subscribe("row-deleting",this.rowDeleting.bind(this)),this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("scroll-horizontal",this.scrollHeaders.bind(this)),this.subscribe("rows-wipe",this.wipe.bind(this)),this.subscribe("rows-added",this.rowsUpdated.bind(this)),this.subscribe("row-moving",this.rowMoving.bind(this)),this.subscribe("row-adding-index",this.rowAddingIndex.bind(this)),this.subscribe("rows-sample",this.rowSample.bind(this)),this.subscribe("render-virtual-fill",this.virtualRenderFill.bind(this)),this.registerDisplayHandler(this.displayHandler,20),this.initialized=!0)}configureGroupSetup(){if(this.table.options.groupBy){var e=this.table.options.groupBy,n=this.table.options.groupStartOpen,a=this.table.options.groupHeader;this.allowedValues=this.table.options.groupValues,Array.isArray(e)&&Array.isArray(a)&&e.length>a.length&&console.warn("Error creating group headers, groupHeader array is shorter than groupBy array"),this.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],this.langBind("groups|item",(d,p)=>{this.headerGenerator[0]=(f,v,C)=>(void 0===f?"":f)+"<span>("+v+" "+(1===v?d:p.groups.items)+")</span>"}),this.groupIDLookups=[],Array.isArray(e)||e?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(d=>{d.definition.topCalc&&this.table.modules.columnCalcs.initializeTopRow(),d.definition.bottomCalc&&this.table.modules.columnCalcs.initializeBottomRow()}),Array.isArray(e)||(e=[e]),e.forEach((d,p)=>{var f,v;f="function"==typeof d?d:(v=this.table.columnManager.getColumnByField(d))?function(C){return v.getFieldValue(C)}:function(C){return C[d]},this.groupIDLookups.push({field:"function"!=typeof d&&d,func:f,values:!!this.allowedValues&&this.allowedValues[p]})}),n&&(Array.isArray(n)||(n=[n]),n.forEach(d=>{}),this.startOpen=n),a&&(this.headerGenerator=Array.isArray(a)?a:[a])}}rowSample(e,n){var a=this.getGroups(!1)[0];return n.push(a.getRows(!1)[0]),n}virtualRenderFill(){var e=this.table.rowManager.tableElement,n=this.table.rowManager.getVisibleRows();n=n.filter(a=>"group"!==a.type),e.style.minWidth=n.length?"":this.table.columnManager.getWidth()+"px"}rowAddingIndex(e,n,a){this.assignRowToGroup(e);var c=e.modules.group.rows;return c.length>1&&(!n||n&&-1==c.indexOf(n)?a?c[0]!==e&&this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n=c[0],!a):c[c.length-1]!==e&&this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n=c[c.length-1],!a):this.table.rowManager.moveRowInArray(e.modules.group.rows,e,n,!a)),n}trackChanges(){this.dispatch("group-changed")}setGroupBy(e){this.table.options.groupBy=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupValues(e){this.table.options.groupValues=e,this.configureGroupSetup(),this.refreshData(),this.trackChanges()}setGroupStartOpen(e){this.table.options.groupStartOpen=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}setGroupHeader(e){this.table.options.groupHeader=e,this.configureGroupSetup(),this.table.options.groupBy?(this.refreshData(),this.trackChanges()):console.warn("Grouping Update - cant refresh view, no groups have been set")}userGetGroups(e){return this.getGroups(!0)}userGetGroupedData(){return this.table.options.groupBy?this.getGroupedData():this.getData()}rowGetGroup(e){return!!e.modules.group&&e.modules.group.getComponent()}rowMoving(e,n,a){!a&&n instanceof Kp&&(n=this.table.rowManager.prevDisplayRow(e)||n);var c=n instanceof Kp?n:n.modules.group,d=e instanceof Kp?e:e.modules.group;c===d?this.table.rowManager.moveRowInArray(c.rows,e,n,a):(d&&d.removeRow(e),c.insertRow(e,n,a))}rowDeleting(e){e.modules.group&&e.modules.group.removeRow(e)}rowsUpdated(e){this.updateGroupRows(!0)}cellUpdated(e){this.reassignRowToGroup(e.row)}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}getRows(e){return this.table.options.groupBy&&this.groupIDLookups.length?(this.dispatchExternal("dataGrouping"),this.generateGroups(e),this.subscribedExternal("dataGrouped")&&this.dispatchExternal("dataGrouped",this.getGroups(!0)),this.updateGroupRows()):e.slice(0)}getGroups(e){var n=[];return this.groupList.forEach(function(a){n.push(e?a.getComponent():a)}),n}getChildGroups(e){var n=[];return e||(e=this),e.groupList.forEach(a=>{a.groupList.length?n=n.concat(this.getChildGroups(a)):n.push(a)}),n}wipe(){this.groupList.forEach(function(e){e.wipe()})}pullGroupListData(e){var n=[];return e.forEach(a=>{var c={level:0,rowCount:0,headerContent:""},d=[];a.hasSubGroups?(d=this.pullGroupListData(a.groupList),c.level=a.level,c.rowCount=d.length-a.groupList.length,c.headerContent=a.generator(a.key,c.rowCount,a.rows,a),n.push(c),n=n.concat(d)):(c.level=a.level,c.headerContent=a.generator(a.key,a.rows.length,a.rows,a),c.rowCount=a.getRows().length,n.push(c),a.getRows().forEach(p=>{n.push(p.getData("data"))}))}),n}getGroupedData(){return this.pullGroupListData(this.groupList)}getRowGroup(e){var n=!1;return this.groupList.forEach(a=>{var c=a.getRowGroup(e);c&&(n=c)}),n}countGroups(){return this.groupList.length}generateGroups(e){var n=this.groups;this.groups={},this.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(a=>{this.createGroup(a,0,n)}),e.forEach(a=>{this.assignRowToExistingGroup(a,n)})):e.forEach(a=>{this.assignRowToGroup(a,n)})}createGroup(e,n,a){var d,c=n+"_"+e;d=new Kp(this,!1,n,e,this.groupIDLookups[0].field,this.headerGenerator[0],(a=a||[])[c]),this.groups[c]=d,this.groupList.push(d)}assignRowToExistingGroup(e,n){var c="0_"+this.groupIDLookups[0].func(e.getData());this.groups[c]&&this.groups[c].addRow(e)}assignRowToGroup(e,n){var a=this.groupIDLookups[0].func(e.getData()),c=!this.groups["0_"+a];return c&&this.createGroup(a,0,n),this.groups["0_"+a].addRow(e),!c}reassignRowToGroup(e){if("row"===e.type){var n=e.modules.group,a=n.getPath(),c=this.getExpectedPath(e);a.length==c.length&&a.every((p,f)=>p===c[f])||(n.removeRow(e),this.assignRowToGroup(e,this.groups),this.refreshData(!0))}}getExpectedPath(e){var n=[],a=e.getData();return this.groupIDLookups.forEach(c=>{n.push(c.func(a))}),n}updateGroupRows(e){var n=[];return this.groupList.forEach(a=>{n=n.concat(a.getHeadersAndRows())}),e&&this.refreshData(!0,this.displayHandler),n}scrollHeaders(e){"virtual"===this.table.options.renderHorizontal&&(e-=this.table.columnManager.renderer.vDomPadLeft),e+="px",this.groupList.forEach(n=>{n.scrollHeader(e)})}removeGroup(e){var a,n=e.level+"_"+e.key;this.groups[n]&&(delete this.groups[n],(a=this.groupList.indexOf(e))>-1&&this.groupList.splice(a,1))}}return r.moduleName="groupRows",r})();var l9={cellEdit:function(r){r.component.setValueProcessData(r.data.oldValue),r.component.cellRendered()},rowAdd:function(r){r.component.deleteActual()},rowDelete:function(r){var t=this.table.rowManager.addRowActual(r.data.data,r.data.pos,r.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(r.component,t)},rowMove:function(r){this.table.rowManager.moveRowActual(r.component,this.table.rowManager.rows[r.data.posFrom],!r.data.after),this.table.rowManager.redraw()}},c9={cellEdit:function(r){r.component.setValueProcessData(r.data.newValue),r.component.cellRendered()},rowAdd:function(r){var t=this.table.rowManager.addRowActual(r.data.data,r.data.pos,r.data.index);this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.updateGroupRows(!0),this._rebindRow(r.component,t)},rowDelete:function(r){r.component.deleteActual()},rowMove:function(r){this.table.rowManager.moveRowActual(r.component,this.table.rowManager.rows[r.data.posTo],r.data.after),this.table.rowManager.redraw()}};let u9=(()=>{class r extends si{constructor(e){super(e),this.history=[],this.index=-1,this.registerTableOption("history",!1)}initialize(){this.table.options.history&&(this.subscribe("cell-value-updated",this.cellUpdated.bind(this)),this.subscribe("cell-delete",this.clearComponentHistory.bind(this)),this.subscribe("row-delete",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clear.bind(this)),this.subscribe("row-added",this.rowAdded.bind(this)),this.subscribe("row-move",this.rowMoved.bind(this))),this.registerTableFunction("undo",this.undo.bind(this)),this.registerTableFunction("redo",this.redo.bind(this)),this.registerTableFunction("getHistoryUndoSize",this.getHistoryUndoSize.bind(this)),this.registerTableFunction("getHistoryRedoSize",this.getHistoryRedoSize.bind(this)),this.registerTableFunction("clearHistory",this.clear.bind(this))}rowMoved(e,n,a){this.action("rowMove",e,{posFrom:this.table.rowManager.getRowPosition(e),posTo:this.table.rowManager.getRowPosition(n),to:n,after:a})}rowAdded(e,n,a,c){this.action("rowAdd",e,{data:n,pos:a,index:c})}rowDeleted(e){var n,a;this.table.options.groupBy?(n=(a=e.getComponent().getGroup().rows).indexOf(e))&&(n=a[n-1]):(n=e.table.rowManager.getRowIndex(e))&&(n=e.table.rowManager.rows[n-1]),this.action("rowDelete",e,{data:e.getData(),pos:!n,index:n})}cellUpdated(e){this.action("cellEdit",e,{oldValue:e.oldValue,newValue:e.value})}clear(){this.history=[],this.index=-1}action(e,n,a){this.history=this.history.slice(0,this.index+1),this.history.push({type:e,component:n,data:a}),this.index++}getHistoryUndoSize(){return this.index+1}getHistoryRedoSize(){return this.history.length-(this.index+1)}clearComponentHistory(e){var n=this.history.findIndex(function(a){return a.component===e});n>-1&&(this.history.splice(n,1),n<=this.index&&this.index--,this.clearComponentHistory(e))}undo(){if(this.index>-1){let e=this.history[this.index];return r.undoers[e.type].call(this,e),this.index--,this.dispatchExternal("historyUndo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Undo Error - No more history to undo"),!1}redo(){if(this.history.length-1>this.index){this.index++;let e=this.history[this.index];return r.redoers[e.type].call(this,e),this.dispatchExternal("historyRedo",e.type,e.component.getComponent(),e.data),!0}return console.warn("History Redo Error - No more history to redo"),!1}_rebindRow(e,n){this.history.forEach(function(a){if(a.component instanceof vs)a.component===e&&(a.component=n);else if(a.component instanceof ab&&a.component.row===e){var c=a.component.column.getField();c&&(a.component=n.getCell(c))}})}}return r.moduleName="history",r.undoers=l9,r.redoers=c9,r})(),d9=(()=>{class r extends si{constructor(e){super(e),this.fieldIndex=[],this.hasIndex=!1}initialize(){this.tableElementCheck()}tableElementCheck(){this.table.originalElement&&"TABLE"===this.table.originalElement.tagName&&this.parseTable()}parseTable(){var e=this.table.originalElement,n=this.table.options,c=e.getElementsByTagName("th"),d=e.getElementsByTagName("tbody")[0],p=[];this.hasIndex=!1,this.dispatchExternal("htmlImporting"),d=d?d.getElementsByTagName("tr"):[],this._extractOptions(e,n),c.length?this._extractHeaders(c,d):this._generateBlankHeaders(c,d);for(var f=0;f<d.length;f++){var C=d[f].getElementsByTagName("td"),M={};this.hasIndex||(M[n.index]=f);for(var O=0;O<C.length;O++)void 0!==this.fieldIndex[O]&&(M[this.fieldIndex[O]]=C[O].innerHTML);p.push(M)}n.data=p,this.dispatchExternal("htmlImported")}_extractOptions(e,n,a){var c=e.attributes,d=a?Object.assign([],a):Object.keys(n),p={};for(var f in d.forEach(M=>{p[M.toLowerCase()]=M}),c){var C,v=c[f];v&&"object"==typeof v&&v.name&&0===v.name.indexOf("tabulator-")&&(C=v.name.replace("tabulator-",""),void 0!==p[C]&&(n[p[C]]=this._attribValue(v.value)))}}_attribValue(e){return"true"===e||"false"!==e&&e}_findCol(e){return this.table.options.columns.find(a=>a.title===e)||!1}_extractHeaders(e,n){for(var a=0;a<e.length;a++){var f,c=e[a],d=!1,p=this._findCol(c.textContent);p?d=!0:p={title:c.textContent.trim()},p.field||(p.field=c.textContent.trim().toLowerCase().replace(" ","_")),(f=c.getAttribute("width"))&&!p.width&&(p.width=f),this._extractOptions(c,p,fm.prototype.defaultOptionList),this.fieldIndex[a]=p.field,p.field==this.table.options.index&&(this.hasIndex=!0),d||this.table.options.columns.push(p)}}_generateBlankHeaders(e,n){for(var a=0;a<e.length;a++){var c=e[a],d={title:"",field:"col"+a};this.fieldIndex[a]=d.field;var p=c.getAttribute("width");p&&(d.width=p),this.table.options.columns.push(d)}}}return r.moduleName="htmlTableImport",r})(),h9=(()=>{class r extends si{constructor(e){super(e),this.eventMap={rowClick:"row-click",rowDblClick:"row-dblclick",rowContext:"row-contextmenu",rowMouseEnter:"row-mouseenter",rowMouseLeave:"row-mouseleave",rowMouseOver:"row-mouseover",rowMouseOut:"row-mouseout",rowMouseMove:"row-mousemove",rowTap:"row",rowDblTap:"row",rowTapHold:"row",cellClick:"cell-click",cellDblClick:"cell-dblclick",cellContext:"cell-contextmenu",cellMouseEnter:"cell-mouseenter",cellMouseLeave:"cell-mouseleave",cellMouseOver:"cell-mouseover",cellMouseOut:"cell-mouseout",cellMouseMove:"cell-mousemove",cellTap:"cell",cellDblTap:"cell",cellTapHold:"cell",headerClick:"column-click",headerDblClick:"column-dblclick",headerContext:"column-contextmenu",headerMouseEnter:"column-mouseenter",headerMouseLeave:"column-mouseleave",headerMouseOver:"column-mouseover",headerMouseOut:"column-mouseout",headerMouseMove:"column-mousemove",headerTap:"column",headerDblTap:"column",headerTapHold:"column",groupClick:"group-click",groupDblClick:"group-dblclick",groupContext:"group-contextmenu",groupMouseEnter:"group-mouseenter",groupMouseLeave:"group-mouseleave",groupMouseOver:"group-mouseover",groupMouseOut:"group-mouseout",groupMouseMove:"group-mousemove",groupTap:"group",groupDblTap:"group",groupTapHold:"group"},this.subscribers={},this.touchSubscribers={},this.columnSubscribers={},this.touchWatchers={row:{tap:null,tapDbl:null,tapHold:null},cell:{tap:null,tapDbl:null,tapHold:null},column:{tap:null,tapDbl:null,tapHold:null}},this.registerColumnOption("headerClick"),this.registerColumnOption("headerDblClick"),this.registerColumnOption("headerContext"),this.registerColumnOption("headerMouseEnter"),this.registerColumnOption("headerMouseLeave"),this.registerColumnOption("headerMouseOver"),this.registerColumnOption("headerMouseOut"),this.registerColumnOption("headerMouseMove"),this.registerColumnOption("headerTap"),this.registerColumnOption("headerDblTap"),this.registerColumnOption("headerTapHold"),this.registerColumnOption("cellClick"),this.registerColumnOption("cellDblClick"),this.registerColumnOption("cellContext"),this.registerColumnOption("cellMouseEnter"),this.registerColumnOption("cellMouseLeave"),this.registerColumnOption("cellMouseOver"),this.registerColumnOption("cellMouseOut"),this.registerColumnOption("cellMouseMove"),this.registerColumnOption("cellTap"),this.registerColumnOption("cellDblTap"),this.registerColumnOption("cellTapHold")}initialize(){this.initializeExternalEvents(),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("cell-dblclick",this.cellContentsSelectionFixer.bind(this))}cellContentsSelectionFixer(e,n){if(!this.table.modExists("edit")||this.table.modules.edit.currentCell!==this){e.preventDefault();try{if(document.selection)(a=document.body.createTextRange()).moveToElementText(this.element),a.select();else if(window.getSelection){var a;(a=document.createRange()).selectNode(this.element),window.getSelection().removeAllRanges(),window.getSelection().addRange(a)}}catch(c){}}}initializeExternalEvents(){for(let e in this.eventMap)this.subscriptionChangeExternal(e,this.subscriptionChanged.bind(this,e))}subscriptionChanged(e,n){n?this.subscribers[e]||(this.eventMap[e].includes("-")?(this.subscribers[e]=this.handle.bind(this,e),this.subscribe(this.eventMap[e],this.subscribers[e])):this.subscribeTouchEvents(e)):this.eventMap[e].includes("-")?this.subscribers[e]&&!this.columnSubscribers[e]&&!this.subscribedExternal(e)&&(this.unsubscribe(this.eventMap[e],this.subscribers[e]),delete this.subscribers[e]):this.unsubscribeTouchEvents(e)}subscribeTouchEvents(e){var n=this.eventMap[e];this.touchSubscribers[n+"-touchstart"]||(this.touchSubscribers[n+"-touchstart"]=this.handleTouch.bind(this,n,"start"),this.touchSubscribers[n+"-touchend"]=this.handleTouch.bind(this,n,"end"),this.subscribe(n+"-touchstart",this.touchSubscribers[n+"-touchstart"]),this.subscribe(n+"-touchend",this.touchSubscribers[n+"-touchend"])),this.subscribers[e]=!0}unsubscribeTouchEvents(e){var n=!0,a=this.eventMap[e];if(this.subscribers[e]&&!this.subscribedExternal(e)){delete this.subscribers[e];for(let c in this.eventMap)this.eventMap[c]===a&&this.subscribers[c]&&(n=!1);n&&(this.unsubscribe(a+"-touchstart",this.touchSubscribers[a+"-touchstart"]),this.unsubscribe(a+"-touchend",this.touchSubscribers[a+"-touchend"]),delete this.touchSubscribers[a+"-touchstart"],delete this.touchSubscribers[a+"-touchend"])}}initializeColumn(e){var n=e.definition;for(let a in this.eventMap)n[a]&&(this.subscriptionChanged(a,!0),this.columnSubscribers[a]||(this.columnSubscribers[a]=[]),this.columnSubscribers[a].push(e))}handle(e,n,a){this.dispatchEvent(e,n,a)}handleTouch(e,n,a,c){var d=this.touchWatchers[e];switch("column"===e&&(e="header"),n){case"start":d.tap=!0,clearTimeout(d.tapHold),d.tapHold=setTimeout(()=>{clearTimeout(d.tapHold),d.tapHold=null,d.tap=null,clearTimeout(d.tapDbl),d.tapDbl=null,this.dispatchEvent(e+"TapHold",a,c)},1e3);break;case"end":d.tap&&(d.tap=null,this.dispatchEvent(e+"Tap",a,c)),d.tapDbl?(clearTimeout(d.tapDbl),d.tapDbl=null,this.dispatchEvent(e+"DblTap",a,c)):d.tapDbl=setTimeout(()=>{clearTimeout(d.tapDbl),d.tapDbl=null},300),clearTimeout(d.tapHold),d.tapHold=null}}dispatchEvent(e,n,a){var d,c=a.getComponent();this.columnSubscribers[e]&&(a instanceof ab?d=a.column.definition[e]:a instanceof fm&&(d=a.definition[e]),d&&d(n,c)),this.dispatchExternal(e,n,c)}}return r.moduleName="interaction",r})();var p9={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},f9={keyBlock:function(r){r.stopPropagation(),r.preventDefault()},scrollPageUp:function(r){var t=this.table.rowManager,e=t.scrollTop-t.element.clientHeight;r.preventDefault(),t.displayRowsCount&&(e>=0?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(r){var t=this.table.rowManager,e=t.scrollTop+t.element.clientHeight,n=t.element.scrollHeight;r.preventDefault(),t.displayRowsCount&&(e<=n?t.element.scrollTop=e:t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(r){var t=this.table.rowManager;r.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(r){var t=this.table.rowManager;r.preventDefault(),t.displayRowsCount&&t.scrollToRow(t.getDisplayRows()[t.displayRowsCount-1]),this.table.element.focus()},navPrev:function(r){this.dispatch("keybinding-nav-prev",r)},navNext:function(r){this.dispatch("keybinding-nav-next",r)},navLeft:function(r){this.dispatch("keybinding-nav-left",r)},navRight:function(r){this.dispatch("keybinding-nav-right",r)},navUp:function(r){this.dispatch("keybinding-nav-up",r)},navDown:function(r){this.dispatch("keybinding-nav-down",r)},undo:function(r){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(r.preventDefault(),this.table.modules.history.undo()))},redo:function(r){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(r.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(r){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(!1,!0)}};let g9=(()=>{class r extends si{constructor(e){super(e),this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1,this.registerTableOption("keybindings",[]),this.registerTableOption("tabEndNewRow",!1)}initialize(){var e=this.table.options.keybindings,n={};if(this.watchKeys={},this.pressedKeys=[],!1!==e){for(let a in r.bindings)n[a]=r.bindings[a];if(Object.keys(e).length)for(let a in e)n[a]=e[a];this.mapBindings(n),this.bindEvents()}this.subscribe("table-destroy",this.clearBindings.bind(this))}mapBindings(e){for(let n in e)r.actions[n]?e[n]&&("object"!=typeof e[n]&&(e[n]=[e[n]]),e[n].forEach(a=>{this.mapBinding(n,a)})):console.warn("Key Binding Error - no such action:",n)}mapBinding(e,n){var a={action:r.actions[e],keys:[],ctrl:!1,shift:!1,meta:!1};n.toString().toLowerCase().split(" ").join("").split("+").forEach(d=>{switch(d){case"ctrl":a.ctrl=!0;break;case"shift":a.shift=!0;break;case"meta":a.meta=!0;break;default:d=parseInt(d),a.keys.push(d),this.watchKeys[d]||(this.watchKeys[d]=[]),this.watchKeys[d].push(a)}})}bindEvents(){var e=this;this.keyupBinding=function(n){var a=n.keyCode,c=e.watchKeys[a];c&&(e.pressedKeys.push(a),c.forEach(function(d){e.checkBinding(n,d)}))},this.keydownBinding=function(n){var a=n.keyCode;if(e.watchKeys[a]){var d=e.pressedKeys.indexOf(a);d>-1&&e.pressedKeys.splice(d,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)}clearBindings(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)}checkBinding(e,n){var a=!0;return e.ctrlKey==n.ctrl&&e.shiftKey==n.shift&&e.metaKey==n.meta&&(n.keys.forEach(c=>{-1==this.pressedKeys.indexOf(c)&&(a=!1)}),a&&n.action.call(this,e),!0)}}return r.moduleName="keybindings",r.bindings=p9,r.actions=f9,r})(),m9=(()=>{class r extends si{constructor(e){super(e),this.menuElements=[],this.blurEvent=this.hideMenu.bind(this),this.escEvent=this.escMenu.bind(this),this.nestedMenuBlock=!1,this.positionReversedX=!1,this.registerTableOption("rowContextMenu",!1),this.registerTableOption("rowClickMenu",!1),this.registerTableOption("groupContextMenu",!1),this.registerTableOption("groupClickMenu",!1),this.registerColumnOption("headerContextMenu"),this.registerColumnOption("headerMenu"),this.registerColumnOption("contextMenu"),this.registerColumnOption("clickMenu")}initialize(){this.subscribe("cell-layout",this.layoutCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this))}layoutCell(e){(e.column.definition.contextMenu||e.column.definition.clickMenu)&&this.initializeCell(e)}initializeColumn(e){var n=e.definition;(n.headerContextMenu||n.headerClickMenu||n.headerMenu)&&this.initializeColumnHeader(e)}initializeColumnHeader(e){var n;e.definition.headerContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.definition.headerContextMenu)),this.tapHold(e,e.definition.headerContextMenu)),e.definition.headerMenu&&((n=document.createElement("span")).classList.add("tabulator-header-menu-button"),n.innerHTML="&vellip;",n.addEventListener("click",a=>{a.stopPropagation(),a.preventDefault(),this.LoadMenuEvent(e,e.definition.headerMenu,a)}),e.titleElement.insertBefore(n,e.titleElement.firstChild))}LoadMenuEvent(e,n,a){n="function"==typeof n?n.call(this.table,e.getComponent(),a):n,this.loadMenu(a,e,n)}tapHold(e,n){var a=e.getElement(),c=null,d=!1;a.addEventListener("touchstart",p=>{clearTimeout(c),d=!1,c=setTimeout(()=>{clearTimeout(c),c=null,d=!0,this.LoadMenuEvent(e,n,p)},1e3)},{passive:!0}),a.addEventListener("touchend",p=>{clearTimeout(c),c=null,d&&p.preventDefault()})}initializeCell(e){e.column.definition.contextMenu&&(e.getElement(!0).addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,e.column.definition.contextMenu)),this.tapHold(e,e.column.definition.contextMenu)),e.column.definition.clickMenu&&e.getElement(!0).addEventListener("click",this.LoadMenuEvent.bind(this,e,e.column.definition.clickMenu))}initializeRow(e){this.table.options.rowContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.rowContextMenu)),this.tapHold(e,this.table.options.rowContextMenu)),this.table.options.rowClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.rowClickMenu))}initializeGroup(e){this.table.options.groupContextMenu&&(e.getElement().addEventListener("contextmenu",this.LoadMenuEvent.bind(this,e,this.table.options.groupContextMenu)),this.tapHold(e,this.table.options.groupContextMenu)),this.table.options.groupClickMenu&&e.getElement().addEventListener("click",this.LoadMenuEvent.bind(this,e,this.table.options.groupClickMenu))}loadMenu(e,n,a,c){var d=!(e instanceof MouseEvent),p=document.createElement("div");if(p.classList.add("tabulator-menu"),d||e.preventDefault(),a&&a.length){if(!c){if(this.nestedMenuBlock){if(this.isOpen())return}else this.nestedMenuBlock=setTimeout(()=>{this.nestedMenuBlock=!1},100);this.hideMenu(),this.menuElements=[]}a.forEach(f=>{var v=document.createElement("div"),C=f.label,M=f.disabled;f.separator?v.classList.add("tabulator-menu-separator"):(v.classList.add("tabulator-menu-item"),"function"==typeof C&&(C=C.call(this.table,n.getComponent())),C instanceof Node?v.appendChild(C):v.innerHTML=C,"function"==typeof M&&(M=M.call(this.table,n.getComponent())),M?(v.classList.add("tabulator-menu-item-disabled"),v.addEventListener("click",O=>{O.stopPropagation()})):f.menu&&f.menu.length?v.addEventListener("click",O=>{O.stopPropagation(),this.hideOldSubMenus(p),this.loadMenu(O,n,f.menu,v)}):f.action&&v.addEventListener("click",O=>{f.action(O,n.getComponent())}),f.menu&&f.menu.length&&v.classList.add("tabulator-menu-item-submenu")),p.appendChild(v)}),p.addEventListener("click",f=>{this.hideMenu()}),this.menuElements.push(p),this.positionMenu(p,c,d,e)}}hideOldSubMenus(e){var n=this.menuElements.indexOf(e);if(n>-1)for(let c=this.menuElements.length-1;c>n;c--){var a=this.menuElements[c];a.parentNode&&a.parentNode.removeChild(a),this.menuElements.pop()}}positionMenu(e,n,a,c){var p,f,v,d=Math.max(document.body.offsetHeight,window.innerHeight);n?(p=(v=rr.elOffset(n)).left+n.offsetWidth,f=v.top-1):(p=a?c.touches[0].pageX:c.pageX,f=a?c.touches[0].pageY:c.pageY,this.positionReversedX=!1),e.style.top=f+"px",e.style.left=p+"px",setTimeout(()=>{this.table.rowManager.element.addEventListener("scroll",this.blurEvent),document.body.addEventListener("click",this.blurEvent),document.body.addEventListener("contextmenu",this.blurEvent),window.addEventListener("resize",this.blurEvent),document.body.addEventListener("keydown",this.escEvent)},100),document.body.appendChild(e),f+e.offsetHeight>=d&&(e.style.top="",e.style.bottom=n?d-v.top-n.offsetHeight-1+"px":d-f+"px"),(p+e.offsetWidth>=document.body.offsetWidth||this.positionReversedX)&&(e.style.left="",e.style.right=n?document.documentElement.offsetWidth-v.left+"px":document.documentElement.offsetWidth-p+"px",this.positionReversedX=!0)}isOpen(){return!!this.menuElements.length}escMenu(e){27==e.keyCode&&this.hideMenu()}hideMenu(){this.menuElements.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),document.body.removeEventListener("keydown",this.escEvent),document.body.removeEventListener("click",this.blurEvent),document.body.removeEventListener("contextmenu",this.blurEvent),window.removeEventListener("resize",this.blurEvent),this.table.rowManager.element.removeEventListener("scroll",this.blurEvent)}}return r.moduleName="menu",r})(),_9=(()=>{class r extends si{constructor(e){super(e),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.touchMove=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.registerTableOption("movableColumns",!1)}createPlaceholderElement(){var e=document.createElement("div");return e.classList.add("tabulator-col"),e.classList.add("tabulator-col-placeholder"),e}initialize(){this.subscribe("column-init",this.initializeColumn.bind(this))}initializeColumn(e){var c,n=this,a={};e.modules.frozen||(c=e.getElement(),a.mousemove=function(d){e.parent===n.moving.parent&&((n.touchMove?d.touches[0].pageX:d.pageX)-rr.elOffset(c).left+n.table.columnManager.element.scrollLeft>e.getWidth()/2?(n.toCol!==e||!n.toColAfter)&&(c.parentNode.insertBefore(n.placeholderElement,c.nextSibling),n.moveColumn(e,!0)):(n.toCol!==e||n.toColAfter)&&(c.parentNode.insertBefore(n.placeholderElement,c),n.moveColumn(e,!1)))}.bind(n),c.addEventListener("mousedown",function(d){n.touchMove=!1,1===d.which&&(n.checkTimeout=setTimeout(function(){n.startMove(d,e)},n.checkPeriod))}),c.addEventListener("mouseup",function(d){1===d.which&&n.checkTimeout&&clearTimeout(n.checkTimeout)}),n.bindTouchEvents(e)),e.modules.moveColumn=a}bindTouchEvents(e){var c,d,p,f,v,C,n=e.getElement(),a=!1;n.addEventListener("touchstart",M=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,c=e.nextColumn(),p=c?c.getWidth()/2:0,d=e.prevColumn(),f=d?d.getWidth()/2:0,v=0,C=0,a=!1,this.startMove(M,e)},this.checkPeriod)},{passive:!0}),n.addEventListener("touchmove",M=>{var O,P;this.moving&&(this.moveHover(M),a||(a=M.touches[0].pageX),(O=M.touches[0].pageX-a)>0?c&&O-v>p&&(P=c)!==e&&(a=M.touches[0].pageX,P.getElement().parentNode.insertBefore(this.placeholderElement,P.getElement().nextSibling),this.moveColumn(P,!0)):d&&-O-C>f&&(P=d)!==e&&(a=M.touches[0].pageX,P.getElement().parentNode.insertBefore(this.placeholderElement,P.getElement()),this.moveColumn(P,!1)),P&&(c=P.nextColumn(),v=p,p=c?c.getWidth()/2:0,d=P.prevColumn(),C=f,f=d?d.getWidth()/2:0))},{passive:!0}),n.addEventListener("touchend",M=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&this.endMove(M)})}startMove(e,n){var a=n.getElement(),c=this.table.columnManager.getElement(),d=this.table.columnManager.getHeadersElement();this.moving=n,this.startX=(this.touchMove?e.touches[0].pageX:e.pageX)-rr.elOffset(a).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=n.getWidth()+"px",this.placeholderElement.style.height=n.getHeight()+"px",a.parentNode.insertBefore(this.placeholderElement,a),a.parentNode.removeChild(a),this.hoverElement=a.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom=c.clientHeight-d.offsetHeight+"px",this.touchMove||(this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove)),this.moveHover(e)}_bindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().addEventListener("mousemove",e.modules.moveColumn.mousemove)})}_unbindMouseMove(){this.table.columnManager.columnsByIndex.forEach(function(e){e.modules.moveColumn.mousemove&&e.getElement().removeEventListener("mousemove",e.modules.moveColumn.mousemove)})}moveColumn(e,n){var a=this.moving.getCells();this.toCol=e,this.toColAfter=n,n?e.getCells().forEach(function(c,d){var p=c.getElement(!0);p.parentNode&&a[d]&&p.parentNode.insertBefore(a[d].getElement(),p.nextSibling)}):e.getCells().forEach(function(c,d){var p=c.getElement(!0);p.parentNode&&a[d]&&p.parentNode.insertBefore(a[d].getElement(),p)})}endMove(e){(1===e.which||this.touchMove)&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumnActual(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.touchMove||(document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove)))}moveHover(e){var d,n=this.table.columnManager.getElement(),a=n.scrollLeft,c=(this.touchMove?e.touches[0].pageX:e.pageX)-rr.elOffset(n).left+a;this.hoverElement.style.left=c-this.startX+"px",c-a<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{d=Math.max(0,a-5),this.table.rowManager.getElement().scrollLeft=d,this.autoScrollTimeout=!1},1))),a+n.clientWidth-c<this.autoScrollMargin&&(this.autoScrollTimeout||(this.autoScrollTimeout=setTimeout(()=>{d=Math.min(n.clientWidth,a+5),this.table.rowManager.getElement().scrollLeft=d,this.autoScrollTimeout=!1},1)))}}return r.moduleName="moveColumn",r})();class cb extends si{constructor(t){super(t),this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.touchMove=!1,this.connection=!1,this.connectionSelectorsTables=!1,this.connectionSelectorsElements=!1,this.connectionElements=[],this.connections=[],this.connectedTable=!1,this.connectedRow=!1,this.registerTableOption("movableRows",!1),this.registerTableOption("movableRowsConnectedTables",!1),this.registerTableOption("movableRowsConnectedElements",!1),this.registerTableOption("movableRowsSender",!1),this.registerTableOption("movableRowsReceiver","insert"),this.registerColumnOption("rowHandle")}createPlaceholderElement(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t}initialize(){this.table.options.movableRows&&(this.connectionSelectorsTables=this.table.options.movableRowsConnectedTables,this.connectionSelectorsElements=this.table.options.movableRowsConnectedElements,this.connection=this.connectionSelectorsTables||this.connectionSelectorsElements,this.subscribe("cell-init",this.initializeCell.bind(this)),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("row-init",this.initializeRow.bind(this)))}initializeGroupHeader(t){var e=this,n={};n.mouseup=function(a){e.tableRowDrop(a,row)}.bind(e),n.mousemove=function(a){if(a.pageY-rr.elOffset(t.element).top+e.table.rowManager.element.scrollTop>t.getHeight()/2)e.toRow===t&&e.toRowAfter||((c=t.getElement()).parentNode.insertBefore(e.placeholderElement,c.nextSibling),e.moveRow(t,!0));else if(e.toRow!==t||e.toRowAfter){var c;(c=t.getElement()).previousSibling&&(c.parentNode.insertBefore(e.placeholderElement,c),e.moveRow(t,!1))}}.bind(e),t.modules.moveRow=n}initializeRow(t){var a,e=this,n={};n.mouseup=function(c){e.tableRowDrop(c,t)}.bind(e),n.mousemove=function(c){var d=t.getElement();c.pageY-rr.elOffset(d).top+e.table.rowManager.element.scrollTop>t.getHeight()/2?(e.toRow!==t||!e.toRowAfter)&&(d.parentNode.insertBefore(e.placeholderElement,d.nextSibling),e.moveRow(t,!0)):(e.toRow!==t||e.toRowAfter)&&(d.parentNode.insertBefore(e.placeholderElement,d),e.moveRow(t,!1))}.bind(e),this.hasHandle||((a=t.getElement()).addEventListener("mousedown",function(c){1===c.which&&(e.checkTimeout=setTimeout(function(){e.startMove(c,t)},e.checkPeriod))}),a.addEventListener("mouseup",function(c){1===c.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t,t.getElement())),t.modules.moveRow=n}initializeColumn(t){t.definition.rowHandle&&!1!==this.table.options.movableRows&&(this.hasHandle=!0)}initializeCell(t){if(t.column.definition.rowHandle&&!1!==this.table.options.movableRows){var e=this,n=t.getElement(!0);n.addEventListener("mousedown",function(a){1===a.which&&(e.checkTimeout=setTimeout(function(){e.startMove(a,t.row)},e.checkPeriod))}),n.addEventListener("mouseup",function(a){1===a.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)}),this.bindTouchEvents(t.row,n)}}bindTouchEvents(t,e){var a,c,d,p,f,v,n=!1;e.addEventListener("touchstart",C=>{this.checkTimeout=setTimeout(()=>{this.touchMove=!0,a=t.nextRow(),d=a?a.getHeight()/2:0,c=t.prevRow(),p=c?c.getHeight()/2:0,f=0,v=0,n=!1,this.startMove(C,t)},this.checkPeriod)},{passive:!0}),e.addEventListener("touchmove",C=>{var M,O;this.moving&&(C.preventDefault(),this.moveHover(C),n||(n=C.touches[0].pageY),(M=C.touches[0].pageY-n)>0?a&&M-f>d&&(O=a)!==t&&(n=C.touches[0].pageY,O.getElement().parentNode.insertBefore(this.placeholderElement,O.getElement().nextSibling),this.moveRow(O,!0)):c&&-M-v>p&&(O=c)!==t&&(n=C.touches[0].pageY,O.getElement().parentNode.insertBefore(this.placeholderElement,O.getElement()),this.moveRow(O,!1)),O&&(a=O.nextRow(),f=d,d=a?a.getHeight()/2:0,c=O.prevRow(),v=p,p=c?c.getHeight()/2:0))}),e.addEventListener("touchend",C=>{this.checkTimeout&&clearTimeout(this.checkTimeout),this.moving&&(this.endMove(C),this.touchMove=!1)})}_bindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)})}_unbindMouseMove(){this.table.rowManager.getDisplayRows().forEach(t=>{("row"===t.type||"group"===t.type)&&t.modules.moveRow&&t.modules.moveRow.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)})}startMove(t,e){var n=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(n.parentNode.insertBefore(this.placeholderElement,n),n.parentNode.removeChild(n)),this.hoverElement=n.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)}setStartPosition(t,e){var c,d,n=this.touchMove?t.touches[0].pageX:t.pageX,a=this.touchMove?t.touches[0].pageY:t.pageY;c=e.getElement(),this.connection?(d=c.getBoundingClientRect(),this.startX=d.left-n+window.pageXOffset,this.startY=d.top-a+window.pageYOffset):this.startY=a-c.getBoundingClientRect().top}endMove(t){(!t||1===t.which||this.touchMove)&&(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))}moveRow(t,e){this.toRow=t,this.toRowAfter=e}moveHover(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)}moveHoverTable(t){var e=this.table.rowManager.getElement(),n=e.scrollTop,a=(this.touchMove?t.touches[0].pageY:t.pageY)-e.getBoundingClientRect().top+n;this.hoverElement.style.top=a-this.startY+"px"}moveHoverConnections(t){this.hoverElement.style.left=this.startX+(this.touchMove?t.touches[0].pageX:t.pageX)+"px",this.hoverElement.style.top=this.startY+(this.touchMove?t.touches[0].pageY:t.pageY)+"px"}elementRowDrop(t,e,n){this.dispatchExternal("movableRowsElementDrop",t,e,!!n&&n.getComponent())}connectToTables(t){var e;this.connectionSelectorsTables&&(e=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStart",e),this.commsSend(this.connectionSelectorsTables,"moveRow","connect",{row:t})),this.connectionSelectorsElements&&(this.connectionElements=[],Array.isArray(this.connectionSelectorsElements)||(this.connectionSelectorsElements=[this.connectionSelectorsElements]),this.connectionSelectorsElements.forEach(n=>{"string"==typeof n?this.connectionElements=this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(n))):this.connectionElements.push(n)}),this.connectionElements.forEach(n=>{var a=c=>{this.elementRowDrop(c,n,this.moving)};n.addEventListener("mouseup",a),n.tabulatorElementDropEvent=a,n.classList.add("tabulator-movingrow-receiving")}))}disconnectFromTables(){var t;this.connectionSelectorsTables&&(t=this.commsConnections(this.connectionSelectorsTables),this.dispatchExternal("movableRowsSendingStop",t),this.commsSend(this.connectionSelectorsTables,"moveRow","disconnect")),this.connectionElements.forEach(e=>{e.classList.remove("tabulator-movingrow-receiving"),e.removeEventListener("mouseup",e.tabulatorElementDropEvent),delete e.tabulatorElementDropEvent})}connect(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(n=>{"row"===n.type&&n.modules.moveRow&&n.modules.moveRow.mouseup&&n.getElement().addEventListener("mouseup",n.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStart",e,t),!0)}disconnect(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(e=>{"row"===e.type&&e.modules.moveRow&&e.modules.moveRow.mouseup&&e.getElement().removeEventListener("mouseup",e.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.dispatchExternal("movableRowsReceivingStop",t)):console.warn("Move Row Error - trying to disconnect from non connected table")}dropComplete(t,e,n){var a=!1;if(n){switch(typeof this.table.options.movableRowsSender){case"string":a=this.senders[this.table.options.movableRowsSender];break;case"function":a=this.table.options.movableRowsSender}a?a.call(this,this.moving.getComponent(),e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.dispatchExternal("movableRowsSent",this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.dispatchExternal("movableRowsSentFailed",this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()}tableRowDrop(t,e){var n=!1,a=!1;switch(t.stopImmediatePropagation(),typeof this.table.options.movableRowsReceiver){case"string":n=this.receivers[this.table.options.movableRowsReceiver];break;case"function":n=this.table.options.movableRowsReceiver}n?a=n.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),this.dispatchExternal(a?"movableRowsReceived":"movableRowsReceivedFailed",this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.commsSend(this.connectedTable,"moveRow","dropcomplete",{row:e,success:a})}commsReceived(t,e,n){switch(e){case"connect":return this.connect(t,n.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,n.row,n.success)}}}cb.prototype.receivers={insert:function(r,t,e){return this.table.addRow(r.getData(),void 0,t),!0},add:function(r,t,e){return this.table.addRow(r.getData()),!0},update:function(r,t,e){return!!t&&(t.update(r.getData()),!0)},replace:function(r,t,e){return!!t&&(this.table.addRow(r.getData(),void 0,t),t.delete(),!0)}},cb.prototype.senders={delete:function(r,t,e){r.delete()}},cb.moduleName="moveRow";var v9={};let b9=(()=>{class r extends si{constructor(e){super(e),this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0,this.registerColumnOption("mutator"),this.registerColumnOption("mutatorParams"),this.registerColumnOption("mutatorData"),this.registerColumnOption("mutatorDataParams"),this.registerColumnOption("mutatorEdit"),this.registerColumnOption("mutatorEditParams"),this.registerColumnOption("mutatorClipboard"),this.registerColumnOption("mutatorClipboardParams")}initialize(){this.subscribe("cell-value-changing",this.transformCell.bind(this)),this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("row-data-init-before",this.rowDataChanged.bind(this)),this.subscribe("row-data-changing",this.rowDataChanged.bind(this))}rowDataChanged(e,n,a){return this.transformRow(n,"data",a)}initializeColumn(e){var n=!1,a={};this.allowedTypes.forEach(c=>{var p,d="mutator"+(c.charAt(0).toUpperCase()+c.slice(1));e.definition[d]&&(p=this.lookupMutator(e.definition[d]))&&(n=!0,a[d]={mutator:p,params:e.definition[d+"Params"]||{}})}),n&&(e.modules.mutate=a)}lookupMutator(e){var n=!1;switch(typeof e){case"string":r.mutators[e]?n=r.mutators[e]:console.warn("Mutator Error - No such mutator found, ignoring: ",e);break;case"function":n=e}return n}transformRow(e,n,a){var d,c="mutator"+(n.charAt(0).toUpperCase()+n.slice(1));return this.enabled&&this.table.columnManager.traverse(p=>{var f,v,C;p.modules.mutate&&(f=p.modules.mutate[c]||p.modules.mutate.mutator||!1)&&(d=p.getFieldValue(void 0!==a?a:e),("data"==n||void 0!==d)&&(C=p.getComponent(),v="function"==typeof f.params?f.params(d,e,n,C):f.params,p.setFieldValue(e,f.mutator(d,e,n,v,C))))}),e}transformCell(e,n){if(e.column.modules.mutate){var a=e.column.modules.mutate.mutatorEdit||e.column.modules.mutate.mutator||!1,c={};if(a)return c=Object.assign(c,e.row.getData()),e.column.setFieldValue(c,n),a.mutator(n,c,"edit",a.params,e.getComponent())}return n}enable(){this.enabled=!0}disable(){this.enabled=!1}}return r.moduleName="mutator",r.mutators=v9,r})(),y9=(()=>{class r extends si{constructor(e){super(e),this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.initialLoad=!0,this.dataChanging=!1,this.pageSizes=[],this.dataReceivedNames={},this.dataSentNames={},this.registerTableOption("pagination",!1),this.registerTableOption("paginationMode","local"),this.registerTableOption("paginationSize",!1),this.registerTableOption("paginationInitialPage",1),this.registerTableOption("paginationButtonCount",5),this.registerTableOption("paginationSizeSelector",!1),this.registerTableOption("paginationElement",!1),this.registerTableOption("paginationAddRow","page"),this.registerTableOption("progressiveLoad",!1),this.registerTableOption("progressiveLoadDelay",0),this.registerTableOption("progressiveLoadScrollMargin",0),this.registerTableFunction("setMaxPage",this.setMaxPage.bind(this)),this.registerTableFunction("setPage",this.setPage.bind(this)),this.registerTableFunction("setPageToRow",this.userSetPageToRow.bind(this)),this.registerTableFunction("setPageSize",this.userSetPageSize.bind(this)),this.registerTableFunction("getPageSize",this.getPageSize.bind(this)),this.registerTableFunction("previousPage",this.previousPage.bind(this)),this.registerTableFunction("nextPage",this.nextPage.bind(this)),this.registerTableFunction("getPage",this.getPage.bind(this)),this.registerTableFunction("getPageMax",this.getPageMax.bind(this)),this.registerComponentFunction("row","pageTo",this.setPageToRow.bind(this))}initialize(){this.table.options.pagination?(this.subscribe("row-deleted",this.rowsUpdated.bind(this)),this.subscribe("row-adding-position",this.rowAddingPosition.bind(this)),this.subscribe("row-added",this.rowsUpdated.bind(this)),this.subscribe("data-processed",this.initialLoadComplete.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),"remote"===this.table.options.paginationMode&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this))),this.table.options.progressiveLoad&&console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time"),this.registerDisplayHandler(this.restOnRenderBefore.bind(this),40),this.registerDisplayHandler(this.getRows.bind(this),50),this.createElements(),this.initializePaginator()):this.table.options.progressiveLoad&&(this.subscribe("data-params",this.remotePageParams.bind(this)),this.subscribe("data-loaded",this._parseRemoteData.bind(this)),this.subscribe("table-built",this.calculatePageSizes.bind(this)),this.initializeProgressive(this.table.options.progressiveLoad),"scroll"===this.table.options.progressiveLoad&&this.subscribe("scroll-vertical",this.scrollVertical.bind(this)))}rowAddingPosition(e,n){var d,a=this.table.rowManager,c=a.getDisplayRows();return n?c.length?d=c[0]:a.activeRows.length&&(d=a.activeRows[a.activeRows.length-1],n=!1):c.length&&(d=c[c.length-1],n=!(c.length<this.size)),{index:d,top:n}}calculatePageSizes(){var e,n;this.table.options.paginationSize?this.size=this.table.options.paginationSize:((e=document.createElement("div")).classList.add("tabulator-row"),e.style.visibility="hidden",(n=document.createElement("div")).classList.add("tabulator-cell"),n.innerHTML="Page Row Test",e.appendChild(n),this.table.rowManager.getTableElement().appendChild(e),this.size=Math.floor(this.table.rowManager.getElement().clientHeight/e.offsetHeight),this.table.rowManager.getTableElement().removeChild(e)),this.generatePageSizeSelectList()}initialLoadComplete(){this.initialLoad=!1}remotePageParams(e,n,a,c){return this.initialLoad||(this.progressiveLoad&&!a||!this.progressiveLoad&&!this.dataChanging)&&this.reset(!0),c.page=this.page,this.size&&(c.size=this.size),c}userSetPageToRow(e){return this.table.options.pagination&&(e=this.rowManager.findRow(e))?this.setPageToRow(e):Promise.reject()}userSetPageSize(e){return!!this.table.options.pagination&&(this.setPageSize(e),this.setPage(1))}scrollVertical(e,n){var a;!n&&!this.table.dataLoader.loading&&(a=this.table.rowManager.getElement()).scrollHeight-a.clientHeight-e<(this.table.options.progressiveLoadScrollMargin||2*a.clientHeight)&&this.nextPage()}restOnRenderBefore(e,n){return n||"local"===this.mode&&this.reset(),e}rowsUpdated(){this.refreshData(!0,"all")}createElements(){var e;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(e=document.createElement("button")).classList.add("tabulator-page"),e.setAttribute("type","button"),e.setAttribute("role","button"),e.setAttribute("aria-label",""),e.setAttribute("title",""),this.firstBut=e.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=e.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=e.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=e.cloneNode(!0),this.lastBut.setAttribute("data-page","last"),this.table.options.paginationSizeSelector&&(this.pageSizeSelect=document.createElement("select"),this.pageSizeSelect.classList.add("tabulator-page-size"))}generatePageSizeSelectList(){var e=[];if(this.pageSizeSelect){if(Array.isArray(this.table.options.paginationSizeSelector))this.pageSizes=e=this.table.options.paginationSizeSelector,-1==this.pageSizes.indexOf(this.size)&&e.unshift(this.size);else if(-1==this.pageSizes.indexOf(this.size)){e=[];for(let n=1;n<5;n++)e.push(this.size*n);this.pageSizes=e}else e=this.pageSizes;for(;this.pageSizeSelect.firstChild;)this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);e.forEach(n=>{var a=document.createElement("option");a.value=n,!0===n?this.langBind("pagination|all",function(c){a.innerHTML=c}):a.innerHTML=n,this.pageSizeSelect.appendChild(a)}),this.pageSizeSelect.value=this.size}}initializePaginator(e){var n;e||(this.langBind("pagination|first",a=>{this.firstBut.innerHTML=a}),this.langBind("pagination|first_title",a=>{this.firstBut.setAttribute("aria-label",a),this.firstBut.setAttribute("title",a)}),this.langBind("pagination|prev",a=>{this.prevBut.innerHTML=a}),this.langBind("pagination|prev_title",a=>{this.prevBut.setAttribute("aria-label",a),this.prevBut.setAttribute("title",a)}),this.langBind("pagination|next",a=>{this.nextBut.innerHTML=a}),this.langBind("pagination|next_title",a=>{this.nextBut.setAttribute("aria-label",a),this.nextBut.setAttribute("title",a)}),this.langBind("pagination|last",a=>{this.lastBut.innerHTML=a}),this.langBind("pagination|last_title",a=>{this.lastBut.setAttribute("aria-label",a),this.lastBut.setAttribute("title",a)}),this.firstBut.addEventListener("click",()=>{this.setPage(1)}),this.prevBut.addEventListener("click",()=>{this.previousPage()}),this.nextBut.addEventListener("click",()=>{this.nextPage()}),this.lastBut.addEventListener("click",()=>{this.setPage(this.max)}),this.table.options.paginationElement&&(this.element=this.table.options.paginationElement),this.pageSizeSelect&&(n=document.createElement("label"),this.langBind("pagination|page_size",a=>{this.pageSizeSelect.setAttribute("aria-label",a),this.pageSizeSelect.setAttribute("title",a),n.innerHTML=a}),this.element.appendChild(n),this.element.appendChild(this.pageSizeSelect),this.pageSizeSelect.addEventListener("change",a=>{this.setPageSize("true"==this.pageSizeSelect.value||this.pageSizeSelect.value),this.setPage(1)})),this.element.appendChild(this.firstBut),this.element.appendChild(this.prevBut),this.element.appendChild(this.pagesElement),this.element.appendChild(this.nextBut),this.element.appendChild(this.lastBut),!this.table.options.paginationElement&&!e&&this.table.footerManager.append(this.element,this),this.page=this.table.options.paginationInitialPage,this.count=this.table.options.paginationButtonCount),this.mode=this.table.options.paginationMode}initializeProgressive(e){this.initializePaginator(!0),this.mode="progressive_"+e,this.progressiveLoad=!0}trackChanges(){this.dispatch("page-changed")}setDisplayIndex(e){this.displayIndex=e}getDisplayIndex(){return this.displayIndex}setMaxRows(e){this.max=e?!0===this.size?1:Math.ceil(e/this.size):1,this.page>this.max&&(this.page=this.max)}reset(e){this.initialLoad||("local"==this.mode||e)&&(this.page=1)}setMaxPage(e){e=parseInt(e),this.max=e||1,this.page>this.max&&(this.page=this.max,this.trigger())}setPage(e){switch(e){case"first":return this.setPage(1);case"prev":return this.previousPage();case"next":return this.nextPage();case"last":return this.setPage(this.max)}return(e=parseInt(e))>0&&e<=this.max||"local"!==this.mode?(this.page=e,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Requested page is out of range of 1 - "+this.max+":",e),Promise.reject())}setPageToRow(e){var a=this.table.rowManager.getDisplayRows(this.displayIndex-1).indexOf(e);if(a>-1){var c=!0===this.size?1:Math.ceil((a+1)/this.size);return this.setPage(c)}return console.warn("Pagination Error - Requested row is not visible"),Promise.reject()}setPageSize(e){!0!==e&&(e=parseInt(e)),e>0&&(this.size=e),this.pageSizeSelect&&this.generatePageSizeSelectList(),this.trackChanges()}_setPageButtons(){let e=Math.floor((this.count-1)/2),n=Math.ceil((this.count-1)/2),a=this.max-this.page+e+1<this.count?this.max-this.count+1:Math.max(this.page-e,1),c=this.page<=n?Math.min(this.count,this.max):Math.min(this.page+n,this.max);for(;this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(let d=a;d<=c;d++)d>0&&d<=this.max&&this.pagesElement.appendChild(this._generatePageButton(d));this.footerRedraw()}_generatePageButton(e){var n=document.createElement("button");return n.classList.add("tabulator-page"),e==this.page&&n.classList.add("active"),n.setAttribute("type","button"),n.setAttribute("role","button"),this.langBind("pagination|page_title",a=>{n.setAttribute("aria-label",a+" "+e),n.setAttribute("title",a+" "+e)}),n.setAttribute("data-page",e),n.textContent=e,n.addEventListener("click",a=>{this.setPage(e)}),n}previousPage(){return this.page>1?(this.page--,this.trackChanges(),this.trigger()):(console.warn("Pagination Error - Previous page would be less than page 1:",0),Promise.reject())}nextPage(){return this.page<this.max?(this.page++,this.trackChanges(),this.trigger()):(this.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+this.max+":",this.max+1),Promise.reject())}getPage(){return this.page}getPageMax(){return this.max}getPageSize(e){return this.size}getMode(){return this.mode}getRows(e){var n,a,c;if("local"==this.mode){n=[],this.setMaxRows(e.length),!0===this.size?(a=0,c=e.length):c=(a=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(let d=a;d<c;d++)e[d]&&n.push(e[d]);return n}return this._setPageButtons(),e.slice(0)}trigger(){var e;switch(this.mode){case"local":return e=this.table.rowManager.scrollLeft,this.refreshData(),this.table.rowManager.scrollHorizontal(e),this.dispatchExternal("pageLoaded",this.getPage()),Promise.resolve();case"remote":return this.dataChanging=!0,this.reloadData(null).finally(()=>{this.dataChanging=!1});case"progressive_load":case"progressive_scroll":return this.reloadData(null,!0);default:return console.warn("Pagination Error - no such pagination mode:",this.mode),Promise.reject()}}_parseRemoteData(e){if(void 0===e.last_page&&console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.last_page+"' property"),e.data){if(this.max=parseInt(e.last_page)||1,this.progressiveLoad){switch(this.mode){case"progressive_load":1==this.page?this.table.rowManager.setData(e.data,!1,1==this.page):this.table.rowManager.addRows(e.data),this.page<this.max&&setTimeout(()=>{this.nextPage()},this.table.options.progressiveLoadDelay);break;case"progressive_scroll":e=this.table.rowManager.getData().concat(e.data),this.table.rowManager.setData(e,1!==this.page,1==this.page),this.table.rowManager.element.scrollHeight<=this.table.rowManager.element.clientHeight+(this.table.options.progressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight)&&setTimeout(()=>{this.nextPage()})}return!1}this.dispatchExternal("pageLoaded",this.getPage())}else console.warn("Remote Pagination Error - Server response missing '"+this.dataReceivedNames.data+"' property");return e.data}footerRedraw(){var e=this.table.footerManager.element;Math.ceil(e.clientWidth)-e.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(e.clientWidth)-e.scrollWidth<0&&(this.pagesElement.style.display="none"))}}return r.moduleName="page",r})();var C9={local:function(r,t){var e=localStorage.getItem(r+"-"+t);return!!e&&JSON.parse(e)},cookie:function(r,t){var c,d,e=document.cookie,n=r+"-"+t,a=e.indexOf(n+"=");return a>-1&&((c=(e=e.substr(a)).indexOf(";"))>-1&&(e=e.substr(0,c)),d=e.replace(n+"=","")),!!d&&JSON.parse(d)}},E9={local:function(r,t,e){localStorage.setItem(r+"-"+t,JSON.stringify(e))},cookie:function(r,t,e){var n=new Date;n.setDate(n.getDate()+1e4),document.cookie=r+"-"+t+"="+JSON.stringify(e)+"; expires="+n.toUTCString()}};let T9=(()=>{class r extends si{constructor(e){super(e),this.mode="",this.id="",this.defWatcherBlock=!1,this.config={},this.readFunc=!1,this.writeFunc=!1,this.registerTableOption("persistence",!1),this.registerTableOption("persistenceID",""),this.registerTableOption("persistenceMode",!0),this.registerTableOption("persistenceReaderFunc",!1),this.registerTableOption("persistenceWriterFunc",!1)}localStorageTest(){var e="_tabulator_test";try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(n){return!1}}initialize(){if(this.table.options.persistence){var a,e=this.table.options.persistenceMode,n=this.table.options.persistenceID;this.mode=!0!==e?e:this.localStorageTest()?"local":"cookie",this.table.options.persistenceReaderFunc?"function"==typeof this.table.options.persistenceReaderFunc?this.readFunc=this.table.options.persistenceReaderFunc:r.readers[this.table.options.persistenceReaderFunc]?this.readFunc=r.readers[this.table.options.persistenceReaderFunc]:console.warn("Persistence Read Error - invalid reader set",this.table.options.persistenceReaderFunc):r.readers[this.mode]?this.readFunc=r.readers[this.mode]:console.warn("Persistence Read Error - invalid reader set",this.mode),this.table.options.persistenceWriterFunc?"function"==typeof this.table.options.persistenceWriterFunc?this.writeFunc=this.table.options.persistenceWriterFunc:r.writers[this.table.options.persistenceWriterFunc]?this.writeFunc=r.writers[this.table.options.persistenceWriterFunc]:console.warn("Persistence Write Error - invalid reader set",this.table.options.persistenceWriterFunc):r.writers[this.mode]?this.writeFunc=r.writers[this.mode]:console.warn("Persistence Write Error - invalid writer set",this.mode),this.id="tabulator-"+(n||this.table.element.getAttribute("id")||""),this.config={sort:!0===this.table.options.persistence||this.table.options.persistence.sort,filter:!0===this.table.options.persistence||this.table.options.persistence.filter,group:!0===this.table.options.persistence||this.table.options.persistence.group,page:!0===this.table.options.persistence||this.table.options.persistence.page,columns:!0===this.table.options.persistence?["title","width","visible"]:this.table.options.persistence.columns},this.config.page&&(a=this.retreiveData("page"))&&(void 0!==a.paginationSize&&(!0===this.config.page||this.config.page.size)&&(this.table.options.paginationSize=a.paginationSize),void 0!==a.paginationInitialPage&&(!0===this.config.page||this.config.page.page)&&(this.table.options.paginationInitialPage=a.paginationInitialPage)),this.config.group&&(a=this.retreiveData("group"))&&(void 0!==a.groupBy&&(!0===this.config.group||this.config.group.groupBy)&&(this.table.options.groupBy=a.groupBy),void 0!==a.groupStartOpen&&(!0===this.config.group||this.config.group.groupStartOpen)&&(this.table.options.groupStartOpen=a.groupStartOpen),void 0!==a.groupHeader&&(!0===this.config.group||this.config.group.groupHeader)&&(this.table.options.groupHeader=a.groupHeader)),this.config.columns&&(this.table.options.columns=this.load("columns",this.table.options.columns),this.subscribe("column-init",this.initializeColumn.bind(this)),this.subscribe("column-show",this.save.bind(this,"columns")),this.subscribe("column-hide",this.save.bind(this,"columns")),this.subscribe("column-moved",this.save.bind(this,"columns")),this.subscribe("table-built",this.tableBuilt.bind(this),0)),this.subscribe("table-redraw",this.tableRedraw.bind(this)),this.subscribe("filter-changed",this.eventSave.bind(this,"filter")),this.subscribe("sort-changed",this.eventSave.bind(this,"sort")),this.subscribe("group-changed",this.eventSave.bind(this,"group")),this.subscribe("page-changed",this.eventSave.bind(this,"page")),this.subscribe("column-resized",this.eventSave.bind(this,"columns")),this.subscribe("layout-refreshed",this.eventSave.bind(this,"columns"))}this.registerTableFunction("getColumnLayout",this.getColumnLayout.bind(this)),this.registerTableFunction("setColumnLayout",this.setColumnLayout.bind(this))}eventSave(e){this.config[e]&&this.save(e)}tableBuilt(){var n,a;this.config.sort&&(n=this.load("sort"))&&(this.table.initialSort=n),this.config.filter&&(a=this.load("filter"))&&(this.table.initialFilter=a)}tableRedraw(e){e&&this.config.columns&&this.save("columns")}getColumnLayout(){return this.parseColumns(this.table.columnManager.getColumns())}setColumnLayout(e){return this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns,e)),!0}initializeColumn(e){var n;this.config.columns&&(this.defWatcherBlock=!0,n=e.getDefinition(),(!0===this.config.columns?Object.keys(n):this.config.columns).forEach(c=>{var d=Object.getOwnPropertyDescriptor(n,c),p=n[c];d&&Object.defineProperty(n,c,{set:function(f){p=f,this.defWatcherBlock||this.save("columns"),d.set&&d.set(f)},get:function(){return d.get&&d.get(),p}})}),this.defWatcherBlock=!1)}load(e,n){var a=this.retreiveData(e);return n&&(a=a?this.mergeDefinition(n,a):n),a}retreiveData(e){return!!this.readFunc&&this.readFunc(this.id,e)}mergeDefinition(e,n){var a=[];return(n=n||[]).forEach((c,d)=>{var f,p=this._findColumn(e,c);p&&(!0===this.config.columns||null==this.config.columns?(f=Object.keys(p)).push("width"):f=this.config.columns,f.forEach(v=>{"columns"!==v&&void 0!==c[v]&&(p[v]=c[v])}),p.columns&&(p.columns=this.mergeDefinition(p.columns,c.columns)),a.push(p))}),e.forEach((c,d)=>{this._findColumn(n,c)||(a.length>d?a.splice(d,0,c):a.push(c))}),a}_findColumn(e,n){var a=n.columns?"group":n.field?"field":"object";return e.find(function(c){switch(a){case"group":return c.title===n.title&&c.columns.length===n.columns.length;case"field":return c.field===n.field;case"object":return c===n}})}save(e){var n={};switch(e){case"columns":n=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":n=this.table.modules.filter.getFilters();break;case"sort":n=this.validateSorters(this.table.modules.sort.getSort());break;case"group":n=this.getGroupConfig();break;case"page":n=this.getPageConfig()}this.writeFunc&&this.writeFunc(this.id,e,n)}validateSorters(e){return e.forEach(function(n){n.column=n.field,delete n.field}),e}getGroupConfig(){var e={};return this.config.group&&((!0===this.config.group||this.config.group.groupBy)&&(e.groupBy=this.table.options.groupBy),(!0===this.config.group||this.config.group.groupStartOpen)&&(e.groupStartOpen=this.table.options.groupStartOpen),(!0===this.config.group||this.config.group.groupHeader)&&(e.groupHeader=this.table.options.groupHeader)),e}getPageConfig(){var e={};return this.config.page&&((!0===this.config.page||this.config.page.size)&&(e.paginationSize=this.table.modules.page.getPageSize()),(!0===this.config.page||this.config.page.page)&&(e.paginationInitialPage=this.table.modules.page.getPage())),e}parseColumns(e){var n=[],a=["headerContextMenu","headerMenu","contextMenu","clickMenu"];return e.forEach(c=>{var f,d={},p=c.getDefinition();c.isGroup?(d.title=p.title,d.columns=this.parseColumns(c.getColumns())):(d.field=c.getField(),!0===this.config.columns||null==this.config.columns?(f=Object.keys(p)).push("width"):f=this.config.columns,f.forEach(v=>{switch(v){case"width":d.width=c.getWidth();break;case"visible":d.visible=c.visible;break;default:"function"!=typeof p[v]&&-1===a.indexOf(v)&&(d[v]=p[v])}})),n.push(d)}),n}}return r.moduleName="persistence",r.readers=C9,r.writers=E9,r})(),w9=(()=>{class r extends si{constructor(e){super(e),this.element=!1,this.manualBlock=!1,this.registerTableOption("printAsHtml",!1),this.registerTableOption("printFormatter",!1),this.registerTableOption("printHeader",!1),this.registerTableOption("printFooter",!1),this.registerTableOption("printStyled",!0),this.registerTableOption("printRowRange","visible"),this.registerTableOption("printConfig",{}),this.registerColumnOption("print"),this.registerColumnOption("titlePrint")}initialize(){this.table.options.printAsHtml&&(window.addEventListener("beforeprint",this.replaceTable.bind(this)),window.addEventListener("afterprint",this.cleanup.bind(this))),this.registerTableFunction("print",this.printFullscreen.bind(this))}replaceTable(){this.manualBlock||(this.element=document.createElement("div"),this.element.classList.add("tabulator-print-table"),this.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig,this.table.options.printStyled,this.table.options.printRowRange,"print")),this.table.element.style.display="none",this.table.element.parentNode.insertBefore(this.element,this.table.element))}cleanup(){document.body.classList.remove("tabulator-print-fullscreen-hide"),this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.table.element.style.display="")}printFullscreen(e,n,a){var C,M,c=window.scrollX,d=window.scrollY,p=document.createElement("div"),f=document.createElement("div"),v=this.table.modules.export.genereateTable(void 0!==a?a:this.table.options.printConfig,void 0!==n?n:this.table.options.printStyled,e||this.table.options.printRowRange,"print");this.manualBlock=!0,this.element=document.createElement("div"),this.element.classList.add("tabulator-print-fullscreen"),this.table.options.printHeader&&(p.classList.add("tabulator-print-header"),"string"==typeof(C="function"==typeof this.table.options.printHeader?this.table.options.printHeader.call(this.table):this.table.options.printHeader)?p.innerHTML=C:p.appendChild(C),this.element.appendChild(p)),this.element.appendChild(v),this.table.options.printFooter&&(f.classList.add("tabulator-print-footer"),"string"==typeof(M="function"==typeof this.table.options.printFooter?this.table.options.printFooter.call(this.table):this.table.options.printFooter)?f.innerHTML=M:f.appendChild(M),this.element.appendChild(f)),document.body.classList.add("tabulator-print-fullscreen-hide"),document.body.appendChild(this.element),this.table.options.printFormatter&&this.table.options.printFormatter(this.element,v),window.print(),this.cleanup(),window.scrollTo(c,d),this.manualBlock=!1}}return r.moduleName="print",r})(),S9=(()=>{class r extends si{constructor(e){super(e),this.data=!1,this.blocked=!1,this.origFuncs={},this.currentVersion=0,this.registerTableOption("reactiveData",!1)}initialize(){this.table.options.reactiveData&&(this.subscribe("cell-value-save-before",this.block.bind(this)),this.subscribe("cell-value-save-after",this.unblock.bind(this)),this.subscribe("row-data-save-before",this.block.bind(this)),this.subscribe("row-data-save-after",this.unblock.bind(this)),this.subscribe("row-data-init-after",this.watchRow.bind(this)),this.subscribe("data-processing",this.watchData.bind(this)),this.subscribe("table-destroy",this.unwatchData.bind(this)))}watchData(e){var a,n=this;this.currentVersion++,a=this.currentVersion,this.unwatchData(),this.data=e,this.origFuncs.push=e.push,Object.defineProperty(this.data,"push",{enumerable:!1,configurable:!0,value:function(){var c=Array.from(arguments);return!n.blocked&&a===n.currentVersion&&c.forEach(d=>{n.table.rowManager.addRowActual(d,!1)}),n.origFuncs.push.apply(e,arguments)}}),this.origFuncs.unshift=e.unshift,Object.defineProperty(this.data,"unshift",{enumerable:!1,configurable:!0,value:function(){var c=Array.from(arguments);return!n.blocked&&a===n.currentVersion&&c.forEach(d=>{n.table.rowManager.addRowActual(d,!0)}),n.origFuncs.unshift.apply(e,arguments)}}),this.origFuncs.shift=e.shift,Object.defineProperty(this.data,"shift",{enumerable:!1,configurable:!0,value:function(){var c;return!n.blocked&&a===n.currentVersion&&n.data.length&&(c=n.table.rowManager.getRowFromDataObject(n.data[0]))&&c.deleteActual(),n.origFuncs.shift.call(e)}}),this.origFuncs.pop=e.pop,Object.defineProperty(this.data,"pop",{enumerable:!1,configurable:!0,value:function(){var c;return!n.blocked&&a===n.currentVersion&&n.data.length&&(c=n.table.rowManager.getRowFromDataObject(n.data[n.data.length-1]))&&c.deleteActual(),n.origFuncs.pop.call(e)}}),this.origFuncs.splice=e.splice,Object.defineProperty(this.data,"splice",{enumerable:!1,configurable:!0,value:function(){var v,c=Array.from(arguments),d=c[0]<0?e.length+c[0]:c[0],p=c[1],f=!!c[2]&&c.slice(2);if(!n.blocked&&a===n.currentVersion){if(f&&((v=!!e[d]&&n.table.rowManager.getRowFromDataObject(e[d]))?f.forEach(M=>{n.table.rowManager.addRowActual(M,!0,v,!0)}):(f=f.slice().reverse()).forEach(M=>{n.table.rowManager.addRowActual(M,!0,!1,!0)})),0!==p){var C=e.slice(d,void 0===c[1]?c[1]:d+p);C.forEach((M,O)=>{var P=n.table.rowManager.getRowFromDataObject(M);P&&P.deleteActual(O!==C.length-1)})}(f||0!==p)&&n.table.rowManager.reRenderInPosition()}return n.origFuncs.splice.apply(e,arguments)}})}unwatchData(){if(!1!==this.data)for(var e in this.origFuncs)Object.defineProperty(this.data,e,{enumerable:!0,configurable:!0,writable:!0,value:this.origFuncs.key})}watchRow(e){var n=e.getData();for(var a in this.blocked=!0,n)this.watchKey(e,n,a);this.table.options.dataTree&&this.watchTreeChildren(e),this.blocked=!1}watchTreeChildren(e){var n=e.getData()[this.table.options.dataTreeChildField],a={};function c(){this.table.modules.dataTree.initializeRow(e),this.table.modules.dataTree.layoutRow(e),this.table.rowManager.refreshActiveData("tree",!1,!0)}n&&(a.push=n.push,Object.defineProperty(n,"push",{enumerable:!1,configurable:!0,value:()=>{var d=a.push.apply(n,arguments);return c(),d}}),a.unshift=n.unshift,Object.defineProperty(n,"unshift",{enumerable:!1,configurable:!0,value:()=>{var d=a.unshift.apply(n,arguments);return c(),d}}),a.shift=n.shift,Object.defineProperty(n,"shift",{enumerable:!1,configurable:!0,value:()=>{var d=a.shift.call(n);return c(),d}}),a.pop=n.pop,Object.defineProperty(n,"pop",{enumerable:!1,configurable:!0,value:()=>{var d=a.pop.call(n);return c(),d}}),a.splice=n.splice,Object.defineProperty(n,"splice",{enumerable:!1,configurable:!0,value:()=>{var d=a.splice.apply(n,arguments);return c(),d}}))}watchKey(e,n,a){var c=Object.getOwnPropertyDescriptor(n,a),d=n[a],p=this.currentVersion;Object.defineProperty(n,a,{set:f=>{if(d=f,!this.blocked&&p===this.currentVersion){var v={};v[a]=f,e.updateData(v)}c.set&&c.set(f)},get:()=>(c.get&&c.get(),d)})}unwatchRow(e){var n=e.getData();for(var a in n)Object.defineProperty(n,a,{value:n[a]})}block(){this.blocked=!0}unblock(){this.blocked=!1}}return r.moduleName="reactiveData",r})(),D9=(()=>{class r extends si{constructor(e){super(e),this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null,this.registerColumnOption("resizable",!0)}initialize(){this.subscribe("cell-layout",this.layoutCellHandles.bind(this)),this.subscribe("column-init",this.layoutColumnHeader.bind(this))}layoutCellHandles(e){"row"===e.row.type&&this.initializeColumn("cell",e.column,e.element)}layoutColumnHeader(e){this.initializeColumn("header",e,e.element)}initializeColumn(e,n,a){var c=this,p=n.definition.resizable;if("header"===e&&(n.modules.resize={variableHeight:"textarea"==n.definition.formatter||n.definition.variableHeight}),!0===p||p==e){var f=document.createElement("div");f.className="tabulator-col-resize-handle";var v=document.createElement("div");v.className="tabulator-col-resize-handle prev",f.addEventListener("click",function(O){O.stopPropagation()});var C=function(O){var P=n.getLastColumn();P&&c._checkResizability(P)&&(c.startColumn=n,c._mouseDown(O,P,f))};f.addEventListener("mousedown",C),f.addEventListener("touchstart",C,{passive:!0}),f.addEventListener("dblclick",function(O){var P=n.getLastColumn();P&&c._checkResizability(P)&&(O.stopPropagation(),P.reinitializeWidth(!0))}),v.addEventListener("click",function(O){O.stopPropagation()});var M=function(O){var P,W,ne;(P=n.getFirstColumn())&&(ne=(W=c.table.columnManager.findColumnIndex(P))>0&&c.table.columnManager.getColumnByIndex(W-1))&&c._checkResizability(ne)&&(c.startColumn=n,c._mouseDown(O,ne,v))};v.addEventListener("mousedown",M),v.addEventListener("touchstart",M,{passive:!0}),v.addEventListener("dblclick",function(O){var P,W,ne;(P=n.getFirstColumn())&&(ne=(W=c.table.columnManager.findColumnIndex(P))>0&&c.table.columnManager.getColumnByIndex(W-1))&&c._checkResizability(ne)&&(O.stopPropagation(),ne.reinitializeWidth(!0))}),a.appendChild(f),a.appendChild(v)}}_checkResizability(e){return e.definition.resizable}_mouseDown(e,n,a){var c=this;function d(f){n.setWidth(c.table.rtl?c.startWidth-((void 0===f.screenX?f.touches[0].screenX:f.screenX)-c.startX):c.startWidth+((void 0===f.screenX?f.touches[0].screenX:f.screenX)-c.startX)),c.table.columnManager.renderer.rerenderColumns(!0),!c.table.browserSlow&&n.modules.resize&&n.modules.resize.variableHeight&&n.checkCellHeights()}function p(f){c.startColumn.modules.edit&&(c.startColumn.modules.edit.blocked=!1),c.table.browserSlow&&n.modules.resize&&n.modules.resize.variableHeight&&n.checkCellHeights(),document.body.removeEventListener("mouseup",p),document.body.removeEventListener("mousemove",d),a.removeEventListener("touchmove",d),a.removeEventListener("touchend",p),c.table.element.classList.remove("tabulator-block-select"),c.dispatch("column-resized",n),c.table.externalEvents.dispatch("columnResized",n.getComponent())}c.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),c.startColumn.modules.edit&&(c.startColumn.modules.edit.blocked=!0),c.startX=void 0===e.screenX?e.touches[0].screenX:e.screenX,c.startWidth=n.getWidth(),document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",p),a.addEventListener("touchmove",d,{passive:!0}),a.addEventListener("touchend",p)}}return r.moduleName="resizeColumns",r})(),M9=(()=>{class r extends si{constructor(e){super(e),this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null,this.registerTableOption("resizableRows",!1)}initialize(){this.table.options.resizableRows&&this.subscribe("row-layout-after",this.initializeRow.bind(this))}initializeRow(e){var n=this,a=e.getElement(),c=document.createElement("div");c.className="tabulator-row-resize-handle";var d=document.createElement("div");d.className="tabulator-row-resize-handle prev",c.addEventListener("click",function(v){v.stopPropagation()});var p=function(v){n.startRow=e,n._mouseDown(v,e,c)};c.addEventListener("mousedown",p),c.addEventListener("touchstart",p,{passive:!0}),d.addEventListener("click",function(v){v.stopPropagation()});var f=function(v){var C=n.table.rowManager.prevDisplayRow(e);C&&(n.startRow=C,n._mouseDown(v,C,d))};d.addEventListener("mousedown",f),d.addEventListener("touchstart",f,{passive:!0}),a.appendChild(c),a.appendChild(d)}_mouseDown(e,n,a){var c=this;function d(f){n.setHeight(c.startHeight+((void 0===f.screenY?f.touches[0].screenY:f.screenY)-c.startY))}function p(f){document.body.removeEventListener("mouseup",d),document.body.removeEventListener("mousemove",d),a.removeEventListener("touchmove",d),a.removeEventListener("touchend",p),c.table.element.classList.remove("tabulator-block-select"),this.dispatchExternal("rowResized",n.getComponent())}c.table.element.classList.add("tabulator-block-select"),e.stopPropagation(),c.startY=void 0===e.screenY?e.touches[0].screenY:e.screenY,c.startHeight=n.getHeight(),document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",p),a.addEventListener("touchmove",d,{passive:!0}),a.addEventListener("touchend",p)}}return r.moduleName="resizeRows",r})(),R9=(()=>{class r extends si{constructor(e){super(e),this.binding=!1,this.observer=!1,this.containerObserver=!1,this.tableHeight=0,this.tableWidth=0,this.containerHeight=0,this.containerWidth=0,this.autoResize=!1,this.registerTableOption("autoResize",!0)}initialize(){if(this.table.options.autoResize){var n,e=this.table;this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),"undefined"!=typeof ResizeObserver&&"virtual"===e.rowManager.getRenderMode()?(this.autoResize=!0,this.observer=new ResizeObserver(a=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var c=Math.floor(a[0].contentRect.height),d=Math.floor(a[0].contentRect.width);(this.tableHeight!=c||this.tableWidth!=d)&&(this.tableHeight=c,this.tableWidth=d,e.element.parentNode&&(this.containerHeight=e.element.parentNode.clientHeight,this.containerWidth=e.element.parentNode.clientWidth),this.table.columnManager.renderer.rerenderColumns(!0),e.redraw())}}),this.observer.observe(e.element),n=window.getComputedStyle(e.element),this.table.element.parentNode&&!this.table.rowManager.fixedHeight&&(n.getPropertyValue("max-height")||n.getPropertyValue("min-height"))&&(this.containerObserver=new ResizeObserver(a=>{if(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell){var c=Math.floor(a[0].contentRect.height),d=Math.floor(a[0].contentRect.width);(this.containerHeight!=c||this.containerWidth!=d)&&(this.containerHeight=c,this.containerWidth=d,this.tableHeight=e.element.clientHeight,this.tableWidth=e.element.clientWidth),e.columnManager.renderer.rerenderColumns(!0),e.redraw()}}),this.containerObserver.observe(this.table.element.parentNode)),this.subscribe("table-resize",this.tableResized.bind(this))):(this.binding=function(){(!e.browserMobile||e.browserMobile&&!e.modules.edit.currentCell)&&(e.columnManager.renderer.rerenderColumns(!0),e.redraw())},window.addEventListener("resize",this.binding)),this.subscribe("table-destroy",this.clearBindings.bind(this))}}tableResized(){this.table.rowManager.redraw()}clearBindings(){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element),this.containerObserver&&this.containerObserver.unobserve(this.table.element.parentNode)}}return r.moduleName="resizeTable",r})(),I9=(()=>{class r extends si{constructor(e){super(e),this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0,this.collapseHandleColumn=!1,this.registerTableOption("responsiveLayout",!1),this.registerTableOption("responsiveLayoutCollapseStartOpen",!0),this.registerTableOption("responsiveLayoutCollapseUseFormatters",!0),this.registerTableOption("responsiveLayoutCollapseFormatter",!1),this.registerColumnOption("responsive")}initialize(){this.table.options.responsiveLayout&&(this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("column-show",this.updateColumnVisibility.bind(this)),this.subscribe("column-hide",this.updateColumnVisibility.bind(this)),this.subscribe("columns-loaded",this.initializeResponsivity.bind(this)),this.subscribe("column-moved",this.initializeResponsivity.bind(this)),this.subscribe("column-add",this.initializeResponsivity.bind(this)),this.subscribe("column-delete",this.initializeResponsivity.bind(this)),this.subscribe("table-redrawing",this.tableRedraw.bind(this)),"collapse"===this.table.options.responsiveLayout&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-layout",this.layoutRow.bind(this))))}tableRedraw(e){-1===["fitColumns","fitDataStretch"].indexOf(this.layoutMode())&&(e||this.update())}initializeResponsivity(){var e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(n,a){n.modules.responsive&&n.modules.responsive.order&&n.modules.responsive.visible&&(n.modules.responsive.index=a,e.push(n),!n.visible&&"collapse"===self.mode&&self.hiddenColumns.push(n))}),e=(e=e.reverse()).sort(function(n,a){return a.modules.responsive.order-n.modules.responsive.order||a.modules.responsive.index-n.modules.responsive.index}),this.columns=e,"collapse"===this.mode&&this.generateCollapsedContent();for(let n of this.table.columnManager.columnsByIndex)if("responsiveCollapse"==n.definition.formatter){this.collapseHandleColumn=n;break}this.collapseHandleColumn&&(this.hiddenColumns.length?this.collapseHandleColumn.show():this.collapseHandleColumn.hide())}initializeColumn(e){var n=e.getDefinition();e.modules.responsive={order:void 0===n.responsive?1:n.responsive,visible:!1!==n.visible}}initializeRow(e){var n;"calc"!==e.type&&((n=document.createElement("div")).classList.add("tabulator-responsive-collapse"),e.modules.responsiveLayout={element:n,open:this.collapseStartOpen},this.collapseStartOpen||(n.style.display="none"))}layoutRow(e){var n=e.getElement();e.modules.responsiveLayout&&(n.appendChild(e.modules.responsiveLayout.element),this.generateCollapsedRowContent(e))}updateColumnVisibility(e,n){!n&&e.modules.responsive&&(e.modules.responsive.visible=e.visible,this.initialize())}hideColumn(e){var n=this.hiddenColumns.length;e.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(e),this.generateCollapsedContent(),this.collapseHandleColumn&&!n&&this.collapseHandleColumn.show())}showColumn(e){var n;e.show(!1,!0),e.setWidth(e.getWidth()),"collapse"===this.mode&&((n=this.hiddenColumns.indexOf(e))>-1&&this.hiddenColumns.splice(n,1),this.generateCollapsedContent(),this.collapseHandleColumn&&!this.hiddenColumns.length&&this.collapseHandleColumn.hide())}update(){for(var e=this,n=!0;n;){let a="fitColumns"==e.table.modules.layout.getMode()?e.table.columnManager.getFlexBaseWidth():e.table.columnManager.getWidth(),c=(e.table.options.headerVisible?e.table.columnManager.element.clientWidth:e.table.element.clientWidth)-a;if(c<0){let d=e.columns[e.index];d?(e.hideColumn(d),e.index++):n=!1}else{let d=e.columns[e.index-1];d&&c>0&&c>=d.getWidth()?(e.showColumn(d),e.index--):n=!1}e.table.rowManager.activeRowsCount||e.table.rowManager.renderEmptyScroll()}}generateCollapsedContent(){var e=this;this.table.rowManager.getDisplayRows().forEach(function(a){e.generateCollapsedRowContent(a)})}generateCollapsedRowContent(e){var n,a;if(e.modules.responsiveLayout){for(n=e.modules.responsiveLayout.element;n.firstChild;)n.removeChild(n.firstChild);(a=this.collapseFormatter(this.generateCollapsedRowData(e)))&&n.appendChild(a)}}generateCollapsedRowData(e){var d,n=this,a=e.getData(),c=[];return this.hiddenColumns.forEach(function(p){var f=p.getFieldValue(a);p.definition.title&&p.field&&(p.modules.format&&n.table.options.responsiveLayoutCollapseUseFormatters?(d={value:!1,data:{},getValue:function(){return f},getData:function(){return a},getElement:function(){return document.createElement("div")},getRow:function(){return e.getComponent()},getColumn:function(){return p.getComponent()}},c.push({field:p.field,title:p.definition.title,value:p.modules.format.formatter.call(n.table.modules.format,d,p.modules.format.params,function(C){C()})})):c.push({field:p.field,title:p.definition.title,value:f}))}),c}formatCollapsedData(e){var n=document.createElement("table");return e.forEach(function(a){var f,c=document.createElement("tr"),d=document.createElement("td"),p=document.createElement("td"),v=document.createElement("strong");d.appendChild(v),this.langBind("columns|"+a.field,function(C){v.innerText=C||a.title}),a.value instanceof Node?((f=document.createElement("div")).appendChild(a.value),p.appendChild(f)):p.innerHTML=a.value,c.appendChild(d),c.appendChild(p),n.appendChild(c)},this),Object.keys(e).length?n:""}}return r.moduleName="responsiveLayout",r})();function _w(r,t,e,n,a,c,d){var p=window.DateTime||luxon.DateTime,f=d.format||"dd/MM/yyyy HH:mm:ss",v=d.alignEmptyValues,C=0;if(void 0!==p){if(r=p.fromFormat(r,f),t=p.fromFormat(t,f),r.isValid){if(t.isValid)return r-t;C=1}else C=t.isValid?-1:0;return("top"===v&&"desc"===c||"bottom"===v&&"asc"===c)&&(C*=-1),C}console.error("Sort Error - 'datetime' sorter is dependant on luxon.js")}var V9={number:function(r,t,e,n,a,c,d){var p=d.alignEmptyValues,f=d.decimalSeparator,v=d.thousandSeparator,C=0;if(r=String(r),t=String(t),v&&(r=r.split(v).join(""),t=t.split(v).join("")),f&&(r=r.split(f).join("."),t=t.split(f).join(".")),r=parseFloat(r),t=parseFloat(t),isNaN(r))C=isNaN(t)?0:-1;else{if(!isNaN(t))return r-t;C=1}return("top"===p&&"desc"===c||"bottom"===p&&"asc"===c)&&(C*=-1),C},string:function(r,t,e,n,a,c,d){var v,p=d.alignEmptyValues,f=0;if(r){if(t){switch(typeof d.locale){case"boolean":d.locale&&(v=this.langLocale());break;case"string":v=d.locale}return String(r).toLowerCase().localeCompare(String(t).toLowerCase(),v)}f=1}else f=t?-1:0;return("top"===p&&"desc"===c||"bottom"===p&&"asc"===c)&&(f*=-1),f},date:function(r,t,e,n,a,c,d){return d.format||(d.format="dd/MM/yyyy"),_w.call(this,r,t,e,n,a,c,d)},time:function(r,t,e,n,a,c,d){return d.format||(d.format="HH:mm"),_w.call(this,r,t,e,n,a,c,d)},datetime:_w,boolean:function(r,t,e,n,a,c,d){return(!0===r||"true"===r||"True"===r||1===r?1:0)-(!0===t||"true"===t||"True"===t||1===t?1:0)},array:function(r,t,e,n,a,c,d){var v=d.type||"length",C=d.alignEmptyValues,M=0;function O(P){switch(v){case"length":return P.length;case"sum":return P.reduce(function(W,ne){return W+ne});case"max":return Math.max.apply(null,P);case"min":return Math.min.apply(null,P);case"avg":return P.reduce(function(W,ne){return W+ne})/P.length}}if(Array.isArray(r)){if(Array.isArray(t))return(r?O(r):0)-(t?O(t):0);C=1}else C=Array.isArray(t)?-1:0;return("top"===C&&"desc"===c||"bottom"===C&&"asc"===c)&&(M*=-1),M},exists:function(r,t,e,n,a,c,d){return(void 0===r?0:1)-(void 0===t?0:1)},alphanum:function(r,t,e,n,a,c,d){var p,f,v,C,O,M=0,P=/(\d+)|(\D+)/g,W=/\d/,ne=d.alignEmptyValues,K=0;if(r||0===r){if(t||0===t){if(isFinite(r)&&isFinite(t))return r-t;if((p=String(r).toLowerCase())===(f=String(t).toLowerCase()))return 0;if(!W.test(p)||!W.test(f))return p>f?1:-1;for(p=p.match(P),f=f.match(P),O=p.length>f.length?f.length:p.length;M<O;)if((v=p[M])!==(C=f[M++]))return isFinite(v)&&isFinite(C)?("0"===v.charAt(0)&&(v="."+v),"0"===C.charAt(0)&&(C="."+C),v-C):v>C?1:-1;return p.length>f.length}K=1}else K=t||0===t?-1:0;return("top"===ne&&"desc"===c||"bottom"===ne&&"asc"===c)&&(K*=-1),K}},U9={integer:function(r,t,e){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&Math.floor(t)===t},float:function(r,t,e){return""===t||null==t||"number"==typeof(t=Number(t))&&isFinite(t)&&t%1!=0},numeric:function(r,t,e){return""===t||null==t||!isNaN(t)},string:function(r,t,e){return""===t||null==t||isNaN(t)},max:function(r,t,e){return""===t||null==t||parseFloat(t)<=e},min:function(r,t,e){return""===t||null==t||parseFloat(t)>=e},starts:function(r,t,e){return""===t||null==t||String(t).toLowerCase().startsWith(String(e).toLowerCase())},ends:function(r,t,e){return""===t||null==t||String(t).toLowerCase().endsWith(String(e).toLowerCase())},minLength:function(r,t,e){return""===t||null==t||String(t).length>=e},maxLength:function(r,t,e){return""===t||null==t||String(t).length<=e},in:function(r,t,e){return""===t||null==t||("string"==typeof e&&(e=e.split("|")),""===t||e.indexOf(t)>-1)},regex:function(r,t,e){return""===t||null==t||new RegExp(e).test(t)},unique:function(r,t,e){if(""===t||null==t)return!0;var n=!0,a=r.getData(),c=r.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(d){var p=d.getData();p!==a&&t==c.getFieldValue(p)&&(n=!1)}),n},required:function(r,t,e){return""!==t&&null!=t}},G9=Object.freeze({__proto__:null,AccessorModule:e7,AjaxModule:s7,ClipboardModule:c7,ColumnCalcsModule:p7,DataTreeModule:f7,DownloadModule:C7,EditModule:O7,ExportModule:k7,FilterModule:L7,FormatModule:i9,FrozenColumnsModule:r9,FrozenRowsModule:o9,GroupRowsModule:a9,HistoryModule:u9,HtmlTableImportModule:d9,InteractionModule:h9,KeybindingsModule:g9,MenuModule:m9,MoveColumnsModule:_9,MoveRowsModule:cb,MutatorModule:b9,PageModule:y9,PersistenceModule:T9,PrintModule:w9,ReactiveDataModule:S9,ResizeColumnsModule:D9,ResizeRowsModule:M9,ResizeTableModule:R9,ResponsiveLayoutModule:I9,SelectRowModule:(()=>{class r extends si{constructor(e){super(e),this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],this.headerCheckboxElement=null,this.registerTableOption("selectable","highlight"),this.registerTableOption("selectableRangeMode","drag"),this.registerTableOption("selectableRollingSelection",!0),this.registerTableOption("selectablePersistence",!0),this.registerTableOption("selectableCheck",function(n,a){return!0}),this.registerTableFunction("selectRow",this.selectRows.bind(this)),this.registerTableFunction("deselectRow",this.deselectRows.bind(this)),this.registerTableFunction("toggleSelectRow",this.toggleRow.bind(this)),this.registerTableFunction("getSelectedRows",this.getSelectedRows.bind(this)),this.registerTableFunction("getSelectedData",this.getSelectedData.bind(this)),this.registerComponentFunction("row","select",this.selectRows.bind(this)),this.registerComponentFunction("row","deselect",this.deselectRows.bind(this)),this.registerComponentFunction("row","toggleSelect",this.toggleRow.bind(this)),this.registerComponentFunction("row","isSelected",this.isRowSelected.bind(this))}initialize(){!1!==this.table.options.selectable&&(this.subscribe("row-init",this.initializeRow.bind(this)),this.subscribe("row-deleting",this.rowDeleted.bind(this)),this.subscribe("rows-wipe",this.clearSelectionData.bind(this)),this.subscribe("rows-retrieve",this.rowRetrieve.bind(this)),this.table.options.selectable&&this.table.options.selectablePersistence&&this.subscribe("data-refeshing",this.deselectRows.bind(this)))}rowRetrieve(e,n){return"selected"===e?this.selectedRows:n}rowDeleted(e){this._deselectRow(e,!0)}clearSelectionData(e){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],!0!==e&&this._rowSelectionChanged()}initializeRow(e){var n=this,a=e.getElement(),c=function(){setTimeout(function(){n.selecting=!1},50),document.body.removeEventListener("mouseup",c)};e.modules.select={selected:!1},n.table.options.selectableCheck.call(this.table,e.getComponent())?(a.classList.add("tabulator-selectable"),a.classList.remove("tabulator-unselectable"),n.table.options.selectable&&"highlight"!=n.table.options.selectable&&("click"===n.table.options.selectableRangeMode?a.addEventListener("click",function(d){if(d.shiftKey){n.table._clearSelection(),n.lastClickedRow=n.lastClickedRow||e;var p=n.table.rowManager.getDisplayRowIndex(n.lastClickedRow),f=n.table.rowManager.getDisplayRowIndex(e),v=p<=f?p:f,C=p>=f?p:f,O=n.table.rowManager.getDisplayRows().slice(0).splice(v,C-v+1);d.ctrlKey||d.metaKey?(O.forEach(function(P){P!==n.lastClickedRow&&(!0===n.table.options.selectable||n.isRowSelected(e)||n.selectedRows.length<n.table.options.selectable)&&n.toggleRow(P)}),n.lastClickedRow=e):(n.deselectRows(void 0,!0),!0!==n.table.options.selectable&&O.length>n.table.options.selectable&&(O=O.slice(0,n.table.options.selectable)),n.selectRows(O)),n.table._clearSelection()}else d.ctrlKey||d.metaKey?(n.toggleRow(e),n.lastClickedRow=e):(n.deselectRows(void 0,!0),n.selectRows(e),n.lastClickedRow=e)}):(a.addEventListener("click",function(d){(!n.table.modExists("edit")||!n.table.modules.edit.getCurrentCell())&&n.table._clearSelection(),n.selecting||n.toggleRow(e)}),a.addEventListener("mousedown",function(d){if(d.shiftKey)return n.table._clearSelection(),n.selecting=!0,n.selectPrev=[],document.body.addEventListener("mouseup",c),document.body.addEventListener("keyup",c),n.toggleRow(e),!1}),a.addEventListener("mouseenter",function(d){n.selecting&&(n.table._clearSelection(),n.toggleRow(e),n.selectPrev[1]==e&&n.toggleRow(n.selectPrev[0]))}),a.addEventListener("mouseout",function(d){n.selecting&&(n.table._clearSelection(),n.selectPrev.unshift(e))})))):(a.classList.add("tabulator-unselectable"),a.classList.remove("tabulator-selectable"))}toggleRow(e){this.table.options.selectableCheck.call(this.table,e.getComponent())&&(e.modules.select&&e.modules.select.selected?this._deselectRow(e):this._selectRow(e))}selectRows(e){var n;switch(typeof e){case"undefined":this.table.rowManager.rows.forEach(a=>{this._selectRow(a,!0,!0)}),this._rowSelectionChanged();break;case"string":(n=this.table.rowManager.findRow(e))?this._selectRow(n,!0,!0):this.table.rowManager.getRows(e).forEach(a=>{this._selectRow(a,!0,!0)}),this._rowSelectionChanged();break;default:Array.isArray(e)?(e.forEach(a=>{this._selectRow(a,!0,!0)}),this._rowSelectionChanged()):this._selectRow(e,!1,!0)}}_selectRow(e,n,a){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!a&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var c=this.table.rowManager.findRow(e);c?-1==this.selectedRows.indexOf(c)&&(c.getElement().classList.add("tabulator-selected"),c.modules.select||(c.modules.select={}),c.modules.select.selected=!0,c.modules.select.checkboxEl&&(c.modules.select.checkboxEl.checked=!0),this.selectedRows.push(c),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(c,!0),n||this.dispatchExternal("rowSelected",c.getComponent()),this._rowSelectionChanged(n)):n||console.warn("Selection Error - No such row found, ignoring selection:"+e)}isRowSelected(e){return-1!==this.selectedRows.indexOf(e)}deselectRows(e,n){var c,a=this;if(void 0===e){c=a.selectedRows.length;for(let d=0;d<c;d++)a._deselectRow(a.selectedRows[0],!0);a._rowSelectionChanged(n)}else Array.isArray(e)?(e.forEach(function(d){a._deselectRow(d,!0)}),a._rowSelectionChanged(n)):a._deselectRow(e,n)}_deselectRow(e,n){var d,a=this,c=a.table.rowManager.findRow(e);c?(d=a.selectedRows.findIndex(function(p){return p==c}))>-1&&(c.getElement().classList.remove("tabulator-selected"),c.modules.select||(c.modules.select={}),c.modules.select.selected=!1,c.modules.select.checkboxEl&&(c.modules.select.checkboxEl.checked=!1),a.selectedRows.splice(d,1),this.table.options.dataTreeSelectPropagate&&this.childRowSelection(c,!1),n||this.dispatchExternal("rowDeselected",c.getComponent()),a._rowSelectionChanged(n)):n||console.warn("Deselection Error - No such row found, ignoring selection:"+e)}getSelectedData(){var e=[];return this.selectedRows.forEach(function(n){e.push(n.getData())}),e}getSelectedRows(){var e=[];return this.selectedRows.forEach(function(n){e.push(n.getComponent())}),e}_rowSelectionChanged(e){this.headerCheckboxElement&&(0===this.selectedRows.length?(this.headerCheckboxElement.checked=!1,this.headerCheckboxElement.indeterminate=!1):this.table.rowManager.rows.length===this.selectedRows.length?(this.headerCheckboxElement.checked=!0,this.headerCheckboxElement.indeterminate=!1):(this.headerCheckboxElement.indeterminate=!0,this.headerCheckboxElement.checked=!1)),e||this.dispatchExternal("rowSelectionChanged",this.getSelectedData(),this.getSelectedRows())}registerRowSelectCheckbox(e,n){e._row.modules.select||(e._row.modules.select={}),e._row.modules.select.checkboxEl=n}registerHeaderSelectCheckbox(e){this.headerCheckboxElement=e}childRowSelection(e,n){var a=this.table.modules.dataTree.getChildren(e,!0);if(n)for(let c of a)this._selectRow(c,!0);else for(let c of a)this._deselectRow(c,!0)}}return r.moduleName="selectRow",r})(),SortModule:(()=>{class r extends si{constructor(e){super(e),this.sortList=[],this.changed=!1,this.registerTableOption("sortMode","local"),this.registerTableOption("initialSort",!1),this.registerTableOption("columnHeaderSortMulti",!0),this.registerTableOption("sortOrderReverse",!1),this.registerTableOption("headerSortElement","<div class='tabulator-arrow'></div>"),this.registerColumnOption("sorter"),this.registerColumnOption("sorterParams"),this.registerColumnOption("headerSort",!0),this.registerColumnOption("headerSortStartingDir"),this.registerColumnOption("headerSortTristate")}initialize(){this.subscribe("column-layout",this.initializeColumn.bind(this)),this.subscribe("table-built",this.tableBuilt.bind(this)),this.registerDataHandler(this.sort.bind(this),20),this.registerTableFunction("setSort",this.userSetSort.bind(this)),this.registerTableFunction("getSorters",this.getSort.bind(this)),this.registerTableFunction("clearSort",this.clearSort.bind(this)),"remote"===this.table.options.sortMode&&this.subscribe("data-params",this.remoteSortParams.bind(this))}tableBuilt(){this.table.options.initialSort&&this.setSort(this.table.options.initialSort)}remoteSortParams(e,n,a,c){var d=this.getSort();return d.forEach(p=>{delete p.column}),c.sort=d,c}userSetSort(e,n){this.setSort(e,n),this.refreshSort()}clearSort(){this.clear(),this.refreshSort()}initializeColumn(e){var a,c,n=!1;switch(typeof e.definition.sorter){case"string":r.sorters[e.definition.sorter]?n=r.sorters[e.definition.sorter]:console.warn("Sort Error - No such sorter found: ",e.definition.sorter);break;case"function":n=e.definition.sorter}e.modules.sort={sorter:n,dir:"none",params:e.definition.sorterParams||{},startingDir:e.definition.headerSortStartingDir||"asc",tristate:e.definition.headerSortTristate},!1!==e.definition.headerSort&&((a=e.getElement()).classList.add("tabulator-sortable"),(c=document.createElement("div")).classList.add("tabulator-col-sorter"),"object"==typeof this.table.options.headerSortElement?c.appendChild(this.table.options.headerSortElement):c.innerHTML=this.table.options.headerSortElement,e.titleHolderElement.appendChild(c),e.modules.sort.element=c,a.addEventListener("click",d=>{var p="",f=[],v=!1;if(e.modules.sort){if(e.modules.sort.tristate)p="none"==e.modules.sort.dir?e.modules.sort.startingDir:e.modules.sort.dir==e.modules.sort.startingDir?"asc"==e.modules.sort.dir?"desc":"asc":"none";else switch(e.modules.sort.dir){case"asc":p="desc";break;case"desc":p="asc";break;default:p=e.modules.sort.startingDir}this.table.options.columnHeaderSortMulti&&(d.shiftKey||d.ctrlKey)?((v=(f=this.getSort()).findIndex(C=>C.field===e.getField()))>-1?(f[v].dir=p,v!=f.length-1&&(v=f.splice(v,1)[0],"none"!=p&&f.push(v))):"none"!=p&&f.push({column:e,dir:p}),this.setSort(f)):"none"==p?this.clear():this.setSort(e,p),this.refreshSort()}}))}refreshSort(){"remote"===this.table.options.sortMode?this.reloadData():this.refreshData()}hasChanged(){var e=this.changed;return this.changed=!1,e}getSort(){var n=[];return this.sortList.forEach(function(a){a.column&&n.push({column:a.column.getComponent(),field:a.column.getField(),dir:a.dir})}),n}setSort(e,n){var a=this,c=[];Array.isArray(e)||(e=[{column:e,dir:n}]),e.forEach(function(d){var p;(p=a.table.columnManager.findColumn(d.column))?(d.column=p,c.push(d),a.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",d.column)}),a.sortList=c,this.dispatch("sort-changed")}clear(){this.setSort([])}findSorter(e){var d,n=this.table.rowManager.activeRows[0],a="string";if(n&&(n=n.getData(),e.getField()))switch(d=e.getFieldValue(n),typeof d){case"undefined":a="string";break;case"boolean":a="boolean";break;default:isNaN(d)||""===d?d.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(a="alphanum"):a="number"}return r.sorters[a]}sort(e){var n=this,a=this.table.options.sortOrderReverse?n.sortList.slice().reverse():n.sortList,c=[],d=[];return this.subscribedExternal("dataSorting")&&this.dispatchExternal("dataSorting",n.getSort()),n.clearColumnHeaders(),"remote"!==this.table.options.sortMode?(a.forEach(function(p,f){var v=p.column.modules.sort;p.column&&v&&(v.sorter||(v.sorter=n.findSorter(p.column)),p.params="function"==typeof v.params?v.params(p.column.getComponent(),p.dir):v.params,c.push(p)),n.setColumnHeader(p.column,p.dir)}),c.length&&n._sortItems(e,c)):a.forEach(function(p,f){n.setColumnHeader(p.column,p.dir)}),this.subscribedExternal("dataSorted")&&(e.forEach(p=>{d.push(p.getComponent())}),this.dispatchExternal("dataSorted",n.getSort(),d)),e}clearColumnHeaders(){this.table.columnManager.getRealColumns().forEach(function(e){e.modules.sort&&(e.modules.sort.dir="none",e.getElement().setAttribute("aria-sort","none"))})}setColumnHeader(e,n){e.modules.sort.dir=n,e.getElement().setAttribute("aria-sort",n)}_sortItems(e,n){var a=n.length-1;e.sort((c,d)=>{for(var p,f=a;f>=0;f--){let v=n[f];if(0!==(p=this._sortRow(c,d,v.column,v.dir,v.params)))break}return p})}_sortRow(e,n,a,c,d){var p,f,v="asc"==c?e:n,C="asc"==c?n:e;return e=void 0!==(e=a.getFieldValue(v.getData()))?e:"",n=void 0!==(n=a.getFieldValue(C.getData()))?n:"",p=v.getComponent(),f=C.getComponent(),a.modules.sort.sorter.call(this,e,n,p,f,a.getComponent(),c,d)}}return r.moduleName="sort",r.sorters=V9,r})(),ValidateModule:(()=>{class r extends si{constructor(e){super(e),this.invalidCells=[],this.registerTableOption("validationMode","blocking"),this.registerColumnOption("validator"),this.registerTableFunction("getInvalidCells",this.getInvalidCells.bind(this)),this.registerTableFunction("clearCellValidation",this.userClearCellValidation.bind(this)),this.registerTableFunction("validate",this.userValidate.bind(this)),this.registerComponentFunction("cell","isValid",this.cellIsValid.bind(this)),this.registerComponentFunction("cell","clearValidation",this.clearValidation.bind(this)),this.registerComponentFunction("cell","validate",this.cellValidate.bind(this)),this.registerComponentFunction("column","validate",this.columnValidate.bind(this)),this.registerComponentFunction("row","validate",this.rowValidate.bind(this))}initialize(){this.subscribe("cell-delete",this.clearValidation.bind(this)),this.subscribe("column-layout",this.initializeColumnCheck.bind(this))}cellIsValid(e){return!e.modules.validate||!e.modules.validate.invalid}cellValidate(e){return this.validate(e.column.modules.validate,e,e.getValue())}columnValidate(e){var n=[];return e.cells.forEach(function(a){this.cellValidate(a)||n.push(a.getComponent())}),!n.length||n}rowValidate(e){var n=[];return e.cells.forEach(function(a){this.cellValidate(a)||n.push(a.getComponent())}),!n.length||n}userClearCellValidation(e){e||(e=this.getInvalidCells()),Array.isArray(e)||(e=[e]),e.forEach(n=>{this.clearValidation(n._getSelf())})}userValidate(e){var n=[];return this.table.rowManager.rows.forEach(function(a){var c=a.validate();!0!==c&&(n=n.concat(c))}),!n.length||n}initializeColumnCheck(e){void 0!==e.definition.validator&&this.initializeColumn(e)}initializeColumn(e){var c,n=this,a=[];e.definition.validator&&(Array.isArray(e.definition.validator)?e.definition.validator.forEach(function(d){(c=n._extractValidator(d))&&a.push(c)}):(c=this._extractValidator(e.definition.validator))&&a.push(c),e.modules.validate=!!a.length&&a)}_extractValidator(e){var n,a,c;switch(typeof e){case"string":return(c=e.indexOf(":"))>-1?(n=e.substring(0,c),a=e.substring(c+1)):n=e,this._buildValidator(n,a);case"function":return this._buildValidator(e);case"object":return this._buildValidator(e.type,e.parameters)}}_buildValidator(e,n){var a="function"==typeof e?e:r.validators[e];return a?{type:"function"==typeof e?"function":e,func:a,params:n}:(console.warn("Validator Setup Error - No matching validator found:",e),!1)}validate(e,n,a){var c=this,d=[],p=this.invalidCells.indexOf(n);return e&&e.forEach(function(f){f.func.call(c,n.getComponent(),a,f.params)||d.push({type:f.type,parameters:f.params})}),d=!d.length||d,n.modules.validate||(n.modules.validate={}),!0===d?(n.modules.validate.invalid=!1,n.getElement().classList.remove("tabulator-validation-fail"),p>-1&&this.invalidCells.splice(p,1)):(n.modules.validate.invalid=!0,"manual"!==this.table.options.validationMode&&n.getElement().classList.add("tabulator-validation-fail"),-1==p&&this.invalidCells.push(n)),d}getInvalidCells(){var e=[];return this.invalidCells.forEach(n=>{e.push(n.getComponent())}),e}clearValidation(e){var n;e.modules.validate&&e.modules.validate.invalid&&(e.getElement().classList.remove("tabulator-validation-fail"),e.modules.validate.invalid=!1,(n=this.invalidCells.indexOf(e))>-1&&this.invalidCells.splice(n,1))}}return r.moduleName="validate",r.validators=U9,r})()}),W9={debugEventsExternal:!1,debugEventsInternal:!1,debugInvalidOptions:!0,height:!1,minHeight:!1,maxHeight:!1,columnMaxWidth:!1,columnHeaderVertAlign:"top",columns:[],columnDefaults:{},data:!1,autoColumns:!1,autoColumnsDefinitions:!1,nestedFieldSeparator:".",tooltipGenerationMode:"load",footerElement:!1,index:"id",textDirection:"auto",addRowPos:"bottom",headerVisible:!0,renderVertical:"virtual",renderHorizontal:"basic",renderVerticalBuffer:0,scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,rowFormatterPrint:null,rowFormatterClipboard:null,rowFormatterHtmlOutput:null,placeholder:!1,dataLoader:!0,dataLoaderLoading:!1,dataLoaderError:!1,dataSendParams:{},dataReceiveParams:{}};class Ik{constructor(t,e){this.table=t,this.msgType=e,this.registeredDefaults={}}register(t,e){this.registeredDefaults[t]=e}generate(t,e={}){var n=Object.assign({},this.registeredDefaults);if(Object.assign(n,t),!1!==e.debugInvalidOptions||this.table.options.debugInvalidOptions)for(var a in e)n.hasOwnProperty(a)||console.warn("Invalid "+this.msgType+" option:",a);for(var a in n)a in e?n[a]=e[a]:Array.isArray(n[a])?n[a]=Object.assign([],n[a]):"object"==typeof n[a]&&null!==n[a]?n[a]=Object.assign({},n[a]):void 0===n[a]&&delete n[a];return n}}class ub extends Ua{constructor(t){super(t),this.elementVertical=t.rowManager.element,this.elementHorizontal=t.columnManager.element,this.tableElement=t.rowManager.tableElement,this.verticalFillMode="fit"}initialize(){}clearRows(){}clearColumns(){}reinitializeColumnWidths(t){}renderRows(){}renderColumns(){}rerenderRows(t){t&&t()}rerenderColumns(t,e){}renderRowCells(t){}rerenderRowCells(t,e){}scrollColumns(t,e){}scrollRows(t,e){}resize(){}scrollToRow(t){}scrollToRowNearestTop(t){}visibleRows(t){return[]}rows(){return this.table.rowManager.getDisplayRows()}styleRow(t,e){var n=t.getElement();e%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))}clear(){this.clearRows(),this.clearColumns()}render(){this.renderRows(),this.renderColumns()}rerender(t){this.rerenderRows(),this.rerenderColumns()}scrollToRowPosition(t,e,n){var a=this.rows().indexOf(t),c=t.getElement(),d=0;return new Promise((p,f)=>{if(a>-1){if(void 0===n&&(n=this.table.options.scrollToRowIfVisible),!n&&rr.elVisible(c)&&(d=rr.elOffset(c).top-rr.elOffset(this.elementVertical).top)>0&&d<this.elementVertical.clientHeight-c.offsetHeight)return!1;switch(void 0===e&&(e=this.table.options.scrollToRowPosition),"nearest"===e&&(e=this.scrollToRowNearestTop(t)?"top":"bottom"),this.scrollToRow(t),e){case"middle":case"center":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop+(c.offsetTop-this.elementVertical.scrollTop)-(this.elementVertical.scrollHeight-c.offsetTop)/2:this.elementVertical.scrollTop-this.elementVertical.clientHeight/2;break;case"bottom":this.elementVertical.scrollTop=this.elementVertical.scrollHeight-this.elementVertical.scrollTop==this.elementVertical.clientHeight?this.elementVertical.scrollTop-(this.elementVertical.scrollHeight-c.offsetTop)+c.offsetHeight:this.elementVertical.scrollTop-this.elementVertical.clientHeight+c.offsetHeight}p()}else console.warn("Scroll Error - Row not visible"),f("Scroll Error - Row not visible")})}}class j9 extends ub{constructor(t){super(t)}renderRowCells(t){t.cells.forEach(e=>{t.element.appendChild(e.getElement()),e.cellRendered()})}reinitializeColumnWidths(t){t.forEach(function(e){e.reinitializeWidth()})}}class z9 extends ub{constructor(t){super(t),this.leftCol=0,this.rightCol=0,this.scrollLeft=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0,this.fitDataColAvg=0,this.window=200,this.initialized=!1,this.columns=[]}initialize(){this.compatabilityCheck()}compatabilityCheck(){var t=this.options("columns"),n=!0;return"fitDataTable"==this.options("layout")&&(console.warn("Horizontal Vitrual DOM is not compatible with fitDataTable layout mode"),n=!1),this.options("responsiveLayout")&&(console.warn("Horizontal Vitrual DOM is not compatible with responsive columns"),n=!1),this.options("rtl")&&(console.warn("Horizontal Vitrual DOM is not currently compatible with RTL text direction"),n=!1),t&&t.find(a=>a.frozen)&&(console.warn("Horizontal Vitrual DOM is not compatible with frozen columns"),n=!1),n}renderColumns(t,e){this.dataChange()}scrollColumns(t,e){this.scrollLeft!=t&&(this.scrollLeft=t,this.scroll(t-(this.vDomScrollPosLeft+this.window)))}rerenderColumns(t,e){var n={cols:this.columns,leftCol:this.leftCol,rightCol:this.rightCol};if(!t||this.initialized){this.clear(),this.scrollLeft=this.elementVertical.scrollLeft,this.vDomScrollPosLeft=this.scrollLeft-this.window,this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window;var a=0;this.table.columnManager.columnsByIndex.forEach(c=>{var d={};if(c.visible){var p=c.getWidth();d.leftPos=a,d.rightPos=a+p,d.width=p,"fitData"===this.options("layout")&&(d.fitDataCheck=!0),a+p>this.vDomScrollPosLeft&&a<this.vDomScrollPosRight?(-1==this.leftCol&&(this.leftCol=this.columns.length,this.vDomPadLeft=a),this.rightCol=this.columns.length):-1!==this.leftCol&&(this.vDomPadRight+=p),this.columns.push(c),c.modules.vdomHoz=d,a+=p}}),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.initialized=!0,e||(!t||this.reinitChanged(n))&&this.renitializeRows(),this.elementVertical.scrollLeft=this.scrollLeft}}renderRowCells(t){this.initialized?this.initializeRow(t):t.cells.forEach(e=>{t.element.appendChild(e.getElement()),e.cellRendered()})}rerenderRowCells(t,e){this.reinitializeRow(t,e)}reinitializeColumnWidths(t){for(let e=this.leftCol;e<=this.rightCol;e++)this.columns[e].reinitializeWidth()}deinitialize(){this.initialized=!1}clear(){this.columns=[],this.leftCol=-1,this.rightCol=0,this.vDomScrollPosLeft=0,this.vDomScrollPosRight=0,this.vDomPadLeft=0,this.vDomPadRight=0}dataChange(){var c,a,t=!1,e=0,n=0;if("fitData"===this.options("layout")){if(this.table.columnManager.columnsByIndex.forEach(d=>{!d.definition.width&&d.visible&&(t=!0)}),t&&t&&this.table.rowManager.getDisplayRows().length&&(this.vDomScrollPosRight=this.scrollLeft+this.elementVertical.clientWidth+this.window,a=this.chain("rows-sample",[1],[],()=>this.table.rowManager.getDisplayRows()[0])[0])){for(c=a.getElement(),a.generateCells(),this.tableElement.appendChild(c),n=0;n<a.cells.length;n++){let f=a.cells[n];if(c.appendChild(f.getElement()),f.column.reinitializeWidth(),(e+=f.column.getWidth())>this.vDomScrollPosRight)break}for(c.parentNode.removeChild(c),this.fitDataColAvg=Math.floor(e/(n+1));n<this.table.columnManager.columnsByIndex.length;n++)this.table.columnManager.columnsByIndex[n].setWidth(this.fitDataColAvg);this.rerenderColumns(!1,!0)}}else"fitColumns"===this.options("layout")&&(this.layoutRefresh(),this.rerenderColumns(!1,!0))}reinitChanged(t){var e=!0;return t.cols.length!==this.columns.length||t.leftCol!==this.leftCol||t.rightCol!==this.rightCol||(t.cols.forEach((n,a)=>{n!==this.columns[a]&&(e=!1)}),!e)}renitializeRows(){this.table.rowManager.getVisibleRows().forEach(e=>{this.reinitializeRow(e,!0)})}scroll(t){this.vDomScrollPosLeft+=t,this.vDomScrollPosRight+=t,t>.8*this.elementVertical.clientWidth?this.rerenderColumns():t>0?(this.addColRight(),this.removeColLeft()):(this.addColLeft(),this.removeColRight())}colPositionAdjust(t,e,n){for(let a=t;a<e;a++){let c=this.columns[a];c.modules.vdomHoz.leftPos+=n,c.modules.vdomHoz.rightPos+=n}}addColRight(){var t=this.columns[this.rightCol+1];t&&t.modules.vdomHoz.leftPos<=this.vDomScrollPosRight&&(this.table.rowManager.getVisibleRows().forEach(n=>{if("group"!==n.type){var a=n.getCell(t);n.getElement().appendChild(a.getElement()),a.cellRendered()}}),this.fitDataColActualWidthCheck(t),this.rightCol++,this.rightCol>=this.columns.length-1?this.vDomPadRight=0:this.vDomPadRight-=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.addColRight())}addColLeft(){var t=this.columns[this.leftCol-1];t&&t.modules.vdomHoz.rightPos>=this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(a=>{if("group"!==a.type){var c=a.getCell(t);a.getElement().prepend(c.getElement()),c.cellRendered()}}),this.fitDataColActualWidthCheck(t),this.leftCol?this.vDomPadLeft-=t.getWidth():this.vDomPadLeft=0,this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol--,this.addColLeft())}removeColRight(t){var e;(t=this.columns[this.rightCol])&&t.modules.vdomHoz.leftPos>this.vDomScrollPosRight&&(e=this.table.rowManager.getVisibleRows(),t.modules.vdomHoz.visible=!1,e.forEach(n=>{if("group"!==n.type){var a=n.getCell(t);n.getElement().removeChild(a.getElement())}}),this.vDomPadRight+=t.getWidth(),this.tableElement.style.paddingRight=this.vDomPadRight+"px",this.rightCol--,this.removeColRight())}removeColLeft(){var t=this.columns[this.leftCol];t&&t.modules.vdomHoz.rightPos<this.vDomScrollPosLeft&&(this.table.rowManager.getVisibleRows().forEach(n=>{if("group"!==n.type){var a=n.getCell(t);a.parentNode&&n.getElement().removeChild(a.getElement())}}),this.vDomPadLeft+=t.getWidth(),this.tableElement.style.paddingLeft=this.vDomPadLeft+"px",this.leftCol++,this.removeColLeft())}fitDataColActualWidthCheck(t){var e,n;t.modules.vdomHoz.fitDataCheck&&(t.reinitializeWidth(),(n=(e=t.getWidth())-t.modules.vdomHoz.width)&&(t.modules.vdomHoz.rightPos+=n,t.modules.vdomHoz.width=e,this.colPositionAdjust(this.rightCol+2,this.columns.length,n)),t.modules.vdomHoz.fitDataCheck=!1)}initializeRow(t){if("group"!==t.type){t.modules.vdomHoz={leftCol:this.leftCol,rightCol:this.rightCol};for(let e=this.leftCol;e<=this.rightCol;e++){let n=this.columns[e];if(n&&n.visible){let a=t.getCell(n);t.getElement().appendChild(a.getElement()),a.cellRendered()}}}}reinitializeRow(t,e){if("group"!==t.type&&(e||!t.modules.vdomHoz||t.modules.vdomHoz.leftCol!==this.leftCol||t.modules.vdomHoz.rightCol!==this.rightCol)){for(var n=t.getElement();n.firstChild;)n.removeChild(n.firstChild);this.initializeRow(t)}}}class X9 extends Ua{constructor(t){super(t),this.blockHozScrollEvent=!1,this.headersElement=null,this.element=null,this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.scrollLeft=0,this.optionsList=new Ik(this.table,"column definition"),this.renderer=null}initialize(){this.initializeRenderer(),this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.element.insertBefore(this.headersElement,this.element.firstChild),this.subscribe("scroll-horizontal",this.scrollHorizontal.bind(this))}initializeRenderer(){var t;(t="string"==typeof this.table.options.renderHorizontal?{virtual:z9,basic:j9}[this.table.options.renderHorizontal]:this.table.options.renderHorizontal)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize()):console.error("Unable to find matching renderer:",table.options.renderHorizontal)}createHeadersElement(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t.setAttribute("role","row"),t}createHeaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t.setAttribute("role","rowgroup"),this.table.options.headerVisible||t.classList.add("tabulator-header-hidden"),t}getElement(){return this.element}getHeadersElement(){return this.headersElement}scrollHorizontal(t){var n=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t,this.element.style.marginLeft=t>n?-(t-n)+"px":0,this.scrollLeft=t,this.renderer.scrollColumns(t)}generateColumnsFromRowData(t){var a,c,e=[],n=this.table.options.autoColumnsDefinitions;if(t&&t.length){for(var d in a=t[0]){let p={field:d,title:d},f=a[d];switch(typeof f){case"undefined":c="string";break;case"boolean":c="boolean";break;case"object":c=Array.isArray(f)?"array":"string";break;default:c=isNaN(f)||""===f?f.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)?"alphanum":"string":"number"}p.sorter=c,e.push(p)}if(n)switch(typeof n){case"function":this.table.options.columns=n.call(this.table,e);break;case"object":Array.isArray(n)?e.forEach(p=>{var f=n.find(v=>v.field===p.field);f&&Object.assign(p,f)}):e.forEach(p=>{n[p.field]&&Object.assign(p,n[p.field])}),this.table.options.columns=e}else this.table.options.columns=e;this.setColumns(this.table.options.columns)}}setColumns(t,e){for(;this.headersElement.firstChild;)this.headersElement.removeChild(this.headersElement.firstChild);this.columns=[],this.columnsByIndex=[],this.columnsByField={},this.dispatch("columns-loading"),t.forEach((n,a)=>{this._addColumn(n)}),this._reIndexColumns(),this.dispatch("columns-loaded"),this.renderer.rerenderColumns(!1,!0),this.redraw(!0)}_addColumn(t,e,n){var a=new fm(t,this),c=a.getElement(),d=n&&this.findColumnIndex(n);if(n&&d>-1){var p=n.getTopColumn(),f=this.columns.indexOf(p),v=p.getElement();e?(this.columns.splice(f,0,a),v.parentNode.insertBefore(c,v)):(this.columns.splice(f+1,0,a),v.parentNode.insertBefore(c,v.nextSibling))}else e?(this.columns.unshift(a),this.headersElement.insertBefore(a.getElement(),this.headersElement.firstChild)):(this.columns.push(a),this.headersElement.appendChild(a.getElement()));return a.columnRendered(),a}registerColumnField(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)}registerColumnPosition(t){this.columnsByIndex.push(t)}_reIndexColumns(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})}verticalAlignHeaders(){var t=0;this.columns.forEach(e=>{var n;e.clearVerticalAlign(),(n=e.getHeight())>t&&(t=n)}),this.columns.forEach(e=>{e.verticalAlign(this.table.options.columnHeaderVertAlign,t)}),this.table.rowManager.adjustTableSize()}findColumn(t){return"object"!=typeof t?this.columnsByField[t]||!1:t instanceof fm?t:t instanceof Mk?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.columns.find(n=>n.element===t)||!1}getColumnByField(t){return this.columnsByField[t]}getColumnsByFieldRoot(t){var e=[];return Object.keys(this.columnsByField).forEach(n=>{n.split(".")[0]===t&&e.push(this.columnsByField[n])}),e}getColumnByIndex(t){return this.columnsByIndex[t]}getFirstVisibileColumn(t){return(t=this.columnsByIndex.findIndex(e=>e.visible))>-1&&this.columnsByIndex[t]}getColumns(){return this.columns}findColumnIndex(t){return this.columnsByIndex.findIndex(e=>t===e)}getRealColumns(){return this.columnsByIndex}traverse(t){this.columnsByIndex.forEach((e,n)=>{t(e,n)})}getDefinitions(t){var e=[];return this.columnsByIndex.forEach(n=>{(!t||t&&n.visible)&&e.push(n.getDefinition())}),e}getDefinitionTree(){var t=[];return this.columns.forEach(e=>{t.push(e.getDefinition(!0))}),t}getComponents(t){var e=[];return(t?this.columns:this.columnsByIndex).forEach(a=>{e.push(a.getComponent())}),e}getWidth(){var t=0;return this.columnsByIndex.forEach(e=>{e.visible&&(t+=e.getWidth())}),t}moveColumn(t,e,n){this.moveColumnActual(t,e,n),e.element.parentNode.insertBefore(t.element,e.element),n&&e.element.parentNode.insertBefore(e.element,t.element),this.verticalAlignHeaders(),this.table.rowManager.reinitialize()}moveColumnActual(t,e,n){this._moveColumnInArray(t.parent.isGroup?t.parent.columns:this.columns,t,e,n),this._moveColumnInArray(this.columnsByIndex,t,e,n,!0),this.renderer.rerenderColumns(!0),this.dispatch("column-moved",t,e,n),this.subscribedExternal("columnMoved")&&this.dispatchExternal("columnMoved",t.getComponent(),this.table.columnManager.getComponents())}_moveColumnInArray(t,e,n,a,c){var p,d=t.indexOf(e);d>-1&&(t.splice(d,1),(p=t.indexOf(n))>-1?a&&(p+=1):p=d,t.splice(p,0,e),c&&(this.chain("column-moving-rows",[e,n,a],null,[])||[]).concat(this.table.rowManager.rows).forEach(function(v){if(v.cells.length){var C=v.cells.splice(d,1)[0];v.cells.splice(p,0,C)}}))}scrollToColumn(t,e,n){var a=0,c=0,d=0,p=t.getElement();return new Promise((f,v)=>{if(void 0===e&&(e=this.table.options.scrollToColumnPosition),void 0===n&&(n=this.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":d=-this.element.clientWidth/2;break;case"right":d=p.clientWidth-this.headersElement.clientWidth}if(!n&&(c=p.offsetLeft)>0&&c+p.offsetWidth<this.element.clientWidth)return!1;a=p.offsetLeft+d,a=Math.max(Math.min(a,this.table.rowManager.element.scrollWidth-this.table.rowManager.element.clientWidth),0),this.table.rowManager.scrollHorizontal(a),this.scrollHorizontal(a),f()}else console.warn("Scroll Error - Column not visible"),v("Scroll Error - Column not visible")})}generateCells(t){var e=[];return this.columnsByIndex.forEach(n=>{e.push(n.generateCell(t))}),e}getFlexBaseWidth(){var t=this.table.element.clientWidth,e=0;return this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(n){var a,c,d;n.visible&&(a=n.definition.width||0,c=parseInt(n.minWidth),d="string"==typeof a?a.indexOf("%")>-1?t/100*parseInt(a):parseInt(a):a,e+=d>c?d:c)}),e}addColumn(t,e,n){return new Promise((a,c)=>{var d=this._addColumn(t,e,n);this._reIndexColumns(),this.dispatch("column-add",t,e,n),"fitColumns"!=this.layoutMode()&&d.reinitializeWidth(),this.redraw(!0),this.table.rowManager.reinitialize(),this.renderer.rerenderColumns(),a(d)})}deregisterColumn(t){var n,e=t.getField();e&&delete this.columnsByField[e],(n=this.columnsByIndex.indexOf(t))>-1&&this.columnsByIndex.splice(n,1),(n=this.columns.indexOf(t))>-1&&this.columns.splice(n,1),this.verticalAlignHeaders(),this.redraw()}redraw(t){rr.elVisible(this.element)&&this.verticalAlignHeaders(),t&&(this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),this.confirm("table-redrawing",t)||this.layoutRefresh(),this.dispatch("table-redraw",t),this.table.footerManager.redraw()}}class Y9 extends ub{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.scrollTop=0,t.scrollLeft=0,t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility=""}renderRows(){var t=this.tableElement,e=!0;this.rows().forEach((n,a)=>{this.styleRow(n,a),t.appendChild(n.getElement()),n.initialize(!0),"group"!==n.type&&(e=!1)}),t.style.minWidth=e?this.table.columnManager.getWidth()+"px":""}rerenderRows(t){this.render(),t&&t()}scrollToRowNearestTop(t){var e=rr.elOffset(t.getElement()).top;return!(Math.abs(this.elementVertical.scrollTop-e)>Math.abs(this.elementVertical.scrollTop+this.elementVertical.clientHeight-e))}scrollToRow(t){var e=t.getElement();this.elementVertical.scrollTop=rr.elOffset(e).top-rr.elOffset(this.elementVertical).top+this.elementVertical.scrollTop}visibleRows(t){return this.rows()}}class $9 extends ub{constructor(t){super(t),this.verticalFillMode="fill",this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]}clearRows(){for(var t=this.tableElement;t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minWidth="",t.style.minHeight="",t.style.display="",t.style.visibility="",this.elementVertical.scrollTop=0,this.elementVertical.scrollLeft=0,this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0}renderRows(){this._virtualRenderFill()}rerenderRows(t){for(var e=this.elementVertical.scrollTop,n=!1,a=!1,c=this.table.rowManager.scrollLeft,d=this.rows(),p=this.vDomTop;p<=this.vDomBottom;p++)if(d[p]){var f=e-d[p].getElement().offsetTop;if(!(!1===a||Math.abs(f)<a))break;a=f,n=p}d.forEach(v=>{v.deinitializeHeight()}),t&&t(),this._virtualRenderFill(!1===n?this.rows.length-1:n,!0,a||0),this.scrollColumns(c)}scrollColumns(t){this.table.rowManager.scrollHorizontal(t)}scrollRows(t,e){var n=t-this.vDomScrollPosTop,a=t-this.vDomScrollPosBottom,c=2*this.vDomWindowBuffer,d=this.rows();if(this.scrollTop=t,-n>c||a>c){var p=this.table.rowManager.scrollLeft;this._virtualRenderFill(Math.floor(this.elementVertical.scrollTop/this.elementVertical.scrollHeight*d.length)),this.scrollColumns(p)}else e?(n<0&&this._addTopRow(d,-n),a<0&&(this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer?this._removeBottomRow(d,-a):this.vDomScrollPosBottom=this.scrollTop)):(a>=0&&this._addBottomRow(d,a),n>=0&&(this.scrollTop>this.vDomWindowBuffer?this._removeTopRow(d,n):this.vDomScrollPosTop=this.scrollTop))}resize(){this.vDomWindowBuffer=this.table.options.renderVerticalBuffer||this.elementVertical.clientHeight}scrollToRowNearestTop(t){var e=this.rows().indexOf(t);return!(Math.abs(this.vDomTop-e)>Math.abs(this.vDomBottom-e))}scrollToRow(t){var e=this.rows().indexOf(t);e>-1&&this._virtualRenderFill(e,!0)}visibleRows(t){var e=this.elementVertical.scrollTop,n=this.elementVertical.clientHeight+e,a=!1,c=0,d=0,p=this.rows();if(t)c=this.vDomTop,d=this.vDomBottom;else for(var f=this.vDomTop;f<=this.vDomBottom;f++)if(p[f])if(a){if(!(n-p[f].getElement().offsetTop>=0))break;d=f}else if(e-p[f].getElement().offsetTop>=0)c=f;else{if(a=!0,!(n-p[f].getElement().offsetTop>=0))break;d=f}return p.slice(c,d+1)}_virtualRenderFill(t,e,n){var a=this.tableElement,c=this.elementVertical,d=0,p=0,f=0,v=0,C=0,M=this.rows(),O=M.length,P=this.elementVertical.clientHeight;if(n=n||0,t=t||0){for(;a.firstChild;)a.removeChild(a.firstChild);(f=(O-t+1)*this.vDomRowHeight)<P&&(t-=Math.ceil((P-f)/this.vDomRowHeight))<0&&(t=0),t-=d=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t)}else this.clear();if(O&&rr.elVisible(this.elementVertical)){for(this.vDomTop=t,this.vDomBottom=t-1;(p<=P+this.vDomWindowBuffer||C<this.vDomWindowMinTotalRows)&&this.vDomBottom<O-1;){var K,W=this.vDomBottom+1,ne=M[W];this.styleRow(ne,W),a.appendChild(ne.getElement()),ne.initialize(),ne.heightInitialized||ne.normalizeHeight(!0),K=ne.getHeight(),C<d?v+=K:p+=K,K>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*K),this.vDomBottom++,C++}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+n:this.scrollTop-v,this.vDomBottomPad=this.vDomBottom==O-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-p-v,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((p+v)/C),this.vDomBottomPad=this.vDomRowHeight*(O-this.vDomBottom-1),this.vDomScrollHeight=v+p+this.vDomBottomPad-P),a.style.paddingTop=this.vDomTopPad+"px",a.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+v+n-(this.elementVertical.scrollWidth>this.elementVertical.clientWidth?this.elementVertical.offsetHeight-P:0)),this.scrollTop=Math.min(this.scrollTop,this.elementVertical.scrollHeight-P),this.elementVertical.scrollWidth>this.elementVertical.offsetWidth&&e&&(this.scrollTop+=this.elementVertical.offsetHeight-P),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,c.scrollTop=this.scrollTop,this.dispatch("render-virtual-fill")}}_addTopRow(t,e){for(var n=this.tableElement,a=[],c=0,d=this.vDomTop-1,p=0;this.vDomTop;){let v,C,f=t[d];if(!(f&&p<this.vDomMaxRenderChain))break;if(v=f.getHeight()||this.vDomRowHeight,C=f.initialized,!(e>=v))break;this.styleRow(f,d),n.insertBefore(f.getElement(),n.firstChild),(!f.initialized||!f.heightInitialized)&&a.push(f),f.initialize(),C||(v=f.getElement().offsetHeight,v>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*v)),e-=v,c+=v,this.vDomTop--,d--,p++}for(let f of a)f.clearCellHeight();this._quickNormalizeRowHeight(a),c&&(this.vDomTopPad-=c,this.vDomTopPad<0&&(this.vDomTopPad=d*this.vDomRowHeight),d<1&&(this.vDomTopPad=0),n.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=c)}_removeTopRow(t,e){for(var n=[],a=0,c=0;;){let p,d=t[this.vDomTop];if(!(d&&c<this.vDomMaxRenderChain))break;if(p=d.getHeight()||this.vDomRowHeight,!(e>=p))break;this.vDomTop++,e-=p,a+=p,n.push(d),c++}for(let d of n){let p=d.getElement();p.parentNode&&p.parentNode.removeChild(p)}a&&(this.vDomTopPad+=a,this.tableElement.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?a:a+this.vDomWindowBuffer)}_addBottomRow(t,e){for(var n=this.tableElement,a=[],c=0,d=this.vDomBottom+1,p=0;;){let v,C,f=t[d];if(!(f&&p<this.vDomMaxRenderChain))break;if(v=f.getHeight()||this.vDomRowHeight,C=f.initialized,!(e>=v))break;this.styleRow(f,d),n.appendChild(f.getElement()),(!f.initialized||!f.heightInitialized)&&a.push(f),f.initialize(),C||(v=f.getElement().offsetHeight,v>this.vDomWindowBuffer&&(this.vDomWindowBuffer=2*v)),e-=v,c+=v,this.vDomBottom++,d++,p++}for(let f of a)f.clearCellHeight();this._quickNormalizeRowHeight(a),c&&(this.vDomBottomPad-=c,(this.vDomBottomPad<0||d==t.length-1)&&(this.vDomBottomPad=0),n.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=c)}_removeBottomRow(t,e){for(var n=[],a=0,c=0;;){let p,d=t[this.vDomBottom];if(!(d&&c<this.vDomMaxRenderChain))break;if(p=d.getHeight()||this.vDomRowHeight,!(e>=p))break;this.vDomBottom--,e-=p,a+=p,n.push(d),c++}for(let d of n){let p=d.getElement();p.parentNode&&p.parentNode.removeChild(p)}a&&(this.vDomBottomPad+=a,this.vDomBottomPad<0&&(this.vDomBottomPad=0),this.tableElement.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=a)}_quickNormalizeRowHeight(t){for(let e of t)e.calcHeight();for(let e of t)e.setCellHeight()}}class K9 extends Ua{constructor(t){super(t),this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.heightFixer=this.createTableElement(),this.firstRender=!1,this.renderMode="virtual",this.fixedHeight=!1,this.rows=[],this.activeRowsPipeline=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.rowNumColumn=!1,this.redrawBlock=!1,this.redrawBlockRestoreConfig=!1,this.redrawBlockRederInPosition=!1,this.dataPipeline=[],this.displayPipeline=[],this.renderer=null}createHolderElement(){var t=document.createElement("div");return t.classList.add("tabulator-tableholder"),t.setAttribute("tabindex",0),t.setAttribute("role","rowgroup"),t}createTableElement(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t.setAttribute("role","rowgroup"),t}getElement(){return this.element}getTableElement(){return this.tableElement}getRowPosition(t,e){return e?this.activeRows.indexOf(t):this.rows.indexOf(t)}initialize(){this.initializeRenderer(),this.element.appendChild(this.tableElement),this.firstRender=!0,this.element.addEventListener("scroll",()=>{var t=this.element.scrollLeft,e=this.scrollLeft>t,n=this.element.scrollTop,a=this.scrollTop>n;this.scrollLeft!=t&&(this.scrollLeft=t,this.dispatch("scroll-horizontal",t,e),this.dispatchExternal("scrollHorizontal",t,e)),this.scrollTop!=n&&(this.scrollTop=n,this.renderer.scrollRows(n,a),this.dispatch("scroll-vertical",n,a),this.dispatchExternal("scrollVertical",n,a))})}findRow(t){return"object"!=typeof t?null!=t&&(this.rows.find(n=>n.data[this.table.options.index]==t)||!1):t instanceof vs?t:t instanceof gw?t._getSelf()||!1:"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&this.rows.find(n=>n.getElement()===t)||!1}getRowFromDataObject(t){return this.rows.find(n=>n.data===t)||!1}getRowFromPosition(t,e){return e?this.activeRows[t]:this.rows[t]}scrollToRow(t,e,n){return this.renderer.scrollToRowPosition(t,e,n)}setData(t,e,n){return new Promise((a,c)=>{e&&this.getDisplayRows().length?this.table.options.pagination?this._setDataActual(t,!0):this.reRenderInPosition(()=>{this._setDataActual(t)}):(this.table.options.autoColumns&&n&&this.table.initialized&&this.table.columnManager.generateColumnsFromRowData(t),this.resetScroll(),this._setDataActual(t)),a()})}_setDataActual(t,e){this.dispatchExternal("dataProcessing",t),this._wipeElements(),Array.isArray(t)?(this.dispatch("data-processing",t),t.forEach((n,a)=>{if(n&&"object"==typeof n){var c=new vs(n,this);this.rows.push(c)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",n)}),this.refreshActiveData(!1,!1,e),this.dispatch("data-processed",t),this.dispatchExternal("dataProcessed",t)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",typeof t,"\nData:     ",t)}_wipeElements(){this.dispatch("rows-wipe"),this.rows.forEach(t=>{t.wipe()}),this.rows=[],this.activeRows=[],this.activeRowsPipeline=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.adjustTableSize()}deleteRow(t,e){var n=this.rows.indexOf(t),a=this.activeRows.indexOf(t);a>-1&&this.activeRows.splice(a,1),n>-1&&this.rows.splice(n,1),this.setActiveRows(this.activeRows),this.displayRowIterator(c=>{var d=c.indexOf(t);d>-1&&c.splice(d,1)}),e||this.reRenderInPosition(),this.regenerateRowNumbers(),this.dispatchExternal("rowDeleted",t.getComponent()),this.displayRowsCount||this._showPlaceholder(),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.getData())}addRow(t,e,n,a){var c=this.addRowActual(t,e,n,a);return this.dispatch("row-added",c,t,e,n),c}addRows(t,e,n){var a=[];return new Promise((c,d)=>{e=this.findAddRowPos(e),Array.isArray(t)||(t=[t]),(void 0===n&&e||void 0!==n&&!e)&&t.reverse(),t.forEach((p,f)=>{var v=this.addRow(p,e,n,!0);a.push(v),this.dispatch("row-added",v,t,e,n)}),this.refreshActiveData(!1,!1,!0),this.regenerateRowNumbers(),a.length&&this._clearPlaceholder(),c(a)})}findAddRowPos(t){return void 0===t&&(t=this.table.options.addRowPos),"pos"===t&&(t=!0),"bottom"===t&&(t=!1),t}addRowActual(t,e,n,a){var f,v,c=t instanceof vs?t:new vs(t||{},this),d=this.findAddRowPos(e),p=-1;return n||(v=this.chain("row-adding-position",[c,d],null,{index:n,top:d}),n=v.index,d=v.top),void 0!==n&&(n=this.findRow(n)),(n=this.chain("row-adding-index",[c,n,d],null,n))&&(p=this.rows.indexOf(n)),n&&p>-1?(f=this.activeRows.indexOf(n),this.displayRowIterator(function(C){var M=C.indexOf(n);M>-1&&C.splice(d?M:M+1,0,c)}),f>-1&&this.activeRows.splice(d?f:f+1,0,c),this.rows.splice(d?p:p+1,0,c)):d?(this.displayRowIterator(function(C){C.unshift(c)}),this.activeRows.unshift(c),this.rows.unshift(c)):(this.displayRowIterator(function(C){C.push(c)}),this.activeRows.push(c),this.rows.push(c)),this.setActiveRows(this.activeRows),this.dispatchExternal("rowAdded",c.getComponent()),this.subscribedExternal("dataChanged")&&this.dispatchExternal("dataChanged",this.table.rowManager.getData()),a||this.reRenderInPosition(),c}moveRow(t,e,n){this.dispatch("row-move",t,e,n),this.moveRowActual(t,e,n),this.regenerateRowNumbers(),this.dispatch("row-moved",t,e,n),this.dispatchExternal("rowMoved",t.getComponent())}moveRowActual(t,e,n){this.moveRowInArray(this.rows,t,e,n),this.moveRowInArray(this.activeRows,t,e,n),this.displayRowIterator(a=>{this.moveRowInArray(a,t,e,n)}),this.dispatch("row-moving",t,e,n)}moveRowInArray(t,e,n,a){var c,d,f;if(e!==n&&((c=t.indexOf(e))>-1&&(t.splice(c,1),d=t.indexOf(n),t.splice(d>-1?a?d+1:d:c,0,e)),t===this.getDisplayRows())){f=d>c?d:c+1;for(let v=c<d?c:d;v<=f;v++)t[v]&&this.styleRow(t[v],v)}}clearData(){this.setData([])}getRowIndex(t){return this.findRowIndex(t,this.rows)}getDisplayRowIndex(t){var e=this.getDisplayRows().indexOf(t);return e>-1&&e}nextDisplayRow(t,e){var n=this.getDisplayRowIndex(t),a=!1;return!1!==n&&n<this.displayRowsCount-1&&(a=this.getDisplayRows()[n+1]),!a||a instanceof vs&&"row"==a.type?a:this.nextDisplayRow(a,e)}prevDisplayRow(t,e){var n=this.getDisplayRowIndex(t),a=!1;return n&&(a=this.getDisplayRows()[n-1]),!e||!a||a instanceof vs&&"row"==a.type?a:this.prevDisplayRow(a,e)}findRowIndex(t,e){var n;return!!((t=this.findRow(t))&&(n=e.indexOf(t),n>-1))&&n}getData(t,e){var n=[];return this.getRows(t).forEach(function(c){"row"==c.type&&n.push(c.getData(e||"data"))}),n}getComponents(t){var e=[];return this.getRows(t).forEach(function(a){e.push(a.getComponent())}),e}getDataCount(t){return this.getRows(t).length}scrollHorizontal(t){this.scrollLeft=t,this.element.scrollLeft=t,this.dispatch("scroll-horizontal",t)}registerDataPipelineHandler(t,e){void 0!==e?(this.dataPipeline.push({handler:t,priority:e}),this.dataPipeline.sort((n,a)=>n.priority-a.priority)):console.error("Data pipeline handlers must have a priority in order to be registered")}registerDisplayPipelineHandler(t,e){void 0!==e?(this.displayPipeline.push({handler:t,priority:e}),this.displayPipeline.sort((n,a)=>n.priority-a.priority)):console.error("Display pipeline handlers must have a priority in order to be registered")}refreshActiveData(t,e,n){var a=this.table,c="",d=0,p=["all","dataPipeline","display","displayPipeline","end"];if("function"==typeof t)if((d=this.dataPipeline.findIndex(f=>f.handler===t))>-1)c="dataPipeline",e&&(d==this.dataPipeline.length-1?c="display":d++);else{if(!((d=this.displayPipeline.findIndex(f=>f.handler===t))>-1))return void console.error("Unable to refresh data, invalid handler provided",t);c="displayPipeline",e&&(d==this.displayPipeline.length-1?c="end":d++)}else c=t||"all",d=0;if(this.redrawBlock)(!this.redrawBlockRestoreConfig||this.redrawBlockRestoreConfig&&(this.redrawBlockRestoreConfig.stage===c&&d<this.redrawBlockRestoreConfig.index||p.indexOf(c)<p.indexOf(this.redrawBlockRestoreConfig.stage)))&&(this.redrawBlockRestoreConfig={handler:t,skipStage:e,renderInPosition:n,stage:c,index:d});else{switch(this.dispatch("data-refeshing"),t||(this.activeRowsPipeline[0]=this.rows.slice(0)),c){case"all":case"dataPipeline":for(let f=d;f<this.dataPipeline.length;f++){let v=this.dataPipeline[f].handler(this.activeRowsPipeline[f].slice(0));this.activeRowsPipeline[f+1]=v||this.activeRowsPipeline[f].slice(0)}this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]),this.regenerateRowNumbers();case"display":d=0,this.resetDisplayRows();case"displayPipeline":for(let f=d;f<this.displayPipeline.length;f++){let v=this.displayPipeline[f].handler((f?this.getDisplayRows(f-1):this.activeRows).slice(0),n);this.setDisplayRows(v||this.getDisplayRows(f-1).slice(0),f)}}rr.elVisible(this.element)&&(n?this.reRenderInPosition():(t||this.table.columnManager.renderer.renderColumns(),this.renderTable(),a.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),this.dispatch("data-refeshed")}}regenerateRowNumbers(){this.rowNumColumn&&this.activeRows.forEach(t=>{var e=t.getCell(this.rowNumColumn);e&&e._generateContents()})}setActiveRows(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length}resetDisplayRows(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length}getNextDisplayIndex(){return this.displayRows.length}setDisplayRows(t,e){var n=!0;return e&&void 0!==this.displayRows[e]?(this.displayRows[e]=t,n=!0):(this.displayRows.push(t),n=e=this.displayRows.length-1),e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),n}getDisplayRows(t){return void 0===t?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]}getVisibleRows(t){return this.renderer.visibleRows(!t)}displayRowIterator(t){this.activeRowsPipeline.forEach(t),this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length}getRows(t){var e;switch(t){case"active":e=this.activeRows;break;case"display":e=this.table.rowManager.getDisplayRows();break;case"visible":e=this.getVisibleRows(!0);break;default:e=this.chain("rows-retrieve",t,null,this.rows)||this.rows}return e}reRenderInPosition(t){this.redrawBlock?t?t():this.redrawBlockRederInPosition=!0:this.renderer.rerenderRows(t)}initializeRenderer(){var t;(t="string"==typeof this.table.options.renderVertical?{virtual:$9,basic:Y9}[this.table.options.renderVertical]:this.table.options.renderVertical)?(this.renderer=new t(this.table,this.element,this.tableElement),this.renderer.initialize(),this.fixedHeight=!(!this.table.element.clientHeight&&!this.table.options.height)):console.error("Unable to find matching renderer:",table.options.renderVertical)}getRenderMode(){return this.renderMode}renderTable(){this.dispatchExternal("renderStarted"),this.element.scrollTop=0,this._clearTable(),this.displayRowsCount?(this.renderer.renderRows(),this.firstRender&&(this.firstRender=!1,this.layoutRefresh())):this.renderEmptyScroll(),this.fixedHeight||this.adjustTableSize(),this.dispatch("table-layout"),this.displayRowsCount||this._showPlaceholder(),this.dispatchExternal("renderComplete")}renderEmptyScroll(){this.table.options.placeholder?this.tableElement.style.display="none":this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px"}_clearTable(){this._clearPlaceholder(),this.scrollTop=0,this.scrollLeft=0,this.renderer.clearRows()}_showPlaceholder(){this.table.options.placeholder&&(this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder),this.table.options.placeholder.style.width=this.table.columnManager.getWidth()+"px")}_clearPlaceholder(){this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder)}styleRow(t,e){var n=t.getElement();e%2?(n.classList.add("tabulator-row-even"),n.classList.remove("tabulator-row-odd")):(n.classList.add("tabulator-row-odd"),n.classList.remove("tabulator-row-even"))}normalizeHeight(){this.activeRows.forEach(function(t){t.normalizeHeight()})}adjustTableSize(){var t=this.element.clientHeight;if("fill"===this.renderer.verticalFillMode){let e=Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height+(this.table.footerManager&&this.table.footerManager.active&&!this.table.footerManager.external?this.table.footerManager.getElement().getBoundingClientRect().height:0));this.fixedHeight?(this.element.style.minHeight="calc(100% - "+e+"px)",this.element.style.height="calc(100% - "+e+"px)",this.element.style.maxHeight="calc(100% - "+e+"px)"):(this.element.style.height="",this.element.style.height=this.table.element.clientHeight-e+"px",this.element.scrollTop=this.scrollTop),this.renderer.resize(),!this.fixedHeight&&t!=this.element.clientHeight&&(this.subscribed("table-resize")?this.dispatch("table-resize"):this.redraw())}}reinitialize(){this.rows.forEach(function(t){t.reinitialize(!0)})}blockRedraw(){this.redrawBlock=!0,this.redrawBlockRestoreConfig=!1}restoreRedraw(){this.redrawBlock=!1,this.redrawBlockRestoreConfig?(this.refreshActiveData(this.redrawBlockRestoreConfig.handler,this.redrawBlockRestoreConfig.skipStage,this.redrawBlockRestoreConfig.renderInPosition),this.redrawBlockRestoreConfig=!1):this.redrawBlockRederInPosition&&this.reRenderInPosition(),this.redrawBlockRederInPosition=!1}redraw(t){var e=this.scrollLeft;this.adjustTableSize(),this.table.tableWidth=this.table.element.clientWidth,t?this.renderTable():(this.reRenderInPosition(),this.scrollHorizontal(e),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))}resetScroll(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))}}class J9 extends Ua{constructor(t){super(t),this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this.initializeElement()}initialize(){this.initializeElement()}createElement(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t}initializeElement(){if(this.table.options.footerElement)switch(typeof this.table.options.footerElement){case"string":"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement}}getElement(){return this.element}append(t,e){this.activate(e),this.element.appendChild(t),this.table.rowManager.adjustTableSize()}prepend(t,e){this.activate(e),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()}remove(t){t.parentNode.removeChild(t),this.deactivate()}deactivate(t){(!this.element.firstChild||t)&&(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)}activate(t){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),t&&this.links.push(t)}redraw(){this.links.forEach(function(t){t.footerRedraw()})}}class Q9 extends Ua{constructor(t){super(t),this.el=this.table.element,this.abortClasses=["tabulator-headers","tabulator-table"],this.previousTargets={},this.listeners=["click","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","touchstart","touchend"],this.componentMap={"tabulator-cell":"cell","tabulator-row":"row","tabulator-group":"group","tabulator-col":"column"},this.buildListenerMap(),this.bindSubscriptionWatchers()}buildListenerMap(){var t={};this.listeners.forEach(e=>{t[e]={handler:null,components:[]}}),this.listeners=t}bindSubscriptionWatchers(){var t=Object.keys(this.listeners),e=Object.values(this.componentMap);for(let n of e)for(let a of t)this.subscriptionChange(n+"-"+a,this.subscriptionChanged.bind(this,n,a))}subscriptionChanged(t,e,n){var a=this.listeners[e].components,c=a.indexOf(t),d=!1;n?-1===c&&(a.push(t),d=!0):this.subscribed(t+"-"+e)||c>-1&&(a.splice(c,1),d=!0),d&&this.updateEventListeners()}updateEventListeners(){for(let t in this.listeners){let e=this.listeners[t];e.components.length?e.handler||(e.handler=this.track.bind(this,t),this.el.addEventListener(t,e.handler)):e.handler&&(this.el.removeEventListener(t,e.handler),e.handler=null)}}track(t,e){var n=e.composedPath&&e.composedPath()||e.path,a=this.findTargets(n);a=this.bindComponents(t,a),this.triggerEvents(t,e,a)}findTargets(t){var e={};let n=Object.keys(this.componentMap);for(let a of t){let c=a.classList?[...a.classList]:[];if(c.filter(f=>this.abortClasses.includes(f)).length)break;let p=c.filter(f=>n.includes(f));for(let f of p)e[this.componentMap[f]]=a}return e.group&&e.group===e.row&&delete e.row,e}bindComponents(t,e){var n=Object.keys(e).reverse(),a=this.listeners[t],c={};for(let d of n){let p,f=e[d],v=this.previousTargets[d];if(v&&v.target===f)p=v.component;else switch(d){case"row":case"group":(a.components.includes("row")||a.components.includes("cell"))&&(p=this.table.rowManager.getVisibleRows().find(M=>M.getElement()===f));break;case"column":a.components.includes("column")&&(p=this.table.columnManager.findColumn(f));break;case"cell":a.components.includes("cell")&&(p=e.row.findCell(f))}p&&(e[d]=p,c[d]={target:f,component:p})}return this.previousTargets=c,e}triggerEvents(t,e,n){var a=this.listeners[t];for(let c in n)n[c]&&a.components.includes(c)&&this.dispatch(c+"-"+t,e,n[c])}}class Z9{constructor(t){this.table=t,this.bindings={}}bind(t,e,n){this.bindings[t]||(this.bindings[t]={}),this.bindings[t][e]?console.warn("Unable to bind component handler, a matching function name is already bound",t,e,hanlder):this.bindings[t][e]=n}handle(t,e,n){if(this.bindings[t]&&this.bindings[t][n])return this.bindings[t][n].bind(null,e);"then"!==n&&"string"==typeof n&&!n.startsWith("_")&&console.error("The "+t+" component does not have a "+n+" function, have you checked that you have the correct Tabulator module installed?")}}class q9 extends Ua{constructor(t){super(t),this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=null,this.errorElement=null,this.requestOrder=0,this.loading=!1}initialize(){var t;this.loaderElement.appendChild(this.msgElement),this.table.options.dataLoaderLoading&&("string"==typeof this.table.options.dataLoaderLoading?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderLoading.trim(),this.loadingElement=t.firstElementChild):this.loadingElement=this.table.options.dataLoaderLoading),this.table.options.dataLoaderError&&("string"==typeof this.table.options.dataLoaderError?((t=document.createElement("template")).innerHTML=this.table.options.dataLoaderError.trim(),this.errorElement=t.firstElementChild):this.errorElement=this.table.options.dataLoaderError)}createLoaderElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader"),t}createMsgElement(){var t=document.createElement("div");return t.classList.add("tabulator-loader-msg"),t.setAttribute("role","alert"),t}load(t,e,n,a,c){var d=++this.requestOrder;return this.dispatchExternal("dataLoading",t),t&&(0==t.indexOf("{")||0==t.indexOf("["))&&(t=JSON.parse(t)),this.confirm("data-loading",t,e,n,c)?(this.loading=!0,c||this.showLoader(),e=this.chain("data-params",[t,n,c],e||{},{}),e=this.mapParams(e,this.table.options.dataSendParams),this.chain("data-load",[t,e,n,c],Promise.resolve([])).then(v=>{!Array.isArray(v)&&"object"==typeof v&&(v=this.mapParams(v,this.objectInvert(this.table.options.dataReceiveParams)));var C=this.chain("data-loaded",v,null,v);d==this.requestOrder?(this.hideLoader(),!1!==C&&(this.dispatchExternal("dataLoaded",C),this.table.rowManager.setData(C,a,!a))):console.warn("Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made")}).catch(v=>{console.error("Data Load Error: ",v),this.dispatchExternal("dataLoadError",v),c||this.showError(),setTimeout(()=>{this.hideLoader()},3e3)}).finally(()=>{this.loading=!1})):(this.dispatchExternal("dataLoaded",t),t||(t=[]),this.table.rowManager.setData(t,a,!a),Promise.resolve())}mapParams(t,e){var n={};for(let a in t)n[e.hasOwnProperty(a)?e[a]:a]=t[a];return n}objectInvert(t){var e={};for(let n in t)e[t[n]]=n;return e}blockActiveLoad(){this.requestOrder++}showLoader(){if("function"==typeof this.table.options.dataLoader?this.table.options.dataLoader():this.table.options.dataLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.langText("data|loading"),this.table.element.appendChild(this.loaderElement)}}showError(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.langText("data|error"),this.table.element.appendChild(this.loaderElement)}hideLoader(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)}}class eX{constructor(t,e,n){this.table=t,this.events={},this.optionsList=e||{},this.subscriptionNotifiers={},this.dispatch=n?this._debugDispatch.bind(this):this._dispatch.bind(this),this.debug=n}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var n;if(this.events[t]){if(e){if(!((n=this.events[t].findIndex(a=>a===e))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(n,1)}else delete this.events[t];this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_notifiySubscriptionChange(t,e){var n=this.subscriptionNotifiers[t];n&&n.forEach(a=>{a(e)})}_dispatch(){var n,t=Array.from(arguments),e=t.shift();return this.events[e]&&this.events[e].forEach((a,c)=>{let d=a.apply(this.table,t);c||(n=d)}),n}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="ExternalEvent:"+t[0],(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}}class tX{constructor(t){this.events={},this.subscriptionNotifiers={},this.dispatch=t?this._debugDispatch.bind(this):this._dispatch.bind(this),this.chain=t?this._debugChain.bind(this):this._chain.bind(this),this.confirm=t?this._debugConfirm.bind(this):this._confirm.bind(this),this.debug=t}subscriptionChange(t,e){this.subscriptionNotifiers[t]||(this.subscriptionNotifiers[t]=[]),this.subscriptionNotifiers[t].push(e),this.subscribed(t)&&this._notifiySubscriptionChange(t,!0)}subscribe(t,e,n=1e4){this.events[t]||(this.events[t]=[]),this.events[t].push({callback:e,priority:n}),this.events[t].sort((a,c)=>a.priority-c.priority),this._notifiySubscriptionChange(t,!0)}unsubscribe(t,e){var n;if(this.events[t]){if(e){if(!((n=this.events[t].findIndex(a=>a.callback===e))>-1))return void console.warn("Cannot remove event, no matching event found:",t,e);this.events[t].splice(n,1)}this._notifiySubscriptionChange(t,!1)}else console.warn("Cannot remove event, no events set on:",t)}subscribed(t){return this.events[t]&&this.events[t].length}_chain(t,e,n,a){var c=n;return Array.isArray(e)||(e=[e]),this.subscribed(t)?(this.events[t].forEach((d,p)=>{c=d.callback.apply(this,e.concat([c]))}),c):"function"==typeof a?a():a}_confirm(t,e){var n=!1;return Array.isArray(e)||(e=[e]),this.subscribed(t)&&this.events[t].forEach((a,c)=>{a.callback.apply(this,e)&&(n=!0)}),n}_notifiySubscriptionChange(t,e){var n=this.subscriptionNotifiers[t];n&&n.forEach(a=>{a(e)})}_dispatch(){var t=Array.from(arguments),e=t.shift();this.events[e]&&this.events[e].forEach(n=>{n.callback.apply(this,t)})}_debugDispatch(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._dispatch(...arguments)}_debugChain(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._chain(...arguments)}_debugConfirm(){var t=Array.from(arguments),e=t[0];return t[0]="InternalEvent:"+e,(!0===this.debug||this.debug.includes(e))&&console.log(...t),this._confirm(...arguments)}}let db=(()=>{class r{static register(e){r.tables.push(e)}static deregister(e){var n=r.tables.indexOf(e);n>-1&&r.tables.splice(n,1)}static lookupTable(e,n){var c,d,a=[];if("string"==typeof e){if((c=document.querySelectorAll(e)).length)for(var p=0;p<c.length;p++)(d=r.matchElement(c[p]))&&a.push(d)}else"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e instanceof Jp?(d=r.matchElement(e))&&a.push(d):Array.isArray(e)?e.forEach(function(f){a=a.concat(r.lookupTable(f))}):n||console.warn("Table Connection Error - Invalid Selector",e);return a}static matchElement(e){return r.tables.find(function(n){return e instanceof Jp?n===e:n.element===e})}}return r.tables=[],r})();function Ak(r){r.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()}var oX={fitData:function(r){this.table.columnManager.renderer.reinitializeColumnWidths(r),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:Ak,fitDataTable:Ak,fitDataStretch:function(r){var t=0,e=this.table.rowManager.element.clientWidth,n=0,a=!1;r.forEach((c,d)=>{c.widthFixed||c.reinitializeWidth(),(this.table.options.responsiveLayout?c.modules.responsive.visible:c.visible)&&(a=c),c.visible&&(t+=c.getWidth())}),a?(n=e-t+a.getWidth(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&(a.setWidth(0),this.table.modules.responsiveLayout.update()),n>0?a.setWidth(n):a.reinitializeWidth()):this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(r){var c,v,t=this.table.element.clientWidth,e=0,n=0,a=0,d=[],p=[],f=0,C=0;function M(P){return"string"==typeof P?P.indexOf("%")>-1?t/100*parseInt(P):parseInt(P):P}function O(P,W,ne,K){var ve=[],Te=0,qe=0,pt=0,fn=a,Un=0,Xn=0,Li=[];function Yi(Nn){return ne*(Nn.column.definition.widthGrow||1)}function Ai(Nn){return M(Nn.width)-ne*(Nn.column.definition.widthShrink||0)}return P.forEach(function(Nn,Co){var Hr=K?Ai(Nn):Yi(Nn);Nn.column.minWidth>=Hr?ve.push(Nn):Nn.column.maxWidth&&Nn.column.maxWidth<Hr?(Nn.width=Nn.column.maxWidth,W-=Nn.column.maxWidth,(fn-=K?Nn.column.definition.widthShrink||1:Nn.column.definition.widthGrow||1)&&(ne=Math.floor(W/fn))):(Li.push(Nn),Xn+=K?Nn.column.definition.widthShrink||1:Nn.column.definition.widthGrow||1)}),ve.length?(ve.forEach(function(Nn){Te+=K?Nn.width-Nn.column.minWidth:Nn.column.minWidth,Nn.width=Nn.column.minWidth}),Un=(qe=W-Te)-(pt=Xn?Math.floor(qe/Xn):qe)*Xn,Un+=O(Li,qe,pt,K)):(Un=Xn?W-Math.floor(W/Xn)*Xn:W,Li.forEach(function(Nn){Nn.width=K?Ai(Nn):Yi(Nn)})),Un}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(t-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),r.forEach(function(P){var W,ne,K;P.visible&&(W=P.definition.width,ne=parseInt(P.minWidth),W?(K=M(W),e+=K>ne?K:ne,P.definition.widthShrink&&(p.push({column:P,width:K>ne?K:ne}),f+=P.definition.widthShrink)):(d.push({column:P,width:0}),a+=P.definition.widthGrow||1))}),n=t-e,c=Math.floor(n/a),C=O(d,n,c,!1),d.length&&C>0&&(d[d.length-1].width+=+C),d.forEach(function(P){n-=P.width}),(v=Math.abs(C)+n)>0&&f&&(C=O(p,v,Math.floor(v/f),!0)),p.length&&(p[p.length-1].width-=C),d.forEach(function(P){P.column.setWidth(P.width)}),p.forEach(function(P){P.column.setWidth(P.width)})}},aX={default:{groups:{item:"item",items:"items"},columns:{},data:{loading:"Loading",error:"Error"},pagination:{page_size:"Page Size",page_title:"Show Page",first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page",all:"All"},headerFilters:{default:"filter column...",columns:{}}}},lX=Object.freeze({__proto__:null,LayoutModule:(()=>{class r extends si{constructor(e){super(e,"layout"),this.mode=null,this.registerTableOption("layout","fitData"),this.registerTableOption("layoutColumnsOnNewData",!1),this.registerColumnOption("widthGrow"),this.registerColumnOption("widthShrink")}initialize(){var e=this.table.options.layout;r.modes[e]?this.mode=e:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+e),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)}getMode(){return this.mode}layout(){r.modes[this.mode].call(this,this.table.columnManager.columnsByIndex),this.dispatch("layout-refreshed")}}return r.moduleName="layout",r.modes=oX,r})(),LocalizeModule:(()=>{class r extends si{constructor(e){super(e),this.locale="default",this.lang=!1,this.bindings={},this.langList={},this.registerTableOption("locale",!1),this.registerTableOption("langs",{})}initialize(){this.langList=rr.deepClone(r.langs),!1!==this.table.options.columnDefaults.headerFilterPlaceholder&&this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);for(let e in this.table.options.langs)this.installLang(e,this.table.options.langs[e]);this.setLocale(this.table.options.locale),this.registerTableFunction("setLocale",this.setLocale.bind(this)),this.registerTableFunction("getLocale",this.getLocale.bind(this)),this.registerTableFunction("getLang",this.getLang.bind(this))}setHeaderFilterPlaceholder(e){this.langList.default.headerFilters.default=e}setHeaderFilterColumnPlaceholder(e,n){this.langList.default.headerFilters.columns[e]=n,this.lang&&!this.lang.headerFilters.columns[e]&&(this.lang.headerFilters.columns[e]=n)}installLang(e,n){this.langList[e]?this._setLangProp(this.langList[e],n):this.langList[e]=n}_setLangProp(e,n){for(let a in n)e[a]&&"object"==typeof e[a]?this._setLangProp(e[a],n[a]):e[a]=n[a]}setLocale(e){if(!0===(e=e||"default")&&navigator.language&&(e=navigator.language.toLowerCase()),e&&!this.langList[e]){let a=e.split("-")[0];this.langList[a]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",e,a),e=a):(console.warn("Localization Error - Matching locale not found, using default: ",e),e="default")}this.locale=e,this.lang=rr.deepClone(this.langList.default||{}),"default"!=e&&function n(a,c){for(var d in a)"object"==typeof a[d]?(c[d]||(c[d]={}),n(a[d],c[d])):c[d]=a[d]}(this.langList[e],this.lang),this.dispatchExternal("localized",this.locale,this.lang),this._executeBindings()}getLocale(e){return this.locale}getLang(e){return e?this.langList[e]:this.lang}getText(e,n){var a=(e=n?e+"|"+n:e).split("|");return this._getLangElement(a,this.locale)||""}_getLangElement(e,n){var a=this.lang;return e.forEach(function(c){var d;a&&(a=void 0!==(d=a[c])&&d)}),a}bind(e,n){this.bindings[e]||(this.bindings[e]=[]),this.bindings[e].push(n),n(this.getText(e),this.lang)}_executeBindings(){for(let e in this.bindings)this.bindings[e].forEach(n=>{n(this.getText(e),this.lang)})}}return r.moduleName="localize",r.langs=aX,r})(),CommsModule:(()=>{class r extends si{constructor(e){super(e)}initialize(){this.registerTableFunction("tableComms",this.receive.bind(this))}getConnections(e){var n=[];return db.lookupTable(e).forEach(c=>{this.table!==c&&n.push(c)}),n}send(e,n,a,c){var d=this.getConnections(e);d.forEach(p=>{p.tableComms(this.table.element,n,a,c)}),!d.length&&e&&console.warn("Table Connection Error - No tables matching selector found",e)}receive(e,n,a,c){if(this.table.modExists(n))return this.table.modules[n].commsReceived(e,a,c);console.warn("Inter-table Comms Error - no such module:",n)}}return r.moduleName="comms",r})()});class xk{constructor(t,e){this.bindStaticFuctionality(t),this.bindModules(t,lX,!0),e&&this.bindModules(t,e)}bindStaticFuctionality(t){t.moduleBindings={},t.extendModule=function(e,n,a){if(t.moduleBindings[e]){var c=t.moduleBindings[e][n];if(c)if("object"==typeof a)for(let d in a)c[d]=a[d];else console.warn("Module Error - Invalid value type, it must be an object");else console.warn("Module Error - property does not exist:",n)}else console.warn("Module Error - module does not exist:",e)},t.registerModule=function(e){Array.isArray(e)||(e=[e]),e.forEach(n=>{t.registerModuleBinding(n)})},t.registerModuleBinding=function(e){t.moduleBindings[e.moduleName]=e},t.findTable=function(e){var n=db.lookupTable(e,!0);return!(Array.isArray(n)&&!n.length)&&n},t.prototype.bindModules=function(){for(var e in this.modules={},t.moduleBindings){let n=t.moduleBindings[e];this.modules[e]=new n(this),n.prototype.moduleCore?this.modulesCore[e]=this.modules[e]:this.modulesRegular[e]=this.modules[e]}}}bindModules(t,e,n){var a=Object.values(e);n&&a.forEach(c=>{c.prototype.moduleCore=!0}),t.registerModule(a)}}let Jp=(()=>{class r{constructor(e,n){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.vdomHoz=null,this.externalEvents=null,this.eventBus=null,this.interactionMonitor=!1,this.browser="",this.browserSlow=!1,this.browserMobile=!1,this.rtl=!1,this.originalElement=null,this.componentFunctionBinder=new Z9(this),this.dataLoader=!1,this.modules={},this.modulesCore={},this.modulesRegular={},this.optionsList=new Ik(this,"table constructor"),this.initialized=!1,this.initializeElement(e)&&(this.initialzeCoreSystems(n),setTimeout(()=>{this._create()})),db.register(this)}initializeElement(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement?(this.element=e,!0):"string"==typeof e?(this.element=document.querySelector(e),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",e),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",e),!1)}initialzeCoreSystems(e){this.columnManager=new X9(this),this.rowManager=new K9(this),this.footerManager=new J9(this),this.dataLoader=new q9(this),this.bindModules(),this.options=this.optionsList.generate(r.defaultOptions,e),this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.externalEvents=new eX(this,this.options,this.options.debugEventsExternal),this.eventBus=new tX(this.options.debugEventsInternal),this.interactionMonitor=new Q9(this),this.dataLoader.initialize(),this.columnManager.initialize(),this.rowManager.initialize(),this.footerManager.initialize()}_mapDepricatedFunctionality(){}_clearSelection(){this.element.classList.add("tabulator-block-select"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.element.classList.remove("tabulator-block-select")}_create(){this.externalEvents.dispatch("tableBuilding"),this.eventBus.dispatch("table-building"),this._rtlCheck(),this._buildElement(),this._initializeTable(),this._loadInitialData(),this.initialized=!0,this.externalEvents.dispatch("tableBuilt")}_rtlCheck(){var e=window.getComputedStyle(this.element);switch(this.options.textDirection){case"auto":if("rtl"!==e.direction)break;case"rtl":this.element.classList.add("tabulator-rtl"),this.rtl=!0;break;case"ltr":this.element.classList.add("tabulator-ltr");default:this.rtl=!1}}_clearObjectPointers(){this.options.columns=this.options.columns.slice(0),this.options.data&&!this.options.reactiveData&&(this.options.data=this.options.data.slice(0))}_buildElement(){var a,e=this.element,n=this.options;if("TABLE"===e.tagName){this.originalElement=this.element,a=document.createElement("div");var c=e.attributes;for(var d in c)"object"==typeof c[d]&&a.setAttribute(c[d].name,c[d].value);e.parentNode.replaceChild(a,e),this.element=e=a}for(e.classList.add("tabulator"),e.setAttribute("role","grid");e.firstChild;)e.removeChild(e.firstChild);n.height&&(n.height=isNaN(n.height)?n.height:n.height+"px",e.style.height=n.height),!1!==n.minHeight&&(n.minHeight=isNaN(n.minHeight)?n.minHeight:n.minHeight+"px",e.style.minHeight=n.minHeight),!1!==n.maxHeight&&(n.maxHeight=isNaN(n.maxHeight)?n.maxHeight:n.maxHeight+"px",e.style.maxHeight=n.maxHeight)}_initializeTable(){var e=this.element,n=this.options;this.columnManager.initialize(),this.rowManager.initialize(),this._detectBrowser();for(let d in this.modulesCore)this.modulesCore[d].initialize();if("string"==typeof n.placeholder){var a=document.createElement("div");a.classList.add("tabulator-placeholder");var c=document.createElement("span");c.innerHTML=n.placeholder,a.appendChild(c),n.placeholder=a}e.appendChild(this.columnManager.getElement()),e.appendChild(this.rowManager.getElement()),n.footerElement&&this.footerManager.activate(),n.autoColumns&&n.data&&this.columnManager.generateColumnsFromRowData(this.options.data);for(let d in this.modulesRegular)this.modulesRegular[d].initialize();this.columnManager.setColumns(n.columns),this.eventBus.dispatch("table-built")}_loadInitialData(){this.dataLoader.load(this.options.data)}destroy(){var e=this.element;for(db.deregister(this),this.eventBus.dispatch("table-destroy"),this.rowManager.rows.forEach(function(n){n.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[];e.firstChild;)e.removeChild(e.firstChild);e.classList.remove("tabulator")}_detectBrowser(){var e=navigator.userAgent||navigator.vendor||window.opera;e.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):e.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):e.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1),this.browserMobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}blockRedraw(){return this.rowManager.blockRedraw()}restoreRedraw(){return this.rowManager.restoreRedraw()}setDataFromLocalFile(e){return new Promise((n,a)=>{var c=document.createElement("input");c.type="file",c.accept=e||".json,application/json",c.addEventListener("change",d=>{var v,p=c.files[0],f=new FileReader;f.readAsText(p),f.onload=C=>{try{v=JSON.parse(f.result)}catch(M){return console.warn("File Load Error - File contents is invalid JSON",M),void a(M)}this.setData(v).then(M=>{n(M)}).catch(M=>{n(M)})},f.onerror=C=>{console.warn("File Load Error - Unable to read file"),a()}}),c.click()})}setData(e,n,a){if(this.initialized)return this.dataLoader.load(e,n,a,!1);console.warn("setData failed - table not yet initialized. To set initial data please use the 'data' property in the table constructor.")}clearData(){this.dataLoader.blockActiveLoad(),this.rowManager.clearData()}getData(e){return this.rowManager.getData(e)}getDataCount(e){return this.rowManager.getDataCount(e)}replaceData(e,n,a){if(this.initialized)return this.dataLoader.load(e,n,a,!0,!0);console.warn("replaceData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateData(e){var n=0;if(this.initialized)return new Promise((a,c)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(d=>{var p=this.rowManager.findRow(d[this.options.index]);p&&(n++,p.updateData(d).then(()=>{--n||a()}))}):(console.warn("Update Error - No data provided"),c("Update Error - No data provided"))});console.warn("updateData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}addData(e,n,a){if(this.initialized)return new Promise((c,d)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?this.rowManager.addRows(e,n,a).then(p=>{var f=[];p.forEach(function(v){f.push(v.getComponent())}),c(f)}):(console.warn("Update Error - No data provided"),d("Update Error - No data provided"))});console.warn("addData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddData(e){var n=[],a=0;if(this.initialized)return new Promise((c,d)=>{this.dataLoader.blockActiveLoad(),"string"==typeof e&&(e=JSON.parse(e)),e?e.forEach(p=>{var f=this.rowManager.findRow(p[this.options.index]);a++,f?f.updateData(p).then(()=>{a--,n.push(f.getComponent()),a||c(n)}):this.rowManager.addRows(p).then(v=>{a--,n.push(v[0].getComponent()),a||c(n)})}):(console.warn("Update Error - No data provided"),d("Update Error - No data provided"))});console.warn("updateOrAddData failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRow(e){var n=this.rowManager.findRow(e);return n?n.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}getRowFromPosition(e,n){var a=this.rowManager.getRowFromPosition(e,n);return a?a.getComponent():(console.warn("Find Error - No matching row found:",e),!1)}deleteRow(e){var n=[];Array.isArray(e)||(e=[e]);for(let a of e){let c=this.rowManager.findRow(a,!0);if(!c)return console.error("Delete Error - No matching row found:",a),Promise.reject("Delete Error - No matching row found");n.push(c)}return n.sort((a,c)=>this.rowManager.rows.indexOf(a)>this.rowManager.rows.indexOf(c)?1:-1),n.forEach(a=>{a.delete()}),this.rowManager.reRenderInPosition(),Promise.resolve()}addRow(e,n,a){if(this.initialized)return"string"==typeof e&&(e=JSON.parse(e)),this.rowManager.addRows(e,n,a).then(c=>c[0].getComponent());console.warn("addRow failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}updateOrAddRow(e,n){var a=this.rowManager.findRow(e);return"string"==typeof n&&(n=JSON.parse(n)),a?a.updateData(n).then(()=>a.getComponent()):this.rowManager.addRows(n).then(c=>c[0].getComponent())}updateRow(e,n){var a=this.rowManager.findRow(e);return"string"==typeof n&&(n=JSON.parse(n)),a?a.updateData(n).then(()=>{resolve(a.getComponent())}):(console.warn("Update Error - No matching row found:",e),Promise.reject("Update Error - No matching row found"))}scrollToRow(e,n,a){var c=this.rowManager.findRow(e);return c?this.rowManager.scrollToRow(c,n,a):(console.warn("Scroll Error - No matching row found:",e),Promise.reject("Scroll Error - No matching row found"))}moveRow(e,n,a){var c=this.rowManager.findRow(e);c?c.moveToRow(n,a):console.warn("Move Error - No matching row found:",e)}getRows(e){if(this.initialized)return this.rowManager.getComponents(e);console.warn("getRows failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}getRowPosition(e,n){var a=this.rowManager.findRow(e);return a?this.rowManager.getRowPosition(a,n):(console.warn("Position Error - No matching row found:",e),!1)}setColumns(e){this.initialized?this.columnManager.setColumns(e):console.warn("setColumns failed - table not yet initialized. To set initial data please use the 'columns' property in the table constructor.")}getColumns(e){return this.columnManager.getComponents(e)}getColumn(e){var n=this.columnManager.findColumn(e);return n?n.getComponent():(console.warn("Find Error - No matching column found:",e),!1)}getColumnDefinitions(){return this.columnManager.getDefinitionTree()}showColumn(e){var n=this.columnManager.findColumn(e);if(!n)return console.warn("Column Show Error - No matching column found:",e),!1;n.show()}hideColumn(e){var n=this.columnManager.findColumn(e);if(!n)return console.warn("Column Hide Error - No matching column found:",e),!1;n.hide()}toggleColumn(e){var n=this.columnManager.findColumn(e);if(!n)return console.warn("Column Visibility Toggle Error - No matching column found:",e),!1;n.visible?n.hide():n.show()}addColumn(e,n,a){var c=this.columnManager.findColumn(a);return this.columnManager.addColumn(e,n,c).then(d=>d.getComponent())}deleteColumn(e){var n=this.columnManager.findColumn(e);return n?n.delete():(console.warn("Column Delete Error - No matching column found:",e),Promise.reject())}updateColumnDefinition(e,n){var a=this.columnManager.findColumn(e);return a?a.updateDefinition(n):(console.warn("Column Update Error - No matching column found:",e),Promise.reject())}moveColumn(e,n,a){var c=this.columnManager.findColumn(e),d=this.columnManager.findColumn(n);c?d?this.columnManager.moveColumn(c,d,a):console.warn("Move Error - No matching column found:",d):console.warn("Move Error - No matching column found:",e)}scrollToColumn(e,n,a){return new Promise((c,d)=>{var p=this.columnManager.findColumn(e);return p?this.columnManager.scrollToColumn(p,n,a):(console.warn("Scroll Error - No matching column found:",e),Promise.reject("Scroll Error - No matching column found"))})}redraw(e){this.initialized?(this.columnManager.redraw(e),this.rowManager.redraw(e)):console.warn("redraw failed - table not yet initialized. Please wait for the `tableBuilt` event before calling this function.")}setHeight(e){this.options.height=isNaN(e)?e:e+"px",this.element.style.height=this.options.height,this.rowManager.initializeRenderer(),this.rowManager.redraw()}on(e,n){this.externalEvents.subscribe(e,n)}off(e,n){this.externalEvents.unsubscribe(e,n)}dispatchEvent(){Array.from(arguments).shift(),this.externalEvents.dispatch(...arguments)}modExists(e,n){return!!this.modules[e]||(n&&console.error("Tabulator Module Not Installed: "+e),!1)}module(e){var n=this.modules[e];return n||console.error("Tabulator module not installed: "+e),n}}return r.defaultOptions=W9,r})();new xk(Jp),new xk(class extends Jp{},G9);let uX=(()=>{class r{constructor(){this.a=null,this.b=null,this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],this.hotInstance=null}get hot(){if(null!=this.hotInstance)return this.hotInstance;throw new Error("hot is null")}initGrid(e){this.hotInstance=new Jp(e,{columns:[{title:"Step",field:"id"}],layout:"fitColumns",footerElement:'<div>\n        \x3c!-- <a href="javascript:copyClip()">Copy Clipboard</a>\n        &nbsp;&nbsp;&nbsp;&nbsp;\n        <a href="javascript:copyCSV()">CSV</a>\n        --\x3e\n    </div>',placeholder:"please press execute button"}),this.hot.replaceData([]),this.hot.redraw(!0)}AddStringToGrid(e){if(e.startsWith("{")&&e.endsWith("}"))try{var n=JSON.parse(e);return void this.objectsForGrid.push(n)}catch(d){}if(e.startsWith("[")&&e.endsWith("]"))try{for(var a=JSON.parse(e),c=0;c<a.length;c++)this.objectsForGrid.push(a[c]);return}catch(d){}this.stringsForGrid.push(e)}AddDataToGrid(e){this.dataObject.push([e]),this.AddStringToGrid("string"!=typeof e?"object"!=typeof e?e.toString():JSON.stringify(e):e)}ClearDataGrid(){this.dataObject=[],this.objectsForGrid=[],this.stringsForGrid=[],null!=this.hot&&(this.hot.setColumns([{title:"Step",field:"id"},{title:"Value",field:"val"}]),this.hot.replaceData([]),this.hot.redraw(!0))}hasOwnProperty(e,n){return null!=e&&e.hasOwnProperty(n)}AddObjectToFinishGrid(){for(var e=[],n=this.objectsForGrid,a=0;a<n.length;a++)"string"==typeof(c=n[a])?e.push("_"):e.push(...Object.keys(c));var d=new Set(e);e=Array.from(d);var p=[...e],f=[];for(a=0;a<n.length;a++){for(var c=n[a],v={Nr:a+1},C=0;C<e.length;C++){var M=e[C],O=this.goodNameForKey(M);if(c&&this.hasOwnProperty(c,M)){var P=c[M];v[O]="object"==typeof P?JSON.stringify(P):P}else v[O]="string"==typeof c&&0===C?c:""}f.push(v)}e.splice(0,0,"Nr"),p.splice(0,0,"Nr");var W=this.Headers(p);this.hot.setColumns(W),this.hot.replaceData(f)}Headers(e){return e.map(n=>({cellClick:function(a,c){var d=c.getRow().getData().Nr;c.getColumn().getField(),alert(`The row at : ${d} , col: ${d} has value :\n `+c.getValue())},title:n,field:this.goodNameForKey(n),headerFilter:!0,formatter:function(a,c,d){try{var p=a.getValue().toString();if(p.length<2)return p;if(p.startsWith("[")&&p.endsWith("]"))try{var f=JSON.parse(p),v=a.getRow().getData().Nr,M=a.getColumn().getField()+"_"+v;return d(function(){new Jp("#"+M,{data:f,autoColumns:!0,layout:"fitDataFill",headerSort:!1})}),"<div id='"+M+"'>"+p+"</div>"}catch(O){return p}}catch(O){return p}return a.getValue()}}))}AddStringToFinishGrid(){for(var e=[],n=0;n<this.stringsForGrid.length;n++)e.push({Nr:n+1,Text:this.stringsForGrid[n]});var c=this.Headers(["Nr","Text"]);this.hot.setColumns(c),this.hot.replaceData(e)}FinishGrid(){this.objectsForGrid.length+this.stringsForGrid.length!=0&&(this.objectsForGrid.length>0?this.AddObjectToFinishGrid():this.AddStringToFinishGrid(),this.hot.redraw(!0))}goodNameForKey(e){var n=e;return n.replace(".","_")}copyClip(){this.hot.copyToClipboard("all")}copyCSV(){this.hot.download("csv","data.csv",{bom:!0})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class hX{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new pX(t,this.resultSelector))}}class pX extends F{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;u(t)?e.push(new gX(t)):e.push("function"==typeof t[He]?new fX(t[He]()):new mX(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let a=t[n];a.stillUnsubscribed?this.destination.add(a.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let d=0;d<e;d++){let p=t[d];if("function"==typeof p.hasValue&&!p.hasValue())return}let a=!1;const c=[];for(let d=0;d<e;d++){let p=t[d],f=p.next();if(p.hasCompleted()&&(a=!0),f.done)return void n.complete();c.push(f.value)}this.resultSelector?this._tryresultSelector(c):n.next(c),a&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class fX{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class gX{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[He](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class mX extends ln{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[He](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return En(this.observable,new Xe(this))}}class _X extends D{constructor(t,e){super()}schedule(t,e=0){return this}}class hb extends _X{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,a=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(a,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(a,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let a,n=!1;try{this.work(t)}catch(c){n=!0,a=!!c&&c||new Error(c)}if(n)return this.unsubscribe(),a}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,a=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==a&&n.splice(a,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let Ok=(()=>{class r{constructor(e,n=r.now){this.SchedulerAction=e,this.now=n}schedule(e,n=0,a){return new this.SchedulerAction(this,e).schedule(a,n)}}return r.now=()=>Date.now(),r})();class Ga extends Ok{constructor(t,e=Ok.now){super(t,()=>Ga.delegate&&Ga.delegate!==this?Ga.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Ga.delegate&&Ga.delegate!==this?Ga.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const pb=new Ga(hb);function kk(r,t){return new Z(t?e=>t.schedule(bX,0,{error:r,subscriber:e}):e=>e.error(r))}function bX({error:r,subscriber:t}){t.error(r)}class bs{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return en(this.value);case"E":return kk(this.error);case"C":return jv()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new bs("N",t):bs.undefinedValueNotification}static createError(t){return new bs("E",void 0,t)}static createComplete(){return bs.completeNotification}}function fb(r,t=pb){const n=function(r){return r instanceof Date&&!isNaN(+r)}(r)?+r-t.now():Math.abs(r);return a=>a.lift(new yX(n,t))}bs.completeNotification=new bs("C"),bs.undefinedValueNotification=new bs("N",void 0);class yX{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new vw(t,this.delay,this.scheduler))}}class vw extends F{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,a=t.scheduler,c=t.destination;for(;n.length>0&&n[0].time-a.now()<=0;)n.shift().notification.observe(c);if(n.length>0){const d=Math.max(0,n[0].time-a.now());this.schedule(t,d)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(vw.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new CX(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(bs.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(bs.createComplete()),this.unsubscribe()}}class CX{constructor(t,e){this.time=t,this.notification=e}}class Nk{}class Lk{}class _c{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const a=e.slice(0,n),c=a.toLowerCase(),d=e.slice(n+1).trim();this.maybeSetNormalizedName(a,c),this.headers.has(c)?this.headers.get(c).push(d):this.headers.set(c,[d])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const a=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(a,n),this.maybeSetNormalizedName(e,a))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof _c?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new _c;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof _c?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const a=("a"===t.op?this.headers.get(e):void 0)||[];a.push(...n),this.headers.set(e,a);break;case"d":const c=t.value;if(c){let d=this.headers.get(e);if(!d)return;d=d.filter(p=>-1===c.indexOf(p)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class EX{encodeKey(t){return Pk(t)}encodeValue(t){return Pk(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const wX=/%(\d[a-f0-9])/gi,SX={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Pk(r){return encodeURIComponent(r).replace(wX,(t,e)=>{var n;return null!==(n=SX[e])&&void 0!==n?n:t})}function Fk(r){return`${r}`}class Tu{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new EX,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(a=>{const c=a.indexOf("="),[d,p]=-1==c?[t.decodeKey(a),""]:[t.decodeKey(a.slice(0,c)),t.decodeValue(a.slice(c+1))],f=e.get(d)||[];f.push(p),e.set(d,f)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const a=t[n];Array.isArray(a)?a.forEach(c=>{e.push({param:n,value:c,op:"a"})}):e.push({param:n,value:a,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Tu({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Fk(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const a=n.indexOf(Fk(t.value));-1!==a&&n.splice(a,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class DX{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function Bk(r){return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer}function Vk(r){return"undefined"!=typeof Blob&&r instanceof Blob}function Hk(r){return"undefined"!=typeof FormData&&r instanceof FormData}class gm{constructor(t,e,n,a){let c;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==n?n:null,c=a):c=n,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params)),this.headers||(this.headers=new _c),this.context||(this.context=new DX),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const p=e.indexOf("?");this.urlWithParams=e+(-1===p?"?":p<e.length-1?"&":"")+d}}else this.params=new Tu,this.urlWithParams=e}serializeBody(){return null===this.body?null:Bk(this.body)||Vk(this.body)||Hk(this.body)||function(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Tu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Hk(this.body)?null:Vk(this.body)?this.body.type||null:Bk(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Tu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,a=t.url||this.url,c=t.responseType||this.responseType,d=void 0!==t.body?t.body:this.body,p=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,f=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let v=t.headers||this.headers,C=t.params||this.params;const M=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(v=Object.keys(t.setHeaders).reduce((O,P)=>O.set(P,t.setHeaders[P]),v)),t.setParams&&(C=Object.keys(t.setParams).reduce((O,P)=>O.set(P,t.setParams[P]),C)),new gm(n,a,d,{params:C,headers:v,context:M,reportProgress:f,responseType:c,withCredentials:p})}}var Br=(()=>((Br=Br||{})[Br.Sent=0]="Sent",Br[Br.UploadProgress=1]="UploadProgress",Br[Br.ResponseHeader=2]="ResponseHeader",Br[Br.DownloadProgress=3]="DownloadProgress",Br[Br.Response=4]="Response",Br[Br.User=5]="User",Br))();class bw{constructor(t,e=200,n="OK"){this.headers=t.headers||new _c,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class yw extends bw{constructor(t={}){super(t),this.type=Br.ResponseHeader}clone(t={}){return new yw({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class gb extends bw{constructor(t={}){super(t),this.type=Br.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new gb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Uk extends bw{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Cw(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let Qp=(()=>{class r{constructor(e){this.handler=e}request(e,n,a={}){let c;if(e instanceof gm)c=e;else{let f,v;f=a.headers instanceof _c?a.headers:new _c(a.headers),a.params&&(v=a.params instanceof Tu?a.params:new Tu({fromObject:a.params})),c=new gm(e,n,void 0!==a.body?a.body:null,{headers:f,context:a.context,params:v,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const d=en(c).pipe(Wp(f=>this.handler.handle(f)));if(e instanceof gm||"events"===a.observe)return d;const p=d.pipe(di(f=>f instanceof gb));switch(a.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return p.pipe(Ee(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return p.pipe(Ee(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return p.pipe(Ee(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));case"json":default:return p.pipe(Ee(f=>f.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Tu).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,a={}){return this.request("PATCH",e,Cw(a,n))}post(e,n,a={}){return this.request("POST",e,Cw(a,n))}put(e,n,a={}){return this.request("PUT",e,Cw(a,n))}}return r.\u0275fac=function(e){return new(e||r)(be(Nk))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();class Gk{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Wk=new We("HTTP_INTERCEPTORS");let IX=(()=>{class r{intercept(e,n){return n.handle(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();const AX=/^\)\]\}',?\n/;let jk=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Z(n=>{const a=this.xhrFactory.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((P,W)=>a.setRequestHeader(P,W.join(","))),e.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const P=e.detectContentTypeHeader();null!==P&&a.setRequestHeader("Content-Type",P)}if(e.responseType){const P=e.responseType.toLowerCase();a.responseType="json"!==P?P:"text"}const c=e.serializeBody();let d=null;const p=()=>{if(null!==d)return d;const P=1223===a.status?204:a.status,W=a.statusText||"OK",ne=new _c(a.getAllResponseHeaders()),K=function(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(a)||e.url;return d=new yw({headers:ne,status:P,statusText:W,url:K}),d},f=()=>{let{headers:P,status:W,statusText:ne,url:K}=p(),ve=null;204!==W&&(ve=void 0===a.response?a.responseText:a.response),0===W&&(W=ve?200:0);let Te=W>=200&&W<300;if("json"===e.responseType&&"string"==typeof ve){const qe=ve;ve=ve.replace(AX,"");try{ve=""!==ve?JSON.parse(ve):null}catch(pt){ve=qe,Te&&(Te=!1,ve={error:pt,text:ve})}}Te?(n.next(new gb({body:ve,headers:P,status:W,statusText:ne,url:K||void 0})),n.complete()):n.error(new Uk({error:ve,headers:P,status:W,statusText:ne,url:K||void 0}))},v=P=>{const{url:W}=p(),ne=new Uk({error:P,status:a.status||0,statusText:a.statusText||"Unknown Error",url:W||void 0});n.error(ne)};let C=!1;const M=P=>{C||(n.next(p()),C=!0);let W={type:Br.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(W.total=P.total),"text"===e.responseType&&!!a.responseText&&(W.partialText=a.responseText),n.next(W)},O=P=>{let W={type:Br.UploadProgress,loaded:P.loaded};P.lengthComputable&&(W.total=P.total),n.next(W)};return a.addEventListener("load",f),a.addEventListener("error",v),a.addEventListener("timeout",v),a.addEventListener("abort",v),e.reportProgress&&(a.addEventListener("progress",M),null!==c&&a.upload&&a.upload.addEventListener("progress",O)),a.send(c),n.next({type:Br.Sent}),()=>{a.removeEventListener("error",v),a.removeEventListener("abort",v),a.removeEventListener("load",f),a.removeEventListener("timeout",v),e.reportProgress&&(a.removeEventListener("progress",M),null!==c&&a.upload&&a.upload.removeEventListener("progress",O)),a.readyState!==a.DONE&&a.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(be(ox))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();const Ew=new We("XSRF_COOKIE_NAME"),Tw=new We("XSRF_HEADER_NAME");class zk{}let Rw,OX=(()=>{class r{constructor(e,n,a){this.doc=e,this.platform=n,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=JA(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(be(xt),be(Pp),be(Ew))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),ww=(()=>{class r{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const a=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||a.startsWith("http://")||a.startsWith("https://"))return n.handle(e);const c=this.tokenService.getToken();return null!==c&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,c)})),n.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(be(zk),be(Tw))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),kX=(()=>{class r{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(Wk,[]);this.chain=n.reduceRight((a,c)=>new Gk(a,c),this.backend)}return this.chain.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(be(Lk),be(Yn))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),NX=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:ww,useClass:IX}]}}static withOptions(e={}){return{ngModule:r,providers:[e.cookieName?{provide:Ew,useValue:e.cookieName}:[],e.headerName?{provide:Tw,useValue:e.headerName}:[]]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[ww,{provide:Wk,useExisting:ww,multi:!0},{provide:zk,useClass:OX},{provide:Ew,useValue:"XSRF-TOKEN"},{provide:Tw,useValue:"X-XSRF-TOKEN"}]}),r})(),LX=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[Qp,{provide:Nk,useClass:kX},jk,{provide:Lk,useExisting:jk}],imports:[[NX.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),r})(),Xk=(()=>{class r{constructor(e){this.http=e}getDemoBlocks(){var e=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/all.txt?${e}`,{responseType:"text"}).pipe(Ee(n=>JSON.parse(n)))}getSwaggerLinks(){var e=(new Date).toISOString();return this.http.get(`assets/loadAtStartup/swaggers.json?${e}`,{responseType:"text"}).pipe(Ee(n=>JSON.parse(n)))}getDemoBlock(e){var n=(new Date).toISOString();return this.http.get(`assets/showUsage/demoBlocks/${e}.txt?${n}`,{responseType:"text"}).pipe(Pr(c=>{}),Ee(c=>c.toString()))}}return r.\u0275fac=function(e){return new(e||r)(be(Qp))},r.\u0275prov=mt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),mm=(()=>{class r{constructor(e,n){this.http=e,this.loadShowUsageService=n,this.settings=null,this.links=[],this.demoBlocks=[],this.Init()}Init(){return function(...r){const t=r[r.length-1];return"function"==typeof t&&r.pop(),mn(r,void 0).lift(new hX(t))}(this.getSettings(),this.loadShowUsageService.getSwaggerLinks(),this.loadShowUsageService.getDemoBlocks()).pipe(fb(2e3),Pr(([e,n,a])=>{this.settings=e,this.links=n,this.demoBlocks=a}),_o(()=>en("")))}getSettings(){var e=(new Date).toISOString();return this.http.get(`assets/settings.json?${e}`,{responseType:"text"}).pipe(Ee(n=>JSON.parse(n)))}}return r.\u0275fac=function(e){return new(e||r)(be(Qp),be(Xk))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),Sw=(()=>{class r{constructor(){this.sendData=new B}receiveData(){return this.sendData.asObservable()}sendDataToServer(e,n){this.sendData.next([e,n])}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();function dr(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}function bb(r,t=pb){return e=>e.lift(new zX(r,t))}class zX{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new XX(t,this.dueTime,this.scheduler))}}class XX extends F{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(YX,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function YX(r){r.debouncedNext()}function Yk(r){return t=>t.lift(new $X(r))}class $X{constructor(t){this.total=t}call(t,e){return e.subscribe(new KX(t,this.total))}}class KX extends F{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}function Zd(r,t){return e=>e.lift(new JX(r,t))}class JX{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new QX(t,this.compare,this.keySelector))}}class QX extends F{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:a}=this;e=a?a(t):t}catch(a){return this.destination.error(a)}let n=!1;if(this.hasKey)try{const{compare:a}=this;n=a(this.key,e)}catch(a){return this.destination.error(a)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function sn(r){return t=>t.lift(new ZX(r))}class ZX{constructor(t){this.notifier=t}call(t,e){const n=new qX(t),a=En(this.notifier,new Xe(n));return a&&!n.seenValue?(n.add(a),e.subscribe(n)):n}}class qX extends ln{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function ht(r){return null!=r&&"false"!=`${r}`}function ai(r,t=0){return function(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}(r)?Number(r):t}function yb(r){return Array.isArray(r)?r:[r]}function Vr(r){return null==r?"":"string"==typeof r?r:`${r}px`}function bc(r){return r instanceof Qe?r.nativeElement:r}try{Rw="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(r){Rw=!1}let bm,Cb,qd,Iw,Vn=(()=>{class r{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function(r){return r===nx}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Rw)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return r.\u0275fac=function(e){return new(e||r)(be(Pp))},r.\u0275prov=mt({factory:function(){return new r(be(Pp))},token:r,providedIn:"root"}),r})(),Zp=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({}),r})();function Du(r){return function(){if(null==bm&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>bm=!0}))}finally{bm=bm||!1}return bm}()?r:!!r.capture}function Qk(){if(null==qd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return qd=!1,qd;if("scrollBehavior"in document.documentElement.style)qd=!0;else{const r=Element.prototype.scrollTo;qd=!!r&&!/\{\s*\[native code\]\s*\}/.test(r.toString())}}return qd}function ym(){if("object"!=typeof document||!document)return 0;if(null==Cb){const r=document.createElement("div"),t=r.style;r.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",r.appendChild(e),document.body.appendChild(r),Cb=0,0===r.scrollLeft&&(r.scrollLeft=1,Cb=0===r.scrollLeft?1:2),r.parentNode.removeChild(r)}return Cb}function Zk(r){if(function(){if(null==Iw){const r="undefined"!=typeof document?document.head:null;Iw=!(!r||!r.createShadowRoot&&!r.attachShadow)}return Iw}()){const t=r.getRootNode?r.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function yc(){let r="undefined"!=typeof document&&document?document.activeElement:null;for(;r&&r.shadowRoot;){const t=r.shadowRoot.activeElement;if(t===r)break;r=t}return r}function Mu(r){return r.composedPath?r.composedPath()[0]:r.target}function Aw(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}let xw=(()=>{class r{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({factory:function(){return new r},token:r,providedIn:"root"}),r})(),Em=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[xw]}),r})();class ef extends class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new B,this._typeaheadSubscription=D.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new B,this.change=new B,t instanceof Vs&&t.changes.subscribe(e=>{if(this._activeItem){const a=e.toArray().indexOf(this._activeItem);a>-1&&a!==this._activeItemIndex&&(this._activeItemIndex=a)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Pr(e=>this._pressedLetters.push(e)),bb(t),di(()=>this._pressedLetters.length>0),Ee(()=>this._pressedLetters.join(""))).subscribe(e=>{const n=this._getItemsArray();for(let a=1;a<n.length+1;a++){const c=(this._activeItemIndex+a)%n.length,d=n[c];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(c);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,a=["altKey","ctrlKey","metaKey","shiftKey"].every(c=>!t[c]||this._allowedModifierKeys.indexOf(c)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&a){this.setNextItemActive();break}return;case 38:if(this._vertical&&a){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&a){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&a){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&a){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&a){this.setLastItemActive();break}return;default:return void((a||dr(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),a=e[n];this._activeItem=null==a?null:a,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const a=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[a]))return void this.setActiveItem(a)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof Vs?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let a1=(()=>{class r{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(r){return!!(r.offsetWidth||r.offsetHeight||"function"==typeof r.getClientRects&&r.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function(r){try{return r.frameElement}catch(t){return null}}(function(r){return r.ownerDocument&&r.ownerDocument.defaultView||window}(e));if(n&&(-1===c1(n)||!this.isVisible(n)))return!1;let a=e.nodeName.toLowerCase(),c=c1(e);return e.hasAttribute("contenteditable")?-1!==c:!("iframe"===a||"object"===a||this._platform.WEBKIT&&this._platform.IOS&&!function(r){let t=r.nodeName.toLowerCase(),e="input"===t&&r.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===a?!!e.hasAttribute("controls")&&-1!==c:"video"===a?-1!==c&&(null!==c||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function(r){return!function(r){return function(r){return"input"==r.nodeName.toLowerCase()}(r)&&"hidden"==r.type}(r)&&(function(r){let t=r.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(r)||function(r){return function(r){return"a"==r.nodeName.toLowerCase()}(r)&&r.hasAttribute("href")}(r)||r.hasAttribute("contenteditable")||l1(r))}(e)&&!this.isDisabled(e)&&((null==n?void 0:n.ignoreVisibility)||this.isVisible(e))}}return r.\u0275fac=function(e){return new(e||r)(be(Vn))},r.\u0275prov=mt({factory:function(){return new r(be(Vn))},token:r,providedIn:"root"}),r})();function l1(r){if(!r.hasAttribute("tabindex")||void 0===r.tabIndex)return!1;let t=r.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function c1(r){if(!l1(r))return null;const t=parseInt(r.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class mY{constructor(t,e,n,a,c=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=a,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,c||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let a=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(a)return a}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let a=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(a)return a}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Mi(1)).subscribe(t)}}let Sb=(()=>{class r{constructor(e,n,a){this._checker=e,this._ngZone=n,this._document=a}create(e,n=!1){return new mY(e,this._checker,this._ngZone,this._document,n)}}return r.\u0275fac=function(e){return new(e||r)(be(a1),be(Pt),be(xt))},r.\u0275prov=mt({factory:function(){return new r(be(a1),be(Pt),be(xt))},token:r,providedIn:"root"}),r})();function kw(r){return 0===r.offsetX&&0===r.offsetY}function Nw(r){const t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}"undefined"!=typeof Element&&Element;const u1=new We("cdk-input-modality-detector-options"),EY={ignoreKeys:[18,17,224,91,16]},tf=Du({passive:!0,capture:!0});let h1=(()=>{class r{constructor(e,n,a,c){this._platform=e,this._mostRecentTarget=null,this._modality=new ms(null),this._lastTouchMs=0,this._onKeydown=d=>{var p,f;(null===(f=null===(p=this._options)||void 0===p?void 0:p.ignoreKeys)||void 0===f?void 0:f.some(v=>v===d.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=Mu(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(kw(d)?"keyboard":"mouse"),this._mostRecentTarget=Mu(d))},this._onTouchstart=d=>{Nw(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Mu(d))},this._options=Object.assign(Object.assign({},EY),c),this.modalityDetected=this._modality.pipe(Yk(1)),this.modalityChanged=this.modalityDetected.pipe(Zd()),e.isBrowser&&n.runOutsideAngular(()=>{a.addEventListener("keydown",this._onKeydown,tf),a.addEventListener("mousedown",this._onMousedown,tf),a.addEventListener("touchstart",this._onTouchstart,tf)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,tf),document.removeEventListener("mousedown",this._onMousedown,tf),document.removeEventListener("touchstart",this._onTouchstart,tf))}}return r.\u0275fac=function(e){return new(e||r)(be(Vn),be(Pt),be(xt),be(u1,8))},r.\u0275prov=mt({factory:function(){return new r(be(Vn),be(Pt),be(xt),be(u1,8))},token:r,providedIn:"root"}),r})();const m1=new We("cdk-focus-monitor-default-options"),Db=Du({passive:!0,capture:!0});let Dr=(()=>{class r{constructor(e,n,a,c,d){this._ngZone=e,this._platform=n,this._inputModalityDetector=a,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new B,this._rootNodeFocusAndBlurListener=p=>{const f=Mu(p),v="focus"===p.type?this._onFocus:this._onBlur;for(let C=f;C;C=C.parentElement)v.call(this,p,C)},this._document=c,this._detectionMode=(null==d?void 0:d.detectionMode)||0}monitor(e,n=!1){const a=bc(e);if(!this._platform.isBrowser||1!==a.nodeType)return en(null);const c=Zk(a)||this._getDocument(),d=this._elementInfo.get(a);if(d)return n&&(d.checkChildren=!0),d.subject;const p={checkChildren:n,subject:new B,rootNode:c};return this._elementInfo.set(a,p),this._registerGlobalListeners(p),p.subject}stopMonitoring(e){const n=bc(e),a=this._elementInfo.get(n);a&&(a.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(a))}focusVia(e,n,a){const c=bc(e);c===this._getDocument().activeElement?this._getClosestElementsInfo(c).forEach(([p,f])=>this._originChanged(p,n,f)):(this._setOrigin(n),"function"==typeof c.focus&&c.focus(a))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,n,a){a?e.classList.add(n):e.classList.remove(n)}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,n){this._toggleClass(e,"cdk-focused",!!n),this._toggleClass(e,"cdk-touch-focused","touch"===n),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===n),this._toggleClass(e,"cdk-mouse-focused","mouse"===n),this._toggleClass(e,"cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const a=this._elementInfo.get(n),c=Mu(e);!a||!a.checkChildren&&n!==c||this._originChanged(n,this._getFocusOrigin(c),a)}_onBlur(e,n){const a=this._elementInfo.get(n);!a||a.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(a.subject,null))}_emitOrigin(e,n){this._ngZone.run(()=>e.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,a=this._rootNodeFocusListenerCount.get(n)||0;a||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,Db),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,Db)}),this._rootNodeFocusListenerCount.set(n,a+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(sn(this._stopInputModalityDetector)).subscribe(c=>{this._setOrigin(c,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const a=this._rootNodeFocusListenerCount.get(n);a>1?this._rootNodeFocusListenerCount.set(n,a-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Db),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Db),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,a){this._setClasses(e,n),this._emitOrigin(a.subject,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((a,c)=>{(c===e||a.checkChildren&&c.contains(e))&&n.push([c,a])}),n}}return r.\u0275fac=function(e){return new(e||r)(be(Pt),be(Vn),be(h1),be(xt,8),be(m1,8))},r.\u0275prov=mt({factory:function(){return new r(be(Pt),be(Vn),be(h1),be(xt,8),be(m1,8))},token:r,providedIn:"root"}),r})();const _1="cdk-high-contrast-black-on-white",v1="cdk-high-contrast-white-on-black",Pw="cdk-high-contrast-active";let b1=(()=>{class r{constructor(e,n){this._platform=e,this._document=n}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,a=n&&n.getComputedStyle?n.getComputedStyle(e):null,c=(a&&a.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),c){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Pw),e.remove(_1),e.remove(v1),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?(e.add(Pw),e.add(_1)):2===n&&(e.add(Pw),e.add(v1))}}}return r.\u0275fac=function(e){return new(e||r)(be(Vn),be(xt))},r.\u0275prov=mt({factory:function(){return new r(be(Vn),be(xt))},token:r,providedIn:"root"}),r})(),Mb=(()=>{class r{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return r.\u0275fac=function(e){return new(e||r)(be(b1))},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Zp,Em]]}),r})();const y1=new We("cdk-dir-doc",{providedIn:"root",factory:function(){return Td(xt)}});let bi=(()=>{class r{constructor(e){if(this.value="ltr",this.change=new nt,e){const a=e.documentElement?e.documentElement.dir:null,c=(e.body?e.body.dir:null)||a;this.value="ltr"===c||"rtl"===c?c:"ltr"}}ngOnDestroy(){this.change.complete()}}return r.\u0275fac=function(e){return new(e||r)(be(y1,8))},r.\u0275prov=mt({factory:function(){return new r(be(y1,8))},token:r,providedIn:"root"}),r})(),nf=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({}),r})();const C1=new cu("12.2.13");class E1{}const Cc="*";function hr(r,t){return{type:7,name:r,definitions:t,options:{}}}function ii(r,t=null){return{type:4,styles:t,timings:r}}function T1(r,t=null){return{type:2,steps:r,options:t}}function jt(r){return{type:6,styles:r,offset:null}}function Hn(r,t,e){return{type:0,name:r,styles:t,options:e}}function Zn(r,t,e=null){return{type:1,expr:r,animation:t,options:e}}function D1(r){Promise.resolve(null).then(r)}class rf{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){D1(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class M1{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,a=0;const c=this.players.length;0==c?D1(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++e==c&&this._onFinish()}),d.onDestroy(()=>{++n==c&&this._onDestroy()}),d.onStart(()=>{++a==c&&this._onStart()})}),this.totalTime=this.players.reduce((d,p)=>Math.max(d,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const a=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(a)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}function R1(){return"undefined"!=typeof window&&void 0!==window.document}function Bw(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ru(r){switch(r.length){case 0:return new rf;case 1:return r[0];default:return new M1(r)}}function I1(r,t,e,n,a={},c={}){const d=[],p=[];let f=-1,v=null;if(n.forEach(C=>{const M=C.offset,O=M==f,P=O&&v||{};Object.keys(C).forEach(W=>{let ne=W,K=C[W];if("offset"!==W)switch(ne=t.normalizePropertyName(ne,d),K){case"!":K=a[W];break;case Cc:K=c[W];break;default:K=t.normalizeStyleValue(W,ne,K,d)}P[ne]=K}),O||p.push(P),v=P,f=M}),d.length){const C="\n - ";throw new Error(`Unable to animate due to the following errors:${C}${d.join(C)}`)}return p}function Vw(r,t,e,n){switch(t){case"start":r.onStart(()=>n(e&&Hw(e,"start",r)));break;case"done":r.onDone(()=>n(e&&Hw(e,"done",r)));break;case"destroy":r.onDestroy(()=>n(e&&Hw(e,"destroy",r)))}}function Hw(r,t,e){const n=e.totalTime,c=Uw(r.element,r.triggerName,r.fromState,r.toState,t||r.phaseName,null==n?r.totalTime:n,!!e.disabled),d=r._data;return null!=d&&(c._data=d),c}function Uw(r,t,e,n,a="",c=0,d){return{element:r,triggerName:t,fromState:e,toState:n,phaseName:a,totalTime:c,disabled:!!d}}function Hs(r,t,e){let n;return r instanceof Map?(n=r.get(t),n||r.set(t,n=e)):(n=r[t],n||(n=r[t]=e)),n}function A1(r){const t=r.indexOf(":");return[r.substring(1,t),r.substr(t+1)]}let Gw=(r,t)=>!1,Ww=(r,t)=>!1,x1=(r,t,e)=>[];const O1=Bw();(O1||"undefined"!=typeof Element)&&(Gw=R1()?(r,t)=>{for(;t&&t!==document.documentElement;){if(t===r)return!0;t=t.parentNode||t.host}return!1}:(r,t)=>r.contains(t),Ww=(()=>{if(O1||Element.prototype.matches)return(r,t)=>r.matches(t);{const r=Element.prototype,t=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):Ww}})(),x1=(r,t,e)=>{let n=[];if(e){const a=r.querySelectorAll(t);for(let c=0;c<a.length;c++)n.push(a[c])}else{const a=r.querySelector(t);a&&n.push(a)}return n});let th=null,k1=!1;function jw(r){th||(th=("undefined"!=typeof document?document.body:null)||{},k1=!!th.style&&"WebkitAppearance"in th.style);let t=!0;return th.style&&!function(r){return"ebkit"==r.substring(1,6)}(r)&&(t=r in th.style,!t&&k1&&(t="Webkit"+r.charAt(0).toUpperCase()+r.substr(1)in th.style)),t}const zw=Ww,Xw=Gw,Yw=x1;function N1(r){const t={};return Object.keys(r).forEach(e=>{const n=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[n]=r[e]}),t}let L1=(()=>{class r{validateStyleProperty(e){return jw(e)}matchesElement(e,n){return zw(e,n)}containsElement(e,n){return Xw(e,n)}query(e,n,a){return Yw(e,n,a)}computeStyle(e,n,a){return a||""}animate(e,n,a,c,d,p=[],f){return new rf(a,c)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),$w=(()=>{class r{}return r.NOOP=new L1,r})();const Kw="ng-enter",Rb="ng-leave",Ib="ng-trigger",Ab=".ng-trigger",F1="ng-animating",Jw=".ng-animating";function nh(r){if("number"==typeof r)return r;const t=r.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Qw(parseFloat(t[1]),t[2])}function Qw(r,t){switch(t){case"s":return 1e3*r;default:return r}}function xb(r,t,e){return r.hasOwnProperty("duration")?r:function(r,t,e){let a,c=0,d="";if("string"==typeof r){const p=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return t.push(`The provided timing value "${r}" is invalid.`),{duration:0,delay:0,easing:""};a=Qw(parseFloat(p[1]),p[2]);const f=p[3];null!=f&&(c=Qw(parseFloat(f),p[4]));const v=p[5];v&&(d=v)}else a=r;if(!e){let p=!1,f=t.length;a<0&&(t.push("Duration values below 0 are not allowed for this animation step."),p=!0),c<0&&(t.push("Delay values below 0 are not allowed for this animation step."),p=!0),p&&t.splice(f,0,`The provided timing value "${r}" is invalid.`)}return{duration:a,delay:c,easing:d}}(r,t,e)}function sf(r,t={}){return Object.keys(r).forEach(e=>{t[e]=r[e]}),t}function Iu(r,t,e={}){if(t)for(let n in r)e[n]=r[n];else sf(r,e);return e}function V1(r,t,e){return e?t+":"+e+";":""}function H1(r){let t="";for(let e=0;e<r.style.length;e++){const n=r.style.item(e);t+=V1(0,n,r.style.getPropertyValue(n))}for(const e in r.style)r.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=V1(0,NY(e),r.style[e]));r.setAttribute("style",t)}function wl(r,t,e){r.style&&(Object.keys(t).forEach(n=>{const a=qw(n);e&&!e.hasOwnProperty(n)&&(e[n]=r.style[a]),r.style[a]=t[n]}),Bw()&&H1(r))}function ih(r,t){r.style&&(Object.keys(t).forEach(e=>{const n=qw(e);r.style[n]=""}),Bw()&&H1(r))}function Tm(r){return Array.isArray(r)?1==r.length?r[0]:T1(r):r}const Zw=new RegExp("{{\\s*(.+?)\\s*}}","g");function U1(r){let t=[];if("string"==typeof r){let e;for(;e=Zw.exec(r);)t.push(e[1]);Zw.lastIndex=0}return t}function Ob(r,t,e){const n=r.toString(),a=n.replace(Zw,(c,d)=>{let p=t[d];return t.hasOwnProperty(d)||(e.push(`Please provide a value for the animation param ${d}`),p=""),p.toString()});return a==n?r:a}function kb(r){const t=[];let e=r.next();for(;!e.done;)t.push(e.value),e=r.next();return t}const kY=/-+([a-z0-9])/g;function qw(r){return r.replace(kY,(...t)=>t[1].toUpperCase())}function NY(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function G1(r,t){return 0===r||0===t}function W1(r,t,e){const n=Object.keys(e);if(n.length&&t.length){let c=t[0],d=[];if(n.forEach(p=>{c.hasOwnProperty(p)||d.push(p),c[p]=e[p]}),d.length)for(var a=1;a<t.length;a++){let p=t[a];d.forEach(function(f){p[f]=eS(r,f)})}}return t}function Us(r,t,e){switch(t.type){case 7:return r.visitTrigger(t,e);case 0:return r.visitState(t,e);case 1:return r.visitTransition(t,e);case 2:return r.visitSequence(t,e);case 3:return r.visitGroup(t,e);case 4:return r.visitAnimate(t,e);case 5:return r.visitKeyframes(t,e);case 6:return r.visitStyle(t,e);case 8:return r.visitReference(t,e);case 9:return r.visitAnimateChild(t,e);case 10:return r.visitAnimateRef(t,e);case 11:return r.visitQuery(t,e);case 12:return r.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function eS(r,t){return window.getComputedStyle(r)[t]}function LY(r,t){const e=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(n=>function(r,t,e){if(":"==r[0]){const f=function(r,t){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(`The transition alias value "${r}" is not supported`),"* => *"}}(r,e);if("function"==typeof f)return void t.push(f);r=f}const n=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(`The provided transition expression "${r}" is not supported`),t;const a=n[1],c=n[2],d=n[3];t.push(j1(a,d));"<"==c[0]&&!("*"==a&&"*"==d)&&t.push(j1(d,a))}(n,e,t)):e.push(r),e}const Lb=new Set(["true","1"]),Pb=new Set(["false","0"]);function j1(r,t){const e=Lb.has(r)||Pb.has(r),n=Lb.has(t)||Pb.has(t);return(a,c)=>{let d="*"==r||r==a,p="*"==t||t==c;return!d&&e&&"boolean"==typeof a&&(d=a?Lb.has(r):Pb.has(r)),!p&&n&&"boolean"==typeof c&&(p=c?Lb.has(t):Pb.has(t)),d&&p}}const BY=new RegExp("s*:selfs*,?","g");function tS(r,t,e){return new VY(r).build(t,e)}class VY{constructor(t){this._driver=t}build(t,e){const n=new GY(e);return this._resetContextStyleTimingState(n),Us(this,Tm(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,a=e.depCount=0;const c=[],d=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(p=>{if(this._resetContextStyleTimingState(e),0==p.type){const f=p,v=f.name;v.toString().split(/\s*,\s*/).forEach(C=>{f.name=C,c.push(this.visitState(f,e))}),f.name=v}else if(1==p.type){const f=this.visitTransition(p,e);n+=f.queryCount,a+=f.depCount,d.push(f)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:c,transitions:d,queryCount:n,depCount:a,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),a=t.options&&t.options.params||null;if(n.containsDynamicStyles){const c=new Set,d=a||{};if(n.styles.forEach(p=>{if(Fb(p)){const f=p;Object.keys(f).forEach(v=>{U1(f[v]).forEach(C=>{d.hasOwnProperty(C)||c.add(C)})})}}),c.size){const p=kb(c.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${p.join(", ")}`)}}return{type:0,name:t.name,style:n,options:a?{params:a}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Us(this,Tm(t.animation),e);return{type:1,matchers:LY(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:rh(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>Us(this,n,e)),options:rh(t.options)}}visitGroup(t,e){const n=e.currentTime;let a=0;const c=t.steps.map(d=>{e.currentTime=n;const p=Us(this,d,e);return a=Math.max(a,e.currentTime),p});return e.currentTime=a,{type:3,steps:c,options:rh(t.options)}}visitAnimate(t,e){const n=function(r,t){let e=null;if(r.hasOwnProperty("duration"))e=r;else if("number"==typeof r)return nS(xb(r,t).duration,0,"");const n=r;if(n.split(/\s+/).some(c=>"{"==c.charAt(0)&&"{"==c.charAt(1))){const c=nS(0,0,"");return c.dynamic=!0,c.strValue=n,c}return e=e||xb(n,t),nS(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let a,c=t.styles?t.styles:jt({});if(5==c.type)a=this.visitKeyframes(c,e);else{let d=t.styles,p=!1;if(!d){p=!0;const v={};n.easing&&(v.easing=n.easing),d=jt(v)}e.currentTime+=n.duration+n.delay;const f=this.visitStyle(d,e);f.isEmptyStep=p,a=f}return e.currentAnimateTimings=null,{type:4,timings:n,style:a,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(d=>{"string"==typeof d?d==Cc?n.push(d):e.errors.push(`The provided style string value ${d} is not allowed.`):n.push(d)}):n.push(t.styles);let a=!1,c=null;return n.forEach(d=>{if(Fb(d)){const p=d,f=p.easing;if(f&&(c=f,delete p.easing),!a)for(let v in p)if(p[v].toString().indexOf("{{")>=0){a=!0;break}}}),{type:6,styles:n,easing:c,offset:t.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let a=e.currentTime,c=e.currentTime;n&&c>0&&(c-=n.duration+n.delay),t.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(p=>{if(!this._driver.validateStyleProperty(p))return void e.errors.push(`The provided animation property "${p}" is not a supported CSS property for animations`);const f=e.collectedStyles[e.currentQuerySelector],v=f[p];let C=!0;v&&(c!=a&&c>=v.startTime&&a<=v.endTime&&(e.errors.push(`The CSS property "${p}" that exists between the times of "${v.startTime}ms" and "${v.endTime}ms" is also being animated in a parallel animation between the times of "${c}ms" and "${a}ms"`),C=!1),c=v.startTime),C&&(f[p]={startTime:c,endTime:a}),e.options&&function(r,t,e){const n=t.params||{},a=U1(r);a.length&&a.forEach(c=>{n.hasOwnProperty(c)||e.push(`Unable to resolve the local animation param ${c} in the given list of values`)})}(d[p],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let c=0;const d=[];let p=!1,f=!1,v=0;const C=t.steps.map(ve=>{const Te=this._makeStyleAst(ve,e);let qe=null!=Te.offset?Te.offset:function(r){if("string"==typeof r)return null;let t=null;if(Array.isArray(r))r.forEach(e=>{if(Fb(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(Fb(r)&&r.hasOwnProperty("offset")){const e=r;t=parseFloat(e.offset),delete e.offset}return t}(Te.styles),pt=0;return null!=qe&&(c++,pt=Te.offset=qe),f=f||pt<0||pt>1,p=p||pt<v,v=pt,d.push(pt),Te});f&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),p&&e.errors.push("Please ensure that all keyframe offsets are in order");const M=t.steps.length;let O=0;c>0&&c<M?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==c&&(O=1/(M-1));const P=M-1,W=e.currentTime,ne=e.currentAnimateTimings,K=ne.duration;return C.forEach((ve,Te)=>{const qe=O>0?Te==P?1:O*Te:d[Te],pt=qe*K;e.currentTime=W+ne.delay+pt,ne.duration=pt,this._validateStyleAst(ve,e),ve.offset=qe,n.styles.push(ve)}),n}visitReference(t,e){return{type:8,animation:Us(this,Tm(t.animation),e),options:rh(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:rh(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:rh(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,a=t.options||{};e.queryCount++,e.currentQuery=t;const[c,d]=function(r){const t=!!r.split(/\s*,\s*/).find(e=>":self"==e);return t&&(r=r.replace(BY,"")),[r=r.replace(/@\*/g,Ab).replace(/@\w+/g,e=>Ab+"-"+e.substr(1)).replace(/:animating/g,Jw),t]}(t.selector);e.currentQuerySelector=n.length?n+" "+c:c,Hs(e.collectedStyles,e.currentQuerySelector,{});const p=Us(this,Tm(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:c,limit:a.limit||0,optional:!!a.optional,includeSelf:d,animation:p,originalSelector:t.selector,options:rh(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:xb(t.timings,e.errors,!0);return{type:12,animation:Us(this,Tm(t.animation),e),timings:n,options:null}}}class GY{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Fb(r){return!Array.isArray(r)&&"object"==typeof r}function rh(r){return r?(r=sf(r)).params&&(r.params=function(r){return r?sf(r):null}(r.params)):r={},r}function nS(r,t,e){return{duration:r,delay:t,easing:e}}function iS(r,t,e,n,a,c,d=null,p=!1){return{type:1,element:r,keyframes:t,preStyleProps:e,postStyleProps:n,duration:a,delay:c,totalTime:a+c,easing:d,subTimeline:p}}class Bb{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const YY=new RegExp(":enter","g"),KY=new RegExp(":leave","g");function rS(r,t,e,n,a,c={},d={},p,f,v=[]){return(new JY).buildKeyframes(r,t,e,n,a,c,d,p,f,v)}class JY{buildKeyframes(t,e,n,a,c,d,p,f,v,C=[]){v=v||new Bb;const M=new oS(t,e,v,a,c,C,[]);M.options=f,M.currentTimeline.setStyles([d],null,M.errors,f),Us(this,n,M);const O=M.timelines.filter(P=>P.containsAnimation());if(O.length&&Object.keys(p).length){const P=O[O.length-1];P.allowOnlyTimelineStyles()||P.setStyles([p],null,M.errors,f)}return O.length?O.map(P=>P.buildKeyframes()):[iS(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const a=e.createSubContext(t.options),c=e.currentTimeline.currentTime,d=this._visitSubInstructions(n,a,a.options);c!=d&&e.transformIntoNewTimeline(d)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let c=e.currentTimeline.currentTime;const d=null!=n.duration?nh(n.duration):null,p=null!=n.delay?nh(n.delay):null;return 0!==d&&t.forEach(f=>{const v=e.appendInstructionToTimeline(f,d,p);c=Math.max(c,v.duration+v.delay)}),c}visitReference(t,e){e.updateOptions(t.options,!0),Us(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let a=e;const c=t.options;if(c&&(c.params||c.delay)&&(a=e.createSubContext(c),a.transformIntoNewTimeline(),null!=c.delay)){6==a.previousNode.type&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=Vb);const d=nh(c.delay);a.delayNextStep(d)}t.steps.length&&(t.steps.forEach(d=>Us(this,d,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>n&&a.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let a=e.currentTimeline.currentTime;const c=t.options&&t.options.delay?nh(t.options.delay):0;t.steps.forEach(d=>{const p=e.createSubContext(t.options);c&&p.delayNextStep(c),Us(this,d,p),a=Math.max(a,p.currentTimeline.currentTime),n.push(p.currentTimeline)}),n.forEach(d=>e.currentTimeline.mergeTimelineCollectedStyles(d)),e.transformIntoNewTimeline(a),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return xb(e.params?Ob(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),a=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),a.snapshotCurrentStyles());const c=t.style;5==c.type?this.visitKeyframes(c,e):(e.incrementTime(n.duration),this.visitStyle(c,e),a.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,a=e.currentAnimateTimings;!a&&n.getCurrentStyleProperties().length&&n.forwardFrame();const c=a&&a.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(c):n.setStyles(t.styles,c,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,a=e.currentTimeline.duration,c=n.duration,p=e.createSubContext().currentTimeline;p.easing=n.easing,t.styles.forEach(f=>{p.forwardTime((f.offset||0)*c),p.setStyles(f.styles,f.easing,e.errors,e.options),p.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(p),e.transformIntoNewTimeline(a+c),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,a=t.options||{},c=a.delay?nh(a.delay):0;c&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Vb);let d=n;const p=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!a.optional,e.errors);e.currentQueryTotal=p.length;let f=null;p.forEach((v,C)=>{e.currentQueryIndex=C;const M=e.createSubContext(t.options,v);c&&M.delayNextStep(c),v===e.element&&(f=M.currentTimeline),Us(this,t.animation,M),M.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,M.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(d),f&&(e.currentTimeline.mergeTimelineCollectedStyles(f),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,a=e.currentTimeline,c=t.timings,d=Math.abs(c.duration),p=d*(e.currentQueryTotal-1);let f=d*e.currentQueryIndex;switch(c.duration<0?"reverse":c.easing){case"reverse":f=p-f;break;case"full":f=n.currentStaggerTime}const C=e.currentTimeline;f&&C.delayNextStep(f);const M=C.currentTime;Us(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=a.currentTime-M+(a.startTime-n.currentTimeline.startTime)}}const Vb={};class oS{constructor(t,e,n,a,c,d,p,f){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=a,this._leaveClassName=c,this.errors=d,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Vb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new Hb(this._driver,e,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let a=this.options;null!=n.duration&&(a.duration=nh(n.duration)),null!=n.delay&&(a.delay=nh(n.delay));const c=n.params;if(c){let d=a.params;d||(d=this.options.params={}),Object.keys(c).forEach(p=>{(!e||!d.hasOwnProperty(p))&&(d[p]=Ob(c[p],d,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(a=>{n[a]=e[a]})}}return t}createSubContext(t=null,e,n){const a=e||this.element,c=new oS(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,n||0));return c.previousNode=this.previousNode,c.currentAnimateTimings=this.currentAnimateTimings,c.options=this._copyOptions(),c.updateOptions(t),c.currentQueryIndex=this.currentQueryIndex,c.currentQueryTotal=this.currentQueryTotal,c.parentContext=this,this.subContextCount++,c}transformIntoNewTimeline(t){return this.previousNode=Vb,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const a={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},c=new QY(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,a,t.stretchStartingKeyframe);return this.timelines.push(c),a}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,a,c,d){let p=[];if(a&&p.push(this.element),t.length>0){t=(t=t.replace(YY,"."+this._enterClassName)).replace(KY,"."+this._leaveClassName);let v=this._driver.query(this.element,t,1!=n);0!==n&&(v=n<0?v.slice(v.length+n,v.length):v.slice(0,n)),p.push(...v)}return!c&&0==p.length&&d.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),p}}class Hb{constructor(t,e,n,a){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Hb(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Cc,this._currentKeyframe[e]=Cc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,a){e&&(this._previousKeyframe.easing=e);const c=a&&a.params||{},d=function(r,t){const e={};let n;return r.forEach(a=>{"*"===a?(n=n||Object.keys(t),n.forEach(c=>{e[c]=Cc})):Iu(a,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(d).forEach(p=>{const f=Ob(d[p],c,n);this._pendingStyles[p]=f,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:Cc),this._updateStyle(p,f)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(n=>{this._currentKeyframe[n]=t[n]}),Object.keys(this._localTimelineStyles).forEach(n=>{this._currentKeyframe.hasOwnProperty(n)||(this._currentKeyframe[n]=this._localTimelineStyles[n])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],a=t._styleSummary[e];(!n||a.time>n.time)&&this._updateStyle(e,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let a=[];this._keyframes.forEach((p,f)=>{const v=Iu(p,!0);Object.keys(v).forEach(C=>{const M=v[C];"!"==M?t.add(C):M==Cc&&e.add(C)}),n||(v.offset=f/this.duration),a.push(v)});const c=t.size?kb(t.values()):[],d=e.size?kb(e.values()):[];if(n){const p=a[0],f=sf(p);p.offset=0,f.offset=1,a=[p,f]}return iS(this.element,a,c,d,this.duration,this.startTime,this.easing,!1)}}class QY extends Hb{constructor(t,e,n,a,c,d,p=!1){super(t,e,d.delay),this.keyframes=n,this.preStyleProps=a,this.postStyleProps=c,this._stretchStartingKeyframe=p,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:a}=this.timings;if(this._stretchStartingKeyframe&&e){const c=[],d=n+e,p=e/d,f=Iu(t[0],!1);f.offset=0,c.push(f);const v=Iu(t[0],!1);v.offset=Y1(p),c.push(v);const C=t.length-1;for(let M=1;M<=C;M++){let O=Iu(t[M],!1);O.offset=Y1((e+O.offset*n)/d),c.push(O)}n=d,e=0,a="",t=c}return iS(this.element,t,this.preStyleProps,this.postStyleProps,n,e,a,!0)}}function Y1(r,t=3){const e=Math.pow(10,t-1);return Math.round(r*e)/e}class sS{}class qY extends sS{normalizePropertyName(t,e){return qw(t)}normalizeStyleValue(t,e,n,a){let c="";const d=n.toString().trim();if(e$[e]&&0!==n&&"0"!==n)if("number"==typeof n)c="px";else{const p=n.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&a.push(`Please provide a CSS unit value for ${t}:${n}`)}return d+c}}const e$=(()=>function(r){const t={};return r.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function $1(r,t,e,n,a,c,d,p,f,v,C,M,O){return{type:0,element:r,triggerName:t,isRemovalTransition:a,fromState:e,fromStyles:c,toState:n,toStyles:d,timelines:p,queriedElements:f,preStyleProps:v,postStyleProps:C,totalTime:M,errors:O}}const aS={};class K1{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,a){return function(r,t,e,n,a){return r.some(c=>c(t,e,n,a))}(this.ast.matchers,t,e,n,a)}buildStyles(t,e,n){const a=this._stateStyles["*"],c=this._stateStyles[t],d=a?a.buildStyles(e,n):{};return c?c.buildStyles(e,n):d}build(t,e,n,a,c,d,p,f,v,C){const M=[],O=this.ast.options&&this.ast.options.params||aS,W=this.buildStyles(n,p&&p.params||aS,M),ne=f&&f.params||aS,K=this.buildStyles(a,ne,M),ve=new Set,Te=new Map,qe=new Map,pt="void"===a,fn={params:Object.assign(Object.assign({},O),ne)},Un=C?[]:rS(t,e,this.ast.animation,c,d,W,K,fn,v,M);let Xn=0;if(Un.forEach(Yi=>{Xn=Math.max(Yi.duration+Yi.delay,Xn)}),M.length)return $1(e,this._triggerName,n,a,pt,W,K,[],[],Te,qe,Xn,M);Un.forEach(Yi=>{const Ai=Yi.element,Nn=Hs(Te,Ai,{});Yi.preStyleProps.forEach(Hr=>Nn[Hr]=!0);const Co=Hs(qe,Ai,{});Yi.postStyleProps.forEach(Hr=>Co[Hr]=!0),Ai!==e&&ve.add(Ai)});const Li=kb(ve.values());return $1(e,this._triggerName,n,a,pt,W,K,Un,Li,Te,qe,Xn)}}class i${constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},a=sf(this.defaultParams);return Object.keys(t).forEach(c=>{const d=t[c];null!=d&&(a[c]=d)}),this.styles.styles.forEach(c=>{if("string"!=typeof c){const d=c;Object.keys(d).forEach(p=>{let f=d[p];f.length>1&&(f=Ob(f,a,e));const v=this.normalizer.normalizePropertyName(p,e);f=this.normalizer.normalizeStyleValue(p,v,f,e),n[v]=f})}}),n}}class o${constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(a=>{this.states[a.name]=new i$(a.style,a.options&&a.options.params||{},n)}),J1(this.states,"true","1"),J1(this.states,"false","0"),e.transitions.forEach(a=>{this.transitionFactories.push(new K1(t,a,this.states))}),this.fallbackTransition=function(r,t,e){return new K1(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,p)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,a){return this.transitionFactories.find(d=>d.match(t,e,n,a))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function J1(r,t,e){r.hasOwnProperty(t)?r.hasOwnProperty(e)||(r[e]=r[t]):r.hasOwnProperty(e)&&(r[t]=r[e])}const a$=new Bb;class l${constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],a=tS(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=a}_buildPlayer(t,e,n){const a=t.element,c=I1(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(a,c,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const a=[],c=this._animations[t];let d;const p=new Map;if(c?(d=rS(this._driver,e,c,Kw,Rb,{},{},n,a$,a),d.forEach(C=>{const M=Hs(p,C.element,{});C.postStyleProps.forEach(O=>M[O]=null)})):(a.push("The requested animation doesn't exist or has already been destroyed"),d=[]),a.length)throw new Error(`Unable to create the animation due to the following errors: ${a.join("\n")}`);p.forEach((C,M)=>{Object.keys(C).forEach(O=>{C[O]=this._driver.computeStyle(M,O,Cc)})});const v=Ru(d.map(C=>{const M=p.get(C.element);return this._buildPlayer(C,{},M)}));return this._playersById[t]=v,v.onDestroy(()=>this.destroy(t)),this.players.push(v),v}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,a){const c=Uw(e,"","","");return Vw(this._getPlayer(t),n,c,a),()=>{}}command(t,e,n,a){if("register"==n)return void this.register(t,a[0]);if("create"==n)return void this.create(t,e,a[0]||{});const c=this._getPlayer(t);switch(n){case"play":c.play();break;case"pause":c.pause();break;case"reset":c.reset();break;case"restart":c.restart();break;case"finish":c.finish();break;case"init":c.init();break;case"setPosition":c.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(t)}}}const Q1="ng-animate-queued",Z1="ng-animate-disabled",q1=".ng-animate-disabled",h$=[],eN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},p$={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},oa="__ng_removed";class lS{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function(r){return null!=r?r:null}(n?t.value:t),n){const c=sf(t);delete c.value,this.options=c}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(a=>{null==n[a]&&(n[a]=e[a])})}}}const wm="void",cS=new lS(wm);class f${constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,sa(e,this._hostClassName)}listen(t,e,n,a){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(r){return"start"==r||"done"==r}(n))throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);const c=Hs(this._elementListeners,t,[]),d={name:e,phase:n,callback:a};c.push(d);const p=Hs(this._engine.statesByElement,t,{});return p.hasOwnProperty(e)||(sa(t,Ib),sa(t,Ib+"-"+e),p[e]=cS),()=>{this._engine.afterFlush(()=>{const f=c.indexOf(d);f>=0&&c.splice(f,1),this._triggers[e]||delete p[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,a=!0){const c=this._getTrigger(e),d=new uS(this.id,e,t);let p=this._engine.statesByElement.get(t);p||(sa(t,Ib),sa(t,Ib+"-"+e),this._engine.statesByElement.set(t,p={}));let f=p[e];const v=new lS(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&f&&v.absorbOptions(f.options),p[e]=v,f||(f=cS),v.value!==wm&&f.value===v.value){if(!function(r,t){const e=Object.keys(r),n=Object.keys(t);if(e.length!=n.length)return!1;for(let a=0;a<e.length;a++){const c=e[a];if(!t.hasOwnProperty(c)||r[c]!==t[c])return!1}return!0}(f.params,v.params)){const ne=[],K=c.matchStyles(f.value,f.params,ne),ve=c.matchStyles(v.value,v.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{ih(t,K),wl(t,ve)})}return}const O=Hs(this._engine.playersByElement,t,[]);O.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==e&&ne.queued&&ne.destroy()});let P=c.matchTransition(f.value,v.value,t,v.params),W=!1;if(!P){if(!a)return;P=c.fallbackTransition,W=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:f,toState:v,player:d,isFallbackTransition:W}),W||(sa(t,Q1),d.onStart(()=>{af(t,Q1)})),d.onDone(()=>{let ne=this.players.indexOf(d);ne>=0&&this.players.splice(ne,1);const K=this._engine.playersByElement.get(t);if(K){let ve=K.indexOf(d);ve>=0&&K.splice(ve,1)}}),this.players.push(d),O.push(d),d}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(a=>a.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Ab,!0);n.forEach(a=>{if(a[oa])return;const c=this._engine.fetchNamespacesByElement(a);c.size?c.forEach(d=>d.triggerLeaveAnimation(a,e,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(t,e,n,a){const c=this._engine.statesByElement.get(t);if(c){const d=[];if(Object.keys(c).forEach(p=>{if(this._triggers[p]){const f=this.trigger(t,p,wm,a);f&&d.push(f)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Ru(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const a=new Set;e.forEach(c=>{const d=c.name;if(a.has(d))return;a.add(d);const f=this._triggers[d].fallbackTransition,v=n[d]||cS,C=new lS(wm),M=new uS(this.id,d,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:d,transition:f,fromState:v,toState:C,player:M,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let a=!1;if(n.totalAnimations){const c=n.players.length?n.playersByQueriedElement.get(t):[];if(c&&c.length)a=!0;else{let d=t;for(;d=d.parentNode;)if(n.statesByElement.get(d)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(t),a)n.markElementAsRemoved(this.id,t,!1,e);else{const c=t[oa];(!c||c===eN)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){sa(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const a=n.player;if(a.destroyed)return;const c=n.element,d=this._elementListeners.get(c);d&&d.forEach(p=>{if(p.name==n.triggerName){const f=Uw(c,n.triggerName,n.fromState.value,n.toState.value);f._data=t,Vw(n.player,p.phase,f,p.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):e.push(n)}),this._queue=[],e.sort((n,a)=>{const c=n.transition.ast.depCount,d=a.transition.ast.depCount;return 0==c||0==d?c-d:this._engine.driver.containsElement(n.element,a.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class g${constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(a,c)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new f$(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let a=!1;for(let c=n;c>=0;c--)if(this.driver.containsElement(this._namespaceList[c].hostElement,e)){this._namespaceList.splice(c+1,0,t),a=!0;break}a||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let a=this._namespaceLookup[t];a&&a.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const a=this._namespaceList.indexOf(n);a>=0&&this._namespaceList.splice(a,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const a=Object.keys(n);for(let c=0;c<a.length;c++){const d=n[a[c]].namespaceId;if(d){const p=this._fetchNamespace(d);p&&e.add(p)}}}return e}trigger(t,e,n,a){if(Ub(e)){const c=this._fetchNamespace(t);if(c)return c.trigger(e,n,a),!0}return!1}insertNode(t,e,n,a){if(!Ub(e))return;const c=e[oa];if(c&&c.setForRemoval){c.setForRemoval=!1,c.setForMove=!0;const d=this.collectedLeaveElements.indexOf(e);d>=0&&this.collectedLeaveElements.splice(d,1)}if(t){const d=this._fetchNamespace(t);d&&d.insertNode(e,n)}a&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),sa(t,Z1)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),af(t,Z1))}removeNode(t,e,n,a){if(Ub(e)){const c=t?this._fetchNamespace(t):null;if(c?c.removeNode(e,a):this.markElementAsRemoved(t,e,!1,a),n){const d=this.namespacesByHostElement.get(e);d&&d.id!==t&&d.removeNode(e,a)}}else this._onRemovalComplete(e,a)}markElementAsRemoved(t,e,n,a){this.collectedLeaveElements.push(e),e[oa]={namespaceId:t,setForRemoval:a,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,a,c){return Ub(e)?this._fetchNamespace(t).listen(e,n,a,c):()=>{}}_buildInstruction(t,e,n,a,c){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,a,t.fromState.options,t.toState.options,e,c)}destroyInnerAnimations(t){let e=this.driver.query(t,Ab,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Jw,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Ru(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[oa];if(e&&e.setForRemoval){if(t[oa]=eN,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,q1)&&this.markElementAsDisabled(t,!1),this.driver.query(t,q1,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,a)=>this._balanceNamespaceList(n,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)sa(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let a=0;a<n.length;a++)n[a]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?Ru(e).onDone(()=>{n.forEach(a=>a())}):n.forEach(a=>a())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new Bb,a=[],c=new Map,d=[],p=new Map,f=new Map,v=new Map,C=new Set;this.disabledNodes.forEach(bt=>{C.add(bt);const Ft=this.driver.query(bt,".ng-animate-queued",!0);for(let Ut=0;Ut<Ft.length;Ut++)C.add(Ft[Ut])});const M=this.bodyNode,O=Array.from(this.statesByElement.keys()),P=iN(O,this.collectedEnterElements),W=new Map;let ne=0;P.forEach((bt,Ft)=>{const Ut=Kw+ne++;W.set(Ft,Ut),bt.forEach(pn=>sa(pn,Ut))});const K=[],ve=new Set,Te=new Set;for(let bt=0;bt<this.collectedLeaveElements.length;bt++){const Ft=this.collectedLeaveElements[bt],Ut=Ft[oa];Ut&&Ut.setForRemoval&&(K.push(Ft),ve.add(Ft),Ut.hasAnimation?this.driver.query(Ft,".ng-star-inserted",!0).forEach(pn=>ve.add(pn)):Te.add(Ft))}const qe=new Map,pt=iN(O,Array.from(ve));pt.forEach((bt,Ft)=>{const Ut=Rb+ne++;qe.set(Ft,Ut),bt.forEach(pn=>sa(pn,Ut))}),t.push(()=>{P.forEach((bt,Ft)=>{const Ut=W.get(Ft);bt.forEach(pn=>af(pn,Ut))}),pt.forEach((bt,Ft)=>{const Ut=qe.get(Ft);bt.forEach(pn=>af(pn,Ut))}),K.forEach(bt=>{this.processLeaveNode(bt)})});const fn=[],Un=[];for(let bt=this._namespaceList.length-1;bt>=0;bt--)this._namespaceList[bt].drainQueuedTransitions(e).forEach(Ut=>{const pn=Ut.player,Ur=Ut.element;if(fn.push(pn),this.collectedEnterElements.length){const to=Ur[oa];if(to&&to.setForMove)return void pn.destroy()}const rt=!M||!this.driver.containsElement(M,Ur),Kt=qe.get(Ur),Ti=W.get(Ur),qn=this._buildInstruction(Ut,n,Ti,Kt,rt);if(qn.errors&&qn.errors.length)Un.push(qn);else{if(rt)return pn.onStart(()=>ih(Ur,qn.fromStyles)),pn.onDestroy(()=>wl(Ur,qn.toStyles)),void a.push(pn);if(Ut.isFallbackTransition)return pn.onStart(()=>ih(Ur,qn.fromStyles)),pn.onDestroy(()=>wl(Ur,qn.toStyles)),void a.push(pn);qn.timelines.forEach(to=>to.stretchStartingKeyframe=!0),n.append(Ur,qn.timelines),d.push({instruction:qn,player:pn,element:Ur}),qn.queriedElements.forEach(to=>Hs(p,to,[]).push(pn)),qn.preStyleProps.forEach((to,Ml)=>{const wi=Object.keys(to);if(wi.length){let Mr=f.get(Ml);Mr||f.set(Ml,Mr=new Set),wi.forEach(Hm=>Mr.add(Hm))}}),qn.postStyleProps.forEach((to,Ml)=>{const wi=Object.keys(to);let Mr=v.get(Ml);Mr||v.set(Ml,Mr=new Set),wi.forEach(Hm=>Mr.add(Hm))})}});if(Un.length){const bt=[];Un.forEach(Ft=>{bt.push(`@${Ft.triggerName} has failed due to:\n`),Ft.errors.forEach(Ut=>bt.push(`- ${Ut}\n`))}),fn.forEach(Ft=>Ft.destroy()),this.reportError(bt)}const Xn=new Map,Li=new Map;d.forEach(bt=>{const Ft=bt.element;n.has(Ft)&&(Li.set(Ft,Ft),this._beforeAnimationBuild(bt.player.namespaceId,bt.instruction,Xn))}),a.forEach(bt=>{const Ft=bt.element;this._getPreviousPlayers(Ft,!1,bt.namespaceId,bt.triggerName,null).forEach(pn=>{Hs(Xn,Ft,[]).push(pn),pn.destroy()})});const Yi=K.filter(bt=>oN(bt,f,v)),Ai=new Map;nN(Ai,this.driver,Te,v,Cc).forEach(bt=>{oN(bt,f,v)&&Yi.push(bt)});const Co=new Map;P.forEach((bt,Ft)=>{nN(Co,this.driver,new Set(bt),f,"!")}),Yi.forEach(bt=>{const Ft=Ai.get(bt),Ut=Co.get(bt);Ai.set(bt,Object.assign(Object.assign({},Ft),Ut))});const Hr=[],zt=[],Sn={};d.forEach(bt=>{const{element:Ft,player:Ut,instruction:pn}=bt;if(n.has(Ft)){if(C.has(Ft))return Ut.onDestroy(()=>wl(Ft,pn.toStyles)),Ut.disabled=!0,Ut.overrideTotalTime(pn.totalTime),void a.push(Ut);let Ur=Sn;if(Li.size>1){let Kt=Ft;const Ti=[];for(;Kt=Kt.parentNode;){const qn=Li.get(Kt);if(qn){Ur=qn;break}Ti.push(Kt)}Ti.forEach(qn=>Li.set(qn,Ur))}const rt=this._buildAnimation(Ut.namespaceId,pn,Xn,c,Co,Ai);if(Ut.setRealPlayer(rt),Ur===Sn)Hr.push(Ut);else{const Kt=this.playersByElement.get(Ur);Kt&&Kt.length&&(Ut.parentPlayer=Ru(Kt)),a.push(Ut)}}else ih(Ft,pn.fromStyles),Ut.onDestroy(()=>wl(Ft,pn.toStyles)),zt.push(Ut),C.has(Ft)&&a.push(Ut)}),zt.forEach(bt=>{const Ft=c.get(bt.element);if(Ft&&Ft.length){const Ut=Ru(Ft);bt.setRealPlayer(Ut)}}),a.forEach(bt=>{bt.parentPlayer?bt.syncPlayerEvents(bt.parentPlayer):bt.destroy()});for(let bt=0;bt<K.length;bt++){const Ft=K[bt],Ut=Ft[oa];if(af(Ft,Rb),Ut&&Ut.hasAnimation)continue;let pn=[];if(p.size){let rt=p.get(Ft);rt&&rt.length&&pn.push(...rt);let Kt=this.driver.query(Ft,Jw,!0);for(let Ti=0;Ti<Kt.length;Ti++){let qn=p.get(Kt[Ti]);qn&&qn.length&&pn.push(...qn)}}const Ur=pn.filter(rt=>!rt.destroyed);Ur.length?b$(this,Ft,Ur):this.processLeaveNode(Ft)}return K.length=0,Hr.forEach(bt=>{this.players.push(bt),bt.onDone(()=>{bt.destroy();const Ft=this.players.indexOf(bt);this.players.splice(Ft,1)}),bt.play()}),Hr}elementContainsData(t,e){let n=!1;const a=e[oa];return a&&a.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,a,c){let d=[];if(e){const p=this.playersByQueriedElement.get(t);p&&(d=p)}else{const p=this.playersByElement.get(t);if(p){const f=!c||c==wm;p.forEach(v=>{v.queued||!f&&v.triggerName!=a||d.push(v)})}}return(n||a)&&(d=d.filter(p=>!(n&&n!=p.namespaceId||a&&a!=p.triggerName))),d}_beforeAnimationBuild(t,e,n){const c=e.element,d=e.isRemovalTransition?void 0:t,p=e.isRemovalTransition?void 0:e.triggerName;for(const f of e.timelines){const v=f.element,C=v!==c,M=Hs(n,v,[]);this._getPreviousPlayers(v,C,d,p,e.toState).forEach(P=>{const W=P.getRealPlayer();W.beforeDestroy&&W.beforeDestroy(),P.destroy(),M.push(P)})}ih(c,e.fromStyles)}_buildAnimation(t,e,n,a,c,d){const p=e.triggerName,f=e.element,v=[],C=new Set,M=new Set,O=e.timelines.map(W=>{const ne=W.element;C.add(ne);const K=ne[oa];if(K&&K.removedBeforeQueried)return new rf(W.duration,W.delay);const ve=ne!==f,Te=function(r){const t=[];return rN(r,t),t}((n.get(ne)||h$).map(Xn=>Xn.getRealPlayer())).filter(Xn=>!!Xn.element&&Xn.element===ne),qe=c.get(ne),pt=d.get(ne),fn=I1(0,this._normalizer,0,W.keyframes,qe,pt),Un=this._buildPlayer(W,fn,Te);if(W.subTimeline&&a&&M.add(ne),ve){const Xn=new uS(t,p,ne);Xn.setRealPlayer(Un),v.push(Xn)}return Un});v.forEach(W=>{Hs(this.playersByQueriedElement,W.element,[]).push(W),W.onDone(()=>function(r,t,e){let n;if(r instanceof Map){if(n=r.get(t),n){if(n.length){const a=n.indexOf(e);n.splice(a,1)}0==n.length&&r.delete(t)}}else if(n=r[t],n){if(n.length){const a=n.indexOf(e);n.splice(a,1)}0==n.length&&delete r[t]}return n}(this.playersByQueriedElement,W.element,W))}),C.forEach(W=>sa(W,F1));const P=Ru(O);return P.onDestroy(()=>{C.forEach(W=>af(W,F1)),wl(f,e.toStyles)}),M.forEach(W=>{Hs(a,W,[]).push(P)}),P}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new rf(t.duration,t.delay)}}class uS{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new rf,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>Vw(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Hs(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Ub(r){return r&&1===r.nodeType}function tN(r,t){const e=r.style.display;return r.style.display=null!=t?t:"none",e}function nN(r,t,e,n,a){const c=[];e.forEach(f=>c.push(tN(f)));const d=[];n.forEach((f,v)=>{const C={};f.forEach(M=>{const O=C[M]=t.computeStyle(v,M,a);(!O||0==O.length)&&(v[oa]=p$,d.push(v))}),r.set(v,C)});let p=0;return e.forEach(f=>tN(f,c[p++])),d}function iN(r,t){const e=new Map;if(r.forEach(p=>e.set(p,[])),0==t.length)return e;const a=new Set(t),c=new Map;function d(p){if(!p)return 1;let f=c.get(p);if(f)return f;const v=p.parentNode;return f=e.has(v)?v:a.has(v)?1:d(v),c.set(p,f),f}return t.forEach(p=>{const f=d(p);1!==f&&e.get(f).push(p)}),e}const Gb="$$classes";function sa(r,t){if(r.classList)r.classList.add(t);else{let e=r[Gb];e||(e=r[Gb]={}),e[t]=!0}}function af(r,t){if(r.classList)r.classList.remove(t);else{let e=r[Gb];e&&delete e[t]}}function b$(r,t,e){Ru(e).onDone(()=>r.processLeaveNode(t))}function rN(r,t){for(let e=0;e<r.length;e++){const n=r[e];n instanceof M1?rN(n.players,t):t.push(n)}}function oN(r,t,e){const n=e.get(r);if(!n)return!1;let a=t.get(r);return a?n.forEach(c=>a.add(c)):t.set(r,n),e.delete(r),!0}class Wb{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(a,c)=>{},this._transitionEngine=new g$(t,e,n),this._timelineEngine=new l$(t,e,n),this._transitionEngine.onRemovalComplete=(a,c)=>this.onRemovalComplete(a,c)}registerTrigger(t,e,n,a,c){const d=t+"-"+a;let p=this._triggerCache[d];if(!p){const f=[],v=tS(this._driver,c,f);if(f.length)throw new Error(`The animation trigger "${a}" has failed to build due to the following errors:\n - ${f.join("\n - ")}`);p=function(r,t,e){return new o$(r,t,e)}(a,v,this._normalizer),this._triggerCache[d]=p}this._transitionEngine.registerTrigger(e,a,p)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,a){this._transitionEngine.insertNode(t,e,n,a)}onRemove(t,e,n,a){this._transitionEngine.removeNode(t,e,a||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,a){if("@"==n.charAt(0)){const[c,d]=A1(n);this._timelineEngine.command(c,e,d,a)}else this._transitionEngine.trigger(t,e,n,a)}listen(t,e,n,a,c){if("@"==n.charAt(0)){const[d,p]=A1(n);return this._timelineEngine.listen(d,e,p,c)}return this._transitionEngine.listen(t,e,n,a,c)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function sN(r,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=dS(t[0]),t.length>1&&(n=dS(t[t.length-1]))):t&&(e=dS(t)),e||n?new E$(r,e,n):null}let E$=(()=>{class r{constructor(e,n,a){this._element=e,this._startStyles=n,this._endStyles=a,this._state=0;let c=r.initialStylesByElement.get(e);c||r.initialStylesByElement.set(e,c={}),this._initialStyles=c}start(){this._state<1&&(this._startStyles&&wl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(wl(this._element,this._initialStyles),this._endStyles&&(wl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(ih(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ih(this._element,this._endStyles),this._endStyles=null),wl(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function dS(r){let t=null;const e=Object.keys(r);for(let n=0;n<e.length;n++){const a=e[n];T$(a)&&(t=t||{},t[a]=r[a])}return t}function T$(r){return"display"===r||"position"===r}const aN="animation",lN="animationend";class D${constructor(t,e,n,a,c,d,p){this._element=t,this._name=e,this._duration=n,this._delay=a,this._easing=c,this._fillMode=d,this._onDoneFn=p,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=f=>this._handleCallback(f)}apply(){(function(r,t){const e=pS(r,"").trim();let n=0;e.length&&(function(r,t){let e=0;for(let n=0;n<r.length;n++)","===r.charAt(n)&&e++;return e}(e)+1,t=`${e}, ${t}`),jb(r,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),dN(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){cN(this._element,this._name,"paused")}resume(){cN(this._element,this._name,"running")}setPosition(t){const e=uN(this._element,this._name);this._position=t*this._duration,jb(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),dN(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(r,t){const n=pS(r,"").split(","),a=hS(n,t);a>=0&&(n.splice(a,1),jb(r,"",n.join(",")))}(this._element,this._name))}}function cN(r,t,e){jb(r,"PlayState",e,uN(r,t))}function uN(r,t){const e=pS(r,"");return e.indexOf(",")>0?hS(e.split(","),t):hS([e],t)}function hS(r,t){for(let e=0;e<r.length;e++)if(r[e].indexOf(t)>=0)return e;return-1}function dN(r,t,e){e?r.removeEventListener(lN,t):r.addEventListener(lN,t)}function jb(r,t,e,n){const a=aN+t;if(null!=n){const c=r.style[a];if(c.length){const d=c.split(",");d[n]=e,e=d.join(",")}}r.style[a]=e}function pS(r,t){return r.style[aN+t]||""}class hN{constructor(t,e,n,a,c,d,p,f){this.element=t,this.keyframes=e,this.animationName=n,this._duration=a,this._delay=c,this._finalStyles=p,this._specialStyles=f,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=d||"linear",this.totalTime=a+c,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new D$(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:eS(this.element,n))})}this.currentSnapshot=t}}class O$ extends rf{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=N1(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class fN{constructor(){this._count=0}validateStyleProperty(t){return jw(t)}matchesElement(t,e){return zw(t,e)}containsElement(t,e){return Xw(t,e)}query(t,e,n){return Yw(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(p=>N1(p));let a=`@keyframes ${e} {\n`,c="";n.forEach(p=>{c=" ";const f=parseFloat(p.offset);a+=`${c}${100*f}% {\n`,c+=" ",Object.keys(p).forEach(v=>{const C=p[v];switch(v){case"offset":return;case"easing":return void(C&&(a+=`${c}animation-timing-function: ${C};\n`));default:return void(a+=`${c}${v}: ${C};\n`)}}),a+=`${c}}\n`}),a+="}\n";const d=document.createElement("style");return d.textContent=a,d}animate(t,e,n,a,c,d=[],p){const f=d.filter(K=>K instanceof hN),v={};G1(n,a)&&f.forEach(K=>{let ve=K.currentSnapshot;Object.keys(ve).forEach(Te=>v[Te]=ve[Te])});const C=function(r){let t={};return r&&(Array.isArray(r)?r:[r]).forEach(n=>{Object.keys(n).forEach(a=>{"offset"==a||"easing"==a||(t[a]=n[a])})}),t}(e=W1(t,e,v));if(0==n)return new O$(t,C);const M="gen_css_kf_"+this._count++,O=this.buildKeyframeElement(t,M,e);(function(r){var t;const e=null===(t=r.getRootNode)||void 0===t?void 0:t.call(r);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(t).appendChild(O);const W=sN(t,e),ne=new hN(t,e,M,n,a,c,C,W);return ne.onDestroy(()=>function(r){r.parentNode.removeChild(r)}(O)),ne}}class mN{constructor(t,e,n,a){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:eS(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class F${constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(_N().toString()),this._cssKeyframesDriver=new fN}validateStyleProperty(t){return jw(t)}matchesElement(t,e){return zw(t,e)}containsElement(t,e){return Xw(t,e)}query(t,e,n){return Yw(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,a,c,d=[],p){if(!p&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,a,c,d);const C={duration:n,delay:a,fill:0==a?"both":"forwards"};c&&(C.easing=c);const M={},O=d.filter(W=>W instanceof mN);G1(n,a)&&O.forEach(W=>{let ne=W.currentSnapshot;Object.keys(ne).forEach(K=>M[K]=ne[K])});const P=sN(t,e=W1(t,e=e.map(W=>Iu(W,!1)),M));return new mN(t,e,C,P)}}function _N(){return R1()&&Element.prototype.animate||{}}let V$=(()=>{class r extends E1{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:$i.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const a=Array.isArray(e)?T1(e):e;return vN(this._renderer,null,n,"register",[a]),new H$(n,this._renderer)}}return r.\u0275fac=function(e){return new(e||r)(be(Ld),be(xt))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();class H$ extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new U$(this._id,t,e||{},this._renderer)}}class U${constructor(t,e,n,a){this.id=t,this.element=e,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return vN(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function vN(r,t,e,n,a){return r.setProperty(t,`@@${e}:${n}`,a)}const bN="@.disabled";let G$=(()=>{class r{constructor(e,n,a){this.delegate=e,this.engine=n,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(c,d)=>{d&&d.parentNode(c)&&d.removeChild(c.parentNode,c)}}createRenderer(e,n){const c=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let C=this._rendererCache.get(c);return C||(C=new yN("",c,this.engine),this._rendererCache.set(c,C)),C}const d=n.id,p=n.id+"-"+this._currentId;this._currentId++,this.engine.register(p,e);const f=C=>{Array.isArray(C)?C.forEach(f):this.engine.registerTrigger(d,p,e,C.name,C)};return n.data.animation.forEach(f),new W$(this,p,c,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,a){e>=0&&e<this._microtaskId?this._zone.run(()=>n(a)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(c=>{const[d,p]=c;d(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,a]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(e){return new(e||r)(be(Ld),be(Wb),be(Pt))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();class yN{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?a=>e.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,a=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,a)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,a){this.delegate.setAttribute(t,e,n,a)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,a){this.delegate.setStyle(t,e,n,a)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==bN?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class W$ extends yN{constructor(t,e,n,a){super(e,n,a),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==bN?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const a=function(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(t);let c=e.substr(1),d="";return"@"!=c.charAt(0)&&([c,d]=function(r){const t=r.indexOf(".");return[r.substring(0,t),r.substr(t+1)]}(c)),this.engine.listen(this.namespaceId,a,c,d,p=>{this.factory.scheduleListenerCallback(p._data||-1,n,p)})}return this.delegate.listen(t,e,n)}}let X$=(()=>{class r extends Wb{constructor(e,n,a){super(e.body,n,a)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(e){return new(e||r)(be(xt),be($w),be(sS))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();const Ii=new We("AnimationModuleType"),CN=[{provide:E1,useClass:V$},{provide:sS,useFactory:function(){return new qY}},{provide:Wb,useClass:X$},{provide:Ld,useFactory:function(r,t,e){return new G$(r,t,e)},deps:[Av,Wb,Pt]}],EN=[{provide:$w,useFactory:function(){return"function"==typeof _N()?new F$:new fN}},{provide:Ii,useValue:"BrowserAnimations"},...CN],TN=[{provide:$w,useClass:L1},{provide:Ii,useValue:"NoopAnimations"},...CN];let J$=(()=>{class r{static withConfig(e){return{ngModule:r,providers:e.disableAnimations?TN:EN}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:EN,imports:[yT]}),r})();const wN=new cu("12.2.13"),iK=new We("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Jt=(()=>{class r{constructor(e,n,a){this._hasDoneGlobalChecks=!1,this._document=a,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=n,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(!OE()||Aw())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const n=getComputedStyle(e);n&&"none"!==n.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&wN.full!==C1.full&&console.warn("The Angular Material version ("+wN.full+") does not match the Angular CDK version ("+C1.full+").\nPlease ensure the versions of these two packages exactly match.")}}return r.\u0275fac=function(e){return new(e||r)(be(b1),be(iK,8),be(xt))},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[nf],nf]}),r})();function Po(r){return class extends r{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=ht(t)}}}function Gs(r,t){return class extends r{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function qo(r){return class extends r{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=ht(t)}}}function Ec(r,t=0){return class extends r{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?ai(e):this.defaultTabIndex}}}const rK=new We("MAT_DATE_LOCALE",{providedIn:"root",factory:function(){return Td(cc)}});class vr{constructor(){this._localeChanges=new B,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let n=this.isValid(t),a=this.isValid(e);return n&&a?!this.compareDate(t,e):n==a}return t==e}clampDate(t,e,n){return e&&this.compareDate(t,e)<0?e:n&&this.compareDate(t,n)>0?n:t}}const Sl=new We("mat-date-formats");let oh;try{oh="undefined"!=typeof Intl}catch(r){oh=!1}const sK={long:["January","February","March","April","May","June","July","August","September","October","November","December"],short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"]},aK=Yb(31,r=>String(r+1)),lK={long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"]},cK=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Yb(r,t){const e=Array(r);for(let n=0;n<r;n++)e[n]=t(n);return e}let uK=(()=>{class r extends vr{constructor(e,n){super(),this.useUtcForDisplay=!0,super.setLocale(e),this.useUtcForDisplay=!n.TRIDENT,this._clampDate=n.TRIDENT||n.EDGE}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){if(oh){const n=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return Yb(12,a=>this._stripDirectionalityCharacters(this._format(n,new Date(2017,a,1))))}return sK[e]}getDateNames(){if(oh){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Yb(31,n=>this._stripDirectionalityCharacters(this._format(e,new Date(2017,0,n+1))))}return aK}getDayOfWeekNames(e){if(oh){const n=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return Yb(7,a=>this._stripDirectionalityCharacters(this._format(n,new Date(2017,0,a+1))))}return lK[e]}getYearName(e){if(oh){const n=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._stripDirectionalityCharacters(this._format(n,e))}return String(this.getYear(e))}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,n,a){let c=this._createDateWithOverflow(e,n,a);return c.getMonth(),c}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,n){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");if(oh){this._clampDate&&(e.getFullYear()<1||e.getFullYear()>9999)&&(e=this.clone(e)).setFullYear(Math.max(1,Math.min(9999,e.getFullYear()))),n=Object.assign(Object.assign({},n),{timeZone:"utc"});const a=new Intl.DateTimeFormat(this.locale,n);return this._stripDirectionalityCharacters(this._format(a,e))}return this._stripDirectionalityCharacters(e.toDateString())}addCalendarYears(e,n){return this.addCalendarMonths(e,12*n)}addCalendarMonths(e,n){let a=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+n,this.getDate(e));return this.getMonth(a)!=((this.getMonth(e)+n)%12+12)%12&&(a=this._createDateWithOverflow(this.getYear(a),this.getMonth(a),0)),a}addCalendarDays(e,n){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+n)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(cK.test(e)){let n=new Date(e);if(this.isValid(n))return n}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,n,a){const c=new Date;return c.setFullYear(e,n,a),c.setHours(0,0,0,0),c}_2digit(e){return("00"+e).slice(-2)}_stripDirectionalityCharacters(e){return e.replace(/[\u200e\u200f]/g,"")}_format(e,n){const a=new Date;return a.setUTCFullYear(n.getFullYear(),n.getMonth(),n.getDate()),a.setUTCHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e.format(a)}}return r.\u0275fac=function(e){return new(e||r)(be(rK,8),be(Vn))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),hK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[{provide:vr,useClass:uK}],imports:[[Zp]]}),r})();const pK={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let fK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[{provide:Sl,useValue:pK}],imports:[[hK]]}),r})(),ja=(()=>{class r{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({factory:function(){return new r},token:r,providedIn:"root"}),r})(),mS=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ce({type:r,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),r})();function _S(r,t,e="mat"){r.changes.pipe(Ri(r)).subscribe(({length:n})=>{Sm(t,`${e}-2-line`,!1),Sm(t,`${e}-3-line`,!1),Sm(t,`${e}-multi-line`,!1),2===n||3===n?Sm(t,`${e}-${n}-line`,!0):n>3&&Sm(t,`${e}-multi-line`,!0)})}function Sm(r,t,e){const n=r.nativeElement.classList;e?n.add(t):n.remove(t)}let $b=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Jt],Jt]}),r})();class gK{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const DN={enterDuration:225,exitDuration:150},vS=Du({passive:!0}),MN=["mousedown","touchstart"],RN=["mouseup","mouseleave","touchend","touchcancel"];class bS{constructor(t,e,n,a){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,a.isBrowser&&(this._containerElement=bc(n))}fadeInRipple(t,e,n={}){const a=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),c=Object.assign(Object.assign({},DN),n.animation);n.centered&&(t=a.left+a.width/2,e=a.top+a.height/2);const d=n.radius||function(r,t,e){const n=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),a=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+a*a)}(t,e,a),p=t-a.left,f=e-a.top,v=c.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=p-d+"px",C.style.top=f-d+"px",C.style.height=2*d+"px",C.style.width=2*d+"px",null!=n.color&&(C.style.backgroundColor=n.color),C.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(C),function(r){window.getComputedStyle(r).getPropertyValue("opacity")}(C),C.style.transform="scale(1)";const M=new gK(this,C,n);return M.state=0,this._activeRipples.add(M),n.persistent||(this._mostRecentTransientRipple=M),this._runTimeoutOutsideZone(()=>{const O=M===this._mostRecentTransientRipple;M.state=1,!n.persistent&&(!O||!this._isPointerDown)&&M.fadeOut()},v),M}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,a=Object.assign(Object.assign({},DN),t.config.animation);n.style.transitionDuration=`${a.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},a.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=bc(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(MN))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(RN),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=kw(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Nw(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,vS)})})}_removeTriggerEvents(){this._triggerElement&&(MN.forEach(t=>{this._triggerElement.removeEventListener(t,this,vS)}),this._pointerUpEventsRegistered&&RN.forEach(t=>{this._triggerElement.removeEventListener(t,this,vS)}))}}const Kb=new We("mat-ripple-global-options");let Fo=(()=>{class r{constructor(e,n,a,c,d){this._elementRef=e,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=c||{},this._rippleRenderer=new bS(this,n,e,a)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,a){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,Object.assign(Object.assign({},this.rippleConfig),a)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(Pt),I(Vn),I(Kb,8),I(Ii,8))},r.\u0275dir=Ce({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,n){2&e&&Ct("mat-ripple-unbounded",n.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),r})(),za=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Jt,Zp],Jt]}),r})(),yS=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Jt]]}),r})(),Zb=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[za,Lr,Jt,yS]]}),r})();const kN=["*"],TK=[[["","mat-grid-avatar",""],["","matGridAvatar",""]],[["","mat-line",""],["","matLine",""]],"*"],wK=["[mat-grid-avatar], [matGridAvatar]","[mat-line], [matLine]","*"],NN=".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}\n";class SK{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){const t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(n=>this._trackTile(n))}_trackTile(t){const e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new DK(this.rowIndex,e)}_findMatchingGap(t){let e=-1,n=-1;do{this.columnIndex+t>this.tracker.length?(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e)):(e=this.tracker.indexOf(0,this.columnIndex),-1!=e?(n=this._findGapEndIndex(e),this.columnIndex=e+1):(this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e)))}while(n-e<t||0==n);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(0!=this.tracker[e])return e;return this.tracker.length}_markTilePosition(t,e){for(let n=0;n<e.colspan;n++)this.tracker[t+n]=e.rowspan}}class DK{constructor(t,e){this.row=t,this.col=e}}const LN=new We("MAT_GRID_LIST");let PN=(()=>{class r{constructor(e,n){this._element=e,this._gridList=n,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(ai(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(ai(e))}_setStyle(e,n){this._element.nativeElement.style[e]=n}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(LN,8))},r.\u0275cmp=_t({type:r,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(e,n){2&e&&ft("rowspan",n.rowspan)("colspan",n.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:kN,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(e,n){1&e&&(Tn(),fe(0,"div",0),At(1),ge())},styles:[NN],encapsulation:2,changeDetection:0}),r})(),MK=(()=>{class r{constructor(e){this._element=e}ngAfterContentInit(){_S(this._lines,this._element)}}return r.\u0275fac=function(e){return new(e||r)(I(Qe))},r.\u0275cmp=_t({type:r,selectors:[["mat-grid-tile-header"],["mat-grid-tile-footer"]],contentQueries:function(e,n,a){if(1&e&&qt(a,mS,5),2&e){let c;je(c=ze())&&(n._lines=c)}},ngContentSelectors:wK,decls:4,vars:0,consts:[[1,"mat-grid-list-text"]],template:function(e,n){1&e&&(Tn(TK),At(0),fe(1,"div",0),At(2,1),ge(),At(3,2))},encapsulation:2,changeDetection:0}),r})(),RK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ce({type:r,selectors:[["mat-grid-tile-header"]],hostAttrs:[1,"mat-grid-tile-header"]}),r})();const IK=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/;class TS{constructor(){this._rows=0,this._rowspan=0}init(t,e,n,a){this._gutterSize=FN(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=n,this._direction=a}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return 0===e?"0":sh(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,n){let a=100/this._cols,c=(this._cols-1)/this._cols;this.setColStyles(t,n,a,c),this.setRowStyles(t,e,a,c)}setColStyles(t,e,n,a){let c=this.getBaseTileSize(n,a);t._setStyle("rtl"===this._direction?"right":"left",this.getTilePosition(c,e)),t._setStyle("width",sh(this.getTileSize(c,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}}class AK extends TS{constructor(t){super(),this.fixedRowHeight=t}init(t,e,n,a){super.init(t,e,n,a),this.fixedRowHeight=FN(this.fixedRowHeight),IK.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",sh(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",sh(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}class xK extends TS{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,n,a){this.baseTileHeight=this.getBaseTileSize(n/this.rowHeightRatio,a),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",sh(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",sh(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){const e=t.split(":");this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}}class OK extends TS{setRowStyles(t,e){let c=this.getBaseTileSize(100/this._rowspan,(this._rows-1)/this._rows);t._setStyle("top",this.getTilePosition(c,e)),t._setStyle("height",sh(this.getTileSize(c,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}}function sh(r){return`calc(${r})`}function FN(r){return r.match(/([A-Za-z%]+)$/)?r:`${r}px`}let NK=(()=>{class r{constructor(e,n){this._element=e,this._dir=n,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(ai(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${null==e?"":e}`}get rowHeight(){return this._rowHeight}set rowHeight(e){const n=`${null==e?"":e}`;n!==this._rowHeight&&(this._rowHeight=n,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),this._tileStyler="fit"===e?new OK:e&&e.indexOf(":")>-1?new xK(e):new AK(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new SK);const e=this._tileCoordinator,n=this._tiles.filter(c=>!c._gridList||c._gridList===this),a=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,n),this._tileStyler.init(this.gutterSize,e,this.cols,a),n.forEach((c,d)=>{const p=e.positions[d];this._tileStyler.setStyle(c,p.row,p.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(bi,8))},r.\u0275cmp=_t({type:r,selectors:[["mat-grid-list"]],contentQueries:function(e,n,a){if(1&e&&qt(a,PN,5),2&e){let c;je(c=ze())&&(n._tiles=c)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(e,n){2&e&&ft("cols",n.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[dt([{provide:LN,useExisting:r}])],ngContentSelectors:kN,decls:2,vars:0,template:function(e,n){1&e&&(Tn(),fe(0,"div"),At(1),ge())},styles:[NN],encapsulation:2,changeDetection:0}),r})(),LK=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[$b,Jt],$b,Jt]}),r})();const BN=["mat-button",""],VN=["*"],HN=".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n",FK=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],BK=Gs(Po(qo(class{constructor(r){this._elementRef=r}})));let Au=(()=>{class r extends BK{constructor(e,n,a){super(e),this._focusMonitor=n,this._animationMode=a,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const c of FK)this._hasHostAttributes(c)&&this._getHostElement().classList.add(c);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,n){e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(n=>this._getHostElement().hasAttribute(n))}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(Dr),I(Ii,8))},r.\u0275cmp=_t({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,n){if(1&e&&an(Fo,5),2&e){let a;je(a=ze())&&(n.ripple=a.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,n){2&e&&(ft("disabled",n.disabled||null),Ct("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Be],attrs:BN,ngContentSelectors:VN,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,n){1&e&&(Tn(),fe(0,"span",0),At(1),ge(),St(2,"span",1),St(3,"span",2)),2&e&&(Ie(2),Ct("mat-button-ripple-round",n.isRoundButton||n.isIconButton),xe("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},directives:[Fo],styles:[HN],encapsulation:2,changeDetection:0}),r})(),VK=(()=>{class r extends Au{constructor(e,n,a){super(n,e,a)}_haltDisabledEvents(e){this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}}return r.\u0275fac=function(e){return new(e||r)(I(Dr),I(Qe),I(Ii,8))},r.\u0275cmp=_t({type:r,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:function(e,n){1&e&&lt("click",function(c){return n._haltDisabledEvents(c)}),2&e&&(ft("tabindex",n.disabled?-1:n.tabIndex||0)("disabled",n.disabled||null)("aria-disabled",n.disabled.toString()),Ct("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[Be],attrs:BN,ngContentSelectors:VN,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,n){1&e&&(Tn(),fe(0,"span",0),At(1),ge(),St(2,"span",1),St(3,"span",2)),2&e&&(Ie(2),Ct("mat-button-ripple-round",n.isRoundButton||n.isIconButton),xe("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},directives:[Fo],styles:[HN],encapsulation:2,changeDetection:0}),r})(),ah=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[za,Jt],Jt]}),r})();const HK=["*"];function UN(r){return Error(`Unable to find icon with the name "${r}"`)}function GN(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function WN(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}class lh{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let qb=(()=>{class r{constructor(e,n,a,c){this._httpClient=e,this._sanitizer=n,this._errorHandler=c,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=a}addSvgIcon(e,n,a){return this.addSvgIconInNamespace("",e,n,a)}addSvgIconLiteral(e,n,a){return this.addSvgIconLiteralInNamespace("",e,n,a)}addSvgIconInNamespace(e,n,a,c){return this._addSvgIconConfig(e,n,new lh(a,null,c))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,a,c){const d=this._sanitizer.sanitize(ci.HTML,a);if(!d)throw WN(a);return this._addSvgIconConfig(e,n,new lh("",d,c))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,a){return this._addSvgIconSetConfig(e,new lh(n,null,a))}addSvgIconSetLiteralInNamespace(e,n,a){const c=this._sanitizer.sanitize(ci.HTML,n);if(!c)throw WN(n);return this._addSvgIconSetConfig(e,new lh("",c,a))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(ci.RESOURCE_URL,e);if(!n)throw GN(e);const a=this._cachedIconsByUrl.get(n);return a?en(ey(a)):this._loadSvgIconFromConfig(new lh(e,null)).pipe(Pr(c=>this._cachedIconsByUrl.set(n,c)),Ee(c=>ey(c)))}getNamedSvgIcon(e,n=""){const a=jN(n,e);let c=this._svgIconConfigs.get(a);if(c)return this._getSvgFromConfig(c);if(c=this._getIconConfigFromResolvers(n,e),c)return this._svgIconConfigs.set(a,c),this._getSvgFromConfig(c);const d=this._iconSetConfigs.get(n);return d?this._getSvgFromIconSetConfigs(e,d):kk(UN(a))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?en(ey(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Ee(n=>ey(n)))}_getSvgFromIconSetConfigs(e,n){const a=this._extractIconWithNameFromAnySet(e,n);return a?en(a):bx(n.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(yu(p=>{const v=`Loading icon set URL: ${this._sanitizer.sanitize(ci.RESOURCE_URL,d.url)} failed: ${p.message}`;return this._errorHandler.handleError(new Error(v)),en(null)})))).pipe(Ee(()=>{const d=this._extractIconWithNameFromAnySet(e,n);if(!d)throw UN(e);return d}))}_extractIconWithNameFromAnySet(e,n){for(let a=n.length-1;a>=0;a--){const c=n[a];if(c.svgText&&c.svgText.indexOf(e)>-1){const d=this._svgElementFromConfig(c),p=this._extractSvgIconFromSet(d,e,c.options);if(p)return p}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Pr(n=>e.svgText=n),Ee(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?en(null):this._fetchIcon(e).pipe(Pr(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,a){const c=e.querySelector(`[id="${n}"]`);if(!c)return null;const d=c.cloneNode(!0);if(d.removeAttribute("id"),"svg"===d.nodeName.toLowerCase())return this._setSvgAttributes(d,a);if("symbol"===d.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(d),a);const p=this._svgElementFromString("<svg></svg>");return p.appendChild(d),this._setSvgAttributes(p,a)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const a=n.querySelector("svg");if(!a)throw Error("<svg> tag not found");return a}_toSvgElement(e){const n=this._svgElementFromString("<svg></svg>"),a=e.attributes;for(let c=0;c<a.length;c++){const{name:d,value:p}=a[c];"id"!==d&&n.setAttribute(d,p)}for(let c=0;c<e.childNodes.length;c++)e.childNodes[c].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[c].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){var n;const{url:a,options:c}=e,d=null!==(n=null==c?void 0:c.withCredentials)&&void 0!==n&&n;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==a)throw Error(`Cannot fetch icon from URL "${a}".`);const p=this._sanitizer.sanitize(ci.RESOURCE_URL,a);if(!p)throw GN(a);const f=this._inProgressUrlFetches.get(p);if(f)return f;const v=this._httpClient.get(p,{responseType:"text",withCredentials:d}).pipe(wO(()=>this._inProgressUrlFetches.delete(p)),Dt());return this._inProgressUrlFetches.set(p,v),v}_addSvgIconConfig(e,n,a){return this._svgIconConfigs.set(jN(e,n),a),this}_addSvgIconSetConfig(e,n){const a=this._iconSetConfigs.get(e);return a?a.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let a=0;a<this._resolvers.length;a++){const c=this._resolvers[a](n,e);if(c)return WK(c)?new lh(c.url,null,c.options):new lh(c,null)}}}return r.\u0275fac=function(e){return new(e||r)(be(Qp,8),be(Up),be(xt,8),be(ps))},r.\u0275prov=mt({factory:function(){return new r(be(Qp,8),be(Up),be(xt,8),be(ps))},token:r,providedIn:"root"}),r})();function ey(r){return r.cloneNode(!0)}function jN(r,t){return r+":"+t}function WK(r){return!(!r.url||!r.options)}const jK=Gs(class{constructor(r){this._elementRef=r}}),zK=new We("mat-icon-location",{providedIn:"root",factory:function(){const r=Td(xt),t=r?r.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),zN=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],$K=zN.map(r=>`[${r}]`).join(", "),KK=/^url\(['"]?#(.*?)['"]?\)$/;let wS=(()=>{class r extends jK{constructor(e,n,a,c,d){super(e),this._iconRegistry=n,this._location=c,this._errorHandler=d,this._inline=!1,this._currentIconFetch=D.EMPTY,a||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=ht(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=e.querySelectorAll("style");for(let c=0;c<n.length;c++)n[c].textContent+=" ";const a=this._location.getPathname();this._previousPath=a,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(a),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const a=e.childNodes[n];(1!==a.nodeType||"svg"===a.nodeName.toLowerCase())&&e.removeChild(a)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();n!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),n&&e.classList.add(n),this._previousFontSetClass=n),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((a,c)=>{a.forEach(d=>{c.setAttribute(d.name,`url('${e}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll($K),a=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let c=0;c<n.length;c++)zN.forEach(d=>{const p=n[c],f=p.getAttribute(d),v=f?f.match(KK):null;if(v){let C=a.get(p);C||(C=[],a.set(p,C)),C.push({name:d,value:v[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,a]=this._splitIconName(e);n&&(this._svgNamespace=n),a&&(this._svgName=a),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(a,n).pipe(Mi(1)).subscribe(c=>this._setSvgElement(c),c=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${a}! ${c.message}`))})}}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(qb),ji("aria-hidden"),I(zK),I(ps))},r.\u0275cmp=_t({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,n){2&e&&(ft("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),Ct("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Be],ngContentSelectors:HK,decls:1,vars:0,template:function(e,n){1&e&&(Tn(),At(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),r})(),SS=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Jt],Jt]}),r})(),JK=1;const QK=Promise.resolve(),ty={};function XN(r){return r in ty&&(delete ty[r],!0)}const YN={setImmediate(r){const t=JK++;return ty[t]=!0,QK.then(()=>XN(t)&&r()),t},clearImmediate(r){XN(r)}},DS=new class extends Ga{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,a=-1,c=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++a<c&&(t=e.shift()));if(this.active=!1,n){for(;++a<c&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends hb{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=YN.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(YN.clearImmediate(e),t.scheduled=void 0)}});class MS{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class lf extends MS{constructor(t,e,n,a){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=a}}class Xa extends MS{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class eJ extends MS{constructor(t){super(),this.element=t instanceof Qe?t.nativeElement:t}}class Dm{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof lf?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Xa?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof eJ?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class $N extends Dm{constructor(t,e,n,a,c){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=a,this.attachDomPortal=d=>{const p=d.element,f=this._document.createComment("dom-portal");p.parentNode.insertBefore(f,p),this.outletElement.appendChild(p),this._attachedPortal=d,super.setDisposeFn(()=>{f.parentNode&&f.parentNode.replaceChild(p,f)})},this._document=c}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let a;return t.viewContainerRef?(a=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>a.destroy())):(a=n.create(t.injector||this._defaultInjector),this._appRef.attachView(a.hostView),this.setDisposeFn(()=>{this._appRef.detachView(a.hostView),a.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(a)),this._attachedPortal=t,a}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(a=>this.outletElement.appendChild(a)),n.detectChanges(),this.setDisposeFn(()=>{let a=e.indexOf(n);-1!==a&&e.remove(a)}),this._attachedPortal=t,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let es=(()=>{class r extends Dm{constructor(e,n,a){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new nt,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");c.setAttachedHost(this),d.parentNode.insertBefore(p,d),this._getRootNode().appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=a}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,c=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),d=n.createComponent(c,n.length,e.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=e,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return r.\u0275fac=function(e){return new(e||r)(I(ka),I(ui),I(xt))},r.\u0275dir=Ce({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Be]}),r})(),xu=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({}),r})();function ys(r,t,e,n){return y(e)&&(n=e,e=void 0),n?ys(r,t,e).pipe(Ee(a=>u(a)?n(...a):n(a))):new Z(a=>{KN(r,t,function(d){a.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},a,e)})}function KN(r,t,e,n,a){let c;if(function(r){return r&&"function"==typeof r.addEventListener&&"function"==typeof r.removeEventListener}(r)){const d=r;r.addEventListener(t,e,a),c=()=>d.removeEventListener(t,e,a)}else if(function(r){return r&&"function"==typeof r.on&&"function"==typeof r.off}(r)){const d=r;r.on(t,e),c=()=>d.off(t,e)}else if(function(r){return r&&"function"==typeof r.addListener&&"function"==typeof r.removeListener}(r)){const d=r;r.addListener(t,e),c=()=>d.removeListener(t,e)}else{if(!r||!r.length)throw new TypeError("Invalid event target");for(let d=0,p=r.length;d<p;d++)KN(r[d],t,e,n,a)}n.add(c)}new class extends Ga{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,a=-1,c=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++a<c&&(t=e.shift()));if(this.active=!1,n){for(;++a<c&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends hb{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}});class lJ{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new cJ(t,this.durationSelector))}}class cJ extends ln{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:a}=this;e=a(t)}catch(a){return this.destination.error(a)}const n=En(e,new Xe(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function JN(r){return!u(r)&&r-parseFloat(r)+1>=0}function uJ(r){const{index:t,period:e,subscriber:n}=r;if(n.next(t),!n.closed){if(-1===e)return n.complete();r.index=t+1,this.schedule(r,e)}}function ny(r,t=pb){return function(r){return function(e){return e.lift(new lJ(r))}}(()=>function(r=0,t,e){let n=-1;return JN(t)?n=Number(t)<1?1:Number(t):ce(t)&&(e=t),ce(e)||(e=pb),new Z(a=>{const c=JN(r)?r:+r-e.now();return e.schedule(uJ,c,{index:0,period:n,subscriber:a})})}(r,t))}const mJ=new class extends Ga{}(class extends hb{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}});class iy extends F{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(iy.dispatch,this.delay,new vJ(t,this.destination)))}_next(t){this.scheduleMessage(bs.createNext(t))}_error(t){this.scheduleMessage(bs.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(bs.createComplete()),this.unsubscribe()}}class vJ{constructor(t,e){this.notification=t,this.destination=e}}class bJ extends B{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new yJ(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=n.length;let d;if(this.closed)throw new H;if(this.isStopped||this.hasError?d=D.EMPTY:(this.observers.push(t),d=new de(this,t)),a&&t.add(t=new iy(t,a)),e)for(let p=0;p<c&&!t.closed;p++)t.next(n[p]);else for(let p=0;p<c&&!t.closed;p++)t.next(n[p].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),d}_getNow(){return(this.scheduler||mJ).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,a=this._events,c=a.length;let d=0;for(;d<c&&!(t-a[d].time<n);)d++;return c>e&&(d=Math.max(d,c-e)),d>0&&a.splice(0,d),a}}class yJ{constructor(t,e){this.time=t,this.value=e}}let ry=(()=>{class r{constructor(){this._listeners=[]}notify(e,n){for(let a of this._listeners)a(e,n)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(n=>e!==n)}}ngOnDestroy(){this._listeners=[]}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({factory:function(){return new r},token:r,providedIn:"root"}),r})(),Ou=(()=>{class r{constructor(e,n,a){this._ngZone=e,this._platform=n,this._scrolled=new B,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=a}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Z(n=>{this._globalSubscription||this._addGlobalListener();const a=e>0?this._scrolled.pipe(ny(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{a.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):en()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const a=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(di(c=>!c||a.indexOf(c)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((a,c)=>{this._scrollableContainsElement(c,e)&&n.push(c)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let a=bc(n),c=e.getElementRef().nativeElement;do{if(a==c)return!0}while(a=a.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ys(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return r.\u0275fac=function(e){return new(e||r)(be(Pt),be(Vn),be(xt,8))},r.\u0275prov=mt({factory:function(){return new r(be(Pt),be(Vn),be(xt,8))},token:r,providedIn:"root"}),r})(),cf=(()=>{class r{constructor(e,n,a,c){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=a,this.dir=c,this._destroyed=new B,this._elementScrolled=new Z(d=>this.ngZone.runOutsideAngular(()=>ys(this.elementRef.nativeElement,"scroll").pipe(sn(this._destroyed)).subscribe(d)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,a=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=a?e.end:e.start),null==e.right&&(e.right=a?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),a&&0!=ym()?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),2==ym()?e.left=e.right:1==ym()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;Qk()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",a="right",c=this.elementRef.nativeElement;if("top"==e)return c.scrollTop;if("bottom"==e)return c.scrollHeight-c.clientHeight-c.scrollTop;const d=this.dir&&"rtl"==this.dir.value;return"start"==e?e=d?a:n:"end"==e&&(e=d?n:a),d&&2==ym()?e==n?c.scrollWidth-c.clientWidth-c.scrollLeft:c.scrollLeft:d&&1==ym()?e==n?c.scrollLeft+c.scrollWidth-c.clientWidth:-c.scrollLeft:e==n?c.scrollLeft:c.scrollWidth-c.clientWidth-c.scrollLeft}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(Ou),I(Pt),I(bi,8))},r.\u0275dir=Ce({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),r})(),Cs=(()=>{class r{constructor(e,n,a){this._platform=e,this._change=new B,this._changeListener=c=>{this._change.next(c)},this._document=a,n.runOutsideAngular(()=>{if(e.isBrowser){const c=this._getWindow();c.addEventListener("resize",this._changeListener),c.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:a}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+a,right:e.left+n,height:a,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),a=e.documentElement,c=a.getBoundingClientRect();return{top:-c.top||e.body.scrollTop||n.scrollY||a.scrollTop||0,left:-c.left||e.body.scrollLeft||n.scrollX||a.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(ny(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return r.\u0275fac=function(e){return new(e||r)(be(Vn),be(Pt),be(xt,8))},r.\u0275prov=mt({factory:function(){return new r(be(Vn),be(Pt),be(xt,8))},token:r,providedIn:"root"}),r})(),Tc=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({}),r})(),AS=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[nf,Zp,Tc],nf,Tc]}),r})();const nL=Qk();class PJ{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Vr(-this._previousScrollPosition.left),t.style.top=Vr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,a=this._document.body.style,c=n.scrollBehavior||"",d=a.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),nL&&(n.scrollBehavior=a.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),nL&&(n.scrollBehavior=c,a.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class FJ{constructor(t,e,n,a){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=a,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class iL{enable(){}disable(){}attach(){}}function xS(r,t){return t.some(e=>r.bottom<e.top||r.top>e.bottom||r.right<e.left||r.left>e.right)}function rL(r,t){return t.some(e=>r.top<e.top||r.bottom>e.bottom||r.left<e.left||r.right>e.right)}class BJ{constructor(t,e,n,a){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=a,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:a}=this._viewportRuler.getViewportSize();xS(e,[{width:n,height:a,bottom:a,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let VJ=(()=>{class r{constructor(e,n,a,c){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=a,this.noop=()=>new iL,this.close=d=>new FJ(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new PJ(this._viewportRuler,this._document),this.reposition=d=>new BJ(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=c}}return r.\u0275fac=function(e){return new(e||r)(be(Ou),be(Cs),be(Pt),be(xt))},r.\u0275prov=mt({factory:function(){return new r(be(Ou),be(Cs),be(Pt),be(xt))},token:r,providedIn:"root"}),r})();class uf{constructor(t){if(this.scrollStrategy=new iL,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class HJ{constructor(t,e,n,a,c){this.offsetX=n,this.offsetY=a,this.panelClass=c,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class UJ{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let oL=(()=>{class r{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return r.\u0275fac=function(e){return new(e||r)(be(xt))},r.\u0275prov=mt({factory:function(){return new r(be(xt))},token:r,providedIn:"root"}),r})(),GJ=(()=>{class r extends oL{constructor(e){super(e),this._keydownListener=n=>{const a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){a[c]._keydownEvents.next(n);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return r.\u0275fac=function(e){return new(e||r)(be(xt))},r.\u0275prov=mt({factory:function(){return new r(be(xt))},token:r,providedIn:"root"}),r})(),WJ=(()=>{class r extends oL{constructor(e,n){super(e),this._platform=n,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=Mu(a)},this._clickListener=a=>{const c=Mu(a),d="click"===a.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let f=p.length-1;f>-1;f--){const v=p[f];if(!(v._outsidePointerEvents.observers.length<1)&&v.hasAttached()){if(v.overlayElement.contains(c)||v.overlayElement.contains(d))break;v._outsidePointerEvents.next(a)}}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;n.addEventListener("pointerdown",this._pointerDownListener,!0),n.addEventListener("click",this._clickListener,!0),n.addEventListener("auxclick",this._clickListener,!0),n.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return r.\u0275fac=function(e){return new(e||r)(be(xt),be(Vn))},r.\u0275prov=mt({factory:function(){return new r(be(xt),be(Vn))},token:r,providedIn:"root"}),r})(),Am=(()=>{class r{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Aw()){const a=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let c=0;c<a.length;c++)a[c].parentNode.removeChild(a[c])}const n=this._document.createElement("div");n.classList.add(e),Aw()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return r.\u0275fac=function(e){return new(e||r)(be(xt),be(Vn))},r.\u0275prov=mt({factory:function(){return new r(be(xt),be(Vn))},token:r,providedIn:"root"}),r})();class jJ{constructor(t,e,n,a,c,d,p,f,v){this._portalOutlet=t,this._host=e,this._pane=n,this._config=a,this._ngZone=c,this._keyboardDispatcher=d,this._document=p,this._location=f,this._outsideClickDispatcher=v,this._backdropElement=null,this._backdropClick=new B,this._attachments=new B,this._detachments=new B,this._locationChanges=D.EMPTY,this._backdropClickHandler=C=>this._backdropClick.next(C),this._keydownEvents=new B,this._outsidePointerEvents=new B,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Mi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Vr(this._config.width),t.height=Vr(this._config.height),t.minWidth=Vr(this._config.minWidth),t.minHeight=Vr(this._config.minHeight),t.maxWidth=Vr(this._config.maxWidth),t.maxHeight=Vr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const n=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",n),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",n)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const a=t.classList;yb(e).forEach(c=>{c&&(n?a.add(c):a.remove(c))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(sn(Vt(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.parentNode&&t.parentNode.removeChild(t),this._backdropElement===t&&(this._backdropElement=null))}}const sL="cdk-overlay-connected-position-bounding-box",zJ=/([A-Za-z%]+)$/;class OS{constructor(t,e,n,a,c){this._viewportRuler=e,this._document=n,this._platform=a,this._overlayContainer=c,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new B,this._resizeSubscription=D.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(sL),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,a=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,d),f=this._getOverlayPoint(p,e,d),v=this._getOverlayFit(f,e,n,d);if(v.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(v,f,n)?a.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<v.visibleArea)&&(c={overlayFit:v,overlayPoint:f,originPoint:p,position:d,overlayRect:e})}if(a.length){let d=null,p=-1;for(const f of a){const v=f.boundingBoxRect.width*f.boundingBoxRect.height*(f.position.weight||1);v>p&&(p=v,d=f)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&uh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(sL),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,a;if("center"==e.originX)n=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;n="start"==e.originX?c:d}return a="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:a}}_getOverlayPoint(t,e,n){let a,c;return a="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,c="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+a,y:t.y+c}}_getOverlayFit(t,e,n,a){const c=lL(e);let{x:d,y:p}=t,f=this._getOffset(a,"x"),v=this._getOffset(a,"y");f&&(d+=f),v&&(p+=v);let O=0-p,P=p+c.height-n.height,W=this._subtractOverflows(c.width,0-d,d+c.width-n.width),ne=this._subtractOverflows(c.height,O,P),K=W*ne;return{visibleArea:K,isCompletelyWithinViewport:c.width*c.height===K,fitsInViewportVertically:ne===c.height,fitsInViewportHorizontally:W==c.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const a=n.bottom-e.y,c=n.right-e.x,d=aL(this._overlayRef.getConfig().minHeight),p=aL(this._overlayRef.getConfig().minWidth),v=t.fitsInViewportHorizontally||null!=p&&p<=c;return(t.fitsInViewportVertically||null!=d&&d<=a)&&v}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const a=lL(e),c=this._viewportRect,d=Math.max(t.x+a.width-c.width,0),p=Math.max(t.y+a.height-c.height,0),f=Math.max(c.top-n.top-t.y,0),v=Math.max(c.left-n.left-t.x,0);let C=0,M=0;return C=a.width<=c.width?v||-d:t.x<this._viewportMargin?c.left-n.left-t.x:0,M=a.height<=c.height?f||-p:t.y<this._viewportMargin?c.top-n.top-t.y:0,this._previousPushAmount={x:C,y:M},{x:t.x+C,y:t.y+M}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),a=new UJ(t,n);this._positionChanges.next(a)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,a=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let c=0;c<e.length;c++)e[c].style.transformOrigin=`${n} ${a}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,a=this._isRtl();let c,d,p,C,M,O;if("top"===e.overlayY)d=t.y,c=n.height-d+this._viewportMargin;else if("bottom"===e.overlayY)p=n.height-t.y+2*this._viewportMargin,c=n.height-p+this._viewportMargin;else{const P=Math.min(n.bottom-t.y+n.top,t.y),W=this._lastBoundingBoxSize.height;c=2*P,d=t.y-P,c>W&&!this._isInitialRender&&!this._growAfterOpen&&(d=t.y-W/2)}if("end"===e.overlayX&&!a||"start"===e.overlayX&&a)O=n.width-t.x+this._viewportMargin,C=t.x-this._viewportMargin;else if("start"===e.overlayX&&!a||"end"===e.overlayX&&a)M=t.x,C=n.right-t.x;else{const P=Math.min(n.right-t.x+n.left,t.x),W=this._lastBoundingBoxSize.width;C=2*P,M=t.x-P,C>W&&!this._isInitialRender&&!this._growAfterOpen&&(M=t.x-W/2)}return{top:d,left:M,bottom:p,right:O,width:C,height:c}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const a={};if(this._hasExactPosition())a.top=a.left="0",a.bottom=a.right=a.maxHeight=a.maxWidth="",a.width=a.height="100%";else{const c=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;a.height=Vr(n.height),a.top=Vr(n.top),a.bottom=Vr(n.bottom),a.width=Vr(n.width),a.left=Vr(n.left),a.right=Vr(n.right),a.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",a.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",c&&(a.maxHeight=Vr(c)),d&&(a.maxWidth=Vr(d))}this._lastBoundingBoxSize=n,uh(this._boundingBox.style,a)}_resetBoundingBoxStyles(){uh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){uh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},a=this._hasExactPosition(),c=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(a){const C=this._viewportRuler.getViewportScrollPosition();uh(n,this._getExactOverlayY(e,t,C)),uh(n,this._getExactOverlayX(e,t,C))}else n.position="static";let p="",f=this._getOffset(e,"x"),v=this._getOffset(e,"y");f&&(p+=`translateX(${f}px) `),v&&(p+=`translateY(${v}px)`),n.transform=p.trim(),d.maxHeight&&(a?n.maxHeight=Vr(d.maxHeight):c&&(n.maxHeight="")),d.maxWidth&&(a?n.maxWidth=Vr(d.maxWidth):c&&(n.maxWidth="")),uh(this._pane.style,n)}_getExactOverlayY(t,e,n){let a={top:"",bottom:""},c=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,n));let d=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return c.y-=d,"bottom"===t.overlayY?a.bottom=this._document.documentElement.clientHeight-(c.y+this._overlayRect.height)+"px":a.top=Vr(c.y),a}_getExactOverlayX(t,e,n){let d,a={left:"",right:""},c=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(c=this._pushOverlayOnScreen(c,this._overlayRect,n)),d=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===d?a.right=this._document.documentElement.clientWidth-(c.x+this._overlayRect.width)+"px":a.left=Vr(c.x),a}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(a=>a.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:rL(t,n),isOriginOutsideView:xS(t,n),isOverlayClipped:rL(e,n),isOverlayOutsideView:xS(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,a)=>n-Math.max(a,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&yb(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Qe)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function uh(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function aL(r){if("number"!=typeof r&&null!=r){const[t,e]=r.split(zJ);return e&&"px"!==e?null:parseFloat(t)}return r||null}function lL(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}class XJ{constructor(t,e,n,a,c,d,p){this._preferredPositions=[],this._positionStrategy=new OS(n,a,c,d,p).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,a){const c=new HJ(t,e,n,a);return this._preferredPositions.push(c),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const cL="cdk-global-overlay-wrapper";class YJ{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(cL),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:a,height:c,maxWidth:d,maxHeight:p}=n,f=!("100%"!==a&&"100vw"!==a||d&&"100%"!==d&&"100vw"!==d),v=!("100%"!==c&&"100vh"!==c||p&&"100%"!==p&&"100vh"!==p);t.position=this._cssPosition,t.marginLeft=f?"0":this._leftOffset,t.marginTop=v?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,f?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=v?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(cL),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let $J=(()=>{class r{constructor(e,n,a,c){this._viewportRuler=e,this._document=n,this._platform=a,this._overlayContainer=c}global(){return new YJ}connectedTo(e,n,a){return new XJ(n,a,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new OS(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return r.\u0275fac=function(e){return new(e||r)(be(Cs),be(xt),be(Vn),be(Am))},r.\u0275prov=mt({factory:function(){return new r(be(Cs),be(xt),be(Vn),be(Am))},token:r,providedIn:"root"}),r})(),KJ=0,Bo=(()=>{class r{constructor(e,n,a,c,d,p,f,v,C,M,O){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=a,this._positionBuilder=c,this._keyboardDispatcher=d,this._injector=p,this._ngZone=f,this._document=v,this._directionality=C,this._location=M,this._outsideClickDispatcher=O}create(e){const n=this._createHostElement(),a=this._createPaneElement(n),c=this._createPortalOutlet(a),d=new uf(e);return d.direction=d.direction||this._directionality.value,new jJ(c,n,a,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+KJ++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(du)),new $N(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return r.\u0275fac=function(e){return new(e||r)(be(VJ),be(Am),be(ka),be($J),be(GJ),be(Yn),be(Pt),be(xt),be(bi),be(Hp),be(WJ))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})();const qJ={provide:new We("cdk-connected-overlay-scroll-strategy"),deps:[Bo],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let ku=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[Bo,qJ],imports:[[nf,xu,AS],AS]}),r})();const eQ=["mat-menu-item",""];function tQ(r,t){1&r&&(Ar(),fe(0,"svg",2),St(1,"polygon",3),ge())}const hL=["*"];function nQ(r,t){if(1&r){const e=zi();fe(0,"div",0),lt("keydown",function(a){return Pn(e),ct()._handleKeydown(a)})("click",function(){return Pn(e),ct().closed.emit("click")})("@transformMenu.start",function(a){return Pn(e),ct()._onAnimationStart(a)})("@transformMenu.done",function(a){return Pn(e),ct()._onAnimationDone(a)}),fe(1,"div",1),At(2),ge(),ge()}if(2&r){const e=ct();xe("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),ft("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const oy={transformMenu:hr("transformMenu",[Hn("void",jt({opacity:0,transform:"scale(0.8)"})),Zn("void => enter",ii("120ms cubic-bezier(0, 0, 0.2, 1)",jt({opacity:1,transform:"scale(1)"}))),Zn("* => void",ii("100ms 25ms linear",jt({opacity:0})))]),fadeInItems:hr("fadeInItems",[Hn("showing",jt({opacity:1})),Zn("void => *",[jt({opacity:0}),ii("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},pL=new We("MatMenuContent"),kS=new We("MAT_MENU_PANEL"),rQ=qo(Po(class{}));let sy=(()=>{class r extends rQ{constructor(e,n,a,c,d){super(),this._elementRef=e,this._focusMonitor=a,this._parentMenu=c,this._changeDetectorRef=d,this.role="menuitem",this._hovered=new B,this._focused=new B,this._highlighted=!1,this._triggersSubmenu=!1,c&&c.addItem&&c.addItem(this)}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e,n;const a=this._elementRef.nativeElement.cloneNode(!0),c=a.querySelectorAll("mat-icon, .material-icons");for(let d=0;d<c.length;d++){const p=c[d];null===(e=p.parentNode)||void 0===e||e.removeChild(p)}return(null===(n=a.textContent)||void 0===n?void 0:n.trim())||""}_setHighlighted(e){var n;this._highlighted=e,null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(xt),I(Dr),I(kS,8),I(un))},r.\u0275cmp=_t({type:r,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,n){1&e&&lt("click",function(c){return n._checkDisabled(c)})("mouseenter",function(){return n._handleMouseEnter()}),2&e&&(ft("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled.toString())("disabled",n.disabled||null),Ct("mat-menu-item",!0)("mat-menu-item-highlighted",n._highlighted)("mat-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Be],attrs:eQ,ngContentSelectors:hL,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,n){1&e&&(Tn(),At(0),St(1,"div",0),gt(2,tQ,2,0,"svg",1)),2&e&&(Ie(1),xe("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),Ie(1),xe("ngIf",n._triggersSubmenu))},directives:[Fo,eo],encapsulation:2,changeDetection:0}),r})();const fL=new We("mat-menu-default-options",{providedIn:"root",factory:function(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let sQ=0,xm=(()=>{class r{constructor(e,n,a){this._elementRef=e,this._ngZone=n,this._defaultOptions=a,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Vs,this._tabSubscription=D.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new B,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new nt,this.close=this.closed,this.panelId="mat-menu-panel-"+sQ++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=ht(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=ht(e)}set panelClass(e){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(a=>{this._classList[a]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(a=>{this._classList[a]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new ef(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Ri(this._directDescendantItems),_o(e=>Vt(...e.map(n=>n._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e))}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Ri(this._directDescendantItems),_o(n=>Vt(...n.map(a=>a._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const n=e.keyCode,a=this._keyManager;switch(n){case 27:dr(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:(38===n||40===n)&&a.setFocusOrigin("keyboard"),a.onKeydown(e)}}focusFirstItem(e="program"){this.lazyContent?this._ngZone.onStable.pipe(Mi(1)).subscribe(()=>this._focusFirstItem(e)):this._focusFirstItem(e)}_focusFirstItem(e){const n=this._keyManager;if(n.setFocusOrigin(e).setFirstItemActive(),!n.activeItem&&this._directDescendantItems.length){let a=this._directDescendantItems.first._getHostElement().parentElement;for(;a;){if("menu"===a.getAttribute("role")){a.focus();break}a=a.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const n=Math.min(this._baseElevation+e,24),a=`${this._elevationPrefix}${n}`,c=Object.keys(this._classList).find(d=>d.startsWith(this._elevationPrefix));(!c||c===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[a]=!0,this._previousElevation=a)}setPositionClasses(e=this.xPosition,n=this.yPosition){const a=this._classList;a["mat-menu-before"]="before"===e,a["mat-menu-after"]="after"===e,a["mat-menu-above"]="above"===n,a["mat-menu-below"]="below"===n}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Ri(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(Pt),I(fL))},r.\u0275dir=Ce({type:r,contentQueries:function(e,n,a){if(1&e&&(qt(a,pL,5),qt(a,sy,5),qt(a,sy,4)),2&e){let c;je(c=ze())&&(n.lazyContent=c.first),je(c=ze())&&(n._allItems=c),je(c=ze())&&(n.items=c)}},viewQuery:function(e,n){if(1&e&&an(oi,5),2&e){let a;je(a=ze())&&(n.templateRef=a.first)}},inputs:{backdropClass:"backdropClass",xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"]},outputs:{closed:"closed",close:"close"}}),r})(),gL=(()=>{class r extends xm{constructor(e,n,a){super(e,n,a),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(Pt),I(fL))},r.\u0275cmp=_t({type:r,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,n){2&e&&ft("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[dt([{provide:kS,useExisting:r}]),Be],ngContentSelectors:hL,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,n){1&e&&(Tn(),gt(0,nQ,3,6,"ng-template"))},directives:[zd],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[oy.transformMenu,oy.fadeInItems]},changeDetection:0}),r})();const mL=new We("mat-menu-scroll-strategy"),lQ={provide:mL,deps:[Bo],useFactory:function(r){return()=>r.scrollStrategies.reposition()}},vL=Du({passive:!0});let cQ=(()=>{class r{constructor(e,n,a,c,d,p,f,v){this._overlay=e,this._element=n,this._viewContainerRef=a,this._menuItemInstance=p,this._dir=f,this._focusMonitor=v,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=D.EMPTY,this._hoverSubscription=D.EMPTY,this._menuCloseSubscription=D.EMPTY,this._handleTouchStart=C=>{Nw(C)||(this._openedBy="touch")},this._openedBy=void 0,this._ariaHaspopup=!0,this.restoreFocus=!0,this.menuOpened=new nt,this.onMenuOpen=this.menuOpened,this.menuClosed=new nt,this.onMenuClose=this.menuClosed,this._scrollStrategy=c,this._parentMaterialMenu=d instanceof xm?d:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,vL),p&&(p._triggersSubmenu=this.triggersSubmenu())}get _ariaExpanded(){return this.menuOpen||null}get _ariaControl(){return this.menuOpen?this.menu.panelId:null}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,vL),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),n=e.getConfig();this._setPosition(n.positionStrategy),n.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof xm&&this.menu._startAnimation()}closeMenu(){this.menu.close.emit()}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}updatePosition(){var e;null===(e=this._overlayRef)||void 0===e||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof xm?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(di(a=>"void"===a.toState),Mi(1),sn(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n.lazyContent&&n.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,n=this.menu.parentMenu;for(;n;)e++,n=n.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new uf({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(n=>{this.menu.setPositionClasses("start"===n.connectionPair.overlayX?"after":"before","top"===n.connectionPair.overlayY?"below":"above")})}_setPosition(e){let[n,a]="before"===this.menu.xPosition?["end","start"]:["start","end"],[c,d]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[p,f]=[c,d],[v,C]=[n,a],M=0;this.triggersSubmenu()?(C=n="before"===this.menu.xPosition?"start":"end",a=v="end"===n?"start":"end",M="bottom"===c?8:-8):this.menu.overlapTrigger||(p="top"===c?"bottom":"top",f="top"===d?"bottom":"top"),e.withPositions([{originX:n,originY:p,overlayX:v,overlayY:c,offsetY:M},{originX:a,originY:p,overlayX:C,overlayY:c,offsetY:M},{originX:n,originY:f,overlayX:v,overlayY:d,offsetY:-M},{originX:a,originY:f,overlayX:C,overlayY:d,offsetY:-M}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return Vt(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:en(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(di(d=>d!==this._menuItemInstance),di(()=>this._menuOpen)):en(),n)}_handleMousedown(e){kw(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const n=e.keyCode;(13===n||32===n)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===n&&"ltr"===this.dir||37===n&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(di(e=>e===this._menuItemInstance&&!e.disabled),fb(0,DS)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof xm&&this.menu._isAnimating?this.menu._animationDone.pipe(Mi(1),fb(0,DS),sn(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new Xa(this.menu.templateRef,this._viewContainerRef)),this._portal}}return r.\u0275fac=function(e){return new(e||r)(I(Bo),I(Qe),I(ui),I(mL),I(kS,8),I(sy,10),I(bi,8),I(Dr))},r.\u0275dir=Ce({type:r,hostVars:3,hostBindings:function(e,n){1&e&&lt("mousedown",function(c){return n._handleMousedown(c)})("keydown",function(c){return n._handleKeydown(c)})("click",function(c){return n._handleClick(c)}),2&e&&ft("aria-haspopup",n._ariaHaspopup)("aria-expanded",n._ariaExpanded)("aria-controls",n._ariaControl)},inputs:{restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"],_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),r})(),bL=(()=>{class r extends cQ{}return r.\u0275fac=function(){let t;return function(n){return(t||(t=nn(r)))(n||r)}}(),r.\u0275dir=Ce({type:r,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[Be]}),r})(),uQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[lQ],imports:[[Lr,Jt,za,ku],Tc,Jt]}),r})();const dQ=["editorContainer"],NS=new We("NGX_MONACO_EDITOR_CONFIG");let CL,yL=!1,hQ=(()=>{class r{constructor(e){this.config=e,this.onInit=new nt}ngAfterViewInit(){yL?CL.then(()=>{this.initMonaco(this._options)}):(yL=!0,CL=new Promise(e=>{const n=(this.config.baseUrl||"./assets")+"/monaco-editor/min/vs";if("object"==typeof window.monaco)return void e();const a=()=>{window.require.config({paths:{vs:`${n}`}}),window.require(["vs/editor/editor.main"],()=>{"function"==typeof this.config.onMonacoLoad&&this.config.onMonacoLoad(),this.initMonaco(this._options),e()})};if(window.require)a();else{const c=document.createElement("script");c.type="text/javascript",c.src=`${n}/loader.js`,c.addEventListener("load",a),document.body.appendChild(c)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}}return r.\u0275fac=function(e){return new(e||r)(I(NS))},r.\u0275cmp=_t({type:r,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&an(dQ,7),2&e){let a;je(a=ze())&&(n._editorContainer=a.first)}},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),r})(),pQ=(()=>{class r extends hQ{constructor(e,n){super(n),this.zone=e,this.editorConfig=n,this._value="",this.propagateChange=a=>{},this.onTouched=()=>{}}set options(e){this._options=Object.assign({},this.config.defaultOptions,e),this._editor&&(this._editor.dispose(),this.initMonaco(e))}get options(){return this._options}set model(e){this.options.model=e,this._editor&&(this._editor.dispose(),this.initMonaco(this.options))}writeValue(e){this._value=e||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}initMonaco(e){const n=!!e.model;if(n){const a=monaco.editor.getModel(e.model.uri||"");a?(e.model=a,e.model.setValue(this._value)):e.model=monaco.editor.createModel(e.model.value,e.model.language,e.model.uri)}this._editor=monaco.editor.create(this._editorContainer.nativeElement,e),n||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(a=>{const c=this._editor.getValue();this.zone.run(()=>{this.propagateChange(c),this._value=c})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=ys(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}}return r.\u0275fac=function(e){return new(e||r)(I(Pt),I(NS))},r.\u0275cmp=_t({type:r,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[dt([{provide:wr,useExisting:vt(()=>r),multi:!0}]),Be],decls:2,vars:0,consts:[[1,"editor-container"],["editorContainer",""]],template:function(e,n){1&e&&St(0,"div",0,1)},styles:["[_nghost-%COMP%] {\n          display: block;\n          height: 200px;\n      }\n\n      .editor-container[_ngcontent-%COMP%] {\n          width: 100%;\n          height: 98%;\n      }"]}),r})(),fQ=(()=>{class r{static forRoot(e={}){return{ngModule:r,providers:[{provide:NS,useValue:e}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Lr]]}),r})();function gQ(r,t){if(1&r){const e=zi();fe(0,"button",15),lt("click",function(){const c=Pn(e).$implicit;return ct(2).ShowDemo(c.id)}),Ot(1),ge()}if(2&r){const e=t.$implicit,n=t.index;Ie(1),U_("",n+1," ",e.description,"")}}function mQ(r,t){if(1&r&&(fe(0,"button",14),Ot(1),ge(),fe(2,"mat-menu",null,8),gt(4,gQ,2,2,"ng-template",9),ge()),2&r){const e=t.$implicit,n=t.index;xe("matMenuTriggerFor",xo(3)),Ie(1),WC("",n+1," ",e.key," (",e.value.length,")"),Ie(3),xe("ngForOf",e.value)}}const _Q=function(r){return["/","automation","loadexample",r]};function vQ(r,t){if(1&r&&(fe(0,"a",16),Ot(1),ge()),2&r){const e=ct();xe("routerLink",Bd(2,_Q,e.mustLoadDemoBlock)),Ie(1),zr("Direct link ",e.mustLoadDemoBlock,"")}}function bQ(r,t){1&r&&(fe(0,"span"),Ot(1,"Loading"),ge())}function yQ(r,t){if(1&r){const e=zi();fe(0,"ngx-monaco-editor",18),lt("ngModelChange",function(a){return Pn(e),ct(2).showInner=a}),ge()}if(2&r){const e=ct(2);xe("options",e.editorPlain)("ngModel",e.showInner)}}function CQ(r,t){if(1&r){const e=zi();fe(0,"ngx-monaco-editor",18),lt("ngModelChange",function(a){return Pn(e),ct(2).showXMLCode=a}),ge()}if(2&r){const e=ct(2);xe("options",e.editorXMLOptions)("ngModel",e.showXMLCode)}}function EQ(r,t){if(1&r){const e=zi();fe(0,"ngx-monaco-editor",18),lt("ngModelChange",function(a){return Pn(e),ct(2).showJSCode=a}),ge()}if(2&r){const e=ct(2);xe("options",e.editorJSOptions)("ngModel",e.showJSCode)}}function TQ(r,t){if(1&r){const e=zi();fe(0,"ngx-monaco-editor",18),lt("ngModelChange",function(a){return Pn(e),ct(2).showBlocksDefinition=a}),ge()}if(2&r){const e=ct(2);xe("options",e.editorJSOptions)("ngModel",e.showBlocksDefinition)}}function wQ(r,t){if(1&r&&(fe(0,"mat-grid-tile"),gt(1,yQ,1,2,"ngx-monaco-editor",17),gt(2,CQ,1,2,"ngx-monaco-editor",17),gt(3,EQ,1,2,"ngx-monaco-editor",17),gt(4,TQ,1,2,"ngx-monaco-editor",17),ge()),2&r){const e=ct();Ie(1),xe("ngIf",e.ShowOutput()),Ie(1),xe("ngIf",e.ShowCode()),Ie(1),xe("ngIf",e.ShowXML()),Ie(1),xe("ngIf",e.ShowBlocksDefinition())}}var aa=(()=>(function(r){r[r.ShowNone=0]="ShowNone",r[r.ShowCode=1]="ShowCode",r[r.ShowXML=2]="ShowXML",r[r.ShowOutput=3]="ShowOutput",r[r.ShowBlocksDefinition=4]="ShowBlocksDefinition",r[r.Stop=100]="Stop"}(aa||(aa={})),aa))();let EL=(()=>{class r{constructor(e,n,a,c,d){this.tabulator=e,this.settings=n,this.loadDemo=a,this.ar=c,this.ta=d,this.editorXMLOptions={theme:"vs-dark",language:"xml"},this.editorJSOptions={theme:"vs-dark",language:"javascript",lineNumbers:"on"},this.editorPlain={theme:"vs-dark",language:"plaintext",lineNumbers:"on"},this.code='function x() {\nconsole.log("Hello world!");\n}',this.showCodeAndXML=aa.ShowNone,this.swaggerLoaded=0,this.demoWorkspace=null,this.demos=[],this.demosCategories=new Map,this.mustLoadDemoBlock="",this.intro=Z6(),this.step=0,this.swaggerData=[],this.showInner="",this.showXMLCode="",this.showJSCode="",this.showBlocksDefinition="",this.toolboxXML="",this.ar.paramMap.subscribe(p=>{this.mustLoadDemoBlock=p.get("demoblock")}),this.ta.receiveData().subscribe(p=>{"DisplayBlocklyComponent"==p[0]&&this[p[1]]()})}createIntro(){var e,n,a=(null===(e=this.settings.settings)||void 0===e?void 0:e.title)||"",c=null===(n=this.settings.settings)||void 0===n?void 0:n.tourSteps.map(d=>({title:a,intro:d.text,element:document.querySelector(d.query)||void 0}));this.intro.setOptions({exitOnEsc:!0,showStepNumbers:!0,showButtons:!0,doneLabel:"Exit",skipLabel:"Skip",showProgress:!0,steps:c}).start()}clearOutput(){this.step=0,this.showInner="",this.tabulator.ClearDataGrid()}RunCode(){var e;this.run=$p.interpreterHelper.createInterpreter(this.demoWorkspace,Fr),this.clearOutput(),this.showCodeAndXML=aa.ShowOutput,this.showInner='{ "step_0": "start program",',e=this,this.run.runCode((a,c)=>{try{return new Interpreter(this.run.latestCode,c)}catch(d){e.CalculateXMLAndCode(),window.alert("please copy the left output and report there is an error at "+JSON.stringify(d))}},a=>{e.step++,e.showInner+=`\n           \n"step_${e.step}" : "${a}",`,this.tabulator.AddDataToGrid(a)},()=>{e.showInner+=`\n "step_${e.step+1}" : "program executed"\n}`,this.tabulator.FinishGrid()})}ShowDemo(e){this.mustLoadDemoBlock=e,this.loadDemo.getDemoBlock(e).subscribe(n=>{var a=Bn.Xml.textToDom(n);null!=this.demoWorkspace&&(Bn.Xml.clearWorkspaceAndLoadFromXml(a,this.demoWorkspace),window.alert("please press run code button"))})}registerSwaggerBlocksObjects(e,n){return n.fieldXMLObjects.map(c=>Bn.Xml.textToDom(c))}registerSwaggerBlocksAPIControllers(e,n,a){var d=n.operations.filter(p=>p.controller==a);return n.fieldXMLFunctions.filter(p=>{if(""==p.id)return!0;var f=p.id+"/",v=!1;return d.forEach(C=>{f.startsWith(C.id)&&(v=!0)}),!!v||(d.forEach(C=>{var M=C.id.substring(0,C.id.lastIndexOf("/"))+"{";f.startsWith(M)&&(v=!0)}),v)}).map(p=>Bn.Xml.textToDom(p.gui))}registerSwaggerBlocksAPIAll(e,n){return n.fieldXMLFunctions.map(c=>Bn.Xml.textToDom(c.gui))}ngOnInit(){this.StartRegister(),this.createIntro()}LoadSwagger(){var e=window.prompt("Swagger url? ","https://swagger-tax-calc-api.herokuapp.com/api-docs");if(e){if(e.endsWith(".html")||e.endsWith(".htm"))return void window.alert("Swagger should end with .json - see source of html page");this.LoadSwaggerFromUrl(e).then(n=>{this.addToToolboxSwagger(n,this),window.alert("done")})}}LoadSwaggerFromUrl(e,n){var a=this;return hw(function*(){var c=new Q6.parseData(e),d=yield c.ParseSwagger();d.name=n||e,a.swaggerData.push(d);for(var p=0;p<d.GenerateBlocks.length;p++)(0,d.GenerateBlocks[p])(Bn.Blocks,Fr,C=>new Bn.FieldDropdown(C));for(p=0;p<d.GenerateFunctions.length;p++)(0,d.GenerateFunctions[p])(Bn.Blocks,Fr,function(O){return new Bn.FieldImage(`assets/httpImages/${O}.png`,90,20,O)});return d})()}StartRegister(){var e=this;return hw(function*(){var n=e.settings.links,a=new Map;n.forEach(function(){var C=hw(function*(M){a.set(M.id,yield e.LoadSwaggerFromUrl(M.link,M.id))});return function(M){return C.apply(this,arguments)}}());var c=[...Array(50).keys()].map(C=>e.CategorySwaggerHidden(C)).join(""),d=e.settings.demoBlocks;e.demos=d.sort((C,M)=>C.description.localeCompare(M.description));var p=d.map(C=>C.categories).filter(C=>(null==C?void 0:C.length)>0).flatMap(C=>C.split(";")).filter(C=>(null==C?void 0:C.length)>0);e.demosCategories.set("All",e.demos),p.forEach(C=>{e.demosCategories.set(C,d.filter(M=>{var O;return(null===(O=M.categories)||void 0===O?void 0:O.length)>0}).filter(M=>(";"+M.categories+";").indexOf(";"+C+";")>-1))});const f=document.getElementById("steps");if(null!=f){e.tabulator.initGrid(f),Ei.filterBlocks.definitionBlocks(Bn.Blocks,Fr),Ei.waitBlocks.definitionBlocks(Bn.defineBlocksWithJsonArray,Fr),Ei.xhrBlocks.definitionBlocks(Bn.Blocks,Fr,function(C){return new Bn.FieldDropdown(C)}),Ei.propBlocks.definitionBlocks(Bn.Blocks,Fr,function(C){return new Bn.FieldLabelSerializable(C)}),Ei.guiBlocks.definitionBlocks(Bn.Blocks,Fr),Ei.convertersBlocks.definitionBlocks(Bn.Blocks,Fr),Ei.exportFileBlock.definitionBlocks(Bn.Blocks,Fr),Ei.createObjectBlocks.definitionBlocks(Bn.Blocks,Fr,Bn.Extensions,C=>new Bn.FieldTextInput(C),()=>Bn.Mutator),Ei.currentDateBlock.definitionBlocks(Bn.Blocks,Fr,function(C){return new Bn.FieldDropdown(C)}),Ei.dateFromTextBlock.definitionBlocks(Bn.Blocks,Fr),Ei.waitBlocks.definitionBlocks(Bn.Blocks,Fr),Ei.commentBlock.definitionBlocks(Bn.Blocks,Fr,C=>new Bn.FieldLabelSerializable(C)),Ei.trycatchFinBlock.definitionBlocks(Bn.Blocks,Fr),Ei.auth0Blocks.definitionBlocks(Bn.Blocks,Fr),Ei.windowsCreds.definitionBlocks(Bn.Blocks,Fr);var v=[Ei.defaultBlocks.generalBlocks(),`    \n        <category name='Blockly Advanced'>\n                ${Ei.filterBlocks.fieldXML()}\n            <category id="XHR" name="Request">\n            ${Ei.xhrBlocks.fieldXML()}\n            ${Ei.windowsCreds.fieldXML()}\n            </category>\n            <category name="Objects" id="objects">\n            ${Ei.propBlocks.fieldXML()}\n            ${Ei.createObjectBlocks.fieldXML()}\n            </category>\n            <category id="catGUI" name="GUI">\n            ${Ei.guiBlocks.fieldXML()}\n            </category>\n        `,`<category id="catTimers"  name="Timers">\n          ${Ei.waitBlocks.fieldXML()}\n        </category>`,`<category id="catConverters"  name="Converters">\n          ${Ei.convertersBlocks.fieldXML()}\n        </category>`,`<category id="catExporter"  name="Exporter">\n          ${Ei.exportFileBlock.fieldXML()}\n        </category>`,`<category id="catDates"  name="Dates">\n          ${Ei.currentDateBlock.fieldXML()}\n          ${Ei.dateFromTextBlock.fieldXML()}\n          ${Ei.waitBlocks.fieldXML()}\n        </category>`,`  <category id="programming" name="Programming">\n        ${Ei.trycatchFinBlock.fieldXML()}\n        ${Ei.commentBlock.fieldXML()}\n          </category>\n        \n      `,`${Ei.auth0Blocks.fieldXML()}`,`</category>\n      <category name="Swagger" id="catSwagger" expanded='true' >          \n          ${c}\n        </category> \n        \n        `];e.initialize(v)}else window.alert("gridElement is null")})()}SaveBlocks(){$p.saveBlocksUrl.saveState(Bn.Xml,this.demoWorkspace)}ShowBlocksDefinition(){return this.showCodeAndXML===aa.ShowBlocksDefinition}ShowSelection(){return aa[this.showCodeAndXML]}ShowSomething(){return this.showCodeAndXML!==aa.ShowNone}ShowOutput(){return this.showCodeAndXML===aa.ShowOutput}ShowCode(){return this.showCodeAndXML===aa.ShowCode}ShowXML(){return this.showCodeAndXML===aa.ShowXML}CalculateXMLAndCode(){var e=Bn.Xml.workspaceToDom(this.demoWorkspace,!0),n=Bn.Xml.domToPrettyText(e);this.showJSCode=this.run.latestCode,this.showXMLCode=n;var a=this.parseTextForBlocks(n);this.showBlocksDefinition=a.map(c=>{try{return`Blockly.Blocks['${c}']={ init: \n`+Bn.Blocks[c].init.toString()+`};\n};\nBlockly.JavaScript['${c}']=`+Fr[c].toString()+";"}catch(f){return console.error("parse definition : "+c,f),"//Error for "+c}}).join("\n")}parseTextForBlocks(e){var n=[];if(e.indexOf('<block type="')>=0)for(var a=e.split('<block type="'),c=1;c<a.length;c++){var d=a[c].split('"')[0];n.push(d)}return n}ShowInnerWorkings(){null!=this.demoWorkspace?(this.showCodeAndXML++,this.ShowSelection()||(this.showCodeAndXML=aa.ShowNone),this.CalculateXMLAndCode()):window.alert("demoWorkspace is null")}Download(){var e=window.prompt("Name?","blocks.txt");null!=e&&$p.saveLoad.DownloadBlocks(Bn.Xml,this.demoWorkspace,e)}changeListener(e){this.readThis(e.target)}readThis(e){var n=e.files[0],a=new FileReader,c=this;a.onloadend=function(d){$p.saveLoad.LoadFile(Bn.Xml,c.demoWorkspace,a.result),c.run.resetInterpreter()},a.readAsText(n)}CategorySwaggerHidden(e){return`<category name='swagger_hidden_${e}' hidden='true' >${e}</category>`}initialize(e){var n,a,c;const d=document.getElementById("blocklyDiv");if(null!=d){var p=e.map(M=>`<sep></sep>${M}`);this.toolboxXML=`<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox-simple" style="display: none">\n    ${p}\n    </xml>`,this.demoWorkspace=Bn.inject(d,{readOnly:!1,media:"media/",trashcan:!0,horizontalLayout:!1,move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2,pinch:!0},toolbox:this.toolboxXML});var f=this;if(((null===(a=null===(n=this.settings.settings)||void 0===n?void 0:n.startBlocks)||void 0===a?void 0:a.length)||0)>0)try{var v=((null===(c=this.settings.settings)||void 0===c?void 0:c.startBlocks)||[]).join("\n"),C=Bn.Xml.textToDom(v);Bn.Xml.clearWorkspaceAndLoadFromXml(C,this.demoWorkspace)}catch(M){console.error("error when load default blocks",M)}window.setTimeout(f.afterTimeout,2e3,this),this.run=$p.interpreterHelper.createInterpreter(this.demoWorkspace,Fr),f=this,this.demoWorkspace.addChangeListener(function(M){M.isUiEvent||(f.run.resetInterpreter(),f.run.generateCodeAndLoadIntoInterpreter(),f.CalculateXMLAndCode())})}else window.alert("blocklyDiv is null")}restoreBlocks(){$p.saveBlocksUrl.restoreState(Bn.Xml,this.demoWorkspace)}addToToolboxSwagger(e,n){var a,c=e.findCategSwaggerFromPaths().sort().map(P=>`<category name='${P}' custom='func_${e.name}_${P}'></category>`).join("\n"),d=(null==n?void 0:n.CategorySwaggerHidden(null==n?void 0:n.swaggerLoaded))||"",p=n.toolboxXML,f=`<category name='${e.name}'>\n<category name='API' id='func_${e.name}'>\n${c}\n</category>\n${e.categSwagger()}\n</category>\n`;if(p=p.replace(d,f),n.swaggerLoaded++,n.toolboxXML=p,null===(a=null==n?void 0:n.demoWorkspace)||void 0===a||a.updateToolbox(p),null!=(null==n?void 0:n.demoWorkspace)){var C="objects_"+e.nameCategSwagger(),M="AllApi_"+e.nameCategSwagger(),O=e;n.demoWorkspace.registerToolboxCategoryCallback(C,P=>n.registerSwaggerBlocksObjects(P,O)),n.demoWorkspace.registerToolboxCategoryCallback(M,P=>n.registerSwaggerBlocksAPIAll(P,O)),e.findCategSwaggerFromPaths().forEach(P=>{var W;null===(W=null==n?void 0:n.demoWorkspace)||void 0===W||W.registerToolboxCategoryCallback(`func_${e.name}_${P}`,ne=>n.registerSwaggerBlocksAPIControllers(ne,e,P))})}}afterTimeout(e){var n,a,c;if(null!=(null==e?void 0:e.swaggerData))if(e.toolboxXML=e.toolboxXML.replace("Swagger",`Swagger(${e.swaggerData.length})`),e.swaggerData.forEach(v=>{e.addToToolboxSwagger(v,e)}),null!=(null==e?void 0:e.mustLoadDemoBlock))e.ShowDemo(null==e?void 0:e.mustLoadDemoBlock);else{if(((null===(a=null===(n=e.settings.settings)||void 0===n?void 0:n.startBlocks)||void 0===a?void 0:a.length)||0)>0)try{var p=((null===(c=e.settings.settings)||void 0===c?void 0:c.startBlocks)||[]).join("\n");if((null==p?void 0:p.length)>62){var f=Bn.Xml.textToDom(p);Bn.Xml.clearWorkspaceAndLoadFromXml(f,e.demoWorkspace)}}catch(v){console.log("error when load default blocks",v)}e.restoreBlocks()}}}return r.\u0275fac=function(e){return new(e||r)(I(uX),I(mm),I(Xk),I(Kd),I(Sw))},r.\u0275cmp=_t({type:r,selectors:[["app-display-blockly"]],decls:43,vars:10,consts:[["rowHeight","1:1",3,"cols"],[2,"display","inline-block","height","100%","width","100%"],[2,"display","inline-block","height","5%","width","100%"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary","id","runButton",3,"click"],["id","downloadBlocks","mat-raised-button","","color","primary",3,"click"],["type","file",3,"change"],["mat-raised-button","","id","demos","color","primary",3,"matMenuTriggerFor"],["menu","matMenu"],["ngFor","",3,"ngForOf"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink",4,"ngIf"],[4,"ngIf"],["id","blocklyDiv",2,"display","inline-block","height","100%","width","100%"],["id","steps"],["mat-menu-item","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["target","_blank","mat-raised-button","","color","primary",3,"routerLink"],["style","display: inline-block; height: 100%; width: 100%",3,"options","ngModel","ngModelChange",4,"ngIf"],[2,"display","inline-block","height","100%","width","100%",3,"options","ngModel","ngModelChange"]],template:function(e,n){if(1&e&&(fe(0,"mat-grid-list",0),fe(1,"mat-grid-tile-header"),fe(2,"div",1),fe(3,"div",2),fe(4,"button",3),lt("click",function(){return n.LoadSwagger()}),fe(5,"mat-icon"),Ot(6,"file_upload"),ge(),Ot(7," Load Swagger"),ge(),fe(8,"button",3),lt("click",function(){return n.ShowInnerWorkings()}),fe(9,"mat-icon"),Ot(10,"code"),ge(),Ot(11),ge(),Ot(12," \xa0 "),fe(13,"button",3),lt("click",function(){return n.SaveBlocks()}),fe(14,"mat-icon"),Ot(15,"save"),ge(),Ot(16," Persist in browser"),ge(),Ot(17," \xa0 "),fe(18,"button",4),lt("click",function(){return n.RunCode()}),fe(19,"mat-icon"),Ot(20,"play_arrow"),ge(),Ot(21," Run Code"),ge(),Ot(22," \xa0 "),fe(23,"button",5),lt("click",function(){return n.Download()}),fe(24,"mat-icon"),Ot(25,"download"),ge(),Ot(26," Download blocks"),ge(),Ot(27," \xa0 "),fe(28,"input",6),lt("change",function(c){return n.changeListener(c)}),ge(),fe(29,"button",7),fe(30,"mat-icon"),Ot(31,"list"),ge(),Ot(32),ge(),fe(33,"mat-menu",null,8),gt(35,mQ,5,5,"ng-template",9),Vd(36,"keyvalue"),ge(),gt(37,vQ,2,4,"a",10),gt(38,bQ,2,0,"span",11),ge(),ge(),ge(),fe(39,"mat-grid-tile"),St(40,"div",12),ge(),gt(41,wQ,5,4,"mat-grid-tile",11),ge(),St(42,"div",13)),2&e){const a=xo(34);xe("cols",n.ShowSomething()?2:1),Ie(11),zr(" ",n.ShowSelection()," "),Ie(18),xe("matMenuTriggerFor",a),Ie(3),zr(" Demos (",n.demos.length,")"),Ie(3),xe("ngForOf",Hd(36,8,n.demosCategories)),Ie(2),xe("ngIf",null==n.mustLoadDemoBlock?null:n.mustLoadDemoBlock.length),Ie(1),xe("ngIf",null==n.demoWorkspace),Ie(3),xe("ngIf",n.ShowSomething())}},directives:[NK,MK,RK,Au,wS,bL,gL,pu,eo,PN,sy,VK,pm,pQ,zx,FT],pipes:[ex],styles:[".tabulator[_ngcontent-%COMP%]{font-size:12px;border:none}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]{font-weight:normal;border-bottom:1px solid;border-bottom-color:#0000001f;color:#0000008a}.tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]{height:48px;background-color:#fff;border:none;padding:0 7px}.tabulator-row[_ngcontent-%COMP%]{border-bottom:1px solid;border-bottom-color:#0000001f;min-height:48px;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]{padding:16px 7px;border-right:none;vertical-align:middle}.tabulator-row[_ngcontent-%COMP%]   .tabulator-cell[_ngcontent-%COMP%]:first-of-type, .tabulator[_ngcontent-%COMP%]   .tabulator-header[_ngcontent-%COMP%]   .tabulator-col[_ngcontent-%COMP%]:first-of-type{padding-left:24px}.tabulator-row.tabulator-row-even[_ngcontent-%COMP%]{background-color:#fff}"]}),r})();const SQ=[{path:"",redirectTo:"automation/main",pathMatch:"full"},{path:"automation/main",component:EL},{path:"automation/loadexample/:demoblock",component:EL}];let DQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Ek.forRoot(SQ)],Ek]}),r})();const TL=new Set;let df,wL=(()=>{class r{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):RQ}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function(r){if(!TL.has(r))try{df||(df=document.createElement("style"),df.setAttribute("type","text/css"),document.head.appendChild(df)),df.sheet&&(df.sheet.insertRule(`@media ${r} {body{ }}`,0),TL.add(r))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return r.\u0275fac=function(e){return new(e||r)(be(Vn))},r.\u0275prov=mt({factory:function(){return new r(be(Vn))},token:r,providedIn:"root"}),r})();function RQ(r){return{matches:"all"===r||""===r,media:r,addListener:()=>{},removeListener:()=>{}}}let LS=(()=>{class r{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return SL(yb(e)).some(a=>this._registerQuery(a).mql.matches)}observe(e){let c=bO(SL(yb(e)).map(d=>this._registerQuery(d).observable));return c=Wv(c.pipe(Mi(1)),c.pipe(Yk(1),bb(0))),c.pipe(Ee(d=>{const p={matches:!1,breakpoints:{}};return d.forEach(({matches:f,query:v})=>{p.matches=p.matches||f,p.breakpoints[v]=f}),p}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),c={observable:new Z(d=>{const p=f=>this._zone.run(()=>d.next(f));return n.addListener(p),()=>{n.removeListener(p)}}).pipe(Ri(n),Ee(({matches:d})=>({query:e,matches:d})),sn(this._destroySubject)),mql:n};return this._queries.set(e,c),c}}return r.\u0275fac=function(e){return new(e||r)(be(wL),be(Pt))},r.\u0275prov=mt({factory:function(){return new r(be(wL),be(Pt))},token:r,providedIn:"root"}),r})();function SL(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}let IQ=(()=>{class r{constructor(){this.title="",this.startBlocks=[],this.tourSteps=[]}}return r.version="2021.11.26.2046",r})();function DL(r){return t=>t.lift(new AQ(r))}class AQ{constructor(t){this.value=t}call(t,e){return e.subscribe(new xQ(t,this.value))}}class xQ extends F{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}const ay=["*"];function OQ(r,t){if(1&r){const e=zi();fe(0,"div",2),lt("click",function(){return Pn(e),ct()._onBackdropClicked()}),ge()}2&r&&Ct("mat-drawer-shown",ct()._isShowingBackdrop())}function kQ(r,t){1&r&&(fe(0,"mat-drawer-content"),At(1,2),ge())}const NQ=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],LQ=["mat-drawer","mat-drawer-content","*"];function PQ(r,t){if(1&r){const e=zi();fe(0,"div",2),lt("click",function(){return Pn(e),ct()._onBackdropClicked()}),ge()}2&r&&Ct("mat-drawer-shown",ct()._isShowingBackdrop())}function FQ(r,t){1&r&&(fe(0,"mat-sidenav-content",3),At(1,2),ge())}const BQ=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],VQ=["mat-sidenav","mat-sidenav-content","*"],ML=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",RL={transformDrawer:hr("transform",[Hn("open, open-instant",jt({transform:"none",visibility:"visible"})),Hn("void",jt({"box-shadow":"none",visibility:"hidden"})),Zn("void => open-instant",ii("0ms")),Zn("void <=> open, open-instant => void",ii("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},HQ=new We("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),PS=new We("MAT_DRAWER_CONTAINER");let ly=(()=>{class r extends cf{constructor(e,n,a,c,d){super(a,c,d),this._changeDetectorRef=e,this._container=n}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return r.\u0275fac=function(e){return new(e||r)(I(un),I(vt(()=>AL)),I(Qe),I(Ou),I(Pt))},r.\u0275cmp=_t({type:r,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,n){2&e&&ir("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px")},features:[Be],ngContentSelectors:ay,decls:1,vars:0,template:function(e,n){1&e&&(Tn(),At(0))},encapsulation:2,changeDetection:0}),r})(),IL=(()=>{class r{constructor(e,n,a,c,d,p,f){this._elementRef=e,this._focusTrapFactory=n,this._focusMonitor=a,this._platform=c,this._ngZone=d,this._doc=p,this._container=f,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new B,this._animationEnd=new B,this._animationState="void",this.openedChange=new nt(!0),this._openedStream=this.openedChange.pipe(di(v=>v),Ee(()=>{})),this.openedStart=this._animationStarted.pipe(di(v=>v.fromState!==v.toState&&0===v.toState.indexOf("open")),DL(void 0)),this._closedStream=this.openedChange.pipe(di(v=>!v),Ee(()=>{})),this.closedStart=this._animationStarted.pipe(di(v=>v.fromState!==v.toState&&"void"===v.toState),DL(void 0)),this._destroyed=new B,this.onPositionChanged=new nt,this._modeChanged=new B,this.openedChange.subscribe(v=>{v?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{ys(this._elementRef.nativeElement,"keydown").pipe(di(v=>27===v.keyCode&&!this.disableClose&&!dr(v)),sn(this._destroyed)).subscribe(v=>this._ngZone.run(()=>{this.close(),v.stopPropagation(),v.preventDefault()}))}),this._animationEnd.pipe(Zd((v,C)=>v.fromState===C.fromState&&v.toState===C.toState)).subscribe(v=>{const{fromState:C,toState:M}=v;(0===M.indexOf("open")&&"void"===C||"void"===M&&0===C.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!=this._position&&(this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=ht(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"!==this.mode:e}set autoFocus(e){this._autoFocus=ht(e)}get opened(){return this._opened}set opened(e){this.toggle(ht(e))}_takeFocus(){!this.autoFocus||!this._focusTrap||this._focusTrap.focusInitialElementWhenReady().then(e=>{!e&&"function"==typeof this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()})}_restoreFocus(){!this.autoFocus||(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}_isFocusWithinDrawer(){var e;const n=null===(e=this._doc)||void 0===e?void 0:e.activeElement;return!!n&&this._elementRef.nativeElement.contains(n)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0)}toggle(e=!this.opened,n){return this._setOpen(e,!e&&this._isFocusWithinDrawer(),n)}_setOpen(e,n,a="program"){return this._opened=e,e?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=a):(this._animationState="void",n&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(c=>{this.openedChange.pipe(Mi(1)).subscribe(d=>c(d?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(e){this._animationStarted.next(e)}_animationDoneListener(e){this._animationEnd.next(e)}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(Sb),I(Dr),I(Vn),I(Pt),I(xt,8),I(PS,8))},r.\u0275cmp=_t({type:r,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,n){1&e&&Od("@transform.start",function(c){return n._animationStartListener(c)})("@transform.done",function(c){return n._animationDoneListener(c)}),2&e&&(ft("align",null),kd("@transform",n._animationState),Ct("mat-drawer-end","end"===n.position)("mat-drawer-over","over"===n.mode)("mat-drawer-push","push"===n.mode)("mat-drawer-side","side"===n.mode)("mat-drawer-opened",n.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:ay,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,n){1&e&&(Tn(),fe(0,"div",0),At(1),ge())},directives:[cf],encapsulation:2,data:{animation:[RL.transformDrawer]},changeDetection:0}),r})(),AL=(()=>{class r{constructor(e,n,a,c,d,p=!1,f){this._dir=e,this._element=n,this._ngZone=a,this._changeDetectorRef=c,this._animationMode=f,this._drawers=new Vs,this.backdropClick=new nt,this._destroyed=new B,this._doCheckSubject=new B,this._contentMargins={left:null,right:null},this._contentMarginChanges=new B,e&&e.change.pipe(sn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),d.change().pipe(sn(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=p}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=ht(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:ht(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Ri(this._allDrawers),sn(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(n=>!n._container||n._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Ri(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(bb(10),sn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const a=this._left._getWidth();e+=a,n-=a}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){const a=this._right._getWidth();n+=a,e-=a}e=e||null,n=n||null,(e!==this._contentMargins.left||n!==this._contentMargins.right)&&(this._contentMargins={left:e,right:n},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(di(n=>n.fromState!==n.toState),sn(this._drawers.changes)).subscribe(n=>{"open-instant"!==n.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(sn(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(sn(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Mi(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(sn(Vt(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const n=this._element.nativeElement.classList,a="mat-drawer-container-has-open";e?n.add(a):n.remove(a)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return r.\u0275fac=function(e){return new(e||r)(I(bi,8),I(Qe),I(Pt),I(un),I(Cs),I(HQ),I(Ii,8))},r.\u0275cmp=_t({type:r,selectors:[["mat-drawer-container"]],contentQueries:function(e,n,a){if(1&e&&(qt(a,ly,5),qt(a,IL,5)),2&e){let c;je(c=ze())&&(n._content=c.first),je(c=ze())&&(n._allDrawers=c)}},viewQuery:function(e,n){if(1&e&&an(ly,5),2&e){let a;je(a=ze())&&(n._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,n){2&e&&Ct("mat-drawer-container-explicit-backdrop",n._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[dt([{provide:PS,useExisting:r}])],ngContentSelectors:LQ,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,n){1&e&&(Tn(NQ),gt(0,OQ,1,2,"div",0),At(1),At(2,1),gt(3,kQ,2,0,"mat-drawer-content",1)),2&e&&(xe("ngIf",n.hasBackdrop),Ie(3),xe("ngIf",!n._content))},directives:[eo,ly],styles:[ML],encapsulation:2,changeDetection:0}),r})(),FS=(()=>{class r extends ly{constructor(e,n,a,c,d){super(e,n,a,c,d)}}return r.\u0275fac=function(e){return new(e||r)(I(un),I(vt(()=>OL)),I(Qe),I(Ou),I(Pt))},r.\u0275cmp=_t({type:r,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(e,n){2&e&&ir("margin-left",n._container._contentMargins.left,"px")("margin-right",n._container._contentMargins.right,"px")},features:[Be],ngContentSelectors:ay,decls:1,vars:0,template:function(e,n){1&e&&(Tn(),At(0))},encapsulation:2,changeDetection:0}),r})(),xL=(()=>{class r extends IL{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=ht(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=ai(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=ai(e)}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=nn(r)))(n||r)}}(),r.\u0275cmp=_t({type:r,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,n){2&e&&(ft("align",null),ir("top",n.fixedInViewport?n.fixedTopGap:null,"px")("bottom",n.fixedInViewport?n.fixedBottomGap:null,"px"),Ct("mat-drawer-end","end"===n.position)("mat-drawer-over","over"===n.mode)("mat-drawer-push","push"===n.mode)("mat-drawer-side","side"===n.mode)("mat-drawer-opened",n.opened)("mat-sidenav-fixed",n.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[Be],ngContentSelectors:ay,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,n){1&e&&(Tn(),fe(0,"div",0),At(1),ge())},directives:[cf],encapsulation:2,data:{animation:[RL.transformDrawer]},changeDetection:0}),r})(),OL=(()=>{class r extends AL{}return r.\u0275fac=function(){let t;return function(n){return(t||(t=nn(r)))(n||r)}}(),r.\u0275cmp=_t({type:r,selectors:[["mat-sidenav-container"]],contentQueries:function(e,n,a){if(1&e&&(qt(a,FS,5),qt(a,xL,5)),2&e){let c;je(c=ze())&&(n._content=c.first),je(c=ze())&&(n._allDrawers=c)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(e,n){2&e&&Ct("mat-drawer-container-explicit-backdrop",n._backdropOverride)},exportAs:["matSidenavContainer"],features:[dt([{provide:PS,useExisting:r}]),Be],ngContentSelectors:VQ,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(e,n){1&e&&(Tn(BQ),gt(0,PQ,1,2,"div",0),At(1),At(2,1),gt(3,FQ,2,0,"mat-sidenav-content",1)),2&e&&(xe("ngIf",n.hasBackdrop),Ie(3),xe("ngIf",!n._content))},directives:[eo,FS,cf],styles:[ML],encapsulation:2,changeDetection:0}),r})(),kL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Lr,Jt,Zp,Tc],Tc,Jt]}),r})();const GQ=["*",[["mat-toolbar-row"]]],WQ=["*","mat-toolbar-row"],jQ=Gs(class{constructor(r){this._elementRef=r}});let zQ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ce({type:r,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),r})(),XQ=(()=>{class r extends jQ{constructor(e,n,a){super(e),this._platform=n,this._document=a}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(Vn),I(xt))},r.\u0275cmp=_t({type:r,selectors:[["mat-toolbar"]],contentQueries:function(e,n,a){if(1&e&&qt(a,zQ,5),2&e){let c;je(c=ze())&&(n._toolbarRows=c)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,n){2&e&&Ct("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Be],ngContentSelectors:WQ,decls:2,vars:0,template:function(e,n){1&e&&(Tn(GQ),At(0),At(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),r})(),NL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Jt],Jt]}),r})(),YQ=(()=>{class r{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=ht(e)}get inset(){return this._inset}set inset(e){this._inset=ht(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=_t({type:r,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,n){2&e&&(ft("aria-orientation",n.vertical?"vertical":"horizontal"),Ct("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),r})(),LL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Jt],Jt]}),r})();const BS=["*"],$Q=[[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]],[["","mat-line",""],["","matLine",""]],"*"],KQ=["[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]","[mat-line], [matLine]","*"],PL=Po(qo(class{})),eZ=qo(class{}),FL=new We("MatList"),BL=new We("MatNavList");let tZ=(()=>{class r extends PL{constructor(){super(...arguments),this._stateChanges=new B}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=nn(r)))(n||r)}}(),r.\u0275cmp=_t({type:r,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-nav-list","mat-list-base"],inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matNavList"],features:[dt([{provide:BL,useExisting:r}]),Be,cn],ngContentSelectors:BS,decls:1,vars:0,template:function(e,n){1&e&&(Tn(),At(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:transparent}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:transparent;width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:transparent;text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-selection-list:focus{outline-style:dotted}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-list-option:focus,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:focus,.cdk-high-contrast-active mat-action-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:focus{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}\n'],encapsulation:2,changeDetection:0}),r})(),VL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ce({type:r,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),r})(),HL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ce({type:r,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),r})(),nZ=(()=>{class r extends eZ{constructor(e,n,a,c){super(),this._element=e,this._isInteractiveList=!1,this._destroyed=new B,this._disabled=!1,this._isInteractiveList=!!(a||c&&"action-list"===c._getListType()),this._list=a||c;const d=this._getHostElement();"button"===d.nodeName.toLowerCase()&&!d.hasAttribute("type")&&d.setAttribute("type","button"),this._list&&this._list._stateChanges.pipe(sn(this._destroyed)).subscribe(()=>{n.markForCheck()})}get disabled(){return this._disabled||!(!this._list||!this._list.disabled)}set disabled(e){this._disabled=ht(e)}ngAfterContentInit(){_S(this._lines,this._element)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_isRippleDisabled(){return!this._isInteractiveList||this.disableRipple||!(!this._list||!this._list.disableRipple)}_getHostElement(){return this._element.nativeElement}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(un),I(BL,8),I(FL,8))},r.\u0275cmp=_t({type:r,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(e,n,a){if(1&e&&(qt(a,VL,5),qt(a,HL,5),qt(a,mS,5)),2&e){let c;je(c=ze())&&(n._avatar=c.first),je(c=ze())&&(n._icon=c.first),je(c=ze())&&(n._lines=c)}},hostAttrs:[1,"mat-list-item","mat-focus-indicator"],hostVars:6,hostBindings:function(e,n){2&e&&Ct("mat-list-item-disabled",n.disabled)("mat-list-item-avatar",n._avatar||n._icon)("mat-list-item-with-avatar",n._avatar||n._icon)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},exportAs:["matListItem"],features:[Be],ngContentSelectors:KQ,decls:6,vars:2,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-list-text"]],template:function(e,n){1&e&&(Tn($Q),fe(0,"div",0),St(1,"div",1),At(2),fe(3,"div",2),At(4,1),ge(),At(5,2),ge()),2&e&&(Ie(1),xe("matRippleTrigger",n._getHostElement())("matRippleDisabled",n._isRippleDisabled()))},directives:[Fo],encapsulation:2,changeDetection:0}),r})(),GL=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[$b,za,Jt,yS,Lr],$b,Jt,yS,LL]}),r})();const HS=new We("CdkAccordion");let uZ=0,hZ=(()=>{class r{constructor(e,n,a){this.accordion=e,this._changeDetectorRef=n,this._expansionDispatcher=a,this._openCloseAllSubscription=D.EMPTY,this.closed=new nt,this.opened=new nt,this.destroyed=new nt,this.expandedChange=new nt,this.id="cdk-accordion-child-"+uZ++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=a.listen((c,d)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===d&&this.id!==c&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=ht(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=ht(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return r.\u0275fac=function(e){return new(e||r)(I(HS,12),I(un),I(ry))},r.\u0275dir=Ce({type:r,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[dt([{provide:HS,useValue:void 0}])]}),r})(),pZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({}),r})();const fZ=["body"];function gZ(r,t){}const mZ=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],_Z=["mat-expansion-panel-header","*","mat-action-row"];function vZ(r,t){1&r&&St(0,"span",2),2&r&&xe("@indicatorRotate",ct()._getExpandedState())}const bZ=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],yZ=["mat-panel-title","mat-panel-description","*"],US=new We("MAT_ACCORDION"),WL="225ms cubic-bezier(0.4,0.0,0.2,1)",jL={indicatorRotate:hr("indicatorRotate",[Hn("collapsed, void",jt({transform:"rotate(0deg)"})),Hn("expanded",jt({transform:"rotate(180deg)"})),Zn("expanded <=> collapsed, void => collapsed",ii(WL))]),bodyExpansion:hr("bodyExpansion",[Hn("collapsed, void",jt({height:"0px",visibility:"hidden"})),Hn("expanded",jt({height:"*",visibility:"visible"})),Zn("expanded <=> collapsed, void => collapsed",ii(WL))])};let CZ=(()=>{class r{constructor(e){this._template=e}}return r.\u0275fac=function(e){return new(e||r)(I(oi))},r.\u0275dir=Ce({type:r,selectors:[["ng-template","matExpansionPanelContent",""]]}),r})(),EZ=0;const zL=new We("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let XL=(()=>{class r extends hZ{constructor(e,n,a,c,d,p,f){super(e,n,a),this._viewContainerRef=c,this._animationMode=p,this._hideToggle=!1,this.afterExpand=new nt,this.afterCollapse=new nt,this._inputChanges=new B,this._headerId="mat-expansion-panel-header-"+EZ++,this._bodyAnimationDone=new B,this.accordion=e,this._document=d,this._bodyAnimationDone.pipe(Zd((v,C)=>v.fromState===C.fromState&&v.toState===C.toState)).subscribe(v=>{"void"!==v.fromState&&("expanded"===v.toState?this.afterExpand.emit():"collapsed"===v.toState&&this.afterCollapse.emit())}),f&&(this.hideToggle=f.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=ht(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Ri(null),di(()=>this.expanded&&!this._portal),Mi(1)).subscribe(()=>{this._portal=new Xa(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,n=this._body.nativeElement;return e===n||n.contains(e)}return!1}}return r.\u0275fac=function(e){return new(e||r)(I(US,12),I(un),I(ry),I(ui),I(xt),I(Ii,8),I(zL,8))},r.\u0275cmp=_t({type:r,selectors:[["mat-expansion-panel"]],contentQueries:function(e,n,a){if(1&e&&qt(a,CZ,5),2&e){let c;je(c=ze())&&(n._lazyContent=c.first)}},viewQuery:function(e,n){if(1&e&&an(fZ,5),2&e){let a;je(a=ze())&&(n._body=a.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,n){2&e&&Ct("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[dt([{provide:US,useValue:void 0}]),Be,cn],ngContentSelectors:_Z,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,n){1&e&&(Tn(mZ),At(0),fe(1,"div",0,1),lt("@bodyExpansion.done",function(c){return n._bodyAnimationDone.next(c)}),fe(3,"div",2),At(4,1),gt(5,gZ,0,0,"ng-template",3),ge(),At(6,2),ge()),2&e&&(Ie(1),xe("@bodyExpansion",n._getExpandedState())("id",n.id),ft("aria-labelledby",n._headerId),Ie(4),xe("cdkPortalOutlet",n._portal))},directives:[es],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[jL.bodyExpansion]},changeDetection:0}),r})();class wZ{}const SZ=Ec(wZ);let YL=(()=>{class r extends SZ{constructor(e,n,a,c,d,p,f){super(),this.panel=e,this._element=n,this._focusMonitor=a,this._changeDetectorRef=c,this._animationMode=p,this._parentChangeSubscription=D.EMPTY;const v=e.accordion?e.accordion._stateChanges.pipe(di(C=>!(!C.hideToggle&&!C.togglePosition))):bu;this.tabIndex=parseInt(f||"")||0,this._parentChangeSubscription=Vt(e.opened,e.closed,v,e._inputChanges.pipe(di(C=>!!(C.hideToggle||C.disabled||C.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(di(()=>e._containsFocus())).subscribe(()=>a.focusVia(n,"program")),d&&(this.expandedHeight=d.expandedHeight,this.collapsedHeight=d.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:dr(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,n){e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return r.\u0275fac=function(e){return new(e||r)(I(XL,1),I(Qe),I(Dr),I(un),I(zL,8),I(Ii,8),ji("tabindex"))},r.\u0275cmp=_t({type:r,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,n){1&e&&lt("click",function(){return n._toggle()})("keydown",function(c){return n._keydown(c)}),2&e&&(ft("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),ir("height",n._getHeaderHeight()),Ct("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Be],ngContentSelectors:yZ,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,n){1&e&&(Tn(bZ),fe(0,"span",0),At(1),At(2,1),At(3,2),ge(),gt(4,vZ,1,1,"span",1)),2&e&&(Ie(4),xe("ngIf",n._showToggle()))},directives:[eo],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[jL.indicatorRotate]},changeDetection:0}),r})(),DZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=Ce({type:r,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),r})(),MZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Lr,Jt,pZ,xu]]}),r})();const RZ=function(r){return["/","automation","loadexample",r]};function IZ(r,t){if(1&r&&(fe(0,"a",20),fe(1,"mat-icon"),Ot(2," https "),ge(),Ot(3),ge()),2&r){const e=t.index,n=t.$implicit;xe("routerLink",Bd(3,RZ,n.id)),Ie(3),U_(" ",e+1," ",n.description,"")}}function AZ(r,t){if(1&r){const e=zi();fe(0,"button",21),lt("click",function(){return Pn(e),ct(),xo(2).toggle()}),fe(1,"mat-icon",22),Ot(2,"menu"),ge(),ge()}}let xZ=(()=>{class r{constructor(e,n,a){this.breakpointObserver=e,this.details=n,this.ta=a,this.demoBlocks=[],this.isHandset$=this.breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)").pipe(Ee(c=>c.matches),function(r,t,e){let n;return n=r&&"object"==typeof r?r:{bufferSize:r,windowTime:t,refCount:!1,scheduler:e},a=>a.lift(function({bufferSize:r=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:n}){let a,d,c=0,p=!1,f=!1;return function(C){let M;c++,!a||p?(p=!1,a=new bJ(r,t,n),M=a.subscribe(this),d=C.subscribe({next(O){a.next(O)},error(O){p=!0,a.error(O)},complete(){f=!0,d=void 0,a.complete()}}),f&&(d=void 0)):M=a.subscribe(this),this.add(()=>{c--,M.unsubscribe(),M=void 0,d&&!f&&e&&0===c&&(d.unsubscribe(),d=void 0,a=void 0)})}}(n))}()),this.version=IQ.version,this.title="Blockly Automation"}ngOnInit(){var e,n;this.demoBlocks=this.details.demoBlocks.sort((a,c)=>a.description.localeCompare(c.description)),this.title=null===(n=null===(e=this.details)||void 0===e?void 0:e.settings)||void 0===n?void 0:n.title}executeOnDisplayBlockly(e){this.ta.sendDataToServer("DisplayBlocklyComponent",e)}}return r.\u0275fac=function(e){return new(e||r)(I(LS),I(mm),I(Sw))},r.\u0275cmp=_t({type:r,selectors:[["app-primary-navig"]],decls:61,vars:18,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["mat-list-item","","routerLink","/"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation","target","_blank"],["mat-list-item","","href","https://ignatandrei.github.io/BlocklyAutomation","target","_blank"],["mat-list-item","","target","_blank",3,"routerLink",4,"ngFor","ngForOf"],["color","primary",1,"nav-bar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[3,"title"],[1,"example-spacer"],["id","download","mat-button","",3,"matMenuTriggerFor"],["download","matMenu"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseBlocklyAutomation.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseLin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseWin.zip/","target","_blank"],["mat-list-item","","href","https://github.com/ignatandrei/BlocklyAutomation/releases/latest/download/releaseIISWin.zip/","target","_blank"],["mat-button","",3,"matMenuTriggerFor"],["examples","matMenu"],[1,"main-content"],["mat-list-item","","target","_blank",3,"routerLink"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"]],template:function(e,n){if(1&e&&(fe(0,"mat-sidenav-container",0),fe(1,"mat-sidenav",1,2),Vd(3,"async"),Vd(4,"async"),Vd(5,"async"),fe(6,"mat-toolbar"),fe(7,"a",3),Ot(8,"Menu"),ge(),ge(),fe(9,"mat-nav-list"),fe(10,"a",4),fe(11,"mat-icon"),Ot(12," source "),ge(),Ot(13," Github"),ge(),St(14,"mat-divider"),fe(15,"a",5),fe(16,"mat-icon"),Ot(17," https "),ge(),Ot(18," Demo online"),ge(),St(19,"mat-divider"),fe(20,"mat-expansion-panel"),fe(21,"mat-expansion-panel-header"),fe(22,"mat-panel-title"),Ot(23),ge(),ge(),gt(24,IZ,4,5,"a",6),ge(),ge(),ge(),fe(25,"mat-sidenav-content"),fe(26,"mat-toolbar",7),gt(27,AZ,3,0,"button",8),Vd(28,"async"),fe(29,"span",9),Ot(30),ge(),St(31,"span",10),fe(32,"button",11),fe(33,"mat-icon"),Ot(34," file_download "),ge(),ge(),fe(35,"mat-menu",null,12),fe(37,"a",13),Ot(38," Download HTML"),ge(),fe(39,"a",14),Ot(40," Download Linux"),ge(),fe(41,"a",15),Ot(42," Download Windows"),ge(),fe(43,"a",16),Ot(44," Download IIS"),ge(),ge(),fe(45,"button",17),fe(46,"mat-icon"),Ot(47," source "),ge(),ge(),fe(48,"mat-menu",null,18),fe(50,"a",4),fe(51,"mat-icon"),Ot(52," source "),ge(),Ot(53," Github"),ge(),St(54,"mat-divider"),fe(55,"a",5),fe(56,"mat-icon"),Ot(57," https "),ge(),Ot(58," Demo online"),ge(),ge(),ge(),fe(59,"div",19),St(60,"router-outlet"),ge(),ge(),ge()),2&e){const a=xo(36),c=xo(49);Ie(1),xe("mode",Hd(4,12,n.isHandset$)?"over":"side")("opened",!1===Hd(5,14,n.isHandset$)),ft("role",Hd(3,10,n.isHandset$)?"dialog":"navigation"),Ie(22),zr(" Demos ",n.demoBlocks.length," "),Ie(1),xe("ngForOf",n.demoBlocks),Ie(3),xe("ngIf",Hd(28,16,n.isHandset$)),Ie(2),HC("title",n.version),Ie(1),Qi(n.title),Ie(2),xe("matMenuTriggerFor",a),Ie(13),xe("matMenuTriggerFor",c)}},directives:[OL,xL,XQ,nZ,pm,tZ,wS,YQ,XL,YL,DZ,pu,FS,eo,Au,bL,gL,cw],pipes:[cT],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;width:100%}.sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:200px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-content[_ngcontent-%COMP%]{height:97%;width:100%}.nav-bar[_ngcontent-%COMP%]{height:3%;width:100%}"]}),r})(),OZ=(()=>{class r{constructor(e,n){var a,c;this.titleService=e,this.title="AutoBlocklyApp",console.log(null===(a=n.settings)||void 0===a?void 0:a.title),this.titleService.setTitle((null===(c=n.settings)||void 0===c?void 0:c.title)||"")}}return r.\u0275fac=function(e){return new(e||r)(I(_x),I(mm))},r.\u0275cmp=_t({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,n){1&e&&St(0,"app-primary-navig")},directives:[xZ],styles:[""]}),r})(),GS=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Lr,Jt,Em],Jt]}),r})();const fq={provide:new We("mat-autocomplete-scroll-strategy"),deps:[Bo],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let vq=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[fq],imports:[[ku,Zb,Jt,Lr],Tc,Zb,Jt]}),r})(),Cq=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Mb,Jt],Jt]}),r})(),Sq=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[ku,Jt,xu],Jt]}),r})(),Oq=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Jt,za],Jt]}),r})(),Vq=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Jt],Jt]}),r})(),cP=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({}),r})(),Qq=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[za,Jt,Em,cP],Jt,cP]}),r})();const pP=new We("mat-chips-default-options"),uee={separatorKeyCodes:[13]};let dee=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[ja,{provide:pP,useValue:uee}],imports:[[Jt]]}),r})(),_ee=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[nf]]}),r})(),cy=(()=>{class r{constructor(){this.changes=new B,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({factory:function(){return new r},token:r,providedIn:"root"}),r})();const Vee={provide:cy,deps:[[new Ji,new go,cy]],useFactory:function(r){return r||new cy}};let Yee=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[Vee,ja],imports:[[Jt,Lr,xu,ah,_ee,SS,za],Jt]}),r})(),TP=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Zp]]}),r})(),Zee=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[ja],imports:[[TP,GS,Jt],TP,GS]}),r})(),Om=(()=>{class r{constructor(){this.changes=new B,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,n){return`${e} \u2013 ${n}`}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({factory:function(){return new r},token:r,providedIn:"root"}),r})();const Ate={provide:new We("mat-datepicker-scroll-strategy"),deps:[Bo],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let Vte=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[Om,Ate],imports:[[Lr,ah,ku,Mb,xu,Jt],Tc]}),r})();function Hte(r,t){}class eD{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const Ute={dialogContainer:hr("dialogContainer",[Hn("void, exit",jt({opacity:0,transform:"scale(0.7)"})),Hn("enter",jt({transform:"none"})),Zn("* => enter",ii("150ms cubic-bezier(0, 0, 0.2, 1)",jt({transform:"none",opacity:1}))),Zn("* => void, * => exit",ii("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",jt({opacity:0})))])};let Gte=(()=>{class r extends Dm{constructor(e,n,a,c,d,p){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=a,this._config=d,this._focusMonitor=p,this._animationStateChanged=new nt,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=f=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(f)),this._ariaLabelledBy=d.ariaLabelledBy||null,this._document=c}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=yc(),a=this._elementRef.nativeElement;(!n||n===this._document.body||n===a||a.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=yc())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=yc();return e===n||e.contains(n)}}return r.\u0275fac=function(e){return new(e||r)(I(Qe),I(Sb),I(un),I(xt,8),I(eD),I(Dr))},r.\u0275dir=Ce({type:r,viewQuery:function(e,n){if(1&e&&an(es,7),2&e){let a;je(a=ze())&&(n._portalOutlet=a.first)}},features:[Be]}),r})(),Wte=(()=>{class r extends Gte{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return r.\u0275fac=function(){let t;return function(n){return(t||(t=nn(r)))(n||r)}}(),r.\u0275cmp=_t({type:r,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&Od("@dialogContainer.start",function(c){return n._onAnimationStart(c)})("@dialogContainer.done",function(c){return n._onAnimationDone(c)}),2&e&&(Xr("id",n._id),ft("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),kd("@dialogContainer",n._state))},features:[Be],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&gt(0,Hte,0,0,"ng-template",0)},directives:[es],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ute.dialogContainer]}}),r})(),jte=0;class tD{constructor(t,e,n="mat-dialog-"+jte++){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new B,this._afterClosed=new B,this._beforeClosed=new B,this._state=0,e._id=n,e._animationStateChanged.pipe(di(a=>"opened"===a.state),Mi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(di(a=>"closed"===a.state),Mi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(di(a=>27===a.keyCode&&!this.disableClose&&!dr(a))).subscribe(a=>{a.preventDefault(),nD(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():nD(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(di(e=>"closing"===e.state),Mi(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function nD(r,t,e){return void 0!==r._containerInstance&&(r._containerInstance._closeInteractionType=t),r.close(e)}const zte=new We("MatDialogData"),Xte=new We("mat-dialog-default-options"),BP=new We("mat-dialog-scroll-strategy"),$te={provide:BP,deps:[Bo],useFactory:function(r){return()=>r.scrollStrategies.block()}};let Kte=(()=>{class r{constructor(e,n,a,c,d,p,f,v,C){this._overlay=e,this._injector=n,this._defaultOptions=a,this._parentDialog=c,this._overlayContainer=d,this._dialogRefConstructor=f,this._dialogContainerType=v,this._dialogDataToken=C,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new B,this._afterOpenedAtThisLevel=new B,this._ariaHiddenElements=new Map,this.afterAllClosed=nm(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ri(void 0))),this._scrollStrategy=p}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){(n=function(r,t){return Object.assign(Object.assign({},t),r)}(n,this._defaultOptions||new eD)).id&&this.getDialogById(n.id);const a=this._createOverlay(n),c=this._attachDialogContainer(a,n),d=this._attachDialogContent(e,c,a,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.afterClosed().subscribe(()=>this._removeOpenDialog(d)),this.afterOpened.next(d),c._initializeWithAttachedContent(),d}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new uf({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const c=Yn.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:eD,useValue:n}]}),d=new lf(this._dialogContainerType,n.viewContainerRef,c,n.componentFactoryResolver);return e.attach(d).instance}_attachDialogContent(e,n,a,c){const d=new this._dialogRefConstructor(a,n,c.id);if(e instanceof oi)n.attachTemplatePortal(new Xa(e,null,{$implicit:c.data,dialogRef:d}));else{const p=this._createInjector(c,d,n),f=n.attachComponentPortal(new lf(e,c.viewContainerRef,p));d.componentInstance=f.instance}return d.updateSize(c.width,c.height).updatePosition(c.position),d}_createInjector(e,n,a){const c=e&&e.viewContainerRef&&e.viewContainerRef.injector,d=[{provide:this._dialogContainerType,useValue:a},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!c||!c.get(bi,null,on.Optional))&&d.push({provide:bi,useValue:{value:e.direction,change:en()}}),Yn.create({parent:c||this._injector,providers:d})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((a,c)=>{a?c.setAttribute("aria-hidden",a):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let a=n.length-1;a>-1;a--){let c=n[a];c!==e&&"SCRIPT"!==c.nodeName&&"STYLE"!==c.nodeName&&!c.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(c,c.getAttribute("aria-hidden")),c.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return r.\u0275fac=function(e){return new(e||r)(I(Bo),I(Yn),I(void 0),I(void 0),I(Am),I(void 0),I(Ta),I(Ta),I(We))},r.\u0275dir=Ce({type:r}),r})(),iD=(()=>{class r extends Kte{constructor(e,n,a,c,d,p,f){super(e,n,c,p,f,d,tD,Wte,zte)}}return r.\u0275fac=function(e){return new(e||r)(be(Bo),be(Yn),be(Hp,8),be(Xte,8),be(BP),be(r,12),be(Am))},r.\u0275prov=mt({token:r,factory:r.\u0275fac}),r})(),Zte=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[iD,$te],imports:[[ku,xu,Jt],Jt]}),r})();const hne={provide:new We("mat-select-scroll-strategy"),deps:[Bo],useFactory:function(r){return()=>r.scrollStrategies.reposition()}};let zP=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[hne],imports:[[Lr,ku,Zb,Jt],Tc,GS,Zb,Jt]}),r})();const Cne={provide:new We("mat-tooltip-scroll-strategy"),deps:[Bo],useFactory:function(r){return()=>r.scrollStrategies.reposition({scrollThrottle:20})}};let KP=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[Cne],imports:[[Mb,Lr,ku,Jt],Jt,Tc]}),r})(),Lm=(()=>{class r{constructor(){this.changes=new B,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,n,a)=>{if(0==a||0==n)return`0 of ${a}`;const c=e*n;return`${c+1} \u2013 ${c<(a=Math.max(a,0))?Math.min(c+n,a):c+n} of ${a}`}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({factory:function(){return new r},token:r,providedIn:"root"}),r})();const Lne={provide:Lm,deps:[[new Ji,new go,Lm]],useFactory:function(r){return r||new Lm}};let Hne=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[Lne],imports:[[Lr,ah,zP,KP,Jt]]}),r})(),Xne=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Lr,Jt],Jt]}),r})();function Yne(r,t){if(1&r&&(Ar(),St(0,"circle",3)),2&r){const e=ct();ir("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),ft("r",e._getCircleRadius())}}function $ne(r,t){if(1&r&&(Ar(),St(0,"circle",3)),2&r){const e=ct();ir("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),ft("r",e._getCircleRadius())}}const Zne=Gs(class{constructor(r){this._elementRef=r}},"primary"),ZP=new We("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class Sc extends Zne{constructor(t,e,n,a,c){super(t),this._document=n,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const d=Sc._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),d.has(n.head)||d.set(n.head,new Set([100])),this._fallbackAnimation=e.EDGE||e.TRIDENT,this._noopAnimations="NoopAnimations"===a&&!!c&&!c._forceAnimations,c&&(c.diameter&&(this.diameter=c.diameter),c.strokeWidth&&(this.strokeWidth=c.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=ai(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=ai(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,ai(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=Zk(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,n=Sc._diameters;let a=n.get(t);if(!a||!a.has(e)){const c=this._document.createElement("style");c.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),c.textContent=this._getAnimationText(),t.appendChild(c),a||(a=new Set,n.set(t,a)),a.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Sc.\u0275fac=function(t){return new(t||Sc)(I(Qe),I(Vn),I(xt,8),I(Ii,8),I(ZP))},Sc.\u0275cmp=_t({type:Sc,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(ft("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),ir("width",e.diameter,"px")("height",e.diameter,"px"),Ct("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[Be],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Ar(),fe(0,"svg",0),gt(1,Yne,1,9,"circle",1),gt(2,$ne,1,7,"circle",2),ge()),2&t&&(ir("width",e.diameter,"px")("height",e.diameter,"px"),xe("ngSwitch","indeterminate"===e.mode),ft("viewBox",e._getViewBox()),Ie(1),xe("ngSwitchCase",!0),Ie(1),xe("ngSwitchCase",!1))},directives:[yl,fu],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n"],encapsulation:2,changeDetection:0}),Sc._diameters=new WeakMap;let tie=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Jt,Lr],Jt]}),r})(),pie=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[za,Jt],Jt]}),r})(),rF=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Lr,Jt],Jt]}),r})(),oF=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({}),r})(),Fie=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[oF,za,Jt,Em],oF,Jt]}),r})(),jie=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[ku,xu,Lr,ah,Jt],Jt]}),r})(),fy=(()=>{class r{constructor(){this.changes=new B}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=mt({factory:function(){return new r},token:r,providedIn:"root"}),r})();const ere={provide:fy,deps:[[new Ji,new go,fy]],useFactory:function(r){return r||new fy}};let nre=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({providers:[ere],imports:[[Lr,Jt]]}),r})(),mre=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[AS]]}),r})(),kre=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[mre,Jt],Jt]}),r})(),poe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[Lr,Jt,xu,za,Em,Mb],Jt]}),r})(),voe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({}),r})(),Doe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r}),r.\u0275inj=Mt({imports:[[voe,Jt],Jt]}),r})(),Moe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=Lt({type:r,bootstrap:[OZ]}),r.\u0275inj=Mt({providers:[mm,Sw,{provide:Np,useFactory:Roe,deps:[mm],multi:!0}],imports:[[yT,DQ,_5,J$,rF,ah,LX,vq,Cq,Sq,ah,Oq,Vq,Qq,dee,Yee,Vte,Zte,LL,MZ,LK,SS,Zee,GL,uQ,fK,Hne,Xne,tie,pie,za,zP,kL,rF,Fie,jie,nre,kre,poe,NL,KP,Doe,NL,ah,kL,SS,GL,fQ.forRoot()]]}),r})();function Roe(r){return()=>r.Init()}(function(){if(rA)throw new Error("Cannot enable prod mode after platform setup.");iA=!1})(),m8().bootstrapModule(Moe).catch(r=>console.error(r))},39855:(T,A,m)=>{T.exports={interpreterHelper:m(44212),saveBlocksUrl:m(70200),saveLoad:m(98288)}},44212:(T,A,m)=>{A.createInterpreter=function(y,S){return{latestCode:"",workspace:y,BlocklyJavaScript:S,step:0,highlightPause:!1,myInterpreter:null,runner:null,generateCodeAndLoadIntoInterpreter:function(){this.BlocklyJavaScript.STATEMENT_PREFIX="highlightBlock(%1);\n",this.BlocklyJavaScript.addReservedWords("highlightBlock"),this.latestCode=this.BlocklyJavaScript.workspaceToCode(y),this.resetStepUi(!0)},resetStepUi:function(s){this.step=0,this.workspace.highlightBlock(null),this.highlightPause=!1},resetInterpreter:function(){this.myInterpreter=null,this.runner&&(window.clearTimeout(this.runner),this.runner=null)},highlightBlock:function(s){this.workspace.highlightBlock(s),highlightPause=!0},runCode:function(s,o,l){this.myInterpreter||this.resetStepUi(!0),this.generateCodeAndLoadIntoInterpreter();var u=this;setTimeout(function(){this.highlightPause=!1,u.myInterpreter=s(u.latestCode,(h,_)=>u.initApiJS(h,_,u,o,l)),u.runner=function(){u.myInterpreter&&(u.myInterpreter.run()?setTimeout(u.runner,10):(l?l():console.log("\n\n<< Program complete >>"),u.resetInterpreter(),u.resetStepUi(!1)))},u.runner&&u.runner()},100)},initInterpreterWaitForSeconds:function(s,o){this.BlocklyJavaScript.addReservedWords("waitForSeconds");var l=s.createAsyncFunction(function(u,h){setTimeout(h,1e3*u)});s.setProperty(o,"waitForSeconds",l)},doGet:function(s,o,l,u){console.log(s,o);let h=new XMLHttpRequest;if(h.open("GET",s,!0),h.withCredentials=u,l&&l.length>0)for(var _=0;_<l.length;_++){var b=l[_];h.setRequestHeader(b.name,b.value)}h.onreadystatechange=function(){if(4==h.readyState){if(h.status>=200&&h.status<300){var D=JSON.stringify({origHref:s,objectToSend:"",status:h.status,statusOK:!0,text:h.responseText});return o(D)}return D=JSON.stringify({origHref:s,objectToSend:"",status:h.status,statusOK:!1,text:h.responseText}),o(D)}},h.send(null)},exportToFile:function(s,o,l){var h,u=m(74694);return h=l?this.b64toBlob(o):new Blob([o],{type:"text/plain;charset=utf-8"}),u.saveAs(h,s),s},b64toBlob:function(s,o="",l=512){const u=atob(s),h=[];for(let b=0;b<u.length;b+=l){const D=u.slice(b,b+l),x=new Array(D.length);for(let j=0;j<D.length;j++)x[j]=D.charCodeAt(j);const G=new Uint8Array(x);h.push(G)}return new Blob(h,{type:o})},displayDateCurrentAsHuman:function(){return(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},displayDateCurrentAsIso:function(){return(new Date).toISOString()},displayDateCurrentAsUnix:function(){return Date.now()},displayDateFormatted:function(s){switch(s){case"human":return this.displayDateCurrentAsHuman();case"iso":return this.displayDateCurrentAsIso();case"unix":return this.displayDateCurrentAsUnix();default:console.log("Date time format not suported")}},doPut:(s,o,l)=>{let u=o,h=new XMLHttpRequest;h.open("PUT",s,!0),h.setRequestHeader("Content-Type","application/json;charset=UTF-8"),h.onreadystatechange=function(){if(4==h.readyState){if(h.status>=200&&h.status<300){var _=JSON.stringify({origHref:s,objectToSend:o,status:h.status,statusOK:!0,text:h.responseText});return l(_)}return _=JSON.stringify({origHref:s,objectToSend:o,status:h.status,statusOK:!1,text:h.responseText}),l(_)}},h.send(u)},doDelete:(s,o)=>{var l=new XMLHttpRequest;l.open("DELETE",s,!0),l.onreadystatechange=function(){if(4==l.readyState){if(l.status>=200&&l.status<300){var u=JSON.stringify({origHref:s,objectToSend:"",status:l.status,statusOK:!0,text:l.responseText});return o(u)}return u=JSON.stringify({origHref:s,objectToSend:"",status:l.status,statusOK:!1,text:l.responseText}),o(u)}},l.send(null)},doPost:function(s,o,l){let u=o,h=new XMLHttpRequest;h.open("POST",s,!0),h.setRequestHeader("Content-Type","application/json;charset=UTF-8"),h.onreadystatechange=function(){if(4==h.readyState){if(h.status>=200&&h.status<300){var _=JSON.stringify({origHref:s,objectToSend:o,status:h.status,statusOK:!0,text:h.responseText});return l(_)}return _=JSON.stringify({origHref:s,objectToSend:o,status:h.status,statusOK:!1,text:h.responseText}),l(_)}},h.send(u)},initApiJS:function(s,o,l,u,h){s.setProperty(o,"errHandler",s.createNativeFunction(_=x=>{u?u("\n error --\n"+x+"\n error --"):console.log(x)}));var b=s.nativeToPseudo({"(localSite)":!1});s.setProperty(o,"withCredsForDomain",b);var D=s.nativeToPseudo({"(localSite)":[]});s.setProperty(o,"headersForDomain",D),s.setProperty(o,"alert",s.createNativeFunction(_=function(x){x=x?x.toString():"",u?u(x):console.log(x)})),s.setProperty(o,"waitTime",s.createAsyncFunction(_=(x,G)=>{console.log(`waiting seconds ${x}`),setTimeout(G,1e3*x)})),s.setProperty(o,"displayDateFormatted",s.createNativeFunction(_=x=>l.displayDateFormatted(x))),s.setProperty(o,"exportToFile",s.createNativeFunction(_=(x,G,j)=>l.exportToFile(x,G,j))),s.setProperty(o,"convertToCSV",s.createNativeFunction(_=x=>{let G="object"!=typeof x?JSON.parse(x):{};return G=[Object.keys(G[0])].concat(G),G.map(F=>Object.values(F).toString()).join("\n")})),s.setProperty(o,"open",s.createNativeFunction(_=function(x){window.open(x)})),s.setProperty(o,"changeHost",s.createNativeFunction(_=function(x,G){x=new URL(x),console.log(`url ${x.href}`),x.hostname=G,console.log(`url ${x.href}`);var j=x.href;return j.endsWith("/")&&(j=j.substring(0,j.length-1)),j})),s.setProperty(o,"changePort",s.createNativeFunction(_=function(x,G){x=new URL(x),console.log(`url ${x.href}`),x.port=G,console.log(`url ${x.href}`);var j=x.href;return j.endsWith("/")&&(j=j.substring(0,j.length-1)),j}));var _=function(x){return x=x?x.toString():"",s.createPrimitive(prompt(x))};s.setProperty(o,"prompt",s.createNativeFunction(_)),l.BlocklyJavaScript.addReservedWords("waitForSeconds"),_=s.createAsyncFunction(function(x,G){setTimeout(G,1e3*x)}),s.setProperty(o,"waitForSeconds",_),_=(x,G)=>{var j=s.pseudoToNative(b),F=s.pseudoToNative(D),q="(localSite)";(x.startsWith("http://")||x.startsWith("https://"))&&(q=new URL(x).hostname);var Q=!1,Y=[];return q in F&&(Y=F[q]),q in j&&(Q=j[q]),l.doGet(x,G,Y,Q)},s.setProperty(o,"getXhr",s.createAsyncFunction(_)),_=(x,G,j)=>{try{s.pseudoToNative(D);(x.startsWith("http://")||x.startsWith("https://"))&&new URL(x).hostname,l.doPost(x,G,j)}catch(Y){alert("is an error"+Y)}},s.setProperty(o,"postXhr",s.createAsyncFunction(_)),_=(x,G)=>{try{s.pseudoToNative(D);(x.startsWith("http://")||x.startsWith("https://"))&&new URL(x).hostname,l.doDelete(x,G)}catch(Q){alert("is an error"+Q)}},s.setProperty(o,"deleteXhr",s.createAsyncFunction(_)),_=(x,G,j)=>{try{var F=s.pseudoToNative(D),q="(localSite)";(x.startsWith("http://")||x.startsWith("https://"))&&(q=new URL(x).hostname);var Q=[];q in F&&(Q=F[q]),l.doPut(x,G,j,Q,!1)}catch(ae){alert("is an error"+ae)}},s.setProperty(o,"putXhr",s.createAsyncFunction(_)),_=function(x){return x=x?x.toString():"",s.createPrimitive(l.highlightBlock(x))},s.setProperty(o,"highlightBlock",s.createNativeFunction(_))}}}},70200:(T,A)=>{A.saveState=function(S,s){var l=S.workspaceToDom(s,!0),u=S.domToPrettyText(l);window.localStorage.setItem("BlocklyState",u)},A.restoreState=function(S,s){var l=window.localStorage.getItem("BlocklyState");if(l.length>62){var u=S.textToDom(l);S.clearWorkspaceAndLoadFromXml(u,s)}return""}},98288:(T,A,m)=>{var y=m(74694);A.DownloadBlocks=function(S,s,o){var l=S.workspaceToDom(s,!0),u=S.domToPrettyText(l),h=new Blob([u],{type:"text/plain;charset=utf-16"});y.saveAs(h,o)},A.LoadFile=function(S,s,o){s.clear();var l=S.textToDom(o);S.domToWorkspace(l,s)}},99848:(T,A)=>{A.definitionBlocks=function(m,y){m.credsforhttp={init:function(){this.appendDummyInput().appendField("Http with Creds"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("WithCreds").setCheck("Boolean").appendField("With Creds ?"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.credsforhttp=function(o){return"withCredsForDomain["+(y.valueToCode(o,"HttpDomain",0)||"(localSite)")+"]="+y.valueToCode(o,"WithCreds",0)+";\n"}},A.fieldXML=function(){return'<block type="credsforhttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="WithCreds">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},10650:(T,A)=>{A.definitionBlocks=function(m,y){m.auth0webapidata={init:function(){this.appendDummyInput().appendField("Auth0"),this.appendValueInput("client_id").setCheck(null).appendField("client_id"),this.appendValueInput("client_secret").setCheck(null).appendField("client_secret"),this.appendValueInput("audience").setCheck(null).appendField("audience"),this.appendValueInput("grant_type").setCheck(null).appendField("grant_type"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.auth0webapidata=function(o){var b='{"client_id":'+y.valueToCode(o,"client_id",0);return b+=',"client_secret":'+y.valueToCode(o,"client_secret",0),b+=',"audience":'+y.valueToCode(o,"audience",0),b+=',"grant_type":'+y.valueToCode(o,"grant_type",0),[b+="}",99]}},A.fieldXML=function(){return'<category id="Auth0" name="Auth0">\n    <block type="auth0webapidata">\n        <value name="client_id">\n            <shadow type="text">\n                <field name="TEXT">client_id?</field>\n            </shadow>\n\n        </value>\n        <value name="client_secret">\n            <shadow type="text">\n                <field name="TEXT">client_secret?</field>\n            </shadow>\n\n        </value>\n        <value name="audience">\n            <shadow type="text">\n                <field name="TEXT">audience</field>\n            </shadow>\n\n        </value>\n        <value name="grant_type">\n            <shadow type="text">\n                <field name="TEXT">grant_type?</field>\n            </shadow>\n\n        </value>\n    </block>\n</category>\n'}},31439:(T,A)=>{A.definitionBlocks=function(m,y,S){m.comment={init:function(){this.appendValueInput("TEXT").setCheck(null).appendField("comment /* */").appendField(S(""),"NAME"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.comment=function(o){return"/*\n"+(y.valueToCode(o,"TEXT",0)||"''")+"\n*/;\n"}},A.fieldXML=function(){return'<block type="comment">\n    <value name="TEXT">\n        <shadow type="text">\n            <field name="TEXT">Put here comments</field>\n        </shadow>\n    </value>\n</block>\n'}},5986:(T,A)=>{A.definitionBlocks=function(m,y){m.converttojson={init:function(){this.appendDummyInput().appendField("ConvertToJSON"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to JSON"),this.setHelpUrl("")}},y.converttojson=function(l){return["JSON.parse("+y.valueToCode(l,"ValueToConvert",0)+")",99]},m.converttostring={init:function(){this.appendDummyInput().appendField("ConvertToString"),this.appendValueInput("ValueToConvert").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setTooltip("Convert to String"),this.setHelpUrl("")}},y.converttostring=function(l){return["JSON.stringify("+y.valueToCode(l,"ValueToConvert",0)+")",99]},m.convertcsv={init:function(){this.appendDummyInput().appendField("Convert CSV"),this.appendValueInput("ArrayToConvert").setCheck(null).appendField("Array to convert"),this.setOutput(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.convertcsv=function(l){return["convertToCSV("+y.valueToCode(l,"ArrayToConvert",y.ORDER_ATOMIC)+")",99]}},A.fieldXML=function(){return'<block type="converttojson"></block>\n <block type="converttostring"></block>\n <block type="convertcsv"></block>\n'}},44832:(T,A)=>{A.definitionBlocks=function(m,y,S,s,o){y.object_from_json=function(de){return[`JSON.parse(${y.valueToCode(de,"JSON",0)})`,99]},y.object_to_json=function(de){return[`JSON.stringify(${y.valueToCode(de,"object",0)})`,99]},y.object_get=function(de){const J=de.getFieldValue("field_name");return[`${y.valueToCode(de,"object",0)}['${J}']`,99]},y.object_set=function(de){const J=de.getFieldValue("field_name");return`${y.valueToCode(de,"object_field",0)}['${J}'] = ${y.valueToCode(de,"value_field",0)};\n`},y.object_create=function(de){if(!de.numFields)return["{}",99];let J="";for(let re=1;re<=de.numFields;re++)J+=`"${de.getFieldValue("field"+re)}": ${y.valueToCode(de,"field_input"+re,0)}, `;return[`{ ${J} }`,99]};const F="object_field",q="object_create_mutator_top",Q="#F99EA3",Y=(de,...J)=>({object_from_json:"get object from JSON %1",object_from_json_tooltip:"Create object from JSON string.",object_to_json:"generate JSON from object %1",object_to_json_tooltip:"Save object as a JSON string.",object_get_json:"get property %1 %2 of object %3",object_get_json_tooltip:"Get a property of an object.",object_set_json:"set property %1 %2 of object %3 to %4",object_set_json_tooltip:"Set a property of an object.",object_create:"create object",object_create_tooltip:"Create a new object, optionally with some property values.",object_field_name:"property name"}[de]),ae={type:"object_from_json",message0:Y("object_from_json"),args0:[{type:"input_value",name:"JSON",check:"String"}],output:"Object",colour:Q,tooltip:Y("object_from_json_tooltip"),helpUrl:"http://www.json.org/"};m.object_from_json={init:function(){this.jsonInit(ae)}};const ie={type:"object_to_json",message0:Y("object_to_json"),args0:[{type:"input_value",name:"object",check:"Object"}],output:null,colour:Q,tooltip:Y("object_to_json_tooltip"),helpUrl:"http://www.json.org/"};m.object_to_json={init:function(){this.jsonInit(ie)}};const he={type:"object_get",message0:Y("object_get_json"),args0:[{type:"field_input",name:"field_name",text:"default"},{type:"input_dummy"},{type:"input_value",name:"object",check:"Object",align:"RIGHT"}],output:null,colour:Q,tooltip:Y("object_get_json_tooltip"),helpUrl:""};m.object_get={init:function(){this.jsonInit(he)}};const te={type:"object_set",message0:Y("object_set_json"),args0:[{type:"field_input",name:"field_name",text:Y("object_field_name")},{type:"input_dummy"},{type:"input_value",name:"object_field",check:"Object",align:"RIGHT"},{type:"input_value",name:"value_field",align:"RIGHT"}],previousStatement:null,nextStatement:null,colour:Q,tooltip:Y("object_set_json_tooltip"),helpUrl:""};m.object_set={init:function(){this.jsonInit(te)}};const Z={type:"object_create",message0:Y("object_create"),output:"Object",mutator:"controls_create_mutator",colour:15,tooltip:Y("object_create_tooltip"),helpUrl:""};m.object_create={init:function(){this.jsonInit(Z)}};const ee={type:"object_field",message0:"%1 %2",args0:[{type:"field_input",name:"field_name",text:Y("object_field_name")},{type:"input_value",name:"field_value"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""};m[F]={init:function(){this.jsonInit(ee)}};const $={type:"object_create_mutator",message0:Y("object_create"),nextStatement:null,colour:15,tooltip:Y("object_create_tooltip"),helpUrl:""};m[q]={init:function(){this.jsonInit($)}},S.registerMutator("controls_create_mutator",{numFields:0,fields:[],domToMutation:function(de){this.fields=[];for(let B,J=0;B=de.childNodes[J];J++)"field"==B.nodeName.toLowerCase()&&this.fields.push(B.getAttribute("name"));this.numFields=this.fields.length,this.updateShape()},mutationToDom:function(){if(!this.numFields)return null;const de=document.createElement("mutation");de.setAttribute("num_fields",""+this.numFields);for(let J=0;J<this.fields.length;J++){const B=document.createElement("field");B.setAttribute("name",this.fields[J]),de.appendChild(B)}return de},compose:function(de){let J=de.nextConnection&&de.nextConnection.targetBlock();this.numFields=0,this.fields=[];let B=[null];for(;J;)this.fields.push(J.getFieldValue("field_name")),this.numFields++,B.push(J.savedConnection),J=J.nextConnection&&J.nextConnection.targetBlock();this.updateShape();for(let re=1;re<=this.numFields;re++)o().reconnect(B[re],this,"field_input"+re)},decompose:function(de){const J=de.newBlock(q);J.initSvg();let B=J.nextConnection;for(let re=0;re<this.fields.length;re++){const ce=de.newBlock(F);ce.initSvg(),ce.setFieldValue(this.fields[re],"field_name"),B.connect(ce.previousConnection),B=ce.nextConnection}return J},saveConnections:function(de){let J=de.nextConnection&&de.nextConnection.targetBlock(),B=1;for(;J;){const re=this.getInput("field_input"+B);J.savedConnection=re&&re.connection.targetConnection,J.setFieldValue(this.getFieldValue("field"+B),"field_name"),B++,J=J.nextConnection&&J.nextConnection.targetBlock()}},updateShape:function(){this.getInput("with")&&this.removeInput("with");let de=1;for(;this.getInput("field_input"+de);)this.removeInput("field_input"+de),de++;this.numFields>0&&this.appendDummyInput("with").setAlign(1).appendField("with fields");for(let J=1;J<=this.numFields;J++){const B=this.fields[J-1];this.appendValueInput("field_input"+J).setCheck(null).setAlign(1).appendField(s(B),"field"+J)}}},null,["object_field"])},A.fieldXML=function(){return'    \n    <block type="modifyproperty"></block>\n    <block type="getproperty"></block>\n    <block type="object_create"></block>\n    \x3c!--<block type="object_from_json"></block>\n<block type="object_to_json"></block>\n<block type="object_get"></block>\n<block type="object_set"></block>--\x3e\n\n'}},31310:(T,A)=>{A.definitionBlocks=function(m,y,S){m.displayCurrentDate={init:function(){this.appendDummyInput().appendField("Current Date"),this.appendDummyInput().appendField("Pick date format:").appendField(new S([["Unix format","unix"],["ISO format","iso"],["Human format","human"]]),"dateFormat"),this.setOutput(!0,null),this.setColour(100),this.setTooltip("Show current date."),this.setHelpUrl("https://www.w3schools.com/jsref/jsref_obj_date.asp")}};y.displayCurrentDate=l=>{let h="";switch(l.getFieldValue("dateFormat").toString()){case"human":h="displayDateFormatted('human')";break;case"iso":h="displayDateFormatted('iso')";break;case"unix":h="displayDateFormatted('unix')";break;default:console.log("Date time format not suported")}return[h,99]}},A.fieldXML=function(){return'<block type="displayCurrentDate"></block>'}},70061:(T,A)=>{A.definitionBlocks=function(m,y){m.DateFromText={init:function(){this.appendValueInput("VALUE").appendField("Date from "),this.setOutput(!0,null),this.setHelpUrl("https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse#Date_Time_String_Format")}},y.DateFromText=s=>["Date.parse("+(y.valueToCode(s,"VALUE",y.ORDER_ATOMIC)||"")+")",99]},A.fieldXML=function(){return'<block type="DateFromText">\n    <value name="VALUE">\n        <shadow type="text">\n            <field name="TEXT">1970-04-16T02:00:00</field>\n        </shadow>\n    </value>\n</block>\n'}},75140:(T,A)=>{A.generalBlocks=function(){return'\n    \n    <category name="Blockly Core">\n\n    <category id="catLogic" colour="210" name="Logic">\n        <block type="controls_if"></block>\n        <block type="logic_compare"></block>\n        <block type="logic_operation"></block>\n        <block type="logic_negate"></block>\n        <block type="logic_boolean"></block>\n        <block type="logic_null"></block>\n        <block type="logic_ternary"></block>\n    </category>\n    <category id="catLoops" colour="120" name="Loops">\n        <block type="controls_repeat_ext">\n            <value name="TIMES">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_whileUntil"></block>\n        <block type="controls_for">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n            <value name="BY">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="controls_forEach"></block>\n        <block type="controls_flow_statements"></block>\n    </category>\n    <category id="catMath" colour="230" name="Math">\n        <block type="math_number"></block>\n        <block type="math_arithmetic">\n            <value name="A">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="B">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_single">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">9</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_trig">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">45</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constant"></block>\n        <block type="math_number_property">\n            <value name="NUMBER_TO_CHECK">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_change">\n            <value name="DELTA">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_round">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">3.1</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_on_list"></block>\n        <block type="math_modulo">\n            <value name="DIVIDEND">\n                <shadow type="math_number">\n                    <field name="NUM">64</field>\n                </shadow>\n            </value>\n            <value name="DIVISOR">\n                <shadow type="math_number">\n                    <field name="NUM">10</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_constrain">\n            <value name="VALUE">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="LOW">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="HIGH">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_int">\n            <value name="FROM">\n                <shadow type="math_number">\n                    <field name="NUM">1</field>\n                </shadow>\n            </value>\n            <value name="TO">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="math_random_float"></block>\n    </category>\n    <category id="catText" colour="160" name="Text">\n        <block type="text"></block>\n        <block type="text_join"></block>\n        <block type="text_append">\n            <value name="TEXT">\n                <shadow type="text"></shadow>\n            </value>\n        </block>\n        <block type="text_length">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_isEmpty">\n            <value name="VALUE">\n                <shadow type="text">\n                    <field name="TEXT"></field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n            <value name="FIND">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_charAt">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_getSubstring">\n            <value name="STRING">\n                <block type="variables_get">\n                    <field name="VAR">text</field>\n                </block>\n            </value>\n        </block>\n        <block type="text_changeCase">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_trim">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_print">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="text_prompt_ext">\n            <value name="TEXT">\n                <shadow type="text">\n                    <field name="TEXT">abc</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catLists" colour="260" name="Lists">\n        <block type="lists_create_with">\n            <mutation items="0"></mutation>\n        </block>\n        <block type="lists_create_with"></block>\n        <block type="lists_repeat">\n            <value name="NUM">\n                <shadow type="math_number">\n                    <field name="NUM">5</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_length"></block>\n        <block type="lists_isEmpty"></block>\n        <block type="lists_indexOf">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getIndex">\n            <value name="VALUE">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_setIndex">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_getSublist">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n        </block>\n        <block type="lists_split">\n            <value name="DELIM">\n                <shadow type="text">\n                    <field name="TEXT">,</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="lists_sort"></block>\n    </category>\n    <category id="catColour" colour="20" name="Color">\n        <block type="colour_picker"></block>\n        <block type="colour_random"></block>\n        <block type="colour_rgb">\n            <value name="RED">\n                <shadow type="math_number">\n                    <field name="NUM">100</field>\n                </shadow>\n            </value>\n            <value name="GREEN">\n                <shadow type="math_number">\n                    <field name="NUM">50</field>\n                </shadow>\n            </value>\n            <value name="BLUE">\n                <shadow type="math_number">\n                    <field name="NUM">0</field>\n                </shadow>\n            </value>\n        </block>\n        <block type="colour_blend">\n            <value name="COLOUR1">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#ff0000</field>\n                </shadow>\n            </value>\n            <value name="COLOUR2">\n                <shadow type="colour_picker">\n                    <field name="COLOUR">#3333ff</field>\n                </shadow>\n            </value>\n            <value name="RATIO">\n                <shadow type="math_number">\n                    <field name="NUM">0.5</field>\n                </shadow>\n            </value>\n        </block>\n    </category>\n    <category id="catVariables" colour="330" custom="VARIABLE" name="Variables"></category>\n    <category id="catFunctions" colour="290" custom="PROCEDURE" name="Functions"></category>\n</category>\n\n      '}},93736:(T,A)=>{A.definitionBlocks=function(m,y){m.exportfile={init:function(){this.appendDummyInput().appendField("ExportToFile"),this.appendValueInput("fileName").setCheck(null).appendField("FileName"),this.appendValueInput("contentFile").setCheck(null).appendField("Content"),this.appendValueInput("convertToByte").setCheck("Boolean").appendField("ConvertToByteFromBase64"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.exportfile=function(o){return"exportToFile("+y.valueToCode(o,"fileName",0)+","+y.valueToCode(o,"contentFile",0)+","+y.valueToCode(o,"convertToByte",0)+");\n"}},A.fieldXML=function(){return'<block type="exportfile">\n    <value name="fileName">\n        <shadow type="text">\n            <field name="TEXT">abc</field>\n        </shadow>\n    </value>\n    <value name="convertToByte">\n        <shadow type="logic_boolean">\n            <field name="BOOL">FALSE</field>\n        </shadow>\n    </value>\n</block>\n'}},21811:(T,A)=>{A.definitionBlocks=function(m,y){m.filterList={init:function(){this.appendDummyInput().appendField("filterList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.filterList=function(S){var s=y.valueToCode(S,"LIST",y.ORDER_MEMBER)||"[]",o=y.valueToCode(S,"Logic",y.ORDER_ATOMIC);"string"==typeof o&&(o=o.substr(1,o.length-2));var l="";return l+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+s+")).filter(function (item){ return "+o+";})",[l+="",y.ORDER_FUNCTION_CALL]},m.mapList={init:function(){this.appendDummyInput().appendField("mapList"),this.appendValueInput("LIST").setCheck("Array"),this.appendValueInput("Logic").setCheck("String").appendField("item=>"),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.mapList=function(S){var s=y.valueToCode(S,"LIST",y.ORDER_MEMBER)||"[]",o=y.valueToCode(S,"Logic",y.ORDER_ATOMIC);"string"==typeof o&&(o=o.substr(1,o.length-2));var l="";return l+='(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+s+")).map(function (item){ return "+o+";})",[l+="",y.ORDER_FUNCTION_CALL]}},A.fieldXML=function(){return'\n        <category id="catA" name="Array">\n            <block type="filterList">\n                <value name="LIST">\n                    <block type="variables_get">\n                        <field name="VAR">list</field>\n                    </block>\n                </value>\n                <value name="Logic">\n                    <shadow type="text">\n                        <field name="TEXT">item.property == "value"</field>\n                    </shadow>\n                </value>\n            </block>\n            <block type="mapList">\n            <value name="LIST">\n                <block type="variables_get">\n                    <field name="VAR">list</field>\n                </block>\n            </value>\n            <value name="Logic">\n                <shadow type="text">\n                    <field name="TEXT">item.property</field>\n                </shadow>\n            </value>\n        </block>\n\n        </category>\n\n'}},92605:(T,A)=>{A.definitionBlocks=function(m,y){m.window_open={init:function(){this.jsonInit({message0:"Open %1",args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks"})}},y.window_open=function(o){return"open("+(y.valueToCode(o,"TEXT",99)||"''")+");\n"},m.valuefromtext={init:function(){this.appendDummyInput().appendField("InputFromText"),this.appendValueInput("IdOfText").setCheck("String").appendField("Text id"),this.appendValueInput("ValueToObtain").setCheck("String").appendField("Property"),this.setOutput(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},y.valuefromtext=function(o){return["getIDProp("+y.valueToCode(o,"IdOfText",0)+","+(y.valueToCode(o,"ValueToObtain",0)||'"value"')+")",99]}},A.fieldXML=function(){return'<block type="window_open"></block>\n    <block type="valuefromtext">\n        <value name="IdOfText">\n            <shadow type="text">\n                <field name="TEXT">output</field>\n            </shadow>\n        </value>\n        <value name="ValueToObtain">\n            <shadow type="text">\n                <field name="TEXT">value</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="text_print"></block>\n    <block type="text_prompt_ext">\n    </block>\n    '}},57470:(T,A,m)=>{T.exports={defaultBlocks:m(75140),filterBlocks:m(21811),waitBlocks:m(95870),xhrBlocks:m(67716),propBlocks:m(53951),guiBlocks:m(92605),convertersBlocks:m(5986),exportFileBlock:m(93736),createObjectBlocks:m(44832),currentDateBlock:m(31310),dateFromTextBlock:m(70061),waitBlocks:m(96126),commentBlock:m(31439),auth0Blocks:m(10650),windowsCreds:m(99848),trycatchFinBlock:m(73375)}},53951:(T,A)=>{A.definitionBlocks=function(m,y,S){m.modifyproperty={init:function(){this.appendDummyInput().appendField("Modify "),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(S("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(S(",property"),"prop"),this.appendValueInput("NewValue").setCheck(null).setAlign(1).appendField(S("toValue"),"newValue"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(""),this.setHelpUrl("")}},y.modifyproperty=function(h){return y.valueToCode(h,"ObjectToChange",0)+"["+y.valueToCode(h,"PropertyName",0)+"]="+y.valueToCode(h,"NewValue",0)+";"},m.getproperty={init:function(){this.appendDummyInput().appendField("Get from"),this.appendValueInput("ObjectToChange").setCheck(null).setAlign(0).appendField(S("object"),"objectName"),this.appendValueInput("PropertyName").setCheck(null).setAlign(1).appendField(S("property"),"prop"),this.setInputsInline(!0),this.setOutput(!0,null)}},y.getproperty=function(h){return['(function(t){ if (typeof t === "string") return JSON.parse(t);  return t;}('+y.valueToCode(h,"ObjectToChange",0)+"))["+y.valueToCode(h,"PropertyName",0)+"]",99]}},A.fieldXML=function(){return'\n    \n    <block type="modifyproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n    </block>\n    <block type="getproperty">\n        <value name="PropertyName">\n            <shadow type="text">\n                <field name="TEXT">enter property name</field>\n            </shadow>\n        </value>\n\n    </block>    \n'}},73375:(T,A)=>{A.definitionBlocks=function(m,y){m.trycatchfinally={init:function(){this.appendStatementInput("TRY").appendField("try"),this.appendStatementInput("CATCH").appendField("catch"),this.appendStatementInput("FINALLY").appendField("finally"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.trycatchfinally=function(o){var _="try {\n"+y.statementToCode(o,"TRY")+"}\n";return(_+="catch(err){\n errHandler(JSON.stringify(err));\n"+y.statementToCode(o,"CATCH")+"\n}")+"finally{\n "+y.statementToCode(o,"FINALLY")+"\n}\n"}},A.fieldXML=function(){return'\n    \n    <block type="trycatchfinally">\n    \n</block>\n'}},96126:(T,A)=>{A.definitionBlocks=function(m,y){m.wait={init:function(){this.appendValueInput("VALUE").appendField("wait secs"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.wait=function(s){return"waitTime("+(y.valueToCode(s,"VALUE",y.ORDER_ATOMIC)||"")+");"},m.wait_until={init:function(){this.appendValueInput("VALUE").appendField("wait until date"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.wait_until=function(s){return"waitTime(("+(y.valueToCode(s,"VALUE",0)||"")+"-new Date())/1000);"}},A.fieldXML=function(){return'\n    <block type="wait">\n\n    <value name="VALUE">\n        <shadow type="math_number">\n            <field name="NUM">10</field>\n        </shadow>\n    </value>\n\n</block>\n<block type="wait_until">\n\n</block>'}},95870:(T,A)=>{A.definitionBlocks=function(m,y){m([{type:"wait_seconds",message0:" wait %1 seconds",args0:[{type:"field_number",name:"SECONDS",min:0,max:600,value:1}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}"}]),y.wait_seconds=function(S){return"waitForSeconds("+Number(S.getFieldValue("SECONDS"))+");\n"}},A.fieldXML=function(){return'\n  <block type="wait_seconds"></block>\n'}},67716:(T,A)=>{A.definitionBlocks=function(m,y,S){m.headersbeforehttp={init:function(){this.appendDummyInput().appendField("Add Headers"),this.appendValueInput("HttpDomain").setCheck("String").appendField("Domain"),this.appendValueInput("HeaderName").setCheck("String").appendField("Header Name"),this.appendValueInput("HeaderValue").setCheck("String").appendField("Header Value"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null)}},y.headersbeforehttp=function(l){var u=y.valueToCode(l,"HttpDomain",0)||"(localSite)",b="\n";return b+="{\n",b+="if(!("+u+" in headersForDomain))\n",b+="{\n",b+="headersForDomain["+u+"]=[];\n",b+="};\n",b+="var arr = headersForDomain["+u+"];\n",b+="arr.push({name:"+y.valueToCode(l,"HeaderName",0)+", value:"+y.valueToCode(l,"HeaderValue",0)+"});\n",b+='//alert("a" + JSON.stringify(arr)+"a");\n',(b+='//alert("a" + JSON.stringify(headersForDomain['+u+'])+"a");\n')+"};\n"},m.httprequest={init:function(){this.appendDummyInput().appendField(S([["JSON","JSON"],["Text","Text"]]),"TypeOutput").appendField("HttpRequest"),this.appendValueInput("TheUrl").setCheck(null).appendField(S([["GET","GET"],["POST","POST"]]),"TypeRequest").appendField("URL"),this.appendValueInput("Data").setCheck(null).appendField("Data"),this.setOutput(!0,null)}},y.httprequest=function(l){var u=l.getFieldValue("TypeOutput"),h=l.getFieldValue("TypeRequest"),_=y.valueToCode(l,"TheUrl",0),b=y.valueToCode(l,"Data",0),D="";switch(h.toString()){case"GET":D="(function(url){ var res=JSON.parse(getXhr(url)); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_+") )";break;case"POST":D="(function(url,data){ var res=JSON.parse(postXhr(url,JSON.stringify(data))); if(res.statusOK) return res.text;errHandler(JSON.stringify(res)); throw res;}("+_,b&&(D+=","+b),D+=") )"}var x=D;switch(u){case"JSON":x="JSON.parse("+x+")"}return[x,99]}},A.fieldXML=function(){return'\n    \n    <block type="headersbeforehttp">\n    <value name="HttpDomain">\n        <shadow type="text">\n            <field name="TEXT">(localSite)</field>\n        </shadow>\n    </value>\n    <value name="HeaderName">\n        <shadow type="text">\n            <field name="TEXT">Authorization</field>\n        </shadow>\n    </value>\n    <value name="HeaderValue">\n        <shadow type="text_join">\n\n        </shadow>\n    </value>\n</block>\n<block type="text_print">\n<value name="TEXT">\n\n    <block type="httprequest">\n    <value name="TheUrl">\n        <shadow type="text">\n            <field name="TEXT">https://httpbin.org/get</field>\n        </shadow>\n    </value>\n</block>\n</value>\n</block>    \n\n'}},47730:(T,A,m)=>{var y=m(38506).default;T.exports=class{constructor(o){Ya(this,"GenerateBlocks",[]),Ya(this,"GenerateFunctions",[]),Ya(this,"fieldXMLObjects",[]),Ya(this,"fieldXMLFunctions",[]),Ya(this,"hasError",!0),Ya(this,"paths",[]),Ya(this,"name",""),Ya(this,"operations",[]),Ya(this,"openApiDocument",null),Ya(this,"basePath",""),this.swaggerUrl=o}nameCategSwagger(){return`catSwagger${this.findHostNameRegular()}_${this.name}`}findCategSwaggerFromPaths(){var o=this.paths.filter(h=>h&&h.id&&h.id.length>0).map(h=>{var _=h.id.indexOf("{");return _>0&&(h.id=h.id.substring(0,_)),h}).map(h=>(h.id.lastIndexOf("/")!=h.id.length-1&&(h.id+="/"),h));this.operations=o.filter(h=>h.nrOps>1).map(h=>({arr:h.id.split("/").filter(b=>b.length>0),id:h.id})).map(h=>({controller:h.arr[h.arr.length-1],id:h.id}));var l=o.filter(h=>1==h.nrOps).map(h=>({arr:h.id.split("/").filter(_=>_.length>0),id:h.id})).map(h=>1==h.arr.length?{controller:h.arr[0],id:h.id}:{controller:h.arr[h.arr.length-2],id:h.id});return this.operations.push(...l),[...new Set(this.operations.map(h=>h.controller))]}categSwagger(){var o=this.findHostNameRegular();(o=o.replaceAll(".","")).length>5&&o.substring(0,5);var h=this.nameCategSwagger();return'<category name="Objects" custom="objects_'+h+'"></category><category name="AllApi" custom="AllApi_'+h+'"></category>'}findRootSite(){var o=this.swaggerUrl,l="";if(o.startsWith("http://")||o.startsWith("https://")){var u=new URL(o);l=u.protocol+"//"+u.hostname,u.port.length>0&&(l+=":"+u.port)}return l}findHostNameRegular(){var _,o=this.swaggerUrl,l="(localSite)";if(o.startsWith("http://")||o.startsWith("https://")){var u=new URL(o),h=null!=(_=u.port)?_:80;l=u.hostname+h}return l.replaceAll(".","")}ParseSwagger(){var o=this;return y(function*(){var D,l=o;l.fieldXMLObjects.push(`<label text="${l.swaggerUrl}"></label>`),l.fieldXMLFunctions.push({id:"",gui:`<label text="${l.swaggerUrl}"></label>`});var u=null;try{u=(yield m(14087).default(o.swaggerUrl)).spec}catch(x){return console.error(`parseSwagger ${o.swaggerUrl}`,x),l.fieldXMLObjects.push("<label text='Error parsing!'></label>"),o}o.hasError=!1,o.basePath=u.basePath||"";var _=null==(D=u.components)?void 0:D.schemas;return(null==_||null==_)&&(_=u.definitions),_?Object.keys(_).sort().forEach(function(x){var G=_[x],j=l.findProperties(G),F=`<block type="${x}">`;j.forEach(function(q){if(q.value&&q.value.type){var Q=l.GenerateShadowField(q.value.type,q.key);Q.length>0&&(F+=`<value name="val_${q.key}">${Q}</value>`)}}),l.fieldXMLObjects.push(F+="</block>"),l.GenerateBlocks.push(l.GenerateBlock(G,x))}):console.log("_A",u),u.paths&&Object.keys(u.paths).forEach(function(x){var G=u.paths[x];l.paths.push({id:x,nrOps:Object.keys(G).length}),Object.keys(G).forEach(function(j){l.GenerateFunctions.push(l.GenerateFunction(G,x,G[j],j))})}),l.openApiDocument=u,l})()}findProperties(o){var l=[];return o.properties&&Object.keys(o.properties).forEach(u=>{l.push({key:u,value:o.properties[u]})}),l}GenerateNameFunction(o,l,u,h){return h+"_"+l.replaceAll("/","_").replaceAll("{","__").replaceAll("}","")}GenerateShadowField(o,l){switch(o){case"integer":return"<block type='math_number'><field name='NUM'>0</field></block>";case"string":return`<block type='text'><field name='TEXT'>please enter ${l}</field></block>`;case"boolean":return"<block type='logic_boolean'><field name='BOOL'>FALSE</field></block>";case"array":return'<block type="lists_create_with"> <mutation items="0"></mutation></block>';default:return""}}GenerateFunction(o,l,u,h){var _=this,b=_.GenerateNameFunction(o,l,u,h),x=u,G=`<block type="text_print"> <value name="TEXT"><block type="${b}">`;return x.parameters&&x.parameters.forEach(j=>{if(j.schema&&j.schema.type){var F=_.GenerateShadowField(j.schema.type,j.name);F.length>0&&(G+=`<value name="val_${j.name}">${F}</value>`)}}),_.fieldXMLFunctions.push({id:l,gui:G+="</block></value></block>"}),function(j,F,q){j[b]={init:function(){var Q=l;Q.length>15&&(Q=Q.substring(0,25)+"..."),this.appendDummyInput().appendField(q(h)).appendField(`${h} ${Q}`);var Y=_.findRootSite();if(x.parameters&&x.parameters.forEach(te=>{var Z=te.name;if(te.required&&(Z+="*"),te.schema&&te.schema.type)if("object"==te.schema.type){var ee=te.schema.$$ref||"";ee.length>0&&(Z+=":"+(ee=ee.substring(ee.lastIndexOf("/")+1)))}else Z+=":"+te.schema.type;this.appendValueInput(`val_${te.name}`).appendField(Z)}),x.requestBody){var ae="";if(x.requestBody.content){var ie=x.requestBody.content["application/json"];if(ie&&ie.schema){var he=ie.schema.$$ref;he&&(ae="=>"+he.substring(he.lastIndexOf("/")+1))}}this.appendValueInput("val_values").appendField("values"+ae).setCheck()}this.appendValueInput("override_Host").appendField("override Host"),this.setTooltip(`${h} ${Y}${l}`),this.setOutput(!0,"")}},F[b]=function(Q){var he=_.openApiDocument.paths[l][h],te=[];"parameters"in he&&(te=he.parameters);var Z=!1,ee=te.filter(Ue=>"body"==Ue.in).length>0;(ee||"requestBody"in he)&&(Z=!0);var $={},H={};Z&&($.val_values=F.valueToCode(Q,"val_values",0),H.val_values=$.val_values),te.forEach(Ue=>{$[`val_${Ue.name}`]=F.valueToCode(Q,`val_${Ue.name}`,0)});var de=te.map(Ue=>Ue.name);Z&!ee&&de.push("values"),de.push("extraData"),te.map(Ue=>`\${obj['val_${Ue.name}']},`);var B="function(";B+=de.join(","),B+="){\n",B+='var rootSite="'+_.findRootSite()+'";\n',B+="if(extraData){\n",B+="if(extraData.url && extraData.url.host ){\n",B+="rootSite =  changeHost(rootSite, extraData.url.host);\n",B+="};\n",B+="if(extraData.url && extraData.url.port ){\n",B+="rootSite  =changePort(rootSite , extraData.url.port);\n",B+="};\n",B+="};\n",B+='var strUrl =rootSite +"'+_.basePath+l+'";\n';var re=te.filter(Ue=>"query"==Ue.in);if(re.length>0){B+='strUrl+="?";\n;';var ce=re.map(Ue=>`${Ue.name}={`+Ue.name+"}").join("&");B+='strUrl += "'+ce+'";\n;'}var Ee=te.filter(Ue=>"path"==Ue.in||"query"==Ue.in).map(Ue=>`strUrl = strUrl.replace("{${Ue.name}}",${Ue.name});`);if(B+=Ee.join("\n"),B+=`\n{var res= ${h}Xhr(strUrl`,Z){var pe="values";ee&&(pe=te.filter(Ue=>"body"==Ue.in)[0].name),B+=`,JSON.stringify(${pe})`}B+=");\n",B+="var resJS=JSON.parse(res);\n",B+="if(resJS.statusOK) return resJS.text;\n",B+="errHandler(res);\n}\n",B+="}",B+="(",te.forEach(Ue=>{B+=$[`val_${Ue.name}`]+","}),Z&!ee&&(B+=H.val_values+",");var ye="url:{notImportant:1",Pe=F.valueToCode(Q,"override_Host",0);return(Pe=Pe||"").length>0&&(ye+=`,host:${Pe}`),B+=`{${ye+="}"}}\n`,[B+=")",99]}}}GenerateBlock(o,l){var u=this,h=l,b=u.findProperties(o);return function(D,x,G){D[h]={init:function(){var j=!1,F=[];o.enum&&(j=!0,F=Object.keys(o.enum).map(o["x-enumNames"]?Y=>[o["x-enumNames"][Y],Y]:Y=>[o.enum[Y],Y]));var Q=this.appendDummyInput().appendField(l);j?(F=F.map(Y=>[Y[0].toString(),Y[1].toString()]),Q.appendField(G(F),`val_${l}`)):b.forEach(Y=>{var Z,ae=Y.key;if(Y.value.nullable&&0==Y.value.nullable&&(ae+="*"),null==(Z=Y.value)?void 0:Z.type){var ie=Y.value.type||"";if("object"==ie){var he=Y.value.$$ref||"";he.length>0&&(ie=he.substring(he.lastIndexOf("/")+1))}ae+=":"+ie}Y.value.$ref&&(ae+="->"+Y.value.$ref.replaceAll("#/components/schemas/","")),this.appendValueInput(`val_${Y.key}`).appendField(`${ae}`)}),this.setOutput(!0,h)}},x[h]=function(j){{var F=!1;o.enum&&(F=!0);var q=u.findProperties(o);const ie=99,he=0;var Q="",Y=[];return q.forEach(te=>{let Z=x.valueToCode(j,`val_${te.key}`,he);""===Z&&(Z="null"),null==Z&&(Z="null"),Y.push(`"${te.key}":${Z}`)}),Q="{ "+Y.join(",")+" }",F&&(Q=j.getFieldValue(`val_${l}`)),[Q,ie]}}}}TranslateToBlocklyType(o){return"integer"==o?"Number":"string"==o?"String":"bool"==o?"Boolean":"array"==o?"Array":(console.error("not found TranslateToBlocklyType item"+o),"not found type"+o)}}},76894:(T,A,m)=>{T.exports={parseSwagger:m(88977),parseData:m(47730)}},88977:(T,A,m)=>{var y=m(38506).default;A.parseSwagger=function(){var o=y(function*(l){var G;new(m(47730))(l);var _=[],x=(yield m(33817).default(l)).response;return(null==(G=x.components)?void 0:G.schemas)&&Object.keys(x.components.schemas).forEach(function(j){_.push(function(o,l){var u=l;return o.properties&&Object.keys(o.properties).forEach(h=>{}),function(h,_){h[u]={init:function(){this.appendDummyInput().appendField(l),this.setOutput(!0,u)}}}}(x.components.schemas[j],j))}),_});return function(l){return o.apply(this,arguments)}}(),A.parseSwagger1=function(o){return m(33817).default(o)}},80751:(T,A,m)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Api=void 0;var y=m(14985);A.Api=function(o,l){void 0===l&&(l={}),this.entrypoint=o,y.assignSealed(this,l)}},77981:(T,A,m)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Field=void 0;var y=m(14985);A.Field=function(o,l){void 0===l&&(l={}),this.name=o,y.assignSealed(this,l)}},20985:(T,A,m)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.Resource=void 0;var y=m(14985);A.Resource=function(o,l,u){void 0===u&&(u={}),this.name=o,this.url=l,y.assignSealed(this,u)}},22566:(T,A,m)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.removeTrailingSlash=void 0;var S=m(2805).__importDefault(m(19556)),s=m(77981),o=m(20985),l=m(37906);A.removeTrailingSlash=function(_){return _.endsWith("/")&&(_=_.slice(0,-1)),_},A.default=function(_,b){return l.getResources(_.paths).map(function(G){var j=G.replace("/",""),F=A.removeTrailingSlash(b)+G,q=Object.keys(_.paths[G])[0],Q=_.paths[G][q];if(!Q.tags)throw new Error;var Y=Q.tags[0];if(!_.components)throw new Error;if(!_.components.schemas)throw new Error;var ie=_.components.schemas[Y].properties;if(!ie)throw new Error;var he=Object.keys(ie),te=S.default(_,["components","schemas",Y,"required"],[]),Z=he.map(function(ee){return new s.Field(ee,{id:null,range:null,reference:null,required:!!te.find(function($){return $===ee}),description:S.default(ie[ee],"description","")})});return new o.Resource(j,F,{id:null,title:Y,fields:Z,readableFields:Z,writableFields:Z})})}},33817:(T,A,m)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});var y=m(2805),S=m(80751),s=y.__importStar(m(22566));A.default=function(l){return l=s.removeTrailingSlash(l),fetch(l).then(function(u){return Promise.all([u,u.json()])}).then(function(u){var h=u[0],_=u[1],b=_.info.title,D=s.default(_,l);return Promise.resolve({api:new S.Api(l,{title:b,resources:D}),response:_,status:h.status})},function(u){var h=u[0],_=u[1];return Promise.reject({api:new S.Api(l,{resources:[]}),response:_,status:h.status})})}},14985:(T,A)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.assignSealed=void 0,A.assignSealed=function(y,S){Object.keys(S).forEach(function(s){Object.defineProperty(y,s,{writable:!0,enumerable:!0,configurable:!1,value:S[s]})})}},37906:(T,A)=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.getResources=void 0,A.getResources=function(y){var S=[];return Object.keys(y).forEach(function(s){s.includes("/{id}")||S.find(function(o){return o.startsWith("/"+s.split("/")[1])})||S.push(s)}),S}},56675:T=>{!function(){"use strict";T.exports=function(m){return(m instanceof Buffer?m:Buffer.from(m.toString(),"binary")).toString("base64")}}()},29448:(T,A,m)=>{"use strict";var y=m(93602),S=m(32321),s=S(y("String.prototype.indexOf"));T.exports=function(l,u){var h=y(l,!!u);return"function"==typeof h&&s(l,".prototype.")>-1?S(h):h}},32321:(T,A,m)=>{"use strict";var y=m(21857),S=m(93602),s=S("%Function.prototype.apply%"),o=S("%Function.prototype.call%"),l=S("%Reflect.apply%",!0)||y.call(o,s),u=S("%Object.getOwnPropertyDescriptor%",!0),h=S("%Object.defineProperty%",!0),_=S("%Math.max%");if(h)try{h({},"a",{value:1})}catch(D){h=null}T.exports=function(x){var G=l(y,o,arguments);if(u&&h){var j=u(G,"length");j.configurable&&h(G,"length",{value:1+_(0,x.length-(arguments.length-1))})}return G};var b=function(){return l(y,s,arguments)};h?h(T.exports,"apply",{value:b}):T.exports.apply=b},23813:(T,A,m)=>{m(62009),m(46601);var y=m(83271);T.exports=y.Array.from},89740:(T,A,m)=>{m(67011);var y=m(83271);T.exports=y.Array.isArray},53247:(T,A,m)=>{m(94570);var y=m(2159);T.exports=y("Array").concat},34014:(T,A,m)=>{m(64741),m(97045);var y=m(2159);T.exports=y("Array").entries},80228:(T,A,m)=>{m(76613);var y=m(2159);T.exports=y("Array").filter},92606:(T,A,m)=>{m(15963);var y=m(2159);T.exports=y("Array").find},47957:(T,A,m)=>{m(28436);var y=m(2159);T.exports=y("Array").forEach},75532:(T,A,m)=>{m(82680);var y=m(2159);T.exports=y("Array").includes},18329:(T,A,m)=>{m(73713);var y=m(2159);T.exports=y("Array").indexOf},59157:(T,A,m)=>{m(48303);var y=m(2159);T.exports=y("Array").map},78928:(T,A,m)=>{m(96682);var y=m(2159);T.exports=y("Array").slice},60660:(T,A,m)=>{m(92241);var y=m(2159);T.exports=y("Array").splice},48873:(T,A,m)=>{m(64741),m(62009);var y=m(62439);T.exports=y},233:(T,A,m)=>{var y=m(28833),S=m(53247),s=Array.prototype;T.exports=function(o){var l=o.concat;return o===s||y(s,o)&&l===s.concat?S:l}},32263:(T,A,m)=>{var y=m(28833),S=m(80228),s=Array.prototype;T.exports=function(o){var l=o.filter;return o===s||y(s,o)&&l===s.filter?S:l}},81754:(T,A,m)=>{var y=m(28833),S=m(92606),s=Array.prototype;T.exports=function(o){var l=o.find;return o===s||y(s,o)&&l===s.find?S:l}},46397:(T,A,m)=>{var y=m(28833),S=m(75532),s=m(65106),o=Array.prototype,l=String.prototype;T.exports=function(u){var h=u.includes;return u===o||y(o,u)&&h===o.includes?S:"string"==typeof u||u===l||y(l,u)&&h===l.includes?s:h}},88699:(T,A,m)=>{var y=m(28833),S=m(18329),s=Array.prototype;T.exports=function(o){var l=o.indexOf;return o===s||y(s,o)&&l===s.indexOf?S:l}},24454:(T,A,m)=>{var y=m(28833),S=m(59157),s=Array.prototype;T.exports=function(o){var l=o.map;return o===s||y(s,o)&&l===s.map?S:l}},18422:(T,A,m)=>{var y=m(28833),S=m(78928),s=Array.prototype;T.exports=function(o){var l=o.slice;return o===s||y(s,o)&&l===s.slice?S:l}},13807:(T,A,m)=>{var y=m(28833),S=m(60660),s=Array.prototype;T.exports=function(o){var l=o.splice;return o===s||y(s,o)&&l===s.splice?S:l}},13194:(T,A,m)=>{var y=m(28833),S=m(80083),s=String.prototype;T.exports=function(o){var l=o.startsWith;return"string"==typeof o||o===s||y(s,o)&&l===s.startsWith?S:l}},20573:(T,A,m)=>{m(62260);var y=m(83271),S=m(80626);y.JSON||(y.JSON={stringify:JSON.stringify}),T.exports=function(o,l,u){return S(y.JSON.stringify,null,arguments)}},49483:(T,A,m)=>{m(91487);var y=m(83271);T.exports=y.Object.assign},12171:(T,A,m)=>{m(40020);var S=m(83271).Object,s=T.exports=function(l,u){return S.defineProperties(l,u)};S.defineProperties.sham&&(s.sham=!0)},39469:(T,A,m)=>{m(55523);var S=m(83271).Object,s=T.exports=function(l,u,h){return S.defineProperty(l,u,h)};S.defineProperty.sham&&(s.sham=!0)},24911:(T,A,m)=>{m(67777);var y=m(83271);T.exports=y.Object.entries},942:(T,A,m)=>{m(32696);var S=m(83271).Object,s=T.exports=function(l,u){return S.getOwnPropertyDescriptor(l,u)};S.getOwnPropertyDescriptor.sham&&(s.sham=!0)},46592:(T,A,m)=>{m(36714);var y=m(83271);T.exports=y.Object.getOwnPropertyDescriptors},51594:(T,A,m)=>{m(33353);var y=m(83271);T.exports=y.Object.getOwnPropertySymbols},87079:(T,A,m)=>{m(89405);var y=m(83271);T.exports=y.Object.keys},42654:(T,A,m)=>{m(52935),m(64741),m(97045),m(12545),m(75077),m(83218),m(45895),m(62009);var y=m(83271);T.exports=y.Promise},65106:(T,A,m)=>{m(96595);var y=m(2159);T.exports=y("String").includes},80083:(T,A,m)=>{m(11322);var y=m(2159);T.exports=y("String").startsWith},59366:(T,A,m)=>{m(94570),m(97045),m(33353),m(32159),m(72450),m(43071),m(34025),m(19155),m(64485),m(16576),m(42053),m(96668),m(54714),m(20437),m(11979),m(78559),m(59450),m(10157),m(30238),m(22428);var y=m(83271);T.exports=y.Symbol},48926:(T,A,m)=>{m(64741),m(97045),m(62009),m(19155);var y=m(42572);T.exports=y.f("iterator")},1796:(T,A,m)=>{m(64741),m(97045),m(82695);var y=m(83271);T.exports=y.WeakMap},96883:(T,A,m)=>{var y=m(96353);T.exports=y},21244:(T,A,m)=>{var y=m(18830);T.exports=y},81548:(T,A,m)=>{var y=m(92578);T.exports=y},30206:(T,A,m)=>{var y=m(26271);T.exports=y},73915:(T,A,m)=>{var y=m(6506);T.exports=y},91391:(T,A,m)=>{var y=m(28532);T.exports=y},16557:(T,A,m)=>{var y=m(34123);T.exports=y},11944:(T,A,m)=>{var y=m(62217);T.exports=y},63780:(T,A,m)=>{var y=m(14893);T.exports=y},65332:(T,A,m)=>{var y=m(52572);T.exports=y},66203:(T,A,m)=>{var y=m(17608);T.exports=y},98836:(T,A,m)=>{var y=m(27567);T.exports=y},89857:(T,A,m)=>{var y=m(158);T.exports=y},42658:(T,A,m)=>{var y=m(27620);m(62373),m(18168),m(73944),m(25831),T.exports=y},93585:(T,A,m)=>{var y=m(75743);m(42673),m(34286),m(73695),m(13990),m(69181),m(11686),m(84430),T.exports=y},9207:(T,A,m)=>{var y=m(40359);T.exports=y},98204:(T,A,m)=>{var y=m(37516),S=m(91699),s=m(42349),o=y.TypeError;T.exports=function(l){if(S(l))return l;throw o(s(l)+" is not a function")}},39660:(T,A,m)=>{var y=m(37516),S=m(36025),s=m(42349),o=y.TypeError;T.exports=function(l){if(S(l))return l;throw o(s(l)+" is not a constructor")}},82361:(T,A,m)=>{var y=m(37516),S=m(91699),s=y.String,o=y.TypeError;T.exports=function(l){if("object"==typeof l||S(l))return l;throw o("Can't set "+s(l)+" as a prototype")}},51802:T=>{T.exports=function(){}},74528:(T,A,m)=>{var y=m(37516),S=m(28833),s=y.TypeError;T.exports=function(o,l){if(S(l,o))return o;throw s("Incorrect invocation")}},22696:(T,A,m)=>{var y=m(37516),S=m(883),s=y.String,o=y.TypeError;T.exports=function(l){if(S(l))return l;throw o(s(l)+" is not an object")}},70830:(T,A,m)=>{var y=m(20065);T.exports=y(function(){if("function"==typeof ArrayBuffer){var S=new ArrayBuffer(8);Object.isExtensible(S)&&Object.defineProperty(S,"a",{value:8})}})},30247:(T,A,m)=>{"use strict";var y=m(69720).forEach,s=m(40386)("forEach");T.exports=s?[].forEach:function(l){return y(this,l,arguments.length>1?arguments[1]:void 0)}},58365:(T,A,m)=>{"use strict";var y=m(37516),S=m(88509),s=m(13868),o=m(23349),l=m(72178),u=m(60692),h=m(36025),_=m(1435),b=m(763),D=m(13020),x=m(62439),G=y.Array;T.exports=function(F){var q=o(F),Q=h(this),Y=arguments.length,ae=Y>1?arguments[1]:void 0,ie=void 0!==ae;ie&&(ae=S(ae,Y>2?arguments[2]:void 0));var Z,ee,$,H,de,J,he=x(q),te=0;if(!he||this==G&&u(he))for(Z=_(q),ee=Q?new this(Z):G(Z);Z>te;te++)J=ie?ae(q[te],te):q[te],b(ee,te,J);else for(de=(H=D(q,he)).next,ee=Q?new this:[];!($=s(de,H)).done;te++)J=ie?l(H,ae,[$.value,te],!0):$.value,b(ee,te,J);return ee.length=te,ee}},591:(T,A,m)=>{var y=m(75880),S=m(54346),s=m(1435),o=function(l){return function(u,h,_){var G,b=y(u),D=s(b),x=S(_,D);if(l&&h!=h){for(;D>x;)if((G=b[x++])!=G)return!0}else for(;D>x;x++)if((l||x in b)&&b[x]===h)return l||x||0;return!l&&-1}};T.exports={includes:o(!0),indexOf:o(!1)}},69720:(T,A,m)=>{var y=m(88509),S=m(45972),s=m(41738),o=m(23349),l=m(1435),u=m(94947),h=S([].push),_=function(b){var D=1==b,x=2==b,G=3==b,j=4==b,F=6==b,q=7==b,Q=5==b||F;return function(Y,ae,ie,he){for(var B,re,te=o(Y),Z=s(te),ee=y(ae,ie),$=l(Z),H=0,de=he||u,J=D?de(Y,$):x||q?de(Y,0):void 0;$>H;H++)if((Q||H in Z)&&(re=ee(B=Z[H],H,te),b))if(D)J[H]=re;else if(re)switch(b){case 3:return!0;case 5:return B;case 6:return H;case 2:h(J,B)}else switch(b){case 4:return!1;case 7:h(J,B)}return F?-1:G||j?j:J}};T.exports={forEach:_(0),map:_(1),filter:_(2),some:_(3),every:_(4),find:_(5),findIndex:_(6),filterReject:_(7)}},64630:(T,A,m)=>{var y=m(20065),S=m(63211),s=m(93687),o=S("species");T.exports=function(l){return s>=51||!y(function(){var u=[];return(u.constructor={})[o]=function(){return{foo:1}},1!==u[l](Boolean).foo})}},40386:(T,A,m)=>{"use strict";var y=m(20065);T.exports=function(S,s){var o=[][S];return!!o&&y(function(){o.call(null,s||function(){throw 1},1)})}},13053:(T,A,m)=>{var y=m(45972);T.exports=y([].slice)},95264:(T,A,m)=>{var y=m(13053),S=Math.floor,s=function(u,h){var _=u.length,b=S(_/2);return _<8?o(u,h):l(u,s(y(u,0,b),h),s(y(u,b),h),h)},o=function(u,h){for(var D,x,_=u.length,b=1;b<_;){for(x=b,D=u[b];x&&h(u[x-1],D)>0;)u[x]=u[--x];x!==b++&&(u[x]=D)}return u},l=function(u,h,_,b){for(var D=h.length,x=_.length,G=0,j=0;G<D||j<x;)u[G+j]=G<D&&j<x?b(h[G],_[j])<=0?h[G++]:_[j++]:G<D?h[G++]:_[j++];return u};T.exports=s},61397:(T,A,m)=>{var y=m(37516),S=m(51556),s=m(36025),o=m(883),u=m(63211)("species"),h=y.Array;T.exports=function(_){var b;return S(_)&&(s(b=_.constructor)&&(b===h||S(b.prototype))||o(b)&&null===(b=b[u]))&&(b=void 0),void 0===b?h:b}},94947:(T,A,m)=>{var y=m(61397);T.exports=function(S,s){return new(y(S))(0===s?0:s)}},72178:(T,A,m)=>{var y=m(22696),S=m(29475);T.exports=function(s,o,l,u){try{return u?o(y(l)[0],l[1]):o(l)}catch(h){S(s,"throw",h)}}},78442:(T,A,m)=>{var S=m(63211)("iterator"),s=!1;try{var o=0,l={next:function(){return{done:!!o++}},return:function(){s=!0}};l[S]=function(){return this},Array.from(l,function(){throw 2})}catch(u){}T.exports=function(u,h){if(!h&&!s)return!1;var _=!1;try{var b={};b[S]=function(){return{next:function(){return{done:_=!0}}}},u(b)}catch(D){}return _}},35735:(T,A,m)=>{var y=m(45972),S=y({}.toString),s=y("".slice);T.exports=function(o){return s(S(o),8,-1)}},98330:(T,A,m)=>{var y=m(37516),S=m(89834),s=m(91699),o=m(35735),u=m(63211)("toStringTag"),h=y.Object,_="Arguments"==o(function(){return arguments}());T.exports=S?o:function(D){var x,G,j;return void 0===D?"Undefined":null===D?"Null":"string"==typeof(G=function(D,x){try{return D[x]}catch(G){}}(x=h(D),u))?G:_?o(x):"Object"==(j=o(x))&&s(x.callee)?"Arguments":j}},67232:(T,A,m)=>{var y=m(45972),S=m(13053),s=y("".replace),o=y("".split),l=y([].join),u=String(Error("zxcasd").stack),h=/\n\s*at [^:]*:[^\n]*/,_=h.test(u),b=/@[^\n]*\n/.test(u)&&!/zxcasd/.test(u);T.exports=function(D,x){if("string"!=typeof D)return D;if(_)for(;x--;)D=s(D,h,"");else if(b)return l(S(o(D,"\n"),x),"\n");return D}},39754:(T,A,m)=>{"use strict";var y=m(45972),S=m(22239),s=m(48016).getWeakData,o=m(22696),l=m(883),u=m(74528),h=m(30772),_=m(69720),b=m(7723),D=m(90149),x=D.set,G=D.getterFor,j=_.find,F=_.findIndex,q=y([].splice),Q=0,Y=function(he){return he.frozen||(he.frozen=new ae)},ae=function(){this.entries=[]},ie=function(he,te){return j(he.entries,function(Z){return Z[0]===te})};ae.prototype={get:function(he){var te=ie(this,he);if(te)return te[1]},has:function(he){return!!ie(this,he)},set:function(he,te){var Z=ie(this,he);Z?Z[1]=te:this.entries.push([he,te])},delete:function(he){var te=F(this.entries,function(Z){return Z[0]===he});return~te&&q(this.entries,te,1),!!~te}},T.exports={getConstructor:function(he,te,Z,ee){var $=he(function(B,re){u(B,H),x(B,{type:te,id:Q++,frozen:void 0}),null!=re&&h(re,B[ee],{that:B,AS_ENTRIES:Z})}),H=$.prototype,de=G(te),J=function(B,re,ce){var Ee=de(B),pe=s(o(re),!0);return!0===pe?Y(Ee).set(re,ce):pe[Ee.id]=ce,B};return S(H,{delete:function(B){var re=de(this);if(!l(B))return!1;var ce=s(B);return!0===ce?Y(re).delete(B):ce&&b(ce,re.id)&&delete ce[re.id]},has:function(re){var ce=de(this);if(!l(re))return!1;var Ee=s(re);return!0===Ee?Y(ce).has(re):Ee&&b(Ee,ce.id)}}),S(H,Z?{get:function(re){var ce=de(this);if(l(re)){var Ee=s(re);return!0===Ee?Y(ce).get(re):Ee?Ee[ce.id]:void 0}},set:function(re,ce){return J(this,re,ce)}}:{add:function(re){return J(this,re,!0)}}),$}}},7448:(T,A,m)=>{"use strict";var y=m(99253),S=m(37516),s=m(48016),o=m(20065),l=m(6103),u=m(30772),h=m(74528),_=m(91699),b=m(883),D=m(65702),x=m(70762).f,G=m(69720).forEach,j=m(61385),F=m(90149),q=F.set,Q=F.getterFor;T.exports=function(Y,ae,ie){var de,he=-1!==Y.indexOf("Map"),te=-1!==Y.indexOf("Weak"),Z=he?"set":"add",ee=S[Y],$=ee&&ee.prototype,H={};if(j&&_(ee)&&(te||$.forEach&&!o(function(){(new ee).entries().next()}))){var J=(de=ae(function(re,ce){q(h(re,J),{type:Y,collection:new ee}),null!=ce&&u(ce,re[Z],{that:re,AS_ENTRIES:he})})).prototype,B=Q(Y);G(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(re){var ce="add"==re||"set"==re;re in $&&(!te||"clear"!=re)&&l(J,re,function(Ee,pe){var ye=B(this).collection;if(!ce&&te&&!b(Ee))return"get"==re&&void 0;var Pe=ye[re](0===Ee?0:Ee,pe);return ce?this:Pe})}),te||x(J,"size",{configurable:!0,get:function(){return B(this).collection.size}})}else de=ie.getConstructor(ae,Y,he,Z),s.enable();return D(de,Y,!1,!0),H[Y]=de,y({global:!0,forced:!0},H),te||ie.setStrong(de,Y,he),de}},64325:(T,A,m)=>{var y=m(7723),S=m(8452),s=m(59819),o=m(70762);T.exports=function(l,u){for(var h=S(u),_=o.f,b=s.f,D=0;D<h.length;D++){var x=h[D];y(l,x)||_(l,x,b(u,x))}}},23655:(T,A,m)=>{var S=m(63211)("match");T.exports=function(s){var o=/./;try{"/./"[s](o)}catch(l){try{return o[S]=!1,"/./"[s](o)}catch(u){}}return!1}},719:(T,A,m)=>{var y=m(20065);T.exports=!y(function(){function S(){}return S.prototype.constructor=null,Object.getPrototypeOf(new S)!==S.prototype})},59571:(T,A,m)=>{"use strict";var y=m(61056).IteratorPrototype,S=m(73821),s=m(42856),o=m(65702),l=m(48626),u=function(){return this};T.exports=function(h,_,b){var D=_+" Iterator";return h.prototype=S(y,{next:s(1,b)}),o(h,D,!1,!0),l[D]=u,h}},6103:(T,A,m)=>{var y=m(61385),S=m(70762),s=m(42856);T.exports=y?function(o,l,u){return S.f(o,l,s(1,u))}:function(o,l,u){return o[l]=u,o}},42856:T=>{T.exports=function(A,m){return{enumerable:!(1&A),configurable:!(2&A),writable:!(4&A),value:m}}},763:(T,A,m)=>{"use strict";var y=m(54053),S=m(70762),s=m(42856);T.exports=function(o,l,u){var h=y(l);h in o?S.f(o,h,s(0,u)):o[h]=u}},68797:(T,A,m)=>{"use strict";var y=m(99253),S=m(13868),s=m(27316),o=m(91261),l=m(91699),u=m(59571),h=m(26142),_=m(74494),b=m(65702),D=m(6103),x=m(46573),G=m(63211),j=m(48626),F=m(61056),q=o.PROPER,Q=o.CONFIGURABLE,Y=F.IteratorPrototype,ae=F.BUGGY_SAFARI_ITERATORS,ie=G("iterator"),te="values",Z="entries",ee=function(){return this};T.exports=function($,H,de,J,B,re,ce){u(de,H,J);var Ye,st,yt,Ee=function(Ke){if(Ke===B&&Me)return Me;if(!ae&&Ke in Pe)return Pe[Ke];switch(Ke){case"keys":case te:case Z:return function(){return new de(this,Ke)}}return function(){return new de(this)}},pe=H+" Iterator",ye=!1,Pe=$.prototype,Ue=Pe[ie]||Pe["@@iterator"]||B&&Pe[B],Me=!ae&&Ue||Ee(B),He="Array"==H&&Pe.entries||Ue;if(He&&(Ye=h(He.call(new $)))!==Object.prototype&&Ye.next&&(!s&&h(Ye)!==Y&&(_?_(Ye,Y):l(Ye[ie])||x(Ye,ie,ee)),b(Ye,pe,!0,!0),s&&(j[pe]=ee)),q&&B==te&&Ue&&Ue.name!==te&&(!s&&Q?D(Pe,"name",te):(ye=!0,Me=function(){return S(Ue,this)})),B)if(st={values:Ee(te),keys:re?Me:Ee("keys"),entries:Ee(Z)},ce)for(yt in st)(ae||ye||!(yt in Pe))&&x(Pe,yt,st[yt]);else y({target:H,proto:!0,forced:ae||ye},st);return(!s||ce)&&Pe[ie]!==Me&&x(Pe,ie,Me,{name:B}),j[H]=Me,st}},8254:(T,A,m)=>{var y=m(83271),S=m(7723),s=m(42572),o=m(70762).f;T.exports=function(l){var u=y.Symbol||(y.Symbol={});S(u,l)||o(u,l,{value:s.f(l)})}},61385:(T,A,m)=>{var y=m(20065);T.exports=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},42304:(T,A,m)=>{var y=m(37516),S=m(883),s=y.document,o=S(s)&&S(s.createElement);T.exports=function(l){return o?s.createElement(l):{}}},70808:T=>{T.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},33040:T=>{T.exports="object"==typeof window},27129:(T,A,m)=>{var y=m(61509),S=m(37516);T.exports=/ipad|iphone|ipod/i.test(y)&&void 0!==S.Pebble},50357:(T,A,m)=>{var y=m(61509);T.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(y)},7214:(T,A,m)=>{var y=m(35735),S=m(37516);T.exports="process"==y(S.process)},35773:(T,A,m)=>{var y=m(61509);T.exports=/web0s(?!.*chrome)/i.test(y)},61509:(T,A,m)=>{var y=m(73289);T.exports=y("navigator","userAgent")||""},93687:(T,A,m)=>{var h,_,y=m(37516),S=m(61509),s=y.process,o=y.Deno,l=s&&s.versions||o&&o.version,u=l&&l.v8;u&&(_=(h=u.split("."))[0]>0&&h[0]<4?1:+(h[0]+h[1])),!_&&S&&(!(h=S.match(/Edge\/(\d+)/))||h[1]>=74)&&(h=S.match(/Chrome\/(\d+)/))&&(_=+h[1]),T.exports=_},2159:(T,A,m)=>{var y=m(83271);T.exports=function(S){return y[S+"Prototype"]}},53752:T=>{T.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},54315:(T,A,m)=>{var y=m(20065),S=m(42856);T.exports=!y(function(){var s=Error("a");return!("stack"in s)||(Object.defineProperty(s,"stack",S(1,7)),7!==s.stack)})},99253:(T,A,m)=>{"use strict";var y=m(37516),S=m(80626),s=m(45972),o=m(91699),l=m(59819).f,u=m(808),h=m(83271),_=m(88509),b=m(6103),D=m(7723),x=function(G){var j=function(F,q,Q){if(this instanceof j){switch(arguments.length){case 0:return new G;case 1:return new G(F);case 2:return new G(F,q)}return new G(F,q,Q)}return S(G,this,arguments)};return j.prototype=G.prototype,j};T.exports=function(G,j){var Z,ee,$,H,de,J,B,re,F=G.target,q=G.global,Q=G.stat,Y=G.proto,ae=q?y:Q?y[F]:(y[F]||{}).prototype,ie=q?h:h[F]||b(h,F,{})[F],he=ie.prototype;for($ in j)Z=!u(q?$:F+(Q?".":"#")+$,G.forced)&&ae&&D(ae,$),de=ie[$],Z&&(J=G.noTargetGet?(re=l(ae,$))&&re.value:ae[$]),H=Z&&J?J:j[$],(!Z||typeof de!=typeof H)&&(B=G.bind&&Z?_(H,y):G.wrap&&Z?x(H):Y&&o(H)?s(H):H,(G.sham||H&&H.sham||de&&de.sham)&&b(B,"sham",!0),b(ie,$,B),Y&&(D(h,ee=F+"Prototype")||b(h,ee,{}),b(h[ee],$,H),G.real&&he&&!he[$]&&b(he,$,H)))}},20065:T=>{T.exports=function(A){try{return!!A()}catch(m){return!0}}},4224:(T,A,m)=>{var y=m(20065);T.exports=!y(function(){return Object.isExtensible(Object.preventExtensions({}))})},80626:T=>{var A=Function.prototype,m=A.apply,S=A.call;T.exports="object"==typeof Reflect&&Reflect.apply||(A.bind?S.bind(m):function(){return S.apply(m,arguments)})},88509:(T,A,m)=>{var y=m(45972),S=m(98204),s=y(y.bind);T.exports=function(o,l){return S(o),void 0===l?o:s?s(o,l):function(){return o.apply(l,arguments)}}},13868:T=>{var A=Function.prototype.call;T.exports=A.bind?A.bind(A):function(){return A.apply(A,arguments)}},91261:(T,A,m)=>{var y=m(61385),S=m(7723),s=Function.prototype,o=y&&Object.getOwnPropertyDescriptor,l=S(s,"name"),u=l&&"something"===function(){}.name,h=l&&(!y||y&&o(s,"name").configurable);T.exports={EXISTS:l,PROPER:u,CONFIGURABLE:h}},45972:T=>{var A=Function.prototype,m=A.bind,y=A.call,S=m&&m.bind(y);T.exports=m?function(s){return s&&S(y,s)}:function(s){return s&&function(){return y.apply(s,arguments)}}},73289:(T,A,m)=>{var y=m(83271),S=m(37516),s=m(91699),o=function(l){return s(l)?l:void 0};T.exports=function(l,u){return arguments.length<2?o(y[l])||o(S[l]):y[l]&&y[l][u]||S[l]&&S[l][u]}},62439:(T,A,m)=>{var y=m(98330),S=m(37571),s=m(48626),l=m(63211)("iterator");T.exports=function(u){if(null!=u)return S(u,l)||S(u,"@@iterator")||s[y(u)]}},13020:(T,A,m)=>{var y=m(37516),S=m(13868),s=m(98204),o=m(22696),l=m(42349),u=m(62439),h=y.TypeError;T.exports=function(_,b){var D=arguments.length<2?u(_):b;if(s(D))return o(S(D,_));throw h(l(_)+" is not iterable")}},37571:(T,A,m)=>{var y=m(98204);T.exports=function(S,s){var o=S[s];return null==o?void 0:y(o)}},37516:T=>{var A=function(m){return m&&m.Math==Math&&m};T.exports=A("object"==typeof globalThis&&globalThis)||A("object"==typeof window&&window)||A("object"==typeof self&&self)||A("object"==typeof global&&global)||function(){return this}()||Function("return this")()},7723:(T,A,m)=>{var y=m(45972),S=m(23349),s=y({}.hasOwnProperty);T.exports=Object.hasOwn||function(l,u){return s(S(l),u)}},64842:T=>{T.exports={}},28979:(T,A,m)=>{var y=m(37516);T.exports=function(S,s){var o=y.console;o&&o.error&&(1==arguments.length?o.error(S):o.error(S,s))}},21060:(T,A,m)=>{var y=m(73289);T.exports=y("document","documentElement")},86957:(T,A,m)=>{var y=m(61385),S=m(20065),s=m(42304);T.exports=!y&&!S(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},41738:(T,A,m)=>{var y=m(37516),S=m(45972),s=m(20065),o=m(35735),l=y.Object,u=S("".split);T.exports=s(function(){return!l("z").propertyIsEnumerable(0)})?function(h){return"String"==o(h)?u(h,""):l(h)}:l},57761:(T,A,m)=>{var y=m(45972),S=m(91699),s=m(53575),o=y(Function.toString);S(s.inspectSource)||(s.inspectSource=function(l){return o(l)}),T.exports=s.inspectSource},84992:(T,A,m)=>{var y=m(883),S=m(6103);T.exports=function(s,o){y(o)&&"cause"in o&&S(s,"cause",o.cause)}},48016:(T,A,m)=>{var y=m(99253),S=m(45972),s=m(64842),o=m(883),l=m(7723),u=m(70762).f,h=m(92081),_=m(69820),b=m(2577),D=m(11789),x=m(4224),G=!1,j=D("meta"),F=0,q=function(te){u(te,j,{value:{objectID:"O"+F++,weakData:{}}})},he=T.exports={enable:function(){he.enable=function(){},G=!0;var te=h.f,Z=S([].splice),ee={};ee[j]=1,te(ee).length&&(h.f=function($){for(var H=te($),de=0,J=H.length;de<J;de++)if(H[de]===j){Z(H,de,1);break}return H},y({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:_.f}))},fastKey:function(te,Z){if(!o(te))return"symbol"==typeof te?te:("string"==typeof te?"S":"P")+te;if(!l(te,j)){if(!b(te))return"F";if(!Z)return"E";q(te)}return te[j].objectID},getWeakData:function(te,Z){if(!l(te,j)){if(!b(te))return!0;if(!Z)return!1;q(te)}return te[j].weakData},onFreeze:function(te){return x&&G&&b(te)&&!l(te,j)&&q(te),te}};s[j]=!0},90149:(T,A,m)=>{var j,F,q,y=m(74381),S=m(37516),s=m(45972),o=m(883),l=m(6103),u=m(7723),h=m(53575),_=m(26103),b=m(64842),D="Object already initialized",x=S.TypeError;if(y||h.state){var ae=h.state||(h.state=new(0,S.WeakMap)),ie=s(ae.get),he=s(ae.has),te=s(ae.set);j=function(ee,$){if(he(ae,ee))throw new x(D);return $.facade=ee,te(ae,ee,$),$},F=function(ee){return ie(ae,ee)||{}},q=function(ee){return he(ae,ee)}}else{var Z=_("state");b[Z]=!0,j=function(ee,$){if(u(ee,Z))throw new x(D);return $.facade=ee,l(ee,Z,$),$},F=function(ee){return u(ee,Z)?ee[Z]:{}},q=function(ee){return u(ee,Z)}}T.exports={set:j,get:F,has:q,enforce:function(ee){return q(ee)?F(ee):j(ee,{})},getterFor:function(ee){return function($){var H;if(!o($)||(H=F($)).type!==ee)throw x("Incompatible receiver, "+ee+" required");return H}}}},60692:(T,A,m)=>{var y=m(63211),S=m(48626),s=y("iterator"),o=Array.prototype;T.exports=function(l){return void 0!==l&&(S.Array===l||o[s]===l)}},51556:(T,A,m)=>{var y=m(35735);T.exports=Array.isArray||function(s){return"Array"==y(s)}},91699:T=>{T.exports=function(A){return"function"==typeof A}},36025:(T,A,m)=>{var y=m(45972),S=m(20065),s=m(91699),o=m(98330),l=m(73289),u=m(57761),h=function(){},_=[],b=l("Reflect","construct"),D=/^\s*(?:class|function)\b/,x=y(D.exec),G=!D.exec(h),j=function(q){if(!s(q))return!1;try{return b(h,_,q),!0}catch(Q){return!1}};T.exports=!b||S(function(){var q;return j(j.call)||!j(Object)||!j(function(){q=!0})||q})?function(q){if(!s(q))return!1;switch(o(q)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return G||!!x(D,u(q))}:j},808:(T,A,m)=>{var y=m(20065),S=m(91699),s=/#|\.prototype\./,o=function(b,D){var x=u[l(b)];return x==_||x!=h&&(S(D)?y(D):!!D)},l=o.normalize=function(b){return String(b).replace(s,".").toLowerCase()},u=o.data={},h=o.NATIVE="N",_=o.POLYFILL="P";T.exports=o},883:(T,A,m)=>{var y=m(91699);T.exports=function(S){return"object"==typeof S?null!==S:y(S)}},27316:T=>{T.exports=!0},89250:(T,A,m)=>{var y=m(883),S=m(35735),o=m(63211)("match");T.exports=function(l){var u;return y(l)&&(void 0!==(u=l[o])?!!u:"RegExp"==S(l))}},17397:(T,A,m)=>{var y=m(37516),S=m(73289),s=m(91699),o=m(28833),l=m(4286),u=y.Object;T.exports=l?function(h){return"symbol"==typeof h}:function(h){var _=S("Symbol");return s(_)&&o(_.prototype,u(h))}},30772:(T,A,m)=>{var y=m(37516),S=m(88509),s=m(13868),o=m(22696),l=m(42349),u=m(60692),h=m(1435),_=m(28833),b=m(13020),D=m(62439),x=m(29475),G=y.TypeError,j=function(q,Q){this.stopped=q,this.result=Q},F=j.prototype;T.exports=function(q,Q,Y){var ee,$,H,de,J,B,re,ie=!(!Y||!Y.AS_ENTRIES),he=!(!Y||!Y.IS_ITERATOR),te=!(!Y||!Y.INTERRUPTED),Z=S(Q,Y&&Y.that),ce=function(pe){return ee&&x(ee,"normal",pe),new j(!0,pe)},Ee=function(pe){return ie?(o(pe),te?Z(pe[0],pe[1],ce):Z(pe[0],pe[1])):te?Z(pe,ce):Z(pe)};if(he)ee=q;else{if(!($=D(q)))throw G(l(q)+" is not iterable");if(u($)){for(H=0,de=h(q);de>H;H++)if((J=Ee(q[H]))&&_(F,J))return J;return new j(!1)}ee=b(q,$)}for(B=ee.next;!(re=s(B,ee)).done;){try{J=Ee(re.value)}catch(pe){x(ee,"throw",pe)}if("object"==typeof J&&J&&_(F,J))return J}return new j(!1)}},29475:(T,A,m)=>{var y=m(13868),S=m(22696),s=m(37571);T.exports=function(o,l,u){var h,_;S(o);try{if(!(h=s(o,"return"))){if("throw"===l)throw u;return u}h=y(h,o)}catch(b){_=!0,h=b}if("throw"===l)throw u;if(_)throw h;return S(h),u}},61056:(T,A,m)=>{"use strict";var D,x,G,y=m(20065),S=m(91699),s=m(73821),o=m(26142),l=m(46573),u=m(63211),h=m(27316),_=u("iterator"),b=!1;[].keys&&("next"in(G=[].keys())?(x=o(o(G)))!==Object.prototype&&(D=x):b=!0),null==D||y(function(){var F={};return D[_].call(F)!==F})?D={}:h&&(D=s(D)),S(D[_])||l(D,_,function(){return this}),T.exports={IteratorPrototype:D,BUGGY_SAFARI_ITERATORS:b}},48626:T=>{T.exports={}},1435:(T,A,m)=>{var y=m(37159);T.exports=function(S){return y(S.length)}},6120:(T,A,m)=>{var q,Q,Y,ae,ie,he,te,Z,y=m(37516),S=m(88509),s=m(59819).f,o=m(15691).set,l=m(50357),u=m(27129),h=m(35773),_=m(7214),b=y.MutationObserver||y.WebKitMutationObserver,D=y.document,x=y.process,G=y.Promise,j=s(y,"queueMicrotask"),F=j&&j.value;F||(q=function(){var ee,$;for(_&&(ee=x.domain)&&ee.exit();Q;){$=Q.fn,Q=Q.next;try{$()}catch(H){throw Q?ae():Y=void 0,H}}Y=void 0,ee&&ee.enter()},l||_||h||!b||!D?!u&&G&&G.resolve?((te=G.resolve(void 0)).constructor=G,Z=S(te.then,te),ae=function(){Z(q)}):_?ae=function(){x.nextTick(q)}:(o=S(o,y),ae=function(){o(q)}):(ie=!0,he=D.createTextNode(""),new b(q).observe(he,{characterData:!0}),ae=function(){he.data=ie=!ie})),T.exports=F||function(ee){var $={fn:ee,next:void 0};Y&&(Y.next=$),Q||(Q=$,ae()),Y=$}},99978:(T,A,m)=>{var y=m(37516);T.exports=y.Promise},74267:(T,A,m)=>{var y=m(93687),S=m(20065);T.exports=!!Object.getOwnPropertySymbols&&!S(function(){var s=Symbol();return!String(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&y&&y<41})},71665:(T,A,m)=>{var y=m(20065),S=m(63211),s=m(27316),o=S("iterator");T.exports=!y(function(){var l=new URL("b?a=1&b=2&c=3","http://a"),u=l.searchParams,h="";return l.pathname="c%20d",u.forEach(function(_,b){u.delete("b"),h+=b+_}),s&&!l.toJSON||!u.sort||"http://a/c%20d?a=1&c=3"!==l.href||"3"!==u.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!u[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==h||"x"!==new URL("http://x",void 0).host})},74381:(T,A,m)=>{var y=m(37516),S=m(91699),s=m(57761),o=y.WeakMap;T.exports=S(o)&&/native code/.test(s(o))},2637:(T,A,m)=>{"use strict";var y=m(98204),S=function(s){var o,l;this.promise=new s(function(u,h){if(void 0!==o||void 0!==l)throw TypeError("Bad Promise constructor");o=u,l=h}),this.resolve=y(o),this.reject=y(l)};T.exports.f=function(s){return new S(s)}},19105:(T,A,m)=>{var y=m(37299);T.exports=function(S,s){return void 0===S?arguments.length<2?"":s:y(S)}},9974:(T,A,m)=>{var y=m(37516),S=m(89250),s=y.TypeError;T.exports=function(o){if(S(o))throw s("The method doesn't accept regular expressions");return o}},36477:(T,A,m)=>{"use strict";var y=m(61385),S=m(45972),s=m(13868),o=m(20065),l=m(47836),u=m(62222),h=m(52725),_=m(23349),b=m(41738),D=Object.assign,x=Object.defineProperty,G=S([].concat);T.exports=!D||o(function(){if(y&&1!==D({b:1},D(x({},"a",{enumerable:!0,get:function(){x(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var j={},F={},q=Symbol(),Q="abcdefghijklmnopqrst";return j[q]=7,Q.split("").forEach(function(Y){F[Y]=Y}),7!=D({},j)[q]||l(D({},F)).join("")!=Q})?function(F,q){for(var Q=_(F),Y=arguments.length,ae=1,ie=u.f,he=h.f;Y>ae;)for(var H,te=b(arguments[ae++]),Z=ie?G(l(te),ie(te)):l(te),ee=Z.length,$=0;ee>$;)H=Z[$++],(!y||s(he,te,H))&&(Q[H]=te[H]);return Q}:D},73821:(T,A,m)=>{var Y,y=m(22696),S=m(25526),s=m(53752),o=m(64842),l=m(21060),u=m(42304),h=m(26103),D="prototype",x="script",G=h("IE_PROTO"),j=function(){},F=function(ie){return"<"+x+">"+ie+"</"+x+">"},q=function(ie){ie.write(F("")),ie.close();var he=ie.parentWindow.Object;return ie=null,he},ae=function(){try{Y=new ActiveXObject("htmlfile")}catch(he){}ae="undefined"!=typeof document?document.domain&&Y?q(Y):function(){var te,ie=u("iframe");return ie.style.display="none",l.appendChild(ie),ie.src=String("javascript:"),(te=ie.contentWindow.document).open(),te.write(F("document.F=Object")),te.close(),te.F}():q(Y);for(var ie=s.length;ie--;)delete ae[D][s[ie]];return ae()};o[G]=!0,T.exports=Object.create||function(he,te){var Z;return null!==he?(j[D]=y(he),Z=new j,j[D]=null,Z[G]=he):Z=ae(),void 0===te?Z:S(Z,te)}},25526:(T,A,m)=>{var y=m(61385),S=m(70762),s=m(22696),o=m(75880),l=m(47836);T.exports=y?Object.defineProperties:function(h,_){s(h);for(var j,b=o(_),D=l(_),x=D.length,G=0;x>G;)S.f(h,j=D[G++],b[j]);return h}},70762:(T,A,m)=>{var y=m(37516),S=m(61385),s=m(86957),o=m(22696),l=m(54053),u=y.TypeError,h=Object.defineProperty;A.f=S?h:function(b,D,x){if(o(b),D=l(D),o(x),s)try{return h(b,D,x)}catch(G){}if("get"in x||"set"in x)throw u("Accessors not supported");return"value"in x&&(b[D]=x.value),b}},59819:(T,A,m)=>{var y=m(61385),S=m(13868),s=m(52725),o=m(42856),l=m(75880),u=m(54053),h=m(7723),_=m(86957),b=Object.getOwnPropertyDescriptor;A.f=y?b:function(x,G){if(x=l(x),G=u(G),_)try{return b(x,G)}catch(j){}if(h(x,G))return o(!S(s.f,x,G),x[G])}},69820:(T,A,m)=>{var y=m(35735),S=m(75880),s=m(92081).f,o=m(13053),l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];T.exports.f=function(_){return l&&"Window"==y(_)?function(h){try{return s(h)}catch(_){return o(l)}}(_):s(S(_))}},92081:(T,A,m)=>{var y=m(66230),s=m(53752).concat("length","prototype");A.f=Object.getOwnPropertyNames||function(l){return y(l,s)}},62222:(T,A)=>{A.f=Object.getOwnPropertySymbols},26142:(T,A,m)=>{var y=m(37516),S=m(7723),s=m(91699),o=m(23349),l=m(26103),u=m(719),h=l("IE_PROTO"),_=y.Object,b=_.prototype;T.exports=u?_.getPrototypeOf:function(D){var x=o(D);if(S(x,h))return x[h];var G=x.constructor;return s(G)&&x instanceof G?G.prototype:x instanceof _?b:null}},2577:(T,A,m)=>{var y=m(20065),S=m(883),s=m(35735),o=m(70830),l=Object.isExtensible,u=y(function(){l(1)});T.exports=u||o?function(_){return!(!S(_)||o&&"ArrayBuffer"==s(_))&&(!l||l(_))}:l},28833:(T,A,m)=>{var y=m(45972);T.exports=y({}.isPrototypeOf)},66230:(T,A,m)=>{var y=m(45972),S=m(7723),s=m(75880),o=m(591).indexOf,l=m(64842),u=y([].push);T.exports=function(h,_){var G,b=s(h),D=0,x=[];for(G in b)!S(l,G)&&S(b,G)&&u(x,G);for(;_.length>D;)S(b,G=_[D++])&&(~o(x,G)||u(x,G));return x}},47836:(T,A,m)=>{var y=m(66230),S=m(53752);T.exports=Object.keys||function(o){return y(o,S)}},52725:(T,A)=>{"use strict";var m={}.propertyIsEnumerable,y=Object.getOwnPropertyDescriptor,S=y&&!m.call({1:2},1);A.f=S?function(o){var l=y(this,o);return!!l&&l.enumerable}:m},74494:(T,A,m)=>{var y=m(45972),S=m(22696),s=m(82361);T.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u,o=!1,l={};try{(u=y(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(l,[]),o=l instanceof Array}catch(h){}return function(_,b){return S(_),s(b),o?u(_,b):_.__proto__=b,_}}():void 0)},37621:(T,A,m)=>{var y=m(61385),S=m(45972),s=m(47836),o=m(75880),u=S(m(52725).f),h=S([].push),_=function(b){return function(D){for(var Q,x=o(D),G=s(x),j=G.length,F=0,q=[];j>F;)Q=G[F++],(!y||u(x,Q))&&h(q,b?[Q,x[Q]]:x[Q]);return q}};T.exports={entries:_(!0),values:_(!1)}},97390:(T,A,m)=>{"use strict";var y=m(89834),S=m(98330);T.exports=y?{}.toString:function(){return"[object "+S(this)+"]"}},53890:(T,A,m)=>{var y=m(37516),S=m(13868),s=m(91699),o=m(883),l=y.TypeError;T.exports=function(u,h){var _,b;if("string"===h&&s(_=u.toString)&&!o(b=S(_,u))||s(_=u.valueOf)&&!o(b=S(_,u))||"string"!==h&&s(_=u.toString)&&!o(b=S(_,u)))return b;throw l("Can't convert object to primitive value")}},8452:(T,A,m)=>{var y=m(73289),S=m(45972),s=m(92081),o=m(62222),l=m(22696),u=S([].concat);T.exports=y("Reflect","ownKeys")||function(_){var b=s.f(l(_)),D=o.f;return D?u(b,D(_)):b}},83271:T=>{T.exports={}},18429:T=>{T.exports=function(A){try{return{error:!1,value:A()}}catch(m){return{error:!0,value:m}}}},33898:(T,A,m)=>{var y=m(22696),S=m(883),s=m(2637);T.exports=function(o,l){if(y(o),S(l)&&l.constructor===o)return l;var u=s.f(o);return(0,u.resolve)(l),u.promise}},22239:(T,A,m)=>{var y=m(46573);T.exports=function(S,s,o){for(var l in s)o&&o.unsafe&&S[l]?S[l]=s[l]:y(S,l,s[l],o);return S}},46573:(T,A,m)=>{var y=m(6103);T.exports=function(S,s,o,l){l&&l.enumerable?S[s]=o:y(S,s,o)}},63805:(T,A,m)=>{var S=m(37516).TypeError;T.exports=function(s){if(null==s)throw S("Can't call method on "+s);return s}},75987:(T,A,m)=>{var y=m(37516),S=Object.defineProperty;T.exports=function(s,o){try{S(y,s,{value:o,configurable:!0,writable:!0})}catch(l){y[s]=o}return o}},31333:(T,A,m)=>{"use strict";var y=m(73289),S=m(70762),s=m(63211),o=m(61385),l=s("species");T.exports=function(u){var h=y(u);o&&h&&!h[l]&&(0,S.f)(h,l,{configurable:!0,get:function(){return this}})}},65702:(T,A,m)=>{var y=m(89834),S=m(70762).f,s=m(6103),o=m(7723),l=m(97390),h=m(63211)("toStringTag");T.exports=function(_,b,D,x){if(_){var G=D?_:_.prototype;o(G,h)||S(G,h,{configurable:!0,value:b}),x&&!y&&s(G,"toString",l)}}},26103:(T,A,m)=>{var y=m(2389),S=m(11789),s=y("keys");T.exports=function(o){return s[o]||(s[o]=S(o))}},53575:(T,A,m)=>{var y=m(37516),S=m(75987),s="__core-js_shared__",o=y[s]||S(s,{});T.exports=o},2389:(T,A,m)=>{var y=m(27316),S=m(53575);(T.exports=function(s,o){return S[s]||(S[s]=void 0!==o?o:{})})("versions",[]).push({version:"3.19.1",mode:y?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},3759:(T,A,m)=>{var y=m(22696),S=m(39660),o=m(63211)("species");T.exports=function(l,u){var _,h=y(l).constructor;return void 0===h||null==(_=y(h)[o])?u:S(_)}},14924:(T,A,m)=>{var y=m(45972),S=m(88582),s=m(37299),o=m(63805),l=y("".charAt),u=y("".charCodeAt),h=y("".slice),_=function(b){return function(D,x){var q,Q,G=s(o(D)),j=S(x),F=G.length;return j<0||j>=F?b?"":void 0:(q=u(G,j))<55296||q>56319||j+1===F||(Q=u(G,j+1))<56320||Q>57343?b?l(G,j):q:b?h(G,j,j+2):Q-56320+(q-55296<<10)+65536}};T.exports={codeAt:_(!1),charAt:_(!0)}},15691:(T,A,m)=>{var Z,ee,$,H,y=m(37516),S=m(80626),s=m(88509),o=m(91699),l=m(7723),u=m(20065),h=m(21060),_=m(13053),b=m(42304),D=m(50357),x=m(7214),G=y.setImmediate,j=y.clearImmediate,F=y.process,q=y.Dispatch,Q=y.Function,Y=y.MessageChannel,ae=y.String,ie=0,he={},te="onreadystatechange";try{Z=y.location}catch(ce){}var de=function(ce){if(l(he,ce)){var Ee=he[ce];delete he[ce],Ee()}},J=function(ce){return function(){de(ce)}},B=function(ce){de(ce.data)},re=function(ce){y.postMessage(ae(ce),Z.protocol+"//"+Z.host)};(!G||!j)&&(G=function(Ee){var pe=_(arguments,1);return he[++ie]=function(){S(o(Ee)?Ee:Q(Ee),void 0,pe)},ee(ie),ie},j=function(Ee){delete he[Ee]},x?ee=function(ce){F.nextTick(J(ce))}:q&&q.now?ee=function(ce){q.now(J(ce))}:Y&&!D?(H=($=new Y).port2,$.port1.onmessage=B,ee=s(H.postMessage,H)):y.addEventListener&&o(y.postMessage)&&!y.importScripts&&Z&&"file:"!==Z.protocol&&!u(re)?(ee=re,y.addEventListener("message",B,!1)):ee=te in b("script")?function(ce){h.appendChild(b("script"))[te]=function(){h.removeChild(this),de(ce)}}:function(ce){setTimeout(J(ce),0)}),T.exports={set:G,clear:j}},54346:(T,A,m)=>{var y=m(88582),S=Math.max,s=Math.min;T.exports=function(o,l){var u=y(o);return u<0?S(u+l,0):s(u,l)}},75880:(T,A,m)=>{var y=m(41738),S=m(63805);T.exports=function(s){return y(S(s))}},88582:T=>{var A=Math.ceil,m=Math.floor;T.exports=function(y){var S=+y;return S!=S||0===S?0:(S>0?m:A)(S)}},37159:(T,A,m)=>{var y=m(88582),S=Math.min;T.exports=function(s){return s>0?S(y(s),9007199254740991):0}},23349:(T,A,m)=>{var y=m(37516),S=m(63805),s=y.Object;T.exports=function(o){return s(S(o))}},54017:(T,A,m)=>{var y=m(37516),S=m(13868),s=m(883),o=m(17397),l=m(37571),u=m(53890),h=m(63211),_=y.TypeError,b=h("toPrimitive");T.exports=function(D,x){if(!s(D)||o(D))return D;var j,G=l(D,b);if(G){if(void 0===x&&(x="default"),j=S(G,D,x),!s(j)||o(j))return j;throw _("Can't convert object to primitive value")}return void 0===x&&(x="number"),u(D,x)}},54053:(T,A,m)=>{var y=m(54017),S=m(17397);T.exports=function(s){var o=y(s,"string");return S(o)?o:o+""}},89834:(T,A,m)=>{var s={};s[m(63211)("toStringTag")]="z",T.exports="[object z]"===String(s)},37299:(T,A,m)=>{var y=m(37516),S=m(98330),s=y.String;T.exports=function(o){if("Symbol"===S(o))throw TypeError("Cannot convert a Symbol value to a string");return s(o)}},42349:(T,A,m)=>{var S=m(37516).String;T.exports=function(s){try{return S(s)}catch(o){return"Object"}}},11789:(T,A,m)=>{var y=m(45972),S=0,s=Math.random(),o=y(1..toString);T.exports=function(l){return"Symbol("+(void 0===l?"":l)+")_"+o(++S+s,36)}},4286:(T,A,m)=>{var y=m(74267);T.exports=y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},42572:(T,A,m)=>{var y=m(63211);A.f=y},63211:(T,A,m)=>{var y=m(37516),S=m(2389),s=m(7723),o=m(11789),l=m(74267),u=m(4286),h=S("wks"),_=y.Symbol,b=_&&_.for,D=u?_:_&&_.withoutSetter||o;T.exports=function(x){if(!s(h,x)||!l&&"string"!=typeof h[x]){var G="Symbol."+x;h[x]=l&&s(_,x)?_[x]:u&&b?b(G):D(G)}return h[x]}},52935:(T,A,m)=>{"use strict";var y=m(99253),S=m(37516),s=m(28833),o=m(26142),l=m(74494),u=m(64325),h=m(73821),_=m(6103),b=m(42856),D=m(67232),x=m(84992),G=m(30772),j=m(19105),F=m(63211),q=m(54315),Q=F("toStringTag"),Y=S.Error,ae=[].push,ie=function(Z,ee){var de,$=arguments.length>2?arguments[2]:void 0,H=s(he,this);l?de=l(new Y(void 0),H?o(this):he):(de=H?this:h(he),_(de,Q,"Error")),_(de,"message",j(ee,"")),q&&_(de,"stack",D(de.stack,1)),x(de,$);var J=[];return G(Z,ae,{that:J}),_(de,"errors",J),de};l?l(ie,Y):u(ie,Y);var he=ie.prototype=h(Y.prototype,{constructor:b(1,ie),message:b(1,""),name:b(1,"AggregateError")});y({global:!0},{AggregateError:ie})},94570:(T,A,m)=>{"use strict";var y=m(99253),S=m(37516),s=m(20065),o=m(51556),l=m(883),u=m(23349),h=m(1435),_=m(763),b=m(94947),D=m(64630),x=m(63211),G=m(93687),j=x("isConcatSpreadable"),F=9007199254740991,q="Maximum allowed index exceeded",Q=S.TypeError,Y=G>=51||!s(function(){var te=[];return te[j]=!1,te.concat()[0]!==te}),ae=D("concat"),ie=function(te){if(!l(te))return!1;var Z=te[j];return void 0!==Z?!!Z:o(te)};y({target:"Array",proto:!0,forced:!Y||!ae},{concat:function(Z){var de,J,B,re,ce,ee=u(this),$=b(ee,0),H=0;for(de=-1,B=arguments.length;de<B;de++)if(ie(ce=-1===de?ee:arguments[de])){if(H+(re=h(ce))>F)throw Q(q);for(J=0;J<re;J++,H++)J in ce&&_($,H,ce[J])}else{if(H>=F)throw Q(q);_($,H++,ce)}return $.length=H,$}})},76613:(T,A,m)=>{"use strict";var y=m(99253),S=m(69720).filter;y({target:"Array",proto:!0,forced:!m(64630)("filter")},{filter:function(u){return S(this,u,arguments.length>1?arguments[1]:void 0)}})},15963:(T,A,m)=>{"use strict";var y=m(99253),S=m(69720).find,s=m(51802),o="find",l=!0;o in[]&&Array(1)[o](function(){l=!1}),y({target:"Array",proto:!0,forced:l},{find:function(h){return S(this,h,arguments.length>1?arguments[1]:void 0)}}),s(o)},28436:(T,A,m)=>{"use strict";var y=m(99253),S=m(30247);y({target:"Array",proto:!0,forced:[].forEach!=S},{forEach:S})},46601:(T,A,m)=>{var y=m(99253),S=m(58365);y({target:"Array",stat:!0,forced:!m(78442)(function(l){Array.from(l)})},{from:S})},82680:(T,A,m)=>{"use strict";var y=m(99253),S=m(591).includes,s=m(51802);y({target:"Array",proto:!0},{includes:function(l){return S(this,l,arguments.length>1?arguments[1]:void 0)}}),s("includes")},73713:(T,A,m)=>{"use strict";var y=m(99253),S=m(45972),s=m(591).indexOf,o=m(40386),l=S([].indexOf),u=!!l&&1/l([1],1,-0)<0,h=o("indexOf");y({target:"Array",proto:!0,forced:u||!h},{indexOf:function(b){var D=arguments.length>1?arguments[1]:void 0;return u?l(this,b,D)||0:s(this,b,D)}})},67011:(T,A,m)=>{m(99253)({target:"Array",stat:!0},{isArray:m(51556)})},64741:(T,A,m)=>{"use strict";var y=m(75880),S=m(51802),s=m(48626),o=m(90149),l=m(68797),u="Array Iterator",h=o.set,_=o.getterFor(u);T.exports=l(Array,"Array",function(b,D){h(this,{type:u,target:y(b),index:0,kind:D})},function(){var b=_(this),D=b.target,x=b.kind,G=b.index++;return!D||G>=D.length?(b.target=void 0,{value:void 0,done:!0}):"keys"==x?{value:G,done:!1}:"values"==x?{value:D[G],done:!1}:{value:[G,D[G]],done:!1}},"values"),s.Arguments=s.Array,S("keys"),S("values"),S("entries")},48303:(T,A,m)=>{"use strict";var y=m(99253),S=m(69720).map;y({target:"Array",proto:!0,forced:!m(64630)("map")},{map:function(u){return S(this,u,arguments.length>1?arguments[1]:void 0)}})},96682:(T,A,m)=>{"use strict";var y=m(99253),S=m(37516),s=m(51556),o=m(36025),l=m(883),u=m(54346),h=m(1435),_=m(75880),b=m(763),D=m(63211),x=m(64630),G=m(13053),j=x("slice"),F=D("species"),q=S.Array,Q=Math.max;y({target:"Array",proto:!0,forced:!j},{slice:function(ae,ie){var $,H,de,he=_(this),te=h(he),Z=u(ae,te),ee=u(void 0===ie?te:ie,te);if(s(he)&&((o($=he.constructor)&&($===q||s($.prototype))||l($)&&null===($=$[F]))&&($=void 0),$===q||void 0===$))return G(he,Z,ee);for(H=new(void 0===$?q:$)(Q(ee-Z,0)),de=0;Z<ee;Z++,de++)Z in he&&b(H,de,he[Z]);return H.length=de,H}})},92241:(T,A,m)=>{"use strict";var y=m(99253),S=m(37516),s=m(54346),o=m(88582),l=m(1435),u=m(23349),h=m(94947),_=m(763),D=m(64630)("splice"),x=S.TypeError,G=Math.max,j=Math.min,F=9007199254740991,q="Maximum allowed length exceeded";y({target:"Array",proto:!0,forced:!D},{splice:function(Y,ae){var ee,$,H,de,J,B,ie=u(this),he=l(ie),te=s(Y,he),Z=arguments.length;if(0===Z?ee=$=0:1===Z?(ee=0,$=he-te):(ee=Z-2,$=j(G(o(ae),0),he-te)),he+ee-$>F)throw x(q);for(H=h(ie,$),de=0;de<$;de++)(J=te+de)in ie&&_(H,de,ie[J]);if(H.length=$,ee<$){for(de=te;de<he-$;de++)B=de+ee,(J=de+$)in ie?ie[B]=ie[J]:delete ie[B];for(de=he;de>he-$+ee;de--)delete ie[de-1]}else if(ee>$)for(de=he-$;de>te;de--)B=de+ee-1,(J=de+$-1)in ie?ie[B]=ie[J]:delete ie[B];for(de=0;de<ee;de++)ie[de+te]=arguments[de+2];return ie.length=he-$+ee,H}})},62260:(T,A,m)=>{var y=m(99253),S=m(37516),s=m(73289),o=m(80626),l=m(45972),u=m(20065),h=S.Array,_=s("JSON","stringify"),b=l(/./.exec),D=l("".charAt),x=l("".charCodeAt),G=l("".replace),j=l(1..toString),F=/[\uD800-\uDFFF]/g,q=/^[\uD800-\uDBFF]$/,Q=/^[\uDC00-\uDFFF]$/,Y=function(ie,he,te){var Z=D(te,he-1),ee=D(te,he+1);return b(q,ie)&&!b(Q,ee)||b(Q,ie)&&!b(q,Z)?"\\u"+j(x(ie,0),16):ie},ae=u(function(){return'"\\udf06\\ud834"'!==_("\udf06\ud834")||'"\\udead"'!==_("\udead")});_&&y({target:"JSON",stat:!0,forced:ae},{stringify:function(he,te,Z){for(var ee=0,$=arguments.length,H=h($);ee<$;ee++)H[ee]=arguments[ee];var de=o(_,null,H);return"string"==typeof de?G(de,F,Y):de}})},10157:(T,A,m)=>{var y=m(37516);m(65702)(y.JSON,"JSON",!0)},30238:()=>{},91487:(T,A,m)=>{var y=m(99253),S=m(36477);y({target:"Object",stat:!0,forced:Object.assign!==S},{assign:S})},40020:(T,A,m)=>{var y=m(99253),S=m(61385);y({target:"Object",stat:!0,forced:!S,sham:!S},{defineProperties:m(25526)})},55523:(T,A,m)=>{var y=m(99253),S=m(61385);y({target:"Object",stat:!0,forced:!S,sham:!S},{defineProperty:m(70762).f})},67777:(T,A,m)=>{var y=m(99253),S=m(37621).entries;y({target:"Object",stat:!0},{entries:function(o){return S(o)}})},32696:(T,A,m)=>{var y=m(99253),S=m(20065),s=m(75880),o=m(59819).f,l=m(61385),u=S(function(){o(1)});y({target:"Object",stat:!0,forced:!l||u,sham:!l},{getOwnPropertyDescriptor:function(b,D){return o(s(b),D)}})},36714:(T,A,m)=>{var y=m(99253),S=m(61385),s=m(8452),o=m(75880),l=m(59819),u=m(763);y({target:"Object",stat:!0,sham:!S},{getOwnPropertyDescriptors:function(_){for(var F,q,b=o(_),D=l.f,x=s(b),G={},j=0;x.length>j;)void 0!==(q=D(b,F=x[j++]))&&u(G,F,q);return G}})},89405:(T,A,m)=>{var y=m(99253),S=m(23349),s=m(47836);y({target:"Object",stat:!0,forced:m(20065)(function(){s(1)})},{keys:function(h){return s(S(h))}})},97045:()=>{},75077:(T,A,m)=>{"use strict";var y=m(99253),S=m(13868),s=m(98204),o=m(2637),l=m(18429),u=m(30772);y({target:"Promise",stat:!0},{allSettled:function(_){var b=this,D=o.f(b),x=D.resolve,G=D.reject,j=l(function(){var F=s(b.resolve),q=[],Q=0,Y=1;u(_,function(ae){var ie=Q++,he=!1;Y++,S(F,b,ae).then(function(te){he||(he=!0,q[ie]={status:"fulfilled",value:te},--Y||x(q))},function(te){he||(he=!0,q[ie]={status:"rejected",reason:te},--Y||x(q))})}),--Y||x(q)});return j.error&&G(j.value),D.promise}})},83218:(T,A,m)=>{"use strict";var y=m(99253),S=m(98204),s=m(73289),o=m(13868),l=m(2637),u=m(18429),h=m(30772),_="No one promise resolved";y({target:"Promise",stat:!0},{any:function(D){var x=this,G=s("AggregateError"),j=l.f(x),F=j.resolve,q=j.reject,Q=u(function(){var Y=S(x.resolve),ae=[],ie=0,he=1,te=!1;h(D,function(Z){var ee=ie++,$=!1;he++,o(Y,x,Z).then(function(H){$||te||(te=!0,F(H))},function(H){$||te||($=!0,ae[ee]=H,--he||q(new G(ae,_)))})}),--he||q(new G(ae,_))});return Q.error&&q(Q.value),j.promise}})},45895:(T,A,m)=>{"use strict";var y=m(99253),S=m(27316),s=m(99978),o=m(20065),l=m(73289),u=m(91699),h=m(3759),_=m(33898),b=m(46573);if(y({target:"Promise",proto:!0,real:!0,forced:!!s&&o(function(){s.prototype.finally.call({then:function(){}},function(){})})},{finally:function(G){var j=h(this,l("Promise")),F=u(G);return this.then(F?function(q){return _(j,G()).then(function(){return q})}:G,F?function(q){return _(j,G()).then(function(){throw q})}:G)}}),!S&&u(s)){var x=l("Promise").prototype.finally;s.prototype.finally!==x&&b(s.prototype,"finally",x,{unsafe:!0})}},12545:(T,A,m)=>{"use strict";var hi,En,zn,Vi,y=m(99253),S=m(27316),s=m(37516),o=m(73289),l=m(13868),u=m(99978),h=m(46573),_=m(22239),b=m(74494),D=m(65702),x=m(31333),G=m(98204),j=m(91699),F=m(883),q=m(74528),Q=m(57761),Y=m(30772),ae=m(78442),ie=m(3759),he=m(15691).set,te=m(6120),Z=m(33898),ee=m(28979),$=m(2637),H=m(18429),de=m(90149),J=m(808),B=m(63211),re=m(33040),ce=m(7214),Ee=m(93687),pe=B("species"),ye="Promise",Pe=de.get,Ue=de.set,Me=de.getterFor(ye),He=u&&u.prototype,Ye=u,st=He,yt=s.TypeError,Ke=s.document,Tt=s.process,kt=$.f,tn=kt,Mn=!!(Ke&&Ke.createEvent&&s.dispatchEvent),Gn=j(s.PromiseRejectionEvent),An="unhandledrejection",ln=!1,ke=J(ye,function(){var Fe=Q(Ye),ot=Fe!==String(Ye);if(!ot&&66===Ee||S&&!st.finally)return!0;if(Ee>=51&&/native code/.test(Fe))return!1;var me=new Ye(function(Dt){Dt(1)}),Ne=function(Dt){Dt(function(){},function(){})};return(me.constructor={})[pe]=Ne,!(ln=me.then(function(){})instanceof Ne)||!ot&&re&&!Gn}),Oe=ke||!ae(function(Fe){Ye.all(Fe).catch(function(){})}),dn=function(Fe){var ot;return!(!F(Fe)||!j(ot=Fe.then))&&ot},mn=function(Fe,ot){if(!Fe.notified){Fe.notified=!0;var me=Fe.reactions;te(function(){for(var Ne=Fe.value,et=1==Fe.state,Dt=0;me.length>Dt;){var vt,Et,no,Xt=me[Dt++],$t=et?Xt.ok:Xt.fail,tt=Xt.resolve,Qt=Xt.reject,hn=Xt.domain;try{$t?(et||(2===Fe.rejection&&Fi(Fe),Fe.rejection=1),!0===$t?vt=Ne:(hn&&hn.enter(),vt=$t(Ne),hn&&(hn.exit(),no=!0)),vt===Xt.promise?Qt(yt("Promise-chain cycle")):(Et=dn(vt))?l(Et,vt,tt,Qt):tt(vt)):Qt(Ne)}catch(pi){hn&&!no&&hn.exit(),Qt(pi)}}Fe.reactions=[],Fe.notified=!1,ot&&!Fe.rejection&&_n(Fe)})}},Vt=function(Fe,ot,me){var Ne,et;Mn?((Ne=Ke.createEvent("Event")).promise=ot,Ne.reason=me,Ne.initEvent(Fe,!1,!0),s.dispatchEvent(Ne)):Ne={promise:ot,reason:me},!Gn&&(et=s["on"+Fe])?et(Ne):Fe===An&&ee("Unhandled promise rejection",me)},_n=function(Fe){l(he,s,function(){var et,ot=Fe.facade,me=Fe.value;if(Ln(Fe)&&(et=H(function(){ce?Tt.emit("unhandledRejection",me,ot):Vt(An,ot,me)}),Fe.rejection=ce||Ln(Fe)?2:1,et.error))throw et.value})},Ln=function(Fe){return 1!==Fe.rejection&&!Fe.parent},Fi=function(Fe){l(he,s,function(){var ot=Fe.facade;ce?Tt.emit("rejectionHandled",ot):Vt("rejectionhandled",ot,Fe.value)})},xn=function(Fe,ot,me){return function(Ne){Fe(ot,Ne,me)}},wt=function(Fe,ot,me){Fe.done||(Fe.done=!0,me&&(Fe=me),Fe.value=ot,Fe.state=2,mn(Fe,!0))},Rt=function(Fe,ot,me){if(!Fe.done){Fe.done=!0,me&&(Fe=me);try{if(Fe.facade===ot)throw yt("Promise can't be resolved itself");var Ne=dn(ot);Ne?te(function(){var et={done:!1};try{l(Ne,ot,xn(Rt,et,Fe),xn(wt,et,Fe))}catch(Dt){wt(et,Dt,Fe)}}):(Fe.value=ot,Fe.state=1,mn(Fe,!1))}catch(et){wt({done:!1},et,Fe)}}};if(ke&&(Ye=function(ot){q(this,st),G(ot),l(hi,this);var me=Pe(this);try{ot(xn(Rt,me),xn(wt,me))}catch(Ne){wt(me,Ne)}},(hi=function(ot){Ue(this,{type:ye,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=_(st=Ye.prototype,{then:function(ot,me){var Ne=Me(this),et=Ne.reactions,Dt=kt(ie(this,Ye));return Dt.ok=!j(ot)||ot,Dt.fail=j(me)&&me,Dt.domain=ce?Tt.domain:void 0,Ne.parent=!0,et[et.length]=Dt,0!=Ne.state&&mn(Ne,!1),Dt.promise},catch:function(Fe){return this.then(void 0,Fe)}}),En=function(){var Fe=new hi,ot=Pe(Fe);this.promise=Fe,this.resolve=xn(Rt,ot),this.reject=xn(wt,ot)},$.f=kt=function(Fe){return Fe===Ye||Fe===zn?new En(Fe):tn(Fe)},!S&&j(u)&&He!==Object.prototype)){Vi=He.then,ln||(h(He,"then",function(ot,me){var Ne=this;return new Ye(function(et,Dt){l(Vi,Ne,et,Dt)}).then(ot,me)},{unsafe:!0}),h(He,"catch",st.catch,{unsafe:!0}));try{delete He.constructor}catch(Fe){}b&&b(He,st)}y({global:!0,wrap:!0,forced:ke},{Promise:Ye}),D(Ye,ye,!1,!0),x(ye),zn=o(ye),y({target:ye,stat:!0,forced:ke},{reject:function(ot){var me=kt(this);return l(me.reject,void 0,ot),me.promise}}),y({target:ye,stat:!0,forced:S||ke},{resolve:function(ot){return Z(S&&this===zn?Ye:this,ot)}}),y({target:ye,stat:!0,forced:Oe},{all:function(ot){var me=this,Ne=kt(me),et=Ne.resolve,Dt=Ne.reject,Xt=H(function(){var $t=G(me.resolve),tt=[],Qt=0,hn=1;Y(ot,function(vt){var Et=Qt++,no=!1;hn++,l($t,me,vt).then(function(pi){no||(no=!0,tt[Et]=pi,--hn||et(tt))},Dt)}),--hn||et(tt)});return Xt.error&&Dt(Xt.value),Ne.promise},race:function(ot){var me=this,Ne=kt(me),et=Ne.reject,Dt=H(function(){var Xt=G(me.resolve);Y(ot,function($t){l(Xt,me,$t).then(Ne.resolve,et)})});return Dt.error&&et(Dt.value),Ne.promise}})},22428:()=>{},96595:(T,A,m)=>{"use strict";var y=m(99253),S=m(45972),s=m(9974),o=m(63805),l=m(37299),u=m(23655),h=S("".indexOf);y({target:"String",proto:!0,forced:!u("includes")},{includes:function(b){return!!~h(l(o(this)),l(s(b)),arguments.length>1?arguments[1]:void 0)}})},62009:(T,A,m)=>{"use strict";var y=m(14924).charAt,S=m(37299),s=m(90149),o=m(68797),l="String Iterator",u=s.set,h=s.getterFor(l);o(String,"String",function(_){u(this,{type:l,string:S(_),index:0})},function(){var G,b=h(this),D=b.string,x=b.index;return x>=D.length?{value:void 0,done:!0}:(G=y(D,x),b.index+=G.length,{value:G,done:!1})})},11322:(T,A,m)=>{"use strict";var q,y=m(99253),S=m(45972),s=m(59819).f,o=m(37159),l=m(37299),u=m(9974),h=m(63805),_=m(23655),b=m(27316),D=S("".startsWith),x=S("".slice),G=Math.min,j=_("startsWith");y({target:"String",proto:!0,forced:!(!b&&!j&&(q=s(String.prototype,"startsWith"),q&&!q.writable)||j)},{startsWith:function(Q){var Y=l(h(this));u(Q);var ae=o(G(arguments.length>1?arguments[1]:void 0,Y.length)),ie=l(Q);return D?D(Y,ie,ae):x(Y,ae,ae+ie.length)===ie}})},32159:(T,A,m)=>{m(8254)("asyncIterator")},72450:()=>{},43071:(T,A,m)=>{m(8254)("hasInstance")},34025:(T,A,m)=>{m(8254)("isConcatSpreadable")},19155:(T,A,m)=>{m(8254)("iterator")},33353:(T,A,m)=>{"use strict";var y=m(99253),S=m(37516),s=m(73289),o=m(80626),l=m(13868),u=m(45972),h=m(27316),_=m(61385),b=m(74267),D=m(20065),x=m(7723),G=m(51556),j=m(91699),F=m(883),q=m(28833),Q=m(17397),Y=m(22696),ae=m(23349),ie=m(75880),he=m(54053),te=m(37299),Z=m(42856),ee=m(73821),$=m(47836),H=m(92081),de=m(69820),J=m(62222),B=m(59819),re=m(70762),ce=m(52725),Ee=m(13053),pe=m(46573),ye=m(2389),Pe=m(26103),Ue=m(64842),Me=m(11789),He=m(63211),Ye=m(42572),st=m(8254),yt=m(65702),Ke=m(90149),Tt=m(69720).forEach,kt=Pe("hidden"),tn="Symbol",Mn="prototype",Gn=He("toPrimitive"),An=Ke.set,Gt=Ke.getterFor(tn),Dn=Object[Mn],Bt=S.Symbol,vn=Bt&&Bt[Mn],Xe=S.TypeError,vi=S.QObject,ln=s("JSON","stringify"),hi=B.f,En=re.f,zn=de.f,Vi=ce.f,ke=u([].push),Oe=ye("symbols"),dn=ye("op-symbols"),mn=ye("string-to-symbol-registry"),Vt=ye("symbol-to-string-registry"),_n=ye("wks"),Ln=!vi||!vi[Mn]||!vi[Mn].findChild,Fi=_&&D(function(){return 7!=ee(En({},"a",{get:function(){return En(this,"a",{value:7}).a}})).a})?function($t,tt,Qt){var hn=hi(Dn,tt);hn&&delete Dn[tt],En($t,tt,Qt),hn&&$t!==Dn&&En(Dn,tt,hn)}:En,xn=function($t,tt){var Qt=Oe[$t]=ee(vn);return An(Qt,{type:tn,tag:$t,description:tt}),_||(Qt.description=tt),Qt},wt=function(tt,Qt,hn){tt===Dn&&wt(dn,Qt,hn),Y(tt);var vt=he(Qt);return Y(hn),x(Oe,vt)?(hn.enumerable?(x(tt,kt)&&tt[kt][vt]&&(tt[kt][vt]=!1),hn=ee(hn,{enumerable:Z(0,!1)})):(x(tt,kt)||En(tt,kt,Z(1,{})),tt[kt][vt]=!0),Fi(tt,vt,hn)):En(tt,vt,hn)},Rt=function(tt,Qt){Y(tt);var hn=ie(Qt),vt=$(hn).concat(et(hn));return Tt(vt,function(Et){(!_||l(ot,hn,Et))&&wt(tt,Et,hn[Et])}),tt},ot=function(tt){var Qt=he(tt),hn=l(Vi,this,Qt);return!(this===Dn&&x(Oe,Qt)&&!x(dn,Qt))&&(!(hn||!x(this,Qt)||!x(Oe,Qt)||x(this,kt)&&this[kt][Qt])||hn)},me=function(tt,Qt){var hn=ie(tt),vt=he(Qt);if(hn!==Dn||!x(Oe,vt)||x(dn,vt)){var Et=hi(hn,vt);return Et&&x(Oe,vt)&&!(x(hn,kt)&&hn[kt][vt])&&(Et.enumerable=!0),Et}},Ne=function(tt){var Qt=zn(ie(tt)),hn=[];return Tt(Qt,function(vt){!x(Oe,vt)&&!x(Ue,vt)&&ke(hn,vt)}),hn},et=function(tt){var Qt=tt===Dn,hn=zn(Qt?dn:ie(tt)),vt=[];return Tt(hn,function(Et){x(Oe,Et)&&(!Qt||x(Dn,Et))&&ke(vt,Oe[Et])}),vt};if(b||(pe(vn=(Bt=function(){if(q(vn,this))throw Xe("Symbol is not a constructor");var tt=arguments.length&&void 0!==arguments[0]?te(arguments[0]):void 0,Qt=Me(tt),hn=function(vt){this===Dn&&l(hn,dn,vt),x(this,kt)&&x(this[kt],Qt)&&(this[kt][Qt]=!1),Fi(this,Qt,Z(1,vt))};return _&&Ln&&Fi(Dn,Qt,{configurable:!0,set:hn}),xn(Qt,tt)})[Mn],"toString",function(){return Gt(this).tag}),pe(Bt,"withoutSetter",function($t){return xn(Me($t),$t)}),ce.f=ot,re.f=wt,B.f=me,H.f=de.f=Ne,J.f=et,Ye.f=function($t){return xn(He($t),$t)},_&&(En(vn,"description",{configurable:!0,get:function(){return Gt(this).description}}),h||pe(Dn,"propertyIsEnumerable",ot,{unsafe:!0}))),y({global:!0,wrap:!0,forced:!b,sham:!b},{Symbol:Bt}),Tt($(_n),function($t){st($t)}),y({target:tn,stat:!0,forced:!b},{for:function($t){var tt=te($t);if(x(mn,tt))return mn[tt];var Qt=Bt(tt);return mn[tt]=Qt,Vt[Qt]=tt,Qt},keyFor:function(tt){if(!Q(tt))throw Xe(tt+" is not a symbol");if(x(Vt,tt))return Vt[tt]},useSetter:function(){Ln=!0},useSimple:function(){Ln=!1}}),y({target:"Object",stat:!0,forced:!b,sham:!_},{create:function(tt,Qt){return void 0===Qt?ee(tt):Rt(ee(tt),Qt)},defineProperty:wt,defineProperties:Rt,getOwnPropertyDescriptor:me}),y({target:"Object",stat:!0,forced:!b},{getOwnPropertyNames:Ne,getOwnPropertySymbols:et}),y({target:"Object",stat:!0,forced:D(function(){J.f(1)})},{getOwnPropertySymbols:function(tt){return J.f(ae(tt))}}),ln&&y({target:"JSON",stat:!0,forced:!b||D(function(){var $t=Bt();return"[null]"!=ln([$t])||"{}"!=ln({a:$t})||"{}"!=ln(Object($t))})},{stringify:function(tt,Qt,hn){var vt=Ee(arguments),Et=Qt;if((F(Qt)||void 0!==tt)&&!Q(tt))return G(Qt)||(Qt=function(no,pi){if(j(Et)&&(pi=l(Et,this,no,pi)),!Q(pi))return pi}),vt[1]=Qt,o(ln,null,vt)}}),!vn[Gn]){var Xt=vn.valueOf;pe(vn,Gn,function($t){return l(Xt,this)})}yt(Bt,tn),Ue[kt]=!0},16576:(T,A,m)=>{m(8254)("matchAll")},64485:(T,A,m)=>{m(8254)("match")},42053:(T,A,m)=>{m(8254)("replace")},96668:(T,A,m)=>{m(8254)("search")},54714:(T,A,m)=>{m(8254)("species")},20437:(T,A,m)=>{m(8254)("split")},11979:(T,A,m)=>{m(8254)("toPrimitive")},78559:(T,A,m)=>{m(8254)("toStringTag")},59450:(T,A,m)=>{m(8254)("unscopables")},82695:(T,A,m)=>{"use strict";var G,y=m(37516),S=m(45972),s=m(22239),o=m(48016),l=m(7448),u=m(39754),h=m(883),_=m(2577),b=m(90149).enforce,D=m(74381),x=!y.ActiveXObject&&"ActiveXObject"in y,j=function(he){return function(){return he(this,arguments.length?arguments[0]:void 0)}},F=l("WeakMap",j,u);if(D&&x){G=u.getConstructor(j,"WeakMap",!0),o.enable();var q=F.prototype,Q=S(q.delete),Y=S(q.has),ae=S(q.get),ie=S(q.set);s(q,{delete:function(he){if(h(he)&&!_(he)){var te=b(this);return te.frozen||(te.frozen=new G),Q(this,he)||te.frozen.delete(he)}return Q(this,he)},has:function(te){if(h(te)&&!_(te)){var Z=b(this);return Z.frozen||(Z.frozen=new G),Y(this,te)||Z.frozen.has(te)}return Y(this,te)},get:function(te){if(h(te)&&!_(te)){var Z=b(this);return Z.frozen||(Z.frozen=new G),Y(this,te)?ae(this,te):Z.frozen.get(te)}return ae(this,te)},set:function(te,Z){if(h(te)&&!_(te)){var ee=b(this);ee.frozen||(ee.frozen=new G),Y(this,te)?ie(this,te,Z):ee.frozen.set(te,Z)}else ie(this,te,Z);return this}})}},62373:(T,A,m)=>{m(52935)},18168:(T,A,m)=>{m(75077)},25831:(T,A,m)=>{m(83218)},73944:(T,A,m)=>{"use strict";var y=m(99253),S=m(2637),s=m(18429);y({target:"Promise",stat:!0},{try:function(o){var l=S.f(this),u=s(o);return(u.error?l.reject:l.resolve)(u.value),l.promise}})},42673:(T,A,m)=>{m(8254)("asyncDispose")},34286:(T,A,m)=>{m(8254)("dispose")},73695:(T,A,m)=>{m(8254)("matcher")},13990:(T,A,m)=>{m(8254)("metadata")},69181:(T,A,m)=>{m(8254)("observable")},11686:(T,A,m)=>{m(8254)("patternMatch")},84430:(T,A,m)=>{m(8254)("replaceAll")},10713:(T,A,m)=>{m(64741);var y=m(70808),S=m(37516),s=m(98330),o=m(6103),l=m(48626),h=m(63211)("toStringTag");for(var _ in y){var b=S[_],D=b&&b.prototype;D&&s(D)!==h&&o(D,h,_),l[_]=l.Array}},37298:(T,A,m)=>{"use strict";m(64741);var y=m(99253),S=m(37516),s=m(73289),o=m(13868),l=m(45972),u=m(71665),h=m(46573),_=m(22239),b=m(65702),D=m(59571),x=m(90149),G=m(74528),j=m(91699),F=m(7723),q=m(88509),Q=m(98330),Y=m(22696),ae=m(883),ie=m(37299),he=m(73821),te=m(42856),Z=m(13020),ee=m(62439),$=m(63211),H=m(95264),de=$("iterator"),J="URLSearchParams",B=J+"Iterator",re=x.set,ce=x.getterFor(J),Ee=x.getterFor(B),pe=s("fetch"),ye=s("Request"),Pe=s("Headers"),Ue=ye&&ye.prototype,Me=Pe&&Pe.prototype,He=S.RegExp,Ye=S.TypeError,st=S.decodeURIComponent,yt=S.encodeURIComponent,Ke=l("".charAt),Tt=l([].join),kt=l([].push),tn=l("".replace),Mn=l([].shift),Gn=l([].splice),An=l("".split),Gt=l("".slice),Dn=/\+/g,Bt=Array(4),vn=function(wt){return Bt[wt-1]||(Bt[wt-1]=He("((?:%[\\da-f]{2}){"+wt+"})","gi"))},Xe=function(wt){try{return st(wt)}catch(Rt){return wt}},vi=function(wt){var Rt=tn(wt,Dn," "),Fe=4;try{return st(Rt)}catch(ot){for(;Fe;)Rt=tn(Rt,vn(Fe--),Xe);return Rt}},ln=/[!'()~]|%20/g,hi={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},En=function(wt){return hi[wt]},zn=function(wt){return tn(yt(wt),ln,En)},Vi=function(wt,Rt){if(Rt)for(var me,Ne,Fe=An(Rt,"&"),ot=0;ot<Fe.length;)(me=Fe[ot++]).length&&(Ne=An(me,"="),kt(wt,{key:vi(Mn(Ne)),value:vi(Tt(Ne,"="))}))},ke=function(wt){this.entries.length=0,Vi(this.entries,wt)},Oe=function(wt,Rt){if(wt<Rt)throw Ye("Not enough arguments")},dn=D(function(Rt,Fe){re(this,{type:B,iterator:Z(ce(Rt).entries),kind:Fe})},"Iterator",function(){var Rt=Ee(this),Fe=Rt.kind,ot=Rt.iterator.next(),me=ot.value;return ot.done||(ot.value="keys"===Fe?me.key:"values"===Fe?me.value:[me.key,me.value]),ot}),mn=function(){G(this,Vt);var me,Ne,et,Dt,Xt,$t,tt,Qt,hn,Rt=arguments.length>0?arguments[0]:void 0,Fe=this,ot=[];if(re(Fe,{type:J,entries:ot,updateURL:function(){},updateSearchParams:ke}),void 0!==Rt)if(ae(Rt))if(me=ee(Rt))for(et=(Ne=Z(Rt,me)).next;!(Dt=o(et,Ne)).done;){if(Xt=Z(Y(Dt.value)),(tt=o($t=Xt.next,Xt)).done||(Qt=o($t,Xt)).done||!o($t,Xt).done)throw Ye("Expected sequence with length 2");kt(ot,{key:ie(tt.value),value:ie(Qt.value)})}else for(hn in Rt)F(Rt,hn)&&kt(ot,{key:hn,value:ie(Rt[hn])});else Vi(ot,"string"==typeof Rt?"?"===Ke(Rt,0)?Gt(Rt,1):Rt:ie(Rt))},Vt=mn.prototype;if(_(Vt,{append:function(Rt,Fe){Oe(arguments.length,2);var ot=ce(this);kt(ot.entries,{key:ie(Rt),value:ie(Fe)}),ot.updateURL()},delete:function(wt){Oe(arguments.length,1);for(var Rt=ce(this),Fe=Rt.entries,ot=ie(wt),me=0;me<Fe.length;)Fe[me].key===ot?Gn(Fe,me,1):me++;Rt.updateURL()},get:function(Rt){Oe(arguments.length,1);for(var Fe=ce(this).entries,ot=ie(Rt),me=0;me<Fe.length;me++)if(Fe[me].key===ot)return Fe[me].value;return null},getAll:function(Rt){Oe(arguments.length,1);for(var Fe=ce(this).entries,ot=ie(Rt),me=[],Ne=0;Ne<Fe.length;Ne++)Fe[Ne].key===ot&&kt(me,Fe[Ne].value);return me},has:function(Rt){Oe(arguments.length,1);for(var Fe=ce(this).entries,ot=ie(Rt),me=0;me<Fe.length;)if(Fe[me++].key===ot)return!0;return!1},set:function(Rt,Fe){Oe(arguments.length,1);for(var $t,ot=ce(this),me=ot.entries,Ne=!1,et=ie(Rt),Dt=ie(Fe),Xt=0;Xt<me.length;Xt++)($t=me[Xt]).key===et&&(Ne?Gn(me,Xt--,1):(Ne=!0,$t.value=Dt));Ne||kt(me,{key:et,value:Dt}),ot.updateURL()},sort:function(){var Rt=ce(this);H(Rt.entries,function(Fe,ot){return Fe.key>ot.key?1:-1}),Rt.updateURL()},forEach:function(Rt){for(var Ne,Fe=ce(this).entries,ot=q(Rt,arguments.length>1?arguments[1]:void 0),me=0;me<Fe.length;)ot((Ne=Fe[me++]).value,Ne.key,this)},keys:function(){return new dn(this,"keys")},values:function(){return new dn(this,"values")},entries:function(){return new dn(this,"entries")}},{enumerable:!0}),h(Vt,de,Vt.entries,{name:"entries"}),h(Vt,"toString",function(){for(var me,Rt=ce(this).entries,Fe=[],ot=0;ot<Rt.length;)me=Rt[ot++],kt(Fe,zn(me.key)+"="+zn(me.value));return Tt(Fe,"&")},{enumerable:!0}),b(mn,J),y({global:!0,forced:!u},{URLSearchParams:mn}),!u&&j(Pe)){var _n=l(Me.has),Ln=l(Me.set),Fi=function(wt){if(ae(wt)){var Fe,Rt=wt.body;if(Q(Rt)===J)return Fe=wt.headers?new Pe(wt.headers):new Pe,_n(Fe,"content-type")||Ln(Fe,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),he(wt,{body:te(0,ie(Rt)),headers:te(0,Fe)})}return wt};if(j(pe)&&y({global:!0,enumerable:!0,forced:!0},{fetch:function(Rt){return pe(Rt,arguments.length>1?Fi(arguments[1]):{})}}),j(ye)){var xn=function(Rt){return G(this,Ue),new ye(Rt,arguments.length>1?Fi(arguments[1]):{})};Ue.constructor=xn,xn.prototype=Ue,y({global:!0,forced:!0},{Request:xn})}}T.exports={URLSearchParams:mn,getState:ce}},96353:(T,A,m)=>{var y=m(23813);T.exports=y},18830:(T,A,m)=>{var y=m(89740);T.exports=y},76023:(T,A,m)=>{var y=m(34014);T.exports=y},88051:(T,A,m)=>{var y=m(47957);T.exports=y},92578:(T,A,m)=>{var y=m(48873);m(10713),T.exports=y},85671:(T,A,m)=>{var y=m(233);T.exports=y},60580:(T,A,m)=>{m(10713);var y=m(98330),S=m(7723),s=m(28833),o=m(76023),l=Array.prototype,u={DOMTokenList:!0,NodeList:!0};T.exports=function(h){var _=h.entries;return h===l||s(l,h)&&_===l.entries||S(u,y(h))?o:_}},26271:(T,A,m)=>{var y=m(32263);T.exports=y},82237:(T,A,m)=>{var y=m(81754);T.exports=y},6506:(T,A,m)=>{m(10713);var y=m(98330),S=m(7723),s=m(28833),o=m(88051),l=Array.prototype,u={DOMTokenList:!0,NodeList:!0};T.exports=function(h){var _=h.forEach;return h===l||s(l,h)&&_===l.forEach||S(u,y(h))?o:_}},26944:(T,A,m)=>{var y=m(46397);T.exports=y},28532:(T,A,m)=>{var y=m(88699);T.exports=y},3245:(T,A,m)=>{var y=m(24454);T.exports=y},34123:(T,A,m)=>{var y=m(18422);T.exports=y},43264:(T,A,m)=>{var y=m(13807);T.exports=y},75991:(T,A,m)=>{var y=m(13194);T.exports=y},65155:(T,A,m)=>{var y=m(20573);T.exports=y},80301:(T,A,m)=>{var y=m(49483);T.exports=y},62217:(T,A,m)=>{var y=m(12171);T.exports=y},14893:(T,A,m)=>{var y=m(39469);T.exports=y},81145:(T,A,m)=>{var y=m(24911);T.exports=y},52572:(T,A,m)=>{var y=m(942);T.exports=y},17608:(T,A,m)=>{var y=m(46592);T.exports=y},27567:(T,A,m)=>{var y=m(51594);T.exports=y},158:(T,A,m)=>{var y=m(87079);T.exports=y},27620:(T,A,m)=>{var y=m(42654);m(10713),T.exports=y},75743:(T,A,m)=>{var y=m(59366);m(10713),T.exports=y},40359:(T,A,m)=>{var y=m(48926);m(10713),T.exports=y},37254:(T,A,m)=>{var y=m(34271);m(10713),T.exports=y},30770:(T,A,m)=>{var y=m(1796);m(10713),T.exports=y},34271:(T,A,m)=>{m(37298);var y=m(83271);T.exports=y.URLSearchParams},9874:function(){var T;T="undefined"!=typeof self?self:this,function(m){var y_searchParams="URLSearchParams"in T,y_iterable="Symbol"in T&&"iterator"in Symbol,y_blob="FileReader"in T&&"Blob"in T&&function(){try{return new Blob,!0}catch($){return!1}}(),y_formData="FormData"in T,y_arrayBuffer="ArrayBuffer"in T;if(y_arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function($){return $&&s.indexOf(Object.prototype.toString.call($))>-1};function l($){if("string"!=typeof $&&($=String($)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test($))throw new TypeError("Invalid character in header field name");return $.toLowerCase()}function u($){return"string"!=typeof $&&($=String($)),$}function h($){var H={next:function(){var de=$.shift();return{done:void 0===de,value:de}}};return y_iterable&&(H[Symbol.iterator]=function(){return H}),H}function _($){this.map={},$ instanceof _?$.forEach(function(H,de){this.append(de,H)},this):Array.isArray($)?$.forEach(function(H){this.append(H[0],H[1])},this):$&&Object.getOwnPropertyNames($).forEach(function(H){this.append(H,$[H])},this)}function b($){if($.bodyUsed)return Promise.reject(new TypeError("Already read"));$.bodyUsed=!0}function D($){return new Promise(function(H,de){$.onload=function(){H($.result)},$.onerror=function(){de($.error)}})}function x($){var H=new FileReader,de=D(H);return H.readAsArrayBuffer($),de}function F($){if($.slice)return $.slice(0);var H=new Uint8Array($.byteLength);return H.set(new Uint8Array($)),H.buffer}function q(){return this.bodyUsed=!1,this._initBody=function($){this._bodyInit=$,$?"string"==typeof $?this._bodyText=$:y_blob&&Blob.prototype.isPrototypeOf($)?this._bodyBlob=$:y_formData&&FormData.prototype.isPrototypeOf($)?this._bodyFormData=$:y_searchParams&&URLSearchParams.prototype.isPrototypeOf($)?this._bodyText=$.toString():y_arrayBuffer&&y_blob&&function($){return $&&DataView.prototype.isPrototypeOf($)}($)?(this._bodyArrayBuffer=F($.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf($)||o($))?this._bodyArrayBuffer=F($):this._bodyText=$=Object.prototype.toString.call($):this._bodyText="",this.headers.get("content-type")||("string"==typeof $?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y_searchParams&&URLSearchParams.prototype.isPrototypeOf($)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y_blob&&(this.blob=function(){var $=b(this);if($)return $;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(x)}),this.text=function(){var $=b(this);if($)return $;if(this._bodyBlob)return function($){var H=new FileReader,de=D(H);return H.readAsText($),de}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function($){for(var H=new Uint8Array($),de=new Array(H.length),J=0;J<H.length;J++)de[J]=String.fromCharCode(H[J]);return de.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y_formData&&(this.formData=function(){return this.text().then(ie)}),this.json=function(){return this.text().then(JSON.parse)},this}_.prototype.append=function($,H){$=l($),H=u(H);var de=this.map[$];this.map[$]=de?de+", "+H:H},_.prototype.delete=function($){delete this.map[l($)]},_.prototype.get=function($){return $=l($),this.has($)?this.map[$]:null},_.prototype.has=function($){return this.map.hasOwnProperty(l($))},_.prototype.set=function($,H){this.map[l($)]=u(H)},_.prototype.forEach=function($,H){for(var de in this.map)this.map.hasOwnProperty(de)&&$.call(H,this.map[de],de,this)},_.prototype.keys=function(){var $=[];return this.forEach(function(H,de){$.push(de)}),h($)},_.prototype.values=function(){var $=[];return this.forEach(function(H){$.push(H)}),h($)},_.prototype.entries=function(){var $=[];return this.forEach(function(H,de){$.push([de,H])}),h($)},y_iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);var Q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ae($,H){var de=(H=H||{}).body;if($ instanceof ae){if($.bodyUsed)throw new TypeError("Already read");this.url=$.url,this.credentials=$.credentials,H.headers||(this.headers=new _($.headers)),this.method=$.method,this.mode=$.mode,this.signal=$.signal,!de&&null!=$._bodyInit&&(de=$._bodyInit,$.bodyUsed=!0)}else this.url=String($);if(this.credentials=H.credentials||this.credentials||"same-origin",(H.headers||!this.headers)&&(this.headers=new _(H.headers)),this.method=function($){var H=$.toUpperCase();return Q.indexOf(H)>-1?H:$}(H.method||this.method||"GET"),this.mode=H.mode||this.mode||null,this.signal=H.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&de)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(de)}function ie($){var H=new FormData;return $.trim().split("&").forEach(function(de){if(de){var J=de.split("="),B=J.shift().replace(/\+/g," "),re=J.join("=").replace(/\+/g," ");H.append(decodeURIComponent(B),decodeURIComponent(re))}}),H}function he($){var H=new _;return $.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(J){var B=J.split(":"),re=B.shift().trim();if(re){var ce=B.join(":").trim();H.append(re,ce)}}),H}function te($,H){H||(H={}),this.type="default",this.status=void 0===H.status?200:H.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in H?H.statusText:"OK",this.headers=new _(H.headers),this.url=H.url||"",this._initBody($)}ae.prototype.clone=function(){return new ae(this,{body:this._bodyInit})},q.call(ae.prototype),q.call(te.prototype),te.prototype.clone=function(){return new te(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},te.error=function(){var $=new te(null,{status:0,statusText:""});return $.type="error",$};var Z=[301,302,303,307,308];te.redirect=function($,H){if(-1===Z.indexOf(H))throw new RangeError("Invalid status code");return new te(null,{status:H,headers:{location:$}})},m.DOMException=T.DOMException;try{new m.DOMException}catch($){m.DOMException=function(H,de){this.message=H,this.name=de;var J=Error(H);this.stack=J.stack},m.DOMException.prototype=Object.create(Error.prototype),m.DOMException.prototype.constructor=m.DOMException}function ee($,H){return new Promise(function(de,J){var B=new ae($,H);if(B.signal&&B.signal.aborted)return J(new m.DOMException("Aborted","AbortError"));var re=new XMLHttpRequest;function ce(){re.abort()}re.onload=function(){var Ee={status:re.status,statusText:re.statusText,headers:he(re.getAllResponseHeaders()||"")};Ee.url="responseURL"in re?re.responseURL:Ee.headers.get("X-Request-URL"),de(new te("response"in re?re.response:re.responseText,Ee))},re.onerror=function(){J(new TypeError("Network request failed"))},re.ontimeout=function(){J(new TypeError("Network request failed"))},re.onabort=function(){J(new m.DOMException("Aborted","AbortError"))},re.open(B.method,B.url,!0),"include"===B.credentials?re.withCredentials=!0:"omit"===B.credentials&&(re.withCredentials=!1),"responseType"in re&&y_blob&&(re.responseType="blob"),B.headers.forEach(function(Ee,pe){re.setRequestHeader(pe,Ee)}),B.signal&&(B.signal.addEventListener("abort",ce),re.onreadystatechange=function(){4===re.readyState&&B.signal.removeEventListener("abort",ce)}),re.send(void 0===B._bodyInit?null:B._bodyInit)})}ee.polyfill=!0,T.fetch||(T.fetch=ee,T.Headers=_,T.Request=ae,T.Response=te),m.Headers=_,m.Request=ae,m.Response=te,m.fetch=ee,Object.defineProperty(m,"__esModule",{value:!0})}({})},80915:T=>{"use strict";function A(o){return o instanceof Buffer||o instanceof Date||o instanceof RegExp}function m(o){if(o instanceof Buffer){var l=Buffer.alloc?Buffer.alloc(o.length):new Buffer(o.length);return o.copy(l),l}if(o instanceof Date)return new Date(o.getTime());if(o instanceof RegExp)return new RegExp(o);throw new Error("Unexpected situation")}function y(o){var l=[];return o.forEach(function(u,h){l[h]="object"==typeof u&&null!==u?Array.isArray(u)?y(u):A(u)?m(u):s({},u):u}),l}function S(o,l){return"__proto__"===l?void 0:o[l]}var s=T.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var u,h,o=arguments[0],l=Array.prototype.slice.call(arguments,1);return l.forEach(function(b){"object"!=typeof b||null===b||Array.isArray(b)||Object.keys(b).forEach(function(D){if(h=S(o,D),(u=S(b,D))!==o)return"object"!=typeof u||null===u?void(o[D]=u):Array.isArray(u)?void(o[D]=y(u)):A(u)?void(o[D]=m(u)):"object"!=typeof h||null===h||Array.isArray(h)?void(o[D]=s({},u)):void(o[D]=s(h,u))})}),o}},74694:function(T,A){var m,S;void 0!==(S="function"==typeof(m=function(){"use strict";function o(D,x,G){var j=new XMLHttpRequest;j.open("GET",D),j.responseType="blob",j.onload=function(){b(j.response,x,G)},j.onerror=function(){console.error("could not download file")},j.send()}function l(D){var x=new XMLHttpRequest;x.open("HEAD",D,!1);try{x.send()}catch(G){}return 200<=x.status&&299>=x.status}function u(D){try{D.dispatchEvent(new MouseEvent("click"))}catch(G){var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),D.dispatchEvent(x)}}var h="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,_=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),b=h.saveAs||("object"!=typeof window||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(D,x,G){var j=h.URL||h.webkitURL,F=document.createElement("a");F.download=x=x||D.name||"download",F.rel="noopener","string"==typeof D?(F.href=D,F.origin===location.origin?u(F):l(F.href)?o(D,x,G):u(F,F.target="_blank")):(F.href=j.createObjectURL(D),setTimeout(function(){j.revokeObjectURL(F.href)},4e4),setTimeout(function(){u(F)},0))}:"msSaveOrOpenBlob"in navigator?function(D,x,G){if(x=x||D.name||"download","string"!=typeof D)navigator.msSaveOrOpenBlob(function(D,x){return void 0===x?x={autoBom:!1}:"object"!=typeof x&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(D.type)?new Blob(["\ufeff",D],{type:D.type}):D}(D,G),x);else if(l(D))o(D,x,G);else{var j=document.createElement("a");j.href=D,j.target="_blank",setTimeout(function(){u(j)})}}:function(D,x,G,j){if((j=j||open("","_blank"))&&(j.document.title=j.document.body.innerText="downloading..."),"string"==typeof D)return o(D,x,G);var F="application/octet-stream"===D.type,q=/constructor/i.test(h.HTMLElement)||h.safari,Q=/CriOS\/[\d]+/.test(navigator.userAgent);if((Q||F&&q||_)&&"undefined"!=typeof FileReader){var Y=new FileReader;Y.onloadend=function(){var he=Y.result;he=Q?he:he.replace(/^data:[^;]*;/,"data:attachment/file;"),j?j.location.href=he:location=he,j=null},Y.readAsDataURL(D)}else{var ae=h.URL||h.webkitURL,ie=ae.createObjectURL(D);j?j.location=ie:location.href=ie,j=null,setTimeout(function(){ae.revokeObjectURL(ie)},4e4)}});h.saveAs=b.saveAs=b,T.exports=b})?m.apply(A,[]):m)&&(T.exports=S)},51359:T=>{"use strict";var A="Function.prototype.bind called on incompatible ",m=Array.prototype.slice,y=Object.prototype.toString,S="[object Function]";T.exports=function(o){var l=this;if("function"!=typeof l||y.call(l)!==S)throw new TypeError(A+l);for(var h,u=m.call(arguments,1),_=function(){if(this instanceof h){var j=l.apply(this,u.concat(m.call(arguments)));return Object(j)===j?j:this}return l.apply(o,u.concat(m.call(arguments)))},b=Math.max(0,l.length-u.length),D=[],x=0;x<b;x++)D.push("$"+x);if(h=Function("binder","return function ("+D.join(",")+"){ return binder.apply(this,arguments); }")(_),l.prototype){var G=function(){};G.prototype=l.prototype,h.prototype=new G,G.prototype=null}return h}},21857:(T,A,m)=>{"use strict";var y=m(51359);T.exports=Function.prototype.bind||y},93602:(T,A,m)=>{"use strict";var y,S=SyntaxError,s=Function,o=TypeError,l=function(de){try{return s('"use strict"; return ('+de+").constructor;")()}catch(J){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(de){u=null}var h=function(){throw new o},_=u?function(){try{return h}catch(de){try{return u(arguments,"callee").get}catch(J){return h}}}():h,b=m(33715)(),D=Object.getPrototypeOf||function(de){return de.__proto__},x={},G="undefined"==typeof Uint8Array?y:D(Uint8Array),j={"%AggregateError%":"undefined"==typeof AggregateError?y:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?y:ArrayBuffer,"%ArrayIteratorPrototype%":b?D([][Symbol.iterator]()):y,"%AsyncFromSyncIteratorPrototype%":y,"%AsyncFunction%":x,"%AsyncGenerator%":x,"%AsyncGeneratorFunction%":x,"%AsyncIteratorPrototype%":x,"%Atomics%":"undefined"==typeof Atomics?y:Atomics,"%BigInt%":"undefined"==typeof BigInt?y:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?y:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?y:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?y:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?y:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":x,"%Int8Array%":"undefined"==typeof Int8Array?y:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?y:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?y:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b?D(D([][Symbol.iterator]())):y,"%JSON%":"object"==typeof JSON?JSON:y,"%Map%":"undefined"==typeof Map?y:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&b?D((new Map)[Symbol.iterator]()):y,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?y:Promise,"%Proxy%":"undefined"==typeof Proxy?y:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?y:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?y:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&b?D((new Set)[Symbol.iterator]()):y,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?y:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b?D(""[Symbol.iterator]()):y,"%Symbol%":b?Symbol:y,"%SyntaxError%":S,"%ThrowTypeError%":_,"%TypedArray%":G,"%TypeError%":o,"%Uint8Array%":"undefined"==typeof Uint8Array?y:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?y:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?y:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?y:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?y:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?y:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?y:WeakSet},F=function de(J){var B;if("%AsyncFunction%"===J)B=l("async function () {}");else if("%GeneratorFunction%"===J)B=l("function* () {}");else if("%AsyncGeneratorFunction%"===J)B=l("async function* () {}");else if("%AsyncGenerator%"===J){var re=de("%AsyncGeneratorFunction%");re&&(B=re.prototype)}else if("%AsyncIteratorPrototype%"===J){var ce=de("%AsyncGenerator%");ce&&(B=D(ce.prototype))}return j[J]=B,B},q={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Q=m(21857),Y=m(26761),ae=Q.call(Function.call,Array.prototype.concat),ie=Q.call(Function.apply,Array.prototype.splice),he=Q.call(Function.call,String.prototype.replace),te=Q.call(Function.call,String.prototype.slice),Z=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ee=/\\(\\)?/g,$=function(J){var B=te(J,0,1),re=te(J,-1);if("%"===B&&"%"!==re)throw new S("invalid intrinsic syntax, expected closing `%`");if("%"===re&&"%"!==B)throw new S("invalid intrinsic syntax, expected opening `%`");var ce=[];return he(J,Z,function(Ee,pe,ye,Pe){ce[ce.length]=ye?he(Pe,ee,"$1"):pe||Ee}),ce},H=function(J,B){var ce,re=J;if(Y(q,re)&&(re="%"+(ce=q[re])[0]+"%"),Y(j,re)){var Ee=j[re];if(Ee===x&&(Ee=F(re)),void 0===Ee&&!B)throw new o("intrinsic "+J+" exists, but is not available. Please file an issue!");return{alias:ce,name:re,value:Ee}}throw new S("intrinsic "+J+" does not exist!")};T.exports=function(J,B){if("string"!=typeof J||0===J.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof B)throw new o('"allowMissing" argument must be a boolean');var re=$(J),ce=re.length>0?re[0]:"",Ee=H("%"+ce+"%",B),pe=Ee.name,ye=Ee.value,Pe=!1,Ue=Ee.alias;Ue&&(ce=Ue[0],ie(re,ae([0,1],Ue)));for(var Me=1,He=!0;Me<re.length;Me+=1){var Ye=re[Me],st=te(Ye,0,1),yt=te(Ye,-1);if(('"'===st||"'"===st||"`"===st||'"'===yt||"'"===yt||"`"===yt)&&st!==yt)throw new S("property names with quotes must have matching quotes");if(("constructor"===Ye||!He)&&(Pe=!0),Y(j,pe="%"+(ce+="."+Ye)+"%"))ye=j[pe];else if(null!=ye){if(!(Ye in ye)){if(!B)throw new o("base intrinsic for "+J+" exists, but the property is not available.");return}if(u&&Me+1>=re.length){var Ke=u(ye,Ye);ye=(He=!!Ke)&&"get"in Ke&&!("originalValue"in Ke.get)?Ke.get:ye[Ye]}else He=Y(ye,Ye),ye=ye[Ye];He&&!Pe&&(j[pe]=ye)}}return ye}},33715:(T,A,m)=>{"use strict";var y="undefined"!=typeof Symbol&&Symbol,S=m(26069);T.exports=function(){return"function"==typeof y&&"function"==typeof Symbol&&"symbol"==typeof y("foo")&&"symbol"==typeof Symbol("bar")&&S()}},26069:T=>{"use strict";T.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var m={},y=Symbol("test"),S=Object(y);if("string"==typeof y||"[object Symbol]"!==Object.prototype.toString.call(y)||"[object Symbol]"!==Object.prototype.toString.call(S))return!1;for(y in m[y]=42,m)return!1;if("function"==typeof Object.keys&&0!==Object.keys(m).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(m).length)return!1;var o=Object.getOwnPropertySymbols(m);if(1!==o.length||o[0]!==y||!Object.prototype.propertyIsEnumerable.call(m,y))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var l=Object.getOwnPropertyDescriptor(m,y);if(42!==l.value||!0!==l.enumerable)return!1}return!0}},26761:(T,A,m)=>{"use strict";var y=m(21857);T.exports=y.call(Function.call,Object.prototype.hasOwnProperty)},19556:T=>{var me,m="__lodash_hash_undefined__",y=1/0,l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/,h=/^\./,_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D=/\\(\\)?/g,x=/^\[object .+?Constructor\]$/,G="object"==typeof global&&global&&global.Object===Object&&global,j="object"==typeof self&&self&&self.Object===Object&&self,F=G||j||Function("return this")(),Y=Array.prototype,ae=Function.prototype,ie=Object.prototype,he=F["__core-js_shared__"],te=(me=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||""))?"Symbol(src)_1."+me:"",Z=ae.toString,ee=ie.hasOwnProperty,$=ie.toString,H=RegExp("^"+Z.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),de=F.Symbol,J=Y.splice,B=En(F,"Map"),re=En(Object,"create"),ce=de?de.prototype:void 0,Ee=ce?ce.toString:void 0;function pe(me){var Ne=-1,et=me?me.length:0;for(this.clear();++Ne<et;){var Dt=me[Ne];this.set(Dt[0],Dt[1])}}function Ye(me){var Ne=-1,et=me?me.length:0;for(this.clear();++Ne<et;){var Dt=me[Ne];this.set(Dt[0],Dt[1])}}function tn(me){var Ne=-1,et=me?me.length:0;for(this.clear();++Ne<et;){var Dt=me[Ne];this.set(Dt[0],Dt[1])}}function Bt(me,Ne){for(var et=me.length;et--;)if(_n(me[et][0],Ne))return et;return-1}function hi(me,Ne){var et=me.__data__;return function(me){var Ne=typeof me;return"string"==Ne||"number"==Ne||"symbol"==Ne||"boolean"==Ne?"__proto__"!==me:null===me}(Ne)?et["string"==typeof Ne?"string":"hash"]:et.map}function En(me,Ne){var et=function(me,Ne){return null==me?void 0:me[Ne]}(me,Ne);return function(me){return!(!xn(me)||function(me){return!!te&&te in me}(me))&&(function(me){var Ne=xn(me)?$.call(me):"";return"[object Function]"==Ne||"[object GeneratorFunction]"==Ne}(me)||function(me){var Ne=!1;if(null!=me&&"function"!=typeof me.toString)try{Ne=!!(me+"")}catch(et){}return Ne}(me)?H:x).test(function(me){if(null!=me){try{return Z.call(me)}catch(Ne){}try{return me+""}catch(Ne){}}return""}(me))}(et)?et:void 0}pe.prototype.clear=function(){this.__data__=re?re(null):{}},pe.prototype.delete=function(me){return this.has(me)&&delete this.__data__[me]},pe.prototype.get=function(me){var Ne=this.__data__;if(re){var et=Ne[me];return et===m?void 0:et}return ee.call(Ne,me)?Ne[me]:void 0},pe.prototype.has=function(me){var Ne=this.__data__;return re?void 0!==Ne[me]:ee.call(Ne,me)},pe.prototype.set=function(me,Ne){return this.__data__[me]=re&&void 0===Ne?m:Ne,this},Ye.prototype.clear=function(){this.__data__=[]},Ye.prototype.delete=function(me){var Ne=this.__data__,et=Bt(Ne,me);return!(et<0||(et==Ne.length-1?Ne.pop():J.call(Ne,et,1),0))},Ye.prototype.get=function(me){var Ne=this.__data__,et=Bt(Ne,me);return et<0?void 0:Ne[et][1]},Ye.prototype.has=function(me){return Bt(this.__data__,me)>-1},Ye.prototype.set=function(me,Ne){var et=this.__data__,Dt=Bt(et,me);return Dt<0?et.push([me,Ne]):et[Dt][1]=Ne,this},tn.prototype.clear=function(){this.__data__={hash:new pe,map:new(B||Ye),string:new pe}},tn.prototype.delete=function(me){return hi(this,me).delete(me)},tn.prototype.get=function(me){return hi(this,me).get(me)},tn.prototype.has=function(me){return hi(this,me).has(me)},tn.prototype.set=function(me,Ne){return hi(this,me).set(me,Ne),this};var Oe=Vt(function(me){me=function(me){return null==me?"":function(me){if("string"==typeof me)return me;if(Rt(me))return Ee?Ee.call(me):"";var Ne=me+"";return"0"==Ne&&1/me==-y?"-0":Ne}(me)}(me);var Ne=[];return h.test(me)&&Ne.push(""),me.replace(_,function(et,Dt,Xt,$t){Ne.push(Xt?$t.replace(D,"$1"):Dt||et)}),Ne});function dn(me){if("string"==typeof me||Rt(me))return me;var Ne=me+"";return"0"==Ne&&1/me==-y?"-0":Ne}function Vt(me,Ne){if("function"!=typeof me||Ne&&"function"!=typeof Ne)throw new TypeError("Expected a function");var et=function(){var Dt=arguments,Xt=Ne?Ne.apply(this,Dt):Dt[0],$t=et.cache;if($t.has(Xt))return $t.get(Xt);var tt=me.apply(this,Dt);return et.cache=$t.set(Xt,tt),tt};return et.cache=new(Vt.Cache||tn),et}function _n(me,Ne){return me===Ne||me!=me&&Ne!=Ne}Vt.Cache=tn;var Ln=Array.isArray;function xn(me){var Ne=typeof me;return!!me&&("object"==Ne||"function"==Ne)}function Rt(me){return"symbol"==typeof me||function(me){return!!me&&"object"==typeof me}(me)&&"[object Symbol]"==$.call(me)}T.exports=function(me,Ne,et){var Dt=null==me?void 0:function(me,Ne){Ne=function(me,Ne){if(Ln(me))return!1;var et=typeof me;return!("number"!=et&&"symbol"!=et&&"boolean"!=et&&null!=me&&!Rt(me))||u.test(me)||!l.test(me)||null!=Ne&&me in Object(Ne)}(Ne,me)?[Ne]:function(me){return Ln(me)?me:Oe(me)}(Ne);for(var et=0,Dt=Ne.length;null!=me&&et<Dt;)me=me[dn(Ne[et++])];return et&&et==Dt?me:void 0}(me,Ne);return void 0===Dt?et:Dt}},78452:(T,A,m)=>{var s=m(87078)(m(37684),"DataView");T.exports=s},17434:(T,A,m)=>{var y=m(1930),S=m(10868),s=m(40640),o=m(22811),l=m(31628);function u(h){var _=-1,b=null==h?0:h.length;for(this.clear();++_<b;){var D=h[_];this.set(D[0],D[1])}}u.prototype.clear=y,u.prototype.delete=S,u.prototype.get=s,u.prototype.has=o,u.prototype.set=l,T.exports=u},60748:(T,A,m)=>{var y=m(56154),S=m(49232),s=m(58847),o=m(64703),l=m(43807);function u(h){var _=-1,b=null==h?0:h.length;for(this.clear();++_<b;){var D=h[_];this.set(D[0],D[1])}}u.prototype.clear=y,u.prototype.delete=S,u.prototype.get=s,u.prototype.has=o,u.prototype.set=l,T.exports=u},15873:(T,A,m)=>{var s=m(87078)(m(37684),"Map");T.exports=s},37718:(T,A,m)=>{var y=m(11521),S=m(83019),s=m(37392),o=m(51062),l=m(35655);function u(h){var _=-1,b=null==h?0:h.length;for(this.clear();++_<b;){var D=h[_];this.set(D[0],D[1])}}u.prototype.clear=y,u.prototype.delete=S,u.prototype.get=s,u.prototype.has=o,u.prototype.set=l,T.exports=u},98680:(T,A,m)=>{var s=m(87078)(m(37684),"Promise");T.exports=s},31415:(T,A,m)=>{var s=m(87078)(m(37684),"Set");T.exports=s},93112:(T,A,m)=>{var y=m(60748),S=m(77219),s=m(68027),o=m(95307),l=m(38127),u=m(18732);function h(_){var b=this.__data__=new y(_);this.size=b.size}h.prototype.clear=S,h.prototype.delete=s,h.prototype.get=o,h.prototype.has=l,h.prototype.set=u,T.exports=h},17135:(T,A,m)=>{var y=m(37684);T.exports=y.Symbol},9456:(T,A,m)=>{var y=m(37684);T.exports=y.Uint8Array},86230:(T,A,m)=>{var s=m(87078)(m(37684),"WeakMap");T.exports=s},57963:T=>{T.exports=function(m,y){for(var S=-1,s=null==m?0:m.length;++S<s&&!1!==y(m[S],S,m););return m}},29736:T=>{T.exports=function(m,y){for(var S=-1,s=null==m?0:m.length,o=0,l=[];++S<s;){var u=m[S];y(u,S,m)&&(l[o++]=u)}return l}},87293:(T,A,m)=>{var y=m(92963),S=m(15034),s=m(81123),o=m(28924),l=m(75398),u=m(39058),_=Object.prototype.hasOwnProperty;T.exports=function(D,x){var G=s(D),j=!G&&S(D),F=!G&&!j&&o(D),q=!G&&!j&&!F&&u(D),Q=G||j||F||q,Y=Q?y(D.length,String):[],ae=Y.length;for(var ie in D)(x||_.call(D,ie))&&(!Q||!("length"==ie||F&&("offset"==ie||"parent"==ie)||q&&("buffer"==ie||"byteLength"==ie||"byteOffset"==ie)||l(ie,ae)))&&Y.push(ie);return Y}},56041:T=>{T.exports=function(m,y){for(var S=-1,s=null==m?0:m.length,o=Array(s);++S<s;)o[S]=y(m[S],S,m);return o}},33855:T=>{T.exports=function(m,y){for(var S=-1,s=y.length,o=m.length;++S<s;)m[o+S]=y[S];return m}},84805:(T,A,m)=>{var y=m(91649),S=m(43170),o=Object.prototype.hasOwnProperty;T.exports=function(u,h,_){var b=u[h];(!o.call(u,h)||!S(b,_)||void 0===_&&!(h in u))&&y(u,h,_)}},30662:(T,A,m)=>{var y=m(43170);T.exports=function(s,o){for(var l=s.length;l--;)if(y(s[l][0],o))return l;return-1}},43772:(T,A,m)=>{var y=m(45309),S=m(32863);T.exports=function(o,l){return o&&y(l,S(l),o)}},97741:(T,A,m)=>{var y=m(45309),S=m(28640);T.exports=function(o,l){return o&&y(l,S(l),o)}},91649:(T,A,m)=>{var y=m(49923);T.exports=function(s,o,l){"__proto__"==o&&y?y(s,o,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[o]=l}},82482:(T,A,m)=>{var y=m(93112),S=m(57963),s=m(84805),o=m(43772),l=m(97741),u=m(31869),h=m(70119),_=m(4504),b=m(78127),D=m(34024),x=m(16269),G=m(1395),j=m(67019),F=m(88479),q=m(5291),Q=m(81123),Y=m(28924),ae=m(10501),ie=m(4471),he=m(87858),te=m(32863),Z=m(28640),de="[object Arguments]",Ee="[object Function]",Ue="[object Object]",Xe={};Xe[de]=Xe["[object Array]"]=Xe["[object ArrayBuffer]"]=Xe["[object DataView]"]=Xe["[object Boolean]"]=Xe["[object Date]"]=Xe["[object Float32Array]"]=Xe["[object Float64Array]"]=Xe["[object Int8Array]"]=Xe["[object Int16Array]"]=Xe["[object Int32Array]"]=Xe["[object Map]"]=Xe["[object Number]"]=Xe[Ue]=Xe["[object RegExp]"]=Xe["[object Set]"]=Xe["[object String]"]=Xe["[object Symbol]"]=Xe["[object Uint8Array]"]=Xe["[object Uint8ClampedArray]"]=Xe["[object Uint16Array]"]=Xe["[object Uint32Array]"]=!0,Xe["[object Error]"]=Xe[Ee]=Xe["[object WeakMap]"]=!1,T.exports=function vi(ln,hi,En,zn,Vi,ke){var Oe,dn=1&hi,mn=2&hi,Vt=4&hi;if(En&&(Oe=Vi?En(ln,zn,Vi,ke):En(ln)),void 0!==Oe)return Oe;if(!ie(ln))return ln;var _n=Q(ln);if(_n){if(Oe=j(ln),!dn)return h(ln,Oe)}else{var Ln=G(ln),Fi=Ln==Ee||"[object GeneratorFunction]"==Ln;if(Y(ln))return u(ln,dn);if(Ln==Ue||Ln==de||Fi&&!Vi){if(Oe=mn||Fi?{}:q(ln),!dn)return mn?b(ln,l(Oe,ln)):_(ln,o(Oe,ln))}else{if(!Xe[Ln])return Vi?ln:{};Oe=F(ln,Ln,dn)}}ke||(ke=new y);var xn=ke.get(ln);if(xn)return xn;ke.set(ln,Oe),he(ln)?ln.forEach(function(Fe){Oe.add(vi(Fe,hi,En,Fe,ln,ke))}):ae(ln)&&ln.forEach(function(Fe,ot){Oe.set(ot,vi(Fe,hi,En,ot,ln,ke))});var Rt=_n?void 0:(Vt?mn?x:D:mn?Z:te)(ln);return S(Rt||ln,function(Fe,ot){Rt&&(Fe=ln[ot=Fe]),s(Oe,ot,vi(Fe,hi,En,ot,ln,ke))}),Oe}},5563:(T,A,m)=>{var y=m(4471),S=Object.create,s=function(){function o(){}return function(l){if(!y(l))return{};if(S)return S(l);o.prototype=l;var u=new o;return o.prototype=void 0,u}}();T.exports=s},36432:(T,A,m)=>{var y=m(54021),S=m(31017);T.exports=function(o,l){for(var u=0,h=(l=y(l,o)).length;null!=o&&u<h;)o=o[S(l[u++])];return u&&u==h?o:void 0}},82184:(T,A,m)=>{var y=m(33855),S=m(81123);T.exports=function(o,l,u){var h=l(o);return S(o)?h:y(h,u(o))}},77909:(T,A,m)=>{var y=m(17135),S=m(45222),s=m(48097),u=y?y.toStringTag:void 0;T.exports=function(_){return null==_?void 0===_?"[object Undefined]":"[object Null]":u&&u in Object(_)?S(_):s(_)}},43689:(T,A,m)=>{var y=m(77909),S=m(37409);T.exports=function(l){return S(l)&&"[object Arguments]"==y(l)}},80916:(T,A,m)=>{var y=m(1395),S=m(37409);T.exports=function(l){return S(l)&&"[object Map]"==y(l)}},49915:(T,A,m)=>{var y=m(88939),S=m(60862),s=m(4471),o=m(70753),u=/^\[object .+?Constructor\]$/,x=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");T.exports=function(j){return!(!s(j)||S(j))&&(y(j)?x:u).test(o(j))}},15229:(T,A,m)=>{var y=m(1395),S=m(37409);T.exports=function(l){return S(l)&&"[object Set]"==y(l)}},8596:(T,A,m)=>{var y=m(77909),S=m(24282),s=m(37409),B={};B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B["[object Arguments]"]=B["[object Array]"]=B["[object ArrayBuffer]"]=B["[object Boolean]"]=B["[object DataView]"]=B["[object Date]"]=B["[object Error]"]=B["[object Function]"]=B["[object Map]"]=B["[object Number]"]=B["[object Object]"]=B["[object RegExp]"]=B["[object Set]"]=B["[object String]"]=B["[object WeakMap]"]=!1,T.exports=function(ce){return s(ce)&&S(ce.length)&&!!B[y(ce)]}},57626:(T,A,m)=>{var y=m(43516),S=m(10863),o=Object.prototype.hasOwnProperty;T.exports=function(u){if(!y(u))return S(u);var h=[];for(var _ in Object(u))o.call(u,_)&&"constructor"!=_&&h.push(_);return h}},50899:(T,A,m)=>{var y=m(4471),S=m(43516),s=m(46183),l=Object.prototype.hasOwnProperty;T.exports=function(h){if(!y(h))return s(h);var _=S(h),b=[];for(var D in h)"constructor"==D&&(_||!l.call(h,D))||b.push(D);return b}},92963:T=>{T.exports=function(m,y){for(var S=-1,s=Array(m);++S<m;)s[S]=y(S);return s}},94496:(T,A,m)=>{var y=m(17135),S=m(56041),s=m(81123),o=m(20267),u=y?y.prototype:void 0,h=u?u.toString:void 0;T.exports=function _(b){if("string"==typeof b)return b;if(s(b))return S(b,_)+"";if(o(b))return h?h.call(b):"";var D=b+"";return"0"==D&&1/b==-1/0?"-0":D}},71214:T=>{T.exports=function(m){return function(y){return m(y)}}},54021:(T,A,m)=>{var y=m(81123),S=m(27288),s=m(11796),o=m(45803);T.exports=function(u,h){return y(u)?u:S(u,h)?[u]:s(o(u))}},40056:(T,A,m)=>{var y=m(9456);T.exports=function(s){var o=new s.constructor(s.byteLength);return new y(o).set(new y(s)),o}},31869:(T,A,m)=>{T=m.nmd(T);var y=m(37684),S=A&&!A.nodeType&&A,s=S&&T&&!T.nodeType&&T,l=s&&s.exports===S?y.Buffer:void 0,u=l?l.allocUnsafe:void 0;T.exports=function(_,b){if(b)return _.slice();var D=_.length,x=u?u(D):new _.constructor(D);return _.copy(x),x}},52737:(T,A,m)=>{var y=m(40056);T.exports=function(s,o){var l=o?y(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.byteLength)}},93349:T=>{var A=/\w*$/;T.exports=function(y){var S=new y.constructor(y.source,A.exec(y));return S.lastIndex=y.lastIndex,S}},18740:(T,A,m)=>{var y=m(17135),S=y?y.prototype:void 0,s=S?S.valueOf:void 0;T.exports=function(l){return s?Object(s.call(l)):{}}},73611:(T,A,m)=>{var y=m(40056);T.exports=function(s,o){var l=o?y(s.buffer):s.buffer;return new s.constructor(l,s.byteOffset,s.length)}},70119:T=>{T.exports=function(m,y){var S=-1,s=m.length;for(y||(y=Array(s));++S<s;)y[S]=m[S];return y}},45309:(T,A,m)=>{var y=m(84805),S=m(91649);T.exports=function(o,l,u,h){var _=!u;u||(u={});for(var b=-1,D=l.length;++b<D;){var x=l[b],G=h?h(u[x],o[x],x,u,o):void 0;void 0===G&&(G=o[x]),_?S(u,x,G):y(u,x,G)}return u}},4504:(T,A,m)=>{var y=m(45309),S=m(79976);T.exports=function(o,l){return y(o,S(o),l)}},78127:(T,A,m)=>{var y=m(45309),S=m(60456);T.exports=function(o,l){return y(o,S(o),l)}},39809:(T,A,m)=>{var y=m(37684);T.exports=y["__core-js_shared__"]},49923:(T,A,m)=>{var y=m(87078),S=function(){try{var s=y(Object,"defineProperty");return s({},"",{}),s}catch(o){}}();T.exports=S},76288:T=>{var A="object"==typeof global&&global&&global.Object===Object&&global;T.exports=A},34024:(T,A,m)=>{var y=m(82184),S=m(79976),s=m(32863);T.exports=function(l){return y(l,s,S)}},16269:(T,A,m)=>{var y=m(82184),S=m(60456),s=m(28640);T.exports=function(l){return y(l,s,S)}},26762:(T,A,m)=>{var y=m(5900);T.exports=function(s,o){var l=s.__data__;return y(o)?l["string"==typeof o?"string":"hash"]:l.map}},87078:(T,A,m)=>{var y=m(49915),S=m(63199);T.exports=function(o,l){var u=S(o,l);return y(u)?u:void 0}},23346:(T,A,m)=>{var S=m(24991)(Object.getPrototypeOf,Object);T.exports=S},45222:(T,A,m)=>{var y=m(17135),S=Object.prototype,s=S.hasOwnProperty,o=S.toString,l=y?y.toStringTag:void 0;T.exports=function(h){var _=s.call(h,l),b=h[l];try{h[l]=void 0;var D=!0}catch(G){}var x=o.call(h);return D&&(_?h[l]=b:delete h[l]),x}},79976:(T,A,m)=>{var y=m(29736),S=m(97324),o=Object.prototype.propertyIsEnumerable,l=Object.getOwnPropertySymbols;T.exports=l?function(h){return null==h?[]:(h=Object(h),y(l(h),function(_){return o.call(h,_)}))}:S},60456:(T,A,m)=>{var y=m(33855),S=m(23346),s=m(79976),o=m(97324);T.exports=Object.getOwnPropertySymbols?function(h){for(var _=[];h;)y(_,s(h)),h=S(h);return _}:o},1395:(T,A,m)=>{var y=m(78452),S=m(15873),s=m(98680),o=m(31415),l=m(86230),u=m(77909),h=m(70753),_="[object Map]",D="[object Promise]",x="[object Set]",G="[object WeakMap]",j="[object DataView]",F=h(y),q=h(S),Q=h(s),Y=h(o),ae=h(l),ie=u;(y&&ie(new y(new ArrayBuffer(1)))!=j||S&&ie(new S)!=_||s&&ie(s.resolve())!=D||o&&ie(new o)!=x||l&&ie(new l)!=G)&&(ie=function(he){var te=u(he),Z="[object Object]"==te?he.constructor:void 0,ee=Z?h(Z):"";if(ee)switch(ee){case F:return j;case q:return _;case Q:return D;case Y:return x;case ae:return G}return te}),T.exports=ie},63199:T=>{T.exports=function(m,y){return null==m?void 0:m[y]}},1930:(T,A,m)=>{var y=m(57279);T.exports=function(){this.__data__=y?y(null):{},this.size=0}},10868:T=>{T.exports=function(m){var y=this.has(m)&&delete this.__data__[m];return this.size-=y?1:0,y}},40640:(T,A,m)=>{var y=m(57279),o=Object.prototype.hasOwnProperty;T.exports=function(u){var h=this.__data__;if(y){var _=h[u];return"__lodash_hash_undefined__"===_?void 0:_}return o.call(h,u)?h[u]:void 0}},22811:(T,A,m)=>{var y=m(57279),s=Object.prototype.hasOwnProperty;T.exports=function(l){var u=this.__data__;return y?void 0!==u[l]:s.call(u,l)}},31628:(T,A,m)=>{var y=m(57279);T.exports=function(o,l){var u=this.__data__;return this.size+=this.has(o)?0:1,u[o]=y&&void 0===l?"__lodash_hash_undefined__":l,this}},67019:T=>{var m=Object.prototype.hasOwnProperty;T.exports=function(S){var s=S.length,o=new S.constructor(s);return s&&"string"==typeof S[0]&&m.call(S,"index")&&(o.index=S.index,o.input=S.input),o}},88479:(T,A,m)=>{var y=m(40056),S=m(52737),s=m(93349),o=m(18740),l=m(73611);T.exports=function(de,J,B){var re=de.constructor;switch(J){case"[object ArrayBuffer]":return y(de);case"[object Boolean]":case"[object Date]":return new re(+de);case"[object DataView]":return S(de,B);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(de,B);case"[object Map]":return new re;case"[object Number]":case"[object String]":return new re(de);case"[object RegExp]":return s(de);case"[object Set]":return new re;case"[object Symbol]":return o(de)}}},5291:(T,A,m)=>{var y=m(5563),S=m(23346),s=m(43516);T.exports=function(l){return"function"!=typeof l.constructor||s(l)?{}:y(S(l))}},75398:T=>{var m=/^(?:0|[1-9]\d*)$/;T.exports=function(S,s){var o=typeof S;return!!(s=null==s?9007199254740991:s)&&("number"==o||"symbol"!=o&&m.test(S))&&S>-1&&S%1==0&&S<s}},27288:(T,A,m)=>{var y=m(81123),S=m(20267),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;T.exports=function(u,h){if(y(u))return!1;var _=typeof u;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=u&&!S(u))||o.test(u)||!s.test(u)||null!=h&&u in Object(h)}},5900:T=>{T.exports=function(m){var y=typeof m;return"string"==y||"number"==y||"symbol"==y||"boolean"==y?"__proto__"!==m:null===m}},60862:(T,A,m)=>{var o,y=m(39809),S=(o=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";T.exports=function(o){return!!S&&S in o}},43516:T=>{var A=Object.prototype;T.exports=function(y){var S=y&&y.constructor;return y===("function"==typeof S&&S.prototype||A)}},56154:T=>{T.exports=function(){this.__data__=[],this.size=0}},49232:(T,A,m)=>{var y=m(30662),s=Array.prototype.splice;T.exports=function(l){var u=this.__data__,h=y(u,l);return!(h<0||(h==u.length-1?u.pop():s.call(u,h,1),--this.size,0))}},58847:(T,A,m)=>{var y=m(30662);T.exports=function(s){var o=this.__data__,l=y(o,s);return l<0?void 0:o[l][1]}},64703:(T,A,m)=>{var y=m(30662);T.exports=function(s){return y(this.__data__,s)>-1}},43807:(T,A,m)=>{var y=m(30662);T.exports=function(s,o){var l=this.__data__,u=y(l,s);return u<0?(++this.size,l.push([s,o])):l[u][1]=o,this}},11521:(T,A,m)=>{var y=m(17434),S=m(60748),s=m(15873);T.exports=function(){this.size=0,this.__data__={hash:new y,map:new(s||S),string:new y}}},83019:(T,A,m)=>{var y=m(26762);T.exports=function(s){var o=y(this,s).delete(s);return this.size-=o?1:0,o}},37392:(T,A,m)=>{var y=m(26762);T.exports=function(s){return y(this,s).get(s)}},51062:(T,A,m)=>{var y=m(26762);T.exports=function(s){return y(this,s).has(s)}},35655:(T,A,m)=>{var y=m(26762);T.exports=function(s,o){var l=y(this,s),u=l.size;return l.set(s,o),this.size+=l.size==u?0:1,this}},44170:(T,A,m)=>{var y=m(91407);T.exports=function(o){var l=y(o,function(h){return 500===u.size&&u.clear(),h}),u=l.cache;return l}},57279:(T,A,m)=>{var S=m(87078)(Object,"create");T.exports=S},10863:(T,A,m)=>{var S=m(24991)(Object.keys,Object);T.exports=S},46183:T=>{T.exports=function(m){var y=[];if(null!=m)for(var S in Object(m))y.push(S);return y}},52560:(T,A,m)=>{T=m.nmd(T);var y=m(76288),S=A&&!A.nodeType&&A,s=S&&T&&!T.nodeType&&T,l=s&&s.exports===S&&y.process,u=function(){try{return s&&s.require&&s.require("util").types||l&&l.binding&&l.binding("util")}catch(_){}}();T.exports=u},48097:T=>{var m=Object.prototype.toString;T.exports=function(S){return m.call(S)}},24991:T=>{T.exports=function(m,y){return function(S){return m(y(S))}}},37684:(T,A,m)=>{var y=m(76288),S="object"==typeof self&&self&&self.Object===Object&&self,s=y||S||Function("return this")();T.exports=s},77219:(T,A,m)=>{var y=m(60748);T.exports=function(){this.__data__=new y,this.size=0}},68027:T=>{T.exports=function(m){var y=this.__data__,S=y.delete(m);return this.size=y.size,S}},95307:T=>{T.exports=function(m){return this.__data__.get(m)}},38127:T=>{T.exports=function(m){return this.__data__.has(m)}},18732:(T,A,m)=>{var y=m(60748),S=m(15873),s=m(37718);T.exports=function(u,h){var _=this.__data__;if(_ instanceof y){var b=_.__data__;if(!S||b.length<199)return b.push([u,h]),this.size=++_.size,this;_=this.__data__=new s(b)}return _.set(u,h),this.size=_.size,this}},11796:(T,A,m)=>{var y=m(44170),S=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=y(function(l){var u=[];return 46===l.charCodeAt(0)&&u.push(""),l.replace(S,function(h,_,b,D){u.push(b?D.replace(s,"$1"):_||h)}),u});T.exports=o},31017:(T,A,m)=>{var y=m(20267);T.exports=function(o){if("string"==typeof o||y(o))return o;var l=o+"";return"0"==l&&1/o==-1/0?"-0":l}},70753:T=>{var m=Function.prototype.toString;T.exports=function(S){if(null!=S){try{return m.call(S)}catch(s){}try{return S+""}catch(s){}}return""}},57469:(T,A,m)=>{var y=m(82482);T.exports=function(l){return y(l,5)}},43170:T=>{T.exports=function(m,y){return m===y||m!=m&&y!=y}},17410:(T,A,m)=>{var y=m(36432);T.exports=function(s,o,l){var u=null==s?void 0:y(s,o);return void 0===u?l:u}},15034:(T,A,m)=>{var y=m(43689),S=m(37409),s=Object.prototype,o=s.hasOwnProperty,l=s.propertyIsEnumerable,u=y(function(){return arguments}())?y:function(h){return S(h)&&o.call(h,"callee")&&!l.call(h,"callee")};T.exports=u},81123:T=>{T.exports=Array.isArray},59809:(T,A,m)=>{var y=m(88939),S=m(24282);T.exports=function(o){return null!=o&&S(o.length)&&!y(o)}},28924:(T,A,m)=>{T=m.nmd(T);var y=m(37684),S=m(45801),s=A&&!A.nodeType&&A,o=s&&T&&!T.nodeType&&T,u=o&&o.exports===s?y.Buffer:void 0;T.exports=(u?u.isBuffer:void 0)||S},85191:(T,A,m)=>{var y=m(57626),S=m(1395),s=m(15034),o=m(81123),l=m(59809),u=m(28924),h=m(43516),_=m(39058),G=Object.prototype.hasOwnProperty;T.exports=function(F){if(null==F)return!0;if(l(F)&&(o(F)||"string"==typeof F||"function"==typeof F.splice||u(F)||_(F)||s(F)))return!F.length;var q=S(F);if("[object Map]"==q||"[object Set]"==q)return!F.size;if(h(F))return!y(F).length;for(var Q in F)if(G.call(F,Q))return!1;return!0}},88939:(T,A,m)=>{var y=m(77909),S=m(4471);T.exports=function(_){if(!S(_))return!1;var b=y(_);return"[object Function]"==b||"[object GeneratorFunction]"==b||"[object AsyncFunction]"==b||"[object Proxy]"==b}},24282:T=>{T.exports=function(y){return"number"==typeof y&&y>-1&&y%1==0&&y<=9007199254740991}},10501:(T,A,m)=>{var y=m(80916),S=m(71214),s=m(52560),o=s&&s.isMap,l=o?S(o):y;T.exports=l},4471:T=>{T.exports=function(m){var y=typeof m;return null!=m&&("object"==y||"function"==y)}},37409:T=>{T.exports=function(m){return null!=m&&"object"==typeof m}},64994:(T,A,m)=>{var y=m(77909),S=m(23346),s=m(37409),h=Function.prototype.toString,_=Object.prototype.hasOwnProperty,b=h.call(Object);T.exports=function(x){if(!s(x)||"[object Object]"!=y(x))return!1;var G=S(x);if(null===G)return!0;var j=_.call(G,"constructor")&&G.constructor;return"function"==typeof j&&j instanceof j&&h.call(j)==b}},87858:(T,A,m)=>{var y=m(15229),S=m(71214),s=m(52560),o=s&&s.isSet,l=o?S(o):y;T.exports=l},20267:(T,A,m)=>{var y=m(77909),S=m(37409);T.exports=function(l){return"symbol"==typeof l||S(l)&&"[object Symbol]"==y(l)}},39058:(T,A,m)=>{var y=m(8596),S=m(71214),s=m(52560),o=s&&s.isTypedArray,l=o?S(o):y;T.exports=l},32863:(T,A,m)=>{var y=m(87293),S=m(57626),s=m(59809);T.exports=function(l){return s(l)?y(l):S(l)}},28640:(T,A,m)=>{var y=m(87293),S=m(50899),s=m(59809);T.exports=function(l){return s(l)?y(l,!0):S(l)}},91407:(T,A,m)=>{var y=m(37718);function s(o,l){if("function"!=typeof o||null!=l&&"function"!=typeof l)throw new TypeError("Expected a function");var u=function(){var h=arguments,_=l?l.apply(this,h):h[0],b=u.cache;if(b.has(_))return b.get(_);var D=o.apply(this,h);return u.cache=b.set(_,D)||b,D};return u.cache=new(s.Cache||y),u}s.Cache=y,T.exports=s},97324:T=>{T.exports=function(){return[]}},45801:T=>{T.exports=function(){return!1}},45803:(T,A,m)=>{var y=m(94496);T.exports=function(s){return null==s?"":y(s)}},94292:(T,A,m)=>{var y="function"==typeof Map&&Map.prototype,S=Object.getOwnPropertyDescriptor&&y?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,s=y&&S&&"function"==typeof S.get?S.get:null,o=y&&Map.prototype.forEach,l="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,h=l&&u&&"function"==typeof u.get?u.get:null,_=l&&Set.prototype.forEach,D="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,G="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,F="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,q=Boolean.prototype.valueOf,Q=Object.prototype.toString,Y=Function.prototype.toString,ae=String.prototype.match,ie="function"==typeof BigInt?BigInt.prototype.valueOf:null,he=Object.getOwnPropertySymbols,te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Z="function"==typeof Symbol&&"object"==typeof Symbol.iterator,ee=Object.prototype.propertyIsEnumerable,$=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ke){return ke.__proto__}:null),H=m(96553).custom,de=H&&He(H)?H:null,J="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function B(ke,Oe,dn){var mn="double"===(dn.quoteStyle||Oe)?'"':"'";return mn+ke+mn}function re(ke){return String(ke).replace(/"/g,"&quot;")}function ce(ke){return!("[object Array]"!==Ke(ke)||J&&"object"==typeof ke&&J in ke)}function He(ke){if(Z)return ke&&"object"==typeof ke&&ke instanceof Symbol;if("symbol"==typeof ke)return!0;if(!ke||"object"!=typeof ke||!te)return!1;try{return te.call(ke),!0}catch(Oe){}return!1}T.exports=function ke(Oe,dn,mn,Vt){var _n=dn||{};if(yt(_n,"quoteStyle")&&"single"!==_n.quoteStyle&&"double"!==_n.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(yt(_n,"maxStringLength")&&("number"==typeof _n.maxStringLength?_n.maxStringLength<0&&_n.maxStringLength!==1/0:null!==_n.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Ln=!yt(_n,"customInspect")||_n.customInspect;if("boolean"!=typeof Ln&&"symbol"!==Ln)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(yt(_n,"indent")&&null!==_n.indent&&"\t"!==_n.indent&&!(parseInt(_n.indent,10)===_n.indent&&_n.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===Oe)return"undefined";if(null===Oe)return"null";if("boolean"==typeof Oe)return Oe?"true":"false";if("string"==typeof Oe)return Bt(Oe,_n);if("number"==typeof Oe)return 0===Oe?1/0/Oe>0?"0":"-0":String(Oe);if("bigint"==typeof Oe)return String(Oe)+"n";var Fi=void 0===_n.depth?5:_n.depth;if(void 0===mn&&(mn=0),mn>=Fi&&Fi>0&&"object"==typeof Oe)return ce(Oe)?"[Array]":"[Object]";var xn=function(ke,Oe){var dn;if("\t"===ke.indent)dn="\t";else{if(!("number"==typeof ke.indent&&ke.indent>0))return null;dn=Array(ke.indent+1).join(" ")}return{base:dn,prev:Array(Oe+1).join(dn)}}(_n,mn);if(void 0===Vt)Vt=[];else if(kt(Vt,Oe)>=0)return"[Circular]";function wt(Rr,Rl,ca){if(Rl&&(Vt=Vt.slice()).push(Rl),ca){var rn={depth:_n.depth};return yt(_n,"quoteStyle")&&(rn.quoteStyle=_n.quoteStyle),ke(Rr,rn,mn+1,Vt)}return ke(Rr,_n,mn+1,Vt)}if("function"==typeof Oe){var Rt=function(ke){if(ke.name)return ke.name;var Oe=ae.call(Y.call(ke),/^function\s*([\w$]+)/);return Oe?Oe[1]:null}(Oe),Fe=Vi(Oe,wt);return"[Function"+(Rt?": "+Rt:" (anonymous)")+"]"+(Fe.length>0?" { "+Fe.join(", ")+" }":"")}if(He(Oe)){var ot=Z?String(Oe).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):te.call(Oe);return"object"!=typeof Oe||Z?ot:Xe(ot)}if(function(ke){return!(!ke||"object"!=typeof ke)&&("undefined"!=typeof HTMLElement&&ke instanceof HTMLElement||"string"==typeof ke.nodeName&&"function"==typeof ke.getAttribute)}(Oe)){for(var me="<"+String(Oe.nodeName).toLowerCase(),Ne=Oe.attributes||[],et=0;et<Ne.length;et++)me+=" "+Ne[et].name+"="+B(re(Ne[et].value),"double",_n);return me+=">",Oe.childNodes&&Oe.childNodes.length&&(me+="..."),me+"</"+String(Oe.nodeName).toLowerCase()+">"}if(ce(Oe)){if(0===Oe.length)return"[]";var Dt=Vi(Oe,wt);return xn&&!function(ke){for(var Oe=0;Oe<ke.length;Oe++)if(kt(ke[Oe],"\n")>=0)return!1;return!0}(Dt)?"["+zn(Dt,xn)+"]":"[ "+Dt.join(", ")+" ]"}if(function(ke){return!("[object Error]"!==Ke(ke)||J&&"object"==typeof ke&&J in ke)}(Oe)){var Xt=Vi(Oe,wt);return 0===Xt.length?"["+String(Oe)+"]":"{ ["+String(Oe)+"] "+Xt.join(", ")+" }"}if("object"==typeof Oe&&Ln){if(de&&"function"==typeof Oe[de])return Oe[de]();if("symbol"!==Ln&&"function"==typeof Oe.inspect)return Oe.inspect()}if(function(ke){if(!s||!ke||"object"!=typeof ke)return!1;try{s.call(ke);try{h.call(ke)}catch(Oe){return!0}return ke instanceof Map}catch(Oe){}return!1}(Oe)){var $t=[];return o.call(Oe,function(Rr,Rl){$t.push(wt(Rl,Oe,!0)+" => "+wt(Rr,Oe))}),ln("Map",s.call(Oe),$t,xn)}if(function(ke){if(!h||!ke||"object"!=typeof ke)return!1;try{h.call(ke);try{s.call(ke)}catch(Oe){return!0}return ke instanceof Set}catch(Oe){}return!1}(Oe)){var tt=[];return _.call(Oe,function(Rr){tt.push(wt(Rr,Oe))}),ln("Set",h.call(Oe),tt,xn)}if(function(ke){if(!D||!ke||"object"!=typeof ke)return!1;try{D.call(ke,D);try{G.call(ke,G)}catch(Oe){return!0}return ke instanceof WeakMap}catch(Oe){}return!1}(Oe))return vi("WeakMap");if(function(ke){if(!G||!ke||"object"!=typeof ke)return!1;try{G.call(ke,G);try{D.call(ke,D)}catch(Oe){return!0}return ke instanceof WeakSet}catch(Oe){}return!1}(Oe))return vi("WeakSet");if(function(ke){if(!F||!ke||"object"!=typeof ke)return!1;try{return F.call(ke),!0}catch(Oe){}return!1}(Oe))return vi("WeakRef");if(function(ke){return!("[object Number]"!==Ke(ke)||J&&"object"==typeof ke&&J in ke)}(Oe))return Xe(wt(Number(Oe)));if(function(ke){if(!ke||"object"!=typeof ke||!ie)return!1;try{return ie.call(ke),!0}catch(Oe){}return!1}(Oe))return Xe(wt(ie.call(Oe)));if(function(ke){return!("[object Boolean]"!==Ke(ke)||J&&"object"==typeof ke&&J in ke)}(Oe))return Xe(q.call(Oe));if(function(ke){return!("[object String]"!==Ke(ke)||J&&"object"==typeof ke&&J in ke)}(Oe))return Xe(wt(String(Oe)));if(!function(ke){return!("[object Date]"!==Ke(ke)||J&&"object"==typeof ke&&J in ke)}(Oe)&&!function(ke){return!("[object RegExp]"!==Ke(ke)||J&&"object"==typeof ke&&J in ke)}(Oe)){var Qt=Vi(Oe,wt),hn=$?$(Oe)===Object.prototype:Oe instanceof Object||Oe.constructor===Object,vt=Oe instanceof Object?"":"null prototype",Et=!hn&&J&&Object(Oe)===Oe&&J in Oe?Ke(Oe).slice(8,-1):vt?"Object":"",pi=(hn||"function"!=typeof Oe.constructor?"":Oe.constructor.name?Oe.constructor.name+" ":"")+(Et||vt?"["+[].concat(Et||[],vt||[]).join(": ")+"] ":"");return 0===Qt.length?pi+"{}":xn?pi+"{"+zn(Qt,xn)+"}":pi+"{ "+Qt.join(", ")+" }"}return String(Oe)};var st=Object.prototype.hasOwnProperty||function(ke){return ke in this};function yt(ke,Oe){return st.call(ke,Oe)}function Ke(ke){return Q.call(ke)}function kt(ke,Oe){if(ke.indexOf)return ke.indexOf(Oe);for(var dn=0,mn=ke.length;dn<mn;dn++)if(ke[dn]===Oe)return dn;return-1}function Bt(ke,Oe){if(ke.length>Oe.maxStringLength){var dn=ke.length-Oe.maxStringLength,mn="... "+dn+" more character"+(dn>1?"s":"");return Bt(ke.slice(0,Oe.maxStringLength),Oe)+mn}return B(ke.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,vn),"single",Oe)}function vn(ke){var Oe=ke.charCodeAt(0),dn={8:"b",9:"t",10:"n",12:"f",13:"r"}[Oe];return dn?"\\"+dn:"\\x"+(Oe<16?"0":"")+Oe.toString(16).toUpperCase()}function Xe(ke){return"Object("+ke+")"}function vi(ke){return ke+" { ? }"}function ln(ke,Oe,dn,mn){return ke+" ("+Oe+") {"+(mn?zn(dn,mn):dn.join(", "))+"}"}function zn(ke,Oe){if(0===ke.length)return"";var dn="\n"+Oe.prev+Oe.base;return dn+ke.join(","+dn)+"\n"+Oe.prev}function Vi(ke,Oe){var dn=ce(ke),mn=[];if(dn){mn.length=ke.length;for(var Vt=0;Vt<ke.length;Vt++)mn[Vt]=yt(ke,Vt)?Oe(ke[Vt],ke):""}var Ln,_n="function"==typeof he?he(ke):[];if(Z){Ln={};for(var Fi=0;Fi<_n.length;Fi++)Ln["$"+_n[Fi]]=_n[Fi]}for(var xn in ke)!yt(ke,xn)||dn&&String(Number(xn))===xn&&xn<ke.length||Z&&Ln["$"+xn]instanceof Symbol||(/[^\w$]/.test(xn)?mn.push(Oe(xn,ke)+": "+Oe(ke[xn],ke)):mn.push(xn+": "+Oe(ke[xn],ke)));if("function"==typeof he)for(var wt=0;wt<_n.length;wt++)ee.call(ke,_n[wt])&&mn.push("["+Oe(_n[wt])+"]: "+Oe(ke[_n[wt]],ke));return mn}},74946:T=>{"use strict";function A(m,y){return Object.prototype.hasOwnProperty.call(m,y)}T.exports=function(m,y,S,s){S=S||"=";var o={};if("string"!=typeof m||0===m.length)return o;var l=/\+/g;m=m.split(y=y||"&");var u=1e3;s&&"number"==typeof s.maxKeys&&(u=s.maxKeys);var h=m.length;u>0&&h>u&&(h=u);for(var _=0;_<h;++_){var x,G,j,F,b=m[_].replace(l,"%20"),D=b.indexOf(S);D>=0?(x=b.substr(0,D),G=b.substr(D+1)):(x=b,G=""),j=decodeURIComponent(x),F=decodeURIComponent(G),A(o,j)?Array.isArray(o[j])?o[j].push(F):o[j]=[o[j],F]:o[j]=F}return o}},83392:T=>{"use strict";var A=function(m){switch(typeof m){case"string":return m;case"boolean":return m?"true":"false";case"number":return isFinite(m)?m:"";default:return""}};T.exports=function(m,y,S,s){return y=y||"&",S=S||"=",null===m&&(m=void 0),"object"==typeof m?Object.keys(m).map(function(o){var l=encodeURIComponent(A(o))+S;return Array.isArray(m[o])?m[o].map(function(u){return l+encodeURIComponent(A(u))}).join(y):l+encodeURIComponent(A(m[o]))}).join(y):s?encodeURIComponent(A(s))+S+encodeURIComponent(A(m)):""}},1521:(T,A,m)=>{"use strict";A.decode=A.parse=m(74946),A.encode=A.stringify=m(83392)},32518:T=>{var A=function(m){"use strict";var s,y=Object.prototype,S=y.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function _(pe,ye,Pe){return Object.defineProperty(pe,ye,{value:Pe,enumerable:!0,configurable:!0,writable:!0}),pe[ye]}try{_({},"")}catch(pe){_=function(ye,Pe,Ue){return ye[Pe]=Ue}}function b(pe,ye,Pe,Ue){var He=Object.create((ye&&ye.prototype instanceof Q?ye:Q).prototype),Ye=new re(Ue||[]);return He._invoke=function(pe,ye,Pe){var Ue=x;return function(He,Ye){if(Ue===j)throw new Error("Generator is already running");if(Ue===F){if("throw"===He)throw Ye;return Ee()}for(Pe.method=He,Pe.arg=Ye;;){var st=Pe.delegate;if(st){var yt=de(st,Pe);if(yt){if(yt===q)continue;return yt}}if("next"===Pe.method)Pe.sent=Pe._sent=Pe.arg;else if("throw"===Pe.method){if(Ue===x)throw Ue=F,Pe.arg;Pe.dispatchException(Pe.arg)}else"return"===Pe.method&&Pe.abrupt("return",Pe.arg);Ue=j;var Ke=D(pe,ye,Pe);if("normal"===Ke.type){if(Ue=Pe.done?F:G,Ke.arg===q)continue;return{value:Ke.arg,done:Pe.done}}"throw"===Ke.type&&(Ue=F,Pe.method="throw",Pe.arg=Ke.arg)}}}(pe,Pe,Ye),He}function D(pe,ye,Pe){try{return{type:"normal",arg:pe.call(ye,Pe)}}catch(Ue){return{type:"throw",arg:Ue}}}m.wrap=b;var x="suspendedStart",G="suspendedYield",j="executing",F="completed",q={};function Q(){}function Y(){}function ae(){}var ie={};_(ie,l,function(){return this});var he=Object.getPrototypeOf,te=he&&he(he(ce([])));te&&te!==y&&S.call(te,l)&&(ie=te);var Z=ae.prototype=Q.prototype=Object.create(ie);function ee(pe){["next","throw","return"].forEach(function(ye){_(pe,ye,function(Pe){return this._invoke(ye,Pe)})})}function $(pe,ye){function Pe(He,Ye,st,yt){var Ke=D(pe[He],pe,Ye);if("throw"!==Ke.type){var Tt=Ke.arg,kt=Tt.value;return kt&&"object"==typeof kt&&S.call(kt,"__await")?ye.resolve(kt.__await).then(function(tn){Pe("next",tn,st,yt)},function(tn){Pe("throw",tn,st,yt)}):ye.resolve(kt).then(function(tn){Tt.value=tn,st(Tt)},function(tn){return Pe("throw",tn,st,yt)})}yt(Ke.arg)}var Ue;this._invoke=function(He,Ye){function st(){return new ye(function(yt,Ke){Pe(He,Ye,yt,Ke)})}return Ue=Ue?Ue.then(st,st):st()}}function de(pe,ye){var Pe=pe.iterator[ye.method];if(Pe===s){if(ye.delegate=null,"throw"===ye.method){if(pe.iterator.return&&(ye.method="return",ye.arg=s,de(pe,ye),"throw"===ye.method))return q;ye.method="throw",ye.arg=new TypeError("The iterator does not provide a 'throw' method")}return q}var Ue=D(Pe,pe.iterator,ye.arg);if("throw"===Ue.type)return ye.method="throw",ye.arg=Ue.arg,ye.delegate=null,q;var Me=Ue.arg;return Me?Me.done?(ye[pe.resultName]=Me.value,ye.next=pe.nextLoc,"return"!==ye.method&&(ye.method="next",ye.arg=s),ye.delegate=null,q):Me:(ye.method="throw",ye.arg=new TypeError("iterator result is not an object"),ye.delegate=null,q)}function J(pe){var ye={tryLoc:pe[0]};1 in pe&&(ye.catchLoc=pe[1]),2 in pe&&(ye.finallyLoc=pe[2],ye.afterLoc=pe[3]),this.tryEntries.push(ye)}function B(pe){var ye=pe.completion||{};ye.type="normal",delete ye.arg,pe.completion=ye}function re(pe){this.tryEntries=[{tryLoc:"root"}],pe.forEach(J,this),this.reset(!0)}function ce(pe){if(pe){var ye=pe[l];if(ye)return ye.call(pe);if("function"==typeof pe.next)return pe;if(!isNaN(pe.length)){var Pe=-1,Ue=function Me(){for(;++Pe<pe.length;)if(S.call(pe,Pe))return Me.value=pe[Pe],Me.done=!1,Me;return Me.value=s,Me.done=!0,Me};return Ue.next=Ue}}return{next:Ee}}function Ee(){return{value:s,done:!0}}return Y.prototype=ae,_(Z,"constructor",ae),_(ae,"constructor",Y),Y.displayName=_(ae,h,"GeneratorFunction"),m.isGeneratorFunction=function(pe){var ye="function"==typeof pe&&pe.constructor;return!!ye&&(ye===Y||"GeneratorFunction"===(ye.displayName||ye.name))},m.mark=function(pe){return Object.setPrototypeOf?Object.setPrototypeOf(pe,ae):(pe.__proto__=ae,_(pe,h,"GeneratorFunction")),pe.prototype=Object.create(Z),pe},m.awrap=function(pe){return{__await:pe}},ee($.prototype),_($.prototype,u,function(){return this}),m.AsyncIterator=$,m.async=function(pe,ye,Pe,Ue,Me){void 0===Me&&(Me=Promise);var He=new $(b(pe,ye,Pe,Ue),Me);return m.isGeneratorFunction(ye)?He:He.next().then(function(Ye){return Ye.done?Ye.value:He.next()})},ee(Z),_(Z,h,"Generator"),_(Z,l,function(){return this}),_(Z,"toString",function(){return"[object Generator]"}),m.keys=function(pe){var ye=[];for(var Pe in pe)ye.push(Pe);return ye.reverse(),function Ue(){for(;ye.length;){var Me=ye.pop();if(Me in pe)return Ue.value=Me,Ue.done=!1,Ue}return Ue.done=!0,Ue}},m.values=ce,re.prototype={constructor:re,reset:function(pe){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(B),!pe)for(var ye in this)"t"===ye.charAt(0)&&S.call(this,ye)&&!isNaN(+ye.slice(1))&&(this[ye]=s)},stop:function(){this.done=!0;var ye=this.tryEntries[0].completion;if("throw"===ye.type)throw ye.arg;return this.rval},dispatchException:function(pe){if(this.done)throw pe;var ye=this;function Pe(yt,Ke){return He.type="throw",He.arg=pe,ye.next=yt,Ke&&(ye.method="next",ye.arg=s),!!Ke}for(var Ue=this.tryEntries.length-1;Ue>=0;--Ue){var Me=this.tryEntries[Ue],He=Me.completion;if("root"===Me.tryLoc)return Pe("end");if(Me.tryLoc<=this.prev){var Ye=S.call(Me,"catchLoc"),st=S.call(Me,"finallyLoc");if(Ye&&st){if(this.prev<Me.catchLoc)return Pe(Me.catchLoc,!0);if(this.prev<Me.finallyLoc)return Pe(Me.finallyLoc)}else if(Ye){if(this.prev<Me.catchLoc)return Pe(Me.catchLoc,!0)}else{if(!st)throw new Error("try statement without catch or finally");if(this.prev<Me.finallyLoc)return Pe(Me.finallyLoc)}}}},abrupt:function(pe,ye){for(var Pe=this.tryEntries.length-1;Pe>=0;--Pe){var Ue=this.tryEntries[Pe];if(Ue.tryLoc<=this.prev&&S.call(Ue,"finallyLoc")&&this.prev<Ue.finallyLoc){var Me=Ue;break}}Me&&("break"===pe||"continue"===pe)&&Me.tryLoc<=ye&&ye<=Me.finallyLoc&&(Me=null);var He=Me?Me.completion:{};return He.type=pe,He.arg=ye,Me?(this.method="next",this.next=Me.finallyLoc,q):this.complete(He)},complete:function(pe,ye){if("throw"===pe.type)throw pe.arg;return"break"===pe.type||"continue"===pe.type?this.next=pe.arg:"return"===pe.type?(this.rval=this.arg=pe.arg,this.method="return",this.next="end"):"normal"===pe.type&&ye&&(this.next=ye),q},finish:function(pe){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var Pe=this.tryEntries[ye];if(Pe.finallyLoc===pe)return this.complete(Pe.completion,Pe.afterLoc),B(Pe),q}},catch:function(pe){for(var ye=this.tryEntries.length-1;ye>=0;--ye){var Pe=this.tryEntries[ye];if(Pe.tryLoc===pe){var Ue=Pe.completion;if("throw"===Ue.type){var Me=Ue.arg;B(Pe)}return Me}}throw new Error("illegal catch attempt")},delegateYield:function(pe,ye,Pe){return this.delegate={iterator:ce(pe),resultName:ye,nextLoc:Pe},"next"===this.method&&(this.arg=s),q}},m}(T.exports);try{regeneratorRuntime=A}catch(m){"object"==typeof globalThis?globalThis.regeneratorRuntime=A:Function("r","regeneratorRuntime = r")(A)}},73340:(T,A,m)=>{"use strict";var y=m(93602),S=m(29448),s=m(94292),o=y("%TypeError%"),l=y("%WeakMap%",!0),u=y("%Map%",!0),h=S("WeakMap.prototype.get",!0),_=S("WeakMap.prototype.set",!0),b=S("WeakMap.prototype.has",!0),D=S("Map.prototype.get",!0),x=S("Map.prototype.set",!0),G=S("Map.prototype.has",!0),j=function(Y,ae){for(var he,ie=Y;null!==(he=ie.next);ie=he)if(he.key===ae)return ie.next=he.next,he.next=Y.next,Y.next=he,he};T.exports=function(){var ae,ie,he,te={assert:function(Z){if(!te.has(Z))throw new o("Side channel does not contain "+s(Z))},get:function(Z){if(l&&Z&&("object"==typeof Z||"function"==typeof Z)){if(ae)return h(ae,Z)}else if(u){if(ie)return D(ie,Z)}else if(he)return function(Y,ae){var ie=j(Y,ae);return ie&&ie.value}(he,Z)},has:function(Z){if(l&&Z&&("object"==typeof Z||"function"==typeof Z)){if(ae)return b(ae,Z)}else if(u){if(ie)return G(ie,Z)}else if(he)return function(Y,ae){return!!j(Y,ae)}(he,Z);return!1},set:function(Z,ee){l&&Z&&("object"==typeof Z||"function"==typeof Z)?(ae||(ae=new l),_(ae,Z,ee)):u?(ie||(ie=new u),x(ie,Z,ee)):(he||(he={key:{},next:null}),function(Y,ae,ie){var he=j(Y,ae);he?he.value=ie:Y.next={key:ae,next:Y.next,value:ie}}(he,Z,ee))}};return te}},14087:(T,A,m)=>{"use strict";m.r(A),m.d(A,{default:()=>Yy,helpers:()=>ci});var y={};m.r(y),m.d(y,{JsonPatchError:()=>Wi,_areEquals:()=>al,applyOperation:()=>Or,applyPatch:()=>po,applyReducer:()=>jf,deepClone:()=>Uh,getValueByPointer:()=>Ca,validate:()=>Ql,validator:()=>sl});var S={};m.r(S),m.d(S,{compare:()=>cl,generate:()=>Ns,observe:()=>Gh,unobserve:()=>bd});var s={};m.r(s),m.d(s,{cookie:()=>Id,header:()=>Ks,path:()=>zy,query:()=>Rd});var o=m(23005),l=m(12988),u=m(66360),h=m(18753),_=m(71094),b=m(90343),D=m(84916),x=m(31946);function G(g,E,w){return E in g?x(g,E,{value:w,enumerable:!0,configurable:!0,writable:!0}):g[E]=w,g}function j(g,E){var w=o(g);if(l){var R=l(g);E&&(R=u(R).call(R,function(N){return h(g,N).enumerable})),w.push.apply(w,R)}return w}function F(g){for(var E=1;E<arguments.length;E++){var R,w=null!=arguments[E]?arguments[E]:{};if(E%2)_(R=j(Object(w),!0)).call(R,function(U){G(g,U,w[U])});else if(b)D(g,b(w));else{var N;_(N=j(Object(w))).call(N,function(U){x(g,U,h(w,U))})}}return g}var q=m(53130),Q=m.n(q),Y=m(38330),ae=m.n(Y),ie=m(77526),he=m(93449),te=m(57272),Z=m(57124),ee=m(19898),$=m(97326);function H(g,E){(null==E||E>g.length)&&(E=g.length);for(var w=0,R=new Array(E);w<E;w++)R[w]=g[w];return R}function de(g,E){var w;if(g){if("string"==typeof g)return H(g,E);var R=ee(w=Object.prototype.toString.call(g)).call(w,8,-1);if("Object"===R&&g.constructor&&(R=g.constructor.name),"Map"===R||"Set"===R)return $(g);if("Arguments"===R||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R))return H(g,E)}}function J(g,E){var w=void 0!==he&&te(g)||g["@@iterator"];if(!w){if(Z(g)||(w=de(g))||E&&g&&"number"==typeof g.length){w&&(g=w);var R=0,N=function(){};return{s:N,n:function(){return R>=g.length?{done:!0}:{done:!1,value:g[R++]}},e:function(le){throw le},f:N}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var X,U=!0,V=!1;return{s:function(){w=w.call(g)},n:function(){var le=w.next();return U=le.done,le},e:function(le){V=!0,X=le},f:function(){try{!U&&null!=w.return&&w.return()}finally{if(V)throw X}}}}var B=m(3599);function re(g){return(re="function"==typeof he&&"symbol"==typeof B?function(w){return typeof w}:function(w){return w&&"function"==typeof he&&w.constructor===he&&w!==he.prototype?"symbol":typeof w})(g)}function ye(g,E){return function(g){if(Z(g))return g}(g)||function(g,E){var w=null==g?null:void 0!==he&&te(g)||g["@@iterator"];if(null!=w){var V,X,R=[],N=!0,U=!1;try{for(w=w.call(g);!(N=(V=w.next()).done)&&(R.push(V.value),!E||R.length!==E);N=!0);}catch(se){U=!0,X=se}finally{try{!N&&null!=w.return&&w.return()}finally{if(U)throw X}}return R}}(g,E)||de(g,E)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pe=m(26394);function Ue(g,E,w,R,N,U,V){try{var X=g[U](V),se=X.value}catch(le){return void w(le)}X.done?E(se):Pe.resolve(se).then(R,N)}function Me(g){return function(){var E=this,w=arguments;return new Pe(function(R,N){var U=g.apply(E,w);function V(se){Ue(U,R,N,V,X,"next",se)}function X(se){Ue(U,R,N,V,X,"throw",se)}V(void 0)})}}var He=m(39126),Ye=m.n(He),st=m(11761),yt=m.n(st),Ke=m(20272),Tt=m.n(Ke),kt=m(89926),tn=m.n(kt),Mn=m(23289),Gn=m.n(Mn),An=m(64770),Gt=m.n(An),Dn=m(45635),Bt=m.n(Dn),vn=m(87048),Xe=m.n(vn),vi=m(45107),ln=m.n(vi),hi=m(26775),En=m.n(hi),Vi=(m(9874),m(96912)),ke=m.n(Vi);function Oe(g){return null==g}var me={isNothing:Oe,isObject:function(g){return"object"==typeof g&&null!==g},toArray:function(g){return Array.isArray(g)?g:Oe(g)?[]:[g]},repeat:function(g,E){var R,w="";for(R=0;R<E;R+=1)w+=g;return w},isNegativeZero:function(g){return 0===g&&Number.NEGATIVE_INFINITY===1/g},extend:function(g,E){var w,R,N,U;if(E)for(w=0,R=(U=Object.keys(E)).length;w<R;w+=1)g[N=U[w]]=E[N];return g}};function Ne(g,E){var w="",R=g.reason||"(unknown reason)";return g.mark?(g.mark.name&&(w+='in "'+g.mark.name+'" '),w+="("+(g.mark.line+1)+":"+(g.mark.column+1)+")",!E&&g.mark.snippet&&(w+="\n\n"+g.mark.snippet),R+" "+w):R}function et(g,E){Error.call(this),this.name="YAMLException",this.reason=g,this.mark=E,this.message=Ne(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(et.prototype=Object.create(Error.prototype)).constructor=et,et.prototype.toString=function(E){return this.name+": "+Ne(this,E)};var Dt=et;function Xt(g,E,w,R,N){var U="",V="",X=Math.floor(N/2)-1;return R-E>X&&(E=R-X+(U=" ... ").length),w-R>X&&(w=R+X-(V=" ...").length),{str:U+g.slice(E,w).replace(/\t/g,"\u2192")+V,pos:R-E+U.length}}function $t(g,E){return me.repeat(" ",E-g.length)+g}var hn=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],vt=["scalar","sequence","mapping"],pi=function(g,E){if(E=E||{},Object.keys(E).forEach(function(w){if(-1===hn.indexOf(w))throw new Dt('Unknown option "'+w+'" is met in definition of "'+g+'" YAML type.')}),this.options=E,this.tag=g,this.kind=E.kind||null,this.resolve=E.resolve||function(){return!0},this.construct=E.construct||function(w){return w},this.instanceOf=E.instanceOf||null,this.predicate=E.predicate||null,this.represent=E.represent||null,this.representName=E.representName||null,this.defaultStyle=E.defaultStyle||null,this.multi=E.multi||!1,this.styleAliases=function(g){var E={};return null!==g&&Object.keys(g).forEach(function(w){g[w].forEach(function(R){E[String(R)]=w})}),E}(E.styleAliases||null),-1===vt.indexOf(this.kind))throw new Dt('Unknown kind "'+this.kind+'" is specified for "'+g+'" YAML type.')};function Rr(g,E){var w=[];return g[E].forEach(function(R){var N=w.length;w.forEach(function(U,V){U.tag===R.tag&&U.kind===R.kind&&U.multi===R.multi&&(N=V)}),w[N]=R}),w}function ca(g){return this.extend(g)}ca.prototype.extend=function(E){var w=[],R=[];if(E instanceof pi)R.push(E);else if(Array.isArray(E))R=R.concat(E);else{if(!E||!Array.isArray(E.implicit)&&!Array.isArray(E.explicit))throw new Dt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");E.implicit&&(w=w.concat(E.implicit)),E.explicit&&(R=R.concat(E.explicit))}w.forEach(function(U){if(!(U instanceof pi))throw new Dt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(U.loadKind&&"scalar"!==U.loadKind)throw new Dt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(U.multi)throw new Dt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),R.forEach(function(U){if(!(U instanceof pi))throw new Dt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var N=Object.create(ca.prototype);return N.implicit=(this.implicit||[]).concat(w),N.explicit=(this.explicit||[]).concat(R),N.compiledImplicit=Rr(N,"implicit"),N.compiledExplicit=Rr(N,"explicit"),N.compiledTypeMap=function(){var E,w,g={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function R(N){N.multi?(g.multi[N.kind].push(N),g.multi.fallback.push(N)):g[N.kind][N.tag]=g.fallback[N.tag]=N}for(E=0,w=arguments.length;E<w;E+=1)arguments[E].forEach(R);return g}(N.compiledImplicit,N.compiledExplicit),N};var rn=ca,Ir=new pi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(g){return null!==g?g:""}}),Fu=new pi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(g){return null!==g?g:[]}}),Ef=new pi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(g){return null!==g?g:{}}}),Il=new rn({explicit:[Ir,Fu,Ef]}),Bu=new pi("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(g){if(null===g)return!0;var E=g.length;return 1===E&&"~"===g||4===E&&("null"===g||"Null"===g||"NULL"===g)},construct:function(){return null},predicate:function(g){return null===g},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Vu=new pi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(g){if(null===g)return!1;var E=g.length;return 4===E&&("true"===g||"True"===g||"TRUE"===g)||5===E&&("false"===g||"False"===g||"FALSE"===g)},construct:function(g){return"true"===g||"True"===g||"TRUE"===g},predicate:function(g){return"[object Boolean]"===Object.prototype.toString.call(g)},represent:{lowercase:function(g){return g?"true":"false"},uppercase:function(g){return g?"TRUE":"FALSE"},camelcase:function(g){return g?"True":"False"}},defaultStyle:"lowercase"});function wf(g){return 48<=g&&g<=57||65<=g&&g<=70||97<=g&&g<=102}function ph(g){return 48<=g&&g<=55}function Sf(g){return 48<=g&&g<=57}var $r=new pi("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(g){if(null===g)return!1;var N,E=g.length,w=0,R=!1;if(!E)return!1;if(("-"===(N=g[w])||"+"===N)&&(N=g[++w]),"0"===N){if(w+1===E)return!0;if("b"===(N=g[++w])){for(w++;w<E;w++)if("_"!==(N=g[w])){if("0"!==N&&"1"!==N)return!1;R=!0}return R&&"_"!==N}if("x"===N){for(w++;w<E;w++)if("_"!==(N=g[w])){if(!wf(g.charCodeAt(w)))return!1;R=!0}return R&&"_"!==N}if("o"===N){for(w++;w<E;w++)if("_"!==(N=g[w])){if(!ph(g.charCodeAt(w)))return!1;R=!0}return R&&"_"!==N}}if("_"===N)return!1;for(;w<E;w++)if("_"!==(N=g[w])){if(!Sf(g.charCodeAt(w)))return!1;R=!0}return!(!R||"_"===N)},construct:function(g){var R,E=g,w=1;if(-1!==E.indexOf("_")&&(E=E.replace(/_/g,"")),("-"===(R=E[0])||"+"===R)&&("-"===R&&(w=-1),R=(E=E.slice(1))[0]),"0"===E)return 0;if("0"===R){if("b"===E[1])return w*parseInt(E.slice(2),2);if("x"===E[1])return w*parseInt(E.slice(2),16);if("o"===E[1])return w*parseInt(E.slice(2),8)}return w*parseInt(E,10)},predicate:function(g){return"[object Number]"===Object.prototype.toString.call(g)&&g%1==0&&!me.isNegativeZero(g)},represent:{binary:function(g){return g>=0?"0b"+g.toString(2):"-0b"+g.toString(2).slice(1)},octal:function(g){return g>=0?"0o"+g.toString(8):"-0o"+g.toString(8).slice(1)},decimal:function(g){return g.toString(10)},hexadecimal:function(g){return g>=0?"0x"+g.toString(16).toUpperCase():"-0x"+g.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),xi=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Df=/^[-+]?[0-9]+e/,Mt=new pi("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(g){return!(null===g||!xi.test(g)||"_"===g[g.length-1])},construct:function(g){var E,w;return w="-"===(E=g.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(E[0])>=0&&(E=E.slice(1)),".inf"===E?1===w?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===E?NaN:w*parseFloat(E,10)},predicate:function(g){return"[object Number]"===Object.prototype.toString.call(g)&&(g%1!=0||me.isNegativeZero(g))},represent:function(g,E){var w;if(isNaN(g))switch(E){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===g)switch(E){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===g)switch(E){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(me.isNegativeZero(g))return"-0.0";return w=g.toString(10),Df.test(w)?w.replace("e",".e"):w},defaultStyle:"lowercase"}),Ho=Il.extend({implicit:[Bu,Vu,$r,Mt]}),Gu=Ho,Ic=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),fh=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Wu=new pi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(g){return null!==g&&(null!==Ic.exec(g)||null!==fh.exec(g))},construct:function(g){var E,w,R,N,U,V,X,Ae,se=0,le=null;if(null===(E=Ic.exec(g))&&(E=fh.exec(g)),null===E)throw new Error("Date resolve error");if(w=+E[1],R=+E[2]-1,N=+E[3],!E[4])return new Date(Date.UTC(w,R,N));if(U=+E[4],V=+E[5],X=+E[6],E[7]){for(se=E[7].slice(0,3);se.length<3;)se+="0";se=+se}return E[9]&&(le=6e4*(60*+E[10]+ +(E[11]||0)),"-"===E[9]&&(le=-le)),Ae=new Date(Date.UTC(w,R,N,U,V,X,se)),le&&Ae.setTime(Ae.getTime()-le),Ae},instanceOf:Date,represent:function(g){return g.toISOString()}}),on=new pi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(g){return"<<"===g||null===g}}),kl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",Kr=new pi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(g){if(null===g)return!1;var E,w,R=0,N=g.length,U=kl;for(w=0;w<N;w++)if(!((E=U.indexOf(g.charAt(w)))>64)){if(E<0)return!1;R+=6}return R%8==0},construct:function(g){var E,w,R=g.replace(/[\r\n=]/g,""),N=R.length,U=kl,V=0,X=[];for(E=0;E<N;E++)E%4==0&&E&&(X.push(V>>16&255),X.push(V>>8&255),X.push(255&V)),V=V<<6|U.indexOf(R.charAt(E));return 0==(w=N%4*6)?(X.push(V>>16&255),X.push(V>>8&255),X.push(255&V)):18===w?(X.push(V>>10&255),X.push(V>>2&255)):12===w&&X.push(V>>4&255),new Uint8Array(X)},predicate:function(g){return"[object Uint8Array]"===Object.prototype.toString.call(g)},represent:function(g){var R,N,E="",w=0,U=g.length,V=kl;for(R=0;R<U;R++)R%3==0&&R&&(E+=V[w>>18&63],E+=V[w>>12&63],E+=V[w>>6&63],E+=V[63&w]),w=(w<<8)+g[R];return 0==(N=U%3)?(E+=V[w>>18&63],E+=V[w>>12&63],E+=V[w>>6&63],E+=V[63&w]):2===N?(E+=V[w>>10&63],E+=V[w>>4&63],E+=V[w<<2&63],E+=V[64]):1===N&&(E+=V[w>>2&63],E+=V[w<<4&63],E+=V[64],E+=V[64]),E}}),ro=Object.prototype.hasOwnProperty,If=Object.prototype.toString,zu=new pi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(g){if(null===g)return!0;var w,R,N,U,V,E=[],X=g;for(w=0,R=X.length;w<R;w+=1){if(V=!1,"[object Object]"!==If.call(N=X[w]))return!1;for(U in N)if(ro.call(N,U)){if(V)return!1;V=!0}if(!V)return!1;if(-1!==E.indexOf(U))return!1;E.push(U)}return!0},construct:function(g){return null!==g?g:[]}}),Ac=Object.prototype.toString,ri=new pi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(g){if(null===g)return!0;var E,w,R,N,U,V=g;for(U=new Array(V.length),E=0,w=V.length;E<w;E+=1){if("[object Object]"!==Ac.call(R=V[E])||1!==(N=Object.keys(R)).length)return!1;U[E]=[N[0],R[N[0]]]}return!0},construct:function(g){if(null===g)return[];var E,w,R,N,U,V=g;for(U=new Array(V.length),E=0,w=V.length;E<w;E+=1)R=V[E],N=Object.keys(R),U[E]=[N[0],R[N[0]]];return U}}),zm=Object.prototype.hasOwnProperty,fi=new pi("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(g){if(null===g)return!0;var E,w=g;for(E in w)if(zm.call(w,E)&&null!==w[E])return!1;return!0},construct:function(g){return null!==g?g:{}}}),Ja=Gu.extend({implicit:[Wu,on],explicit:[Kr,zu,ri,fi]}),ns=Object.prototype.hasOwnProperty,rs=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,vh=/[\x85\u2028\u2029]/,Yu=/[,\[\]\{\}]/,Nl=/^(?:!|!!|![a-z\-]+!)$/i,Lt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function bh(g){return Object.prototype.toString.call(g)}function Go(g){return 10===g||13===g}function Ce(g){return 9===g||32===g}function gi(g){return 9===g||32===g||10===g||13===g}function Zi(g){return 44===g||91===g||93===g||123===g||125===g}function yi(g){var E;return 48<=g&&g<=57?g-48:97<=(E=32|g)&&E<=102?E-97+10:-1}function zs(g){return 120===g?2:117===g?4:85===g?8:0}function oo(g){return 48<=g&&g<=57?g-48:-1}function yh(g){return 48===g?"\0":97===g?"\x07":98===g?"\b":116===g||9===g?"\t":110===g?"\n":118===g?"\v":102===g?"\f":114===g?"\r":101===g?"\x1b":32===g?" ":34===g?'"':47===g?"/":92===g?"\\":78===g?"\x85":95===g?"\xa0":76===g?"\u2028":80===g?"\u2029":""}function To(g){return g<=65535?String.fromCharCode(g):String.fromCharCode(55296+(g-65536>>10),56320+(g-65536&1023))}for(var It=new Array(256),Rn=new Array(256),mi=0;mi<256;mi++)It[mi]=yh(mi)?1:0,Rn[mi]=yh(mi);function so(g,E){this.input=g,this.filename=E.filename||null,this.schema=E.schema||Ja,this.onWarning=E.onWarning||null,this.legacy=E.legacy||!1,this.json=E.json||!1,this.listener=E.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=g.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Es(g,E){var w={name:g.filename,buffer:g.input.slice(0,-1),position:g.position,line:g.line,column:g.position-g.lineStart};return w.snippet=function(g,E){if(E=Object.create(E||null),!g.buffer)return null;E.maxLength||(E.maxLength=79),"number"!=typeof E.indent&&(E.indent=1),"number"!=typeof E.linesBefore&&(E.linesBefore=3),"number"!=typeof E.linesAfter&&(E.linesAfter=2);for(var U,w=/\r?\n|\r|\0/g,R=[0],N=[],V=-1;U=w.exec(g.buffer);)N.push(U.index),R.push(U.index+U[0].length),g.position<=U.index&&V<0&&(V=R.length-2);V<0&&(V=R.length-1);var se,le,X="",Se=Math.min(g.line+E.linesAfter,N.length).toString().length,we=E.maxLength-(E.indent+Se+3);for(se=1;se<=E.linesBefore&&!(V-se<0);se++)le=Xt(g.buffer,R[V-se],N[V-se],g.position-(R[V]-R[V-se]),we),X=me.repeat(" ",E.indent)+$t((g.line-se+1).toString(),Se)+" | "+le.str+"\n"+X;for(le=Xt(g.buffer,R[V],N[V],g.position,we),X+=me.repeat(" ",E.indent)+$t((g.line+1).toString(),Se)+" | "+le.str+"\n",X+=me.repeat("-",E.indent+Se+3+le.pos)+"^\n",se=1;se<=E.linesAfter&&!(V+se>=N.length);se++)le=Xt(g.buffer,R[V+se],N[V+se],g.position-(R[V]-R[V+se]),we),X+=me.repeat(" ",E.indent)+$t((g.line+se+1).toString(),Se)+" | "+le.str+"\n";return X.replace(/\n$/,"")}(w),new Dt(E,w)}function Nt(g,E){throw Es(g,E)}function wo(g,E){g.onWarning&&g.onWarning.call(null,Es(g,E))}var Pi={YAML:function(E,w,R){var N,U,V;null!==E.version&&Nt(E,"duplication of %YAML directive"),1!==R.length&&Nt(E,"YAML directive accepts exactly one argument"),null===(N=/^([0-9]+)\.([0-9]+)$/.exec(R[0]))&&Nt(E,"ill-formed argument of the YAML directive"),U=parseInt(N[1],10),V=parseInt(N[2],10),1!==U&&Nt(E,"unacceptable YAML version of the document"),E.version=R[0],E.checkLineBreaks=V<2,1!==V&&2!==V&&wo(E,"unsupported YAML version of the document")},TAG:function(E,w,R){var N,U;2!==R.length&&Nt(E,"TAG directive accepts exactly two arguments"),U=R[1],Nl.test(N=R[0])||Nt(E,"ill-formed tag handle (first argument) of the TAG directive"),ns.call(E.tagMap,N)&&Nt(E,'there is a previously declared suffix for "'+N+'" tag handle'),Lt.test(U)||Nt(E,"ill-formed tag prefix (second argument) of the TAG directive");try{U=decodeURIComponent(U)}catch(V){Nt(E,"tag prefix is malformed: "+U)}E.tagMap[N]=U}};function ao(g,E,w,R){var N,U,V,X;if(E<w){if(X=g.input.slice(E,w),R)for(N=0,U=X.length;N<U;N+=1)9===(V=X.charCodeAt(N))||32<=V&&V<=1114111||Nt(g,"expected valid JSON character");else rs.test(X)&&Nt(g,"the stream contains non-printable characters");g.result+=X}}function Ts(g,E,w,R){var N,U,V,X;for(me.isObject(w)||Nt(g,"cannot merge mappings; the provided source object is unacceptable"),V=0,X=(N=Object.keys(w)).length;V<X;V+=1)ns.call(E,U=N[V])||(E[U]=w[U],R[U]=!0)}function bn(g,E,w,R,N,U,V,X,se){var le,Se;if(Array.isArray(N))for(le=0,Se=(N=Array.prototype.slice.call(N)).length;le<Se;le+=1)Array.isArray(N[le])&&Nt(g,"nested arrays are not supported inside keys"),"object"==typeof N&&"[object Object]"===bh(N[le])&&(N[le]="[object Object]");if("object"==typeof N&&"[object Object]"===bh(N)&&(N="[object Object]"),N=String(N),null===E&&(E={}),"tag:yaml.org,2002:merge"===R)if(Array.isArray(U))for(le=0,Se=U.length;le<Se;le+=1)Ts(g,E,U[le],w);else Ts(g,E,U,w);else!g.json&&!ns.call(w,N)&&ns.call(E,N)&&(g.line=V||g.line,g.lineStart=X||g.lineStart,g.position=se||g.position,Nt(g,"duplicated mapping key")),"__proto__"===N?Object.defineProperty(E,N,{configurable:!0,enumerable:!0,writable:!0,value:U}):E[N]=U,delete w[N];return E}function ha(g){var E;10===(E=g.input.charCodeAt(g.position))?g.position++:13===E?(g.position++,10===g.input.charCodeAt(g.position)&&g.position++):Nt(g,"a line break is expected"),g.line+=1,g.lineStart=g.position,g.firstTabInLine=-1}function Oi(g,E,w){for(var R=0,N=g.input.charCodeAt(g.position);0!==N;){for(;Ce(N);)9===N&&-1===g.firstTabInLine&&(g.firstTabInLine=g.position),N=g.input.charCodeAt(++g.position);if(E&&35===N)do{N=g.input.charCodeAt(++g.position)}while(10!==N&&13!==N&&0!==N);if(!Go(N))break;for(ha(g),N=g.input.charCodeAt(g.position),R++,g.lineIndent=0;32===N;)g.lineIndent++,N=g.input.charCodeAt(++g.position)}return-1!==w&&0!==R&&g.lineIndent<w&&wo(g,"deficient indentation"),R}function ws(g){var w,E=g.position;return!(45!==(w=g.input.charCodeAt(E))&&46!==w||w!==g.input.charCodeAt(E+1)||w!==g.input.charCodeAt(E+2)||(E+=3,w=g.input.charCodeAt(E),0!==w&&!gi(w)))}function Wo(g,E){1===E?g.result+=" ":E>1&&(g.result+=me.repeat("\n",E-1))}function Ch(g,E){var w,se,R=g.tag,N=g.anchor,U=[],X=!1;if(-1!==g.firstTabInLine)return!1;for(null!==g.anchor&&(g.anchorMap[g.anchor]=U),se=g.input.charCodeAt(g.position);0!==se&&(-1!==g.firstTabInLine&&(g.position=g.firstTabInLine,Nt(g,"tab characters must not be used in indentation")),45===se&&gi(g.input.charCodeAt(g.position+1)));)if(X=!0,g.position++,Oi(g,!0,-1)&&g.lineIndent<=E)U.push(null),se=g.input.charCodeAt(g.position);else if(w=g.line,Ss(g,E,3,!1,!0),U.push(g.result),Oi(g,!0,-1),se=g.input.charCodeAt(g.position),(g.line===w||g.lineIndent>E)&&0!==se)Nt(g,"bad indentation of a sequence entry");else if(g.lineIndent<E)break;return!!X&&(g.tag=R,g.anchor=N,g.kind="sequence",g.result=U,!0)}function pa(g){var E,N,U,V,w=!1,R=!1;if(33!==(V=g.input.charCodeAt(g.position)))return!1;if(null!==g.tag&&Nt(g,"duplication of a tag property"),60===(V=g.input.charCodeAt(++g.position))?(w=!0,V=g.input.charCodeAt(++g.position)):33===V?(R=!0,N="!!",V=g.input.charCodeAt(++g.position)):N="!",E=g.position,w){do{V=g.input.charCodeAt(++g.position)}while(0!==V&&62!==V);g.position<g.length?(U=g.input.slice(E,g.position),V=g.input.charCodeAt(++g.position)):Nt(g,"unexpected end of the stream within a verbatim tag")}else{for(;0!==V&&!gi(V);)33===V&&(R?Nt(g,"tag suffix cannot contain exclamation marks"):(N=g.input.slice(E-1,g.position+1),Nl.test(N)||Nt(g,"named tag handle cannot contain such characters"),R=!0,E=g.position+1)),V=g.input.charCodeAt(++g.position);U=g.input.slice(E,g.position),Yu.test(U)&&Nt(g,"tag suffix cannot contain flow indicator characters")}U&&!Lt.test(U)&&Nt(g,"tag name cannot contain such characters: "+U);try{U=decodeURIComponent(U)}catch(X){Nt(g,"tag name is malformed: "+U)}return w?g.tag=U:ns.call(g.tagMap,N)?g.tag=g.tagMap[N]+U:"!"===N?g.tag="!"+U:"!!"===N?g.tag="tag:yaml.org,2002:"+U:Nt(g,'undeclared tag handle "'+N+'"'),!0}function Pl(g){var E,w;if(38!==(w=g.input.charCodeAt(g.position)))return!1;for(null!==g.anchor&&Nt(g,"duplication of an anchor property"),w=g.input.charCodeAt(++g.position),E=g.position;0!==w&&!gi(w)&&!Zi(w);)w=g.input.charCodeAt(++g.position);return g.position===E&&Nt(g,"name of an anchor node must contain at least one character"),g.anchor=g.input.slice(E,g.position),!0}function Ss(g,E,w,R,N){var U,V,X,we,Ae,Le,Je,Ze,ut,se=1,le=!1,Se=!1;if(null!==g.listener&&g.listener("open",g),g.tag=null,g.anchor=null,g.kind=null,g.result=null,U=V=X=4===w||3===w,R&&Oi(g,!0,-1)&&(le=!0,g.lineIndent>E?se=1:g.lineIndent===E?se=0:g.lineIndent<E&&(se=-1)),1===se)for(;pa(g)||Pl(g);)Oi(g,!0,-1)?(le=!0,X=U,g.lineIndent>E?se=1:g.lineIndent===E?se=0:g.lineIndent<E&&(se=-1)):X=!1;if(X&&(X=le||N),(1===se||4===w)&&(Ze=1===w||2===w?E:E+1,ut=g.position-g.lineStart,1===se?X&&(Ch(g,ut)||function(g,E,w){var R,N,U,V,X,se,at,le=g.tag,Se=g.anchor,we={},Ae=Object.create(null),Le=null,Je=null,Ze=null,ut=!1,Ht=!1;if(-1!==g.firstTabInLine)return!1;for(null!==g.anchor&&(g.anchorMap[g.anchor]=we),at=g.input.charCodeAt(g.position);0!==at;){if(!ut&&-1!==g.firstTabInLine&&(g.position=g.firstTabInLine,Nt(g,"tab characters must not be used in indentation")),R=g.input.charCodeAt(g.position+1),U=g.line,63!==at&&58!==at||!gi(R)){if(V=g.line,X=g.lineStart,se=g.position,!Ss(g,w,2,!1,!0))break;if(g.line===U){for(at=g.input.charCodeAt(g.position);Ce(at);)at=g.input.charCodeAt(++g.position);if(58===at)gi(at=g.input.charCodeAt(++g.position))||Nt(g,"a whitespace character is expected after the key-value separator within a block mapping"),ut&&(bn(g,we,Ae,Le,Je,null,V,X,se),Le=Je=Ze=null),Ht=!0,ut=!1,N=!1,Le=g.tag,Je=g.result;else{if(!Ht)return g.tag=le,g.anchor=Se,!0;Nt(g,"can not read an implicit mapping pair; a colon is missed")}}else{if(!Ht)return g.tag=le,g.anchor=Se,!0;Nt(g,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===at?(ut&&(bn(g,we,Ae,Le,Je,null,V,X,se),Le=Je=Ze=null),Ht=!0,ut=!0,N=!0):ut?(ut=!1,N=!0):Nt(g,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),g.position+=1,at=R;if((g.line===U||g.lineIndent>E)&&(ut&&(V=g.line,X=g.lineStart,se=g.position),Ss(g,E,4,!0,N)&&(ut?Je=g.result:Ze=g.result),ut||(bn(g,we,Ae,Le,Je,Ze,V,X,se),Le=Je=Ze=null),Oi(g,!0,-1),at=g.input.charCodeAt(g.position)),(g.line===U||g.lineIndent>E)&&0!==at)Nt(g,"bad indentation of a mapping entry");else if(g.lineIndent<E)break}return ut&&bn(g,we,Ae,Le,Je,null,V,X,se),Ht&&(g.tag=le,g.anchor=Se,g.kind="mapping",g.result=we),Ht}(g,ut,Ze))||function(g,E){var R,N,U,X,Se,we,Ae,Le,Ze,ut,Ht,at,w=!0,V=g.tag,se=g.anchor,Je=Object.create(null);if(91===(at=g.input.charCodeAt(g.position)))Se=93,Le=!1,X=[];else{if(123!==at)return!1;Se=125,Le=!0,X={}}for(null!==g.anchor&&(g.anchorMap[g.anchor]=X),at=g.input.charCodeAt(++g.position);0!==at;){if(Oi(g,!0,E),(at=g.input.charCodeAt(g.position))===Se)return g.position++,g.tag=V,g.anchor=se,g.kind=Le?"mapping":"sequence",g.result=X,!0;w?44===at&&Nt(g,"expected the node content, but found ','"):Nt(g,"missed comma between flow collection entries"),Ht=null,we=Ae=!1,63===at&&gi(g.input.charCodeAt(g.position+1))&&(we=Ae=!0,g.position++,Oi(g,!0,E)),R=g.line,N=g.lineStart,U=g.position,Ss(g,E,1,!1,!0),ut=g.tag,Ze=g.result,Oi(g,!0,E),at=g.input.charCodeAt(g.position),(Ae||g.line===R)&&58===at&&(we=!0,at=g.input.charCodeAt(++g.position),Oi(g,!0,E),Ss(g,E,1,!1,!0),Ht=g.result),Le?bn(g,X,Je,ut,Ze,Ht,R,N,U):X.push(we?bn(g,null,Je,ut,Ze,Ht,R,N,U):Ze),Oi(g,!0,E),44===(at=g.input.charCodeAt(g.position))?(w=!0,at=g.input.charCodeAt(++g.position)):w=!1}Nt(g,"unexpected end of the stream within a flow collection")}(g,Ze)?Se=!0:(V&&function(g,E){var w,R,Se,we,N=1,U=!1,V=!1,X=E,se=0,le=!1;if(124===(we=g.input.charCodeAt(g.position)))R=!1;else{if(62!==we)return!1;R=!0}for(g.kind="scalar",g.result="";0!==we;)if(43===(we=g.input.charCodeAt(++g.position))||45===we)1===N?N=43===we?3:2:Nt(g,"repeat of a chomping mode identifier");else{if(!((Se=oo(we))>=0))break;0===Se?Nt(g,"bad explicit indentation width of a block scalar; it cannot be less than one"):V?Nt(g,"repeat of an indentation width identifier"):(X=E+Se-1,V=!0)}if(Ce(we)){do{we=g.input.charCodeAt(++g.position)}while(Ce(we));if(35===we)do{we=g.input.charCodeAt(++g.position)}while(!Go(we)&&0!==we)}for(;0!==we;){for(ha(g),g.lineIndent=0,we=g.input.charCodeAt(g.position);(!V||g.lineIndent<X)&&32===we;)g.lineIndent++,we=g.input.charCodeAt(++g.position);if(!V&&g.lineIndent>X&&(X=g.lineIndent),Go(we))se++;else{if(g.lineIndent<X){3===N?g.result+=me.repeat("\n",U?1+se:se):1===N&&U&&(g.result+="\n");break}for(R?Ce(we)?(le=!0,g.result+=me.repeat("\n",U?1+se:se)):le?(le=!1,g.result+=me.repeat("\n",se+1)):0===se?U&&(g.result+=" "):g.result+=me.repeat("\n",se):g.result+=me.repeat("\n",U?1+se:se),U=!0,V=!0,se=0,w=g.position;!Go(we)&&0!==we;)we=g.input.charCodeAt(++g.position);ao(g,w,g.position,!1)}}return!0}(g,Ze)||function(g,E){var w,R,N;if(39!==(w=g.input.charCodeAt(g.position)))return!1;for(g.kind="scalar",g.result="",g.position++,R=N=g.position;0!==(w=g.input.charCodeAt(g.position));)if(39===w){if(ao(g,R,g.position,!0),39!==(w=g.input.charCodeAt(++g.position)))return!0;R=g.position,g.position++,N=g.position}else Go(w)?(ao(g,R,N,!0),Wo(g,Oi(g,!1,E)),R=N=g.position):g.position===g.lineStart&&ws(g)?Nt(g,"unexpected end of the document within a single quoted scalar"):(g.position++,N=g.position);Nt(g,"unexpected end of the stream within a single quoted scalar")}(g,Ze)||function(g,E){var w,R,N,U,V,X;if(34!==(X=g.input.charCodeAt(g.position)))return!1;for(g.kind="scalar",g.result="",g.position++,w=R=g.position;0!==(X=g.input.charCodeAt(g.position));){if(34===X)return ao(g,w,g.position,!0),g.position++,!0;if(92===X){if(ao(g,w,g.position,!0),Go(X=g.input.charCodeAt(++g.position)))Oi(g,!1,E);else if(X<256&&It[X])g.result+=Rn[X],g.position++;else if((V=zs(X))>0){for(N=V,U=0;N>0;N--)(V=yi(X=g.input.charCodeAt(++g.position)))>=0?U=(U<<4)+V:Nt(g,"expected hexadecimal character");g.result+=To(U),g.position++}else Nt(g,"unknown escape sequence");w=R=g.position}else Go(X)?(ao(g,w,R,!0),Wo(g,Oi(g,!1,E)),w=R=g.position):g.position===g.lineStart&&ws(g)?Nt(g,"unexpected end of the document within a double quoted scalar"):(g.position++,R=g.position)}Nt(g,"unexpected end of the stream within a double quoted scalar")}(g,Ze)?Se=!0:function(g){var E,w,R;if(42!==(R=g.input.charCodeAt(g.position)))return!1;for(R=g.input.charCodeAt(++g.position),E=g.position;0!==R&&!gi(R)&&!Zi(R);)R=g.input.charCodeAt(++g.position);return g.position===E&&Nt(g,"name of an alias node must contain at least one character"),w=g.input.slice(E,g.position),ns.call(g.anchorMap,w)||Nt(g,'unidentified alias "'+w+'"'),g.result=g.anchorMap[w],Oi(g,!0,-1),!0}(g)?(Se=!0,(null!==g.tag||null!==g.anchor)&&Nt(g,"alias node should not have any properties")):function(g,E,w){var N,U,V,X,se,le,Se,Le,we=g.kind,Ae=g.result;if(gi(Le=g.input.charCodeAt(g.position))||Zi(Le)||35===Le||38===Le||42===Le||33===Le||124===Le||62===Le||39===Le||34===Le||37===Le||64===Le||96===Le||(63===Le||45===Le)&&(gi(N=g.input.charCodeAt(g.position+1))||w&&Zi(N)))return!1;for(g.kind="scalar",g.result="",U=V=g.position,X=!1;0!==Le;){if(58===Le){if(gi(N=g.input.charCodeAt(g.position+1))||w&&Zi(N))break}else if(35===Le){if(gi(g.input.charCodeAt(g.position-1)))break}else{if(g.position===g.lineStart&&ws(g)||w&&Zi(Le))break;if(Go(Le)){if(se=g.line,le=g.lineStart,Se=g.lineIndent,Oi(g,!1,-1),g.lineIndent>=E){X=!0,Le=g.input.charCodeAt(g.position);continue}g.position=V,g.line=se,g.lineStart=le,g.lineIndent=Se;break}}X&&(ao(g,U,V,!1),Wo(g,g.line-se),U=V=g.position,X=!1),Ce(Le)||(V=g.position+1),Le=g.input.charCodeAt(++g.position)}return ao(g,U,V,!1),!!g.result||(g.kind=we,g.result=Ae,!1)}(g,Ze,1===w)&&(Se=!0,null===g.tag&&(g.tag="?")),null!==g.anchor&&(g.anchorMap[g.anchor]=g.result)):0===se&&(Se=X&&Ch(g,ut))),null===g.tag)null!==g.anchor&&(g.anchorMap[g.anchor]=g.result);else if("?"===g.tag){for(null!==g.result&&"scalar"!==g.kind&&Nt(g,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+g.kind+'"'),we=0,Ae=g.implicitTypes.length;we<Ae;we+=1)if((Je=g.implicitTypes[we]).resolve(g.result)){g.result=Je.construct(g.result),g.tag=Je.tag,null!==g.anchor&&(g.anchorMap[g.anchor]=g.result);break}}else if("!"!==g.tag){if(ns.call(g.typeMap[g.kind||"fallback"],g.tag))Je=g.typeMap[g.kind||"fallback"][g.tag];else for(Je=null,we=0,Ae=(Le=g.typeMap.multi[g.kind||"fallback"]).length;we<Ae;we+=1)if(g.tag.slice(0,Le[we].tag.length)===Le[we].tag){Je=Le[we];break}Je||Nt(g,"unknown tag !<"+g.tag+">"),null!==g.result&&Je.kind!==g.kind&&Nt(g,"unacceptable node kind for !<"+g.tag+'> tag; it should be "'+Je.kind+'", not "'+g.kind+'"'),Je.resolve(g.result,g.tag)?(g.result=Je.construct(g.result,g.tag),null!==g.anchor&&(g.anchorMap[g.anchor]=g.result)):Nt(g,"cannot resolve a node with !<"+g.tag+"> explicit tag")}return null!==g.listener&&g.listener("close",g),null!==g.tag||null!==g.anchor||Se}function fa(g){var w,R,N,V,E=g.position,U=!1;for(g.version=null,g.checkLineBreaks=g.legacy,g.tagMap=Object.create(null),g.anchorMap=Object.create(null);0!==(V=g.input.charCodeAt(g.position))&&(Oi(g,!0,-1),V=g.input.charCodeAt(g.position),!(g.lineIndent>0||37!==V));){for(U=!0,V=g.input.charCodeAt(++g.position),w=g.position;0!==V&&!gi(V);)V=g.input.charCodeAt(++g.position);for(N=[],(R=g.input.slice(w,g.position)).length<1&&Nt(g,"directive name must not be less than one character in length");0!==V;){for(;Ce(V);)V=g.input.charCodeAt(++g.position);if(35===V){do{V=g.input.charCodeAt(++g.position)}while(0!==V&&!Go(V));break}if(Go(V))break;for(w=g.position;0!==V&&!gi(V);)V=g.input.charCodeAt(++g.position);N.push(g.input.slice(w,g.position))}0!==V&&ha(g),ns.call(Pi,R)?Pi[R](g,R,N):wo(g,'unknown document directive "'+R+'"')}Oi(g,!0,-1),0===g.lineIndent&&45===g.input.charCodeAt(g.position)&&45===g.input.charCodeAt(g.position+1)&&45===g.input.charCodeAt(g.position+2)?(g.position+=3,Oi(g,!0,-1)):U&&Nt(g,"directives end mark is expected"),Ss(g,g.lineIndent-1,4,!1,!0),Oi(g,!0,-1),g.checkLineBreaks&&vh.test(g.input.slice(E,g.position))&&wo(g,"non-ASCII line breaks are interpreted as content"),g.documents.push(g.result),g.position===g.lineStart&&ws(g)?46===g.input.charCodeAt(g.position)&&(g.position+=3,Oi(g,!0,-1)):g.position<g.length-1&&Nt(g,"end of the stream or a document separator is expected")}function or(g,E){E=E||{},0!==(g=String(g)).length&&(10!==g.charCodeAt(g.length-1)&&13!==g.charCodeAt(g.length-1)&&(g+="\n"),65279===g.charCodeAt(0)&&(g=g.slice(1)));var w=new so(g,E),R=g.indexOf("\0");for(-1!==R&&(w.position=R,Nt(w,"null byte is not allowed in input")),w.input+="\0";32===w.input.charCodeAt(w.position);)w.lineIndent+=1,w.position+=1;for(;w.position<w.length-1;)fa(w);return w.documents}var Ds={loadAll:function(g,E,w){null!==E&&"object"==typeof E&&void 0===w&&(w=E,E=null);var R=or(g,w);if("function"!=typeof E)return R;for(var N=0,U=R.length;N<U;N+=1)E(R[N])},load:function(g,E){var w=or(g,E);if(0!==w.length){if(1===w.length)return w[0];throw new Dt("expected a single document in the stream, but found more")}}},Bl=Object.prototype.toString,Jr=Object.prototype.hasOwnProperty,cn={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Ul=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Sh=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Zu(g){var E,w,R;if(E=g.toString(16).toUpperCase(),g<=255)w="x",R=2;else if(g<=65535)w="u",R=4;else{if(!(g<=4294967295))throw new Dt("code point within a string may not be greater than 0xFFFFFFFF");w="U",R=8}return"\\"+w+me.repeat("0",R-E.length)+E}function ed(g){this.schema=g.schema||Ja,this.indent=Math.max(1,g.indent||2),this.noArrayIndent=g.noArrayIndent||!1,this.skipInvalid=g.skipInvalid||!1,this.flowLevel=me.isNothing(g.flowLevel)?-1:g.flowLevel,this.styleMap=function(g,E){var w,R,N,U,V,X,se;if(null===E)return{};for(w={},N=0,U=(R=Object.keys(E)).length;N<U;N+=1)V=R[N],X=String(E[V]),"!!"===V.slice(0,2)&&(V="tag:yaml.org,2002:"+V.slice(2)),(se=g.compiledTypeMap.fallback[V])&&Jr.call(se.styleAliases,X)&&(X=se.styleAliases[X]),w[V]=X;return w}(this.schema,g.styles||null),this.sortKeys=g.sortKeys||!1,this.lineWidth=g.lineWidth||80,this.noRefs=g.noRefs||!1,this.noCompatMode=g.noCompatMode||!1,this.condenseFlow=g.condenseFlow||!1,this.quotingType='"'===g.quotingType?2:1,this.forceQuotes=g.forceQuotes||!1,this.replacer="function"==typeof g.replacer?g.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Mh(g,E){for(var V,w=me.repeat(" ",E),R=0,N=-1,U="",X=g.length;R<X;)-1===(N=g.indexOf("\n",R))?(V=g.slice(R),R=X):(V=g.slice(R,N+1),R=N+1),V.length&&"\n"!==V&&(U+=w),U+=V;return U}function Qr(g,E){return"\n"+me.repeat(" ",g.indent*E)}function Wl(g){return 32===g||9===g}function Ms(g){return 32<=g&&g<=126||161<=g&&g<=55295&&8232!==g&&8233!==g||57344<=g&&g<=65533&&65279!==g||65536<=g&&g<=1114111}function Pc(g){return Ms(g)&&65279!==g&&13!==g&&10!==g}function jl(g,E,w){var R=Pc(g),N=R&&!Wl(g);return(w?R:R&&44!==g&&91!==g&&93!==g&&123!==g&&125!==g)&&35!==g&&!(58===E&&!N)||Pc(E)&&!Wl(E)&&35===g||58===E&&N}function Fc(g,E){var R,w=g.charCodeAt(E);return w>=55296&&w<=56319&&E+1<g.length&&(R=g.charCodeAt(E+1))>=56320&&R<=57343?1024*(w-55296)+R-56320+65536:w}function zl(g){return/^\n* /.test(g)}function Pf(g,E,w,R,N){g.dump=function(){if(0===E.length)return 2===g.quotingType?'""':"''";if(!g.noCompatMode&&(-1!==Ul.indexOf(E)||Sh.test(E)))return 2===g.quotingType?'"'+E+'"':"'"+E+"'";var U=g.indent*Math.max(1,w),V=-1===g.lineWidth?-1:Math.max(Math.min(g.lineWidth,40),g.lineWidth-U);switch(function(g,E,w,R,N,U,V,X){var se,le=0,Se=null,we=!1,Ae=!1,Le=-1!==R,Je=-1,Ze=function(g){return Ms(g)&&65279!==g&&!Wl(g)&&45!==g&&63!==g&&58!==g&&44!==g&&91!==g&&93!==g&&123!==g&&125!==g&&35!==g&&38!==g&&42!==g&&33!==g&&124!==g&&61!==g&&62!==g&&39!==g&&34!==g&&37!==g&&64!==g&&96!==g}(Fc(g,0))&&function(g){return!Wl(g)&&58!==g}(Fc(g,g.length-1));if(E||V)for(se=0;se<g.length;le>=65536?se+=2:se++){if(!Ms(le=Fc(g,se)))return 5;Ze=Ze&&jl(le,Se,X),Se=le}else{for(se=0;se<g.length;le>=65536?se+=2:se++){if(10===(le=Fc(g,se)))we=!0,Le&&(Ae=Ae||se-Je-1>R&&" "!==g[Je+1],Je=se);else if(!Ms(le))return 5;Ze=Ze&&jl(le,Se,X),Se=le}Ae=Ae||Le&&se-Je-1>R&&" "!==g[Je+1]}return we||Ae?w>9&&zl(g)?5:V?2===U?5:2:Ae?4:3:!Ze||V||N(g)?2===U?5:2:1}(E,R||g.flowLevel>-1&&w>=g.flowLevel,g.indent,V,function(le){return function(g,E){var w,R;for(w=0,R=g.implicitTypes.length;w<R;w+=1)if(g.implicitTypes[w].resolve(E))return!0;return!1}(g,le)},g.quotingType,g.forceQuotes&&!R,N)){case 1:return E;case 2:return"'"+E.replace(/'/g,"''")+"'";case 3:return"|"+Bc(E,g.indent)+ma(Mh(E,U));case 4:return">"+Bc(E,g.indent)+ma(Mh(function(g,E){for(var U,V,w=/(\n+)([^\n]*)/g,R=(le=void 0,le=g.indexOf("\n"),w.lastIndex=le=-1!==le?le:g.length,_a(g.slice(0,le),E)),N="\n"===g[0]||" "===g[0];V=w.exec(g);){var se=V[2];U=" "===se[0],R+=V[1]+(N||U||""===se?"":"\n")+_a(se,E),N=U}var le;return R}(E,V),U));case 5:return'"'+function(g){for(var R,E="",w=0,N=0;N<g.length;w>=65536?N+=2:N++)w=Fc(g,N),!(R=cn[w])&&Ms(w)?(E+=g[N],w>=65536&&(E+=g[N+1])):E+=R||Zu(w);return E}(E)+'"';default:throw new Dt("impossible error: invalid scalar style")}}()}function Bc(g,E){var w=zl(g)?String(E):"",R="\n"===g[g.length-1];return w+(!R||"\n"!==g[g.length-2]&&"\n"!==g?R?"":"-":"+")+"\n"}function ma(g){return"\n"===g[g.length-1]?g.slice(0,-1):g}function _a(g,E){if(""===g||" "===g[0])return g;for(var R,U,w=/ [^ ]/g,N=0,V=0,X=0,se="";R=w.exec(g);)(X=R.index)-N>E&&(se+="\n"+g.slice(N,U=V>N?V:X),N=U+1),V=X;return se+="\n",(se+=g.length-N>E&&V>N?g.slice(N,V)+"\n"+g.slice(V+1):g.slice(N)).slice(1)}function gn(g,E,w){var R,N,U,V,X,se;for(U=0,V=(N=w?g.explicitTypes:g.implicitTypes).length;U<V;U+=1)if(((X=N[U]).instanceOf||X.predicate)&&(!X.instanceOf||"object"==typeof E&&E instanceof X.instanceOf)&&(!X.predicate||X.predicate(E))){if(g.tag=w?X.multi&&X.representName?X.representName(E):X.tag:"?",X.represent){if(se=g.styleMap[X.tag]||X.defaultStyle,"[object Function]"===Bl.call(X.represent))R=X.represent(E,se);else{if(!Jr.call(X.represent,se))throw new Dt("!<"+X.tag+'> tag resolver accepts not "'+se+'" style');R=X.represent[se](E,se)}g.dump=R}return!0}return!1}function So(g,E,w,R,N,U,V){g.tag=null,g.dump=w,gn(g,w,!1)||gn(g,w,!0);var le,X=Bl.call(g.dump),se=R;R&&(R=g.flowLevel<0||g.flowLevel>E);var we,Ae,Se="[object Object]"===X||"[object Array]"===X;if(Se&&(Ae=-1!==(we=g.duplicates.indexOf(w))),(null!==g.tag&&"?"!==g.tag||Ae||2!==g.indent&&E>0)&&(N=!1),Ae&&g.usedDuplicates[we])g.dump="*ref_"+we;else{if(Se&&Ae&&!g.usedDuplicates[we]&&(g.usedDuplicates[we]=!0),"[object Object]"===X)R&&0!==Object.keys(g.dump).length?(function(g,E,w,R){var X,se,le,Se,we,Ae,N="",U=g.tag,V=Object.keys(w);if(!0===g.sortKeys)V.sort();else if("function"==typeof g.sortKeys)V.sort(g.sortKeys);else if(g.sortKeys)throw new Dt("sortKeys must be a boolean or a function");for(X=0,se=V.length;X<se;X+=1)Ae="",(!R||""!==N)&&(Ae+=Qr(g,E)),Se=w[le=V[X]],g.replacer&&(Se=g.replacer.call(w,le,Se)),So(g,E+1,le,!0,!0,!0)&&((we=null!==g.tag&&"?"!==g.tag||g.dump&&g.dump.length>1024)&&(g.dump&&10===g.dump.charCodeAt(0)?Ae+="?":Ae+="? "),Ae+=g.dump,we&&(Ae+=Qr(g,E)),So(g,E+1,Se,!0,we)&&(g.dump&&10===g.dump.charCodeAt(0)?Ae+=":":Ae+=": ",N+=Ae+=g.dump));g.tag=U,g.dump=N||"{}"}(g,E,g.dump,N),Ae&&(g.dump="&ref_"+we+g.dump)):(function(g,E,w){var V,X,se,le,Se,R="",N=g.tag,U=Object.keys(w);for(V=0,X=U.length;V<X;V+=1)Se="",""!==R&&(Se+=", "),g.condenseFlow&&(Se+='"'),le=w[se=U[V]],g.replacer&&(le=g.replacer.call(w,se,le)),So(g,E,se,!1,!1)&&(g.dump.length>1024&&(Se+="? "),Se+=g.dump+(g.condenseFlow?'"':"")+":"+(g.condenseFlow?"":" "),So(g,E,le,!1,!1)&&(R+=Se+=g.dump));g.tag=N,g.dump="{"+R+"}"}(g,E,g.dump),Ae&&(g.dump="&ref_"+we+" "+g.dump));else if("[object Array]"===X)R&&0!==g.dump.length?(function(g,E,w,R){var V,X,se,N="",U=g.tag;for(V=0,X=w.length;V<X;V+=1)se=w[V],g.replacer&&(se=g.replacer.call(w,String(V),se)),(So(g,E+1,se,!0,!0,!1,!0)||void 0===se&&So(g,E+1,null,!0,!0,!1,!0))&&((!R||""!==N)&&(N+=Qr(g,E)),g.dump&&10===g.dump.charCodeAt(0)?N+="-":N+="- ",N+=g.dump);g.tag=U,g.dump=N||"[]"}(g,g.noArrayIndent&&!V&&E>0?E-1:E,g.dump,N),Ae&&(g.dump="&ref_"+we+g.dump)):(function(g,E,w){var U,V,X,R="",N=g.tag;for(U=0,V=w.length;U<V;U+=1)X=w[U],g.replacer&&(X=g.replacer.call(w,String(U),X)),(So(g,E,X,!1,!1)||void 0===X&&So(g,E,null,!1,!1))&&(""!==R&&(R+=","+(g.condenseFlow?"":" ")),R+=g.dump);g.tag=N,g.dump="["+R+"]"}(g,E,g.dump),Ae&&(g.dump="&ref_"+we+" "+g.dump));else{if("[object String]"!==X){if("[object Undefined]"===X)return!1;if(g.skipInvalid)return!1;throw new Dt("unacceptable kind of an object to dump "+X)}"?"!==g.tag&&Pf(g,g.dump,E,U,se)}null!==g.tag&&"?"!==g.tag&&(le=encodeURI("!"===g.tag[0]?g.tag.slice(1):g.tag).replace(/!/g,"%21"),le="!"===g.tag[0]?"!"+le:"tag:yaml.org,2002:"===le.slice(0,18)?"!!"+le.slice(18):"!<"+le+">",g.dump=le+" "+g.dump)}return!0}function Ff(g,E){var N,U,w=[],R=[];for(Do(g,w,R),N=0,U=R.length;N<U;N+=1)E.duplicates.push(w[R[N]]);E.usedDuplicates=new Array(U)}function Do(g,E,w){var R,N,U;if(null!==g&&"object"==typeof g)if(-1!==(N=E.indexOf(g)))-1===w.indexOf(N)&&w.push(N);else if(E.push(g),Array.isArray(g))for(N=0,U=g.length;N<U;N+=1)Do(g[N],E,w);else for(N=0,U=(R=Object.keys(g)).length;N<U;N+=1)Do(g[R[N]],E,w)}function Vc(g,E){return function(){throw new Error("Function yaml."+g+" is removed in js-yaml 4. Use yaml."+E+" instead, which is now safe by default.")}}const sd={Type:pi,Schema:rn,FAILSAFE_SCHEMA:Il,JSON_SCHEMA:Ho,CORE_SCHEMA:Gu,DEFAULT_SCHEMA:Ja,load:Ds.load,loadAll:Ds.loadAll,dump:function(g,E){var w=new ed(E=E||{});w.noRefs||Ff(g,w);var R=g;return w.replacer&&(R=w.replacer.call({"":R},"",R)),So(w,0,R,!0,!0)?w.dump+"\n":""},YAMLException:Dt,types:{binary:Kr,float:Mt,map:Ef,null:Bu,pairs:ri,set:fi,timestamp:Wu,bool:Vu,int:$r,merge:on,omap:zu,seq:Fu,str:Ir},safeLoad:Vc("safeLoad","load"),safeLoadAll:Vc("safeLoadAll","loadAll"),safeDump:Vc("safeDump","dump")},il="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window,{FormData:Mo,Blob:Gc,File:ad}=il;function as(g){return function(g){if(Z(g))return H(g)}(g)||function(g){if(void 0!==he&&null!=te(g)||null!=g["@@iterator"])return $(g)}(g)||de(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Oh=m(71049),ho=m.n(Oh),kh=function(E){return":/?#[]@!$&'()*+,;=".indexOf(E)>-1},Nh=function(E){return/^[a-z0-9\-._~]+$/i.test(E)};function Xo(g){var E,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},R=w.escape,N=arguments.length>2?arguments[2]:void 0;return"number"==typeof g&&(g=g.toString()),"string"==typeof g&&g.length&&R?N?JSON.parse(g):Gt()(E=as(g)).call(E,function(U){var V,X;if(Nh(U)||kh(U)&&"unsafe"===R)return U;var se=new TextEncoder;return Gt()(V=Gt()(X=tn()(se.encode(U))).call(X,function(Se){var we;return ho()(we="0".concat(Se.toString(16).toUpperCase())).call(we,-2)})).call(V,function(Se){return"%".concat(Se)}).join("")}).join(""):g}function Yo(g){var E=g.value;return Array.isArray(E)?function(g){var E=g.key,w=g.value,R=g.style,N=g.explode,U=g.escape,V=function(we){return Xo(we,{escape:U})};if("simple"===R)return Gt()(w).call(w,function(Se){return V(Se)}).join(",");if("label"===R)return".".concat(Gt()(w).call(w,function(Se){return V(Se)}).join("."));if("matrix"===R)return Gt()(w).call(w,function(Se){return V(Se)}).reduce(function(Se,we){var Ae,Le,Je;return!Se||N?Xe()(Le=Xe()(Je="".concat(Se||"",";")).call(Je,E,"=")).call(Le,we):Xe()(Ae="".concat(Se,",")).call(Ae,we)},"");if("form"===R){var X=N?"&".concat(E,"="):",";return Gt()(w).call(w,function(Se){return V(Se)}).join(X)}if("spaceDelimited"===R){var se=N?"".concat(E,"="):"";return Gt()(w).call(w,function(Se){return V(Se)}).join(" ".concat(se))}if("pipeDelimited"===R){var le=N?"".concat(E,"="):"";return Gt()(w).call(w,function(Se){return V(Se)}).join("|".concat(le))}}(g):"object"===re(E)?function(g){var E=g.key,w=g.value,R=g.style,N=g.explode,U=g.escape,V=function(le){return Xo(le,{escape:U})},X=Bt()(w);return"simple"===R?X.reduce(function(se,le){var Se,we,Ae,Le=V(w[le]),Je=N?"=":",",Ze=se?"".concat(se,","):"";return Xe()(Se=Xe()(we=Xe()(Ae="".concat(Ze)).call(Ae,le)).call(we,Je)).call(Se,Le)},""):"label"===R?X.reduce(function(se,le){var Se,we,Ae,Le=V(w[le]),Je=N?"=":".",Ze=se?"".concat(se,"."):".";return Xe()(Se=Xe()(we=Xe()(Ae="".concat(Ze)).call(Ae,le)).call(we,Je)).call(Se,Le)},""):"matrix"===R&&N?X.reduce(function(se,le){var Se,we,Ae=V(w[le]),Le=se?"".concat(se,";"):";";return Xe()(Se=Xe()(we="".concat(Le)).call(we,le,"=")).call(Se,Ae)},""):"matrix"===R?X.reduce(function(se,le){var Se,we,Ae=V(w[le]),Le=se?"".concat(se,","):";".concat(E,"=");return Xe()(Se=Xe()(we="".concat(Le)).call(we,le,",")).call(Se,Ae)},""):"form"===R?X.reduce(function(se,le){var Se,we,Ae,Le,Je=V(w[le]),Ze=se?Xe()(Se="".concat(se)).call(Se,N?"&":","):"",ut=N?"=":",";return Xe()(we=Xe()(Ae=Xe()(Le="".concat(Ze)).call(Le,le)).call(Ae,ut)).call(we,Je)},""):void 0}(g):function(g){var V,E=g.key,w=g.value,R=g.style,N=g.escape,U=function(se){return Xo(se,{escape:N})};return"simple"===R?U(w):"label"===R?".".concat(U(w)):"matrix"===R?Xe()(V=";".concat(E,"=")).call(V,U(w)):"form"===R||"deepObject"===R?U(w):void 0}(g)}const Uf=function(E,w){w.body=E};var cd={serializeRes:Lh,mergeInQueryOrForm:xr};function pr(g){return Ro.apply(this,arguments)}function Ro(){return(Ro=Me(Ye().mark(function g(E){var w,N,U,V,X=arguments;return Ye().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(w=X.length>1&&void 0!==X[1]?X[1]:{},"object"===re(E)&&(E=(w=E).url),w.headers=w.headers||{},cd.mergeInQueryOrForm(w),w.headers&&Bt()(w.headers).forEach(function(Se){var we=w.headers[Se];"string"==typeof we&&(w.headers[Se]=we.replace(/\n+/g," "))}),!w.requestInterceptor){le.next=12;break}return le.next=8,w.requestInterceptor(w);case 8:if(le.t0=le.sent,le.t0){le.next=11;break}le.t0=w;case 11:w=le.t0;case 12:return/multipart\/form-data/i.test(w.headers["content-type"]||w.headers["Content-Type"])&&w.body instanceof Mo&&(delete w.headers["content-type"],delete w.headers["Content-Type"]),le.prev=14,le.next=17,(w.userFetch||fetch)(w.url,w);case 17:return N=le.sent,le.next=20,cd.serializeRes(N,E,w);case 20:if(N=le.sent,!w.responseInterceptor){le.next=28;break}return le.next=24,w.responseInterceptor(N);case 24:if(le.t1=le.sent,le.t1){le.next=27;break}le.t1=N;case 27:N=le.t1;case 28:le.next=39;break;case 30:if(le.prev=30,le.t2=le.catch(14),N){le.next=34;break}throw le.t2;case 34:throw(U=new Error(N.statusText||"response status is ".concat(N.status))).status=N.status,U.statusCode=N.status,U.responseError=le.t2,U;case 39:if(N.ok){le.next=45;break}throw(V=new Error(N.statusText||"response status is ".concat(N.status))).status=N.status,V.statusCode=N.status,V.response=N,V;case 45:return le.abrupt("return",N);case 46:case"end":return le.stop()}},g,null,[[14,30]])}))).apply(this,arguments)}var Gi=function(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/(json|xml|yaml|text)\b/.test(E)};function Ar(g,E){return E&&(0===E.indexOf("application/json")||E.indexOf("+json")>0)?JSON.parse(g):sd.load(g)}function Lh(g,E){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},R=w.loadSpec,N=void 0!==R&&R,U={ok:g.ok,url:g.url||E,status:g.status,statusText:g.statusText,headers:Ph(g.headers)},V=U.headers["content-type"],X=N||Gi(V),se=X?g.text:g.blob||g.buffer;return se.call(g).then(function(le){if(U.text=le,U.data=le,X)try{var Se=Ar(le,V);U.body=Se,U.obj=Se}catch(we){U.parseError=we}return U})}function Yl(g){return yt()(g).call(g,", ")?g.split(", "):g}function Ph(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"function"!=typeof Tt()(g)?{}:tn()(Tt()(g).call(g)).reduce(function(E,w){var R=ye(w,2);return E[R[0]]=Yl(R[1]),E},{})}function ud(g,E){return!E&&"undefined"!=typeof navigator&&(E=navigator),E&&"ReactNative"===E.product?!(!g||"object"!==re(g)||"string"!=typeof g.uri):!!(void 0!==ad&&g instanceof ad||void 0!==Gc&&g instanceof Gc||ArrayBuffer.isView(g))||null!==g&&"object"===re(g)&&"function"==typeof g.pipe}function dd(g,E){return Array.isArray(g)&&g.some(function(w){return ud(w,E)})}var Yc={form:",",spaceDelimited:"%20",pipeDelimited:"|"},$c={csv:",",ssv:"%20",tsv:"%09",pipes:"|"};function $l(g,E){var w=arguments.length>2&&void 0!==arguments[2]&&arguments[2],R=E.collectionFormat,N=E.allowEmptyValue,U=E.serializationOption,V=E.encoding,X="object"!==re(E)||Array.isArray(E)?E:E.value,se=w?function(Je){return Je.toString()}:function(Je){return encodeURIComponent(Je)},le=se(g);if(void 0===X&&N)return[[le,""]];if(ud(X)||dd(X))return[[le,X]];if(U)return Kl(g,X,w,U);if(V){if([re(V.style),re(V.explode),re(V.allowReserved)].some(function(Je){return"undefined"!==Je})){var Se=V.style,we=V.explode,Ae=V.allowReserved;return Kl(g,X,w,{style:Se,explode:we,allowReserved:Ae})}if(V.contentType){if("application/json"===V.contentType){var Le="string"==typeof X?X:Gn()(X);return[[le,se(Le)]]}return[[le,se(X.toString())]]}return"object"!==re(X)?[[le,se(X)]]:Array.isArray(X)&&X.every(function(Je){return"object"!==re(Je)})?[[le,Gt()(X).call(X,se).join(",")]]:[[le,se(Gn()(X))]]}return"object"!==re(X)?[[le,se(X)]]:Array.isArray(X)?"multi"===R?[[le,Gt()(X).call(X,se)]]:[[le,Gt()(X).call(X,se).join($c[R||"csv"])]]:[[le,""]]}function Kl(g,E,w,R){var N,Se,we,U=R.style||"form",V=void 0===R.explode?"form"===U:R.explode,X=!w&&(R&&R.allowReserved?"unsafe":"reserved"),se=function(Le){return Xo(Le,{escape:X})},le=w?function(Ae){return Ae}:function(Ae){return Xo(Ae,{escape:X})};return"object"!==re(E)?[[le(g),se(E)]]:Array.isArray(E)?V?[[le(g),Gt()(E).call(E,se)]]:[[le(g),Gt()(E).call(E,se).join(Yc[U])]]:"deepObject"===U?Gt()(Se=Bt()(E)).call(Se,function(Ae){var Le;return[le(Xe()(Le="".concat(g,"[")).call(Le,Ae,"]")),se(E[Ae])]}):V?Gt()(we=Bt()(E)).call(we,function(Ae){return[le(Ae),se(E[Ae])]}):[[le(g),Gt()(N=Bt()(E)).call(N,function(Ae){var Le;return[Xe()(Le="".concat(le(Ae),",")).call(Le,se(E[Ae]))]}).join(",")]]}function Fh(g){return ln()(g).reduce(function(E,w){var X,R=ye(w,2),V=J($l(R[0],R[1],!0));try{for(V.s();!(X=V.n()).done;){var se=ye(X.value,2),le=se[0],Se=se[1];if(Array.isArray(Se)){var Ae,we=J(Se);try{for(we.s();!(Ae=we.n()).done;){var Le=Ae.value;if(ArrayBuffer.isView(Le)){var Je=new Gc([Le]);E.append(le,Je)}else E.append(le,Le)}}catch(ut){we.e(ut)}finally{we.f()}}else if(ArrayBuffer.isView(Se)){var Ze=new Gc([Se]);E.append(le,Ze)}else E.append(le,Se)}}catch(ut){V.e(ut)}finally{V.f()}return E},new Mo)}function hd(g){var E=Bt()(g).reduce(function(w,R){var U,N=J($l(R,g[R]));try{for(N.s();!(U=N.n()).done;){var V=ye(U.value,2);w[V[0]]=V[1]}}catch(le){N.e(le)}finally{N.f()}return w},{});return ke().stringify(E,{encode:!1,indices:!1})||""}function xr(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=g.url,w=void 0===E?"":E,R=g.query,N=g.form,U=function(){for(var at=arguments.length,Kn=new Array(at),Wn=0;Wn<at;Wn++)Kn[Wn]=arguments[Wn];var nr=En()(Kn).call(Kn,function(Ni){return Ni}).join("&");return nr?"?".concat(nr):""};if(N){var V=Bt()(N).some(function(Ht){var at=N[Ht].value;return ud(at)||dd(at)}),X=g.headers["content-type"]||g.headers["Content-Type"];if(V||/multipart\/form-data/i.test(X)){var se=Fh(g.form);Uf(se,g)}else g.body=hd(N);delete g.form}if(R){var le=w.split("?"),Se=ye(le,2),we=Se[0],Ae=Se[1],Le="";if(Ae){var Je=ke().parse(Ae),Ze=Bt()(R);Ze.forEach(function(Ht){return delete Je[Ht]}),Le=ke().stringify(Je,{encode:!0})}var ut=U(Le,hd(R));g.url=we+ut,delete g.query}return g}function Bh(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")}function Vh(g,E){for(var w=0;w<E.length;w++){var R=E[w];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),x(g,R.key,R)}}function As(g,E,w){return E&&Vh(g.prototype,E),w&&Vh(g,w),g}var g,rl=m(78804),Gf=m.n(rl),Wf=m(96916),ol=m.n(Wf),t_=m(3498),Kc=m.n(t_),Hh=(g=function(E,w){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,N){R.__proto__=N}||function(R,N){for(var U in N)N.hasOwnProperty(U)&&(R[U]=N[U])})(E,w)},function(E,w){function R(){this.constructor=E}g(E,w),E.prototype=null===w?Object.create(w):(R.prototype=w.prototype,new R)}),xs=Object.prototype.hasOwnProperty;function ba(g,E){return xs.call(g,E)}function Jc(g){if(Array.isArray(g)){for(var w=new Array(g.length),E=0;E<w.length;E++)w[E]=""+E;return w}if(Object.keys)return Object.keys(g);for(var R in w=[],g)ba(g,R)&&w.push(R);return w}function yr(g){switch(typeof g){case"object":return JSON.parse(JSON.stringify(g));case"undefined":return null;default:return g}}function Os(g){for(var R,E=0,w=g.length;E<w;){if(!((R=g.charCodeAt(E))>=48&&R<=57))return!1;E++}return!0}function Fn(g){return-1===g.indexOf("/")&&-1===g.indexOf("~")?g:g.replace(/~/g,"~0").replace(/\//g,"~1")}function Ys(g){return g.replace(/~1/g,"/").replace(/~0/g,"~")}function fd(g){if(void 0===g)return!0;if(g)if(Array.isArray(g)){for(var E=0,w=g.length;E<w;E++)if(fd(g[E]))return!0}else if("object"==typeof g){var R=Jc(g),N=R.length;for(E=0;E<N;E++)if(fd(g[R[E]]))return!0}return!1}function gd(g,E){var w=[g];for(var R in E){var N="object"==typeof E[R]?JSON.stringify(E[R],null,2):E[R];void 0!==N&&w.push(R+": "+N)}return w.join("\n")}var md=function(g){function E(w,R,N,U,V){var X=this.constructor,se=g.call(this,gd(w,{name:R,index:N,operation:U,tree:V}))||this;return se.name=R,se.index=N,se.operation=U,se.tree=V,Object.setPrototypeOf(se,X.prototype),se.message=gd(w,{name:R,index:N,operation:U,tree:V}),se}return Hh(E,g),E}(Error),Wi=md,Uh=yr,$o={add:function(g,E,w){return g[E]=this.value,{newDocument:w}},remove:function(g,E,w){var R=g[E];return delete g[E],{newDocument:w,removed:R}},replace:function(g,E,w){var R=g[E];return g[E]=this.value,{newDocument:w,removed:R}},move:function(g,E,w){var R=Ca(w,this.path);R&&(R=yr(R));var N=Or(w,{op:"remove",path:this.from}).removed;return Or(w,{op:"add",path:this.path,value:N}),{newDocument:w,removed:R}},copy:function(g,E,w){var R=Ca(w,this.from);return Or(w,{op:"add",path:this.path,value:yr(R)}),{newDocument:w}},test:function(g,E,w){return{newDocument:w,test:al(g[E],this.value)}},_get:function(g,E,w){return this.value=g[E],{newDocument:w}}},_d={add:function(g,E,w){return Os(E)?g.splice(E,0,this.value):g[E]=this.value,{newDocument:w,index:E}},remove:function(g,E,w){return{newDocument:w,removed:g.splice(E,1)[0]}},replace:function(g,E,w){var R=g[E];return g[E]=this.value,{newDocument:w,removed:R}},move:$o.move,copy:$o.copy,test:$o.test,_get:$o._get};function Ca(g,E){if(""==E)return g;var w={op:"_get",path:E};return Or(g,w),w.value}function Or(g,E,w,R,N,U){if(void 0===w&&(w=!1),void 0===R&&(R=!0),void 0===N&&(N=!0),void 0===U&&(U=0),w&&("function"==typeof w?w(E,0,g,E.path):sl(E,0)),""===E.path){var V={newDocument:g};if("add"===E.op)return V.newDocument=E.value,V;if("replace"===E.op)return V.newDocument=E.value,V.removed=g,V;if("move"===E.op||"copy"===E.op)return V.newDocument=Ca(g,E.from),"move"===E.op&&(V.removed=g),V;if("test"===E.op){if(V.test=al(g,E.value),!1===V.test)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",U,E,g);return V.newDocument=g,V}if("remove"===E.op)return V.removed=g,V.newDocument=null,V;if("_get"===E.op)return E.value=g,V;if(w)throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",U,E,g);return V}R||(g=yr(g));var se=(E.path||"").split("/"),le=g,Se=1,we=se.length,Ae=void 0,Le=void 0,Je=void 0;for(Je="function"==typeof w?w:sl;;){if((Le=se[Se])&&-1!=Le.indexOf("~")&&(Le=Ys(Le)),N&&"__proto__"==Le)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(w&&void 0===Ae&&(void 0===le[Le]?Ae=se.slice(0,Se).join("/"):Se==we-1&&(Ae=E.path),void 0!==Ae&&Je(E,0,g,Ae)),Se++,Array.isArray(le)){if("-"===Le)Le=le.length;else{if(w&&!Os(Le))throw new Wi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",U,E,g);Os(Le)&&(Le=~~Le)}if(Se>=we){if(w&&"add"===E.op&&Le>le.length)throw new Wi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",U,E,g);if(!1===(V=_d[E.op].call(E,le,Le,g)).test)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",U,E,g);return V}}else if(Se>=we){if(!1===(V=$o[E.op].call(E,le,Le,g)).test)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",U,E,g);return V}if(le=le[Le],w&&Se<we&&(!le||"object"!=typeof le))throw new Wi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",U,E,g)}}function po(g,E,w,R,N){if(void 0===R&&(R=!0),void 0===N&&(N=!0),w&&!Array.isArray(E))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");R||(g=yr(g));for(var U=new Array(E.length),V=0,X=E.length;V<X;V++)U[V]=Or(g,E[V],w,!0,N,V),g=U[V].newDocument;return U.newDocument=g,U}function jf(g,E,w){var R=Or(g,E);if(!1===R.test)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",w,E,g);return R.newDocument}function sl(g,E,w,R){if("object"!=typeof g||null===g||Array.isArray(g))throw new Wi("Operation is not an object","OPERATION_NOT_AN_OBJECT",E,g,w);if(!$o[g.op])throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",E,g,w);if("string"!=typeof g.path)throw new Wi("Operation `path` property is not a string","OPERATION_PATH_INVALID",E,g,w);if(0!==g.path.indexOf("/")&&g.path.length>0)throw new Wi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",E,g,w);if(("move"===g.op||"copy"===g.op)&&"string"!=typeof g.from)throw new Wi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",E,g,w);if(("add"===g.op||"replace"===g.op||"test"===g.op)&&void 0===g.value)throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",E,g,w);if(("add"===g.op||"replace"===g.op||"test"===g.op)&&fd(g.value))throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",E,g,w);if(w)if("add"==g.op){var N=g.path.split("/").length,U=R.split("/").length;if(N!==U+1&&N!==U)throw new Wi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",E,g,w)}else if("replace"===g.op||"remove"===g.op||"_get"===g.op){if(g.path!==R)throw new Wi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",E,g,w)}else if("move"===g.op||"copy"===g.op){var X=Ql([{op:"_get",path:g.from,value:void 0}],w);if(X&&"OPERATION_PATH_UNRESOLVABLE"===X.name)throw new Wi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",E,g,w)}}function Ql(g,E,w){try{if(!Array.isArray(g))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(E)po(yr(E),yr(g),w||!0);else{w=w||sl;for(var R=0;R<g.length;R++)w(g[R],R,E,void 0)}}catch(N){if(N instanceof Wi)return N;throw N}}function al(g,E){if(g===E)return!0;if(g&&E&&"object"==typeof g&&"object"==typeof E){var N,U,V,w=Array.isArray(g),R=Array.isArray(E);if(w&&R){if((U=g.length)!=E.length)return!1;for(N=U;0!=N--;)if(!al(g[N],E[N]))return!1;return!0}if(w!=R)return!1;var X=Object.keys(g);if((U=X.length)!==Object.keys(E).length)return!1;for(N=U;0!=N--;)if(!E.hasOwnProperty(X[N]))return!1;for(N=U;0!=N--;)if(!al(g[V=X[N]],E[V]))return!1;return!0}return g!=g&&E!=E}var ks=new WeakMap,vd=function(E){this.observers=new Map,this.obj=E},zf=function(E,w){this.callback=E,this.observer=w};function bd(g,E){E.unobserve()}function Gh(g,E){var R,N=function(g){return ks.get(g)}(g);if(N){var U=function(g,E){return g.observers.get(E)}(N,E);R=U&&U.observer}else N=new vd(g),ks.set(g,N);if(R)return R;if(R={},N.value=yr(g),E){R.callback=E,R.next=null;var V=function(){Ns(R)},X=function(){clearTimeout(R.next),R.next=setTimeout(V)};"undefined"!=typeof window&&(window.addEventListener("mouseup",X),window.addEventListener("keyup",X),window.addEventListener("mousedown",X),window.addEventListener("keydown",X),window.addEventListener("change",X))}return R.patches=[],R.object=g,R.unobserve=function(){Ns(R),clearTimeout(R.next),function(g,E){g.observers.delete(E.callback)}(N,R),"undefined"!=typeof window&&(window.removeEventListener("mouseup",X),window.removeEventListener("keyup",X),window.removeEventListener("mousedown",X),window.removeEventListener("keydown",X),window.removeEventListener("change",X))},N.observers.set(E,new zf(E,R)),R}function Ns(g,E){void 0===E&&(E=!1);var w=ks.get(g.object);nn(w.value,g.object,g.patches,"",E),g.patches.length&&po(w.value,g.patches);var R=g.patches;return R.length>0&&(g.patches=[],g.callback&&g.callback(R)),R}function nn(g,E,w,R,N){if(E!==g){"function"==typeof E.toJSON&&(E=E.toJSON());for(var U=Jc(E),V=Jc(g),se=!1,le=V.length-1;le>=0;le--){var we=g[Se=V[le]];if(!ba(E,Se)||void 0===E[Se]&&void 0!==we&&!1===Array.isArray(E))Array.isArray(g)===Array.isArray(E)?(N&&w.push({op:"test",path:R+"/"+Fn(Se),value:yr(we)}),w.push({op:"remove",path:R+"/"+Fn(Se)}),se=!0):(N&&w.push({op:"test",path:R,value:g}),w.push({op:"replace",path:R,value:E}));else{var Ae=E[Se];"object"==typeof we&&null!=we&&"object"==typeof Ae&&null!=Ae&&Array.isArray(we)===Array.isArray(Ae)?nn(we,Ae,w,R+"/"+Fn(Se),N):we!==Ae&&(N&&w.push({op:"test",path:R+"/"+Fn(Se),value:yr(we)}),w.push({op:"replace",path:R+"/"+Fn(Se),value:yr(Ae)}))}}if(se||U.length!=V.length)for(le=0;le<U.length;le++){var Se;!ba(g,Se=U[le])&&void 0!==E[Se]&&w.push({op:"add",path:R+"/"+Fn(Se),value:yr(E[Se])})}}}function cl(g,E,w){void 0===w&&(w=!1);var R=[];return nn(g,E,R,"",w),R}Object.assign({},y,S,{JsonPatchError:md,deepClone:yr,escapePathComponent:Fn,unescapePathComponent:Ys});var Ls=m(80915),ul=m.n(Ls),$s=m(57469),Zl=m.n($s);const ti={add:function(g,E){return{op:"add",path:g,value:E}},replace:yd,remove:function(g){return{op:"remove",path:g}},merge:function(g,E){return{type:"mutation",op:"merge",path:g,value:E}},mergeDeep:function(g,E){return{type:"mutation",op:"mergeDeep",path:g,value:E}},context:function(g,E){return{type:"context",path:g,value:E}},getIn:function(g,E){return E.reduce(function(w,R){return void 0!==R&&w?w[R]:w},g)},applyPatch:function(g,E,w){if(w=w||{},"merge"===(E=F(F({},E),{},{path:E.path&&Wh(E.path)})).op){var R=ue(g,E.path);Q()(R,E.value),po(g,[yd(E.path,R)])}else if("mergeDeep"===E.op){var N=ue(g,E.path);for(var U in E.value){var V=E.value[U],X=Array.isArray(V);if(X){var se=N[U]||[];N[U]=Xe()(se).call(se,V)}else if(fo(V)&&!X){var le=F({},N[U]);for(var Se in V){if(Object.prototype.hasOwnProperty.call(le,Se)){le=ul()(Zl()(le),V);break}Q()(le,G({},Se,V[Se]))}N[U]=le}else N[U]=V}}else if("add"===E.op&&""===E.path&&fo(E.value)){po(g,Bt()(E.value).reduce(function(ut,Ht){return ut.push({op:"add",path:"/".concat(Wh(Ht)),value:E.value[Ht]}),ut},[]))}else if("replace"===E.op&&""===E.path){var Le=E.value;w.allowMetaPatches&&E.meta&&L(E)&&(Array.isArray(E.value)||fo(E.value))&&(Le=F(F({},Le),E.meta)),g=Le}else if(po(g,[E]),w.allowMetaPatches&&E.meta&&L(E)&&(Array.isArray(E.value)||fo(E.value))){var Ze=F(F({},ue(g,E.path)),E.meta);po(g,[yd(E.path,Ze)])}return g},parentPathMatch:function(g,E){if(!Array.isArray(E))return!1;for(var w=0,R=E.length;w<R;w+=1)if(E[w]!==g[w])return!1;return!0},flatten:ql,fullyNormalizeArray:function(g){return cs(ql($h(g)))},normalizeArray:$h,isPromise:function(g){return fo(g)&&Ta(g.then)},forEachNew:function(g,E){try{return Kf(g,Cd,E)}catch(w){return w}},forEachNewPrimitive:function(g,E){try{return Kf(g,Yh,E)}catch(w){return w}},isJsonPatch:ec,isContextPatch:function(g){return oe(g)&&"context"===g.type},isPatch:oe,isMutation:k,isAdditiveMutation:L,isGenerator:function(g){return"[object GeneratorFunction]"===Object.prototype.toString.call(g)},isFunction:Ta,isObject:fo,isError:function(g){return g instanceof Error}};function Wh(g){return Array.isArray(g)?g.length<1?"":"/".concat(Gt()(g).call(g,function(E){return(E+"").replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")):g}function yd(g,E,w){return{op:"replace",path:g,value:E,meta:w}}function Kf(g,E,w){var R;return cs(ql(Gt()(R=En()(g).call(g,L)).call(R,function(X){return E(X.value,w,X.path)})||[]))}function Yh(g,E,w){return w=w||[],Array.isArray(g)?Gt()(g).call(g,function(N,U){return Yh(N,E,Xe()(w).call(w,U))}):fo(g)?Gt()(R=Bt()(g)).call(R,function(N){return Yh(g[N],E,Xe()(w).call(w,N))}):E(g,w[w.length-1],w);var R}function Cd(g,E,w){var R=[];if((w=w||[]).length>0){var N=E(g,w[w.length-1],w);N&&(R=Xe()(R).call(R,N))}if(Array.isArray(g)){var U=Gt()(g).call(g,function(se,le){return Cd(se,E,Xe()(w).call(w,le))});U&&(R=Xe()(R).call(R,U))}else if(fo(g)){var V,X=Gt()(V=Bt()(g)).call(V,function(se){return Cd(g[se],E,Xe()(w).call(w,se))});X&&(R=Xe()(R).call(R,X))}return ql(R)}function $h(g){return Array.isArray(g)?g:[g]}function ql(g){var E;return Xe()(E=[]).apply(E,as(Gt()(g).call(g,function(w){return Array.isArray(w)?ql(w):w})))}function cs(g){return En()(g).call(g,function(E){return void 0!==E})}function fo(g){return g&&"object"===re(g)}function Ta(g){return g&&"function"==typeof g}function ec(g){if(oe(g)){var E=g.op;return"add"===E||"remove"===E||"replace"===E}return!1}function k(g){return ec(g)||oe(g)&&"mutation"===g.type}function L(g){return k(g)&&("add"===g.op||"replace"===g.op||"merge"===g.op||"mergeDeep"===g.op)}function oe(g){return g&&"object"===re(g)}function ue(g,E){try{return Ca(g,E)}catch(w){return console.error(w),{}}}var Re=m(14569),_e=m.n(Re),De=m(58258),Ve=m.n(De);function Ge(g,E){function w(){Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack;for(var R=arguments.length,N=new Array(R),U=0;U<R;U++)N[U]=arguments[U];this.message=N[0],E&&E.apply(this,N)}return(w.prototype=new Error).name=g,w.prototype.constructor=w,w}var $e=m(16958),Yt=m.n($e),Zt=["properties"],yn=["properties"],qi=["definitions","parameters","responses","securityDefinitions","components/schemas","components/responses","components/parameters","components/securitySchemes"],_i=["schema/example","items/example"];function li(g){var E=g[g.length-1],w=g[g.length-2],R=g.join("/");return Zt.indexOf(E)>-1&&-1===yn.indexOf(w)||qi.indexOf(R)>-1||_i.some(function(N){return R.indexOf(N)>-1})}function Ki(g,E){var w,N=ye(g.split("#"),2),V=N[1],X=ie.resolve(N[0]||"",E||"");return V?Xe()(w="".concat(X,"#")).call(w,V):X}var er="application/json, application/yaml",us=new RegExp("^([a-z]+://|//)","i"),fr=Ge("JSONRefError",function(E,w,R){this.originalError=R,Q()(this,w||{})}),Cr={},ds=new(_e()),Qf=[function(g){return"paths"===g[0]&&"responses"===g[3]&&"examples"===g[5]},function(g){return"paths"===g[0]&&"responses"===g[3]&&"content"===g[5]&&"example"===g[7]},function(g){return"paths"===g[0]&&"responses"===g[3]&&"content"===g[5]&&"examples"===g[7]&&"value"===g[9]},function(g){return"paths"===g[0]&&"requestBody"===g[3]&&"content"===g[4]&&"example"===g[6]},function(g){return"paths"===g[0]&&"requestBody"===g[3]&&"content"===g[4]&&"examples"===g[6]&&"value"===g[8]},function(g){return"paths"===g[0]&&"parameters"===g[2]&&"example"===g[4]},function(g){return"paths"===g[0]&&"parameters"===g[3]&&"example"===g[5]},function(g){return"paths"===g[0]&&"parameters"===g[2]&&"examples"===g[4]&&"value"===g[6]},function(g){return"paths"===g[0]&&"parameters"===g[3]&&"examples"===g[5]&&"value"===g[7]},function(g){return"paths"===g[0]&&"parameters"===g[2]&&"content"===g[4]&&"example"===g[6]},function(g){return"paths"===g[0]&&"parameters"===g[2]&&"content"===g[4]&&"examples"===g[6]&&"value"===g[8]},function(g){return"paths"===g[0]&&"parameters"===g[3]&&"content"===g[4]&&"example"===g[7]},function(g){return"paths"===g[0]&&"parameters"===g[3]&&"content"===g[5]&&"examples"===g[7]&&"value"===g[9]}],Zf={key:"$ref",plugin:function(E,w,R,N){var U=N.getInstance(),V=ho()(R).call(R,0,-1);if(!li(V)&&!function(E){return Qf.some(function(w){return w(E)})}(V)){var se=N.getContext(R).baseDoc;if("string"!=typeof E)return new fr("$ref: must be a string (JSON-Ref)",{$ref:E,baseDoc:se,fullPath:R});var Ae,Le,Je,le=Kh(E),Se=le[0],we=le[1]||"";try{Ae=se||Se?o_(Se,se):null}catch(at){return qf(at,{pointer:we,$ref:E,basePath:Ae,fullPath:R})}if(function(g,E,w,R){var N,U,V=ds.get(R);V||ds.set(R,V={});var X=function(g){return 0===g.length?"":"/".concat(Gt()(g).call(g,Td).join("/"))}(w),se=Xe()(N="".concat(E||"<specmap-base>","#")).call(N,g),le=X.replace(/allOf\/\d+\/?/g,"");if(E===R.contextTree.get([]).baseDoc&&ig(le,g))return!0;var we="";if(w.some(function(Le){var Je;return we=Xe()(Je="".concat(we,"/")).call(Je,Td(Le)),V[we]&&V[we].some(function(Ze){return ig(Ze,se)||ig(se,Ze)})}))return!0;V[le]=Xe()(U=V[le]||[]).call(U,se)}(we,Ae,V,N)&&!U.useCircularStructures){var Ze=Ki(E,Ae);return E===Ze?null:ti.replace(R,Ze)}if(null==Ae?(Je=be(we),void 0===(Le=N.get(Je))&&(Le=new fr("Could not resolve reference: ".concat(E),{pointer:we,$ref:E,baseDoc:se,fullPath:R}))):Le=null!=(Le=Ry(Ae,we)).__value?Le.__value:Le.catch(function(at){throw qf(at,{pointer:we,$ref:E,baseDoc:se,fullPath:R})}),Le instanceof Error)return[ti.remove(R),Le];var ut=Ki(E,Ae),Ht=ti.replace(V,Le,{$$ref:ut});if(Ae&&Ae!==se)return[Ht,ti.context(V,{baseDoc:Ae})];try{if(!function(g,E){var w=[g];return E.path.reduce(function(N,U){return w.push(N[U]),N[U]},g),function R(N){return ti.isObject(N)&&(w.indexOf(N)>=0||Bt()(N).some(function(U){return R(N[U])}))}(E.value)}(N.state,Ht)||U.useCircularStructures)return Ht}catch(at){return null}}}},tc=Q()(Zf,{docCache:Cr,absoluteify:o_,clearCache:function(g){void 0!==g?delete Cr[g]:Bt()(Cr).forEach(function(E){delete Cr[E]})},JSONRefError:fr,wrapError:qf,getDoc:eu,split:Kh,extractFromDoc:Ry,fetchJSON:function(g){return fetch(g,{headers:{Accept:er},loadSpec:!0}).then(function(E){return E.text()}).then(function(E){return sd.load(E)})},extract:tg,jsonPointerToArray:be,unescapeJsonPointerToken:ng});const My=tc;function o_(g,E){if(!us.test(g)){var w;if(!E)throw new fr(Xe()(w="Tried to resolve a relative URL, without having a basePath. path: '".concat(g,"' basePath: '")).call(w,E,"'"));return ie.resolve(E,g)}return g}function qf(g,E){var w,R;return w=g&&g.response&&g.response.body?Xe()(R="".concat(g.response.body.code," ")).call(R,g.response.body.message):g.message,new fr("Could not resolve reference: ".concat(w),E,g)}function Kh(g){return(g+"").split("#")}function Ry(g,E){var w=Cr[g];if(w&&!ti.isPromise(w))try{var R=tg(E,w);return Q()(ol().resolve(R),{__value:R})}catch(N){return ol().reject(N)}return eu(g).then(function(N){return tg(E,N)})}function eu(g){var E=Cr[g];return E?ti.isPromise(E)?E:ol().resolve(E):(Cr[g]=tc.fetchJSON(g).then(function(w){return Cr[g]=w,w}),Cr[g])}function tg(g,E){var w=be(g);if(w.length<1)return E;var R=ti.getIn(E,w);if(void 0===R)throw new fr("Could not resolve pointer: ".concat(g," does not exist in document"),{pointer:g});return R}function be(g){var E;if("string"!=typeof g)throw new TypeError("Expected a string, got a ".concat(re(g)));return"/"===g[0]&&(g=g.substr(1)),""===g?[]:Gt()(E=g.split("/")).call(E,ng)}function ng(g){return"string"!=typeof g?g:new(Ve())("=".concat(g.replace(/~1/g,"/").replace(/~0/g,"~"))).get("")}function Td(g){var E,w=new(Ve())([["",g.replace(/~/g,"~0").replace(/\//g,"~1")]]);return ho()(E=w.toString()).call(E,1)}function ig(g,E){if(function(E){return!E||"/"===E||"#"===E}(E))return!0;var w=g.charAt(E.length),R=ho()(E).call(E,-1);return 0===g.indexOf(E)&&(!w||"/"===w||"#"===w)&&"#"!==R}var CD=m(85191),nu=m.n(CD);const Ji={key:"allOf",plugin:function(E,w,R,N,U){if(!U.meta||!U.meta.$$ref){var V=ho()(R).call(R,0,-1);if(!li(V)){if(!Array.isArray(E)){var X=new TypeError("allOf must be an array");return X.fullPath=R,X}var se=!1,le=U.value;if(V.forEach(function(Ae){!le||(le=le[Ae])}),le=F({},le),!nu()(le)){delete le.allOf;var we,Se=[];return Se.push(N.replace(V,{})),E.forEach(function(Ae,Le){if(!N.isObject(Ae)){if(se)return null;se=!0;var Je=new TypeError("Elements in allOf must be objects");return Je.fullPath=R,Se.push(Je)}Se.push(N.mergeDeep(V,Ae));var ut=function(g,E){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},R=w.specmap,N=w.getBaseUrlForNodePath,U=void 0===N?function(le){var Se;return R.getContext(Xe()(Se=[]).call(Se,as(E),as(le))).baseDoc}:N,V=w.targetKeys,X=void 0===V?["$ref","$$ref"]:V,se=[];return Yt()(g).forEach(function(){if(yt()(X).call(X,this.key)&&"string"==typeof this.node){var Se=this.path,we=Xe()(E).call(E,this.path),Ae=Ki(this.node,U(Se));se.push(R.replace(we,Ae))}}),se}(Ae,ho()(R).call(R,0,-1),{getBaseUrlForNodePath:function(at){var Kn;return N.getContext(Xe()(Kn=[]).call(Kn,as(R),[Le],as(at))).baseDoc},specmap:N});Se.push.apply(Se,as(ut))}),Se.push(N.mergeDeep(V,le)),le.$$ref||Se.push(N.remove(Xe()(we=[]).call(we,V,"$$ref"))),Se}}}}},Jh={key:"parameters",plugin:function(E,w,R,N){if(Array.isArray(E)&&E.length){var U=Q()([],E),V=ho()(R).call(R,0,-1),X=F({},ti.getIn(N.spec,V));return E.forEach(function(se,le){try{U[le].default=N.parameterMacro(X,se)}catch(we){var Se=new Error(we);return Se.fullPath=R,Se}}),ti.replace(R,U)}return ti.replace(R,E)}},go={key:"properties",plugin:function(E,w,R,N){var U=F({},E);for(var V in E)try{U[V].default=N.modelPropertyMacro(U[V])}catch(le){var X=new Error(le);return X.fullPath=R,X}return ti.replace(R,U)}};var Iy=function(){function g(E){Bh(this,g),this.root=Qh(E||{})}return As(g,[{key:"set",value:function(w,R){var N=this.getParent(w,!0);if(N){var U=w[w.length-1],V=N.children;V[U]?iu(V[U],R,N):V[U]=Qh(R,N)}else iu(this.root,R,null)}},{key:"get",value:function(w){if((w=w||[]).length<1)return this.root.value;for(var N,U,R=this.root,V=0;V<w.length&&(N=R.children)[U=w[V]];V+=1)R=N[U];return R&&R.protoValue}},{key:"getParent",value:function(w,R){return!w||w.length<1?null:w.length<2?this.root:ho()(w).call(w,0,-1).reduce(function(N,U){if(!N)return N;var V=N.children;return!V[U]&&R&&(V[U]=Qh(null,N)),V[U]},this.root)}}]),g}();function Qh(g,E){return iu({children:{}},g,E)}function iu(g,E,w){return g.value=E||{},g.protoValue=w?F(F({},w.protoValue),g.value):g.value,Bt()(g.children).forEach(function(R){var N=g.children[R];g.children[R]=iu(N,N.value,g)}),g}var rg=function(){},Ay=function(){function g(E){var R,N,w=this;Bh(this,g),Q()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new Iy,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Q()(Object.create(this),ti,{getInstance:function(){return w}}),allowMetaPatches:!1},E),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=En()(R=Gt()(N=this.plugins).call(N,this.wrapPlugin.bind(this))).call(R,ti.isFunction),this.patches.push(ti.add([],this.spec)),this.patches.push(ti.context([],this.context)),this.updatePatches(this.patches)}return As(g,[{key:"debug",value:function(w){if(this.debugLevel===w){for(var R,N=arguments.length,U=new Array(N>1?N-1:0),V=1;V<N;V++)U[V-1]=arguments[V];(R=console).log.apply(R,U)}}},{key:"verbose",value:function(w){if("verbose"===this.debugLevel){for(var R,N,U=arguments.length,V=new Array(U>1?U-1:0),X=1;X<U;X++)V[X-1]=arguments[X];(R=console).log.apply(R,Xe()(N=["[".concat(w,"]   ")]).call(N,V))}}},{key:"wrapPlugin",value:function(w,R){var V,se,le,N=this.pathDiscriminator,U=null;return w[this.pluginProp]?(U=w,V=w[this.pluginProp]):ti.isFunction(w)?V=w:ti.isObject(w)&&(se=w,le=function(we,Ae){return!Array.isArray(we)||we.every(function(Le,Je){return Le===Ae[Je]})},V=Ye().mark(function Se(we,Ae){var Le,Je,Ze,ut,Ht,at;return Ye().wrap(function(Wn){for(;;)switch(Wn.prev=Wn.next){case 0:at=function(Ni,Ci,Wr){var Io,gr,Er,Jn,ar,mr,dl,wa,ou,su,S_,fg,ps;return Ye().wrap(function(mo){for(;;)switch(mo.prev=mo.next){case 0:if(ti.isObject(Ni)){mo.next=6;break}if(se.key!==Ci[Ci.length-1]){mo.next=4;break}return mo.next=4,se.plugin(Ni,se.key,Ci,Ae);case 4:mo.next=30;break;case 6:gr=Ci[Io=Ci.length-1],Er=Ci.indexOf("properties"),Jn="properties"===gr&&Io===Er,ar=Ae.allowMetaPatches&&Je[Ni.$$ref],mr=0,dl=Bt()(Ni);case 12:if(!(mr<dl.length)){mo.next=30;break}if(ou=Ni[wa=dl[mr]],su=Xe()(Ci).call(Ci,wa),S_=ti.isObject(ou),fg=Ni.$$ref,ar){mo.next=22;break}if(!S_){mo.next=22;break}return Ae.allowMetaPatches&&fg&&(Je[fg]=!0),mo.delegateYield(at(ou,su,Wr),"t0",22);case 22:if(Jn||wa!==se.key){mo.next=27;break}if(ps=le(N,Ci),N&&!ps){mo.next=27;break}return mo.next=27,se.plugin(ou,wa,su,Ae,Wr);case 27:mr++,mo.next=12;break;case 30:case"end":return mo.stop()}},Le)},Le=Ye().mark(at),Je={},Ze=J(En()(we).call(we,ti.isAdditiveMutation)),Wn.prev=4,Ze.s();case 6:if((ut=Ze.n()).done){Wn.next=11;break}return Wn.delegateYield(at((Ht=ut.value).value,Ht.path,Ht),"t0",9);case 9:Wn.next=6;break;case 11:Wn.next=16;break;case 13:Wn.prev=13,Wn.t1=Wn.catch(4),Ze.e(Wn.t1);case 16:return Wn.prev=16,Ze.f(),Wn.finish(16);case 19:case"end":return Wn.stop()}},Se,null,[[4,13,16,19]])})),Q()(V.bind(U),{pluginName:w.name||R,isGenerator:ti.isGenerator(V)})}},{key:"nextPlugin",value:function(){var w,R=this;return Gf()(w=this.wrappedPlugins).call(w,function(N){return R.getMutationsForPlugin(N).length>0})}},{key:"nextPromisedPatch",value:function(){var w;if(this.promisedPatches.length>0)return ol().race(Gt()(w=this.promisedPatches).call(w,function(R){return R.value}))}},{key:"getPluginHistory",value:function(w){var R=this.constructor.getPluginName(w);return this.pluginHistory[R]||[]}},{key:"getPluginRunCount",value:function(w){return this.getPluginHistory(w).length}},{key:"getPluginHistoryTip",value:function(w){var R=this.getPluginHistory(w);return R&&R[R.length-1]||{}}},{key:"getPluginMutationIndex",value:function(w){var R=this.getPluginHistoryTip(w).mutationIndex;return"number"!=typeof R?-1:R}},{key:"updatePluginHistory",value:function(w,R){var N=this.constructor.getPluginName(w);this.pluginHistory[N]=this.pluginHistory[N]||[],this.pluginHistory[N].push(R)}},{key:"updatePatches",value:function(w){var R=this;ti.normalizeArray(w).forEach(function(N){if(N instanceof Error)R.errors.push(N);else try{if(!ti.isObject(N))return void R.debug("updatePatches","Got a non-object patch",N);if(R.showDebug&&R.allPatches.push(N),ti.isPromise(N.value))return R.promisedPatches.push(N),void R.promisedPatchThen(N);if(ti.isContextPatch(N))return void R.setContext(N.path,N.value);if(ti.isMutation(N))return void R.updateMutations(N)}catch(U){console.error(U),R.errors.push(U)}})}},{key:"updateMutations",value:function(w){"object"===re(w.value)&&!Array.isArray(w.value)&&this.allowMetaPatches&&(w.value=F({},w.value));var R=ti.applyPatch(this.state,w,{allowMetaPatches:this.allowMetaPatches});R&&(this.mutations.push(w),this.state=R)}},{key:"removePromisedPatch",value:function(w){var R,N=this.promisedPatches.indexOf(w);N<0?this.debug("Tried to remove a promisedPatch that isn't there!"):Kc()(R=this.promisedPatches).call(R,N,1)}},{key:"promisedPatchThen",value:function(w){var R=this;return w.value=w.value.then(function(N){var U=F(F({},w),{},{value:N});R.removePromisedPatch(w),R.updatePatches(U)}).catch(function(N){R.removePromisedPatch(w),R.updatePatches(N)}),w.value}},{key:"getMutations",value:function(w,R){var N;return w=w||0,"number"!=typeof R&&(R=this.mutations.length),ho()(N=this.mutations).call(N,w,R)}},{key:"getCurrentMutations",value:function(){return this.getMutationsForPlugin(this.getCurrentPlugin())}},{key:"getMutationsForPlugin",value:function(w){var R=this.getPluginMutationIndex(w);return this.getMutations(R+1)}},{key:"getCurrentPlugin",value:function(){return this.currentPlugin}},{key:"getLib",value:function(){return this.libMethods}},{key:"_get",value:function(w){return ti.getIn(this.state,w)}},{key:"_getContext",value:function(w){return this.contextTree.get(w)}},{key:"setContext",value:function(w,R){return this.contextTree.set(w,R)}},{key:"_hasRun",value:function(w){return this.getPluginRunCount(this.getCurrentPlugin())>(w||0)}},{key:"dispatch",value:function(){var X,w=this,R=this,N=this.nextPlugin();if(!N){var U=this.nextPromisedPatch();if(U)return U.then(function(){return w.dispatch()}).catch(function(){return w.dispatch()});var V={spec:this.state,errors:this.errors};return this.showDebug&&(V.patches=this.allPatches),ol().resolve(V)}if(R.pluginCount=R.pluginCount||{},R.pluginCount[N]=(R.pluginCount[N]||0)+1,R.pluginCount[N]>100)return ol().resolve({spec:R.state,errors:Xe()(X=R.errors).call(X,new Error("We've reached a hard limit of ".concat(100," plugin runs")))});if(N!==this.currentPlugin&&this.promisedPatches.length){var se,le=Gt()(se=this.promisedPatches).call(se,function(Ae){return Ae.value});return ol().all(Gt()(le).call(le,function(Ae){return Ae.then(rg,rg)})).then(function(){return w.dispatch()})}return function(){R.currentPlugin=N;var Ae=R.getCurrentMutations(),Le=R.mutations.length-1;try{if(N.isGenerator){var Ze,Je=J(N(Ae,R.getLib()));try{for(Je.s();!(Ze=Je.n()).done;)we(Ze.value)}catch(at){Je.e(at)}finally{Je.f()}}else we(N(Ae,R.getLib()))}catch(at){console.error(at),we([Q()(Object.create(at),{plugin:N})])}finally{R.updatePluginHistory(N,{mutationIndex:Le})}return R.dispatch()}();function we(Ae){Ae&&(Ae=ti.fullyNormalizeArray(Ae),R.updatePatches(Ae,N))}}}],[{key:"getPluginName",value:function(w){return w.pluginName}},{key:"getPatchesOfType",value:function(w,R){return En()(w).call(w,R)}}]),g}(),hs={refs:My,allOf:Ji,parameters:Jh,properties:go},Dd=m(4471),l_=m.n(Dd),Oy=function(E){return String.prototype.toLowerCase.call(E)},og=function(E){return E.replace(/[^\w]/gi,"_")};function c_(g){var E=g.openapi;return!!E&&ae()(E).call(E,"3")}function Zh(g,E){var w=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",R=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},N=R.v2OperationIdCompatibilityMode;if(!g||"object"!==re(g))return null;var U=(g.operationId||"").replace(/\s/g,"");return U.length?og(g.operationId):ky(E,w,{v2OperationIdCompatibilityMode:N})}function ky(g,E){var w,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},N=R.v2OperationIdCompatibilityMode;if(N){var U,V,X=Xe()(U="".concat(E.toLowerCase(),"_")).call(U,g).replace(/[\s!@#$%^&*()_+=[{\]};:<>|./?,\\'""-]/g,"_");return(X=X||Xe()(V="".concat(g.substring(1),"_")).call(V,E)).replace(/((_){2,})/g,"_").replace(/^(_)*/g,"").replace(/([_])*$/g,"")}return Xe()(w="".concat(Oy(E))).call(w,og(g))}function u_(g,E){var w;return Xe()(w="".concat(Oy(E),"-")).call(w,g)}function ic(g,E,w){if(!g||"object"!==re(g)||!g.paths||"object"!==re(g.paths))return null;var R=g.paths;for(var N in R)for(var U in R[N])if("PARAMETERS"!==U.toUpperCase()){var V=R[N][U];if(V&&"object"===re(V)){var X={spec:g,pathName:N,method:U.toUpperCase(),operation:V},se=E(X);if(w&&se)return X}}}function d_(g){var E=g.spec,w=E.paths,R={};if(!w||E.$$normalized)return g;for(var N in w){var U=w[N];if(l_()(U)){var V=U.parameters,X=function(we){var Ae=U[we];if(!l_()(Ae))return"continue";var Le=Zh(Ae,N,we);if(Le){R[Le]?R[Le].push(Ae):R[Le]=[Ae];var Je=R[Le];if(Je.length>1)Je.forEach(function(gr,Er){var Jn;gr.__originalOperationId=gr.__originalOperationId||gr.operationId,gr.operationId=Xe()(Jn="".concat(Le)).call(Jn,Er+1)});else if(void 0!==Ae.operationId){var Ze=Je[0];Ze.__originalOperationId=Ze.__originalOperationId||Ae.operationId,Ze.operationId=Le}}if("parameters"!==we){var ut=[],Ht={};for(var at in E)("produces"===at||"consumes"===at||"security"===at)&&(Ht[at]=E[at],ut.push(Ht));if(V&&(Ht.parameters=V,ut.push(Ht)),ut.length){var Wn,Kn=J(ut);try{for(Kn.s();!(Wn=Kn.n()).done;){var nr=Wn.value;for(var Ni in nr)if(Ae[Ni]){if("parameters"===Ni){var Wr,Ci=J(nr[Ni]);try{var Io=function(){var Er=Wr.value;Ae[Ni].some(function(ar){return ar.name&&ar.name===Er.name||ar.$ref&&ar.$ref===Er.$ref||ar.$$ref&&ar.$$ref===Er.$$ref||ar===Er})||Ae[Ni].push(Er)};for(Ci.s();!(Wr=Ci.n()).done;)Io()}catch(gr){Ci.e(gr)}finally{Ci.f()}}}else Ae[Ni]=nr[Ni]}}catch(gr){Kn.e(gr)}finally{Kn.f()}}}};for(var se in U)X(se)}}return E.$$normalized=!0,g}function h_(g){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=E.requestInterceptor,R=E.responseInterceptor,N=g.withCredentials?"include":"same-origin";return function(U){return g({url:U,loadSpec:!0,requestInterceptor:w,responseInterceptor:R,headers:{Accept:er},credentials:N}).then(function(V){return V.body})}}function Md(g){var w=g.spec,N=g.mode,U=g.allowMetaPatches,V=void 0===U||U,X=g.pathDiscriminator,se=g.modelPropertyMacro,le=g.parameterMacro,Se=g.requestInterceptor,we=g.responseInterceptor,Ae=g.skipNormalization,Le=g.useCircularStructures,Je=g.http,Ze=g.baseDoc;return Ze=Ze||g.url,Je=g.fetch||Je||pr,w?ut(w):h_(Je,{requestInterceptor:Se,responseInterceptor:we})(Ze).then(ut);function ut(Ht){Ze&&(hs.refs.docCache[Ze]=Ht),hs.refs.fetchJSON=h_(Je,{requestInterceptor:Se,responseInterceptor:we});var at=[hs.refs];return"function"==typeof le&&at.push(hs.parameters),"function"==typeof se&&at.push(hs.properties),"strict"!==N&&at.push(hs.allOf),function(g){return new Ay(g).dispatch()}({spec:Ht,context:{baseDoc:Ze},plugins:at,allowMetaPatches:V,pathDiscriminator:X,parameterMacro:le,modelPropertyMacro:se,useCircularStructures:Le}).then(Ae?function(){var Kn=Me(Ye().mark(function Wn(nr){return Ye().wrap(function(Ci){for(;;)switch(Ci.prev=Ci.next){case 0:return Ci.abrupt("return",nr);case 1:case"end":return Ci.stop()}},Wn)}));return function(Wn){return Kn.apply(this,arguments)}}():d_)}}var ag=m(17410),ru=m.n(ag);function ep(){return(ep=Me(Ye().mark(function g(E,w){var R,N,we,Ae,Le,Je,Ze=arguments;return Ye().wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return N=(R=Ze.length>2&&void 0!==Ze[2]?Ze[2]:{}).returnEntireTree,we={pathDiscriminator:w,baseDoc:R.baseDoc,requestInterceptor:R.requestInterceptor,responseInterceptor:R.responseInterceptor,parameterMacro:R.parameterMacro,modelPropertyMacro:R.modelPropertyMacro,useCircularStructures:R.useCircularStructures},Ae=d_({spec:E}),Le=Ae.spec,Ht.next=6,Md(F(F({},we),{},{spec:Le,allowMetaPatches:!0,skipNormalization:!0}));case 6:return Je=Ht.sent,!N&&Array.isArray(w)&&w.length&&(Je.spec=ru()(Je.spec,w)||null),Ht.abrupt("return",Je);case 9:case"end":return Ht.stop()}},g)}))).apply(this,arguments)}var rc=function(){return null},tp_mapTagOperations=function(g){var E=g.spec,w=g.cb,R=void 0===w?rc:w,N=g.defaultTag,U=void 0===N?"default":N,V=g.v2OperationIdCompatibilityMode,X={},se={};return ic(E,function(le){var Se=le.pathName,we=le.method,Ae=le.operation;(Ae.tags?function(E){return Array.isArray(E)?E:[E]}(Ae.tags):[U]).forEach(function(Je){if("string"==typeof Je){se[Je]=se[Je]||{};var at,Ze=se[Je],ut=Zh(Ae,Se,we,{v2OperationIdCompatibilityMode:V}),Ht=R({spec:E,pathName:Se,method:we,operation:Ae,operationId:ut});if(X[ut])X[ut]+=1,Ze[Xe()(at="".concat(ut)).call(at,X[ut])]=Ht;else if(void 0!==Ze[ut]){var Kn,Wn,nr=X[ut]||1;X[ut]=nr+1,Ze[Xe()(Kn="".concat(ut)).call(Kn,X[ut])]=Ht;var Ni=Ze[ut];delete Ze[ut],Ze[Xe()(Wn="".concat(ut)).call(Wn,nr)]=Ni}else Ze[ut]=Ht}})}),se},tp_makeExecute=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(E){var w=E.pathName,R=E.method,N=E.operationId;return function(U){var V=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},X=g.requestInterceptor,se=g.responseInterceptor,le=g.userFetch;return g.execute(F({spec:g.spec,requestInterceptor:X,responseInterceptor:se,userFetch:le,pathName:w,method:R,parameters:U,operationId:N},V))}}},Ps=m(93165);var By=m(64994),g_=m.n(By),Vy=m(59716);const Hy={body:function(g){g.req.body=g.value},header:function(g){var E=g.req,w=g.parameter,R=g.value;E.headers=E.headers||{},void 0!==R&&(E.headers[w.name]=R)},query:function(g){var E=g.req,w=g.value,R=g.parameter;if(E.query=E.query||{},!1===w&&"boolean"===R.type&&(w="false"),0===w&&["number","integer"].indexOf(R.type)>-1&&(w="0"),w)E.query[R.name]={collectionFormat:R.collectionFormat,value:w};else if(R.allowEmptyValue&&void 0!==w){var N=R.name;E.query[N]=E.query[N]||{},E.query[N].allowEmptyValue=!0}},path:function(g){var E=g.req,w=g.value;E.url=E.url.split("{".concat(g.parameter.name,"}")).join(encodeURIComponent(w))},formData:function(g){var E=g.req,w=g.value,R=g.parameter;(w||R.allowEmptyValue)&&(E.form=E.form||{},E.form[R.name]={value:w,allowEmptyValue:R.allowEmptyValue,collectionFormat:R.collectionFormat})}};function lg(g,E){return yt()(E).call(E,"application/json")?"string"==typeof g?g:Gn()(g):g.toString()}function zy(g){var E=g.req,w=g.value,R=g.parameter,N=R.name,U=R.style,V=R.explode,X=R.content;if(X){var se=Bt()(X)[0];E.url=E.url.split("{".concat(N,"}")).join(Xo(lg(w,se),{escape:!0}))}else{var le=Yo({key:R.name,value:w,style:U||"simple",explode:V||!1,escape:!0});E.url=E.url.split("{".concat(N,"}")).join(le)}}function Rd(g){var E=g.req,w=g.value,R=g.parameter;if(E.query=E.query||{},R.content){var N=Bt()(R.content)[0];E.query[R.name]=lg(w,N)}else if(!1===w&&(w="false"),0===w&&(w="0"),w)E.query[R.name]={value:w,serializationOption:{style:R.style,explode:R.explode,allowReserved:R.allowReserved}};else if(R.allowEmptyValue&&void 0!==w){var se=R.name;E.query[se]=E.query[se]||{},E.query[se].allowEmptyValue=!0}}var __=["accept","authorization","content-type"];function Ks(g){var E=g.req,w=g.parameter,R=g.value;if(E.headers=E.headers||{},!(__.indexOf(w.name.toLowerCase())>-1)){if(w.content){var N=Bt()(w.content)[0];return void(E.headers[w.name]=lg(R,N))}void 0!==R&&(E.headers[w.name]=Yo({key:w.name,value:R,style:w.style||"simple",explode:void 0!==w.explode&&w.explode,escape:!1}))}}function Id(g){var E=g.req,w=g.parameter,R=g.value;E.headers=E.headers||{};var N=re(R);if(w.content){var U,V=Bt()(w.content)[0];E.headers.Cookie=Xe()(U="".concat(w.name,"=")).call(U,lg(R,V))}else if("undefined"!==N){var X="object"===N&&!Array.isArray(R)&&w.explode?"":"".concat(w.name,"=");E.headers.Cookie=X+Yo({key:w.name,value:R,escape:!1,style:w.style||"form",explode:void 0!==w.explode&&w.explode})}}var v_=m(56675),cg=m.n(v_);var ug=["http","fetch","spec","operationId","pathName","method","parameters","securities"],np=function(E){return Array.isArray(E)?E:[]},dg=Ge("OperationNotFoundError",function(E,w,R){this.originalError=R,Q()(this,w||{})}),y_={buildRequest:C_};function C_(g){var E,w,R=g.spec,N=g.operationId,U=g.responseContentType,V=g.scheme,X=g.requestInterceptor,se=g.responseInterceptor,le=g.contextUrl,Se=g.userFetch,we=g.server,Ae=g.serverVariables,Le=g.http,Je=g.parameters,Ze=g.parameterBuilders,ut=c_(R);Ze||(Ze=ut?s:Hy);var at={url:"",credentials:Le&&Le.withCredentials?"include":"same-origin",headers:{},cookies:{}};X&&(at.requestInterceptor=X),se&&(at.responseInterceptor=se),Se&&(at.userFetch=Se);var Kn=function(g,E){return g&&g.paths?function(g,E){return ic(g,E,!0)||null}(g,function(w){var R=w.pathName,N=w.method,U=w.operation;if(!U||"object"!==re(U))return!1;var V=U.operationId;return[Zh(U,R,N),u_(R,N),V].some(function(le){return le&&le===E})}):null}(R,N);if(!Kn)throw new dg("Operation ".concat(N," not found"));var Wn=Kn.operation,nr=void 0===Wn?{}:Wn,Ni=Kn.method,Ci=Kn.pathName;if(at.url+=E_({spec:R,scheme:V,contextUrl:le,server:we,serverVariables:Ae,pathName:Ci,method:Ni}),!N)return delete at.cookies,at;at.url+=Ci,at.method="".concat(Ni).toUpperCase(),Je=Je||{};var Wr=R.paths[Ci]||{};U&&(at.headers.accept=U);var Io=function(E){var w={};E.forEach(function(N){w[N.in]||(w[N.in]={}),w[N.in][N.name]=N});var R=[];return Bt()(w).forEach(function(N){Bt()(w[N]).forEach(function(U){R.push(w[N][U])})}),R}(Xe()(E=Xe()(w=[]).call(w,np(nr.parameters))).call(E,np(Wr.parameters)));Io.forEach(function(Jn){var mr,dl,ar=Ze[Jn.in];if("body"===Jn.in&&Jn.schema&&Jn.schema.properties&&(mr=Je),void 0===(mr=Jn&&Jn.name&&Je[Jn.name]))mr=Jn&&Jn.name&&Je[Xe()(dl="".concat(Jn.in,".")).call(dl,Jn.name)];else if(function(E,w){return En()(w).call(w,function(R){return R.name===E})}(Jn.name,Io).length>1){var wa;console.warn(Xe()(wa="Parameter '".concat(Jn.name,"' is ambiguous because the defined spec has more than one parameter with the name: '")).call(wa,Jn.name,"' and the passed-in parameter values did not define an 'in' value."))}if(null!==mr){if(void 0!==Jn.default&&void 0===mr&&(mr=Jn.default),void 0===mr&&Jn.required&&!Jn.allowEmptyValue)throw new Error("Required parameter ".concat(Jn.name," is not provided"));if(ut&&Jn.schema&&"object"===Jn.schema.type&&"string"==typeof mr)try{mr=JSON.parse(mr)}catch(ou){throw new Error("Could not parse object parameter value string as JSON")}ar&&ar({req:at,parameter:Jn,value:mr,operation:nr,spec:R})}});var gr=F(F({},g),{},{operation:nr});if((at=ut?function(g,E){var w=g.operation,R=g.requestBody,V=g.attachContentTypeForEmptyPayload,X=g.requestContentType;E=function(g){var E=g.request,w=g.securities,R=void 0===w?{}:w,N=g.operation,U=void 0===N?{}:N,V=g.spec,X=F({},E),se=R.authorized,le=void 0===se?{}:se,Se=U.security||V.security||[],we=le&&!!Bt()(le).length,Ae=ru()(V,["components","securitySchemes"])||{};return X.headers=X.headers||{},X.query=X.query||{},Bt()(R).length&&we&&Se&&(!Array.isArray(U.security)||U.security.length)?(Se.forEach(function(Le){Bt()(Le).forEach(function(Je){var Ze=le[Je],ut=Ae[Je];if(Ze){var Ht=Ze.value||Ze,at=ut.type;if(Ze)if("apiKey"===at)"query"===ut.in&&(X.query[ut.name]=Ht),"header"===ut.in&&(X.headers[ut.name]=Ht),"cookie"===ut.in&&(X.cookies[ut.name]=Ht);else if("http"===at){if(/^basic$/i.test(ut.scheme)){var Kn,Wn=Ht.username||"",nr=Ht.password||"",Ni=cg()(Xe()(Kn="".concat(Wn,":")).call(Kn,nr));X.headers.Authorization="Basic ".concat(Ni)}/^bearer$/i.test(ut.scheme)&&(X.headers.Authorization="Bearer ".concat(Ht))}else if("oauth2"===at||"openIdConnect"===at){var Ci,Wr=Ze.token||{},gr=Wr[ut["x-tokenName"]||"access_token"],Er=Wr.token_type;(!Er||"bearer"===Er.toLowerCase())&&(Er="Bearer"),X.headers.Authorization=Xe()(Ci="".concat(Er," ")).call(Ci,gr)}}})}),X):E}({request:E,securities:g.securities,operation:w,spec:g.spec});var se=w.requestBody||{},le=Bt()(se.content||{}),Se=X&&le.indexOf(X)>-1;if(R||V){if(X&&Se)E.headers["Content-Type"]=X;else if(!X){var we=le[0];we&&(E.headers["Content-Type"]=we,X=we)}}else X&&Se&&(E.headers["Content-Type"]=X);if(!g.responseContentType&&w.responses){var Ae,Le=En()(Ae=ln()(w.responses)).call(Ae,function(Ze){var ut=ye(Ze,2),at=ut[1],Kn=parseInt(ut[0],10);return Kn>=200&&Kn<300&&g_()(at.content)}).reduce(function(Ze,ut){var at=ye(ut,2)[1];return Xe()(Ze).call(Ze,Bt()(at.content))},[]);Le.length>0&&(E.headers.accept=Le.join(", "))}if(R)if(X){if(le.indexOf(X)>-1)if("application/x-www-form-urlencoded"===X||"multipart/form-data"===X)if("object"===re(R)){var Je=(se.content[X]||{}).encoding||{};E.form={},Bt()(R).forEach(function(Ze){E.form[Ze]={value:R[Ze],encoding:Je[Ze]||{}}})}else E.form=R;else E.body=R}else E.body=R;return E}(gr,at):function(g,E){var se,le,w=g.spec,R=g.operation,U=g.requestContentType,V=g.responseContentType,X=g.attachContentTypeForEmptyPayload;if((E=function(g){var E=g.request,w=g.securities,R=void 0===w?{}:w,N=g.operation,U=void 0===N?{}:N,V=g.spec,X=F({},E),se=R.authorized,le=void 0===se?{}:se,Se=R.specSecurity,Ae=U.security||(void 0===Se?[]:Se),Le=le&&!!Bt()(le).length,Je=V.securityDefinitions;return X.headers=X.headers||{},X.query=X.query||{},Bt()(R).length&&Le&&Ae&&(!Array.isArray(U.security)||U.security.length)?(Ae.forEach(function(Ze){Bt()(Ze).forEach(function(ut){var Ht=le[ut];if(Ht){var at=Ht.token,Kn=Ht.value||Ht,Wn=Je[ut],nr=Wn.type,Ci=at&&at[Wn["x-tokenName"]||"access_token"],Wr=at&&at.token_type;if(Ht)if("apiKey"===nr){var Io="query"===Wn.in?"query":"headers";X[Io]=X[Io]||{},X[Io][Wn.name]=Kn}else if("basic"===nr)if(Kn.header)X.headers.authorization=Kn.header;else{var gr,Er=Kn.username||"",Jn=Kn.password||"";Kn.base64=cg()(Xe()(gr="".concat(Er,":")).call(gr,Jn)),X.headers.authorization="Basic ".concat(Kn.base64)}else if("oauth2"===nr&&Ci){var ar;Wr=Wr&&"bearer"!==Wr.toLowerCase()?Wr:"Bearer",X.headers.authorization=Xe()(ar="".concat(Wr," ")).call(ar,Ci)}}})}),X):E}({request:E,securities:g.securities,operation:R,spec:w})).body||E.form||X)if(U)E.headers["Content-Type"]=U;else if(Array.isArray(R.consumes)){var Se=ye(R.consumes,1);E.headers["Content-Type"]=Se[0]}else if(Array.isArray(w.consumes)){var we=ye(w.consumes,1);E.headers["Content-Type"]=we[0]}else R.parameters&&En()(se=R.parameters).call(se,function(ut){return"file"===ut.type}).length?E.headers["Content-Type"]="multipart/form-data":R.parameters&&En()(le=R.parameters).call(le,function(ut){return"formData"===ut.in}).length&&(E.headers["Content-Type"]="application/x-www-form-urlencoded");else if(U){var Ae,Le,Je=R.parameters&&En()(Ae=R.parameters).call(Ae,function(ut){return"body"===ut.in}).length>0,Ze=R.parameters&&En()(Le=R.parameters).call(Le,function(ut){return"formData"===ut.in}).length>0;(Je||Ze)&&(E.headers["Content-Type"]=U)}return!V&&Array.isArray(R.produces)&&R.produces.length>0&&(E.headers.accept=R.produces.join(", ")),E}(gr,at)).cookies&&Bt()(at.cookies).length){var Er=Bt()(at.cookies).reduce(function(Jn,ar){return Jn+(Jn?"&":"")+Vy.serialize(ar,at.cookies[ar])},"");at.headers.Cookie=Er}return at.cookies&&delete at.cookies,xr(at),at}var hg=function(E){return E?E.replace(/\W/g,""):null};function E_(g){return c_(g.spec)?function(g){var E=g.spec,w=g.pathName,R=g.method,N=g.server,U=g.contextUrl,V=g.serverVariables,X=void 0===V?{}:V,se=ru()(E,["paths",w,(R||"").toLowerCase(),"servers"])||ru()(E,["paths",w,"servers"])||ru()(E,["servers"]),le="",Se=null;if(N&&se&&se.length){var we=Gt()(se).call(se,function(Je){return Je.url});we.indexOf(N)>-1&&(le=N,Se=se[we.indexOf(N)])}if(!le&&se&&se.length){le=se[0].url;var Ae=ye(se,1);Se=Ae[0]}return le.indexOf("{")>-1&&function(g){for(var R,E=[],w=/{([^}]+)}/g;R=w.exec(g);)E.push(R[1]);return E}(le).forEach(function(Je){if(Se.variables&&Se.variables[Je]){var ut=X[Je]||Se.variables[Je].default,Ht=new RegExp("{".concat(Je,"}"),"g");le=le.replace(Ht,ut)}}),function(){var X,se,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",w=ie.parse(g&&E?ie.resolve(E,g):g),R=ie.parse(E),N=hg(w.protocol)||hg(R.protocol)||"",U=w.host||R.host,V=w.pathname||"";return"/"===(X=N&&U?Xe()(se="".concat(N,"://")).call(se,U+V):V)[X.length-1]?ho()(X).call(X,0,-1):X}(le,U)}(g):function(g){var Se,we,E=g.spec,w=g.scheme,R=g.contextUrl,U=ie.parse(void 0===R?"":R),V=Array.isArray(E.schemes)?E.schemes[0]:null,X=w||V||hg(U.protocol)||"http",se=E.host||U.host||"",le=E.basePath||"";return"/"===(Se=X&&se?Xe()(we="".concat(X,"://")).call(we,se+le):le)[Se.length-1]?ho()(Se).call(Se,0,-1):Se}(g)}function tr(g){var E=this,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof g?w.url=g:w=g,!(this instanceof tr))return new tr(w);Q()(this,w);var R=this.resolve().then(function(){return E.disableInterfaces||Q()(E,tr.makeApisTagOperation(E)),E});return R.client=this,R}tr.makeHttp=function(g,E,w){return w=w||function(R){return R},E=E||function(R){return R},function(R){return"string"==typeof R&&(R={url:R}),cd.mergeInQueryOrForm(R),R=E(R),w(g(R))}}.bind(null,tr.http=pr),tr.resolve=Md,tr.resolveSubtree=function(g,E){return ep.apply(this,arguments)},tr.execute=function(g){var E=g.http,w=g.fetch,R=g.spec,N=g.operationId,U=g.pathName,V=g.method,X=g.parameters,se=g.securities,le=function(g,E){if(null==g)return{};var R,N,w=function(g,E){if(null==g)return{};var N,U,w={},R=o(g);for(U=0;U<R.length;U++)N=R[U],!(Ps(E).call(E,N)>=0)&&(w[N]=g[N]);return w}(g,E);if(l){var U=l(g);for(N=0;N<U.length;N++)R=U[N],!(Ps(E).call(E,R)>=0)&&(!Object.prototype.propertyIsEnumerable.call(g,R)||(w[R]=g[R]))}return w}(g,ug),Se=E||w||pr;U&&V&&!N&&(N=u_(U,V));var we=y_.buildRequest(F({spec:R,operationId:N,parameters:X,securities:se,http:Se},le));return we.body&&(g_()(we.body)||Array.isArray(we.body))&&(we.body=Gn()(we.body)),Se(we)},tr.serializeRes=Lh,tr.serializeHeaders=Ph,tr.clearCache=function(){hs.refs.clearCache()},tr.makeApisTagOperation=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E=tp_makeExecute(g);return{apis:tp_mapTagOperations({v2OperationIdCompatibilityMode:g.v2OperationIdCompatibilityMode,spec:g.spec,cb:E})}},tr.buildRequest=C_,tr.helpers={opId:Zh},tr.getBaseUrl=E_,(tr.prototype={http:pr,execute:function(E){return this.applyDefaults(),tr.execute(F({spec:this.spec,http:this.http,securities:{authorized:this.authorizations},contextUrl:"string"==typeof this.url?this.url:void 0,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null},E))},resolve:function(){var E=this,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tr.resolve(F({spec:this.spec,url:this.url,http:this.http||this.fetch,allowMetaPatches:this.allowMetaPatches,useCircularStructures:this.useCircularStructures,requestInterceptor:this.requestInterceptor||null,responseInterceptor:this.responseInterceptor||null,skipNormalization:this.skipNormalization||!1},w)).then(function(R){return E.originalSpec=E.spec,E.spec=R.spec,E.errors=R.errors,E})}}).applyDefaults=function(){var E=this.spec,w=this.url;if(w&&ae()(w).call(w,"http")){var R=ie.parse(w);E.host||(E.host=R.host),E.schemes||(E.schemes=[R.protocol.replace(":","")]),E.basePath||(E.basePath="/")}};var ci=tr.helpers;const Yy=tr},59716:(T,A)=>{"use strict";A.parse=function(h,_){if("string"!=typeof h)throw new TypeError("argument str must be a string");for(var b={},D=_||{},x=h.split(S),G=D.decode||m,j=0;j<x.length;j++){var F=x[j],q=F.indexOf("=");if(!(q<0)){var Q=F.substr(0,q).trim(),Y=F.substr(++q,F.length).trim();'"'==Y[0]&&(Y=Y.slice(1,-1)),null==b[Q]&&(b[Q]=u(Y,G))}}return b},A.serialize=function(h,_,b){var D=b||{},x=D.encode||y;if("function"!=typeof x)throw new TypeError("option encode is invalid");if(!s.test(h))throw new TypeError("argument name is invalid");var G=x(_);if(G&&!s.test(G))throw new TypeError("argument val is invalid");var j=h+"="+G;if(null!=D.maxAge){var F=D.maxAge-0;if(isNaN(F)||!isFinite(F))throw new TypeError("option maxAge is invalid");j+="; Max-Age="+Math.floor(F)}if(D.domain){if(!s.test(D.domain))throw new TypeError("option domain is invalid");j+="; Domain="+D.domain}if(D.path){if(!s.test(D.path))throw new TypeError("option path is invalid");j+="; Path="+D.path}if(D.expires){if("function"!=typeof D.expires.toUTCString)throw new TypeError("option expires is invalid");j+="; Expires="+D.expires.toUTCString()}if(D.httpOnly&&(j+="; HttpOnly"),D.secure&&(j+="; Secure"),D.sameSite)switch("string"==typeof D.sameSite?D.sameSite.toLowerCase():D.sameSite){case!0:j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"strict":j+="; SameSite=Strict";break;case"none":j+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return j};var m=decodeURIComponent,y=encodeURIComponent,S=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function u(h,_){try{return _(h)}catch(b){return h}}},11085:T=>{"use strict";var A=String.prototype.replace,m=/%20/g;T.exports={default:"RFC3986",formatters:{RFC1738:function(S){return A.call(S,m,"+")},RFC3986:function(S){return String(S)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},96912:(T,A,m)=>{"use strict";var y=m(96156),S=m(28895),s=m(11085);T.exports={formats:s,parse:S,stringify:y}},28895:(T,A,m)=>{"use strict";var y=m(45811),S=Object.prototype.hasOwnProperty,s=Array.isArray,o={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:y.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},u=function(j,F){return j&&"string"==typeof j&&F.comma&&j.indexOf(",")>-1?j.split(","):j},x=function(F,q,Q,Y){if(F){var ae=Q.allowDots?F.replace(/\.([^.[]+)/g,"[$1]"):F,he=/(\[[^[\]]*])/g,te=Q.depth>0&&/(\[[^[\]]*])/.exec(ae),Z=te?ae.slice(0,te.index):ae,ee=[];if(Z){if(!Q.plainObjects&&S.call(Object.prototype,Z)&&!Q.allowPrototypes)return;ee.push(Z)}for(var $=0;Q.depth>0&&null!==(te=he.exec(ae))&&$<Q.depth;){if($+=1,!Q.plainObjects&&S.call(Object.prototype,te[1].slice(1,-1))&&!Q.allowPrototypes)return;ee.push(te[1])}return te&&ee.push("["+ae.slice(te.index)+"]"),function(j,F,q,Q){for(var Y=Q?F:u(F,q),ae=j.length-1;ae>=0;--ae){var ie,he=j[ae];if("[]"===he&&q.parseArrays)ie=[].concat(Y);else{ie=q.plainObjects?Object.create(null):{};var te="["===he.charAt(0)&&"]"===he.charAt(he.length-1)?he.slice(1,-1):he,Z=parseInt(te,10);q.parseArrays||""!==te?!isNaN(Z)&&he!==te&&String(Z)===te&&Z>=0&&q.parseArrays&&Z<=q.arrayLimit?(ie=[])[Z]=Y:ie[te]=Y:ie={0:Y}}Y=ie}return Y}(ee,q,Q,Y)}};T.exports=function(j,F){var q=function(F){if(!F)return o;if(null!=F.decoder&&"function"!=typeof F.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==F.charset&&"utf-8"!==F.charset&&"iso-8859-1"!==F.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===F.allowDots?o.allowDots:!!F.allowDots,allowPrototypes:"boolean"==typeof F.allowPrototypes?F.allowPrototypes:o.allowPrototypes,allowSparse:"boolean"==typeof F.allowSparse?F.allowSparse:o.allowSparse,arrayLimit:"number"==typeof F.arrayLimit?F.arrayLimit:o.arrayLimit,charset:void 0===F.charset?o.charset:F.charset,charsetSentinel:"boolean"==typeof F.charsetSentinel?F.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof F.comma?F.comma:o.comma,decoder:"function"==typeof F.decoder?F.decoder:o.decoder,delimiter:"string"==typeof F.delimiter||y.isRegExp(F.delimiter)?F.delimiter:o.delimiter,depth:"number"==typeof F.depth||!1===F.depth?+F.depth:o.depth,ignoreQueryPrefix:!0===F.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof F.interpretNumericEntities?F.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof F.parameterLimit?F.parameterLimit:o.parameterLimit,parseArrays:!1!==F.parseArrays,plainObjects:"boolean"==typeof F.plainObjects?F.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof F.strictNullHandling?F.strictNullHandling:o.strictNullHandling}}(F);if(""===j||null==j)return q.plainObjects?Object.create(null):{};for(var Q="string"==typeof j?function(F,q){var te,Q={},ie=(q.ignoreQueryPrefix?F.replace(/^\?/,""):F).split(q.delimiter,q.parameterLimit===1/0?void 0:q.parameterLimit),he=-1,Z=q.charset;if(q.charsetSentinel)for(te=0;te<ie.length;++te)0===ie[te].indexOf("utf8=")&&("utf8=%E2%9C%93"===ie[te]?Z="utf-8":"utf8=%26%2310003%3B"===ie[te]&&(Z="iso-8859-1"),he=te,te=ie.length);for(te=0;te<ie.length;++te)if(te!==he){var de,J,ee=ie[te],$=ee.indexOf("]="),H=-1===$?ee.indexOf("="):$+1;-1===H?(de=q.decoder(ee,o.decoder,Z,"key"),J=q.strictNullHandling?null:""):(de=q.decoder(ee.slice(0,H),o.decoder,Z,"key"),J=y.maybeMap(u(ee.slice(H+1),q),function(B){return q.decoder(B,o.decoder,Z,"value")})),J&&q.interpretNumericEntities&&"iso-8859-1"===Z&&(J=J.replace(/&#(\d+);/g,function(F,q){return String.fromCharCode(parseInt(q,10))})),ee.indexOf("[]=")>-1&&(J=s(J)?[J]:J),Q[de]=S.call(Q,de)?y.combine(Q[de],J):J}return Q}(j,q):j,Y=q.plainObjects?Object.create(null):{},ae=Object.keys(Q),ie=0;ie<ae.length;++ie){var he=ae[ie],te=x(he,Q[he],q,"string"==typeof j);Y=y.merge(Y,te,q)}return!0===q.allowSparse?Y:y.compact(Y)}},96156:(T,A,m)=>{"use strict";var y=m(73340),S=m(45811),s=m(11085),o=Object.prototype.hasOwnProperty,l={brackets:function(Q){return Q+"[]"},comma:"comma",indices:function(Q,Y){return Q+"["+Y+"]"},repeat:function(Q){return Q}},u=Array.isArray,h=Array.prototype.push,_=function(q,Q){h.apply(q,u(Q)?Q:[Q])},b=Date.prototype.toISOString,D=s.default,x={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:S.encode,encodeValuesOnly:!1,format:D,formatter:s.formatters[D],indices:!1,serializeDate:function(Q){return b.call(Q)},skipNulls:!1,strictNullHandling:!1},j=function q(Q,Y,ae,ie,he,te,Z,ee,$,H,de,J,B,re,ce){var Ee=Q;if(ce.has(Q))throw new RangeError("Cyclic object value");if("function"==typeof Z?Ee=Z(Y,Ee):Ee instanceof Date?Ee=H(Ee):"comma"===ae&&u(Ee)&&(Ee=S.maybeMap(Ee,function(Ke){return Ke instanceof Date?H(Ke):Ke})),null===Ee){if(ie)return te&&!B?te(Y,x.encoder,re,"key",de):Y;Ee=""}if(function(Q){return"string"==typeof Q||"number"==typeof Q||"boolean"==typeof Q||"symbol"==typeof Q||"bigint"==typeof Q}(Ee)||S.isBuffer(Ee))return te?[J(B?Y:te(Y,x.encoder,re,"key",de))+"="+J(te(Ee,x.encoder,re,"value",de))]:[J(Y)+"="+J(String(Ee))];var Pe,ye=[];if(void 0===Ee)return ye;if("comma"===ae&&u(Ee))Pe=[{value:Ee.length>0?Ee.join(",")||null:void 0}];else if(u(Z))Pe=Z;else{var Ue=Object.keys(Ee);Pe=ee?Ue.sort(ee):Ue}for(var Me=0;Me<Pe.length;++Me){var He=Pe[Me],Ye="object"==typeof He&&void 0!==He.value?He.value:Ee[He];if(!he||null!==Ye){var st=u(Ee)?"function"==typeof ae?ae(Y,He):Y:Y+($?"."+He:"["+He+"]");ce.set(Q,!0);var yt=y();_(ye,q(Ye,st,ae,ie,he,te,Z,ee,$,H,de,J,B,re,yt))}}return ye};T.exports=function(q,Q){var ie,Y=q,ae=function(Q){if(!Q)return x;if(null!=Q.encoder&&"function"!=typeof Q.encoder)throw new TypeError("Encoder has to be a function.");var Y=Q.charset||x.charset;if(void 0!==Q.charset&&"utf-8"!==Q.charset&&"iso-8859-1"!==Q.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var ae=s.default;if(void 0!==Q.format){if(!o.call(s.formatters,Q.format))throw new TypeError("Unknown format option provided.");ae=Q.format}var ie=s.formatters[ae],he=x.filter;return("function"==typeof Q.filter||u(Q.filter))&&(he=Q.filter),{addQueryPrefix:"boolean"==typeof Q.addQueryPrefix?Q.addQueryPrefix:x.addQueryPrefix,allowDots:void 0===Q.allowDots?x.allowDots:!!Q.allowDots,charset:Y,charsetSentinel:"boolean"==typeof Q.charsetSentinel?Q.charsetSentinel:x.charsetSentinel,delimiter:void 0===Q.delimiter?x.delimiter:Q.delimiter,encode:"boolean"==typeof Q.encode?Q.encode:x.encode,encoder:"function"==typeof Q.encoder?Q.encoder:x.encoder,encodeValuesOnly:"boolean"==typeof Q.encodeValuesOnly?Q.encodeValuesOnly:x.encodeValuesOnly,filter:he,format:ae,formatter:ie,serializeDate:"function"==typeof Q.serializeDate?Q.serializeDate:x.serializeDate,skipNulls:"boolean"==typeof Q.skipNulls?Q.skipNulls:x.skipNulls,sort:"function"==typeof Q.sort?Q.sort:null,strictNullHandling:"boolean"==typeof Q.strictNullHandling?Q.strictNullHandling:x.strictNullHandling}}(Q);"function"==typeof ae.filter?Y=(0,ae.filter)("",Y):u(ae.filter)&&(ie=ae.filter);var te=[];if("object"!=typeof Y||null===Y)return"";var ee=l[Q&&Q.arrayFormat in l?Q.arrayFormat:Q&&"indices"in Q?Q.indices?"indices":"repeat":"indices"];ie||(ie=Object.keys(Y)),ae.sort&&ie.sort(ae.sort);for(var $=y(),H=0;H<ie.length;++H){var de=ie[H];ae.skipNulls&&null===Y[de]||_(te,j(Y[de],de,ee,ae.strictNullHandling,ae.skipNulls,ae.encode?ae.encoder:null,ae.filter,ae.sort,ae.allowDots,ae.serializeDate,ae.format,ae.formatter,ae.encodeValuesOnly,ae.charset,$))}var J=te.join(ae.delimiter),B=!0===ae.addQueryPrefix?"?":"";return ae.charsetSentinel&&(B+="iso-8859-1"===ae.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),J.length>0?B+J:""}},45811:(T,A,m)=>{"use strict";var y=m(11085),S=Object.prototype.hasOwnProperty,s=Array.isArray,o=function(){for(var Q=[],Y=0;Y<256;++Y)Q.push("%"+((Y<16?"0":"")+Y.toString(16)).toUpperCase());return Q}(),u=function(Y,ae){for(var ie=ae&&ae.plainObjects?Object.create(null):{},he=0;he<Y.length;++he)void 0!==Y[he]&&(ie[he]=Y[he]);return ie};T.exports={arrayToObject:u,assign:function(Y,ae){return Object.keys(ae).reduce(function(ie,he){return ie[he]=ae[he],ie},Y)},combine:function(Y,ae){return[].concat(Y,ae)},compact:function(Y){for(var ae=[{obj:{o:Y},prop:"o"}],ie=[],he=0;he<ae.length;++he)for(var te=ae[he],Z=te.obj[te.prop],ee=Object.keys(Z),$=0;$<ee.length;++$){var H=ee[$],de=Z[H];"object"==typeof de&&null!==de&&-1===ie.indexOf(de)&&(ae.push({obj:Z,prop:H}),ie.push(de))}return function(Y){for(;Y.length>1;){var ae=Y.pop(),ie=ae.obj[ae.prop];if(s(ie)){for(var he=[],te=0;te<ie.length;++te)void 0!==ie[te]&&he.push(ie[te]);ae.obj[ae.prop]=he}}}(ae),Y},decode:function(Q,Y,ae){var ie=Q.replace(/\+/g," ");if("iso-8859-1"===ae)return ie.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(ie)}catch(he){return ie}},encode:function(Y,ae,ie,he,te){if(0===Y.length)return Y;var Z=Y;if("symbol"==typeof Y?Z=Symbol.prototype.toString.call(Y):"string"!=typeof Y&&(Z=String(Y)),"iso-8859-1"===ie)return escape(Z).replace(/%u[0-9a-f]{4}/gi,function(de){return"%26%23"+parseInt(de.slice(2),16)+"%3B"});for(var ee="",$=0;$<Z.length;++$){var H=Z.charCodeAt($);45===H||46===H||95===H||126===H||H>=48&&H<=57||H>=65&&H<=90||H>=97&&H<=122||te===y.RFC1738&&(40===H||41===H)?ee+=Z.charAt($):H<128?ee+=o[H]:H<2048?ee+=o[192|H>>6]+o[128|63&H]:H<55296||H>=57344?ee+=o[224|H>>12]+o[128|H>>6&63]+o[128|63&H]:(H=65536+((1023&H)<<10|1023&Z.charCodeAt($+=1)),ee+=o[240|H>>18]+o[128|H>>12&63]+o[128|H>>6&63]+o[128|63&H])}return ee},isBuffer:function(Y){return!(!Y||"object"!=typeof Y||!(Y.constructor&&Y.constructor.isBuffer&&Y.constructor.isBuffer(Y)))},isRegExp:function(Y){return"[object RegExp]"===Object.prototype.toString.call(Y)},maybeMap:function(Y,ae){if(s(Y)){for(var ie=[],he=0;he<Y.length;he+=1)ie.push(ae(Y[he]));return ie}return ae(Y)},merge:function Q(Y,ae,ie){if(!ae)return Y;if("object"!=typeof ae){if(s(Y))Y.push(ae);else{if(!Y||"object"!=typeof Y)return[Y,ae];(ie&&(ie.plainObjects||ie.allowPrototypes)||!S.call(Object.prototype,ae))&&(Y[ae]=!0)}return Y}if(!Y||"object"!=typeof Y)return[Y].concat(ae);var he=Y;return s(Y)&&!s(ae)&&(he=u(Y,ie)),s(Y)&&s(ae)?(ae.forEach(function(te,Z){if(S.call(Y,Z)){var ee=Y[Z];ee&&"object"==typeof ee&&te&&"object"==typeof te?Y[Z]=Q(ee,te,ie):Y.push(te)}else Y[Z]=te}),Y):Object.keys(ae).reduce(function(te,Z){var ee=ae[Z];return te[Z]=S.call(te,Z)?Q(te[Z],ee,ie):ee,te},he)}}},16958:T=>{var A=T.exports=function(F){return new m(F)};function m(F){this.value=F}function y(F,q,Q){var Y=[],ae=[],ie=!0;return function he(te){var Z=Q?S(te):te,ee={},$=!0,H={node:Z,node_:te,path:[].concat(Y),parent:ae[ae.length-1],parents:ae,key:Y.slice(-1)[0],isRoot:0===Y.length,level:Y.length,circular:null,update:function(B,re){H.isRoot||(H.parent.node[H.key]=B),H.node=B,re&&($=!1)},delete:function(B){delete H.parent.node[H.key],B&&($=!1)},remove:function(B){x(H.parent.node)?H.parent.node.splice(H.key,1):delete H.parent.node[H.key],B&&($=!1)},keys:null,before:function(B){ee.before=B},after:function(B){ee.after=B},pre:function(B){ee.pre=B},post:function(B){ee.post=B},stop:function(){ie=!1},block:function(){$=!1}};if(!ie)return H;function de(){if("object"==typeof H.node&&null!==H.node){(!H.keys||H.node_!==H.node)&&(H.keys=s(H.node)),H.isLeaf=0==H.keys.length;for(var B=0;B<ae.length;B++)if(ae[B].node_===te){H.circular=ae[B];break}}else H.isLeaf=!0,H.keys=null;H.notLeaf=!H.isLeaf,H.notRoot=!H.isRoot}de();var J=q.call(H,H.node);return void 0!==J&&H.update&&H.update(J),ee.before&&ee.before.call(H,H.node),$&&("object"==typeof H.node&&null!==H.node&&!H.circular&&(ae.push(H),de(),G(H.keys,function(B,re){Y.push(B),ee.pre&&ee.pre.call(H,H.node[B],B);var ce=he(H.node[B]);Q&&j.call(H.node,B)&&(H.node[B]=ce.node),ce.isLast=re==H.keys.length-1,ce.isFirst=0==re,ee.post&&ee.post.call(H,ce),Y.pop()}),ae.pop()),ee.after&&ee.after.call(H,H.node)),H}(F).node}function S(F){if("object"==typeof F&&null!==F){var q;if(x(F))q=[];else if(function(F){return"[object Date]"===o(F)}(F))q=new Date(F.getTime?F.getTime():F);else if(function(F){return"[object RegExp]"===o(F)}(F))q=new RegExp(F);else if(function(F){return"[object Error]"===o(F)}(F))q={message:F.message};else if(function(F){return"[object Boolean]"===o(F)}(F))q=new Boolean(F);else if(function(F){return"[object Number]"===o(F)}(F))q=new Number(F);else if(function(F){return"[object String]"===o(F)}(F))q=new String(F);else if(Object.create&&Object.getPrototypeOf)q=Object.create(Object.getPrototypeOf(F));else if(F.constructor===Object)q={};else{var Y=function(){};Y.prototype=F.constructor&&F.constructor.prototype||F.__proto__||{},q=new Y}return G(s(F),function(ae){q[ae]=F[ae]}),q}return F}m.prototype.get=function(F){for(var q=this.value,Q=0;Q<F.length;Q++){var Y=F[Q];if(!q||!j.call(q,Y)){q=void 0;break}q=q[Y]}return q},m.prototype.has=function(F){for(var q=this.value,Q=0;Q<F.length;Q++){var Y=F[Q];if(!q||!j.call(q,Y))return!1;q=q[Y]}return!0},m.prototype.set=function(F,q){for(var Q=this.value,Y=0;Y<F.length-1;Y++){var ae=F[Y];j.call(Q,ae)||(Q[ae]={}),Q=Q[ae]}return Q[F[Y]]=q,q},m.prototype.map=function(F){return y(this.value,F,!0)},m.prototype.forEach=function(F){return this.value=y(this.value,F,!1),this.value},m.prototype.reduce=function(F,q){var Q=1===arguments.length,Y=Q?this.value:q;return this.forEach(function(ae){(!this.isRoot||!Q)&&(Y=F.call(this,Y,ae))}),Y},m.prototype.paths=function(){var F=[];return this.forEach(function(q){F.push(this.path)}),F},m.prototype.nodes=function(){var F=[];return this.forEach(function(q){F.push(this.node)}),F},m.prototype.clone=function(){var F=[],q=[];return function Q(Y){for(var ae=0;ae<F.length;ae++)if(F[ae]===Y)return q[ae];if("object"==typeof Y&&null!==Y){var ie=S(Y);return F.push(Y),q.push(ie),G(s(Y),function(he){ie[he]=Q(Y[he])}),F.pop(),q.pop(),ie}return Y}(this.value)};var s=Object.keys||function(q){var Q=[];for(var Y in q)Q.push(Y);return Q};function o(F){return Object.prototype.toString.call(F)}var x=Array.isArray||function(q){return"[object Array]"===Object.prototype.toString.call(q)},G=function(F,q){if(F.forEach)return F.forEach(q);for(var Q=0;Q<F.length;Q++)q(F[Q],Q,F)};G(s(m.prototype),function(F){A[F]=function(q){var Q=[].slice.call(arguments,1),Y=new m(q);return Y[F].apply(Y,Q)}});var j=Object.hasOwnProperty||function(F,q){return q in F}},58872:function(T,A,m){var y;T=m.nmd(T),function(S){"object"==typeof global&&global;var u,h=2147483647,_=36,Q=/^xn--/,Y=/[^\x20-\x7E]/,ae=/[\x2E\u3002\uFF0E\uFF61]/g,ie={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},te=Math.floor,Z=String.fromCharCode;function $(Me){throw RangeError(ie[Me])}function H(Me,He){for(var Ye=Me.length,st=[];Ye--;)st[Ye]=He(Me[Ye]);return st}function de(Me,He){var Ye=Me.split("@"),st="";return Ye.length>1&&(st=Ye[0]+"@",Me=Ye[1]),st+H((Me=Me.replace(ae,".")).split("."),He).join(".")}function J(Me){for(var yt,Ke,He=[],Ye=0,st=Me.length;Ye<st;)(yt=Me.charCodeAt(Ye++))>=55296&&yt<=56319&&Ye<st?56320==(64512&(Ke=Me.charCodeAt(Ye++)))?He.push(((1023&yt)<<10)+(1023&Ke)+65536):(He.push(yt),Ye--):He.push(yt);return He}function B(Me){return H(Me,function(He){var Ye="";return He>65535&&(Ye+=Z((He-=65536)>>>10&1023|55296),He=56320|1023&He),Ye+Z(He)}).join("")}function re(Me){return Me-48<10?Me-22:Me-65<26?Me-65:Me-97<26?Me-97:_}function ce(Me,He){return Me+22+75*(Me<26)-((0!=He)<<5)}function Ee(Me,He,Ye){var st=0;for(Me=Ye?te(Me/700):Me>>1,Me+=te(Me/He);Me>455;st+=_)Me=te(Me/35);return te(st+36*Me/(Me+38))}function pe(Me){var st,kt,tn,Mn,Gn,An,Gt,Dn,Bt,vn,He=[],Ye=Me.length,yt=0,Ke=128,Tt=72;for((kt=Me.lastIndexOf("-"))<0&&(kt=0),tn=0;tn<kt;++tn)Me.charCodeAt(tn)>=128&&$("not-basic"),He.push(Me.charCodeAt(tn));for(Mn=kt>0?kt+1:0;Mn<Ye;){for(Gn=yt,An=1,Gt=_;Mn>=Ye&&$("invalid-input"),((Dn=re(Me.charCodeAt(Mn++)))>=_||Dn>te((h-yt)/An))&&$("overflow"),yt+=Dn*An,!(Dn<(Bt=Gt<=Tt?1:Gt>=Tt+26?26:Gt-Tt));Gt+=_)An>te(h/(vn=_-Bt))&&$("overflow"),An*=vn;Tt=Ee(yt-Gn,st=He.length+1,0==Gn),te(yt/st)>h-Ke&&$("overflow"),Ke+=te(yt/st),yt%=st,He.splice(yt++,0,Ke)}return B(He)}function ye(Me){var He,Ye,st,yt,Ke,Tt,kt,tn,Mn,Gn,An,Dn,Bt,vn,Xe,Gt=[];for(Dn=(Me=J(Me)).length,He=128,Ye=0,Ke=72,Tt=0;Tt<Dn;++Tt)(An=Me[Tt])<128&&Gt.push(Z(An));for(st=yt=Gt.length,yt&&Gt.push("-");st<Dn;){for(kt=h,Tt=0;Tt<Dn;++Tt)(An=Me[Tt])>=He&&An<kt&&(kt=An);for(kt-He>te((h-Ye)/(Bt=st+1))&&$("overflow"),Ye+=(kt-He)*Bt,He=kt,Tt=0;Tt<Dn;++Tt)if((An=Me[Tt])<He&&++Ye>h&&$("overflow"),An==He){for(tn=Ye,Mn=_;!(tn<(Gn=Mn<=Ke?1:Mn>=Ke+26?26:Mn-Ke));Mn+=_)Gt.push(Z(ce(Gn+(Xe=tn-Gn)%(vn=_-Gn),0))),tn=te(Xe/vn);Gt.push(Z(ce(tn,0))),Ke=Ee(Ye,Bt,st==yt),Ye=0,++st}++Ye,++He}return Gt.join("")}u={version:"1.3.2",ucs2:{decode:J,encode:B},decode:pe,encode:ye,toASCII:function(Me){return de(Me,function(He){return Y.test(He)?"xn--"+ye(He):He})},toUnicode:function(Me){return de(Me,function(He){return Q.test(He)?pe(He.slice(4).toLowerCase()):He})}},void 0!==(y=function(){return u}.call(A,m,A,T))&&(T.exports=y)}()},77526:(T,A,m)=>{"use strict";var y=m(58872),S=m(98893);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}A.parse=ie,A.resolve=function(ee,$){return ie(ee,!1,!0).resolve($)},A.resolveObject=function(ee,$){return ee?ie(ee,!1,!0).resolveObject($):$},A.format=function(ee){return S.isString(ee)&&(ee=ie(ee)),ee instanceof s?ee.format():s.prototype.format.call(ee)},A.Url=s;var o=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,_=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),b=["'"].concat(_),D=["%","/","?",";","#"].concat(b),x=["/","?","#"],j=/^[+a-z0-9A-Z_-]{0,63}$/,F=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,q={javascript:!0,"javascript:":!0},Q={javascript:!0,"javascript:":!0},Y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ae=m(1521);function ie(ee,$,H){if(ee&&S.isObject(ee)&&ee instanceof s)return ee;var de=new s;return de.parse(ee,$,H),de}s.prototype.parse=function(ee,$,H){if(!S.isString(ee))throw new TypeError("Parameter 'url' must be a string, not "+typeof ee);var de=ee.indexOf("?"),J=-1!==de&&de<ee.indexOf("#")?"?":"#",B=ee.split(J);B[0]=B[0].replace(/\\/g,"/");var ce=ee=B.join(J);if(ce=ce.trim(),!H&&1===ee.split("#").length){var Ee=u.exec(ce);if(Ee)return this.path=ce,this.href=ce,this.pathname=Ee[1],Ee[2]?(this.search=Ee[2],this.query=$?ae.parse(this.search.substr(1)):this.search.substr(1)):$&&(this.search="",this.query={}),this}var pe=o.exec(ce);if(pe){var ye=(pe=pe[0]).toLowerCase();this.protocol=ye,ce=ce.substr(pe.length)}if(H||pe||ce.match(/^\/\/[^@\/]+@[^@\/]+/)){var Pe="//"===ce.substr(0,2);Pe&&(!pe||!Q[pe])&&(ce=ce.substr(2),this.slashes=!0)}if(!Q[pe]&&(Pe||pe&&!Y[pe])){for(var Ue=-1,Me=0;Me<x.length;Me++)-1!==(He=ce.indexOf(x[Me]))&&(-1===Ue||He<Ue)&&(Ue=He);var Ye,st;for(-1!==(st=-1===Ue?ce.lastIndexOf("@"):ce.lastIndexOf("@",Ue))&&(Ye=ce.slice(0,st),ce=ce.slice(st+1),this.auth=decodeURIComponent(Ye)),Ue=-1,Me=0;Me<D.length;Me++){var He;-1!==(He=ce.indexOf(D[Me]))&&(-1===Ue||He<Ue)&&(Ue=He)}-1===Ue&&(Ue=ce.length),this.host=ce.slice(0,Ue),ce=ce.slice(Ue),this.parseHost(),this.hostname=this.hostname||"";var yt="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!yt)for(var Ke=this.hostname.split(/\./),Tt=(Me=0,Ke.length);Me<Tt;Me++){var kt=Ke[Me];if(kt&&!kt.match(j)){for(var tn="",Mn=0,Gn=kt.length;Mn<Gn;Mn++)kt.charCodeAt(Mn)>127?tn+="x":tn+=kt[Mn];if(!tn.match(j)){var An=Ke.slice(0,Me),Gt=Ke.slice(Me+1),Dn=kt.match(F);Dn&&(An.push(Dn[1]),Gt.unshift(Dn[2])),Gt.length&&(ce="/"+Gt.join(".")+ce),this.hostname=An.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),yt||(this.hostname=y.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,yt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ce[0]&&(ce="/"+ce))}if(!q[ye])for(Me=0,Tt=b.length;Me<Tt;Me++){var Xe=b[Me];if(-1!==ce.indexOf(Xe)){var vi=encodeURIComponent(Xe);vi===Xe&&(vi=escape(Xe)),ce=ce.split(Xe).join(vi)}}var ln=ce.indexOf("#");-1!==ln&&(this.hash=ce.substr(ln),ce=ce.slice(0,ln));var hi=ce.indexOf("?");return-1!==hi?(this.search=ce.substr(hi),this.query=ce.substr(hi+1),$&&(this.query=ae.parse(this.query)),ce=ce.slice(0,hi)):$&&(this.search="",this.query={}),ce&&(this.pathname=ce),Y[ye]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},s.prototype.format=function(){var ee=this.auth||"";ee&&(ee=(ee=encodeURIComponent(ee)).replace(/%3A/i,":"),ee+="@");var $=this.protocol||"",H=this.pathname||"",de=this.hash||"",J=!1,B="";this.host?J=ee+this.host:this.hostname&&(J=ee+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(J+=":"+this.port)),this.query&&S.isObject(this.query)&&Object.keys(this.query).length&&(B=ae.stringify(this.query));var re=this.search||B&&"?"+B||"";return $&&":"!==$.substr(-1)&&($+=":"),this.slashes||(!$||Y[$])&&!1!==J?(J="//"+(J||""),H&&"/"!==H.charAt(0)&&(H="/"+H)):J||(J=""),de&&"#"!==de.charAt(0)&&(de="#"+de),re&&"?"!==re.charAt(0)&&(re="?"+re),$+J+(H=H.replace(/[?#]/g,function(ce){return encodeURIComponent(ce)}))+(re=re.replace("#","%23"))+de},s.prototype.resolve=function(ee){return this.resolveObject(ie(ee,!1,!0)).format()},s.prototype.resolveObject=function(ee){if(S.isString(ee)){var $=new s;$.parse(ee,!1,!0),ee=$}for(var H=new s,de=Object.keys(this),J=0;J<de.length;J++){var B=de[J];H[B]=this[B]}if(H.hash=ee.hash,""===ee.href)return H.href=H.format(),H;if(ee.slashes&&!ee.protocol){for(var re=Object.keys(ee),ce=0;ce<re.length;ce++){var Ee=re[ce];"protocol"!==Ee&&(H[Ee]=ee[Ee])}return Y[H.protocol]&&H.hostname&&!H.pathname&&(H.path=H.pathname="/"),H.href=H.format(),H}if(ee.protocol&&ee.protocol!==H.protocol){if(!Y[ee.protocol]){for(var pe=Object.keys(ee),ye=0;ye<pe.length;ye++){var Pe=pe[ye];H[Pe]=ee[Pe]}return H.href=H.format(),H}if(H.protocol=ee.protocol,ee.host||Q[ee.protocol])H.pathname=ee.pathname;else{for(var Tt=(ee.pathname||"").split("/");Tt.length&&!(ee.host=Tt.shift()););ee.host||(ee.host=""),ee.hostname||(ee.hostname=""),""!==Tt[0]&&Tt.unshift(""),Tt.length<2&&Tt.unshift(""),H.pathname=Tt.join("/")}return H.search=ee.search,H.query=ee.query,H.host=ee.host||"",H.auth=ee.auth,H.hostname=ee.hostname||ee.host,H.port=ee.port,(H.pathname||H.search)&&(H.path=(H.pathname||"")+(H.search||"")),H.slashes=H.slashes||ee.slashes,H.href=H.format(),H}var He=H.pathname&&"/"===H.pathname.charAt(0),Ye=ee.host||ee.pathname&&"/"===ee.pathname.charAt(0),st=Ye||He||H.host&&ee.pathname,yt=st,Ke=H.pathname&&H.pathname.split("/")||[],kt=(Tt=ee.pathname&&ee.pathname.split("/")||[],H.protocol&&!Y[H.protocol]);if(kt&&(H.hostname="",H.port=null,H.host&&(""===Ke[0]?Ke[0]=H.host:Ke.unshift(H.host)),H.host="",ee.protocol&&(ee.hostname=null,ee.port=null,ee.host&&(""===Tt[0]?Tt[0]=ee.host:Tt.unshift(ee.host)),ee.host=null),st=st&&(""===Tt[0]||""===Ke[0])),Ye)H.host=ee.host||""===ee.host?ee.host:H.host,H.hostname=ee.hostname||""===ee.hostname?ee.hostname:H.hostname,H.search=ee.search,H.query=ee.query,Ke=Tt;else if(Tt.length)Ke||(Ke=[]),Ke.pop(),Ke=Ke.concat(Tt),H.search=ee.search,H.query=ee.query;else if(!S.isNullOrUndefined(ee.search))return kt&&(H.hostname=H.host=Ke.shift(),(tn=!!(H.host&&H.host.indexOf("@")>0)&&H.host.split("@"))&&(H.auth=tn.shift(),H.host=H.hostname=tn.shift())),H.search=ee.search,H.query=ee.query,(!S.isNull(H.pathname)||!S.isNull(H.search))&&(H.path=(H.pathname?H.pathname:"")+(H.search?H.search:"")),H.href=H.format(),H;if(!Ke.length)return H.pathname=null,H.path=H.search?"/"+H.search:null,H.href=H.format(),H;for(var Mn=Ke.slice(-1)[0],Gn=(H.host||ee.host||Ke.length>1)&&("."===Mn||".."===Mn)||""===Mn,An=0,Gt=Ke.length;Gt>=0;Gt--)"."===(Mn=Ke[Gt])?Ke.splice(Gt,1):".."===Mn?(Ke.splice(Gt,1),An++):An&&(Ke.splice(Gt,1),An--);if(!st&&!yt)for(;An--;An)Ke.unshift("..");st&&""!==Ke[0]&&(!Ke[0]||"/"!==Ke[0].charAt(0))&&Ke.unshift(""),Gn&&"/"!==Ke.join("/").substr(-1)&&Ke.push("");var tn,Dn=""===Ke[0]||Ke[0]&&"/"===Ke[0].charAt(0);return kt&&(H.hostname=H.host=Dn?"":Ke.length?Ke.shift():"",(tn=!!(H.host&&H.host.indexOf("@")>0)&&H.host.split("@"))&&(H.auth=tn.shift(),H.host=H.hostname=tn.shift())),(st=st||H.host&&Ke.length)&&!Dn&&Ke.unshift(""),Ke.length?H.pathname=Ke.join("/"):(H.pathname=null,H.path=null),(!S.isNull(H.pathname)||!S.isNull(H.search))&&(H.path=(H.pathname?H.pathname:"")+(H.search?H.search:"")),H.auth=ee.auth||H.auth,H.slashes=H.slashes||ee.slashes,H.href=H.format(),H},s.prototype.parseHost=function(){var ee=this.host,$=l.exec(ee);$&&(":"!==($=$[0])&&(this.port=$.substr(1)),ee=ee.substr(0,ee.length-$.length)),ee&&(this.hostname=ee)}},98893:T=>{"use strict";T.exports={isString:function(A){return"string"==typeof A},isObject:function(A){return"object"==typeof A&&null!==A},isNull:function(A){return null===A},isNullOrUndefined:function(A){return null==A}}},96553:()=>{}},T=>{T(T.s=77972)}]);